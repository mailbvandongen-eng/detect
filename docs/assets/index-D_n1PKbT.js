const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/romeinseFortenOL-2pB6VJkW.js","assets/iconStyles-j-kOggZP.js","assets/kastelenOL-BiUPct1m.js","assets/ruinesOL-BzYEhClb.js","assets/hunebeddenOL-O2zbWSA5.js","assets/uikavArcheoPuntenOL-CM-t3t5-.js","assets/speeltuinenOL-Bv9gkpNW.js","assets/museaOL-7OePzE2s.js","assets/kringloopwinkelsOL-CoRjJQQc.js","assets/fossielenOL-DNLutVlg.js","assets/fossielUtils-C5sBCk0Z.js","assets/fossielenBelgieOL-DwdZ0alM.js","assets/fossielenDuitslandOL-Dsme9qDI.js","assets/fossielenFrankrijkOL-CXdSz-Hg.js","assets/bunkersOL-p2su2ILQ.js","assets/grafheuvelsOL-_3CnFCuy.js","assets/slagveldenOL-Co12JM58.js","assets/frankrijkMonumentenOL-XQUueeFa.js","assets/inrapSitesFROL-DX6rH0qe.js","assets/IdentityManager-DnsDZJCc.js","assets/substitute-BfohF1ua.js","assets/ElevationLayer-C9Uj16uq.js","assets/MultiOriginJSONSupport-BEGBEupq.js","assets/ArcGISCachedService-CofSR4nQ.js","assets/TileInfoTilemapCache-hz9TQKu7.js","assets/TilemapCache-CzJbZ2Od.js","assets/LRUCache-B2Fzt-VN.js","assets/MemCache-By4i2-05.js","assets/memoryEstimations-DkbAC0HS.js","assets/ArcGISService-DP_x0lBS.js","assets/OperationalLayer-BSV3AnCj.js","assets/layerContainerType-CSXZNpHb.js","assets/ElevationInfo-DWq_OnhL.js","assets/lengthUtils-Dwp6U5uZ.js","assets/PortalLayer-C0mLpNmR.js","assets/portalItemUtils-B340IDrX.js","assets/WorkerHandle-Cq6eOfEj.js","assets/portalLayers-B3VdJNdo.js","assets/associatedFeatureServiceUtils-CNRR3-zw.js","assets/fetchService-C6od6uyM.js","assets/loadUtils-iNzD6hK8.js","assets/lazyLayerLoader-BZddS12V.js","assets/arcgisLayers-B8zQZ_Fs.js","assets/layersCreator-BqovF9Ym.js","assets/styleUtils-F6s8kG-N.js","assets/ElevationQuery-BFm-VyF_.js","assets/GeometryDescriptor-DpEhuEYp.js","assets/projectOperator-BnhAoPVV.js","assets/operatorProject-DQ6iNob7.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/projectOperator-Dzv8VC3g.js","assets/statsWorker-CpGdLfRT.js","assets/utils-BFfa3pv2.js","assets/quantizationUtils-C5wmwmgA.js","assets/heatmapUtils-DSfX0Stq.js","assets/vec42-DF3pcTqT.js","assets/vec4f64-DPb6J-GU.js","assets/utils-DQUmfb64.js","assets/utils-Cg4cRlM9.js","assets/ClassBreaksDefinition-CBp_UE6W.js","assets/geometryEngineWorker-BkMQzpX8.js","assets/geometryEngineJSON-B_JiqPb-.js","assets/geometryEngineBase-BQTefT4Y.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/CSVSourceWorker-Bpz16hAk.js","assets/date-DCujAECq.js","assets/OptimizedFeature-BmWLAsgv.js","assets/FeatureStore-Dw3dOEpo.js","assets/featureConversionUtils-_c5i65SW.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/BoundsStore-fo7Bnsx-.js","assets/PooledRBush-BD7t0Bhp.js","assets/timeSupport-Ch8QjxGB.js","assets/queryUtils-Cynm9HEA.js","assets/optimizedFeatureQueryEngineAdapter-BmG8M2_P.js","assets/QueryEngine-DltuUXN5.js","assets/WhereClauseCache-CZ_V2O1i.js","assets/WhereClause-CH6kUUao.js","assets/TimeOnly-_Jo0hMn-.js","assets/enum-0ID9cEiB.js","assets/UnknownTimeZone-B6cXIOd_.js","assets/QueryEngineCapabilities-DJC_YILC.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-t6qHPhra.js","assets/NormalizationBinParametersMixin-CokdoKa1.js","assets/FieldsIndex-H8HOU0k1.js","assets/number-79Zt7n-H.js","assets/locationUtils-iTlgSF60.js","assets/clientSideDefaults-DDo-45uj.js","assets/defaultsJSON-GKolV7NZ.js","assets/EdgeProcessingWorker-BooTWrA2.js","assets/workerHelper-0dJndMJ6.js","assets/InterleavedLayout-DWIMC9mO.js","assets/BufferView-CSA5sB8m.js","assets/types-BKo2foNY.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/VertexAttributeLocations-BfZbt_DV.js","assets/edgeProcessing-4ahUollH.js","assets/deduplicate-B2HoOPfv.js","assets/Indices-BaKaKg_1.js","assets/Normals-DFE-EEqf.js","assets/ElevationSamplerWorker-DWv0iQP3.js","assets/MeshLocalVertexSpace-COCrJELE.js","assets/vertexSpaceConversion-DNNajEoq.js","assets/spatialReferenceEllipsoidUtils-BY-BCVx_.js","assets/computeTranslationToOriginAndRotation-Cdcspnj6.js","assets/projectPointToVector-0ja0Fmig.js","assets/meshVertexSpaceUtils-DV_6HIDf.js","assets/vec3-Bp8ugqXh.js","assets/vec4-BWLm9yAc.js","assets/FeatureServiceSnappingSourceWorker-C4DfneCK.js","assets/symbologySnappingCandidates-xDjP7H_3.js","assets/pbfQueryUtils-NWyGSVIN.js","assets/pbf-B6gIHn89.js","assets/query-Cv8TXoOn.js","assets/queryZScale-D615fVpn.js","assets/GeoJSONSourceWorker-ODfdPbVp.js","assets/geojson-BIfX3ENY.js","assets/sourceUtils-B2JlGorY.js","assets/MemorySourceWorker-CzwyGOmb.js","assets/objectIdUtils-BmFjqQA3.js","assets/PBFDecoderWorker-CrmGPSMW.js","assets/dehydratedFeatures-jBWxzEsA.js","assets/FeaturePipelineWorker-CRYBl2z7.js","assets/diffUtils-BWQt_nM0.js","assets/AttributeStore-DF5lG7bS.js","assets/Utils-Cxle2KtD.js","assets/BoundingBox-BpFXOAtL.js","assets/UpdateTracking2D-DTe_Z94Z.js","assets/ArcadeExpression-BpX3V1Oh.js","assets/FeatureStoreQueryAdapter-DuyQvthf.js","assets/labelPoint-CDQ1T8nv.js","assets/labelUtils-DgG7wej5.js","assets/utils-DQaLv0i_.js","assets/defaultCIMValues-XI-Li77m.js","assets/constants-BBnGEY1d.js","assets/streamLayerUtils-DFlbJ4P1.js","assets/DictionaryScriptEvaluator-B2nm8GM3.js","assets/MeshWriterRegistry-CrkNp7fZ.js","assets/rasterizingUtils-Ci7tdFWG.js","assets/CIMSymbolHelper-BjRBPt9f.js","assets/BidiEngine-BvER9tXK.js","assets/GeometryUtils-ZGHMvbuG.js","assets/Rect-CUzevAry.js","assets/defaults-B6oC3_bs.js","assets/TexturedLineMeshWriter-DPdjz_DW.js","assets/TurboLine-PYEUwC5j.js","assets/grouping-D9LWmc0M.js","assets/QueueProcessor-CQoq3fbC.js","assets/FeatureMetadata-C0UTloYw.js","assets/SourceChunkStore-BGJv7HpW.js","assets/parquet-DJHCbMnt.js","assets/operatorGeodeticDensify-BkEnBgZr.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-BZYabBB6.js","assets/FeatureIdInfo-Bi-_bOZ1.js","assets/displayFilterUtils-CAOdzRCw.js","assets/ogcFeatureUtils-BMUT7ZSp.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-BVQeTh7B.js","assets/PointCloudWorker-C50JGtLT.js","assets/quat-VOSLV_bs.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-WCVSSNPR.js","assets/PointCloudUniqueValueRenderer-B0H_GAJZ.js","assets/RendererLegendOptions-s3a9nrRO.js","assets/ColorStop-DghGnMPc.js","assets/I3SBinaryReader-DNGihpoI.js","assets/orientedBoundingBox-BtiXqwJK.js","assets/plane-D1Iku3hB.js","assets/vectorStacks-DdRfxmgI.js","assets/RasterWorker-BseTJh_7.js","assets/PixelBlock-BEph43oz.js","assets/RasterSymbolizer-CJ5Zn04R.js","assets/vectorFieldUtils-D11fBMlH.js","assets/colorUtils-D90yYEF_.js","assets/rasterFunctionHelper-fNEoyZcd.js","assets/clipUtils-BHMUZWJy.js","assets/rasterProjectionHelper-CZWTAO52.js","assets/colorRamps-DzwdUFBa.js","assets/PolynomialTransform-BluxriCu.js","assets/dataUtils-B_w2UqRV.js","assets/SceneLayerSnappingSourceWorker-ByztIysS.js","assets/lineSegment-BhnM7ZvM.js","assets/sphere-BHFcVNSX.js","assets/Octree-Bir-24U-.js","assets/frustum-BNMS3Xo6.js","assets/SceneLayerWorker-9ZxZnq7s.js","assets/projectVectorToVector-Cv3i3JA0.js","assets/WFSSourceWorker-U6dKiiYl.js","assets/wfsUtils-DU9j_vSW.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-DtfCERFG.js","assets/constants-BHYAGdRm.js","assets/config-BOD8--da.js","assets/SourceLayerData-b5KK9Qyu.js","assets/StyleRepository-BpiVHOjl.js","assets/earcut-D9gy186-.js","assets/Feature3DPipelineWorker-C2xAQ_Ko.js","assets/jsonUtils-MFEf1SUl.js","assets/typeUtils-C7NjmCdv.js","assets/ClassBreaksRenderer-2H1kcQDH.js","assets/commonProperties-CcKtfuDx.js","assets/visualVariableUtils-Degztywz.js","assets/jsonUtils-fVPpqA_x.js","assets/defaults3D-DpEn_6q2.js","assets/SimpleRenderer-DQHURdoA.js","assets/UniqueValueRenderer-BVt7SUyR.js","assets/styleUtils-s6HoV7DE.js","assets/HUDMaterial.glsl-r_z4J7VJ.js","assets/hydratedFeatures-CTlSwLd0.js","assets/OutputColorHighlightOID.glsl-DIlU6pr7.js","assets/triangle-lJA224IW.js","assets/renderState-CKc66y4x.js","assets/glsl-B5bJgrnA.js","assets/ShaderBuilder-m8UcyUV_.js","assets/placementUtils-Bt_6YwZj.js","assets/sdfPrimitives-B7u85BXd.js","assets/Texture-CRhUQIGU.js","assets/videoUtils-C2I7QdnC.js","assets/requestImageUtils-BCFjo1Fx.js","assets/RealisticTree.glsl-Yg4MBsud.js","assets/DefaultMaterial-D1Ah-6p8.js","assets/VertexBuffer-sCQPMEsp.js","assets/BufferObject-DG81aUoM.js","assets/boundedPlane-wZ41D8Ql.js","assets/FlowWorker-DucK-DRn.js","assets/ParquetSourceWorker-DTdYFCUk.js","assets/parquetUtils-C_IW-ZFc.js","assets/PanoramicMeshWorker--EWKRx7C.js","assets/Popup-BV8EEl3k.js","assets/throttle-rgrfIZYX.js","assets/unitFormatUtils-C76h8qAC.js","assets/quantityUtils-g7uZomVH.js","assets/AttachmentInfo-D9Mp1jSg.js","assets/labelingInfo-fPa4j1vm.js","assets/featureUtils-C2iSyq74.js","assets/utils-DJlXfjPJ.js","assets/cimSymbolUtils-S5qoTy58.js","assets/executeQueryJSON-D2df4yje.js","assets/FeatureSet-BaQG67Y7.js","assets/shared-4YXIRPdP.js","assets/isImageryGraphicOrigin-Ccuhb4eK.js","assets/isImageryTileGraphicOrigin-ZR-gBf9D.js","assets/FeatureLayer-CGzaGtL-.js","assets/FormTemplate-CcZmum0r.js","assets/GraphicOrigin-B0Zgfx9I.js","assets/editsZScale-Cne-SIq9.js","assets/APIKeyMixin-BMvQnKR7.js","assets/BlendLayer-BqlALzng.js","assets/jsonUtils-CobPdYqm.js","assets/parser-D22qHvrQ.js","assets/CustomParametersMixin-CCz434Ag.js","assets/DisplayFilteredLayer-DwfmXC6A.js","assets/scaleUtils-h0wlhZiq.js","assets/EditBusLayer-DhwQ0GZr.js","assets/FeatureEffectLayer-H4pBvCfd.js","assets/FeatureEffect-8MvIPRBN.js","assets/FeatureFilter-XYAsE8MJ.js","assets/FeatureLayerBase-BcVYDM_E.js","assets/LayerFloorInfo-C9-Lcg1K.js","assets/multiLayerServiceUtils-CXGWGUie.js","assets/Relationship--iueHBze.js","assets/serviceCapabilitiesUtils-r-K2qsBY.js","assets/infoFor3D-DhzudQro.js","assets/FeatureReductionLayer-76Y1j0Wp.js","assets/FeatureReductionSelection-B7r5axEl.js","assets/OrderedLayer-BXT5Zj6u.js","assets/OrderByInfo-jYxN1B_r.js","assets/RefreshableLayer-DAZWJq9T.js","assets/ScaleRangeLayer-BOEzy4aj.js","assets/TemporalLayer-Ccdl6SCK.js","assets/TimeInfo-668eRC-9.js","assets/TrackableLayer-CndaeQr0.js","assets/FeatureTemplate-C48IdrKj.js","assets/FeatureType-l5NtGioa.js","assets/fieldProperties-CSAWBd4z.js","assets/TitleCreator-BucSiVYS.js","assets/versionUtils-Cd4ednTi.js","assets/popupUtils-BJlYODm8.js","assets/NetworkElement-DsIjJraA.js","assets/ReactiveSet-nKK42Gmv.js","assets/symbolUtils-D-u8fmLf.js","assets/layerViewUtils-BjyPs6fm.js","assets/arcadeUtils-DQf4eKCa.js","assets/arcade-BSETWDng.js","assets/arcadeEnvironment-BEmRnjTp.js","assets/Dictionary-DZW7gB-S.js","assets/ImmutableArray-BPVd6ESQ.js","assets/Feature-DSCNxDkW.js","assets/aiServices-CPIEms7c.js","assets/commonProperties-DHiB1uzW.js","assets/unitConversion-DAvAbyOY.js","assets/rasterFieldUtils-CQnQu3Bz.js","assets/batchExec-p8TOZQEk.js","assets/webStyleSymbolUtils-DH-EECFT.js","assets/devEnvironmentUtils-8WtPGj6h.js","assets/geometryServiceUtils-nirLJjHY.js","assets/project-Bqnuvxmb.js","assets/webglDeps-C48zTcMT.js","assets/FramebufferObject-Bn9ZiMsc.js","assets/ProgramTemplate-CmSUcVbs.js","assets/VertexArrayObject-BmvheEBC.js","assets/mapViewDeps-HlEDu9W8.js","assets/FeatureCommandQueue-B26LOFgy.js","assets/GraphShaderModule-2C-TUwvs.js","assets/utils-BNPj-DK2.js","assets/WGLContainer-CELHRbog.js","assets/Container-CUKr6VYX.js","assets/SDFHelper-D4UBMeuW.js","assets/OverrideHelper-CCPAQ5OI.js","assets/callExpressionWithFeature-D90mJ58x.js","assets/GridShader-DObr38VQ.js","assets/testSVGPremultipliedAlpha-CQw52Brw.js","assets/SymbolFader-Bud_YfJ6.js","assets/RenderingContext-CyLC9tCO.js","assets/CIMResourceManager-Dj_ScbbM.js","assets/utils-Cz5BzVFl.js","assets/utils-DDjZAYSk.js","assets/GraphicsView2D-2LBm4Aop.js","assets/GraphicContainer-BYoyxBw6.js","assets/AGraphicContainer--1C2-f2A.js","assets/TechniqueInstance-BZ5GpHui.js","assets/TileContainer-BGiJrp8P.js","assets/gridUtils-BHSEMQ74.js","assets/geodesicUtils-BprRd8t7.js","assets/TileLayerView2D-DGmdAneU.js","assets/imageUtils-CFnAwVOW.js","assets/BitmapTechnique-Hd8oeYHa.js","assets/bitmapUtils-B5aOudqB.js","assets/LayerView2D-BAvh72l8.js","assets/HighlightGraphicContainer-DwRSgp5L.js","assets/LayerView-CdEL2TPv.js","assets/RefreshableLayerView-DY7qkm4P.js","assets/MapServiceLayerViewHelper-zi58w-tB.js","assets/floorFilterUtils-DKzVzLpH.js","assets/drapedUtils-DFXbZTOk.js","assets/sublayerUtils-BEQnBRaB.js","assets/popupUtils-C-BSJI94.js","assets/highlightOptionsUtils-B13Zn9_K.js","assets/FeatureLayerView2D-D0PoBIJA.js","assets/timeSupport-BBD8YP7D.js","assets/AttributeBinsFeatureSet-7MmidKc-.js","assets/AttributeBinsQuery-XyAmRjZq.js","assets/constants-SxxbBSOD.js","assets/BaseDynamicLayerView2D-DHzjWTYG.js","assets/BitmapContainer-CnYuQwOp.js","assets/ExportStrategy-BAeOAVFG.js","assets/CatalogLayerView2D-Bn8lxnf8.js","assets/CatalogDynamicGroupLayerView2D-54hXO2-Y.js","assets/CatalogFootprintLayerView2D-BU45Ao4M.js","assets/GeoRSSLayerView2D-D0m0GX85.js","assets/GraphicsLayerView2D-D-mwAjeI.js","assets/GroupLayerView2D-BicehNCz.js","assets/ImageryLayerView2D-B7HPPV3F.js","assets/RasterVFDisplayObject-BrVYj141.js","assets/ImageryTileLayerView2D-DDoa9VfH.js","assets/datasetUtils-Syfu-jXi.js","assets/rasterUtils-uxHTGyD9.js","assets/RawBlockCache-BajegIB1.js","assets/KMLLayerView2D-DEmp8QCN.js","assets/kmlUtils-BVBXh7dg.js","assets/KnowledgeGraphLayerView2D-CisHkQRY.js","assets/MapImageLayerView2D-Csg3YuOA.js","assets/ExportImageParameters-B9TspVq7.js","assets/MapNotesLayerView2D-CocYwJ2-.js","assets/MediaLayerView2D-Blyut32g.js","assets/mediaLayerUtils-DQhNBrfE.js","assets/OverlayContainer-CVs1lxJJ.js","assets/OGCFeatureLayerView2D-DcQNGrpX.js","assets/RouteLayerView2D-CWuExzfG.js","assets/Stop-CPPieUFD.js","assets/networkEnums-BivDnxEd.js","assets/StreamLayerView2D-BRkcjoNM.js","assets/SubtypeGroupLayerView2D-DRw8egpB.js","assets/VectorTileLayerView2D-B-EeNVwr.js","assets/VideoLayerView2D-B-r-_rAv.js","assets/GraphicsLayer-x_mwCduN.js","assets/videoUtils-DRVPqaU-.js","assets/ControlPoint-o1d3mO42.js","assets/WMSLayerView2D-l-HzSHl9.js","assets/ExportWMSImageParameters-BdY207g_.js","assets/WMTSLayerView2D-CGC6K_vs.js","assets/ElevationProfileAnalysisView2D-CNOyS1te.js","assets/createUtils-CIXb9pMG.js","assets/distanceOperator-T9HI42k7.js","assets/Point2D-ByVU2sJE.js","assets/Distance2DCalculator-CXhBP-8I-CHda6pkK.js","assets/ProjectionTransformation-B_I271Hu.js","assets/Envelope2D-PYZ6irrd.js","assets/Transformation2D-HOoFpL6n.js","assets/OperatorDefinitions-DP7_WWTp.js","assets/apiConverter-CVdJXDIu.js","assets/jsonConverter-DZcRxSo_.js","assets/simplifyOperator-Bffxmt-c.js","assets/operatorSimplify-N0BvKIWQ.js","assets/mapCollectionUtils-CD6hgT6g.js","assets/elevationInfoUtils-i5IFne31.js","assets/getDefaultUnitForView-BUKY3ma7.js","assets/SketchViewModel-BPiZTWuv.js","assets/hitTestSelectUtils-DROcNSOB.js","assets/geodeticLengthOperator-Cy-cxj_7.js","assets/apng-DWYVW58k.js","assets/index-Bs8l5Zqk.js","assets/index-BBSKhicB.js","assets/guid-LcV_DAvu.js","assets/useT9n-_bnx1Wau.js","assets/index-B-APTnjj.js","assets/index-BJTDFJxj.js","assets/dom-3gjpBbPf.js","assets/observers-DlQQaCOh.js","assets/ref-DZNevZAP.js","assets/static-Bqdrm7p4.js","assets/form-D0KdpTHG.js","assets/interactive-DkyxlGzP.js","assets/label-BC7gQOrN.js","assets/useSetFocus-NV21Raln.js"])))=>i.map(i=>d[i]);
var nke=Object.getPrototypeOf;var rke=Reflect.get;var TX=t=>{throw TypeError(t)};var k6=(t,e,n)=>e.has(t)||TX("Cannot "+n);var Nr=(t,e,n)=>(k6(t,e,"read from private field"),n?n.call(t):e.get(t)),Cu=(t,e,n)=>e.has(t)?TX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ru=(t,e,n,r)=>(k6(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),kE=(t,e,n)=>(k6(t,e,"access private method"),n);var kX=(t,e,n)=>rke(nke(t),n,e);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function cG(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var A6={exports:{}},AE={},I6={exports:{}},Kn={};var AX;function ike(){if(AX)return Kn;AX=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function f(Z){return Z===null||typeof Z!="object"?null:(Z=h&&Z[h]||Z["@@iterator"],typeof Z=="function"?Z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,_={};function b(Z,W,ne){this.props=Z,this.context=W,this.refs=_,this.updater=ne||g}b.prototype.isReactComponent={},b.prototype.setState=function(Z,W){if(typeof Z!="object"&&typeof Z!="function"&&Z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Z,W,"setState")},b.prototype.forceUpdate=function(Z){this.updater.enqueueForceUpdate(this,Z,"forceUpdate")};function T(){}T.prototype=b.prototype;function A(Z,W,ne){this.props=Z,this.context=W,this.refs=_,this.updater=ne||g}var I=A.prototype=new T;I.constructor=A,y(I,b.prototype),I.isPureReactComponent=!0;var P=Array.isArray,M=Object.prototype.hasOwnProperty,V={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function N(Z,W,ne){var ie,le={},xe=null,qe=null;if(W!=null)for(ie in W.ref!==void 0&&(qe=W.ref),W.key!==void 0&&(xe=""+W.key),W)M.call(W,ie)&&!C.hasOwnProperty(ie)&&(le[ie]=W[ie]);var Ke=arguments.length-2;if(Ke===1)le.children=ne;else if(1<Ke){for(var ke=Array(Ke),be=0;be<Ke;be++)ke[be]=arguments[be+2];le.children=ke}if(Z&&Z.defaultProps)for(ie in Ke=Z.defaultProps,Ke)le[ie]===void 0&&(le[ie]=Ke[ie]);return{$$typeof:t,type:Z,key:xe,ref:qe,props:le,_owner:V.current}}function O(Z,W){return{$$typeof:t,type:Z.type,key:W,ref:Z.ref,props:Z.props,_owner:Z._owner}}function L(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===t}function F(Z){var W={"=":"=0",":":"=2"};return"$"+Z.replace(/[=:]/g,function(ne){return W[ne]})}var G=/\/+/g;function U(Z,W){return typeof Z=="object"&&Z!==null&&Z.key!=null?F(""+Z.key):W.toString(36)}function he(Z,W,ne,ie,le){var xe=typeof Z;(xe==="undefined"||xe==="boolean")&&(Z=null);var qe=!1;if(Z===null)qe=!0;else switch(xe){case"string":case"number":qe=!0;break;case"object":switch(Z.$$typeof){case t:case e:qe=!0}}if(qe)return qe=Z,le=le(qe),Z=ie===""?"."+U(qe,0):ie,P(le)?(ne="",Z!=null&&(ne=Z.replace(G,"$&/")+"/"),he(le,W,ne,"",function(be){return be})):le!=null&&(L(le)&&(le=O(le,ne+(!le.key||qe&&qe.key===le.key?"":(""+le.key).replace(G,"$&/")+"/")+Z)),W.push(le)),1;if(qe=0,ie=ie===""?".":ie+":",P(Z))for(var Ke=0;Ke<Z.length;Ke++){xe=Z[Ke];var ke=ie+U(xe,Ke);qe+=he(xe,W,ne,ke,le)}else if(ke=f(Z),typeof ke=="function")for(Z=ke.call(Z),Ke=0;!(xe=Z.next()).done;)xe=xe.value,ke=ie+U(xe,Ke++),qe+=he(xe,W,ne,ke,le);else if(xe==="object")throw W=String(Z),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(Z).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return qe}function Ie(Z,W,ne){if(Z==null)return Z;var ie=[],le=0;return he(Z,ie,"","",function(xe){return W.call(ne,xe,le++)}),ie}function ze(Z){if(Z._status===-1){var W=Z._result;W=W(),W.then(function(ne){(Z._status===0||Z._status===-1)&&(Z._status=1,Z._result=ne)},function(ne){(Z._status===0||Z._status===-1)&&(Z._status=2,Z._result=ne)}),Z._status===-1&&(Z._status=0,Z._result=W)}if(Z._status===1)return Z._result.default;throw Z._result}var Oe={current:null},fe={transition:null},ge={ReactCurrentDispatcher:Oe,ReactCurrentBatchConfig:fe,ReactCurrentOwner:V};function Se(){throw Error("act(...) is not supported in production builds of React.")}return Kn.Children={map:Ie,forEach:function(Z,W,ne){Ie(Z,function(){W.apply(this,arguments)},ne)},count:function(Z){var W=0;return Ie(Z,function(){W++}),W},toArray:function(Z){return Ie(Z,function(W){return W})||[]},only:function(Z){if(!L(Z))throw Error("React.Children.only expected to receive a single React element child.");return Z}},Kn.Component=b,Kn.Fragment=n,Kn.Profiler=i,Kn.PureComponent=A,Kn.StrictMode=r,Kn.Suspense=l,Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Kn.act=Se,Kn.cloneElement=function(Z,W,ne){if(Z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Z+".");var ie=y({},Z.props),le=Z.key,xe=Z.ref,qe=Z._owner;if(W!=null){if(W.ref!==void 0&&(xe=W.ref,qe=V.current),W.key!==void 0&&(le=""+W.key),Z.type&&Z.type.defaultProps)var Ke=Z.type.defaultProps;for(ke in W)M.call(W,ke)&&!C.hasOwnProperty(ke)&&(ie[ke]=W[ke]===void 0&&Ke!==void 0?Ke[ke]:W[ke])}var ke=arguments.length-2;if(ke===1)ie.children=ne;else if(1<ke){Ke=Array(ke);for(var be=0;be<ke;be++)Ke[be]=arguments[be+2];ie.children=Ke}return{$$typeof:t,type:Z.type,key:le,ref:xe,props:ie,_owner:qe}},Kn.createContext=function(Z){return Z={$$typeof:o,_currentValue:Z,_currentValue2:Z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Z.Provider={$$typeof:s,_context:Z},Z.Consumer=Z},Kn.createElement=N,Kn.createFactory=function(Z){var W=N.bind(null,Z);return W.type=Z,W},Kn.createRef=function(){return{current:null}},Kn.forwardRef=function(Z){return{$$typeof:a,render:Z}},Kn.isValidElement=L,Kn.lazy=function(Z){return{$$typeof:u,_payload:{_status:-1,_result:Z},_init:ze}},Kn.memo=function(Z,W){return{$$typeof:c,type:Z,compare:W===void 0?null:W}},Kn.startTransition=function(Z){var W=fe.transition;fe.transition={};try{Z()}finally{fe.transition=W}},Kn.unstable_act=Se,Kn.useCallback=function(Z,W){return Oe.current.useCallback(Z,W)},Kn.useContext=function(Z){return Oe.current.useContext(Z)},Kn.useDebugValue=function(){},Kn.useDeferredValue=function(Z){return Oe.current.useDeferredValue(Z)},Kn.useEffect=function(Z,W){return Oe.current.useEffect(Z,W)},Kn.useId=function(){return Oe.current.useId()},Kn.useImperativeHandle=function(Z,W,ne){return Oe.current.useImperativeHandle(Z,W,ne)},Kn.useInsertionEffect=function(Z,W){return Oe.current.useInsertionEffect(Z,W)},Kn.useLayoutEffect=function(Z,W){return Oe.current.useLayoutEffect(Z,W)},Kn.useMemo=function(Z,W){return Oe.current.useMemo(Z,W)},Kn.useReducer=function(Z,W,ne){return Oe.current.useReducer(Z,W,ne)},Kn.useRef=function(Z){return Oe.current.useRef(Z)},Kn.useState=function(Z){return Oe.current.useState(Z)},Kn.useSyncExternalStore=function(Z,W,ne){return Oe.current.useSyncExternalStore(Z,W,ne)},Kn.useTransition=function(){return Oe.current.useTransition()},Kn.version="18.3.1",Kn}var IX;function XA(){return IX||(IX=1,I6.exports=ike()),I6.exports}var PX;function ske(){if(PX)return AE;PX=1;var t=XA(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,h={},f=null,g=null;c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(g=l.ref);for(u in l)r.call(l,u)&&!s.hasOwnProperty(u)&&(h[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)h[u]===void 0&&(h[u]=l[u]);return{$$typeof:e,type:a,key:f,ref:g,props:h,_owner:i.current}}return AE.Fragment=n,AE.jsx=o,AE.jsxs=o,AE}var CX;function oke(){return CX||(CX=1,A6.exports=ske()),A6.exports}var p=oke(),vC={},P6={exports:{}},Qa={},C6={exports:{}},R6={};var RX;function ake(){return RX||(RX=1,(function(t){function e(fe,ge){var Se=fe.length;fe.push(ge);e:for(;0<Se;){var Z=Se-1>>>1,W=fe[Z];if(0<i(W,ge))fe[Z]=ge,fe[Se]=W,Se=Z;else break e}}function n(fe){return fe.length===0?null:fe[0]}function r(fe){if(fe.length===0)return null;var ge=fe[0],Se=fe.pop();if(Se!==ge){fe[0]=Se;e:for(var Z=0,W=fe.length,ne=W>>>1;Z<ne;){var ie=2*(Z+1)-1,le=fe[ie],xe=ie+1,qe=fe[xe];if(0>i(le,Se))xe<W&&0>i(qe,le)?(fe[Z]=qe,fe[xe]=Se,Z=xe):(fe[Z]=le,fe[ie]=Se,Z=ie);else if(xe<W&&0>i(qe,Se))fe[Z]=qe,fe[xe]=Se,Z=xe;else break e}}return ge}function i(fe,ge){var Se=fe.sortIndex-ge.sortIndex;return Se!==0?Se:fe.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,g=!1,y=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(fe){for(var ge=n(c);ge!==null;){if(ge.callback===null)r(c);else if(ge.startTime<=fe)r(c),ge.sortIndex=ge.expirationTime,e(l,ge);else break;ge=n(c)}}function P(fe){if(_=!1,I(fe),!y)if(n(l)!==null)y=!0,ze(M);else{var ge=n(c);ge!==null&&Oe(P,ge.startTime-fe)}}function M(fe,ge){y=!1,_&&(_=!1,T(N),N=-1),g=!0;var Se=f;try{for(I(ge),h=n(l);h!==null&&(!(h.expirationTime>ge)||fe&&!F());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var W=Z(h.expirationTime<=ge);ge=t.unstable_now(),typeof W=="function"?h.callback=W:h===n(l)&&r(l),I(ge)}else r(l);h=n(l)}if(h!==null)var ne=!0;else{var ie=n(c);ie!==null&&Oe(P,ie.startTime-ge),ne=!1}return ne}finally{h=null,f=Se,g=!1}}var V=!1,C=null,N=-1,O=5,L=-1;function F(){return!(t.unstable_now()-L<O)}function G(){if(C!==null){var fe=t.unstable_now();L=fe;var ge=!0;try{ge=C(!0,fe)}finally{ge?U():(V=!1,C=null)}}else V=!1}var U;if(typeof A=="function")U=function(){A(G)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Ie=he.port2;he.port1.onmessage=G,U=function(){Ie.postMessage(null)}}else U=function(){b(G,0)};function ze(fe){C=fe,V||(V=!0,U())}function Oe(fe,ge){N=b(function(){fe(t.unstable_now())},ge)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(fe){fe.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,ze(M))},t.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<fe?Math.floor(1e3/fe):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(fe){switch(f){case 1:case 2:case 3:var ge=3;break;default:ge=f}var Se=f;f=ge;try{return fe()}finally{f=Se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(fe,ge){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var Se=f;f=fe;try{return ge()}finally{f=Se}},t.unstable_scheduleCallback=function(fe,ge,Se){var Z=t.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?Z+Se:Z):Se=Z,fe){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Se+W,fe={id:u++,callback:ge,priorityLevel:fe,startTime:Se,expirationTime:W,sortIndex:-1},Se>Z?(fe.sortIndex=Se,e(c,fe),n(l)===null&&fe===n(c)&&(_?(T(N),N=-1):_=!0,Oe(P,Se-Z))):(fe.sortIndex=W,e(l,fe),y||g||(y=!0,ze(M))),fe},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(fe){var ge=f;return function(){var Se=f;f=ge;try{return fe.apply(this,arguments)}finally{f=Se}}}})(R6)),R6}var MX;function lke(){return MX||(MX=1,C6.exports=ake()),C6.exports}var NX;function cke(){if(NX)return Qa;NX=1;var t=XA(),e=lke();function n(d){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+d,w=1;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(d,m){o(d,m),o(d+"Capture",m)}function o(d,m){for(i[d]=m,d=0;d<m.length;d++)r.add(m[d])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},h={};function f(d){return l.call(h,d)?!0:l.call(u,d)?!1:c.test(d)?h[d]=!0:(u[d]=!0,!1)}function g(d,m,w,k){if(w!==null&&w.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return k?!1:w!==null?!w.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function y(d,m,w,k){if(m===null||typeof m>"u"||g(d,m,w,k))return!0;if(k)return!1;if(w!==null)switch(w.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function _(d,m,w,k,R,D,K){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=k,this.attributeNamespace=R,this.mustUseProperty=w,this.propertyName=d,this.type=m,this.sanitizeURL=D,this.removeEmptyString=K}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){b[d]=new _(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var m=d[0];b[m]=new _(m,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){b[d]=new _(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){b[d]=new _(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){b[d]=new _(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){b[d]=new _(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){b[d]=new _(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){b[d]=new _(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){b[d]=new _(d,5,!1,d.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function A(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var m=d.replace(T,A);b[m]=new _(m,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var m=d.replace(T,A);b[m]=new _(m,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var m=d.replace(T,A);b[m]=new _(m,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){b[d]=new _(d,1,!1,d.toLowerCase(),null,!1,!1)}),b.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){b[d]=new _(d,1,!1,d.toLowerCase(),null,!0,!0)});function I(d,m,w,k){var R=b.hasOwnProperty(m)?b[m]:null;(R!==null?R.type!==0:k||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(y(m,w,R,k)&&(w=null),k||R===null?f(m)&&(w===null?d.removeAttribute(m):d.setAttribute(m,""+w)):R.mustUseProperty?d[R.propertyName]=w===null?R.type===3?!1:"":w:(m=R.attributeName,k=R.attributeNamespace,w===null?d.removeAttribute(m):(R=R.type,w=R===3||R===4&&w===!0?"":""+w,k?d.setAttributeNS(k,m,w):d.setAttribute(m,w))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),V=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),F=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),Ie=Symbol.for("react.memo"),ze=Symbol.for("react.lazy"),Oe=Symbol.for("react.offscreen"),fe=Symbol.iterator;function ge(d){return d===null||typeof d!="object"?null:(d=fe&&d[fe]||d["@@iterator"],typeof d=="function"?d:null)}var Se=Object.assign,Z;function W(d){if(Z===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);Z=m&&m[1]||""}return`
`+Z+d}var ne=!1;function ie(d,m){if(!d||ne)return"";ne=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch($e){var k=$e}Reflect.construct(d,[],m)}else{try{m.call()}catch($e){k=$e}d.call(m.prototype)}else{try{throw Error()}catch($e){k=$e}d()}}catch($e){if($e&&k&&typeof $e.stack=="string"){for(var R=$e.stack.split(`
`),D=k.stack.split(`
`),K=R.length-1,ce=D.length-1;1<=K&&0<=ce&&R[K]!==D[ce];)ce--;for(;1<=K&&0<=ce;K--,ce--)if(R[K]!==D[ce]){if(K!==1||ce!==1)do if(K--,ce--,0>ce||R[K]!==D[ce]){var de=`
`+R[K].replace(" at new "," at ");return d.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",d.displayName)),de}while(1<=K&&0<=ce);break}}}finally{ne=!1,Error.prepareStackTrace=w}return(d=d?d.displayName||d.name:"")?W(d):""}function le(d){switch(d.tag){case 5:return W(d.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return d=ie(d.type,!1),d;case 11:return d=ie(d.type.render,!1),d;case 1:return d=ie(d.type,!0),d;default:return""}}function xe(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case C:return"Fragment";case V:return"Portal";case O:return"Profiler";case N:return"StrictMode";case U:return"Suspense";case he:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case F:return(d.displayName||"Context")+".Consumer";case L:return(d._context.displayName||"Context")+".Provider";case G:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case Ie:return m=d.displayName||null,m!==null?m:xe(d.type)||"Memo";case ze:m=d._payload,d=d._init;try{return xe(d(m))}catch{}}return null}function qe(d){var m=d.type;switch(d.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=m.render,d=d.displayName||d.name||"",m.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(m);case 8:return m===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function Ke(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function ke(d){var m=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function be(d){var m=ke(d)?"checked":"value",w=Object.getOwnPropertyDescriptor(d.constructor.prototype,m),k=""+d[m];if(!d.hasOwnProperty(m)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var R=w.get,D=w.set;return Object.defineProperty(d,m,{configurable:!0,get:function(){return R.call(this)},set:function(K){k=""+K,D.call(this,K)}}),Object.defineProperty(d,m,{enumerable:w.enumerable}),{getValue:function(){return k},setValue:function(K){k=""+K},stopTracking:function(){d._valueTracker=null,delete d[m]}}}}function Dt(d){d._valueTracker||(d._valueTracker=be(d))}function Ye(d){if(!d)return!1;var m=d._valueTracker;if(!m)return!0;var w=m.getValue(),k="";return d&&(k=ke(d)?d.checked?"true":"false":d.value),d=k,d!==w?(m.setValue(d),!0):!1}function cn(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function jt(d,m){var w=m.checked;return Se({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??d._wrapperState.initialChecked})}function gn(d,m){var w=m.defaultValue==null?"":m.defaultValue,k=m.checked!=null?m.checked:m.defaultChecked;w=Ke(m.value!=null?m.value:w),d._wrapperState={initialChecked:k,initialValue:w,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function wn(d,m){m=m.checked,m!=null&&I(d,"checked",m,!1)}function pt(d,m){wn(d,m);var w=Ke(m.value),k=m.type;if(w!=null)k==="number"?(w===0&&d.value===""||d.value!=w)&&(d.value=""+w):d.value!==""+w&&(d.value=""+w);else if(k==="submit"||k==="reset"){d.removeAttribute("value");return}m.hasOwnProperty("value")?zn(d,m.type,w):m.hasOwnProperty("defaultValue")&&zn(d,m.type,Ke(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(d.defaultChecked=!!m.defaultChecked)}function hr(d,m,w){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var k=m.type;if(!(k!=="submit"&&k!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+d._wrapperState.initialValue,w||m===d.value||(d.value=m),d.defaultValue=m}w=d.name,w!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,w!==""&&(d.name=w)}function zn(d,m,w){(m!=="number"||cn(d.ownerDocument)!==d)&&(w==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+w&&(d.defaultValue=""+w))}var Hn=Array.isArray;function ei(d,m,w,k){if(d=d.options,m){m={};for(var R=0;R<w.length;R++)m["$"+w[R]]=!0;for(w=0;w<d.length;w++)R=m.hasOwnProperty("$"+d[w].value),d[w].selected!==R&&(d[w].selected=R),R&&k&&(d[w].defaultSelected=!0)}else{for(w=""+Ke(w),m=null,R=0;R<d.length;R++){if(d[R].value===w){d[R].selected=!0,k&&(d[R].defaultSelected=!0);return}m!==null||d[R].disabled||(m=d[R])}m!==null&&(m.selected=!0)}}function xo(d,m){if(m.dangerouslySetInnerHTML!=null)throw Error(n(91));return Se({},m,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function Rr(d,m){var w=m.value;if(w==null){if(w=m.children,m=m.defaultValue,w!=null){if(m!=null)throw Error(n(92));if(Hn(w)){if(1<w.length)throw Error(n(93));w=w[0]}m=w}m==null&&(m=""),w=m}d._wrapperState={initialValue:Ke(w)}}function Ai(d,m){var w=Ke(m.value),k=Ke(m.defaultValue);w!=null&&(w=""+w,w!==d.value&&(d.value=w),m.defaultValue==null&&d.defaultValue!==w&&(d.defaultValue=w)),k!=null&&(d.defaultValue=""+k)}function js(d){var m=d.textContent;m===d._wrapperState.initialValue&&m!==""&&m!==null&&(d.value=m)}function wt(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qn(d,m){return d==null||d==="http://www.w3.org/1999/xhtml"?wt(m):d==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var dr,Vt=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,w,k,R){MSApp.execUnsafeLocalFunction(function(){return d(m,w,k,R)})}:d})(function(d,m){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=m;else{for(dr=dr||document.createElement("div"),dr.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=dr.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;m.firstChild;)d.appendChild(m.firstChild)}});function jn(d,m){if(m){var w=d.firstChild;if(w&&w===d.lastChild&&w.nodeType===3){w.nodeValue=m;return}}d.textContent=m}var nn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fo=["Webkit","ms","Moz","O"];Object.keys(nn).forEach(function(d){Fo.forEach(function(m){m=m+d.charAt(0).toUpperCase()+d.substring(1),nn[m]=nn[d]})});function Gi(d,m,w){return m==null||typeof m=="boolean"||m===""?"":w||typeof m!="number"||m===0||nn.hasOwnProperty(d)&&nn[d]?(""+m).trim():m+"px"}function $s(d,m){d=d.style;for(var w in m)if(m.hasOwnProperty(w)){var k=w.indexOf("--")===0,R=Gi(w,m[w],k);w==="float"&&(w="cssFloat"),k?d.setProperty(w,R):d[w]=R}}var Nn=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ii(d,m){if(m){if(Nn[d]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(n(137,d));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(n(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(n(61))}if(m.style!=null&&typeof m.style!="object")throw Error(n(62))}}function He(d,m){if(d.indexOf("-")===-1)return typeof m.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pe=null;function Ce(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var on=null,z=null,Tt=null;function X(d){if(d=hE(d)){if(typeof on!="function")throw Error(n(280));var m=d.stateNode;m&&(m=NP(m),on(d.stateNode,d.type,m))}}function ae(d){z?Tt?Tt.push(d):Tt=[d]:z=d}function Ve(){if(z){var d=z,m=Tt;if(Tt=z=null,X(d),m)for(d=0;d<m.length;d++)X(m[d])}}function ee(d,m){return d(m)}function ye(){}var je=!1;function Je(d,m,w){if(je)return d(m,w);je=!0;try{return ee(d,m,w)}finally{je=!1,(z!==null||Tt!==null)&&(ye(),Ve())}}function Ge(d,m){var w=d.stateNode;if(w===null)return null;var k=NP(w);if(k===null)return null;w=k[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(d=d.type,k=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!k;break e;default:d=!1}if(d)return null;if(w&&typeof w!="function")throw Error(n(231,m,typeof w));return w}var nt=!1;if(a)try{var et={};Object.defineProperty(et,"passive",{get:function(){nt=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{nt=!1}function Mt(d,m,w,k,R,D,K,ce,de){var $e=Array.prototype.slice.call(arguments,3);try{m.apply(w,$e)}catch(lt){this.onError(lt)}}var Gt=!1,_n=null,q=!1,re=null,Q={onError:function(d){Gt=!0,_n=d}};function te(d,m,w,k,R,D,K,ce,de){Gt=!1,_n=null,Mt.apply(Q,arguments)}function se(d,m,w,k,R,D,K,ce,de){if(te.apply(this,arguments),Gt){if(Gt){var $e=_n;Gt=!1,_n=null}else throw Error(n(198));q||(q=!0,re=$e)}}function oe(d){var m=d,w=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,(m.flags&4098)!==0&&(w=m.return),d=m.return;while(d)}return m.tag===3?w:null}function Me(d){if(d.tag===13){var m=d.memoizedState;if(m===null&&(d=d.alternate,d!==null&&(m=d.memoizedState)),m!==null)return m.dehydrated}return null}function Be(d){if(oe(d)!==d)throw Error(n(188))}function Re(d){var m=d.alternate;if(!m){if(m=oe(d),m===null)throw Error(n(188));return m!==d?null:d}for(var w=d,k=m;;){var R=w.return;if(R===null)break;var D=R.alternate;if(D===null){if(k=R.return,k!==null){w=k;continue}break}if(R.child===D.child){for(D=R.child;D;){if(D===w)return Be(R),d;if(D===k)return Be(R),m;D=D.sibling}throw Error(n(188))}if(w.return!==k.return)w=R,k=D;else{for(var K=!1,ce=R.child;ce;){if(ce===w){K=!0,w=R,k=D;break}if(ce===k){K=!0,k=R,w=D;break}ce=ce.sibling}if(!K){for(ce=D.child;ce;){if(ce===w){K=!0,w=D,k=R;break}if(ce===k){K=!0,k=D,w=R;break}ce=ce.sibling}if(!K)throw Error(n(189))}}if(w.alternate!==k)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?d:m}function Le(d){return d=Re(d),d!==null?De(d):null}function De(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var m=De(d);if(m!==null)return m;d=d.sibling}return null}var ct=e.unstable_scheduleCallback,vt=e.unstable_cancelCallback,Ct=e.unstable_shouldYield,ht=e.unstable_requestPaint,dt=e.unstable_now,Tn=e.unstable_getCurrentPriorityLevel,Mr=e.unstable_ImmediatePriority,$r=e.unstable_UserBlockingPriority,_i=e.unstable_NormalPriority,bu=e.unstable_LowPriority,Ic=e.unstable_IdlePriority,$l=null,ss=null;function Fp(d){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot($l,d,void 0,(d.current.flags&128)===128)}catch{}}var Pi=Math.clz32?Math.clz32:b0,Rh=Math.log,Pc=Math.LN2;function b0(d){return d>>>=0,d===0?32:31-(Rh(d)/Pc|0)|0}var Mh=64,Vp=4194304;function Er(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Qd(d,m){var w=d.pendingLanes;if(w===0)return 0;var k=0,R=d.suspendedLanes,D=d.pingedLanes,K=w&268435455;if(K!==0){var ce=K&~R;ce!==0?k=Er(ce):(D&=K,D!==0&&(k=Er(D)))}else K=w&~R,K!==0?k=Er(K):D!==0&&(k=Er(D));if(k===0)return 0;if(m!==0&&m!==k&&(m&R)===0&&(R=k&-k,D=m&-m,R>=D||R===16&&(D&4194240)!==0))return m;if((k&4)!==0&&(k|=w&16),m=d.entangledLanes,m!==0)for(d=d.entanglements,m&=k;0<m;)w=31-Pi(m),R=1<<w,k|=d[w],m&=~R;return k}function E0(d,m){switch(d){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S0(d,m){for(var w=d.suspendedLanes,k=d.pingedLanes,R=d.expirationTimes,D=d.pendingLanes;0<D;){var K=31-Pi(D),ce=1<<K,de=R[K];de===-1?((ce&w)===0||(ce&k)!==0)&&(R[K]=E0(ce,m)):de<=m&&(d.expiredLanes|=ce),D&=~ce}}function Bb(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Wb(){var d=Mh;return Mh<<=1,(Mh&4194240)===0&&(Mh=64),d}function Hb(d){for(var m=[],w=0;31>w;w++)m.push(d);return m}function T0(d,m,w){d.pendingLanes|=m,m!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,m=31-Pi(m),d[m]=w}function iD(d,m){var w=d.pendingLanes&~m;d.pendingLanes=m,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=m,d.mutableReadLanes&=m,d.entangledLanes&=m,m=d.entanglements;var k=d.eventTimes;for(d=d.expirationTimes;0<w;){var R=31-Pi(w),D=1<<R;m[R]=0,k[R]=-1,d[R]=-1,w&=~D}}function qb(d,m){var w=d.entangledLanes|=m;for(d=d.entanglements;w;){var k=31-Pi(w),R=1<<k;R&m|d[k]&m&&(d[k]|=m),w&=~R}}var sr=0;function Nh(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var Kb,Nv,Yb,Xb,Zb,Oh=!1,Ov=[],Lh=null,Dh=null,wo=null,k0=new Map,ef=new Map,Fl=[],yP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zp(d,m){switch(d){case"focusin":case"focusout":Lh=null;break;case"dragenter":case"dragleave":Dh=null;break;case"mouseover":case"mouseout":wo=null;break;case"pointerover":case"pointerout":k0.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":ef.delete(m.pointerId)}}function Eu(d,m,w,k,R,D){return d===null||d.nativeEvent!==D?(d={blockedOn:m,domEventName:w,eventSystemFlags:k,nativeEvent:D,targetContainers:[R]},m!==null&&(m=hE(m),m!==null&&Nv(m)),d):(d.eventSystemFlags|=k,m=d.targetContainers,R!==null&&m.indexOf(R)===-1&&m.push(R),d)}function vP(d,m,w,k,R){switch(m){case"focusin":return Lh=Eu(Lh,d,m,w,k,R),!0;case"dragenter":return Dh=Eu(Dh,d,m,w,k,R),!0;case"mouseover":return wo=Eu(wo,d,m,w,k,R),!0;case"pointerover":var D=R.pointerId;return k0.set(D,Eu(k0.get(D)||null,d,m,w,k,R)),!0;case"gotpointercapture":return D=R.pointerId,ef.set(D,Eu(ef.get(D)||null,d,m,w,k,R)),!0}return!1}function Lv(d){var m=C0(d.target);if(m!==null){var w=oe(m);if(w!==null){if(m=w.tag,m===13){if(m=Me(w),m!==null){d.blockedOn=m,Zb(d.priority,function(){Yb(w)});return}}else if(m===3&&w.stateNode.current.memoizedState.isDehydrated){d.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}d.blockedOn=null}function ti(d){if(d.blockedOn!==null)return!1;for(var m=d.targetContainers;0<m.length;){var w=Dv(d.domEventName,d.eventSystemFlags,m[0],d.nativeEvent);if(w===null){w=d.nativeEvent;var k=new w.constructor(w.type,w);Pe=k,w.target.dispatchEvent(k),Pe=null}else return m=hE(w),m!==null&&Nv(m),d.blockedOn=w,!1;m.shift()}return!0}function _P(d,m,w){ti(d)&&w.delete(m)}function sD(){Oh=!1,Lh!==null&&ti(Lh)&&(Lh=null),Dh!==null&&ti(Dh)&&(Dh=null),wo!==null&&ti(wo)&&(wo=null),k0.forEach(_P),ef.forEach(_P)}function Gp(d,m){d.blockedOn===m&&(d.blockedOn=null,Oh||(Oh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sD)))}function Up(d){function m(R){return Gp(R,d)}if(0<Ov.length){Gp(Ov[0],d);for(var w=1;w<Ov.length;w++){var k=Ov[w];k.blockedOn===d&&(k.blockedOn=null)}}for(Lh!==null&&Gp(Lh,d),Dh!==null&&Gp(Dh,d),wo!==null&&Gp(wo,d),k0.forEach(m),ef.forEach(m),w=0;w<Fl.length;w++)k=Fl[w],k.blockedOn===d&&(k.blockedOn=null);for(;0<Fl.length&&(w=Fl[0],w.blockedOn===null);)Lv(w),w.blockedOn===null&&Fl.shift()}var tf=P.ReactCurrentBatchConfig,nf=!0;function jh(d,m,w,k){var R=sr,D=tf.transition;tf.transition=null;try{sr=1,Jb(d,m,w,k)}finally{sr=R,tf.transition=D}}function xP(d,m,w,k){var R=sr,D=tf.transition;tf.transition=null;try{sr=4,Jb(d,m,w,k)}finally{sr=R,tf.transition=D}}function Jb(d,m,w,k){if(nf){var R=Dv(d,m,w,k);if(R===null)gD(d,m,k,$h,w),zp(d,k);else if(vP(R,d,m,w,k))k.stopPropagation();else if(zp(d,k),m&4&&-1<yP.indexOf(d)){for(;R!==null;){var D=hE(R);if(D!==null&&Kb(D),D=Dv(d,m,w,k),D===null&&gD(d,m,k,$h,w),D===R)break;R=D}R!==null&&k.stopPropagation()}else gD(d,m,k,null,w)}}var $h=null;function Dv(d,m,w,k){if($h=null,d=Ce(k),d=C0(d),d!==null)if(m=oe(d),m===null)d=null;else if(w=m.tag,w===13){if(d=Me(m),d!==null)return d;d=null}else if(w===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;d=null}else m!==d&&(d=null);return $h=d,null}function jv(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tn()){case Mr:return 1;case $r:return 4;case _i:case bu:return 16;case Ic:return 536870912;default:return 16}default:return 16}}var Vl=null,$v=null,rf=null;function wP(){if(rf)return rf;var d,m=$v,w=m.length,k,R="value"in Vl?Vl.value:Vl.textContent,D=R.length;for(d=0;d<w&&m[d]===R[d];d++);var K=w-d;for(k=1;k<=K&&m[w-k]===R[D-k];k++);return rf=R.slice(d,1<k?1-k:void 0)}function A0(d){var m=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&m===13&&(d=13)):d=m,d===10&&(d=13),32<=d||d===13?d:0}function Fh(){return!0}function Qb(){return!1}function Vo(d){function m(w,k,R,D,K){this._reactName=w,this._targetInst=R,this.type=k,this.nativeEvent=D,this.target=K,this.currentTarget=null;for(var ce in d)d.hasOwnProperty(ce)&&(w=d[ce],this[ce]=w?w(D):D[ce]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Fh:Qb,this.isPropagationStopped=Qb,this}return Se(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Fh)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Fh)},persist:function(){},isPersistent:Fh}),m}var Vh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},I0=Vo(Vh),Bp=Se({},Vh,{view:0,detail:0}),Fv=Vo(Bp),Vv,zv,zl,P0=Se({},Bp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:On,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==zl&&(zl&&d.type==="mousemove"?(Vv=d.screenX-zl.screenX,zv=d.screenY-zl.screenY):zv=Vv=0,zl=d),Vv)},movementY:function(d){return"movementY"in d?d.movementY:zv}}),eE=Vo(P0),bP=Se({},P0,{dataTransfer:0}),EP=Vo(bP),Gv=Se({},Bp,{relatedTarget:0}),bo=Vo(Gv),SP=Se({},Vh,{animationName:0,elapsedTime:0,pseudoElement:0}),TP=Vo(SP),Wp=Se({},Vh,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),S=Vo(Wp),j=Se({},Vh,{data:0}),B=Vo(j),J={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Te={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Et(d){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(d):(d=Fe[d])?!!m[d]:!1}function On(){return Et}var os=Se({},Bp,{key:function(d){if(d.key){var m=J[d.key]||d.key;if(m!=="Unidentified")return m}return d.type==="keypress"?(d=A0(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Te[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:On,charCode:function(d){return d.type==="keypress"?A0(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?A0(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Fr=Vo(os),vs=Se({},P0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gl=Vo(vs),sf=Se({},Bp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:On}),zh=Vo(sf),Gh=Se({},Vh,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uv=Vo(Gh),tE=Se({},P0,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),XSe=Vo(tE),ZSe=[9,13,27,32],oD=a&&"CompositionEvent"in window,nE=null;a&&"documentMode"in document&&(nE=document.documentMode);var JSe=a&&"TextEvent"in window&&!nE,yK=a&&(!oD||nE&&8<nE&&11>=nE),vK=" ",_K=!1;function xK(d,m){switch(d){case"keyup":return ZSe.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wK(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var Bv=!1;function QSe(d,m){switch(d){case"compositionend":return wK(m);case"keypress":return m.which!==32?null:(_K=!0,vK);case"textInput":return d=m.data,d===vK&&_K?null:d;default:return null}}function eTe(d,m){if(Bv)return d==="compositionend"||!oD&&xK(d,m)?(d=wP(),rf=$v=Vl=null,Bv=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return yK&&m.locale!=="ko"?null:m.data;default:return null}}var tTe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bK(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m==="input"?!!tTe[d.type]:m==="textarea"}function EK(d,m,w,k){ae(k),m=CP(m,"onChange"),0<m.length&&(w=new I0("onChange","change",null,w,k),d.push({event:w,listeners:m}))}var rE=null,iE=null;function nTe(d){zK(d,0)}function kP(d){var m=Yv(d);if(Ye(m))return d}function rTe(d,m){if(d==="change")return m}var SK=!1;if(a){var aD;if(a){var lD="oninput"in document;if(!lD){var TK=document.createElement("div");TK.setAttribute("oninput","return;"),lD=typeof TK.oninput=="function"}aD=lD}else aD=!1;SK=aD&&(!document.documentMode||9<document.documentMode)}function kK(){rE&&(rE.detachEvent("onpropertychange",AK),iE=rE=null)}function AK(d){if(d.propertyName==="value"&&kP(iE)){var m=[];EK(m,iE,d,Ce(d)),Je(nTe,m)}}function iTe(d,m,w){d==="focusin"?(kK(),rE=m,iE=w,rE.attachEvent("onpropertychange",AK)):d==="focusout"&&kK()}function sTe(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return kP(iE)}function oTe(d,m){if(d==="click")return kP(m)}function aTe(d,m){if(d==="input"||d==="change")return kP(m)}function lTe(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var Su=typeof Object.is=="function"?Object.is:lTe;function sE(d,m){if(Su(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var w=Object.keys(d),k=Object.keys(m);if(w.length!==k.length)return!1;for(k=0;k<w.length;k++){var R=w[k];if(!l.call(m,R)||!Su(d[R],m[R]))return!1}return!0}function IK(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function PK(d,m){var w=IK(d);d=0;for(var k;w;){if(w.nodeType===3){if(k=d+w.textContent.length,d<=m&&k>=m)return{node:w,offset:m-d};d=k}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=IK(w)}}function CK(d,m){return d&&m?d===m?!0:d&&d.nodeType===3?!1:m&&m.nodeType===3?CK(d,m.parentNode):"contains"in d?d.contains(m):d.compareDocumentPosition?!!(d.compareDocumentPosition(m)&16):!1:!1}function RK(){for(var d=window,m=cn();m instanceof d.HTMLIFrameElement;){try{var w=typeof m.contentWindow.location.href=="string"}catch{w=!1}if(w)d=m.contentWindow;else break;m=cn(d.document)}return m}function cD(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m&&(m==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||m==="textarea"||d.contentEditable==="true")}function cTe(d){var m=RK(),w=d.focusedElem,k=d.selectionRange;if(m!==w&&w&&w.ownerDocument&&CK(w.ownerDocument.documentElement,w)){if(k!==null&&cD(w)){if(m=k.start,d=k.end,d===void 0&&(d=m),"selectionStart"in w)w.selectionStart=m,w.selectionEnd=Math.min(d,w.value.length);else if(d=(m=w.ownerDocument||document)&&m.defaultView||window,d.getSelection){d=d.getSelection();var R=w.textContent.length,D=Math.min(k.start,R);k=k.end===void 0?D:Math.min(k.end,R),!d.extend&&D>k&&(R=k,k=D,D=R),R=PK(w,D);var K=PK(w,k);R&&K&&(d.rangeCount!==1||d.anchorNode!==R.node||d.anchorOffset!==R.offset||d.focusNode!==K.node||d.focusOffset!==K.offset)&&(m=m.createRange(),m.setStart(R.node,R.offset),d.removeAllRanges(),D>k?(d.addRange(m),d.extend(K.node,K.offset)):(m.setEnd(K.node,K.offset),d.addRange(m)))}}for(m=[],d=w;d=d.parentNode;)d.nodeType===1&&m.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<m.length;w++)d=m[w],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var uTe=a&&"documentMode"in document&&11>=document.documentMode,Wv=null,uD=null,oE=null,hD=!1;function MK(d,m,w){var k=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;hD||Wv==null||Wv!==cn(k)||(k=Wv,"selectionStart"in k&&cD(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),oE&&sE(oE,k)||(oE=k,k=CP(uD,"onSelect"),0<k.length&&(m=new I0("onSelect","select",null,m,w),d.push({event:m,listeners:k}),m.target=Wv)))}function AP(d,m){var w={};return w[d.toLowerCase()]=m.toLowerCase(),w["Webkit"+d]="webkit"+m,w["Moz"+d]="moz"+m,w}var Hv={animationend:AP("Animation","AnimationEnd"),animationiteration:AP("Animation","AnimationIteration"),animationstart:AP("Animation","AnimationStart"),transitionend:AP("Transition","TransitionEnd")},dD={},NK={};a&&(NK=document.createElement("div").style,"AnimationEvent"in window||(delete Hv.animationend.animation,delete Hv.animationiteration.animation,delete Hv.animationstart.animation),"TransitionEvent"in window||delete Hv.transitionend.transition);function IP(d){if(dD[d])return dD[d];if(!Hv[d])return d;var m=Hv[d],w;for(w in m)if(m.hasOwnProperty(w)&&w in NK)return dD[d]=m[w];return d}var OK=IP("animationend"),LK=IP("animationiteration"),DK=IP("animationstart"),jK=IP("transitionend"),$K=new Map,FK="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hp(d,m){$K.set(d,m),s(m,[d])}for(var fD=0;fD<FK.length;fD++){var pD=FK[fD],hTe=pD.toLowerCase(),dTe=pD[0].toUpperCase()+pD.slice(1);Hp(hTe,"on"+dTe)}Hp(OK,"onAnimationEnd"),Hp(LK,"onAnimationIteration"),Hp(DK,"onAnimationStart"),Hp("dblclick","onDoubleClick"),Hp("focusin","onFocus"),Hp("focusout","onBlur"),Hp(jK,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aE="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fTe=new Set("cancel close invalid load scroll toggle".split(" ").concat(aE));function VK(d,m,w){var k=d.type||"unknown-event";d.currentTarget=w,se(k,m,void 0,d),d.currentTarget=null}function zK(d,m){m=(m&4)!==0;for(var w=0;w<d.length;w++){var k=d[w],R=k.event;k=k.listeners;e:{var D=void 0;if(m)for(var K=k.length-1;0<=K;K--){var ce=k[K],de=ce.instance,$e=ce.currentTarget;if(ce=ce.listener,de!==D&&R.isPropagationStopped())break e;VK(R,ce,$e),D=de}else for(K=0;K<k.length;K++){if(ce=k[K],de=ce.instance,$e=ce.currentTarget,ce=ce.listener,de!==D&&R.isPropagationStopped())break e;VK(R,ce,$e),D=de}}}if(q)throw d=re,q=!1,re=null,d}function ui(d,m){var w=m[bD];w===void 0&&(w=m[bD]=new Set);var k=d+"__bubble";w.has(k)||(GK(m,d,2,!1),w.add(k))}function mD(d,m,w){var k=0;m&&(k|=4),GK(w,d,k,m)}var PP="_reactListening"+Math.random().toString(36).slice(2);function lE(d){if(!d[PP]){d[PP]=!0,r.forEach(function(w){w!=="selectionchange"&&(fTe.has(w)||mD(w,!1,d),mD(w,!0,d))});var m=d.nodeType===9?d:d.ownerDocument;m===null||m[PP]||(m[PP]=!0,mD("selectionchange",!1,m))}}function GK(d,m,w,k){switch(jv(m)){case 1:var R=jh;break;case 4:R=xP;break;default:R=Jb}w=R.bind(null,m,w,d),R=void 0,!nt||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(R=!0),k?R!==void 0?d.addEventListener(m,w,{capture:!0,passive:R}):d.addEventListener(m,w,!0):R!==void 0?d.addEventListener(m,w,{passive:R}):d.addEventListener(m,w,!1)}function gD(d,m,w,k,R){var D=k;if((m&1)===0&&(m&2)===0&&k!==null)e:for(;;){if(k===null)return;var K=k.tag;if(K===3||K===4){var ce=k.stateNode.containerInfo;if(ce===R||ce.nodeType===8&&ce.parentNode===R)break;if(K===4)for(K=k.return;K!==null;){var de=K.tag;if((de===3||de===4)&&(de=K.stateNode.containerInfo,de===R||de.nodeType===8&&de.parentNode===R))return;K=K.return}for(;ce!==null;){if(K=C0(ce),K===null)return;if(de=K.tag,de===5||de===6){k=D=K;continue e}ce=ce.parentNode}}k=k.return}Je(function(){var $e=D,lt=Ce(w),ft=[];e:{var it=$K.get(d);if(it!==void 0){var Nt=I0,Ut=d;switch(d){case"keypress":if(A0(w)===0)break e;case"keydown":case"keyup":Nt=Fr;break;case"focusin":Ut="focus",Nt=bo;break;case"focusout":Ut="blur",Nt=bo;break;case"beforeblur":case"afterblur":Nt=bo;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=eE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=EP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=zh;break;case OK:case LK:case DK:Nt=TP;break;case jK:Nt=Uv;break;case"scroll":Nt=Fv;break;case"wheel":Nt=XSe;break;case"copy":case"cut":case"paste":Nt=S;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=Gl}var Yt=(m&4)!==0,as=!Yt&&d==="scroll",Ee=Yt?it!==null?it+"Capture":null:it;Yt=[];for(var me=$e,Ne;me!==null;){Ne=me;var gt=Ne.stateNode;if(Ne.tag===5&&gt!==null&&(Ne=gt,Ee!==null&&(gt=Ge(me,Ee),gt!=null&&Yt.push(cE(me,gt,Ne)))),as)break;me=me.return}0<Yt.length&&(it=new Nt(it,Ut,null,w,lt),ft.push({event:it,listeners:Yt}))}}if((m&7)===0){e:{if(it=d==="mouseover"||d==="pointerover",Nt=d==="mouseout"||d==="pointerout",it&&w!==Pe&&(Ut=w.relatedTarget||w.fromElement)&&(C0(Ut)||Ut[of]))break e;if((Nt||it)&&(it=lt.window===lt?lt:(it=lt.ownerDocument)?it.defaultView||it.parentWindow:window,Nt?(Ut=w.relatedTarget||w.toElement,Nt=$e,Ut=Ut?C0(Ut):null,Ut!==null&&(as=oe(Ut),Ut!==as||Ut.tag!==5&&Ut.tag!==6)&&(Ut=null)):(Nt=null,Ut=$e),Nt!==Ut)){if(Yt=eE,gt="onMouseLeave",Ee="onMouseEnter",me="mouse",(d==="pointerout"||d==="pointerover")&&(Yt=Gl,gt="onPointerLeave",Ee="onPointerEnter",me="pointer"),as=Nt==null?it:Yv(Nt),Ne=Ut==null?it:Yv(Ut),it=new Yt(gt,me+"leave",Nt,w,lt),it.target=as,it.relatedTarget=Ne,gt=null,C0(lt)===$e&&(Yt=new Yt(Ee,me+"enter",Ut,w,lt),Yt.target=Ne,Yt.relatedTarget=as,gt=Yt),as=gt,Nt&&Ut)t:{for(Yt=Nt,Ee=Ut,me=0,Ne=Yt;Ne;Ne=qv(Ne))me++;for(Ne=0,gt=Ee;gt;gt=qv(gt))Ne++;for(;0<me-Ne;)Yt=qv(Yt),me--;for(;0<Ne-me;)Ee=qv(Ee),Ne--;for(;me--;){if(Yt===Ee||Ee!==null&&Yt===Ee.alternate)break t;Yt=qv(Yt),Ee=qv(Ee)}Yt=null}else Yt=null;Nt!==null&&UK(ft,it,Nt,Yt,!1),Ut!==null&&as!==null&&UK(ft,as,Ut,Yt,!0)}}e:{if(it=$e?Yv($e):window,Nt=it.nodeName&&it.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&it.type==="file")var Jt=rTe;else if(bK(it))if(SK)Jt=aTe;else{Jt=sTe;var dn=iTe}else(Nt=it.nodeName)&&Nt.toLowerCase()==="input"&&(it.type==="checkbox"||it.type==="radio")&&(Jt=oTe);if(Jt&&(Jt=Jt(d,$e))){EK(ft,Jt,w,lt);break e}dn&&dn(d,it,$e),d==="focusout"&&(dn=it._wrapperState)&&dn.controlled&&it.type==="number"&&zn(it,"number",it.value)}switch(dn=$e?Yv($e):window,d){case"focusin":(bK(dn)||dn.contentEditable==="true")&&(Wv=dn,uD=$e,oE=null);break;case"focusout":oE=uD=Wv=null;break;case"mousedown":hD=!0;break;case"contextmenu":case"mouseup":case"dragend":hD=!1,MK(ft,w,lt);break;case"selectionchange":if(uTe)break;case"keydown":case"keyup":MK(ft,w,lt)}var fn;if(oD)e:{switch(d){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else Bv?xK(d,w)&&(kn="onCompositionEnd"):d==="keydown"&&w.keyCode===229&&(kn="onCompositionStart");kn&&(yK&&w.locale!=="ko"&&(Bv||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&Bv&&(fn=wP()):(Vl=lt,$v="value"in Vl?Vl.value:Vl.textContent,Bv=!0)),dn=CP($e,kn),0<dn.length&&(kn=new B(kn,d,null,w,lt),ft.push({event:kn,listeners:dn}),fn?kn.data=fn:(fn=wK(w),fn!==null&&(kn.data=fn)))),(fn=JSe?QSe(d,w):eTe(d,w))&&($e=CP($e,"onBeforeInput"),0<$e.length&&(lt=new B("onBeforeInput","beforeinput",null,w,lt),ft.push({event:lt,listeners:$e}),lt.data=fn))}zK(ft,m)})}function cE(d,m,w){return{instance:d,listener:m,currentTarget:w}}function CP(d,m){for(var w=m+"Capture",k=[];d!==null;){var R=d,D=R.stateNode;R.tag===5&&D!==null&&(R=D,D=Ge(d,w),D!=null&&k.unshift(cE(d,D,R)),D=Ge(d,m),D!=null&&k.push(cE(d,D,R))),d=d.return}return k}function qv(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function UK(d,m,w,k,R){for(var D=m._reactName,K=[];w!==null&&w!==k;){var ce=w,de=ce.alternate,$e=ce.stateNode;if(de!==null&&de===k)break;ce.tag===5&&$e!==null&&(ce=$e,R?(de=Ge(w,D),de!=null&&K.unshift(cE(w,de,ce))):R||(de=Ge(w,D),de!=null&&K.push(cE(w,de,ce)))),w=w.return}K.length!==0&&d.push({event:m,listeners:K})}var pTe=/\r\n?/g,mTe=/\u0000|\uFFFD/g;function BK(d){return(typeof d=="string"?d:""+d).replace(pTe,`
`).replace(mTe,"")}function RP(d,m,w){if(m=BK(m),BK(d)!==m&&w)throw Error(n(425))}function MP(){}var yD=null,vD=null;function _D(d,m){return d==="textarea"||d==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var xD=typeof setTimeout=="function"?setTimeout:void 0,gTe=typeof clearTimeout=="function"?clearTimeout:void 0,WK=typeof Promise=="function"?Promise:void 0,yTe=typeof queueMicrotask=="function"?queueMicrotask:typeof WK<"u"?function(d){return WK.resolve(null).then(d).catch(vTe)}:xD;function vTe(d){setTimeout(function(){throw d})}function wD(d,m){var w=m,k=0;do{var R=w.nextSibling;if(d.removeChild(w),R&&R.nodeType===8)if(w=R.data,w==="/$"){if(k===0){d.removeChild(R),Up(m);return}k--}else w!=="$"&&w!=="$?"&&w!=="$!"||k++;w=R}while(w);Up(m)}function qp(d){for(;d!=null;d=d.nextSibling){var m=d.nodeType;if(m===1||m===3)break;if(m===8){if(m=d.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return d}function HK(d){d=d.previousSibling;for(var m=0;d;){if(d.nodeType===8){var w=d.data;if(w==="$"||w==="$!"||w==="$?"){if(m===0)return d;m--}else w==="/$"&&m++}d=d.previousSibling}return null}var Kv=Math.random().toString(36).slice(2),Uh="__reactFiber$"+Kv,uE="__reactProps$"+Kv,of="__reactContainer$"+Kv,bD="__reactEvents$"+Kv,_Te="__reactListeners$"+Kv,xTe="__reactHandles$"+Kv;function C0(d){var m=d[Uh];if(m)return m;for(var w=d.parentNode;w;){if(m=w[of]||w[Uh]){if(w=m.alternate,m.child!==null||w!==null&&w.child!==null)for(d=HK(d);d!==null;){if(w=d[Uh])return w;d=HK(d)}return m}d=w,w=d.parentNode}return null}function hE(d){return d=d[Uh]||d[of],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Yv(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(n(33))}function NP(d){return d[uE]||null}var ED=[],Xv=-1;function Kp(d){return{current:d}}function hi(d){0>Xv||(d.current=ED[Xv],ED[Xv]=null,Xv--)}function oi(d,m){Xv++,ED[Xv]=d.current,d.current=m}var Yp={},zo=Kp(Yp),Ka=Kp(!1),R0=Yp;function Zv(d,m){var w=d.type.contextTypes;if(!w)return Yp;var k=d.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===m)return k.__reactInternalMemoizedMaskedChildContext;var R={},D;for(D in w)R[D]=m[D];return k&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=m,d.__reactInternalMemoizedMaskedChildContext=R),R}function Ya(d){return d=d.childContextTypes,d!=null}function OP(){hi(Ka),hi(zo)}function qK(d,m,w){if(zo.current!==Yp)throw Error(n(168));oi(zo,m),oi(Ka,w)}function KK(d,m,w){var k=d.stateNode;if(m=m.childContextTypes,typeof k.getChildContext!="function")return w;k=k.getChildContext();for(var R in k)if(!(R in m))throw Error(n(108,qe(d)||"Unknown",R));return Se({},w,k)}function LP(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Yp,R0=zo.current,oi(zo,d),oi(Ka,Ka.current),!0}function YK(d,m,w){var k=d.stateNode;if(!k)throw Error(n(169));w?(d=KK(d,m,R0),k.__reactInternalMemoizedMergedChildContext=d,hi(Ka),hi(zo),oi(zo,d)):hi(Ka),oi(Ka,w)}var af=null,DP=!1,SD=!1;function XK(d){af===null?af=[d]:af.push(d)}function wTe(d){DP=!0,XK(d)}function Xp(){if(!SD&&af!==null){SD=!0;var d=0,m=sr;try{var w=af;for(sr=1;d<w.length;d++){var k=w[d];do k=k(!0);while(k!==null)}af=null,DP=!1}catch(R){throw af!==null&&(af=af.slice(d+1)),ct(Mr,Xp),R}finally{sr=m,SD=!1}}return null}var Jv=[],Qv=0,jP=null,$P=0,Cc=[],Rc=0,M0=null,lf=1,cf="";function N0(d,m){Jv[Qv++]=$P,Jv[Qv++]=jP,jP=d,$P=m}function ZK(d,m,w){Cc[Rc++]=lf,Cc[Rc++]=cf,Cc[Rc++]=M0,M0=d;var k=lf;d=cf;var R=32-Pi(k)-1;k&=~(1<<R),w+=1;var D=32-Pi(m)+R;if(30<D){var K=R-R%5;D=(k&(1<<K)-1).toString(32),k>>=K,R-=K,lf=1<<32-Pi(m)+R|w<<R|k,cf=D+d}else lf=1<<D|w<<R|k,cf=d}function TD(d){d.return!==null&&(N0(d,1),ZK(d,1,0))}function kD(d){for(;d===jP;)jP=Jv[--Qv],Jv[Qv]=null,$P=Jv[--Qv],Jv[Qv]=null;for(;d===M0;)M0=Cc[--Rc],Cc[Rc]=null,cf=Cc[--Rc],Cc[Rc]=null,lf=Cc[--Rc],Cc[Rc]=null}var Ul=null,Bl=null,xi=!1,Tu=null;function JK(d,m){var w=Lc(5,null,null,0);w.elementType="DELETED",w.stateNode=m,w.return=d,m=d.deletions,m===null?(d.deletions=[w],d.flags|=16):m.push(w)}function QK(d,m){switch(d.tag){case 5:var w=d.type;return m=m.nodeType!==1||w.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(d.stateNode=m,Ul=d,Bl=qp(m.firstChild),!0):!1;case 6:return m=d.pendingProps===""||m.nodeType!==3?null:m,m!==null?(d.stateNode=m,Ul=d,Bl=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(w=M0!==null?{id:lf,overflow:cf}:null,d.memoizedState={dehydrated:m,treeContext:w,retryLane:1073741824},w=Lc(18,null,null,0),w.stateNode=m,w.return=d,d.child=w,Ul=d,Bl=null,!0):!1;default:return!1}}function AD(d){return(d.mode&1)!==0&&(d.flags&128)===0}function ID(d){if(xi){var m=Bl;if(m){var w=m;if(!QK(d,m)){if(AD(d))throw Error(n(418));m=qp(w.nextSibling);var k=Ul;m&&QK(d,m)?JK(k,w):(d.flags=d.flags&-4097|2,xi=!1,Ul=d)}}else{if(AD(d))throw Error(n(418));d.flags=d.flags&-4097|2,xi=!1,Ul=d}}}function eY(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Ul=d}function FP(d){if(d!==Ul)return!1;if(!xi)return eY(d),xi=!0,!1;var m;if((m=d.tag!==3)&&!(m=d.tag!==5)&&(m=d.type,m=m!=="head"&&m!=="body"&&!_D(d.type,d.memoizedProps)),m&&(m=Bl)){if(AD(d))throw tY(),Error(n(418));for(;m;)JK(d,m),m=qp(m.nextSibling)}if(eY(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));e:{for(d=d.nextSibling,m=0;d;){if(d.nodeType===8){var w=d.data;if(w==="/$"){if(m===0){Bl=qp(d.nextSibling);break e}m--}else w!=="$"&&w!=="$!"&&w!=="$?"||m++}d=d.nextSibling}Bl=null}}else Bl=Ul?qp(d.stateNode.nextSibling):null;return!0}function tY(){for(var d=Bl;d;)d=qp(d.nextSibling)}function e_(){Bl=Ul=null,xi=!1}function PD(d){Tu===null?Tu=[d]:Tu.push(d)}var bTe=P.ReactCurrentBatchConfig;function dE(d,m,w){if(d=w.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var k=w.stateNode}if(!k)throw Error(n(147,d));var R=k,D=""+d;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===D?m.ref:(m=function(K){var ce=R.refs;K===null?delete ce[D]:ce[D]=K},m._stringRef=D,m)}if(typeof d!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,d))}return d}function VP(d,m){throw d=Object.prototype.toString.call(m),Error(n(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d))}function nY(d){var m=d._init;return m(d._payload)}function rY(d){function m(Ee,me){if(d){var Ne=Ee.deletions;Ne===null?(Ee.deletions=[me],Ee.flags|=16):Ne.push(me)}}function w(Ee,me){if(!d)return null;for(;me!==null;)m(Ee,me),me=me.sibling;return null}function k(Ee,me){for(Ee=new Map;me!==null;)me.key!==null?Ee.set(me.key,me):Ee.set(me.index,me),me=me.sibling;return Ee}function R(Ee,me){return Ee=im(Ee,me),Ee.index=0,Ee.sibling=null,Ee}function D(Ee,me,Ne){return Ee.index=Ne,d?(Ne=Ee.alternate,Ne!==null?(Ne=Ne.index,Ne<me?(Ee.flags|=2,me):Ne):(Ee.flags|=2,me)):(Ee.flags|=1048576,me)}function K(Ee){return d&&Ee.alternate===null&&(Ee.flags|=2),Ee}function ce(Ee,me,Ne,gt){return me===null||me.tag!==6?(me=x6(Ne,Ee.mode,gt),me.return=Ee,me):(me=R(me,Ne),me.return=Ee,me)}function de(Ee,me,Ne,gt){var Jt=Ne.type;return Jt===C?lt(Ee,me,Ne.props.children,gt,Ne.key):me!==null&&(me.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===ze&&nY(Jt)===me.type)?(gt=R(me,Ne.props),gt.ref=dE(Ee,me,Ne),gt.return=Ee,gt):(gt=uC(Ne.type,Ne.key,Ne.props,null,Ee.mode,gt),gt.ref=dE(Ee,me,Ne),gt.return=Ee,gt)}function $e(Ee,me,Ne,gt){return me===null||me.tag!==4||me.stateNode.containerInfo!==Ne.containerInfo||me.stateNode.implementation!==Ne.implementation?(me=w6(Ne,Ee.mode,gt),me.return=Ee,me):(me=R(me,Ne.children||[]),me.return=Ee,me)}function lt(Ee,me,Ne,gt,Jt){return me===null||me.tag!==7?(me=z0(Ne,Ee.mode,gt,Jt),me.return=Ee,me):(me=R(me,Ne),me.return=Ee,me)}function ft(Ee,me,Ne){if(typeof me=="string"&&me!==""||typeof me=="number")return me=x6(""+me,Ee.mode,Ne),me.return=Ee,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case M:return Ne=uC(me.type,me.key,me.props,null,Ee.mode,Ne),Ne.ref=dE(Ee,null,me),Ne.return=Ee,Ne;case V:return me=w6(me,Ee.mode,Ne),me.return=Ee,me;case ze:var gt=me._init;return ft(Ee,gt(me._payload),Ne)}if(Hn(me)||ge(me))return me=z0(me,Ee.mode,Ne,null),me.return=Ee,me;VP(Ee,me)}return null}function it(Ee,me,Ne,gt){var Jt=me!==null?me.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return Jt!==null?null:ce(Ee,me,""+Ne,gt);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case M:return Ne.key===Jt?de(Ee,me,Ne,gt):null;case V:return Ne.key===Jt?$e(Ee,me,Ne,gt):null;case ze:return Jt=Ne._init,it(Ee,me,Jt(Ne._payload),gt)}if(Hn(Ne)||ge(Ne))return Jt!==null?null:lt(Ee,me,Ne,gt,null);VP(Ee,Ne)}return null}function Nt(Ee,me,Ne,gt,Jt){if(typeof gt=="string"&&gt!==""||typeof gt=="number")return Ee=Ee.get(Ne)||null,ce(me,Ee,""+gt,Jt);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case M:return Ee=Ee.get(gt.key===null?Ne:gt.key)||null,de(me,Ee,gt,Jt);case V:return Ee=Ee.get(gt.key===null?Ne:gt.key)||null,$e(me,Ee,gt,Jt);case ze:var dn=gt._init;return Nt(Ee,me,Ne,dn(gt._payload),Jt)}if(Hn(gt)||ge(gt))return Ee=Ee.get(Ne)||null,lt(me,Ee,gt,Jt,null);VP(me,gt)}return null}function Ut(Ee,me,Ne,gt){for(var Jt=null,dn=null,fn=me,kn=me=0,to=null;fn!==null&&kn<Ne.length;kn++){fn.index>kn?(to=fn,fn=null):to=fn.sibling;var vr=it(Ee,fn,Ne[kn],gt);if(vr===null){fn===null&&(fn=to);break}d&&fn&&vr.alternate===null&&m(Ee,fn),me=D(vr,me,kn),dn===null?Jt=vr:dn.sibling=vr,dn=vr,fn=to}if(kn===Ne.length)return w(Ee,fn),xi&&N0(Ee,kn),Jt;if(fn===null){for(;kn<Ne.length;kn++)fn=ft(Ee,Ne[kn],gt),fn!==null&&(me=D(fn,me,kn),dn===null?Jt=fn:dn.sibling=fn,dn=fn);return xi&&N0(Ee,kn),Jt}for(fn=k(Ee,fn);kn<Ne.length;kn++)to=Nt(fn,Ee,kn,Ne[kn],gt),to!==null&&(d&&to.alternate!==null&&fn.delete(to.key===null?kn:to.key),me=D(to,me,kn),dn===null?Jt=to:dn.sibling=to,dn=to);return d&&fn.forEach(function(sm){return m(Ee,sm)}),xi&&N0(Ee,kn),Jt}function Yt(Ee,me,Ne,gt){var Jt=ge(Ne);if(typeof Jt!="function")throw Error(n(150));if(Ne=Jt.call(Ne),Ne==null)throw Error(n(151));for(var dn=Jt=null,fn=me,kn=me=0,to=null,vr=Ne.next();fn!==null&&!vr.done;kn++,vr=Ne.next()){fn.index>kn?(to=fn,fn=null):to=fn.sibling;var sm=it(Ee,fn,vr.value,gt);if(sm===null){fn===null&&(fn=to);break}d&&fn&&sm.alternate===null&&m(Ee,fn),me=D(sm,me,kn),dn===null?Jt=sm:dn.sibling=sm,dn=sm,fn=to}if(vr.done)return w(Ee,fn),xi&&N0(Ee,kn),Jt;if(fn===null){for(;!vr.done;kn++,vr=Ne.next())vr=ft(Ee,vr.value,gt),vr!==null&&(me=D(vr,me,kn),dn===null?Jt=vr:dn.sibling=vr,dn=vr);return xi&&N0(Ee,kn),Jt}for(fn=k(Ee,fn);!vr.done;kn++,vr=Ne.next())vr=Nt(fn,Ee,kn,vr.value,gt),vr!==null&&(d&&vr.alternate!==null&&fn.delete(vr.key===null?kn:vr.key),me=D(vr,me,kn),dn===null?Jt=vr:dn.sibling=vr,dn=vr);return d&&fn.forEach(function(tke){return m(Ee,tke)}),xi&&N0(Ee,kn),Jt}function as(Ee,me,Ne,gt){if(typeof Ne=="object"&&Ne!==null&&Ne.type===C&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case M:e:{for(var Jt=Ne.key,dn=me;dn!==null;){if(dn.key===Jt){if(Jt=Ne.type,Jt===C){if(dn.tag===7){w(Ee,dn.sibling),me=R(dn,Ne.props.children),me.return=Ee,Ee=me;break e}}else if(dn.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===ze&&nY(Jt)===dn.type){w(Ee,dn.sibling),me=R(dn,Ne.props),me.ref=dE(Ee,dn,Ne),me.return=Ee,Ee=me;break e}w(Ee,dn);break}else m(Ee,dn);dn=dn.sibling}Ne.type===C?(me=z0(Ne.props.children,Ee.mode,gt,Ne.key),me.return=Ee,Ee=me):(gt=uC(Ne.type,Ne.key,Ne.props,null,Ee.mode,gt),gt.ref=dE(Ee,me,Ne),gt.return=Ee,Ee=gt)}return K(Ee);case V:e:{for(dn=Ne.key;me!==null;){if(me.key===dn)if(me.tag===4&&me.stateNode.containerInfo===Ne.containerInfo&&me.stateNode.implementation===Ne.implementation){w(Ee,me.sibling),me=R(me,Ne.children||[]),me.return=Ee,Ee=me;break e}else{w(Ee,me);break}else m(Ee,me);me=me.sibling}me=w6(Ne,Ee.mode,gt),me.return=Ee,Ee=me}return K(Ee);case ze:return dn=Ne._init,as(Ee,me,dn(Ne._payload),gt)}if(Hn(Ne))return Ut(Ee,me,Ne,gt);if(ge(Ne))return Yt(Ee,me,Ne,gt);VP(Ee,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"?(Ne=""+Ne,me!==null&&me.tag===6?(w(Ee,me.sibling),me=R(me,Ne),me.return=Ee,Ee=me):(w(Ee,me),me=x6(Ne,Ee.mode,gt),me.return=Ee,Ee=me),K(Ee)):w(Ee,me)}return as}var t_=rY(!0),iY=rY(!1),zP=Kp(null),GP=null,n_=null,CD=null;function RD(){CD=n_=GP=null}function MD(d){var m=zP.current;hi(zP),d._currentValue=m}function ND(d,m,w){for(;d!==null;){var k=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,k!==null&&(k.childLanes|=m)):k!==null&&(k.childLanes&m)!==m&&(k.childLanes|=m),d===w)break;d=d.return}}function r_(d,m){GP=d,CD=n_=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&m)!==0&&(Xa=!0),d.firstContext=null)}function Mc(d){var m=d._currentValue;if(CD!==d)if(d={context:d,memoizedValue:m,next:null},n_===null){if(GP===null)throw Error(n(308));n_=d,GP.dependencies={lanes:0,firstContext:d}}else n_=n_.next=d;return m}var O0=null;function OD(d){O0===null?O0=[d]:O0.push(d)}function sY(d,m,w,k){var R=m.interleaved;return R===null?(w.next=w,OD(m)):(w.next=R.next,R.next=w),m.interleaved=w,uf(d,k)}function uf(d,m){d.lanes|=m;var w=d.alternate;for(w!==null&&(w.lanes|=m),w=d,d=d.return;d!==null;)d.childLanes|=m,w=d.alternate,w!==null&&(w.childLanes|=m),w=d,d=d.return;return w.tag===3?w.stateNode:null}var Zp=!1;function LD(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oY(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function hf(d,m){return{eventTime:d,lane:m,tag:0,payload:null,callback:null,next:null}}function Jp(d,m,w){var k=d.updateQueue;if(k===null)return null;if(k=k.shared,(fr&2)!==0){var R=k.pending;return R===null?m.next=m:(m.next=R.next,R.next=m),k.pending=m,uf(d,w)}return R=k.interleaved,R===null?(m.next=m,OD(k)):(m.next=R.next,R.next=m),k.interleaved=m,uf(d,w)}function UP(d,m,w){if(m=m.updateQueue,m!==null&&(m=m.shared,(w&4194240)!==0)){var k=m.lanes;k&=d.pendingLanes,w|=k,m.lanes=w,qb(d,w)}}function aY(d,m){var w=d.updateQueue,k=d.alternate;if(k!==null&&(k=k.updateQueue,w===k)){var R=null,D=null;if(w=w.firstBaseUpdate,w!==null){do{var K={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};D===null?R=D=K:D=D.next=K,w=w.next}while(w!==null);D===null?R=D=m:D=D.next=m}else R=D=m;w={baseState:k.baseState,firstBaseUpdate:R,lastBaseUpdate:D,shared:k.shared,effects:k.effects},d.updateQueue=w;return}d=w.lastBaseUpdate,d===null?w.firstBaseUpdate=m:d.next=m,w.lastBaseUpdate=m}function BP(d,m,w,k){var R=d.updateQueue;Zp=!1;var D=R.firstBaseUpdate,K=R.lastBaseUpdate,ce=R.shared.pending;if(ce!==null){R.shared.pending=null;var de=ce,$e=de.next;de.next=null,K===null?D=$e:K.next=$e,K=de;var lt=d.alternate;lt!==null&&(lt=lt.updateQueue,ce=lt.lastBaseUpdate,ce!==K&&(ce===null?lt.firstBaseUpdate=$e:ce.next=$e,lt.lastBaseUpdate=de))}if(D!==null){var ft=R.baseState;K=0,lt=$e=de=null,ce=D;do{var it=ce.lane,Nt=ce.eventTime;if((k&it)===it){lt!==null&&(lt=lt.next={eventTime:Nt,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var Ut=d,Yt=ce;switch(it=m,Nt=w,Yt.tag){case 1:if(Ut=Yt.payload,typeof Ut=="function"){ft=Ut.call(Nt,ft,it);break e}ft=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=Yt.payload,it=typeof Ut=="function"?Ut.call(Nt,ft,it):Ut,it==null)break e;ft=Se({},ft,it);break e;case 2:Zp=!0}}ce.callback!==null&&ce.lane!==0&&(d.flags|=64,it=R.effects,it===null?R.effects=[ce]:it.push(ce))}else Nt={eventTime:Nt,lane:it,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},lt===null?($e=lt=Nt,de=ft):lt=lt.next=Nt,K|=it;if(ce=ce.next,ce===null){if(ce=R.shared.pending,ce===null)break;it=ce,ce=it.next,it.next=null,R.lastBaseUpdate=it,R.shared.pending=null}}while(!0);if(lt===null&&(de=ft),R.baseState=de,R.firstBaseUpdate=$e,R.lastBaseUpdate=lt,m=R.shared.interleaved,m!==null){R=m;do K|=R.lane,R=R.next;while(R!==m)}else D===null&&(R.shared.lanes=0);j0|=K,d.lanes=K,d.memoizedState=ft}}function lY(d,m,w){if(d=m.effects,m.effects=null,d!==null)for(m=0;m<d.length;m++){var k=d[m],R=k.callback;if(R!==null){if(k.callback=null,k=w,typeof R!="function")throw Error(n(191,R));R.call(k)}}}var fE={},Bh=Kp(fE),pE=Kp(fE),mE=Kp(fE);function L0(d){if(d===fE)throw Error(n(174));return d}function DD(d,m){switch(oi(mE,m),oi(pE,d),oi(Bh,fE),d=m.nodeType,d){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:Qn(null,"");break;default:d=d===8?m.parentNode:m,m=d.namespaceURI||null,d=d.tagName,m=Qn(m,d)}hi(Bh),oi(Bh,m)}function i_(){hi(Bh),hi(pE),hi(mE)}function cY(d){L0(mE.current);var m=L0(Bh.current),w=Qn(m,d.type);m!==w&&(oi(pE,d),oi(Bh,w))}function jD(d){pE.current===d&&(hi(Bh),hi(pE))}var Ci=Kp(0);function WP(d){for(var m=d;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var $D=[];function FD(){for(var d=0;d<$D.length;d++)$D[d]._workInProgressVersionPrimary=null;$D.length=0}var HP=P.ReactCurrentDispatcher,VD=P.ReactCurrentBatchConfig,D0=0,Ri=null,Fs=null,Qs=null,qP=!1,gE=!1,yE=0,ETe=0;function Go(){throw Error(n(321))}function zD(d,m){if(m===null)return!1;for(var w=0;w<m.length&&w<d.length;w++)if(!Su(d[w],m[w]))return!1;return!0}function GD(d,m,w,k,R,D){if(D0=D,Ri=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,HP.current=d===null||d.memoizedState===null?ATe:ITe,d=w(k,R),gE){D=0;do{if(gE=!1,yE=0,25<=D)throw Error(n(301));D+=1,Qs=Fs=null,m.updateQueue=null,HP.current=PTe,d=w(k,R)}while(gE)}if(HP.current=XP,m=Fs!==null&&Fs.next!==null,D0=0,Qs=Fs=Ri=null,qP=!1,m)throw Error(n(300));return d}function UD(){var d=yE!==0;return yE=0,d}function Wh(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qs===null?Ri.memoizedState=Qs=d:Qs=Qs.next=d,Qs}function Nc(){if(Fs===null){var d=Ri.alternate;d=d!==null?d.memoizedState:null}else d=Fs.next;var m=Qs===null?Ri.memoizedState:Qs.next;if(m!==null)Qs=m,Fs=d;else{if(d===null)throw Error(n(310));Fs=d,d={memoizedState:Fs.memoizedState,baseState:Fs.baseState,baseQueue:Fs.baseQueue,queue:Fs.queue,next:null},Qs===null?Ri.memoizedState=Qs=d:Qs=Qs.next=d}return Qs}function vE(d,m){return typeof m=="function"?m(d):m}function BD(d){var m=Nc(),w=m.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=d;var k=Fs,R=k.baseQueue,D=w.pending;if(D!==null){if(R!==null){var K=R.next;R.next=D.next,D.next=K}k.baseQueue=R=D,w.pending=null}if(R!==null){D=R.next,k=k.baseState;var ce=K=null,de=null,$e=D;do{var lt=$e.lane;if((D0&lt)===lt)de!==null&&(de=de.next={lane:0,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null}),k=$e.hasEagerState?$e.eagerState:d(k,$e.action);else{var ft={lane:lt,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null};de===null?(ce=de=ft,K=k):de=de.next=ft,Ri.lanes|=lt,j0|=lt}$e=$e.next}while($e!==null&&$e!==D);de===null?K=k:de.next=ce,Su(k,m.memoizedState)||(Xa=!0),m.memoizedState=k,m.baseState=K,m.baseQueue=de,w.lastRenderedState=k}if(d=w.interleaved,d!==null){R=d;do D=R.lane,Ri.lanes|=D,j0|=D,R=R.next;while(R!==d)}else R===null&&(w.lanes=0);return[m.memoizedState,w.dispatch]}function WD(d){var m=Nc(),w=m.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=d;var k=w.dispatch,R=w.pending,D=m.memoizedState;if(R!==null){w.pending=null;var K=R=R.next;do D=d(D,K.action),K=K.next;while(K!==R);Su(D,m.memoizedState)||(Xa=!0),m.memoizedState=D,m.baseQueue===null&&(m.baseState=D),w.lastRenderedState=D}return[D,k]}function uY(){}function hY(d,m){var w=Ri,k=Nc(),R=m(),D=!Su(k.memoizedState,R);if(D&&(k.memoizedState=R,Xa=!0),k=k.queue,HD(pY.bind(null,w,k,d),[d]),k.getSnapshot!==m||D||Qs!==null&&Qs.memoizedState.tag&1){if(w.flags|=2048,_E(9,fY.bind(null,w,k,R,m),void 0,null),eo===null)throw Error(n(349));(D0&30)!==0||dY(w,m,R)}return R}function dY(d,m,w){d.flags|=16384,d={getSnapshot:m,value:w},m=Ri.updateQueue,m===null?(m={lastEffect:null,stores:null},Ri.updateQueue=m,m.stores=[d]):(w=m.stores,w===null?m.stores=[d]:w.push(d))}function fY(d,m,w,k){m.value=w,m.getSnapshot=k,mY(m)&&gY(d)}function pY(d,m,w){return w(function(){mY(m)&&gY(d)})}function mY(d){var m=d.getSnapshot;d=d.value;try{var w=m();return!Su(d,w)}catch{return!0}}function gY(d){var m=uf(d,1);m!==null&&Pu(m,d,1,-1)}function yY(d){var m=Wh();return typeof d=="function"&&(d=d()),m.memoizedState=m.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vE,lastRenderedState:d},m.queue=d,d=d.dispatch=kTe.bind(null,Ri,d),[m.memoizedState,d]}function _E(d,m,w,k){return d={tag:d,create:m,destroy:w,deps:k,next:null},m=Ri.updateQueue,m===null?(m={lastEffect:null,stores:null},Ri.updateQueue=m,m.lastEffect=d.next=d):(w=m.lastEffect,w===null?m.lastEffect=d.next=d:(k=w.next,w.next=d,d.next=k,m.lastEffect=d)),d}function vY(){return Nc().memoizedState}function KP(d,m,w,k){var R=Wh();Ri.flags|=d,R.memoizedState=_E(1|m,w,void 0,k===void 0?null:k)}function YP(d,m,w,k){var R=Nc();k=k===void 0?null:k;var D=void 0;if(Fs!==null){var K=Fs.memoizedState;if(D=K.destroy,k!==null&&zD(k,K.deps)){R.memoizedState=_E(m,w,D,k);return}}Ri.flags|=d,R.memoizedState=_E(1|m,w,D,k)}function _Y(d,m){return KP(8390656,8,d,m)}function HD(d,m){return YP(2048,8,d,m)}function xY(d,m){return YP(4,2,d,m)}function wY(d,m){return YP(4,4,d,m)}function bY(d,m){if(typeof m=="function")return d=d(),m(d),function(){m(null)};if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function EY(d,m,w){return w=w!=null?w.concat([d]):null,YP(4,4,bY.bind(null,m,d),w)}function qD(){}function SY(d,m){var w=Nc();m=m===void 0?null:m;var k=w.memoizedState;return k!==null&&m!==null&&zD(m,k[1])?k[0]:(w.memoizedState=[d,m],d)}function TY(d,m){var w=Nc();m=m===void 0?null:m;var k=w.memoizedState;return k!==null&&m!==null&&zD(m,k[1])?k[0]:(d=d(),w.memoizedState=[d,m],d)}function kY(d,m,w){return(D0&21)===0?(d.baseState&&(d.baseState=!1,Xa=!0),d.memoizedState=w):(Su(w,m)||(w=Wb(),Ri.lanes|=w,j0|=w,d.baseState=!0),m)}function STe(d,m){var w=sr;sr=w!==0&&4>w?w:4,d(!0);var k=VD.transition;VD.transition={};try{d(!1),m()}finally{sr=w,VD.transition=k}}function AY(){return Nc().memoizedState}function TTe(d,m,w){var k=nm(d);if(w={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null},IY(d))PY(m,w);else if(w=sY(d,m,w,k),w!==null){var R=Ta();Pu(w,d,k,R),CY(w,m,k)}}function kTe(d,m,w){var k=nm(d),R={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null};if(IY(d))PY(m,R);else{var D=d.alternate;if(d.lanes===0&&(D===null||D.lanes===0)&&(D=m.lastRenderedReducer,D!==null))try{var K=m.lastRenderedState,ce=D(K,w);if(R.hasEagerState=!0,R.eagerState=ce,Su(ce,K)){var de=m.interleaved;de===null?(R.next=R,OD(m)):(R.next=de.next,de.next=R),m.interleaved=R;return}}catch{}w=sY(d,m,R,k),w!==null&&(R=Ta(),Pu(w,d,k,R),CY(w,m,k))}}function IY(d){var m=d.alternate;return d===Ri||m!==null&&m===Ri}function PY(d,m){gE=qP=!0;var w=d.pending;w===null?m.next=m:(m.next=w.next,w.next=m),d.pending=m}function CY(d,m,w){if((w&4194240)!==0){var k=m.lanes;k&=d.pendingLanes,w|=k,m.lanes=w,qb(d,w)}}var XP={readContext:Mc,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useInsertionEffect:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useDeferredValue:Go,useTransition:Go,useMutableSource:Go,useSyncExternalStore:Go,useId:Go,unstable_isNewReconciler:!1},ATe={readContext:Mc,useCallback:function(d,m){return Wh().memoizedState=[d,m===void 0?null:m],d},useContext:Mc,useEffect:_Y,useImperativeHandle:function(d,m,w){return w=w!=null?w.concat([d]):null,KP(4194308,4,bY.bind(null,m,d),w)},useLayoutEffect:function(d,m){return KP(4194308,4,d,m)},useInsertionEffect:function(d,m){return KP(4,2,d,m)},useMemo:function(d,m){var w=Wh();return m=m===void 0?null:m,d=d(),w.memoizedState=[d,m],d},useReducer:function(d,m,w){var k=Wh();return m=w!==void 0?w(m):m,k.memoizedState=k.baseState=m,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:m},k.queue=d,d=d.dispatch=TTe.bind(null,Ri,d),[k.memoizedState,d]},useRef:function(d){var m=Wh();return d={current:d},m.memoizedState=d},useState:yY,useDebugValue:qD,useDeferredValue:function(d){return Wh().memoizedState=d},useTransition:function(){var d=yY(!1),m=d[0];return d=STe.bind(null,d[1]),Wh().memoizedState=d,[m,d]},useMutableSource:function(){},useSyncExternalStore:function(d,m,w){var k=Ri,R=Wh();if(xi){if(w===void 0)throw Error(n(407));w=w()}else{if(w=m(),eo===null)throw Error(n(349));(D0&30)!==0||dY(k,m,w)}R.memoizedState=w;var D={value:w,getSnapshot:m};return R.queue=D,_Y(pY.bind(null,k,D,d),[d]),k.flags|=2048,_E(9,fY.bind(null,k,D,w,m),void 0,null),w},useId:function(){var d=Wh(),m=eo.identifierPrefix;if(xi){var w=cf,k=lf;w=(k&~(1<<32-Pi(k)-1)).toString(32)+w,m=":"+m+"R"+w,w=yE++,0<w&&(m+="H"+w.toString(32)),m+=":"}else w=ETe++,m=":"+m+"r"+w.toString(32)+":";return d.memoizedState=m},unstable_isNewReconciler:!1},ITe={readContext:Mc,useCallback:SY,useContext:Mc,useEffect:HD,useImperativeHandle:EY,useInsertionEffect:xY,useLayoutEffect:wY,useMemo:TY,useReducer:BD,useRef:vY,useState:function(){return BD(vE)},useDebugValue:qD,useDeferredValue:function(d){var m=Nc();return kY(m,Fs.memoizedState,d)},useTransition:function(){var d=BD(vE)[0],m=Nc().memoizedState;return[d,m]},useMutableSource:uY,useSyncExternalStore:hY,useId:AY,unstable_isNewReconciler:!1},PTe={readContext:Mc,useCallback:SY,useContext:Mc,useEffect:HD,useImperativeHandle:EY,useInsertionEffect:xY,useLayoutEffect:wY,useMemo:TY,useReducer:WD,useRef:vY,useState:function(){return WD(vE)},useDebugValue:qD,useDeferredValue:function(d){var m=Nc();return Fs===null?m.memoizedState=d:kY(m,Fs.memoizedState,d)},useTransition:function(){var d=WD(vE)[0],m=Nc().memoizedState;return[d,m]},useMutableSource:uY,useSyncExternalStore:hY,useId:AY,unstable_isNewReconciler:!1};function ku(d,m){if(d&&d.defaultProps){m=Se({},m),d=d.defaultProps;for(var w in d)m[w]===void 0&&(m[w]=d[w]);return m}return m}function KD(d,m,w,k){m=d.memoizedState,w=w(k,m),w=w==null?m:Se({},m,w),d.memoizedState=w,d.lanes===0&&(d.updateQueue.baseState=w)}var ZP={isMounted:function(d){return(d=d._reactInternals)?oe(d)===d:!1},enqueueSetState:function(d,m,w){d=d._reactInternals;var k=Ta(),R=nm(d),D=hf(k,R);D.payload=m,w!=null&&(D.callback=w),m=Jp(d,D,R),m!==null&&(Pu(m,d,R,k),UP(m,d,R))},enqueueReplaceState:function(d,m,w){d=d._reactInternals;var k=Ta(),R=nm(d),D=hf(k,R);D.tag=1,D.payload=m,w!=null&&(D.callback=w),m=Jp(d,D,R),m!==null&&(Pu(m,d,R,k),UP(m,d,R))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var w=Ta(),k=nm(d),R=hf(w,k);R.tag=2,m!=null&&(R.callback=m),m=Jp(d,R,k),m!==null&&(Pu(m,d,k,w),UP(m,d,k))}};function RY(d,m,w,k,R,D,K){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(k,D,K):m.prototype&&m.prototype.isPureReactComponent?!sE(w,k)||!sE(R,D):!0}function MY(d,m,w){var k=!1,R=Yp,D=m.contextType;return typeof D=="object"&&D!==null?D=Mc(D):(R=Ya(m)?R0:zo.current,k=m.contextTypes,D=(k=k!=null)?Zv(d,R):Yp),m=new m(w,D),d.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ZP,d.stateNode=m,m._reactInternals=d,k&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=R,d.__reactInternalMemoizedMaskedChildContext=D),m}function NY(d,m,w,k){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,k),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,k),m.state!==d&&ZP.enqueueReplaceState(m,m.state,null)}function YD(d,m,w,k){var R=d.stateNode;R.props=w,R.state=d.memoizedState,R.refs={},LD(d);var D=m.contextType;typeof D=="object"&&D!==null?R.context=Mc(D):(D=Ya(m)?R0:zo.current,R.context=Zv(d,D)),R.state=d.memoizedState,D=m.getDerivedStateFromProps,typeof D=="function"&&(KD(d,m,D,w),R.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(m=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),m!==R.state&&ZP.enqueueReplaceState(R,R.state,null),BP(d,w,R,k),R.state=d.memoizedState),typeof R.componentDidMount=="function"&&(d.flags|=4194308)}function s_(d,m){try{var w="",k=m;do w+=le(k),k=k.return;while(k);var R=w}catch(D){R=`
Error generating stack: `+D.message+`
`+D.stack}return{value:d,source:m,stack:R,digest:null}}function XD(d,m,w){return{value:d,source:null,stack:w??null,digest:m??null}}function ZD(d,m){try{console.error(m.value)}catch(w){setTimeout(function(){throw w})}}var CTe=typeof WeakMap=="function"?WeakMap:Map;function OY(d,m,w){w=hf(-1,w),w.tag=3,w.payload={element:null};var k=m.value;return w.callback=function(){iC||(iC=!0,d6=k),ZD(d,m)},w}function LY(d,m,w){w=hf(-1,w),w.tag=3;var k=d.type.getDerivedStateFromError;if(typeof k=="function"){var R=m.value;w.payload=function(){return k(R)},w.callback=function(){ZD(d,m)}}var D=d.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(w.callback=function(){ZD(d,m),typeof k!="function"&&(em===null?em=new Set([this]):em.add(this));var K=m.stack;this.componentDidCatch(m.value,{componentStack:K!==null?K:""})}),w}function DY(d,m,w){var k=d.pingCache;if(k===null){k=d.pingCache=new CTe;var R=new Set;k.set(m,R)}else R=k.get(m),R===void 0&&(R=new Set,k.set(m,R));R.has(w)||(R.add(w),d=BTe.bind(null,d,m,w),m.then(d,d))}function jY(d){do{var m;if((m=d.tag===13)&&(m=d.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return d;d=d.return}while(d!==null);return null}function $Y(d,m,w,k,R){return(d.mode&1)===0?(d===m?d.flags|=65536:(d.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(m=hf(-1,1),m.tag=2,Jp(w,m,1))),w.lanes|=1),d):(d.flags|=65536,d.lanes=R,d)}var RTe=P.ReactCurrentOwner,Xa=!1;function Sa(d,m,w,k){m.child=d===null?iY(m,null,w,k):t_(m,d.child,w,k)}function FY(d,m,w,k,R){w=w.render;var D=m.ref;return r_(m,R),k=GD(d,m,w,k,D,R),w=UD(),d!==null&&!Xa?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~R,df(d,m,R)):(xi&&w&&TD(m),m.flags|=1,Sa(d,m,k,R),m.child)}function VY(d,m,w,k,R){if(d===null){var D=w.type;return typeof D=="function"&&!_6(D)&&D.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(m.tag=15,m.type=D,zY(d,m,D,k,R)):(d=uC(w.type,null,k,m,m.mode,R),d.ref=m.ref,d.return=m,m.child=d)}if(D=d.child,(d.lanes&R)===0){var K=D.memoizedProps;if(w=w.compare,w=w!==null?w:sE,w(K,k)&&d.ref===m.ref)return df(d,m,R)}return m.flags|=1,d=im(D,k),d.ref=m.ref,d.return=m,m.child=d}function zY(d,m,w,k,R){if(d!==null){var D=d.memoizedProps;if(sE(D,k)&&d.ref===m.ref)if(Xa=!1,m.pendingProps=k=D,(d.lanes&R)!==0)(d.flags&131072)!==0&&(Xa=!0);else return m.lanes=d.lanes,df(d,m,R)}return JD(d,m,w,k,R)}function GY(d,m,w){var k=m.pendingProps,R=k.children,D=d!==null?d.memoizedState:null;if(k.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},oi(a_,Wl),Wl|=w;else{if((w&1073741824)===0)return d=D!==null?D.baseLanes|w:w,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:d,cachePool:null,transitions:null},m.updateQueue=null,oi(a_,Wl),Wl|=d,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=D!==null?D.baseLanes:w,oi(a_,Wl),Wl|=k}else D!==null?(k=D.baseLanes|w,m.memoizedState=null):k=w,oi(a_,Wl),Wl|=k;return Sa(d,m,R,w),m.child}function UY(d,m){var w=m.ref;(d===null&&w!==null||d!==null&&d.ref!==w)&&(m.flags|=512,m.flags|=2097152)}function JD(d,m,w,k,R){var D=Ya(w)?R0:zo.current;return D=Zv(m,D),r_(m,R),w=GD(d,m,w,k,D,R),k=UD(),d!==null&&!Xa?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~R,df(d,m,R)):(xi&&k&&TD(m),m.flags|=1,Sa(d,m,w,R),m.child)}function BY(d,m,w,k,R){if(Ya(w)){var D=!0;LP(m)}else D=!1;if(r_(m,R),m.stateNode===null)QP(d,m),MY(m,w,k),YD(m,w,k,R),k=!0;else if(d===null){var K=m.stateNode,ce=m.memoizedProps;K.props=ce;var de=K.context,$e=w.contextType;typeof $e=="object"&&$e!==null?$e=Mc($e):($e=Ya(w)?R0:zo.current,$e=Zv(m,$e));var lt=w.getDerivedStateFromProps,ft=typeof lt=="function"||typeof K.getSnapshotBeforeUpdate=="function";ft||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ce!==k||de!==$e)&&NY(m,K,k,$e),Zp=!1;var it=m.memoizedState;K.state=it,BP(m,k,K,R),de=m.memoizedState,ce!==k||it!==de||Ka.current||Zp?(typeof lt=="function"&&(KD(m,w,lt,k),de=m.memoizedState),(ce=Zp||RY(m,w,ce,k,it,de,$e))?(ft||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(m.flags|=4194308)):(typeof K.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=k,m.memoizedState=de),K.props=k,K.state=de,K.context=$e,k=ce):(typeof K.componentDidMount=="function"&&(m.flags|=4194308),k=!1)}else{K=m.stateNode,oY(d,m),ce=m.memoizedProps,$e=m.type===m.elementType?ce:ku(m.type,ce),K.props=$e,ft=m.pendingProps,it=K.context,de=w.contextType,typeof de=="object"&&de!==null?de=Mc(de):(de=Ya(w)?R0:zo.current,de=Zv(m,de));var Nt=w.getDerivedStateFromProps;(lt=typeof Nt=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ce!==ft||it!==de)&&NY(m,K,k,de),Zp=!1,it=m.memoizedState,K.state=it,BP(m,k,K,R);var Ut=m.memoizedState;ce!==ft||it!==Ut||Ka.current||Zp?(typeof Nt=="function"&&(KD(m,w,Nt,k),Ut=m.memoizedState),($e=Zp||RY(m,w,$e,k,it,Ut,de)||!1)?(lt||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(k,Ut,de),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(k,Ut,de)),typeof K.componentDidUpdate=="function"&&(m.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof K.componentDidUpdate!="function"||ce===d.memoizedProps&&it===d.memoizedState||(m.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ce===d.memoizedProps&&it===d.memoizedState||(m.flags|=1024),m.memoizedProps=k,m.memoizedState=Ut),K.props=k,K.state=Ut,K.context=de,k=$e):(typeof K.componentDidUpdate!="function"||ce===d.memoizedProps&&it===d.memoizedState||(m.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ce===d.memoizedProps&&it===d.memoizedState||(m.flags|=1024),k=!1)}return QD(d,m,w,k,D,R)}function QD(d,m,w,k,R,D){UY(d,m);var K=(m.flags&128)!==0;if(!k&&!K)return R&&YK(m,w,!1),df(d,m,D);k=m.stateNode,RTe.current=m;var ce=K&&typeof w.getDerivedStateFromError!="function"?null:k.render();return m.flags|=1,d!==null&&K?(m.child=t_(m,d.child,null,D),m.child=t_(m,null,ce,D)):Sa(d,m,ce,D),m.memoizedState=k.state,R&&YK(m,w,!0),m.child}function WY(d){var m=d.stateNode;m.pendingContext?qK(d,m.pendingContext,m.pendingContext!==m.context):m.context&&qK(d,m.context,!1),DD(d,m.containerInfo)}function HY(d,m,w,k,R){return e_(),PD(R),m.flags|=256,Sa(d,m,w,k),m.child}var e6={dehydrated:null,treeContext:null,retryLane:0};function t6(d){return{baseLanes:d,cachePool:null,transitions:null}}function qY(d,m,w){var k=m.pendingProps,R=Ci.current,D=!1,K=(m.flags&128)!==0,ce;if((ce=K)||(ce=d!==null&&d.memoizedState===null?!1:(R&2)!==0),ce?(D=!0,m.flags&=-129):(d===null||d.memoizedState!==null)&&(R|=1),oi(Ci,R&1),d===null)return ID(m),d=m.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((m.mode&1)===0?m.lanes=1:d.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(K=k.children,d=k.fallback,D?(k=m.mode,D=m.child,K={mode:"hidden",children:K},(k&1)===0&&D!==null?(D.childLanes=0,D.pendingProps=K):D=hC(K,k,0,null),d=z0(d,k,w,null),D.return=m,d.return=m,D.sibling=d,m.child=D,m.child.memoizedState=t6(w),m.memoizedState=e6,d):n6(m,K));if(R=d.memoizedState,R!==null&&(ce=R.dehydrated,ce!==null))return MTe(d,m,K,k,ce,R,w);if(D){D=k.fallback,K=m.mode,R=d.child,ce=R.sibling;var de={mode:"hidden",children:k.children};return(K&1)===0&&m.child!==R?(k=m.child,k.childLanes=0,k.pendingProps=de,m.deletions=null):(k=im(R,de),k.subtreeFlags=R.subtreeFlags&14680064),ce!==null?D=im(ce,D):(D=z0(D,K,w,null),D.flags|=2),D.return=m,k.return=m,k.sibling=D,m.child=k,k=D,D=m.child,K=d.child.memoizedState,K=K===null?t6(w):{baseLanes:K.baseLanes|w,cachePool:null,transitions:K.transitions},D.memoizedState=K,D.childLanes=d.childLanes&~w,m.memoizedState=e6,k}return D=d.child,d=D.sibling,k=im(D,{mode:"visible",children:k.children}),(m.mode&1)===0&&(k.lanes=w),k.return=m,k.sibling=null,d!==null&&(w=m.deletions,w===null?(m.deletions=[d],m.flags|=16):w.push(d)),m.child=k,m.memoizedState=null,k}function n6(d,m){return m=hC({mode:"visible",children:m},d.mode,0,null),m.return=d,d.child=m}function JP(d,m,w,k){return k!==null&&PD(k),t_(m,d.child,null,w),d=n6(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function MTe(d,m,w,k,R,D,K){if(w)return m.flags&256?(m.flags&=-257,k=XD(Error(n(422))),JP(d,m,K,k)):m.memoizedState!==null?(m.child=d.child,m.flags|=128,null):(D=k.fallback,R=m.mode,k=hC({mode:"visible",children:k.children},R,0,null),D=z0(D,R,K,null),D.flags|=2,k.return=m,D.return=m,k.sibling=D,m.child=k,(m.mode&1)!==0&&t_(m,d.child,null,K),m.child.memoizedState=t6(K),m.memoizedState=e6,D);if((m.mode&1)===0)return JP(d,m,K,null);if(R.data==="$!"){if(k=R.nextSibling&&R.nextSibling.dataset,k)var ce=k.dgst;return k=ce,D=Error(n(419)),k=XD(D,k,void 0),JP(d,m,K,k)}if(ce=(K&d.childLanes)!==0,Xa||ce){if(k=eo,k!==null){switch(K&-K){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=(R&(k.suspendedLanes|K))!==0?0:R,R!==0&&R!==D.retryLane&&(D.retryLane=R,uf(d,R),Pu(k,d,R,-1))}return v6(),k=XD(Error(n(421))),JP(d,m,K,k)}return R.data==="$?"?(m.flags|=128,m.child=d.child,m=WTe.bind(null,d),R._reactRetry=m,null):(d=D.treeContext,Bl=qp(R.nextSibling),Ul=m,xi=!0,Tu=null,d!==null&&(Cc[Rc++]=lf,Cc[Rc++]=cf,Cc[Rc++]=M0,lf=d.id,cf=d.overflow,M0=m),m=n6(m,k.children),m.flags|=4096,m)}function KY(d,m,w){d.lanes|=m;var k=d.alternate;k!==null&&(k.lanes|=m),ND(d.return,m,w)}function r6(d,m,w,k,R){var D=d.memoizedState;D===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:k,tail:w,tailMode:R}:(D.isBackwards=m,D.rendering=null,D.renderingStartTime=0,D.last=k,D.tail=w,D.tailMode=R)}function YY(d,m,w){var k=m.pendingProps,R=k.revealOrder,D=k.tail;if(Sa(d,m,k.children,w),k=Ci.current,(k&2)!==0)k=k&1|2,m.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&KY(d,w,m);else if(d.tag===19)KY(d,w,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}k&=1}if(oi(Ci,k),(m.mode&1)===0)m.memoizedState=null;else switch(R){case"forwards":for(w=m.child,R=null;w!==null;)d=w.alternate,d!==null&&WP(d)===null&&(R=w),w=w.sibling;w=R,w===null?(R=m.child,m.child=null):(R=w.sibling,w.sibling=null),r6(m,!1,R,w,D);break;case"backwards":for(w=null,R=m.child,m.child=null;R!==null;){if(d=R.alternate,d!==null&&WP(d)===null){m.child=R;break}d=R.sibling,R.sibling=w,w=R,R=d}r6(m,!0,w,null,D);break;case"together":r6(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function QP(d,m){(m.mode&1)===0&&d!==null&&(d.alternate=null,m.alternate=null,m.flags|=2)}function df(d,m,w){if(d!==null&&(m.dependencies=d.dependencies),j0|=m.lanes,(w&m.childLanes)===0)return null;if(d!==null&&m.child!==d.child)throw Error(n(153));if(m.child!==null){for(d=m.child,w=im(d,d.pendingProps),m.child=w,w.return=m;d.sibling!==null;)d=d.sibling,w=w.sibling=im(d,d.pendingProps),w.return=m;w.sibling=null}return m.child}function NTe(d,m,w){switch(m.tag){case 3:WY(m),e_();break;case 5:cY(m);break;case 1:Ya(m.type)&&LP(m);break;case 4:DD(m,m.stateNode.containerInfo);break;case 10:var k=m.type._context,R=m.memoizedProps.value;oi(zP,k._currentValue),k._currentValue=R;break;case 13:if(k=m.memoizedState,k!==null)return k.dehydrated!==null?(oi(Ci,Ci.current&1),m.flags|=128,null):(w&m.child.childLanes)!==0?qY(d,m,w):(oi(Ci,Ci.current&1),d=df(d,m,w),d!==null?d.sibling:null);oi(Ci,Ci.current&1);break;case 19:if(k=(w&m.childLanes)!==0,(d.flags&128)!==0){if(k)return YY(d,m,w);m.flags|=128}if(R=m.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),oi(Ci,Ci.current),k)break;return null;case 22:case 23:return m.lanes=0,GY(d,m,w)}return df(d,m,w)}var XY,i6,ZY,JY;XY=function(d,m){for(var w=m.child;w!==null;){if(w.tag===5||w.tag===6)d.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===m)break;for(;w.sibling===null;){if(w.return===null||w.return===m)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},i6=function(){},ZY=function(d,m,w,k){var R=d.memoizedProps;if(R!==k){d=m.stateNode,L0(Bh.current);var D=null;switch(w){case"input":R=jt(d,R),k=jt(d,k),D=[];break;case"select":R=Se({},R,{value:void 0}),k=Se({},k,{value:void 0}),D=[];break;case"textarea":R=xo(d,R),k=xo(d,k),D=[];break;default:typeof R.onClick!="function"&&typeof k.onClick=="function"&&(d.onclick=MP)}Ii(w,k);var K;w=null;for($e in R)if(!k.hasOwnProperty($e)&&R.hasOwnProperty($e)&&R[$e]!=null)if($e==="style"){var ce=R[$e];for(K in ce)ce.hasOwnProperty(K)&&(w||(w={}),w[K]="")}else $e!=="dangerouslySetInnerHTML"&&$e!=="children"&&$e!=="suppressContentEditableWarning"&&$e!=="suppressHydrationWarning"&&$e!=="autoFocus"&&(i.hasOwnProperty($e)?D||(D=[]):(D=D||[]).push($e,null));for($e in k){var de=k[$e];if(ce=R?.[$e],k.hasOwnProperty($e)&&de!==ce&&(de!=null||ce!=null))if($e==="style")if(ce){for(K in ce)!ce.hasOwnProperty(K)||de&&de.hasOwnProperty(K)||(w||(w={}),w[K]="");for(K in de)de.hasOwnProperty(K)&&ce[K]!==de[K]&&(w||(w={}),w[K]=de[K])}else w||(D||(D=[]),D.push($e,w)),w=de;else $e==="dangerouslySetInnerHTML"?(de=de?de.__html:void 0,ce=ce?ce.__html:void 0,de!=null&&ce!==de&&(D=D||[]).push($e,de)):$e==="children"?typeof de!="string"&&typeof de!="number"||(D=D||[]).push($e,""+de):$e!=="suppressContentEditableWarning"&&$e!=="suppressHydrationWarning"&&(i.hasOwnProperty($e)?(de!=null&&$e==="onScroll"&&ui("scroll",d),D||ce===de||(D=[])):(D=D||[]).push($e,de))}w&&(D=D||[]).push("style",w);var $e=D;(m.updateQueue=$e)&&(m.flags|=4)}},JY=function(d,m,w,k){w!==k&&(m.flags|=4)};function xE(d,m){if(!xi)switch(d.tailMode){case"hidden":m=d.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?d.tail=null:w.sibling=null;break;case"collapsed":w=d.tail;for(var k=null;w!==null;)w.alternate!==null&&(k=w),w=w.sibling;k===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:k.sibling=null}}function Uo(d){var m=d.alternate!==null&&d.alternate.child===d.child,w=0,k=0;if(m)for(var R=d.child;R!==null;)w|=R.lanes|R.childLanes,k|=R.subtreeFlags&14680064,k|=R.flags&14680064,R.return=d,R=R.sibling;else for(R=d.child;R!==null;)w|=R.lanes|R.childLanes,k|=R.subtreeFlags,k|=R.flags,R.return=d,R=R.sibling;return d.subtreeFlags|=k,d.childLanes=w,m}function OTe(d,m,w){var k=m.pendingProps;switch(kD(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Uo(m),null;case 1:return Ya(m.type)&&OP(),Uo(m),null;case 3:return k=m.stateNode,i_(),hi(Ka),hi(zo),FD(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(d===null||d.child===null)&&(FP(m)?m.flags|=4:d===null||d.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Tu!==null&&(m6(Tu),Tu=null))),i6(d,m),Uo(m),null;case 5:jD(m);var R=L0(mE.current);if(w=m.type,d!==null&&m.stateNode!=null)ZY(d,m,w,k,R),d.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!k){if(m.stateNode===null)throw Error(n(166));return Uo(m),null}if(d=L0(Bh.current),FP(m)){k=m.stateNode,w=m.type;var D=m.memoizedProps;switch(k[Uh]=m,k[uE]=D,d=(m.mode&1)!==0,w){case"dialog":ui("cancel",k),ui("close",k);break;case"iframe":case"object":case"embed":ui("load",k);break;case"video":case"audio":for(R=0;R<aE.length;R++)ui(aE[R],k);break;case"source":ui("error",k);break;case"img":case"image":case"link":ui("error",k),ui("load",k);break;case"details":ui("toggle",k);break;case"input":gn(k,D),ui("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!D.multiple},ui("invalid",k);break;case"textarea":Rr(k,D),ui("invalid",k)}Ii(w,D),R=null;for(var K in D)if(D.hasOwnProperty(K)){var ce=D[K];K==="children"?typeof ce=="string"?k.textContent!==ce&&(D.suppressHydrationWarning!==!0&&RP(k.textContent,ce,d),R=["children",ce]):typeof ce=="number"&&k.textContent!==""+ce&&(D.suppressHydrationWarning!==!0&&RP(k.textContent,ce,d),R=["children",""+ce]):i.hasOwnProperty(K)&&ce!=null&&K==="onScroll"&&ui("scroll",k)}switch(w){case"input":Dt(k),hr(k,D,!0);break;case"textarea":Dt(k),js(k);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(k.onclick=MP)}k=R,m.updateQueue=k,k!==null&&(m.flags|=4)}else{K=R.nodeType===9?R:R.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=wt(w)),d==="http://www.w3.org/1999/xhtml"?w==="script"?(d=K.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof k.is=="string"?d=K.createElement(w,{is:k.is}):(d=K.createElement(w),w==="select"&&(K=d,k.multiple?K.multiple=!0:k.size&&(K.size=k.size))):d=K.createElementNS(d,w),d[Uh]=m,d[uE]=k,XY(d,m,!1,!1),m.stateNode=d;e:{switch(K=He(w,k),w){case"dialog":ui("cancel",d),ui("close",d),R=k;break;case"iframe":case"object":case"embed":ui("load",d),R=k;break;case"video":case"audio":for(R=0;R<aE.length;R++)ui(aE[R],d);R=k;break;case"source":ui("error",d),R=k;break;case"img":case"image":case"link":ui("error",d),ui("load",d),R=k;break;case"details":ui("toggle",d),R=k;break;case"input":gn(d,k),R=jt(d,k),ui("invalid",d);break;case"option":R=k;break;case"select":d._wrapperState={wasMultiple:!!k.multiple},R=Se({},k,{value:void 0}),ui("invalid",d);break;case"textarea":Rr(d,k),R=xo(d,k),ui("invalid",d);break;default:R=k}Ii(w,R),ce=R;for(D in ce)if(ce.hasOwnProperty(D)){var de=ce[D];D==="style"?$s(d,de):D==="dangerouslySetInnerHTML"?(de=de?de.__html:void 0,de!=null&&Vt(d,de)):D==="children"?typeof de=="string"?(w!=="textarea"||de!=="")&&jn(d,de):typeof de=="number"&&jn(d,""+de):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(i.hasOwnProperty(D)?de!=null&&D==="onScroll"&&ui("scroll",d):de!=null&&I(d,D,de,K))}switch(w){case"input":Dt(d),hr(d,k,!1);break;case"textarea":Dt(d),js(d);break;case"option":k.value!=null&&d.setAttribute("value",""+Ke(k.value));break;case"select":d.multiple=!!k.multiple,D=k.value,D!=null?ei(d,!!k.multiple,D,!1):k.defaultValue!=null&&ei(d,!!k.multiple,k.defaultValue,!0);break;default:typeof R.onClick=="function"&&(d.onclick=MP)}switch(w){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Uo(m),null;case 6:if(d&&m.stateNode!=null)JY(d,m,d.memoizedProps,k);else{if(typeof k!="string"&&m.stateNode===null)throw Error(n(166));if(w=L0(mE.current),L0(Bh.current),FP(m)){if(k=m.stateNode,w=m.memoizedProps,k[Uh]=m,(D=k.nodeValue!==w)&&(d=Ul,d!==null))switch(d.tag){case 3:RP(k.nodeValue,w,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&RP(k.nodeValue,w,(d.mode&1)!==0)}D&&(m.flags|=4)}else k=(w.nodeType===9?w:w.ownerDocument).createTextNode(k),k[Uh]=m,m.stateNode=k}return Uo(m),null;case 13:if(hi(Ci),k=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(xi&&Bl!==null&&(m.mode&1)!==0&&(m.flags&128)===0)tY(),e_(),m.flags|=98560,D=!1;else if(D=FP(m),k!==null&&k.dehydrated!==null){if(d===null){if(!D)throw Error(n(318));if(D=m.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(n(317));D[Uh]=m}else e_(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Uo(m),D=!1}else Tu!==null&&(m6(Tu),Tu=null),D=!0;if(!D)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=w,m):(k=k!==null,k!==(d!==null&&d.memoizedState!==null)&&k&&(m.child.flags|=8192,(m.mode&1)!==0&&(d===null||(Ci.current&1)!==0?Vs===0&&(Vs=3):v6())),m.updateQueue!==null&&(m.flags|=4),Uo(m),null);case 4:return i_(),i6(d,m),d===null&&lE(m.stateNode.containerInfo),Uo(m),null;case 10:return MD(m.type._context),Uo(m),null;case 17:return Ya(m.type)&&OP(),Uo(m),null;case 19:if(hi(Ci),D=m.memoizedState,D===null)return Uo(m),null;if(k=(m.flags&128)!==0,K=D.rendering,K===null)if(k)xE(D,!1);else{if(Vs!==0||d!==null&&(d.flags&128)!==0)for(d=m.child;d!==null;){if(K=WP(d),K!==null){for(m.flags|=128,xE(D,!1),k=K.updateQueue,k!==null&&(m.updateQueue=k,m.flags|=4),m.subtreeFlags=0,k=w,w=m.child;w!==null;)D=w,d=k,D.flags&=14680066,K=D.alternate,K===null?(D.childLanes=0,D.lanes=d,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=K.childLanes,D.lanes=K.lanes,D.child=K.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=K.memoizedProps,D.memoizedState=K.memoizedState,D.updateQueue=K.updateQueue,D.type=K.type,d=K.dependencies,D.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),w=w.sibling;return oi(Ci,Ci.current&1|2),m.child}d=d.sibling}D.tail!==null&&dt()>l_&&(m.flags|=128,k=!0,xE(D,!1),m.lanes=4194304)}else{if(!k)if(d=WP(K),d!==null){if(m.flags|=128,k=!0,w=d.updateQueue,w!==null&&(m.updateQueue=w,m.flags|=4),xE(D,!0),D.tail===null&&D.tailMode==="hidden"&&!K.alternate&&!xi)return Uo(m),null}else 2*dt()-D.renderingStartTime>l_&&w!==1073741824&&(m.flags|=128,k=!0,xE(D,!1),m.lanes=4194304);D.isBackwards?(K.sibling=m.child,m.child=K):(w=D.last,w!==null?w.sibling=K:m.child=K,D.last=K)}return D.tail!==null?(m=D.tail,D.rendering=m,D.tail=m.sibling,D.renderingStartTime=dt(),m.sibling=null,w=Ci.current,oi(Ci,k?w&1|2:w&1),m):(Uo(m),null);case 22:case 23:return y6(),k=m.memoizedState!==null,d!==null&&d.memoizedState!==null!==k&&(m.flags|=8192),k&&(m.mode&1)!==0?(Wl&1073741824)!==0&&(Uo(m),m.subtreeFlags&6&&(m.flags|=8192)):Uo(m),null;case 24:return null;case 25:return null}throw Error(n(156,m.tag))}function LTe(d,m){switch(kD(m),m.tag){case 1:return Ya(m.type)&&OP(),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return i_(),hi(Ka),hi(zo),FD(),d=m.flags,(d&65536)!==0&&(d&128)===0?(m.flags=d&-65537|128,m):null;case 5:return jD(m),null;case 13:if(hi(Ci),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(n(340));e_()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return hi(Ci),null;case 4:return i_(),null;case 10:return MD(m.type._context),null;case 22:case 23:return y6(),null;case 24:return null;default:return null}}var eC=!1,Bo=!1,DTe=typeof WeakSet=="function"?WeakSet:Set,$t=null;function o_(d,m){var w=d.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(k){Ui(d,m,k)}else w.current=null}function s6(d,m,w){try{w()}catch(k){Ui(d,m,k)}}var QY=!1;function jTe(d,m){if(yD=nf,d=RK(),cD(d)){if("selectionStart"in d)var w={start:d.selectionStart,end:d.selectionEnd};else e:{w=(w=d.ownerDocument)&&w.defaultView||window;var k=w.getSelection&&w.getSelection();if(k&&k.rangeCount!==0){w=k.anchorNode;var R=k.anchorOffset,D=k.focusNode;k=k.focusOffset;try{w.nodeType,D.nodeType}catch{w=null;break e}var K=0,ce=-1,de=-1,$e=0,lt=0,ft=d,it=null;t:for(;;){for(var Nt;ft!==w||R!==0&&ft.nodeType!==3||(ce=K+R),ft!==D||k!==0&&ft.nodeType!==3||(de=K+k),ft.nodeType===3&&(K+=ft.nodeValue.length),(Nt=ft.firstChild)!==null;)it=ft,ft=Nt;for(;;){if(ft===d)break t;if(it===w&&++$e===R&&(ce=K),it===D&&++lt===k&&(de=K),(Nt=ft.nextSibling)!==null)break;ft=it,it=ft.parentNode}ft=Nt}w=ce===-1||de===-1?null:{start:ce,end:de}}else w=null}w=w||{start:0,end:0}}else w=null;for(vD={focusedElem:d,selectionRange:w},nf=!1,$t=m;$t!==null;)if(m=$t,d=m.child,(m.subtreeFlags&1028)!==0&&d!==null)d.return=m,$t=d;else for(;$t!==null;){m=$t;try{var Ut=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(Ut!==null){var Yt=Ut.memoizedProps,as=Ut.memoizedState,Ee=m.stateNode,me=Ee.getSnapshotBeforeUpdate(m.elementType===m.type?Yt:ku(m.type,Yt),as);Ee.__reactInternalSnapshotBeforeUpdate=me}break;case 3:var Ne=m.stateNode.containerInfo;Ne.nodeType===1?Ne.textContent="":Ne.nodeType===9&&Ne.documentElement&&Ne.removeChild(Ne.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(gt){Ui(m,m.return,gt)}if(d=m.sibling,d!==null){d.return=m.return,$t=d;break}$t=m.return}return Ut=QY,QY=!1,Ut}function wE(d,m,w){var k=m.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var R=k=k.next;do{if((R.tag&d)===d){var D=R.destroy;R.destroy=void 0,D!==void 0&&s6(m,w,D)}R=R.next}while(R!==k)}}function tC(d,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var w=m=m.next;do{if((w.tag&d)===d){var k=w.create;w.destroy=k()}w=w.next}while(w!==m)}}function o6(d){var m=d.ref;if(m!==null){var w=d.stateNode;switch(d.tag){case 5:d=w;break;default:d=w}typeof m=="function"?m(d):m.current=d}}function eX(d){var m=d.alternate;m!==null&&(d.alternate=null,eX(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&(delete m[Uh],delete m[uE],delete m[bD],delete m[_Te],delete m[xTe])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function tX(d){return d.tag===5||d.tag===3||d.tag===4}function nX(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||tX(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function a6(d,m,w){var k=d.tag;if(k===5||k===6)d=d.stateNode,m?w.nodeType===8?w.parentNode.insertBefore(d,m):w.insertBefore(d,m):(w.nodeType===8?(m=w.parentNode,m.insertBefore(d,w)):(m=w,m.appendChild(d)),w=w._reactRootContainer,w!=null||m.onclick!==null||(m.onclick=MP));else if(k!==4&&(d=d.child,d!==null))for(a6(d,m,w),d=d.sibling;d!==null;)a6(d,m,w),d=d.sibling}function l6(d,m,w){var k=d.tag;if(k===5||k===6)d=d.stateNode,m?w.insertBefore(d,m):w.appendChild(d);else if(k!==4&&(d=d.child,d!==null))for(l6(d,m,w),d=d.sibling;d!==null;)l6(d,m,w),d=d.sibling}var Eo=null,Au=!1;function Qp(d,m,w){for(w=w.child;w!==null;)rX(d,m,w),w=w.sibling}function rX(d,m,w){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount($l,w)}catch{}switch(w.tag){case 5:Bo||o_(w,m);case 6:var k=Eo,R=Au;Eo=null,Qp(d,m,w),Eo=k,Au=R,Eo!==null&&(Au?(d=Eo,w=w.stateNode,d.nodeType===8?d.parentNode.removeChild(w):d.removeChild(w)):Eo.removeChild(w.stateNode));break;case 18:Eo!==null&&(Au?(d=Eo,w=w.stateNode,d.nodeType===8?wD(d.parentNode,w):d.nodeType===1&&wD(d,w),Up(d)):wD(Eo,w.stateNode));break;case 4:k=Eo,R=Au,Eo=w.stateNode.containerInfo,Au=!0,Qp(d,m,w),Eo=k,Au=R;break;case 0:case 11:case 14:case 15:if(!Bo&&(k=w.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){R=k=k.next;do{var D=R,K=D.destroy;D=D.tag,K!==void 0&&((D&2)!==0||(D&4)!==0)&&s6(w,m,K),R=R.next}while(R!==k)}Qp(d,m,w);break;case 1:if(!Bo&&(o_(w,m),k=w.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=w.memoizedProps,k.state=w.memoizedState,k.componentWillUnmount()}catch(ce){Ui(w,m,ce)}Qp(d,m,w);break;case 21:Qp(d,m,w);break;case 22:w.mode&1?(Bo=(k=Bo)||w.memoizedState!==null,Qp(d,m,w),Bo=k):Qp(d,m,w);break;default:Qp(d,m,w)}}function iX(d){var m=d.updateQueue;if(m!==null){d.updateQueue=null;var w=d.stateNode;w===null&&(w=d.stateNode=new DTe),m.forEach(function(k){var R=HTe.bind(null,d,k);w.has(k)||(w.add(k),k.then(R,R))})}}function Iu(d,m){var w=m.deletions;if(w!==null)for(var k=0;k<w.length;k++){var R=w[k];try{var D=d,K=m,ce=K;e:for(;ce!==null;){switch(ce.tag){case 5:Eo=ce.stateNode,Au=!1;break e;case 3:Eo=ce.stateNode.containerInfo,Au=!0;break e;case 4:Eo=ce.stateNode.containerInfo,Au=!0;break e}ce=ce.return}if(Eo===null)throw Error(n(160));rX(D,K,R),Eo=null,Au=!1;var de=R.alternate;de!==null&&(de.return=null),R.return=null}catch($e){Ui(R,m,$e)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)sX(m,d),m=m.sibling}function sX(d,m){var w=d.alternate,k=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(Iu(m,d),Hh(d),k&4){try{wE(3,d,d.return),tC(3,d)}catch(Yt){Ui(d,d.return,Yt)}try{wE(5,d,d.return)}catch(Yt){Ui(d,d.return,Yt)}}break;case 1:Iu(m,d),Hh(d),k&512&&w!==null&&o_(w,w.return);break;case 5:if(Iu(m,d),Hh(d),k&512&&w!==null&&o_(w,w.return),d.flags&32){var R=d.stateNode;try{jn(R,"")}catch(Yt){Ui(d,d.return,Yt)}}if(k&4&&(R=d.stateNode,R!=null)){var D=d.memoizedProps,K=w!==null?w.memoizedProps:D,ce=d.type,de=d.updateQueue;if(d.updateQueue=null,de!==null)try{ce==="input"&&D.type==="radio"&&D.name!=null&&wn(R,D),He(ce,K);var $e=He(ce,D);for(K=0;K<de.length;K+=2){var lt=de[K],ft=de[K+1];lt==="style"?$s(R,ft):lt==="dangerouslySetInnerHTML"?Vt(R,ft):lt==="children"?jn(R,ft):I(R,lt,ft,$e)}switch(ce){case"input":pt(R,D);break;case"textarea":Ai(R,D);break;case"select":var it=R._wrapperState.wasMultiple;R._wrapperState.wasMultiple=!!D.multiple;var Nt=D.value;Nt!=null?ei(R,!!D.multiple,Nt,!1):it!==!!D.multiple&&(D.defaultValue!=null?ei(R,!!D.multiple,D.defaultValue,!0):ei(R,!!D.multiple,D.multiple?[]:"",!1))}R[uE]=D}catch(Yt){Ui(d,d.return,Yt)}}break;case 6:if(Iu(m,d),Hh(d),k&4){if(d.stateNode===null)throw Error(n(162));R=d.stateNode,D=d.memoizedProps;try{R.nodeValue=D}catch(Yt){Ui(d,d.return,Yt)}}break;case 3:if(Iu(m,d),Hh(d),k&4&&w!==null&&w.memoizedState.isDehydrated)try{Up(m.containerInfo)}catch(Yt){Ui(d,d.return,Yt)}break;case 4:Iu(m,d),Hh(d);break;case 13:Iu(m,d),Hh(d),R=d.child,R.flags&8192&&(D=R.memoizedState!==null,R.stateNode.isHidden=D,!D||R.alternate!==null&&R.alternate.memoizedState!==null||(h6=dt())),k&4&&iX(d);break;case 22:if(lt=w!==null&&w.memoizedState!==null,d.mode&1?(Bo=($e=Bo)||lt,Iu(m,d),Bo=$e):Iu(m,d),Hh(d),k&8192){if($e=d.memoizedState!==null,(d.stateNode.isHidden=$e)&&!lt&&(d.mode&1)!==0)for($t=d,lt=d.child;lt!==null;){for(ft=$t=lt;$t!==null;){switch(it=$t,Nt=it.child,it.tag){case 0:case 11:case 14:case 15:wE(4,it,it.return);break;case 1:o_(it,it.return);var Ut=it.stateNode;if(typeof Ut.componentWillUnmount=="function"){k=it,w=it.return;try{m=k,Ut.props=m.memoizedProps,Ut.state=m.memoizedState,Ut.componentWillUnmount()}catch(Yt){Ui(k,w,Yt)}}break;case 5:o_(it,it.return);break;case 22:if(it.memoizedState!==null){lX(ft);continue}}Nt!==null?(Nt.return=it,$t=Nt):lX(ft)}lt=lt.sibling}e:for(lt=null,ft=d;;){if(ft.tag===5){if(lt===null){lt=ft;try{R=ft.stateNode,$e?(D=R.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(ce=ft.stateNode,de=ft.memoizedProps.style,K=de!=null&&de.hasOwnProperty("display")?de.display:null,ce.style.display=Gi("display",K))}catch(Yt){Ui(d,d.return,Yt)}}}else if(ft.tag===6){if(lt===null)try{ft.stateNode.nodeValue=$e?"":ft.memoizedProps}catch(Yt){Ui(d,d.return,Yt)}}else if((ft.tag!==22&&ft.tag!==23||ft.memoizedState===null||ft===d)&&ft.child!==null){ft.child.return=ft,ft=ft.child;continue}if(ft===d)break e;for(;ft.sibling===null;){if(ft.return===null||ft.return===d)break e;lt===ft&&(lt=null),ft=ft.return}lt===ft&&(lt=null),ft.sibling.return=ft.return,ft=ft.sibling}}break;case 19:Iu(m,d),Hh(d),k&4&&iX(d);break;case 21:break;default:Iu(m,d),Hh(d)}}function Hh(d){var m=d.flags;if(m&2){try{e:{for(var w=d.return;w!==null;){if(tX(w)){var k=w;break e}w=w.return}throw Error(n(160))}switch(k.tag){case 5:var R=k.stateNode;k.flags&32&&(jn(R,""),k.flags&=-33);var D=nX(d);l6(d,D,R);break;case 3:case 4:var K=k.stateNode.containerInfo,ce=nX(d);a6(d,ce,K);break;default:throw Error(n(161))}}catch(de){Ui(d,d.return,de)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function $Te(d,m,w){$t=d,oX(d)}function oX(d,m,w){for(var k=(d.mode&1)!==0;$t!==null;){var R=$t,D=R.child;if(R.tag===22&&k){var K=R.memoizedState!==null||eC;if(!K){var ce=R.alternate,de=ce!==null&&ce.memoizedState!==null||Bo;ce=eC;var $e=Bo;if(eC=K,(Bo=de)&&!$e)for($t=R;$t!==null;)K=$t,de=K.child,K.tag===22&&K.memoizedState!==null?cX(R):de!==null?(de.return=K,$t=de):cX(R);for(;D!==null;)$t=D,oX(D),D=D.sibling;$t=R,eC=ce,Bo=$e}aX(d)}else(R.subtreeFlags&8772)!==0&&D!==null?(D.return=R,$t=D):aX(d)}}function aX(d){for(;$t!==null;){var m=$t;if((m.flags&8772)!==0){var w=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:Bo||tC(5,m);break;case 1:var k=m.stateNode;if(m.flags&4&&!Bo)if(w===null)k.componentDidMount();else{var R=m.elementType===m.type?w.memoizedProps:ku(m.type,w.memoizedProps);k.componentDidUpdate(R,w.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var D=m.updateQueue;D!==null&&lY(m,D,k);break;case 3:var K=m.updateQueue;if(K!==null){if(w=null,m.child!==null)switch(m.child.tag){case 5:w=m.child.stateNode;break;case 1:w=m.child.stateNode}lY(m,K,w)}break;case 5:var ce=m.stateNode;if(w===null&&m.flags&4){w=ce;var de=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":de.autoFocus&&w.focus();break;case"img":de.src&&(w.src=de.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var $e=m.alternate;if($e!==null){var lt=$e.memoizedState;if(lt!==null){var ft=lt.dehydrated;ft!==null&&Up(ft)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Bo||m.flags&512&&o6(m)}catch(it){Ui(m,m.return,it)}}if(m===d){$t=null;break}if(w=m.sibling,w!==null){w.return=m.return,$t=w;break}$t=m.return}}function lX(d){for(;$t!==null;){var m=$t;if(m===d){$t=null;break}var w=m.sibling;if(w!==null){w.return=m.return,$t=w;break}$t=m.return}}function cX(d){for(;$t!==null;){var m=$t;try{switch(m.tag){case 0:case 11:case 15:var w=m.return;try{tC(4,m)}catch(de){Ui(m,w,de)}break;case 1:var k=m.stateNode;if(typeof k.componentDidMount=="function"){var R=m.return;try{k.componentDidMount()}catch(de){Ui(m,R,de)}}var D=m.return;try{o6(m)}catch(de){Ui(m,D,de)}break;case 5:var K=m.return;try{o6(m)}catch(de){Ui(m,K,de)}}}catch(de){Ui(m,m.return,de)}if(m===d){$t=null;break}var ce=m.sibling;if(ce!==null){ce.return=m.return,$t=ce;break}$t=m.return}}var FTe=Math.ceil,nC=P.ReactCurrentDispatcher,c6=P.ReactCurrentOwner,Oc=P.ReactCurrentBatchConfig,fr=0,eo=null,_s=null,So=0,Wl=0,a_=Kp(0),Vs=0,bE=null,j0=0,rC=0,u6=0,EE=null,Za=null,h6=0,l_=1/0,ff=null,iC=!1,d6=null,em=null,sC=!1,tm=null,oC=0,SE=0,f6=null,aC=-1,lC=0;function Ta(){return(fr&6)!==0?dt():aC!==-1?aC:aC=dt()}function nm(d){return(d.mode&1)===0?1:(fr&2)!==0&&So!==0?So&-So:bTe.transition!==null?(lC===0&&(lC=Wb()),lC):(d=sr,d!==0||(d=window.event,d=d===void 0?16:jv(d.type)),d)}function Pu(d,m,w,k){if(50<SE)throw SE=0,f6=null,Error(n(185));T0(d,w,k),((fr&2)===0||d!==eo)&&(d===eo&&((fr&2)===0&&(rC|=w),Vs===4&&rm(d,So)),Ja(d,k),w===1&&fr===0&&(m.mode&1)===0&&(l_=dt()+500,DP&&Xp()))}function Ja(d,m){var w=d.callbackNode;S0(d,m);var k=Qd(d,d===eo?So:0);if(k===0)w!==null&&vt(w),d.callbackNode=null,d.callbackPriority=0;else if(m=k&-k,d.callbackPriority!==m){if(w!=null&&vt(w),m===1)d.tag===0?wTe(hX.bind(null,d)):XK(hX.bind(null,d)),yTe(function(){(fr&6)===0&&Xp()}),w=null;else{switch(Nh(k)){case 1:w=Mr;break;case 4:w=$r;break;case 16:w=_i;break;case 536870912:w=Ic;break;default:w=_i}w=_X(w,uX.bind(null,d))}d.callbackPriority=m,d.callbackNode=w}}function uX(d,m){if(aC=-1,lC=0,(fr&6)!==0)throw Error(n(327));var w=d.callbackNode;if(c_()&&d.callbackNode!==w)return null;var k=Qd(d,d===eo?So:0);if(k===0)return null;if((k&30)!==0||(k&d.expiredLanes)!==0||m)m=cC(d,k);else{m=k;var R=fr;fr|=2;var D=fX();(eo!==d||So!==m)&&(ff=null,l_=dt()+500,F0(d,m));do try{GTe();break}catch(ce){dX(d,ce)}while(!0);RD(),nC.current=D,fr=R,_s!==null?m=0:(eo=null,So=0,m=Vs)}if(m!==0){if(m===2&&(R=Bb(d),R!==0&&(k=R,m=p6(d,R))),m===1)throw w=bE,F0(d,0),rm(d,k),Ja(d,dt()),w;if(m===6)rm(d,k);else{if(R=d.current.alternate,(k&30)===0&&!VTe(R)&&(m=cC(d,k),m===2&&(D=Bb(d),D!==0&&(k=D,m=p6(d,D))),m===1))throw w=bE,F0(d,0),rm(d,k),Ja(d,dt()),w;switch(d.finishedWork=R,d.finishedLanes=k,m){case 0:case 1:throw Error(n(345));case 2:V0(d,Za,ff);break;case 3:if(rm(d,k),(k&130023424)===k&&(m=h6+500-dt(),10<m)){if(Qd(d,0)!==0)break;if(R=d.suspendedLanes,(R&k)!==k){Ta(),d.pingedLanes|=d.suspendedLanes&R;break}d.timeoutHandle=xD(V0.bind(null,d,Za,ff),m);break}V0(d,Za,ff);break;case 4:if(rm(d,k),(k&4194240)===k)break;for(m=d.eventTimes,R=-1;0<k;){var K=31-Pi(k);D=1<<K,K=m[K],K>R&&(R=K),k&=~D}if(k=R,k=dt()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*FTe(k/1960))-k,10<k){d.timeoutHandle=xD(V0.bind(null,d,Za,ff),k);break}V0(d,Za,ff);break;case 5:V0(d,Za,ff);break;default:throw Error(n(329))}}}return Ja(d,dt()),d.callbackNode===w?uX.bind(null,d):null}function p6(d,m){var w=EE;return d.current.memoizedState.isDehydrated&&(F0(d,m).flags|=256),d=cC(d,m),d!==2&&(m=Za,Za=w,m!==null&&m6(m)),d}function m6(d){Za===null?Za=d:Za.push.apply(Za,d)}function VTe(d){for(var m=d;;){if(m.flags&16384){var w=m.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var k=0;k<w.length;k++){var R=w[k],D=R.getSnapshot;R=R.value;try{if(!Su(D(),R))return!1}catch{return!1}}}if(w=m.child,m.subtreeFlags&16384&&w!==null)w.return=m,m=w;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function rm(d,m){for(m&=~u6,m&=~rC,d.suspendedLanes|=m,d.pingedLanes&=~m,d=d.expirationTimes;0<m;){var w=31-Pi(m),k=1<<w;d[w]=-1,m&=~k}}function hX(d){if((fr&6)!==0)throw Error(n(327));c_();var m=Qd(d,0);if((m&1)===0)return Ja(d,dt()),null;var w=cC(d,m);if(d.tag!==0&&w===2){var k=Bb(d);k!==0&&(m=k,w=p6(d,k))}if(w===1)throw w=bE,F0(d,0),rm(d,m),Ja(d,dt()),w;if(w===6)throw Error(n(345));return d.finishedWork=d.current.alternate,d.finishedLanes=m,V0(d,Za,ff),Ja(d,dt()),null}function g6(d,m){var w=fr;fr|=1;try{return d(m)}finally{fr=w,fr===0&&(l_=dt()+500,DP&&Xp())}}function $0(d){tm!==null&&tm.tag===0&&(fr&6)===0&&c_();var m=fr;fr|=1;var w=Oc.transition,k=sr;try{if(Oc.transition=null,sr=1,d)return d()}finally{sr=k,Oc.transition=w,fr=m,(fr&6)===0&&Xp()}}function y6(){Wl=a_.current,hi(a_)}function F0(d,m){d.finishedWork=null,d.finishedLanes=0;var w=d.timeoutHandle;if(w!==-1&&(d.timeoutHandle=-1,gTe(w)),_s!==null)for(w=_s.return;w!==null;){var k=w;switch(kD(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&OP();break;case 3:i_(),hi(Ka),hi(zo),FD();break;case 5:jD(k);break;case 4:i_();break;case 13:hi(Ci);break;case 19:hi(Ci);break;case 10:MD(k.type._context);break;case 22:case 23:y6()}w=w.return}if(eo=d,_s=d=im(d.current,null),So=Wl=m,Vs=0,bE=null,u6=rC=j0=0,Za=EE=null,O0!==null){for(m=0;m<O0.length;m++)if(w=O0[m],k=w.interleaved,k!==null){w.interleaved=null;var R=k.next,D=w.pending;if(D!==null){var K=D.next;D.next=R,k.next=K}w.pending=k}O0=null}return d}function dX(d,m){do{var w=_s;try{if(RD(),HP.current=XP,qP){for(var k=Ri.memoizedState;k!==null;){var R=k.queue;R!==null&&(R.pending=null),k=k.next}qP=!1}if(D0=0,Qs=Fs=Ri=null,gE=!1,yE=0,c6.current=null,w===null||w.return===null){Vs=1,bE=m,_s=null;break}e:{var D=d,K=w.return,ce=w,de=m;if(m=So,ce.flags|=32768,de!==null&&typeof de=="object"&&typeof de.then=="function"){var $e=de,lt=ce,ft=lt.tag;if((lt.mode&1)===0&&(ft===0||ft===11||ft===15)){var it=lt.alternate;it?(lt.updateQueue=it.updateQueue,lt.memoizedState=it.memoizedState,lt.lanes=it.lanes):(lt.updateQueue=null,lt.memoizedState=null)}var Nt=jY(K);if(Nt!==null){Nt.flags&=-257,$Y(Nt,K,ce,D,m),Nt.mode&1&&DY(D,$e,m),m=Nt,de=$e;var Ut=m.updateQueue;if(Ut===null){var Yt=new Set;Yt.add(de),m.updateQueue=Yt}else Ut.add(de);break e}else{if((m&1)===0){DY(D,$e,m),v6();break e}de=Error(n(426))}}else if(xi&&ce.mode&1){var as=jY(K);if(as!==null){(as.flags&65536)===0&&(as.flags|=256),$Y(as,K,ce,D,m),PD(s_(de,ce));break e}}D=de=s_(de,ce),Vs!==4&&(Vs=2),EE===null?EE=[D]:EE.push(D),D=K;do{switch(D.tag){case 3:D.flags|=65536,m&=-m,D.lanes|=m;var Ee=OY(D,de,m);aY(D,Ee);break e;case 1:ce=de;var me=D.type,Ne=D.stateNode;if((D.flags&128)===0&&(typeof me.getDerivedStateFromError=="function"||Ne!==null&&typeof Ne.componentDidCatch=="function"&&(em===null||!em.has(Ne)))){D.flags|=65536,m&=-m,D.lanes|=m;var gt=LY(D,ce,m);aY(D,gt);break e}}D=D.return}while(D!==null)}mX(w)}catch(Jt){m=Jt,_s===w&&w!==null&&(_s=w=w.return);continue}break}while(!0)}function fX(){var d=nC.current;return nC.current=XP,d===null?XP:d}function v6(){(Vs===0||Vs===3||Vs===2)&&(Vs=4),eo===null||(j0&268435455)===0&&(rC&268435455)===0||rm(eo,So)}function cC(d,m){var w=fr;fr|=2;var k=fX();(eo!==d||So!==m)&&(ff=null,F0(d,m));do try{zTe();break}catch(R){dX(d,R)}while(!0);if(RD(),fr=w,nC.current=k,_s!==null)throw Error(n(261));return eo=null,So=0,Vs}function zTe(){for(;_s!==null;)pX(_s)}function GTe(){for(;_s!==null&&!Ct();)pX(_s)}function pX(d){var m=vX(d.alternate,d,Wl);d.memoizedProps=d.pendingProps,m===null?mX(d):_s=m,c6.current=null}function mX(d){var m=d;do{var w=m.alternate;if(d=m.return,(m.flags&32768)===0){if(w=OTe(w,m,Wl),w!==null){_s=w;return}}else{if(w=LTe(w,m),w!==null){w.flags&=32767,_s=w;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Vs=6,_s=null;return}}if(m=m.sibling,m!==null){_s=m;return}_s=m=d}while(m!==null);Vs===0&&(Vs=5)}function V0(d,m,w){var k=sr,R=Oc.transition;try{Oc.transition=null,sr=1,UTe(d,m,w,k)}finally{Oc.transition=R,sr=k}return null}function UTe(d,m,w,k){do c_();while(tm!==null);if((fr&6)!==0)throw Error(n(327));w=d.finishedWork;var R=d.finishedLanes;if(w===null)return null;if(d.finishedWork=null,d.finishedLanes=0,w===d.current)throw Error(n(177));d.callbackNode=null,d.callbackPriority=0;var D=w.lanes|w.childLanes;if(iD(d,D),d===eo&&(_s=eo=null,So=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||sC||(sC=!0,_X(_i,function(){return c_(),null})),D=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||D){D=Oc.transition,Oc.transition=null;var K=sr;sr=1;var ce=fr;fr|=4,c6.current=null,jTe(d,w),sX(w,d),cTe(vD),nf=!!yD,vD=yD=null,d.current=w,$Te(w),ht(),fr=ce,sr=K,Oc.transition=D}else d.current=w;if(sC&&(sC=!1,tm=d,oC=R),D=d.pendingLanes,D===0&&(em=null),Fp(w.stateNode),Ja(d,dt()),m!==null)for(k=d.onRecoverableError,w=0;w<m.length;w++)R=m[w],k(R.value,{componentStack:R.stack,digest:R.digest});if(iC)throw iC=!1,d=d6,d6=null,d;return(oC&1)!==0&&d.tag!==0&&c_(),D=d.pendingLanes,(D&1)!==0?d===f6?SE++:(SE=0,f6=d):SE=0,Xp(),null}function c_(){if(tm!==null){var d=Nh(oC),m=Oc.transition,w=sr;try{if(Oc.transition=null,sr=16>d?16:d,tm===null)var k=!1;else{if(d=tm,tm=null,oC=0,(fr&6)!==0)throw Error(n(331));var R=fr;for(fr|=4,$t=d.current;$t!==null;){var D=$t,K=D.child;if(($t.flags&16)!==0){var ce=D.deletions;if(ce!==null){for(var de=0;de<ce.length;de++){var $e=ce[de];for($t=$e;$t!==null;){var lt=$t;switch(lt.tag){case 0:case 11:case 15:wE(8,lt,D)}var ft=lt.child;if(ft!==null)ft.return=lt,$t=ft;else for(;$t!==null;){lt=$t;var it=lt.sibling,Nt=lt.return;if(eX(lt),lt===$e){$t=null;break}if(it!==null){it.return=Nt,$t=it;break}$t=Nt}}}var Ut=D.alternate;if(Ut!==null){var Yt=Ut.child;if(Yt!==null){Ut.child=null;do{var as=Yt.sibling;Yt.sibling=null,Yt=as}while(Yt!==null)}}$t=D}}if((D.subtreeFlags&2064)!==0&&K!==null)K.return=D,$t=K;else e:for(;$t!==null;){if(D=$t,(D.flags&2048)!==0)switch(D.tag){case 0:case 11:case 15:wE(9,D,D.return)}var Ee=D.sibling;if(Ee!==null){Ee.return=D.return,$t=Ee;break e}$t=D.return}}var me=d.current;for($t=me;$t!==null;){K=$t;var Ne=K.child;if((K.subtreeFlags&2064)!==0&&Ne!==null)Ne.return=K,$t=Ne;else e:for(K=me;$t!==null;){if(ce=$t,(ce.flags&2048)!==0)try{switch(ce.tag){case 0:case 11:case 15:tC(9,ce)}}catch(Jt){Ui(ce,ce.return,Jt)}if(ce===K){$t=null;break e}var gt=ce.sibling;if(gt!==null){gt.return=ce.return,$t=gt;break e}$t=ce.return}}if(fr=R,Xp(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot($l,d)}catch{}k=!0}return k}finally{sr=w,Oc.transition=m}}return!1}function gX(d,m,w){m=s_(w,m),m=OY(d,m,1),d=Jp(d,m,1),m=Ta(),d!==null&&(T0(d,1,m),Ja(d,m))}function Ui(d,m,w){if(d.tag===3)gX(d,d,w);else for(;m!==null;){if(m.tag===3){gX(m,d,w);break}else if(m.tag===1){var k=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(em===null||!em.has(k))){d=s_(w,d),d=LY(m,d,1),m=Jp(m,d,1),d=Ta(),m!==null&&(T0(m,1,d),Ja(m,d));break}}m=m.return}}function BTe(d,m,w){var k=d.pingCache;k!==null&&k.delete(m),m=Ta(),d.pingedLanes|=d.suspendedLanes&w,eo===d&&(So&w)===w&&(Vs===4||Vs===3&&(So&130023424)===So&&500>dt()-h6?F0(d,0):u6|=w),Ja(d,m)}function yX(d,m){m===0&&((d.mode&1)===0?m=1:(m=Vp,Vp<<=1,(Vp&130023424)===0&&(Vp=4194304)));var w=Ta();d=uf(d,m),d!==null&&(T0(d,m,w),Ja(d,w))}function WTe(d){var m=d.memoizedState,w=0;m!==null&&(w=m.retryLane),yX(d,w)}function HTe(d,m){var w=0;switch(d.tag){case 13:var k=d.stateNode,R=d.memoizedState;R!==null&&(w=R.retryLane);break;case 19:k=d.stateNode;break;default:throw Error(n(314))}k!==null&&k.delete(m),yX(d,w)}var vX;vX=function(d,m,w){if(d!==null)if(d.memoizedProps!==m.pendingProps||Ka.current)Xa=!0;else{if((d.lanes&w)===0&&(m.flags&128)===0)return Xa=!1,NTe(d,m,w);Xa=(d.flags&131072)!==0}else Xa=!1,xi&&(m.flags&1048576)!==0&&ZK(m,$P,m.index);switch(m.lanes=0,m.tag){case 2:var k=m.type;QP(d,m),d=m.pendingProps;var R=Zv(m,zo.current);r_(m,w),R=GD(null,m,k,d,R,w);var D=UD();return m.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Ya(k)?(D=!0,LP(m)):D=!1,m.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,LD(m),R.updater=ZP,m.stateNode=R,R._reactInternals=m,YD(m,k,d,w),m=QD(null,m,k,!0,D,w)):(m.tag=0,xi&&D&&TD(m),Sa(null,m,R,w),m=m.child),m;case 16:k=m.elementType;e:{switch(QP(d,m),d=m.pendingProps,R=k._init,k=R(k._payload),m.type=k,R=m.tag=KTe(k),d=ku(k,d),R){case 0:m=JD(null,m,k,d,w);break e;case 1:m=BY(null,m,k,d,w);break e;case 11:m=FY(null,m,k,d,w);break e;case 14:m=VY(null,m,k,ku(k.type,d),w);break e}throw Error(n(306,k,""))}return m;case 0:return k=m.type,R=m.pendingProps,R=m.elementType===k?R:ku(k,R),JD(d,m,k,R,w);case 1:return k=m.type,R=m.pendingProps,R=m.elementType===k?R:ku(k,R),BY(d,m,k,R,w);case 3:e:{if(WY(m),d===null)throw Error(n(387));k=m.pendingProps,D=m.memoizedState,R=D.element,oY(d,m),BP(m,k,null,w);var K=m.memoizedState;if(k=K.element,D.isDehydrated)if(D={element:k,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},m.updateQueue.baseState=D,m.memoizedState=D,m.flags&256){R=s_(Error(n(423)),m),m=HY(d,m,k,w,R);break e}else if(k!==R){R=s_(Error(n(424)),m),m=HY(d,m,k,w,R);break e}else for(Bl=qp(m.stateNode.containerInfo.firstChild),Ul=m,xi=!0,Tu=null,w=iY(m,null,k,w),m.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(e_(),k===R){m=df(d,m,w);break e}Sa(d,m,k,w)}m=m.child}return m;case 5:return cY(m),d===null&&ID(m),k=m.type,R=m.pendingProps,D=d!==null?d.memoizedProps:null,K=R.children,_D(k,R)?K=null:D!==null&&_D(k,D)&&(m.flags|=32),UY(d,m),Sa(d,m,K,w),m.child;case 6:return d===null&&ID(m),null;case 13:return qY(d,m,w);case 4:return DD(m,m.stateNode.containerInfo),k=m.pendingProps,d===null?m.child=t_(m,null,k,w):Sa(d,m,k,w),m.child;case 11:return k=m.type,R=m.pendingProps,R=m.elementType===k?R:ku(k,R),FY(d,m,k,R,w);case 7:return Sa(d,m,m.pendingProps,w),m.child;case 8:return Sa(d,m,m.pendingProps.children,w),m.child;case 12:return Sa(d,m,m.pendingProps.children,w),m.child;case 10:e:{if(k=m.type._context,R=m.pendingProps,D=m.memoizedProps,K=R.value,oi(zP,k._currentValue),k._currentValue=K,D!==null)if(Su(D.value,K)){if(D.children===R.children&&!Ka.current){m=df(d,m,w);break e}}else for(D=m.child,D!==null&&(D.return=m);D!==null;){var ce=D.dependencies;if(ce!==null){K=D.child;for(var de=ce.firstContext;de!==null;){if(de.context===k){if(D.tag===1){de=hf(-1,w&-w),de.tag=2;var $e=D.updateQueue;if($e!==null){$e=$e.shared;var lt=$e.pending;lt===null?de.next=de:(de.next=lt.next,lt.next=de),$e.pending=de}}D.lanes|=w,de=D.alternate,de!==null&&(de.lanes|=w),ND(D.return,w,m),ce.lanes|=w;break}de=de.next}}else if(D.tag===10)K=D.type===m.type?null:D.child;else if(D.tag===18){if(K=D.return,K===null)throw Error(n(341));K.lanes|=w,ce=K.alternate,ce!==null&&(ce.lanes|=w),ND(K,w,m),K=D.sibling}else K=D.child;if(K!==null)K.return=D;else for(K=D;K!==null;){if(K===m){K=null;break}if(D=K.sibling,D!==null){D.return=K.return,K=D;break}K=K.return}D=K}Sa(d,m,R.children,w),m=m.child}return m;case 9:return R=m.type,k=m.pendingProps.children,r_(m,w),R=Mc(R),k=k(R),m.flags|=1,Sa(d,m,k,w),m.child;case 14:return k=m.type,R=ku(k,m.pendingProps),R=ku(k.type,R),VY(d,m,k,R,w);case 15:return zY(d,m,m.type,m.pendingProps,w);case 17:return k=m.type,R=m.pendingProps,R=m.elementType===k?R:ku(k,R),QP(d,m),m.tag=1,Ya(k)?(d=!0,LP(m)):d=!1,r_(m,w),MY(m,k,R),YD(m,k,R,w),QD(null,m,k,!0,d,w);case 19:return YY(d,m,w);case 22:return GY(d,m,w)}throw Error(n(156,m.tag))};function _X(d,m){return ct(d,m)}function qTe(d,m,w,k){this.tag=d,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(d,m,w,k){return new qTe(d,m,w,k)}function _6(d){return d=d.prototype,!(!d||!d.isReactComponent)}function KTe(d){if(typeof d=="function")return _6(d)?1:0;if(d!=null){if(d=d.$$typeof,d===G)return 11;if(d===Ie)return 14}return 2}function im(d,m){var w=d.alternate;return w===null?(w=Lc(d.tag,m,d.key,d.mode),w.elementType=d.elementType,w.type=d.type,w.stateNode=d.stateNode,w.alternate=d,d.alternate=w):(w.pendingProps=m,w.type=d.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=d.flags&14680064,w.childLanes=d.childLanes,w.lanes=d.lanes,w.child=d.child,w.memoizedProps=d.memoizedProps,w.memoizedState=d.memoizedState,w.updateQueue=d.updateQueue,m=d.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=d.sibling,w.index=d.index,w.ref=d.ref,w}function uC(d,m,w,k,R,D){var K=2;if(k=d,typeof d=="function")_6(d)&&(K=1);else if(typeof d=="string")K=5;else e:switch(d){case C:return z0(w.children,R,D,m);case N:K=8,R|=8;break;case O:return d=Lc(12,w,m,R|2),d.elementType=O,d.lanes=D,d;case U:return d=Lc(13,w,m,R),d.elementType=U,d.lanes=D,d;case he:return d=Lc(19,w,m,R),d.elementType=he,d.lanes=D,d;case Oe:return hC(w,R,D,m);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case L:K=10;break e;case F:K=9;break e;case G:K=11;break e;case Ie:K=14;break e;case ze:K=16,k=null;break e}throw Error(n(130,d==null?d:typeof d,""))}return m=Lc(K,w,m,R),m.elementType=d,m.type=k,m.lanes=D,m}function z0(d,m,w,k){return d=Lc(7,d,k,m),d.lanes=w,d}function hC(d,m,w,k){return d=Lc(22,d,k,m),d.elementType=Oe,d.lanes=w,d.stateNode={isHidden:!1},d}function x6(d,m,w){return d=Lc(6,d,null,m),d.lanes=w,d}function w6(d,m,w){return m=Lc(4,d.children!==null?d.children:[],d.key,m),m.lanes=w,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}function YTe(d,m,w,k,R){this.tag=m,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hb(0),this.expirationTimes=Hb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hb(0),this.identifierPrefix=k,this.onRecoverableError=R,this.mutableSourceEagerHydrationData=null}function b6(d,m,w,k,R,D,K,ce,de){return d=new YTe(d,m,w,ce,de),m===1?(m=1,D===!0&&(m|=8)):m=0,D=Lc(3,null,null,m),d.current=D,D.stateNode=d,D.memoizedState={element:k,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},LD(D),d}function XTe(d,m,w){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V,key:k==null?null:""+k,children:d,containerInfo:m,implementation:w}}function xX(d){if(!d)return Yp;d=d._reactInternals;e:{if(oe(d)!==d||d.tag!==1)throw Error(n(170));var m=d;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Ya(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(n(171))}if(d.tag===1){var w=d.type;if(Ya(w))return KK(d,w,m)}return m}function wX(d,m,w,k,R,D,K,ce,de){return d=b6(w,k,!0,d,R,D,K,ce,de),d.context=xX(null),w=d.current,k=Ta(),R=nm(w),D=hf(k,R),D.callback=m??null,Jp(w,D,R),d.current.lanes=R,T0(d,R,k),Ja(d,k),d}function dC(d,m,w,k){var R=m.current,D=Ta(),K=nm(R);return w=xX(w),m.context===null?m.context=w:m.pendingContext=w,m=hf(D,K),m.payload={element:d},k=k===void 0?null:k,k!==null&&(m.callback=k),d=Jp(R,m,K),d!==null&&(Pu(d,R,K,D),UP(d,R,K)),K}function fC(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function bX(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var w=d.retryLane;d.retryLane=w!==0&&w<m?w:m}}function E6(d,m){bX(d,m),(d=d.alternate)&&bX(d,m)}function ZTe(){return null}var EX=typeof reportError=="function"?reportError:function(d){console.error(d)};function S6(d){this._internalRoot=d}pC.prototype.render=S6.prototype.render=function(d){var m=this._internalRoot;if(m===null)throw Error(n(409));dC(d,m,null,null)},pC.prototype.unmount=S6.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var m=d.containerInfo;$0(function(){dC(null,d,null,null)}),m[of]=null}};function pC(d){this._internalRoot=d}pC.prototype.unstable_scheduleHydration=function(d){if(d){var m=Xb();d={blockedOn:null,target:d,priority:m};for(var w=0;w<Fl.length&&m!==0&&m<Fl[w].priority;w++);Fl.splice(w,0,d),w===0&&Lv(d)}};function T6(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function mC(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function SX(){}function JTe(d,m,w,k,R){if(R){if(typeof k=="function"){var D=k;k=function(){var $e=fC(K);D.call($e)}}var K=wX(m,k,d,0,null,!1,!1,"",SX);return d._reactRootContainer=K,d[of]=K.current,lE(d.nodeType===8?d.parentNode:d),$0(),K}for(;R=d.lastChild;)d.removeChild(R);if(typeof k=="function"){var ce=k;k=function(){var $e=fC(de);ce.call($e)}}var de=b6(d,0,!1,null,null,!1,!1,"",SX);return d._reactRootContainer=de,d[of]=de.current,lE(d.nodeType===8?d.parentNode:d),$0(function(){dC(m,de,w,k)}),de}function gC(d,m,w,k,R){var D=w._reactRootContainer;if(D){var K=D;if(typeof R=="function"){var ce=R;R=function(){var de=fC(K);ce.call(de)}}dC(m,K,d,R)}else K=JTe(w,m,d,R,k);return fC(K)}Kb=function(d){switch(d.tag){case 3:var m=d.stateNode;if(m.current.memoizedState.isDehydrated){var w=Er(m.pendingLanes);w!==0&&(qb(m,w|1),Ja(m,dt()),(fr&6)===0&&(l_=dt()+500,Xp()))}break;case 13:$0(function(){var k=uf(d,1);if(k!==null){var R=Ta();Pu(k,d,1,R)}}),E6(d,1)}},Nv=function(d){if(d.tag===13){var m=uf(d,134217728);if(m!==null){var w=Ta();Pu(m,d,134217728,w)}E6(d,134217728)}},Yb=function(d){if(d.tag===13){var m=nm(d),w=uf(d,m);if(w!==null){var k=Ta();Pu(w,d,m,k)}E6(d,m)}},Xb=function(){return sr},Zb=function(d,m){var w=sr;try{return sr=d,m()}finally{sr=w}},on=function(d,m,w){switch(m){case"input":if(pt(d,w),m=w.name,w.type==="radio"&&m!=null){for(w=d;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<w.length;m++){var k=w[m];if(k!==d&&k.form===d.form){var R=NP(k);if(!R)throw Error(n(90));Ye(k),pt(k,R)}}}break;case"textarea":Ai(d,w);break;case"select":m=w.value,m!=null&&ei(d,!!w.multiple,m,!1)}},ee=g6,ye=$0;var QTe={usingClientEntryPoint:!1,Events:[hE,Yv,NP,ae,Ve,g6]},TE={findFiberByHostInstance:C0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eke={bundleType:TE.bundleType,version:TE.version,rendererPackageName:TE.rendererPackageName,rendererConfig:TE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=Le(d),d===null?null:d.stateNode},findFiberByHostInstance:TE.findFiberByHostInstance||ZTe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yC.isDisabled&&yC.supportsFiber)try{$l=yC.inject(eke),ss=yC}catch{}}return Qa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QTe,Qa.createPortal=function(d,m){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T6(m))throw Error(n(200));return XTe(d,m,null,w)},Qa.createRoot=function(d,m){if(!T6(d))throw Error(n(299));var w=!1,k="",R=EX;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(k=m.identifierPrefix),m.onRecoverableError!==void 0&&(R=m.onRecoverableError)),m=b6(d,1,!1,null,null,w,!1,k,R),d[of]=m.current,lE(d.nodeType===8?d.parentNode:d),new S6(m)},Qa.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(n(188)):(d=Object.keys(d).join(","),Error(n(268,d)));return d=Le(m),d=d===null?null:d.stateNode,d},Qa.flushSync=function(d){return $0(d)},Qa.hydrate=function(d,m,w){if(!mC(m))throw Error(n(200));return gC(null,d,m,!0,w)},Qa.hydrateRoot=function(d,m,w){if(!T6(d))throw Error(n(405));var k=w!=null&&w.hydratedSources||null,R=!1,D="",K=EX;if(w!=null&&(w.unstable_strictMode===!0&&(R=!0),w.identifierPrefix!==void 0&&(D=w.identifierPrefix),w.onRecoverableError!==void 0&&(K=w.onRecoverableError)),m=wX(m,null,d,1,w??null,R,!1,D,K),d[of]=m.current,lE(d),k)for(d=0;d<k.length;d++)w=k[d],R=w._getVersion,R=R(w._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[w,R]:m.mutableSourceEagerHydrationData.push(w,R);return new pC(m)},Qa.render=function(d,m,w){if(!mC(m))throw Error(n(200));return gC(null,d,m,!1,w)},Qa.unmountComponentAtNode=function(d){if(!mC(d))throw Error(n(40));return d._reactRootContainer?($0(function(){gC(null,null,d,!1,function(){d._reactRootContainer=null,d[of]=null})}),!0):!1},Qa.unstable_batchedUpdates=g6,Qa.unstable_renderSubtreeIntoContainer=function(d,m,w,k){if(!mC(w))throw Error(n(200));if(d==null||d._reactInternals===void 0)throw Error(n(38));return gC(d,m,w,!1,k)},Qa.version="18.3.1-next-f1338f8080-20240426",Qa}var OX;function uke(){if(OX)return P6.exports;OX=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),P6.exports=cke(),P6.exports}var LX;function hke(){if(LX)return vC;LX=1;var t=uke();return vC.createRoot=t.createRoot,vC.hydrateRoot=t.hydrateRoot,vC}var dke=hke();const fke=cG(dke);var Y=XA();const pke=cG(Y),Cs={ADD:"add",REMOVE:"remove"},n2={PROPERTYCHANGE:"propertychange"},En={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class ZA{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function mke(t,e,n){let r,i;n=n||sp;let s=0,o=t.length,a=!1;for(;s<o;)r=s+(o-s>>1),i=+n(t[r],e),i<0?s=r+1:(o=r,a=!i);return a?s:~s}function sp(t,e){return t>e?1:t<e?-1:0}function gke(t,e){return t<e?1:t>e?-1:0}function L5(t,e,n){if(t[0]<=e)return 0;const r=t.length;if(e<=t[r-1])return r-1;if(typeof n=="function"){for(let i=1;i<r;++i){const s=t[i];if(s===e)return i;if(s<e)return n(e,t[i-1],s)>0?i-1:i}return r-1}if(n>0){for(let i=1;i<r;++i)if(t[i]<e)return i-1;return r-1}if(n<0){for(let i=1;i<r;++i)if(t[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1}function yke(t,e,n){for(;e<n;){const r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function xr(t,e){const n=Array.isArray(e)?e:[e],r=n.length;for(let i=0;i<r;i++)t[t.length]=n[i]}function Kd(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function vke(t,e,n){const r=e||sp;return t.every(function(i,s){if(s===0)return!0;const o=r(t[s-1],i);return!(o>0||o===0)})}function Fg(){return!0}function rb(){return!1}function wk(){}function ile(t){let e,n,r;return function(){const i=Array.prototype.slice.call(arguments);return(!n||this!==r||!Kd(i,n))&&(r=this,n=i,e=t.apply(this,arguments)),e}}function sle(t){function e(){let n;try{n=t()}catch(r){return Promise.reject(r)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function lv(t){for(const e in t)delete t[e]}function T1(t){let e;for(e in t)return!1;return!e}class Ac{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}let JA=class extends ZA{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(n)||i.push(n)}dispatchEvent(e){const n=typeof e=="string",r=n?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=n?new Ac(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});r in o||(o[r]=0,a[r]=0),++o[r];let l;for(let c=0,u=i.length;c<u;++c)if("handleEvent"in i[c]?l=i[c].handleEvent(s):l=i[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[r]===0){let c=a[r];for(delete a[r];c--;)this.removeEventListener(r,wk);delete o[r]}return l}disposeInternal(){this.listeners_&&lv(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(n);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=wk,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}};function Yn(t,e,n,r,i){if(i){const o=n;n=function(a){return t.removeEventListener(e,n),o.call(r??this,a)}}else r&&r!==t&&(n=n.bind(r));const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function G3(t,e,n,r){return Yn(t,e,n,r,!0)}function ni(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),lv(t))}class QA extends JA{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(En.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Yn(this,e[s],n);return i}return Yn(this,e,n)}onceInternal(e,n){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=G3(this,e[s],n)}else r=G3(this,e,n);return n.ol_key=r,r}unInternal(e,n){const r=n.ol_key;if(r)WF(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],n);else this.removeEventListener(e,n)}}QA.prototype.on;QA.prototype.once;QA.prototype.un;function WF(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)ni(t[e]);else ni(t)}function Sn(){throw new Error("Unimplemented abstract method.")}let _ke=0;function en(t){return t.ol_uid||(t.ol_uid=String(++_ke))}class DX extends Ac{constructor(e,n,r){super(e),this.key=n,this.oldValue=r}}class Yd extends QA{constructor(e){super(),this.on,this.once,this.un,en(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new DX(r,e,n)),r=n2.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new DX(r,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,r){const i=this.values_||(this.values_={});if(r)i[e]=n;else{const s=i[e];i[e]=n,s!==n&&this.notify(e,s)}}setProperties(e,n){for(const r in e)this.set(r,e[r],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],T1(this.values_)&&(this.values_=null),n||this.notify(e,r)}}}const jX={LENGTH:"length"};class _C extends Ac{constructor(e,n,r){super(e),this.element=n,this.index=r}}class ja extends Yd{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,r=e.length;n<r;++n)this.push(e[n]);return this}forEach(e){const n=this.array_;for(let r=0,i=n.length;r<i;++r)e(n[r],r,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(jX.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new _C(Cs.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){const n=this.array_;for(let r=0,i=n.length;r<i;++r)if(n[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new _C(Cs.REMOVE,n,e)),n}setAt(e,n){const r=this.getLength();if(e>=r){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);const i=this.array_[e];this.array_[e]=n,this.dispatchEvent(new _C(Cs.REMOVE,i,e)),this.dispatchEvent(new _C(Cs.ADD,n,e))}updateLength_(){this.set(jX.LENGTH,this.array_.length)}assertUnique_(e,n){const r=this.array_;for(let i=0,s=r.length;i<s;++i)if(r[i]===e&&i!==n)throw new Error("Duplicate item added to a unique collection")}}function ur(t,e){if(!t)throw new Error(e)}let yr=class ole extends Yd{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const n=e;this.setGeometry(n)}else{const n=e;this.setProperties(n)}}clone(){const e=new ole(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&e.setGeometry(n.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ni(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Yn(e,En.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?xke(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function xke(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(ur(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}const ao={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Ia(t){const e=Wa();for(let n=0,r=t.length;n<r;++n)uT(e,t[n]);return e}function oh(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function ale(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function cv(t,e,n){let r,i;return e<t[0]?r=t[0]-e:t[2]<e?r=e-t[2]:r=0,n<t[1]?i=t[1]-n:t[3]<n?i=n-t[3]:i=0,r*r+i*i}function k1(t,e){return uG(t,e[0],e[1])}function ng(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function uG(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function HF(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=e[0],a=e[1];let l=ao.UNKNOWN;return o<n?l=l|ao.LEFT:o>i&&(l=l|ao.RIGHT),a<r?l=l|ao.BELOW:a>s&&(l=l|ao.ABOVE),l===ao.UNKNOWN&&(l=ao.INTERSECTING),l}function Wa(){return[1/0,1/0,-1/0,-1/0]}function _p(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function eI(t){return _p(1/0,1/0,-1/0,-1/0,t)}function cT(t,e){const n=t[0],r=t[1];return _p(n,r,n,r,e)}function hG(t,e,n,r,i){const s=eI(i);return lle(s,t,e,n,r)}function A1(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function dG(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function uT(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function lle(t,e,n,r,i){for(;n<r;n+=i)wke(t,e[n],e[n+1]);return t}function wke(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function fG(t,e){let n;return n=e(D5(t)),n||(n=e(j5(t)),n)||(n=e($5(t)),n)||(n=e(uv(t)),n)?n:!1}function qF(t){let e=0;return ib(t)||(e=Xn(t)*Ms(t)),e}function D5(t){return[t[0],t[1]]}function j5(t){return[t[2],t[1]]}function vh(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function bke(t,e){let n;if(e==="bottom-left")n=D5(t);else if(e==="bottom-right")n=j5(t);else if(e==="top-left")n=uv(t);else if(e==="top-right")n=$5(t);else throw new Error("Invalid corner");return n}function U3(t,e,n,r,i){const[s,o,a,l,c,u,h,f]=cle(t,e,n,r);return _p(Math.min(s,a,c,h),Math.min(o,l,u,f),Math.max(s,a,c,h),Math.max(o,l,u,f),i)}function cle(t,e,n,r){const i=e*r[0]/2,s=e*r[1]/2,o=Math.cos(n),a=Math.sin(n),l=i*o,c=i*a,u=s*o,h=s*a,f=t[0],g=t[1];return[f-l+h,g-c-u,f-l-h,g-c+u,f+l-h,g+c+u,f+l+h,g+c-u,f-l+h,g-c-u]}function Ms(t){return t[3]-t[1]}function op(t,e,n){const r=n||Wa();return la(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):eI(r),r}function uv(t){return[t[0],t[3]]}function $5(t){return[t[2],t[3]]}function Xn(t){return t[2]-t[0]}function la(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function ib(t){return t[2]<t[0]||t[3]<t[1]}function Eke(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function Ske(t,e,n){let r=!1;const i=HF(t,e),s=HF(t,n);if(i===ao.INTERSECTING||s===ao.INTERSECTING)r=!0;else{const o=t[0],a=t[1],l=t[2],c=t[3],u=e[0],h=e[1],f=n[0],g=n[1],y=(g-h)/(f-u);let _,b;s&ao.ABOVE&&!(i&ao.ABOVE)&&(_=f-(g-c)/y,r=_>=o&&_<=l),!r&&s&ao.RIGHT&&!(i&ao.RIGHT)&&(b=g-(f-l)*y,r=b>=a&&b<=c),!r&&s&ao.BELOW&&!(i&ao.BELOW)&&(_=f-(g-a)/y,r=_>=o&&_<=l),!r&&s&ao.LEFT&&!(i&ao.LEFT)&&(b=g-(f-o)*y,r=b>=a&&b<=c)}return r}function ule(t,e){const n=e.getExtent(),r=vh(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){const i=Xn(n),o=Math.floor((r[0]-n[0])/i)*i;t[0]-=o,t[2]-=o}return t}function hle(t,e,n){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[r[0],t[1],r[2],t[3]]];ule(t,e);const i=Xn(r);if(Xn(t)>i&&!n)return[[r[0],t[1],r[2],t[3]]];if(t[0]<r[0])return[[t[0]+i,t[1],r[2],t[3]],[r[0],t[1],t[2],t[3]]];if(t[2]>r[2])return[[t[0],t[1],r[2],t[3]],[r[0],t[1],t[2]-i,t[3]]]}return[t]}function ri(t,e,n){return Math.min(Math.max(t,e),n)}function Tke(t,e,n,r,i,s){const o=i-n,a=s-r;if(o!==0||a!==0){const l=((t-n)*o+(e-r)*a)/(o*o+a*a);l>1?(n=i,r=s):l>0&&(n+=o*l,r+=a*l)}return ap(t,e,n,r)}function ap(t,e,n,r){const i=n-t,s=r-e;return i*i+s*s}function kke(t){const e=t.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(t[r][r]);for(let a=r+1;a<e;a++){const l=Math.abs(t[a][r]);l>s&&(s=l,i=a)}if(s===0)return null;const o=t[i];t[i]=t[r],t[r]=o;for(let a=r+1;a<e;a++){const l=-t[a][r]/t[r][r];for(let c=r;c<e+1;c++)r==c?t[a][c]=0:t[a][c]+=l*t[r][c]}}const n=new Array(e);for(let r=e-1;r>=0;r--){n[r]=t[r][e]/t[r][r];for(let i=r-1;i>=0;i--)t[i][e]-=t[i][r]*n[r]}return n}function $X(t){return t*180/Math.PI}function cu(t){return t*Math.PI/180}function Eg(t,e){const n=t%e;return n*e<0?n+e:n}function sc(t,e,n){return t+n*(e-t)}function sb(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function B3(t,e){return Math.round(sb(t,e))}function xC(t,e){return Math.floor(sb(t,e))}function rg(t,e){return Math.ceil(sb(t,e))}function KF(t,e,n){if(t>=e&&t<n)return t;const r=n-e;return((t-e)%r+r)%r+e}function IE(t,e,n){const r=""+t;let i=r.indexOf(".");return i=i===-1?r.length:i,i>e?r:new Array(1+e-i).join("0")+r}function dle(t,e){const n=(""+t).split("."),r=(""+e).split(".");for(let i=0;i<Math.max(n.length,r.length);i++){const s=parseInt(n[i]||"0",10),o=parseInt(r[i]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}function Ake(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function pG(t,e){const n=t[0],r=t[1],i=e[0],s=e[1],o=i[0],a=i[1],l=s[0],c=s[1],u=l-o,h=c-a,f=u===0&&h===0?0:(u*(n-o)+h*(r-a))/(u*u+h*h||0);let g,y;return f<=0?(g=o,y=a):f>=1?(g=l,y=c):(g=o+f*u,y=a+f*h),[g,y]}function Ca(t,e){let n=!0;for(let r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function mG(t,e){const n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,s=t[1]*n+t[0]*r;return t[0]=i,t[1]=s,t}function Ike(t,e){return t[0]*=e,t[1]*=e,t}function r2(t,e){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Ix(t,e){return Math.sqrt(r2(t,e))}function Pke(t,e){return r2(t,pG(t,e))}function fle(t,e){if(e.canWrapX()){const n=Xn(e.getExtent()),r=ple(t,e,n);r&&(t[0]-=r*n)}return t}function ple(t,e,n){const r=e.getExtent();let i=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||Xn(r),i=Math.floor((t[0]-r[0])/n)),i}function mle(...t){console.warn(...t)}const i2={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let F5=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||i2[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const tI=6378137,Px=Math.PI*tI,Cke=[-Px,-Px,Px,Px],Rke=[-180,-85,180,85],wC=tI*Math.log(Math.tan(Math.PI/2));class u_ extends F5{constructor(e){super({code:e,units:"m",extent:Cke,global:!0,worldExtent:Rke,getPointResolution:function(n,r){return n/Math.cosh(r[1]/tI)}})}}const FX=[new u_("EPSG:3857"),new u_("EPSG:102100"),new u_("EPSG:102113"),new u_("EPSG:900913"),new u_("http://www.opengis.net/def/crs/EPSG/0/3857"),new u_("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Mke(t,e,n,r){const i=t.length;n=n>1?n:2,r=r??n,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=Px*t[s]/180;let o=tI*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));o>wC?o=wC:o<-wC&&(o=-wC),e[s+1]=o}return e}function Nke(t,e,n,r){const i=t.length;n=n>1?n:2,r=r??n,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*t[s]/Px,e[s+1]=360*Math.atan(Math.exp(t[s+1]/tI))/Math.PI-90;return e}const Oke=6378137,VX=[-180,-90,180,90],Lke=Math.PI*Oke/180;class G0 extends F5{constructor(e,n){super({code:e,units:"degrees",extent:VX,axisOrientation:n,global:!0,metersPerUnit:Lke,worldExtent:VX})}}const zX=[new G0("CRS:84"),new G0("EPSG:4326","neu"),new G0("urn:ogc:def:crs:OGC:1.3:CRS84"),new G0("urn:ogc:def:crs:OGC:2:84"),new G0("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new G0("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new G0("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let YF={};function lM(t){return YF[t]||YF[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Dke(t,e){YF[t]=e}let ew={};function I1(t,e,n){const r=t.getCode(),i=e.getCode();r in ew||(ew[r]={}),ew[r][i]=n}function cM(t,e){return t in ew&&e in ew[t]?ew[t][e]:null}const W3=.9996,uu=.00669438,V5=uu*uu,z5=V5*uu,$y=uu/(1-uu),GX=Math.sqrt(1-uu),s2=(1-GX)/(1+GX),gle=s2*s2,gG=gle*s2,yG=gG*s2,yle=yG*s2,vle=1-uu/4-3*V5/64-5*z5/256,jke=3*uu/8+3*V5/32+45*z5/1024,$ke=15*V5/256+45*z5/1024,Fke=35*z5/3072,Vke=3/2*s2-27/32*gG+269/512*yle,zke=21/16*gle-55/32*yG,Gke=151/96*gG-417/128*yle,Uke=1097/512*yG,H3=6378137;function Bke(t,e,n){const r=t-5e5,o=(n.north?e:e-1e7)/W3/(H3*vle),a=o+Vke*Math.sin(2*o)+zke*Math.sin(4*o)+Gke*Math.sin(6*o)+Uke*Math.sin(8*o),l=Math.sin(a),c=l*l,u=Math.cos(a),h=l/u,f=h*h,g=f*f,y=1-uu*c,_=Math.sqrt(1-uu*c),b=H3/_,T=(1-uu)/y,A=$y*u**2,I=A*A,P=r/(b*W3),M=P*P,V=M*P,C=V*P,N=C*P,O=N*P,L=a-h/T*(M/2-C/24*(5+3*f+10*A-4*I-9*$y))+O/720*(61+90*f+298*A+45*g-252*$y-3*I);let F=(P-V/6*(1+2*f+A)+N/120*(5-2*A+28*f-3*I+8*$y+24*g))/u;return F=KF(F+cu(_le(n.number)),-Math.PI,Math.PI),[$X(F),$X(L)]}const UX=-80,BX=84,Wke=-180,Hke=180;function qke(t,e,n){t=KF(t,Wke,Hke),e<UX?e=UX:e>BX&&(e=BX);const r=cu(e),i=Math.sin(r),s=Math.cos(r),o=i/s,a=o*o,l=a*a,c=cu(t),u=_le(n.number),h=cu(u),f=H3/Math.sqrt(1-uu*i**2),g=$y*s**2,y=s*KF(c-h,-Math.PI,Math.PI),_=y*y,b=_*y,T=b*y,A=T*y,I=A*y,P=H3*(vle*r-jke*Math.sin(2*r)+$ke*Math.sin(4*r)-Fke*Math.sin(6*r)),M=W3*f*(y+b/6*(1-a+g)+A/120*(5-18*a+l+72*g-58*$y))+5e5;let V=W3*(P+f*o*(_/2+T/24*(5-a+9*g+4*g**2)+I/720*(61-58*a+l+600*g-330*$y)));return n.north||(V+=1e7),[M,V]}function _le(t){return(t-1)*6-180+3}const Kke=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function xle(t){let e=0;for(const i of Kke){const s=t.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let n=0,r=!1;return e>32700&&e<32761?n=e-32700:e>32600&&e<32661&&(r=!0,n=e-32600),n?{number:n,north:r}:null}function WX(t,e){return function(n,r,i,s){const o=n.length;i=i>1?i:2,s=s??i,r||(i>2?r=n.slice():r=new Array(o));for(let a=0;a<o;a+=s){const l=n[a],c=n[a+1],u=t(l,c,e);r[a]=u[0],r[a+1]=u[1]}return r}}function Yke(t){return xle(t)?new F5({code:t,units:"m"}):null}function Xke(t){const e=xle(t.getCode());return e?{forward:WX(qke,e),inverse:WX(Bke,e)}:null}const vG=63710088e-1;function XF(t,e,n){n=n||vG;const r=cu(t[1]),i=cu(e[1]),s=(i-r)/2,o=cu(e[0]-t[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(r)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function M6(t,e){let n=0;for(let r=0,i=t.length;r<i-1;++r)n+=XF(t[r],t[r+1],e);return n}function bk(t,e){e=e||{};const n=e.radius||vG,r=e.projection||"EPSG:3857",i=t.getType();i!=="GeometryCollection"&&(t=t.clone().transform(r,"EPSG:4326"));let s=0,o,a,l,c,u,h;switch(i){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{o=t.getCoordinates(),s=M6(o,n);break}case"MultiLineString":case"Polygon":{for(o=t.getCoordinates(),l=0,c=o.length;l<c;++l)s+=M6(o[l],n);break}case"MultiPolygon":{for(o=t.getCoordinates(),l=0,c=o.length;l<c;++l)for(a=o[l],u=0,h=a.length;u<h;++u)s+=M6(a[u],n);break}case"GeometryCollection":{const f=t.getGeometries();for(l=0,c=f.length;l<c;++l)s+=bk(f[l],e);break}default:throw new Error("Unsupported geometry type: "+i)}return s}function bC(t,e){let n=0;const r=t.length;let i=t[r-1][0],s=t[r-1][1];for(let o=0;o<r;o++){const a=t[o][0],l=t[o][1];n+=cu(a-i)*(2+Math.sin(cu(s))+Math.sin(cu(l))),i=a,s=l}return n*e*e/2}function ZF(t,e){e=e||{};const n=e.radius||vG,r=e.projection||"EPSG:3857",i=t.getType();i!=="GeometryCollection"&&(t=t.clone().transform(r,"EPSG:4326"));let s=0,o,a,l,c,u,h;switch(i){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=t.getCoordinates(),s=Math.abs(bC(o[0],n)),l=1,c=o.length;l<c;++l)s-=Math.abs(bC(o[l],n));break}case"MultiPolygon":{for(o=t.getCoordinates(),l=0,c=o.length;l<c;++l)for(a=o[l],s+=Math.abs(bC(a[0],n)),u=1,h=a.length;u<h;++u)s-=Math.abs(bC(a[u],n));break}case"GeometryCollection":{const f=t.getGeometries();for(l=0,c=f.length;l<c;++l)s+=ZF(f[l],e);break}default:throw new Error("Unsupported geometry type: "+i)}return s}const Zke=[Xke],Jke=[Yke];let JF=!0;function wle(t){JF=!1}function _G(t,e){if(e!==void 0){for(let n=0,r=t.length;n<r;++n)e[n]=t[n];e=e}else e=t.slice();return e}function q3(t){Dke(t.getCode(),t),I1(t,t,_G)}function Qke(t){t.forEach(q3)}function Jr(t){if(typeof t!="string")return t;const e=lM(t);if(e)return e;for(const n of Jke){const r=n(t);if(r)return r}return null}function K3(t,e,n,r){t=Jr(t);let i;const s=t.getPointResolutionFunc();if(s){if(i=s(e,n),r&&r!==t.getUnits()){const o=t.getMetersPerUnit();o&&(i=i*o/i2[r])}}else{const o=t.getUnits();if(o=="degrees"&&!r||r=="degrees")i=e;else{const a=wG(t,Jr("EPSG:4326"));if(!a&&o!=="degrees")i=e*t.getMetersPerUnit();else{let c=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];c=a(c,c,2);const u=XF(c.slice(0,2),c.slice(2,4)),h=XF(c.slice(4,6),c.slice(6,8));i=(u+h)/2}const l=r?i2[r]:t.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function QF(t){Qke(t),t.forEach(function(e){t.forEach(function(n){e!==n&&I1(e,n,_G)})})}function eAe(t,e,n,r){t.forEach(function(i){e.forEach(function(s){I1(i,s,n),I1(s,i,r)})})}function xG(t,e){return t?typeof t=="string"?Jr(t):t:Jr(e)}function e8(t){return(function(e,n,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,n=n!==void 0?n:new Array(s);for(let o=0;o<s;o+=i){const a=t(e.slice(o,o+r)),l=a.length;for(let c=0,u=i;c<u;++c)n[o+c]=c>=l?e[o+c]:a[c]}return n})}function tAe(t,e,n,r){const i=Jr(t),s=Jr(e);I1(i,s,e8(n)),I1(s,i,e8(r))}function Ni(t,e){return wle(),ob(t,"EPSG:4326","EPSG:3857")}function Fn(t,e){const n=ob(t,"EPSG:3857","EPSG:4326"),r=n[0];return(r<-180||r>180)&&(n[0]=Eg(r+180,360)-180),n}function i1(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||wG(t,e)===_G)&&n}function wG(t,e){const n=t.getCode(),r=e.getCode();let i=cM(n,r);if(i)return i;let s=null,o=null;for(const l of Zke)s||(s=l(t)),o||(o=l(e));if(!s&&!o)return null;const a="EPSG:4326";if(o)if(s)i=N6(s.inverse,o.forward);else{const l=cM(n,a);l&&(i=N6(l,o.forward))}else{const l=cM(a,r);l&&(i=N6(s.inverse,l))}return i&&(q3(t),q3(e),I1(t,e,i)),i}function N6(t,e){return function(n,r,i,s){return r=t(n,r,i,s),e(r,r,i,s)}}function Ek(t,e){const n=Jr(t),r=Jr(e);return wG(n,r)}function ob(t,e,n){const r=Ek(e,n);if(!r){const i=Jr(e).getCode(),s=Jr(n).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(t,void 0,t.length)}function P1(t,e){return t}function Li(t,e){return JF&&!Ca(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(JF=!1,mle("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function bG(t,e){return t}function ah(t,e){return t}function HX(t,e,n){return function(r){let i,s;if(t.canWrapX()){const o=t.getExtent(),a=Xn(o);r=r.slice(0),s=ple(r,t,a),s&&(r[0]=r[0]-s*a),r[0]=ri(r[0],o[0],o[2]),r[1]=ri(r[1],o[1],o[3]),i=n(r)}else i=n(r);return s&&e.canWrapX()&&(i[0]+=s*Xn(e.getExtent())),i}}function nAe(){QF(FX),QF(zX),eAe(zX,FX,Mke,Nke)}nAe();const rAe=new Array(6);function Hs(){return[1,0,0,1,0,0]}function ble(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],u=e[2],h=e[3],f=e[4],g=e[5];return t[0]=n*l+i*c,t[1]=r*l+s*c,t[2]=n*u+i*h,t[3]=r*u+s*h,t[4]=n*f+i*g+o,t[5]=r*f+s*g+a,t}function iAe(t,e,n,r,i,s,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t}function Ele(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Zi(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function sAe(t,e,n){return ble(t,iAe(rAe,1,0,0,1,e,n))}function mu(t,e,n,r,i,s,o,a){const l=Math.sin(s),c=Math.cos(s);return t[0]=r*c,t[1]=i*l,t[2]=-r*l,t[3]=i*c,t[4]=o*r*c-a*r*l+e,t[5]=o*i*l+a*i*c+n,t}function Sk(t,e){const n=oAe(e);ur(n!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return t[0]=o/n,t[1]=-i/n,t[2]=-s/n,t[3]=r/n,t[4]=(s*l-o*a)/n,t[5]=-(r*l-i*a)/n,t}function oAe(t){return t[0]*t[3]-t[1]*t[2]}const aAe=[1e5,1e5,1e5,1e5,2,2];function lAe(t){return"matrix("+t.join(", ")+")"}function t8(t){return t.substring(7,t.length-1).split(",").map(parseFloat)}function cAe(t,e){const n=t8(t),r=t8(e);for(let i=0;i<6;++i)if(Math.round((n[i]-r[i])*aAe[i])!==0)return!1;return!0}function bd(t,e,n,r,i,s,o){s=s||[],o=o||2;let a=0;for(let l=e;l<n;l+=r){const c=t[l],u=t[l+1];s[a++]=i[0]*c+i[2]*u+i[4],s[a++]=i[1]*c+i[3]*u+i[5];for(let h=2;h<o;h++)s[a++]=t[l+h]}return s&&s.length!=a&&(s.length=a),s}function EG(t,e,n,r,i,s,o){o=o||[];const a=Math.cos(i),l=Math.sin(i),c=s[0],u=s[1];let h=0;for(let f=e;f<n;f+=r){const g=t[f]-c,y=t[f+1]-u;o[h++]=c+g*a-y*l,o[h++]=u+g*l+y*a;for(let _=f+2;_<f+r;++_)o[h++]=t[_]}return o&&o.length!=h&&(o.length=h),o}function uAe(t,e,n,r,i,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=e;h<n;h+=r){const f=t[h]-l,g=t[h+1]-c;a[u++]=l+i*f,a[u++]=c+s*g;for(let y=h+2;y<h+r;++y)a[u++]=t[y]}return a&&a.length!=u&&(a.length=u),a}function hAe(t,e,n,r,i,s,o){o=o||[];let a=0;for(let l=e;l<n;l+=r){o[a++]=t[l]+i,o[a++]=t[l+1]+s;for(let c=l+2;c<l+r;++c)o[a++]=t[c]}return o&&o.length!=a&&(o.length=a),o}const qX=Hs(),dAe=[NaN,NaN];class Sle extends Yd{constructor(){super(),this.extent_=Wa(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=ile((e,n,r)=>{if(!r)return this.getSimplifiedGeometry(n);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return Sn()}closestPointXY(e,n,r,i){return Sn()}containsXY(e,n){return this.closestPointXY(e,n,dAe,Number.MIN_VALUE)===0}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Sn()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&eI(n),this.extentRevision_=this.getRevision()}return Eke(this.extent_,e)}rotate(e,n){Sn()}scale(e,n,r){Sn()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Sn()}getType(){return Sn()}applyTransform(e){Sn()}intersectsExtent(e){return Sn()}translate(e,n){Sn()}transform(e,n){const r=Jr(e),i=r.getUnits()=="tile-pixels"?function(s,o,a){const l=r.getExtent(),c=r.getWorldExtent(),u=Ms(c)/Ms(l);mu(qX,c[0],c[3],u,-u,0,0,0);const h=bd(s,0,s.length,a,qX,o),f=Ek(r,n);return f?f(h,h,a):h}:Ek(r,n);return this.applyTransform(i),this}}class c0 extends Sle{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return hG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Sn()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=Y3(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){Sn()}setLayout(e,n,r){let i;if(e)i=Y3(e);else{for(let s=0;s<r;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}i=n.length,e=hv(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,n){const r=this.getFlatCoordinates();if(r){const i=this.getStride();EG(r,0,r.length,i,e,n,r),this.changed()}}scale(e,n,r){n===void 0&&(n=e),r||(r=vh(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();uAe(i,0,i.length,s,e,n,r,i),this.changed()}}translate(e,n){const r=this.getFlatCoordinates();if(r){const i=this.getStride();hAe(r,0,r.length,i,e,n,r),this.changed()}}}function hv(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function Y3(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function fAe(t,e,n){const r=t.getFlatCoordinates();if(!r)return null;const i=t.getStride();return bd(r,0,r.length,i,e,n)}function KX(t,e,n,r,i,s,o){const a=t[e],l=t[e+1],c=t[n]-a,u=t[n+1]-l;let h;if(c===0&&u===0)h=e;else{const f=((i-a)*c+(s-l)*u)/(c*c+u*u);if(f>1)h=n;else if(f>0){for(let g=0;g<r;++g)o[g]=sc(t[e+g],t[n+g],f);o.length=r;return}else h=e}for(let f=0;f<r;++f)o[f]=t[h+f];o.length=r}function SG(t,e,n,r,i){let s=t[e],o=t[e+1];for(e+=r;e<n;e+=r){const a=t[e],l=t[e+1],c=ap(s,o,a,l);c>i&&(i=c),s=a,o=l}return i}function TG(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];i=SG(t,e,a,r,i),e=a}return i}function pAe(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];i=TG(t,e,a,r,i),e=a[a.length-1]}return i}function kG(t,e,n,r,i,s,o,a,l,c,u){if(e==n)return c;let h,f;if(i===0){if(f=ap(o,a,t[e],t[e+1]),f<c){for(h=0;h<r;++h)l[h]=t[e+h];return l.length=r,f}return c}u=u||[NaN,NaN];let g=e+r;for(;g<n;)if(KX(t,g-r,g,r,o,a,u),f=ap(o,a,u[0],u[1]),f<c){for(c=f,h=0;h<r;++h)l[h]=u[h];l.length=r,g+=r}else g+=r*Math.max((Math.sqrt(f)-Math.sqrt(c))/i|0,1);if(s&&(KX(t,n-r,e,r,o,a,u),f=ap(o,a,u[0],u[1]),f<c)){for(c=f,h=0;h<r;++h)l[h]=u[h];l.length=r}return c}function AG(t,e,n,r,i,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const g=n[h];c=kG(t,e,g,r,i,s,o,a,l,c,u),e=g}return c}function mAe(t,e,n,r,i,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const g=n[h];c=AG(t,e,g,r,i,s,o,a,l,c,u),e=g[g.length-1]}return c}function Tle(t,e,n,r){for(let i=0,s=n.length;i<s;++i)t[e++]=n[i];return e}function G5(t,e,n,r){for(let i=0,s=n.length;i<s;++i){const o=n[i];for(let a=0;a<r;++a)t[e++]=o[a]}return e}function nI(t,e,n,r,i){i=i||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=G5(t,e,n[o],r);i[s++]=l,e=l}return i.length=s,i}function kle(t,e,n,r,i){i=i||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=nI(t,e,n[o],r,i[s]);l.length===0&&(l[0]=e),i[s++]=l,e=l[l.length-1]}return i.length=s,i}function ig(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let o=e;o<n;o+=r)i[s++]=t.slice(o,o+r);return i.length=s,i}function Tk(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];i[s++]=ig(t,e,l,r,i[s]),e=l}return i.length=s,i}function n8(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];i[s++]=l.length===1&&l[0]===e?[]:Tk(t,e,l,r,i[s]),e=l[l.length-1]}return i.length=s,i}function X3(t,e,n,r,i,s,o){let a,l;const c=(n-e)/r;if(c===1)a=e;else if(c===2)a=e,l=i;else if(c!==0){let u=t[e],h=t[e+1],f=0;const g=[0];for(let b=e+r;b<n;b+=r){const T=t[b],A=t[b+1];f+=Math.sqrt((T-u)*(T-u)+(A-h)*(A-h)),g.push(f),u=T,h=A}const y=i*f,_=mke(g,y);_<0?(l=(y-g[-_-2])/(g[-_-1]-g[-_-2]),a=e+(-_-2)*r):a=e+_*r}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?t[a+u]:sc(t[a+u],t[a+r+u],l);return s}function r8(t,e,n,r,i,s){if(n==e)return null;let o;if(i<t[e+r-1])return s?(o=t.slice(e,e+r),o[r-1]=i,o):null;if(t[n-1]<i)return s?(o=t.slice(n-r,n),o[r-1]=i,o):null;if(i==t[e+r-1])return t.slice(e,e+r);let a=e/r,l=n/r;for(;a<l;){const f=a+l>>1;i<t[(f+1)*r-1]?l=f:a=f+1}const c=t[a*r-1];if(i==c)return t.slice((a-1)*r,(a-1)*r+r);const u=t[(a+1)*r-1],h=(i-c)/(u-c);o=[];for(let f=0;f<r-1;++f)o.push(sc(t[(a-1)*r+f],t[a*r+f],h));return o.push(i),o}function gAe(t,e,n,r,i,s,o){if(o)return r8(t,e,n[n.length-1],r,i,s);let a;if(i<t[r-1])return s?(a=t.slice(0,r),a[r-1]=i,a):null;if(t[t.length-1]<i)return s?(a=t.slice(t.length-r),a[r-1]=i,a):null;for(let l=0,c=n.length;l<c;++l){const u=n[l];if(e!=u){if(i<t[e+r-1])return null;if(i<=t[u-1])return r8(t,e,u,r,i,!1);e=u}}return null}function yAe(t,e,n,r,i){return!fG(i,function(o){return!Fy(t,e,n,r,o[0],o[1])})}function Fy(t,e,n,r,i,s){let o=0,a=t[n-r],l=t[n-r+1];for(;e<n;e+=r){const c=t[e],u=t[e+1];l<=s?u>s&&(c-a)*(s-l)-(i-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(i-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function IG(t,e,n,r,i,s){if(n.length===0||!Fy(t,e,n[0],r,i,s))return!1;for(let o=1,a=n.length;o<a;++o)if(Fy(t,n[o-1],n[o],r,i,s))return!1;return!0}function vAe(t,e,n,r,i,s){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(IG(t,e,l,r,i,s))return!0;e=l[l.length-1]}return!1}function Ale(t,e,n,r,i){let s;for(e+=r;e<n;e+=r)if(s=i(t.slice(e-r,e),t.slice(e,e+r)),s)return s;return!1}function U5(t,e,n,r,i,s){return s=s??lle(Wa(),t,e,n,r),la(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:Ale(t,e,n,r,function(o,a){return Ske(i,o,a)}):!1}function _Ae(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){if(U5(t,e,n[s],r,i))return!0;e=n[s]}return!1}function Ile(t,e,n,r,i){return!!(U5(t,e,n,r,i)||Fy(t,e,n,r,i[0],i[1])||Fy(t,e,n,r,i[0],i[3])||Fy(t,e,n,r,i[2],i[1])||Fy(t,e,n,r,i[2],i[3]))}function Ple(t,e,n,r,i){if(!Ile(t,e,n[0],r,i))return!1;if(n.length===1)return!0;for(let s=1,o=n.length;s<o;++s)if(yAe(t,n[s-1],n[s],r,i)&&!U5(t,n[s-1],n[s],r,i))return!1;return!0}function xAe(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(Ple(t,e,a,r,i))return!0;e=a[a.length-1]}return!1}function PG(t,e,n,r){let i=t[e],s=t[e+1],o=0;for(let a=e+r;a<n;a+=r){const l=t[a],c=t[a+1];o+=Math.sqrt((l-i)*(l-i)+(c-s)*(c-s)),i=l,s=c}return o}function B5(t,e,n,r,i,s,o){const a=(n-e)/r;if(a<3){for(;e<n;e+=r)s[o++]=t[e],s[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,n-r];let u=0;for(;c.length>0;){const h=c.pop(),f=c.pop();let g=0;const y=t[f],_=t[f+1],b=t[h],T=t[h+1];for(let A=f+r;A<h;A+=r){const I=t[A],P=t[A+1],M=Tke(I,P,y,_,b,T);M>g&&(u=A,g=M)}g>i&&(l[(u-e)/r]=1,f+r<u&&c.push(f,u),u+r<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=t[e+h*r],s[o++]=t[e+h*r+1]);return o}function Cle(t,e,n,r,i,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=B5(t,e,u,r,i,s,o),a.push(o),e=u}return o}function ny(t,e){return e*Math.round(t/e)}function wAe(t,e,n,r,i,s,o){if(e==n)return o;let a=ny(t[e],i),l=ny(t[e+1],i);e+=r,s[o++]=a,s[o++]=l;let c,u;do if(c=ny(t[e],i),u=ny(t[e+1],i),e+=r,e==n)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;e<n;){const h=ny(t[e],i),f=ny(t[e+1],i);if(e+=r,h==c&&f==u)continue;const g=c-a,y=u-l,_=h-a,b=f-l;if(g*b==y*_&&(g<0&&_<g||g==_||g>0&&_>g)&&(y<0&&b<y||y==b||y>0&&b>y)){c=h,u=f;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=h,u=f}return s[o++]=c,s[o++]=u,o}function CG(t,e,n,r,i,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=wAe(t,e,u,r,i,s,o),a.push(o),e=u}return o}function bAe(t,e,n,r,i,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l],h=[];o=CG(t,e,u,r,i,s,o,h),a.push(h),e=u[u.length-1]}return o}class ts extends c0{constructor(e,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendCoordinate(e){xr(this.flatCoordinates,e),this.changed()}clone(){const e=new ts(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<cv(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(SG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,r,i))}forEachSegment(e){return Ale(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,r8(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n))}getCoordinates(){return ig(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,n){return X3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,this.stride)}getLength(){return PG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const n=[];return n.length=B5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new ts(n,"XY")}getType(){return"LineString"}intersectsExtent(e){return U5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=G5(this.flatCoordinates,0,e,this.stride),this.changed()}}let ki=class Rle extends c0{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new Rle(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){const s=this.flatCoordinates,o=ap(e,n,s[0],s[1]);if(o<i){const a=this.stride;for(let l=0;l<a;++l)r[l]=s[l];return r.length=a,o}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return cT(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return uG(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Tle(this.flatCoordinates,0,e,this.stride),this.changed()}};const uo={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},C1=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",EAe=C1.includes("safari")&&!C1.includes("chrom"),SAe=EAe&&(C1.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(C1)),TAe=C1.includes("webkit")&&!C1.includes("edge"),Mle=C1.includes("macintosh"),kAe=typeof devicePixelRatio<"u"?devicePixelRatio:1,uc=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,RG=typeof Image<"u"&&Image.prototype.decode,Nle=typeof createImageBitmap=="function",Ole=(function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t})(),zt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Os(t,e,n,r){let i;return n&&n.length?i=n.shift():uc?i=new class extends OffscreenCanvas{style={}}(t??300,e??150):i=document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",r)}let O6;function Z3(){return O6||(O6=Os(1,1)),O6}function W5(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function YX(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function AAe(t){for(;t.lastChild;)t.lastChild.remove()}function IAe(t,e){const n=t.childNodes;for(let r=0;;++r){const i=n[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){t.appendChild(s);continue}if(!s){t.removeChild(i),--r;continue}t.insertBefore(s,i)}}}function Lle(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const n=this.childNodes.indexOf(e);if(n===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(n,1),e},insertBefore:function(e,n){const r=this.childNodes.indexOf(n);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,n,r){return n==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,n,r)}})}function sg(t){return typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas}const MG=[NaN,NaN,NaN,0];let L6;function PAe(){return L6||(L6=Os(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),L6}const CAe=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,RAe=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,MAe=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,NAe=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function EC(t,e){return t.endsWith("%")?Number(t.substring(0,t.length-1))/e:Number(t)}function hT(t){throw new Error('failed to parse "'+t+'" as color')}function Dle(t){if(t.toLowerCase().startsWith("rgb")){const s=t.match(RAe)||t.match(CAe)||t.match(MAe);if(s){const o=s[4],a=100/255;return[ri(EC(s[1],a)+.5|0,0,255),ri(EC(s[2],a)+.5|0,0,255),ri(EC(s[3],a)+.5|0,0,255),o!==void 0?ri(EC(o,100),0,1):1]}hT(t)}if(t.startsWith("#")){if(NAe.test(t)){const s=t.substring(1),o=s.length<=4?1:2,a=[0,0,0,255];for(let l=0,c=s.length;l<c;l+=o){let u=parseInt(s.substring(l,l+o),16);o===1&&(u+=u<<4),a[l/o]=u}return a[3]=a[3]/255,a}hT(t)}const e=PAe();e.fillStyle="#abcdef";let n=e.fillStyle;e.fillStyle=t,e.fillStyle===n&&(e.fillStyle="#fedcba",n=e.fillStyle,e.fillStyle=t,e.fillStyle===n&&hT(t));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return Dle(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=sb(i[3]/255,3),i}function OAe(t){return typeof t=="string"?t:OG(t)}const LAe=1024,PE={};let D6=0;function DAe(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function j6(t){return t>.0031308?Math.pow(t,1/2.4)*269.025-14.025:t*3294.6}function $6(t){return t>.2068965?Math.pow(t,3):(t-4/29)*(108/841)}function F6(t){return t>10.314724?Math.pow((t+14.025)/269.025,2.4):t/3294.6}function V6(t){return t>.0088564?Math.pow(t,1/3):t/(108/841)+4/29}function XX(t){const e=F6(t[0]),n=F6(t[1]),r=F6(t[2]),i=V6(e*.222488403+n*.716873169+r*.06060791),s=500*(V6(e*.452247074+n*.399439023+r*.148375274)-i),o=200*(i-V6(e*.016863605+n*.117638439+r*.865350722)),a=Math.atan2(o,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+o*o),a<0?a+360:a,t[3]]}function jAe(t){const e=(t[0]+16)/116,n=t[1],r=t[2]*Math.PI/180,i=$6(e),s=$6(e+n/500*Math.cos(r)),o=$6(e-n/200*Math.sin(r)),a=j6(s*3.021973625-i*1.617392459-o*.404875592),l=j6(s*-.943766287+i*1.916279586+o*.027607165),c=j6(s*.069407491-i*.22898585+o*1.159737864);return[ri(a+.5|0,0,255),ri(l+.5|0,0,255),ri(c+.5|0,0,255),t[3]]}function NG(t){if(t==="none")return MG;if(PE.hasOwnProperty(t))return PE[t];if(D6>=LAe){let n=0;for(const r in PE)(n++&3)===0&&(delete PE[r],--D6)}const e=Dle(t);e.length!==4&&hT(t);for(const n of e)isNaN(n)&&hT(t);return PE[t]=e,++D6,e}function gu(t){return Array.isArray(t)?t:NG(t)}function OG(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let r=t[2];r!=(r|0)&&(r=r+.5|0);const i=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+n+","+r+","+i+")"}class jle extends JA{constructor(e,n,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=n,this.state=typeof i=="function"?zt.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(En.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==zt.IDLE&&this.loader){this.state=zt.LOADING,this.changed();const e=this.getResolution(),n=Array.isArray(e)?e[0]:e;sle(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||Nle&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=zt.LOADED}).catch(r=>{this.state=zt.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function $Ae(t,e,n){const r=t;let i=!0,s=!1,o=!1;const a=[G3(r,En.LOAD,function(){o=!0,s||e()})];return r.src&&RG?(s=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(o?e():n())})):a.push(G3(r,En.ERROR,n)),function(){i=!1,a.forEach(ni)}}function FAe(t,e){return new Promise((n,r)=>{function i(){o(),n(t)}function s(){o(),r(new Error("Image load error"))}function o(){t.removeEventListener("load",i),t.removeEventListener("error",s)}t.addEventListener("load",i),t.addEventListener("error",s)})}function $le(t,e){return e&&(t.src=e),t.src&&RG?new Promise((n,r)=>t.decode().then(()=>n(t)).catch(i=>t.complete&&t.width?n(t):r(i))):FAe(t)}function Fle(t,e){return e&&(t.src=e),t.src&&RG&&Nle?t.decode().then(()=>createImageBitmap(t)).catch(n=>{if(t.complete&&t.width)return t;throw n}):$le(t)}class VAe{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const n in this.cache_){const r=this.cache_[n];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(e,n,r){const i=z6(e,n,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,n,r){const i=z6(e,n,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,n,r,i,s){const o=z6(e,n,r),a=o in this.cache_;this.cache_[o]=i,s&&(i.getImageState()===zt.IDLE&&i.load(),i.getImageState()===zt.LOADING?i.ready().then(()=>{this.patternCache_[o]=Z3().createPattern(i.getImage(1),"repeat")}):this.patternCache_[o]=Z3().createPattern(i.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function z6(t,e,n){const r=n?gu(n):"null";return e+":"+t+":"+r}const su=new VAe;let CE=null;class Vle extends JA{constructor(e,n,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?zt.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===zt.LOADED){CE||(CE=Os(1,1,void 0,{willReadFrequently:!0})),CE.drawImage(this.image_,0,0);try{CE.getImageData(0,0,1,1),this.tainted_=!1}catch{CE=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(En.CHANGE)}handleImageError_(){this.imageState_=zt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=zt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],n=this.size_[1],r=Os(e,n);r.fillRect(0,0,e,n),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===zt.IDLE){this.image_||this.initializeImage_(),this.imageState_=zt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&$le(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==zt.LOADED)return;const n=this.image_,r=Os(Math.ceil(n.width*e),Math.ceil(n.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=OAe(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===zt.LOADED||this.imageState_===zt.ERROR)e();else{const n=()=>{(this.imageState_===zt.LOADED||this.imageState_===zt.ERROR)&&(this.removeEventListener(En.CHANGE,n),e())};this.addEventListener(En.CHANGE,n)}})),this.ready_}}function J3(t,e,n,r,i,s){let o=e===void 0?void 0:su.get(e,n,i);return o||(o=new Vle(t,t&&"src"in t?t.src||void 0:e,n,r,i),su.set(e,n,i,o,s)),s&&o&&!su.getPattern(e,n,i)&&su.set(e,n,i,o,s),o}function vd(t){return t?Array.isArray(t)?OG(t):typeof t=="object"&&"src"in t?zAe(t):t:null}function zAe(t){if(!t.offset||!t.size)return su.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,n=su.getPattern(e,void 0,t.color);if(n)return n;const r=su.get(t.src,"anonymous",null);if(r.getImageState()!==zt.LOADED)return null;const i=Os(t.size[0],t.size[1]);return i.drawImage(r.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),J3(i.canvas,e,void 0,zt.LOADED,t.color,!0),su.getPattern(e,void 0,t.color)}class zle{drawCustom(e,n,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,n,r){}drawFeature(e,n,r){}drawGeometryCollection(e,n,r){}drawLineString(e,n,r){}drawMultiLineString(e,n,r){}drawMultiPoint(e,n,r){}drawMultiPolygon(e,n,r){}drawPoint(e,n,r){}drawPolygon(e,n,r){}drawText(e,n,r){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}}const SC="ol-hidden",rI="ol-unselectable",LG="ol-control",ZX="ol-collapsed",GAe=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),JX=["style","variant","weight","size","lineHeight","family"],i8={normal:400,bold:700},s8=function(t){const e=t.match(GAe);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=JX.length;r<i;++r){const s=e[r+1];s!==void 0&&(n[JX[r]]=typeof s=="string"?s.trim():s)}return isNaN(Number(n.weight))&&n.weight in i8&&(n.weight=i8[n.weight]),n.families=n.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),n},Gle="10px sans-serif",gl="#000",o2="round",lp=[],cp=0,a2="round",kk=10,Ak="#000",Ik="center",Q3="middle",Vy=[0,0,0,0],Pk=1,B_=new Yd;let RE=null,QX;const o8={},UAe=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function BAe(t,e,n){return`${t} ${e} 16px "${n}"`}const WAe=(function(){let e,n;async function r(s){await n.ready;const o=await n.load(s);if(o.length===0)return!1;const a=s8(s),l=a.families[0].toLowerCase(),c=a.weight;return o.some(u=>{const h=u.family.replace(/^['"]|['"]$/g,"").toLowerCase(),f=i8[u.weight]||u.weight;return h===l&&u.style===a.style&&f==c})}async function i(){await n.ready;let s=!0;const o=B_.getProperties(),a=Object.keys(o).filter(l=>o[l]<100);for(let l=a.length-1;l>=0;--l){const c=a[l];let u=o[c];u<100&&(await r(c)?(lv(o8),B_.set(c,100)):(u+=10,B_.set(c,u,!0),u<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){n||(n=uc?self.fonts:document.fonts);const o=s8(s);if(!o)return;const a=o.families;let l=!1;for(const c of a){if(UAe.has(c))continue;const u=BAe(o.style,o.weight,c);B_.get(u)===void 0&&(B_.set(u,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(i,100))}})(),HAe=(function(){let t;return function(e){let n=o8[e];if(n==null){if(uc){const r=s8(e),i=Ule(e,"g");n=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);o8[e]=n}return n}})();function Ule(t,e){return RE||(RE=Os(1,1)),t!=QX&&(RE.font=t,QX=RE.font),RE.measureText(e)}function Ble(t,e){return Ule(t,e).width}function eZ(t,e,n){if(e in n)return n[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,Ble(t,s)),0);return n[e]=r,r}function qAe(t,e){const n=[],r=[],i=[];let s=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const h=e[c];if(h===`
`||c===u){s=Math.max(s,o),i.push(o),o=0,a+=l,l=0;continue}const f=e[c+1]||t.font,g=Ble(f,h);n.push(g),o+=g;const y=HAe(f);r.push(y),l=Math.max(l,y)}return{width:s,height:a,widths:n,heights:r,lineWidths:i}}function KAe(t,e,n,r,i,s,o,a,l,c,u){t.save(),n!==1&&(t.globalAlpha===void 0?t.globalAlpha=h=>h.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),r.contextInstructions?(t.translate(l,c),t.scale(u[0],u[1]),YAe(r,t)):u[0]<0||u[1]<0?(t.translate(l,c),t.scale(u[0],u[1]),t.drawImage(r,i,s,o,a,0,0,o,a)):t.drawImage(r,i,s,o,a,l,c,o*u[0],a*u[1]),t.restore()}function YAe(t,e){const n=t.contextInstructions;for(let r=0,i=n.length;r<i;r+=2)Array.isArray(n[r+1])?e[n[r]].apply(e,n[r+1]):e[n[r]]=n[r+1]}class XAe extends zle{constructor(e,n,r,i,s,o,a){super(),this.context_=e,this.pixelRatio_=n,this.extent_=r,this.transform_=i,this.transformRotation_=i?sb(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Hs()}drawImages_(e,n,r,i){if(!this.image_)return;const s=bd(e,n,r,i,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,h=s.length;u<h;u+=2){const f=s[u]-this.imageAnchorX_,g=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const y=f+this.imageAnchorX_,_=g+this.imageAnchorY_;mu(a,y,_,1,1,c,-y,-_),o.save(),o.transform.apply(o,a),o.translate(y,_),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,g,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,n,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=bd(e,n,r,i,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<r;n+=i){const l=s[n]+this.textOffsetX_,c=s[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,n,r,i,s){const o=this.context_,a=bd(e,n,r,i,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),r}drawRings_(e,n,r,i){for(let s=0,o=r.length;s<o;++s)n=this.moveToLineTo_(e,n,r[s],i,!0);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!la(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=fAe(e,this.transform_,this.pixelCoordinates_),r=n[2]-n[0],i=n[3]-n[1],s=Math.sqrt(r*r+i*i),o=this.context_;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,n){const r=n.getGeometryFunction()(e);r&&(this.setStyle(n),this.drawGeometry(r))}drawGeometryCollection(e){const n=e.getGeometriesArray();for(let r=0,i=n.length;r<i;++r)this.drawGeometry(n[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!la(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getExtent();if(la(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();r.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(i,s,o[l],a,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!la(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!la(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),o=e.getStride();n.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];i=this.drawRings_(r,i,c,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(e){const n=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const n=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,n.lineCap=e.lineCap),Kd(r.lineDash,e.lineDash)||n.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const n=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:Ik;r?(r.font!=e.font&&(r.font=e.font,n.font=e.font),r.textAlign!=i&&(r.textAlign=i,n.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=i,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:vd(r||gl)}}if(!n)this.strokeState_=null;else{const r=n.getColor(),i=n.getLineCap(),s=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit(),u=s||lp;this.strokeState_={lineCap:i!==void 0?i:o2,lineDash:this.pixelRatio_===1?u:u.map(h=>h*this.pixelRatio_),lineDashOffset:(o||cp)*this.pixelRatio_,lineJoin:a!==void 0?a:a2,lineWidth:(l!==void 0?l:Pk)*this.pixelRatio_,miterLimit:c!==void 0?c:kk,strokeStyle:vd(r||Ak)}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=n[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/r,o[1]*this.pixelRatio_/r],this.imageWidth_=n[0]*r}setTextStyle(e){if(!e)this.text_="";else{const n=e.getFill();if(!n)this.textFillState_=null;else{const g=n.getColor();this.textFillState_={fillStyle:vd(g||gl)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const g=r.getColor(),y=r.getLineCap(),_=r.getLineDash(),b=r.getLineDashOffset(),T=r.getLineJoin(),A=r.getWidth(),I=r.getMiterLimit();this.textStrokeState_={lineCap:y!==void 0?y:o2,lineDash:_||lp,lineDashOffset:b||cp,lineJoin:T!==void 0?T:a2,lineWidth:A!==void 0?A:Pk,miterLimit:I!==void 0?I:kk,strokeStyle:vd(g||Ak)}}const i=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),h=e.getTextAlign(),f=e.getTextBaseline();this.textState_={font:i!==void 0?i:Gle,textAlign:h!==void 0?h:Ik,textBaseline:f!==void 0?f:Q3},this.text_=u!==void 0?Array.isArray(u)?u.reduce((g,y,_)=>g+=_%2?" ":y,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const ZAe=.5,Wle={Point:sIe,LineString:nIe,Polygon:aIe,MultiPoint:oIe,MultiLineString:rIe,MultiPolygon:iIe,GeometryCollection:tIe,Circle:QAe};function JAe(t,e){return parseInt(en(t),10)-parseInt(en(e),10)}function tZ(t,e){const n=Hle(t,e);return n*n}function Hle(t,e){return ZAe*t/e}function QAe(t,e,n,r,i){const s=n.getFill(),o=n.getStroke();if(s||o){const l=t.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,r,i)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r)}}function nZ(t,e,n,r,i,s,o,a){const l=[],c=n.getImage();if(c){let f=!0;const g=c.getImageState();g==zt.LOADED||g==zt.ERROR?f=!1:g==zt.IDLE&&c.load(),f&&l.push(c.ready())}const u=n.getFill();u&&u.loading()&&l.push(u.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>i(null)),eIe(t,e,n,r,s,o,a),h}function eIe(t,e,n,r,i,s,o){const a=n.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(r,i);if(n.getRenderer())qle(t,l,n,e,o);else{const u=Wle[l.getType()];u(t,l,n,e,o,s)}}function qle(t,e,n,r,i){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)qle(t,o[a],n,r,i);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,r,n.getRenderer(),n.getHitDetectionRenderer(),i)}function tIe(t,e,n,r,i,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const c=Wle[o[a].getType()];c(t,o[a],n,r,i,s)}}function nIe(t,e,n,r,i){const s=n.getStroke();if(s){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,r,i)}const o=n.getText();if(o&&o.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,i)}}function rIe(t,e,n,r,i){const s=n.getStroke();if(s){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,r,i)}const o=n.getText();if(o&&o.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,i)}}function iIe(t,e,n,r,i){const s=n.getFill(),o=n.getStroke();if(o||s){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,r,i)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}function sIe(t,e,n,r,i,s){const o=n.getImage(),a=n.getText(),l=a&&a.getText(),c=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=zt.LOADED)return;const u=t.getBuilder(n.getZIndex(),"Image");u.setImageStyle(o,c),u.drawPoint(e,r,i)}if(l){const u=t.getBuilder(n.getZIndex(),"Text");u.setTextStyle(a,c),u.drawText(e,r,i)}}function oIe(t,e,n,r,i,s){const o=n.getImage(),a=o&&o.getOpacity()!==0,l=n.getText(),c=l&&l.getText(),u=s&&a&&c?{}:void 0;if(a){if(o.getImageState()!=zt.LOADED)return;const h=t.getBuilder(n.getZIndex(),"Image");h.setImageStyle(o,u),h.drawMultiPoint(e,r,i)}if(c){const h=t.getBuilder(n.getZIndex(),"Text");h.setTextStyle(l,u),h.drawText(e,r,i)}}function aIe(t,e,n,r,i){const s=n.getFill(),o=n.getStroke();if(s||o){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,r,i)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}let lIe=!1;function cIe(t,e,n,r,i,s,o){const a=new XMLHttpRequest;a.open("GET",typeof t=="function"?t(n,r,i):t,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=lIe,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();try{let u;c=="text"||c=="json"?u=a.responseText:c=="xml"?u=a.responseXML||a.responseText:c=="arraybuffer"&&(u=a.response),u?s(e.readFeatures(u,{extent:n,featureProjection:i}),e.readProjection(u)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function rZ(t,e){return function(n,r,i,s,o){cIe(t,e,n,r,i,(a,l)=>{this.addFeatures(a),s!==void 0&&s(a)},()=>{this.changed(),o!==void 0&&o()})}}function uIe(t,e){return[[-1/0,-1/0,1/0,1/0]]}function Kle(t,e,n,r){const i=[];let s=Wa();for(let o=0,a=n.length;o<a;++o){const l=n[o];s=hG(t,e,l[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return i}function DG(t,e,n,r,i,s,o){let a,l,c,u,h,f,g;const y=i[s+1],_=[];for(let A=0,I=n.length;A<I;++A){const P=n[A];for(u=t[P-r],f=t[P-r+1],a=e;a<P;a+=r)h=t[a],g=t[a+1],(y<=f&&g<=y||f<=y&&y<=g)&&(c=(y-f)/(g-f)*(h-u)+u,_.push(c)),u=h,f=g}let b=NaN,T=-1/0;for(_.sort(sp),u=_[0],a=1,l=_.length;a<l;++a){h=_[a];const A=Math.abs(h-u);A>T&&(c=(u+h)/2,IG(t,e,n,r,c,y)&&(b=c,T=A)),u=h}return isNaN(b)&&(b=i[s]),o?(o.push(b,y,T),o):[b,y,T]}function Yle(t,e,n,r,i){let s=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];s=DG(t,e,l,r,i,2*o,s),e=l[l.length-1]}return s}function hIe(t,e,n,r){for(;e<n-r;){for(let i=0;i<r;++i){const s=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=s}e+=r,n-=r}}function jG(t,e,n,r){let i=0,s=t[n-r],o=t[n-r+1];for(;e<n;e+=r){const a=t[e],l=t[e+1];i+=(a-s)*(l+o),s=a,o=l}return i===0?void 0:i>0}function $G(t,e,n,r,i){i=i!==void 0?i:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=jG(t,e,a,r);if(s===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=a}return!0}function Xle(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!$G(t,e,a,r,i))return!1;a.length&&(e=a[a.length-1])}return!0}function e4(t,e,n,r,i){i=i!==void 0?i:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=jG(t,e,a,r);(s===0?i&&l||!i&&!l:i&&!l||!i&&l)&&hIe(t,e,a,r),e=a}return e}function a8(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s)e=e4(t,e,n[s],r,i);return e}function Zle(t,e){const n=[];let r=0,i=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=jG(t,r,l,2);if(s===void 0&&(s=c),c===s)n.push(e.slice(i,o+1));else{if(n.length===0)continue;n[n.length-1].push(e[i])}i=o+1,r=l}return n}class H5 extends c0{constructor(e,n,r){super(),r!==void 0&&n===void 0?this.setFlatCoordinates(r,e):(n=n||0,this.setCenterAndRadius(e,n,r))}clone(){const e=new H5(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){const s=this.flatCoordinates,o=e-s[0],a=n-s[1],l=o*o+a*a;if(l<i){if(l===0)for(let c=0;c<this.stride;++c)r[c]=s[c];else{const c=this.getRadius()/Math.sqrt(l);r[0]=s[0]+c*o,r[1]=s[1]+c*a;for(let u=2;u<this.stride;++u)r[u]=s[u]}return r.length=this.stride,l}return i}containsXY(e,n){const r=this.flatCoordinates,i=e-r[0],s=n-r[1];return i*i+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const n=this.flatCoordinates,r=n[this.stride]-n[0];return _p(n[0]-r,n[1]-r,n[0]+r,n[1]+r,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+n*n}getType(){return"Circle"}intersectsExtent(e){const n=this.getExtent();if(la(e,n)){const r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]?!0:fG(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const n=this.stride,r=this.flatCoordinates[n]-this.flatCoordinates[0],i=e.slice();i[n]=i[0]+r;for(let s=1;s<n;++s)i[n+s]=e[s];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(e,n,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let s=Tle(i,0,e,this.stride);i[s++]=i[0]+n;for(let o=1,a=this.stride;o<a;++o)i[s++]=i[o];i.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,n){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,n){const r=this.getCenter(),i=this.getStride();this.setCenter(EG(r,0,r.length,i,e,n,r)),this.changed()}}H5.prototype.transform;class hu extends Sle{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ni),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let n=0,r=e.length;n<r;++n)this.changeEventsKeys_.push(Yn(e[n],En.CHANGE,this.changed,this))}clone(){const e=new hu(G6(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,n,r,i){if(i<cv(this.getExtent(),e,n))return i;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)i=s[o].closestPointXY(e,n,r,i);return i}containsXY(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,n))return!0;return!1}computeExtent(e){eI(e);const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)dG(e,n[r].getExtent());return e}getGeometries(){return G6(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].getType()===this.getType()?e=e.concat(n[r].getGeometriesArrayRecursive()):e.push(n[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],r=this.geometries_;let i=!1;for(let s=0,o=r.length;s<o;++s){const a=r[s],l=a.getSimplifiedGeometry(e);n.push(l),l!==a&&(i=!0)}return i?new hu(n):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)if(n[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,n);this.changed()}scale(e,n,r){r||(r=vh(this.getExtent()));const i=this.geometries_;for(let s=0,o=i.length;s<o;++s)i[s].scale(e,n,r);this.changed()}setGeometries(e){this.setGeometriesArray(G6(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].applyTransform(e);this.changed()}translate(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function G6(t){return t.map(e=>e.clone())}function Jle(t,e,n,r){let i=0;const s=t[n-r],o=t[n-r+1];let a=0,l=0;for(;e<n;e+=r){const c=t[e]-s,u=t[e+1]-o;i+=l*c-a*u,a=c,l=u}return i/2}function Qle(t,e,n,r){let i=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];i+=Jle(t,e,a,r),e=a}return i}function dIe(t,e,n,r){let i=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];i+=Qle(t,e,a,r),e=a[a.length-1]}return i}class Ck extends c0{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new Ck(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,r,i){return i<cv(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(SG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,r,i))}getArea(){return Jle(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ig(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=B5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new Ck(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=G5(this.flatCoordinates,0,e,this.stride),this.changed()}}class _h extends c0{constructor(e,n,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(n!==void 0&&r)this.setFlatCoordinates(n,e),this.ends_=r;else{const i=e,s=[],o=[];for(let l=0,c=i.length;l<c;++l){const u=i[l];xr(s,u.getFlatCoordinates()),o.push(s.length)}const a=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){xr(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new _h(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<cv(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(TG(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AG(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,n,r,i))}getCoordinateAtM(e,n,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,r=r!==void 0?r:!1,gAe(this.flatCoordinates,0,this.ends_,this.stride,e,n,r))}getCoordinates(){return Tk(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new ts(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,n=this.ends_,r=this.layout,i=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new ts(e.slice(s,l),r);i.push(c),s=l}return i}getLength(){const e=this.ends_;let n=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=PG(this.flatCoordinates,n,e[i],this.stride),n=e[i];return r}getFlatMidpoints(){const e=[],n=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=X3(n,r,l,s,.5);xr(e,c),r=l}return e}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=Cle(this.flatCoordinates,0,this.ends_,this.stride,e,n,0,r),new _h(n,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return _Ae(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=nI(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class u0 extends c0{constructor(e,n){super(),n&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendPoint(e){xr(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new u0(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){if(i<cv(this.getExtent(),e,n))return i;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=ap(e,n,s[a],s[a+1]);if(c<i){i=c;for(let u=0;u<o;++u)r[u]=s[a+u];r.length=o}}return i}getCoordinates(){return ig(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const n=this.flatCoordinates.length/this.stride;return e<0||n<=e?null:new ki(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,n=this.layout,r=this.stride,i=[];for(let s=0,o=e.length;s<o;s+=r){const a=new ki(e.slice(s,s+r),n);i.push(a)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const n=this.flatCoordinates,r=this.stride;for(let i=0,s=n.length;i<s;i+=r){const o=n[i],a=n[i+1];if(uG(e,o,a))return!0}return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=G5(this.flatCoordinates,0,e,this.stride),this.changed()}}class Pl extends c0{constructor(e,n,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&r?(this.setFlatCoordinates(n,e),this.ends_=r):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?xr(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Pl(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<cv(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(TG(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),AG(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,n){return IG(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return Qle(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),e4(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,Tk(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=vh(this.getExtent());this.flatInteriorPoint_=DG(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ki(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Ck(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=new Ck(n.slice(s,l),e);i.push(c),s=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;$G(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=e4(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=CG(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,r),new Pl(n,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return Ple(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=nI(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function iZ(t){if(ib(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],r=t[2],i=t[3],s=[e,n,e,i,r,i,r,n,e,n];return new Pl(s,"XY",[s.length])}class xp extends c0{constructor(e,n,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],o=[];for(let a=0,l=i.length;a<l;++a){const c=i[a],u=s.length,h=c.getEnds();for(let f=0,g=h.length;f<g;++f)h[f]+=u;xr(s,c.getFlatCoordinates()),o.push(h)}n=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=o}n!==void 0&&r?(this.setFlatCoordinates(n,e),this.endss_=r):this.setCoordinates(e,n)}appendPolygon(e){let n;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;xr(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(let i=0,s=n.length;i<s;++i)n[i]+=r}this.endss_.push(n),this.changed()}clone(){const e=this.endss_.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=this.endss_[i].slice();const r=new xp(this.flatCoordinates.slice(),this.layout,n);return r.applyProperties(this),r}closestPointXY(e,n,r,i){return i<cv(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pAe(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),mAe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,n){return vAe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,n)}getArea(){return dIe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),a8(n,0,this.endss_,this.stride,e)):n=this.flatCoordinates,n8(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Kle(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Yle(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new u0(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Xle(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=a8(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=bAe(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),n,0,r),new xp(n,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let n;if(e===0)n=0;else{const s=this.endss_[e-1];n=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(n!==0)for(let s=0,o=r.length;s<o;++s)r[s]-=n;return new Pl(this.flatCoordinates.slice(n,i),this.layout,r)}getPolygons(){const e=this.layout,n=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let o=0,a=r.length;o<a;++o){const l=r[o].slice(),c=l[l.length-1];if(s!==0)for(let h=0,f=l.length;h<f;++h)l[h]-=s;const u=new Pl(n.slice(s,c),e,l);i.push(u),s=c}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return xAe(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=kle(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const sZ=Hs();class yl{constructor(e,n,r,i,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?cT(this.flatCoordinates_):hG(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=vh(this.getExtent());this.flatInteriorPoints_=DG(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Zle(this.flatCoordinates_,this.ends_),n=Kle(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=Yle(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=X3(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let n=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const o=r[i],a=X3(e,n,o,2,.5);xr(this.flatMidpoints_,a),n=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Jr(e);const n=e.getExtent(),r=e.getWorldExtent();if(n&&r){const i=Ms(r)/Ms(n);mu(sZ,r[0],r[3],i,-i,0,0,0),bd(this.flatCoordinates_,0,this.flatCoordinates_.length,2,sZ,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new yl(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=ile((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=B5(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=Cle(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=CG(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new yl(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}yl.prototype.getFlatCoordinates=yl.prototype.getOrientedFlatCoordinates;function ece(t,e,n=0,r=t.length-1,i=fIe){for(;r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*h/l+f)),y=Math.min(r,Math.floor(e+(l-c)*h/l+f));ece(t,e,g,y,i)}const s=t[e];let o=n,a=r;for(ME(t,n,e),i(t[r],s)>0&&ME(t,n,r);o<a;){for(ME(t,o,a),o++,a--;i(t[o],s)<0;)o++;for(;i(t[a],s)>0;)a--}i(t[n],s)===0?ME(t,n,a):(a++,ME(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}}function ME(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function fIe(t,e){return t<e?-1:t>e?1:0}let tce=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const r=[];if(!kC(e,n))return r;const i=this.toBBox,s=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?i(a):a;kC(e,l)&&(n.leaf?r.push(a):B6(e,l)?this._all(a,r):s.push(a))}n=s.pop()}return r}collides(e){let n=this.data;if(!kC(e,n))return!1;const r=[];for(;n;){for(let i=0;i<n.children.length;i++){const s=n.children[i],o=n.leaf?this.toBBox(s):s;if(kC(e,o)){if(n.leaf||B6(e,o))return!0;r.push(s)}}n=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=W_([]),this}remove(e,n){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],o=[];let a,l,c;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),r.leaf){const u=pIe(e,r.children,n);if(u!==-1)return r.children.splice(u,1),s.push(r),this._condense(s),this}!c&&!r.leaf&&B6(r,i)?(s.push(r),o.push(a),a=0,l=r,r=r.children[0]):l?(a++,r=l.children[a],c=!1):r=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const r=[];for(;e;)e.leaf?n.push(...e.children):r.push(...e.children),e=r.pop();return n}_build(e,n,r,i){const s=r-n+1;let o=this._maxEntries,a;if(s<=o)return a=W_(e.slice(n,r+1)),h_(a,this.toBBox),a;i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,i-1))),a=W_([]),a.leaf=!1,a.height=i;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));oZ(e,n,r,c,this.compareMinX);for(let u=n;u<=r;u+=c){const h=Math.min(u+c-1,r);oZ(e,u,h,l,this.compareMinY);for(let f=u;f<=h;f+=l){const g=Math.min(f+l-1,h);a.children.push(this._build(e,f,g,i-1))}}return h_(a,this.toBBox),a}_chooseSubtree(e,n,r,i){for(;i.push(n),!(n.leaf||i.length-1===r);){let s=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=U6(c),h=yIe(e,c)-u;h<o?(o=h,s=u<s?u:s,a=c):h===o&&u<s&&(s=u,a=c)}n=a||n.children[0]}return n}_insert(e,n,r){const i=r?e:this.toBBox(e),s=[],o=this._chooseSubtree(i,this.data,n,s);for(o.children.push(e),pS(o,i);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(i,s,n)}_split(e,n){const r=e[n],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const o=this._chooseSplitIndex(r,s,i),a=W_(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,h_(r,this.toBBox),h_(a,this.toBBox),n?e[n-1].children.push(a):this._splitRoot(r,a)}_splitRoot(e,n){this.data=W_([e,n]),this.data.height=e.height+1,this.data.leaf=!1,h_(this.data,this.toBBox)}_chooseSplitIndex(e,n,r){let i,s=1/0,o=1/0;for(let a=n;a<=r-n;a++){const l=fS(e,0,a,this.toBBox),c=fS(e,a,r,this.toBBox),u=vIe(l,c),h=U6(l)+U6(c);u<s?(s=u,i=a,o=h<o?h:o):u===s&&h<o&&(o=h,i=a)}return i||r-n}_chooseSplitAxis(e,n,r){const i=e.leaf?this.compareMinX:mIe,s=e.leaf?this.compareMinY:gIe,o=this._allDistMargin(e,n,r,i),a=this._allDistMargin(e,n,r,s);o<a&&e.children.sort(i)}_allDistMargin(e,n,r,i){e.children.sort(i);const s=this.toBBox,o=fS(e,0,n,s),a=fS(e,r-n,r,s);let l=TC(o)+TC(a);for(let c=n;c<r-n;c++){const u=e.children[c];pS(o,e.leaf?s(u):u),l+=TC(o)}for(let c=r-n-1;c>=n;c--){const u=e.children[c];pS(a,e.leaf?s(u):u),l+=TC(a)}return l}_adjustParentBBoxes(e,n,r){for(let i=r;i>=0;i--)pS(n[i],e)}_condense(e){for(let n=e.length-1,r;n>=0;n--)e[n].children.length===0?n>0?(r=e[n-1].children,r.splice(r.indexOf(e[n]),1)):this.clear():h_(e[n],this.toBBox)}};function pIe(t,e,n){if(!n)return e.indexOf(t);for(let r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function h_(t,e){fS(t,0,t.children.length,e,t)}function fS(t,e,n,r,i){i||(i=W_(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<n;s++){const o=t.children[s];pS(i,t.leaf?r(o):o)}return i}function pS(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function mIe(t,e){return t.minX-e.minX}function gIe(t,e){return t.minY-e.minY}function U6(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function TC(t){return t.maxX-t.minX+(t.maxY-t.minY)}function yIe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function vIe(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function B6(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function kC(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function W_(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function oZ(t,e,n,r,i){const s=[e,n];for(;s.length;){if(n=s.pop(),e=s.pop(),n-e<=r)continue;const o=e+Math.ceil((n-e)/r/2)*r;ece(t,o,e,n,i),s.push(e,o,o,n)}}class l8{constructor(e){this.rbush_=new tce(e),this.items_={}}insert(e,n){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(r),this.items_[en(n)]=r}load(e,n){const r=new Array(n.length);for(let i=0,s=n.length;i<s;i++){const o=e[i],a=n[i],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};r[i]=l,this.items_[en(a)]=l}this.rbush_.load(r)}remove(e){const n=en(e),r=this.items_[n];return delete this.items_[n],this.rbush_.remove(r)!==null}update(e,n){const r=this.items_[en(n)],i=[r.minX,r.minY,r.maxX,r.maxY];A1(i,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let r;for(let i=0,s=e.length;i<s;i++)if(r=n(e[i]),r)return r;return r}isEmpty(){return T1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const n=this.rbush_.toJSON();return _p(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const n in e.items_)this.items_[n]=e.items_[n]}}class FG extends Yd{constructor(e){super(),this.projection=Jr(e.projection),this.attributions_=aZ(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(r,i){n.viewResolver=r,n.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=aZ(e),this.changed()}setState(e){this.state_=e,this.changed()}}function aZ(t){return t?typeof t=="function"?t:(Array.isArray(t)||(t=[t]),e=>t):null}const so={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class om extends Ac{constructor(e,n,r){super(e),this.feature=n,this.features=r}}class Ol extends FG{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=wk,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ur(this.format_,"`format` must be set when `url` is set"),this.loader_=rZ(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:uIe;const n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new l8:null,this.loadedExtentsRtree_=new l8,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!n&&r===void 0&&(r=new ja(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const n=en(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new om(so.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof yl||(this.featureChangeKeys_[e]=[Yn(n,En.CHANGE,this.handleFeatureChange_,this),Yn(n,n2.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let r=!0;if(n.getId()!==void 0){const i=String(n.getId());if(!(i in this.idIndex_))this.idIndex_[i]=n;else if(n instanceof yl){const s=this.idIndex_[i];s instanceof yl?Array.isArray(s)?s.push(n):this.idIndex_[i]=[s,n]:r=!1}else r=!1}return r&&(ur(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const n=[],r=[],i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=en(a);this.addToIndex_(l,a)&&r.push(a)}for(let s=0,o=r.length;s<o;s++){const a=r[s],l=en(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();n.push(u),i.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,i),this.hasListener(so.ADDFEATURE))for(let s=0,o=r.length;s<o;s++)this.dispatchEvent(new om(so.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(so.ADDFEATURE,function(r){n||(n=!0,e.push(r.feature),n=!1)}),this.addEventListener(so.REMOVEFEATURE,function(r){n||(n=!0,e.remove(r.feature),n=!1)}),e.addEventListener(Cs.ADD,r=>{n||(n=!0,this.addFeature(r.element),n=!1)}),e.addEventListener(Cs.REMOVE,r=>{n||(n=!0,this.removeFeature(r.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(ni);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new om(so.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof yl||s.intersectsCoordinate(e))return n(i)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof yl||i.intersectsExtent(e)){const s=n(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),T1(this.nullGeometryFeatures_)||xr(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const n=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){n.push(r)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=hle(e,n);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){const r=e[0],i=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||Fg,this.featuresRtree_.forEachInExtent(l,function(c){if(n(c)){const u=c.getGeometry(),h=a;if(a=u instanceof yl?0:u.closestPointXY(r,i,o,a),a<h){s=c;const f=Math.sqrt(a);l[0]=r-f,l[1]=i-f,l[2]=r+f,l[3]=i+f}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){const n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const n=e.target,r=en(n),i=n.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[r]=n);else{const o=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const s=n.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[r]=n;this.changed(),this.dispatchEvent(new om(so.CHANGEFEATURE,n))}hasFeature(e){const n=e.getId();return n!==void 0?n in this.idIndex_:en(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&T1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,n,r);for(let o=0,a=s.length;o<a;++o){const l=s[o];i.forEachInExtent(l,function(u){return ng(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new om(so.FEATURESLOADSTART)),this.loader_.call(this,l,n,r,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new om(so.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new om(so.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const n=this.loadedExtentsRtree_,r=n.forEachInExtent(e,function(i){if(A1(i.extent,e))return i});r&&n.remove(r)}removeFeatures(e){let n=!1;for(let r=0,i=e.length;r<i;++r)n=this.removeFeatureInternal(e[r])||n;n&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const n=en(e);if(!(n in this.uidIndex_))return!1;n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[n]?.forEach(ni),delete this.featureChangeKeys_[n];const i=e.getId();if(i!==void 0){const s=i.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[n],this.hasListener(so.REMOVEFEATURE)&&this.dispatchEvent(new om(so.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const n in this.idIndex_)if(this.idIndex_[n]===e){delete this.idIndex_[n];break}}setLoader(e){this.loader_=e}setUrl(e){ur(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(rZ(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class Dn{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Dn({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const n=J3(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===zt.IDLE&&n.load(),n.getImageState()===zt.LOADING&&(this.patternImage_=n)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?en(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:gu(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Mn{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Mn({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function lZ(t){return t[0]>0&&t[1]>0}function _Ie(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function $a(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}class q5{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=$a(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new q5({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Sn()}getImage(e){return Sn()}getHitDetectionImage(){return Sn()}getPixelRatio(e){return 1}getImageState(){return Sn()}getImageSize(){return Sn()}getOrigin(){return Sn()}getSize(){return Sn()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=$a(e)}listenImageChange(e){Sn()}load(){Sn()}unlistenImageChange(e){Sn()}ready(){return Promise.resolve()}}class K5 extends q5{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?zt.LOADING:zt.LOADED,this.imageState_===zt.LOADING&&this.ready().then(()=>this.imageState_=zt.LOADED),this.render()}clone(){const e=this.getScale(),n=new K5({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const e=this.size_,n=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-n[0]/r[0],e[1]/2+n[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const n=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${n}`+Object.values(this.renderOptions_).join(",");let i=su.get(r,null,null)?.getImage(1);if(!i){const s=this.renderOptions_,o=Math.ceil(s.size*e),a=Os(o,o);this.draw_(s,a,e),i=a.canvas,su.set(r,null,null,new Vle(i,void 0,null,zt.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,r){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const V=i;i=s,s=V}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=i-c,h=Math.sqrt(l*l+u*u),f=h/l;if(e==="miter"&&f<=r)return f*n;const g=n/2/f,y=n/2*(u/h),b=Math.sqrt((i+g)*(i+g)+y*y)-i;if(this.radius2_===void 0||e==="bevel")return b*2;const T=i*Math.sin(a),A=Math.sqrt(i*i-T*T),I=s-A,M=Math.sqrt(T*T+I*I)/T;if(M<=r){const V=M*n/2-s-i;return 2*Math.max(b,V)}return b*2}createRenderOptions(){let e=o2,n=a2,r=0,i=null,s=0,o,a=0;this.stroke_&&(o=vd(this.stroke_.getColor()??Ak),a=this.stroke_.getWidth()??Pk,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??a2,e=this.stroke_.getLineCap()??o2,r=this.stroke_.getMiterLimit()??kk);const l=this.calculateLineJoinSize_(n,a,r),c=Math.max(this.radius,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:n,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,r){if(n.scale(r,r),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let i=this.fill_.getColor();i===null&&(i=gl),n.fillStyle=vd(i),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=gu(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(n=Os(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_;const r=this.radius;if(n===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=s+a*o,c=a%2===0?r:i;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=gl,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class gs extends K5{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),n=new gs({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius=e,this.render()}}class xn{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=cZ,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new xn({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=cZ,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function xIe(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(ur(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let W6=null;function nce(t,e){if(!W6){const n=new Dn({color:"rgba(255,255,255,0.4)"}),r=new Mn({color:"#3399CC",width:1.25});W6=[new xn({image:new gs({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return W6}function VG(){const t={},e=[255,255,255,1],n=[0,153,255,1],r=3;return t.Polygon=[new xn({fill:new Dn({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new xn({stroke:new Mn({color:e,width:r+2})}),new xn({stroke:new Mn({color:n,width:r})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new xn({image:new gs({radius:r*2,fill:new Dn({color:n}),stroke:new Mn({color:e,width:r/2})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function cZ(t){return t.getGeometry()}const wIe="#333";class pc{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=$a(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Dn({color:wIe}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new pc({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Dn?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=$a(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Is={ANIMATING:0,INTERACTING:1},un={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},AC=[un.FILL],og=[un.STROKE],zy=[un.BEGIN_PATH],uZ=[un.CLOSE_PATH];class iI extends zle{constructor(e,n,r,i){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const n=this.pixelRatio;return n==1?e:e.map(function(r){return r*n})}appendFlatPointCoordinates(e,n){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=n)i[0]=e[a],i[1]=e[a+1],k1(r,i)&&(s[o++]=i[0],s[o++]=i[1]);return o}appendFlatLineCoordinates(e,n,r,i,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(n+=i);let u=e[n],h=e[n+1];const f=this.tmpCoordinate_;let g=!0,y,_,b;for(y=n+i;y<r;y+=i)f[0]=e[y],f[1]=e[y+1],b=HF(c,f),b!==_?(g&&(a[l++]=u,a[l++]=h,g=!1),a[l++]=f[0],a[l++]=f[1]):b===ao.INTERSECTING?(a[l++]=f[0],a[l++]=f[1],g=!1):g=!0,u=f[0],h=f[1],_=b;return(s&&g||y===n+i)&&(a[l++]=u,a[l++]=h),l}drawCustomCoordinates_(e,n,r,i,s){for(let o=0,a=r.length;o<a;++o){const l=r[o],c=this.appendFlatLineCoordinates(e,n,l,i,!1,!1);s.push(c),n=l}return n}drawCustom(e,n,r,i,s){this.beginGeometry(e,n,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let c,u,h,f,g;switch(o){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),f=[];const y=e.getEndss();g=0;for(let _=0,b=y.length;_<b;++_){const T=[];g=this.drawCustomCoordinates_(c,g,y[_],a,T),f.push(T)}this.instructions.push([un.CUSTOM,l,f,e,r,n8,s]),this.hitDetectionInstructions.push([un.CUSTOM,l,f,e,i||r,n8,s]);break;case"Polygon":case"MultiLineString":h=[],c=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),g=this.drawCustomCoordinates_(c,0,e.getEnds(),a,h),this.instructions.push([un.CUSTOM,l,h,e,r,Tk,s]),this.hitDetectionInstructions.push([un.CUSTOM,l,h,e,i||r,Tk,s]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),u=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([un.CUSTOM,l,u,e,r,ig,s]),this.hitDetectionInstructions.push([un.CUSTOM,l,u,e,i||r,ig,s]);break;case"MultiPoint":c=e.getFlatCoordinates(),u=this.appendFlatPointCoordinates(c,a),u>l&&(this.instructions.push([un.CUSTOM,l,u,e,r,ig,s]),this.hitDetectionInstructions.push([un.CUSTOM,l,u,e,i||r,ig,s]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),u=this.coordinates.length,this.instructions.push([un.CUSTOM,l,u,e,r,void 0,s]),this.hitDetectionInstructions.push([un.CUSTOM,l,u,e,i||r,void 0,s]);break}this.endGeometry(n)}beginGeometry(e,n,r){this.beginGeometryInstruction1_=[un.BEGIN_GEOMETRY,n,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[un.BEGIN_GEOMETRY,n,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let n;const r=e.length;let i,s,o=-1;for(n=0;n<r;++n)i=e[n],s=i[0],s==un.END_GEOMETRY?o=n:s==un.BEGIN_GEOMETRY&&(i[2]=n,yke(this.hitDetectionInstructions,o,n),o=-1)}fillStyleToState(e,n={}){if(e){const r=e.getColor();n.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,n.fillStyle=vd(r||gl)}else n.fillStyle=void 0;return n}strokeStyleToState(e,n={}){if(e){const r=e.getColor();n.strokeStyle=vd(r||Ak);const i=e.getLineCap();n.lineCap=i!==void 0?i:o2;const s=e.getLineDash();n.lineDash=s?s.slice():lp;const o=e.getLineDashOffset();n.lineDashOffset=o||cp;const a=e.getLineJoin();n.lineJoin=a!==void 0?a:a2;const l=e.getWidth();n.lineWidth=l!==void 0?l:Pk;const c=e.getMiterLimit();n.miterLimit=c!==void 0?c:kk,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0;return n}setFillStrokeStyle(e,n){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(n,r)}createFill(e){const n=e.fillStyle,r=[un.SET_FILL_STYLE,n];return typeof n!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[un.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(n.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,n){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!Kd(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(n.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[un.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=ale(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;oh(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class bIe extends iI{constructor(e,n,r,i){super(e,n,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n,r){if(!this.image_||this.maxExtent&&!k1(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,n,r);const i=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(i,s);this.instructions.push([un.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([un.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n,r){if(!this.image_)return;this.beginGeometry(e,n,r);const i=e.getFlatCoordinates(),s=[];for(let l=0,c=i.length;l<c;l+=e.getStride())(!this.maxExtent||k1(this.maxExtent,i.slice(l,l+2)))&&s.push(i[l],i[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([un.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([un.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}class EIe extends iI{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinates_(e,n,r,i){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,n,r,i,!1,!1),a=[un.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}drawLineString(e,n,r){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([un.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,lp,cp],zy);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(og),this.endGeometry(n)}drawMultiLineString(e,n,r){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([un.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,lp,cp],zy);const a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride();let u=0;for(let h=0,f=a.length;h<f;++h)u=this.drawFlatCoordinates_(l,u,a[h],c);this.hitDetectionInstructions.push(og),this.endGeometry(n)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(og),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(og),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(zy)}}class hZ extends iI{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinatess_(e,n,r,i){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=r.length;this.instructions.push(zy),this.hitDetectionInstructions.push(zy);for(let c=0;c<l;++c){const u=r[c],h=this.coordinates.length,f=this.appendFlatLineCoordinates(e,n,u,i,!0,!a),g=[un.MOVE_TO_LINE_TO,h,f];this.instructions.push(g),this.hitDetectionInstructions.push(g),a&&(this.instructions.push(uZ),this.hitDetectionInstructions.push(uZ)),n=u}return o&&(this.instructions.push(AC),this.hitDetectionInstructions.push(AC)),a&&(this.instructions.push(og),this.hitDetectionInstructions.push(og)),n}drawCircle(e,n,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([un.SET_FILL_STYLE,gl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([un.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,lp,cp]);const a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const u=[un.CIRCLE,c];this.instructions.push(zy,u),this.hitDetectionInstructions.push(zy,u),i.fillStyle!==void 0&&(this.instructions.push(AC),this.hitDetectionInstructions.push(AC)),i.strokeStyle!==void 0&&(this.instructions.push(og),this.hitDetectionInstructions.push(og)),this.endGeometry(n)}drawPolygon(e,n,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([un.SET_FILL_STYLE,gl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([un.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,lp,cp]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(n)}drawMultiPolygon(e,n,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([un.SET_FILL_STYLE,gl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([un.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,lp,cp]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride();let u=0;for(let h=0,f=a.length;h<f;++h)u=this.drawFlatCoordinatess_(l,u,a[h],c);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const n=this.coordinates;for(let r=0,i=n.length;r<i;++r)n[r]=ny(n[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function SIe(t,e,n,r,i){const s=[];let o=n,a=0,l=e.slice(n,2);for(;a<t&&o+i<r;){const[c,u]=l.slice(-2),h=e[o+i],f=e[o+i+1],g=Math.sqrt((h-c)*(h-c)+(f-u)*(f-u));if(a+=g,a>=t){const y=(t-a+g)/g,_=sc(c,h,y),b=sc(u,f,y);l.push(_,b),s.push(l),l=[_,b],a==t&&(o+=i),a=0}else if(a<t)l.push(e[o+i],e[o+i+1]),o+=i;else{const y=g-a,_=sc(c,h,y/g),b=sc(u,f,y/g);l.push(_,b),s.push(l),l=[_,b],a=0,o+=i}}return a>0&&s.push(l),s}function TIe(t,e,n,r,i){let s=n,o=n,a=0,l=0,c=n,u,h,f,g,y,_,b,T,A,I;for(h=n;h<r;h+=i){const P=e[h],M=e[h+1];y!==void 0&&(A=P-y,I=M-_,g=Math.sqrt(A*A+I*I),b!==void 0&&(l+=f,u=Math.acos((b*A+T*I)/(f*g)),u>t&&(l>a&&(a=l,s=c,o=h),l=0,c=h-i)),f=g,b=A,T=I),y=P,_=M}return l+=g,l>a?[c,h]:[s,o]}const t4={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class kIe extends iI{constructor(e,n,r,i){super(e,n,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[gl]={fillStyle:gl},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n,r){const i=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!i&&!s)return;const a=this.coordinates;let l=a.length;const c=e.getType();let u=null,h=e.getStride();if(o.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!la(this.maxExtent,e.getExtent()))return;let f;if(u=e.getFlatCoordinates(),c=="LineString")f=[u.length];else if(c=="MultiLineString")f=e.getEnds();else if(c=="Polygon")f=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){const b=e.getEndss();f=[];for(let T=0,A=b.length;T<A;++T)f.push(b[T][0])}this.beginGeometry(e,n,r);const g=o.repeat,y=g?void 0:o.textAlign;let _=0;for(let b=0,T=f.length;b<T;++b){let A;g?A=SIe(g*this.resolution,u,_,f[b],h):A=[u.slice(_,f[b])];for(let I=0,P=A.length;I<P;++I){const M=A[I];let V=0,C=M.length;if(y==null){const O=TIe(o.maxAngle,M,0,M.length,2);V=O[0],C=O[1]}for(let O=V;O<C;O+=h)a.push(M[O],M[O+1]);const N=a.length;_=f[b],this.drawChars_(l,N),l=N}}this.endGeometry(n)}else{let f=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),h=2;break;case"Polygon":u=e.getFlatInteriorPoint(),o.overflow||f.push(u[2]/this.resolution),h=3;break;case"MultiPolygon":const P=e.getFlatInteriorPoints();u=[];for(let M=0,V=P.length;M<V;M+=3)o.overflow||f.push(P[M+2]/this.resolution),u.push(P[M],P[M+1]);if(u.length===0)return;h=2;break}const g=this.appendFlatPointCoordinates(u,h);if(g===l)return;if(f&&(g-l)/2!==u.length/h){let P=l/2;f=f.filter((M,V)=>{const C=a[(P+V)*2]===u[V*h]&&a[(P+V)*2+1]===u[V*h+1];return C||--P,C})}this.saveTextStates_();const y=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,_=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(e,n,r);let b=o.padding;if(b!=Vy&&(o.scale[0]<0||o.scale[1]<0)){let P=o.padding[0],M=o.padding[1],V=o.padding[2],C=o.padding[3];o.scale[0]<0&&(M=-M,C=-C),o.scale[1]<0&&(P=-P,V=-V),b=[P,M,V,C]}const T=this.pixelRatio;this.instructions.push([un.DRAW_IMAGE,l,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,b==Vy?Vy:b.map(function(P){return P*T}),y,_,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const A=1/T,I=y?y.slice(0):null;I&&(I[1]=gl),this.hitDetectionInstructions.push([un.DRAW_IMAGE,l,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[A,A],NaN,this.declutterMode_,this.declutterImageWithText_,b,I,_,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?gl:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),this.endGeometry(n)}}saveTextStates_(){const e=this.textStrokeState_,n=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||Ik,justify:n.justify,textBaseline:n.textBaseline||Q3,scale:n.scale});const o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))}drawChars_(e,n){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=t4[i.textBaseline],u=this.textOffsetY_*l,h=this.text_,f=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([un.DRAW_CHARS,e,n,c,i.overflow,a,i.maxAngle,l,u,s,f*l,h,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([un.DRAW_CHARS,e,n,c,i.overflow,a&&gl,i.maxAngle,l,u,s,f*l,h,o,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,n){let r,i,s;if(!e)this.text_="";else{const o=e.getFill();o?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=vd(o.getColor()||gl)):(i=null,this.textFillState_=i);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const _=a.getLineDash(),b=a.getLineDashOffset(),T=a.getWidth(),A=a.getMiterLimit();s.lineCap=a.getLineCap()||o2,s.lineDash=_?_.slice():lp,s.lineDashOffset=b===void 0?cp:b,s.lineJoin=a.getLineJoin()||a2,s.lineWidth=T===void 0?Pk:T,s.miterLimit=A===void 0?kk:A,s.strokeStyle=vd(a.getColor()||Ak)}r=this.textState_;const l=e.getFont()||Gle;WAe(l);const c=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||Q3,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||Vy,r.scale=c===void 0?[1,1]:c;const u=e.getOffsetX(),h=e.getOffsetY(),f=e.getRotateWithView(),g=e.getKeepUpright(),y=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=f===void 0?!1:f,this.textKeepUpright_=g===void 0?!0:g,this.textRotation_=y===void 0?0:y,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:en(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+en(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}const AIe={Circle:hZ,Default:iI,Image:bIe,LineString:EIe,Polygon:hZ,Text:kIe};class IIe{constructor(e,n,r,i){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const n in this.buildersByZIndex_){e[n]=e[n]||{};const r=this.buildersByZIndex_[n];for(const i in r){const s=r[i].finish();e[n][i]=s}}return e}getBuilder(e,n){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[n];if(s===void 0){const o=AIe[n];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[n]=s}return s}}function PIe(t,e,n,r,i,s,o,a,l,c,u,h,f=!0){let g=t[e],y=t[e+1],_=0,b=0,T=0,A=0;function I(){_=g,b=y,e+=r,g=t[e],y=t[e+1],A+=T,T=Math.sqrt((g-_)*(g-_)+(y-b)*(y-b))}do I();while(e<n-r&&A+T<s);let P=T===0?0:(s-A)/T;const M=sc(_,g,P),V=sc(b,y,P),C=e-r,N=A,O=s+a*l(c,i,u);for(;e<n-r&&A+T<O;)I();P=T===0?0:(O-A)/T;const L=sc(_,g,P),F=sc(b,y,P);let G=!1;if(f)if(h){const Oe=[M,V,L,F];EG(Oe,0,4,2,h,Oe,Oe),G=Oe[0]>Oe[2]}else G=M>L;const U=Math.PI,he=[],Ie=C+r===e;e=C,T=0,A=N,g=t[e],y=t[e+1];let ze;if(Ie){I(),ze=Math.atan2(y-b,g-_),G&&(ze+=ze>0?-U:U);const Oe=(L+M)/2,fe=(F+V)/2;return he[0]=[Oe,fe,(O-s)/2,ze,i],he}i=i.replace(/\n/g," ");for(let Oe=0,fe=i.length;Oe<fe;){I();let ge=Math.atan2(y-b,g-_);if(G&&(ge+=ge>0?-U:U),ze!==void 0){let le=ge-ze;if(le+=le>U?-2*U:le<-U?2*U:0,Math.abs(le)>o)return null}ze=ge;const Se=Oe;let Z=0;for(;Oe<fe;++Oe){const le=G?fe-Oe-1:Oe,xe=a*l(c,i[le],u);if(e+r<n&&A+T<s+Z+xe/2)break;Z+=xe}if(Oe===Se)continue;const W=G?i.substring(fe-Se,fe-Oe):i.substring(Se,Oe);P=T===0?0:(s+Z/2-A)/T;const ne=sc(_,g,P),ie=sc(b,y,P);he.push([ne,ie,Z/2,ge,W]),s+=Z}return he}class rce{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Z3(),{get:(e,n)=>{if(typeof Z3()[n]=="function")return this.push_(n),this.pushMethodArgs_},set:(e,n,r)=>(this.push_(n,r),!0)})}push_(...e){const n=this.instructions_,r=this.zIndex+this.offset_;n[r]||(n[r]=[]),n[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(n=>{for(let r=0,i=n.length;r<i;++r){const s=n[r];if(typeof s=="function"){s(e);continue}const o=n[++r];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const d_=Wa(),am=[],pf=[],mf=[],lm=[];function dZ(t){return t[3].declutterBox}const fZ=new RegExp("[-----]");function H6(t,e){return e==="start"?e=fZ.test(t)?"right":"left":e==="end"&&(e=fZ.test(t)?"left":"right"),t4[e]}function CIe(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}function RIe(t,e,n){return n%2===0&&(t+=e),t}class MIe{constructor(e,n,r,i,s){this.overlaps=r,this.pixelRatio=n,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Hs(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new rce:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,n,r,i){const s=e+n+r+i;if(this.labels_[s])return this.labels_[s];const o=i?this.strokeStates[i]:null,a=r?this.fillStates[r]:null,l=this.textStates[n],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],h=l.justify?t4[l.justify]:H6(Array.isArray(e)?e[0]:e,l.textAlign||Ik),f=i&&o.lineWidth?o.lineWidth:0,g=Array.isArray(e)?e:String(e).split(`
`).reduce(CIe,[]),{width:y,height:_,widths:b,heights:T,lineWidths:A}=qAe(l,g),I=y+f,P=[],M=(I+2)*u[0],V=(_+f)*u[1],C={width:M<0?Math.floor(M):Math.ceil(M),height:V<0?Math.floor(V):Math.ceil(V),contextInstructions:P};(u[0]!=1||u[1]!=1)&&P.push("scale",u),i&&(P.push("strokeStyle",o.strokeStyle),P.push("lineWidth",f),P.push("lineCap",o.lineCap),P.push("lineJoin",o.lineJoin),P.push("miterLimit",o.miterLimit),P.push("setLineDash",[o.lineDash]),P.push("lineDashOffset",o.lineDashOffset)),r&&P.push("fillStyle",a.fillStyle),P.push("textBaseline","middle"),P.push("textAlign","center");const N=.5-h;let O=h*I+N*f;const L=[],F=[];let G=0,U=0,he=0,Ie=0,ze;for(let Oe=0,fe=g.length;Oe<fe;Oe+=2){const ge=g[Oe];if(ge===`
`){U+=G,G=0,O=h*I+N*f,++Ie;continue}const Se=g[Oe+1]||l.font;Se!==ze&&(i&&L.push("font",Se),r&&F.push("font",Se),ze=Se),G=Math.max(G,T[he]);const Z=[ge,O+N*b[he]+h*(b[he]-A[Ie]),.5*(f+G)+U];O+=b[he],i&&L.push("strokeText",Z),r&&F.push("fillText",Z),++he}return Array.prototype.push.apply(P,L),Array.prototype.push.apply(P,F),this.labels_[s]=C,C}replayTextBackground_(e,n,r,i,s,o,a){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,n),o&&(this.alignAndScaleFill_=o[2],e.fillStyle=o[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,n,r,i,s,o,a,l,c,u,h,f,g,y,_,b){a*=f[0],l*=f[1];let T=r-a,A=i-l;const I=s+c>e?e-c:s,P=o+u>n?n-u:o,M=y[3]+I*f[0]+y[1],V=y[0]+P*f[1]+y[2],C=T-y[3],N=A-y[0];(_||h!==0)&&(am[0]=C,lm[0]=C,am[1]=N,pf[1]=N,pf[0]=C+M,mf[0]=pf[0],mf[1]=N+V,lm[1]=mf[1]);let O;return h!==0?(O=mu(Hs(),r,i,1,1,h,-r,-i),Zi(O,am),Zi(O,pf),Zi(O,mf),Zi(O,lm),_p(Math.min(am[0],pf[0],mf[0],lm[0]),Math.min(am[1],pf[1],mf[1],lm[1]),Math.max(am[0],pf[0],mf[0],lm[0]),Math.max(am[1],pf[1],mf[1],lm[1]),d_)):_p(Math.min(C,C+M),Math.min(N,N+V),Math.max(C,C+M),Math.max(N,N+V),d_),g&&(T=Math.round(T),A=Math.round(A)),{drawImageX:T,drawImageY:A,drawImageW:I,drawImageH:P,originX:c,originY:u,declutterBox:{minX:d_[0],minY:d_[1],maxX:d_[2],maxY:d_[3],value:b},canvasTransform:O,scale:f}}replayImageOrLabel_(e,n,r,i,s,o,a){const l=!!(o||a),c=i.declutterBox,u=a?a[2]*i.scale[0]/2:0;return c.minX-u<=n[0]&&c.maxX+u>=0&&c.minY-u<=n[1]&&c.maxY+u>=0&&(l&&this.replayTextBackground_(e,am,pf,mf,lm,o,a),KAe(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const n=this.alignAndScaleFill_;if(n){const r=Zi(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),n!==1&&e.scale(n,n),e.rotate(this.viewRotation_)}e.fill(),n&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],n[1]&&(e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6]))}drawLabelWithPointPlacement_(e,n,r,i){const s=this.textStates[n],o=this.createLabel(e,n,i,r),a=this.strokeStates[r],l=this.pixelRatio,c=H6(Array.isArray(e)?e[0]:e,s.textAlign||Ik),u=t4[s.textBaseline||Q3],h=a&&a.lineWidth?a.lineWidth:0,f=o.width/l-2*s.scale[0],g=c*f+2*(.5-c)*h,y=u*o.height/l+2*(.5-u)*h;return{label:o,anchorX:g,anchorY:y}}execute_(e,n,r,i,s,o,a,l){const c=this.zIndexContext_;let u;this.pixelCoordinates_&&Kd(r,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=bd(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),Ele(this.renderedTransform_,r));let h=0;const f=i.length;let g=0,y,_,b,T,A,I,P,M,V,C,N,O,L,F=0,G=0;const U=this.coordinateCache_,he=this.viewRotation_,Ie=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,ze={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:he},Oe=this.instructions!=i||this.overlaps?0:200;let fe,ge,Se,Z;for(;h<f;){const W=i[h];switch(W[0]){case un.BEGIN_GEOMETRY:fe=W[1],Z=W[3],fe.getGeometry()?a!==void 0&&!la(a,Z.getExtent())?h=W[2]+1:++h:h=W[2],c&&(c.zIndex=W[4]);break;case un.BEGIN_PATH:F>Oe&&(this.fill_(e),F=0),G>Oe&&(e.stroke(),G=0),!F&&!G&&(e.beginPath(),A=NaN,I=NaN),++h;break;case un.CIRCLE:g=W[1];const ie=u[g],le=u[g+1],xe=u[g+2],qe=u[g+3],Ke=xe-ie,ke=qe-le,be=Math.sqrt(Ke*Ke+ke*ke);e.moveTo(ie+be,le),e.arc(ie,le,be,0,2*Math.PI,!0),++h;break;case un.CLOSE_PATH:e.closePath(),++h;break;case un.CUSTOM:g=W[1],y=W[2];const Dt=W[3],Ye=W[4],cn=W[5];ze.geometry=Dt,ze.feature=fe,h in U||(U[h]=[]);const jt=U[h];cn?cn(u,g,y,2,jt):(jt[0]=u[g],jt[1]=u[g+1],jt.length=2),c&&(c.zIndex=W[6]),Ye(jt,ze),++h;break;case un.DRAW_IMAGE:g=W[1],y=W[2],V=W[3],_=W[4],b=W[5];let gn=W[6];const wn=W[7],pt=W[8],hr=W[9],zn=W[10];let Hn=W[11];const ei=W[12];let xo=W[13];T=W[14]||"declutter";const Rr=W[15];if(!V&&W.length>=20){C=W[19],N=W[20],O=W[21],L=W[22];const Ve=this.drawLabelWithPointPlacement_(C,N,O,L);V=Ve.label,W[3]=V;const ee=W[23];_=(Ve.anchorX-ee)*this.pixelRatio,W[4]=_;const ye=W[24];b=(Ve.anchorY-ye)*this.pixelRatio,W[5]=b,gn=V.height,W[6]=gn,xo=V.width,W[13]=xo}let Ai;W.length>25&&(Ai=W[25]);let js,wt,Qn;W.length>17?(js=W[16],wt=W[17],Qn=W[18]):(js=Vy,wt=null,Qn=null),zn&&Ie?Hn+=he:!zn&&!Ie&&(Hn-=he);let dr=0;for(;g<y;g+=2){if(Ai&&Ai[dr++]<xo/this.pixelRatio)continue;const Ve=this.calculateImageOrLabelDimensions_(V.width,V.height,u[g],u[g+1],xo,gn,_,b,pt,hr,Hn,ei,s,js,!!wt||!!Qn,fe),ee=[e,n,V,Ve,wn,wt,Qn];if(l){let ye,je,Je;if(Rr){const et=y-g;if(!Rr[et]){Rr[et]={args:ee,declutterMode:T};continue}const Mt=Rr[et];ye=Mt.args,je=Mt.declutterMode,delete Rr[et],Je=dZ(ye)}let Ge,nt;if(ye&&(je!=="declutter"||!l.collides(Je))&&(Ge=!0),(T!=="declutter"||!l.collides(Ve.declutterBox))&&(nt=!0),je==="declutter"&&T==="declutter"){const et=Ge&&nt;Ge=et,nt=et}Ge&&(je!=="none"&&l.insert(Je),this.replayImageOrLabel_.apply(this,ye)),nt&&(T!=="none"&&l.insert(Ve.declutterBox),this.replayImageOrLabel_.apply(this,ee))}else this.replayImageOrLabel_.apply(this,ee)}++h;break;case un.DRAW_CHARS:const Vt=W[1],jn=W[2],nn=W[3],Fo=W[4];L=W[5];const Gi=W[6],$s=W[7],Nn=W[8];O=W[9];const Ii=W[10];C=W[11],Array.isArray(C)&&(C=C.reduce(RIe,"")),N=W[12];const He=[W[13],W[13]];T=W[14]||"declutter";const Pe=W[15],Ce=this.textStates[N],on=Ce.font,z=[Ce.scale[0]*$s,Ce.scale[1]*$s];let Tt;on in this.widths_?Tt=this.widths_[on]:(Tt={},this.widths_[on]=Tt);const X=PG(u,Vt,jn,2),ae=Math.abs(z[0])*eZ(on,C,Tt);if(Fo||ae<=X){const Ve=this.textStates[N].textAlign,ee=(X-ae)*H6(C,Ve),ye=PIe(u,Vt,jn,2,C,ee,Gi,Math.abs(z[0]),eZ,on,Tt,Ie?0:this.viewRotation_,Pe);e:if(ye){const je=[];let Je,Ge,nt,et,Mt;if(O)for(Je=0,Ge=ye.length;Je<Ge;++Je){Mt=ye[Je],nt=Mt[4],et=this.createLabel(nt,N,"",O),_=Mt[2]+(z[0]<0?-Ii:Ii),b=nn*et.height+(.5-nn)*2*Ii*z[1]/z[0]-Nn;const Gt=this.calculateImageOrLabelDimensions_(et.width,et.height,Mt[0],Mt[1],et.width,et.height,_,b,0,0,Mt[3],He,!1,Vy,!1,fe);if(l&&T==="declutter"&&l.collides(Gt.declutterBox))break e;je.push([e,n,et,Gt,1,null,null])}if(L)for(Je=0,Ge=ye.length;Je<Ge;++Je){Mt=ye[Je],nt=Mt[4],et=this.createLabel(nt,N,L,""),_=Mt[2],b=nn*et.height-Nn;const Gt=this.calculateImageOrLabelDimensions_(et.width,et.height,Mt[0],Mt[1],et.width,et.height,_,b,0,0,Mt[3],He,!1,Vy,!1,fe);if(l&&T==="declutter"&&l.collides(Gt.declutterBox))break e;je.push([e,n,et,Gt,1,null,null])}l&&T!=="none"&&l.load(je.map(dZ));for(let Gt=0,_n=je.length;Gt<_n;++Gt)this.replayImageOrLabel_.apply(this,je[Gt])}}++h;break;case un.END_GEOMETRY:if(o!==void 0){fe=W[1];const Ve=o(fe,Z,T);if(Ve)return Ve}++h;break;case un.FILL:Oe?F++:this.fill_(e),++h;break;case un.MOVE_TO_LINE_TO:for(g=W[1],y=W[2],ge=u[g],Se=u[g+1],e.moveTo(ge,Se),A=ge+.5|0,I=Se+.5|0,g+=2;g<y;g+=2)ge=u[g],Se=u[g+1],P=ge+.5|0,M=Se+.5|0,(g==y-2||P!==A||M!==I)&&(e.lineTo(ge,Se),A=P,I=M);++h;break;case un.SET_FILL_STYLE:this.alignAndScaleFill_=W[2],F&&(this.fill_(e),F=0,G&&(e.stroke(),G=0)),e.fillStyle=W[1],++h;break;case un.SET_STROKE_STYLE:G&&(e.stroke(),G=0),this.setStrokeStyle_(e,W),++h;break;case un.STROKE:Oe?G++:e.stroke(),++h;break;default:++h;break}}F&&this.fill_(e),G&&e.stroke()}execute(e,n,r,i,s,o){this.viewRotation_=i,this.execute_(e,n,r,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,n,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],n,this.hitDetectionInstructions,!0,i,s)}}const Py=["Polygon","Circle","LineString","Image","Text","Default"],ice=["Image","Text"],NIe=Py.filter(t=>!ice.includes(t));class OIe{constructor(e,n,r,i,s,o,a){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Hs(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,n){const r=this.getClipCoords(n);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,n){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const o in s){const a=s[o];i[o]=new MIe(this.resolution_,this.pixelRatio_,this.overlaps_,a,n)}}}hasExecutors(e){for(const n in this.executorsByZIndex_){const r=this.executorsByZIndex_[n];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,n,r,i,s,o){i=Math.round(i);const a=i*2+1,l=mu(this.hitDetectionTransform_,i+.5,i+.5,1/n,-1/n,-r,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Os(a,a));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=Wa(),uT(h,e),oh(h,n*(this.renderBuffer_+i),h));const f=LIe(i);let g;function y(M,V,C){const N=u.getImageData(0,0,a,a).data;for(let O=0,L=f.length;O<L;O++)if(N[f[O]]>0){if(!o||C==="none"||g!=="Image"&&g!=="Text"||o.includes(M)){const F=(f[O]-3)/4,G=i-F%a,U=i-(F/a|0),he=s(M,V,G*G+U*U);if(he)return he}u.clearRect(0,0,a,a);break}}const _=Object.keys(this.executorsByZIndex_).map(Number);_.sort(sp);let b,T,A,I,P;for(b=_.length-1;b>=0;--b){const M=_[b].toString();for(A=this.executorsByZIndex_[M],T=Py.length-1;T>=0;--T)if(g=Py[T],I=A[g],I!==void 0&&(P=I.executeHitDetection(u,l,r,y,h),P))return P}}getClipCoords(e){const n=this.maxExtent_;if(!n)return null;const r=n[0],i=n[1],s=n[2],o=n[3],a=[r,i,r,o,s,o,s,i];return bd(a,0,8,2,e,a),a}isEmpty(){return T1(this.executorsByZIndex_)}execute(e,n,r,i,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?gke:sp),o=o||Py;const c=Py.length;for(let u=0,h=l.length;u<h;++u){const f=l[u].toString(),g=this.executorsByZIndex_[f];for(let y=0,_=o.length;y<_;++y){const b=o[y],T=g[b];if(T!==void 0){const A=a===null?void 0:T.getZIndexContext(),I=A?A.getContext():e,P=this.maxExtent_&&b!=="Image"&&b!=="Text";if(P&&(I.save(),this.clip(I,r)),!A||b==="Text"||b==="Image"?T.execute(I,n,r,i,s,a):A.pushFunction(M=>T.execute(M,n,r,i,s,a)),P&&I.restore(),A){A.offset();const M=l[u]*c+Py.indexOf(b);this.deferredZIndexContexts_[M]||(this.deferredZIndexContexts_[M]=[]),this.deferredZIndexContexts_[M].push(A)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,n=Object.keys(e).map(Number).sort(sp);for(let r=0,i=n.length;r<i;++r)e[n[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[n[r]].length=0}}const q6={};function LIe(t){if(q6[t]!==void 0)return q6[t];const e=t*2+1,n=t*t,r=new Array(n+1);for(let s=0;s<=t;++s)for(let o=0;o<=t;++o){const a=s*s+o*o;if(a>n)break;let l=r[a];l||(l=[],r[a]=l),l.push(((t+s)*e+(t+o))*4+3),s>0&&l.push(((t-s)*e+(t+o))*4+3),o>0&&(l.push(((t+s)*e+(t-o))*4+3),s>0&&l.push(((t-s)*e+(t-o))*4+3))}const i=[];for(let s=0,o=r.length;s<o;++s)r[s]&&i.push(...r[s]);return q6[t]=i,i}function pZ(t,e,n,r){return n!==void 0&&r!==void 0?[n/t,r/e]:n!==void 0?n/t:r!==void 0?r/e:1}let sI=class sce extends q5{constructor(e){e=e||{};const n=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;ur(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||en(o)),ur(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),ur(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=zt.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?zt.LOADED:zt.IDLE:l=zt.LOADING:l=zt.LOADED),this.color_=e.color!==void 0?gu(e.color):null,this.iconImage_=J3(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let c,u;if(e.size)[c,u]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)c=h.width,u=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const g=this.iconImage_.getSize();this.setScale(pZ(g[0],g[1],e.width,e.height))};this.listenImageChange(f);return}}c!==void 0&&this.setScale(pZ(c,u,e.width,e.height))}}clone(){let e,n,r;return this.initialOptions_?(n=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new sce({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const n=this.getDisplacement(),r=this.getScaleArray();return[e[0]-n[0]/r[0],e[1]+n[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),r=this.iconImage_.getSize();if(!n||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=J3(null,e,this.crossOrigin_,zt.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==zt.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==zt.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(En.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(En.CHANGE,e)}ready(){return this.iconImage_.ready()}};const pd=.5;function DIe(t,e,n,r,i,s,o,a,l){const c=i,u=t[0]*pd,h=t[1]*pd,f=Os(u,h);f.imageSmoothingEnabled=!1;const g=f.canvas,y=new XAe(f,pd,i,null,o,a,null),_=n.length,b=Math.floor((256*256*256-1)/_),T={};for(let I=1;I<=_;++I){const P=n[I-1],M=P.getStyleFunction()||r;if(!M)continue;let V=M(P,s);if(!V)continue;Array.isArray(V)||(V=[V]);const N=(I*b).toString(16).padStart(7,"#00000");for(let O=0,L=V.length;O<L;++O){const F=V[O],G=F.getGeometryFunction()(P);if(!G||!la(c,G.getExtent()))continue;const U=F.clone(),he=U.getFill();he&&he.setColor(N);const Ie=U.getStroke();Ie&&(Ie.setColor(N),Ie.setLineDash(null)),U.setText(void 0);const ze=F.getImage();if(ze){const Se=ze.getImageSize();if(!Se)continue;const Z=Os(Se[0],Se[1],void 0,{alpha:!1}),W=Z.canvas;Z.fillStyle=N,Z.fillRect(0,0,W.width,W.height),U.setImage(new sI({img:W,anchor:ze.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ze.getOrigin(),opacity:1,size:ze.getSize(),scale:ze.getScale(),rotation:ze.getRotation(),rotateWithView:ze.getRotateWithView()}))}const Oe=U.getZIndex()||0;let fe=T[Oe];fe||(fe={},T[Oe]=fe,fe.Polygon=[],fe.Circle=[],fe.LineString=[],fe.Point=[]);const ge=G.getType();if(ge==="GeometryCollection"){const Se=G.getGeometriesArrayRecursive();for(let Z=0,W=Se.length;Z<W;++Z){const ne=Se[Z];fe[ne.getType().replace("Multi","")].push(ne,U)}}else fe[ge.replace("Multi","")].push(G,U)}}const A=Object.keys(T).map(Number).sort(sp);for(let I=0,P=A.length;I<P;++I){const M=T[A[I]];for(const V in M){const C=M[V];for(let N=0,O=C.length;N<O;N+=2){y.setStyle(C[N+1]);for(let L=0,F=e.length;L<F;++L)y.setTransform(e[L]),y.drawGeometry(C[N])}}}return f.getImageData(0,0,g.width,g.height)}function jIe(t,e,n){const r=[];if(n){const i=Math.floor(Math.round(t[0])*pd),s=Math.floor(Math.round(t[1])*pd),o=(ri(i,0,n.width-1)+ri(s,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],u=n.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);u&&u%h===0&&r.push(e[u/h-1])}return r}class dT extends Ac{constructor(e,n,r,i){super(e),this.inversePixelTransform=n,this.frameState=r,this.context=i}}const $Ie=5;class oce extends QA{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=$Ie}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Sn()}getData(e){return null}prepareFrame(e){return Sn()}renderFrame(e,n){return Sn()}forEachFeatureAtCoordinate(e,n,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const n=e.target;(n.getState()===zt.LOADED||n.getState()===zt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=zt.LOADED&&n!=zt.ERROR&&e.addEventListener(En.CHANGE,this.boundHandleImageChange_),n==zt.IDLE&&(e.load(),n=e.getState()),n==zt.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const mZ=[];let H_=null;function FIe(){H_=Os(1,1,void 0,{willReadFrequently:!0})}class zG extends oce{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Hs(),this.pixelTransform=Hs(),this.inversePixelTransform=Hs(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,n,r){H_||FIe(),H_.clearRect(0,0,1,1);let i;try{H_.drawImage(e,n,r,1,1,0,0,1,1),i=H_.getImageData(0,0,1,1).data}catch{return H_=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,n,r){const i=this.getLayer().getClassName();let s,o;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&Kd(gu(e.style.backgroundColor),gu(r)))){const a=e.firstElementChild;sg(a)&&(o=a.getContext("2d"))}if(o&&cAe(o.canvas.style.transform,n)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=uc?Lle():document.createElement("div"),s.className=i;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=Os();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,n,r){const i=uv(r),s=$5(r),o=j5(r),a=D5(r);Zi(n.coordinateToPixelTransform,i),Zi(n.coordinateToPixelTransform,s),Zi(n.coordinateToPixelTransform,o),Zi(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Zi(l,i),Zi(l,s),Zi(l,o),Zi(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,n){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(Xn(r)/i*o),l=Math.round(Ms(r)/i*o);mu(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),Sk(this.inversePixelTransform,this.pixelTransform);const c=lAe(this.pixelTransform);if(this.useContainer(n,c,this.getBackground(e)),!this.containerReused){const u=this.context.canvas;u.width!=a||u.height!=l?(u.width=a,u.height=l):this.context.clearRect(0,0,a,l),c!==u.style.transform&&(u.style.transform=c)}}dispatchRenderEvent_(e,n,r){const i=this.getLayer();if(i.hasListener(e)){const s=new dT(e,this.inversePixelTransform,r,n);i.dispatchEvent(s)}}preRender(e,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(uo.PRERENDER,e,n)}postRender(e,n){n.declutter||this.dispatchRenderEvent_(uo.POSTRENDER,e,n)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new rce),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(uo.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(uo.POSTRENDER,this.context,e))}getRenderTransform(e,n,r,i,s,o,a){const l=s/2,c=o/2,u=i/n,h=-u,f=-e[0]+a,g=-e[1];return mu(this.tempTransform,l,c,u,h,-r,f,g)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class VIe extends zG{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Wa(),this.wrappedRenderedExtent_=Wa(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,n,r){const i=n.extent,s=n.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),h=this.getLayer().getSource(),f=this.getLayer().getDeclutter(),g=n.pixelRatio,y=n.viewHints,_=!(y[Is.ANIMATING]||y[Is.INTERACTING]),b=this.context,T=Math.round(Xn(i)/a*g),A=Math.round(Ms(i)/a*g),I=h.getWrapX()&&l.canWrapX(),P=I?Xn(u):null,M=I?Math.ceil((i[2]-u[2])/P)+1:1;let V=I?Math.floor((i[0]-u[0])/P):0;do{let C=this.getRenderTransform(o,a,0,g,T,A,V*P);n.declutter&&(C=C.slice(0)),e.execute(b,[b.canvas.width,b.canvas.height],C,c,_,r===void 0?Py:r?ice:NIe,r?f&&n.declutter[f]:void 0)}while(++V<M)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Os(this.context.canvas.width,this.context.canvas.height,mZ))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,W5(this.context),mZ.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,n){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,n);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(uo.PRERENDER)||this.getLayer().hasListener(uo.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,a&&r.extent&&this.clipping){const l=ah(r.extent);a=la(l,e.extent),this.clipped_=a&&!ng(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(n=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],h=r[0]*pd,f=r[1]*pd;u.push(this.getRenderTransform(i,s,o,pd,h,f,0).slice());const g=c.getSource(),y=a.getExtent();if(g.getWrapX()&&a.canWrapX()&&!ng(y,l)){let _=l[0];const b=Xn(y);let T=0,A;for(;_<y[0];)--T,A=b*T,u.push(this.getRenderTransform(i,s,o,pd,h,f,A).slice()),_+=b;for(T=0,_=l[2];_>y[2];)++T,A=b*T,u.push(this.getRenderTransform(i,s,o,pd,h,f,A).slice()),_-=b}this.hitDetectionImageData_=DIe(r,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o,tZ(s,this.renderedPixelRatio_))}n(jIe(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,r,i,s){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),c={},u=function(f,g,y){const _=en(f),b=c[_];if(b){if(b!==!0&&y<b.distanceSq){if(y===0)return c[_]=!0,s.splice(s.lastIndexOf(b),1),i(f,l,g);b.geometry=g,b.distanceSq=y}}else{if(y===0)return c[_]=!0,i(f,l,g);s.push(c[_]={feature:f,layer:l,geometry:g,distanceSq:y,callback:i})}},h=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,o,a,r,u,h?n.declutter?.[h]?.all().map(f=>f.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const n=this.getLayer(),r=n.getSource();if(!r)return!1;const i=e.viewHints[Is.ANIMATING],s=e.viewHints[Is.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&i||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,u=c.projection,h=c.resolution,f=e.pixelRatio,g=n.getRevision(),y=n.getRenderBuffer();let _=n.getRenderOrder();_===void 0&&(_=JAe);const b=c.center.slice(),T=oh(l,y*h),A=T.slice(),I=[T.slice()],P=u.getExtent();if(r.getWrapX()&&u.canWrapX()&&!ng(P,e.extent)){const he=Xn(P),Ie=Math.max(Xn(T)/2,he);T[0]=P[0]-Ie,T[2]=P[2]+Ie,fle(b,u);const ze=ule(I[0],u);ze[0]<P[0]&&ze[2]<P[2]?I.push([ze[0]+he,ze[1],ze[2]+he,ze[3]]):ze[0]>P[0]&&ze[2]>P[2]&&I.push([ze[0]-he,ze[1],ze[2]-he,ze[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==g&&this.renderedRenderOrder_==_&&this.renderedFrameDeclutter_===!!e.declutter&&ng(this.wrappedRenderedExtent_,T))return Kd(this.renderedExtent_,A)||(this.hitDetectionImageData_=null,this.renderedExtent_=A),this.renderedCenter_=b,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const M=new IIe(Hle(h,f),T,h,f);let V;for(let he=0,Ie=I.length;he<Ie;++he)r.loadFeatures(I[he],h,u);const C=tZ(h,f);let N=!0;const O=(he,Ie)=>{let ze;const Oe=he.getStyleFunction()||n.getStyleFunction();if(Oe&&(ze=Oe(he,h)),ze){const fe=this.renderFeature(he,C,ze,M,V,this.getLayer().getDeclutter(),Ie);N=N&&!fe}},L=bG(T),F=r.getFeaturesInExtent(L);_&&F.sort(_);for(let he=0,Ie=F.length;he<Ie;++he)O(F[he],he);this.renderedFeatures_=F,this.ready=N;const G=M.finish(),U=new OIe(T,h,f,r.getOverlaps(),G,n.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=g,this.renderedRenderOrder_=_,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=A,this.wrappedRenderedExtent_=T,this.renderedCenter_=b,this.renderedProjection_=u,this.renderedPixelRatio_=f,this.replayGroup_=U,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,r,i,s,o,a){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let c=0,u=r.length;c<u;++c)l=nZ(i,e,r[c],n,this.boundHandleStyleImageChange_,s,o,a)||l;else l=nZ(i,e,r,n,this.boundHandleStyleImageChange_,s,o,a);return l}}let dv=0;const Rs=1<<dv++,Ht=1<<dv++,Bs=1<<dv++,Si=1<<dv++,Cl=1<<dv++,ou=1<<dv++,IC=Math.pow(2,dv)-1,GG={[Rs]:"boolean",[Ht]:"number",[Bs]:"string",[Si]:"color",[Cl]:"number[]",[ou]:"size"},zIe=Object.keys(GG).map(Number).sort(sp);function GIe(t){return t in GG}function Cx(t){const e=[];for(const n of zIe)mS(t,n)&&e.push(GG[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function mS(t,e){return(t&e)===e}function ad(t,e){return t===e}class Gs{constructor(e,n){if(!GIe(e))throw new Error(`literal expressions must have a specific type, got ${Cx(e)}`);this.type=e,this.value=n}}class ace{constructor(e,n,...r){this.type=e,this.operator=n,this.args=r}}function UG(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function fo(t,e,n){switch(typeof t){case"boolean":{if(ad(e,Bs))return new Gs(Bs,t?"true":"false");if(!mS(e,Rs))throw new Error(`got a boolean, but expected ${Cx(e)}`);return new Gs(Rs,t)}case"number":{if(ad(e,ou))return new Gs(ou,$a(t));if(ad(e,Rs))return new Gs(Rs,!!t);if(ad(e,Bs))return new Gs(Bs,t.toString());if(!mS(e,Ht))throw new Error(`got a number, but expected ${Cx(e)}`);return new Gs(Ht,t)}case"string":{if(ad(e,Si))return new Gs(Si,NG(t));if(ad(e,Rs))return new Gs(Rs,!!t);if(!mS(e,Bs))throw new Error(`got a string, but expected ${Cx(e)}`);return new Gs(Bs,t)}}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(t.length===0)throw new Error("empty expression");if(typeof t[0]=="string")return QIe(t,e,n);for(const r of t)if(typeof r!="number")throw new Error("expected an array of numbers");if(ad(e,ou)){if(t.length!==2)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new Gs(ou,t)}if(ad(e,Si)){if(t.length===3)return new Gs(Si,[...t,1]);if(t.length===4)return new Gs(Si,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!mS(e,Cl))throw new Error(`got an array of numbers, but expected ${Cx(e)}`);return new Gs(Cl,t)}const Ae={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},UIe={[Ae.Get]:An($n(1,1/0),gZ),[Ae.Var]:An($n(1,1),BIe),[Ae.Has]:An($n(1,1/0),gZ),[Ae.Id]:An(WIe,f_),[Ae.Concat]:An($n(2,1/0),Sr(Bs)),[Ae.GeometryType]:An(HIe,f_),[Ae.LineMetric]:An(f_),[Ae.Resolution]:An(K6,f_),[Ae.Zoom]:An(K6,f_),[Ae.Time]:An(K6,f_),[Ae.Any]:An($n(2,1/0),Sr(Rs)),[Ae.All]:An($n(2,1/0),Sr(Rs)),[Ae.Not]:An($n(1,1),Sr(Rs)),[Ae.Equal]:An($n(2,2),Sr(IC)),[Ae.NotEqual]:An($n(2,2),Sr(IC)),[Ae.GreaterThan]:An($n(2,2),Sr(Ht)),[Ae.GreaterThanOrEqualTo]:An($n(2,2),Sr(Ht)),[Ae.LessThan]:An($n(2,2),Sr(Ht)),[Ae.LessThanOrEqualTo]:An($n(2,2),Sr(Ht)),[Ae.Multiply]:An($n(2,1/0),yZ),[Ae.Coalesce]:An($n(2,1/0),yZ),[Ae.Divide]:An($n(2,2),Sr(Ht)),[Ae.Add]:An($n(2,1/0),Sr(Ht)),[Ae.Subtract]:An($n(2,2),Sr(Ht)),[Ae.Clamp]:An($n(3,3),Sr(Ht)),[Ae.Mod]:An($n(2,2),Sr(Ht)),[Ae.Pow]:An($n(2,2),Sr(Ht)),[Ae.Abs]:An($n(1,1),Sr(Ht)),[Ae.Floor]:An($n(1,1),Sr(Ht)),[Ae.Ceil]:An($n(1,1),Sr(Ht)),[Ae.Round]:An($n(1,1),Sr(Ht)),[Ae.Sin]:An($n(1,1),Sr(Ht)),[Ae.Cos]:An($n(1,1),Sr(Ht)),[Ae.Atan]:An($n(1,2),Sr(Ht)),[Ae.Sqrt]:An($n(1,1),Sr(Ht)),[Ae.Match]:An($n(4,1/0),vZ,KIe),[Ae.Between]:An($n(3,3),Sr(Ht)),[Ae.Interpolate]:An($n(6,1/0),vZ,YIe),[Ae.Case]:An($n(3,1/0),qIe,XIe),[Ae.In]:An($n(2,2),ZIe),[Ae.Number]:An($n(1,1/0),Sr(IC)),[Ae.String]:An($n(1,1/0),Sr(IC)),[Ae.Array]:An($n(1,1/0),Sr(Ht)),[Ae.Color]:An($n(1,4),Sr(Ht)),[Ae.Band]:An($n(1,3),Sr(Ht)),[Ae.Palette]:An($n(2,2),JIe),[Ae.ToString]:An($n(1,1),Sr(Rs|Ht|Bs|Si))};function gZ(t,e,n){const r=t.length-1,i=new Array(r);for(let s=0;s<r;++s){const o=t[s+1];switch(typeof o){case"number":{i[s]=new Gs(Ht,o);break}case"string":{i[s]=new Gs(Bs,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&n.properties.add(String(o))}return i}function BIe(t,e,n){const r=t[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return n.variables.add(r),[new Gs(Bs,r)]}function WIe(t,e,n){n.featureId=!0}function HIe(t,e,n){n.geometryType=!0}function K6(t,e,n){n.mapState=!0}function f_(t,e,n){const r=t[0];if(t.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function $n(t,e){return function(n,r,i){const s=n[0],o=n.length-1;if(t===e){if(o!==t){const a=t===1?"":"s";throw new Error(`expected ${t} argument${a} for ${s}, got ${o}`)}}else if(o<t||o>e){const a=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`expected ${a} arguments for ${s}, got ${o}`)}}}function yZ(t,e,n){const r=t.length-1,i=new Array(r);for(let s=0;s<r;++s){const o=fo(t[s+1],e,n);i[s]=o}return i}function Sr(t){return function(e,n,r){const i=e.length-1,s=new Array(i);for(let o=0;o<i;++o){const a=fo(e[o+1],t,r);s[o]=a}return s}}function qIe(t,e,n){const r=t[0],i=t.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function vZ(t,e,n){const r=t[0],i=t.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function KIe(t,e,n){const r=t.length-1,i=Bs|Ht|Rs,s=fo(t[1],i,n),o=fo(t[t.length-1],e,n),a=new Array(r-2);for(let l=0;l<r-2;l+=2){try{const c=fo(t[l+2],s.type,n);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=fo(t[l+3],o.type,n);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[s,...a,o]}function YIe(t,e,n){const r=t[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new Gs(Ht,i);let o;try{o=fo(t[2],Ht,n)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(t.length-3);for(let l=0;l<a.length;l+=2){try{const c=fo(t[l+3],Ht,n);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=fo(t[l+4],e,n);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[s,o,...a]}function XIe(t,e,n){const r=fo(t[t.length-1],e,n),i=new Array(t.length-1);for(let s=0;s<i.length-1;s+=2){try{const o=fo(t[s+1],Rs,n);i[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{const o=fo(t[s+2],r.type,n);i[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return i[i.length-1]=r,i}function ZIe(t,e,n){let r=t[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=Bs}else i=Ht;const s=new Array(r.length);for(let a=0;a<s.length;a++)try{const l=fo(r[a],i,n);s[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[fo(t[1],i,n),...s]}function JIe(t,e,n){let r;try{r=fo(t[1],Ht,n)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const i=t[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let o=0;o<s.length;o++){let a;try{a=fo(i[o],Si,n)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof Gs))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=a}return[r,...s]}function An(...t){return function(e,n,r){const i=e[0];let s;for(let o=0;o<t.length;o++){const a=t[o](e,n,r);if(o==t.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");s=a}}return new ace(n,i,...s)}}function QIe(t,e,n){const r=t[0],i=UIe[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(t,e,n)}function BG(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return BG(t.getGeometries()[0]);default:return""}}function lce(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Rp(t,e,n){const r=fo(t,e,n);return xh(r)}function xh(t,e){if(t instanceof Gs){if(t.type===Si&&typeof t.value=="string"){const r=NG(t.value);return function(){return r}}return function(){return t.value}}const n=t.operator;switch(n){case Ae.Number:case Ae.String:case Ae.Coalesce:return ePe(t);case Ae.Get:case Ae.Var:case Ae.Has:return tPe(t);case Ae.Id:return r=>r.featureId;case Ae.GeometryType:return r=>r.geometryType;case Ae.Concat:{const r=t.args.map(i=>xh(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Ae.Resolution:return r=>r.resolution;case Ae.Any:case Ae.All:case Ae.Between:case Ae.In:case Ae.Not:return rPe(t);case Ae.Equal:case Ae.NotEqual:case Ae.LessThan:case Ae.LessThanOrEqualTo:case Ae.GreaterThan:case Ae.GreaterThanOrEqualTo:return nPe(t);case Ae.Multiply:case Ae.Divide:case Ae.Add:case Ae.Subtract:case Ae.Clamp:case Ae.Mod:case Ae.Pow:case Ae.Abs:case Ae.Floor:case Ae.Ceil:case Ae.Round:case Ae.Sin:case Ae.Cos:case Ae.Atan:case Ae.Sqrt:return iPe(t);case Ae.Case:return sPe(t);case Ae.Match:return oPe(t);case Ae.Interpolate:return aPe(t);case Ae.ToString:return lPe(t);default:throw new Error(`Unsupported operator ${n}`)}}function ePe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=xh(t.args[s]);switch(n){case Ae.Coalesce:return s=>{for(let o=0;o<r;++o){const a=i[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case Ae.Number:case Ae.String:return s=>{for(let o=0;o<r;++o){const a=i[o](s);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function tPe(t,e){const r=t.args[0].value;switch(t.operator){case Ae.Get:return i=>{const s=t.args;let o=i.properties[r];for(let a=1,l=s.length;a<l;++a){const u=s[a].value;o=o[u]}return o};case Ae.Var:return i=>i.variables[r];case Ae.Has:return i=>{const s=t.args;if(!(r in i.properties))return!1;let o=i.properties[r];for(let a=1,l=s.length;a<l;++a){const u=s[a].value;if(!o||!Object.hasOwn(o,u))return!1;o=o[u]}return!0};default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function nPe(t,e){const n=t.operator,r=xh(t.args[0]),i=xh(t.args[1]);switch(n){case Ae.Equal:return s=>r(s)===i(s);case Ae.NotEqual:return s=>r(s)!==i(s);case Ae.LessThan:return s=>r(s)<i(s);case Ae.LessThanOrEqualTo:return s=>r(s)<=i(s);case Ae.GreaterThan:return s=>r(s)>i(s);case Ae.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function rPe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=xh(t.args[s]);switch(n){case Ae.Any:return s=>{for(let o=0;o<r;++o)if(i[o](s))return!0;return!1};case Ae.All:return s=>{for(let o=0;o<r;++o)if(!i[o](s))return!1;return!0};case Ae.Between:return s=>{const o=i[0](s),a=i[1](s),l=i[2](s);return o>=a&&o<=l};case Ae.In:return s=>{const o=i[0](s);for(let a=1;a<r;++a)if(o===i[a](s))return!0;return!1};case Ae.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function iPe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=xh(t.args[s]);switch(n){case Ae.Multiply:return s=>{let o=1;for(let a=0;a<r;++a)o*=i[a](s);return o};case Ae.Divide:return s=>i[0](s)/i[1](s);case Ae.Add:return s=>{let o=0;for(let a=0;a<r;++a)o+=i[a](s);return o};case Ae.Subtract:return s=>i[0](s)-i[1](s);case Ae.Clamp:return s=>{const o=i[0](s),a=i[1](s);if(o<a)return a;const l=i[2](s);return o>l?l:o};case Ae.Mod:return s=>i[0](s)%i[1](s);case Ae.Pow:return s=>Math.pow(i[0](s),i[1](s));case Ae.Abs:return s=>Math.abs(i[0](s));case Ae.Floor:return s=>Math.floor(i[0](s));case Ae.Ceil:return s=>Math.ceil(i[0](s));case Ae.Round:return s=>Math.round(i[0](s));case Ae.Sin:return s=>Math.sin(i[0](s));case Ae.Cos:return s=>Math.cos(i[0](s));case Ae.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Ae.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function sPe(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=xh(t.args[i]);return i=>{for(let s=0;s<n-1;s+=2)if(r[s](i))return r[s+1](i);return r[n-1](i)}}function oPe(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=xh(t.args[i]);return i=>{const s=r[0](i);for(let o=1;o<n-1;o+=2)if(s===r[o](i))return r[o+1](i);return r[n-1](i)}}function aPe(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=xh(t.args[i]);return i=>{const s=r[0](i),o=r[1](i);let a,l;for(let c=2;c<n;c+=2){const u=r[c](i);let h=r[c+1](i);const f=Array.isArray(h);if(f&&(h=DAe(h)),u>=o)return c===2?h:f?cPe(s,o,a,l,u,h):gS(s,o,a,l,u,h);a=u,l=h}return l}}function lPe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=xh(t.args[s]);switch(n){case Ae.ToString:return s=>{const o=i[0](s);return t.args[0].type===Si?OG(o):o.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function gS(t,e,n,r,i,s){const o=i-n;if(o===0)return r;const a=e-n,l=t===1?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1);return r+l*(s-r)}function cPe(t,e,n,r,i,s){if(i-n===0)return r;const a=XX(r),l=XX(s);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const u=[gS(t,e,n,a[0],i,l[0]),gS(t,e,n,a[1],i,l[1]),a[2]+gS(t,e,n,0,i,c),gS(t,e,n,r[3],i,s[3])];return jAe(u)}function uPe(t){return!0}function hPe(t){const e=UG(),n=dPe(t,e),r=lce();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const o=i.getId();o!==void 0?r.featureId=o:r.featureId=null}return e.geometryType&&(r.geometryType=BG(i.getGeometry())),n(r)}}function _Z(t){const e=UG(),n=t.length,r=new Array(n);for(let o=0;o<n;++o)r[o]=c8(t[o],e);const i=lce(),s=new Array(n);return function(o,a){if(i.properties=o.getPropertiesInternal(),i.resolution=a,e.featureId){const c=o.getId();c!==void 0?i.featureId=c:i.featureId=null}let l=0;for(let c=0;c<n;++c){const u=r[c](i);u&&(s[l]=u,l+=1)}return s.length=l,s}}function dPe(t,e){const n=t.length,r=new Array(n);for(let i=0;i<n;++i){const s=t[i],o="filter"in s?Rp(s.filter,Rs,e):uPe;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=c8(s.style[c],e)}else a=[c8(s.style,e)];r[i]={filter:o,styles:a}}return function(i){const s=[];let o=!1;for(let a=0;a<n;++a){const l=r[a].filter;if(l(i)&&!(t[a].else&&o)){o=!0;for(const c of r[a].styles){const u=c(i);u&&s.push(u)}}}return s}}function c8(t,e){const n=Rk(t,"",e),r=Mk(t,"",e),i=fPe(t,e),s=pPe(t,e),o=vl(t,"z-index",e);if(!n&&!r&&!i&&!s&&!T1(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new xn;return function(l){let c=!0;if(n){const u=n(l);u&&(c=!1),a.setFill(u)}if(r){const u=r(l);u&&(c=!1),a.setStroke(u)}if(i){const u=i(l);u&&(c=!1),a.setText(u)}if(s){const u=s(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function Rk(t,e,n){let r;if(e+"fill-pattern-src"in t)r=vPe(t,e+"fill-",n);else{if(t[e+"fill-color"]==="none")return s=>null;r=WG(t,e+"fill-color",n)}if(!r)return null;const i=new Dn;return function(s){const o=r(s);return o===MG?null:(i.setColor(o),i)}}function Mk(t,e,n){const r=vl(t,e+"stroke-width",n),i=WG(t,e+"stroke-color",n);if(!r&&!i)return null;const s=Wf(t,e+"stroke-line-cap",n),o=Wf(t,e+"stroke-line-join",n),a=cce(t,e+"stroke-line-dash",n),l=vl(t,e+"stroke-line-dash-offset",n),c=vl(t,e+"stroke-miter-limit",n),u=new Mn;return function(h){if(i){const f=i(h);if(f===MG)return null;u.setColor(f)}if(r&&u.setWidth(r(h)),s){const f=s(h);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(f)}if(o){const f=o(h);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(f)}return a&&u.setLineDash(a(h)),l&&u.setLineDashOffset(l(h)),c&&u.setMiterLimit(c(h)),u}}function fPe(t,e){const n="text-",r=Wf(t,n+"value",e);if(!r)return null;const i=Rk(t,n,e),s=Rk(t,n+"background-",e),o=Mk(t,n,e),a=Mk(t,n+"background-",e),l=Wf(t,n+"font",e),c=vl(t,n+"max-angle",e),u=vl(t,n+"offset-x",e),h=vl(t,n+"offset-y",e),f=tw(t,n+"overflow",e),g=Wf(t,n+"placement",e),y=vl(t,n+"repeat",e),_=Y5(t,n+"scale",e),b=tw(t,n+"rotate-with-view",e),T=vl(t,n+"rotation",e),A=Wf(t,n+"align",e),I=Wf(t,n+"justify",e),P=Wf(t,n+"baseline",e),M=tw(t,n+"keep-upright",e),V=cce(t,n+"padding",e),C=X5(t,n+"declutter-mode"),N=new pc({declutterMode:C});return function(O){if(N.setText(r(O)),i&&N.setFill(i(O)),s&&N.setBackgroundFill(s(O)),o&&N.setStroke(o(O)),a&&N.setBackgroundStroke(a(O)),l&&N.setFont(l(O)),c&&N.setMaxAngle(c(O)),u&&N.setOffsetX(u(O)),h&&N.setOffsetY(h(O)),f&&N.setOverflow(f(O)),g){const L=g(O);if(L!=="point"&&L!=="line")throw new Error("Expected point or line for text-placement");N.setPlacement(L)}if(y&&N.setRepeat(y(O)),_&&N.setScale(_(O)),b&&N.setRotateWithView(b(O)),T&&N.setRotation(T(O)),A){const L=A(O);if(L!=="left"&&L!=="center"&&L!=="right"&&L!=="end"&&L!=="start")throw new Error("Expected left, right, center, start, or end for text-align");N.setTextAlign(L)}if(I){const L=I(O);if(L!=="left"&&L!=="right"&&L!=="center")throw new Error("Expected left, right, or center for text-justify");N.setJustify(L)}if(P){const L=P(O);if(L!=="bottom"&&L!=="top"&&L!=="middle"&&L!=="alphabetic"&&L!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");N.setTextBaseline(L)}return V&&N.setPadding(V(O)),M&&N.setKeepUpright(M(O)),N}}function pPe(t,e){return"icon-src"in t?mPe(t,e):"shape-points"in t?gPe(t,e):"circle-radius"in t?yPe(t,e):null}function mPe(t,e){const n="icon-",r=n+"src",i=uce(t[r],r),s=n4(t,n+"anchor",e),o=Y5(t,n+"scale",e),a=vl(t,n+"opacity",e),l=n4(t,n+"displacement",e),c=vl(t,n+"rotation",e),u=tw(t,n+"rotate-with-view",e),h=wZ(t,n+"anchor-origin"),f=bZ(t,n+"anchor-x-units"),g=bZ(t,n+"anchor-y-units"),y=bPe(t,n+"color"),_=xPe(t,n+"cross-origin"),b=wPe(t,n+"offset"),T=wZ(t,n+"offset-origin"),A=r4(t,n+"width"),I=r4(t,n+"height"),P=_Pe(t,n+"size"),M=X5(t,n+"declutter-mode"),V=new sI({src:i,anchorOrigin:h,anchorXUnits:f,anchorYUnits:g,color:y,crossOrigin:_,offset:b,offsetOrigin:T,height:I,width:A,size:P,declutterMode:M});return function(C){return a&&V.setOpacity(a(C)),l&&V.setDisplacement(l(C)),c&&V.setRotation(c(C)),u&&V.setRotateWithView(u(C)),o&&V.setScale(o(C)),s&&V.setAnchor(s(C)),V}}function gPe(t,e){const n="shape-",r=n+"points",i=n+"radius",s=u8(t[r],r),o=u8(t[i],i),a=Rk(t,n,e),l=Mk(t,n,e),c=Y5(t,n+"scale",e),u=n4(t,n+"displacement",e),h=vl(t,n+"rotation",e),f=tw(t,n+"rotate-with-view",e),g=r4(t,n+"radius2"),y=r4(t,n+"angle"),_=X5(t,n+"declutter-mode"),b=new K5({points:s,radius:o,radius2:g,angle:y,declutterMode:_});return function(T){return a&&b.setFill(a(T)),l&&b.setStroke(l(T)),u&&b.setDisplacement(u(T)),h&&b.setRotation(h(T)),f&&b.setRotateWithView(f(T)),c&&b.setScale(c(T)),b}}function yPe(t,e){const n="circle-",r=Rk(t,n,e),i=Mk(t,n,e),s=vl(t,n+"radius",e),o=Y5(t,n+"scale",e),a=n4(t,n+"displacement",e),l=vl(t,n+"rotation",e),c=tw(t,n+"rotate-with-view",e),u=X5(t,n+"declutter-mode"),h=new gs({radius:5,declutterMode:u});return function(f){return s&&h.setRadius(s(f)),r&&h.setFill(r(f)),i&&h.setStroke(i(f)),a&&h.setDisplacement(a(f)),l&&h.setRotation(l(f)),c&&h.setRotateWithView(c(f)),o&&h.setScale(o(f)),h}}function vl(t,e,n){if(!(e in t))return;const r=Rp(t[e],Ht,n);return function(i){return u8(r(i),e)}}function Wf(t,e,n){if(!(e in t))return null;const r=Rp(t[e],Bs,n);return function(i){return uce(r(i),e)}}function vPe(t,e,n){const r=Wf(t,e+"pattern-src",n),i=xZ(t,e+"pattern-offset",n),s=xZ(t,e+"pattern-size",n),o=WG(t,e+"color",n);return function(a){return{src:r(a),offset:i&&i(a),size:s&&s(a),color:o&&o(a)}}}function tw(t,e,n){if(!(e in t))return null;const r=Rp(t[e],Rs,n);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function WG(t,e,n){if(!(e in t))return null;const r=Rp(t[e],Si,n);return function(i){return hce(r(i),e)}}function cce(t,e,n){if(!(e in t))return null;const r=Rp(t[e],Cl,n);return function(i){return oI(r(i),e)}}function n4(t,e,n){if(!(e in t))return null;const r=Rp(t[e],Cl,n);return function(i){const s=oI(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function xZ(t,e,n){if(!(e in t))return null;const r=Rp(t[e],Cl,n);return function(i){return dce(r(i),e)}}function Y5(t,e,n){if(!(e in t))return null;const r=Rp(t[e],Cl|Ht,n);return function(i){return EPe(r(i),e)}}function r4(t,e){const n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function _Pe(t,e){const n=t[e];if(n!==void 0){if(typeof n=="number")return $a(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function xPe(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function wZ(t,e){const n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function bZ(t,e){const n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function wPe(t,e){const n=t[e];if(n!==void 0)return oI(n,e)}function X5(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function bPe(t,e){const n=t[e];if(n!==void 0)return hce(n,e)}function oI(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let r=0;r<n;++r)if(typeof t[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function uce(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function u8(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function hce(t,e){if(typeof t=="string")return t;const n=oI(t,e),r=n.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function dce(t,e){const n=oI(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}function EPe(t,e){return typeof t=="number"?t:dce(t,e)}const Mu={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function EZ(t,e,n){return(function(r,i,s,o,a){if(!r)return;if(!i&&!e)return r;const l=e?0:s[0]*i,c=e?0:s[1]*i,u=a?a[0]:0,h=a?a[1]:0;let f=t[0]+l/2+u,g=t[2]-l/2+u,y=t[1]+c/2+h,_=t[3]-c/2+h;f>g&&(f=(g+f)/2,g=f),y>_&&(y=(_+y)/2,_=y);let b=ri(r[0],f,g),T=ri(r[1],y,_);if(o&&n&&i){const A=30*i;b+=-A*Math.log(1+Math.max(0,f-r[0])/A)+A*Math.log(1+Math.max(0,r[0]-g)/A),T+=-A*Math.log(1+Math.max(0,y-r[1])/A)+A*Math.log(1+Math.max(0,r[1]-_)/A)}return[b,T]})}function SPe(t){return t}function fce(t){return Math.pow(t,3)}function ab(t){return 1-fce(1-t)}function TPe(t){return 3*t*t-2*t*t*t}function kPe(t){return t}function HG(t,e,n,r){const i=Xn(e)/n[0],s=Ms(e)/n[1];return r?Math.min(t,Math.max(i,s)):Math.min(t,Math.min(i,s))}function qG(t,e,n){let r=Math.min(t,e);const i=50;return r*=Math.log(1+i*Math.max(0,t/e-1))/i+1,n&&(r=Math.max(r,n),r/=Math.log(1+i*Math.max(0,n/t-1))/i+1),ri(r,n/2,e*2)}function APe(t,e,n,r){return e=e!==void 0?e:!0,(function(i,s,o,a){if(i!==void 0){const l=t[0],c=t[t.length-1],u=n?HG(l,n,o,r):l;if(a)return e?qG(i,u,c):ri(i,c,u);const h=Math.min(u,i),f=Math.floor(L5(t,h,s));return t[f]>u&&f<t.length-1?t[f+1]:t[f]}})}function IPe(t,e,n,r,i,s){return r=r!==void 0?r:!0,n=n!==void 0?n:0,(function(o,a,l,c){if(o!==void 0){const u=i?HG(e,i,l,s):e;if(c)return r?qG(o,u,n):ri(o,n,u);const h=1e-9,f=Math.ceil(Math.log(e/u)/Math.log(t)-h),g=-a*(.5-h)+.5,y=Math.min(u,o),_=Math.floor(Math.log(e/y)/Math.log(t)+g),b=Math.max(f,_),T=e/Math.pow(t,b);return ri(T,n,u)}})}function SZ(t,e,n,r,i){return n=n!==void 0?n:!0,(function(s,o,a,l){if(s!==void 0){const c=r?HG(t,r,a,i):t;return!n||!l?ri(s,e,c):qG(s,c,e)}})}function KG(t){if(t!==void 0)return 0}function TZ(t){if(t!==void 0)return t}function PPe(t){const e=2*Math.PI/t;return(function(n,r){if(r)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n})}function CPe(t){const e=cu(5);return(function(n,r){return r||n===void 0?n:Math.abs(n)<=e?0:n})}const RPe=42,YG=256,Y6=0;class md extends Yd{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=xG(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&wle(),e.center&&(e.center=Li(e.center,this.projection_)),e.extent&&(e.extent=ah(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const n=Object.assign({},e);for(const a in Mu)delete n[a];this.setProperties(n,!0);const r=NPe(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=MPe(e),s=r.constraint,o=OPe(e);this.constraints_={center:i,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),o=s/2*(i[3]-n[3]+n[1]-i[1]),a=s/2*(i[0]-n[0]+n[2]-i[2]);this.setCenterInternal([r[0]+o,r[1]-a])}}getUpdatedOptions_(e){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let r=0;r<n.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Li(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Li(i.anchor,this.getProjection())),n[r]=i}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,r;n>1&&typeof arguments[n-1]=="function"&&(r=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const u=arguments[i];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(i===n){r&&PC(r,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;i<n;++i){const u=arguments[i],h={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||TPe,callback:r};if(u.center&&(h.sourceCenter=o,h.targetCenter=u.center.slice(),o=h.targetCenter),u.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(u.zoom),a=h.targetResolution):u.resolution&&(h.sourceResolution=a,h.targetResolution=u.resolution,a=h.targetResolution),u.rotation!==void 0){h.sourceRotation=l;const f=Eg(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+f,l=h.targetRotation}LPe(h)?h.complete=!0:s+=h.duration,c.push(h)}this.animations_.push(c),this.setHint(Is.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Is.ANIMATING]>0}getInteracting(){return this.hints_[Is.INTERACTING]>0}cancelAnimations(){this.setHint(Is.ANIMATING,-this.hints_[Is.ANIMATING]);let e;for(let n=0,r=this.animations_.length;n<r;++n){const i=this.animations_[n];if(i[0].callback&&PC(i[0].callback,!1),!e)for(let s=0,o=i.length;s<o;++s){const a=i[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let n=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l.complete)continue;const c=e-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const h=l.easing(u);if(l.sourceCenter){const f=l.sourceCenter[0],g=l.sourceCenter[1],y=l.targetCenter[0],_=l.targetCenter[1];this.nextCenter_=l.targetCenter;const b=f+h*(y-f),T=g+h*(_-g);this.targetCenter_=[b,T]}if(l.sourceResolution&&l.targetResolution){const f=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const g=this.getViewportSize_(this.getRotation()),y=this.constraints_.resolution(f,0,g,!0);this.targetCenter_=this.calculateCenterZoom(y,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=h===1?Eg(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const g=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(g,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(s){this.animations_[r]=null,this.setHint(Is.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=i[0].callback;o&&PC(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-n[0],i[1]-n[1]],mG(r,e-this.getRotation()),Ake(r,n)),r}calculateCenterZoom(e,n){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const o=n[0]-e*(n[0]-i[0])/s,a=n[1]-e*(n[1]-i[1])/s;r=[o,a]}return r}getViewportSize_(e){const n=this.viewportSize_;if(e){const r=n[0],i=n[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&P1(e,this.getProjection())}getCenterInternal(){return this.get(Mu.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const n=this.calculateExtentInternal(e);return bG(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();ur(n,"The view center is not defined");const r=this.getResolution();ur(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return ur(i!==void 0,"The view rotation is not defined"),U3(n,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Mu.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(ah(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();const r=Xn(e)/n[0],i=Ms(e)/n[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return(function(s){return n/Math.pow(e,s*i)})}getRotation(){return this.get(Mu.ROTATION)}getValueForResolutionFunction(e){const n=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/n;return(function(o){return Math.log(r/o)/n/s})}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e);const r=this.padding_;return r&&(n=[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]),n}getState(){const e=this.getProjection(),n=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();i=X6(i,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],n,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,r,i;if(this.resolutions_){const s=L5(this.resolutions_,e,1);n=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=ri(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(r,ri(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let r;if(ur(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ur(!ib(e),"Cannot fit empty extent provided as `geometry`");const i=ah(e,this.getProjection());r=iZ(i)}else if(e.getType()==="Circle"){const i=ah(e.getExtent(),this.getProjection());r=iZ(i),r.rotate(this.getRotation(),vh(i))}else r=e;this.fitInternal(r,n)}rotatedExtentForGeometry(e){const n=this.getRotation(),r=Math.cos(n),i=Math.sin(-n),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let h=0,f=s.length;h<f;h+=o){const g=s[h]*r-s[h+1]*i,y=s[h]*i+s[h+1]*r;a=Math.min(a,g),l=Math.min(l,y),c=Math.max(c,g),u=Math.max(u,y)}return[a,l,c,u]}fitInternal(e,n){n=n||{};let r=n.size;r||(r=this.getViewportSizeMinusPadding_());const i=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),h=Math.cos(c),f=vh(a);f[0]+=(i[1]-i[3])/2*l,f[1]+=(i[0]-i[2])/2*l;const g=f[0]*h-f[1]*u,y=f[1]*h+f[0]*u,_=this.getConstrainedCenter([g,y],l),b=n.callback?n.callback:wk;n.duration!==void 0?this.animateInternal({resolution:l,center:_,duration:n.duration,easing:n.easing},b):(this.targetResolution_=l,this.targetCenter_=_,this.applyTargetState_(!1,!0),PC(b,!0))}centerOn(e,n,r){this.centerOnInternal(Li(e,this.getProjection()),n,r)}centerOnInternal(e,n,r){this.setCenterInternal(X6(e,n,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,r,i){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-r),l=X6(e,i,[a[0]/2+o[3],a[1]/2+o[0]],n,r);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const n=P1(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){const n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&Li(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=Li(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);n&&(this.targetCenter_=this.calculateCenterRotate(i,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Li(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){const r=this.getAnimating()||this.getInteracting()||n,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,s,r),a=this.constraints_.center(this.targetCenter_,o,s,r,this.calculateCenterShift(this.targetCenter_,o,i,s));this.get(Mu.ROTATION)!==i&&this.set(Mu.ROTATION,i),this.get(Mu.RESOLUTION)!==o&&(this.set(Mu.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Mu.CENTER)||!Ca(this.get(Mu.CENTER),a))&&this.set(Mu.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,r){e=e!==void 0?e:200;const i=n||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,i,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Ca(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:ab,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Is.INTERACTING,1)}endInteraction(e,n,r){r=r&&Li(r,this.getProjection()),this.endInteractionInternal(e,n,r)}endInteractionInternal(e,n,r){this.getInteracting()&&(this.setHint(Is.INTERACTING,-1),this.resolveConstraints(e,n,r))}getConstrainedCenter(e,n){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),r)}getConstrainedZoom(e,n){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,n))}getConstrainedResolution(e,n){n=n||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,r)}}function PC(t,e){setTimeout(function(){t(e)},0)}function MPe(t){if(t.extent!==void 0){const n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return EZ(t.extent,t.constrainOnlyCenter,n)}const e=xG(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,EZ(n,!1,!1)}return SPe}function NPe(t){let e,n,r,o=t.minZoom!==void 0?t.minZoom:Y6,a=t.maxZoom!==void 0?t.maxZoom:28;const l=t.zoomFactor!==void 0?t.zoomFactor:2,c=t.multiWorld!==void 0?t.multiWorld:!1,u=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,h=t.showFullExtent!==void 0?t.showFullExtent:!1,f=xG(t.projection,"EPSG:3857"),g=f.getExtent();let y=t.constrainOnlyCenter,_=t.extent;if(!c&&!_&&f.isGlobal()&&(y=!1,_=g),t.resolutions!==void 0){const b=t.resolutions;n=b[o],r=b[a]!==void 0?b[a]:b[b.length-1],t.constrainResolution?e=APe(b,u,!y&&_,h):e=SZ(n,r,u,!y&&_,h)}else{const T=(g?Math.max(Xn(g),Ms(g)):360*i2.degrees/f.getMetersPerUnit())/YG/Math.pow(2,Y6),A=T/Math.pow(2,28-Y6);n=t.maxResolution,n!==void 0?o=0:n=T/Math.pow(l,o),r=t.minResolution,r===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?r=n/Math.pow(l,a):r=T/Math.pow(l,a):r=A),a=o+Math.floor(Math.log(n/r)/Math.log(l)),r=n/Math.pow(l,a-o),t.constrainResolution?e=IPe(l,n,r,u,!y&&_,h):e=SZ(n,r,u,!y&&_,h)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:o,zoomFactor:l}}function OPe(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const n=t.constrainRotation;return n===void 0||n===!0?CPe():n===!1?TZ:typeof n=="number"?PPe(n):TZ}return KG}function LPe(t){return!(t.sourceCenter&&t.targetCenter&&!Ca(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function X6(t,e,n,r,i){const s=Math.cos(-i);let o=Math.sin(-i),a=t[0]*s-t[1]*o,l=t[1]*s+t[0]*o;a+=(e[0]/2-n[0])*r,l+=(n[1]-e[1]/2)*r,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}const kr={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class pce extends Yd{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[kr.OPACITY]=e.opacity!==void 0?e.opacity:1,ur(typeof n[kr.OPACITY]=="number","Layer opacity must be a number"),n[kr.VISIBLE]=e.visible!==void 0?e.visible:!0,n[kr.Z_INDEX]=e.zIndex,n[kr.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[kr.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[kr.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[kr.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const n=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return n.opacity=ri(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=r===void 0&&!n.managed?1/0:r,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return Sn()}getLayerStatesArray(e){return Sn()}getExtent(){return this.get(kr.EXTENT)}getMaxResolution(){return this.get(kr.MAX_RESOLUTION)}getMinResolution(){return this.get(kr.MIN_RESOLUTION)}getMinZoom(){return this.get(kr.MIN_ZOOM)}getMaxZoom(){return this.get(kr.MAX_ZOOM)}getOpacity(){return this.get(kr.OPACITY)}getSourceState(){return Sn()}getVisible(){return this.get(kr.VISIBLE)}getZIndex(){return this.get(kr.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(kr.EXTENT,e)}setMaxResolution(e){this.set(kr.MAX_RESOLUTION,e)}setMinResolution(e){this.set(kr.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(kr.MAX_ZOOM,e)}setMinZoom(e){this.set(kr.MIN_ZOOM,e)}setOpacity(e){ur(typeof e=="number","Layer opacity must be a number"),this.set(kr.OPACITY,e)}setVisible(e){this.set(kr.VISIBLE,e)}setZIndex(e){this.set(kr.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class aI extends pce{constructor(e){const n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(kr.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(kr.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ni(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Yn(e,En.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof md?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&r&&(n.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(n.layerStatesArray){if(i=n.layerStatesArray.find(o=>o.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return XG(i,n.viewState)&&(!s||la(s,n.extent))}getAttributions(e){if(!this.isVisible(e))return[];const n=this.getSource()?.getAttributions();if(!n)return[];const r=e instanceof md?e.getViewStateAndExtent():e;let i=n(r);return Array.isArray(i)||(i=[i]),i}render(e,n){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,n){}renderDeferred(e){const n=this.getRenderer();n&&n.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(kr.MAP,e)}getMapInternal(){return this.get(kr.MAP)}setMap(e){this.mapPrecomposeKey_&&(ni(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ni(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Yn(e,uo.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Yn(this,En.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const n=e.frameState.layerStatesArray,r=this.getLayerState(!1);ur(!n.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(r)}setSource(e){this.set(kr.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function XG(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}const kZ={RENDER_ORDER:"renderOrder"};class Z5 extends aI{constructor(e){e=e||{};const n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(kZ.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,n){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new tce(9)),this.getRenderer().renderDeclutter(e,n)}setRenderOrder(e){this.set(kZ.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?nce:e;const n=DPe(e);this.styleFunction_=e===null?void 0:xIe(n),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function DPe(t){if(t===void 0)return nce;if(!t)return null;if(typeof t=="function"||t instanceof xn)return t;if(!Array.isArray(t))return _Z([t]);if(t.length===0)return[];const e=t.length,n=t[0];if(n instanceof xn){const i=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!(o instanceof xn))throw new Error("Expected a list of style instances");i[s]=o}return i}if("style"in n){const i=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");i[s]=o}return hPe(i)}return _Z(t)}class Ll extends Z5{constructor(e){super(e)}createRenderer(){return new VIe(this)}}const cm={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class zm extends Ac{constructor(e,n){super(e),this.layer=n}}const Z6={LAYERS:"layers"};let J5=class mce extends pce{constructor(e){e=e||{};const n=Object.assign({},e);delete n.layers;let r=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Z6.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new ja(r.slice(),{unique:!0}):ur(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new ja(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ni),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Yn(e,Cs.ADD,this.handleLayersAdd_,this),Yn(e,Cs.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(ni);lv(this.listenerKeys_);const n=e.getArray();for(let r=0,i=n.length;r<i;r++){const s=n[r];this.registerLayerListeners_(s),this.dispatchEvent(new zm(cm.ADDLAYER,s))}this.changed()}registerLayerListeners_(e){const n=[Yn(e,n2.PROPERTYCHANGE,this.handleLayerChange_,this),Yn(e,En.CHANGE,this.handleLayerChange_,this)];e instanceof mce&&n.push(Yn(e,cm.ADDLAYER,this.handleLayerGroupAdd_,this),Yn(e,cm.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[en(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new zm(cm.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new zm(cm.REMOVELAYER,e.layer))}handleLayersAdd_(e){const n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new zm(cm.ADDLAYER,n)),this.changed()}handleLayersRemove_(e){const n=e.element,r=en(n);this.listenerKeys_[r].forEach(ni),delete this.listenerKeys_[r],this.dispatchEvent(new zm(cm.REMOVELAYER,n)),this.changed()}getLayers(){return this.get(Z6.LAYERS)}setLayers(e){const n=this.getLayers();if(n){const r=n.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new zm(cm.REMOVELAYER,r[i]))}this.set(Z6.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){const n=e!==void 0?e:[],r=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let o=r,a=n.length;o<a;o++){const l=n[o];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=op(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=s)}return n}getSourceState(){return"ready"}};const hn={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function gce(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function h8(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}const i4=34962,ZG=34963,jPe=35044,J6=35048,$Pe=5121,FPe=5123,VPe=5125,yce=5126,AZ=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function zPe(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!SAe},e);const n=AZ.length;for(let r=0;r<n;++r)try{const i=t.getContext(AZ[r],e);if(i)return i}catch{}return null}const GPe={STATIC_DRAW:jPe};class Q6{constructor(e,n){this.array_=null,this.type_=e,ur(e===i4||e===ZG,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=n!==void 0?n:GPe.STATIC_DRAW}ofSize(e){return this.array_=new(CC(this.type_))(e),this}fromArray(e){return this.array_=CC(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(CC(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}setArray(e){const n=CC(this.type_);if(!(e instanceof n))throw new Error(`Expected ${n}`);this.array_=e}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function CC(t){switch(t){case i4:return Float32Array;case ZG:return Uint32Array;default:return Float32Array}}const RC={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},UPe=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,BPe=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class IZ{constructor(e){this.gl_=e.webGlContext;const n=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer(),this.depthBuffer_=n.createRenderbuffer();const r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,e.vertexShader||UPe),n.compileShader(r);const i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(i,e.fragmentShader||BPe),n.compileShader(i),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,r),n.attachShader(this.renderTargetProgram_,i),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array(s),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(o=>{this.uniforms_.push({value:e.uniforms[o],location:n.getUniformLocation(this.renderTargetProgram_,o)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(e){const n=this.getGL(),r=[n.drawingBufferWidth*this.scaleRatio_,n.drawingBufferHeight*this.scaleRatio_];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.bindRenderbuffer(n.RENDERBUFFER,this.getDepthBuffer()),n.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const i=0,s=n.RGBA,o=0,a=n.RGBA,l=n.UNSIGNED_BYTE,c=null;n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),n.texImage2D(n.TEXTURE_2D,i,s,r[0],r[1],o,a,l,c),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.renderTargetTexture_,0),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[0],r[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer_)}}apply(e,n,r,i){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,n?n.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!n){const l=en(s.canvas);if(!e.renderTargets[l]){const c=s.getContextAttributes();c&&c.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),r&&r(s,e),s.drawArrays(s.TRIANGLES,0,6),i&&i(s,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const n=this.getGL();let r,i=1;this.uniforms_.forEach(function(s){if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof ImageData)s.texture||(s.texture=n.createTexture()),n.activeTexture(n[`TEXTURE${i}`]),n.bindTexture(n.TEXTURE_2D,s.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,r.width,r.height,0,n.UNSIGNED_BYTE,new Uint8Array(r.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.uniform1i(s.location,i++);else if(Array.isArray(r))switch(r.length){case 2:n.uniform2f(s.location,r[0],r[1]);return;case 3:n.uniform3f(s.location,r[0],r[1],r[2]);return;case 4:n.uniform4f(s.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(s.location,r)})}}const Ef={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Io={UNSIGNED_BYTE:$Pe,UNSIGNED_SHORT:FPe,UNSIGNED_INT:VPe,FLOAT:yce},s4={};function PZ(t){return"shared/"+t}let CZ=0;function WPe(){const t="unique/"+CZ;return CZ+=1,t}function HPe(t){let e=s4[t];if(!e){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0",e={users:0,context:zPe(n)},s4[t]=e}return e.users+=1,e.context}function qPe(t){const e=s4[t];if(!e||(e.users-=1,e.users>0))return;const n=e.context,r=n.getExtension("WEBGL_lose_context");r&&r.loseContext();const i=n.canvas;i.width=1,i.height=1,delete s4[t]}class KPe extends ZA{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?PZ(e.canvasCacheKey):WPe(),this.gl_=HPe(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const n=this.gl_.canvas;n.addEventListener(RC.LOST,this.boundHandleWebGLContextLost_),n.addEventListener(RC.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Hs(),this.offsetScaleMatrix_=Hs(),this.tmpMat4_=gce(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(r=>new IZ({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new IZ({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now(),this.maxAttributeCount_=this.gl_.getParameter(this.gl_.MAX_VERTEX_ATTRIBS)}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const n in e)this.uniforms_.push({name:n,value:e[n]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===PZ(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const n=this.gl_.getExtension(e);return this.extensionCache_[e]=n,n}getInstancedRenderingExtension_(){const e=this.getExtension("ANGLE_instanced_arrays");return ur(!!e,"WebGL extension 'ANGLE_instanced_arrays' is required for vector rendering"),e}bindBuffer(e){const n=this.gl_,r=en(e);let i=this.bufferCache_[r];if(!i){const s=n.createBuffer();i={buffer:e,webGlBuffer:s},this.bufferCache_[r]=i}n.bindBuffer(e.getType(),i.webGlBuffer)}flushBufferData(e){const n=this.gl_;this.bindBuffer(e),n.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const n=en(e);delete this.bufferCache_[n]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(RC.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(RC.RESTORED,this.boundHandleWebGLContextRestored_),qPe(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,n,r){const i=this.gl_,s=this.getCanvas(),o=e.size,a=e.pixelRatio;(s.width!==o[0]*a||s.height!==o[1]*a)&&(s.width=o[0]*a,s.height=o[1]*a,s.style.width=o[0]+"px",s.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),r?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindFrameBuffer(e,n){const r=this.getGL();r.bindFramebuffer(r.FRAMEBUFFER,e),n&&r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0)}bindInitialFrameBuffer(){const e=this.getGL(),n=this.postProcessPasses_[0].getFrameBuffer();e.bindFramebuffer(e.FRAMEBUFFER,n);const r=this.postProcessPasses_[0].getRenderTargetTexture();e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)}bindTexture(e,n,r){const i=this.gl_;i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,e),i.uniform1i(this.getUniformLocation(r),n)}bindAttribute(e,n,r){const i=this.getGL();this.bindBuffer(e);const s=this.getAttributeLocation(n);i.enableVertexAttribArray(s),i.vertexAttribPointer(s,r,i.FLOAT,!1,0,0)}prepareDrawToRenderTarget(e,n,r,i){const s=this.gl_,o=n.getSize();s.bindFramebuffer(s.FRAMEBUFFER,n.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,n.getDepthbuffer()),s.viewport(0,0,o[0],o[1]),s.bindTexture(s.TEXTURE_2D,n.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,r?s.ZERO:s.ONE_MINUS_SRC_ALPHA),i?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(e,n){const r=this.gl_;this.getExtension("OES_element_index_uint");const i=r.UNSIGNED_INT,s=4,o=n-e,a=e*s;r.drawElements(r.TRIANGLES,o,i,a)}drawElementsInstanced(e,n,r){const i=this.gl_;this.getExtension("OES_element_index_uint");const s=this.getInstancedRenderingExtension_(),o=i.UNSIGNED_INT,a=4,l=n-e,c=e*a;s.drawElementsInstancedANGLE(i.TRIANGLES,l,o,c,r);for(let u=0;u<this.maxAttributeCount_;u++)s.vertexAttribDivisorANGLE(u,0)}finalizeDraw(e,n,r){for(let i=0,s=this.postProcessPasses_.length;i<s;i++)i===s-1?this.postProcessPasses_[i].apply(e,null,n,r):this.postProcessPasses_[i].apply(e,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const n=e.size,r=e.viewState.rotation,i=e.pixelRatio;this.setUniformFloatValue(Ef.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(Ef.ZOOM,e.viewState.zoom),this.setUniformFloatValue(Ef.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(Ef.PIXEL_RATIO,i),this.setUniformFloatVec2(Ef.VIEWPORT_SIZE_PX,[n[0],n[1]]),this.setUniformFloatValue(Ef.ROTATION,r)}applyHitDetectionUniform(e){const n=this.getUniformLocation(Ef.HIT_DETECTION);this.getGL().uniform1i(n,e?1:0),e&&this.setUniformFloatValue(Ef.PIXEL_RATIO,.5)}applyUniforms(e){const n=this.gl_;let r,i=0;this.uniforms_.forEach(s=>{if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!s.texture?(s.prevValue=void 0,s.texture=r):s.texture||(s.prevValue=void 0,s.texture=n.createTexture()),this.bindTexture(s.texture,i,s.name),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);const o=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&o&&s.prevValue!==r&&(s.prevValue=r,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)),i++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(s.name,h8(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:n.uniform2f(this.getUniformLocation(s.name),r[0],r[1]);return;case 3:n.uniform3f(this.getUniformLocation(s.name),r[0],r[1],r[2]);return;case 4:n.uniform4f(this.getUniformLocation(s.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(this.getUniformLocation(s.name),r)})}useProgram(e,n){this.disableAllAttributes_(),this.gl_.useProgram(e),this.currentProgram_=e,n&&(this.applyFrameState(n),this.applyUniforms(n))}compileShader(e,n){const r=this.gl_,i=r.createShader(n);return r.shaderSource(i,e),r.compileShader(i),i}getProgram(e,n){const r=this.gl_,i=this.compileShader(e,r.FRAGMENT_SHADER),s=this.compileShader(n,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,i),r.attachShader(o,s),r.linkProgram(o),!r.getShaderParameter(i,r.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${r.getShaderInfoLog(i)}`;throw new Error(a)}if(r.deleteShader(i),!r.getShaderParameter(s,r.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${r.getShaderInfoLog(s)}`;throw new Error(a)}if(r.deleteShader(s),!r.getProgramParameter(o,r.LINK_STATUS)){const a=`GL program linking failed: ${r.getProgramInfoLog(o)}`;throw new Error(a)}return o}getUniformLocation(e){const n=en(this.currentProgram_);return this.uniformLocationsByProgram_[n]===void 0&&(this.uniformLocationsByProgram_[n]={}),this.uniformLocationsByProgram_[n][e]===void 0&&(this.uniformLocationsByProgram_[n][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[n][e]}getAttributeLocation(e){const n=en(this.currentProgram_);return this.attribLocationsByProgram_[n]===void 0&&(this.attribLocationsByProgram_[n]={}),this.attribLocationsByProgram_[n][e]===void 0&&(this.attribLocationsByProgram_[n][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[n][e]}makeProjectionTransform(e,n){const r=e.size,i=e.viewState.rotation,s=e.viewState.resolution,o=e.viewState.center;return mu(n,0,0,2/(s*r[0]),2/(s*r[1]),-i,-o[0],-o[1]),n}setUniformFloatValue(e,n){this.gl_.uniform1f(this.getUniformLocation(e),n)}setUniformFloatVec2(e,n){this.gl_.uniform2fv(this.getUniformLocation(e),n)}setUniformFloatVec4(e,n){this.gl_.uniform4fv(this.getUniformLocation(e),n)}setUniformMatrixValue(e,n){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,n)}disableAllAttributes_(){for(let e=0;e<this.maxAttributeCount_;e++)this.gl_.disableVertexAttribArray(e)}enableAttributeArray_(e,n,r,i,s,o){const a=this.getAttributeLocation(e);a<0||(this.gl_.enableVertexAttribArray(a),this.gl_.vertexAttribPointer(a,n,r,!1,i,s),o&&this.getInstancedRenderingExtension_().vertexAttribDivisorANGLE(a,1))}enableAttributes_(e,n){const r=YPe(e);let i=0;for(let s=0;s<e.length;s++){const o=e[s];o.name&&this.enableAttributeArray_(o.name,o.size,o.type||yce,r,i,n),i+=o.size*vce(o.type)}}enableAttributes(e){this.enableAttributes_(e,!1)}enableAttributesInstanced(e){this.enableAttributes_(e,!0)}handleWebGLContextLost(e){lv(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,n,r,i){const s=this.gl_;r=r||s.createTexture();const o=i?s.NEAREST:s.LINEAR;s.bindTexture(s.TEXTURE_2D,r),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE);const a=0,l=s.RGBA,c=0,u=s.RGBA,h=s.UNSIGNED_BYTE;return n instanceof Uint8Array?s.texImage2D(s.TEXTURE_2D,a,l,e[0],e[1],c,u,h,n):n?s.texImage2D(s.TEXTURE_2D,a,l,u,h,n):s.texImage2D(s.TEXTURE_2D,a,l,e[0],e[1],c,u,h,null),r}}function YPe(t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];e+=r.size*vce(r.type)}return e}function vce(t){switch(t){case Io.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Io.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Io.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Io.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class JG extends JA{constructor(e,n,r){super(),r=r||{},this.tileCoord=e,this.state=n,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(En.CHANGE)}release(){this.setState(hn.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==hn.EMPTY){if(this.state!==hn.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Sn()}getAlpha(e,n){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=n,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=n-r+1e3/60;return i>=this.transition_?1:fce(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function d8(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const XPe=new Error("disposed"),ZPe=[256,256];class RZ extends JG{constructor(e){const n=hn.IDLE;super(e.tileCoord,n,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=d8(this.data_);return e?[e.width,e.height]:ZPe}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==hn.IDLE&&this.state!==hn.ERROR)return;this.state=hn.LOADING,this.changed();const e=this;this.loader_().then(function(n){e.data_=n,e.state=hn.LOADED,e.changed()}).catch(function(n){e.error_=n,e.state=hn.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(XPe),this.controller_=null),super.disposeInternal()}}class _ce extends JG{constructor(e,n,r,i,s,o){super(e,n,o),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_,uc?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,i!==null&&(this.image_.crossOrigin=i)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=hn.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=hn.ERROR,this.unlistenImage_(),this.image_=JPe(),this.changed()}handleImageLoad_(){if(uc)this.state=hn.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=hn.LOADED:this.state=hn.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==hn.ERROR&&(this.state=hn.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==hn.IDLE&&(this.state=hn.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=$Ae(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function JPe(){const t=Os(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}let ej;const nw=[];function MZ(t,e,n,r,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(r,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(n,i)),t.restore()}function tj(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function QPe(){if(ej===void 0){const t=Os(6,6,nw);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",MZ(t,4,5,4,0),MZ(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;ej=tj(e,0)||tj(e,4)||tj(e,8),W5(t),nw.push(t.canvas)}return ej}function o4(t,e,n,r){const i=ob(n,e,t);let s=K3(e,r,n);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=t.getMetersPerUnit();a!==void 0&&(s/=a);const l=t.getExtent();if(!l||k1(l,i)){const c=K3(t,s,i)/s;isFinite(c)&&c>0&&(s/=c)}return s}function eCe(t,e,n,r){const i=vh(n);let s=o4(t,e,i,r);return(!isFinite(s)||s<=0)&&fG(n,function(o){return s=o4(t,e,o,r),isFinite(s)&&s>0}),s}function xce(t,e,n,r,i,s,o,a,l,c,u,h,f,g){const y=Os(Math.round(n*t),Math.round(n*e),nw);if(h||(y.imageSmoothingEnabled=!1),l.length===0)return y.canvas;y.scale(n,n);function _(M){return Math.round(M*n)/n}y.globalCompositeOperation="lighter";const b=Wa();l.forEach(function(M,V,C){dG(b,M.extent)});let T;const A=n/r,I=(h?1:1+Math.pow(2,-24))/A;(!f||l.length!==1||c!==0)&&(T=Os(Math.round(Xn(b)*A),Math.round(Ms(b)*A),nw),h||(T.imageSmoothingEnabled=!1),l.forEach(function(M,V,C){if(M.image.width>0&&M.image.height>0){if(M.clipExtent){T.save();const G=(M.clipExtent[0]-b[0])*A,U=-(M.clipExtent[3]-b[3])*A,he=Xn(M.clipExtent)*A,Ie=Ms(M.clipExtent)*A;T.rect(h?G:Math.round(G),h?U:Math.round(U),h?he:Math.round(G+he)-Math.round(G),h?Ie:Math.round(U+Ie)-Math.round(U)),T.clip()}const N=(M.extent[0]-b[0])*A,O=-(M.extent[3]-b[3])*A,L=Xn(M.extent)*A,F=Ms(M.extent)*A;T.drawImage(M.image,c,c,M.image.width-2*c,M.image.height-2*c,h?N:Math.round(N),h?O:Math.round(O),h?L:Math.round(N+L)-Math.round(N),h?F:Math.round(O+F)-Math.round(O)),M.clipExtent&&T.restore()}}));const P=uv(o);return a.getTriangles().forEach(function(M,V,C){const N=M.source,O=M.target;let L=N[0][0],F=N[0][1],G=N[1][0],U=N[1][1],he=N[2][0],Ie=N[2][1];const ze=_((O[0][0]-P[0])/s),Oe=_(-(O[0][1]-P[1])/s),fe=_((O[1][0]-P[0])/s),ge=_(-(O[1][1]-P[1])/s),Se=_((O[2][0]-P[0])/s),Z=_(-(O[2][1]-P[1])/s),W=L,ne=F;L=0,F=0,G-=W,U-=ne,he-=W,Ie-=ne;const ie=[[G,U,0,0,fe-ze],[he,Ie,0,0,Se-ze],[0,0,G,U,ge-Oe],[0,0,he,Ie,Z-Oe]],le=kke(ie);if(!le)return;if(y.save(),y.beginPath(),QPe()||!h){y.moveTo(fe,ge);const qe=4,Ke=ze-fe,ke=Oe-ge;for(let be=0;be<qe;be++)y.lineTo(fe+_((be+1)*Ke/qe),ge+_(be*ke/(qe-1))),be!=qe-1&&y.lineTo(fe+_((be+1)*Ke/qe),ge+_((be+1)*ke/(qe-1)));y.lineTo(Se,Z)}else y.moveTo(fe,ge),y.lineTo(ze,Oe),y.lineTo(Se,Z);y.clip(),y.transform(le[0],le[2],le[1],le[3],ze,Oe),y.translate(b[0]-W,b[3]-ne);let xe;if(T)xe=T.canvas,y.scale(I,-I);else{const qe=l[0],Ke=qe.extent;xe=qe.image,y.scale(Xn(Ke)/xe.width,-Ms(Ke)/xe.height)}y.drawImage(xe,0,0),y.restore()}),T&&(W5(T),nw.push(T.canvas)),u&&(y.save(),y.globalCompositeOperation="source-over",y.strokeStyle="black",y.lineWidth=1,a.getTriangles().forEach(function(M,V,C){const N=M.target,O=(N[0][0]-P[0])/s,L=-(N[0][1]-P[1])/s,F=(N[1][0]-P[0])/s,G=-(N[1][1]-P[1])/s,U=(N[2][0]-P[0])/s,he=-(N[2][1]-P[1])/s;y.beginPath(),y.moveTo(F,G),y.lineTo(O,L),y.lineTo(U,he),y.closePath(),y.stroke()}),y.restore()),y.canvas}const tCe=10,NZ=.25;class wce{constructor(e,n,r,i,s,o,a){this.sourceProj_=e,this.targetProj_=n;let l={};const c=a?e8(I=>Zi(a,ob(I,this.targetProj_,this.sourceProj_))):Ek(this.targetProj_,this.sourceProj_);this.transformInv_=function(I){const P=I[0]+"/"+I[1];return l[P]||(l[P]=c(I)),l[P]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Xn(i)>=Xn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Xn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Xn(this.targetProj_.getExtent()):null;const u=uv(r),h=$5(r),f=j5(r),g=D5(r),y=this.transformInv_(u),_=this.transformInv_(h),b=this.transformInv_(f),T=this.transformInv_(g),A=tCe+(o?Math.max(0,Math.ceil(Math.log2(qF(r)/(o*o*256*256)))):0);if(this.addQuad_(u,h,f,g,y,_,b,T,A),this.wrapsXInSource_){let I=1/0;this.triangles_.forEach(function(P,M,V){I=Math.min(I,P.source[0][0],P.source[1][0],P.source[2][0])}),this.triangles_.forEach(P=>{if(Math.max(P.source[0][0],P.source[1][0],P.source[2][0])-I>this.sourceWorldWidth_/2){const M=[[P.source[0][0],P.source[0][1]],[P.source[1][0],P.source[1][1]],[P.source[2][0],P.source[2][1]]];M[0][0]-I>this.sourceWorldWidth_/2&&(M[0][0]-=this.sourceWorldWidth_),M[1][0]-I>this.sourceWorldWidth_/2&&(M[1][0]-=this.sourceWorldWidth_),M[2][0]-I>this.sourceWorldWidth_/2&&(M[2][0]-=this.sourceWorldWidth_);const V=Math.min(M[0][0],M[1][0],M[2][0]);Math.max(M[0][0],M[1][0],M[2][0])-V<this.sourceWorldWidth_/2&&(P.source=M)}})}l={}}addTriangle_(e,n,r,i,s,o){this.triangles_.push({source:[i,s,o],target:[e,n,r]})}addQuad_(e,n,r,i,s,o,a,l,c){const u=Ia([s,o,a,l]),h=this.sourceWorldWidth_?Xn(u)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&h>.5&&h<1;let y=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const b=Ia([e,n,r,i]);y=Xn(b)/this.targetWorldWidth_>NZ||y}!g&&this.sourceProj_.isGlobal()&&h&&(y=h>NZ||y)}if(!y&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!la(u,this.maxSourceExtent_))return;let _=0;if(!y&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)y=!0;else if(_=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),_!=1&&_!=2&&_!=4&&_!=8)return}if(c>0){if(!y){const b=[(e[0]+r[0])/2,(e[1]+r[1])/2],T=this.transformInv_(b);let A;g?A=(Eg(s[0],f)+Eg(a[0],f))/2-Eg(T[0],f):A=(s[0]+a[0])/2-T[0];const I=(s[1]+a[1])/2-T[1];y=A*A+I*I>this.errorThresholdSquared_}if(y){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const b=[(n[0]+r[0])/2,(n[1]+r[1])/2],T=this.transformInv_(b),A=[(i[0]+e[0])/2,(i[1]+e[1])/2],I=this.transformInv_(A);this.addQuad_(e,n,b,A,s,o,T,I,c-1),this.addQuad_(A,b,r,i,I,T,a,l,c-1)}else{const b=[(e[0]+n[0])/2,(e[1]+n[1])/2],T=this.transformInv_(b),A=[(r[0]+i[0])/2,(r[1]+i[1])/2],I=this.transformInv_(A);this.addQuad_(e,b,A,i,s,T,I,l,c-1),this.addQuad_(b,n,r,A,T,o,a,I,c-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(_&11)==0&&this.addTriangle_(e,r,i,s,a,l),(_&14)==0&&this.addTriangle_(e,r,n,s,a,o),_&&((_&13)==0&&this.addTriangle_(n,i,e,o,l,s),(_&7)==0&&this.addTriangle_(n,i,r,o,l,a))}calculateSourceExtent(){const e=Wa();return this.triangles_.forEach(function(n,r,i){const s=n.source;uT(e,s[0]),uT(e,s[1]),uT(e,s[2])}),e}getTriangles(){return this.triangles_}}const bce=.5;class Ece extends JG{constructor(e,n,r,i,s,o,a,l,c,u,h,f){super(s,hn.IDLE,f),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=i,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const g=i.getTileCoordExtent(this.wrappedTileCoord_),y=this.targetTileGrid_.getExtent();let _=this.sourceTileGrid_.getExtent();const b=y?op(g,y):g;if(qF(b)===0){this.state=hn.EMPTY;return}const T=e.getExtent();T&&(_?_=op(_,T):_=T);const A=i.getResolution(this.wrappedTileCoord_[0]),I=eCe(e,r,b,A);if(!isFinite(I)||I<=0){this.state=hn.EMPTY;return}const P=u!==void 0?u:bce;if(this.triangulation_=new wce(e,r,b,_,I*P,A),this.triangulation_.getTriangles().length===0){this.state=hn.EMPTY;return}this.sourceZ_=n.getZForResolution(I);let M=this.triangulation_.calculateSourceExtent();if(_&&(e.canWrapX()?(M[1]=ri(M[1],_[1],_[3]),M[3]=ri(M[3],_[1],_[3])):M=op(M,_)),!qF(M))this.state=hn.EMPTY;else{let V=0,C=0;e.canWrapX()&&(V=Xn(T),C=Math.floor((M[0]-T[0])/V)),hle(M.slice(),e,!0).forEach(O=>{const L=n.getTileRangeForExtentAndZ(O,this.sourceZ_);for(let F=L.minX;F<=L.maxX;F++)for(let G=L.minY;G<=L.maxY;G++){const U=c(this.sourceZ_,F,G,a);if(U){const he=C*V;this.sourceTiles_.push({tile:U,offset:he})}}++C}),this.sourceTiles_.length===0&&(this.state=hn.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{const r=n.tile;if(r&&r.getState()==hn.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=n.offset,i[2]+=n.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=n.offset,s[2]+=n.offset),e.push({extent:i,clipExtent:s,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=hn.ERROR;else{const n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=xce(i,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=hn.LOADED}this.changed()}load(){if(this.state==hn.IDLE){this.state=hn.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const r=n.getState();if(r==hn.IDLE||r==hn.LOADING){e++;const i=Yn(n,En.CHANGE,s=>{const o=n.getState();(o==hn.LOADED||o==hn.ERROR||o==hn.EMPTY)&&(ni(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},r,i){n.getState()==hn.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ni),this.sourcesListenerKeys_=null}release(){this.canvas_&&(W5(this.canvas_.getContext("2d")),nw.push(this.canvas_),this.canvas_=null),super.release()}}class QG{constructor(e,n,r,i){this.minX=e,this.maxX=n,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function p_(t,e,n,r,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=r,i):new QG(t,e,n,r)}class OZ{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof ZA&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const r=this.entries_[e];return ur(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const n=this.entries_[e];return ur(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.key_;return e}getValues(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){ur(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function a4(t,e,n,r){return r!==void 0?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function nCe(t,e,n){return t+"/"+e+"/"+n}function uM(t,e,n,r,i){return`${en(t)},${e},${nCe(n,r,i)}`}function Sce(t){return rCe(t[0],t[1],t[2])}function rCe(t,e,n){return(e<<t)+n}function iCe(t,e){const n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return s?s.containsXY(r,i):!0}class eU extends oce{constructor(e,n){super(e),n=n||{},this.inversePixelTransform_=Hs(),this.postProcesses_=n.postProcesses,this.uniforms_=n.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},e.addChangeListener(kr.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,n){const r=this.getLayer();if(r.hasListener(uo.PRECOMPOSE)){const i=new dT(uo.PRECOMPOSE,void 0,n,e);r.dispatchEvent(i)}}dispatchPostComposeEvent(e,n){const r=this.getLayer();if(r.hasListener(uo.POSTCOMPOSE)){const i=new dT(uo.POSTCOMPOSE,void 0,n,e);r.dispatchEvent(i)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let n=!0,r=-1,i;for(let o=0,a=e.layerStatesArray.length;o<a;o++){const l=e.layerStatesArray[o].layer,c=l.getRenderer();if(!(c instanceof eU)){n=!0;continue}const u=l.getClassName();if((n||u!==i)&&(r+=1,n=!1),i=u,c===this)break}const s="map/"+e.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new KPe({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}clearCache(){}disposeInternal(){this.clearCache(),this.removeHelper(),this.getLayer()?.removeChangeListener(kr.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(e,n,r){const i=this.getLayer();if(i.hasListener(e)){mu(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const s=new dT(e,this.inversePixelTransform_,r,n);i.dispatchEvent(s)}}preRender(e,n){this.dispatchRenderEvent_(uo.PRERENDER,e,n)}postRender(e,n){this.dispatchRenderEvent_(uo.POSTRENDER,e,n)}}const nj={TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight"};class sCe{constructor(e,n){this.name=e,this.data=n,this.texture_=null}getTexture(e){if(!this.texture_){const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=n}return this.texture_}delete(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}}function oCe(t,e){return`operator_${t}_${Object.keys(e.functions).length}`}function Sg(t){const e=t.toString();return e.includes(".")?e:e+".0"}function tU(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${t.length}(${t.map(Sg).join(", ")})`}function hM(t){const e=gu(t),n=e.length>3?e[3]:1;return tU([e[0]/255,e[1]/255,e[2]/255,n])}function aCe(t){const e=$a(t);return tU(e)}const rj={};let lCe=0;function Nk(t){return t in rj||(rj[t]=lCe++),rj[t]}function Hf(t){return Sg(Nk(t))}function nU(t){return"u_var_"+t}function Tce(){return{variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const ij="getBandValue",cCe="u_paletteTextures",kce="featureId",Ace="geometryType",f8=-9999999;function uCe(t,e,n,r){const i=fo(t,e,n);return rU(i,e,r)}function _r(t){return(e,n,r)=>{const i=n.args.length,s=new Array(i);for(let o=0;o<i;++o)s[o]=rU(n.args[o],r,e);return t(s,e)}}const hCe={[Ae.Get]:(t,e)=>{const r=e.args[0].value;r in t.properties||(t.properties[r]={name:r,type:e.type});let s="a_prop_"+r;return ad(e.type,Rs)&&(s=`(${s} > 0.0)`),s},[Ae.Id]:t=>(t.featureId=!0,"a_"+kce),[Ae.GeometryType]:t=>(t.geometryType=!0,"a_"+Ace),[Ae.LineMetric]:()=>"currentLineMetric",[Ae.Var]:(t,e)=>{const r=e.args[0].value;r in t.variables||(t.variables[r]={name:r,type:e.type});let s=nU(r);return ad(e.type,Rs)&&(s=`(${s} > 0.0)`),s},[Ae.Has]:(t,e)=>{const r=e.args[0].value;return r in t.properties||(t.properties[r]={name:r,type:e.type}),`(a_prop_${r} != ${Sg(f8)})`},[Ae.Resolution]:()=>"u_resolution",[Ae.Zoom]:()=>"u_zoom",[Ae.Time]:()=>"u_time",[Ae.Any]:_r(t=>`(${t.join(" || ")})`),[Ae.All]:_r(t=>`(${t.join(" && ")})`),[Ae.Not]:_r(([t])=>`(!${t})`),[Ae.Equal]:_r(([t,e])=>`(${t} == ${e})`),[Ae.NotEqual]:_r(([t,e])=>`(${t} != ${e})`),[Ae.GreaterThan]:_r(([t,e])=>`(${t} > ${e})`),[Ae.GreaterThanOrEqualTo]:_r(([t,e])=>`(${t} >= ${e})`),[Ae.LessThan]:_r(([t,e])=>`(${t} < ${e})`),[Ae.LessThanOrEqualTo]:_r(([t,e])=>`(${t} <= ${e})`),[Ae.Multiply]:_r(t=>`(${t.join(" * ")})`),[Ae.Divide]:_r(([t,e])=>`(${t} / ${e})`),[Ae.Add]:_r(t=>`(${t.join(" + ")})`),[Ae.Subtract]:_r(([t,e])=>`(${t} - ${e})`),[Ae.Clamp]:_r(([t,e,n])=>`clamp(${t}, ${e}, ${n})`),[Ae.Mod]:_r(([t,e])=>`mod(${t}, ${e})`),[Ae.Pow]:_r(([t,e])=>`pow(${t}, ${e})`),[Ae.Abs]:_r(([t])=>`abs(${t})`),[Ae.Floor]:_r(([t])=>`floor(${t})`),[Ae.Ceil]:_r(([t])=>`ceil(${t})`),[Ae.Round]:_r(([t])=>`floor(${t} + 0.5)`),[Ae.Sin]:_r(([t])=>`sin(${t})`),[Ae.Cos]:_r(([t])=>`cos(${t})`),[Ae.Atan]:_r(([t,e])=>e!==void 0?`atan(${t}, ${e})`:`atan(${t})`),[Ae.Sqrt]:_r(([t])=>`sqrt(${t})`),[Ae.Match]:_r(t=>{const e=t[0],n=t[t.length-1];let r=null;for(let i=t.length-3;i>=1;i-=2){const s=t[i],o=t[i+1];r=`(${e} == ${s} ? ${o} : ${r||n})`}return r}),[Ae.Between]:_r(([t,e,n])=>`(${t} >= ${e} && ${t} <= ${n})`),[Ae.Interpolate]:_r(([t,e,...n])=>{let r="";for(let i=0;i<n.length-2;i+=2){const s=n[i],o=r||n[i+1],a=n[i+2],l=n[i+3];let c;t===Sg(1)?c=`(${e} - ${s}) / (${a} - ${s})`:c=`(pow(${t}, (${e} - ${s})) - 1.0) / (pow(${t}, (${a} - ${s})) - 1.0)`,r=`mix(${o}, ${l}, clamp(${c}, 0.0, 1.0))`}return r}),[Ae.Case]:_r(t=>{const e=t[t.length-1];let n=null;for(let r=t.length-3;r>=0;r-=2){const i=t[r],s=t[r+1];n=`(${i} ? ${s} : ${n||e})`}return n}),[Ae.In]:_r(([t,...e],n)=>{const r=oCe("in",n),i=[];for(let s=0;s<e.length;s+=1)i.push(`  if (inputValue == ${e[s]}) { return true; }`);return n.functions[r]=`bool ${r}(float inputValue) {
${i.join(`
`)}
  return false;
}`,`${r}(${t})`}),[Ae.Array]:_r(t=>`vec${t.length}(${t.join(", ")})`),[Ae.Color]:_r(t=>{if(t.length===1)return`vec4(vec3(${t[0]} / 255.0), 1.0)`;if(t.length===2)return`vec4(vec3(${t[0]} / 255.0), ${t[1]})`;const e=t.slice(0,3).map(r=>`${r} / 255.0`);if(t.length===3)return`vec4(${e.join(", ")}, 1.0)`;const n=t[3];return`vec4(${e.join(", ")}, ${n})`}),[Ae.Band]:_r(([t,e,n],r)=>{if(!(ij in r.functions)){let i="";const s=r.bandCount||1;for(let o=0;o<s;o++){const a=Math.floor(o/4);let l=o%4;o===s-1&&l===1&&(l=3);const c=`${nj.TILE_TEXTURE_ARRAY}[${a}]`;i+=`  if (band == ${o+1}.0) {
    return texture2D(${c}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}r.functions[ij]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${nj.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${nj.TEXTURE_PIXEL_HEIGHT};
${i}
}`}return`${ij}(${t}, ${e??"0.0"}, ${n??"0.0"})`}),[Ae.Palette]:(t,e)=>{const[n,...r]=e.args,i=r.length,s=new Uint8Array(i*4);for(let c=0;c<r.length;c++){const u=r[c].value,h=gu(u),f=c*4;s[f]=h[0],s[f+1]=h[1],s[f+2]=h[2],s[f+3]=h[3]*255}t.paletteTextures||(t.paletteTextures=[]);const o=`${cCe}[${t.paletteTextures.length}]`,a=new sCe(o,s);t.paletteTextures.push(a);const l=rU(n,Ht,t);return`texture2D(${o}, vec2((${l} + 0.5) / ${i}.0, 0.5))`}};function rU(t,e,n){if(t instanceof ace){const r=hCe[t.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(t.operator)}`);return r(n,t,e)}if((t.type&Ht)>0)return Sg(t.value);if((t.type&Rs)>0)return t.value.toString();if((t.type&Bs)>0)return Hf(t.value.toString());if((t.type&Si)>0)return hM(t.value);if((t.type&Cl)>0)return tU(t.value);if((t.type&ou)>0)return aCe(t.value);throw new Error(`Unexpected expression ${t.value} (expected type ${Cx(e)})`)}function dCe(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const LZ=.985;function Pn(t,e,n){const r=UG();return uCe(e,n,r,t)}function fCe(t){const e=gu(t),n=e[0]*256,r=e[1],i=e[2]*256,s=Math.round(e[3]*255);return[n+r,i+s]}const pCe=`vec4 unpackColor(vec2 packedColor) {
  return vec4(
    min(floor(packedColor[0] / 256.0) / 255.0, 1.0),
    min(mod(packedColor[0], 256.0) / 255.0, 1.0),
    min(floor(packedColor[1] / 256.0) / 255.0, 1.0),
    min(mod(packedColor[1], 256.0) / 255.0, 1.0)
  );
}`;function iU(t){return t===Si||t===ou?2:t===Cl?4:1}function p8(t){const e=iU(t);return e>1?`vec${e}`:"float"}function Ice(t,e){for(const n in e.variables){const r=e.variables[n],i=nU(r.name);let s=p8(r.type);r.type===Si&&(s="vec4"),t.addUniform(i,s)}for(const n in e.properties){const r=e.properties[n],i=p8(r.type),s=`a_prop_${r.name}`;r.type===Si?t.addAttribute(s,i,`unpackColor(${s})`,"vec4"):t.addAttribute(s,i)}for(const n in e.functions)t.addVertexShaderFunction(e.functions[n]),t.addFragmentShaderFunction(e.functions[n])}function Pce(t,e){const n={};for(const r in t.variables){const i=t.variables[r],s=nU(i.name);n[s]=()=>{const o=e[i.name];if(typeof o=="number")return o;if(typeof o=="boolean")return o?1:0;if(i.type===Si){const a=[...gu(o||"#eee")];return a[0]/=255,a[1]/=255,a[2]/=255,a[3]??=1,a}return typeof o=="string"?Nk(o):o}}return n}function Cce(t){const e={};for(const n in t.properties){const r=t.properties[n],i=s=>{const o=s.get(r.name);return r.type===Si?fCe([...gu(o||"#eee")]):typeof o=="string"?Nk(o):typeof o=="boolean"?o?1:0:o};e[`prop_${r.name}`]={size:iU(r.type),callback:i}}return e}const m_=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;
float currentLineMetric = 0.; // an actual value will be used in the stroke shaders

${pCe}
`,g_=dCe();class Rce{constructor(){this.uniforms_=[],this.attributes_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${Sg(g_["circle-radius"])} + ${Sg(g_["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=hM(g_["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=Sg(g_["stroke-width"]),this.strokeColorExpression_=hM(g_["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=Hf("round"),this.strokeJoinExpression_=Hf("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.strokePatternLengthExpression_=null,this.hasFill_=!1,this.fillColorExpression_=hM(g_["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(e,n){return this.uniforms_.push({name:e,type:n}),this}addAttribute(e,n,r,i){return this.attributes_.push({name:e,type:n,varyingName:e.replace(/^a_/,"v_"),varyingType:i??n,varyingExpression:r??e}),this}setSymbolSizeExpression(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(e){return this.symbolRotationExpression_=e,this}setSymbolOffsetExpression(e){return this.symbolOffsetExpression_=e,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(e){return this.texCoordExpression_=e,this}setFragmentDiscardExpression(e){return this.discardExpression_=e,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(e){return this.symbolRotateWithView_=e,this}setStrokeWidthExpression(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}setStrokeColorExpression(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(e){return this.strokeOffsetExpression_=e,this}setStrokeCapExpression(e){return this.strokeCapExpression_=e,this}setStrokeJoinExpression(e){return this.strokeJoinExpression_=e,this}setStrokeMiterLimitExpression(e){return this.strokeMiterLimitExpression_=e,this}setStrokeDistanceFieldExpression(e){return this.strokeDistanceFieldExpression_=e,this}setStrokePatternLengthExpression(e){return this.strokePatternLengthExpression_=e,this}getStrokePatternLengthExpression(){return this.strokePatternLengthExpression_}setFillColorExpression(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(e){return this.vertexShaderFunctions_.includes(e)?this:(this.vertexShaderFunctions_.push(e),this)}addFragmentShaderFunction(e){return this.fragmentShaderFunctions_.includes(e)?this:(this.fragmentShaderFunctions_.push(e),this)}getSymbolVertexShader(){return this.hasSymbol_?`${m_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_position;
attribute vec2 a_localPosition;
attribute vec2 a_hitColor;

varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx + a_localPosition * halfSizePx * vec2(1., -1.);
  float angle = ${this.symbolRotationExpression_}${this.symbolRotateWithView_?" + u_rotation":""};
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = mix(texCoord.s, texCoord.p, a_localPosition.x * 0.5 + 0.5);
  float v = mix(texCoord.t, texCoord.q, a_localPosition.y * 0.5 + 0.5);
  v_texCoord = vec2(u, v);
  v_hitColor = unpackColor(a_hitColor);
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y);
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${m_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${m_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute vec2 a_localPosition;
attribute float a_measureStart;
attribute float a_measureEnd;
attribute float a_angleTangentSum;
attribute float a_distanceLow;
attribute float a_distanceHigh;
attribute vec2 a_joinAngles;
attribute vec2 a_hitColor;

varying vec2 v_segmentStartPx;
varying vec2 v_segmentEndPx;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distancePx;
varying float v_measureStart;
varying float v_measureEnd;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float startEndRatio = a_localPosition.x * 0.5 + 0.5;
  currentLineMetric = mix(a_measureStart, a_measureEnd, startEndRatio);
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);

  // compute current vertex position
  float normalDir = -1. * a_localPosition.y;
  float tangentDir = -1. * a_localPosition.x;
  float angle = mix(v_angleStart, v_angleEnd, startEndRatio);
  vec2 joinDirection;
  vec2 positionPx = mix(segmentStartPx, segmentEndPx, startEndRatio);
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${LZ} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStartPx = segmentStartPx;
  v_segmentEndPx = segmentEndPx;
  v_width = lineWidth;
  v_hitColor = unpackColor(a_hitColor);

  v_distancePx = a_distanceLow / u_resolution - (lineOffsetPx * a_angleTangentSum);
  float distanceHighPx = a_distanceHigh / u_resolution;
  ${this.strokePatternLengthExpression_!==null?`v_distancePx = mod(v_distancePx, ${this.strokePatternLengthExpression_});
  distanceHighPx = mod(distanceHighPx, ${this.strokePatternLengthExpression_});
  `:""}v_distancePx += distanceHighPx;

  v_measureStart = a_measureStart;
  v_measureEnd = a_measureEnd;
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${m_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec2 v_segmentStartPx;
varying vec2 v_segmentEndPx;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distancePx;
varying float v_measureStart;
varying float v_measureEnd;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${LZ}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${Hf("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${Hf("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${Hf("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${Hf("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

float distanceFromSegment(vec2 point, vec2 start, vec2 end) {
  vec2 tangent = end - start;
  vec2 startToPoint = point - start;
  // inspire by capsule fn in https://iquilezles.org/articles/distfunctions/
  float h = clamp(dot(startToPoint, tangent) / dot(tangent, tangent), 0.0, 1.0);
  return length(startToPoint - tangent * h);
}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}

  vec2 currentPointPx = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPointPx);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif

  float segmentLengthPx = length(v_segmentEndPx - v_segmentStartPx);
  segmentLengthPx = max(segmentLengthPx, 1.17549429e-38); // avoid divide by zero
  vec2 segmentTangent = (v_segmentEndPx - v_segmentStartPx) / segmentLengthPx;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPointPx = currentPointPx - v_segmentStartPx;
  float lengthToPointPx = max(0., min(dot(segmentTangent, startToPointPx), segmentLengthPx));
  float currentLengthPx = lengthToPointPx + v_distancePx;
  float currentRadiusPx = distanceFromSegment(currentPointPx, v_segmentStartPx, v_segmentEndPx);
  float currentRadiusRatio = dot(segmentNormal, startToPointPx) * 2. / v_width;
  currentLineMetric = mix(v_measureStart, v_measureEnd, lengthToPointPx / segmentLengthPx);

  if (${this.discardExpression_}) { discard; }

  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPointPx, v_segmentStartPx, v_segmentEndPx, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPointPx, v_segmentEndPx, v_segmentStartPx, v_width, v_angleEnd, capType, joinType);
  float distanceField = max(
    segmentDistanceField(currentPointPx, v_segmentStartPx, v_segmentEndPx, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distanceField = max(distanceField, ${this.strokeDistanceFieldExpression_});

  vec4 color = ${this.strokeColorExpression_};
  color.a *= smoothstep(0.5, -0.5, distanceField);
  gl_FragColor = color;
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${m_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_position;
attribute vec2 a_hitColor;

varying vec4 v_hitColor;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_hitColor = unpackColor(a_hitColor);
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${m_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec4 v_hitColor;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_};
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}}class l4{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(e,n){for(let r=0;r<e.length;r++)this.addFeature(e[r],n)}addFeature(e,n){let r=e.getGeometry();r&&(n&&(r=r.clone(),r.applyTransform(n)),this.addGeometry_(r,e))}clearFeatureEntryInPointBatch_(e){const n=en(e),r=this.pointBatch.entries[n];if(r)return this.pointBatch.geometriesCount-=r.flatCoordss.length,delete this.pointBatch.entries[n],r}clearFeatureEntryInLineStringBatch_(e){const n=en(e),r=this.lineStringBatch.entries[n];if(r)return this.lineStringBatch.verticesCount-=r.verticesCount,this.lineStringBatch.geometriesCount-=r.flatCoordss.length,delete this.lineStringBatch.entries[n],r}clearFeatureEntryInPolygonBatch_(e){const n=en(e),r=this.polygonBatch.entries[n];if(r)return this.polygonBatch.verticesCount-=r.verticesCount,this.polygonBatch.ringsCount-=r.ringsCount,this.polygonBatch.geometriesCount-=r.flatCoordss.length,delete this.polygonBatch.entries[n],r}addGeometry_(e,n){const r=e.getType();switch(r){case"GeometryCollection":{const i=e.getGeometriesArray();for(const s of i)this.addGeometry_(s,n);break}case"MultiPolygon":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEndss(),n,en(n),i.getStride());break}case"MultiLineString":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEnds(),n,en(n),i.getStride());break}case"MultiPoint":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),null,n,en(n),i.getStride());break}case"Polygon":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEnds(),n,en(n),i.getStride());break}case"Point":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),null,n,en(n),i.getStride());break}case"LineString":case"LinearRing":{const i=e,s=i.getStride();this.addCoordinates_(r,i.getFlatCoordinates(),null,n,en(n),s,i.getLayout?.());break}}}addCoordinates_(e,n,r,i,s,o,a){let l;switch(e){case"MultiPolygon":{const c=r;for(let u=0,h=c.length;u<h;u++){let f=c[u];const g=u>0?c[u-1]:null,y=g?g[g.length-1]:0,_=f[f.length-1];f=y>0?f.map(b=>b-y):f,this.addCoordinates_("Polygon",n.slice(y,_),f,i,s,o,a)}break}case"MultiLineString":{const c=r;for(let u=0,h=c.length;u<h;u++){const f=u>0?c[u-1]:0;this.addCoordinates_("LineString",n.slice(f,c[u]),null,i,s,o,a)}break}case"MultiPoint":for(let c=0,u=n.length;c<u;c+=o)this.addCoordinates_("Point",n.slice(c,c+2),null,i,s,null,null);break;case"Polygon":{const c=r;if(i instanceof yl){const f=Zle(n,c);if(f.length>1){this.addCoordinates_("MultiPolygon",n,f,i,s,o,a);return}}this.polygonBatch.entries[s]||(this.polygonBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),l=n.length/o;const u=r.length,h=r.map((f,g,y)=>g>0?(f-y[g-1])/o:f/o);this.polygonBatch.verticesCount+=l,this.polygonBatch.ringsCount+=u,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[s].flatCoordss.push(mCe(n,o)),this.polygonBatch.entries[s].ringsVerticesCounts.push(h),this.polygonBatch.entries[s].verticesCount+=l,this.polygonBatch.entries[s].ringsCount+=u;for(let f=0,g=c.length;f<g;f++){const y=f>0?c[f-1]:0;this.addCoordinates_("LinearRing",n.slice(y,c[f]),null,i,s,o,a)}break}case"Point":this.pointBatch.entries[s]||(this.pointBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[s].flatCoordss.push(n);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[s]||(this.lineStringBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0})),l=n.length/o,this.lineStringBatch.verticesCount+=l,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[s].flatCoordss.push(gCe(n,o,a)),this.lineStringBatch.entries[s].verticesCount+=l;break}}addRefToEntry_(e,n){const r=this.uidToRef_.get(e),i=r||this.freeGlobalRef_.pop()||++this.globalCounter_;return n.ref=i,r||(this.refToFeature_.set(i,n.feature),this.uidToRef_.set(e,i)),n}removeRef_(e,n){if(!e)throw new Error("This feature has no ref: "+n);this.refToFeature_.delete(e),this.uidToRef_.delete(n),this.freeGlobalRef_.push(e)}changeFeature(e,n){if(!this.uidToRef_.get(en(e)))return;this.removeFeature(e);let r=e.getGeometry();r&&(n&&(r=r.clone(),r.applyTransform(n)),this.addGeometry_(r,e))}removeFeature(e){let n=this.clearFeatureEntryInPointBatch_(e);n=this.clearFeatureEntryInPolygonBatch_(e)||n,n=this.clearFeatureEntryInLineStringBatch_(e)||n,n&&this.removeRef_(n.ref,en(n.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(e){return this.refToFeature_.get(e)}isEmpty(){return this.globalCounter_===0}filter(e){const n=new l4;n.globalCounter_=this.globalCounter_,n.uidToRef_=this.uidToRef_,n.refToFeature_=this.refToFeature_;let r=!0;for(const i of this.refToFeature_.values())e(i)&&(n.addFeature(i),r=!1);return r?new l4:n}}function mCe(t,e){return e===2?t:t.filter((n,r)=>r%e<2)}function gCe(t,e,n){return e===3&&n==="XYM"?t:e===4?t.filter((r,i)=>i%e!==2):e===3?t.map((r,i)=>i%e!==2?r:0):new Array(t.length*1.5).fill(0).map((r,i)=>i%3===2?0:t[Math.round(i/1.5)])}function yCe(){const t='function t(t,n,x=2){const o=n&&n.length,i=o?n[0]*x:t.length;let f=e(t,0,i,x,!0);const l=[];if(!f||f.next===f.prev)return l;let c,y,h;if(o&&(f=function(t,n,r,x){const o=[];for(let r=0,i=n.length;r<i;r++){const f=e(t,n[r]*x,r<i-1?n[r+1]*x:t.length,x,!1);f===f.next&&(f.steiner=!0),o.push(a(f))}o.sort(u);for(let t=0;t<o.length;t++)r=s(o[t],r);return r}(t,n,f,x)),t.length>80*x){c=t[0],y=t[1];let e=c,n=y;for(let r=x;r<i;r+=x){const x=t[r],o=t[r+1];x<c&&(c=x),o<y&&(y=o),x>e&&(e=x),o>n&&(n=o)}h=Math.max(e-c,n-y),h=0!==h?32767/h:0}return r(f,l,x,c,y,h,0),l}function e(t,e,n,r,x){let o;if(x===function(t,e,n,r){let x=0;for(let o=e,i=n-r;o<n;o+=r)x+=(t[i]-t[o])*(t[o+1]+t[i+1]),i=o;return x}(t,e,n,r)>0)for(let x=e;x<n;x+=r)o=d(x/r|0,t[x],t[x+1],o);else for(let x=n-r;x>=e;x-=r)o=d(x/r|0,t[x],t[x+1],o);return o&&b(o,o.next)&&(w(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!b(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(w(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function r(t,e,u,s,l,a,y){if(!t)return;!y&&a&&function(t,e,n,r){let x=t;do{0===x.z&&(x.z=c(x.x,x.y,e,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==t);x.prevZ.nextZ=null,x.prevZ=null,function(t){let e,n=1;do{let r,x=t;t=null;let o=null;for(e=0;x;){e++;let i=x,f=0;for(let t=0;t<n&&(f++,i=i.nextZ,i);t++);let u=n;for(;f>0||u>0&&i;)0!==f&&(0===u||!i||x.z<=i.z)?(r=x,x=x.nextZ,f--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;x=i}o.nextZ=null,n*=2}while(e>1)}(x)}(t,s,l,a);let h=t;for(;t.prev!==t.next;){const c=t.prev,p=t.next;if(a?o(t,s,l,a):x(t))e.push(c.i,t.i,p.i),w(t),t=p.next,h=p.next;else if((t=p)===h){y?1===y?r(t=i(n(t),e),e,u,s,l,a,2):2===y&&f(t,e,u,s,l,a):r(n(t),e,u,s,l,a,1);break}}}function x(t){const e=t.prev,n=t,r=t.next;if(v(e,n,r)>=0)return!1;const x=e.x,o=n.x,i=r.x,f=e.y,u=n.y,s=r.y,l=Math.min(x,o,i),c=Math.min(f,u,s),a=Math.max(x,o,i),y=Math.max(f,u,s);let p=r.next;for(;p!==e;){if(p.x>=l&&p.x<=a&&p.y>=c&&p.y<=y&&h(x,f,o,u,i,s,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function o(t,e,n,r){const x=t.prev,o=t,i=t.next;if(v(x,o,i)>=0)return!1;const f=x.x,u=o.x,s=i.x,l=x.y,a=o.y,y=i.y,p=Math.min(f,u,s),b=Math.min(l,a,y),M=Math.max(f,u,s),m=Math.max(l,a,y),A=c(p,b,e,n,r),g=c(M,m,e,n,r);let Z=t.prevZ,d=t.nextZ;for(;Z&&Z.z>=A&&d&&d.z<=g;){if(Z.x>=p&&Z.x<=M&&Z.y>=b&&Z.y<=m&&Z!==x&&Z!==i&&h(f,l,u,a,s,y,Z.x,Z.y)&&v(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,d.x>=p&&d.x<=M&&d.y>=b&&d.y<=m&&d!==x&&d!==i&&h(f,l,u,a,s,y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;Z&&Z.z>=A;){if(Z.x>=p&&Z.x<=M&&Z.y>=b&&Z.y<=m&&Z!==x&&Z!==i&&h(f,l,u,a,s,y,Z.x,Z.y)&&v(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;d&&d.z<=g;){if(d.x>=p&&d.x<=M&&d.y>=b&&d.y<=m&&d!==x&&d!==i&&h(f,l,u,a,s,y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function i(t,e){let r=t;do{const n=r.prev,x=r.next.next;!b(n,x)&&M(n,r,r.next,x)&&g(n,x)&&g(x,n)&&(e.push(n.i,r.i,x.i),w(r),w(r.next),r=t=x),r=r.next}while(r!==t);return n(r)}function f(t,e,x,o,i,f){let u=t;do{let t=u.next.next;for(;t!==u.prev;){if(u.i!==t.i&&p(u,t)){let s=Z(u,t);return u=n(u,u.next),s=n(s,s.next),r(u,e,x,o,i,f,0),void r(s,e,x,o,i,f,0)}t=t.next}u=u.next}while(u!==t)}function u(t,e){let n=t.x-e.x;if(0===n&&(n=t.y-e.y,0===n)){n=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)}return n}function s(t,e){const r=function(t,e){let n=e;const r=t.x,x=t.y;let o,i=-1/0;if(b(t,n))return n;do{if(b(t,n.next))return n.next;if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>i&&(i=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const f=o,u=o.x,s=o.y;let c=1/0;n=o;do{if(r>=n.x&&n.x>=u&&r!==n.x&&y(x<s?r:i,x,u,s,x<s?i:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);g(n,t)&&(e<c||e===c&&(n.x>o.x||n.x===o.x&&l(o,n)))&&(o=n,c=e)}n=n.next}while(n!==f);return o}(t,e);if(!r)return e;const x=Z(r,t);return n(x,x.next),n(r,r.next)}function l(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function c(t,e,n,r,x){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function a(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,r,x,o,i,f){return(x-i)*(e-f)>=(t-i)*(o-f)&&(t-i)*(r-f)>=(n-i)*(e-f)&&(n-i)*(o-f)>=(x-i)*(r-f)}function h(t,e,n,r,x,o,i,f){return!(t===i&&e===f)&&y(t,e,n,r,x,o,i,f)}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&M(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(g(t,e)&&g(e,t)&&function(t,e){let n=t,r=!1;const x=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&x<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||b(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function M(t,e,n,r){const x=A(v(t,e,n)),o=A(v(t,e,r)),i=A(v(n,r,t)),f=A(v(n,r,e));return x!==o&&i!==f||(!(0!==x||!m(t,n,e))||(!(0!==o||!m(t,r,e))||(!(0!==i||!m(n,t,r))||!(0!==f||!m(n,e,r)))))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function g(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function Z(t,e){const n=F(t.i,t.x,t.y),r=F(e.i,e.x,e.y),x=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=x,x.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function d(t,e,n,r){const x=F(t,e,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function F(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function E(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function I(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;!function(t,e){if(!t)throw new Error(e)}(0!==n,"Transformation matrix cannot be inverted");const x=e[0],o=e[1],i=e[2],f=e[3],u=e[4],s=e[5];return t[0]=f/n,t[1]=-o/n,t[2]=-i/n,t[3]=x/n,t[4]=(i*s-f*u)/n,t[5]=-(x*s-o*u)/n,t}new Array(6);const z=[],B={vertexAttributesPosition:0,instanceAttributesPosition:0,indicesPosition:0};function P(t,e,n,r,x){const o=t[e++],i=t[e++],f=z;f.length=r;for(let n=0;n<f.length;n++)f[n]=t[e+n];let u=x?x.instanceAttributesPosition:0;return n[u++]=o,n[u++]=i,f.length&&(n.set(f,u),u+=f.length),B.instanceAttributesPosition=u,B}function N(t,e,n,r,x,o,i,f,u,s){const l=[t[e],t[e+1]],c=[t[n],t[n+1]],a=t[e+2],y=t[n+2],h=E(f,[...l]),p=E(f,[...c]);function v(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),x=[(e[0]-t[0])/r,(e[1]-t[1])/r],o=[-x[1],x[0]],i=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),f=[(n[0]-t[0])/i,(n[1]-t[1])/i];let u=0===r||0===i?0:Math.acos((s=f[0]*x[0]+f[1]*x[1],l=-1,c=1,Math.min(Math.max(s,l),c)));var s,l,c;u=Math.max(u,1e-5);return f[0]*o[0]+f[1]*o[1]>0?u:2*Math.PI-u}let b=-1,M=-1,m=s;const A=null!==x;if(null!==r){b=v(h,p,E(f,[...[t[r],t[r+1]]])),Math.cos(b)<=.985&&(m+=Math.tan((b-Math.PI)/2))}if(A){M=v(p,h,E(f,[...[t[x],t[x+1]]])),Math.cos(M)<=.985&&(m+=Math.tan((Math.PI-M)/2))}const g=Math.pow(2,24),Z=u%g,d=Math.floor(u/g)*g;return o.push(l[0],l[1],a,c[0],c[1],y,b,M,Z,d,s),o.push(...i),{length:u+Math.sqrt((p[0]-h[0])*(p[0]-h[0])+(p[1]-h[1])*(p[1]-h[1])),angle:m}}function R(e,n,r,x,o){const i=2+o;let f=n;const u=e.slice(f,f+o);f+=o;const s=e[f++];let l=0;const c=new Array(s-1);for(let t=0;t<s;t++)l+=e[f++],t<s-1&&(c[t]=l);const a=e.slice(f,f+2*l),y=t(a,c,2);for(let t=0;t<y.length;t++)x.push(y[t]+r.length/i);for(let t=0;t<a.length;t+=2)r.push(a[t],a[t+1],...u);return f+2*l}const S="GENERATE_POLYGON_BUFFERS",T="GENERATE_POINT_BUFFERS",_="GENERATE_LINE_STRING_BUFFERS",O=self;O.onmessage=t=>{const e=t.data;switch(e.type){case T:{const t=2,n=2,r=e.customAttributesSize,x=n+r,o=new Float32Array(e.renderInstructions),i=o.length/x*(t+r),f=Uint32Array.from([0,1,3,1,2,3]),u=Float32Array.from([-1,-1,1,-1,1,1,-1,1]),s=new Float32Array(i);let l;for(let t=0;t<o.length;t+=x)l=P(o,t,s,r,l);const c=Object.assign({indicesBuffer:f.buffer,vertexAttributesBuffer:u.buffer,instanceAttributesBuffer:s.buffer,renderInstructions:o.buffer},e);O.postMessage(c,[u.buffer,s.buffer,f.buffer,o.buffer]);break}case _:{const t=[],n=e.customAttributesSize,r=3,x=new Float32Array(e.renderInstructions);let o=0;const i=[1,0,0,1,0,0];let f,u;for(I(i,e.renderInstructionsTransform);o<x.length;){u=Array.from(x.slice(o,o+n)),o+=n,f=x[o++];const e=o,s=o+(f-1)*r,l=x[e]===x[s]&&x[e+1]===x[s+1];let c=0,a=0;for(let n=0;n<f-1;n++){let y=null;n>0?y=o+(n-1)*r:l&&(y=s-r);let h=null;n<f-2?h=o+(n+2)*r:l&&(h=e+r);const p=N(x,o+n*r,o+(n+1)*r,y,h,t,u,i,c,a);c=p.length,a=p.angle}o+=f*r}const s=Uint32Array.from([0,1,3,1,2,3]),l=Float32Array.from([-1,-1,1,-1,1,1,-1,1]),c=Float32Array.from(t),a=Object.assign({indicesBuffer:s.buffer,vertexAttributesBuffer:l.buffer,instanceAttributesBuffer:c.buffer,renderInstructions:x.buffer},e);O.postMessage(a,[l.buffer,c.buffer,s.buffer,x.buffer]);break}case S:{const t=[],n=[],r=e.customAttributesSize,x=new Float32Array(e.renderInstructions);let o=0;for(;o<x.length;)o=R(x,o,t,n,r);const i=Uint32Array.from(n),f=Float32Array.from(t),u=Float32Array.from([]),s=Object.assign({indicesBuffer:i.buffer,vertexAttributesBuffer:f.buffer,instanceAttributesBuffer:u.buffer,renderInstructions:x.buffer},e);O.postMessage(s,[f.buffer,u.buffer,i.buffer,x.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}const sj={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};function vCe(t,e){e=e||[];const n=256,r=n-1,i=Math.floor(t/n/n/n)/r,s=Math.floor(t/n/n)%n/r,o=Math.floor(t/n)%n/r,a=t%n/r;return e[0]=i*256*255+s*255,e[1]=o*256*255+a*255,e}function _Ce(t){let e=0;const n=256,r=n-1;return e+=Math.round(t[0]*n*n*n*r),e+=Math.round(t[1]*n*n*r),e+=Math.round(t[2]*n*r),e+=Math.round(t[3]*r),e}function sU(t,e,n,r){let i=0;for(const s in e){const o=e[s],a=o.callback.call(n,n.feature);let l=a?.[0]??a;l===f8&&console.warn('The "has" operator might return false positives.'),l===void 0?l=f8:l===null&&(l=0),t[r+i++]=l,!(!o.size||o.size===1)&&(t[r+i++]=a[1],!(o.size<3)&&(t[r+i++]=a[2],!(o.size<4)&&(t[r+i++]=a[3])))}return i}function Q5(t){return Object.keys(t).reduce((e,n)=>e+(t[n].size||1),0)}function xCe(t,e,n,r){const i=(2+Q5(n))*t.geometriesCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let c=0,u=l.flatCoordss.length;c<u;c++)s[0]=l.flatCoordss[c][0],s[1]=l.flatCoordss[c][1],Zi(r,s),e[o++]=s[0],e[o++]=s[1],o+=sU(e,n,l,o)}return e}function wCe(t,e,n,r){const i=3*t.verticesCount+(1+Q5(n))*t.geometriesCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let c=0,u=l.flatCoordss.length;c<u;c++){s.length=l.flatCoordss[c].length,bd(l.flatCoordss[c],0,s.length,3,r,s,3),o+=sU(e,n,l,o),e[o++]=s.length/3;for(let h=0,f=s.length;h<f;h+=3)e[o++]=s[h],e[o++]=s[h+1],e[o++]=s[h+2]}}return e}function bCe(t,e,n,r){const i=2*t.verticesCount+(1+Q5(n))*t.geometriesCount+t.ringsCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let c=0,u=l.flatCoordss.length;c<u;c++){s.length=l.flatCoordss[c].length,bd(l.flatCoordss[c],0,s.length,2,r,s),o+=sU(e,n,l,o),e[o++]=l.ringsVerticesCounts[c].length;for(let h=0,f=l.ringsVerticesCounts[c].length;h<f;h++)e[o++]=l.ringsVerticesCounts[c][h];for(let h=0,f=s.length;h<f;h+=2)e[o++]=s[h],e[o++]=s[h+1]}}return e}function c4(t){return(JSON.stringify(t).split("").reduce((n,r)=>(n<<5)-n+r.charCodeAt(0),0)>>>0).toString()}function oU(t,e,n,r){if(`${r}radius`in t&&r!=="icon-"){let i=Pn(n,t[`${r}radius`],Ht);if(`${r}radius2`in t){const s=Pn(n,t[`${r}radius2`],Ht);i=`max(${i}, ${s})`}`${r}stroke-width`in t&&(i=`(${i} + ${Pn(n,t[`${r}stroke-width`],Ht)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${i} * 2. + 0.5)`)}if(`${r}scale`in t){const i=Pn(n,t[`${r}scale`],ou);e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${i}`)}`${r}displacement`in t&&e.setSymbolOffsetExpression(Pn(n,t[`${r}displacement`],Cl)),`${r}rotation`in t&&e.setSymbolRotationExpression(Pn(n,t[`${r}rotation`],Ht)),`${r}rotate-with-view`in t&&e.setSymbolRotateWithView(!!t[`${r}rotate-with-view`])}function Mce(t,e,n,r,i){let s="vec4(0.)";if(e!==null&&(s=e),n!==null&&r!==null){const l=`smoothstep(-${r} + 0.63, -${r} - 0.58, ${t})`;s=`mix(${n}, ${s}, ${l})`}const o=`(1.0 - smoothstep(-0.63, 0.58, ${t}))`;let a=`${s} * vec4(1.0, 1.0, 1.0, ${o})`;return i!==null&&(a=`${a} * vec4(1.0, 1.0, 1.0, ${i})`),a}function aU(t,e,n,r,i){const s=new Image;s.crossOrigin=t[`${r}cross-origin`]===void 0?"anonymous":t[`${r}cross-origin`],ur(typeof t[`${r}src`]=="string",`WebGL layers do not support expressions for the ${r}src style property`),s.src=t[`${r}src`],n[`u_texture${i}_size`]=()=>s.complete?[s.width,s.height]:[0,0],e.addUniform(`u_texture${i}_size`,"vec2");const o=`u_texture${i}_size`;return n[`u_texture${i}`]=s,e.addUniform(`u_texture${i}`,"sampler2D"),o}function lU(t,e,n,r,i){let s=Pn(n,t[`${e}offset`],ou);if(`${e}offset-origin`in t)switch(t[`${e}offset-origin`]){case"top-right":s=`vec2(${r}.x, 0.) + ${i} * vec2(-1., 0.) + ${s} * vec2(-1., 1.)`;break;case"bottom-left":s=`vec2(0., ${r}.y) + ${i} * vec2(0., -1.) + ${s} * vec2(1., -1.)`;break;case"bottom-right":s=`${r} - ${i} - ${s}`;break}return s}function ECe(t,e,n,r){r.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,oU(t,e,r,"circle-");let i=null;"circle-opacity"in t&&(i=Pn(r,t["circle-opacity"],Ht));let s="coordsPx";"circle-scale"in t&&(s=`coordsPx / ${Pn(r,t["circle-scale"],ou)}`);let o=null;"circle-fill-color"in t&&(o=Pn(r,t["circle-fill-color"],Si));let a=null;"circle-stroke-color"in t&&(a=Pn(r,t["circle-stroke-color"],Si));let l=Pn(r,t["circle-radius"],Ht),c=null;"circle-stroke-width"in t&&(c=Pn(r,t["circle-stroke-width"],Ht),l=`(${l} + ${c} * 0.5)`);const u=`circleDistanceField(${s}, ${l})`,h=Mce(u,o,a,c,i);e.setSymbolColorExpression(h)}function SCe(t,e,n,r){r.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,r.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,r.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,oU(t,e,r,"shape-");let i=null;"shape-opacity"in t&&(i=Pn(r,t["shape-opacity"],Ht));let s="coordsPx";"shape-scale"in t&&(s=`coordsPx / ${Pn(r,t["shape-scale"],ou)}`);let o=null;"shape-fill-color"in t&&(o=Pn(r,t["shape-fill-color"],Si));let a=null;"shape-stroke-color"in t&&(a=Pn(r,t["shape-stroke-color"],Si));let l=null;"shape-stroke-width"in t&&(l=Pn(r,t["shape-stroke-width"],Ht));const c=Pn(r,t["shape-points"],Ht);let u="0.";"shape-angle"in t&&(u=Pn(r,t["shape-angle"],Ht));let h,f=Pn(r,t["shape-radius"],Ht);if(l!==null&&(f=`${f} + ${l} * 0.5`),"shape-radius2"in t){let y=Pn(r,t["shape-radius2"],Ht);l!==null&&(y=`${y} + ${l} * 0.5`),h=`starDistanceField(${s}, ${c}, ${f}, ${y}, ${u})`}else h=`regularDistanceField(${s}, ${c}, ${f}, ${u})`;const g=Mce(h,o,a,l,i);e.setSymbolColorExpression(g)}function TCe(t,e,n,r){let i="vec4(1.0)";"icon-color"in t&&(i=Pn(r,t["icon-color"],Si)),"icon-opacity"in t&&(i=`${i} * vec4(1.0, 1.0, 1.0, ${Pn(r,t["icon-opacity"],Ht)})`);const s=c4(t["icon-src"]),o=aU(t,e,n,"icon-",s);if(e.setSymbolColorExpression(`${i} * texture2D(u_texture${s}, v_texCoord)`).setSymbolSizeExpression(o),"icon-width"in t&&"icon-height"in t&&e.setSymbolSizeExpression(`vec2(${Pn(r,t["icon-width"],Ht)}, ${Pn(r,t["icon-height"],Ht)})`),"icon-offset"in t&&"icon-size"in t){const a=Pn(r,t["icon-size"],Cl),l=e.getSymbolSizeExpression();e.setSymbolSizeExpression(a);const c=lU(t,"icon-",r,"v_quadSizePx",a);e.setTextureCoordinateExpression(`(vec4((${c}).xyxy) + vec4(0., 0., ${a})) / (${l}).xyxy`)}if(oU(t,e,r,"icon-"),"icon-anchor"in t){const a=Pn(r,t["icon-anchor"],Cl);let l="1.0";"icon-scale"in t&&(l=Pn(r,t["icon-scale"],ou));let c;t["icon-anchor-x-units"]==="pixels"&&t["icon-anchor-y-units"]==="pixels"?c=`${a} * ${l}`:t["icon-anchor-x-units"]==="pixels"?c=`${a} * vec2(vec2(${l}).x, v_quadSizePx.y)`:t["icon-anchor-y-units"]==="pixels"?c=`${a} * vec2(v_quadSizePx.x, vec2(${l}).x)`:c=`${a} * v_quadSizePx`;let u=`v_quadSizePx * vec2(0.5, -0.5) + ${c} * vec2(-1., 1.)`;if("icon-anchor-origin"in t)switch(t["icon-anchor-origin"]){case"top-right":u=`v_quadSizePx * -0.5 + ${c}`;break;case"bottom-left":u=`v_quadSizePx * 0.5 - ${c}`;break;case"bottom-right":u=`v_quadSizePx * vec2(-0.5, 0.5) + ${c} * vec2(1., -1.)`;break}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${u}`)}}function kCe(t,e,n,r){if("stroke-color"in t&&e.setStrokeColorExpression(Pn(r,t["stroke-color"],Si)),"stroke-pattern-src"in t){const i=c4(t["stroke-pattern-src"]),s=aU(t,e,n,"stroke-pattern-",i);let o=s,a="vec2(0.)";"stroke-pattern-offset"in t&&"stroke-pattern-size"in t&&(o=Pn(r,t["stroke-pattern-size"],Cl),a=lU(t,"stroke-pattern-",r,s,o));let l="0.";"stroke-pattern-spacing"in t&&(l=Pn(r,t["stroke-pattern-spacing"],Ht));let c="0.";"stroke-pattern-start-offset"in t&&(c=Pn(r,t["stroke-pattern-start-offset"],Ht)),r.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float startOffsetPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = (currentLengthPx - startOffsetPx) * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  float isInsideOfPattern = step(uCoordPx, sampleSize.x);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  vCoordPx = clamp(vCoordPx, 0.5, sampleSize.y - 0.5);
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return texture2D(texture, texCoord) * vec4(1.0, 1.0, 1.0, isInsideOfPattern);
}`;const u=`u_texture${i}`;let h="1.";"stroke-color"in t&&(h=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${h} * sampleStrokePattern(${u}, ${s}, ${a}, ${o}, ${l}, ${c}, currentLengthPx, currentRadiusRatio, v_width)`),r.functions.computeStrokePatternLength=`float computeStrokePatternLength(vec2 sampleSize, float spacingPx, float lineWidth) {
  float patternLengthPx = sampleSize.x / sampleSize.y * lineWidth;
  return patternLengthPx + spacingPx;
}`,e.setStrokePatternLengthExpression(`computeStrokePatternLength(${o}, ${l}, v_width)`)}if("stroke-width"in t&&e.setStrokeWidthExpression(Pn(r,t["stroke-width"],Ht)),"stroke-offset"in t&&e.setStrokeOffsetExpression(Pn(r,t["stroke-offset"],Ht)),"stroke-line-cap"in t&&e.setStrokeCapExpression(Pn(r,t["stroke-line-cap"],Bs)),"stroke-line-join"in t&&e.setStrokeJoinExpression(Pn(r,t["stroke-line-join"],Bs)),"stroke-miter-limit"in t&&e.setStrokeMiterLimitExpression(Pn(r,t["stroke-miter-limit"],Ht)),"stroke-line-dash"in t){r.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType, float lineWidth) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${Hf("square")}) {
    distanceSegment -= lineWidth * 0.5;
  } else if (capType == ${Hf("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - lineWidth * 0.5);
  }
  return distanceSegment;
}`;let i=t["stroke-line-dash"].map(y=>Pn(r,y,Ht));i.length%2===1&&(i=[...i,...i]);let s="0.";"stroke-line-dash-offset"in t&&(s=Pn(r,t["stroke-line-dash-offset"],Ht));const a=`dashDistanceField_${c4(t["stroke-line-dash"])}`,l=i.map((y,_)=>`float dashLength${_}`).join(", "),c=i.map((y,_)=>`dashLength${_}`).join(" + ");let u="0.",h=`getSingleDashDistance(distance, radius, ${u}, dashLength0, totalDashLength, capType, lineWidth)`;for(let y=2;y<i.length;y+=2)u=`${u} + dashLength${y-2} + dashLength${y-1}`,h=`min(${h}, getSingleDashDistance(distance, radius, ${u}, dashLength${y}, totalDashLength, capType, lineWidth))`;r.functions[a]=`float ${a}(float distance, float radius, float capType, float lineWidth, ${l}) {
  float totalDashLength = ${c};
  return ${h};
}`;const f=i.map((y,_)=>`${y}`).join(", ");e.setStrokeDistanceFieldExpression(`${a}(currentLengthPx + ${s}, currentRadiusPx, capType, v_width, ${f})`);let g=i.join(" + ");e.getStrokePatternLengthExpression()&&(r.functions.combinePatternLengths=`float combinePatternLengths(float patternLength1, float patternLength2) {
  return patternLength1 * patternLength2;
}`,g=`combinePatternLengths(${e.getStrokePatternLengthExpression()}, ${g})`),e.setStrokePatternLengthExpression(g)}}function ACe(t,e,n,r){if("fill-color"in t&&e.setFillColorExpression(Pn(r,t["fill-color"],Si)),"fill-pattern-src"in t){const i=c4(t["fill-pattern-src"]),s=aU(t,e,n,"fill-pattern-",i);let o=s,a="vec2(0.)";"fill-pattern-offset"in t&&"fill-pattern-size"in t&&(o=Pn(r,t["fill-pattern-size"],Cl),a=lU(t,"fill-pattern-",r,s,o)),r.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return texture2D(texture, (samplePos + textureOffset) / textureSize);
}`;const l=`u_texture${i}`;let c="1.";"fill-color"in t&&(c=e.getFillColorExpression()),e.setFillColorExpression(`${c} * sampleFillPattern(${l}, ${s}, ${a}, ${o}, pxOrigin, pxPos)`)}}function DZ(t,e,n){const r=Tce(),i=new Rce,s={};if("icon-src"in t?TCe(t,i,s,r):"shape-points"in t?SCe(t,i,s,r):"circle-radius"in t&&ECe(t,i,s,r),kCe(t,i,s,r),ACe(t,i,s,r),n){const l=Pn(r,n,Rs);i.setFragmentDiscardExpression(`!${l}`)}const o={};function a(l,c,u,h){if(!r[l])return;const f=p8(u),g=iU(u);i.addAttribute(`a_${c}`,f),o[c]={size:g,callback:h}}return a("geometryType",Ace,Bs,l=>Nk(BG(l.getGeometry()))),a("featureId",kce,Bs|Ht,l=>{const c=l.getId()??null;return typeof c=="string"?Nk(c):c}),Ice(i,r),{builder:i,attributes:{...o,...Cce(r)},uniforms:{...s,...Pce(r,e)}}}const ICe=[];let oj;function PCe(){return oj||(oj=yCe()),oj}let CCe=0;const Dc={POSITION:"a_position",LOCAL_POSITION:"a_localPosition",SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",MEASURE_START:"a_measureStart",MEASURE_END:"a_measureEnd",ANGLE_TANGENT_SUM:"a_angleTangentSum",JOIN_ANGLES:"a_joinAngles",DISTANCE_LOW:"a_distanceLow",DISTANCE_HIGH:"a_distanceHigh"};class RCe{constructor(e,n,r,i){this.helper_,this.hitDetectionEnabled_=!!i,this.styleShaders=MCe(e,n),this.customAttributes_={},this.uniforms_={},this.hitDetectionEnabled_&&(this.customAttributes_.hitColor={callback(){return vCe(this.ref,ICe)},size:2});for(const s of this.styleShaders){for(const o in s.attributes)o in this.customAttributes_||(this.customAttributes_[o]=s.attributes[o]);for(const o in s.uniforms)o in this.uniforms_||(this.uniforms_[o]=s.uniforms[o])}this.renderPasses_=this.styleShaders.map(s=>{const o={},a=Object.entries(this.customAttributes_).map(([l,c])=>({name:l in s.attributes||l==="hitColor"?`a_${l}`:null,size:c.size||1,type:Io.FLOAT}));return s.builder.getFillVertexShader()&&(o.fillRenderPass={vertexShader:s.builder.getFillVertexShader(),fragmentShader:s.builder.getFillFragmentShader(),attributesDesc:[{name:Dc.POSITION,size:2,type:Io.FLOAT},...a],instancedAttributesDesc:[],instancePrimitiveVertexCount:3}),s.builder.getStrokeVertexShader()&&(o.strokeRenderPass={vertexShader:s.builder.getStrokeVertexShader(),fragmentShader:s.builder.getStrokeFragmentShader(),attributesDesc:[{name:Dc.LOCAL_POSITION,size:2,type:Io.FLOAT}],instancedAttributesDesc:[{name:Dc.SEGMENT_START,size:2,type:Io.FLOAT},{name:Dc.MEASURE_START,size:1,type:Io.FLOAT},{name:Dc.SEGMENT_END,size:2,type:Io.FLOAT},{name:Dc.MEASURE_END,size:1,type:Io.FLOAT},{name:Dc.JOIN_ANGLES,size:2,type:Io.FLOAT},{name:Dc.DISTANCE_LOW,size:1,type:Io.FLOAT},{name:Dc.DISTANCE_HIGH,size:1,type:Io.FLOAT},{name:Dc.ANGLE_TANGENT_SUM,size:1,type:Io.FLOAT},...a],instancePrimitiveVertexCount:6}),s.builder.getSymbolVertexShader()&&(o.symbolRenderPass={vertexShader:s.builder.getSymbolVertexShader(),fragmentShader:s.builder.getSymbolFragmentShader(),attributesDesc:[{name:Dc.LOCAL_POSITION,size:2,type:Io.FLOAT}],instancedAttributesDesc:[{name:Dc.POSITION,size:2,type:Io.FLOAT},...a],instancePrimitiveVertexCount:6}),o}),this.hasFill_=this.renderPasses_.some(s=>s.fillRenderPass),this.hasStroke_=this.renderPasses_.some(s=>s.strokeRenderPass),this.hasSymbol_=this.renderPasses_.some(s=>s.symbolRenderPass),this.setHelper(r)}async generateBuffers(e,n){if(e.isEmpty())return null;const r=this.generateRenderInstructions_(e,n),[i,s,o]=await Promise.all([this.generateBuffersForType_(r.polygonInstructions,"Polygon",n),this.generateBuffersForType_(r.lineStringInstructions,"LineString",n),this.generateBuffersForType_(r.pointInstructions,"Point",n)]),a=Sk(Hs(),n);return{polygonBuffers:i,lineStringBuffers:s,pointBuffers:o,invertVerticesTransform:a}}generateRenderInstructions_(e,n){const r=this.hasFill_?bCe(e.polygonBatch,new Float32Array(0),this.customAttributes_,n):null,i=this.hasStroke_?wCe(e.lineStringBatch,new Float32Array(0),this.customAttributes_,n):null,s=this.hasSymbol_?xCe(e.pointBatch,new Float32Array(0),this.customAttributes_,n):null;return{polygonInstructions:r,lineStringInstructions:i,pointInstructions:s}}generateBuffersForType_(e,n,r){if(e===null)return null;const i=CCe++;let s;switch(n){case"Polygon":s=sj.GENERATE_POLYGON_BUFFERS;break;case"LineString":s=sj.GENERATE_LINE_STRING_BUFFERS;break;case"Point":s=sj.GENERATE_POINT_BUFFERS;break}const o={id:i,type:s,renderInstructions:e.buffer,renderInstructionsTransform:r,customAttributesSize:Q5(this.customAttributes_)},a=PCe();return a.postMessage(o,[e.buffer]),e=null,new Promise(l=>{const c=u=>{const h=u.data;if(h.id!==i||(a.removeEventListener("message",c),!this.helper_.getGL()))return;const f=new Q6(ZG,J6).fromArrayBuffer(h.indicesBuffer),g=new Q6(i4,J6).fromArrayBuffer(h.vertexAttributesBuffer),y=new Q6(i4,J6).fromArrayBuffer(h.instanceAttributesBuffer);this.helper_.flushBufferData(f),this.helper_.flushBufferData(g),this.helper_.flushBufferData(y),l([f,g,y])};a.addEventListener("message",c)})}render(e,n,r){for(const i of this.renderPasses_)i.fillRenderPass&&this.renderInternal_(e.polygonBuffers[0],e.polygonBuffers[1],e.polygonBuffers[2],i.fillRenderPass,n,r),i.strokeRenderPass&&this.renderInternal_(e.lineStringBuffers[0],e.lineStringBuffers[1],e.lineStringBuffers[2],i.strokeRenderPass,n,r),i.symbolRenderPass&&this.renderInternal_(e.pointBuffers[0],e.pointBuffers[1],e.pointBuffers[2],i.symbolRenderPass,n,r)}renderInternal_(e,n,r,i,s,o){const a=e.getSize();if(a===0)return;const l=i.instancedAttributesDesc.length;if(this.helper_.useProgram(i.program,s),this.helper_.bindBuffer(n),this.helper_.bindBuffer(e),this.helper_.enableAttributes(i.attributesDesc),this.helper_.bindBuffer(r),this.helper_.enableAttributesInstanced(i.instancedAttributesDesc),o(),l){const c=i.instancedAttributesDesc.reduce((h,f)=>h+(f.size||1),0),u=r.getSize()/c;this.helper_.drawElementsInstanced(0,a,u)}else this.helper_.drawElements(0,a)}setHelper(e,n=null){this.helper_=e;for(const r of this.renderPasses_)r.fillRenderPass&&(r.fillRenderPass.program=this.helper_.getProgram(r.fillRenderPass.fragmentShader,r.fillRenderPass.vertexShader)),r.strokeRenderPass&&(r.strokeRenderPass.program=this.helper_.getProgram(r.strokeRenderPass.fragmentShader,r.strokeRenderPass.vertexShader)),r.symbolRenderPass&&(r.symbolRenderPass.program=this.helper_.getProgram(r.symbolRenderPass.fragmentShader,r.symbolRenderPass.vertexShader));this.helper_.addUniforms(this.uniforms_),n&&(n.polygonBuffers&&(this.helper_.flushBufferData(n.polygonBuffers[0]),this.helper_.flushBufferData(n.polygonBuffers[1]),this.helper_.flushBufferData(n.polygonBuffers[2])),n.lineStringBuffers&&(this.helper_.flushBufferData(n.lineStringBuffers[0]),this.helper_.flushBufferData(n.lineStringBuffers[1]),this.helper_.flushBufferData(n.lineStringBuffers[2])),n.pointBuffers&&(this.helper_.flushBufferData(n.pointBuffers[0]),this.helper_.flushBufferData(n.pointBuffers[1]),this.helper_.flushBufferData(n.pointBuffers[2])))}}function MCe(t,e){const n=Array.isArray(t)?t:[t];if("style"in n[0]){const r=[],i=n,s=[];for(const o of i){const a=Array.isArray(o.style)?o.style:[o.style];let l=o.filter;o.else&&s.length&&(l=["all",...s.map(u=>["!",u])],o.filter&&l.push(o.filter),l.length<3&&(l=l[1])),o.filter&&s.push(o.filter);const c=a.map(u=>DZ(u,e,l));r.push(...c)}return r}return"builder"in n[0]?n:n.map(r=>DZ(r,e,null))}const qh=new Uint8Array(4);class NCe{constructor(e,n){this.helper_=e;const r=e.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.depthbuffer_=r.createRenderbuffer(),this.size_=n||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){Kd(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,n=this.helper_.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.readPixels(0,0,e[0],e[1],n.RGBA,n.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,n){if(e<0||n<0||e>this.size_[0]||n>=this.size_[1])return qh[0]=0,qh[1]=0,qh[2]=0,qh[3]=0,qh;this.readAll();const r=Math.floor(e)+(this.size_[1]-Math.floor(n)-1)*this.size_[0];return qh[0]=this.data_[r*4],qh[1]=this.data_[r*4+1],qh[2]=this.data_[r*4+2],qh[3]=this.data_[r*4+3],qh}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const e=this.size_,n=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.viewport(0,0,e[0],e[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture_,0),n.bindRenderbuffer(n.RENDERBUFFER,this.depthbuffer_),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e[0],e[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}function OCe(t,e){const n=t.viewState.projection,i=e.getSource().getWrapX()&&n.canWrapX(),s=n.getExtent(),o=t.extent,a=i?Xn(s):null,l=i?Math.ceil((o[2]-s[2])/a)+1:1;return[i?Math.floor((o[0]-s[0])/a):0,l,a]}const y_={...Ef,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class LCe extends eU{constructor(e,n){const r={[y_.RENDER_EXTENT]:[0,0,0,0],[y_.PATTERN_ORIGIN]:[0,0],[y_.GLOBAL_ALPHA]:1};super(e,{uniforms:r,postProcesses:n.postProcesses}),this.hitDetectionEnabled_=!n.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=Wa(),this.currentTransform_=Hs(),this.tmpCoords_=[0,0],this.tmpTransform_=Hs(),this.tmpMat4_=gce(),this.currentFrameStateTransform_=Hs(),this.styleVariables_={},this.style_=[],this.styleRenderer_=null,this.buffers_=null,this.applyOptions_(n),this.batch_=new l4,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(e){const n=this.getLayer().getSource();let r;this.batch_.addFeatures(n.getFeatures(),r),this.sourceListenKeys_=[Yn(n,so.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,r)),Yn(n,so.CHANGEFEATURE,this.handleSourceFeatureChanged_.bind(this,r),this),Yn(n,so.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Yn(n,so.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(e){this.styleVariables_=e.variables,this.style_=e.style}createRenderers_(){this.buffers_=null,this.styleRenderer_=new RCe(this.style_,this.styleVariables_,this.helper,this.hitDetectionEnabled_)}reset(e){this.applyOptions_(e),this.helper&&this.createRenderers_(),super.reset(e)}afterHelperCreated(){this.styleRenderer_?this.styleRenderer_.setHelper(this.helper,this.buffers_):this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new NCe(this.helper))}handleSourceFeatureAdded_(e,n){const r=n.feature;this.batch_.addFeature(r,e)}handleSourceFeatureChanged_(e,n){const r=n.feature;this.batch_.changeFeature(r,e)}handleSourceFeatureDelete_(e){const n=e.feature;this.batch_.removeFeature(n)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(e){Ele(this.tmpTransform_,this.currentFrameStateTransform_),ble(this.tmpTransform_,e),this.helper.setUniformMatrixValue(y_.PROJECTION_MATRIX,h8(this.tmpMat4_,this.tmpTransform_)),Sk(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(y_.SCREEN_TO_WORLD_MATRIX,h8(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,Sk(this.tmpTransform_,e),Zi(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(y_.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(e){const n=this.helper.getGL();this.preRender(n,e);const[r,i,s]=OCe(e,this.getLayer());this.helper.prepareDraw(e),this.renderWorlds(e,!1,r,i,s),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const o=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,r,i,s),this.hitRenderTarget_.clearCachedData()),this.postRender(n,e),o}prepareFrameInternal(e){this.initialFeaturesAdded_||(this.addInitialFeatures_(e),this.initialFeaturesAdded_=!0);const n=this.getLayer(),r=n.getSource(),i=e.viewState,s=!e.viewHints[Is.ANIMATING]&&!e.viewHints[Is.INTERACTING],o=!A1(this.previousExtent_,e.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),s&&(o||a)){const l=i.projection,c=i.resolution,u=n instanceof Z5?n.getRenderBuffer():0,h=oh(e.extent,u*c);r.loadFeatures(h,c,l),this.ready=!1;const f=this.helper.makeProjectionTransform(e,Hs());this.styleRenderer_.generateBuffers(this.batch_,f).then(g=>{this.buffers_&&this.disposeBuffers(this.buffers_),this.buffers_=g,this.ready=!0,this.getLayer().changed()}),this.previousExtent_=e.extent.slice()}return!0}renderWorlds(e,n,r,i,s){let o=r;n&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0));do this.helper.makeProjectionTransform(e,this.currentFrameStateTransform_),sAe(this.currentFrameStateTransform_,o*s,0),this.buffers_&&this.styleRenderer_.render(this.buffers_,e,()=>{this.applyUniforms_(this.buffers_.invertVerticesTransform),this.helper.applyHitDetectionUniform(n)});while(++o<i)}forEachFeatureAtCoordinate(e,n,r,i,s){if(ur(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderer_||!this.hitDetectionEnabled_)return;const o=Zi(n.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],c=_Ce(l),u=this.batch_.getFeatureFromRef(c);if(u)return i(u,this.getLayer(),null)}disposeBuffers(e){const n=r=>{for(const i of r)i&&this.helper.deleteBuffer(i)};e.pointBuffers&&n(e.pointBuffers),e.lineStringBuffers&&n(e.lineStringBuffers),e.polygonBuffers&&n(e.polygonBuffers)}disposeInternal(){this.buffers_&&this.disposeBuffers(this.buffers_),this.sourceListenKeys_&&(this.sourceListenKeys_.forEach(function(e){ni(e)}),this.sourceListenKeys_=null),super.disposeInternal()}renderDeclutter(){}}const gf={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},DCe=["#00f","#0ff","#0f0","#ff0","#f00"];class jCe extends Z5{constructor(e){e=e||{};const n=Object.assign({},e);delete n.gradient,delete n.radius,delete n.blur,delete n.weight,super(n),this.filter_=e.filter??!0,this.styleVariables_=e.variables||{},this.gradient_=null,this.addChangeListener(gf.GRADIENT,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:DCe),this.setBlur(e.blur!==void 0?e.blur:15),this.setRadius(e.radius!==void 0?e.radius:8);const r=e.weight?e.weight:"weight";this.weight_=r,this.setRenderOrder(null)}getBlur(){return this.get(gf.BLUR)}getGradient(){return this.get(gf.GRADIENT)}getRadius(){return this.get(gf.RADIUS)}handleGradientChanged_(){this.gradient_=$Ce(this.getGradient())}setBlur(e){const n=this.get(gf.BLUR);if(this.set(gf.BLUR,e),typeof e=="number"&&typeof n=="number"){this.changed();return}this.clearRenderer()}setGradient(e){this.set(gf.GRADIENT,e)}setRadius(e){const n=this.get(gf.RADIUS);if(this.set(gf.RADIUS,e),typeof e=="number"&&typeof n=="number"){this.changed();return}this.clearRenderer()}setFilter(e){this.filter_=e,this.changed(),this.clearRenderer()}setWeight(e){this.weight_=e,this.changed(),this.clearRenderer()}createRenderer(){const e=new Rce,n=Tce(),r=Pn(n,this.filter_,Rs);let i=Pn(n,this.getRadius(),Ht),s=Pn(n,this.getBlur(),Ht);const o={};typeof this.getBlur()=="number"&&(s="a_blur",o.a_blur=()=>this.getBlur(),e.addUniform("a_blur","float")),typeof this.getRadius()=="number"&&(i="a_radius",o.a_radius=()=>this.getRadius(),e.addUniform("a_radius","float"));const a={};let l=null;if(typeof this.weight_=="string"||typeof this.weight_=="function"){const h=typeof this.weight_=="string"?f=>f.get(this.weight_):this.weight_;a.prop_weight={size:1,callback:f=>{const g=h(f);return g!==void 0?ri(g,0,1):1}},l="a_prop_weight",e.addAttribute("a_prop_weight","float")}else{const h=["clamp",this.weight_,0,1];l=Pn(n,h,Ht)}e.addFragmentShaderFunction(`float getBlurSlope() {
  float blur = max(1., ${s});
  float radius = ${i};
  return radius / blur;
}`).setSymbolSizeExpression(`vec2(${i} + ${s}) * 2.`).setSymbolColorExpression(`vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * getBlurSlope()) * ${l})`).setStrokeColorExpression(`vec4(smoothstep(0., 1., (1. - length(currentRadiusPx * 2. / v_width)) * getBlurSlope()) * ${l})`).setStrokeWidthExpression(`(${i} + ${s}) * 2.`).setFillColorExpression(`vec4(${l})`).setFragmentDiscardExpression(`!${r}`),Ice(e,n);const c=Cce(n),u=Pce(n,this.styleVariables_);return new LCe(this,{className:this.getClassName(),variables:this.styleVariables_,style:{builder:e,attributes:{...c,...a},uniforms:{...u,...o}},disableHitDetection:!1,postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}renderDeclutter(){}}function $Ce(t){const r=Os(1,256),i=r.createLinearGradient(0,0,1,256),s=1/(t.length-1);for(let o=0,a=t.length;o<a;++o)i.addColorStop(o*s,t[o]);return r.fillStyle=i,r.fillRect(0,0,1,256),r.canvas}class FCe extends zG{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const n=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,o=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(n.extent!==void 0&&(l=op(l,ah(n.extent,i.projection))),!a[Is.ANIMATING]&&!a[Is.INTERACTING]&&!ib(l))if(o){const c=i.projection,u=o.getImage(l,s,r,c);u&&(this.loadImage(u)?this.image=u:u.getState()===zt.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const n=this.frameState;if(!n)return null;const r=this.getLayer(),i=Zi(n.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!k1(s,i))return null;const o=this.image.getExtent(),a=this.image.getImage(),l=Xn(o),c=Math.floor(a.width*((i[0]-o[0])/l));if(c<0||c>=a.width)return null;const u=Ms(o),h=Math.floor(a.height*((o[3]-i[1])/u));return h<0||h>=a.height?null:this.getImageData(a,c,h)}renderFrame(e,n){const r=this.image,i=r.getExtent(),s=r.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=r.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],u=e.pixelRatio,h=e.viewState,f=h.center,g=h.resolution,y=u*o/(g*l),_=u*a/(g*l);this.prepareContainer(e,n);const b=this.context.canvas.width,T=this.context.canvas.height,A=this.getRenderContext(e);let I=!1,P=!0;if(c.extent){const O=ah(c.extent,h.projection);P=la(O,e.extent),I=P&&!ng(O,e.extent),I&&this.clipUnrotated(A,e,O)}const M=r.getImage(),V=mu(this.tempTransform,b/2,T/2,y,_,0,l*(i[0]-f[0])/o,l*(f[1]-i[3])/a);this.renderedResolution=a*u/l;const C=M.width*V[0],N=M.height*V[3];if(this.getLayer().getSource().getInterpolate()||(A.imageSmoothingEnabled=!1),this.preRender(A,e),P&&C>=.5&&N>=.5){const O=V[4],L=V[5],F=c.opacity;F!==1&&(A.save(),A.globalAlpha=F),A.drawImage(M,0,0,+M.width,+M.height,O,L,C,N),F!==1&&A.restore()}return this.postRender(this.context,e),I&&A.restore(),A.imageSmoothingEnabled=!0,this.container}}class VCe extends aI{constructor(e){e=e||{},super(e)}}class zCe extends VCe{constructor(e){super(e)}createRenderer(){return new FCe(this)}getData(e){return super.getData(e)}}function aj(t,e,n){if(!(n in t))return t[n]=new Set([e]),!0;const r=t[n],i=r.has(e);return i||r.add(e),!i}function GCe(t,e,n){const r=t[n];return r?r.delete(e):!1}function jZ(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=op(e,ah(n.extent,t.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=op(e,i))}return e}class UCe extends zG{constructor(e,n){super(e),n=n||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Wa(),this.tempTileRange_=new QG(0,0,0,0),this.tempTileCoord_=a4(0,0,0);const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileCache_=new OZ(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new OZ(512)),this.sourceTileCache_}getOrCreateTile(e,n,r,i){const s=this.tileCache_,a=this.getLayer().getSource(),l=uM(a,a.getKey(),e,n,r);let c;if(s.containsKey(l))c=s.get(l);else{const u=i.viewState.projection,h=a.getProjection();if(c=a.getTile(e,n,r,i.pixelRatio,u,!h||i1(h,u)?void 0:this.getSourceTileCache()),!c)return null;s.set(l,c)}return c}getTile(e,n,r,i){const s=this.getOrCreateTile(e,n,r,i);return s||null}getData(e){const n=this.frameState;if(!n)return null;const r=this.getLayer(),i=Zi(n.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!k1(s,i))return null;const o=n.viewState,a=r.getRenderSource(),l=a.getTileGridForProjection(o.projection),c=a.getTilePixelRatio(n.pixelRatio);for(let u=l.getZForResolution(o.resolution);u>=l.getMinZoom();--u){const h=l.getTileCoordForCoordAndZ(i,u),f=this.getTile(u,h[1],h[2],n);if(!f||f.getState()!==hn.LOADED)continue;const g=l.getOrigin(u),y=$a(l.getTileSize(u)),_=l.getResolution(u);let b;if(f instanceof _ce||f instanceof Ece)b=f.getImage();else if(f instanceof RZ){if(b=d8(f.getData()),!b)continue}else continue;const T=Math.floor(c*((i[0]-g[0])/_-h[1]*y[0])),A=Math.floor(c*((g[1]-i[1])/_-h[2]*y[1])),I=Math.round(c*a.getGutterForProjection(o.projection));return this.getImageData(b,T+I,A+I)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const n=this.getLayer().getSource();if(!n)return!1;const r=n.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===n.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,n,r,i,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),u=en(l);u in e.wantedTiles||(e.wantedTiles[u]={});const h=e.wantedTiles[u],f=a.getMapInternal(),g=Math.max(r-s,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),f?f.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),y=o.rotation,_=y?cle(o.center,o.resolution,y,e.size):void 0;for(let b=r;b>=g;--b){const T=c.getTileRangeForExtentAndZ(n,b,this.tempTileRange_),A=c.getResolution(b);for(let I=T.minX;I<=T.maxX;++I)for(let P=T.minY;P<=T.maxY;++P){if(y&&!c.tileCoordIntersectsViewport([b,I,P],_))continue;const M=this.getTile(b,I,P,e);if(!M||!aj(i,M,b))continue;const C=M.getKey();if(h[C]=!0,M.getState()===hn.IDLE&&!e.tileQueue.isKeyQueued(C)){const N=a4(b,I,P,this.tempTileCoord_);e.tileQueue.enqueue([M,u,c.getTileCoordCenter(N),A])}}}}findStaleTile_(e,n){const r=this.tileCache_,i=e[0],s=e[1],o=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const c=uM(this.getLayer().getSource(),a[l],i,s,o);if(r.containsKey(c)){const u=r.peek(c);if(u.getState()===hn.LOADED)return u.endTransition(en(this)),aj(n,u,i),!0}}return!1}findAltTiles_(e,n,r,i){const s=e.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let u=s.minX;u<=s.maxX;++u)for(let h=s.minY;h<=s.maxY;++h){const f=uM(l,c,r,u,h);let g=!1;if(a.containsKey(f)){const y=a.peek(f);y.getState()===hn.LOADED&&(aj(i,y,r),g=!0)}g||(o=!1)}return o}renderFrame(e,n){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,o=i.resolution,a=i.center,l=e.pixelRatio,c=this.getLayer(),u=c.getSource(),h=u.getTileGridForProjection(s),f=h.getZForResolution(o,u.zDirection),g=h.getResolution(f),y=u.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==y&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=y):this.renderedSourceKey_=y;let _=e.extent;const b=u.getTilePixelRatio(l);this.prepareContainer(e,n);const T=this.context.canvas.width,A=this.context.canvas.height,I=r.extent&&ah(r.extent);I&&(_=op(_,ah(r.extent)));const P=g*T/2/b,M=g*A/2/b,V=[a[0]-P,a[1]-M,a[0]+P,a[1]+M],C={};this.renderedTiles.length=0;const N=c.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const fe=h.getZForResolution(i.nextResolution,u.zDirection),ge=jZ(e,e.nextExtent);this.enqueueTiles(e,ge,fe,C,N)}const O=jZ(e,_);if(this.enqueueTiles(e,O,f,C,0),N>0&&setTimeout(()=>{this.enqueueTiles(e,O,f-1,C,N-1)},0),!(f in C))return this.container;const L=en(this),F=e.time;for(const fe of C[f]){const ge=fe.getState();if(ge===hn.EMPTY)continue;const Se=fe.tileCoord;if(ge===hn.LOADED&&fe.getAlpha(L,F)===1){fe.endTransition(L);continue}if(ge!==hn.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Se,C)){GCe(C,fe,f),e.animate=!0;continue}if(this.findAltTiles_(h,Se,f+1,C))continue;const ne=h.getMinZoom();for(let ie=f-1;ie>=ne&&!this.findAltTiles_(h,Se,ie,C);--ie);}const G=g/o*l/b,U=this.getRenderContext(e);mu(this.tempTransform,T/2,A/2,G,G,0,-T/2,-A/2),r.extent&&this.clipUnrotated(U,e,I),u.getInterpolate()||(U.imageSmoothingEnabled=!1),this.preRender(U,e);const he=Object.keys(C).map(Number);he.sort(sp);let Ie;const ze=[],Oe=[];for(let fe=he.length-1;fe>=0;--fe){const ge=he[fe],Se=u.getTilePixelSize(ge,l,s),W=h.getResolution(ge)/g,ne=Se[0]*W*G,ie=Se[1]*W*G,le=h.getTileCoordForCoordAndZ(uv(V),ge),xe=h.getTileCoordExtent(le),qe=Zi(this.tempTransform,[b*(xe[0]-V[0])/g,b*(V[3]-xe[3])/g]),Ke=b*u.getGutterForProjection(s);for(const ke of C[ge]){if(ke.getState()!==hn.LOADED)continue;const be=ke.tileCoord,Dt=le[1]-be[1],Ye=Math.round(qe[0]-(Dt-1)*ne),cn=le[2]-be[2],jt=Math.round(qe[1]-(cn-1)*ie),gn=Math.round(qe[0]-Dt*ne),wn=Math.round(qe[1]-cn*ie),pt=Ye-gn,hr=jt-wn,zn=he.length===1;let Hn=!1;Ie=[gn,wn,gn+pt,wn,gn+pt,wn+hr,gn,wn+hr];for(let ei=0,xo=ze.length;ei<xo;++ei)if(!zn&&ge<Oe[ei]){const Rr=ze[ei];la([gn,wn,gn+pt,wn+hr],[Rr[0],Rr[3],Rr[4],Rr[7]])&&(Hn||(U.save(),Hn=!0),U.beginPath(),U.moveTo(Ie[0],Ie[1]),U.lineTo(Ie[2],Ie[3]),U.lineTo(Ie[4],Ie[5]),U.lineTo(Ie[6],Ie[7]),U.moveTo(Rr[6],Rr[7]),U.lineTo(Rr[4],Rr[5]),U.lineTo(Rr[2],Rr[3]),U.lineTo(Rr[0],Rr[1]),U.clip())}ze.push(Ie),Oe.push(ge),this.drawTile(ke,e,gn,wn,pt,hr,Ke,zn),Hn&&U.restore(),this.renderedTiles.unshift(ke),this.updateUsedTiles(e.usedTiles,u,ke)}}if(this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!A1(this.renderedExtent_,V),this.renderedExtent_=V,this.renderedPixelRatio=l,this.postRender(this.context,e),r.extent&&U.restore(),U.imageSmoothingEnabled=!0,this.renderComplete){const fe=(ge,Se)=>{const Z=en(u),W=Se.wantedTiles[Z],ne=W?Object.keys(W).length:0;this.updateCacheSize(ne),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(fe)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,n,r,i,s,o,a,l){let c;if(e instanceof RZ){if(c=d8(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;const u=this.getRenderContext(n),h=en(this),f=n.layerStatesArray[n.layerIndex],g=f.opacity*(l?e.getAlpha(h,n.time):1),y=g!==u.globalAlpha;y&&(u.save(),u.globalAlpha=g),u.drawImage(c,a,a,c.width-2*a,c.height-2*a,r,i,s,o),y&&u.restore(),g!==f.opacity?n.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,n,r){const i=en(n);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const MC={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BCe extends aI{constructor(e){e=e||{};const n=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(MC.PRELOAD)}setPreload(e){this.set(MC.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(MC.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(MC.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class $f extends BCe{constructor(e){super(e)}createRenderer(){return new UCe(this,{cacheSize:this.getCacheSize()})}}function m8(t){return Array.isArray(t)?Math.min(...t):t}const v_=[0,0,0],um=5;class Nce{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ur(vke(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!n)n=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ur(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=uv(r)),ur(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ur(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:YG,ur(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const o=new QG(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const a=this.getTileRangeForExtentAndZ(r,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,n,r){const i=this.getTileRangeForExtentAndZ(e,n);for(let s=i.minX,o=i.maxX;s<=o;++s)for(let a=i.minY,l=i.maxY;a<=l;++a)r([n,s,a])}forEachTileCoordParentTileRange(e,n,r,i){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,i);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=p_(o,o,a,a,r)):s=this.getTileRangeForExtentAndZ(l,c,r),n(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return p_(s,s+1,o,o+1,n)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,r){if(n>this.maxZoom||n<this.minZoom)return null;const i=e[0],s=e[1],o=e[2];if(n===i)return p_(s,o,s,o,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-i),c=Math.floor(s*l),u=Math.floor(o*l);if(n<i)return p_(c,c,u,u,r);const h=Math.floor(l*(s+1))-1,f=Math.floor(l*(o+1))-1;return p_(c,h,u,f,r)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,r)}getTileRangeForExtentAndZ(e,n,r){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,v_);const i=v_[1],s=v_[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,v_);const o=v_[1],a=v_[2];return p_(i,o,s,a,r)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=$a(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*i[0]*r,n[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,n){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=$a(this.getTileSize(e[0]),this.tmpSize_),o=r[0]+e[1]*s[0]*i,a=r[1]-(e[2]+1)*s[1]*i,l=o+s[0]*i,c=a+s[1]*i;return _p(o,a,l,c,n)}getTileCoordForCoordAndResolution(e,n,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,r)}getTileCoordForXYAndResolution_(e,n,r,i,s){const o=this.getZForResolution(r),a=r/this.getResolution(o),l=this.getOrigin(o),c=$a(this.getTileSize(o),this.tmpSize_);let u=a*(e-l[0])/r/c[0],h=a*(l[1]-n)/r/c[1];return i?(u=rg(u,um)-1,h=rg(h,um)-1):(u=xC(u,um),h=xC(h,um)),a4(o,u,h,s)}getTileCoordForXYAndZ_(e,n,r,i,s){const o=this.getOrigin(r),a=this.getResolution(r),l=$a(this.getTileSize(r),this.tmpSize_);let c=(e-o[0])/a/l[0],u=(o[1]-n)/a/l[1];return i?(c=rg(c,um)-1,u=rg(u,um)-1):(c=xC(c,um),u=xC(u,um)),a4(r,c,u,s)}getTileCoordForCoordAndZ(e,n,r){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const r=L5(this.resolutions_,e,n||0);return ri(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return Ile(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,r=new Array(n);for(let i=this.minZoom;i<n;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function Oce(t){let e=t.getDefaultTileGrid();return e||(e=KCe(t),t.setDefaultTileGrid(e)),e}function WCe(t,e,n){const r=e[0],i=t.getTileCoordCenter(e),s=cU(n);if(!k1(s,i)){const o=Xn(s),a=Math.ceil((s[0]-i[0])/o);return i[0]+=o*a,t.getTileCoordForCoordAndZ(i,r)}return e}function HCe(t,e,n,r){r=r!==void 0?r:"top-left";const i=Lce(t,e,n);return new Nce({extent:t,origin:bke(t,r),resolutions:i,tileSize:n})}function qCe(t){const e=t||{},n=e.extent||Jr("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Lce(n,e.maxZoom,e.tileSize,e.maxResolution)};return new Nce(r)}function Lce(t,e,n,r){e=e!==void 0?e:RPe,n=$a(n!==void 0?n:YG);const i=Ms(t),s=Xn(t);r=r>0?r:Math.max(s/n[0],i/n[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=r/Math.pow(2,l);return a}function KCe(t,e,n,r){const i=cU(t);return HCe(i,e,n,r)}function cU(t){t=Jr(t);let e=t.getExtent();if(!e){const n=180*i2.degrees/t.getMetersPerUnit();e=_p(-n,-n,n,n)}return e}function uU(t,e){const n=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&n.push(i+"="+encodeURIComponent(e[i]))});const r=n.join("&");return t=t.replace(/[?&]$/,""),t+=t.includes("?")?"&":"?",t+r}const YCe=/\{z\}/g,XCe=/\{x\}/g,ZCe=/\{y\}/g,JCe=/\{-y\}/g;function QCe(t,e,n,r,i){return t.replace(YCe,e.toString()).replace(XCe,n.toString()).replace(ZCe,r.toString()).replace(JCe,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function eRe(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const r=n[1].charCodeAt(0),i=n[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const r=parseInt(n[2],10);for(let i=parseInt(n[1],10);i<=r;i++)e.push(t.replace(n[0],i.toString()));return e}return e.push(t),e}function tRe(t,e){return(function(n,r,i){if(!n)return;let s;const o=n[0];if(e){const a=e.getFullTileRange(o);a&&(s=a.getHeight()-1)}return QCe(t,o,n[1],n[2],s)})}function nRe(t,e){const n=t.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=tRe(t[i],e);return rRe(r)}function rRe(t){return t.length===1?t[0]:(function(e,n,r){if(!e)return;const i=Sce(e),s=Eg(i,t.length);return t[s](e,n,r)})}class iRe extends FG{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&$a(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tmpSize=[0,0],this.key_=e.key||en(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,r,i,s,o){return Sn()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:Oce(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(n),o=$a(i.getTileSize(e),this.tmpSize);return s==1?o:_Ie(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){const r=n!==void 0?n:this.getProjection(),i=n!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=WCe(i,e,r)),iCe(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class sRe extends Ac{constructor(e,n){super(e),this.tile=n}}const lj={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class hU extends iRe{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===hU.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,r=en(n),i=n.getState();let s;i==hn.LOADING?(this.tileLoadingKeys_[r]=!0,s=lj.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==hn.ERROR?lj.TILELOADERROR:i==hn.LOADED?lj.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new sRe(s,n))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=eRe(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(nRe(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,r){}}class Dce extends hU{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:jce,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:_ce,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!i1(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||i1(n,e)))return this.tileGrid;const r=en(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Oce(e)),this.tileGridForProjection[r]}createTile_(e,n,r,i,s,o){const a=[e,n,r],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,i,s):void 0,u=new this.tileClass(a,c!==void 0?hn.IDLE:hn.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(En.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,n,r,i,s,o){const a=this.getProjection();if(!a||!s||i1(a,s))return this.getTileInternal(e,n,r,i,a||s);const l=[e,n,r],c=this.getKey(),u=this.getTileGridForProjection(a),h=this.getTileGridForProjection(s),f=this.getTileCoordForTileUrlFunction(l,s),g=new Ece(a,u,s,h,l,f,this.getTilePixelRatio(i),this.getGutter(),(y,_,b,T)=>this.getTileInternal(y,_,b,T,a,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return g.key=c,g}getTileInternal(e,n,r,i,s,o){const a=this.getKey(),l=uM(this,a,e,n,r);if(o&&o.containsKey(l))return o.get(l);const c=this.createTile_(e,n,r,i,s,a);return o?.set(l,c),c}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,n){const r=Jr(e);if(r){const i=en(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=n)}}}function jce(t,e){if(uc){const n=t.getCrossOrigin();let r="same-origin",i="same-origin";n==="anonymous"||n===""?(r="cors",i="omit"):n==="use-credentials"&&(r="cors",i="include"),fetch(e,{mode:r,credentials:i}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{const o=t.getImage();o.width=s.width,o.height=s.height,o.getContext("2d").drawImage(s,0,0),s.close?.(),o.dispatchEvent(new Event("load"))}).catch(()=>{t.getImage().dispatchEvent(new Event("error"))});return}t.getImage().src=e}class Gm extends Dce{constructor(e){e=e||{};const n=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:qCe({extent:cU(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const oRe="modulepreload",aRe=function(t){return"/detect/"+t},$Z={},ve=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=l(n.map(c=>{if(c=aRe(c),c in $Z)return;$Z[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":oRe,u||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((g,y)=>{f.addEventListener("load",g),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};class lRe extends jle{constructor(e,n,r,i,s,o,a){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let c=n.getExtent();c&&n.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const u=c?op(r,c):r,h=vh(u),f=o4(e,n,h,i),g=bce,y=new wce(e,n,u,l,f*g,i),_=y.calculateSourceExtent(),b=ib(_)?null:o(_,f,s),T=b?zt.IDLE:zt.EMPTY,A=b?b.getPixelRatio():1;super(r,i,A,T),this.targetProj_=n,this.maxSourceExtent_=l,this.triangulation_=y,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=b,this.sourcePixelRatio_=A,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==zt.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==zt.LOADED){const n=Xn(this.targetExtent_)/this.targetResolution_,r=Ms(this.targetExtent_)/this.targetResolution_;this.canvas_=xce(n,r,this.sourcePixelRatio_,m8(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==zt.IDLE){this.state=zt.LOADING,this.changed();const e=this.sourceImage_.getState();e==zt.LOADED||e==zt.ERROR?this.reproject_():(this.sourceListenerKey_=Yn(this.sourceImage_,En.CHANGE,n=>{const r=this.sourceImage_.getState();(r==zt.LOADED||r==zt.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){ni(this.sourceListenerKey_),this.sourceListenerKey_=null}}const ag=4,cj={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class cRe extends Ac{constructor(e,n){super(e),this.image=n}}class uRe extends FG{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const n=this.getResolutions();if(n){const r=L5(n,e,0);e=n[r]}return e}getImage(e,n,r,i){const s=this.getProjection();if(!s||!i||i1(s,i))return s&&(i=s),this.getImageInternal(e,n,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&i1(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==n&&A1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new lRe(s,i,e,n,r,(o,a,l)=>this.getImageInternal(o,a,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,n,r,i){if(this.loader){const s=$ce(e,n,r,1),o=this.findNearestResolution(n);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&ng(this.wantedExtent_,s)||ng(this.image.getExtent(),s))&&(this.wantedResolution_&&m8(this.wantedResolution_)===o||m8(this.image.getResolution())===o)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new jle(s,o,r,this.loader),this.image.addEventListener(En.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const n=e.target;let r;switch(n.getState()){case zt.LOADING:this.loading=!0,r=cj.IMAGELOADSTART;break;case zt.LOADED:this.loading=!1,r=cj.IMAGELOADEND;break;case zt.ERROR:this.loading=!1,r=cj.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new cRe(r,n))}}function hRe(t,e){t.getImage().src=e}function $ce(t,e,n,r){const i=e/n,s=vh(t),o=rg(Xn(t)/i,ag),a=rg(Ms(t)/i,ag),l=rg((r-1)*o/2,ag),c=o+2*l,u=rg((r-1)*a/2,ag),h=a+2*u;return U3(s,i,0,[c,h])}function dRe(t,e,n,r,i,s){const o=i.getCode().split(/:(?=\d+$)/).pop(),a=n/r,l=[B3(Xn(e)/a,ag),B3(Ms(e)/a,ag)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=o,s.IMAGESR=o,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const c=t.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return uU(c,s)}function fRe(t){const e=t.load?t.load:Fle,n=Jr(t.projection||"EPSG:3857"),r=t.ratio??1.5,i=t.crossOrigin??null;return function(s,o,a){a=t.hidpi?a:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,t.params),s=$ce(s,o,a,r);const c=dRe(t.url,s,o,a,n,l),u=new Image;return u.crossOrigin=i,e(u,c).then(h=>{const f=Xn(s)/h.width*a;return{image:h,extent:s,resolution:f,pixelRatio:a}})}}class pRe extends uRe{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:hRe,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=fRe({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),Fle(s))})),super.getImageInternal(e,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const g8="1.3.0";function mRe(t,e,n,r,i){i.WIDTH=n[0],i.HEIGHT=n[1];const s=r.getAxisOrientation(),o=dle(i.VERSION,"1.3")>=0;i[o?"CRS":"SRS"]=r.getCode();const a=o&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return i.BBOX=a.join(","),uU(t,i)}function gRe(t,e,n,r,i,s,o){s=Object.assign({REQUEST:"GetMap"},s);const a=e/n,l=[B3(Xn(t)/a,ag),B3(Ms(t)/a,ag)];if(n!=1)switch(o){case"geoserver":const u=90*n+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+u:s.FORMAT_OPTIONS="dpi:"+u;break;case"mapserver":s.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":s.DPI=90*n;break;default:throw new Error("Unknown `serverType` configured")}return mRe(i,t,l,r,s)}function FZ(t,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:g8,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},t)}const yRe='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class vRe extends Gm{constructor(e){e=e||{};let n;e.attributions!==void 0?n=e.attributions:n=[yRe];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(s,o)=>{const a=s.getImage();!uc&&a instanceof HTMLImageElement&&(a.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||jce)(s,o)},transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}const u4=1/0;class _Re{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,lv(this.queuedElements_)}dequeue(){const e=this.elements_,n=this.priorities_,r=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){ur(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(e);return n!=u4?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const n=this.elements_,r=this.priorities_,i=n.length,s=n[e],o=r[e],a=e;for(;e<i>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<i&&r[c]<r[l]?c:l;n[e]=n[u],r[e]=r[u],e=u}n[e]=s,r[e]=o,this.siftDown_(a,e)}siftDown_(e,n){const r=this.elements_,i=this.priorities_,s=r[n],o=i[n];for(;n>e;){const a=this.getParentIndex_(n);if(i[a]>o)r[n]=r[a],i[n]=i[a],n=a;else break}r[n]=s,i[n]=o}reprioritize(){const e=this.priorityFunction_,n=this.elements_,r=this.priorities_;let i=0;const s=n.length;let o,a,l;for(a=0;a<s;++a)o=n[a],l=e(o),l==u4?delete this.queuedElements_[this.keyFunction_(o)]:(r[i]=l,n[i++]=o);n.length=i,r.length=i,this.heapify_()}}class xRe extends _Re{constructor(e,n){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const n=super.enqueue(e);return n&&e[0].addEventListener(En.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const n=e.target,r=n.getState();if(r===hn.LOADED||r===hn.ERROR||r===hn.EMPTY){r!==hn.ERROR&&n.removeEventListener(En.CHANGE,this.boundHandleTileChange_);const i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let r=0;for(;this.tilesLoading_<e&&r<n&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===hn.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function wRe(t,e,n,r,i){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][e.getKey()])return u4;const s=t.viewState.center,o=r[0]-s[0],a=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(o*o+a*a)/i}class bRe extends Dce{constructor(e){e=e||{};const n=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=n,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Wa(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,n,r,i){const s=Jr(r),o=this.getProjection()||s;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const l=ob(e,s,o),c=o4(o,s,e,n),u=a.getZForResolution(c,this.zDirection),h=a.getResolution(u),f=a.getTileCoordForCoordAndZ(l,u);if(a.getResolutions().length<=f[0])return;let g=a.getTileCoordExtent(f,this.tmpExtent_);const y=this.gutter_;y!==0&&(g=oh(g,h*y,g));const _={QUERY_LAYERS:this.params_.LAYERS};Object.assign(_,FZ(this.params_,"GetFeatureInfo"),i);const b=Math.floor((l[0]-g[0])/h),T=Math.floor((g[3]-l[1])/h);return _[this.v13_?"I":"X"]=b,_[this.v13_?"J":"Y"]=T,this.getRequestUrl_(f,g,1,o||s,_)}getLegendUrl(e,n){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:g8,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*i/s}return Object.assign(r,n),uU(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,n,r,i,s){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const l=Eg(Sce(e),o.length);a=o[l]}return gRe(n,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,a,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const n=[];for(const r in this.params_)n[e++]=r+"-"+this.params_[r];return n.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||g8;this.v13_=dle(e,"1.3")>=0}tileUrlFunction(e,n,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);const s=i.getResolution(e[0]);let o=i.getTileCoordExtent(e,this.tmpExtent_);const a=this.gutter_;a!==0&&(o=oh(o,s*a,o));const l=Object.assign({},FZ(this.params_,"GetMap"));return this.getRequestUrl_(e,o,n,r,l)}}class q_ extends Ac{constructor(e,n,r){super(e),this.map=n,this.frameState=r!==void 0?r:null}}class Ff extends q_{constructor(e,n,r,i,s,o){super(e,n,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const or={SINGLECLICK:"singleclick",CLICK:En.CLICK,DBLCLICK:En.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},y8={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class ERe extends JA{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Yn(r,y8.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Yn(r,y8.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(En.TOUCHMOVE,this.boundHandleTouchMove_,Ole?{passive:!1}:!1)}emulateClick_(e){let n=new Ff(or.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Ff(or.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Ff(or.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const n=e,r=n.pointerId;if(n.type==or.POINTERUP||n.type==or.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==n.target){delete this.trackedTouches_[i];break}}else(n.type==or.POINTERDOWN||n.type==or.POINTERMOVE)&&(this.trackedTouches_[r]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const n=new Ff(or.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ni),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const n=new Ff(or.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Yn(r,or.POINTERMOVE,this.handlePointerMove_,this),Yn(r,or.POINTERUP,this.handlePointerUp_,this),Yn(this.element_,or.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Yn(this.element_.getRootNode(),or.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const n=new Ff(or.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Ff(or.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ni(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(En.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ni(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ni),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Im={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Qo={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};class eO extends Yd{constructor(e){super();const n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let n=0,r=this.listenerKeys.length;n<r;++n)ni(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=e,e){const n=this.target_??e.getOverlayContainerStopEvent();this.element&&n.appendChild(this.element),this.render!==wk&&this.listenerKeys.push(Yn(e,Im.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class SRe extends eO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const n=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:n+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=i):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(En.CLICK,this.handleClick_.bind(this),!1);const c=n+" "+rI+" "+LG+(this.collapsed_&&this.collapsible_?" "+ZX:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const n=this.getMap().getAllLayers(),r=new Set(n.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!n.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=await Promise.all(this.collectSourceAttributions_(e).map(i=>sle(()=>i))),r=n.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Kd(n,this.renderedAttributions_)){AAe(this.ulElement_);for(let i=0,s=n.length;i<s;++i){const o=document.createElement("li");o.innerHTML=n[i],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(ZX),this.collapsed_?YX(this.collapseLabel_,this.label_):YX(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class TRe extends eO{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const n=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(En.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+rI+" "+LG,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(SC)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const r=n.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:ab}):n.setRotation(0))}render(e){const n=e.frameState;if(!n)return;const r=n.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(SC);!s&&r===0?this.element.classList.add(SC):s&&r!==0&&this.element.classList.remove(SC)}this.label_.style.transform=i}this.rotation_=r}}class kRe extends eO{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const n=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=i,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(En.CLICK,this.handleClick_.bind(this,r),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(En.CLICK,this.handleClick_.bind(this,-r),!1);const f=n+" "+rI+" "+LG,g=this.element;g.className=f,g.appendChild(u),g.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:ab})):r.setZoom(s)}}}function ARe(t){t=t||{};const e=new ja;return(t.zoom===void 0||t.zoom)&&e.push(new kRe(t.zoomOptions)),(t.rotate===void 0||t.rotate)&&e.push(new TRe(t.rotateOptions)),(t.attribution===void 0||t.attribution)&&e.push(new SRe(t.attributionOptions)),e}class IRe{constructor(e,n,r){this.decay_=e,this.minVelocity_=n,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let r=n-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[n+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[n]-this.points_[r],o=this.points_[n+1]-this.points_[r+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const v8={ACTIVE:"active"};class lb extends Yd{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(v8.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(v8.ACTIVE,e)}setMap(e){this.map_=e}}function PRe(t,e,n){const r=t.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:kPe,center:t.getConstrainedCenter(i)})}}function dU(t,e,n,r){const i=t.getZoom();if(i===void 0)return;const s=t.getConstrainedZoom(i+e),o=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:r!==void 0?r:250,easing:ab})}class CRe extends lb{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==or.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,o=r.shiftKey?-this.delta_:this.delta_,a=i.getView();dU(a,o,s,this.duration_),r.preventDefault(),n=!0}return!n}}function _8(t){const e=arguments;return function(n){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](n),!!r);++i);return r}}const RRe=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},MRe=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},NRe=function(t){const e=t.map.getTargetElement(),n=e.getRootNode(),r=t.map.getOwnerDocument().activeElement;return n instanceof ShadowRoot?n.host.contains(r):e.contains(r)},Fce=function(t){const e=t.map.getTargetElement(),n=e.getRootNode();return(n instanceof ShadowRoot?n.host:e).hasAttribute("tabindex")?NRe(t):!0},rw=Fg,Vce=function(t){const e=t.originalEvent;return"pointerId"in e&&e.button==0&&!(TAe&&Mle&&e.ctrlKey)},h4=rb,zce=function(t){return t.type==or.SINGLECLICK},fU=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},ORe=function(t){const e=t.originalEvent;return Mle?e.metaKey:e.ctrlKey},d4=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Gce=function(t){const e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},uj=function(t){const e=t.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},Uce=function(t){const e=t.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class fv extends lb{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==or.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==or.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==or.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,n=this.stopDown(r)}else e.type==or.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function pU(t){const e=t.length;let n=0,r=0;for(let i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return{clientX:n/e,clientY:r/e}}class LRe extends fv{constructor(e){super({stopDown:rb}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=e.condition?e.condition:_8(fU,Uce);this.condition_=e.onFocusOnly?_8(Fce,n):n,this.noKinetic_=!1}handleDragEvent(e){const n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const r=this.targetPointers,i=n.getEventPixel(pU(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();Ike(s,a.getResolution()),mG(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const n=e.map,r=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=r.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-i*Math.cos(s),a[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:ab})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class DRe extends fv{constructor(e){e=e||{},super({stopDown:rb}),this.condition_=e.condition?e.condition:MRe,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!uj(e))return;const n=e.map,r=n.getView();if(r.getConstraints().rotation===KG)return;const i=n.getSize(),s=e.pixel,o=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return uj(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return uj(e)&&Vce(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class jRe extends ZA{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,n=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],n[0])+r,i.top=Math.min(e[1],n[1])+r,i.width=Math.abs(n[0]-e[0])+r,i.height=Math.abs(n[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,n=this.endPixel_,i=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Pl([i])}getGeometry(){return this.geometry_}}const __={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class NE extends Ac{constructor(e,n,r){super(e),this.coordinate=n,this.mapBrowserEvent=r}}class $Re extends fv{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new jRe(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??Vce,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,r){const i=r[0]-n[0],s=r[1]-n[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new NE(__.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new NE(n?__.BOXEND:__.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new NE(__.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new NE(__.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new NE(__.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class FRe extends $Re{constructor(e){e=e||{};const n=e.condition?e.condition:d4;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),o=r.getResolutionForExtentInternal(s),a=r.getResolution()/o;i=i.clone(),i.scale(a*a)}r.fitInternal(i,{duration:this.duration_,easing:ab})}}const U0={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class VRe extends lb{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return fU(n)&&Gce(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==En.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==U0.DOWN||i==U0.LEFT||i==U0.RIGHT||i==U0.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;i==U0.DOWN?c=-a:i==U0.LEFT?l=-a:i==U0.RIGHT?l=a:c=a;const u=[l,c];mG(u,o.getRotation()),PRe(o,u,this.duration_),r.preventDefault(),n=!0}}return!n}}class zRe extends lb{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!ORe(n)&&Gce(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==En.KEYDOWN||e.type==En.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,o=i==="+"?this.delta_:-this.delta_,a=s.getView();dU(a,o,void 0,this.duration_),r.preventDefault(),n=!0}}return!n}}const GRe=40,URe=300;class BRe extends lb{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const n=e.condition?e.condition:rw;this.condition_=e.onFocusOnly?_8(Fce,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==En.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=GRe;break;case WheelEvent.DOM_DELTA_PAGE:s*=URe;break}if(s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=r.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){const n=e.getView();n.getAnimating()&&n.cancelAnimations();let r=-ri(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),dU(n,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class WRe extends fv{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=rb),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==KG&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(pU(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class HRe extends fv{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=rb),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,o=r.clientY-i.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(pU(this.targetPointers))),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function qRe(t){t=t||{};const e=new ja,n=new IRe(-.005,.05,100);return(t.altShiftDragRotate===void 0||t.altShiftDragRotate)&&e.push(new DRe),(t.doubleClickZoom===void 0||t.doubleClickZoom)&&e.push(new CRe({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan===void 0||t.dragPan)&&e.push(new LRe({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate===void 0||t.pinchRotate)&&e.push(new WRe),(t.pinchZoom===void 0||t.pinchZoom)&&e.push(new HRe({duration:t.zoomDuration})),(t.keyboard===void 0||t.keyboard)&&(e.push(new VRe),e.push(new zRe({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom===void 0||t.mouseWheelZoom)&&e.push(new BRe({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom===void 0||t.shiftDragZoom)&&e.push(new FRe({duration:t.zoomDuration})),e}class KRe extends ZA{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){Sn()}calculateMatrices2D(e){const n=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;mu(r,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),Sk(i,r)}forEachFeatureAtCoordinate(e,n,r,i,s,o,a,l){let c;const u=n.viewState;function h(P,M,V,C){return s.call(o,M,P?V:null,C)}const f=u.projection,g=fle(e.slice(),f),y=[[0,0]];if(f.canWrapX()&&i){const P=f.getExtent(),M=Xn(P);y.push([-M,0],[M,0])}const _=n.layerStatesArray,b=_.length,T=[],A=[];for(let P=0;P<y.length;P++)for(let M=b-1;M>=0;--M){const V=_[M],C=V.layer;if(C.hasRenderer()&&XG(V,u)&&a.call(l,C)){const N=C.getRenderer(),O=C.getSource();if(N&&O){const L=O.getWrapX()?g:e,F=h.bind(null,V.managed);A[0]=L[0]+y[P][0],A[1]=L[1]+y[P][1],c=N.forEachFeatureAtCoordinate(A,n,r,F,T)}if(c)return c}}if(T.length===0)return;const I=1/T.length;return T.forEach((P,M)=>P.distanceSq+=M*I),T.sort((P,M)=>P.distanceSq-M.distanceSq),T.some(P=>c=P.callback(P.feature,P.layer,P.geometry)),c}hasFeatureAtCoordinate(e,n,r,i,s,o){return this.forEachFeatureAtCoordinate(e,n,r,i,Fg,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){Sn()}scheduleExpireIconCache(e){su.canExpireCache()&&e.postRenderFunctions.push(YRe)}}function YRe(t,e){su.expire()}class XRe extends KRe{constructor(e){super(e),this.fontChangeListenerKey_=Yn(B_,n2.PROPERTYCHANGE,e.redrawText,e),this.element_=uc?Lle():document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=rI+" ol-layers";const r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,n){const r=this.getMap();if(r.hasListener(e)){const i=new dT(e,void 0,n);r.dispatchEvent(i)}}disposeInternal(){ni(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(uo.PRECOMPOSE,e);const n=e.layerStatesArray.sort((c,u)=>c.zIndex-u.zIndex);n.some(c=>c.layer instanceof Z5&&c.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let o=null;for(let c=0,u=n.length;c<u;++c){const h=n[c];e.layerIndex=c;const f=h.layer,g=f.getSourceState();if(!XG(h,i)||g!="ready"&&g!="undefined"){f.unrender();continue}const y=f.render(e,o);y&&(y!==o&&(this.children_.push(y),o=y),s.push(h))}this.declutter(e,s),IAe(this.element_,this.children_);const l=this.getMap().getTargetElement();if(sg(l)){const c=l.getContext("2d");for(const u of this.children_){const h=u.firstElementChild||u,f=u.style.backgroundColor;if(f&&(!sg(h)||h.width>0)&&(c.fillStyle=f,c.fillRect(0,0,l.width,l.height)),sg(h)&&h.width>0){const g=u.style.opacity||h.style.opacity;c.globalAlpha=g===""?1:Number(g);const y=h.style.transform;if(y)c.setTransform(...t8(y));else{const _=parseFloat(h.style.width)/h.width,b=parseFloat(h.style.height)/h.height;c.setTransform(_,0,0,b,0,0)}c.drawImage(h,0,0)}}c.globalAlpha=1,c.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(uo.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,n){if(e.declutter){for(let r=n.length-1;r>=0;--r){const i=n[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}n.forEach(r=>r.layer.renderDeferred(e))}}}function Bce(t){if(t instanceof aI){t.setMapInternal(null);return}t instanceof J5&&t.getLayers().forEach(Bce)}function Wce(t,e){if(t instanceof aI){t.setMapInternal(e);return}if(t instanceof J5){const n=t.getLayers().getArray();for(let r=0,i=n.length;r<i;++r)Wce(n[r],e)}}let ZRe=class extends Yd{constructor(e){super(),e=e||{},this.on,this.once,this.un;const n=JRe(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:kAe,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Hs(),this.pixelToCoordinateTransform_=Hs(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,uc||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,uc||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=n.controls||(uc?new ja:ARe()),this.interactions=n.interactions||(uc?new ja:qRe({onFocusOnly:!0})),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new xRe(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Qo.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Qo.VIEW,this.handleViewChanged_),this.addChangeListener(Qo.SIZE,this.handleSizeChanged_),this.addChangeListener(Qo.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const r=this;e.view&&!(e.view instanceof md)&&e.view.then(function(i){r.setView(new md(i))}),this.controls.addEventListener(Cs.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(Cs.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(Cs.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(Cs.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(Cs.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(Cs.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Wce(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,o=r.layerFilter!==void 0?r.layerFilter:Fg,a=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,a,n,null,o,null)}getFeaturesAtPixel(e,n){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},n),r}getAllLayers(){const e=[];function n(r){r.forEach(function(i){i instanceof J5?n(i.getLayers()):e.push(i)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const i=n.layerFilter!==void 0?n.layerFilter:Fg,s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,o,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],o=r.height/i[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-r.left)/s,(a.clientY-r.top)/o]}getTarget(){return this.get(Qo.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return P1(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const n=this.frameState_;return n?Zi(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Qo.LAYERGROUP)}setLayers(e){const n=this.getLayerGroup();if(e instanceof ja){n.setLayers(e);return}const r=n.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,r=e.length;n<r;++n){const i=e[n];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const o=i.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const n=Li(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){const n=this.frameState_;return n?Zi(n.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Qo.SIZE)}getView(){return this.get(Qo.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,r,i){return wRe(this.frameState_,e,n,r,i)}handleBrowserEvent(e,n){n=n||e.type;const r=new Ff(n,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const n=e.originalEvent,r=n.type;if(r===y8.POINTERDOWN||r===En.WHEEL||r===En.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,o=n.target,a=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const o=e.viewHints;if(o[Is.ANIMATING]||o[Is.INTERACTING]){const a=Date.now()-e.time>8;i=a?0:8,s=a?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(uo.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(uo.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new q_(Im.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new q_(Im.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)ni(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(En.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(En.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!sg(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(sg(n)||n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new XRe(this)),!sg(n)){this.mapBrowserEventHandler_=new ERe(this,this.moveTolerance_);for(const i in or)this.mapBrowserEventHandler_.addEventListener(or[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(En.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(En.WHEEL,this.boundHandleBrowserEvent_,Ole?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const i=n.getRootNode();r=i instanceof ShadowRoot?i.host:n}if(this.targetChangeHandlerKeys_=[Yn(r,En.KEYDOWN,this.handleBrowserEvent,this),Yn(r,En.KEYPRESS,this.handleBrowserEvent,this)],n instanceof HTMLElement){const i=n.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_?.observe(n)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ni(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ni(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Yn(e,n2.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Yn(e,En.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ni),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new zm("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Yn(e,n2.PROPERTYCHANGE,this.render,this),Yn(e,En.CHANGE,this.render,this),Yn(e,"addlayer",this.handleLayerAdd_,this),Yn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let n=0,r=e.length;n<r;++n){const i=e[n].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Bce(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const n=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(n!==void 0&&lZ(n)&&r&&r.isDef()){const o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:U3(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:en(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=U3(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!ib(this.previousExtent_)&&!A1(s.extent,this.previousExtent_))&&(this.dispatchEvent(new q_(Im.MOVESTART,this,i)),this.previousExtent_=eI(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Is.ANIMATING]&&!s.viewHints[Is.INTERACTING]&&!A1(s.extent,this.previousExtent_)&&(this.dispatchEvent(new q_(Im.MOVEEND,this,s)),ale(s.extent,this.previousExtent_))),this.dispatchEvent(new q_(Im.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Im.LOADSTART)||this.hasListener(Im.LOADEND)||this.hasListener(uo.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new zm("removelayer",n)),this.set(Qo.LAYERGROUP,e)}setSize(e){this.set(Qo.SIZE,e)}setTarget(e){this.set(Qo.TARGET,e)}setView(e){if(!e||e instanceof md){this.set(Qo.VIEW,e);return}this.set(Qo.VIEW,new md);const n=this;e.then(function(r){n.setView(new md(r))})}updateSize(){const e=this.getTargetElement();let n;if(e){let i,s;if(sg(e))i=e.width,s=e.height;else{const o=getComputedStyle(e);i=e.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),s=e.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth)}!isNaN(i)&&!isNaN(s)&&(n=[Math.max(0,i),Math.max(0,s)],!lZ(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&mle("No map visible because the map container's width or height are 0."))}const r=this.getSize();n&&(!r||!Kd(n,r))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){const n=this.getView();n&&n.setViewportSize(e)}};function JRe(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},r=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new J5({layers:t.layers});n[Qo.LAYERGROUP]=r,n[Qo.TARGET]=t.target,n[Qo.VIEW]=t.view instanceof md?t.view:new md;let i;t.controls!==void 0&&(Array.isArray(t.controls)?i=new ja(t.controls.slice()):(ur(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=t.controls));let s;t.interactions!==void 0&&(Array.isArray(t.interactions)?s=new ja(t.interactions.slice()):(ur(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions));let o;return t.overlays!==void 0?Array.isArray(t.overlays)?o=new ja(t.overlays.slice()):(ur(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new ja,{controls:i,interactions:s,keyboardEventTarget:e,overlays:o,values:n}}const hj="units",QRe=[1,2,5],OE=25.4/.28;class eMe extends eO{constructor(e){e=e||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+rI,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(hj,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(hj)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(hj,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=e.center,r=e.projection,i=this.getUnits(),s=i=="degrees"?"degrees":"m";let o=K3(r,e.resolution,n,s);const a=this.minWidth_*(this.dpi_||OE)/OE,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||OE)/OE:void 0;let c=a*o,u="";if(i=="degrees"){const I=i2.degrees;c*=I,c<I/60?(u="",o*=3600):c<I?(u="",o*=60):u=""}else if(i=="imperial")c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(i=="nautical")o/=1852,u="NM";else if(i=="metric")c<1e-6?(u="nm",o*=1e9):c<.001?(u="m",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3);else if(i=="us")c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(a*o)/Math.log(10)),f,g,y,_=0,b,T;for(;;){y=Math.floor(h/3);const I=Math.pow(10,y);if(f=QRe[(h%3+3)%3]*I,g=Math.round(f/o),isNaN(g)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&g>=l){f=_,g=b,y=T;break}else if(g>=a)break;_=f,b=g,T=y,++h}const A=this.scaleBar_?this.createScaleBar(g,f,u):f.toFixed(y<0?-y:0)+" "+u;this.renderedHTML_!=A&&(this.innerElement_.innerHTML=A,this.renderedHTML_=A),this.renderedWidth_!=g&&(this.innerElement_.style.width=g+"px",this.renderedWidth_=g),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,n,r){const i=this.getScaleForResolution(),s=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const h=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,e,!1,n,r):"")+"</div>")}return l.push(this.createStepText(o,e,!0,n,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,n,r,i,s){const a=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:n/this.scaleBarSteps_*-1,c=e===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${c}px;left: ${r?n+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=K3(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||OE,r=1e3/25.4;return e*r*n}render(e){const n=e.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const tMe={},VZ=t=>{let e;const n=new Set,r=(u,h)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const g=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(y=>y(e,g))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(tMe?"commercial":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},nMe=t=>t?VZ(t):VZ;var dj={exports:{}},fj={},pj={exports:{}},mj={};var zZ;function rMe(){if(zZ)return mj;zZ=1;var t=XA();function e(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(h,f){var g=f(),y=r({inst:{value:g,getSnapshot:f}}),_=y[0].inst,b=y[1];return s(function(){_.value=g,_.getSnapshot=f,l(_)&&b({inst:_})},[h,g,f]),i(function(){return l(_)&&b({inst:_}),h(function(){l(_)&&b({inst:_})})},[h]),o(g),g}function l(h){var f=h.getSnapshot;h=h.value;try{var g=f();return!n(h,g)}catch{return!0}}function c(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return mj.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,mj}var GZ;function iMe(){return GZ||(GZ=1,pj.exports=rMe()),pj.exports}var UZ;function sMe(){if(UZ)return fj;UZ=1;var t=XA(),e=iMe();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return fj.useSyncExternalStoreWithSelector=function(c,u,h,f,g){var y=s(null);if(y.current===null){var _={hasValue:!1,value:null};y.current=_}else _=y.current;y=a(function(){function T(V){if(!A){if(A=!0,I=V,V=f(V),g!==void 0&&_.hasValue){var C=_.value;if(g(C,V))return P=C}return P=V}if(C=P,r(I,V))return C;var N=f(V);return g!==void 0&&g(C,N)?(I=V,C):(I=V,P=N)}var A=!1,I,P,M=h===void 0?null:h;return[function(){return T(u())},M===null?void 0:function(){return T(M())}]},[u,h,f,g]);var b=i(c,y[0],y[1]);return o(function(){_.hasValue=!0,_.value=b},[b]),l(b),b},fj}var BZ;function oMe(){return BZ||(BZ=1,dj.exports=sMe()),dj.exports}var aMe=oMe();const lMe=cG(aMe),Hce={},{useDebugValue:cMe}=pke,{useSyncExternalStoreWithSelector:uMe}=lMe;let WZ=!1;const hMe=t=>t;function dMe(t,e=hMe,n){(Hce?"commercial":void 0)!=="production"&&n&&!WZ&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),WZ=!0);const r=uMe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return cMe(r),r}const HZ=t=>{(Hce?"commercial":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?nMe(t):t,n=(r,i)=>dMe(e,r,i);return Object.assign(n,e),n},vo=t=>t?HZ(t):HZ;var qce=Symbol.for("immer-nothing"),qZ=Symbol.for("immer-draftable"),xc=Symbol.for("immer-state");function Qu(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ok=Object.getPrototypeOf;function l2(t){return!!t&&!!t[xc]}function R1(t){return t?Kce(t)||Array.isArray(t)||!!t[qZ]||!!t.constructor?.[qZ]||lI(t)||nO(t):!1}var fMe=Object.prototype.constructor.toString(),KZ=new WeakMap;function Kce(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=KZ.get(n);return r===void 0&&(r=Function.toString.call(n),KZ.set(n,r)),r===fMe}function f4(t,e,n=!0){tO(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function tO(t){const e=t[xc];return e?e.type_:Array.isArray(t)?1:lI(t)?2:nO(t)?3:0}function x8(t,e){return tO(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Yce(t,e,n){const r=tO(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function pMe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function lI(t){return t instanceof Map}function nO(t){return t instanceof Set}function ry(t){return t.copy_||t.base_}function w8(t,e){if(lI(t))return new Map(t);if(nO(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Kce(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[xc];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Ok(t),r)}else{const r=Ok(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function mU(t,e=!1){return rO(t)||l2(t)||!R1(t)||(tO(t)>1&&Object.defineProperties(t,{set:NC,add:NC,clear:NC,delete:NC}),Object.freeze(t),e&&Object.values(t).forEach(n=>mU(n,!0))),t}function mMe(){Qu(2)}var NC={value:mMe};function rO(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var gMe={};function M1(t){const e=gMe[t];return e||Qu(0,t),e}var Lk;function Xce(){return Lk}function yMe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function YZ(t,e){e&&(M1("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function b8(t){E8(t),t.drafts_.forEach(vMe),t.drafts_=null}function E8(t){t===Lk&&(Lk=t.parent_)}function XZ(t){return Lk=yMe(Lk,t)}function vMe(t){const e=t[xc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function ZZ(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[xc].modified_&&(b8(e),Qu(4)),R1(t)&&(t=p4(e,t),e.parent_||m4(e,t)),e.patches_&&M1("Patches").generateReplacementPatches_(n[xc].base_,t,e.patches_,e.inversePatches_)):t=p4(e,n,[]),b8(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==qce?t:void 0}function p4(t,e,n){if(rO(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[xc];if(!i)return f4(e,(s,o)=>JZ(t,i,e,s,o,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return m4(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let o=s,a=!1;i.type_===3&&(o=new Set(s),s.clear(),a=!0),f4(o,(l,c)=>JZ(t,i,s,l,c,n,a),r),m4(t,s,!1),n&&t.patches_&&M1("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function JZ(t,e,n,r,i,s,o){if(i==null||typeof i!="object"&&!o)return;const a=rO(i);if(!(a&&!o)){if(l2(i)){const l=s&&e&&e.type_!==3&&!x8(e.assigned_,r)?s.concat(r):void 0,c=p4(t,i,l);if(Yce(n,r,c),l2(c))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(R1(i)&&!a){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&a)return;p4(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(lI(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&m4(t,i)}}}function m4(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&mU(e,n)}function _Me(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Xce(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=gU;n&&(i=[r],s=Dk);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var gU={get(t,e){if(e===xc)return t;const n=ry(t);if(!x8(n,e))return xMe(t,n,e);const r=n[e];return t.finalized_||!R1(r)?r:r===gj(t.base_,e)?(yj(t),t.copy_[e]=T8(r,t)):r},has(t,e){return e in ry(t)},ownKeys(t){return Reflect.ownKeys(ry(t))},set(t,e,n){const r=Zce(ry(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=gj(ry(t),e),s=i?.[xc];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(pMe(n,i)&&(n!==void 0||x8(t.base_,e)))return!0;yj(t),S8(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return gj(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,yj(t),S8(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ry(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Qu(11)},getPrototypeOf(t){return Ok(t.base_)},setPrototypeOf(){Qu(12)}},Dk={};f4(gU,(t,e)=>{Dk[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Dk.deleteProperty=function(t,e){return Dk.set.call(this,t,e,void 0)};Dk.set=function(t,e,n){return gU.set.call(this,t[0],e,n,t[0])};function gj(t,e){const n=t[xc];return(n?ry(n):t)[e]}function xMe(t,e,n){const r=Zce(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function Zce(t,e){if(!(e in t))return;let n=Ok(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Ok(n)}}function S8(t){t.modified_||(t.modified_=!0,t.parent_&&S8(t.parent_))}function yj(t){t.copy_||(t.copy_=w8(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var wMe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Qu(6),r!==void 0&&typeof r!="function"&&Qu(7);let i;if(R1(e)){const s=XZ(this),o=T8(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?b8(s):E8(s)}return YZ(s,r),ZZ(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===qce&&(i=void 0),this.autoFreeze_&&mU(i,!0),r){const s=[],o=[];M1("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Qu(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){R1(t)||Qu(8),l2(t)&&(t=bMe(t));const e=XZ(this),n=T8(t,void 0);return n[xc].isManual_=!0,E8(e),n}finishDraft(t,e){const n=t&&t[xc];(!n||!n.isManual_)&&Qu(9);const{scope_:r}=n;return YZ(r,e),ZZ(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=M1("Patches").applyPatches_;return l2(t)?r(t,e):this.produce(t,i=>r(i,e))}};function T8(t,e){const n=lI(t)?M1("MapSet").proxyMap_(t,e):nO(t)?M1("MapSet").proxySet_(t,e):_Me(t,e);return(e?e.scope_:Xce()).drafts_.push(n),n}function bMe(t){return l2(t)||Qu(10,t),Jce(t)}function Jce(t){if(!R1(t)||rO(t))return t;const e=t[xc];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=w8(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=w8(t,!0);return f4(n,(i,s)=>{Yce(n,i,Jce(s))},r),e&&(e.finalized_=!1),n}var EMe=new wMe,SMe=EMe.produce;const TMe=t=>(e,n,r)=>(r.setState=(i,s,...o)=>{const a=typeof i=="function"?SMe(i):i;return e(a,s,...o)},t(r.setState,n,r)),cb=TMe,Ps=vo()(cb((t,e)=>({tracking:!1,position:null,heading:null,smoothHeading:null,rawGPSHeading:null,accuracy:null,speed:null,headingSource:null,watchId:null,firstFix:!0,navigationMode:"free",config:{centerOnUser:!0},fetchPassivePosition:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(n=>{t(r=>{r.tracking||(r.position={lat:n.coords.latitude,lng:n.coords.longitude},r.accuracy=n.coords.accuracy)})},()=>{},{enableHighAccuracy:!1,maximumAge:6e4,timeout:1e4})},startTracking:()=>{t(n=>{n.tracking=!0})},stopTracking:()=>{t(n=>{const{watchId:r}=e();r!==null&&navigator.geolocation.clearWatch(r),n.tracking=!1,n.speed=null,n.headingSource=null,n.heading=null,n.smoothHeading=null,n.rawGPSHeading=null,n.watchId=null,n.navigationMode="free"})},updatePosition:n=>{t(r=>{r.position={lat:n.coords.latitude,lng:n.coords.longitude},r.accuracy=n.coords.accuracy,r.speed=n.coords.speed,r.rawGPSHeading=n.coords.heading,n.coords.accuracy!==null&&n.coords.accuracy<20?n.coords.heading!==null&&n.coords.speed!==null&&n.coords.speed>.5?r.headingSource="gps":r.headingSource="compass":r.headingSource=null})},setSmoothedHeading:n=>{t(r=>{r.smoothHeading=n,r.heading=n})},setWatchId:n=>{t(r=>{r.watchId=n})},resetFirstFix:()=>{t(n=>{n.firstFix=!1})},setNavigationMode:n=>{t(r=>{r.navigationMode=n})},toggleNavigationMode:()=>{t(n=>{n.navigationMode=n.navigationMode==="free"?"headingUp":"free"})}}))),Gy={Kansenkaart:{name:"Kansenkaart",factory:async()=>{const{createKansenkaartLayerOL:t}=await ve(async()=>{const{createKansenkaartLayerOL:e}=await import("./kansenkaartOL-ZY8Ps8OZ.js");return{createKansenkaartLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"TMK 1850":{name:"TMK 1850",factory:async()=>null,immediateLoad:!0,tier:"premium"},"Bonnebladen 1900":{name:"Bonnebladen 1900",factory:async()=>null,immediateLoad:!0,tier:"premium"},"AHN 0.5m":{name:"AHN 0.5m",factory:async()=>{const{createAHNLayerOL:t}=await ve(async()=>{const{createAHNLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createAHNLayerOL:e}},[]);return t()},immediateLoad:!0},Geomorfologie:{name:"Geomorfologie",factory:async()=>{const{createGeomorfologieLayerOL:t}=await ve(async()=>{const{createGeomorfologieLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createGeomorfologieLayerOL:e}},[]);return t()},immediateLoad:!0},Bodemkaart:{name:"Bodemkaart",factory:async()=>{const{createBodemkaartLayerOL:t}=await ve(async()=>{const{createBodemkaartLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createBodemkaartLayerOL:e}},[]);return t()},immediateLoad:!0},IKAW:{name:"IKAW",factory:async()=>{const{createIKAWLayerOL:t}=await ve(async()=>{const{createIKAWLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createIKAWLayerOL:e}},[]);return t()},immediateLoad:!0},"FAMKE Steentijd":{name:"FAMKE Steentijd",factory:async()=>{const{createFAMKESteentijdLayerOL:t}=await ve(async()=>{const{createFAMKESteentijdLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createFAMKESteentijdLayerOL:e}},[]);return t()},immediateLoad:!0},"FAMKE IJzertijd":{name:"FAMKE IJzertijd",factory:async()=>{const{createFAMKEIJzertijdLayerOL:t}=await ve(async()=>{const{createFAMKEIJzertijdLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createFAMKEIJzertijdLayerOL:e}},[]);return t()},immediateLoad:!0},Essen:{name:"Essen",factory:async()=>{const{createEssenLayerOL:t}=await ve(async()=>{const{createEssenLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createEssenLayerOL:e}},[]);return t()},immediateLoad:!0},Rijksmonumenten:{name:"Rijksmonumenten",factory:async()=>{const{createRijksmonumentenLayerOL:t}=await ve(async()=>{const{createRijksmonumentenLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createRijksmonumentenLayerOL:e}},[]);return t()},immediateLoad:!0},"Archeo Onderzoeken":{name:"Archeo Onderzoeken",factory:async()=>{const{createArcheoOnderzoekenLayerOL:t}=await ve(async()=>{const{createArcheoOnderzoekenLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createArcheoOnderzoekenLayerOL:e}},[]);return t()},immediateLoad:!0},Werelderfgoed:{name:"Werelderfgoed",factory:async()=>{const{createWerelderfgoedLayerOL:t}=await ve(async()=>{const{createWerelderfgoedLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createWerelderfgoedLayerOL:e}},[]);return t()},immediateLoad:!0},Terpen:{name:"Terpen",factory:async()=>{const{createTerpenLayerOL:t}=await ve(async()=>{const{createTerpenLayerOL:e}=await import("./terpenOL-DWQagX1E.js");return{createTerpenLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},Verdedigingslinies:{name:"Verdedigingslinies",factory:async()=>{const{createLiniesLayerOL:t}=await ve(async()=>{const{createLiniesLayerOL:e}=await import("./verdedigingswerkenOL-BacymvaY.js");return{createLiniesLayerOL:e}},[]);return t()},immediateLoad:!0},Inundatiegebieden:{name:"Inundatiegebieden",factory:async()=>{const{createInundatiesLayerOL:t}=await ve(async()=>{const{createInundatiesLayerOL:e}=await import("./verdedigingswerkenOL-BacymvaY.js");return{createInundatiesLayerOL:e}},[]);return t()},immediateLoad:!0},"Militaire Objecten":{name:"Militaire Objecten",factory:async()=>{const{createMilitaireObjectenLayerOL:t}=await ve(async()=>{const{createMilitaireObjectenLayerOL:e}=await import("./verdedigingswerkenOL-BacymvaY.js");return{createMilitaireObjectenLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 800 n.Chr.":{name:"Paleokaart 800 n.Chr.",factory:async()=>{const{createPaleo800ncLayerOL:t}=await ve(async()=>{const{createPaleo800ncLayerOL:e}=await import("./paleokaartOL-BoQjcAzD.js");return{createPaleo800ncLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 100 n.Chr.":{name:"Paleokaart 100 n.Chr.",factory:async()=>{const{createPaleo100ncLayerOL:t}=await ve(async()=>{const{createPaleo100ncLayerOL:e}=await import("./paleokaartOL-BoQjcAzD.js");return{createPaleo100ncLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 500 v.Chr.":{name:"Paleokaart 500 v.Chr.",factory:async()=>{const{createPaleo500vcLayerOL:t}=await ve(async()=>{const{createPaleo500vcLayerOL:e}=await import("./paleokaartOL-BoQjcAzD.js");return{createPaleo500vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 1500 v.Chr.":{name:"Paleokaart 1500 v.Chr.",factory:async()=>{const{createPaleo1500vcLayerOL:t}=await ve(async()=>{const{createPaleo1500vcLayerOL:e}=await import("./paleokaartOL-BoQjcAzD.js");return{createPaleo1500vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 2750 v.Chr.":{name:"Paleokaart 2750 v.Chr.",factory:async()=>{const{createPaleo2750vcLayerOL:t}=await ve(async()=>{const{createPaleo2750vcLayerOL:e}=await import("./paleokaartOL-BoQjcAzD.js");return{createPaleo2750vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 5500 v.Chr.":{name:"Paleokaart 5500 v.Chr.",factory:async()=>{const{createPaleo5500vcLayerOL:t}=await ve(async()=>{const{createPaleo5500vcLayerOL:e}=await import("./paleokaartOL-BoQjcAzD.js");return{createPaleo5500vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 9000 v.Chr.":{name:"Paleokaart 9000 v.Chr.",factory:async()=>{const{createPaleo9000vcLayerOL:t}=await ve(async()=>{const{createPaleo9000vcLayerOL:e}=await import("./paleokaartOL-BoQjcAzD.js");return{createPaleo9000vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Religieus Erfgoed":{name:"Religieus Erfgoed",factory:async()=>{const{createReligieusErfgoedLayerOL:t}=await ve(async()=>{const{createReligieusErfgoedLayerOL:e}=await import("./religieusErfgoedOL-Cr7azQ4-.js");return{createReligieusErfgoedLayerOL:e}},[]);return t()},immediateLoad:!0},"AHN4 Hoogtekaart Kleur":{name:"AHN4 Hoogtekaart Kleur",factory:async()=>{const{createAHN4ColorElevationLayerOL:t}=await ve(async()=>{const{createAHN4ColorElevationLayerOL:e}=await import("./hillshadeLayers-AKc9gZ4X.js");return{createAHN4ColorElevationLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"AHN4 Hillshade NL":{name:"AHN4 Hillshade NL",factory:async()=>{const{createAHN4HillshadeLayerOL:t}=await ve(async()=>{const{createAHN4HillshadeLayerOL:e}=await import("./hillshadeLayers-AKc9gZ4X.js");return{createAHN4HillshadeLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"AHN4 Multi-Hillshade NL":{name:"AHN4 Multi-Hillshade NL",factory:async()=>{const{createAHN4MultiHillshadeLayerOL:t}=await ve(async()=>{const{createAHN4MultiHillshadeLayerOL:e}=await import("./hillshadeLayers-AKc9gZ4X.js");return{createAHN4MultiHillshadeLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"AHN4 Hillshade Kleur":{name:"AHN4 Hillshade Kleur",factory:async()=>{const{createAHN4ShadedReliefLayerOL:t}=await ve(async()=>{const{createAHN4ShadedReliefLayerOL:e}=await import("./hillshadeLayers-AKc9gZ4X.js");return{createAHN4ShadedReliefLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},Gewaspercelen:{name:"Gewaspercelen",factory:async()=>{const{createGewaspercelenLayerOL:t}=await ve(async()=>{const{createGewaspercelenLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createGewaspercelenLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"Kadastrale Grenzen":{name:"Kadastrale Grenzen",factory:async()=>{const{createKadastraleKaartLayerOL:t}=await ve(async()=>{const{createKadastraleKaartLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createKadastraleKaartLayerOL:e}},[]);return t()},immediateLoad:!0},Scheepswrakken:{name:"Scheepswrakken",factory:async()=>{const{createScheepswrakkenLayerOL:t}=await ve(async()=>{const{createScheepswrakkenLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createScheepswrakkenLayerOL:e}},[]);return t()},immediateLoad:!0},"Woonheuvels ZH":{name:"Woonheuvels ZH",factory:async()=>{const{createWoonheuvelsLayerOL:t}=await ve(async()=>{const{createWoonheuvelsLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createWoonheuvelsLayerOL:e}},[]);return t()},immediateLoad:!0},"Romeinse Forten":{name:"Romeinse Forten",factory:async()=>{const{createRomeinseFortenLayerOL:t}=await ve(async()=>{const{createRomeinseFortenLayerOL:e}=await import("./romeinseFortenOL-2pB6VJkW.js");return{createRomeinseFortenLayerOL:e}},__vite__mapDeps([0,1]));return t()},immediateLoad:!1},Windmolens:{name:"Windmolens",factory:async()=>{const{createWindmolensLayerOL:t}=await ve(async()=>{const{createWindmolensLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createWindmolensLayerOL:e}},[]);return t()},immediateLoad:!0},Erfgoedlijnen:{name:"Erfgoedlijnen",factory:async()=>{const{createErfgoedlijnenLayerOL:t}=await ve(async()=>{const{createErfgoedlijnenLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createErfgoedlijnenLayerOL:e}},[]);return t()},immediateLoad:!0},"Oude Kernen":{name:"Oude Kernen",factory:async()=>{const{createOudeKernenLayerOL:t}=await ve(async()=>{const{createOudeKernenLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createOudeKernenLayerOL:e}},[]);return t()},immediateLoad:!0},"Relictenkaart Punten":{name:"Relictenkaart Punten",factory:async()=>{const{createRelictenPuntenLayerOL:t}=await ve(async()=>{const{createRelictenPuntenLayerOL:e}=await import("./relictenGelderlandOL-CV4Tr2RT.js");return{createRelictenPuntenLayerOL:e}},[]);return t()},immediateLoad:!1},"Relictenkaart Lijnen":{name:"Relictenkaart Lijnen",factory:async()=>{const{createRelictenkaartLijnenLayerOL:t}=await ve(async()=>{const{createRelictenkaartLijnenLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createRelictenkaartLijnenLayerOL:e}},[]);return t()},immediateLoad:!0},"Relictenkaart Vlakken":{name:"Relictenkaart Vlakken",factory:async()=>{const{createRelictenkaartVlakkenLayerOL:t}=await ve(async()=>{const{createRelictenkaartVlakkenLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createRelictenkaartVlakkenLayerOL:e}},[]);return t()},immediateLoad:!0},"Verdronken Dorpen":{name:"Verdronken Dorpen",factory:async()=>{const{createVerdronkenDorpenLayerOL:t}=await ve(async()=>{const{createVerdronkenDorpenLayerOL:e}=await import("./pdokWMSLayers-CfTjWnWR.js");return{createVerdronkenDorpenLayerOL:e}},[]);return t()},immediateLoad:!0},"AMK Monumenten":{name:"AMK Monumenten",factory:async()=>{const{createAMKLayerOL:t}=await ve(async()=>{const{createAMKLayerOL:e}=await import("./amkOL-BX6WC8Dm.js");return{createAMKLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Romeins":{name:"AMK Romeins",factory:async()=>{const{createAMKRomeinsLayerOL:t}=await ve(async()=>{const{createAMKRomeinsLayerOL:e}=await import("./amkOL-BX6WC8Dm.js");return{createAMKRomeinsLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Steentijd":{name:"AMK Steentijd",factory:async()=>{const{createAMKSteentijdLayerOL:t}=await ve(async()=>{const{createAMKSteentijdLayerOL:e}=await import("./amkOL-BX6WC8Dm.js");return{createAMKSteentijdLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Vroege ME":{name:"AMK Vroege ME",factory:async()=>{const{createAMKVroegeMELayerOL:t}=await ve(async()=>{const{createAMKVroegeMELayerOL:e}=await import("./amkOL-BX6WC8Dm.js");return{createAMKVroegeMELayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Late ME":{name:"AMK Late ME",factory:async()=>{const{createAMKLateMELayerOL:t}=await ve(async()=>{const{createAMKLateMELayerOL:e}=await import("./amkOL-BX6WC8Dm.js");return{createAMKLateMELayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Overig":{name:"AMK Overig",factory:async()=>{const{createAMKOverigLayerOL:t}=await ve(async()=>{const{createAMKOverigLayerOL:e}=await import("./amkOL-BX6WC8Dm.js");return{createAMKOverigLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"Romeinse wegen (regio)":{name:"Romeinse wegen (regio)",factory:async()=>{const{createRomeinseWegenLayerOL:t}=await ve(async()=>{const{createRomeinseWegenLayerOL:e}=await import("./romeinsOL-CHYKywrL.js");return{createRomeinseWegenLayerOL:e}},[]);return t()},immediateLoad:!1},"Romeinse wegen (Wereld)":{name:"Romeinse wegen (Wereld)",factory:async()=>{const{createRomeinseWegenWereldLayerOL:t}=await ve(async()=>{const{createRomeinseWegenWereldLayerOL:e}=await import("./romeinsOL-CHYKywrL.js");return{createRomeinseWegenWereldLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Kastelen:{name:"Kastelen",factory:async()=>{const{createKastelenLayerOL:t}=await ve(async()=>{const{createKastelenLayerOL:e}=await import("./kastelenOL-BiUPct1m.js");return{createKastelenLayerOL:e}},__vite__mapDeps([2,1]));return t()},immediateLoad:!1},Runes:{name:"Runes",factory:async()=>{const{createRuinesLayerOL:t}=await ve(async()=>{const{createRuinesLayerOL:e}=await import("./ruinesOL-BzYEhClb.js");return{createRuinesLayerOL:e}},__vite__mapDeps([3,1]));return t()},immediateLoad:!1},Veengebieden:{name:"Veengebieden",factory:async()=>{const{createVeengebiedenLayerOL:t}=await ve(async()=>{const{createVeengebiedenLayerOL:e}=await import("./veengebiedenOL-R0Dr-dx0.js");return{createVeengebiedenLayerOL:e}},[]);return t()},immediateLoad:!1},Hunebedden:{name:"Hunebedden",factory:async()=>{const{createHunebeddenLayerOL:t}=await ve(async()=>{const{createHunebeddenLayerOL:e}=await import("./hunebeddenOL-O2zbWSA5.js");return{createHunebeddenLayerOL:e}},__vite__mapDeps([4,1]));return t()},immediateLoad:!1},"UIKAV Punten":{name:"UIKAV Punten",factory:async()=>{const{createUIKAVArcheoPuntenLayerOL:t}=await ve(async()=>{const{createUIKAVArcheoPuntenLayerOL:e}=await import("./uikavArcheoPuntenOL-CM-t3t5-.js");return{createUIKAVArcheoPuntenLayerOL:e}},__vite__mapDeps([5,1]));return t()},immediateLoad:!1,tier:"premium"},"UIKAV Vlakken":{name:"UIKAV Vlakken",factory:async()=>{const{createUIKAVVlakkenLayerOL:t}=await ve(async()=>{const{createUIKAVVlakkenLayerOL:e}=await import("./uikavVlakkenOL-BhB_trJ2.js");return{createUIKAVVlakkenLayerOL:e}},[]);return t()},immediateLoad:!1},"UIKAV Buffer":{name:"UIKAV Buffer",factory:async()=>{const{createUIKAVBufferlaagLayerOL:t}=await ve(async()=>{const{createUIKAVBufferlaagLayerOL:e}=await import("./uikavBufferlaagOL-CfHNFmcV.js");return{createUIKAVBufferlaagLayerOL:e}},[]);return t()},immediateLoad:!1},"UIKAV Expert":{name:"UIKAV Expert",factory:async()=>{const{createUIKAVExpertLayerOL:t}=await ve(async()=>{const{createUIKAVExpertLayerOL:e}=await import("./uikavExpertOL-DEtZI32P.js");return{createUIKAVExpertLayerOL:e}},[]);return t()},immediateLoad:!1},"UIKAV Indeling":{name:"UIKAV Indeling",factory:async()=>{const{createUIKAVUiterwaardenLayerOL:t}=await ve(async()=>{const{createUIKAVUiterwaardenLayerOL:e}=await import("./uikavUiterwaardenOL-Czc4Gr4n.js");return{createUIKAVUiterwaardenLayerOL:e}},[]);return t()},immediateLoad:!1},Speeltuinen:{name:"Speeltuinen",factory:async()=>{const{createSpeeltuinenLayerOL:t}=await ve(async()=>{const{createSpeeltuinenLayerOL:e}=await import("./speeltuinenOL-Bv9gkpNW.js");return{createSpeeltuinenLayerOL:e}},__vite__mapDeps([6,1]));return t()},immediateLoad:!1},Musea:{name:"Musea",factory:async()=>{const{createMuseaLayerOL:t}=await ve(async()=>{const{createMuseaLayerOL:e}=await import("./museaOL-7OePzE2s.js");return{createMuseaLayerOL:e}},__vite__mapDeps([7,1]));return t()},immediateLoad:!1},Strandjes:{name:"Strandjes",factory:async()=>{const{createStrandjesLayerOL:t}=await ve(async()=>{const{createStrandjesLayerOL:e}=await import("./strandjesOL-BbsdDUVt.js");return{createStrandjesLayerOL:e}},[]);return t()},immediateLoad:!1},Parken:{name:"Parken",factory:async()=>{const{createParkenLayerOL:t}=await ve(async()=>{const{createParkenLayerOL:e}=await import("./parkenOL-HztuyH3A.js");return{createParkenLayerOL:e}},[]);return t()},immediateLoad:!1},Kringloopwinkels:{name:"Kringloopwinkels",factory:async()=>{const{createKringloopwinkelsLayerOL:t}=await ve(async()=>{const{createKringloopwinkelsLayerOL:e}=await import("./kringloopwinkelsOL-CoRjJQQc.js");return{createKringloopwinkelsLayerOL:e}},__vite__mapDeps([8,1]));return t()},immediateLoad:!1},Ruiterpaden:{name:"Ruiterpaden",factory:async()=>{const{createRuiterpadenLayerOL:t}=await ve(async()=>{const{createRuiterpadenLayerOL:e}=await import("./ruiterpadenOL-DBrjg8Sf.js");return{createRuiterpadenLayerOL:e}},[]);return t()},immediateLoad:!1},Laarzenpaden:{name:"Laarzenpaden",factory:async()=>{const{createLaarzenpadenLayerOL:t}=await ve(async()=>{const{createLaarzenpadenLayerOL:e}=await import("./laarzenpadenOL-CmZehfDv.js");return{createLaarzenpadenLayerOL:e}},[]);return t()},immediateLoad:!1},"Fossielen Nederland":{name:"Fossielen Nederland",factory:async()=>{const{createFossielenLayerOL:t}=await ve(async()=>{const{createFossielenLayerOL:e}=await import("./fossielenOL-DNLutVlg.js");return{createFossielenLayerOL:e}},__vite__mapDeps([9,10,1]));return t()},immediateLoad:!1,tier:"premium"},"Fossielen Belgi":{name:"Fossielen Belgi",factory:async()=>{const{createFossielenBelgieLayerOL:t}=await ve(async()=>{const{createFossielenBelgieLayerOL:e}=await import("./fossielenBelgieOL-DwdZ0alM.js");return{createFossielenBelgieLayerOL:e}},__vite__mapDeps([11,10,1]));return t()},immediateLoad:!1,tier:"premium",regions:["be"]},"Fossielen Duitsland":{name:"Fossielen Duitsland",factory:async()=>{const{createFossielenDuitslandLayerOL:t}=await ve(async()=>{const{createFossielenDuitslandLayerOL:e}=await import("./fossielenDuitslandOL-Dsme9qDI.js");return{createFossielenDuitslandLayerOL:e}},__vite__mapDeps([12,10,1]));return t()},immediateLoad:!1,tier:"premium",regions:["de"]},"Fossielen Frankrijk":{name:"Fossielen Frankrijk",factory:async()=>{const{createFossielenFrankrijkLayerOL:t}=await ve(async()=>{const{createFossielenFrankrijkLayerOL:e}=await import("./fossielenFrankrijkOL-CXdSz-Hg.js");return{createFossielenFrankrijkLayerOL:e}},__vite__mapDeps([13,10,1]));return t()},immediateLoad:!1,tier:"premium",regions:["fr"]},"Fossiel Hotspots":{name:"Fossiel Hotspots",factory:async()=>{const{createFossielHotspotsLayerOL:t}=await ve(async()=>{const{createFossielHotspotsLayerOL:e}=await import("./fossielHotspotsOL-CqsibBpA.js");return{createFossielHotspotsLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},"Mineralen Hotspots":{name:"Mineralen Hotspots",factory:async()=>{const{createMineralenHotspotsLayerOL:t}=await ve(async()=>{const{createMineralenHotspotsLayerOL:e}=await import("./mineralenHotspotsOL-UcDybeES.js");return{createMineralenHotspotsLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Goudrivieren:{name:"Goudrivieren",factory:async()=>{const{createGoudrivierenLayerOL:t}=await ve(async()=>{const{createGoudrivierenLayerOL:e}=await import("./goudrivierenOL-DvIBP5xT.js");return{createGoudrivierenLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},"WWII Bunkers":{name:"WWII Bunkers",factory:async()=>{const{createBunkersLayerOL:t}=await ve(async()=>{const{createBunkersLayerOL:e}=await import("./bunkersOL-p2su2ILQ.js");return{createBunkersLayerOL:e}},__vite__mapDeps([14,1]));return t()},immediateLoad:!1},Grafheuvels:{name:"Grafheuvels",factory:async()=>{const{createGrafheuvelsLayerOL:t}=await ve(async()=>{const{createGrafheuvelsLayerOL:e}=await import("./grafheuvelsOL-_3CnFCuy.js");return{createGrafheuvelsLayerOL:e}},__vite__mapDeps([15,1]));return t()},immediateLoad:!1},Slagvelden:{name:"Slagvelden",factory:async()=>{const{createSlagveldenLayerOL:t}=await ve(async()=>{const{createSlagveldenLayerOL:e}=await import("./slagveldenOL-Co12JM58.js");return{createSlagveldenLayerOL:e}},__vite__mapDeps([16,1]));return t()},immediateLoad:!1},"Militaire Vliegvelden":{name:"Militaire Vliegvelden",factory:async()=>{const{createVliegveldenLayerOL:t}=await ve(async()=>{const{createVliegveldenLayerOL:e}=await import("./vliegveldenOL-DcM9sZL4.js");return{createVliegveldenLayerOL:e}},[]);return t()},immediateLoad:!1},"Monumenten BE":{name:"Monumenten BE",factory:async()=>{const{createBeschermdeMonumentenBELayerOL:t}=await ve(async()=>{const{createBeschermdeMonumentenBELayerOL:e}=await import("./belgieErfgoedLayers-DHsy7JcF.js");return{createBeschermdeMonumentenBELayerOL:e}},[]);return t()},immediateLoad:!1,regions:["be"]},"Archeo Zones BE":{name:"Archeo Zones BE",factory:async()=>{const{createArcheoZonesBELayerOL:t}=await ve(async()=>{const{createArcheoZonesBELayerOL:e}=await import("./belgieErfgoedLayers-DHsy7JcF.js");return{createArcheoZonesBELayerOL:e}},[]);return t()},immediateLoad:!1,regions:["be"]},"Arch Sites BE":{name:"Arch Sites BE",factory:async()=>{const{createBeschArchSitesBELayerOL:t}=await ve(async()=>{const{createBeschArchSitesBELayerOL:e}=await import("./belgieErfgoedLayers-DHsy7JcF.js");return{createBeschArchSitesBELayerOL:e}},[]);return t()},immediateLoad:!1,regions:["be"]},"Erfgoed Landschap BE":{name:"Erfgoed Landschap BE",factory:async()=>{const{createErfgoedLandschappenBELayerOL:t}=await ve(async()=>{const{createErfgoedLandschappenBELayerOL:e}=await import("./belgieErfgoedLayers-DHsy7JcF.js");return{createErfgoedLandschappenBELayerOL:e}},[]);return t()},immediateLoad:!1,regions:["be"]},"CAI Elementen":{name:"CAI Elementen",factory:async()=>{const{createCAIElementenBELayerOL:t}=await ve(async()=>{const{createCAIElementenBELayerOL:e}=await import("./belgieErfgoedLayers-DHsy7JcF.js");return{createCAIElementenBELayerOL:e}},[]);return t()},immediateLoad:!1,regions:["be"]},"Hist. Gebouwen FR":{name:"Hist. Gebouwen FR",factory:async()=>{const{createFrankrijkMonumentenLayerOL:t}=await ve(async()=>{const{createFrankrijkMonumentenLayerOL:e}=await import("./frankrijkMonumentenOL-XQUueeFa.js");return{createFrankrijkMonumentenLayerOL:e}},__vite__mapDeps([17,1]));return t()},immediateLoad:!1,regions:["fr"]},"INRAP Sites FR":{name:"INRAP Sites FR",factory:async()=>{const{createInrapSitesFRLayerOL:t}=await ve(async()=>{const{createInrapSitesFRLayerOL:e}=await import("./inrapSitesFROL-DX6rH0qe.js");return{createInrapSitesFRLayerOL:e}},__vite__mapDeps([18,1]));return t()},immediateLoad:!1,regions:["fr"]},"Archeo Sites Bretagne":{name:"Archeo Sites Bretagne",factory:async()=>{const{createArcheoBretagneLayerOL:t}=await ve(async()=>{const{createArcheoBretagneLayerOL:e}=await import("./archeoBretagneOL-BJvQE50G.js");return{createArcheoBretagneLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]},"Operaties Bretagne":{name:"Operaties Bretagne",factory:async()=>{const{createBretagneOperationsLayerOL:t}=await ve(async()=>{const{createBretagneOperationsLayerOL:e}=await import("./bretagneOperationsOL-DPIOlFdP.js");return{createBretagneOperationsLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]},"Archeo Parijs":{name:"Archeo Parijs",factory:async()=>{const{createParisArcheoLayerOL:t}=await ve(async()=>{const{createParisArcheoLayerOL:e}=await import("./parisArcheoOL-BQ8mV57O.js");return{createParisArcheoLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]},"Sites Patrimoine Occitanie":{name:"Sites Patrimoine Occitanie",factory:async()=>{const{createOccitaniePatrimoineLayerOL:t}=await ve(async()=>{const{createOccitaniePatrimoineLayerOL:e}=await import("./occitaniePatrimoineOL-C6vVXuxK.js");return{createOccitaniePatrimoineLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]},"Sites Patrimoine PACA":{name:"Sites Patrimoine PACA",factory:async()=>{const{createPacaPatrimoineLayerOL:t}=await ve(async()=>{const{createPacaPatrimoineLayerOL:e}=await import("./pacaPatrimoineOL-DShtyKcV.js");return{createPacaPatrimoineLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]},"Sites Patrimoine Normandie":{name:"Sites Patrimoine Normandie",factory:async()=>{const{createNormandiePatrimoineLayerOL:t}=await ve(async()=>{const{createNormandiePatrimoineLayerOL:e}=await import("./normandiePatrimoineOL-DuostkiD.js");return{createNormandiePatrimoineLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]},Maginotlinie:{name:"Maginotlinie",factory:async()=>{const{createWikimaginotLayerOL:t}=await ve(async()=>{const{createWikimaginotLayerOL:e}=await import("./wikimaginotOL-DmHU8WNn.js");return{createWikimaginotLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr","de"]},"Sites Classs FR":{name:"Sites Classs FR",factory:async()=>{const{createSitesClassesFrLayerOL:t}=await ve(async()=>{const{createSitesClassesFrLayerOL:e}=await import("./sitesClassesFrOL-vsiB1TfE.js");return{createSitesClassesFrLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]},"Monumenten IDF":{name:"Monumenten IDF",factory:async()=>{const{createMonumentsIdfLayerOL:t}=await ve(async()=>{const{createMonumentsIdfLayerOL:e}=await import("./monumentsIdfOL-Av0lQFJE.js");return{createMonumentsIdfLayerOL:e}},[]);return t()},immediateLoad:!1,regions:["fr"]}};function kMe(){return Object.values(Gy).filter(t=>t.immediateLoad&&t.platform!=="arcgis")}const li=vo()(cb((t,e)=>({map:null,arcgisMap:null,arcgisView:null,arcgisInitialized:!1,rotation:0,rotationEnabled:!0,setMap:n=>{t(r=>{r.map=n})},setArcGISMap:(n,r)=>{t(i=>{i.arcgisMap=n,i.arcgisView=r,i.arcgisInitialized=!0})},setRotation:n=>{t(r=>{if(r.rotation=n,r.map&&r.rotationEnabled){const i=n*Math.PI/180;r.map.getView().setRotation(i)}})},enableRotation:()=>{t(n=>{n.rotationEnabled=!0})},disableRotation:()=>{t(n=>{n.rotationEnabled=!1,n.rotation=0,n.map&&n.map.getView().animate({rotation:0,duration:500})})}}))),Ws=vo()(cb((t,e)=>({visible:{"CartoDB (licht)":!0,OpenStreetMap:!1,Luchtfoto:!1,"Satelliet (wereld)":!1,"Labels Overlay":!1,"TMK 1850":!1,"Bonnebladen 1900":!1,Hunebedden:!1,"FAMKE Steentijd":!1,"FAMKE IJzertijd":!1,Grafheuvels:!1,Terpen:!1,"AMK Monumenten":!1,"AMK Romeins":!1,"AMK Steentijd":!1,"AMK Vroege ME":!1,"AMK Late ME":!1,"AMK Overig":!1,"Archeo Onderzoeken":!1,"Romeinse wegen (regio)":!1,"Romeinse wegen (Wereld)":!1,Kastelen:!1,IKAW:!1,Essen:!1,Rijksmonumenten:!1,Werelderfgoed:!1,"WWII Bunkers":!1,Slagvelden:!1,"Militaire Vliegvelden":!1,Verdedigingslinies:!1,Inundatiegebieden:!1,"Militaire Objecten":!1,"Paleokaart 800 n.Chr.":!1,"Paleokaart 100 n.Chr.":!1,"Paleokaart 500 v.Chr.":!1,"Paleokaart 1500 v.Chr.":!1,"Paleokaart 2750 v.Chr.":!1,"Paleokaart 5500 v.Chr.":!1,"Paleokaart 9000 v.Chr.":!1,"Religieus Erfgoed":!1,"UIKAV Punten":!1,"UIKAV Vlakken":!1,"UIKAV Buffer":!1,"UIKAV Expert":!1,"UIKAV Indeling":!1,"AHN4 Hoogtekaart Kleur":!1,"AHN4 Hillshade NL":!1,"AHN4 Multi-Hillshade NL":!1,"AHN4 Hillshade Kleur":!1,"AHN 0.5m":!1,Veengebieden:!1,Geomorfologie:!1,Bodemkaart:!1,"Fossielen Nederland":!1,"Fossielen Belgi":!1,"Fossielen Duitsland":!1,"Fossielen Frankrijk":!1,"Monumenten BE":!1,"Archeo Zones BE":!1,"Arch Sites BE":!1,"Erfgoed Landschap BE":!1,"CAI Elementen":!1,"Hist. Gebouwen FR":!1,"INRAP Sites FR":!1,"Archeo Sites Bretagne":!1,"Operaties Bretagne":!1,"Archeo Parijs":!1,"Sites Patrimoine Occitanie":!1,"Sites Patrimoine PACA":!1,"Sites Patrimoine Normandie":!1,Maginotlinie:!1,"Sites Classs FR":!1,"Monumenten IDF":!1,Parken:!1,Speeltuinen:!1,Musea:!1,Strandjes:!1,Ruiterpaden:!1,Laarzenpaden:!1,Gewaspercelen:!1,"Kadastrale Grenzen":!1,Scheepswrakken:!1,"Woonheuvels ZH":!1,"Romeinse Forten":!1,Windmolens:!1,Erfgoedlijnen:!1,"Oude Kernen":!1,"Relictenkaart Punten":!1,"Relictenkaart Lijnen":!1,"Relictenkaart Vlakken":!1,"Verdronken Dorpen":!1,"Mijn Vondsten":!0},opacity:{"AHN4 Hoogtekaart Kleur":.85,"AHN4 Hillshade NL":.7,"AHN4 Multi-Hillshade NL":.7,"AHN4 Hillshade Kleur":.8,"AHN 0.5m":.7,"TMK 1850":.8,"Bonnebladen 1900":.8,Geomorfologie:.5,Bodemkaart:.6,Veengebieden:.6,IKAW:.5,"FAMKE Steentijd":.6,"FAMKE IJzertijd":.6,Essen:.6,Terpen:.7,"AMK Monumenten":.45,"AMK Romeins":.6,"AMK Steentijd":.6,"AMK Vroege ME":.6,"AMK Late ME":.6,"AMK Overig":.6,"Paleokaart 9000 v.Chr.":.7,"Paleokaart 5500 v.Chr.":.7,"Paleokaart 2750 v.Chr.":.7,"Paleokaart 1500 v.Chr.":.7,"Paleokaart 500 v.Chr.":.7,"Paleokaart 100 n.Chr.":.7,"Paleokaart 800 n.Chr.":.7,Verdedigingslinies:.7,Inundatiegebieden:.5,"Militaire Objecten":.8,"Religieus Erfgoed":.8,Gewaspercelen:.6,"Kadastrale Grenzen":.7,Erfgoedlijnen:.7,"Oude Kernen":.6,"Relictenkaart Vlakken":.5},loadingState:{},layers:{},arcgisLayers:{},toggleLayer:n=>{const r=e(),i=!r.visible[n];t(a=>{a.visible[n]=i}),Gy[n]?.platform==="arcgis"?i&&!r.arcgisLayers[n]?e().loadLayer(n):r.arcgisLayers[n]&&(r.arcgisLayers[n].visible=i):i&&!r.layers[n]?e().loadLayer(n):r.layers[n]&&r.layers[n].setVisible(i)},setLayerVisibility:(n,r)=>{const i=e(),o=Gy[n]?.platform==="arcgis";t(l=>{if(l.visible[n]=r,o){const c=l.arcgisLayers[n];c&&(c.visible=r)}else{const c=l.layers[n];c&&c.setVisible(r)}});const a=o?i.arcgisLayers[n]:i.layers[n];r&&!a&&e().loadLayer(n)},setLayerOpacity:(n,r)=>{const s=Gy[n]?.platform==="arcgis";t(o=>{if(o.opacity[n]=r,s){const a=o.arcgisLayers[n];a&&(a.opacity=r)}else{const a=o.layers[n];a&&a.setOpacity(r)}})},registerLayer:(n,r)=>{t(i=>{i.layers[n]=r,i.loadingState[n]="loaded",i.visible[n]!==void 0&&r.setVisible(i.visible[n]),i.opacity[n]!==void 0&&r.setOpacity(i.opacity[n])})},registerArcGISLayer:(n,r)=>{t(i=>{i.arcgisLayers[n]=r,i.loadingState[n]="loaded",i.visible[n]!==void 0&&(r.visible=i.visible[n]),i.opacity[n]!==void 0&&(r.opacity=i.opacity[n])})},unregisterLayer:n=>{t(r=>{delete r.layers[n],delete r.arcgisLayers[n],delete r.loadingState[n]})},loadLayer:async n=>{const r=e(),i=Gy[n];if(!i){console.warn(` Layer "${n}" not found in registry`);return}const s=i.platform==="arcgis";if(r.loadingState[n]==="loading"||s&&r.arcgisLayers[n]||!s&&r.layers[n])return;const o=li.getState();if(s){if(!o.arcgisMap||!o.arcgisInitialized){console.warn(` Cannot load ArcGIS layer "${n}": ArcGIS map not initialized`);return}}else if(!o.map){console.warn(` Cannot load layer "${n}": map not initialized`);return}t(a=>{a.loadingState[n]="loading"}),console.log(` Loading ${s?"ArcGIS":"OL"} layer: ${n}...`);try{const a=await i.factory();if(!a)throw new Error("Factory returned null");const l=e();if(s){const c=a;c.visible=l.visible[n]??!1,l.opacity[n]!==void 0&&(c.opacity=l.opacity[n]),o.arcgisMap.add(c),t(u=>{u.arcgisLayers[n]=c,u.loadingState[n]="loaded"})}else{const c=a;c.setVisible(l.visible[n]??!1),l.opacity[n]!==void 0&&c.setOpacity(l.opacity[n]),o.map.addLayer(c),t(u=>{u.layers[n]=c,u.loadingState[n]="loaded"})}console.log(` Layer loaded: ${n}`)}catch(a){console.error(` Failed to load layer "${n}":`,a),t(l=>{l.loadingState[n]="error"})}}}))),gr=vo()(cb((t,e)=>({layerControlOpen:!1,legendOpen:!1,backgroundsPanelOpen:!1,themesPanelOpen:!1,settingsPanelOpen:!1,infoPanelOpen:!1,presetsPanelOpen:!1,monumentSearchOpen:!1,monumentFilterOpen:!1,vondstFormOpen:!1,vondstFormLocation:null,vondstFormPhoto:null,vondstDashboardOpen:!1,createLayerModalOpen:!1,addPointModalOpen:!1,addPointModalLayerId:null,addPointModalLocation:null,layerManagerModalOpen:!1,layerDashboardOpen:!1,layerDashboardLayerId:null,routeDashboardOpen:!1,isDrawingMode:!1,collapsedCategories:new Set,closeAllPanels:()=>{t(n=>{n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1})},toggleLayerControl:()=>{t(n=>{n.layerControlOpen=!n.layerControlOpen})},toggleLegend:()=>{t(n=>{n.legendOpen=!n.legendOpen})},toggleBackgroundsPanel:()=>{t(n=>{const r=n.backgroundsPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.backgroundsPanelOpen=!0)})},toggleThemesPanel:()=>{t(n=>{const r=n.themesPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.themesPanelOpen=!0)})},toggleSettingsPanel:()=>{t(n=>{const r=n.settingsPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.settingsPanelOpen=!0)})},toggleInfoPanel:()=>{t(n=>{const r=n.infoPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.infoPanelOpen=!0)})},togglePresetsPanel:()=>{t(n=>{const r=n.presetsPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.presetsPanelOpen=!0)})},toggleCategory:n=>{t(r=>{r.collapsedCategories.has(n)?r.collapsedCategories.delete(n):r.collapsedCategories.add(n)})},setLayerControlOpen:n=>{t(r=>{r.layerControlOpen=n})},setLegendOpen:n=>{t(r=>{r.legendOpen=n})},openVondstForm:(n,r)=>{t(i=>{i.backgroundsPanelOpen=!1,i.themesPanelOpen=!1,i.settingsPanelOpen=!1,i.infoPanelOpen=!1,i.presetsPanelOpen=!1,i.vondstFormOpen=!0,i.vondstFormLocation=n||null,i.vondstFormPhoto=r||null})},closeVondstForm:()=>{t(n=>{n.vondstFormOpen=!1,n.vondstFormLocation=null,n.vondstFormPhoto=null})},toggleVondstDashboard:()=>{t(n=>{const r=n.vondstDashboardOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.vondstDashboardOpen=!r})},openCreateLayerModal:()=>{t(n=>{n.createLayerModalOpen=!0})},closeCreateLayerModal:()=>{t(n=>{n.createLayerModalOpen=!1})},openAddPointModal:(n,r)=>{t(i=>{i.addPointModalOpen=!0,i.addPointModalLayerId=n,i.addPointModalLocation=r})},closeAddPointModal:()=>{t(n=>{n.addPointModalOpen=!1,n.addPointModalLayerId=null,n.addPointModalLocation=null})},openLayerManagerModal:()=>{t(n=>{n.layerManagerModalOpen=!0})},closeLayerManagerModal:()=>{t(n=>{n.layerManagerModalOpen=!1})},openLayerDashboard:n=>{t(r=>{r.layerDashboardOpen=!0,r.layerDashboardLayerId=n,r.layerManagerModalOpen=!1})},closeLayerDashboard:()=>{t(n=>{n.layerDashboardOpen=!1,n.layerDashboardLayerId=null})},toggleRouteDashboard:()=>{t(n=>{n.routeDashboardOpen=!n.routeDashboardOpen})},toggleMonumentSearch:()=>{t(n=>{const r=n.monumentSearchOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentSearchOpen=!r})},closeMonumentSearch:()=>{t(n=>{n.monumentSearchOpen=!1})},toggleMonumentFilter:()=>{t(n=>{const r=n.monumentFilterOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.monumentFilterOpen=!0)})},closeMonumentFilter:()=>{t(n=>{n.monumentFilterOpen=!1})},setDrawingMode:n=>{t(r=>{r.isDrawingMode=n})}}))),AMe=()=>{};var QZ={};const Qce=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},IMe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},eue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),r.push(n[u],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Qce(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IMe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new PMe;const f=s<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PMe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CMe=function(t){const e=Qce(t);return eue.encodeByteArray(e,!0)},g4=function(t){return CMe(t).replace(/\./g,"")},tue=function(t){try{return eue.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function nue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const RMe=()=>nue().__FIREBASE_DEFAULTS__,MMe=()=>{if(typeof process>"u"||typeof QZ>"u")return;const t=QZ.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NMe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tue(t[1]);return e&&JSON.parse(e)},iO=()=>{try{return AMe()||RMe()||MMe()||NMe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rue=t=>iO()?.emulatorHosts?.[t],OMe=t=>{const e=rue(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},iue=()=>iO()?.config,sue=t=>iO()?.[`_${t}`];let LMe=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function pv(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yU(t){return(await fetch(t,{credentials:"include"})).ok}function DMe(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[g4(JSON.stringify(n)),g4(JSON.stringify(o)),""].join(".")}const fT={};function jMe(){const t={prod:[],emulator:[]};for(const e of Object.keys(fT))fT[e]?t.emulator.push(e):t.prod.push(e);return t}function $Me(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let eJ=!1;function oue(t,e){if(typeof window>"u"||typeof document>"u"||!pv(window.location.host)||fT[t]===e||fT[t]||eJ)return;fT[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=jMe().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{eJ=!0,o()},f}function u(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=$Me(r),g=n("text"),y=document.getElementById(g)||document.createElement("span"),_=n("learnmore"),b=document.getElementById(_)||document.createElement("a"),T=n("preprendIcon"),A=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const I=f.element;a(I),u(b,_);const P=c();l(A,T),I.append(A,y,b,P),document.body.appendChild(I)}s?(y.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function Ys(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FMe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ys())}function aue(){const t=iO()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VMe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zMe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GMe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UMe(){const t=Ys();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lue(){return!aue()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cue(){return!aue()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function uue(){try{return typeof indexedDB=="object"}catch{return!1}}function BMe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const WMe="FirebaseError";class Xd extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WMe,Object.setPrototypeOf(this,Xd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cI.prototype.create)}}class cI{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?HMe(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Xd(i,a,r)}}function HMe(t,e){return t.replace(qMe,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const qMe=/\{\$([^}]+)}/g;function KMe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function N1(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(tJ(s)&&tJ(o)){if(!N1(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tJ(t){return t!==null&&typeof t=="object"}function uI(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function YMe(t,e){const n=new XMe(t,e);return n.subscribe.bind(n)}class XMe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ZMe(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=vj),i.error===void 0&&(i.error=vj),i.complete===void 0&&(i.complete=vj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZMe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vj(){}function go(t){return t&&t._delegate?t._delegate:t}class Vg{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const iy="[DEFAULT]";class JMe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new LMe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(e3e(e))try{this.getOrInitializeService({instanceIdentifier:iy})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=iy){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=iy){return this.instances.has(e)}getOptions(e=iy){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QMe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=iy){return this.component?this.component.multipleInstances?e:iy:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QMe(t){return t===iy?void 0:t}function e3e(t){return t.instantiationMode==="EAGER"}class t3e{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new JMe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var tr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tr||(tr={}));const n3e={debug:tr.DEBUG,verbose:tr.VERBOSE,info:tr.INFO,warn:tr.WARN,error:tr.ERROR,silent:tr.SILENT},r3e=tr.INFO,i3e={[tr.DEBUG]:"log",[tr.VERBOSE]:"log",[tr.INFO]:"info",[tr.WARN]:"warn",[tr.ERROR]:"error"},s3e=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=i3e[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vU{constructor(e){this.name=e,this._logLevel=r3e,this._logHandler=s3e,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?n3e[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tr.DEBUG,...e),this._logHandler(this,tr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tr.VERBOSE,...e),this._logHandler(this,tr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tr.INFO,...e),this._logHandler(this,tr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tr.WARN,...e),this._logHandler(this,tr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tr.ERROR,...e),this._logHandler(this,tr.ERROR,...e)}}const o3e=(t,e)=>e.some(n=>t instanceof n);let nJ,rJ;function a3e(){return nJ||(nJ=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function l3e(){return rJ||(rJ=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hue=new WeakMap,k8=new WeakMap,due=new WeakMap,_j=new WeakMap,_U=new WeakMap;function c3e(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Tg(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hue.set(n,t)}).catch(()=>{}),_U.set(e,t),e}function u3e(t){if(k8.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});k8.set(t,e)}let A8={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return k8.get(t);if(e==="objectStoreNames")return t.objectStoreNames||due.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Tg(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function h3e(t){A8=t(A8)}function d3e(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(xj(this),e,...n);return due.set(r,e.sort?e.sort():[e]),Tg(r)}:l3e().includes(t)?function(...e){return t.apply(xj(this),e),Tg(hue.get(this))}:function(...e){return Tg(t.apply(xj(this),e))}}function f3e(t){return typeof t=="function"?d3e(t):(t instanceof IDBTransaction&&u3e(t),o3e(t,a3e())?new Proxy(t,A8):t)}function Tg(t){if(t instanceof IDBRequest)return c3e(t);if(_j.has(t))return _j.get(t);const e=f3e(t);return e!==t&&(_j.set(t,e),_U.set(e,t)),e}const xj=t=>_U.get(t);function p3e(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Tg(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Tg(o.result),l.oldVersion,l.newVersion,Tg(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const m3e=["get","getKey","getAll","getAllKeys","count"],g3e=["put","add","delete","clear"],wj=new Map;function iJ(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wj.get(e))return wj.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=g3e.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||m3e.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return wj.set(e,s),s}h3e(t=>({...t,get:(e,n,r)=>iJ(e,n)||t.get(e,n,r),has:(e,n)=>!!iJ(e,n)||t.has(e,n)}));class y3e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(v3e(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function v3e(t){return t.getComponent()?.type==="VERSION"}const I8="@firebase/app",sJ="0.14.6";const wp=new vU("@firebase/app"),_3e="@firebase/app-compat",x3e="@firebase/analytics-compat",w3e="@firebase/analytics",b3e="@firebase/app-check-compat",E3e="@firebase/app-check",S3e="@firebase/auth",T3e="@firebase/auth-compat",k3e="@firebase/database",A3e="@firebase/data-connect",I3e="@firebase/database-compat",P3e="@firebase/functions",C3e="@firebase/functions-compat",R3e="@firebase/installations",M3e="@firebase/installations-compat",N3e="@firebase/messaging",O3e="@firebase/messaging-compat",L3e="@firebase/performance",D3e="@firebase/performance-compat",j3e="@firebase/remote-config",$3e="@firebase/remote-config-compat",F3e="@firebase/storage",V3e="@firebase/storage-compat",z3e="@firebase/firestore",G3e="@firebase/ai",U3e="@firebase/firestore-compat",B3e="firebase",W3e="12.6.0";const P8="[DEFAULT]",H3e={[I8]:"fire-core",[_3e]:"fire-core-compat",[w3e]:"fire-analytics",[x3e]:"fire-analytics-compat",[E3e]:"fire-app-check",[b3e]:"fire-app-check-compat",[S3e]:"fire-auth",[T3e]:"fire-auth-compat",[k3e]:"fire-rtdb",[A3e]:"fire-data-connect",[I3e]:"fire-rtdb-compat",[P3e]:"fire-fn",[C3e]:"fire-fn-compat",[R3e]:"fire-iid",[M3e]:"fire-iid-compat",[N3e]:"fire-fcm",[O3e]:"fire-fcm-compat",[L3e]:"fire-perf",[D3e]:"fire-perf-compat",[j3e]:"fire-rc",[$3e]:"fire-rc-compat",[F3e]:"fire-gcs",[V3e]:"fire-gcs-compat",[z3e]:"fire-fst",[U3e]:"fire-fst-compat",[G3e]:"fire-vertex","fire-js":"fire-js",[B3e]:"fire-js-all"};const y4=new Map,q3e=new Map,C8=new Map;function oJ(t,e){try{t.container.addComponent(e)}catch(n){wp.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function O1(t){const e=t.name;if(C8.has(e))return wp.debug(`There were multiple attempts to register component ${e}.`),!1;C8.set(e,t);for(const n of y4.values())oJ(n,t);for(const n of q3e.values())oJ(n,t);return!0}function sO(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _l(t){return t==null?!1:t.settings!==void 0}const K3e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kg=new cI("app","Firebase",K3e);class Y3e{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vg("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kg.create("app-deleted",{appName:this._name})}}const mv=W3e;function fue(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:P8,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw kg.create("bad-app-name",{appName:String(i)});if(n||(n=iue()),!n)throw kg.create("no-options");const s=y4.get(i);if(s){if(N1(n,s.options)&&N1(r,s.config))return s;throw kg.create("duplicate-app",{appName:i})}const o=new t3e(i);for(const l of C8.values())o.addComponent(l);const a=new Y3e(n,r,o);return y4.set(i,a),a}function pue(t=P8){const e=y4.get(t);if(!e&&t===P8&&iue())return fue();if(!e)throw kg.create("no-app",{appName:t});return e}function Ed(t,e,n){let r=H3e[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wp.warn(o.join(" "));return}O1(new Vg(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const X3e="firebase-heartbeat-database",Z3e=1,jk="firebase-heartbeat-store";let bj=null;function mue(){return bj||(bj=p3e(X3e,Z3e,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(jk)}catch(n){console.warn(n)}}}}).catch(t=>{throw kg.create("idb-open",{originalErrorMessage:t.message})})),bj}async function J3e(t){try{const n=(await mue()).transaction(jk),r=await n.objectStore(jk).get(gue(t));return await n.done,r}catch(e){if(e instanceof Xd)wp.warn(e.message);else{const n=kg.create("idb-get",{originalErrorMessage:e?.message});wp.warn(n.message)}}}async function aJ(t,e){try{const r=(await mue()).transaction(jk,"readwrite");await r.objectStore(jk).put(e,gue(t)),await r.done}catch(n){if(n instanceof Xd)wp.warn(n.message);else{const r=kg.create("idb-set",{originalErrorMessage:n?.message});wp.warn(r.message)}}}function gue(t){return`${t.name}!${t.options.appId}`}const Q3e=1024,e4e=30;class t4e{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new r4e(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=lJ();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>e4e){const i=i4e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){wp.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=lJ(),{heartbeatsToSend:n,unsentEntries:r}=n4e(this._heartbeatsCache.heartbeats),i=g4(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return wp.warn(e),""}}}function lJ(){return new Date().toISOString().substring(0,10)}function n4e(t,e=Q3e){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cJ(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cJ(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class r4e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uue()?BMe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await J3e(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return aJ(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return aJ(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function cJ(t){return g4(JSON.stringify({version:2,heartbeats:t})).length}function i4e(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function s4e(t){O1(new Vg("platform-logger",e=>new y3e(e),"PRIVATE")),O1(new Vg("heartbeat",e=>new t4e(e),"PRIVATE")),Ed(I8,sJ,t),Ed(I8,sJ,"esm2020"),Ed("fire-js","")}s4e("");function yue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const o4e=yue,vue=new cI("auth","Firebase",yue());const v4=new vU("@firebase/auth");function a4e(t,...e){v4.logLevel<=tr.WARN&&v4.warn(`Auth (${mv}): ${t}`,...e)}function dM(t,...e){v4.logLevel<=tr.ERROR&&v4.error(`Auth (${mv}): ${t}`,...e)}function Dd(t,...e){throw wU(t,...e)}function fh(t,...e){return wU(t,...e)}function xU(t,e,n){const r={...o4e(),[e]:n};return new cI("auth","Firebase",r).create(e,{appName:t.name})}function up(t){return xU(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _ue(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Dd(t,"argument-error"),xU(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wU(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return vue.create(t,...e)}function Cn(t,e,...n){if(!t)throw wU(e,...n)}function ep(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dM(e),new Error(e)}function bp(t,e){t||ep(e)}function R8(){return typeof self<"u"&&self.location?.href||""}function l4e(){return uJ()==="http:"||uJ()==="https:"}function uJ(){return typeof self<"u"&&self.location?.protocol||null}function c4e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(l4e()||zMe()||"connection"in navigator)?navigator.onLine:!0}function u4e(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class hI{constructor(e,n){this.shortDelay=e,this.longDelay=n,bp(n>e,"Short delay should be less than long delay!"),this.isMobile=FMe()||GMe()}get(){return c4e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bU(t,e){bp(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class xue{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ep("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ep("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ep("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const h4e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const d4e=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],f4e=new hI(3e4,6e4);function oO(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ub(t,e,n,r,i={}){return wue(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=uI({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return VMe()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&pv(t.emulatorConfig.host)&&(c.credentials="include"),xue.fetch()(await Eue(t,t.config.apiHost,n,a),c)})}async function wue(t,e,n){t._canInitEmulator=!1;const r={...h4e,...e};try{const i=new p4e(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw OC(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw OC(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw OC(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw OC(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw xU(t,u,c);Dd(t,u)}}catch(i){if(i instanceof Xd)throw i;Dd(t,"network-request-failed",{message:String(i)})}}async function bue(t,e,n,r,i={}){const s=await ub(t,e,n,r,i);return"mfaPendingCredential"in s&&Dd(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function Eue(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?bU(t.config,i):`${t.config.apiScheme}://${i}`;return d4e.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class p4e{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fh(this.auth,"network-request-failed")),f4e.get())})}}function OC(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=fh(t,e,r);return i.customData._tokenResponse=n,i}async function m4e(t,e){return ub(t,"POST","/v1/accounts:delete",e)}async function _4(t,e){return ub(t,"POST","/v1/accounts:lookup",e)}function pT(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function g4e(t,e=!1){const n=go(t),r=await n.getIdToken(e),i=EU(r);Cn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:pT(Ej(i.auth_time)),issuedAtTime:pT(Ej(i.iat)),expirationTime:pT(Ej(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Ej(t){return Number(t)*1e3}function EU(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dM("JWT malformed, contained fewer than 3 sections"),null;try{const i=tue(n);return i?JSON.parse(i):(dM("Failed to decode base64 JWT payload"),null)}catch(i){return dM("Caught error parsing JWT payload as JSON",i?.toString()),null}}function hJ(t){const e=EU(t);return Cn(e,"internal-error"),Cn(typeof e.exp<"u","internal-error"),Cn(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function $k(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Xd&&y4e(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function y4e({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class v4e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class M8{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pT(this.lastLoginAt),this.creationTime=pT(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function x4(t){const e=t.auth,n=await t.getIdToken(),r=await $k(t,_4(e,{idToken:n}));Cn(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=i.providerUserInfo?.length?Sue(i.providerUserInfo):[],o=x4e(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!o?.length,c=a?l:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new M8(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,u)}async function _4e(t){const e=go(t);await x4(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function x4e(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Sue(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function w4e(t,e){const n=await wue(t,{},async()=>{const r=uI({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await Eue(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&pv(t.emulatorConfig.host)&&(l.credentials="include"),xue.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function b4e(t,e){return ub(t,"POST","/v2/accounts:revokeToken",oO(t,e))}class iw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Cn(e.idToken,"internal-error"),Cn(typeof e.idToken<"u","internal-error"),Cn(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hJ(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Cn(e.length!==0,"internal-error");const n=hJ(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Cn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await w4e(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new iw;return r&&(Cn(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Cn(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Cn(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new iw,this.toJSON())}_performRefresh(){return ep("not implemented")}}function hm(t,e){Cn(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class lh{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new v4e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new M8(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $k(this,this.stsTokenManager.getToken(this.auth,e));return Cn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return g4e(this,e)}reload(){return _4e(this)}_assign(e){this!==e&&(Cn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new lh({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Cn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await x4(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_l(this.auth.app))return Promise.reject(up(this.auth));const e=await this.getIdToken();return await $k(this,m4e(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:g,providerData:y,stsTokenManager:_}=n;Cn(h&&_,e,"internal-error");const b=iw.fromJSON(this.name,_);Cn(typeof h=="string",e,"internal-error"),hm(r,e.name),hm(i,e.name),Cn(typeof f=="boolean",e,"internal-error"),Cn(typeof g=="boolean",e,"internal-error"),hm(s,e.name),hm(o,e.name),hm(a,e.name),hm(l,e.name),hm(c,e.name),hm(u,e.name);const T=new lh({uid:h,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:b,createdAt:c,lastLoginAt:u});return y&&Array.isArray(y)&&(T.providerData=y.map(A=>({...A}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new iw;i.updateFromServerResponse(n);const s=new lh({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await x4(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Cn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Sue(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new iw;a.updateFromIdToken(r);const l=new lh({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new M8(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,c),l}}const dJ=new Map;function tp(t){bp(t instanceof Function,"Expected a class definition");let e=dJ.get(t);return e?(bp(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,dJ.set(t,e),e)}class Tue{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Tue.type="NONE";const fJ=Tue;function fM(t,e,n){return`firebase:${t}:${e}:${n}`}class sw{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=fM(this.userKey,i.apiKey,s),this.fullPersistenceKey=fM("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _4(this.auth,{idToken:e}).catch(()=>{});return n?lh._fromGetAccountInfoResponse(this.auth,n,e):null}return lh._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new sw(tp(fJ),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||tp(fJ);const o=fM(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let h;if(typeof u=="string"){const f=await _4(e,{idToken:u}).catch(()=>{});if(!f)break;h=await lh._fromGetAccountInfoResponse(e,f,u)}else h=lh._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new sw(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new sw(s,e,r))}}function pJ(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Pue(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kue(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Rue(e))return"Blackberry";if(Mue(e))return"Webos";if(Aue(e))return"Safari";if((e.includes("chrome/")||Iue(e))&&!e.includes("edge/"))return"Chrome";if(Cue(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function kue(t=Ys()){return/firefox\//i.test(t)}function Aue(t=Ys()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Iue(t=Ys()){return/crios\//i.test(t)}function Pue(t=Ys()){return/iemobile/i.test(t)}function Cue(t=Ys()){return/android/i.test(t)}function Rue(t=Ys()){return/blackberry/i.test(t)}function Mue(t=Ys()){return/webos/i.test(t)}function SU(t=Ys()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function E4e(t=Ys()){return SU(t)&&!!window.navigator?.standalone}function S4e(){return UMe()&&document.documentMode===10}function Nue(t=Ys()){return SU(t)||Cue(t)||Mue(t)||Rue(t)||/windows phone/i.test(t)||Pue(t)}function Oue(t,e=[]){let n;switch(t){case"Browser":n=pJ(Ys());break;case"Worker":n=`${pJ(Ys())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mv}/${r}`}class T4e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function k4e(t,e={}){return ub(t,"GET","/v2/passwordPolicy",oO(t,e))}const A4e=6;class I4e{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??A4e,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class P4e{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mJ(this),this.idTokenSubscription=new mJ(this),this.beforeStateQueue=new T4e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vue,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tp(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await sw.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _4(this,{idToken:e}),r=await lh._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(_l(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Cn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await x4(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=u4e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_l(this.app))return Promise.reject(up(this));const n=e?go(e):null;return n&&Cn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Cn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _l(this.app)?Promise.reject(up(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _l(this.app)?Promise.reject(up(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tp(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await k4e(this),n=new I4e(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cI("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await b4e(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&tp(e)||this._popupRedirectResolver;Cn(n,this,"argument-error"),this.redirectPersistenceManager=await sw.create(this,[tp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Cn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Cn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Oue(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(_l(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&a4e(`Error while retrieving App Check token: ${e.error}`),e?.token}}function gv(t){return go(t)}class mJ{constructor(e){this.auth=e,this.observer=null,this.addObserver=YMe(n=>this.observer=n)}get next(){return Cn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let TU={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function C4e(t){TU=t}function R4e(t){return TU.loadJS(t)}function M4e(){return TU.gapiScript}function N4e(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function O4e(t,e){const n=sO(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(N1(s,e??{}))return i;Dd(i,"already-initialized")}return n.initialize({options:e})}function L4e(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(tp);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function D4e(t,e,n){const r=gv(t);Cn(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Lue(e),{host:o,port:a}=j4e(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Cn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Cn(N1(c,r.config.emulator)&&N1(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,pv(o)?(yU(`${s}//${o}${l}`),oue("Auth",!0)):$4e()}function Lue(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function j4e(t){const e=Lue(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:gJ(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:gJ(o)}}}function gJ(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $4e(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class Due{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ep("not implemented")}_getIdTokenResponse(e){return ep("not implemented")}_linkToIdToken(e,n){return ep("not implemented")}_getReauthenticationResolver(e){return ep("not implemented")}}async function ow(t,e){return bue(t,"POST","/v1/accounts:signInWithIdp",oO(t,e))}const F4e="http://localhost";class L1 extends Due{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new L1(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dd("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new L1(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ow(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ow(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ow(e,n)}buildRequest(){const e={requestUri:F4e,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=uI(n)}return e}}class aO{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class dI extends aO{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ym extends dI{constructor(){super("facebook.com")}static credential(e){return L1._fromParams({providerId:Ym.PROVIDER_ID,signInMethod:Ym.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ym.credentialFromTaggedObject(e)}static credentialFromError(e){return Ym.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ym.credential(e.oauthAccessToken)}catch{return null}}}Ym.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ym.PROVIDER_ID="facebook.com";class eh extends dI{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return L1._fromParams({providerId:eh.PROVIDER_ID,signInMethod:eh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return eh.credentialFromTaggedObject(e)}static credentialFromError(e){return eh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return eh.credential(n,r)}catch{return null}}}eh.GOOGLE_SIGN_IN_METHOD="google.com";eh.PROVIDER_ID="google.com";class Xm extends dI{constructor(){super("github.com")}static credential(e){return L1._fromParams({providerId:Xm.PROVIDER_ID,signInMethod:Xm.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xm.credentialFromTaggedObject(e)}static credentialFromError(e){return Xm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xm.credential(e.oauthAccessToken)}catch{return null}}}Xm.GITHUB_SIGN_IN_METHOD="github.com";Xm.PROVIDER_ID="github.com";class Zm extends dI{constructor(){super("twitter.com")}static credential(e,n){return L1._fromParams({providerId:Zm.PROVIDER_ID,signInMethod:Zm.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zm.credentialFromTaggedObject(e)}static credentialFromError(e){return Zm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Zm.credential(n,r)}catch{return null}}}Zm.TWITTER_SIGN_IN_METHOD="twitter.com";Zm.PROVIDER_ID="twitter.com";async function V4e(t,e){return bue(t,"POST","/v1/accounts:signUp",oO(t,e))}class zg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await lh._fromIdTokenResponse(e,r,i),o=yJ(r);return new zg({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=yJ(r);return new zg({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function yJ(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function z4e(t){if(_l(t.app))return Promise.reject(up(t));const e=gv(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new zg({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await V4e(e,{returnSecureToken:!0}),r=await zg._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}class w4 extends Xd{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,w4.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new w4(e,n,r,i)}}function jue(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?w4._fromErrorAndOperation(t,s,e,r):s})}async function G4e(t,e,n=!1){const r=await $k(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zg._forOperation(t,"link",r)}async function U4e(t,e,n=!1){const{auth:r}=t;if(_l(r.app))return Promise.reject(up(r));const i="reauthenticate";try{const s=await $k(t,jue(r,i,e,t),n);Cn(s.idToken,r,"internal-error");const o=EU(s.idToken);Cn(o,r,"internal-error");const{sub:a}=o;return Cn(t.uid===a,r,"user-mismatch"),zg._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Dd(r,"user-mismatch"),s}}async function B4e(t,e,n=!1){if(_l(t.app))return Promise.reject(up(t));const r="signIn",i=await jue(t,r,e),s=await zg._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function W4e(t,e,n,r){return go(t).onIdTokenChanged(e,n,r)}function H4e(t,e,n){return go(t).beforeAuthStateChanged(e,n)}function $ue(t,e,n,r){return go(t).onAuthStateChanged(e,n,r)}function Fue(t){return go(t).signOut()}const b4="__sak";class Vue{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(b4,"1"),this.storage.removeItem(b4),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const q4e=1e3,K4e=10;class zue extends Vue{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nue(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);S4e()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,K4e):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},q4e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}zue.type="LOCAL";const Y4e=zue;class Gue extends Vue{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Gue.type="SESSION";const Uue=Gue;function X4e(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class lO{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new lO(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await X4e(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lO.receivers=[];function kU(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class Z4e{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=kU("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Sd(){return window}function J4e(t){Sd().location.href=t}function Bue(){return typeof Sd().WorkerGlobalScope<"u"&&typeof Sd().importScripts=="function"}async function Q4e(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eNe(){return navigator?.serviceWorker?.controller||null}function tNe(){return Bue()?self:null}const Wue="firebaseLocalStorageDb",nNe=1,E4="firebaseLocalStorage",Hue="fbase_key";class fI{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function cO(t,e){return t.transaction([E4],e?"readwrite":"readonly").objectStore(E4)}function rNe(){const t=indexedDB.deleteDatabase(Wue);return new fI(t).toPromise()}function N8(){const t=indexedDB.open(Wue,nNe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(E4,{keyPath:Hue})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(E4)?e(r):(r.close(),await rNe(),e(await N8()))})})}async function vJ(t,e,n){const r=cO(t,!0).put({[Hue]:e,value:n});return new fI(r).toPromise()}async function iNe(t,e){const n=cO(t,!1).get(e),r=await new fI(n).toPromise();return r===void 0?null:r.value}function _J(t,e){const n=cO(t,!0).delete(e);return new fI(n).toPromise()}const sNe=800,oNe=3;class que{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await N8(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>oNe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bue()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lO._getInstance(tNe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Q4e(),!this.activeServiceWorker)return;this.sender=new Z4e(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eNe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await N8();return await vJ(e,b4,"1"),await _J(e,b4),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vJ(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>iNe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_J(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=cO(i,!1).getAll();return new fI(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sNe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}que.type="LOCAL";const aNe=que;new hI(3e4,6e4);function AU(t,e){return e?tp(e):(Cn(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class IU extends Due{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ow(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ow(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ow(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lNe(t){return B4e(t.auth,new IU(t),t.bypassAuthState)}function cNe(t){const{auth:e,user:n}=t;return Cn(n,e,"internal-error"),U4e(n,new IU(t),t.bypassAuthState)}async function uNe(t){const{auth:e,user:n}=t;return Cn(n,e,"internal-error"),G4e(n,new IU(t),t.bypassAuthState)}class Kue{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lNe;case"linkViaPopup":case"linkViaRedirect":return uNe;case"reauthViaPopup":case"reauthViaRedirect":return cNe;default:Dd(this.auth,"internal-error")}}resolve(e){bp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hNe=new hI(2e3,1e4);async function xJ(t,e,n){if(_l(t.app))return Promise.reject(fh(t,"operation-not-supported-in-this-environment"));const r=gv(t);_ue(t,e,aO);const i=AU(r,n);return new Uy(r,"signInViaPopup",e,i).executeNotNull()}class Uy extends Kue{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Uy.currentPopupAction&&Uy.currentPopupAction.cancel(),Uy.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Cn(e,this.auth,"internal-error"),e}async onExecution(){bp(this.filter.length===1,"Popup operations only handle one event");const e=kU();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fh(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Uy.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fh(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hNe.get())};e()}}Uy.currentPopupAction=null;const dNe="pendingRedirect",pM=new Map;class fNe extends Kue{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pM.get(this.auth._key());if(!e){try{const r=await pNe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pM.set(this.auth._key(),e)}return this.bypassAuthState||pM.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pNe(t,e){const n=Xue(e),r=Yue(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function mNe(t,e){return Yue(t)._set(Xue(e),"true")}function gNe(t,e){pM.set(t._key(),e)}function Yue(t){return tp(t._redirectPersistence)}function Xue(t){return fM(dNe,t.config.apiKey,t.name)}function yNe(t,e,n){return vNe(t,e,n)}async function vNe(t,e,n){if(_l(t.app))return Promise.reject(up(t));const r=gv(t);_ue(t,e,aO),await r._initializationPromise;const i=AU(r,n);return await mNe(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function _Ne(t,e){return await gv(t)._initializationPromise,Zue(t,e,!1)}async function Zue(t,e,n=!1){if(_l(t.app))return Promise.reject(up(t));const r=gv(t),i=AU(r,e),o=await new fNe(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const xNe=600*1e3;class wNe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bNe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Jue(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(fh(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xNe&&this.cachedEventUids.clear(),this.cachedEventUids.has(wJ(e))}saveEventToCache(e){this.cachedEventUids.add(wJ(e)),this.lastProcessedEventTime=Date.now()}}function wJ(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Jue({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function bNe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jue(t);default:return!1}}async function ENe(t,e={}){return ub(t,"GET","/v1/projects",e)}const SNe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TNe=/^https?/;async function kNe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ENe(t);for(const n of e)try{if(ANe(n))return}catch{}Dd(t,"unauthorized-domain")}function ANe(t){const e=R8(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!TNe.test(n))return!1;if(SNe.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const INe=new hI(3e4,6e4);function bJ(){const t=Sd().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function PNe(t){return new Promise((e,n)=>{function r(){bJ(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bJ(),n(fh(t,"network-request-failed"))},timeout:INe.get()})}if(Sd().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Sd().gapi?.load)r();else{const i=N4e("iframefcb");return Sd()[i]=()=>{gapi.load?r():n(fh(t,"network-request-failed"))},R4e(`${M4e()}?onload=${i}`).catch(s=>n(s))}}).catch(e=>{throw mM=null,e})}let mM=null;function CNe(t){return mM=mM||PNe(t),mM}const RNe=new hI(5e3,15e3),MNe="__/auth/iframe",NNe="emulator/auth/iframe",ONe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LNe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DNe(t){const e=t.config;Cn(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bU(e,NNe):`https://${t.config.authDomain}/${MNe}`,r={apiKey:e.apiKey,appName:t.name,v:mv},i=LNe.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${uI(r).slice(1)}`}async function jNe(t){const e=await CNe(t),n=Sd().gapi;return Cn(n,t,"internal-error"),e.open({where:document.body,url:DNe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ONe,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=fh(t,"network-request-failed"),a=Sd().setTimeout(()=>{s(o)},RNe.get());function l(){Sd().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}const $Ne={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FNe=500,VNe=600,zNe="_blank",GNe="http://localhost";class EJ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UNe(t,e,n,r=FNe,i=VNe){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...$Ne,width:r.toString(),height:i.toString(),top:s,left:o},c=Ys().toLowerCase();n&&(a=Iue(c)?zNe:n),kue(c)&&(e=e||GNe,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[g,y])=>`${f}${g}=${y},`,"");if(E4e(c)&&a!=="_self")return BNe(e||"",a),new EJ(null);const h=window.open(e||"",a,u);Cn(h,t,"popup-blocked");try{h.focus()}catch{}return new EJ(h)}function BNe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const WNe="__/auth/handler",HNe="emulator/auth/handler",qNe=encodeURIComponent("fac");async function SJ(t,e,n,r,i,s){Cn(t.config.authDomain,t,"auth-domain-config-required"),Cn(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mv,eventId:i};if(e instanceof aO){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",KMe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof dI){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${qNe}=${encodeURIComponent(l)}`:"";return`${KNe(t)}?${uI(a).slice(1)}${c}`}function KNe({config:t}){return t.emulator?bU(t,HNe):`https://${t.authDomain}/${WNe}`}const Sj="webStorageSupport";class YNe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uue,this._completeRedirectFn=Zue,this._overrideRedirectResult=gNe}async _openPopup(e,n,r,i){bp(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await SJ(e,n,r,R8(),i);return UNe(e,s,kU())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await SJ(e,n,r,R8(),i);return J4e(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(bp(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await jNe(e),r=new wNe(e);return n.register("authEvent",i=>(Cn(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Sj,{type:Sj},i=>{const s=i?.[0]?.[Sj];s!==void 0&&n(!!s),Dd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=kNe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Nue()||Aue()||SU()}}const XNe=YNe;var TJ="@firebase/auth",kJ="1.12.0";class ZNe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Cn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function JNe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QNe(t){O1(new Vg("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Cn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Oue(t)},c=new P4e(r,i,s,l);return L4e(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),O1(new Vg("auth-internal",e=>{const n=gv(e.getProvider("auth").getImmediate());return(r=>new ZNe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ed(TJ,kJ,JNe(t)),Ed(TJ,kJ,"esm2020")}const e5e=300,t5e=sue("authIdTokenMaxAge")||e5e;let AJ=null;const n5e=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>t5e)return;const i=n?.token;AJ!==i&&(AJ=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function r5e(t=pue()){const e=sO(t,"auth");if(e.isInitialized())return e.getImmediate();const n=O4e(t,{popupRedirectResolver:XNe,persistence:[aNe,Y4e,Uue]}),r=sue("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=n5e(s.toString());H4e(n,o,()=>o(n.currentUser)),W4e(n,a=>o(a))}}const i=rue("auth");return i&&D4e(n,`http://${i}`),n}function i5e(){return document.getElementsByTagName("head")?.[0]??document}C4e({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=fh("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",i5e().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QNe("Browser");var s5e="firebase",o5e="12.7.0";Ed(s5e,o5e,"app");var IJ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ag,Que;(function(){var t;function e(C,N){function O(){}O.prototype=N.prototype,C.F=N.prototype,C.prototype=new O,C.prototype.constructor=C,C.D=function(L,F,G){for(var U=Array(arguments.length-2),he=2;he<arguments.length;he++)U[he-2]=arguments[he];return N.prototype[F].apply(L,U)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,N,O){O||(O=0);const L=Array(16);if(typeof N=="string")for(var F=0;F<16;++F)L[F]=N.charCodeAt(O++)|N.charCodeAt(O++)<<8|N.charCodeAt(O++)<<16|N.charCodeAt(O++)<<24;else for(F=0;F<16;++F)L[F]=N[O++]|N[O++]<<8|N[O++]<<16|N[O++]<<24;N=C.g[0],O=C.g[1],F=C.g[2];let G=C.g[3],U;U=N+(G^O&(F^G))+L[0]+3614090360&4294967295,N=O+(U<<7&4294967295|U>>>25),U=G+(F^N&(O^F))+L[1]+3905402710&4294967295,G=N+(U<<12&4294967295|U>>>20),U=F+(O^G&(N^O))+L[2]+606105819&4294967295,F=G+(U<<17&4294967295|U>>>15),U=O+(N^F&(G^N))+L[3]+3250441966&4294967295,O=F+(U<<22&4294967295|U>>>10),U=N+(G^O&(F^G))+L[4]+4118548399&4294967295,N=O+(U<<7&4294967295|U>>>25),U=G+(F^N&(O^F))+L[5]+1200080426&4294967295,G=N+(U<<12&4294967295|U>>>20),U=F+(O^G&(N^O))+L[6]+2821735955&4294967295,F=G+(U<<17&4294967295|U>>>15),U=O+(N^F&(G^N))+L[7]+4249261313&4294967295,O=F+(U<<22&4294967295|U>>>10),U=N+(G^O&(F^G))+L[8]+1770035416&4294967295,N=O+(U<<7&4294967295|U>>>25),U=G+(F^N&(O^F))+L[9]+2336552879&4294967295,G=N+(U<<12&4294967295|U>>>20),U=F+(O^G&(N^O))+L[10]+4294925233&4294967295,F=G+(U<<17&4294967295|U>>>15),U=O+(N^F&(G^N))+L[11]+2304563134&4294967295,O=F+(U<<22&4294967295|U>>>10),U=N+(G^O&(F^G))+L[12]+1804603682&4294967295,N=O+(U<<7&4294967295|U>>>25),U=G+(F^N&(O^F))+L[13]+4254626195&4294967295,G=N+(U<<12&4294967295|U>>>20),U=F+(O^G&(N^O))+L[14]+2792965006&4294967295,F=G+(U<<17&4294967295|U>>>15),U=O+(N^F&(G^N))+L[15]+1236535329&4294967295,O=F+(U<<22&4294967295|U>>>10),U=N+(F^G&(O^F))+L[1]+4129170786&4294967295,N=O+(U<<5&4294967295|U>>>27),U=G+(O^F&(N^O))+L[6]+3225465664&4294967295,G=N+(U<<9&4294967295|U>>>23),U=F+(N^O&(G^N))+L[11]+643717713&4294967295,F=G+(U<<14&4294967295|U>>>18),U=O+(G^N&(F^G))+L[0]+3921069994&4294967295,O=F+(U<<20&4294967295|U>>>12),U=N+(F^G&(O^F))+L[5]+3593408605&4294967295,N=O+(U<<5&4294967295|U>>>27),U=G+(O^F&(N^O))+L[10]+38016083&4294967295,G=N+(U<<9&4294967295|U>>>23),U=F+(N^O&(G^N))+L[15]+3634488961&4294967295,F=G+(U<<14&4294967295|U>>>18),U=O+(G^N&(F^G))+L[4]+3889429448&4294967295,O=F+(U<<20&4294967295|U>>>12),U=N+(F^G&(O^F))+L[9]+568446438&4294967295,N=O+(U<<5&4294967295|U>>>27),U=G+(O^F&(N^O))+L[14]+3275163606&4294967295,G=N+(U<<9&4294967295|U>>>23),U=F+(N^O&(G^N))+L[3]+4107603335&4294967295,F=G+(U<<14&4294967295|U>>>18),U=O+(G^N&(F^G))+L[8]+1163531501&4294967295,O=F+(U<<20&4294967295|U>>>12),U=N+(F^G&(O^F))+L[13]+2850285829&4294967295,N=O+(U<<5&4294967295|U>>>27),U=G+(O^F&(N^O))+L[2]+4243563512&4294967295,G=N+(U<<9&4294967295|U>>>23),U=F+(N^O&(G^N))+L[7]+1735328473&4294967295,F=G+(U<<14&4294967295|U>>>18),U=O+(G^N&(F^G))+L[12]+2368359562&4294967295,O=F+(U<<20&4294967295|U>>>12),U=N+(O^F^G)+L[5]+4294588738&4294967295,N=O+(U<<4&4294967295|U>>>28),U=G+(N^O^F)+L[8]+2272392833&4294967295,G=N+(U<<11&4294967295|U>>>21),U=F+(G^N^O)+L[11]+1839030562&4294967295,F=G+(U<<16&4294967295|U>>>16),U=O+(F^G^N)+L[14]+4259657740&4294967295,O=F+(U<<23&4294967295|U>>>9),U=N+(O^F^G)+L[1]+2763975236&4294967295,N=O+(U<<4&4294967295|U>>>28),U=G+(N^O^F)+L[4]+1272893353&4294967295,G=N+(U<<11&4294967295|U>>>21),U=F+(G^N^O)+L[7]+4139469664&4294967295,F=G+(U<<16&4294967295|U>>>16),U=O+(F^G^N)+L[10]+3200236656&4294967295,O=F+(U<<23&4294967295|U>>>9),U=N+(O^F^G)+L[13]+681279174&4294967295,N=O+(U<<4&4294967295|U>>>28),U=G+(N^O^F)+L[0]+3936430074&4294967295,G=N+(U<<11&4294967295|U>>>21),U=F+(G^N^O)+L[3]+3572445317&4294967295,F=G+(U<<16&4294967295|U>>>16),U=O+(F^G^N)+L[6]+76029189&4294967295,O=F+(U<<23&4294967295|U>>>9),U=N+(O^F^G)+L[9]+3654602809&4294967295,N=O+(U<<4&4294967295|U>>>28),U=G+(N^O^F)+L[12]+3873151461&4294967295,G=N+(U<<11&4294967295|U>>>21),U=F+(G^N^O)+L[15]+530742520&4294967295,F=G+(U<<16&4294967295|U>>>16),U=O+(F^G^N)+L[2]+3299628645&4294967295,O=F+(U<<23&4294967295|U>>>9),U=N+(F^(O|~G))+L[0]+4096336452&4294967295,N=O+(U<<6&4294967295|U>>>26),U=G+(O^(N|~F))+L[7]+1126891415&4294967295,G=N+(U<<10&4294967295|U>>>22),U=F+(N^(G|~O))+L[14]+2878612391&4294967295,F=G+(U<<15&4294967295|U>>>17),U=O+(G^(F|~N))+L[5]+4237533241&4294967295,O=F+(U<<21&4294967295|U>>>11),U=N+(F^(O|~G))+L[12]+1700485571&4294967295,N=O+(U<<6&4294967295|U>>>26),U=G+(O^(N|~F))+L[3]+2399980690&4294967295,G=N+(U<<10&4294967295|U>>>22),U=F+(N^(G|~O))+L[10]+4293915773&4294967295,F=G+(U<<15&4294967295|U>>>17),U=O+(G^(F|~N))+L[1]+2240044497&4294967295,O=F+(U<<21&4294967295|U>>>11),U=N+(F^(O|~G))+L[8]+1873313359&4294967295,N=O+(U<<6&4294967295|U>>>26),U=G+(O^(N|~F))+L[15]+4264355552&4294967295,G=N+(U<<10&4294967295|U>>>22),U=F+(N^(G|~O))+L[6]+2734768916&4294967295,F=G+(U<<15&4294967295|U>>>17),U=O+(G^(F|~N))+L[13]+1309151649&4294967295,O=F+(U<<21&4294967295|U>>>11),U=N+(F^(O|~G))+L[4]+4149444226&4294967295,N=O+(U<<6&4294967295|U>>>26),U=G+(O^(N|~F))+L[11]+3174756917&4294967295,G=N+(U<<10&4294967295|U>>>22),U=F+(N^(G|~O))+L[2]+718787259&4294967295,F=G+(U<<15&4294967295|U>>>17),U=O+(G^(F|~N))+L[9]+3951481745&4294967295,C.g[0]=C.g[0]+N&4294967295,C.g[1]=C.g[1]+(F+(U<<21&4294967295|U>>>11))&4294967295,C.g[2]=C.g[2]+F&4294967295,C.g[3]=C.g[3]+G&4294967295}r.prototype.v=function(C,N){N===void 0&&(N=C.length);const O=N-this.blockSize,L=this.C;let F=this.h,G=0;for(;G<N;){if(F==0)for(;G<=O;)i(this,C,G),G+=this.blockSize;if(typeof C=="string"){for(;G<N;)if(L[F++]=C.charCodeAt(G++),F==this.blockSize){i(this,L),F=0;break}}else for(;G<N;)if(L[F++]=C[G++],F==this.blockSize){i(this,L),F=0;break}}this.h=F,this.o+=N},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var N=1;N<C.length-8;++N)C[N]=0;N=this.o*8;for(var O=C.length-8;O<C.length;++O)C[O]=N&255,N/=256;for(this.v(C),C=Array(16),N=0,O=0;O<4;++O)for(let L=0;L<32;L+=8)C[N++]=this.g[O]>>>L&255;return C};function s(C,N){var O=a;return Object.prototype.hasOwnProperty.call(O,C)?O[C]:O[C]=N(C)}function o(C,N){this.h=N;const O=[];let L=!0;for(let F=C.length-1;F>=0;F--){const G=C[F]|0;L&&G==N||(O[F]=G,L=!1)}this.g=O}var a={};function l(C){return-128<=C&&C<128?s(C,function(N){return new o([N|0],N<0?-1:0)}):new o([C|0],C<0?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return h;if(C<0)return b(c(-C));const N=[];let O=1;for(let L=0;C>=O;L++)N[L]=C/O|0,O*=4294967296;return new o(N,0)}function u(C,N){if(C.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(C.charAt(0)=="-")return b(u(C.substring(1),N));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=c(Math.pow(N,8));let L=h;for(let G=0;G<C.length;G+=8){var F=Math.min(8,C.length-G);const U=parseInt(C.substring(G,G+F),N);F<8?(F=c(Math.pow(N,F)),L=L.j(F).add(c(U))):(L=L.j(O),L=L.add(c(U)))}return L}var h=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-b(this).m();let C=0,N=1;for(let O=0;O<this.g.length;O++){const L=this.i(O);C+=(L>=0?L:4294967296+L)*N,N*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(y(this))return"0";if(_(this))return"-"+b(this).toString(C);const N=c(Math.pow(C,6));var O=this;let L="";for(;;){const F=P(O,N).g;O=T(O,F.j(N));let G=((O.g.length>0?O.g[0]:O.h)>>>0).toString(C);if(O=F,y(O))return G+L;for(;G.length<6;)G="0"+G;L=G+L}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function y(C){if(C.h!=0)return!1;for(let N=0;N<C.g.length;N++)if(C.g[N]!=0)return!1;return!0}function _(C){return C.h==-1}t.l=function(C){return C=T(this,C),_(C)?-1:y(C)?0:1};function b(C){const N=C.g.length,O=[];for(let L=0;L<N;L++)O[L]=~C.g[L];return new o(O,~C.h).add(f)}t.abs=function(){return _(this)?b(this):this},t.add=function(C){const N=Math.max(this.g.length,C.g.length),O=[];let L=0;for(let F=0;F<=N;F++){let G=L+(this.i(F)&65535)+(C.i(F)&65535),U=(G>>>16)+(this.i(F)>>>16)+(C.i(F)>>>16);L=U>>>16,G&=65535,U&=65535,O[F]=U<<16|G}return new o(O,O[O.length-1]&-2147483648?-1:0)};function T(C,N){return C.add(b(N))}t.j=function(C){if(y(this)||y(C))return h;if(_(this))return _(C)?b(this).j(b(C)):b(b(this).j(C));if(_(C))return b(this.j(b(C)));if(this.l(g)<0&&C.l(g)<0)return c(this.m()*C.m());const N=this.g.length+C.g.length,O=[];for(var L=0;L<2*N;L++)O[L]=0;for(L=0;L<this.g.length;L++)for(let F=0;F<C.g.length;F++){const G=this.i(L)>>>16,U=this.i(L)&65535,he=C.i(F)>>>16,Ie=C.i(F)&65535;O[2*L+2*F]+=U*Ie,A(O,2*L+2*F),O[2*L+2*F+1]+=G*Ie,A(O,2*L+2*F+1),O[2*L+2*F+1]+=U*he,A(O,2*L+2*F+1),O[2*L+2*F+2]+=G*he,A(O,2*L+2*F+2)}for(C=0;C<N;C++)O[C]=O[2*C+1]<<16|O[2*C];for(C=N;C<2*N;C++)O[C]=0;return new o(O,0)};function A(C,N){for(;(C[N]&65535)!=C[N];)C[N+1]+=C[N]>>>16,C[N]&=65535,N++}function I(C,N){this.g=C,this.h=N}function P(C,N){if(y(N))throw Error("division by zero");if(y(C))return new I(h,h);if(_(C))return N=P(b(C),N),new I(b(N.g),b(N.h));if(_(N))return N=P(C,b(N)),new I(b(N.g),N.h);if(C.g.length>30){if(_(C)||_(N))throw Error("slowDivide_ only works with positive integers.");for(var O=f,L=N;L.l(C)<=0;)O=M(O),L=M(L);var F=V(O,1),G=V(L,1);for(L=V(L,2),O=V(O,2);!y(L);){var U=G.add(L);U.l(C)<=0&&(F=F.add(O),G=U),L=V(L,1),O=V(O,1)}return N=T(C,F.j(N)),new I(F,N)}for(F=h;C.l(N)>=0;){for(O=Math.max(1,Math.floor(C.m()/N.m())),L=Math.ceil(Math.log(O)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),G=c(O),U=G.j(N);_(U)||U.l(C)>0;)O-=L,G=c(O),U=G.j(N);y(G)&&(G=f),F=F.add(G),C=T(C,U)}return new I(F,C)}t.B=function(C){return P(this,C).h},t.and=function(C){const N=Math.max(this.g.length,C.g.length),O=[];for(let L=0;L<N;L++)O[L]=this.i(L)&C.i(L);return new o(O,this.h&C.h)},t.or=function(C){const N=Math.max(this.g.length,C.g.length),O=[];for(let L=0;L<N;L++)O[L]=this.i(L)|C.i(L);return new o(O,this.h|C.h)},t.xor=function(C){const N=Math.max(this.g.length,C.g.length),O=[];for(let L=0;L<N;L++)O[L]=this.i(L)^C.i(L);return new o(O,this.h^C.h)};function M(C){const N=C.g.length+1,O=[];for(let L=0;L<N;L++)O[L]=C.i(L)<<1|C.i(L-1)>>>31;return new o(O,C.h)}function V(C,N){const O=N>>5;N%=32;const L=C.g.length-O,F=[];for(let G=0;G<L;G++)F[G]=N>0?C.i(G+O)>>>N|C.i(G+O+1)<<32-N:C.i(G+O);return new o(F,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Que=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Ag=o}).apply(typeof IJ<"u"?IJ:typeof self<"u"?self:typeof window<"u"?window:{});var LC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ehe,yS,the,gM,O8,nhe,rhe,ihe;(function(){var t,e=Object.defineProperty;function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof LC=="object"&&LC];for(var j=0;j<S.length;++j){var B=S[j];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var r=n(this);function i(S,j){if(j)e:{var B=r;S=S.split(".");for(var J=0;J<S.length-1;J++){var Te=S[J];if(!(Te in B))break e;B=B[Te]}S=S[S.length-1],J=B[S],j=j(J),j!=J&&j!=null&&e(B,S,{configurable:!0,writable:!0,value:j})}}i("Symbol.dispose",function(S){return S||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(S){return S||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(S){return S||function(j){var B=[],J;for(J in j)Object.prototype.hasOwnProperty.call(j,J)&&B.push([J,j[J]]);return B}});var s=s||{},o=this||self;function a(S){var j=typeof S;return j=="object"&&S!=null||j=="function"}function l(S,j,B){return S.call.apply(S.bind,arguments)}function c(S,j,B){return c=l,c.apply(null,arguments)}function u(S,j){var B=Array.prototype.slice.call(arguments,1);return function(){var J=B.slice();return J.push.apply(J,arguments),S.apply(this,J)}}function h(S,j){function B(){}B.prototype=j.prototype,S.Z=j.prototype,S.prototype=new B,S.prototype.constructor=S,S.Ob=function(J,Te,Fe){for(var Et=Array(arguments.length-2),On=2;On<arguments.length;On++)Et[On-2]=arguments[On];return j.prototype[Te].apply(J,Et)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?S=>S&&AsyncContext.Snapshot.wrap(S):S=>S;function g(S){const j=S.length;if(j>0){const B=Array(j);for(let J=0;J<j;J++)B[J]=S[J];return B}return[]}function y(S,j){for(let J=1;J<arguments.length;J++){const Te=arguments[J];var B=typeof Te;if(B=B!="object"?B:Te?Array.isArray(Te)?"array":B:"null",B=="array"||B=="object"&&typeof Te.length=="number"){B=S.length||0;const Fe=Te.length||0;S.length=B+Fe;for(let Et=0;Et<Fe;Et++)S[B+Et]=Te[Et]}else S.push(Te)}}class _{constructor(j,B){this.i=j,this.j=B,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function b(S){o.setTimeout(()=>{throw S},0)}function T(){var S=C;let j=null;return S.g&&(j=S.g,S.g=S.g.next,S.g||(S.h=null),j.next=null),j}class A{constructor(){this.h=this.g=null}add(j,B){const J=I.get();J.set(j,B),this.h?this.h.next=J:this.g=J,this.h=J}}var I=new _(()=>new P,S=>S.reset());class P{constructor(){this.next=this.g=this.h=null}set(j,B){this.h=j,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let M,V=!1,C=new A,N=()=>{const S=Promise.resolve(void 0);M=()=>{S.then(O)}};function O(){for(var S;S=T();){try{S.h.call(S.g)}catch(B){b(B)}var j=I;j.j(S),j.h<100&&(j.h++,S.next=j.g,j.g=S)}V=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(S,j){this.type=S,this.g=this.target=j,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var G=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var S=!1,j=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const B=()=>{};o.addEventListener("test",B,j),o.removeEventListener("test",B,j)}catch{}return S})();function U(S){return/^[\s\xa0]*$/.test(S)}function he(S,j){F.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S&&this.init(S,j)}h(he,F),he.prototype.init=function(S,j){const B=this.type=S.type,J=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;this.target=S.target||S.srcElement,this.g=j,j=S.relatedTarget,j||(B=="mouseover"?j=S.fromElement:B=="mouseout"&&(j=S.toElement)),this.relatedTarget=j,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=S.pointerType,this.state=S.state,this.i=S,S.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var Ie="closure_listenable_"+(Math.random()*1e6|0),ze=0;function Oe(S,j,B,J,Te){this.listener=S,this.proxy=null,this.src=j,this.type=B,this.capture=!!J,this.ha=Te,this.key=++ze,this.da=this.fa=!1}function fe(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function ge(S,j,B){for(const J in S)j.call(B,S[J],J,S)}function Se(S,j){for(const B in S)j.call(void 0,S[B],B,S)}function Z(S){const j={};for(const B in S)j[B]=S[B];return j}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(S,j){let B,J;for(let Te=1;Te<arguments.length;Te++){J=arguments[Te];for(B in J)S[B]=J[B];for(let Fe=0;Fe<W.length;Fe++)B=W[Fe],Object.prototype.hasOwnProperty.call(J,B)&&(S[B]=J[B])}}function ie(S){this.src=S,this.g={},this.h=0}ie.prototype.add=function(S,j,B,J,Te){const Fe=S.toString();S=this.g[Fe],S||(S=this.g[Fe]=[],this.h++);const Et=xe(S,j,J,Te);return Et>-1?(j=S[Et],B||(j.fa=!1)):(j=new Oe(j,this.src,Fe,!!J,Te),j.fa=B,S.push(j)),j};function le(S,j){const B=j.type;if(B in S.g){var J=S.g[B],Te=Array.prototype.indexOf.call(J,j,void 0),Fe;(Fe=Te>=0)&&Array.prototype.splice.call(J,Te,1),Fe&&(fe(j),S.g[B].length==0&&(delete S.g[B],S.h--))}}function xe(S,j,B,J){for(let Te=0;Te<S.length;++Te){const Fe=S[Te];if(!Fe.da&&Fe.listener==j&&Fe.capture==!!B&&Fe.ha==J)return Te}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),Ke={};function ke(S,j,B,J,Te){if(Array.isArray(j)){for(let Fe=0;Fe<j.length;Fe++)ke(S,j[Fe],B,J,Te);return null}return B=hr(B),S&&S[Ie]?S.J(j,B,a(J)?!!J.capture:!1,Te):be(S,j,B,!1,J,Te)}function be(S,j,B,J,Te,Fe){if(!j)throw Error("Invalid event type");const Et=a(Te)?!!Te.capture:!!Te;let On=wn(S);if(On||(S[qe]=On=new ie(S)),B=On.add(j,B,J,Et,Fe),B.proxy)return B;if(J=Dt(),B.proxy=J,J.src=S,J.listener=B,S.addEventListener)G||(Te=Et),Te===void 0&&(Te=!1),S.addEventListener(j.toString(),J,Te);else if(S.attachEvent)S.attachEvent(jt(j.toString()),J);else if(S.addListener&&S.removeListener)S.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return B}function Dt(){function S(B){return j.call(S.src,S.listener,B)}const j=gn;return S}function Ye(S,j,B,J,Te){if(Array.isArray(j))for(var Fe=0;Fe<j.length;Fe++)Ye(S,j[Fe],B,J,Te);else J=a(J)?!!J.capture:!!J,B=hr(B),S&&S[Ie]?(S=S.i,Fe=String(j).toString(),Fe in S.g&&(j=S.g[Fe],B=xe(j,B,J,Te),B>-1&&(fe(j[B]),Array.prototype.splice.call(j,B,1),j.length==0&&(delete S.g[Fe],S.h--)))):S&&(S=wn(S))&&(j=S.g[j.toString()],S=-1,j&&(S=xe(j,B,J,Te)),(B=S>-1?j[S]:null)&&cn(B))}function cn(S){if(typeof S!="number"&&S&&!S.da){var j=S.src;if(j&&j[Ie])le(j.i,S);else{var B=S.type,J=S.proxy;j.removeEventListener?j.removeEventListener(B,J,S.capture):j.detachEvent?j.detachEvent(jt(B),J):j.addListener&&j.removeListener&&j.removeListener(J),(B=wn(j))?(le(B,S),B.h==0&&(B.src=null,j[qe]=null)):fe(S)}}}function jt(S){return S in Ke?Ke[S]:Ke[S]="on"+S}function gn(S,j){if(S.da)S=!0;else{j=new he(j,this);const B=S.listener,J=S.ha||S.src;S.fa&&cn(S),S=B.call(J,j)}return S}function wn(S){return S=S[qe],S instanceof ie?S:null}var pt="__closure_events_fn_"+(Math.random()*1e9>>>0);function hr(S){return typeof S=="function"?S:(S[pt]||(S[pt]=function(j){return S.handleEvent(j)}),S[pt])}function zn(){L.call(this),this.i=new ie(this),this.M=this,this.G=null}h(zn,L),zn.prototype[Ie]=!0,zn.prototype.removeEventListener=function(S,j,B,J){Ye(this,S,j,B,J)};function Hn(S,j){var B,J=S.G;if(J)for(B=[];J;J=J.G)B.push(J);if(S=S.M,J=j.type||j,typeof j=="string")j=new F(j,S);else if(j instanceof F)j.target=j.target||S;else{var Te=j;j=new F(J,S),ne(j,Te)}Te=!0;let Fe,Et;if(B)for(Et=B.length-1;Et>=0;Et--)Fe=j.g=B[Et],Te=ei(Fe,J,!0,j)&&Te;if(Fe=j.g=S,Te=ei(Fe,J,!0,j)&&Te,Te=ei(Fe,J,!1,j)&&Te,B)for(Et=0;Et<B.length;Et++)Fe=j.g=B[Et],Te=ei(Fe,J,!1,j)&&Te}zn.prototype.N=function(){if(zn.Z.N.call(this),this.i){var S=this.i;for(const j in S.g){const B=S.g[j];for(let J=0;J<B.length;J++)fe(B[J]);delete S.g[j],S.h--}}this.G=null},zn.prototype.J=function(S,j,B,J){return this.i.add(String(S),j,!1,B,J)},zn.prototype.K=function(S,j,B,J){return this.i.add(String(S),j,!0,B,J)};function ei(S,j,B,J){if(j=S.i.g[String(j)],!j)return!0;j=j.concat();let Te=!0;for(let Fe=0;Fe<j.length;++Fe){const Et=j[Fe];if(Et&&!Et.da&&Et.capture==B){const On=Et.listener,os=Et.ha||Et.src;Et.fa&&le(S.i,Et),Te=On.call(os,J)!==!1&&Te}}return Te&&!J.defaultPrevented}function xo(S,j){if(typeof S!="function")if(S&&typeof S.handleEvent=="function")S=c(S.handleEvent,S);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:o.setTimeout(S,j||0)}function Rr(S){S.g=xo(()=>{S.g=null,S.i&&(S.i=!1,Rr(S))},S.l);const j=S.h;S.h=null,S.m.apply(null,j)}class Ai extends L{constructor(j,B){super(),this.m=j,this.l=B,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:Rr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function js(S){L.call(this),this.h=S,this.g={}}h(js,L);var wt=[];function Qn(S){ge(S.g,function(j,B){this.g.hasOwnProperty(B)&&cn(j)},S),S.g={}}js.prototype.N=function(){js.Z.N.call(this),Qn(this)},js.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dr=o.JSON.stringify,Vt=o.JSON.parse,jn=class{stringify(S){return o.JSON.stringify(S,void 0)}parse(S){return o.JSON.parse(S,void 0)}};function nn(){}function Fo(){}var Gi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $s(){F.call(this,"d")}h($s,F);function Nn(){F.call(this,"c")}h(Nn,F);var Ii={},He=null;function Pe(){return He=He||new zn}Ii.Ia="serverreachability";function Ce(S){F.call(this,Ii.Ia,S)}h(Ce,F);function on(S){const j=Pe();Hn(j,new Ce(j))}Ii.STAT_EVENT="statevent";function z(S,j){F.call(this,Ii.STAT_EVENT,S),this.stat=j}h(z,F);function Tt(S){const j=Pe();Hn(j,new z(j,S))}Ii.Ja="timingevent";function X(S,j){F.call(this,Ii.Ja,S),this.size=j}h(X,F);function ae(S,j){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){S()},j)}function Ve(){this.g=!0}Ve.prototype.ua=function(){this.g=!1};function ee(S,j,B,J,Te,Fe){S.info(function(){if(S.g)if(Fe){var Et="",On=Fe.split("&");for(let Fr=0;Fr<On.length;Fr++){var os=On[Fr].split("=");if(os.length>1){const vs=os[0];os=os[1];const Gl=vs.split("_");Et=Gl.length>=2&&Gl[1]=="type"?Et+(vs+"="+os+"&"):Et+(vs+"=redacted&")}}}else Et=null;else Et=Fe;return"XMLHTTP REQ ("+J+") [attempt "+Te+"]: "+j+`
`+B+`
`+Et})}function ye(S,j,B,J,Te,Fe,Et){S.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+Te+"]: "+j+`
`+B+`
`+Fe+" "+Et})}function je(S,j,B,J){S.info(function(){return"XMLHTTP TEXT ("+j+"): "+Ge(S,B)+(J?" "+J:"")})}function Je(S,j){S.info(function(){return"TIMEOUT: "+j})}Ve.prototype.info=function(){};function Ge(S,j){if(!S.g)return j;if(!j)return null;try{const Fe=JSON.parse(j);if(Fe){for(S=0;S<Fe.length;S++)if(Array.isArray(Fe[S])){var B=Fe[S];if(!(B.length<2)){var J=B[1];if(Array.isArray(J)&&!(J.length<1)){var Te=J[0];if(Te!="noop"&&Te!="stop"&&Te!="close")for(let Et=1;Et<J.length;Et++)J[Et]=""}}}}return dr(Fe)}catch{return j}}var nt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},et={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mt;function Gt(){}h(Gt,nn),Gt.prototype.g=function(){return new XMLHttpRequest},Mt=new Gt;function _n(S){return encodeURIComponent(String(S))}function q(S){var j=1;S=S.split(":");const B=[];for(;j>0&&S.length;)B.push(S.shift()),j--;return S.length&&B.push(S.join(":")),B}function re(S,j,B,J){this.j=S,this.i=j,this.l=B,this.S=J||1,this.V=new js(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Q}function Q(){this.i=null,this.g="",this.h=!1}var te={},se={};function oe(S,j,B){S.M=1,S.A=Qd(Pc(j)),S.u=B,S.R=!0,Me(S,null)}function Me(S,j){S.F=Date.now(),De(S),S.B=Pc(S.A);var B=S.B,J=S.S;Array.isArray(J)||(J=[String(J)]),Xb(B.i,"t",J),S.C=0,B=S.j.L,S.h=new Q,S.g=bP(S.j,B?j:null,!S.u),S.P>0&&(S.O=new Ai(c(S.Y,S,S.g),S.P)),j=S.V,B=S.g,J=S.ba;var Te="readystatechange";Array.isArray(Te)||(Te&&(wt[0]=Te.toString()),Te=wt);for(let Fe=0;Fe<Te.length;Fe++){const Et=ke(B,Te[Fe],J||j.handleEvent,!1,j.h||j);if(!Et)break;j.g[Et.key]=Et}j=S.J?Z(S.J):{},S.u?(S.v||(S.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.B,S.v,S.u,j)):(S.v="GET",S.g.ea(S.B,S.v,null,j)),on(),ee(S.i,S.v,S.B,S.l,S.S,S.u)}re.prototype.ba=function(S){S=S.target;const j=this.O;j&&jh(S)==3?j.j():this.Y(S)},re.prototype.Y=function(S){try{if(S==this.g)e:{const On=jh(this.g),os=this.g.ya(),Fr=this.g.ca();if(!(On<3)&&(On!=3||this.g&&(this.h.h||this.g.la()||xP(this.g)))){this.K||On!=4||os==7||(os==8||Fr<=0?on(3):on(2)),vt(this);var j=this.g.ca();this.X=j;var B=Be(this);if(this.o=j==200,ye(this.i,this.v,this.B,this.l,this.S,On,j),this.o){if(this.U&&!this.L){t:{if(this.g){var J,Te=this.g;if((J=Te.g?Te.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(J)){var Fe=J;break t}}Fe=null}if(S=Fe)je(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,dt(this,S);else{this.o=!1,this.m=3,Tt(12),ht(this),Ct(this);break e}}if(this.R){S=!0;let vs;for(;!this.K&&this.C<B.length;)if(vs=Le(this,B),vs==se){On==4&&(this.m=4,Tt(14),S=!1),je(this.i,this.l,null,"[Incomplete Response]");break}else if(vs==te){this.m=4,Tt(15),je(this.i,this.l,B,"[Invalid Chunk]"),S=!1;break}else je(this.i,this.l,vs,null),dt(this,vs);if(Re(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),On!=4||B.length!=0||this.h.h||(this.m=1,Tt(16),S=!1),this.o=this.o&&S,!S)je(this.i,this.l,B,"[Invalid Chunked Response]"),ht(this),Ct(this);else if(B.length>0&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.aa&&!Et.P&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),I0(Et),Et.P=!0,Tt(11))}}else je(this.i,this.l,B,null),dt(this,B);On==4&&ht(this),this.o&&!this.K&&(On==4?Vv(this.j,this):(this.o=!1,De(this)))}else Jb(this.g),j==400&&B.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),ht(this),Ct(this)}}}catch{}};function Be(S){if(!Re(S))return S.g.la();const j=xP(S.g);if(j==="")return"";let B="";const J=j.length,Te=jh(S.g)==4;if(!S.h.i){if(typeof TextDecoder>"u")return ht(S),Ct(S),"";S.h.i=new o.TextDecoder}for(let Fe=0;Fe<J;Fe++)S.h.h=!0,B+=S.h.i.decode(j[Fe],{stream:!(Te&&Fe==J-1)});return j.length=0,S.h.g+=B,S.C=0,S.h.g}function Re(S){return S.g?S.v=="GET"&&S.M!=2&&S.j.Aa:!1}function Le(S,j){var B=S.C,J=j.indexOf(`
`,B);return J==-1?se:(B=Number(j.substring(B,J)),isNaN(B)?te:(J+=1,J+B>j.length?se:(j=j.slice(J,J+B),S.C=J+B,j)))}re.prototype.cancel=function(){this.K=!0,ht(this)};function De(S){S.T=Date.now()+S.H,ct(S,S.H)}function ct(S,j){if(S.D!=null)throw Error("WatchDog timer not null");S.D=ae(c(S.aa,S),j)}function vt(S){S.D&&(o.clearTimeout(S.D),S.D=null)}re.prototype.aa=function(){this.D=null;const S=Date.now();S-this.T>=0?(Je(this.i,this.B),this.M!=2&&(on(),Tt(17)),ht(this),this.m=2,Ct(this)):ct(this,this.T-S)};function Ct(S){S.j.I==0||S.K||Vv(S.j,S)}function ht(S){vt(S);var j=S.O;j&&typeof j.dispose=="function"&&j.dispose(),S.O=null,Qn(S.V),S.g&&(j=S.g,S.g=null,j.abort(),j.dispose())}function dt(S,j){try{var B=S.j;if(B.I!=0&&(B.g==S||bu(B.h,S))){if(!S.L&&bu(B.h,S)&&B.I==3){try{var J=B.Ba.g.parse(j)}catch{J=null}if(Array.isArray(J)&&J.length==3){var Te=J;if(Te[0]==0){e:if(!B.v){if(B.g)if(B.g.F+3e3<S.F)Fv(B),Vl(B);else break e;Vh(B),Tt(18)}}else B.xa=Te[1],0<B.xa-B.K&&Te[2]<37500&&B.F&&B.A==0&&!B.C&&(B.C=ae(c(B.Va,B),6e3));_i(B.h)<=1&&B.ta&&(B.ta=void 0)}else zl(B,11)}else if((S.L||B.g==S)&&Fv(B),!U(j))for(Te=B.Ba.g.parse(j),j=0;j<Te.length;j++){let Fr=Te[j];const vs=Fr[0];if(!(vs<=B.K))if(B.K=vs,Fr=Fr[1],B.I==2)if(Fr[0]=="c"){B.M=Fr[1],B.ba=Fr[2];const Gl=Fr[3];Gl!=null&&(B.ka=Gl,B.j.info("VER="+B.ka));const sf=Fr[4];sf!=null&&(B.za=sf,B.j.info("SVER="+B.za));const zh=Fr[5];zh!=null&&typeof zh=="number"&&zh>0&&(J=1.5*zh,B.O=J,B.j.info("backChannelRequestTimeoutMs_="+J)),J=B;const Gh=S.g;if(Gh){const Uv=Gh.g?Gh.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uv){var Fe=J.h;Fe.g||Uv.indexOf("spdy")==-1&&Uv.indexOf("quic")==-1&&Uv.indexOf("h2")==-1||(Fe.j=Fe.l,Fe.g=new Set,Fe.h&&(Ic(Fe,Fe.h),Fe.h=null))}if(J.G){const tE=Gh.g?Gh.g.getResponseHeader("X-HTTP-Session-Id"):null;tE&&(J.wa=tE,Er(J.J,J.G,tE))}}B.I=3,B.l&&B.l.ra(),B.aa&&(B.T=Date.now()-S.F,B.j.info("Handshake RTT: "+B.T+"ms")),J=B;var Et=S;if(J.na=eE(J,J.L?J.ba:null,J.W),Et.L){$l(J.h,Et);var On=Et,os=J.O;os&&(On.H=os),On.D&&(vt(On),De(On)),J.g=Et}else Vo(J);B.i.length>0&&rf(B)}else Fr[0]!="stop"&&Fr[0]!="close"||zl(B,7);else B.I==3&&(Fr[0]=="stop"||Fr[0]=="close"?Fr[0]=="stop"?zl(B,7):jv(B):Fr[0]!="noop"&&B.l&&B.l.qa(Fr),B.A=0)}}on(4)}catch{}}var Tn=class{constructor(S,j){this.g=S,this.map=j}};function Mr(S){this.l=S||10,o.PerformanceNavigationTiming?(S=o.performance.getEntriesByType("navigation"),S=S.length>0&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $r(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function _i(S){return S.h?1:S.g?S.g.size:0}function bu(S,j){return S.h?S.h==j:S.g?S.g.has(j):!1}function Ic(S,j){S.g?S.g.add(j):S.h=j}function $l(S,j){S.h&&S.h==j?S.h=null:S.g&&S.g.has(j)&&S.g.delete(j)}Mr.prototype.cancel=function(){if(this.i=ss(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function ss(S){if(S.h!=null)return S.i.concat(S.h.G);if(S.g!=null&&S.g.size!==0){let j=S.i;for(const B of S.g.values())j=j.concat(B.G);return j}return g(S.i)}var Fp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pi(S,j){if(S){S=S.split("&");for(let B=0;B<S.length;B++){const J=S[B].indexOf("=");let Te,Fe=null;J>=0?(Te=S[B].substring(0,J),Fe=S[B].substring(J+1)):Te=S[B],j(Te,Fe?decodeURIComponent(Fe.replace(/\+/g," ")):"")}}}function Rh(S){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;S instanceof Rh?(this.l=S.l,b0(this,S.j),this.o=S.o,this.g=S.g,Mh(this,S.u),this.h=S.h,Vp(this,Zb(S.i)),this.m=S.m):S&&(j=String(S).match(Fp))?(this.l=!1,b0(this,j[1]||"",!0),this.o=E0(j[2]||""),this.g=E0(j[3]||"",!0),Mh(this,j[4]),this.h=E0(j[5]||"",!0),Vp(this,j[6]||"",!0),this.m=E0(j[7]||"")):(this.l=!1,this.i=new sr(null,this.l))}Rh.prototype.toString=function(){const S=[];var j=this.j;j&&S.push(S0(j,Wb,!0),":");var B=this.g;return(B||j=="file")&&(S.push("//"),(j=this.o)&&S.push(S0(j,Wb,!0),"@"),S.push(_n(B).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.u,B!=null&&S.push(":",String(B))),(B=this.h)&&(this.g&&B.charAt(0)!="/"&&S.push("/"),S.push(S0(B,B.charAt(0)=="/"?T0:Hb,!0))),(B=this.i.toString())&&S.push("?",B),(B=this.m)&&S.push("#",S0(B,qb)),S.join("")},Rh.prototype.resolve=function(S){const j=Pc(this);let B=!!S.j;B?b0(j,S.j):B=!!S.o,B?j.o=S.o:B=!!S.g,B?j.g=S.g:B=S.u!=null;var J=S.h;if(B)Mh(j,S.u);else if(B=!!S.h){if(J.charAt(0)!="/")if(this.g&&!this.h)J="/"+J;else{var Te=j.h.lastIndexOf("/");Te!=-1&&(J=j.h.slice(0,Te+1)+J)}if(Te=J,Te==".."||Te==".")J="";else if(Te.indexOf("./")!=-1||Te.indexOf("/.")!=-1){J=Te.lastIndexOf("/",0)==0,Te=Te.split("/");const Fe=[];for(let Et=0;Et<Te.length;){const On=Te[Et++];On=="."?J&&Et==Te.length&&Fe.push(""):On==".."?((Fe.length>1||Fe.length==1&&Fe[0]!="")&&Fe.pop(),J&&Et==Te.length&&Fe.push("")):(Fe.push(On),J=!0)}J=Fe.join("/")}else J=Te}return B?j.h=J:B=S.i.toString()!=="",B?Vp(j,Zb(S.i)):B=!!S.m,B&&(j.m=S.m),j};function Pc(S){return new Rh(S)}function b0(S,j,B){S.j=B?E0(j,!0):j,S.j&&(S.j=S.j.replace(/:$/,""))}function Mh(S,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);S.u=j}else S.u=null}function Vp(S,j,B){j instanceof sr?(S.i=j,Ov(S.i,S.l)):(B||(j=S0(j,iD)),S.i=new sr(j,S.l))}function Er(S,j,B){S.i.set(j,B)}function Qd(S){return Er(S,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),S}function E0(S,j){return S?j?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function S0(S,j,B){return typeof S=="string"?(S=encodeURI(S).replace(j,Bb),B&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function Bb(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Wb=/[#\/\?@]/g,Hb=/[#\?:]/g,T0=/[#\?]/g,iD=/[#\?@]/g,qb=/#/g;function sr(S,j){this.h=this.g=null,this.i=S||null,this.j=!!j}function Nh(S){S.g||(S.g=new Map,S.h=0,S.i&&Pi(S.i,function(j,B){S.add(decodeURIComponent(j.replace(/\+/g," ")),B)}))}t=sr.prototype,t.add=function(S,j){Nh(this),this.i=null,S=Oh(this,S);let B=this.g.get(S);return B||this.g.set(S,B=[]),B.push(j),this.h+=1,this};function Kb(S,j){Nh(S),j=Oh(S,j),S.g.has(j)&&(S.i=null,S.h-=S.g.get(j).length,S.g.delete(j))}function Nv(S,j){return Nh(S),j=Oh(S,j),S.g.has(j)}t.forEach=function(S,j){Nh(this),this.g.forEach(function(B,J){B.forEach(function(Te){S.call(j,Te,J,this)},this)},this)};function Yb(S,j){Nh(S);let B=[];if(typeof j=="string")Nv(S,j)&&(B=B.concat(S.g.get(Oh(S,j))));else for(S=Array.from(S.g.values()),j=0;j<S.length;j++)B=B.concat(S[j]);return B}t.set=function(S,j){return Nh(this),this.i=null,S=Oh(this,S),Nv(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[j]),this.h+=1,this},t.get=function(S,j){return S?(S=Yb(this,S),S.length>0?String(S[0]):j):j};function Xb(S,j,B){Kb(S,j),B.length>0&&(S.i=null,S.g.set(Oh(S,j),g(B)),S.h+=B.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],j=Array.from(this.g.keys());for(let J=0;J<j.length;J++){var B=j[J];const Te=_n(B);B=Yb(this,B);for(let Fe=0;Fe<B.length;Fe++){let Et=Te;B[Fe]!==""&&(Et+="="+_n(B[Fe])),S.push(Et)}}return this.i=S.join("&")};function Zb(S){const j=new sr;return j.i=S.i,S.g&&(j.g=new Map(S.g),j.h=S.h),j}function Oh(S,j){return j=String(j),S.j&&(j=j.toLowerCase()),j}function Ov(S,j){j&&!S.j&&(Nh(S),S.i=null,S.g.forEach(function(B,J){const Te=J.toLowerCase();J!=Te&&(Kb(this,J),Xb(this,Te,B))},S)),S.j=j}function Lh(S,j){const B=new Ve;if(o.Image){const J=new Image;J.onload=u(wo,B,"TestLoadImage: loaded",!0,j,J),J.onerror=u(wo,B,"TestLoadImage: error",!1,j,J),J.onabort=u(wo,B,"TestLoadImage: abort",!1,j,J),J.ontimeout=u(wo,B,"TestLoadImage: timeout",!1,j,J),o.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=S}else j(!1)}function Dh(S,j){const B=new Ve,J=new AbortController,Te=setTimeout(()=>{J.abort(),wo(B,"TestPingServer: timeout",!1,j)},1e4);fetch(S,{signal:J.signal}).then(Fe=>{clearTimeout(Te),Fe.ok?wo(B,"TestPingServer: ok",!0,j):wo(B,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(Te),wo(B,"TestPingServer: error",!1,j)})}function wo(S,j,B,J,Te){try{Te&&(Te.onload=null,Te.onerror=null,Te.onabort=null,Te.ontimeout=null),J(B)}catch{}}function k0(){this.g=new jn}function ef(S){this.i=S.Sb||null,this.h=S.ab||!1}h(ef,nn),ef.prototype.g=function(){return new Fl(this.i,this.h)};function Fl(S,j){zn.call(this),this.H=S,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(Fl,zn),t=Fl.prototype,t.open=function(S,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=S,this.D=j,this.readyState=1,Eu(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};S&&(j.body=S),(this.H||o).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,zp(this)),this.readyState=0},t.Pa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Eu(this)),this.g&&(this.readyState=3,Eu(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yP(this)}else S.text().then(this.Oa.bind(this),this.ga.bind(this))};function yP(S){S.j.read().then(S.Ma.bind(S)).catch(S.ga.bind(S))}t.Ma=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var j=S.value?S.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!S.done}))&&(this.response=this.responseText+=j)}S.done?zp(this):Eu(this),this.readyState==3&&yP(this)}},t.Oa=function(S){this.g&&(this.response=this.responseText=S,zp(this))},t.Na=function(S){this.g&&(this.response=S,zp(this))},t.ga=function(){this.g&&zp(this)};function zp(S){S.readyState=4,S.l=null,S.j=null,S.B=null,Eu(S)}t.setRequestHeader=function(S,j){this.A.append(S,j)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],j=this.h.entries();for(var B=j.next();!B.done;)B=B.value,S.push(B[0]+": "+B[1]),B=j.next();return S.join(`\r
`)};function Eu(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty(Fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function vP(S){let j="";return ge(S,function(B,J){j+=J,j+=":",j+=B,j+=`\r
`}),j}function Lv(S,j,B){e:{for(J in B){var J=!1;break e}J=!0}J||(B=vP(B),typeof S=="string"?B!=null&&_n(B):Er(S,j,B))}function ti(S){zn.call(this),this.headers=new Map,this.L=S||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ti,zn);var _P=/^https?$/i,sD=["POST","PUT"];t=ti.prototype,t.Fa=function(S){this.H=S},t.ea=function(S,j,B,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);j=j?j.toUpperCase():"GET",this.D=S,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mt.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(j,String(S),!0),this.B=!1}catch(Fe){Gp(this,Fe);return}if(S=B||"",B=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var Te in J)B.set(Te,J[Te]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const Fe of J.keys())B.set(Fe,J.get(Fe));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from(B.keys()).find(Fe=>Fe.toLowerCase()=="content-type"),Te=o.FormData&&S instanceof o.FormData,!(Array.prototype.indexOf.call(sD,j,void 0)>=0)||J||Te||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Fe,Et]of B)this.g.setRequestHeader(Fe,Et);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(S),this.v=!1}catch(Fe){Gp(this,Fe)}};function Gp(S,j){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=j,S.o=5,Up(S),nf(S)}function Up(S){S.A||(S.A=!0,Hn(S,"complete"),Hn(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=S||7,Hn(this,"complete"),Hn(this,"abort"),nf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nf(this,!0)),ti.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tf(this):this.Xa())},t.Xa=function(){tf(this)};function tf(S){if(S.h&&typeof s<"u"){if(S.v&&jh(S)==4)setTimeout(S.Ca.bind(S),0);else if(Hn(S,"readystatechange"),jh(S)==4){S.h=!1;try{const Fe=S.ca();e:switch(Fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var B;if(!(B=j)){var J;if(J=Fe===0){let Et=String(S.D).match(Fp)[1]||null;!Et&&o.self&&o.self.location&&(Et=o.self.location.protocol.slice(0,-1)),J=!_P.test(Et?Et.toLowerCase():"")}B=J}if(B)Hn(S,"complete"),Hn(S,"success");else{S.o=6;try{var Te=jh(S)>2?S.g.statusText:""}catch{Te=""}S.l=Te+" ["+S.ca()+"]",Up(S)}}finally{nf(S)}}}}function nf(S,j){if(S.g){S.m&&(clearTimeout(S.m),S.m=null);const B=S.g;S.g=null,j||Hn(S,"ready");try{B.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function jh(S){return S.g?S.g.readyState:0}t.ca=function(){try{return jh(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(S){if(this.g){var j=this.g.responseText;return S&&j.indexOf(S)==0&&(j=j.substring(S.length)),Vt(j)}};function xP(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.F){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function Jb(S){const j={};S=(S.g&&jh(S)>=2&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<S.length;J++){if(U(S[J]))continue;var B=q(S[J]);const Te=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const Fe=j[Te]||[];j[Te]=Fe,Fe.push(B)}Se(j,function(J){return J.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function $h(S,j,B){return B&&B.internalChannelParams&&B.internalChannelParams[S]||j}function Dv(S){this.za=0,this.i=[],this.j=new Ve,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=$h("failFast",!1,S),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=$h("baseRetryDelayMs",5e3,S),this.Za=$h("retryDelaySeedMs",1e4,S),this.Ta=$h("forwardChannelMaxRetries",2,S),this.va=$h("forwardChannelRequestTimeoutMs",2e4,S),this.ma=S&&S.xmlHttpFactory||void 0,this.Ua=S&&S.Rb||void 0,this.Aa=S&&S.useFetchStreams||!1,this.O=void 0,this.L=S&&S.supportsCrossDomainXhr||!1,this.M="",this.h=new Mr(S&&S.concurrentRequestLimit),this.Ba=new k0,this.S=S&&S.fastHandshake||!1,this.R=S&&S.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=S&&S.Pb||!1,S&&S.ua&&this.j.ua(),S&&S.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&S&&S.detectBufferingProxy||!1,this.ia=void 0,S&&S.longPollingTimeout&&S.longPollingTimeout>0&&(this.ia=S.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Dv.prototype,t.ka=8,t.I=1,t.connect=function(S,j,B,J){Tt(0),this.W=S,this.H=j||{},B&&J!==void 0&&(this.H.OSID=B,this.H.OAID=J),this.F=this.X,this.J=eE(this,null,this.W),rf(this)};function jv(S){if($v(S),S.I==3){var j=S.V++,B=Pc(S.J);if(Er(B,"SID",S.M),Er(B,"RID",j),Er(B,"TYPE","terminate"),Fh(S,B),j=new re(S,S.j,j),j.M=2,j.A=Qd(Pc(B)),B=!1,o.navigator&&o.navigator.sendBeacon)try{B=o.navigator.sendBeacon(j.A.toString(),"")}catch{}!B&&o.Image&&(new Image().src=j.A,B=!0),B||(j.g=bP(j.j,null),j.g.ea(j.A)),j.F=Date.now(),De(j)}P0(S)}function Vl(S){S.g&&(I0(S),S.g.cancel(),S.g=null)}function $v(S){Vl(S),S.v&&(o.clearTimeout(S.v),S.v=null),Fv(S),S.h.cancel(),S.m&&(typeof S.m=="number"&&o.clearTimeout(S.m),S.m=null)}function rf(S){if(!$r(S.h)&&!S.m){S.m=!0;var j=S.Ea;M||N(),V||(M(),V=!0),C.add(j,S),S.D=0}}function wP(S,j){return _i(S.h)>=S.h.j-(S.m?1:0)?!1:S.m?(S.i=j.G.concat(S.i),!0):S.I==1||S.I==2||S.D>=(S.Sa?0:S.Ta)?!1:(S.m=ae(c(S.Ea,S,j),zv(S,S.D)),S.D++,!0)}t.Ea=function(S){if(this.m)if(this.m=null,this.I==1){if(!S){this.V=Math.floor(Math.random()*1e5),S=this.V++;const Te=new re(this,this.j,S);let Fe=this.o;if(this.U&&(Fe?(Fe=Z(Fe),ne(Fe,this.U)):Fe=this.U),this.u!==null||this.R||(Te.J=Fe,Fe=null),this.S)e:{for(var j=0,B=0;B<this.i.length;B++){t:{var J=this.i[B];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(j+=J,j>4096){j=B;break e}if(j===4096||B===this.i.length-1){j=B+1;break e}}j=1e3}else j=1e3;j=Qb(this,Te,j),B=Pc(this.J),Er(B,"RID",S),Er(B,"CVER",22),this.G&&Er(B,"X-HTTP-Session-Id",this.G),Fh(this,B),Fe&&(this.R?j="headers="+_n(vP(Fe))+"&"+j:this.u&&Lv(B,this.u,Fe)),Ic(this.h,Te),this.Ra&&Er(B,"TYPE","init"),this.S?(Er(B,"$req",j),Er(B,"SID","null"),Te.U=!0,oe(Te,B,null)):oe(Te,B,j),this.I=2}}else this.I==3&&(S?A0(this,S):this.i.length==0||$r(this.h)||A0(this))};function A0(S,j){var B;j?B=j.l:B=S.V++;const J=Pc(S.J);Er(J,"SID",S.M),Er(J,"RID",B),Er(J,"AID",S.K),Fh(S,J),S.u&&S.o&&Lv(J,S.u,S.o),B=new re(S,S.j,B,S.D+1),S.u===null&&(B.J=S.o),j&&(S.i=j.G.concat(S.i)),j=Qb(S,B,1e3),B.H=Math.round(S.va*.5)+Math.round(S.va*.5*Math.random()),Ic(S.h,B),oe(B,J,j)}function Fh(S,j){S.H&&ge(S.H,function(B,J){Er(j,J,B)}),S.l&&ge({},function(B,J){Er(j,J,B)})}function Qb(S,j,B){B=Math.min(S.i.length,B);const J=S.l?c(S.l.Ka,S.l,S):null;e:{var Te=S.i;let On=-1;for(;;){const os=["count="+B];On==-1?B>0?(On=Te[0].g,os.push("ofs="+On)):On=0:os.push("ofs="+On);let Fr=!0;for(let vs=0;vs<B;vs++){var Fe=Te[vs].g;const Gl=Te[vs].map;if(Fe-=On,Fe<0)On=Math.max(0,Te[vs].g-100),Fr=!1;else try{Fe="req"+Fe+"_"||"";try{var Et=Gl instanceof Map?Gl:Object.entries(Gl);for(const[sf,zh]of Et){let Gh=zh;a(zh)&&(Gh=dr(zh)),os.push(Fe+sf+"="+encodeURIComponent(Gh))}}catch(sf){throw os.push(Fe+"type="+encodeURIComponent("_badmap")),sf}}catch{J&&J(Gl)}}if(Fr){Et=os.join("&");break e}}Et=void 0}return S=S.i.splice(0,B),j.G=S,Et}function Vo(S){if(!S.g&&!S.v){S.Y=1;var j=S.Da;M||N(),V||(M(),V=!0),C.add(j,S),S.A=0}}function Vh(S){return S.g||S.v||S.A>=3?!1:(S.Y++,S.v=ae(c(S.Da,S),zv(S,S.A)),S.A++,!0)}t.Da=function(){if(this.v=null,Bp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var S=4*this.T;this.j.info("BP detection timer enabled: "+S),this.B=ae(c(this.Wa,this),S)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),Vl(this),Bp(this))};function I0(S){S.B!=null&&(o.clearTimeout(S.B),S.B=null)}function Bp(S){S.g=new re(S,S.j,"rpc",S.Y),S.u===null&&(S.g.J=S.o),S.g.P=0;var j=Pc(S.na);Er(j,"RID","rpc"),Er(j,"SID",S.M),Er(j,"AID",S.K),Er(j,"CI",S.F?"0":"1"),!S.F&&S.ia&&Er(j,"TO",S.ia),Er(j,"TYPE","xmlhttp"),Fh(S,j),S.u&&S.o&&Lv(j,S.u,S.o),S.O&&(S.g.H=S.O);var B=S.g;S=S.ba,B.M=1,B.A=Qd(Pc(j)),B.u=null,B.R=!0,Me(B,S)}t.Va=function(){this.C!=null&&(this.C=null,Vl(this),Vh(this),Tt(19))};function Fv(S){S.C!=null&&(o.clearTimeout(S.C),S.C=null)}function Vv(S,j){var B=null;if(S.g==j){Fv(S),I0(S),S.g=null;var J=2}else if(bu(S.h,j))B=j.G,$l(S.h,j),J=1;else return;if(S.I!=0){if(j.o)if(J==1){B=j.u?j.u.length:0,j=Date.now()-j.F;var Te=S.D;J=Pe(),Hn(J,new X(J,B)),rf(S)}else Vo(S);else if(Te=j.m,Te==3||Te==0&&j.X>0||!(J==1&&wP(S,j)||J==2&&Vh(S)))switch(B&&B.length>0&&(j=S.h,j.i=j.i.concat(B)),Te){case 1:zl(S,5);break;case 4:zl(S,10);break;case 3:zl(S,6);break;default:zl(S,2)}}}function zv(S,j){let B=S.Qa+Math.floor(Math.random()*S.Za);return S.isActive()||(B*=2),B*j}function zl(S,j){if(S.j.info("Error code "+j),j==2){var B=c(S.bb,S),J=S.Ua;const Te=!J;J=new Rh(J||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||b0(J,"https"),Qd(J),Te?Lh(J.toString(),B):Dh(J.toString(),B)}else Tt(2);S.I=0,S.l&&S.l.pa(j),P0(S),$v(S)}t.bb=function(S){S?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function P0(S){if(S.I=0,S.ja=[],S.l){const j=ss(S.h);(j.length!=0||S.i.length!=0)&&(y(S.ja,j),y(S.ja,S.i),S.h.i.length=0,g(S.i),S.i.length=0),S.l.oa()}}function eE(S,j,B){var J=B instanceof Rh?Pc(B):new Rh(B);if(J.g!="")j&&(J.g=j+"."+J.g),Mh(J,J.u);else{var Te=o.location;J=Te.protocol,j=j?j+"."+Te.hostname:Te.hostname,Te=+Te.port;const Fe=new Rh(null);J&&b0(Fe,J),j&&(Fe.g=j),Te&&Mh(Fe,Te),B&&(Fe.h=B),J=Fe}return B=S.G,j=S.wa,B&&j&&Er(J,B,j),Er(J,"VER",S.ka),Fh(S,J),J}function bP(S,j,B){if(j&&!S.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=S.Aa&&!S.ma?new ti(new ef({ab:B})):new ti(S.ma),j.Fa(S.L),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function EP(){}t=EP.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Gv(){}Gv.prototype.g=function(S,j){return new bo(S,j)};function bo(S,j){zn.call(this),this.g=new Dv(j),this.l=S,this.h=j&&j.messageUrlParams||null,S=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(S?S["X-WebChannel-Content-Type"]=j.messageContentType:S={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(S?S["X-WebChannel-Client-Profile"]=j.sa:S={"X-WebChannel-Client-Profile":j.sa}),this.g.U=S,(S=j&&j.Qb)&&!U(S)&&(this.g.u=S),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!U(j)&&(this.g.G=j,S=this.h,S!==null&&j in S&&(S=this.h,j in S&&delete S[j])),this.j=new Wp(this)}h(bo,zn),bo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bo.prototype.close=function(){jv(this.g)},bo.prototype.o=function(S){var j=this.g;if(typeof S=="string"){var B={};B.__data__=S,S=B}else this.v&&(B={},B.__data__=dr(S),S=B);j.i.push(new Tn(j.Ya++,S)),j.I==3&&rf(j)},bo.prototype.N=function(){this.g.l=null,delete this.j,jv(this.g),delete this.g,bo.Z.N.call(this)};function SP(S){$s.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var j=S.__sm__;if(j){e:{for(const B in j){S=B;break e}S=void 0}(this.i=S)&&(S=this.i,j=j!==null&&S in j?j[S]:void 0),this.data=j}else this.data=S}h(SP,$s);function TP(){Nn.call(this),this.status=1}h(TP,Nn);function Wp(S){this.g=S}h(Wp,EP),Wp.prototype.ra=function(){Hn(this.g,"a")},Wp.prototype.qa=function(S){Hn(this.g,new SP(S))},Wp.prototype.pa=function(S){Hn(this.g,new TP)},Wp.prototype.oa=function(){Hn(this.g,"b")},Gv.prototype.createWebChannel=Gv.prototype.g,bo.prototype.send=bo.prototype.o,bo.prototype.open=bo.prototype.m,bo.prototype.close=bo.prototype.close,ihe=function(){return new Gv},rhe=function(){return Pe()},nhe=Ii,O8={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,gM=nt,et.COMPLETE="complete",the=et,Fo.EventType=Gi,Gi.OPEN="a",Gi.CLOSE="b",Gi.ERROR="c",Gi.MESSAGE="d",zn.prototype.listen=zn.prototype.J,yS=Fo,ti.prototype.listenOnce=ti.prototype.K,ti.prototype.getLastError=ti.prototype.Ha,ti.prototype.getLastErrorCode=ti.prototype.ya,ti.prototype.getStatus=ti.prototype.ca,ti.prototype.getResponseJson=ti.prototype.La,ti.prototype.getResponseText=ti.prototype.la,ti.prototype.send=ti.prototype.ea,ti.prototype.setWithCredentials=ti.prototype.Fa,ehe=ti}).apply(typeof LC<"u"?LC:typeof self<"u"?self:typeof window<"u"?window:{});const PJ="@firebase/firestore",CJ="4.9.3";let na=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};na.UNAUTHENTICATED=new na(null),na.GOOGLE_CREDENTIALS=new na("google-credentials-uid"),na.FIRST_PARTY=new na("first-party-uid"),na.MOCK_USER=new na("mock-user");let hb="12.7.0";const D1=new vU("@firebase/firestore");function K_(){return D1.logLevel}function at(t,...e){if(D1.logLevel<=tr.DEBUG){const n=e.map(PU);D1.debug(`Firestore (${hb}): ${t}`,...n)}}function ds(t,...e){if(D1.logLevel<=tr.ERROR){const n=e.map(PU);D1.error(`Firestore (${hb}): ${t}`,...n)}}function Fk(t,...e){if(D1.logLevel<=tr.WARN){const n=e.map(PU);D1.warn(`Firestore (${hb}): ${t}`,...n)}}function PU(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Ft(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,she(t,r,n)}function she(t,e,n){let r=`FIRESTORE (${hb}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ds(r),new Error(r)}function tn(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||she(e,i,r)}function Xt(t,e){return t}const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xt extends Xd{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Td{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class a5e{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l5e{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(na.UNAUTHENTICATED)))}shutdown(){}}class c5e{constructor(e){this.t=e,this.currentUser=na.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tn(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Td;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Td,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Td)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(tn(typeof r.accessToken=="string",31837,{l:r}),new a5e(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tn(e===null||typeof e=="string",2055,{h:e}),new na(e)}}class u5e{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=na.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class h5e{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new u5e(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(na.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class RJ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d5e{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_l(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){tn(this.o===void 0,3512);const r=s=>{s.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,at("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new RJ(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(tn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new RJ(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function f5e(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class CU{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=f5e(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Rn(t,e){return t<e?-1:t>e?1:0}function L8(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Tj(i)===Tj(s)?Rn(i,s):Tj(i)?1:-1}return Rn(t.length,e.length)}const p5e=55296,m5e=57343;function Tj(t){const e=t.charCodeAt(0);return e>=p5e&&e<=m5e}function c2(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function ohe(t){return t+"\0"}const MJ="__name__";class ld{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ft(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ft(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ld.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ld?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=ld.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Rn(e.length,n.length)}static compareSegments(e,n){const r=ld.isNumericId(e),i=ld.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ld.extractNumericId(e).compare(ld.extractNumericId(n)):L8(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ag.fromString(e.substring(4,e.length-2))}}class Pr extends ld{construct(e,n,r){return new Pr(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new xt(We.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Pr(n)}static emptyPath(){return new Pr([])}}const g5e=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ji extends ld{construct(e,n,r){return new ji(e,n,r)}static isValidIdentifier(e){return g5e.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ji.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MJ}static keyField(){return new ji([MJ])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new xt(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new xt(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new xt(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new xt(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ji(n)}static emptyPath(){return new ji([])}}class At{constructor(e){this.path=e}static fromPath(e){return new At(Pr.fromString(e))}static fromName(e){return new At(Pr.fromString(e).popFirst(5))}static empty(){return new At(Pr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new At(new Pr(e.slice()))}}function ahe(t,e,n){if(!n)throw new xt(We.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function y5e(t,e,n,r){if(e===!0&&r===!0)throw new xt(We.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function NJ(t){if(!At.isDocumentKey(t))throw new xt(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function OJ(t){if(At.isDocumentKey(t))throw new xt(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lhe(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function uO(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ft(12329,{type:typeof t})}function jd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xt(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uO(t);throw new xt(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ns(t,e){const n={typeString:t};return e&&(n.value=e),n}function pI(t,e){if(!lhe(t))throw new xt(We.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new xt(We.INVALID_ARGUMENT,n);return!0}const LJ=-62135596800,DJ=1e6;class Ur{static now(){return Ur.fromMillis(Date.now())}static fromDate(e){return Ur.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*DJ);return new Ur(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<LJ)throw new xt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/DJ}_compareTo(e){return this.seconds===e.seconds?Rn(this.nanoseconds,e.nanoseconds):Rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ur._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pI(e,Ur._jsonSchema))return new Ur(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-LJ;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ur._jsonSchemaVersion="firestore/timestamp/1.0",Ur._jsonSchema={type:Ns("string",Ur._jsonSchemaVersion),seconds:Ns("number"),nanoseconds:Ns("number")};class ln{static fromTimestamp(e){return new ln(e)}static min(){return new ln(new Ur(0,0))}static max(){return new ln(new Ur(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const u2=-1;class S4{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function D8(t){return t.fields.find((e=>e.kind===2))}function sy(t){return t.fields.filter((e=>e.kind!==2))}S4.UNKNOWN_ID=-1;class yM{constructor(e,n){this.fieldPath=e,this.kind=n}}class Vk{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Vk(0,wc.min())}}function che(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ln.fromTimestamp(r===1e9?new Ur(n+1,0):new Ur(n,r));return new wc(i,At.empty(),e)}function uhe(t){return new wc(t.readTime,t.key,u2)}class wc{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new wc(ln.min(),At.empty(),u2)}static max(){return new wc(ln.max(),At.empty(),u2)}}function RU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=At.comparator(t.documentKey,e.documentKey),n!==0?n:Rn(t.largestBatchId,e.largestBatchId))}const hhe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dhe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function h0(t){if(t.code!==We.FAILED_PRECONDITION||t.message!==hhe)throw t;at("LocalStore","Unexpectedly lost primary lease")}class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ft(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new we(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof we?n:we.resolve(n)}catch(n){return we.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):we.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):we.reject(n)}static resolve(e){return new we(((n,r)=>{n(e)}))}static reject(e){return new we(((n,r)=>{r(e)}))}static waitFor(e){return new we(((n,r)=>{let i=0,s=0,o=!1;e.forEach((a=>{++i,a.next((()=>{++s,o&&s===i&&n()}),(l=>r(l)))})),o=!0,s===i&&n()}))}static or(e){let n=we.resolve(!1);for(const r of e)n=n.next((i=>i?we.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new we(((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next((u=>{o[c]=u,++a,a===s&&r(o)}),(u=>i(u)))}}))}static doWhile(e,n){return new we(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}const rc="SimpleDb";class hO{static open(e,n,r,i){try{return new hO(n,e.transaction(i,r))}catch(s){throw new mT(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Td,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new mT(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=MU(r.target.error);this.S.reject(new mT(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(at(rc,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new _5e(n)}}class Ig{static delete(e){return at(rc,"Removing database:",e),Cy(nue().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!uue())return!1;if(Ig.F())return!0;const e=Ys(),n=Ig.M(e),r=0<n&&n<10,i=fhe(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Ig.M(Ys())===12.2&&ds("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(at(rc,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new mT(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new xt(We.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new xt(We.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new mT(e,o))},i.onupgradeneeded=s=>{at(rc,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next((()=>{at(rc,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=hO.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next((c=>(a.C(),c))).catch((c=>(a.abort(c),we.reject(c)))).toPromise();return l.catch((()=>{})),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(at(rc,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function fhe(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class v5e{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Cy(this.U.delete())}}class mT extends xt{constructor(e,n){super(We.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function d0(t){return t.name==="IndexedDbTransactionError"}class _5e{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(at(rc,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(at(rc,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cy(r)}add(e){return at(rc,"ADD",this.store.name,e,e),Cy(this.store.add(e))}get(e){return Cy(this.store.get(e)).next((n=>(n===void 0&&(n=null),at(rc,"GET",this.store.name,e,n),n)))}delete(e){return at(rc,"DELETE",this.store.name,e),Cy(this.store.delete(e))}count(){return at(rc,"COUNT",this.store.name),Cy(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new we(((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}}))}{const s=this.cursor(r),o=[];return this.H(s,((a,l)=>{o.push(l)})).next((()=>o))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new we(((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}}))}Z(e,n){at(rc,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((s,o,a)=>a.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new we(((r,i)=>{n.onerror=s=>{const o=MU(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():r()})):r()}}))}H(e,n){const r=[];return new we(((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new v5e(a),c=n(a.primaryKey,a.value,l);if(c instanceof we){const u=c.catch((h=>(l.done(),we.reject(h))));r.push(u)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}})).next((()=>we.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Cy(t){return new we(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=MU(r.target.error);n(i)}}))}let jJ=!1;function MU(t){const e=Ig.M(Ys());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new xt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jJ||(jJ=!0,setTimeout((()=>{throw r}),0)),r}}return t}const gT="IndexBackfiller";class x5e{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){at(gT,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();at(gT,`Documents written: ${n}`)}catch(n){d0(n)?at(gT,"Ignoring IndexedDB error during index backfill: ",n):await h0(n)}await this.re(6e4)}))}}class w5e{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,s=!0;return we.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return at(gT,`Processing collection: ${o}`),this.oe(e,o,i).next((a=>{i-=a,r.add(o)}));s=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(i,s))).next((a=>(at(gT,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a)))).next((()=>o.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,s)=>{const o=uhe(s);RU(o,r)>0&&(r=o)})),new wc(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class wl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wl.ce=-1;const s1=-1;function dO(t){return t==null}function zk(t){return t===0&&1/t==-1/0}function phe(t){return typeof t=="number"&&Number.isInteger(t)&&!zk(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const T4="";function ga(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$J(e)),e=b5e(t.get(n),e);return $J(e)}function b5e(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case T4:n+="";break;default:n+=s}}return n}function $J(t){return t+T4+""}function _d(t){const e=t.length;if(tn(e>=2,64408,{path:t}),e===2)return tn(t.charAt(0)===T4&&t.charAt(1)==="",56145,{path:t}),Pr.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(T4,s);switch((o<0||o>n)&&Ft(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Ft(61167,{path:t})}s=o+2}return new Pr(r)}const oy="remoteDocuments",mI="owner",x_="owner",Gk="mutationQueues",E5e="userId",Zu="mutations",FJ="batchId",By="userMutationsIndex",VJ=["userId","batchId"];function vM(t,e){return[t,ga(e)]}function mhe(t,e,n){return[t,ga(e),n]}const S5e={},h2="documentMutations",k4="remoteDocumentsV14",T5e=["prefixPath","collectionGroup","readTime","documentId"],_M="documentKeyIndex",k5e=["prefixPath","collectionGroup","documentId"],ghe="collectionGroupIndex",A5e=["collectionGroup","readTime","prefixPath","documentId"],Uk="remoteDocumentGlobal",j8="remoteDocumentGlobalKey",d2="targets",yhe="queryTargetsIndex",I5e=["canonicalId","targetId"],f2="targetDocuments",P5e=["targetId","path"],NU="documentTargetsIndex",C5e=["path","targetId"],A4="targetGlobalKey",o1="targetGlobal",Bk="collectionParents",R5e=["collectionId","parent"],p2="clientMetadata",M5e="clientId",fO="bundles",N5e="bundleId",pO="namedQueries",O5e="name",OU="indexConfiguration",L5e="indexId",$8="collectionGroupIndex",D5e="collectionGroup",yT="indexState",j5e=["indexId","uid"],vhe="sequenceNumberIndex",$5e=["uid","sequenceNumber"],vT="indexEntries",F5e=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_he="documentKeyIndex",V5e=["indexId","uid","orderedDocumentKey"],mO="documentOverlays",z5e=["userId","collectionPath","documentId"],F8="collectionPathOverlayIndex",G5e=["userId","collectionPath","largestBatchId"],xhe="collectionGroupOverlayIndex",U5e=["userId","collectionGroup","largestBatchId"],LU="globals",B5e="name",whe=[Gk,Zu,h2,oy,d2,mI,o1,f2,p2,Uk,Bk,fO,pO],W5e=[...whe,mO],bhe=[Gk,Zu,h2,k4,d2,mI,o1,f2,p2,Uk,Bk,fO,pO,mO],Ehe=bhe,DU=[...Ehe,OU,yT,vT],H5e=DU,She=[...DU,LU],q5e=She;class V8 extends dhe{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Zs(t,e){const n=Xt(t);return Ig.O(n.le,e)}function zJ(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function f0(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function The(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ci{constructor(e,n){this.comparator=e,this.root=n||No.EMPTY}insert(e,n){return new ci(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,No.BLACK,null,null))}remove(e){return new ci(this.comparator,this.root.remove(e,this.comparator).copy(null,null,No.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new DC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new DC(this.root,e,this.comparator,!1)}getReverseIterator(){return new DC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new DC(this.root,e,this.comparator,!0)}}class DC{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class No{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??No.RED,this.left=i??No.EMPTY,this.right=s??No.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new No(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return No.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return No.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,No.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,No.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ft(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ft(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ft(27949);return e+(this.isRed()?0:1)}}No.EMPTY=null,No.RED=!0,No.BLACK=!1;No.EMPTY=new class{constructor(){this.size=0}get key(){throw Ft(57766)}get value(){throw Ft(16141)}get color(){throw Ft(16727)}get left(){throw Ft(29726)}get right(){throw Ft(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new No(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hr{constructor(e){this.comparator=e,this.data=new ci(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new GJ(this.data.getIterator())}getIteratorFrom(e){return new GJ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Hr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Hr(this.comparator);return n.data=e,n}}class GJ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function w_(t){return t.hasNext()?t.getNext():void 0}class bl{constructor(e){this.fields=e,e.sort(ji.comparator)}static empty(){return new bl([])}unionWith(e){let n=new Hr(ji.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bl(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return c2(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class khe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ys{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new khe("Invalid base64 string: "+s):s}})(e);return new ys(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new ys(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ys.EMPTY_BYTE_STRING=new ys("");const K5e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ep(t){if(tn(!!t,39018),typeof t=="string"){let e=0;const n=K5e.exec(t);if(tn(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ei(t.seconds),nanos:Ei(t.nanos)}}function Ei(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sp(t){return typeof t=="string"?ys.fromBase64String(t):ys.fromUint8Array(t)}const Ahe="server_timestamp",Ihe="__type__",Phe="__previous_value__",Che="__local_write_time__";function jU(t){return(t?.mapValue?.fields||{})[Ihe]?.stringValue===Ahe}function gO(t){const e=t.mapValue.fields[Phe];return jU(e)?gO(e):e}function Wk(t){const e=Ep(t.mapValue.fields[Che].timestampValue);return new Ur(e.seconds,e.nanos)}class Y5e{constructor(e,n,r,i,s,o,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const I4="(default)";class j1{constructor(e,n){this.projectId=e,this.database=n||I4}static empty(){return new j1("","")}get isDefaultDatabase(){return this.database===I4}isEqual(e){return e instanceof j1&&e.projectId===this.projectId&&e.database===this.database}}const $U="__type__",Rhe="__max__",lg={mapValue:{fields:{__type__:{stringValue:Rhe}}}},FU="__vector__",m2="value",xM={nullValue:"NULL_VALUE"};function Gg(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jU(t)?4:Mhe(t)?9007199254740991:yO(t)?10:11:Ft(28295,{value:t})}function $d(t,e){if(t===e)return!0;const n=Gg(t);if(n!==Gg(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wk(t).isEqual(Wk(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ep(i.timestampValue),a=Ep(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return Sp(i.bytesValue).isEqual(Sp(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return Ei(i.geoPointValue.latitude)===Ei(s.geoPointValue.latitude)&&Ei(i.geoPointValue.longitude)===Ei(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Ei(i.integerValue)===Ei(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ei(i.doubleValue),a=Ei(s.doubleValue);return o===a?zk(o)===zk(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return c2(t.arrayValue.values||[],e.arrayValue.values||[],$d);case 10:case 11:return(function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(zJ(o)!==zJ(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!$d(o[l],a[l])))return!1;return!0})(t,e);default:return Ft(52216,{left:t})}}function Hk(t,e){return(t.values||[]).find((n=>$d(n,e)))!==void 0}function Ug(t,e){if(t===e)return 0;const n=Gg(t),r=Gg(e);if(n!==r)return Rn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rn(t.booleanValue,e.booleanValue);case 2:return(function(s,o){const a=Ei(s.integerValue||s.doubleValue),l=Ei(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return UJ(t.timestampValue,e.timestampValue);case 4:return UJ(Wk(t),Wk(e));case 5:return L8(t.stringValue,e.stringValue);case 6:return(function(s,o){const a=Sp(s),l=Sp(o);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Rn(a[c],l[c]);if(u!==0)return u}return Rn(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,o){const a=Rn(Ei(s.latitude),Ei(o.latitude));return a!==0?a:Rn(Ei(s.longitude),Ei(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return BJ(t.arrayValue,e.arrayValue);case 10:return(function(s,o){const a=s.fields||{},l=o.fields||{},c=a[m2]?.arrayValue,u=l[m2]?.arrayValue,h=Rn(c?.values?.length||0,u?.values?.length||0);return h!==0?h:BJ(c,u)})(t.mapValue,e.mapValue);case 11:return(function(s,o){if(s===lg.mapValue&&o===lg.mapValue)return 0;if(s===lg.mapValue)return 1;if(o===lg.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=L8(l[h],u[h]);if(f!==0)return f;const g=Ug(a[l[h]],c[u[h]]);if(g!==0)return g}return Rn(l.length,u.length)})(t.mapValue,e.mapValue);default:throw Ft(23264,{he:n})}}function UJ(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Rn(t,e);const n=Ep(t),r=Ep(e),i=Rn(n.seconds,r.seconds);return i!==0?i:Rn(n.nanos,r.nanos)}function BJ(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ug(n[i],r[i]);if(s)return s}return Rn(n.length,r.length)}function g2(t){return z8(t)}function z8(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Ep(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Sp(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return At.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=z8(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${z8(n.fields[o])}`;return i+"}"})(t.mapValue):Ft(61005,{value:t})}function wM(t){switch(Gg(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gO(t);return e?16+wM(e):16;case 5:return 2*t.stringValue.length;case 6:return Sp(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+wM(s)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return f0(r.fields,((s,o)=>{i+=s.length+wM(o)})),i})(t.mapValue);default:throw Ft(13486,{value:t})}}function qk(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function G8(t){return!!t&&"integerValue"in t}function Kk(t){return!!t&&"arrayValue"in t}function WJ(t){return!!t&&"nullValue"in t}function HJ(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bM(t){return!!t&&"mapValue"in t}function yO(t){return(t?.mapValue?.fields||{})[$U]?.stringValue===FU}function _T(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return f0(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=_T(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_T(t.arrayValue.values[n]);return e}return{...t}}function Mhe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Rhe}const Nhe={mapValue:{fields:{[$U]:{stringValue:FU},[m2]:{arrayValue:{}}}}};function X5e(t){return"nullValue"in t?xM:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?qk(j1.empty(),At.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?yO(t)?Nhe:{mapValue:{}}:Ft(35942,{value:t})}function Z5e(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?qk(j1.empty(),At.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Nhe:"mapValue"in t?yO(t)?{mapValue:{}}:lg:Ft(61959,{value:t})}function qJ(t,e){const n=Ug(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function KJ(t,e){const n=Ug(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class ca{constructor(e){this.value=e}static empty(){return new ca({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bM(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_T(n)}setAll(e){let n=ji.emptyPath(),r={},i=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=_T(o):i.push(a.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());bM(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $d(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bM(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){f0(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new ca(_T(this.value))}}function Ohe(t){const e=[];return f0(t.fields,((n,r)=>{const i=new ji([n]);if(bM(r)){const s=Ohe(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)})),new bl(e)}class Qi{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Qi(e,0,ln.min(),ln.min(),ln.min(),ca.empty(),0)}static newFoundDocument(e,n,r,i){return new Qi(e,1,n,ln.min(),r,i,0)}static newNoDocument(e,n){return new Qi(e,2,n,ln.min(),ln.min(),ca.empty(),0)}static newUnknownDocument(e,n){return new Qi(e,3,n,ln.min(),ln.min(),ca.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ln.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ca.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ca.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ln.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class y2{constructor(e,n){this.position=e,this.inclusive=n}}function YJ(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=At.comparator(At.fromName(o.referenceValue),n.key):r=Ug(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function XJ(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$d(t.position[n],e.position[n]))return!1;return!0}class P4{constructor(e,n="asc"){this.field=e,this.dir=n}}function J5e(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Lhe{}class rr extends Lhe{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Q5e(e,n,r):n==="array-contains"?new nOe(e,r):n==="in"?new zhe(e,r):n==="not-in"?new rOe(e,r):n==="array-contains-any"?new iOe(e,r):new rr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new eOe(e,r):new tOe(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ug(n,this.value)):n!==null&&Gg(this.value)===Gg(n)&&this.matchesComparison(Ug(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ft(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Br extends Lhe{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Br(e,n)}matches(e){return v2(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function v2(t){return t.op==="and"}function U8(t){return t.op==="or"}function VU(t){return Dhe(t)&&v2(t)}function Dhe(t){for(const e of t.filters)if(e instanceof Br)return!1;return!0}function B8(t){if(t instanceof rr)return t.field.canonicalString()+t.op.toString()+g2(t.value);if(VU(t))return t.filters.map((e=>B8(e))).join(",");{const e=t.filters.map((n=>B8(n))).join(",");return`${t.op}(${e})`}}function jhe(t,e){return t instanceof rr?(function(r,i){return i instanceof rr&&r.op===i.op&&r.field.isEqual(i.field)&&$d(r.value,i.value)})(t,e):t instanceof Br?(function(r,i){return i instanceof Br&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,o,a)=>s&&jhe(o,i.filters[a])),!0):!1})(t,e):void Ft(19439)}function $he(t,e){const n=t.filters.concat(e);return Br.create(n,t.op)}function Fhe(t){return t instanceof rr?(function(n){return`${n.field.canonicalString()} ${n.op} ${g2(n.value)}`})(t):t instanceof Br?(function(n){return n.op.toString()+" {"+n.getFilters().map(Fhe).join(" ,")+"}"})(t):"Filter"}class Q5e extends rr{constructor(e,n,r){super(e,n,r),this.key=At.fromName(r.referenceValue)}matches(e){const n=At.comparator(e.key,this.key);return this.matchesComparison(n)}}class eOe extends rr{constructor(e,n){super(e,"in",n),this.keys=Vhe("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class tOe extends rr{constructor(e,n){super(e,"not-in",n),this.keys=Vhe("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Vhe(t,e){return(e.arrayValue?.values||[]).map((n=>At.fromName(n.referenceValue)))}class nOe extends rr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Kk(n)&&Hk(n.arrayValue,this.value)}}class zhe extends rr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hk(this.value.arrayValue,n)}}class rOe extends rr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Hk(this.value.arrayValue,n)}}class iOe extends rr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Kk(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Hk(this.value.arrayValue,r)))}}class sOe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function W8(t,e=null,n=[],r=[],i=null,s=null,o=null){return new sOe(t,e,n,r,i,s,o)}function $1(t){const e=Xt(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>B8(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),dO(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>g2(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>g2(r))).join(",")),e.Te=n}return e.Te}function gI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!J5e(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jhe(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!XJ(t.startAt,e.startAt)&&XJ(t.endAt,e.endAt)}function C4(t){return At.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function R4(t,e){return t.filters.filter((n=>n instanceof rr&&n.field.isEqual(e)))}function ZJ(t,e,n){let r=xM,i=!0;for(const s of R4(t,e)){let o=xM,a=!0;switch(s.op){case"<":case"<=":o=X5e(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=xM}qJ({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];qJ({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function JJ(t,e,n){let r=lg,i=!0;for(const s of R4(t,e)){let o=lg,a=!0;switch(s.op){case">=":case">":o=Z5e(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=lg}KJ({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];KJ({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}class yI{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ghe(t,e,n,r,i,s,o,a){return new yI(t,e,n,r,i,s,o,a)}function vO(t){return new yI(t)}function QJ(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Uhe(t){return t.collectionGroup!==null}function xT(t){const e=Xt(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Hr(ji.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(a=a.add(c.field))}))})),a})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new P4(s,r))})),n.has(ji.keyField().canonicalString())||e.Ie.push(new P4(ji.keyField(),r))}return e.Ie}function mc(t){const e=Xt(t);return e.Ee||(e.Ee=oOe(e,xT(t))),e.Ee}function oOe(t,e){if(t.limitType==="F")return W8(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new P4(i.field,s)}));const n=t.endAt?new y2(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new y2(t.startAt.position,t.startAt.inclusive):null;return W8(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function H8(t,e){const n=t.filters.concat([e]);return new yI(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function q8(t,e,n){return new yI(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function _O(t,e){return gI(mc(t),mc(e))&&t.limitType===e.limitType}function Bhe(t){return`${$1(mc(t))}|lt:${t.limitType}`}function Y_(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>Fhe(i))).join(", ")}]`),dO(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>g2(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>g2(i))).join(",")),`Target(${r})`})(mc(t))}; limitType=${t.limitType})`}function vI(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):At.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of xT(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,l){const c=YJ(o,a,l);return o.inclusive?c<=0:c<0})(r.startAt,xT(r),i)||r.endAt&&!(function(o,a,l){const c=YJ(o,a,l);return o.inclusive?c>=0:c>0})(r.endAt,xT(r),i))})(t,e)}function Whe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Hhe(t){return(e,n)=>{let r=!1;for(const i of xT(t)){const s=aOe(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function aOe(t,e,n){const r=t.field.isKeyField()?At.comparator(e.key,n.key):(function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Ug(l,c):Ft(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ft(19790,{direction:t.dir})}}class Mp{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){f0(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return The(this.inner)}size(){return this.innerSize}}const lOe=new ci(At.comparator);function hc(){return lOe}const qhe=new ci(At.comparator);function vS(...t){let e=qhe;for(const n of t)e=e.insert(n.key,n);return e}function Khe(t){let e=qhe;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function xd(){return wT()}function Yhe(){return wT()}function wT(){return new Mp((t=>t.toString()),((t,e)=>t.isEqual(e)))}const cOe=new ci(At.comparator),uOe=new Hr(At.comparator);function qn(...t){let e=uOe;for(const n of t)e=e.add(n);return e}const hOe=new Hr(Rn);function zU(){return hOe}function GU(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zk(e)?"-0":e}}function Xhe(t){return{integerValue:""+t}}function dOe(t,e){return phe(e)?Xhe(e):GU(t,e)}class xO{constructor(){this._=void 0}}function fOe(t,e,n){return t instanceof _2?(function(i,s){const o={fields:{[Ihe]:{stringValue:Ahe},[Che]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&jU(s)&&(s=gO(s)),s&&(o.fields[Phe]=s),{mapValue:o}})(n,e):t instanceof x2?Jhe(t,e):t instanceof w2?Qhe(t,e):(function(i,s){const o=Zhe(i,s),a=eQ(o)+eQ(i.Ae);return G8(o)&&G8(i.Ae)?Xhe(a):GU(i.serializer,a)})(t,e)}function pOe(t,e,n){return t instanceof x2?Jhe(t,e):t instanceof w2?Qhe(t,e):n}function Zhe(t,e){return t instanceof Yk?(function(r){return G8(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class _2 extends xO{}class x2 extends xO{constructor(e){super(),this.elements=e}}function Jhe(t,e){const n=ede(e);for(const r of t.elements)n.some((i=>$d(i,r)))||n.push(r);return{arrayValue:{values:n}}}class w2 extends xO{constructor(e){super(),this.elements=e}}function Qhe(t,e){let n=ede(e);for(const r of t.elements)n=n.filter((i=>!$d(i,r)));return{arrayValue:{values:n}}}class Yk extends xO{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function eQ(t){return Ei(t.integerValue||t.doubleValue)}function ede(t){return Kk(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class tde{constructor(e,n){this.field=e,this.transform=n}}function mOe(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof x2&&i instanceof x2||r instanceof w2&&i instanceof w2?c2(r.elements,i.elements,$d):r instanceof Yk&&i instanceof Yk?$d(r.Ae,i.Ae):r instanceof _2&&i instanceof _2})(t.transform,e.transform)}class gOe{constructor(e,n){this.version=e,this.transformResults=n}}class da{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new da}static exists(e){return new da(void 0,e)}static updateTime(e){return new da(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function EM(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wO{}function nde(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new bO(t.key,da.none()):new db(t.key,t.data,da.none());{const n=t.data,r=ca.empty();let i=new Hr(ji.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Np(t.key,r,new bl(i.toArray()),da.none())}}function yOe(t,e,n){t instanceof db?(function(i,s,o){const a=i.value.clone(),l=nQ(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Np?(function(i,s,o){if(!EM(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=nQ(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(rde(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function bT(t,e,n,r){return t instanceof db?(function(s,o,a,l){if(!EM(s.precondition,o))return a;const c=s.value.clone(),u=rQ(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null})(t,e,n,r):t instanceof Np?(function(s,o,a,l){if(!EM(s.precondition,o))return a;const c=rQ(s.fieldTransforms,l,o),u=o.data;return u.setAll(rde(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(s,o,a){return EM(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function vOe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Zhe(r.transform,i||null);s!=null&&(n===null&&(n=ca.empty()),n.set(r.field,s))}return n||null}function tQ(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&c2(r,i,((s,o)=>mOe(s,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class db extends wO{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Np extends wO{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function rde(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function nQ(t,e,n){const r=new Map;tn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,pOe(o,a,n[i]))}return r}function rQ(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,fOe(s,o,e))}return r}class bO extends wO{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ide extends wO{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class UU{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&yOe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bT(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bT(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Yhe();return this.mutations.forEach((i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=nde(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ln.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),qn())}isEqual(e){return this.batchId===e.batchId&&c2(this.mutations,e.mutations,((n,r)=>tQ(n,r)))&&c2(this.baseMutations,e.baseMutations,((n,r)=>tQ(n,r)))}}class BU{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){tn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return cOe})();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new BU(e,n,r,i)}}class WU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class _Oe{constructor(e,n){this.count=e,this.unchangedNames=n}}var Es,ar;function xOe(t){switch(t){case We.OK:return Ft(64938);case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0;default:return Ft(15467,{code:t})}}function sde(t){if(t===void 0)return ds("GRPC error has no .code"),We.UNKNOWN;switch(t){case Es.OK:return We.OK;case Es.CANCELLED:return We.CANCELLED;case Es.UNKNOWN:return We.UNKNOWN;case Es.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case Es.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case Es.INTERNAL:return We.INTERNAL;case Es.UNAVAILABLE:return We.UNAVAILABLE;case Es.UNAUTHENTICATED:return We.UNAUTHENTICATED;case Es.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case Es.NOT_FOUND:return We.NOT_FOUND;case Es.ALREADY_EXISTS:return We.ALREADY_EXISTS;case Es.PERMISSION_DENIED:return We.PERMISSION_DENIED;case Es.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case Es.ABORTED:return We.ABORTED;case Es.OUT_OF_RANGE:return We.OUT_OF_RANGE;case Es.UNIMPLEMENTED:return We.UNIMPLEMENTED;case Es.DATA_LOSS:return We.DATA_LOSS;default:return Ft(39323,{code:t})}}(ar=Es||(Es={}))[ar.OK=0]="OK",ar[ar.CANCELLED=1]="CANCELLED",ar[ar.UNKNOWN=2]="UNKNOWN",ar[ar.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ar[ar.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ar[ar.NOT_FOUND=5]="NOT_FOUND",ar[ar.ALREADY_EXISTS=6]="ALREADY_EXISTS",ar[ar.PERMISSION_DENIED=7]="PERMISSION_DENIED",ar[ar.UNAUTHENTICATED=16]="UNAUTHENTICATED",ar[ar.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ar[ar.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ar[ar.ABORTED=10]="ABORTED",ar[ar.OUT_OF_RANGE=11]="OUT_OF_RANGE",ar[ar.UNIMPLEMENTED=12]="UNIMPLEMENTED",ar[ar.INTERNAL=13]="INTERNAL",ar[ar.UNAVAILABLE=14]="UNAVAILABLE",ar[ar.DATA_LOSS=15]="DATA_LOSS";function wOe(){return new TextEncoder}const bOe=new Ag([4294967295,4294967295],0);function iQ(t){const e=wOe().encode(t),n=new Que;return n.update(e),new Uint8Array(n.digest())}function sQ(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ag([n,r],0),new Ag([i,s],0)]}class HU{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _S(`Invalid padding: ${n}`);if(r<0)throw new _S(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _S(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _S(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ag.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Ag.fromNumber(r)));return i.compare(bOe)===1&&(i=new Ag([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=iQ(e),[r,i]=sQ(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new HU(s,i,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=iQ(e),[r,i]=sQ(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _S extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class _I{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,xI.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _I(ln.min(),i,new ci(Rn),hc(),qn())}}class xI{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xI(r,n,qn(),qn(),qn())}}class SM{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class ode{constructor(e,n){this.targetId=e,this.Ce=n}}class ade{constructor(e,n,r=ys.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class oQ{constructor(){this.ve=0,this.Fe=aQ(),this.Me=ys.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qn(),n=qn(),r=qn();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ft(38017,{changeType:s})}})),new xI(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=aQ()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class EOe{constructor(e){this.Ge=e,this.ze=new Map,this.je=hc(),this.Je=jC(),this.He=jC(),this.Ye=new ci(Rn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ft(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(C4(s))if(r===0){const o=new At(s.path);this.et(n,o,Qi.newNoDocument(o,ln.min()))}else tn(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Sp(r).toUint8Array()}catch(l){if(l instanceof khe)return Fk("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new HU(o,i,s)}catch(l){return Fk(l instanceof _S?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((s,o)=>{const a=this.ot(o);if(a){if(s.current&&C4(a.target)){const l=new At(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Qi.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}}));let r=qn();this.He.forEach(((s,o)=>{let a=!0;o.forEachWhile((l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(s))})),this.je.forEach(((s,o)=>o.setReadTime(e)));const i=new _I(e,n,this.Ye,this.je,r);return this.je=hc(),this.Je=jC(),this.He=jC(),this.Ye=new ci(Rn),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new oQ,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Hr(Rn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Hr(Rn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||at("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new oQ),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function jC(){return new ci(At.comparator)}function aQ(){return new ci(At.comparator)}const SOe={asc:"ASCENDING",desc:"DESCENDING"},TOe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kOe={and:"AND",or:"OR"};class AOe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function K8(t,e){return t.useProto3Json||dO(e)?e:{value:e}}function b2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lde(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function IOe(t,e){return b2(t,e.toTimestamp())}function za(t){return tn(!!t,49232),ln.fromTimestamp((function(n){const r=Ep(n);return new Ur(r.seconds,r.nanos)})(t))}function qU(t,e){return Y8(t,e).canonicalString()}function Y8(t,e){const n=(function(i){return new Pr(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function cde(t){const e=Pr.fromString(t);return tn(vde(e),10190,{key:e.toString()}),e}function M4(t,e){return qU(t.databaseId,e.path)}function a1(t,e){const n=cde(e);if(n.get(1)!==t.databaseId.projectId)throw new xt(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xt(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new At(dde(n))}function ude(t,e){return qU(t.databaseId,e)}function hde(t){const e=cde(t);return e.length===4?Pr.emptyPath():dde(e)}function X8(t){return new Pr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dde(t){return tn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function lQ(t,e,n){return{name:M4(t,e),fields:n.value.mapValue.fields}}function POe(t,e,n){const r=a1(t,e.name),i=za(e.updateTime),s=e.createTime?za(e.createTime):ln.min(),o=new ca({mapValue:{fields:e.fields}}),a=Qi.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function COe(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ft(39313,{state:c})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(c,u){return c.useProto3Json?(tn(u===void 0||typeof u=="string",58123),ys.fromBase64String(u||"")):(tn(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),ys.fromUint8Array(u||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(c){const u=c.code===void 0?We.UNKNOWN:sde(c.code);return new xt(u,c.message||"")})(o);n=new ade(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=a1(t,r.document.name),s=za(r.document.updateTime),o=r.document.createTime?za(r.document.createTime):ln.min(),a=new ca({mapValue:{fields:r.document.fields}}),l=Qi.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new SM(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=a1(t,r.document),s=r.readTime?za(r.readTime):ln.min(),o=Qi.newNoDocument(i,s),a=r.removedTargetIds||[];n=new SM([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=a1(t,r.document),s=r.removedTargetIds||[];n=new SM([],s,i,null)}else{if(!("filter"in e))return Ft(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new _Oe(i,s),a=r.targetId;n=new ode(a,o)}}return n}function N4(t,e){let n;if(e instanceof db)n={update:lQ(t,e.key,e.value)};else if(e instanceof bO)n={delete:M4(t,e.key)};else if(e instanceof Np)n={update:lQ(t,e.key,e.data),updateMask:DOe(e.fieldMask)};else{if(!(e instanceof ide))return Ft(16599,{Vt:e.type});n={verify:M4(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,o){const a=o.transform;if(a instanceof _2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof x2)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof w2)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Yk)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Ft(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:IOe(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ft(27497)})(t,e.precondition)),n}function Z8(t,e){const n=e.currentDocument?(function(s){return s.updateTime!==void 0?da.updateTime(za(s.updateTime)):s.exists!==void 0?da.exists(s.exists):da.none()})(e.currentDocument):da.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(o,a){let l=null;if("setToServerValue"in a)tn(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new _2;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];l=new x2(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];l=new w2(u)}else"increment"in a?l=new Yk(o,a.increment):Ft(16584,{proto:a});const c=ji.fromServerFormat(a.fieldPath);return new tde(c,l)})(t,i))):[];if(e.update){e.update.name;const i=a1(t,e.update.name),s=new ca({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(l){const c=l.fieldPaths||[];return new bl(c.map((u=>ji.fromServerFormat(u))))})(e.updateMask);return new Np(i,s,o,n,r)}return new db(i,s,n,r)}if(e.delete){const i=a1(t,e.delete);return new bO(i,n)}if(e.verify){const i=a1(t,e.verify);return new ide(i,n)}return Ft(1463,{proto:e})}function ROe(t,e){return t&&t.length>0?(tn(e!==void 0,14353),t.map((n=>(function(i,s){let o=i.updateTime?za(i.updateTime):za(s);return o.isEqual(ln.min())&&(o=za(s)),new gOe(o,i.transformResults||[])})(n,e)))):[]}function fde(t,e){return{documents:[ude(t,e.path)]}}function pde(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ude(t,i);const s=(function(c){if(c.length!==0)return yde(Br.create(c,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const o=(function(c){if(c.length!==0)return c.map((u=>(function(f){return{field:X_(f.field),direction:NOe(f.dir)}})(u)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=K8(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{ft:n,parent:i}}function mde(t){let e=hde(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){tn(r===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=(function(h){const f=gde(h);return f instanceof Br&&VU(f)?f.getFilters():[f]})(n.where));let o=[];n.orderBy&&(o=(function(h){return h.map((f=>(function(y){return new P4(Z_(y.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(y.direction))})(f)))})(n.orderBy));let a=null;n.limit&&(a=(function(h){let f;return f=typeof h=="object"?h.value:h,dO(f)?null:f})(n.limit));let l=null;n.startAt&&(l=(function(h){const f=!!h.before,g=h.values||[];return new y2(g,f)})(n.startAt));let c=null;return n.endAt&&(c=(function(h){const f=!h.before,g=h.values||[];return new y2(g,f)})(n.endAt)),Ghe(e,i,o,s,a,"F",l,c)}function MOe(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ft(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gde(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Z_(n.unaryFilter.field);return rr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Z_(n.unaryFilter.field);return rr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Z_(n.unaryFilter.field);return rr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Z_(n.unaryFilter.field);return rr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ft(61313);default:return Ft(60726)}})(t):t.fieldFilter!==void 0?(function(n){return rr.create(Z_(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ft(58110);default:return Ft(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Br.create(n.compositeFilter.filters.map((r=>gde(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ft(1026)}})(n.compositeFilter.op))})(t):Ft(30097,{filter:t})}function NOe(t){return SOe[t]}function OOe(t){return TOe[t]}function LOe(t){return kOe[t]}function X_(t){return{fieldPath:t.canonicalString()}}function Z_(t){return ji.fromServerFormat(t.fieldPath)}function yde(t){return t instanceof rr?(function(n){if(n.op==="=="){if(HJ(n.value))return{unaryFilter:{field:X_(n.field),op:"IS_NAN"}};if(WJ(n.value))return{unaryFilter:{field:X_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(HJ(n.value))return{unaryFilter:{field:X_(n.field),op:"IS_NOT_NAN"}};if(WJ(n.value))return{unaryFilter:{field:X_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:X_(n.field),op:OOe(n.op),value:n.value}}})(t):t instanceof Br?(function(n){const r=n.getFilters().map((i=>yde(i)));return r.length===1?r[0]:{compositeFilter:{op:LOe(n.op),filters:r}}})(t):Ft(54877,{filter:t})}function DOe(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function vde(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class np{constructor(e,n,r,i,s=ln.min(),o=ln.min(),a=ys.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new np(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new np(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new np(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new np(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _de{constructor(e){this.yt=e}}function jOe(t,e){let n;if(e.document)n=POe(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=At.fromSegments(e.noDocument.path),i=V1(e.noDocument.readTime);n=Qi.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ft(56709);{const r=At.fromSegments(e.unknownDocument.path),i=V1(e.unknownDocument.version);n=Qi.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const s=new Ur(i[0],i[1]);return ln.fromTimestamp(s)})(e.readTime)),n}function cQ(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:O4(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,o){return{name:M4(s,o.key),fields:o.data.value.mapValue.fields,updateTime:b2(s,o.version.toTimestamp()),createTime:b2(s,o.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:F1(e.version)};else{if(!e.isUnknownDocument())return Ft(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:F1(e.version)}}return r}function O4(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function F1(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function V1(t){const e=new Ur(t.seconds,t.nanoseconds);return ln.fromTimestamp(e)}function Ry(t,e){const n=(e.baseMutations||[]).map((s=>Z8(t.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>Z8(t.yt,s))),i=Ur.fromMillis(e.localWriteTimeMs);return new UU(e.batchId,i,n,r)}function xS(t){const e=V1(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?V1(t.lastLimboFreeSnapshotVersion):ln.min();let r;return r=(function(s){return s.documents!==void 0})(t.query)?(function(s){const o=s.documents.length;return tn(o===1,1966,{count:o}),mc(vO(hde(s.documents[0])))})(t.query):(function(s){return mc(mde(s))})(t.query),new np(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,ys.fromBase64String(t.resumeToken))}function xde(t,e){const n=F1(e.snapshotVersion),r=F1(e.lastLimboFreeSnapshotVersion);let i;i=C4(e.target)?fde(t.yt,e.target):pde(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$1(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function wde(t){const e=mde({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?q8(e,e.limit,"L"):e}function kj(t,e){return new WU(e.largestBatchId,Z8(t.yt,e.overlayMutation))}function uQ(t,e){const n=e.path.lastSegment();return[t,ga(e.path.popLast()),n]}function hQ(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:F1(r.readTime),documentKey:ga(r.documentKey.path),largestBatchId:r.largestBatchId}}class $Oe{getBundleMetadata(e,n){return dQ(e).get(n).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:V1(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,n){return dQ(e).put((function(i){return{bundleId:i.id,createTime:F1(za(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return fQ(e).get(n).next((r=>{if(r)return(function(s){return{name:s.name,query:wde(s.bundledQuery),readTime:V1(s.readTime)}})(r)}))}saveNamedQuery(e,n){return fQ(e).put((function(i){return{name:i.name,readTime:F1(za(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function dQ(t){return Zs(t,fO)}function fQ(t){return Zs(t,pO)}class EO{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new EO(e,r)}getOverlay(e,n){return LE(e).get(uQ(this.userId,n)).next((r=>r?kj(this.serializer,r):null))}getOverlays(e,n){const r=xd();return we.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((s,o)=>{const a=new WU(n,o);i.push(this.St(e,a))})),we.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((o=>i.add(ga(o.getCollectionPath()))));const s=[];return i.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(LE(e).Z(F8,a))})),we.waitFor(s)}getOverlaysForCollection(e,n,r){const i=xd(),s=ga(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return LE(e).J(F8,o).next((a=>{for(const l of a){const c=kj(this.serializer,l);i.set(c.getKey(),c)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const s=xd();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return LE(e).ee({index:xhe,range:a},((l,c,u)=>{const h=kj(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):u.done()})).next((()=>s))}St(e,n){return LE(e).put((function(i,s,o){const[a,l,c]=uQ(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:N4(i.yt,o.mutation)}})(this.serializer,this.userId,n))}}function LE(t){return Zs(t,mO)}class FOe{bt(e){return Zs(e,LU)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?ys.fromUint8Array(r):ys.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class My{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ei(e.integerValue));else if("doubleValue"in e){const r=Ei(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),zk(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Ep(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Sp(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?Mhe(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):yO(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Ft(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=m2,s=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Ei(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),At.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}My.Kt=new My;const b_=255;function VOe(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function pQ(t){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const o=VOe(255&r[s]);if(i+=o,o!==8)break}return i})(t);return Math.ceil(e/8)}class zOe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=pQ(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=pQ(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(b_),this.sn(255)}_n(){this.an(b_),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===b_?(this.sn(b_),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===b_?(this.an(b_),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class GOe{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class UOe{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class DE{constructor(){this.cn=new zOe,this.ln=new GOe(this.cn),this.hn=new UOe(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Ny{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Ny(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:TM(this.En),directionalValue:TM(this.dn),orderedDocumentKey:TM(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function dm(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=mQ(t.En,e.En),n!==0?n:(n=mQ(t.dn,e.dn),n!==0?n:At.comparator(t.In,e.In)))}function mQ(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function TM(t){return cue()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function gQ(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class yQ{constructor(e){this.mn=new Hr(((n,r)=>ji.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(tn(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=D8(e);if(n!==void 0&&!this.wn(n))return!1;const r=sy(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Hr(ji.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new yM(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new yM(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new yM(r.field,r.dir==="asc"?0:1)));return new S4(S4.UNKNOWN_ID,this.collectionId,n,Vk.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function bde(t){if(tn(t instanceof rr||t instanceof Br,20012),t instanceof rr){if(t instanceof zhe){const n=t.value.arrayValue?.values?.map((r=>rr.create(t.field,"==",r)))||[];return Br.create(n,"or")}return t}const e=t.filters.map((n=>bde(n)));return Br.create(e,t.op)}function BOe(t){if(t.getFilters().length===0)return[];const e=e9(bde(t));return tn(Ede(e),7391),J8(e)||Q8(e)?[e]:e.getFilters()}function J8(t){return t instanceof rr}function Q8(t){return t instanceof Br&&VU(t)}function Ede(t){return J8(t)||Q8(t)||(function(n){if(n instanceof Br&&U8(n)){for(const r of n.getFilters())if(!J8(r)&&!Q8(r))return!1;return!0}return!1})(t)}function e9(t){if(tn(t instanceof rr||t instanceof Br,34018),t instanceof rr)return t;if(t.filters.length===1)return e9(t.filters[0]);const e=t.filters.map((r=>e9(r)));let n=Br.create(e,t.op);return n=L4(n),Ede(n)?n:(tn(n instanceof Br,64498),tn(v2(n),40251),tn(n.filters.length>1,57927),n.filters.reduce(((r,i)=>KU(r,i))))}function KU(t,e){let n;return tn(t instanceof rr||t instanceof Br,38388),tn(e instanceof rr||e instanceof Br,25473),n=t instanceof rr?e instanceof rr?(function(i,s){return Br.create([i,s],"and")})(t,e):vQ(t,e):e instanceof rr?vQ(e,t):(function(i,s){if(tn(i.filters.length>0&&s.filters.length>0,48005),v2(i)&&v2(s))return $he(i,s.getFilters());const o=U8(i)?i:s,a=U8(i)?s:i,l=o.filters.map((c=>KU(c,a)));return Br.create(l,"or")})(t,e),L4(n)}function vQ(t,e){if(v2(e))return $he(e,t.getFilters());{const n=e.filters.map((r=>KU(t,r)));return Br.create(n,"or")}}function L4(t){if(tn(t instanceof rr||t instanceof Br,11850),t instanceof rr)return t;const e=t.getFilters();if(e.length===1)return L4(e[0]);if(Dhe(t))return t;const n=e.map((i=>L4(i))),r=[];return n.forEach((i=>{i instanceof rr?r.push(i):i instanceof Br&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Br.create(r,t.op)}class WOe{constructor(){this.Cn=new YU}addToCollectionParentIndex(e,n){return this.Cn.add(n),we.resolve()}getCollectionParents(e,n){return we.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return we.resolve()}deleteFieldIndex(e,n){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,n){return we.resolve()}getDocumentsMatchingTarget(e,n){return we.resolve(null)}getIndexType(e,n){return we.resolve(0)}getFieldIndexes(e,n){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,n){return we.resolve(wc.min())}getMinOffsetFromCollectionGroup(e,n){return we.resolve(wc.min())}updateCollectionGroup(e,n,r){return we.resolve()}updateIndexEntries(e,n){return we.resolve()}}class YU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Hr(Pr.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hr(Pr.comparator)).toArray()}}const _Q="IndexedDbIndexManager",$C=new Uint8Array(0);class HOe{constructor(e,n){this.databaseId=n,this.vn=new YU,this.Fn=new Mp((r=>$1(r)),((r,i)=>gI(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const s={collectionId:r,parent:ga(i)};return xQ(e).put(s)}return we.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[ohe(n),""],!1,!0);return xQ(e).J(i).next((s=>{for(const o of s){if(o.collectionId!==n)break;r.push(_d(o.parent))}return r}))}addFieldIndex(e,n){const r=jE(e),i=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=S_(e);return s.next((a=>{o.put(hQ(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return s.next()}deleteFieldIndex(e,n){const r=jE(e),i=S_(e),s=E_(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=jE(e),r=E_(e),i=S_(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return we.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new yQ(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,n){const r=E_(e);let i=!0;const s=new Map;return we.forEach(this.Mn(n),(o=>this.xn(e,o).next((a=>{i&&(i=!!a),s.set(o,a)})))).next((()=>{if(i){let o=qn();const a=[];return we.forEach(s,((l,c)=>{at(_Q,`Using index ${(function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map((P=>`${P.fieldPath}:${P.kind}`)).join(",")}`})(l)} to execute ${$1(n)}`);const u=(function(I,P){const M=D8(P);if(M===void 0)return null;for(const V of R4(I,M.fieldPath))switch(V.op){case"array-contains-any":return V.value.arrayValue.values||[];case"array-contains":return[V.value]}return null})(c,l),h=(function(I,P){const M=new Map;for(const V of sy(P))for(const C of R4(I,V.fieldPath))switch(C.op){case"==":case"in":M.set(V.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return M.set(V.fieldPath.canonicalString(),C.value),Array.from(M.values())}return null})(c,l),f=(function(I,P){const M=[];let V=!0;for(const C of sy(P)){const N=C.kind===0?ZJ(I,C.fieldPath,I.startAt):JJ(I,C.fieldPath,I.startAt);M.push(N.value),V&&(V=N.inclusive)}return new y2(M,V)})(c,l),g=(function(I,P){const M=[];let V=!0;for(const C of sy(P)){const N=C.kind===0?JJ(I,C.fieldPath,I.endAt):ZJ(I,C.fieldPath,I.endAt);M.push(N.value),V&&(V=N.inclusive)}return new y2(M,V)})(c,l),y=this.On(l,c,f),_=this.On(l,c,g),b=this.Nn(l,c,h),T=this.Bn(l.indexId,u,y,f.inclusive,_,g.inclusive,b);return we.forEach(T,(A=>r.Y(A,n.limit).next((I=>{I.forEach((P=>{const M=At.fromSegments(P.documentKey);o.has(M)||(o=o.add(M),a.push(M))}))}))))})).next((()=>a))}return we.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=BOe(Br.create(e.filters,"and")).map((r=>W8(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):$C,g=this.kn(e,f,r[h%c],i),y=this.qn(e,f,s[h%c],o),_=a.map((b=>this.kn(e,f,b,!0)));u.push(...this.createRange(g,y,_))}return u}kn(e,n,r,i){const s=new Ny(e,At.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new Ny(e,At.empty(),n,r);return i?s.An():s}xn(e,n){const r=new yQ(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return we.forEach(i,(s=>this.xn(e,s).next((o=>{o?r!==0&&o.fields.length<(function(l){let c=new Hr(ji.comparator),u=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?u=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new DE;for(const i of sy(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);My.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new DE;return My.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new DE;return My.Kt.Dt(qk(this.databaseId,n),r.Pn((function(s){const o=sy(s);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new DE);let s=0;for(const o of sy(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&Kk(a))i=this.Kn(i,o,a);else{const c=l.Pn(o.kind);My.Kt.Dt(a,c)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new DE;l.seed(a.un()),My.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find((r=>r instanceof rr&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=jE(e),i=S_(e);return(n?r.J($8,IDBKeyRange.bound(n,n)):r.J()).next((s=>{const o=[];return we.forEach(s,(a=>i.get([a.indexId,this.uid]).next((l=>{o.push((function(u,h){const f=h?new Vk(h.sequenceNumber,new wc(V1(h.readTime),new At(_d(h.documentKey)),h.largestBatchId)):Vk.empty(),g=u.fields.map((([y,_])=>new yM(ji.fromServerFormat(y),_)));return new S4(u.indexId,u.collectionGroup,g,f)})(a,l))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Rn(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=jE(e),s=S_(e);return this.Gn(e).next((o=>i.J($8,IDBKeyRange.bound(n,n)).next((a=>we.forEach(a,(l=>s.put(hQ(l.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return we.forEach(n,((i,s)=>{const o=r.get(i.collectionGroup);return(o?we.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next((a=>(r.set(i.collectionGroup,a),we.forEach(a,(l=>this.zn(e,i,l).next((c=>{const u=this.jn(s,l);return c.isEqual(u)?we.resolve():this.Jn(e,s,l,c,u)})))))))}))}Hn(e,n,r,i){return E_(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return E_(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=E_(e);let s=new Hr(dm);return i.ee({index:_he,range:IDBKeyRange.only([r.indexId,this.uid,TM(this.$n(r,n))])},((o,a)=>{s=s.add(new Ny(r.indexId,n,gQ(a.arrayValue),gQ(a.directionalValue)))})).next((()=>s))}jn(e,n){let r=new Hr(dm);const i=this.Qn(n,e);if(i==null)return r;const s=D8(n);if(s!=null){const o=e.data.field(s.fieldPath);if(Kk(o))for(const a of o.arrayValue.values||[])r=r.add(new Ny(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new Ny(n.indexId,e.key,$C,i));return r}Jn(e,n,r,i,s){at(_Q,"Updating index entries for document '%s'",n.key);const o=[];return(function(l,c,u,h,f){const g=l.getIterator(),y=c.getIterator();let _=w_(g),b=w_(y);for(;_||b;){let T=!1,A=!1;if(_&&b){const I=u(_,b);I<0?A=!0:I>0&&(T=!0)}else _!=null?A=!0:T=!0;T?(h(b),b=w_(y)):A?(f(_),_=w_(g)):(_=w_(g),b=w_(y))}})(i,s,dm,(a=>{o.push(this.Hn(e,n,r,a))}),(a=>{o.push(this.Yn(e,n,r,a))})),we.waitFor(o)}Gn(e){let n=1;return S_(e).ee({index:vhe,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,a)=>dm(o,a))).filter(((o,a,l)=>!a||dm(o,l[a-1])!==0));const i=[];i.push(e);for(const o of r){const a=dm(o,e),l=dm(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,$C,At.empty()),l=i[o+1].Vn(this.uid,$C,At.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return dm(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(wQ)}getMinOffset(e,n){return we.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Ft(44426))))).next(wQ)}}function xQ(t){return Zs(t,Bk)}function E_(t){return Zs(t,vT)}function jE(t){return Zs(t,OU)}function S_(t){return Zs(t,yT)}function wQ(t){tn(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;RU(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new wc(e.readTime,e.documentKey,n)}const bQ={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sde=41943040;class ra{static withCacheSize(e){return new ra(e,ra.DEFAULT_COLLECTION_PERCENTILE,ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function Tde(t,e,n){const r=t.store(Zu),i=t.store(h2),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},((u,h,f)=>(a++,f.delete())));s.push(l.next((()=>{tn(a===1,47070,{batchId:n.batchId})})));const c=[];for(const u of n.mutations){const h=mhe(e,u.key.path,n.batchId);s.push(i.delete(h)),c.push(u.key)}return we.waitFor(s).next((()=>c))}function D4(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ft(14731);e=t.noDocument}return JSON.stringify(e).length}ra.DEFAULT_COLLECTION_PERCENTILE=10,ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ra.DEFAULT=new ra(Sde,ra.DEFAULT_COLLECTION_PERCENTILE,ra.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ra.DISABLED=new ra(-1,0,0);class SO{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){tn(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new SO(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fm(e).ee({index:By,range:r},((i,s,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const s=J_(e),o=fm(e);return o.add({}).next((a=>{tn(typeof a=="number",49019);const l=new UU(a,n,r,i),c=(function(g,y,_){const b=_.baseMutations.map((A=>N4(g.yt,A))),T=_.mutations.map((A=>N4(g.yt,A)));return{userId:y,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:b,mutations:T}})(this.serializer,this.userId,l),u=[];let h=new Hr(((f,g)=>Rn(f.canonicalString(),g.canonicalString())));for(const f of i){const g=mhe(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),u.push(o.put(c)),u.push(s.put(g,S5e))}return h.forEach((f=>{u.push(this.indexManager.addToCollectionParentIndex(e,f))})),e.addOnCommittedListener((()=>{this.Xn[a]=l.keys()})),we.waitFor(u).next((()=>l))}))}lookupMutationBatch(e,n){return fm(e).get(n).next((r=>r?(tn(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Ry(this.serializer,r)):null))}er(e,n){return this.Xn[n]?we.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return fm(e).ee({index:By,range:i},((o,a,l)=>{a.userId===this.userId&&(tn(a.batchId>=r,47524,{tr:r}),s=Ry(this.serializer,a)),l.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=s1;return fm(e).ee({index:By,range:n,reverse:!0},((i,s,o)=>{r=s.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,s1],[this.userId,Number.POSITIVE_INFINITY]);return fm(e).J(By,n).next((r=>r.map((i=>Ry(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=vM(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return J_(e).ee({range:i},((o,a,l)=>{const[c,u,h]=o,f=_d(u);if(c===this.userId&&n.path.isEqual(f))return fm(e).get(h).next((g=>{if(!g)throw Ft(61480,{nr:o,batchId:h});tn(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:h}),s.push(Ry(this.serializer,g))}));l.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Hr(Rn);const i=[];return n.forEach((s=>{const o=vM(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=J_(e).ee({range:a},((c,u,h)=>{const[f,g,y]=c,_=_d(g);f===this.userId&&s.path.isEqual(_)?r=r.add(y):h.done()}));i.push(l)})),we.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=vM(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Hr(Rn);return J_(e).ee({range:o},((l,c,u)=>{const[h,f,g]=l,y=_d(f);h===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(g)):u.done()})).next((()=>this.rr(e,a)))}rr(e,n){const r=[],i=[];return n.forEach((s=>{i.push(fm(e).get(s).next((o=>{if(o===null)throw Ft(35274,{batchId:s});tn(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(Ry(this.serializer,o))})))})),we.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return Tde(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),we.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return we.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),i=[];return J_(e).ee({range:r},((s,o,a)=>{if(s[0]===this.userId){const l=_d(s[1]);i.push(l)}else a.done()})).next((()=>{tn(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,n){return kde(e,this.userId,n)}_r(e){return Ade(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:s1,lastStreamToken:""}))}}function kde(t,e,n){const r=vM(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return J_(t).ee({range:s,X:!0},((a,l,c)=>{const[u,h,f]=a;u===e&&h===i&&(o=!0),c.done()})).next((()=>o))}function fm(t){return Zs(t,Zu)}function J_(t){return Zs(t,h2)}function Ade(t){return Zs(t,Gk)}class z1{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new z1(0)}static cr(){return new z1(-1)}}class qOe{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new z1(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>ln.fromTimestamp(new Ur(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>T_(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(tn(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const s=[];return T_(e).ee(((o,a)=>{const l=xS(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))})).next((()=>we.waitFor(s))).next((()=>i))}forEachTarget(e,n){return T_(e).ee(((r,i)=>{const s=xS(i);n(s)}))}lr(e){return EQ(e).get(A4).next((n=>(tn(n!==null,2888),n)))}hr(e,n){return EQ(e).put(A4,n)}Pr(e,n){return T_(e).put(xde(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=$1(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return T_(e).ee({range:i,index:yhe},((o,a,l)=>{const c=xS(a);gI(n,c.target)&&(s=c,l.done())})).next((()=>s))}addMatchingKeys(e,n,r){const i=[],s=Jm(e);return n.forEach((o=>{const a=ga(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))})),we.waitFor(i)}removeMatchingKeys(e,n,r){const i=Jm(e);return we.forEach(n,(s=>{const o=ga(s.path);return we.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,n){const r=Jm(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Jm(e);let s=qn();return i.ee({range:r,X:!0},((o,a,l)=>{const c=_d(o[1]),u=new At(c);s=s.add(u)})).next((()=>s))}containsKey(e,n){const r=ga(n.path),i=IDBKeyRange.bound([r],[ohe(r)],!1,!0);let s=0;return Jm(e).ee({index:NU,X:!0,range:i},(([o,a],l,c)=>{o!==0&&(s++,c.done())})).next((()=>s>0))}At(e,n){return T_(e).get(n).next((r=>r?xS(r):null))}}function T_(t){return Zs(t,d2)}function EQ(t){return Zs(t,o1)}function Jm(t){return Zs(t,f2)}const SQ="LruGarbageCollector",Ide=1048576;function TQ([t,e],[n,r]){const i=Rn(t,n);return i===0?Rn(e,r):i}class KOe{constructor(e){this.Ir=e,this.buffer=new Hr(TQ),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();TQ(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Pde{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){at(SQ,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){d0(n)?at(SQ,"Ignoring IndexedDB error during garbage collection: ",n):await h0(n)}await this.Vr(3e5)}))}}class YOe{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return we.resolve(wl.ce);const r=new KOe(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(bQ)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bQ):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,a=Date.now(),this.removeTargets(e,r,n)))).next((h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(c=Date.now(),K_()<=tr.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h}))))}}function Cde(t,e){return new YOe(t,e)}class XOe{constructor(e,n){this.db=e,this.garbageCollector=Cde(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return FC(e,r)}removeReference(e,n,r){return FC(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return FC(e,n)}br(e,n){return(function(i,s){let o=!1;return Ade(i).te((a=>kde(i,a,s).next((l=>(l&&(o=!0),we.resolve(!l)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((o,a)=>{if(a<=n){const l=this.br(e,o).next((c=>{if(!c)return s++,r.getEntry(e,o).next((()=>(r.removeEntry(o,ln.min()),Jm(e).delete((function(h){return[0,ga(h.path)]})(o)))))}));i.push(l)}})).next((()=>we.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return FC(e,n)}Sr(e,n){const r=Jm(e);let i,s=wl.ce;return r.ee({index:NU},(([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==wl.ce&&n(new At(_d(i)),s),s=c,i=l):s=wl.ce})).next((()=>{s!==wl.ce&&n(new At(_d(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function FC(t,e){return Jm(t).put((function(r,i){return{targetId:0,path:ga(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class Rde{constructor(){this.changes=new Mp((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?we.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ZOe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return B0(e).put(r)}removeEntry(e,n,r){return B0(e).delete((function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],O4(o),a[a.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=Qi.newInvalidDocument(n);return B0(e).ee({index:_M,range:IDBKeyRange.only($E(n))},((i,s)=>{r=this.Cr(n,s)})).next((()=>r))}vr(e,n){let r={size:0,document:Qi.newInvalidDocument(n)};return B0(e).ee({index:_M,range:IDBKeyRange.only($E(n))},((i,s)=>{r={document:this.Cr(n,s),size:D4(s)}})).next((()=>r))}getEntries(e,n){let r=hc();return this.Fr(e,n,((i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)})).next((()=>r))}Mr(e,n){let r=hc(),i=new ci(At.comparator);return this.Fr(e,n,((s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,D4(o))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return we.resolve();let i=new Hr(IQ);n.forEach((l=>i=i.add(l)));const s=IDBKeyRange.bound($E(i.first()),$E(i.last())),o=i.getIterator();let a=o.getNext();return B0(e).ee({index:_M,range:s},((l,c,u)=>{const h=At.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&IQ(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.j($E(a)):u.done()})).next((()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),O4(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return B0(e).J(IDBKeyRange.bound(a,l,!0)).next((c=>{s?.incrementDocumentReadCount(c.length);let u=hc();for(const h of c){const f=this.Cr(At.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(vI(n,f)||i.has(f.key))&&(u=u.insert(f.key,f))}return u}))}getAllFromCollectionGroup(e,n,r,i){let s=hc();const o=AQ(n,r),a=AQ(n,wc.max());return B0(e).ee({index:ghe,range:IDBKeyRange.bound(o,a,!0)},((l,c,u)=>{const h=this.Cr(At.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&u.done()})).next((()=>s))}newChangeBuffer(e){return new JOe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return kQ(e).get(j8).next((n=>(tn(!!n,20021),n)))}Dr(e,n){return kQ(e).put(j8,n)}Cr(e,n){if(n){const r=jOe(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ln.min())))return r}return Qi.newInvalidDocument(e)}}function Mde(t){return new ZOe(t)}class JOe extends Rde{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Mp((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Hr(((s,o)=>Rn(s.canonicalString(),o.canonicalString())));return this.changes.forEach(((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=cQ(this.Nr.serializer,o);i=i.add(s.path.popLast());const c=D4(l);r+=c-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=cQ(this.Nr.serializer,o.convertToNoDocument(ln.min()));n.push(this.Nr.addEntry(e,s,l))}})),i.forEach((s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),n.push(this.Nr.updateMetadata(e,r)),we.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})})),r)))}}function kQ(t){return Zs(t,Uk)}function B0(t){return Zs(t,k4)}function $E(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function AQ(t,e){const n=e.documentKey.path.toArray();return[t,O4(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function IQ(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Rn(n[s],r[s]),i)return i;return i=Rn(n.length,r.length),i||(i=Rn(n[n.length-2],r[r.length-2]),i||Rn(n[n.length-1],r[r.length-1]))}class QOe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Nde{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&bT(r.mutation,i,bl.empty(),Ur.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,qn()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=qn()){const i=xd();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let o=vS();return s.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=xd();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,qn())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,i){let s=hc();const o=wT(),a=(function(){return wT()})();return n.forEach(((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Np)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),bT(u.mutation,c,u.mutation.getFieldMask(),Ur.now())):o.set(c.key,bl.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((c,u)=>o.set(c,u))),n.forEach(((c,u)=>a.set(c,new QOe(u,o.get(c)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=wT();let i=new ci(((o,a)=>o-a)),s=qn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||bl.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||qn()).add(l);i=i.insert(a.batchId,h)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=Yhe();u.forEach((f=>{if(!s.has(f)){const g=nde(n.get(f),r.get(f));g!==null&&h.set(f,g),s=s.add(f)}})),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return we.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return At.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Uhe(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):we.resolve(xd());let a=u2,l=s;return o.next((c=>we.forEach(c,((u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?we.resolve():this.remoteDocumentCache.getEntry(e,u).next((f=>{l=l.insert(u,f)}))))).next((()=>this.populateOverlays(e,c,s))).next((()=>this.computeViews(e,l,c,qn()))).next((u=>({batchId:a,changes:Khe(u)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new At(n)).next((r=>{let i=vS();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=vS();return this.indexManager.getCollectionParents(e,s).next((a=>we.forEach(a,(l=>{const c=(function(h,f){return new yI(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next((u=>{u.forEach(((h,f)=>{o=o.insert(h,f)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((o=>{s.forEach(((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Qi.newInvalidDocument(u)))}));let a=vS();return o.forEach(((l,c)=>{const u=s.get(l);u!==void 0&&bT(u.mutation,c,bl.empty(),Ur.now()),vI(n,c)&&(a=a.insert(l,c))})),a}))}}class eLe{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return we.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:za(i.createTime)}})(n)),we.resolve()}getNamedQuery(e,n){return we.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:wde(i.bundledQuery),readTime:za(i.readTime)}})(n)),we.resolve()}}class tLe{constructor(){this.overlays=new ci(At.comparator),this.qr=new Map}getOverlay(e,n){return we.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xd();return we.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.St(e,n,s)})),we.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),we.resolve()}getOverlaysForCollection(e,n,r){const i=xd(),s=n.length+1,o=new At(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return we.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ci(((c,u)=>c-u));const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=xd(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=xd(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,u)=>a.set(c,u))),!(a.size()>=i)););return we.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new WU(n,r));let s=this.qr.get(n);s===void 0&&(s=qn(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}class nLe{constructor(){this.sessionToken=ys.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,we.resolve()}}class XU{constructor(){this.Qr=new Hr(lo.$r),this.Ur=new Hr(lo.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new lo(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new lo(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new At(new Pr([])),r=new lo(n,e),i=new lo(n,e+1),s=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),s.push(o.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new At(new Pr([])),r=new lo(n,e),i=new lo(n,e+1);let s=qn();return this.Ur.forEachInRange([r,i],(o=>{s=s.add(o.key)})),s}containsKey(e){const n=new lo(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class lo{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return At.comparator(e.key,n.key)||Rn(e.Yr,n.Yr)}static Kr(e,n){return Rn(e.Yr,n.Yr)||At.comparator(e.key,n.key)}}class rLe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Hr(lo.$r)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new UU(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new lo(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return we.resolve(o)}lookupMutationBatch(e,n){return we.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return we.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?s1:this.tr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new lo(n,0),i=new lo(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(o=>{const a=this.Xr(o.Yr);s.push(a)})),we.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Hr(Rn);return n.forEach((i=>{const s=new lo(i,0),o=new lo(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],(a=>{r=r.add(a.Yr)}))})),we.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;At.isDocumentKey(s)||(s=s.child(""));const o=new lo(new At(s),0);let a=new Hr(Rn);return this.Zr.forEachWhile((l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Yr)),!0)}),o),we.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){tn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return we.forEach(n.mutations,(i=>{const s=new lo(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new lo(n,0),i=this.Zr.firstAfterOrEqual(r);return we.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class iLe{constructor(e){this.ri=e,this.docs=(function(){return new ci(At.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return we.resolve(r?r.document.mutableCopy():Qi.newInvalidDocument(n))}getEntries(e,n){let r=hc();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Qi.newInvalidDocument(i))})),we.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hc();const o=n.path,a=new At(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||RU(uhe(u),r)<=0||(i.has(u.key)||vI(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return we.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ft(9500)}ii(e,n){return we.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new sLe(this)}getSize(e){return we.resolve(this.size)}}class sLe extends Rde{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),we.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class oLe{constructor(e){this.persistence=e,this.si=new Mp((n=>$1(n)),gI),this.lastRemoteSnapshotVersion=ln.min(),this.highestTargetId=0,this.oi=0,this._i=new XU,this.targetCount=0,this.ai=z1.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),we.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new z1(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,we.resolve()}updateTargetData(e,n){return this.Pr(n),we.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),we.waitFor(s).next((()=>i))}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return we.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),we.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((o=>{s.push(i.markPotentiallyOrphaned(e,o))})),we.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),we.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return we.resolve(r)}containsKey(e,n){return we.resolve(this._i.containsKey(n))}}class ZU{constructor(e,n){this.ui={},this.overlays={},this.ci=new wl(0),this.li=!1,this.li=!0,this.hi=new nLe,this.referenceDelegate=e(this),this.Pi=new oLe(this),this.indexManager=new WOe,this.remoteDocumentCache=(function(i){return new iLe(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new _de(n),this.Ii=new eLe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tLe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new rLe(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){at("MemoryPersistence","Starting transaction:",e);const i=new aLe(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,n){return we.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class aLe extends dhe{constructor(e){super(),this.currentSequenceNumber=e}}class TO{constructor(e){this.persistence=e,this.Ri=new XU,this.Vi=null}static mi(e){return new TO(e)}get fi(){if(this.Vi)return this.Vi;throw Ft(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),we.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),we.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),we.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.fi,(r=>{const i=At.fromPath(r);return this.gi(e,i).next((s=>{s||n.removeEntry(i,ln.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return we.or([()=>we.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class j4{constructor(e,n){this.persistence=e,this.pi=new Mp((r=>ga(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=Cde(this,n)}static mi(e,n){return new j4(e,n)}Ei(){}di(e){return we.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return we.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?we.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((a=>{a||(r++,s.removeEntry(o,ln.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),we.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=wM(e.data.value)),n}br(e,n,r){return we.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return we.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class lLe{constructor(e){this.serializer=e}k(e,n,r,i){const s=new hO("createOrUpgrade",n);r<1&&i>=1&&((function(l){l.createObjectStore(mI)})(e),(function(l){l.createObjectStore(Gk,{keyPath:E5e}),l.createObjectStore(Zu,{keyPath:FJ,autoIncrement:!0}).createIndex(By,VJ,{unique:!0}),l.createObjectStore(h2)})(e),PQ(e),(function(l){l.createObjectStore(oy)})(e));let o=we.resolve();return r<3&&i>=3&&(r!==0&&((function(l){l.deleteObjectStore(f2),l.deleteObjectStore(d2),l.deleteObjectStore(o1)})(e),PQ(e)),o=o.next((()=>(function(l){const c=l.store(o1),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ln.min().toTimestamp(),targetCount:0};return c.put(A4,u)})(s)))),r<4&&i>=4&&(r!==0&&(o=o.next((()=>(function(l,c){return c.store(Zu).J().next((h=>{l.deleteObjectStore(Zu),l.createObjectStore(Zu,{keyPath:FJ,autoIncrement:!0}).createIndex(By,VJ,{unique:!0});const f=c.store(Zu),g=h.map((y=>f.put(y)));return we.waitFor(g)}))})(e,s)))),o=o.next((()=>{(function(l){l.createObjectStore(p2,{keyPath:M5e})})(e)}))),r<5&&i>=5&&(o=o.next((()=>this.yi(s)))),r<6&&i>=6&&(o=o.next((()=>((function(l){l.createObjectStore(Uk)})(e),this.wi(s))))),r<7&&i>=7&&(o=o.next((()=>this.Si(s)))),r<8&&i>=8&&(o=o.next((()=>this.bi(e,s)))),r<9&&i>=9&&(o=o.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(o=o.next((()=>this.Di(s)))),r<11&&i>=11&&(o=o.next((()=>{(function(l){l.createObjectStore(fO,{keyPath:N5e})})(e),(function(l){l.createObjectStore(pO,{keyPath:O5e})})(e)}))),r<12&&i>=12&&(o=o.next((()=>{(function(l){const c=l.createObjectStore(mO,{keyPath:z5e});c.createIndex(F8,G5e,{unique:!1}),c.createIndex(xhe,U5e,{unique:!1})})(e)}))),r<13&&i>=13&&(o=o.next((()=>(function(l){const c=l.createObjectStore(k4,{keyPath:T5e});c.createIndex(_M,k5e),c.createIndex(ghe,A5e)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(oy)))),r<14&&i>=14&&(o=o.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(o=o.next((()=>(function(l){l.createObjectStore(OU,{keyPath:L5e,autoIncrement:!0}).createIndex($8,D5e,{unique:!1}),l.createObjectStore(yT,{keyPath:j5e}).createIndex(vhe,$5e,{unique:!1}),l.createObjectStore(vT,{keyPath:F5e}).createIndex(_he,V5e,{unique:!1})})(e)))),r<16&&i>=16&&(o=o.next((()=>{n.objectStore(yT).clear()})).next((()=>{n.objectStore(vT).clear()}))),r<17&&i>=17&&(o=o.next((()=>{(function(l){l.createObjectStore(LU,{keyPath:B5e})})(e)}))),r<18&&i>=18&&cue()&&(o=o.next((()=>{n.objectStore(yT).clear()})).next((()=>{n.objectStore(vT).clear()}))),o}wi(e){let n=0;return e.store(oy).ee(((r,i)=>{n+=D4(i)})).next((()=>{const r={byteSize:n};return e.store(Uk).put(j8,r)}))}yi(e){const n=e.store(Gk),r=e.store(Zu);return n.J().next((i=>we.forEach(i,(s=>{const o=IDBKeyRange.bound([s.userId,s1],[s.userId,s.lastAcknowledgedBatchId]);return r.J(By,o).next((a=>we.forEach(a,(l=>{tn(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Ry(this.serializer,l);return Tde(e,s.userId,c).next((()=>{}))}))))}))))}Si(e){const n=e.store(f2),r=e.store(oy);return e.store(o1).get(A4).next((i=>{const s=[];return r.ee(((o,a)=>{const l=new Pr(o),c=(function(h){return[0,ga(h)]})(l);s.push(n.get(c).next((u=>u?we.resolve():(h=>n.put({targetId:0,path:ga(h),sequenceNumber:i.highestListenSequenceNumber}))(l))))})).next((()=>we.waitFor(s)))}))}bi(e,n){e.createObjectStore(Bk,{keyPath:R5e});const r=n.store(Bk),i=new YU,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:ga(l)})}};return n.store(oy).ee({X:!0},((o,a)=>{const l=new Pr(o);return s(l.popLast())})).next((()=>n.store(h2).ee({X:!0},(([o,a,l],c)=>{const u=_d(a);return s(u.popLast())}))))}Di(e){const n=e.store(d2);return n.ee(((r,i)=>{const s=xS(i),o=xde(this.serializer,s);return n.put(o)}))}Ci(e,n){const r=n.store(oy),i=[];return r.ee(((s,o)=>{const a=n.store(k4),l=(function(h){return h.document?new At(Pr.fromString(h.document.name).popFirst(5)):h.noDocument?At.fromSegments(h.noDocument.path):h.unknownDocument?At.fromSegments(h.unknownDocument.path):Ft(36783)})(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))})).next((()=>we.waitFor(i)))}Fi(e,n){const r=n.store(Zu),i=Mde(this.serializer),s=new ZU(TO.mi,this.serializer.yt);return r.J().next((o=>{const a=new Map;return o.forEach((l=>{let c=a.get(l.userId)??qn();Ry(this.serializer,l).keys().forEach((u=>c=c.add(u))),a.set(l.userId,c)})),we.forEach(a,((l,c)=>{const u=new na(c),h=EO.wt(this.serializer,u),f=s.getIndexManager(u),g=SO.wt(u,this.serializer,f,s.referenceDelegate);return new Nde(i,g,h,f).recalculateAndSaveOverlaysForDocumentKeys(new V8(n,wl.ce),l).next()}))}))}}function PQ(t){t.createObjectStore(f2,{keyPath:P5e}).createIndex(NU,C5e,{unique:!0}),t.createObjectStore(d2,{keyPath:"targetId"}).createIndex(yhe,I5e,{unique:!0}),t.createObjectStore(o1)}const pm="IndexedDbPersistence",Aj=18e5,Ij=5e3,Pj="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",cLe="main";class JU{constructor(e,n,r,i,s,o,a,l,c,u,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=c,this.Oi=u,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!JU.v())throw new xt(We.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XOe(this,i),this.$i=n+cLe,this.serializer=new _de(l),this.Ui=new Ig(this.$i,this.Ni,new lLe(this.serializer)),this.hi=new FOe,this.Pi=new qOe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Mde(this.serializer),this.Ii=new $Oe,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,u===!1&&ds(pm,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xt(We.FAILED_PRECONDITION,Pj);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new wl(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>VC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(d0(e))return at(pm,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return at(pm,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return FE(e).get(x_).next((n=>we.resolve(this.es(n))))}ts(e){return VC(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Aj)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Zs(n,p2);return r.J().next((i=>{const s=this.ss(i,Aj),o=i.filter((a=>s.indexOf(a)===-1));return we.forEach(o,(a=>r.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?we.resolve(!0):FE(e).get(x_).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Ij)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new xt(We.FAILED_PRECONDITION,Pj);return!1}}return!(!this.networkEnabled||!this.inForeground)||VC(e).J().next((r=>this.ss(r,Ij).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&at(pm,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[mI,p2],(e=>{const n=new V8(e,wl.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>VC(e).J().next((n=>this.ss(n,Aj).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return SO.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new HOe(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return EO.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){at(pm,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(function(l){return l===18?q5e:l===17?She:l===16?H5e:l===15?DU:l===14?Ehe:l===13?bhe:l===12?W5e:l===11?whe:void Ft(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,i,s,(a=>(o=new V8(a,this.ci?this.ci.next():wl.ce),n==="readwrite-primary"?this.Hi(o).next((l=>!!l||this.Yi(o))).next((l=>{if(!l)throw ds(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new xt(We.FAILED_PRECONDITION,hhe);return r(o)})).next((l=>this.Xi(o).next((()=>l)))):this.Is(o).next((()=>r(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Is(e){return FE(e).get(x_).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Ij)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new xt(We.FAILED_PRECONDITION,Pj)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return FE(e).put(x_,n)}static v(){return Ig.v()}Zi(e){const n=FE(e);return n.get(x_).next((r=>this.es(r)?(at(pm,"Releasing primary lease."),n.delete(x_)):we.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(ds(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;lue()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return at(pm,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return ds(pm,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ds("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function FE(t){return Zs(t,mI)}function VC(t){return Zs(t,p2)}function Ode(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class QU{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=qn(),i=qn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new QU(e,n.fromCache,r,i)}}class uLe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Lde{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return lue()?8:fhe(Ys())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.ws(e,n,i,r).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new uLe;return this.Ss(e,n,o).next((a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>s.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(K_()<=tr.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",Y_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),we.resolve()):(K_()<=tr.DEBUG&&at("QueryEngine","Query:",Y_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(K_()<=tr.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",Y_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mc(n))):we.resolve())}ys(e,n){if(QJ(n))return we.resolve(null);let r=mc(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=q8(n,null,"F"),r=mc(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const o=qn(...s);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,q8(n,null,"F")):this.vs(e,c,n,l)}))))})))))}ws(e,n,r,i){return QJ(n)||i.isEqual(ln.min())?we.resolve(null):this.ps.getDocuments(e,r).next((s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?we.resolve(null):(K_()<=tr.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Y_(n)),this.vs(e,o,n,che(i,u2)).next((a=>a)))}))}Ds(e,n){let r=new Hr(Hhe(e));return n.forEach(((i,s)=>{vI(e,s)&&(r=r.add(s))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return K_()<=tr.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",Y_(n)),this.ps.getDocumentsMatchingQuery(e,n,wc.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((o=>{s=s.insert(o.key,o)})),s)))}}const eB="LocalStore",hLe=3e8;class dLe{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ci(Rn),this.xs=new Mp((s=>$1(s)),gI),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nde(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Dde(t,e,n,r){return new dLe(t,e,n,r)}async function jde(t,e){const n=Xt(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const o=[],a=[];let l=qn();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next((c=>({Ls:c,removedBatchIds:o,addedBatchIds:a})))}))}))}function fLe(t,e){const n=Xt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,c,u){const h=c.batch,f=h.keys();let g=we.resolve();return f.forEach((y=>{g=g.next((()=>u.getEntry(l,y))).next((_=>{const b=c.docVersions.get(y);tn(b!==null,48541),_.version.compareTo(b)<0&&(h.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,h)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=qn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function $de(t){const e=Xt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function pLe(t,e){const n=Xt(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach(((u,h)=>{const f=i.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,u.removedDocuments,h).next((()=>n.Pi.addMatchingKeys(s,u.addedDocuments,h))));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(ys.EMPTY_BYTE_STRING,ln.min()).withLastLimboFreeSnapshotVersion(ln.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(h,g),(function(_,b,T){return _.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=hLe?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(f,g,u)&&a.push(n.Pi.updateTargetData(s,g))}));let l=hc(),c=qn();if(e.documentUpdates.forEach((u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))})),a.push(mLe(s,o,e.documentUpdates).next((u=>{l=u.ks,c=u.qs}))),!r.isEqual(ln.min())){const u=n.Pi.getLastRemoteSnapshotVersion(s).next((h=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));a.push(u)}return we.waitFor(a).next((()=>o.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,l,c))).next((()=>l))})).then((s=>(n.Ms=i,s)))}function mLe(t,e,n){let r=qn(),i=qn();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let o=hc();return n.forEach(((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ln.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):at(eB,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)})),{ks:o,qs:i}}))}function gLe(t,e){const n=Xt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=s1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function $4(t,e){const n=Xt(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((s=>s?(i=s,we.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new np(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function E2(t,e,n){const r=Xt(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!d0(o))throw o;at(eB,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function t9(t,e,n){const r=Xt(t);let i=ln.min(),s=qn();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,c,u){const h=Xt(l),f=h.xs.get(u);return f!==void 0?we.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,u)})(r,o,mc(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ln.min(),n?s:qn()))).next((a=>(zde(r,Whe(e),a),{documents:a,Qs:s})))))}function Fde(t,e){const n=Xt(t),r=Xt(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(s=>r.At(s,e).next((o=>o?o.target:null))))}function Vde(t,e){const n=Xt(t),r=n.Os.get(e)||ln.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,che(r,u2),Number.MAX_SAFE_INTEGER))).then((i=>(zde(n,e,i),i)))}function zde(t,e,n){let r=t.Os.get(e)||ln.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.Os.set(e,r)}const Gde="firestore_clients";function CQ(t,e){return`${Gde}_${t}_${e}`}const Ude="firestore_mutations";function RQ(t,e,n){let r=`${Ude}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Bde="firestore_targets";function Cj(t,e){return`${Bde}_${t}_${e}`}const hd="SharedClientState";class F4{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new xt(i.error.code,i.error.message))),o?new F4(e,n,i.state,s):(ds(hd,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ET{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new xt(r.error.code,r.error.message))),s?new ET(e,r.state,i):(ds(hd,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class V4{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=zU();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=phe(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new V4(e,s):(ds(hd,`Failed to parse client data for instance '${e}': ${n}`),null)}}class tB{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new tB(n.clientId,n.onlineState):(ds(hd,`Failed to parse online state: ${e}`),null)}}class n9{constructor(){this.activeTargetIds=zU()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rj{constructor(e,n,r,i,s){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ci(Rn),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=CQ(this.persistenceKey,this.Js),this.no=(function(l){return`firestore_sequence_number_${l}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new n9),this.ro=new RegExp(`^${Gde}_${o}_([^_]*)$`),this.io=new RegExp(`^${Ude}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Bde}_${o}_(\\d+)$`),this.oo=(function(l){return`firestore_online_state_${l}`})(this.persistenceKey),this._o=(function(l){return`firestore_bundle_loaded_v2_${l}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(CQ(this.persistenceKey,r));if(i){const s=V4.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Cj(this.persistenceKey,e));if(i){const s=ET.Ws(e,i);s&&(r=s.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Cj(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return at(hd,"READ",e,n),n}setItem(e,n){at(hd,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){at(hd,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(at(hd,"EVENT",n.key,n.newValue),n.key===this.eo)return void ds("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(s){let o=wl.ce;if(s!=null)try{const a=JSON.parse(s);tn(typeof a=="number",30636,{So:s}),o=a}catch(a){ds(hd,"Failed to read sequence number from WebStorage",a)}return o})(n.newValue);r!==wl.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new F4(this.currentUser,e,n,r),s=RQ(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const n=RQ(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=Cj(this.persistenceKey,e),s=new ET(e,n,r);this.setItem(i,s.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return V4.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return F4.Ws(new na(s),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return ET.Ws(i,n)}uo(e){return tB.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);at(hd,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),o=[],a=[];return s.forEach((l=>{i.has(l)||o.push(l)})),i.forEach((l=>{s.has(l)||a.push(l)})),this.syncEngine.Fo(o,a).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=zU();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class Wde{constructor(){this.Mo=new n9,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new n9,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yLe{Oo(e){}shutdown(){}}const MQ="ConnectivityMonitor";class NQ{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){at(MQ,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){at(MQ,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let zC=null;function r9(){return zC===null?zC=(function(){return 268435456+Math.round(2147483648*Math.random())})():zC++,"0x"+zC.toString(16)}const Mj="RestConnection",vLe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _Le{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===I4?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=r9(),a=this.zo(e,n.toUriEncodedString());at(Mj,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:c}=new URL(a),u=pv(c);return this.Jo(e,a,l,r,u).then((h=>(at(Mj,`Received RPC '${e}' ${o}: `,h),h)),(h=>{throw Fk(Mj,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h}))}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hb})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,n){const r=vLe[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class xLe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Wo="WebChannelConnection";class wLe extends _Le{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=r9();return new Promise(((a,l)=>{const c=new ehe;c.setWithCredentials(!0),c.listenOnce(the.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case gM.NO_ERROR:const h=c.getResponseJson();at(Wo,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case gM.TIMEOUT:at(Wo,`RPC '${e}' ${o} timed out`),l(new xt(We.DEADLINE_EXCEEDED,"Request time out"));break;case gM.HTTP_ERROR:const f=c.getStatus();if(at(Wo,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g?.error;if(y&&y.status&&y.message){const _=(function(T){const A=T.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(A)>=0?A:We.UNKNOWN})(y.status);l(new xt(_,y.message))}else l(new xt(We.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new xt(We.UNAVAILABLE,"Connection failed."));break;default:Ft(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{at(Wo,`RPC '${e}' ${o} completed.`)}}));const u=JSON.stringify(i);at(Wo,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)}))}T_(e,n,r){const i=r9(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ihe(),a=rhe(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");at(Wo,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);this.I_(h);let f=!1,g=!1;const y=new xLe({Yo:b=>{g?at(Wo,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(f||(at(Wo,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),at(Wo,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},Zo:()=>h.close()}),_=(b,T,A)=>{b.listen(T,(I=>{try{A(I)}catch(P){setTimeout((()=>{throw P}),0)}}))};return _(h,yS.EventType.OPEN,(()=>{g||(at(Wo,`RPC '${e}' stream ${i} transport opened.`),y.o_())})),_(h,yS.EventType.CLOSE,(()=>{g||(g=!0,at(Wo,`RPC '${e}' stream ${i} transport closed`),y.a_(),this.E_(h))})),_(h,yS.EventType.ERROR,(b=>{g||(g=!0,Fk(Wo,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),y.a_(new xt(We.UNAVAILABLE,"The operation could not be completed")))})),_(h,yS.EventType.MESSAGE,(b=>{if(!g){const T=b.data[0];tn(!!T,16349);const A=T,I=A?.error||A[0]?.error;if(I){at(Wo,`RPC '${e}' stream ${i} received error:`,I);const P=I.status;let M=(function(N){const O=Es[N];if(O!==void 0)return sde(O)})(P),V=I.message;M===void 0&&(M=We.INTERNAL,V="Unknown error status: "+P+" with message "+I.message),g=!0,y.a_(new xt(M,V)),h.close()}else at(Wo,`RPC '${e}' stream ${i} received:`,T),y.u_(T)}})),_(a,nhe.STAT_EVENT,(b=>{b.stat===O8.PROXY?at(Wo,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===O8.NOPROXY&&at(Wo,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{y.__()}),0),y}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Hde(){return typeof window<"u"?window:null}function kM(){return typeof document<"u"?document:null}function kO(t){return new AOe(t,!0)}class qde{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&at("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const OQ="PersistentStream";class Kde{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qde(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===We.RESOURCE_EXHAUSTED?(ds(n.toString()),ds("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===We.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new xt(We.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return at(OQ,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(at(OQ,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bLe extends Kde{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=COe(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ln.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ln.min():o.readTime?za(o.readTime):ln.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=X8(this.serializer),n.addTarget=(function(s,o){let a;const l=o.target;if(a=C4(l)?{documents:fde(s,l)}:{query:pde(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=lde(s,o.resumeToken);const c=K8(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ln.min())>0){a.readTime=b2(s,o.snapshotVersion.toTimestamp());const c=K8(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,e);const r=MOe(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=X8(this.serializer),n.removeTarget=e,this.q_(n)}}class ELe extends Kde{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return tn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ROe(e.writeResults,e.commitTime),r=za(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=X8(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>N4(this.serializer,r)))};this.q_(n)}}class SLe{}class TLe extends SLe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new xt(We.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Go(e,Y8(n,r),i,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xt(We.UNKNOWN,s.toString())}))}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Y8(n,r),i,o,a,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xt(We.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class kLe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ds(n),this.aa=!1):at("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const G1="RemoteStore";class ALe{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{yv(this)&&(at(G1,"Restarting streams for network reachability change."),await(async function(l){const c=Xt(l);c.Ea.add(4),await wI(c),c.Ra.set("Unknown"),c.Ea.delete(4),await AO(c)})(this))}))})),this.Ra=new kLe(r,i)}}async function AO(t){if(yv(t))for(const e of t.da)await e(!0)}async function wI(t){for(const e of t.da)await e(!1)}function IO(t,e){const n=Xt(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),iB(n)?rB(n):pb(n).O_()&&nB(n,e))}function S2(t,e){const n=Xt(t),r=pb(n);n.Ia.delete(e),r.O_()&&Yde(n,e),n.Ia.size===0&&(r.O_()?r.L_():yv(n)&&n.Ra.set("Unknown"))}function nB(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ln.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pb(t).Y_(e)}function Yde(t,e){t.Va.Ue(e),pb(t).Z_(e)}function rB(t){t.Va=new EOe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),pb(t).start(),t.Ra.ua()}function iB(t){return yv(t)&&!pb(t).x_()&&t.Ia.size>0}function yv(t){return Xt(t).Ea.size===0}function Xde(t){t.Va=void 0}async function ILe(t){t.Ra.set("Online")}async function PLe(t){t.Ia.forEach(((e,n)=>{nB(t,e)}))}async function CLe(t,e){Xde(t),iB(t)?(t.Ra.ha(e),rB(t)):t.Ra.set("Unknown")}async function RLe(t,e,n){if(t.Ra.set("Online"),e instanceof ade&&e.state===2&&e.cause)try{await(async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){at(G1,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await z4(t,r)}else if(e instanceof SM?t.Va.Ze(e):e instanceof ode?t.Va.st(e):t.Va.tt(e),!n.isEqual(ln.min()))try{const r=await $de(t.localStore);n.compareTo(r)>=0&&await(function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.Ia.get(c);u&&s.Ia.set(c,u.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,c)=>{const u=s.Ia.get(l);if(!u)return;s.Ia.set(l,u.withResumeToken(ys.EMPTY_BYTE_STRING,u.snapshotVersion)),Yde(s,l);const h=new np(u.target,l,c,u.sequenceNumber);nB(s,h)})),s.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){at(G1,"Failed to raise snapshot:",r),await z4(t,r)}}async function z4(t,e,n){if(!d0(e))throw e;t.Ea.add(1),await wI(t),t.Ra.set("Offline"),n||(n=()=>$de(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{at(G1,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await AO(t)}))}function Zde(t,e){return e().catch((n=>z4(t,n,e)))}async function fb(t){const e=Xt(t),n=Bg(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:s1;for(;MLe(e);)try{const i=await gLe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,NLe(e,i)}catch(i){await z4(e,i)}Jde(e)&&Qde(e)}function MLe(t){return yv(t)&&t.Ta.length<10}function NLe(t,e){t.Ta.push(e);const n=Bg(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Jde(t){return yv(t)&&!Bg(t).x_()&&t.Ta.length>0}function Qde(t){Bg(t).start()}async function OLe(t){Bg(t).ra()}async function LLe(t){const e=Bg(t);for(const n of t.Ta)e.ea(n.mutations)}async function DLe(t,e,n){const r=t.Ta.shift(),i=BU.from(r,e,n);await Zde(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await fb(t)}async function jLe(t,e){e&&Bg(t).X_&&await(async function(r,i){if((function(o){return xOe(o)&&o!==We.ABORTED})(i.code)){const s=r.Ta.shift();Bg(r).B_(),await Zde(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await fb(r)}})(t,e),Jde(t)&&Qde(t)}async function LQ(t,e){const n=Xt(t);n.asyncQueue.verifyOperationInProgress(),at(G1,"RemoteStore received new credentials");const r=yv(n);n.Ea.add(3),await wI(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await AO(n)}async function i9(t,e){const n=Xt(t);e?(n.Ea.delete(2),await AO(n)):e||(n.Ea.add(2),await wI(n),n.Ra.set("Unknown"))}function pb(t){return t.ma||(t.ma=(function(n,r,i){const s=Xt(n);return s.sa(),new bLe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:ILe.bind(null,t),t_:PLe.bind(null,t),r_:CLe.bind(null,t),H_:RLe.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),iB(t)?rB(t):t.Ra.set("Unknown")):(await t.ma.stop(),Xde(t))}))),t.ma}function Bg(t){return t.fa||(t.fa=(function(n,r,i){const s=Xt(n);return s.sa(),new ELe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:OLe.bind(null,t),r_:jLe.bind(null,t),ta:LLe.bind(null,t),na:DLe.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await fb(t)):(await t.fa.stop(),t.Ta.length>0&&(at(G1,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class sB{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Td,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new sB(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xt(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oB(t,e){if(ds("AsyncQueue",`${e}: ${t}`),d0(t))return new xt(We.UNAVAILABLE,`${e}: ${t}`);throw t}class aw{static emptySet(e){return new aw(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||At.comparator(n.key,r.key):(n,r)=>At.comparator(n.key,r.key),this.keyedMap=vS(),this.sortedSet=new ci(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof aw)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new aw;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class DQ{constructor(){this.ga=new ci(At.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ft(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class T2{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new T2(e,n,aw.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_O(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class $Le{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class FLe{constructor(){this.queries=jQ(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Xt(n),s=i.queries;i.queries=jQ(),s.forEach(((o,a)=>{for(const l of a.Sa)l.onError(r)}))})(this,new xt(We.ABORTED,"Firestore shutting down"))}}function jQ(){return new Mp((t=>Bhe(t)),_O)}async function efe(t,e){const n=Xt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new $Le,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=oB(o,`Initialization of query '${Y_(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&aB(n)}async function tfe(t,e){const n=Xt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function VLe(t,e){const n=Xt(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&aB(n)}function zLe(t,e,n){const r=Xt(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function aB(t){t.Ca.forEach((e=>{e.next()}))}var s9,$Q;($Q=s9||(s9={})).Ma="default",$Q.Cache="cache";class nfe{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new T2(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=T2.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==s9.Cache}}class rfe{constructor(e){this.key=e}}class ife{constructor(e){this.key=e}}class GLe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qn(),this.mutatedKeys=qn(),this.eu=Hhe(e),this.tu=new aw(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new DQ,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((u,h)=>{const f=i.get(u),g=vI(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;f&&g?f.data.isEqual(g.data)?y!==_&&(r.track({type:3,doc:g}),b=!0):this.su(f,g)||(r.track({type:2,doc:g}),b=!0,(l&&this.eu(g,l)>0||c&&this.eu(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),b=!0):f&&!g&&(r.track({type:1,doc:f}),b=!0,(l||c)&&(a=!0)),b&&(g?(o=o.add(g),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((u,h)=>(function(g,y){const _=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ft(20277,{Rt:b})}};return _(g)-_(y)})(u.type,h.type)||this.eu(u.doc,h.doc))),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new T2(this.query,e.tu,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new DQ,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new ife(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new rfe(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=qn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return T2.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const mb="SyncEngine";class ULe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class BLe{constructor(e){this.key=e,this.hu=!1}}class WLe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Mp((a=>Bhe(a)),_O),this.Iu=new Map,this.Eu=new Set,this.du=new ci(At.comparator),this.Au=new Map,this.Ru=new XU,this.Vu={},this.mu=new Map,this.fu=z1.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HLe(t,e,n=!0){const r=PO(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await sfe(r,e,n,!0),i}async function qLe(t,e){const n=PO(t);await sfe(n,e,!0,!1)}async function sfe(t,e,n,r){const i=await $4(t.localStore,mc(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await lB(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&IO(t.remoteStore,i),a}async function lB(t,e,n,r,i){t.pu=(h,f,g)=>(async function(_,b,T,A){let I=b.view.ru(T);I.Cs&&(I=await t9(_.localStore,b.query,!1).then((({documents:C})=>b.view.ru(C,I))));const P=A&&A.targetChanges.get(b.targetId),M=A&&A.targetMismatches.get(b.targetId)!=null,V=b.view.applyChanges(I,_.isPrimaryClient,P,M);return o9(_,b.targetId,V.au),V.snapshot})(t,h,f,g);const s=await t9(t.localStore,e,!0),o=new GLe(e,s.Qs),a=o.ru(s.documents),l=xI.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);o9(t,n,c.au);const u=new ULe(e,n,o);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function KLe(t,e,n){const r=Xt(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((o=>!_O(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await E2(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&S2(r.remoteStore,i.targetId),k2(r,i.targetId)})).catch(h0)):(k2(r,i.targetId),await E2(r.localStore,i.targetId,!0))}async function YLe(t,e){const n=Xt(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),S2(n.remoteStore,r.targetId))}async function XLe(t,e,n){const r=dB(t);try{const i=await(function(o,a){const l=Xt(o),c=Ur.now(),u=a.reduce(((g,y)=>g.add(y.key)),qn());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let y=hc(),_=qn();return l.Ns.getEntries(g,u).next((b=>{y=b,y.forEach(((T,A)=>{A.isValidDocument()||(_=_.add(T))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,y))).next((b=>{h=b;const T=[];for(const A of a){const I=vOe(A,h.get(A.key).overlayedDocument);I!=null&&T.push(new Np(A.key,I,Ohe(I.value.mapValue),da.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,T,a)})).next((b=>{f=b;const T=b.applyToLocalDocumentSet(h,_);return l.documentOverlayCache.saveOverlays(g,b.batchId,T)}))})).then((()=>({batchId:f.batchId,changes:Khe(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new ci(Rn)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c})(r,i.batchId,n),await p0(r,i.changes),await fb(r.remoteStore)}catch(i){const s=oB(i,"Failed to persist write");n.reject(s)}}async function ofe(t,e){const n=Xt(t);try{const r=await pLe(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const o=n.Au.get(s);o&&(tn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?tn(o.hu,14607):i.removedDocuments.size>0&&(tn(o.hu,42227),o.hu=!1))})),await p0(n,r,e)}catch(r){await h0(r)}}function FQ(t,e,n){const r=Xt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=Xt(o);l.onlineState=a;let c=!1;l.queries.forEach(((u,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)})),c&&aB(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZLe(t,e,n){const r=Xt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new ci(At.comparator);o=o.insert(s,Qi.newNoDocument(s,ln.min()));const a=qn().add(s),l=new _I(ln.min(),new Map,new ci(Rn),o,a);await ofe(r,l),r.du=r.du.remove(s),r.Au.delete(e),hB(r)}else await E2(r.localStore,e,!1).then((()=>k2(r,e,n))).catch(h0)}async function JLe(t,e){const n=Xt(t),r=e.batch.batchId;try{const i=await fLe(n.localStore,e);uB(n,r,null),cB(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await p0(n,i)}catch(i){await h0(i)}}async function QLe(t,e,n){const r=Xt(t);try{const i=await(function(o,a){const l=Xt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next((h=>(tn(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u))).next((()=>l.localDocuments.getDocuments(c,u)))}))})(r.localStore,e);uB(r,e,n),cB(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await p0(r,i)}catch(i){await h0(i)}}function cB(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function uB(t,e,n){const r=Xt(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function k2(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||afe(t,r)}))}function afe(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(S2(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),hB(t))}function o9(t,e,n){for(const r of n)r instanceof rfe?(t.Ru.addReference(r.key,e),eDe(t,r)):r instanceof ife?(at(mb,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||afe(t,r.key)):Ft(19791,{wu:r})}function eDe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(at(mb,"New document in limbo: "+n),t.Eu.add(r),hB(t))}function hB(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new At(Pr.fromString(e)),r=t.fu.next();t.Au.set(r,new BLe(n)),t.du=t.du.insert(n,r),IO(t.remoteStore,new np(mc(vO(n.path)),r,"TargetPurposeLimboResolution",wl.ce))}}async function p0(t,e,n){const r=Xt(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,l)=>{o.push(r.pu(l,e,n).then((c=>{if((c||n)&&r.isPrimaryClient){const u=c?!c.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,u?"current":"not-current")}if(c){i.push(c);const u=QU.As(l.targetId,c);s.push(u)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(l,c){const u=Xt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>we.forEach(c,(f=>we.forEach(f.Es,(g=>u.persistence.referenceDelegate.addReference(h,f.targetId,g))).next((()=>we.forEach(f.ds,(g=>u.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))))))}catch(h){if(!d0(h))throw h;at(eB,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const g=u.Ms.get(f),y=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(y);u.Ms=u.Ms.insert(f,_)}}})(r.localStore,s))}async function tDe(t,e){const n=Xt(t);if(!n.currentUser.isEqual(e)){at(mb,"User change. New user:",e.toKey());const r=await jde(n.localStore,e);n.currentUser=e,(function(s,o){s.mu.forEach((a=>{a.forEach((l=>{l.reject(new xt(We.CANCELLED,o))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await p0(n,r.Ls)}}function nDe(t,e){const n=Xt(t),r=n.Au.get(e);if(r&&r.hu)return qn().add(r.key);{let i=qn();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}async function rDe(t,e){const n=Xt(t),r=await t9(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&o9(n,e.targetId,i.au),i}async function iDe(t,e){const n=Xt(t);return Vde(n.localStore,e).then((r=>p0(n,r)))}async function sDe(t,e,n,r){const i=Xt(t),s=await(function(a,l){const c=Xt(a),u=Xt(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",(h=>u.er(h,l).next((f=>f?c.localDocuments.getDocuments(h,f):we.resolve(null)))))})(i.localStore,e);s!==null?(n==="pending"?await fb(i.remoteStore):n==="acknowledged"||n==="rejected"?(uB(i,e,r||null),cB(i,e),(function(a,l){Xt(Xt(a).mutationQueue).ir(l)})(i.localStore,e)):Ft(6720,"Unknown batchState",{Su:n}),await p0(i,s)):at(mb,"Cannot apply mutation batch with id: "+e)}async function oDe(t,e){const n=Xt(t);if(PO(n),dB(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await VQ(n,r.toArray());n.gu=!0,await i9(n.remoteStore,!0);for(const s of i)IO(n.remoteStore,s)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then((()=>(k2(n,o),E2(n.localStore,o,!0)))),S2(n.remoteStore,o)})),await i,await VQ(n,r),(function(o){const a=Xt(o);a.Au.forEach(((l,c)=>{S2(a.remoteStore,c)})),a.Ru.Jr(),a.Au=new Map,a.du=new ci(At.comparator)})(n),n.gu=!1,await i9(n.remoteStore,!1)}}async function VQ(t,e,n){const r=Xt(t),i=[],s=[];for(const o of e){let a;const l=r.Iu.get(o);if(l&&l.length!==0){a=await $4(r.localStore,mc(l[0]));for(const c of l){const u=r.Tu.get(c),h=await rDe(r,u);h.snapshot&&s.push(h.snapshot)}}else{const c=await Fde(r.localStore,o);a=await $4(r.localStore,c),await lB(r,lfe(c),o,!1,a.resumeToken)}i.push(a)}return r.Pu.H_(s),i}function lfe(t){return Ghe(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function aDe(t){return(function(n){return Xt(Xt(n).persistence).Ts()})(Xt(t).localStore)}async function lDe(t,e,n,r){const i=Xt(t);if(i.gu)return void at(mb,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Vde(i.localStore,Whe(s[0])),a=_I.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ys.EMPTY_BYTE_STRING);await p0(i,o,a);break}case"rejected":await E2(i.localStore,e,!0),k2(i,e,r);break;default:Ft(64155,n)}}async function cDe(t,e,n){const r=PO(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){at(mb,"Adding an already active target "+i);continue}const s=await Fde(r.localStore,i),o=await $4(r.localStore,s);await lB(r,lfe(s),o.targetId,!1,o.resumeToken),IO(r.remoteStore,o)}for(const i of n)r.Iu.has(i)&&await E2(r.localStore,i,!1).then((()=>{S2(r.remoteStore,i),k2(r,i)})).catch(h0)}}function PO(t){const e=Xt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ofe.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nDe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZLe.bind(null,e),e.Pu.H_=VLe.bind(null,e.eventManager),e.Pu.yu=zLe.bind(null,e.eventManager),e}function dB(t){const e=Xt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JLe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QLe.bind(null,e),e}class Xk{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kO(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Dde(this.persistence,new Lde,e.initialUser,this.serializer)}Cu(e){return new ZU(TO.mi,this.serializer)}Du(e){return new Wde}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xk.provider={build:()=>new Xk};class uDe extends Xk{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){tn(this.persistence.referenceDelegate instanceof j4,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Pde(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ra.withCacheSize(this.cacheSizeBytes):ra.DEFAULT;return new ZU((r=>j4.mi(r,n)),this.serializer)}}class cfe extends Xk{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await dB(this.xu.syncEngine),await fb(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return Dde(this.persistence,new Lde,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Pde(r,e.asyncQueue,n)}Mu(e,n){const r=new w5e(n,this.persistence);return new x5e(e.asyncQueue,r)}Cu(e){const n=Ode(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ra.withCacheSize(this.cacheSizeBytes):ra.DEFAULT;return new JU(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Hde(),kM(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Wde}}class hDe extends cfe{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof Rj&&(this.sharedClientState.syncEngine={Co:sDe.bind(null,n),vo:lDe.bind(null,n),Fo:cDe.bind(null,n),Ts:aDe.bind(null,n),Do:iDe.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await oDe(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=Hde();if(!Rj.v(n))throw new xt(We.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ode(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Rj(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Zk{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>FQ(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tDe.bind(null,this.syncEngine),await i9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new FLe})()}createDatastore(e){const n=kO(e.databaseInfo.databaseId),r=(function(s){return new wLe(s)})(e.databaseInfo);return(function(s,o,a,l){return new TLe(s,o,a,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,o,a){return new ALe(r,i,s,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>FQ(this.syncEngine,n,0)),(function(){return NQ.v()?new NQ:new yLe})())}createSyncEngine(e,n){return(function(i,s,o,a,l,c,u){const h=new WLe(i,s,o,a,l,c);return u&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Xt(n);at(G1,"RemoteStore shutting down."),r.Ea.add(5),await wI(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Zk.provider={build:()=>new Zk};class ufe{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ds("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Wg="FirestoreClient";class dDe{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=na.UNAUTHENTICATED,this.clientId=CU.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async o=>{at(Wg,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(at(Wg,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Td;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=oB(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Nj(t,e){t.asyncQueue.verifyOperationInProgress(),at(Wg,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await jde(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function zQ(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fDe(t);at(Wg,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>LQ(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>LQ(e.remoteStore,i))),t._onlineComponents=e}async function fDe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){at(Wg,"Using user provided OfflineComponentProvider");try{await Nj(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===We.FAILED_PRECONDITION||i.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Fk("Error using user provided cache. Falling back to memory cache: "+n),await Nj(t,new Xk)}}else at(Wg,"Using default OfflineComponentProvider"),await Nj(t,new uDe(void 0));return t._offlineComponents}async function hfe(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(at(Wg,"Using user provided OnlineComponentProvider"),await zQ(t,t._uninitializedComponentsProvider._online)):(at(Wg,"Using default OnlineComponentProvider"),await zQ(t,new Zk))),t._onlineComponents}function pDe(t){return hfe(t).then((e=>e.syncEngine))}async function dfe(t){const e=await hfe(t),n=e.eventManager;return n.onListen=HLe.bind(null,e.syncEngine),n.onUnlisten=KLe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qLe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=YLe.bind(null,e.syncEngine),n}function mDe(t,e,n={}){const r=new Td;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,c){const u=new ufe({next:f=>{u.Nu(),o.enqueueAndForget((()=>tfe(s,h)));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new xt(We.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new xt(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new nfe(vO(a.path),u,{includeMetadataChanges:!0,qa:!0});return efe(s,h)})(await dfe(t),t.asyncQueue,e,n,r))),r.promise}function gDe(t,e,n={}){const r=new Td;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,c){const u=new ufe({next:f=>{u.Nu(),o.enqueueAndForget((()=>tfe(s,h))),f.fromCache&&l.source==="server"?c.reject(new xt(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new nfe(a,u,{includeMetadataChanges:!0,qa:!0});return efe(s,h)})(await dfe(t),t.asyncQueue,e,n,r))),r.promise}function ffe(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const GQ=new Map;const yDe="firestore.googleapis.com",UQ=!0;class BQ{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xt(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yDe,this.ssl=UQ}else this.host=e.host,this.ssl=e.ssl??UQ;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Sde;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ide)throw new xt(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}y5e("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ffe(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new xt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new xt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new xt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fB{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BQ({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xt(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xt(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BQ(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new l5e;switch(r.type){case"firstParty":return new h5e(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xt(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=GQ.get(n);r&&(at("ComponentProvider","Removing Datastore"),GQ.delete(n),r.terminate())})(this),Promise.resolve()}}class gb{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gb(this.firestore,e,this._query)}}class ps{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ps(this.firestore,e,this._key)}toJSON(){return{type:ps._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(pI(n,ps._jsonSchema))return new ps(e,r||null,new At(Pr.fromString(n.referencePath)))}}ps._jsonSchemaVersion="firestore/documentReference/1.0",ps._jsonSchema={type:Ns("string",ps._jsonSchemaVersion),referencePath:Ns("string")};class Pg extends gb{constructor(e,n,r){super(e,n,vO(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ps(this.firestore,null,new At(e))}withConverter(e){return new Pg(this.firestore,e,this._path)}}function WQ(t,e,...n){if(t=go(t),ahe("collection","path",e),t instanceof fB){const r=Pr.fromString(e,...n);return OJ(r),new Pg(t,null,r)}{if(!(t instanceof ps||t instanceof Pg))throw new xt(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pr.fromString(e,...n));return OJ(r),new Pg(t.firestore,null,r)}}function Wy(t,e,...n){if(t=go(t),arguments.length===1&&(e=CU.newId()),ahe("doc","path",e),t instanceof fB){const r=Pr.fromString(e,...n);return NJ(r),new ps(t,null,new At(r))}{if(!(t instanceof ps||t instanceof Pg))throw new xt(We.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pr.fromString(e,...n));return NJ(r),new ps(t.firestore,t instanceof Pg?t.converter:null,new At(r))}}const HQ="AsyncQueue";class qQ{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qde(this,"async_queue_retry"),this._c=()=>{const r=kM();r&&at(HQ,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=kM();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=kM();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Td;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!d0(e))throw e;at(HQ,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ds("INTERNAL UNHANDLED ERROR: ",KQ(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=sB.createAndSchedule(this,e,n,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&Ft(47125,{Pc:KQ(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function KQ(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class vv extends fB{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new qQ,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qQ(e),this._firestoreClient=void 0,await e}}}function vDe(t,e,n){n||(n=I4);const r=sO(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(N1(s,e))return i;throw new xt(We.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new xt(We.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ide)throw new xt(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&pv(e.host)&&yU(e.host),r.initialize({options:e,instanceIdentifier:n})}function pB(t){if(t._terminated)throw new xt(We.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||_De(t),t._firestoreClient}function _De(t){const e=t._freezeSettings(),n=(function(i,s,o,a){return new Y5e(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,ffe(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new dDe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(t._componentsProvider))}class nu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nu(ys.fromBase64String(e))}catch(n){throw new xt(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new nu(ys.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:nu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pI(e,nu._jsonSchema))return nu.fromBase64String(e.bytes)}}nu._jsonSchemaVersion="firestore/bytes/1.0",nu._jsonSchema={type:Ns("string",nu._jsonSchemaVersion),bytes:Ns("string")};class CO{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xt(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ji(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class RO{constructor(e){this._methodName=e}}class kd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xt(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xt(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Rn(this._lat,e._lat)||Rn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kd._jsonSchemaVersion}}static fromJSON(e){if(pI(e,kd._jsonSchema))return new kd(e.latitude,e.longitude)}}kd._jsonSchemaVersion="firestore/geoPoint/1.0",kd._jsonSchema={type:Ns("string",kd._jsonSchemaVersion),latitude:Ns("number"),longitude:Ns("number")};class Ad{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ad._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pI(e,Ad._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ad(e.vectorValues);throw new xt(We.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ad._jsonSchemaVersion="firestore/vectorValue/1.0",Ad._jsonSchema={type:Ns("string",Ad._jsonSchemaVersion),vectorValues:Ns("object")};const xDe=/^__.*__$/;class wDe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Np(e,this.data,this.fieldMask,n,this.fieldTransforms):new db(e,this.data,n,this.fieldTransforms)}}class pfe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Np(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function mfe(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ft(40011,{Ac:t})}}class mB{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mB({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return G4(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mfe(this.Ac)&&xDe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class bDe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kO(e)}Cc(e,n,r,i=!1){return new mB({Ac:e,methodName:n,Dc:r,path:ji.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function MO(t){const e=t._freezeSettings(),n=kO(t._databaseId);return new bDe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gfe(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);yB("Data must be an object, but it was:",o,r);const a=yfe(r,o);let l,c;if(s.merge)l=new bl(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const f=a9(e,h,n);if(!o.contains(f))throw new xt(We.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);_fe(u,f)||u.push(f)}l=new bl(u),c=o.fieldTransforms.filter((h=>l.covers(h.field)))}else l=null,c=o.fieldTransforms;return new wDe(new ca(a),l,c)}class NO extends RO{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof NO}}class gB extends RO{_toFieldTransform(e){return new tde(e.path,new _2)}isEqual(e){return e instanceof gB}}function EDe(t,e,n,r){const i=t.Cc(1,e,n);yB("Data must be an object, but it was:",i,r);const s=[],o=ca.empty();f0(r,((l,c)=>{const u=vB(e,l,n);c=go(c);const h=i.yc(u);if(c instanceof NO)s.push(u);else{const f=bI(c,h);f!=null&&(s.push(u),o.set(u,f))}}));const a=new bl(s);return new pfe(o,a,i.fieldTransforms)}function SDe(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[a9(e,r,n)],l=[i];if(s.length%2!=0)throw new xt(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(a9(e,s[f])),l.push(s[f+1]);const c=[],u=ca.empty();for(let f=a.length-1;f>=0;--f)if(!_fe(c,a[f])){const g=a[f];let y=l[f];y=go(y);const _=o.yc(g);if(y instanceof NO)c.push(g);else{const b=bI(y,_);b!=null&&(c.push(g),u.set(g,b))}}const h=new bl(c);return new pfe(u,h,o.fieldTransforms)}function TDe(t,e,n,r=!1){return bI(n,t.Cc(r?4:3,e))}function bI(t,e){if(vfe(t=go(t)))return yB("Unsupported field value:",e,t),yfe(t,e);if(t instanceof RO)return(function(r,i){if(!mfe(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let o=0;for(const a of r){let l=bI(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=go(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dOe(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ur.fromDate(r);return{timestampValue:b2(i.serializer,s)}}if(r instanceof Ur){const s=new Ur(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:b2(i.serializer,s)}}if(r instanceof kd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nu)return{bytesValue:lde(i.serializer,r._byteString)};if(r instanceof ps){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:qU(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ad)return(function(o,a){return{mapValue:{fields:{[$U]:{stringValue:FU},[m2]:{arrayValue:{values:o.toArray().map((c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return GU(a.serializer,c)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${uO(r)}`)})(t,e)}function yfe(t,e){const n={};return The(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):f0(t,((r,i)=>{const s=bI(i,e.mc(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function vfe(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ur||t instanceof kd||t instanceof nu||t instanceof ps||t instanceof RO||t instanceof Ad)}function yB(t,e,n){if(!vfe(n)||!lhe(n)){const r=uO(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function a9(t,e,n){if((e=go(e))instanceof CO)return e._internalPath;if(typeof e=="string")return vB(t,e);throw G4("Field path arguments must be of type string or ",t,!1,void 0,n)}const kDe=new RegExp("[~\\*/\\[\\]]");function vB(t,e,n){if(e.search(kDe)>=0)throw G4(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new CO(...e.split("."))._internalPath}catch{throw G4(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function G4(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new xt(We.INVALID_ARGUMENT,a+t+l)}function _fe(t,e){return t.some((n=>n.isEqual(e)))}class xfe{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ps(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ADe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_B("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ADe extends xfe{data(){return super.data()}}function _B(t,e){return typeof e=="string"?vB(t,e):e instanceof CO?e._internalPath:e._delegate._internalPath}function IDe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xt(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xB{}class PDe extends xB{}function CDe(t,e,...n){let r=[];e instanceof xB&&r.push(e),r=r.concat(n),(function(s){const o=s.filter((l=>l instanceof wB)).length,a=s.filter((l=>l instanceof OO)).length;if(o>1||o>0&&a>0)throw new xt(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class OO extends PDe{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new OO(e,n,r)}_apply(e){const n=this._parse(e);return wfe(e._query,n),new gb(e.firestore,e.converter,H8(e._query,n))}_parse(e){const n=MO(e.firestore);return(function(s,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new xt(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){XQ(h,u);const y=[];for(const _ of h)y.push(YQ(l,s,_));f={arrayValue:{values:y}}}else f=YQ(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||XQ(h,u),f=TDe(a,o,h,u==="in"||u==="not-in");return rr.create(c,u,f)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function RDe(t,e,n){const r=e,i=_B("where",t);return OO._create(i,r,n)}class wB extends xB{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wB(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)wfe(o,l),o=H8(o,l)})(e._query,n),new gb(e.firestore,e.converter,H8(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function YQ(t,e,n){if(typeof(n=go(n))=="string"){if(n==="")throw new xt(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Uhe(e)&&n.indexOf("/")!==-1)throw new xt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pr.fromString(n));if(!At.isDocumentKey(r))throw new xt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qk(t,new At(r))}if(n instanceof ps)return qk(t,n._key);throw new xt(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uO(n)}.`)}function XQ(t,e){if(!Array.isArray(t)||t.length===0)throw new xt(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wfe(t,e){const n=(function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new xt(We.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xt(We.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class MDe{convertValue(e,n="none"){switch(Gg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ei(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ft(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return f0(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){const n=e.fields?.[m2].arrayValue?.values?.map((r=>Ei(r.doubleValue)));return new Ad(n)}convertGeoPoint(e){return new kd(Ei(e.latitude),Ei(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gO(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wk(e));default:return null}}convertTimestamp(e){const n=Ep(e);return new Ur(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pr.fromString(e);tn(vde(r),9688,{name:e});const i=new j1(r.get(1),r.get(3)),s=new At(r.popFirst(5));return i.isEqual(n)||ds(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function bfe(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class wS{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class l1 extends xfe{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new AM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_B("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xt(We.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=l1._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}l1._jsonSchemaVersion="firestore/documentSnapshot/1.0",l1._jsonSchema={type:Ns("string",l1._jsonSchemaVersion),bundleSource:Ns("string","DocumentSnapshot"),bundleName:Ns("string"),bundle:Ns("string")};class AM extends l1{data(e={}){return super.data(e)}}class lw{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new wS(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new AM(this._firestore,this._userDataWriter,r.key,r,new wS(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xt(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new AM(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wS(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>s||a.type!==3)).map((a=>{const l=new AM(i._firestore,i._userDataWriter,a.doc.key,a.doc,new wS(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:NDe(a.type),doc:l,oldIndex:c,newIndex:u}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xt(We.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=lw._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=CU.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NDe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ft(61501,{type:t})}}function ODe(t){t=jd(t,ps);const e=jd(t.firestore,vv);return mDe(pB(e),t._key).then((n=>FDe(e,t,n)))}lw._jsonSchemaVersion="firestore/querySnapshot/1.0",lw._jsonSchema={type:Ns("string",lw._jsonSchemaVersion),bundleSource:Ns("string","QuerySnapshot"),bundleName:Ns("string"),bundle:Ns("string")};class Efe extends MDe{constructor(e){super(),this.firestore=e}convertBytes(e){return new nu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ps(this.firestore,null,n)}}function LDe(t){t=jd(t,gb);const e=jd(t.firestore,vv),n=pB(e),r=new Efe(e);return IDe(t._query),gDe(n,t._query).then((i=>new lw(e,r,t,i)))}function Oj(t,e,n){t=jd(t,ps);const r=jd(t.firestore,vv),i=bfe(t.converter,e,n);return LO(r,[gfe(MO(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,da.none())])}function DDe(t,e,n,...r){t=jd(t,ps);const i=jd(t.firestore,vv),s=MO(i);let o;return o=typeof(e=go(e))=="string"||e instanceof CO?SDe(s,"updateDoc",t._key,e,n,r):EDe(s,"updateDoc",t._key,e),LO(i,[o.toMutation(t._key,da.exists(!0))])}function jDe(t){return LO(jd(t.firestore,vv),[new bO(t._key,da.none())])}function $De(t,e){const n=jd(t.firestore,vv),r=Wy(t),i=bfe(t.converter,e);return LO(n,[gfe(MO(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,da.exists(!1))]).then((()=>r))}function LO(t,e){return(function(r,i){const s=new Td;return r.asyncQueue.enqueueAndForget((async()=>XLe(await pDe(r),i,s))),s.promise})(pB(t),e)}function FDe(t,e,n){const r=n.docs.get(e._key),i=new Efe(t);return new l1(t,i,e._key,r,new wS(n.hasPendingWrites,n.fromCache),e.converter)}class VDe{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=BDe(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function zDe(t){return new VDe(t)}class GDe{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Zk.provider,this._offlineComponentProvider={build:n=>new cfe(n,e?.cacheSizeBytes,this.forceOwnership)}}}class UDe{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Zk.provider,this._offlineComponentProvider={build:n=>new hDe(n,e?.cacheSizeBytes)}}}function BDe(t){return new GDe(t?.forceOwnership)}function WDe(){return new UDe}function Lj(){return new gB("serverTimestamp")}(function(e,n=!0){(function(i){hb=i})(mv),O1(new Vg("firestore",((r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new vv(new c5e(r.getProvider("auth-internal")),new d5e(o,r.getProvider("app-check-internal")),(function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new xt(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new j1(c.options.projectId,u)})(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),Ed(PJ,CJ,e),Ed(PJ,CJ,"esm2020")})();const Sfe="firebasestorage.googleapis.com",HDe="storageBucket",qDe=120*1e3,KDe=600*1e3;class Zd extends Xd{constructor(e,n,r=0){super(Dj(e),`Firebase Storage: ${n} (${Dj(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zd.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Dj(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fd;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fd||(Fd={}));function Dj(t){return"storage/"+t}function YDe(){const t="An unknown error occurred, please check the error payload for server response.";return new Zd(Fd.UNKNOWN,t)}function XDe(){return new Zd(Fd.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ZDe(){return new Zd(Fd.CANCELED,"User canceled the upload/download.")}function JDe(t){return new Zd(Fd.INVALID_URL,"Invalid URL '"+t+"'.")}function QDe(t){return new Zd(Fd.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function ZQ(t){return new Zd(Fd.INVALID_ARGUMENT,t)}function Tfe(){return new Zd(Fd.APP_DELETED,"The Firebase app was deleted.")}function e6e(t){return new Zd(Fd.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class ch{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ch.makeFromUrl(e,n)}catch{return new ch(e,"")}if(r.path==="")return r;throw QDe(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${u}/b/${i}/o${f}`,"i"),y={bucket:1,path:3},_=n===Sfe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",T=new RegExp(`^https?://${_}/${i}/${b}`,"i"),I=[{regex:a,indices:l,postModify:s},{regex:g,indices:y,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<I.length;P++){const M=I[P],V=M.regex.exec(e);if(V){const C=V[M.indices.bucket];let N=V[M.indices.path];N||(N=""),r=new ch(C,N),M.postModify(r);break}}if(r==null)throw JDe(e);return r}}class t6e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function n6e(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...b){c||(c=!0,e.apply(null,b))}function h(b){i=setTimeout(()=>{i=null,t(g,l())},b)}function f(){s&&clearTimeout(s)}function g(b,...T){if(c){f();return}if(b){f(),u.call(null,b,...T);return}if(l()||o){f(),u.call(null,b,...T);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,h(I)}let y=!1;function _(b){y||(y=!0,f(),!c&&(i!==null?(b||(a=2),clearTimeout(i),h(0)):b||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function r6e(t){t(!1)}function i6e(t){return t!==void 0}function JQ(t,e,n,r){if(r<e)throw ZQ(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ZQ(`Invalid value for '${t}'. Expected ${n} or less.`)}function s6e(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var U4;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(U4||(U4={}));function o6e(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}class a6e{constructor(e,n,r,i,s,o,a,l,c,u,h,f=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,_)=>{this.resolve_=y,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new GC(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===U4.NO_ERROR,l=s.getStatus();if(!a||o6e(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===U4.ABORT;r(!1,new GC(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new GC(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());i6e(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=YDe();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?Tfe():ZDe();o(l)}else{const l=XDe();o(l)}};this.canceled_?n(!1,new GC(!1,null,!0)):this.backoffId_=n6e(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&r6e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class GC{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function l6e(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function c6e(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function u6e(t,e){e&&(t["X-Firebase-GMPID"]=e)}function h6e(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function d6e(t,e,n,r,i,s,o=!0,a=!1){const l=s6e(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return u6e(u,e),l6e(u,n),c6e(u,s),h6e(u,r),new a6e(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}function f6e(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function p6e(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class B4{constructor(e,n){this._service=e,n instanceof ch?this._location=n:this._location=ch.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new B4(e,n)}get root(){const e=new ch(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return p6e(this._location.path)}get storage(){return this._service}get parent(){const e=f6e(this._location.path);if(e===null)return null;const n=new ch(this._location.bucket,e);return new B4(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw e6e(e)}}function QQ(t,e){const n=e?.[HDe];return n==null?null:ch.makeFromBucketSpec(n,t)}function m6e(t,e,n,r={}){t.host=`${e}:${n}`;const i=pv(e);i&&(yU(`https://${t.host}/b`),oue("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:DMe(s,t.app.options.projectId))}class g6e{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=Sfe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qDe,this._maxUploadRetryTime=KDe,this._requests=new Set,i!=null?this._bucket=ch.makeFromBucketSpec(i,this._host):this._bucket=QQ(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ch.makeFromBucketSpec(this._url,e):this._bucket=QQ(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JQ("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JQ("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(_l(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new B4(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new t6e(Tfe());{const o=d6e(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const eee="@firebase/storage",tee="0.14.0";const kfe="storage";function y6e(t=pue(),e){t=go(t);const r=sO(t,kfe).getImmediate({identifier:e}),i=OMe("storage");return i&&v6e(r,...i),r}function v6e(t,e,n,r={}){m6e(t,e,n,r)}function _6e(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new g6e(n,r,i,e,mv)}function x6e(){O1(new Vg(kfe,_6e,"PUBLIC").setMultipleInstances(!0)),Ed(eee,tee,""),Ed(eee,tee,"esm2020")}x6e();const w6e={apiKey:"AIzaSyDiV9VX6oQExwnv6Zs5qBvuMkK-BW-tsio",authDomain:"detect-personal.firebaseapp.com",projectId:"detect-personal",storageBucket:"detect-personal.firebasestorage.app",messagingSenderId:"640587689726",appId:"1:640587689726:web:2ae2eb916c1ade465ebfaf"},bB=fue(w6e),qf=r5e(bB),cg=vDe(bB,{localCache:zDe({tabManager:WDe()})});y6e(bB);const b6e={};function E6e(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const Jk=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return Jk(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Jk(r)(n)}}}},S6e=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,T)=>({...T,...b}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...b)},r,i);const u=Jk(s.serialize),h=()=>{const b=s.partialize({...r()});let T;const A=u({state:b,version:s.version}).then(I=>c.setItem(s.name,I)).catch(I=>{T=I});if(T)throw T;return A},f=i.setState;i.setState=(b,T)=>{f(b,T),h()};const g=t((...b)=>{n(...b),h()},r,i);let y;const _=()=>{var b;if(!c)return;o=!1,a.forEach(A=>A(r()));const T=((b=s.onRehydrateStorage)==null?void 0:b.call(s,r()))||void 0;return Jk(c.getItem.bind(c))(s.name).then(A=>{if(A)return s.deserialize(A)}).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==s.version){if(s.migrate)return s.migrate(A.state,A.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return A.state}).then(A=>{var I;return y=s.merge(A,(I=r())!=null?I:g),n(y,!0),h()}).then(()=>{T?.(y,void 0),o=!0,l.forEach(A=>A(y))}).catch(A=>{T?.(void 0,A)})};return i.persist={setOptions:b=>{s={...s,...b},b.getStorage&&(c=b.getStorage())},clearStorage:()=>{c?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:b=>(a.add(b),()=>{a.delete(b)}),onFinishHydration:b=>(l.add(b),()=>{l.delete(b)})},_(),y||g},T6e=(t,e)=>(n,r,i)=>{let s={storage:E6e(()=>localStorage),partialize:_=>_,version:0,merge:(_,b)=>({...b,..._}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(..._)},r,i);const u=()=>{const _=s.partialize({...r()});return c.setItem(s.name,{state:_,version:s.version})},h=i.setState;i.setState=(_,b)=>{h(_,b),u()};const f=t((..._)=>{n(..._),u()},r,i);i.getInitialState=()=>f;let g;const y=()=>{var _,b;if(!c)return;o=!1,a.forEach(A=>{var I;return A((I=r())!=null?I:f)});const T=((b=s.onRehydrateStorage)==null?void 0:b.call(s,(_=r())!=null?_:f))||void 0;return Jk(c.getItem.bind(c))(s.name).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==s.version){if(s.migrate)return[!0,s.migrate(A.state,A.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,A.state];return[!1,void 0]}).then(A=>{var I;const[P,M]=A;if(g=s.merge(M,(I=r())!=null?I:f),n(g,!0),P)return u()}).then(()=>{T?.(g,void 0),g=r(),o=!0,l.forEach(A=>A(g))}).catch(A=>{T?.(void 0,A)})};return i.persist={setOptions:_=>{s={...s,..._},_.storage&&(c=_.storage)},clearStorage:()=>{c?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:_=>(a.add(_),()=>{a.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},s.skipHydration||y(),g||f},k6e=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((b6e?"commercial":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),S6e(t,e)):T6e(t,e),kh=k6e,an=vo()(kh(t=>({defaultBackground:"CartoDB (licht)",showScaleBar:!0,gpsAutoStart:!1,showAccuracyCircle:!0,hapticFeedback:!0,vondstenLocalOnly:!0,showVondstButton:!1,showRouteRecordButton:!1,showLocalVondsten:!0,showCustomPointLayers:!0,fontScale:100,layerPanelFontScale:100,presetPanelFontScale:100,menuFontScale:100,weatherFontScale:100,voiceFeedbackEnabled:!1,showStepCounter:!1,showFontSliders:!1,showWeatherButton:!1,hideWelcomeModal:!1,showMeasureTool:!0,showDrawTool:!0,showPrintTool:!0,setDefaultBackground:e=>t({defaultBackground:e}),setShowScaleBar:e=>t({showScaleBar:e}),setGpsAutoStart:e=>t({gpsAutoStart:e}),setShowAccuracyCircle:e=>t({showAccuracyCircle:e}),setHapticFeedback:e=>t({hapticFeedback:e}),setVondstenLocalOnly:e=>t({vondstenLocalOnly:e}),setShowVondstButton:e=>t({showVondstButton:e}),setShowRouteRecordButton:e=>t({showRouteRecordButton:e}),setShowLocalVondsten:e=>t({showLocalVondsten:e}),setShowCustomPointLayers:e=>t({showCustomPointLayers:e}),setFontScale:e=>t({fontScale:e}),setLayerPanelFontScale:e=>t({layerPanelFontScale:e}),setPresetPanelFontScale:e=>t({presetPanelFontScale:e}),setMenuFontScale:e=>t({menuFontScale:e}),setWeatherFontScale:e=>t({weatherFontScale:e}),setVoiceFeedbackEnabled:e=>t({voiceFeedbackEnabled:e}),setShowStepCounter:e=>t({showStepCounter:e}),setShowFontSliders:e=>t({showFontSliders:e}),setShowWeatherButton:e=>t({showWeatherButton:e}),setHideWelcomeModal:e=>t({hideWelcomeModal:e}),setShowMeasureTool:e=>t({showMeasureTool:e}),setShowDrawTool:e=>t({showDrawTool:e}),setShowPrintTool:e=>t({showPrintTool:e})}),{name:"detectorapp-settings",version:2,migrate:(t,e)=>e<2?{...t,showScaleBar:!0}:t})),DO=vo()(cb((t,e)=>({user:null,accessToken:null,loading:!1,error:null,initialized:!1,setUser:n=>{t(r=>{r.user=n,r.loading=!1})},setLoading:n=>{t(r=>{r.loading=n})},setError:n=>{t(r=>{r.error=n})},setAccessToken:n=>{t(r=>{r.accessToken=n})},signInWithGoogle:async()=>{t(n=>{n.loading=!0,n.error=null});try{const n=new eh;window.location.hostname==="localhost"?await xJ(qf,n):await yNe(qf,n)}catch(n){console.error("Google sign-in error:",n),t(r=>{r.error=n.message,r.loading=!1})}},connectGoogleFit:async()=>{t(n=>{n.loading=!0,n.error=null});try{const n=new eh;n.addScope("https://www.googleapis.com/auth/fitness.activity.read");const r=await xJ(qf,n),i=eh.credentialFromResult(r);return i?.accessToken?(t(s=>{s.accessToken=i.accessToken||null,s.loading=!1}),console.log(" Google Fit gekoppeld"),!0):(t(s=>{s.loading=!1}),!1)}catch(n){return console.error("Google Fit connect error:",n),t(r=>{r.error=n.message,r.loading=!1}),!1}},logout:async()=>{t(n=>{n.loading=!0});try{await Fue(qf),t(n=>{n.accessToken=null})}catch(n){console.error("Logout error:",n),t(r=>{r.error=n.message,r.loading=!1})}},initAuth:()=>{e().initialized||(t(n=>{n.initialized=!0}),_Ne(qf).then(n=>{n?.user&&console.log(" Ingelogd via redirect")}).catch(n=>{console.error("Redirect result error:",n),t(r=>{r.error=n.message})}),$ue(qf,n=>{t(r=>{r.user=n,r.loading=!1}),n&&an.getState().setVondstenLocalOnly(!1)}))}})));vo()(cb((t,e)=>({vondsten:[],loading:!1,error:null,loadVondsten:async n=>{t(r=>{r.loading=!0});try{const r=CDe(WQ(cg,"vondsten"),RDe("userId","==",n)),s=(await LDe(r)).docs.map(o=>({id:o.id,...o.data()}));t(o=>{o.vondsten=s,o.loading=!1})}catch(r){t(i=>{i.error=r.message,i.loading=!1})}},addVondst:async n=>{const r=new Date().toISOString(),i={...n,createdAt:r,updatedAt:r},s=await $De(WQ(cg,"vondsten"),i);return t(o=>{o.vondsten.push({...i,id:s.id})}),s.id},updateVondst:async(n,r)=>{const i=Wy(cg,"vondsten",n);await DDe(i,{...r,updatedAt:new Date().toISOString()}),t(s=>{const o=s.vondsten.findIndex(a=>a.id===n);o!==-1&&(s.vondsten[o]={...s.vondsten[o],...r})})},deleteVondst:async n=>{await jDe(Wy(cg,"vondsten",n)),t(r=>{r.vondsten=r.vondsten.filter(i=>i.id!==n)})}})));const UC=[{id:"detectie",name:"Detectie",icon:"Compass",layers:["AMK Monumenten","Gewaspercelen","Geomorfologie","AHN4 Hoogtekaart Kleur","Kadastrale Grenzen"],baseLayer:"CartoDB (licht)",layerOpacities:{"AMK Monumenten":.5,Gewaspercelen:.25,Geomorfologie:.25,"AHN4 Hoogtekaart Kleur":.25},isBuiltIn:!1},{id:"steentijd",name:"Steentijd",icon:"Mountain",layers:["Hunebedden","Grafheuvels","Terpen","FAMKE Steentijd","AMK Steentijd","AHN4 Multi-Hillshade NL","Labels Overlay"],baseLayer:"Luchtfoto",isBuiltIn:!1},{id:"romeins-midvroeg",name:"Romeins - Mid vroeg",icon:"Layers",layers:["Romeinse wegen (regio)","Romeinse Forten","AMK Romeins","AMK Vroege ME","Gewaspercelen","Kadastrale Grenzen"],isBuiltIn:!1},{id:"midlaat-nieuwetijd",name:"Mid laat - Nieuwe tijd",icon:"Grid",layers:["AMK Late ME","Kastelen","Essen","Rijksmonumenten","Gewaspercelen","Kadastrale Grenzen","Oude Kernen"],isBuiltIn:!1},{id:"woii-militair",name:"WOII & Militair",icon:"Target",layers:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten"],isBuiltIn:!1},{id:"analyse",name:"Terrein Analyse",icon:"Search",layers:["IKAW","Geomorfologie","Bodemkaart","AHN4 Multi-Hillshade NL","AHN4 Hoogtekaart Kleur"],isBuiltIn:!1}],nee=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten","Kastelen","IKAW","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],Afe=vo()(kh((t,e)=>({presets:[...UC],customDefaults:null,applyPreset:n=>{const r=e().presets.find(s=>s.id===n);if(!r)return;const i=Ws.getState();nee.forEach(s=>i.setLayerVisibility(s,!1)),r.layers.forEach(s=>i.setLayerVisibility(s,!0)),r.layerOpacities&&Object.entries(r.layerOpacities).forEach(([s,o])=>{i.setLayerOpacity(s,o)}),r.baseLayer&&["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(o=>{i.setLayerVisibility(o,o===r.baseLayer)}),console.log(` Preset toegepast: ${r.name}${r.baseLayer?` (${r.baseLayer})`:""}`)},createPreset:(n,r)=>{const i=Ws.getState(),s=Object.entries(i.visible).filter(([a,l])=>l&&nee.includes(a)).map(([a])=>a),o={id:`custom-${Date.now()}`,name:n,icon:r,layers:s,isBuiltIn:!1};t(a=>({presets:[...a.presets,o]})),console.log(` Preset aangemaakt: ${n} met ${s.length} lagen`)},updatePreset:(n,r)=>{t(i=>({presets:i.presets.map(s=>s.id===n?{...s,...r}:s)}))},deletePreset:n=>{t(r=>({presets:r.presets.filter(i=>i.id!==n||i.isBuiltIn)}))},saveAsDefaults:()=>{const n=e().presets;t({customDefaults:[...n]}),console.log(" Presets opgeslagen als standaard")},resetToDefaults:()=>{const{customDefaults:n}=e();n?(t({presets:[...n]}),console.log(" Presets hersteld naar eigen standaard")):(t({presets:[...UC]}),console.log(" Presets hersteld naar originele standaard"))},resetToBuiltIn:()=>{t({presets:[...UC],customDefaults:null}),console.log(" Presets gereset naar originele instellingen")}}),{name:"detectorapp-presets",version:13,migrate:(t,e)=>e<13?{presets:[...UC]}:t})),ree=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],EI=vo()(kh((t,e)=>({layers:[],addLayer:n=>{const r=crypto.randomUUID(),i=e().layers.length,s=ree[i%ree.length];return t(o=>({layers:[...o.layers,{...n,id:r,createdAt:new Date().toISOString(),color:n.color||s,visible:n.visible??!0,opacity:n.opacity??1}]})),r},removeLayer:n=>t(r=>({layers:r.layers.filter(i=>i.id!==n)})),updateLayer:(n,r)=>t(i=>({layers:i.layers.map(s=>s.id===n?{...s,...r}:s)})),toggleVisibility:n=>t(r=>({layers:r.layers.map(i=>i.id===n?{...i,visible:!i.visible}:i)})),setOpacity:(n,r)=>t(i=>({layers:i.layers.map(s=>s.id===n?{...s,opacity:r}:s)})),setColor:(n,r)=>t(i=>({layers:i.layers.map(s=>s.id===n?{...s,color:r}:s)})),clearAll:()=>t({layers:[]})}),{name:"detectorapp-custom-layers",version:1})),A6e=["CartoDB (licht)","OpenStreetMap","Luchtfoto","Labels Overlay","Mijn Vondsten"],EB=vo()(kh((t,e)=>({tier:"free",unlockedRegions:["nl"],devMode:!0,setTier:n=>t({tier:n}),unlockRegion:n=>t(r=>({unlockedRegions:r.unlockedRegions.includes(n)?r.unlockedRegions:[...r.unlockedRegions,n]})),lockRegion:n=>t(r=>({unlockedRegions:r.unlockedRegions.filter(i=>i!==n)})),setDevMode:n=>t({devMode:n}),isRegionUnlocked:n=>{const r=e();return r.devMode||r.tier==="pro"?!0:r.unlockedRegions.includes(n)},isLayerUnlocked:(n,r="free",i=["nl"])=>{const s=e();return s.devMode||A6e.includes(n)||r==="free"||s.tier==="pro"?!0:s.tier==="premium"?i.some(o=>s.unlockedRegions.includes(o)):!1},canAccessPremiumFeatures:()=>{const n=e();return n.devMode||n.tier!=="free"}}),{name:"detectorapp-subscription",version:1}));vo()(kh(t=>({parkingLocation:null,showParkingButton:!0,setParkingLocation:e=>t({parkingLocation:e}),clearParkingLocation:()=>t({parkingLocation:null}),setShowParkingButton:e=>t({showParkingButton:e})}),{name:"detectorapp-parking"}));function iee(){return new Date().toISOString().split("T")[0]}vo()(kh((t,e)=>({steps:0,distance:0,startTime:null,isActive:!1,todaySteps:0,todayDate:iee(),stepLength:.75,incrementStep:()=>{const n=e(),r=iee(),i=n.todayDate===r?n.todaySteps+1:1;t({steps:n.steps+1,distance:(n.steps+1)*n.stepLength,todaySteps:i,todayDate:r})},resetSession:()=>{t({steps:0,distance:0,startTime:null})},setActive:n=>{t({isActive:n,startTime:n?Date.now():e().startTime})},setStepLength:n=>{const r=e();t({stepLength:n,distance:r.steps*n})}}),{name:"step-counter-storage",partialize:t=>({todaySteps:t.todaySteps,todayDate:t.todayDate,stepLength:t.stepLength})}));const see={sunAzimuth:315,sunElevation:45,verticalExaggeration:2,colorRamp:"terrain",minElevation:-5,maxElevation:50,showControls:!1};vo()(kh(t=>({...see,setSunAzimuth:e=>t({sunAzimuth:e}),setSunElevation:e=>t({sunElevation:e}),setVerticalExaggeration:e=>t({verticalExaggeration:e}),setColorRamp:e=>t({colorRamp:e}),setMinElevation:e=>t({minElevation:e}),setMaxElevation:e=>t({maxElevation:e}),setShowControls:e=>t({showControls:e}),resetToDefaults:()=>t(see)}),{name:"detectorapp-hillshade"}));const I6e=()=>Math.random().toString(36).substring(2,9),P6e={0:"Helder",1:"Overwegend helder",2:"Halfbewolkt",3:"Bewolkt",45:"Mist",48:"Rijp/mist",51:"Lichte motregen",53:"Motregen",55:"Dichte motregen",56:"Lichte ijzel",57:"Ijzel",61:"Lichte regen",63:"Regen",65:"Hevige regen",66:"Lichte ijsregen",67:"IJsregen",71:"Lichte sneeuw",73:"Sneeuw",75:"Hevige sneeuw",77:"Korrelsneeuw",80:"Lichte buien",81:"Buien",82:"Hevige buien",85:"Lichte sneeuwbuien",86:"Sneeuwbuien",95:"Onweer",96:"Onweer met hagel",99:"Zwaar onweer met hagel"};function C6e(t){const e=["N","NNO","NO","ONO","O","OZO","ZO","ZZO","Z","ZZW","ZW","WZW","W","WNW","NW","NNW"],n=Math.round(t/22.5)%16;return e[n]}const ST=vo()(kh((t,e)=>({weatherData:null,isLoading:!1,error:null,savedLocations:[{id:"current",name:"Huidige locatie",lat:0,lon:0,isCurrentLocation:!0}],selectedLocationId:"current",weatherPanelOpen:!1,showBuienradar:!1,setWeatherData:n=>t({weatherData:n}),setIsLoading:n=>t({isLoading:n}),setError:n=>t({error:n}),addLocation:n=>t(r=>({savedLocations:[...r.savedLocations,{...n,id:I6e()}]})),removeLocation:n=>t(r=>({savedLocations:r.savedLocations.filter(i=>i.id!==n),selectedLocationId:r.selectedLocationId===n?"current":r.selectedLocationId})),setSelectedLocation:n=>t({selectedLocationId:n}),updateCurrentLocation:(n,r)=>t(i=>({savedLocations:i.savedLocations.map(s=>s.isCurrentLocation?{...s,lat:n,lon:r}:s)})),toggleWeatherPanel:()=>t(n=>({weatherPanelOpen:!n.weatherPanelOpen})),setWeatherPanelOpen:n=>t({weatherPanelOpen:n}),setShowBuienradar:n=>t({showBuienradar:n}),fetchWeather:async(n,r)=>{const{setIsLoading:i,setError:s,setWeatherData:o,savedLocations:a,selectedLocationId:l}=e();i(!0),s(null);try{const c=new URL("https://api.open-meteo.com/v1/forecast");c.searchParams.set("latitude",n.toString()),c.searchParams.set("longitude",r.toString()),c.searchParams.set("current","temperature_2m,relative_humidity_2m,apparent_temperature,precipitation,weather_code,wind_speed_10m,wind_direction_10m,wind_gusts_10m,cloud_cover,is_day,snow_depth"),c.searchParams.set("hourly","temperature_2m,precipitation,precipitation_probability,weather_code,wind_speed_10m,wind_direction_10m,relative_humidity_2m"),c.searchParams.set("daily","weather_code,temperature_2m_max,temperature_2m_min,precipitation_sum,precipitation_probability_max,wind_speed_10m_max,sunrise,sunset"),c.searchParams.set("minutely_15","precipitation"),c.searchParams.set("timezone","Europe/Amsterdam"),c.searchParams.set("forecast_days","7"),c.searchParams.set("past_days","7");const u=await fetch(c.toString());if(!u.ok)throw new Error("Kon weerdata niet ophalen");const h=await u.json();let f=0;const g=h.daily.temperature_2m_min||[],y=new Date().toISOString().split("T")[0],_=h.daily.time.indexOf(y);for(let O=_-1;O>=0&&g[O]<0;O--)f++;const b=a.find(O=>O.id===l)||a[0],T=new Date,A=[],I=[];if(h.minutely_15?.time&&h.minutely_15?.precipitation){const O=new Date(T.getTime()+72e5),L=new Date(T.getTime()+2880*60*1e3);for(let F=0;F<h.minutely_15.time.length;F++){const G=new Date(h.minutely_15.time[F]);G<T||(G<=O&&A.push({time:h.minutely_15.time[F],precipitation:h.minutely_15.precipitation[F]}),G<=L&&I.push({time:h.minutely_15.time[F],precipitation:h.minutely_15.precipitation[F]}))}}const P=T.getHours(),M=T.toISOString().split("T")[0],V=h.hourly.time.map((O,L)=>({time:O,temperature:h.hourly.temperature_2m[L],precipitation:h.hourly.precipitation[L],precipitationProbability:h.hourly.precipitation_probability[L],weatherCode:h.hourly.weather_code[L],windSpeed:h.hourly.wind_speed_10m[L],windDirection:h.hourly.wind_direction_10m[L],humidity:h.hourly.relative_humidity_2m[L]})).filter(O=>new Date(O.time)>=T).slice(0,24),C=h.daily.time.map((O,L)=>({date:O,temperatureMax:h.daily.temperature_2m_max[L],temperatureMin:h.daily.temperature_2m_min[L],precipitationSum:h.daily.precipitation_sum[L],precipitationProbability:h.daily.precipitation_probability_max[L],weatherCode:h.daily.weather_code[L],windSpeedMax:h.daily.wind_speed_10m_max[L],sunrise:h.daily.sunrise[L],sunset:h.daily.sunset[L]})).filter(O=>O.date>=M),N={location:{...b,lat:n,lon:r},current:{temperature:h.current.temperature_2m,apparentTemperature:h.current.apparent_temperature,humidity:h.current.relative_humidity_2m,precipitation:h.current.precipitation,weatherCode:h.current.weather_code,windSpeed:h.current.wind_speed_10m,windDirection:h.current.wind_direction_10m,windGusts:h.current.wind_gusts_10m,cloudCover:h.current.cloud_cover,isDay:h.current.is_day===1,snowDepth:h.current.snow_depth},hourly:V,daily:C,precipitation15min:A,precipitation48h:I,frostDays:f,lastUpdated:Date.now()};try{const O=new URL("https://air-quality-api.open-meteo.com/v1/air-quality");O.searchParams.set("latitude",n.toString()),O.searchParams.set("longitude",r.toString()),O.searchParams.set("current","grass_pollen,birch_pollen,alder_pollen,mugwort_pollen,ragweed_pollen,olive_pollen");const L=await fetch(O.toString());if(L.ok){const F=await L.json();if(F.current){const G=U=>Math.min(5,Math.round(U/20));N.pollen={grass:G(F.current.grass_pollen||0),birch:G(F.current.birch_pollen||0),alder:G(F.current.alder_pollen||0),mugwort:G(F.current.mugwort_pollen||0),ragweed:G(F.current.ragweed_pollen||0),olive:G(F.current.olive_pollen||0)}}}}catch{}o(N)}catch(c){s(c instanceof Error?c.message:"Onbekende fout")}finally{i(!1)}}}),{name:"detectorapp-weather",partialize:t=>({savedLocations:t.savedLocations,selectedLocationId:t.selectedLocationId,showBuienradar:t.showBuienradar})}));function R6e({target:t,viewOptions:e}){const n=Y.useRef(null),r=Y.useRef(null),i=li(o=>o.setMap),s=an(o=>o.showScaleBar);return Y.useEffect(()=>{if(!n.current){const o={center:[5.1214,52.0907],zoom:8,rotation:0,minZoom:3,maxZoom:19,...e},a=new ZRe({target:t,controls:[],view:new md({center:Ni(o.center),zoom:o.zoom,rotation:o.rotation,minZoom:o.minZoom,maxZoom:o.maxZoom})});n.current=a,i(a),window.__olMap=a}return()=>{n.current&&(n.current.setTarget(void 0),i(null),window.__olMap=null)}},[t,e,i]),Y.useEffect(()=>{const o=n.current;o&&(s?r.current||(r.current=new eMe({units:"metric",bar:!1,text:!0,minWidth:80}),o.addControl(r.current)):r.current&&(o.removeControl(r.current),r.current=null))},[s]),n.current}function x(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function tIt(t,e){return function(n,r){e(n,r,t)}}function nIt(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function rIt(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var M6e=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function iIt(t){function e(s){t.error=t.hasError?new M6e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}let ug;const To=globalThis;function _e(t){return typeof ug[t]=="function"?ug[t]=ug[t](To):ug[t]}ug=To.dojoConfig?.has||To.esriConfig?.has?{...To.dojoConfig?.has,...To.esriConfig?.has}:{},_e.add=(t,e,n,r)=>{(r||ug[t]===void 0)&&(ug[t]=e),n&&_e(t)},_e.cache=ug,_e.add("big-integer-warning-enabled",!0),_e.add("esri-deprecation-warnings",!0),_e.add("esri-tests-disable-screenshots",!1),_e.add("esri-tests-use-full-window",!1),_e.add("esri-tests-post-to-influx",!0),_e.add("esri-cim-animations-enable-status","enabled"),_e.add("esri-cim-animations-spotlight",!1),_e.add("esri-cim-animations-freeze-time",!1),(()=>{_e.add("host-webworker",To.WorkerGlobalScope!==void 0&&self instanceof To.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(_e.add("host-browser",t),_e.add("host-node",!(typeof To.process!="object"||!To.process.versions?.node||!To.process.versions.v8)),_e.add("dom",t),_e("host-browser")){const e=navigator,n=e.userAgent,r=e.appVersion,i=parseFloat(r);if(_e.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),_e.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),_e.add("khtml",r.includes("Konqueror")?i:void 0),_e.add("edge",parseFloat(n.split("Edge/")[1])||void 0),_e.add("opr",parseFloat(n.split("OPR/")[1])||void 0),_e.add("webkit",!_e("wp")&&!_e("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),_e.add("chrome",!_e("edge")&&!_e("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),_e.add("android",!_e("wp")&&parseFloat(n.split("Android ")[1])||void 0),_e.add("safari",!r.includes("Safari")||_e("wp")||_e("chrome")||_e("android")||_e("edge")||_e("opr")?void 0:parseFloat(r.split("Version/")[1])),_e.add("mac",r.includes("Macintosh")),!_e("wp")&&/(iPhone|iPod|iPad)/.test(n)){const s=RegExp.$1.replace(/P/,"p"),o=/OS ([\d_]+)/.test(n)?RegExp.$1:"1",a=parseFloat(o.replace(/_/,".").replaceAll("_",""));_e.add(s,a),_e.add("ios",a)}_e("webkit")||(!n.includes("Gecko")||_e("wp")||_e("khtml")||_e("edge")||_e.add("mozilla",i),_e("mozilla")&&_e.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0))}})(),(()=>{if(To.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),n=/iPhone/i.test(t);e&&_e.add("esri-mobile",e),n&&_e.add("esri-iPhone",n),_e.add("esri-geolocation",!!navigator.geolocation)}_e.add("esri-wasm","WebAssembly"in To),_e.add("esri-performance-mode-frames-between-render",20),_e.add("esri-force-performance-mode",!1),_e.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in To,e=To.crossOriginIsolated===!1;return t&&!e}),_e.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),_e.add("esri-atomics","Atomics"in To),_e.add("esri-workers","Worker"in To),_e.add("web-feat:cache","caches"in To),_e.add("esri-workers-arraybuffer-transfer",!_e("safari")||Number(_e("safari"))>=12),_e.add("workers-pool-size",8),_e.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),_e.add("featurelayer-simplify-payload-size-factors",[1,1,4]),_e.add("featurelayer-fast-triangulation-enabled",!0),_e.add("featurelayer-animation-enabled",!0),_e.add("featurelayer-snapshot-enabled",!0),_e.add("featurelayer-snapshot-initial-tolerance",0),_e.add("featurelayer-snapshot-point-min-threshold",8e4),_e.add("featurelayer-snapshot-point-max-threshold",4e5),_e.add("featurelayer-snapshot-multipoint-min-threshold",2e4),_e.add("featurelayer-snapshot-multipoint-max-threshold",1e5),_e.add("featurelayer-snapshot-polygon-min-threshold",2e3),_e.add("featurelayer-snapshot-polygon-max-threshold",2e3),_e.add("featurelayer-snapshot-polyline-min-threshold",2e3),_e.add("featurelayer-snapshot-polyline-max-threshold",2e3),_e.add("featurelayer-snapshot-max-vertex-count",25e4),_e.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!0),_e.add("featurelayer-snapshot-concurrency",4),_e.add("featurelayer-snapshot-coverage",.1),_e.add("featurelayer-query-max-depth",4),_e.add("featurelayer-query-pausing-enabled",!1),_e.add("featurelayer-query-tile-concurrency",4),_e.add("featurelayer-query-tile-max-features",6e5),_e.add("featurelayer-advanced-symbols",!1),_e.add("featurelayer-pbf",!0),_e.add("featurelayer-pbf-statistics",!1),_e.add("feature-layers-workers",!0),_e.add("feature-polyline-generalization-factor",1),_e.add("parquetlayer-full-query-feature-count",2e4),_e.add("parquetlayer-hittest-max-feature-count",1),_e.add("parquetlayer-persistence-enabled",!1),_e.add("mapview-transitions-duration",200),_e.add("mapview-essential-goto-duration",200),_e.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),_e.add("mapserver-pbf-version-support",10.81),_e.add("mapservice-popup-identify-max-tolerance",20),_e.add("request-queue-concurrency-hosted",16),_e.add("request-queue-concurrency-non-hosted",4),_e.add("curve-densification-coarse-segments",128),_e.add("curve-densification-max-segments",2e3),_e.add("curve-densification-min-segments",3),_e.add("curve-densification-pixel-deviation",.5),_e.add("view-readyState-waiting-delay",1e3),_e.add("gradient-depth-bias",.01),_e.add("gradient-depth-epsilon",1e-8),_e.add("enable-feature:esri-compress-textures",!0),_e("host-webworker")||_e("host-browser")&&(_e.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),_e.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function sIt(t){}function N6e(t){return()=>t}function oIt(t){return t}var dl;let O6e=(dl=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*dl._m}getInt(){return this._seed=(dl._a*this._seed+dl._c)%dl._m,this._seed}getFloat(){return this.getInt()/(dl._m-1)}getIntRange(e,n){return Math.round(this.getFloatRange(e,n))}getFloatRange(e,n){const r=n-e;return e+this.getInt()/dl._m*r}},dl._m=2147483647,dl._a=48271,dl._c=0,dl);const L6e=1.5,aIt=1/L6e,lIt=.5;function Ife(t){return t}function D6e(t,e=Ife){if(!t||t.length===0)return;let n=t[0],r=e(n);for(let i=1;i<t.length;++i){const s=t[i],o=Number(e(s));o>r&&(r=o,n=s)}return n}function cIt(t,e=Ife){return D6e(t,n=>-e(n))}function uIt(t,e){return e?t.filter((n,r,i)=>i.findIndex(e.bind(null,n))===r):Array.from(new Set(t))}function j6e(t,e,n,r,i,s,o){if(t==null&&r==null)return!0;e=Math.max(0,e),i=Math.max(0,i),n=Math.max(0,n<0?(t?.length??0)+n:n),s=Math.max(0,s<0?(r?.length??0)+s:s);const a=n-e;if(t==null||r==null||a!==s-i)return!1;if(o){for(let l=0;l<a;l++)if(!o(t[e+l],r[i+l]))return!1}else for(let l=0;l<a;l++)if(t[e+l]!==r[i+l])return!1;return!0}function jO(t,e,n){return j6e(t,0,t?.length??0,e,0,e?.length??0,n)}function hIt(){return(t,e)=>{if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}}function oee(t,e,n){let r,i;return n?(r=e.filter(s=>!t.some(o=>n(o,s))),i=t.filter(s=>!e.some(o=>n(o,s)))):(r=e.filter(s=>!t.includes(s)),i=t.filter(s=>!e.includes(s))),{added:r,removed:i}}function dIt(t){return t&&typeof t.length=="number"}function fIt(t,e){const n=t.length;if(n===0)return[];const r=[];for(let i=0;i<n;i+=e)r.push(t.slice(i,i+e));return r}let Pfe=class{constructor(){this.last=0}};const Cfe=new Pfe;function l9(t,e,n,r){r=r||Cfe;const i=Math.max(0,r.last-10);for(let o=i;o<n;++o)if(t[o]===e)return r.last=o,o;const s=Math.min(i,n);for(let o=0;o<s;++o)if(t[o]===e)return r.last=o,o;return-1}function c9(t,e,n,r){const i=t.length,s=l9(t,e,i,r);if(s!==-1)return t[s]=t[i-1],t.pop(),e}const Nu=new Set;function $6e(t,e,n=t.length,r=e.length,i,s){if(r===0||n===0)return n;Nu.clear();for(let a=0;a<r;++a)Nu.add(e[a]);i=i||Cfe;const o=Math.max(0,i.last-10);for(let a=o;a<n;++a)if(Nu.has(t[a])&&(s?.push(t[a]),Nu.delete(t[a]),t[a]=t[n-1],--n,--a,Nu.size===0||n===0))return Nu.clear(),n;for(let a=0;a<o;++a)if(Nu.has(t[a])&&(s?.push(t[a]),Nu.delete(t[a]),t[a]=t[n-1],--n,--a,Nu.size===0||n===0))return Nu.clear(),n;return Nu.clear(),n}function F6e(t,e){let n=0;for(let r=0;r<t.length;++r){const i=t[r];e(i,r)&&(t[n]=i,n++)}return t.length=n,t}function mIt(t,e,n){const r=t.length;if(e>=r)return t.slice();const i=Rfe(n),s=new Set,o=[];for(;o.length<e;){const a=Math.floor(i()*r);s.has(a)||(s.add(a),o.push(t[a]))}return o}function Rfe(t){return t?(aee.seed=t,()=>aee.getFloat()):Math.random}const aee=new O6e;function gIt(t,e){if(!t)return t;const n=Rfe(e);for(let r=t.length-1;r>0;r--){const i=Math.floor(n()*(r+1)),s=t[r];t[r]=t[i],t[i]=s}return t}function Mfe(t,e){const n=t.indexOf(e);return n!==-1?(t.splice(n,1),e):null}function A2(t,e){return t!=null}const yIt=[];function vIt(t){return t instanceof ArrayBuffer}function SB(t){return t?.constructor?.name==="Int8Array"}function Nfe(t){return t?.constructor?.name==="Uint8Array"}function Ofe(t){return t?.constructor?.name==="Uint8ClampedArray"}function TB(t){return t?.constructor?.name==="Int16Array"}function Lfe(t){return t?.constructor?.name==="Uint16Array"}function kB(t){return t?.constructor?.name==="Int32Array"}function Dfe(t){return t?.constructor?.name==="Uint32Array"}function V6e(t){return t?.constructor?.name==="Float16Array"}function $O(t){return t?.constructor?.name==="Float32Array"}function FO(t){return t?.constructor?.name==="Float64Array"}function z6e(t){return"buffer"in t}const jfe=1024;function _It(t){return FO(t)||$O(t)||kB(t)||TB(t)||SB(t)}function xIt(t){return FO(t)||$O(t)}function wIt(t){return FO(t)?179769e303:V6e(t)?65504:$O(t)?3402823e32:Dfe(t)?4294967295:Lfe(t)?65535:Nfe(t)||Ofe(t)?255:kB(t)?2147483647:TB(t)?32767:SB(t)?127:256}const bIt=-32768,EIt=-2147483648;function SIt(t){return t}function G6e(t,e){let n;for(n in t)t.hasOwnProperty(n)&&t[n]===void 0&&delete t[n];return t}function Ze(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=Vfe(t);if(e!=null)return e;if(TT(t))return t.clone();if($fe(t))return t.map(Ze);if(Ffe(t))throw new Error("Trying to clone an unclonable Accessor instance");const n={};for(const r of Object.getOwnPropertyNames(t))n[r]=Ze(t[r]);return n}function u9(t,e){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const n=Vfe(t);if(n!=null)return n;if($fe(t)){let i=!0;const s=t.map(o=>{const a=u9(o,e);return o!=null&&a==null&&(i=!1),a});return i?s:null}if(TT(t))return t.clone(e);if(t instanceof File||t instanceof Blob)return t;if(Ffe(t))return null;const r=new(Object.getPrototypeOf(t)).constructor;for(const i of Object.getOwnPropertyNames(t)){const s=t[i],o=u9(s);if(s!=null&&o==null)return null;r[i]=o}return r}function TT(t){return typeof t.clone=="function"}function $fe(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function Ffe(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function lee(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Vfe(t){if(SB(t)||Nfe(t)||Ofe(t)||TB(t)||Lfe(t)||kB(t)||Dfe(t)||$O(t)||FO(t))return t.slice();if(t instanceof Date)return new Date(t);if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[n,r]of t)e.set(n,Ze(r));return e}if(t instanceof Set){const e=new Set;for(const n of t)e.add(Ze(n));return e}return null}function AB(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof t?.getTime=="function"&&typeof e?.getTime=="function"&&t.getTime()===e.getTime()||!1}function zfe(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&jO(t,e):t instanceof Set?e instanceof Set&&B6e(t,e):t instanceof Map?e instanceof Map&&W6e(t,e):!!lee(t)&&lee(e)&&U6e(t,e))}function U6e(t,e){if(t===null||e===null)return!1;const n=Object.keys(t);if(e===null||Object.keys(e).length!==n.length)return!1;for(const r of n)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function B6e(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function W6e(t,e){if(t.size!==e.size)return!1;for(const[n,r]of t){const i=e.get(n);if(i!==r||i===void 0&&!e.has(n))return!1}return!0}function H6e(t,e,n=!1){return Ufe(t,e,n)}function VO(t,e){if(e!=null)return e[t]||Gfe(t.split("."),!1,e)}function yb(t,e,n){const r=t.split("."),i=r.pop(),s=Gfe(r,!0,n);s&&i&&(s[i]=e)}function cee(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const n=e;if(t.length!==n.length)return!0;for(let r=0;r<t.length;r++)if(cee(t[r],n[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const n in t)if(cee(t[n],e[n]))return!0;return!1}return t!==e}function Gfe(t,e,n){let r=n;for(const i of t){if(r==null)return;if(!(i in r)){if(!e)return;r[i]={}}r=r[i]}return r}function Ufe(t,e,n){return e?Object.keys(e).reduce((r,i)=>{if(i==="__proto__")return r;let s=r[i],o=e[i];return s===o?r:s===void 0?(r[i]=Ze(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[i]=s.slice():r[i]=[s]:r[i]=[],o&&(Array.isArray(o)||(o=[o]),n?o.forEach(a=>{s.includes(a)||s.push(a)}):r[i]=o.slice())):o&&typeof o=="object"?r[i]=Ufe(s,o,n):r.hasOwnProperty(i)&&!e.hasOwnProperty(i)||(r[i]=o),r)},t||{}):t}function TIt(t,e){for(const n of Object.entries(t))if(e===n[1])return n[0]}function zO(t,e){return Object.values(t).includes(e)}const nr={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(H6e(nr,globalThis.esriConfig,!0),delete nr.has),!nr.assetsPath){{const t="4.34";nr.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}nr.defaultAssetsPath=nr.assetsPath}const q6e=/\{([^}]+)\}/g;function uee(t){return t??""}function Bfe(t,e){return e?t.replaceAll(q6e,typeof e=="object"?(n,r)=>uee(VO(r,e)):(n,r)=>uee(e(r))):t}function kIt(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,n=>e?.includes(n)?n:`\\${n}`)}function Wfe(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}let hee;function AIt(t){return hee??=new DOMParser,hee.parseFromString(t||"","text/html").body.innerText||""}function IIt(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function PIt(t,...e){let n=t[0];for(let r=0;r<e.length;++r)n+=e[r]+t[r+1];return n}const dee={info:0,warn:1,error:2,none:3};var cs;let kt=(cs=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,cs._loggers.set(this.module,this);const n=this.module.lastIndexOf(".");n!==-1&&(this._parent=cs.getLogger(this.module.slice(0,n)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,cs._loggers.get(e)||new cs({module:e})}_log(e,n,...r){if(this._matchLevel(e)){if(n!=="always"&&!cs._throttlingDisabled){const i=Y6e(r),s=this._loggedMessages[e].get(i);if(n==="once"&&s!=null||n==="oncePerTick"&&s&&s>=cs._tickCounter)return;this._loggedMessages[e].set(i,cs._tickCounter),cs._scheduleTickCounterIncrement()}for(const i of nr.log.interceptors)if(i(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,n){let r=this;for(;r!=null;){const i=r[e];if(i!=null)return i;r=r.parent}return n}_inheritedWriter(){return this._parentWithMember("writer",K6e)}_matchLevel(e){const n=nr.log.level||"warn";return dee[this._parentWithMember("level",n)]<=dee[e]}static _scheduleTickCounterIncrement(){cs._tickCounterScheduled||(cs._tickCounterScheduled=!0,Promise.resolve().then(()=>{cs._tickCounter++,cs._tickCounterScheduled=!1}))}},cs._loggers=new Map,cs._tickCounter=0,cs._tickCounterScheduled=!1,cs._throttlingDisabled=!1,cs);function K6e(t,e,...n){console[t](`[${e}]`,...n)}function Y6e(...t){return Wfe(JSON.stringify(t,(n,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}function X6e(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(n,r)=>r===""?"$":(VO(r,e)??"").toString())}let Hfe=class{constructor(e,n,r=void 0){this.name=e,this.details=r,this.message=(n&&X6e(n,r))??""}toString(){return"["+this.name+"]: "+this.message}},Xe=class qfe extends Hfe{constructor(e,n,r){super(e,n,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,n)=>{if(n&&typeof n=="object"&&typeof n.toJSON=="function")return n;try{return Ze(n)}catch{return"[object]"}}))}}catch(e){throw kt.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new qfe(e.name,e.message,e.details)}};Xe.prototype.type="error";function W4(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}const Z6e=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,J6e={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function fee(t){const e=t?.match(Z6e);if(!e)return null;const[,n,r,i]=e;if(!n)return null;let s=null,o=null,a=null;const{devext:l,qaext:c,www:u}=J6e;if(r)if(s=n,i)switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=u);else switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function Kfe(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function Yfe(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,n=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):n.test(t)?t=t.replace(n,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function Xfe(t){const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n.buffer}function Q6e(t){const e=new Uint8Array(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}const eje=()=>kt.getLogger("esri.core.urlUtils"),vb=nr.request,pee="esri/config: esriConfig.request.proxyUrl is not set.",Zfe=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Jfe=/^\s*http:/i,tje=/^\s*https:/i,nje=/^\s*file:/i,Qfe=/:\d+$/,rje=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,ije=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),sje=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let cw=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let n=this.uri.match(ije);this.scheme=n[2]||(n[1]?"":null),this.authority=n[4]||(n[3]?"":null),this.path=n[5],this.query=n[7]||(n[6]?"":null),this.fragment=n[9]||(n[8]?"":null),this.authority!=null&&(n=this.authority.match(sje),this.user=n[3]||null,this.password=n[4]||null,this.host=n[6]||n[7],this.port=n[9]||null)}toString(){return this.uri}};const BC={},oje=new cw(nr.applicationUrl);let ua=oje;const aje=lje();let IB=aje;const PB=()=>ua,MIt=()=>IB;function lje(){const t=ua.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${ua.scheme}://${ua.host}${ua.port!=null?`:${ua.port}`:""}`}${e}`}function Ha(t){if(!t)return null;const e={path:null,query:null},n=new cw(t),r=t.indexOf("?");return n.query===null?e.path=t:(e.path=t.slice(0,r),e.query=CB(n.query)),n.fragment&&(e.hash=n.fragment,n.query===null&&(e.path=e.path.slice(0,e.path.length-(n.fragment.length+1)))),e}function CB(t){const e=t.split("&"),n={};for(const r of e){if(!r)continue;const i=r.indexOf("=");let s,o;i<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,i)),o=decodeURIComponent(r.slice(i+1)));let a=n[s];typeof a=="string"&&(a=n[s]=[a]),Array.isArray(a)?a.push(o):n[s]=o}return n}function Qk(t,e){return t?Object.keys(t).map(n=>{const r=t[n];if(r==null)return"";const i=encodeURIComponent(n)+"=",s=e?.[n];return s?i+encodeURIComponent(s(r)):Array.isArray(r)?r.map(o=>W4(o)?i+encodeURIComponent(JSON.stringify(o)):i+encodeURIComponent(o)).join("&"):W4(r)?i+encodeURIComponent(JSON.stringify(r)):i+encodeURIComponent(r)}).filter(n=>n).join("&"):""}function epe(t=!1){let e,n=vb.proxyUrl;if(typeof t=="string"){e=mje(t);const r=GO(t);r&&(n=r.proxyUrl)}else e=!!t;if(!n)throw eje().warn(pee),new Xe("urlUtils:proxy-not-set",pee);return e&&d9()&&(n=LB(n)),Ha(n)}function NIt(t,e=!1){const n=GO(t);let r,i;if(n){const s=RB(n.proxyUrl);r=s.path,i=s.query?CB(s.query):null}else if(e){const s=epe(t);r=s.path,i=s.query}if(r){const s=Ha(t);t=r+"?"+s.path;const o=Qk({...i,...s.query});o&&(t=`${t}?${o}`)}return t}const VE={path:"",query:""};function RB(t){const e=t.indexOf("?");return e!==-1?(VE.path=t.slice(0,e),VE.query=t.slice(e+1)):(VE.path=t,VE.query=null),VE}function tpe(t){return t=(t=q4(t=xje(t=RB(t).path),!0)).toLowerCase()}function cje(t){const e={proxyUrl:t.proxyUrl,urlPrefix:tpe(t.urlPrefix)},n=vb.proxyRules,r=e.urlPrefix;let i=n.length;for(let s=0;s<n.length;s++){const o=n[s].urlPrefix;if(r.startsWith(o)){if(r.length===o.length)return-1;i=s;break}o.startsWith(r)&&(i=s+1)}return n.splice(i,0,e),i}function GO(t){const e=vb.proxyRules,n=tpe(t);for(let r=0;r<e.length;r++)if(n.startsWith(e[r].urlPrefix))return e[r]}function OIt(t,e){if(!t||!e)return!1;t=H4(t),e=H4(e);const n=fee(t),r=fee(e);return n!=null&&r!=null?n.portalHostname===r.portalHostname:n==null&&r==null&&U1(t,e,!0)}function uje(t,e){return t=H4(t),e=H4(e),q4(t)===q4(e)}function H4(t){const e=(t=Cg(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function h9(t,e=vb.interceptors){const n=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(n))return r}else if(n(r.urls))return r}return null}function U1(t,e,n=!1){if(!t||!e)return!1;const r=p9(t),i=p9(e);return!(!n&&r.scheme!==i.scheme)&&r.host!=null&&i.host!=null&&r.host.toLowerCase()===i.host.toLowerCase()&&r.port===i.port}function MB(t){if(typeof t=="string"){if(!kl(t))return!0;t=p9(t)}if(U1(t,ua))return!0;const e=vb.trustedServers||[];for(let n=0;n<e.length;n++){const r=hje(e[n]);for(let i=0;i<r.length;i++)if(U1(t,r[i]))return!0}return!1}function hje(t){return BC[t]||(OB(t)||Vd(t)?BC[t]=[new cw(ru(t))]:BC[t]=[new cw(`http://${t}`),new cw(`https://${t}`)]),BC[t]}function ru(t,e=IB,n){return Vd(t)?n?.preserveProtocolRelative?t:ua.scheme==="http"&&ua.authority===gc(t).slice(2)?`http:${t}`:`https:${t}`:OB(t)?t:SI(t.startsWith("/")?_je(e):e,t)}function NB(t,e=IB,n){if(t==null||!kl(t))return t;const r=Cg(t),i=r.toLowerCase(),s=Cg(e).toLowerCase().replace(/\/+$/,""),o=n?Cg(n).toLowerCase().replace(/\/+$/,""):null;if(o&&!s.startsWith(o))return t;const a=(h,f,g)=>(g=h.indexOf(f,g))===-1?h.length:g;let l=a(i,"/",i.indexOf("//")+2),c=-1;for(;i.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==i.length);)l=a(i,"/",l+1);if(c===-1||o&&c<o.length)return t;t=r.slice(c);const u=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(u>0)for(let h=0;h<u;h++)t=`../${t}`;else t=`./${t}`;return t}function Cg(t){return t=Eje(t=bje(t=wje(t=ru(t=t.trim()))))}function SI(...t){const e=t.filter(A2);if(!e?.length)return;const n=[];if(kl(e[0])){const i=e[0],s=i.indexOf("//");s!==-1&&(n.push(i.slice(0,s+1)),yje(e[0])&&(n[0]+="/"),e[0]=i.slice(s+2))}else e[0].startsWith("/")&&n.push("");const r=e.reduce((i,s)=>s?i.concat(s.split("/")):i,[]);for(let i=0;i<r.length;i++){const s=r[i];s===".."&&n.length>0&&n[n.length-1]!==".."?n.pop():(!s&&i===r.length-1||s&&(s!=="."||n.length===0))&&n.push(s)}return n.join("/")}function gc(t,e=!1){if(t==null||TI(t)||_v(t))return null;let n=t.indexOf("://");if(n===-1&&Vd(t))n=2;else{if(n===-1)return null;n+=3}const r=t.indexOf("/",n);return r!==-1&&(t=t.slice(0,r)),e&&(t=q4(t,!0)),t}function kl(t){return Vd(t)||OB(t)}function TI(t){return t!=null&&t.startsWith("blob:")}function _v(t){return t!=null&&t.startsWith("data:")}function dje(t){const e=I2(t);return e?.isBase64?Xfe(e.data):null}function LIt(t){return Q6e(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const fje=/^data:(.*?)(;base64)?,(.*)$/;function I2(t){const e=t.match(fje);if(!e)return null;const[,n,r,i]=e;return{mediaType:n,isBase64:!!r,data:i}}function npe(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function pje(t){return(await fetch(t)).blob()}function DIt(t){const e=dje(t);if(!e)return null;const n=I2(t);return new Blob([e],{type:n.mediaType})}function Vd(t){return t!=null&&t.startsWith("/")&&t[1]==="/"}function OB(t){return t!=null&&Zfe.test(t)}function mje(t){return t!=null&&tje.test(t)||ua.scheme==="https"&&Vd(t)}function gje(t){return t!=null&&Jfe.test(t)||ua.scheme==="http"&&Vd(t)}function yje(t){return t!=null&&nje.test(t)}function LB(t){return Vd(t)?`https:${t}`:t.replace(Jfe,"https:")}function vje(){return ua.scheme==="http"}function d9(){return ua.scheme==="https"}function q4(t,e=!1){return Vd(t)?t.slice(2):(t=t.replace(Zfe,""),e&&t.length>1&&t.startsWith("/")&&t[1]==="/"&&(t=t.slice(2)),t)}function _je(t){const e=t.indexOf("//"),n=t.indexOf("/",e+2);return n===-1?t:t.slice(0,n)}function jIt(t){let e=0;if(kl(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const n=t.lastIndexOf("/");return n<e?t:t.slice(0,n+1)}function $It(t,e){if(!t)return"";const n=Ha(t).path.replace(/\/+$/,""),r=n.slice(n.lastIndexOf("/")+1);if(!e?.length)return r;const i=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(i,"")}function xje(t){return t.endsWith("/")?t:`${t}/`}function rpe(t){return t.replace(/\/+$/,"")}function wje(t){if(/^https?:\/\//i.test(t)){const e=RB(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function bje(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Eje(t){const e=vb.httpsDomains;if(!gje(t))return t;const n=t.indexOf("/",7);let r;if(r=n===-1?t:t.slice(0,n),r=r.toLowerCase().slice(7),Qfe.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return vje()&&r===ua.authority&&!rje.test(t)||(d9()&&r===ua.authority||e&&e.some(i=>r===i||r.endsWith(`.${i}`))||d9()&&!GO(t))&&(t=LB(t)),t}function f9(t,e,n){if(!(e&&n&&t&&kl(t)))return t;const r=t.indexOf("//"),i=t.indexOf("/",r+2),s=t.indexOf(":",r+2),o=Math.min(i<0?t.length:i,s<0?t.length:s);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${n}${t.slice(o)}`}function Sje(t,e){const n=new URL(t);return n.host=e,n.port&&!Qfe.test(e)&&(n.port=""),n.toString()}function FIt(t){return new URL(t).host}function p9(t){return typeof t=="string"?new cw(ru(t)):(t.scheme||(t.scheme=ua.scheme),t)}function VIt(t){return kje.test(t)}function ipe(t,e){const n=Ha(t),r=Object.keys(n.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),n.path}function Tje(t,e,n){const r=Ha(t),i=r.query||{};return i[e]=String(n),`${r.path}?${Qk(i)}`}function jj(t,e){if(!e)return t;const n=Ha(t),r=n.query||{};for(const[s,o]of Object.entries(e))o!=null&&(r[s]=o);const i=Qk(r);return i?`${n.path}?${i}`:n.path}function spe(t){if(t==null)return null;const e=t.match(ope);return e?e[2]:null}function mee(t){if(t==null)return null;const e=t.match(ope);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function zIt(t){return typeof t=="string"?I2(t)??{data:t}:new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(I2(r.result)),r.onerror=i=>n(i)})}const ope=/([^.]*)\.([^/]*)$/,kje=/(^data:image\/svg|\.svg$)/i,ape="20251114",lpe="ec088c999de2dac6fb9478a47da1bad775545540";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const Aje="4.34";let Zr,DB=Aje;function GIt(t){Zr=t}function UIt(t){const e=Zr?.findCredential(t);return e?.token?Tje(t,"token",e.token):t}DB="4.34.8",_e("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),_e("host-webworker");function Ije(t,e){for(const n of t.values())if(e(n))return!0;return!1}function BIt(t,e){for(const n of t.values())if(!e(n))return!1;return!0}function WIt(t,e){for(const n of t.values())if(e(n))return n;return null}function kI(t,e,n){const r=t.get(e);if(r!==void 0)return r;const i=n();return t.set(e,i),i}function HIt(t){const e=new Map;return n=>(e.has(n)||e.set(n,t(n)),e.get(n))}const Pje={remove:()=>{}};function Zn(t){return t?{remove(){t&&(t(),t=void 0)}}:Pje}function cpe(t){t.forEach(e=>e?.remove())}function qIt(t){cpe(t),t.length=0}function xv(t){return Zn(()=>cpe(t))}function KIt(t){return Zn(()=>t()?.remove())}function Cje(t){return Zn(()=>t?.abort())}function YIt(t){return Zn(t!=null?()=>t.destroy():void 0)}function Rje(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function XIt(t){Rje(t)&&t.remove()}function ZIt(t){return{[Symbol.dispose](){t.remove()}}}function Mje(t){return{setTimeout:(e,n)=>{const r=t.setTimeout(e,n);return Zn(()=>t.clearTimeout(r))}}}const _b=Mje(globalThis);function UO(t){return Nje(t)||upe(t)}function Nje(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function upe(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function xb(t,e,n){if(!UO(t))throw new TypeError("target is not a Evented or EventTarget object");return upe(t)?Oje(t,e,n):t.on(e,n)}function Oje(t,e,n,r){if(Array.isArray(e)){const i=e.slice();for(const s of i)t.addEventListener(s,n,r);return Zn(()=>{for(const s of i)t.removeEventListener(s,n,r)})}return t.addEventListener(e,n,r),Zn(()=>t.removeEventListener(e,n,r))}function hpe(t,e,n){if(!UO(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,n);const r=xb(t,e,i=>{r.remove(),n.call(t,i)});return r}function dpe(t,e){if(t==null)throw new Error(e??"value is None")}function Di(t){return t?.destroy(),null}function JIt(t){return t?.dispose(),null}function ii(t){return t?.remove(),null}function B1(t){return t?.abort(),null}function QIt(t){return t?.release(),null}function ePt(t,e,n){return t!=null&&e!=null?n!=null?n(t,e):t.equals(e):t===e}function Lje(t,e){let n;return t.some((r,i)=>(n=e(r,i),n!=null)),n??void 0}function Cr(t="Aborted"){return new Xe("AbortError",t)}function gi(t,e="Aborted"){if(ya(t))throw Cr(e)}function AI(t){return t instanceof AbortSignal?t:t?.signal??void 0}function ya(t){const e=AI(t);return e!=null&&e.aborted}function fpe(t){if(Ea(t))throw t}function gee(t){if(!Ea(t))throw t}function yu(t,e){const n=AI(t);if(n!=null){if(!n.aborted)return hpe(n,"abort",()=>e());e()}}function jB(t,e){const n=AI(t);if(n!=null)return gi(n),hpe(n,"abort",()=>e(Cr()))}function Dje(t,e){return AI(e)==null?t:new Promise((n,r)=>{let i=yu(e,()=>r(Cr()));const s=()=>{i=ii(i)};t.then(s,s),t.then(n,r)})}function Ea(t){return t?.name==="AbortError"}async function K4(t){try{return await t}catch(e){if(!Ea(e))throw e;return}}async function $B(t){if(!t)return;if(typeof t.forEach!="function"){const n=Object.keys(t),r=n.map(o=>t[o]),i=await $B(r),s={};return n.map((o,a)=>s[o]=i[a]),s}const e=t;return Promise.allSettled(e).then(n=>Array.from(e,(r,i)=>{const s=n[i];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))}async function jje(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function tPt(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function ppe(t,e=void 0,n){const r=new AbortController;return yu(n,()=>r.abort()),new Promise((i,s)=>{let o=setTimeout(()=>{o=0,i(e)},t);yu(r,()=>{o&&(clearTimeout(o),s(Cr()))})})}function nPt(t,e,n,r){const i=n&&"abort"in n?n:null;r!=null||i||(r=n);let s=setTimeout(()=>{s=0,i?.abort()},e);const o=()=>r||new Xe("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(a=>{if(s===0)throw o();return clearTimeout(s),a},a=>{throw clearTimeout(s),s===0?o():a})}function $je(t,e){const n=new AbortController,r=setTimeout(()=>n.abort(),e);return yu(t,()=>{n.abort(),clearTimeout(r)}),{...t,signal:n.signal}}function va(t){return t&&typeof t.then=="function"}function m9(t){return va(t)?t:Promise.resolve(t)}function Fje(t,e=-1){let n,r,i,s,o=null;const a=(...l)=>{if(n){r=l,s&&s.reject(Cr()),s=bc();const f=s.promise;if(o){const g=o;o=null,g.abort()}return f}if(i=s||bc(),s=null,e>0){const f=new AbortController;n=m9(t(...l,f.signal));const g=n;ppe(e).then(()=>{n===g&&(s?f.abort():o=f)})}else n=1,n=m9(t(...l));const c=()=>{const f=r;r=i=n=o=null,f!=null&&a(...f)},u=n,h=i;return u.then(c,c),u.then(h.resolve,h.reject),h.promise};return a}function bc(){let t,e;const n=new Promise((i,s)=>{t=i,e=s}),r=i=>{t(i)};return r.resolve=i=>t(i),r.reject=i=>e(i),r.timeout=(i,s)=>_b.setTimeout(()=>r.reject(s),i),r.promise=n,r}function rPt(t,e){e.then(t.resolve,t.reject)}async function yee(t){await Promise.resolve(),gi(t)}function wb(t,e){const n=e?.url?.path;if(t&&n&&(t=ru(t,n,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=NB(t,e.portalItem.itemUrl);r!=null&&r.startsWith(Vje)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return(t=g9(t,e?.portal))&&WO.test(t)?FB(t):t}function P2(t,e,n=0){if((t=t&&WO.test(t)?vpe(t):t)==null)return t;!kl(t)&&e?.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=ru(t);if(e){const i=e.verifyItemRelativeUrls?.rootPath||e.url?.path;if(i){const s=g9(i,e.portal),o=g9(r,e.portal);r=NB(o,s,s),r!=null&&r!==o&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=ype(r,e?.portal),kl(r)&&(r=Cg(r)),e?.resources&&e?.portalItem&&!kl(r)&&!_v(r)&&n===0&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function BO(t,e,n){return wb(t,n)}function C2(t,e,n,r){const i=P2(t,r);i!==void 0&&(e[n]=i)}const WO=/\/items\/([^/]+)\/resources\/(.*)/,Vje="./resources/";function mpe(t){return(t?.match(WO)??null)?.[1]??null}function gpe(t){const e=t?.match(WO)??null;if(e==null)return null;const n=e[2],r=n.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=mee(n);return{prefix:null,filename:o,extension:a}}const{path:i,extension:s}=mee(n.slice(r+1));return{prefix:n.slice(0,r),filename:i,extension:s}}function ype(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?f9(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function g9(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const n=`${e.urlKey}.${e.customBaseUrl}`,r=PB();return U1(r,`${r.scheme}://${n}`)?f9(t,e.portalHostname,n):f9(t,n,e.portalHostname)}function FB(t){if(!t)return t||null;let e=t;return e&&Zr&&!Zr.findCredential(e)&&(e=Yfe(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function vpe(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&Zr&&!Zr.findCredential(e)&&(e=Yfe(e)),e}const zje=Object.freeze(Object.defineProperty({__proto__:null,ensureMainOnlineDomain:ype,fromCDNUrl:vpe,fromJSON:wb,itemIdFromResourceUrl:mpe,prefixAndFilenameFromResourceUrl:gpe,read:BO,toCDNUrl:FB,toJSON:P2,write:C2},Symbol.toStringTag,{value:"Module"})),_pe={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},xpe=Object.values(_pe),wpe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${xpe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Gje=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${xpe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Uje=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function iPt(t){return wpe.test(t)}function II(t){if(t==null)return null;const e=Ha(t),n=e?.path.match(wpe)||e?.path.match(Gje);if(!n)return null;const[,r,i,s,o]=n,a=i.indexOf("/");return{title:bpe(a!==-1?i.slice(a+1):i),serverType:_pe[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function Bje(t){const e=Ha(t).path.match(Uje);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function bpe(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function sPt(t,e){const n=[];if(t){const r=II(t);r!=null&&r.title&&n.push(r.title)}if(e){const r=bpe(e);n.push(r)}if(n.length===2){if(n[0].toLowerCase().includes(n[1].toLowerCase()))return n[0];if(n[1].toLowerCase().includes(n[0].toLowerCase()))return n[1]}return n.join(" - ")}function vee(t){let e=gc(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function oPt(t,e){return t&&rpe(ipe(t,e))}function aPt(t){let{url:e}=t;if(!e)return{url:e};e=ipe(e,t.logger);const n=Ha(e),r=II(n.path);let i;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(i=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const s=Bje(n.path);s!=null&&(e=s.serviceUrl,i=s.sublayerId)}return{url:rpe(e),layerId:i}}function lPt(t,e,n,r,i){C2(e,r,"url",i),r.url&&t.layerId!=null&&(r.url=SI(r.url,n,t.layerId.toString()))}function cPt(t){if(!t)return!1;const e=t.toLowerCase(),n=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),i=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return n&&(r||i||s)}const Wje=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function VB(t){if(!zB(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),n=nr.apiKeys;if(Array.isArray(n.scopes)){for(const r of n.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return n.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?n.basemapStyles:nr.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?nr.apiKey:null}function y9(){return nr.apiKey!=null||nr.apiKeys.basemapStyles!=null}function Hje(t,e){return e?zB(t):VB(t)!=null}function zB(t){const e=gc(t,!0);return!!e&&!Wje.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function qje(t,e,n=!1,r){return new Promise((i,s)=>{if(ya(r))return void s(_ee());let o=()=>{c(),s(new Error(`Unable to load ${e}`))},a=async()=>{const u=t;try{await u.decode()}catch{}c(),i(u)},l=()=>{if(!t)return;const u=t;c(),u.src="",s(_ee())};const c=()=>{t&&(t.removeEventListener("error",o),t.removeEventListener("load",a),o=null,a=null,t=null,r?.removeEventListener("abort",l),l=null,n&&URL.revokeObjectURL(e))};r?.addEventListener("abort",l),t.addEventListener("error",o),t.addEventListener("load",a)})}function _ee(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const Epe="Timeout exceeded";function Kje(){return new Error(Epe)}function uPt(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===Epe}function Yje(t){nr.request.crossOriginNoCorsDomains||(nr.request.crossOriginNoCorsDomains={});const e=nr.request.crossOriginNoCorsDomains;for(let n of t)n=n.toLowerCase(),/^https?:\/\//.test(n)?e[gc(n)??""]=0:(e[gc("http://"+n)??""]=0,e[gc("https://"+n)??""]=0)}function Xje(t){const e=nr.request.crossOriginNoCorsDomains;if(e){let n=gc(t);if(n)return n=n.toLowerCase(),!U1(n,PB())&&e[n]<Date.now()-36e5}return!1}async function Zje(t){const e=Ha(t);t=e.path,e.query?.f==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const n=nr.request.crossOriginNoCorsDomains,r=gc(t);n&&r&&(n[r.toLowerCase()]=Date.now())}const v9=new Map;function Jje(t,e){const n=e?.preferredHost;if(!n||U1(t,`https://${n}`,!0))return;const r=II(t);if(!r||r.serverType!=="FeatureServer"||Kfe(t))return;const i=r.url.path.toLowerCase();v9.has(i)||v9.set(i,n)}function xee(t){const e=II(t)?.url.path.toLowerCase();if(!e)return t;const n=v9.get(e);return n?Sje(t,n):t}async function ns(t,e){t instanceof URL&&(t=t.toString()),e?.query instanceof URLSearchParams&&(e.query=CB(e.query.toString().replaceAll("+"," ")));const n=_v(t),r=TI(t);r||n||(t=Cg(t));const i={url:t,requestOptions:{...e}},s=g=>({data:g,getAllHeaders:R2,getHeader:R2,httpStatus:200,requestOptions:i.requestOptions,url:i.url}),o=h9(t,Qc.internalInterceptors);if(o){const g=await bee(o,i);if(g!=null)return s(g)}let a=h9(t);if(a){const g=await bee(a,i);if(g!=null)return s(g);a.after||a.error||(a=null)}if(t=i.url,(e=i.requestOptions).responseType==="image"&&(_e("host-webworker")||_e("host-node")))throw ph("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),i);if(e.method==="head"){if(e.body)throw ph("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),i);if(n||r)throw ph("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),i)}if(await r$e(),Y4)return Y4.execute(t,e);const l=new AbortController,c=yu(e,()=>l.abort()),u={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:i,redoRequest:!1,useIdentity:Qc.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},h=e.useRequestQueue?l$e(u):x9(u),f=await h.finally(()=>c?.remove());return a?.after?.(f),f}let Y4,Spe=!1;const Qc=nr.request,Tpe="FormData"in globalThis,Qje=new Set([499,498,403,401]),e$e=new Set(["COM_0056","COM_0057","SB_0008"]),t$e=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],R2=()=>null,X4=Symbol();function n$e(t){const e=gc(t);e&&!ns._corsServers.includes(e)&&ns._corsServers.push(e)}function wee(t){const e=gc(t);return!e||e.endsWith(".arcgis.com")||ns._corsServers.includes(e)||MB(e)}function ph(t,e,n,r){let i;const s={url:n.url,requestOptions:n.requestOptions,getAllHeaders:R2,getHeader:R2,ssl:!1};if(e instanceof Xe)return e.details?(e.details=Ze(e.details),e.details.url=n.url,e.details.requestOptions=n.requestOptions):e.details=s,e;if(e){const o=r&&(()=>Array.from(r.headers)),a=r&&(u=>r.headers.get(u)),l=r?.status,c=e.message;c&&(i=c),o&&a&&(s.getAllHeaders=o,s.getHeader=a),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||l||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?(s.messages=[e.details],i??=e.details):(s.messages=e.details,i??=s.messages?.[0]),s.raw=X4 in e?e[X4]:e}return i??="Error",Ea(e)?Cr():new Xe(t,i,s)}async function r$e(){_e("host-webworker")&&(!Y4&&globalThis.invokeStaticMessage?Y4=await ve(()=>import("./request-BbXvjz3S.js"),[]):Spe=!0)}async function _9(){Zr||await ve(()=>import("./IdentityManager-DnsDZJCc.js"),__vite__mapDeps([19,20]))}async function i$e(t){const e=t.params.url,n=t.params.requestOptions,r=t.controller.signal,i=n.body;let s=null,o=null;if(Tpe&&"HTMLFormElement"in globalThis&&(i instanceof FormData?s=i:i instanceof HTMLFormElement&&(s=new FormData(i))),typeof i=="string"&&(o=i),t.fetchOptions={cache:n.cacheBust?"no-cache":"default",credentials:"same-origin",headers:n.headers||{},keepalive:n.keepAlive??!1,method:n.method==="head"?"HEAD":"GET",mode:"cors",priority:Qc.priority,redirect:"follow",signal:r},(s||o)&&(t.fetchOptions.body=s||o),(Spe||n.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||n.query?.token||s?.get("token")),!t.hasToken){const a=VB(e);a&&(n.query??={},n.query.token=a,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!kpe(e)&&!ya(r)){let a;n.authMode==="immediate"?(await _9(),a=await Zr.getCredential(e,{signal:r})):n.authMode==="no-prompt"?(await _9(),a=await Zr.getCredential(e,{prompt:!1,signal:r}).catch(()=>{})):Zr&&(a=Zr.findCredential(e)),a&&(t.credential=a,t.credentialToken=a.token,t.useSSL=!!a.ssl)}}function kpe(t){return t$e.some(e=>e.test(t))}async function s$e(t){let e=t.params.url,n=xee(e);const r=t.params.requestOptions,i=t.fetchOptions??{},s=TI(e)||_v(e),o=r.responseType||"json",a=s?0:r.timeout!=null?r.timeout:Qc.timeout;let l=!1;if(!s){t.useSSL&&(e=LB(e));let g={...r.query};t.credentialToken&&(g.token=t.credentialToken);let y=Qk(g);_e("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const _=n.length+1+y.length;let b;l=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||_>Qc.maxUrlLength;const T=r.useProxy||!!GO(e);if(T){const A=epe(e);b=A.path,!l&&b.length+1+_>Qc.maxUrlLength&&(l=!0),A.query&&(g={...A.query,...g})}if(i.method==="HEAD"&&(l||T)){if(l)throw _>Qc.maxUrlLength?ph("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):ph("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(T)throw ph("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}l?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=jj(e,g):(i.body=Qk(g),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):e=jj(e,g),T&&(t.useProxy=!0,e=`${b}?${e}`),g.token&&Tpe&&i.body instanceof FormData&&!Kfe(e)&&i.body.set("token",g.token),r.hasOwnProperty("withCredentials")?t.withCredentials=r.withCredentials:U1(e,PB())||(MB(e)||Zr&&Zr.findServerInfo(e)?.webTierAuth)&&(t.withCredentials=!0),t.withCredentials&&(i.credentials="include",Xje(e)&&await Zje(l?jj(e,g):e)),n=xee(e)}let c,u,h=0,f=!1;a>0&&(h=setTimeout(()=>{f=!0,t.controller.abort()},a));try{if(r.responseType==="native-request-init")u=i,u.url=n,r.signal?u.signal=r.signal:delete u.signal;else if(r.responseType!=="image"||i.cache!=="default"||i.keepalive||i.method!=="GET"||l||o$e(r.headers)||!s&&!t.useProxy&&Qc.proxyUrl&&!wee(e)){if(ns._beforeFetch&&await ns._beforeFetch(e,i),c=await fetch(n,i),ns._afterFetch&&await ns._afterFetch(c),t.useProxy||n$e(e),r.responseType==="native")u=c;else if(i.method!=="HEAD")if(c.ok){switch(o){case"array-buffer":u=await c.arrayBuffer();break;case"blob":case"image":u=await c.blob();break;default:u=await c.text()}if(h&&(clearTimeout(h),h=0),o==="json"||o==="xml"||o==="document")if(u)switch(o){case"json":u=JSON.parse(u);break;case"xml":u=Eee(u,"application/xml");break;case"document":u=Eee(u,"text/html")}else u=null;if(u){if(o==="array-buffer"||o==="blob"){const g=c.headers.get("Content-Type");if(g&&/application\/json|text\/plain/i.test(g)&&u[o==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(u).json();y.error&&(u=y)}catch{}}o==="image"&&u instanceof Blob&&(u=await See(URL.createObjectURL(u),t,!0))}}else{u=await c.text();try{u=JSON.parse(u)}catch{}}}else u=await See(n,t)}catch(g){if(g.name==="AbortError")throw f?Kje():Cr("Request canceled");if(!(!c&&g instanceof TypeError&&Qc.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||wee(e))throw g;t.redoRequest=!0,cje({proxyUrl:Qc.proxyUrl,urlPrefix:gc(e)??""})}finally{h&&clearTimeout(h)}return[c,u]}async function bee(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let n,r;try{r=await t.before(e)}catch(i){n=ph("request:interceptor",i,e)}if((r instanceof Error||r instanceof Xe)&&(n=ph("request:interceptor",r,e)),n)throw t.error&&t.error(n),n;return r}}function o$e(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function Eee(t,e){let n;try{n=new DOMParser().parseFromString(t,e)}catch{}if(!n||n.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return n}ns._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],ns._beforeFetch=void 0,ns._afterFetch=void 0;const a$e=new Map;async function l$e(t){const e=u$e(t.params.url);if(!e)return x9(t);const{QueueProcessor:n}=await ve(()=>import("./QueueProcessor-CQoq3fbC.js"),[]);return kI(a$e,e.origin,()=>{const i=e.isHosted?_e("request-queue-concurrency-hosted"):_e("request-queue-concurrency-non-hosted");return new n({concurrency:i,process:s=>{if(ya(s.params.requestOptions))throw ph("",Cr("Request canceled"),s.params);return x9(s)}})}).push(t)}async function x9(t){let e,n;await i$e(t);try{do[e,n]=await s$e(t);while(!await c$e(t,e,n))}catch(s){const o=ph("request:server",s,t.params,e);throw o.details.ssl=t.useSSL,t.interceptor?.error&&t.interceptor.error(o),o}const r=t.params.url;if(n)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&n.user?.username&&!MB(r)){const s=gc(r,!0);s&&Qc.trustedServers.push(s)}Array.isArray(n.authorizedCrossOriginNoCorsDomains)&&Yje(n.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&Jje(r,n);const i=t.credential;if(i&&Zr){let o=Zr.findServerInfo(i.server)?.owningSystemUrl;if(o){o=o.replace(/\/?$/,"/sharing");const a=Zr.findCredential(o,i.userId);a&&Zr._getIdenticalSvcIdx(o,a)===-1&&a.resources.unshift(o)}}return{data:n,getAllHeaders:e?()=>Array.from(e.headers):R2,getHeader:e?s=>e.headers.get(s):R2,httpStatus:e?.status??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function c$e(t,e,n){if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let i,s;if(n&&(n.error&&typeof n.error=="object"?i=n.error:n.status==="error"&&Array.isArray(n.messages)&&(i={...n},i[X4]=n,i.details=n.messages)),!i&&!e.ok)throw i=new Error(`Unable to load ${e.url} status: ${e.status}`),i[X4]=n,i;let o,a=null;i&&(s=Number(i.code),a=i.hasOwnProperty("subcode")?Number(i.subcode):null,o=i.messageCode,o=o?.toUpperCase());const l=r.authMode;if(s===403&&(a===4||i.message?.toLowerCase().includes("ssl")&&!i.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&Qje.has(s)&&!kpe(t.params.url)&&(s!==403||(!o||!e$e.has(o))&&(a==null||a===2&&t.credentialToken))){await _9();try{const c=await Zr.getCredential(t.params.url,{error:ph("request:server",i,t.params),credential:t.credential,prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=c,t.credentialToken=c.token,t.useSSL=t.useSSL||c.ssl,!1}catch(c){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;i=c}}if(i)throw i;return!0}function See(t,e,n=!1){const r=e.controller.signal,i=new Image;return e.withCredentials?i.crossOrigin="use-credentials":i.crossOrigin="anonymous",i.alt="",i.fetchPriority=Qc.priority,i.src=t,qje(i,t,n,r)}function u$e(t){let e,n;return typeof t=="string"?(e=gc(t,!0),n=vee(t)):(e=t.origin,n=vee(t.toString())),e==null?null:{origin:e,isHosted:n}}function h$e(t){return t?.release&&typeof t.release=="function"}function d$e(t){return t?.acquire&&typeof t.acquire=="function"}var Dg;let bb=(Dg=class{constructor(e,n,r,i=1,s=0){this._creator=e,this._acquireFunction=n,this._releaseFunction=r,this.allocationSize=i,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=this._creator();this.allocationSize=Math.max(i,1)}destroy(){this.prune(0)}acquire(...e){let n;if(Dg.test.disabled)n=this._creator();else{if(this._pool.length===0){const r=this.allocationSize;for(let i=0;i<r;i++)this._pool[i]=this._creator()}n=this._pool.pop()}return this._acquireFunction?this._acquireFunction(n,...e):d$e(n)&&n.acquire(...e),n}release(e){e&&!Dg.test.disabled&&(this._releaseFunction?this._releaseFunction(e):h$e(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let n=e;n<this._pool.length;++n){const r=this._pool[n];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},Dg.test={disabled:!!_e("esri-tests-disable-memory-pools")},Dg);function f$e(t){t.length=0}let La=class{constructor(e=50,n=50){this._pool=new bb(()=>[],void 0,f$e,n,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return $j.acquire()}static release(e){return $j.release(e)}static prune(){$j.prune()}};const $j=new La(100),Tee=new WeakMap;function p$e(t,e,n=!1){const r=` DEPRECATED - ${e}`;if(!n)return void t.warn(r);let i=Tee.get(t);i||(i=new Set,Tee.set(t,i)),i.has(e)||(i.add(e),t.warn(r))}const Z4="https://www.esriurl.com/";function m$e(t,e,n,r={}){_e("esri-deprecation-warnings")&&Hg(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${Z4}${n}/`,`Esri's move to web components: ${Z4}components-transition-plan/`],replacement:`<${n}></${n}>`,warnOnce:!0,...r})}function g$e(t,e,n,r={}){_e("esri-deprecation-warnings")&&Hg(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${Z4}${n}/`,`Esri's move to web components: ${Z4}components-transition-plan/`],replacement:`<${n}></${n}>`,warnOnce:!0,...r})}function dPt(t,e,n={}){_e("esri-deprecation-warnings")&&Hg(t,`Module: ${e}`,n)}function Ape(t,e,n={}){if(_e("esri-deprecation-warnings")){const{moduleName:r}=n;Hg(t,`Function: ${(r?r+"::":"")+e+"()"}`,n)}}function w9(t,e,n={}){if(_e("esri-deprecation-warnings")){const{moduleName:r}=n;Hg(t,`Property: ${(r?r+"::":"")+e}`,n)}}function y$e(t,e,n={}){_e("esri-deprecation-warnings")&&Hg(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...n})}function Hg(t,e,n={}){if(_e("esri-deprecation-warnings")){const{replacement:r,version:i,see:s,warnOnce:o}=n;let a=e;if(r&&(a+=`
	 Replacement: ${r}`),i&&(a+=`
	 Version: ${i}`),s)if(Array.isArray(s)){a+=`
	 See for more details:`;for(const l of s)a+=`
		${l}`}else a+=`
	 See ${s} for more details.`;p$e(t,a,o)}}function fPt(t){const e=[];return function*(){yield*e;let n,r=e.length;for(;!(n=t.next()).done;)for(e.push(n.value),yield n.value;++r<e.length;)yield e[r]}}function v$e(t,e){for(const n of t)if(n!=null&&e(n))return n}function J4(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let Eb=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(n=>{e+=n.length}),e}add(e,n){if(J4(e)){const r=this._getOrCreateGroup(n);for(const i of e)Aee(i)&&r.push(i)}else Aee(e)&&this._getOrCreateGroup(n).push(e);return this}forEach(e,n){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&n&&r.forEach(n)}}has(e){return this._groups.has(WC(e))}remove(e){if(typeof e!="string"&&J4(e)){for(const n of e)this.remove(n);return this}return this.has(e)?(kee(this._getGroup(e)),this._groups.delete(WC(e)),this):this}removeAll(){return this._groups.forEach(kee),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const n=[];return this._groups.set(WC(e),n),n}_getGroup(e){return this._groups.get(WC(e))}};function WC(t){return t||"_default_"}function kee(t){for(const e of t)e instanceof Eb?e.removeAll():e.remove()}function Aee(t){return t!=null&&(!!t.remove||t instanceof Eb)}const Ipe=Symbol("Accessor-beforeDestroy");function qg(t){return t.__accessor__??null}function _$e(t,e){return t?.metadata?.[e]!=null}function IM(t,e,n){return n?Q4(t,e,{policy:n,path:""}):Q4(t,e,null)}function Q4(t,e,n){return e?Object.keys(e).reduce((r,i)=>{const s=i;if(s==="__proto__")return r;let o=null,a="merge";if(n&&(o=n.path?`${n.path}.${i}`:i,a=n.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=Ze(e[s]),r;let l=r[s],c=e[s];if(l===c)return r;if(Array.isArray(c)||Array.isArray(r))l=l?Array.isArray(l)?r[s]=l.slice():r[s]=[l]:r[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(u=>{l.includes(u)||l.push(u)}));else if(c&&typeof c=="object")if(n){const u=n.path;n.path=o,r[s]=Q4(l,c,n),n.path=u}else r[s]=Q4(l,c,null);else r.hasOwnProperty(i)&&!e.hasOwnProperty(i)||(r[s]=c);return r},t||{}):t}function Ppe(t){return Array.isArray(t)?t:t.split(".")}function Iee(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function x$e(t){if(Array.isArray(t)){const e=[];for(const n of t)e.push(...Iee(n));return e}return Iee(t)}function Cpe(t,e,n,r){const i=x$e(e);if(i.length!==1){const s=i.map(o=>r(t,o,n));return xv(s)}return r(t,i[0],n)}function Rpe(t,e){const n=t.endsWith("?")?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const i=parseInt(n,10);if(!isNaN(i))return Array.isArray(e)?e[i]:e.at(i)}const r=qg(e);return _$e(r,n)?r.get(n):e[n]}function Mpe(t,e,n){if(t==null)return t;const r=Rpe(e[n],t);return!r&&n<e.length-1?void 0:n===e.length-1?r:Mpe(r,e,n+1)}function PI(t,e,n=0){return typeof e!="string"||e.includes(".")?Mpe(t,Ppe(e),n):Rpe(e,t)}function wd(t,e){return PI(t,e)}function Pee(t,e){return PI(e,t)!==void 0}const oc={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};function Sb(t){let e=t.constructor.__accessorMetadata__;const n=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!n){e=Object.create(e);for(const r in e)e[r]=Ze(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function CI(t,e){const n=Sb(t);let r=n[e];return r||(r=n[e]={}),r}function w$e(t,e){return IM(t,e,E$e)}const b$e=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function E$e(t){return b$e.test(t)?"replace":"merge"}let S$e=class{constructor(e,n){this._observers=e,this._observer=n}remove(){Mfe(this._observers,this._observer)}},Npe=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return T$e;this._observers==null&&(this._observers=[]);const n=this._observers;let r=!1,i=!1;const s=n.length;for(let o=0;o<s;++o){const a=n[o];if(a.destroyed)i=!0;else if(a===e){r=!0;break}}return r||(n.push(e),i&&this._removeDestroyedObservers()),new S$e(n,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const n=e.length;let r=0;for(let i=0;i<n;++i){for(;i+r<n&&e[i+r].destroyed;)++r;if(r>0){if(!(i+r<n))break;e[i]=e[i+r]}}e.length=n-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const n of e)n.onCommitted();this._observers=null}}};const T$e=Zn(),pi={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let HO=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){this.accessed?.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const eN=new HO,bS=[];let kT=eN;function sn(t){kT.onAccessed(t)}let PM=!1,CM=!1;function Tp(t,e,n){if(PM)return GB(t,e,n);let r=null;return Ope(t),r=e.call(n),Lpe(),r}function k$e(t,e){return Tp(eN,t,e)}function GB(t,e,n){const r=PM;PM=!0,Ope(t);let i=null;try{i=e.call(n)}catch(s){CM&&kt.getLogger("esri.core.accessorSupport.tracking").error(s)}return Lpe(),PM=r,i}function Ope(t){kT=t,bS.push(t)}function Lpe(){const t=bS.length;if(t>1){const e=bS.pop();kT=bS[t-2],e.onTrackingEnd()}else if(t===1){const e=bS.pop();kT=eN,e.onTrackingEnd()}else kT=eN}function Dpe(t,e){if(e.flags&pi.DepTrackingInitialized)return;e.flags|=pi.DepTrackingInitialized;const n=CM;CM=!1,e.flags&pi.AutoTracked?GB(e.trackingTarget,e.metadata.get,t):jpe(t,e),CM=n}const A$e=[];function jpe(t,e){e.flags&pi.ExplicitlyTracking||(e.flags|=pi.ExplicitlyTracking,GB(e.trackingTarget,()=>{const n=e.metadata.dependsOn||A$e;for(const r of n)if(typeof r!="string"||r.includes(".")){const i=Ppe(r);for(let s=0,o=t;s<i.length&&o!=null&&typeof o=="object";++s)o=Cee(o,i[s],s!==i.length-1)}else Cee(t,r,!1)}),e.flags&=-129)}function Cee(t,e,n){const r=e.endsWith("?")?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const i=qg(t);if(i){const s=i.propertiesByName.get(r);s&&(sn(s),Dpe(t,s))}return n?t[r]:void 0}let Ree=class extends Npe{constructor(e,n){super(),this.propertyName=e,this.metadata=n,this.trackingTarget=new HO(this),this.flags=0,this.flags=pi.Dirty|(n.nonNullable?pi.NonNullable:0)|(n.hasOwnProperty("value")?pi.HasDefaultValue:0)|(n.get===void 0?pi.DepTrackingInitialized:0)|(n.dependsOn===void 0?pi.AutoTracked:0)}destroy(){this.flags&pi.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&sn(this);const n=e.store,r=this.propertyName,i=this.flags,s=n.get(r);if(i&pi.Computing||~i&pi.Dirty&&n.has(r))return s;this.flags|=pi.Computing;const o=e.host;let a;i&pi.AutoTracked?a=Tp(this.trackingTarget,this.metadata.get,o):(jpe(o,this),a=this.metadata.get.call(o)),this.flags|=pi.DepTrackingInitialized,n.set(r,a,1);const l=n.get(r);return l===s?this.flags&=-2:k$e(this.commit,this),this.flags&=-5,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&pi.Overridden&&(this.flags|=pi.Dirty);const e=this._observers;if(e&&e.length>0)for(const n of e)n.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const n=e.slice();for(const r of n)r.onCommitted()}}};const _Pt=8;function UB(t){switch(t){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"link-chart":return 6;case"user":return 7;default:return null}}function b9(t){switch(t){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"link-chart";case 7:return"user"}}function I$e(t){return b9(t)}let P$e=class $pe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const n=new $pe;return this._values.forEach((r,i)=>{e&&e.has(i)||n.set(i,Ze(r))}),n}get(e){return this._values.get(e)}originOf(){return 7}keys(){return[...this._values.keys()]}set(e,n){this._values.set(e,n)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,n){return this.has(e)}isBelowOrigin(e,n){return!this.has(e)}forEach(e){this._values.forEach(e)}};function k_(t,e,n){return t!==void 0}function Mee(t,e,n,r){return t!==void 0&&(!(n==null&&t.flags&pi.NonNullable)||(r.lifecycle,!1))}let C$e=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=oc.INITIALIZING,this.store=new P$e,this.mutable=!0,this._origin=7;const n=this.host.constructor.__accessorMetadata__;for(const r in n){const i=new Ree(r,n[r]);this.propertiesByName.set(r,i)}this.metadata=n}initialize(){this.lifecycle=oc.CONSTRUCTING}constructed(){this.lifecycle=oc.CONSTRUCTED}destroy(){this.lifecycle=oc.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==oc.INITIALIZING}get(e){const n=this.propertiesByName.get(e);if(!k_(n))return;if(n.metadata.get)return n.getComputed(this);this.mutable&&sn(n);const r=this.store;return r.has(e)?r.get(e):n.metadata.value}originOf(e){const n=this.store.originOf(e);if(n===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&pi.HasDefaultValue)return"defaults"}return b9(n)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const n=this.propertiesByName.get(e);if(k_(n))return this.store.has(e)?this.store.get(e):n.metadata.value}internalSet(e,n){const r=this.propertiesByName.get(e);k_(r)&&this._internalSet(r,n)}getDependsInfo(e,n,r){const i=this.propertiesByName.get(n);if(!k_(i))return"";const s=new HO,o=Tp(s,()=>i.metadata.get?.call(e));let a=`${r}${e.declaredClass.split(".").pop()}.${n}: ${o}
`;const l=s.accessed??new Set;if(l.size===0)return a;r+="  ";for(const c of l)c instanceof Ree&&(a+=`${r}${c.propertyName}: undefined
`);return a}setAtOrigin(e,n,r){const i=this.propertiesByName.get(e);if(k_(i))return this._setAtOrigin(i,n,r)}isOverridden(e){const n=this.propertiesByName.get(e);return n!==void 0&&!!(n.flags&pi.Overridden)}clearOrigin(e,n){const r=this.store,i=this.propertiesByName.get(e);if(!k_(i))return;const s=r.isAtOrigin(e,n)&&!(i.flags&pi.Overridden);r.delete(e,n),s&&i.notifyChange()}clearOverride(e){const n=this.propertiesByName.get(e);n&&n.flags&pi.Overridden&&(n.flags&=-3,n.notifyChange())}override(e,n){const r=this.propertiesByName.get(e);if(!Mee(r,e,n,this))return;const i=r.metadata.cast;if(i){const s=this._cast(i,n),{valid:o,value:a}=s;if(Fj.release(s),!o)return;n=a}r.flags|=pi.Overridden,this._internalSet(r,n)}set(e,n){const r=this.propertiesByName.get(e);if(!Mee(r,e,n,this))return;const i=r.metadata.cast;if(i){const o=this._cast(i,n),{valid:a,value:l}=o;if(Fj.release(o),!a)return;n=l}const s=r.metadata.set;s?s.call(this.host,n):this._internalSet(r,n)}setDefaultOrigin(e){this._origin=UB(e)}getDefaultOrigin(){return b9(this._origin)}notifyChange(e){const n=this.propertiesByName.get(e);n!==void 0&&n.notifyChange()}invalidate(e){const n=this.propertiesByName.get(e);n!==void 0&&n.invalidate()}commit(e){const n=this.propertiesByName.get(e);n!==void 0&&n.commit()}_internalSet(e,n){const r=this.lifecycle!==oc.INITIALIZING?this._origin:0;this._setAtOrigin(e,n,r)}_setAtOrigin(e,n,r){const i=this.store,s=e.propertyName;if(i.isAtOrigin(s,r)&&AB(n,i.get(s))&&~e.flags&pi.Overridden)return;const o=i.isBelowOrigin(s,r)||i.isAtOrigin(s,r);o&&e.invalidate(),i.set(s,n,r),o&&e.commit(),Dpe(this.host,e)}_cast(e,n){const r=Fj.acquire();return r.valid=!0,r.value=n,e&&(r.value=e.call(this.host,n,r)),r}},R$e=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const Fj=new bb(()=>new R$e);function tN(t,e,n){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))tN(t,r,e[r]);else{if(e.includes(".")){const i=e.split("."),s=i.splice(-1,1)[0];return void tN(wd(t,i),s,n)}const r=t.__accessor__;r!=null&&M$e(e,r),t[e]=n}}function M$e(t,e){if(_e("esri-unknown-property-errors")&&!N$e(t,e))throw new Xe("set:unknown-property",O$e(t,e))}function N$e(t,e){return e.metadata[t]!=null}function O$e(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let L$e;function D$e(){return L$e}let Fpe=class extends bb{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const n=super.acquire(...e);return this._set.delete(n),n}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const HC=[];function nN(t){HC.push(t),HC.length===1&&queueMicrotask(()=>{const e=HC.slice();HC.length=0;for(const n of e)n()})}let AT=class{constructor(e,n=30){this.name=e,this._counter=0,this._samples=new Array(n)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,n)=>e-n)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,n)=>e+n,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};const rN=(t,e,n,r)=>{let i=e,s=e;const o=n>>>1,a=t[i-1];for(;s<=o;){s=i<<1,s<n&&r(t[s-1],t[s])<0&&++s;const l=t[s-1];if(r(l,a)<=0)break;t[i-1]=l,i=s}t[i-1]=a},Vpe=(t,e)=>t<e?-1:t>e?1:0;function j$e(t,e,n,r){n===void 0&&(n=t.length),r===void 0&&(r=Vpe);for(let s=n>>>1;s>e;s--)rN(t,s,n,r);const i=e+1;for(let s=n-1;s>e;s--){const o=t[e];t[e]=t[s],t[s]=o,rN(t,i,s,r)}}function*$$e(t,e,n,r){n===void 0&&(n=t.length),r===void 0&&(r=Vpe);for(let s=n>>>1;s>e;s--)rN(t,s,n,r),yield;const i=e+1;for(let s=n-1;s>e;s--){const o=t[e];t[e]=t[s],t[s]=o,rN(t,i,s,r),yield}}const F$e=1.5,V$e=1.1;let zpe=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new Pfe,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>Nee(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const n=new Array;for(let r=0;r<this._length;r++){const i=this.data[r];e(i)&&n.push(i)}return n}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,n){const r=this.data.indexOf(e,n);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let n=e;n<this._length;++n)this.data[n]=this._deallocator(this.data[n]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,n=e.length){for(let r=0;r<n;r++)this.data[this._length++]=e[r]}fill(e,n){for(let r=0;r<n;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,Nee(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const n=l9(this.data,e,this.length,this._hint);if(n!==-1)return this.data.splice(n,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(l9(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,n=e.length,r){this.length=$6e(this.data,e,this.length,n,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,n){if(e>=this.length||n>=this.length||e===n)return;const r=this.data[e];this.data[e]=this.data[n],this.data[n]=r}sort(e){j$e(this.data,0,this.length,e)}iterableSort(e){return $$e(this.data,0,this.length,e)}some(e,n){for(let r=0;r<this.length;++r)if(e.call(n,this.data[r],r,this.data))return!0;return!1}find(e,n){const{data:r,length:i}=this;for(let s=0;s<i;++s)if(e.call(n,r[s]))return r[s]}filterInPlace(e,n){let r=0;for(let i=0;i<this._length;++i){const s=this.data[i];e.call(n,s,i,this.data)&&(this.data[i]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let i=r;i<this._length;i++)this.data[i]=this._deallocator(this.data[i]);return this._length=r,this._shrink(),this}forAll(e,n){const{data:r,length:i}=this;for(let s=0;s<i;++s)e.call(n,r[s],s,r)}forEach(e,n){this.data.slice(0,this.length).forEach(e,n)}map(e,n){const r=new Array(this.length);for(let i=0;i<this.length;++i)r[i]=e.call(n,this.data[i],i,this.data);return r}reduce(e,n){let r=n;for(let i=0;i<this.length;++i)r=e(r,this.data[i],i,this.data);return r}has(e){const n=this.length,r=this.data;for(let i=0;i<n;++i)if(r[i]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function Nee(t){t.data.length>F$e*t.length&&(t.data.length=Math.floor(t.length*V$e))}function TPt(t){return t}function z$e(t){return 1e3*t}function kPt(t){return t}function APt(t){return .001*t}let G$e=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},U$e=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},E9=0;const zE={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},S9=["prepare","preRender","render","postRender","update","finish"],T9=[],W1=new zpe;let B$e=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,Gpe()}};function W$e(){c1!=null&&(cancelAnimationFrame(c1),c1=requestAnimationFrame(BB))}function Gpe(){c1==null&&(E9=performance.now(),c1=requestAnimationFrame(BB))}const iN={frameTasks:W1,willDispatch:!1,clearFrameTasks:H$e,dispatch:Bpe,executeFrameTasks:q$e,reschedule:W$e};function Tb(t){const e=new U$e(t);return T9.push(e),iN.willDispatch||(iN.willDispatch=!0,nN(Bpe)),e}function M2(t){const e=new G$e(t);return W1.push(e),Gpe(),new B$e(e)}let c1=null;function H$e(t=!1){W1.forAll(e=>{e.removed=!0}),t&&Upe()}function BB(){const t=performance.now();c1=null,c1=W1.some(n=>!n.paused&&!n.removed)?requestAnimationFrame(BB):null,iN.executeFrameTasks(t)}function q$e(t){const e=t-E9;E9=t;const n=1e3/60,r=Math.max(0,e-n);zE.time=t,zE.frameDuration=n-r;for(let i=0;i<S9.length;i++){const s=performance.now(),o=S9[i];W1.forAll(a=>{a.paused||a.removed||(i===0&&a.ticks++,a.phases[o]&&(zE.elapsedFrameTime=performance.now()-t,zE.deltaTime=a.ticks===0?0:e,a.phases[o]?.call(a,zE)))}),Z$e[i].push(performance.now()-s)}Upe(),J$e.push(performance.now()-t)}const qC=new zpe;function Upe(){W1.forAll(t=>{t.removed&&qC.push(t)}),W1.removeUnorderedMany(qC.data,qC.length),qC.clear()}function Bpe(){for(;T9.length;){const t=T9.shift();t.isActive&&t.callback()}iN.willDispatch=!1}function K$e(t=1,e){const n=bc(),r=()=>{ya(e)?n.reject(Cr()):t===0?n():(--t,nN(()=>r()))};return r(),n.promise}function Y$e(t){return K$e(1,t)}async function X$e(t){await Y$e(t),await new Promise(e=>requestAnimationFrame(()=>{t?.aborted||e()}))}const Z$e=S9.map(t=>new AT(t)),J$e=new AT("total");function Wpe(t,e){for(const n of t.values())if(e(n))return!0;return!1}function Oee(t,e){if(!e)return t;for(const n of e)n!=null&&t.add(n);return t}function RPt(t,e){return e!=null&&t.add(e),t}function WB(t,e){const n=new Set;return Oee(n,t),Oee(n,e),n}function Q$e(t,e){const n=new Set;for(const r of e)t.has(r)&&n.add(r);return n}function MPt(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const n of t)if(!e.has(n))return!1;return!0}function NPt(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function eFe(t,e){const n=new Set(t);for(const r of e)n.delete(r);return n}function tFe(t,e){return eFe(WB(t,e),Q$e(t,e))}let nFe=0;function RM(){return++nFe}let qO=class extends HO{constructor(e){super(new rFe(e)),this._observer&&Lee.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&Lee.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},rFe=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=iFe}};const Lee=new FinalizationRegistry(t=>{t.deref()?.destroy()});function iFe(){}let uw=!1;const sN=[];function Hpe(t,e){let n=new qO(s),r=null,i=!1;function s(){if(!n||i)return;if(uw)return void Kpe(s);const a=r;n.clear(),uw=!0,i=!0,r=Tp(n,t),i=!1,uw=!1,e(r,a),Ype()}function o(){n&&(n.destroy(),n=null,r=null)}return i=!0,r=Tp(n,t),i=!1,Zn(o)}function qpe(t,e){let n=new qO(i),r=null;function i(){e(r,o)}function s(){n&&(n.destroy(),n=null),r=null}function o(){return n?(n.clear(),r=Tp(n,t),r):null}return o(),Zn(s)}function sFe(t,e){let n=!1,r=!1;const i=!!e?.sync;let s=new qO(()=>{n||r||(r=!0,i?o():queueMicrotask(o))});function o(){r=!1,s&&!n&&(uw?Kpe(o):(s.clear(),uw=!0,n=!0,Tp(s,t),n=!1,uw=!1,Ype()))}function a(){s&&(s.destroy(),s=null)}return n=!0,Tp(s,t),n=!1,Zn(a)}function Kpe(t){sN.includes(t)||sN.unshift(t)}function Ype(){for(;sN.length;)sN.pop()()}var _1;let HB=(_1=class{constructor(){this.uid=RM(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,n,r,i,s){return this.pool.acquire(0,e,n,r,i,s,AB)}static acquireTracked(e,n,r,i){return this.pool.acquire(1,e,n,r,null,null,i)}notify(e,n){this.type===0?this.callback.call(this.target,e,n,this.path,this.target):this.callback.call(null,e,n,void 0,void 0)}acquire(e,n,r,i,s,o,a){this.uid=RM(),this.removed=!1,this.type=e,this.oldValue=n,this.callback=r,this.getValue=i,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=RM(),this.removed=!0}},_1.pool=new Fpe(()=>new _1),_1);const MM=new La,hp=new Set;let oN;function aN(t){hp.delete(t),hp.add(t),Xpe()}function Xpe(){oN||(oN=Tb(lFe))}function oFe(t){if(t.removed)return;const e=t.oldValue,n=t.getValue();t.equals(e,n)||(t.oldValue=n,t.notify(n,e))}function aFe(t){for(const e of hp.values())e.target===t&&(e.removed=!0)}function lFe(){let t=10;for(;oN&&t--;){oN=null;const e=cFe(),n=MM.acquire();for(const r of e){const i=r.uid;oFe(r),i===r.uid&&r.removed&&n.push(r)}for(const r of hp)r.removed&&(n.push(r),hp.delete(r));for(const r of n)HB.pool.release(r);MM.release(n),MM.release(e),k9.forEach(r=>r())}}function cFe(){const t=MM.acquire();t.length=hp.size;let e=0;for(const n of hp)t[e]=n,++e;return hp.clear(),t}const k9=new Set;function uFe(t){return k9.add(t),Zn(()=>k9.delete(t))}function hFe(t,e,n){let r=Cpe(t,e,n,(i,s,o)=>{let a,l,c=qpe(()=>PI(i,s),(u,h)=>{i.__accessor__?.lifecycle===oc.DESTROYED||a&&a.uid!==l?r.remove():(a||(a=HB.acquireUntracked(u,o,h,i,s),l=a.uid),aN(a))});return Zn(()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,aN(a)),a=null),r=c=null})});return r}function dFe(t,e,n){const r=Cpe(t,e,n,(i,s,o)=>{let a=!1;return Hpe(()=>PI(i,s),(l,c)=>{i.__accessor__.lifecycle!==oc.DESTROYED?a||(a=!0,AB(c,l)||o.call(i,l,c,s,i),a=!1):r.remove()})});return r}function fFe(t,e,n,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==oc.DESTROYED?r?dFe(t,e,n):hFe(t,e,n):Zn()}function pFe(t,e,n){let r,i,s=qpe(t,(o,a)=>{r&&r.uid!==i?s.remove():(r||(r=HB.acquireTracked(o,e,a,n),i=r.uid),aN(r))});return Zn(()=>{s.remove(),r&&(r.uid!==i||r.removed||(r.removed=!0,aN(r)),r=null),s=null})}function mFe(t,e,n){let r=!1;return Hpe(t,(i,s)=>{r||(r=!0,n(s,i)||e(i,s),r=!1)})}function gFe(t,e,n=!1,r=zfe){return n?mFe(t,e,r):pFe(t,e,r)}function Dee(t){return Wpe(hp,e=>e.oldValue===t)}const u1=()=>kt.getLogger("esri.core.accessorSupport.ensureTypes");function yFe(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(u1().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function vFe(t){return t==null?t:!!t}function _Fe(t){return t==null?t:t.toString()}function ac(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function qB(t){return t==null?t:Math.round(parseFloat(t))}function xFe(t){return null}function wFe(t,e){return n=>{let r=t(n);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function Zpe(t){return t?.constructor&&t.constructor.__accessorMetadata__!==void 0}function lN(t,e){return e!=null&&t&&!(e instanceof t)}function Jpe(t){return t&&"isCollection"in t}function jee(t){return t?.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function bFe(t,e){if(!e?.constructor||!Jpe(e.constructor))return A9(t,e)?e:new t(e);const n=jee(t.prototype.itemType),r=jee(e.constructor.prototype.itemType);return n?r?n===r?e:n.prototype.isPrototypeOf(r.prototype)?new t(e):(A9(t,e),e):new t(e):e}function A9(t,e){return!!Zpe(e)&&(u1().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+YO(t)+"'"),!0)}function KO(t,e){return e==null?e:Jpe(t)?bFe(t,e):lN(t,e)?A9(t,e)?e:new t(e):e}function YO(t){return t?.prototype?.declaredClass||"unknown"}const EFe=new WeakMap;function SFe(t){switch(t){case Number:return e=>ac(e);case jr:return qB;case Boolean:return vFe;case String:return _Fe;case Date:return yFe;case KB:return xFe;default:return kI(EFe,t,()=>KO.bind(null,t))}}function qa(t,e){const n=SFe(t);return arguments.length===1?n:n(e)}function eA(t,e,n){return arguments.length===1?eA.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,n)):[t(e,n)])}function TFe(t,e){return arguments.length===1?eA(n=>qa(t,n)):eA(n=>qa(t,n),e)}function Qpe(t,e,n){return e!==0&&Array.isArray(n)?n.map(r=>Qpe(t,e-1,r)):t(n)}function cN(t,e,n){if(arguments.length===2)return s=>cN(t,e,s);if(!n)return n;n=Qpe(t,e,n);let r=e,i=n;for(;r>0&&Array.isArray(i);)r--,i=i[0];if(i!==void 0)for(let s=0;s<r;s++)n=[n];return n}function kFe(t,e,n){return arguments.length===2?cN(r=>qa(t,r),e):cN(r=>qa(t,r),e,n)}function eme(t){return!!Array.isArray(t)&&!t.some(e=>{const n=typeof e;return!(n==="string"||n==="number"||n==="function"&&t.length>1)})}function I9(t,e){if(arguments.length===2)return I9(t).call(null,e);const n=new Set,r=t.filter(a=>typeof a!="function"),i=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||n.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,u=c==="string"||c==="number";return u&&(n.has(a)||i.some(h=>c==="string"&&h===String||c==="number"&&h===Number))||c==="object"&&i.some(h=>!lN(h,a))?a:(u&&r.length?(s||(s=r.map(h=>typeof h=="string"?`'${h}'`:`${h}`).join(", ")),u1().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&i.length?(o||(o=i.map(h=>YO(h)).join(", ")),u1().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):u1().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Kg(t,e){if(arguments.length===2)return Kg(t).call(null,e);const n={},r=[],i=[];for(const l in t.typeMap){const c=t.typeMap[l];n[l]=qa(c),r.push(YO(c)),i.push(l)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${i.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!lN(t.base,l)||l==null)return l;const c=a(l)||t.defaultKeyValue,u=n[c];if(!u)return u1().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!lN(t.typeMap[c],l))return l;if(typeof t.key=="string"&&!Zpe(l)){const h={};for(const f in l)f!==t.key&&(h[f]=l[f]);return u(h)}return u(l)}}let jr=class{},KB=class{};const $Pt={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function AFe(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function tme(t){switch(t.type){case"native":return qa(t.value);case"array":return eA(tme(t.value));case"one-of":return IFe(t);default:return null}}function IFe(t){let e=null;return(n,r)=>C9(n,t)?n:(e==null&&(e=P9(t)),u1().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function P9(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case jr:return"integer";case Date:return"date";case KB:return"null";default:return YO(t.value)}case"array":return`array of ${P9(t.value)}`;case"one-of":{const e=t.values.map(n=>P9(n));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function C9(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case jr:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case KB:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(n=>!C9(n,e.value));case"one-of":return e.values.some(n=>C9(t,n))}}function E(t={}){return(e,n)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${n}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,n),i=CI(e,n);r&&(r.get||r.set?(i.get=r.get||i.get,i.set=r.set||i.set):"value"in r&&("value"in t&&kt.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${n}" on "${e.constructor.name}" already defined in the metadata`,t),i.value=t.value=r.value)),t.readOnly!=null&&(i.readOnly=t.readOnly);const s=t.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let u;i.dependsOn=[l],i.get=function(){let h=wd(this,l);if(typeof h=="function"){u||(u=l.split(".").slice(0,-1).join("."));const f=wd(this,u);f&&(h=h.bind(f))}return h},i.readOnly||(i.set=c?function(h){this._override(n,h)}:function(h){tN(this,l,h)})}const o=t.type,a=t.types;if(!i.cast){let l;o?l=PFe(o):a&&(l=Array.isArray(a)?eA(Kg(a[0])):Kg(a)),t.cast=CFe(t.cast,l)}w$e(i,t),t.range&&(i.cast=wFe(i.cast,t.range))}}function YB(t,e,n){const r=CI(t,n);r.json||(r.json={});let i=r.json;return e!==void 0&&(i.origins||(i.origins={}),i.origins[e]||(i.origins[e]={}),i=i.origins[e]),i}function PFe(t){let e=0,n=t;if(AFe(t))return tme(t);for(;Array.isArray(n)&&n.length===1&&typeof n[0]!="string"&&typeof n[0]!="number";)n=n[0],e++;const r=n;if(eme(r))return e===0?I9(r):cN(I9(r),e);if(e===1)return TFe(r);if(e>1)return kFe(r,e);const i=t;return i.from?i.from:qa(i)}function CFe(t,e){if(t||e)return t?e?(n,r)=>e(t(n,r),r):t:e}function RFe(t){if(t.json&&t.json.origins){const e=t.json.origins,n={"web-document":["web-scene","web-map"]};for(const r in n)if(e[r]){const i=e[r];n[r].forEach(s=>{e[s]=i}),delete e[r]}}}let zd=class extends Hfe{constructor(e,n,r){super(e,n,r)}};zd.prototype.type="warning";function nme(t){return!!t&&t.prototype?.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}function MFe(t,e){return XB(t,"any",e?.origin)}function uN(t,e){return XB(t,"read",e?.origin)}function rme(t,e){return XB(t,"write",e?.origin)}function XB(t,e,n){let r=t?.json;if(r?.origins&&n){let i;i=n==="link-chart"?r.origins[n]&&(e==="any"||e in r.origins[n])?r.origins[n]:r.origins["web-map"]:r.origins[n],i&&(e==="any"||e in i)&&(r=i)}return r}const R9=()=>kt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function $ee(t,e,n){t&&(!n&&!e.read||e.read?.reader||e.read?.enabled===!1||LFe(t)&&yb("read.reader",ZB(t),e))}function ZB(t){const e=t.ndimArray??0;if(e>1)return OFe(t);if(e===1)return Fee(t);if("type"in t&&sme(t.type)){const n=t.type.prototype?.itemType?.Type,r=Fee(typeof n=="function"?{type:n}:{types:n});return(i,s,o)=>{const a=r(i,s,o);return a&&new t.type(a)}}return JB(t)}function JB(t){return"type"in t?NFe(t.type):DFe(t.types)}function NFe(t){return t.prototype.read?(e,n,r)=>{if(e==null)return e;const i=typeof e;if(i!=="object")return void R9().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${i}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function ime(t,e,n,r){return r!==0&&Array.isArray(e)?e.map(i=>ime(t,i,n,r-1)):t(e,void 0,n)}function OFe(t){const e=JB(t),n=ime.bind(null,e),r=t.ndimArray??0;return(i,s,o)=>{if(i==null)return i;i=n(i,o,r);let a=r,l=i;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)i=[i];return i}}function Fee(t){const e=JB(t);return(n,r,i)=>{if(n==null)return n;if(Array.isArray(n)){const o=[];for(const a of n){const l=e(a,void 0,i);l!==void 0&&o.push(l)}return o}const s=e(n,void 0,i);return s!==void 0?[s]:void 0}}function sme(t){if(!nme(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?QB(e.Type):ome(e.Type))}function LFe(t){return"types"in t?ome(t.types):QB(t.type)}function QB(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||sme(t))}function ome(t){for(const e in t.typeMap)if(!QB(t.typeMap[e]))return!1;return!0}function DFe(t){let e=null;const n=t.errorContext??"type",r=t.validate;return(i,s,o)=>{if(i==null)return i;const a=typeof i;if(a!=="object")return void R9().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=$Fe(t));const l=t.key;if(typeof l!="string")return;const c=i[jFe(l,e,o)],u=c?e[c]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!u){const f=`Type '${c||"unknown"}' is not supported`;return o?.messages&&i&&o.messages.push(new zd(`${n}:unsupported`,f,{definition:i,context:o})),void R9().error(f)}const h=new u;return h.read(i,o),r?r(h):h}}function jFe(t,e,n){const r=Object.values(e)[0],i=Sb(r.prototype)[t],s=uN(i,n),o=s?.read?.source;return o&&typeof o=="string"?o:t}function $Fe(t){const e={};for(const n in t.typeMap){const r=t.typeMap[n],i=Sb(r.prototype);if(typeof t.key=="function")continue;const s=i[t.key];if(!s)continue;if(s.json?.type&&Array.isArray(s.json.type)&&s.json.type.length===1&&typeof s.json.type[0]=="string"){e[s.json.type[0]]=r;continue}const o=s.json?.write;if(!o?.writer){e[n]=r;continue}const a=o.target,l=typeof a=="string"?a:t.key,c={};o.writer(n,c,l),c[l]&&(e[c[l]]=r)}return e}function FFe(t){if(t.json||(t.json={}),zee(t.json),Gee(t.json),Vee(t.json),t.json.origins)for(const e in t.json.origins)zee(t.json.origins[e]),Gee(t.json.origins[e]),Vee(t.json.origins[e]);return!0}function Vee(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function zee(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function Gee(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function Uee(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const n=t?.ndimArray??0;t&&(n===1||"type"in t&&nme(t.type))?e.write.writer=GFe:n>1?e.write.writer=UFe(n):e.types?Array.isArray(e.types)?e.write.writer=zFe(e.types[0]):e.write.writer=VFe(e.types):e.write.writer=tA}function VFe(t){return(e,n,r,i)=>e?ame(e,t,i)?tA(e,n,r,i):void 0:tA(e,n,r,i)}function ame(t,e,n){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(n?.messages){const r=e.errorContext??"type",i=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;n&&n.messages&&t&&n.messages.push(new Xe(`${r}:unsupported`,i,{definition:t,context:n})),kt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(i)}return!1}function zFe(t){return(e,n,r,i)=>!e||!Array.isArray(e)?tA(e,n,r,i):tA(e.filter(s=>ame(s,t,i)),n,r,i)}function tA(t,e,n,r){yb(n,hN(t,r),e)}function hN(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?dN(t):t}function dN(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function GFe(t,e,n,r){let i;t===null?i=null:t&&typeof t.map=="function"?(i=t.map(s=>hN(s,r)),typeof i.toArray=="function"&&(i=i.toArray())):i=[hN(t,r)],yb(n,i,e)}function lme(t,e,n){return n!==0&&Array.isArray(t)?t.map(r=>lme(r,e,n-1)):hN(t,e)}function UFe(t){return(e,n,r,i)=>{let s;if(e===null)s=null;else{s=lme(e,i,t);let o=t,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}yb(r,s,n)}}function BFe(t){const e=WFe(t);if(t.json.origins)for(const n in t.json.origins){const r=t.json.origins[n],i=r.types?HFe(r):e;$ee(i,r,!1),r.types&&!r.write&&t.json.write?.enabled&&(r.write={...t.json.write}),Uee(i,r)}$ee(e,t.json,!0),Uee(e,t.json)}function WFe(t){return t.json.types?M9(t.json):t.type?cme(t):M9(t)}function HFe(t){return t.type?cme(t):M9(t)}function cme(t){if(!t.type)return;let e=0,n=t.type;for(;Array.isArray(n)&&!eme(n);)n=n[0],e++;return{type:n,ndimArray:e}}function M9(t){if(!t.types)return;let e=0,n=t.types;for(;Array.isArray(n);)n=n[0],e++;return{types:n,ndimArray:e}}function qFe(t){FFe(t)&&(RFe(t),BFe(t))}const Vj=new Set,zj=new Set;function ue(t){return e=>{t??="esri.core.Accessor",e.prototype.declaredClass=t,YFe(e);const n=[],r=[];let i=e.prototype;for(;i;)i.hasOwnProperty("initialize")&&!Vj.has(i.initialize)&&(Vj.add(i.initialize),n.push(i.initialize)),i.hasOwnProperty("destroy")&&!zj.has(i.destroy)&&(zj.add(i.destroy),r.push(i.destroy)),i=Object.getPrototypeOf(i);Vj.clear(),zj.clear();const s=class extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(n.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=n.length-1;l>=0;l--)n[l].call(this)}}),r.length){let l=!1;const c=this[Ipe];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){this.__accessor__.lifecycle=oc.DESTROYING,l=!0,c.call(this);for(let u=0;u<r.length;u++)r[u].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=Sb(e.prototype),s.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function KFe(t,e){return e.get==null?function(){const n=this.__accessor__,r=n.propertiesByName.get(t);if(r===void 0)return;n.mutable&&sn(r);const i=n.store;return i.has(t)?i.get(t):r.metadata.value}:function(){const n=this.__accessor__,r=n.propertiesByName.get(t);if(r!==void 0)return r.getComputed(n)}}function YFe(t){const e=t.prototype,n=Sb(e),r={};for(const i of Object.getOwnPropertyNames(n)){const s=n[i];qFe(s),r[i]={enumerable:!0,configurable:!0,get:KFe(i,s),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&s.readOnly?Bee("read-only",i):a.lifecycle===oc.CONSTRUCTED&&s.constructOnly?Bee("construct-only",i):void a.set(i,o)}else Object.defineProperty(this,i,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}const Bee=(t,e)=>{kt.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var Wee,Hee;function XFe(t){if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const mm=Symbol("Accessor-Handles"),Gj=Symbol("Accessor-Initialized");var jg;let Kt=(jg=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:n,declaredClass:r,constructor:i}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,i&&i.apply(this,l)}}Sb(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...c){const u=this.inherited;let h;this.inherited=function(...f){if(s.prototype[a])return s.prototype[a].apply(this,f)};try{h=l.apply(this,c)}catch(f){throw this.inherited=u,f}return this.inherited=u,h}:e[a]}for(const a in n){const l=XFe(n[a]);E(l)(o.prototype,a)}return ue(r)(o)}static freeze(e){return e instanceof jg?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof jg?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){if(this[Wee]=null,this[Hee]=!1,this.constructor===jg)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const n=new C$e(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:n}),e.length>0&&(n.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0])}postscript(){const e=this.__accessor__,n=e.ctorArgs;e.initialize(),n&&(this.set(n),e.ctorArgs=null),e.constructed(),this.initialize(),this[Gj]=!0}initialize(){}[Ipe](){this[mm]=Di(this[mm])}destroy(){this.destroyed||(aFe(this),this.__accessor__.destroy(),D$e()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Gj]}get destroyed(){return this.__accessor__?.lifecycle===oc.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===oc.DESTROYING||!1}commitProperty(e){wd(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,n){return tN(this,e,n),this}watch(e,n,r){return Ape(kt.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),fFe(this,e,n,r)}addHandles(e,n){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const i of r)i.remove();return}(this[mm]??=new Eb).add(e,n)}removeHandles(e){this[mm]?.remove(e)}removeAllHandles(){this[mm]?.removeAll()}removeHandlesReference(e){this[mm]?.removeReference(e)}hasHandles(e){return this[mm]?.has(e)===!0}_override(e,n){n===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,n)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,n){n==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,n)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,n){return this.__accessor__.internalSet(e,n),this}},Wee=mm,Hee=Gj,jg);const XO=t=>{const e=t;class n extends e{constructor(){super(...arguments),this._listenersMap=null}clearEvents(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clearEvents()}emit(i,s){let o=this._listenersMap?.get(i);if(!o)return!1;let a=!1;for(const l of o.slice()){const c="deref"in l?l.deref():l;c?c?.call(this,s):a=!0}return a&&(o=o.filter(l=>!("deref"in l)||l.deref()!=null),this._listenersMap.set(i,o)),o.length>0}on(i,s){if(Array.isArray(i)){const a=i.map(l=>this.on(l,s));return xv(a)}if(i.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const o=this._listenersMap.get(i)||[];return o.push(s),this._listenersMap.set(i,o),Zn(()=>{const a=this._listenersMap?.get(i),l=a?.indexOf(s)??-1;l>=0&&a.splice(l,1)})}once(i,s){const o=this.on(i,a=>{o.remove(),("deref"in s?s.deref():s)?.call(null,a)});return o}hasEventListener(i){const s=this._listenersMap?.get(i);return s!=null&&s.length>0}}return n},ume=XO(class{}),ZFe=ume,RI=XO(Kt);function hme(t){return(e,n)=>{e[n]=t}}let MI=class extends Npe{notify(){const e=this._observers;if(e&&e.length>0){const n=e.slice();for(const r of n)r.onInvalidated(),r.onCommitted()}}};var Sf;let JFe=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},QFe=class{constructor(e,n,r,i,s){this.target=e,this.added=n,this.removed=r,this.start=i,this.deleteCount=s}};const jc=new bb(()=>new JFe,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function qee(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function Uj(t){return t?t instanceof Um?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function Bj(t){if(t?.length)return t[0]}function e8e(t,e,n,r){const i=Math.min(t.length-n,e.length-r);let s=0;for(;s<i&&t[n+s]===e[r+s];)s++;return s}function dme(t,e,n,r){e&&e.forEach((i,s,o)=>{t.push(i),dme(t,n.call(r,i,s,o),n,r)})}const gm=new Set,ym=new Set,vm=new Set,Wj=new Map;let t8e=0,Um=Sf=class extends RI{static ofType(t){if(!t)return Sf;if(Wj.has(t))return Wj.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const i=t.typeMap[r].prototype.declaredClass;e?e+=` | ${i}`:e=i}let n=class extends Sf{};return x([hme({Type:t,ensureType:typeof t=="function"?qa(t):Kg(t)})],n.prototype,"itemType",void 0),n=x([ue(`esri.core.Collection<${e}>`)],n),Wj.set(t,n),n}static isCollection(t){return t!=null&&t instanceof Sf}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new MI,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:t8e++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Sf?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return sn(this._observable),this._items}set items(t){this._emitBeforeChanges(1)||(this._splice(0,this.length,Uj(t)),this._emitAfterChanges(1))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:super.hasEventListener(t))}on(t,e){if(this.destroyed)return Zn();if(t==="change"){const n=this._chgListeners,r={removed:!1,callback:e};return n.push(r),this._notifications&&this._notifications.push({listeners:n.slice(),items:this._items.slice(),changes:[]}),Zn(()=>{r.removed=!0,n.splice(n.indexOf(r),1)})}return super.on(t,e)}once(t,e){const n="deref"in e?()=>e.deref():()=>e,r=this.on(t,i=>{n()?.call(null,i),r.remove()});return r}add(t,e){if(sn(this._observable),this._emitBeforeChanges(1))return this;const n=this.getNextIndex(e??null);return this._splice(n,0,[t]),this._emitAfterChanges(1),this}addMany(t,e=this._items.length){if(sn(this._observable),!t?.length)return this;if(this._emitBeforeChanges(1))return this;const n=this.getNextIndex(e);return this._splice(n,0,Uj(t)),this._emitAfterChanges(1),this}at(t){if(sn(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(sn(this._observable),!this.length||this._emitBeforeChanges(2))return[];const t=this._removeAllRaw();return this._emitAfterChanges(2),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return sn(this._observable),this._createNewInstance({items:this._items.map(Ze)})}concat(...t){sn(this._observable);const e=t.map(Uj);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(sn(this._observable),!this.length||this._emitBeforeChanges(2))return;const n=this._splice(0,this.length),r=n.length;for(let i=0;i<r;i++)t.call(e,n[i],i,n);this._emitAfterChanges(2)}destroyAll(){this.drain(qee)}destroyMany(t){const e=this.removeMany(t);return e.forEach(qee),e}every(t,e){return sn(this._observable),this._items.every(t,e)}filter(t,e){sn(this._observable);const n=arguments.length===2?this._items.filter(t,e):this._items.filter(t);return this._createNewInstance({items:n})}find(t,e){return sn(this._observable),this._items.find(t,e)}findIndex(t,e){return sn(this._observable),this._items.findIndex(t,e)}flatten(t,e){sn(this._observable);const n=[];return dme(n,this,t,e),new Sf(n)}forEach(t,e){return sn(this._observable),this._items.forEach(t,e)}getItemAt(t){return sn(this._observable),this._items[t]}getNextIndex(t){sn(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return sn(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return sn(this._observable),this._items.indexOf(t,e)}join(t=","){return sn(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return sn(this._observable),this._items.lastIndexOf(t,e)}map(t,e){sn(this._observable);const n=this._items.map(t,e);return new Sf({items:n})}reorder(t,e=this.length-1){sn(this._observable);const n=this.indexOf(t);if(n!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),n!==e){if(this._emitBeforeChanges(4))return t;this._splice(n,1),this._splice(e,0,[t]),this._emitAfterChanges(4)}return t}}pop(){if(sn(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=Bj(this._splice(this.length-1,1));return this._emitAfterChanges(2),t}push(...t){return sn(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,t),this._emitAfterChanges(1)),this.length}reduce(t,e){sn(this._observable);const n=this._items;return arguments.length===2?n.reduce(t,e):n.reduce(t)}reduceRight(t,e){sn(this._observable);const n=this._items;return arguments.length===2?n.reduceRight(t,e):n.reduceRight(t)}remove(t){return sn(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(sn(this._observable),t<0||t>=this.length||this._emitBeforeChanges(2))return;const e=Bj(this._splice(t,1));return this._emitAfterChanges(2),e}removeMany(t){if(sn(this._observable),!t?.length||this._emitBeforeChanges(2))return[];const e=t instanceof Sf?t.toArray():t,n=this._items,r=[],i=e.length;for(let s=0;s<i;s++){const o=e[s],a=n.indexOf(o);if(a>-1){const l=1+e8e(e,n,s+1,a+1),c=this._splice(a,l);c&&c.length>0&&r.push.apply(r,c),s+=l-1}}return this._emitAfterChanges(2),r}reverse(){if(sn(this._observable),this._emitBeforeChanges(4))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(4),this}shift(){if(sn(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=Bj(this._splice(0,1));return this._emitAfterChanges(2),t}slice(t=0,e=this.length){return sn(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return sn(this._observable),this._items.some(t,e)}sort(t){if(sn(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(t))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(4),this}_requiresSort(t=(e,n)=>e===n?0:e<n?-1:1){const e=this.length-1;for(let n=0;n<e;n++)if(t(this.items[n],this.items[n+1])>0)return!0;return!1}splice(t,e,...n){sn(this._observable),arguments.length===1&&(e=this.length),e??=0;const r=(e?2:0)|(n.length?1:0);if(this._emitBeforeChanges(r))return[];const i=this._splice(t,e,n)||[];return this._emitAfterChanges(r),i}toArray(){return sn(this._observable),this._items.slice()}toJSON(t){return sn(this._observable),this.toArray().map(e=>W4(e)?e.toJSON(t):e)}toLocaleString(){return sn(this._observable),this._items.toLocaleString()}toString(){return sn(this._observable),this._items.toString()}unshift(...t){return sn(this._observable),!t.length||this._emitBeforeChanges(1)||(this._splice(0,0,t),this._emitAfterChanges(1)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,n){const r=this._items,i=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=Tb(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=r.splice(t,e),this.hasEventListener("before-remove")){const a=jc.acquire();a.target=this,a.cancellable=!0;for(let l=0,c=o.length;l<c;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),r.splice(t,0,s),t+=1,l-=1,c-=1);jc.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=jc.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let c=0;c<l;c++)a.reset(o[c]),this.emit("after-remove",a);jc.release(a)}}if(n?.length){if(i){const u=[];for(const h of n){const f=i.ensureType(h);f==null&&h!=null||u.push(f)}n=u}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),c=t===this.length;if(a||l){const u=jc.acquire();u.target=this,u.cancellable=!0;const h=jc.acquire();h.target=this,h.cancellable=!1;for(const f of n)a?(u.reset(f),this.emit("before-add",u),u.defaultPrevented||(c?r.push(f):r.splice(t++,0,f),this._set("length",r.length),l&&(h.reset(f),this.emit("after-add",h)))):(c?r.push(f):r.splice(t++,0,f),this._set("length",r.length),h.reset(f),this.emit("after-add",h));jc.release(h),jc.release(u)}else{if(c)for(const u of n)r.push(u);else r.splice(t,0,...n);this._set("length",r.length)}}if((n?.length||o?.length)&&this._notifyChangeEvent(n,o),this.hasEventListener("after-splice")){const a=new QFe(this,n,o,t,e);this.emit("after-splice",a)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const n=jc.acquire();n.target=this,n.cancellable=!0,n.type=t,this.emit("before-changes",n),e=n.defaultPrevented,jc.release(n)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=jc.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),jc.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const n=e.changes;gm.clear(),ym.clear(),vm.clear();for(const{added:l,removed:c}of n){if(l)if(vm.size===0&&ym.size===0)for(const u of l)gm.add(u);else for(const u of l)ym.has(u)?(vm.add(u),ym.delete(u)):vm.has(u)||gm.add(u);if(c)if(vm.size===0&&gm.size===0)for(const u of c)ym.add(u);else for(const u of c)gm.has(u)?gm.delete(u):(vm.delete(u),ym.add(u))}const r=La.acquire();gm.forEach(l=>{r.push(l)});const i=La.acquire();ym.forEach(l=>{i.push(l)});const s=this._items,o=e.items,a=La.acquire();if(vm.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),e.listeners&&(r.length||i.length||a.length)){const l={target:this,added:r,removed:i,moved:a},c=e.listeners.length;for(let u=0;u<c;u++){const h=e.listeners[u];h.removed||h.callback.call(this,l)}}La.release(r),La.release(i),La.release(a)}gm.clear(),ym.clear(),vm.clear()}};x([E()],Um.prototype,"_updating",void 0),x([E()],Um.prototype,"length",void 0),x([E()],Um.prototype,"items",null),x([E({readOnly:!0})],Um.prototype,"updating",null),Um=Sf=x([ue("esri.core.Collection")],Um);const Ot=Um;function Id(t,e,n=Ot){return e||(e=new n),e===t||e.destroyed||(e.removeAll(),n8e(t)?e.addMany(t):t&&e.add(t)),e}function fme(t){return t}function n8e(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}let r8e=class pme{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const n=new pme;return this._values.forEach((r,i)=>{e&&e.has(i)||n.set(i,Ze(r.value),r.origin)}),n}get(e,n){n=this._normalizeOrigin(n);const r=this._values.get(e);return n==null||r?.origin===n?r?.value:void 0}originOf(e){return this._values.get(e)?.origin??7}keys(e){e=this._normalizeOrigin(e);const n=[...this._values.keys()];return e==null?n:n.filter(r=>this._values.get(r)?.origin===e)}set(e,n,r){if((r=this._normalizeOrigin(r))===0){const i=this._values.get(e);if(i?.origin!=null&&i.origin>r)return}this._values.set(e,new i8e(n,r))}delete(e,n){(n=this._normalizeOrigin(n))!=null&&this._values.get(e)?.origin!==n||this._values.delete(e)}has(e,n){return(n=this._normalizeOrigin(n))!=null?this._values.get(e)?.origin===n:this._values.has(e)}isAtOrigin(e,n){return n=this._normalizeOrigin(n),this.has(e,n)&&this.originOf(e)===n}isBelowOrigin(e,n){return n=this._normalizeOrigin(n),!this.has(e)||this.originOf(e)<n}forEach(e){this._values.forEach(({value:n},r)=>e(n,r))}_normalizeOrigin(e){if(e!=null)return e===0?e:7}},i8e=class{constructor(e,n){this.value=e,this.origin=n}};function s8e(t,e,n){e.keys().forEach(i=>{n.set(i,e.get(i),0)});const r=t.metadata;Object.keys(r).forEach(i=>{t.internalGet(i)&&n.set(i,t.internalGet(i),0)})}function o8e(t,e,n){if(!t?.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.startsWith(e)&&Pee(r,n))return!0}else for(const i of r)if(i===e||i.includes(".")&&i.startsWith(e)&&Pee(i,n))return!0;return!1}function a8e(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function l8e(t,e,n,r,i){let s=uN(e[n],i);a8e(s)&&(t[n]=!0);for(const o of Object.getOwnPropertyNames(e))s=uN(e[o],i),o8e(s,n,r)&&(t[o]=!0)}function c8e(t,e,n,r){const i=n.metadata,s=MFe(i[e],r),o=s?.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&n.set(e,a)}const mme={origin:"service"};function u8e(t,e,n=mme){if(!e||typeof e!="object")return;const r=qg(t),i=r.metadata,s={};for(const o of Object.getOwnPropertyNames(e))l8e(s,i,o,e,n);r.setDefaultOrigin(n.origin);for(const o of Object.getOwnPropertyNames(s)){const a=uN(i[o],n).read,l=a?.source;let c;c=l&&typeof l=="string"?PI(e,l):e[o],a?.reader&&(c=a.reader.call(t,c,e,n)),c!==void 0&&r.set(o,c)}if(!n||!n.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(i))s[o]||c8e(t,o,r,n)}r.setDefaultOrigin("user")}function BPt(t,e,n,r=mme){const i={...r,messages:[]};n(i),i.messages?.forEach(s=>{s.type!=="warning"||t.loaded?r?.messages&&r.messages.push(s):t.loadWarnings.push(s)})}function h8e(t,e,n,r,i){const s={};return e.write?.writer?.call(t,r,s,n,i),s}function gme(t,e,n,r,i,s){if(!r?.write)return!1;const o=wd(t,n);if(!i&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,n,s??void 0);a!==void 0&&(i=a)}if(i||(i=r.write),!i||i.enabled===!1||i.layerContainerTypes&&s?.layerContainerType&&!i.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!i.allowNull&&!i.writerEnsuresNonNull||o===void 0)&&i.isRequired){const a=new Xe("web-document-write:property-required",`Missing value for required property '${n}' on '${t.declaredClass}'`,{propertyName:n,target:t});return a&&s?.messages?s.messages.push(a):a&&!s&&kt.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!i.allowNull&&!i.writerEnsuresNonNull||!i.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(n)===0)&&d8e(t,n,s,r,o)||!i.ignoreOrigin&&s?.origin&&e.store.multipleOriginsSupported&&e.store.originOf(n)<UB(s.origin))}function d8e(t,e,n,r,i){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(i);if(typeof s=="function"){if(Array.isArray(i)){const o=s.call(t,e,n??void 0);return jO(o,i)}return!1}return s===i}function WPt(t,e,n,r){const i=qg(t),s=i.metadata,o=rme(s[e],r);return!!o&&gme(t,i,e,o,n,r)}function f8e(t,e,n){if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return IM(e,t.toJSON(n));const r=qg(t),i=r.metadata;for(const s in i){const o=rme(i[s],n);if(!gme(t,r,s,o,void 0,n))continue;const a=wd(t,s),l=h8e(t,o,o.write&&typeof o.write.target=="string"?o.write.target:s,a,n);Object.keys(l).length>0&&(e=IM(e,l),n?.resources?.pendingOperations?.length&&n.resources.pendingOperations.push(Promise.all(n.resources.pendingOperations).then(()=>IM(e,l,()=>"replace-arrays"))),n?.writtenProperties&&n.writtenProperties.push({target:t,propName:s,oldOrigin:I$e(r.store.originOf(s)),newOrigin:n.origin}))}return e}const m0=t=>{const e=t;let n=class extends e{constructor(...r){super(...r);const i=qg(this),s=i.store,o=new r8e;i.store=o,s8e(i,s,o)}read(r,i){u8e(this,r,i)}write(r,i){return f8e(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return p8e.call(this,r,i)}};return n=x([ue("esri.core.JSONSupport")],n),n.prototype.toJSON.isDefaultToJSON=!0,n};function p8e(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const n=new this;return n.read(t,e),n}const qt=m0(Kt);let m8e=class{constructor(){this._resolver=bc(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===1}isRejected(){return this._status===2}isFulfilled(){return this._status!==0}abort(){this._resolver.reject(Cr())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=bc(),n=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(n);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},i=>{this.isFulfilled()||this._allPromise!==r||Ea(i)||this._resolver.reject(i)}),e.resolve()}};const yme=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this._promiseProps=new m8e,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then(()=>this).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}addResolvingTask(r){r&&!this._promiseProps.isFulfilled()&&(this.addHandles(Cje(r)),this._promiseProps.addResolvingPromise(r.promise))}};return n=x([ue("esri.core.Promise")],n),n},eW=yme(Kt),g8e="not-loaded",y8e="loading",v8e="failed",Kee="loaded",_8e=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const s=this.load.bind(this);this.load=o=>{const a=new Promise((l,c)=>{const u=jB(o,c);this.destroyed&&c(new Xe("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,c).finally(()=>{u&&u.remove()})});if(this.loadStatus===g8e){this._set("loadStatus",y8e);const l=this._loadController=new AbortController;s({signal:l.signal})}return i(),a}})),this.when(()=>{this._set("loadStatus",Kee),this._loadController=null},i=>{this.destroyed||(this._set("loadStatus",v8e),this._set("loadError",i),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=B1(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===Kee}get loadWarnings(){return this._get("loadWarnings")}load(r){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new Xe("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return x([E({readOnly:!0})],n.prototype,"loaded",null),x([E({readOnly:!0})],n.prototype,"loadError",void 0),x([E({clonable:!1})],n.prototype,"loadStatus",void 0),x([E({type:[zd],readOnly:!0})],n.prototype,"loadWarnings",null),n=x([ue("esri.core.Loadable")],n),n},NI=_8e(eW);function N9(t){return!(!t||!t.load)}function qPt(t,e,n){return $B(t.map((r,i)=>e.apply(n,[r,i])))}async function x8e(t,e,n){return(await $B(t.map((r,i)=>e.apply(n,[r,i])))).map(r=>r.value)}function tW(t){return{ok:!0,value:t}}function nW(t){return{ok:!1,error:t}}function w8e(t){return t!=null&&t.ok===!0?t.value:null}function b8e(t){return t!=null&&t.ok===!1?t.error:null}async function vme(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return tW(await t)}catch(e){return nW(e)}}async function KPt(t){try{return tW(await t)}catch(e){return fpe(e),nW(e)}}function ZO(t,e){return new Pm(t,e)}let Pm=class extends Kt{get value(){return w8e(this._result)}get error(){return b8e(this._result)}get finished(){return this._result!=null}constructor(e,n){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=B1(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(i=>{this._result=tW(i),this._cleanup()},i=>{this._result=nW(i),this._cleanup()}),this._abortHandle=yu(n,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=ii(this._abortHandle),this._abortController=null}};x([E()],Pm.prototype,"value",null),x([E()],Pm.prototype,"error",null),x([E()],Pm.prototype,"finished",null),x([E()],Pm.prototype,"promise",void 0),x([E()],Pm.prototype,"_result",void 0),Pm=x([ue("esri.core.asyncUtils.ReactiveTask")],Pm);async function _me(t,e){return await t.load(),E8e(t,e)}async function E8e(t,e){const n=[],r=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?r(...o):Ot.isCollection(o)?o.forEach(a=>r(a)):N9(o)&&n.push(o))};e(r);let i=null;if(await x8e(n,async s=>{const o=await vme(S8e(s)?s.loadAll():s.load());o.ok!==!1||i||(i=o)}),i)throw i.error;return t}function S8e(t){return"loadAll"in t&&typeof t.loadAll=="function"}function er(t,e,n){let r,i;return e===void 0?(i=t,r=[void 0]):typeof e!="string"?(i=t,r=[void 0],n=e):(i=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;for(const l of r){const c=YB(s,l,i);c.write&&typeof c.write=="object"||(c.write={}),n&&(c.write.target=n),c.write.writer=a[o]}}}let Xs=class{constructor(e,n={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=n,this.apiValues=[],this.jsonValues=[],this._apiToJSON=T8e(e),this.apiValues=Yee(this._apiToJSON),this.jsonValues=Yee(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,i,s)=>{const o=this.toJSON(r);o!==void 0&&yb(s,o,i)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const n=this._apiToJSON[e];return this._options.useNumericKeys?+n:n}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function T8e(t){const e={};for(const n in t)e[t[n]]=n;return e}function Yee(t){const e=[];for(const n in t)e.push(n);return e.sort(),e}function Dl(){return function(t,e){return new Xs(t,{ignoreUnknown:!0,...e})}}let rW=class{constructor(e,n,r,i,s,o){this.semiMajorAxis=e,this.flattening=n,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=i,this.scaleHeight=s;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const is=new rW(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Pd=new rW(3396190,1/169.8944472236118,23e4,6e4,.111),Yg=new rW(1737400,0,0,0,0);function Hi(t){if(!nr.assetsPath)throw kt.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new Xe("assets:path-not-set","config.assetsPath is not set");return SI(nr.assetsPath,t)}let Hj,pe=null;function xme(){return!!pe}function k8e(){return!!_e("esri-wasm")}function A8e(){return Hj||(Hj=ve(async()=>{const{default:t}=await import("./pe-wasm-B87Q3u4k.js");return{default:t}},[]).then(({default:t})=>t({locateFile:e=>Hi(`esri/geometry/support/${e}`)})).then(t=>{kme(t)}),Hj)}const NM={geogToProj(t,e,n){pe.ensureCache.prepare();const r=H1(n),i=n===r,s=pe.ensureFloat64(r),o=pe._pe_geog_to_proj(pe.getPointer(t),e,s);return o&&Xg(n,e,s,i),o},projGeog(t,e,n,r){switch(r){case $i.PE_TRANSFORM_P_TO_G:return NM.projToGeog(t,e,n);case $i.PE_TRANSFORM_G_TO_P:return NM.geogToProj(t,e,n)}return 0},projToGeog:(t,e,n)=>NM.projToGeogCenter(t,e,n,0),projToGeogCenter(t,e,n,r){pe.ensureCache.prepare();const i=H1(n),s=n===i,o=pe.ensureFloat64(i),a=pe._pe_proj_to_geog_center(pe.getPointer(t),e,o,r);return a&&Xg(n,e,o,s),a}};let $i=class pr{static init(){pr.PE_BUFFER_MAX=pe.PeDefs.prototype.PE_BUFFER_MAX,pr.PE_NAME_MAX=pe.PeDefs.prototype.PE_NAME_MAX,pr.PE_MGRS_MAX=pe.PeDefs.prototype.PE_MGRS_MAX,pr.PE_USNG_MAX=pe.PeDefs.prototype.PE_USNG_MAX,pr.PE_DD_MAX=pe.PeDefs.prototype.PE_DD_MAX,pr.PE_DDM_MAX=pe.PeDefs.prototype.PE_DDM_MAX,pr.PE_DMS_MAX=pe.PeDefs.prototype.PE_DMS_MAX,pr.PE_UTM_MAX=pe.PeDefs.prototype.PE_UTM_MAX,pr.PE_PARM_MAX=pe.PeDefs.prototype.PE_PARM_MAX,pr.PE_TYPE_NONE=pe.PeDefs.prototype.PE_TYPE_NONE,pr.PE_TYPE_GEOGCS=pe.PeDefs.prototype.PE_TYPE_GEOGCS,pr.PE_TYPE_PROJCS=pe.PeDefs.prototype.PE_TYPE_PROJCS,pr.PE_TYPE_GEOGTRAN=pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,pr.PE_TYPE_COORDSYS=pe.PeDefs.prototype.PE_TYPE_COORDSYS,pr.PE_TYPE_UNIT=pe.PeDefs.prototype.PE_TYPE_UNIT,pr.PE_TYPE_LINUNIT=pe.PeDefs.prototype.PE_TYPE_LINUNIT,pr.PE_STR_OPTS_NONE=pe.PeDefs.prototype.PE_STR_OPTS_NONE,pr.PE_STR_AUTH_NONE=pe.PeDefs.prototype.PE_STR_AUTH_NONE,pr.PE_STR_AUTH_TOP=pe.PeDefs.prototype.PE_STR_AUTH_TOP,pr.PE_STR_NAME_CANON=pe.PeDefs.prototype.PE_STR_NAME_CANON,pr.PE_STR_FMT_WKT=pe.PeDefs.prototype.PE_STR_FMT_WKT,pr.PE_STR_FMT_WKT2=pe.PeDefs.prototype.PE_STR_FMT_WKT2,pr.PE_PARM_X0=pe.PeDefs.prototype.PE_PARM_X0,pr.PE_PARM_ND=pe.PeDefs.prototype.PE_PARM_ND,pr.PE_TRANSFORM_1_TO_2=pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,pr.PE_TRANSFORM_2_TO_1=pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,pr.PE_TRANSFORM_P_TO_G=pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,pr.PE_TRANSFORM_G_TO_P=pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,pr.PE_HORIZON_RECT=pe.PeDefs.prototype.PE_HORIZON_RECT,pr.PE_HORIZON_POLY=pe.PeDefs.prototype.PE_HORIZON_POLY,pr.PE_HORIZON_LINE=pe.PeDefs.prototype.PE_HORIZON_LINE,pr.PE_HORIZON_DELTA=pe.PeDefs.prototype.PE_HORIZON_DELTA}},wme=null;const Xee={},Zee={},Jee=t=>{const e=t.getType();switch(e){case $i.PE_TYPE_GEOGCS:t=pe.castObject(t,pe.PeGeogcs);break;case $i.PE_TYPE_PROJCS:t=pe.castObject(t,pe.PeProjcs);break;case $i.PE_TYPE_GEOGTRAN:t=pe.castObject(t,pe.PeGeogtran);break;default:e&$i.PE_TYPE_UNIT&&(t=pe.castObject(t,pe.PeUnit))}return t},Q_={initialize(){pe.PeFactory.prototype.initialize(null)},coordsys:t=>Q_.factoryByType($i.PE_TYPE_COORDSYS,t),factoryByType(t,e){let n=null,r=Xee[t];if(r||(r={},Xee[t]=r),r.hasOwnProperty(String(e))&&(n=r[e],pe.compare(n,pe.NULL)&&(n=null)),!n){const i=pe.PeFactory.prototype.factoryByType(t,e);pe.compare(i,pe.NULL)||(n=Jee(i),r[e]=n)}return n},fromString(t,e){let n=null,r=Zee[t];if(r||(r={},Zee[t]=r),r.hasOwnProperty(e)&&(n=r[e],pe.compare(n,pe.NULL)&&(n=null)),!n){const i=pe.PeFactory.prototype.fromString(t,e);pe.compare(i,pe.NULL)||(n=Jee(i),r[e]=n)}return n},geogcs:t=>Q_.factoryByType($i.PE_TYPE_GEOGCS,t),geogtran:t=>Q_.factoryByType($i.PE_TYPE_GEOGTRAN,t),getCode:t=>pe.PeFactory.prototype.getCode(t),projcs:t=>Q_.factoryByType($i.PE_TYPE_PROJCS,t),unit:t=>Q_.factoryByType($i.PE_TYPE_UNIT,t)};let Qee,bme=null;const iW={PE_GTLIST_OPTS_COMMON:0,init(){iW.PE_GTLIST_OPTS_COMMON=pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,Qee=pe._pe_getPeGTlistExtendedEntrySize()},getGTlist(t,e,n,r,i,s){let o=null;const a=new pe.PeInteger(s);try{const l=pe.PeGTlistExtended.prototype.getGTlist(t,e,n,r,i,a);if((s=a.val)&&(o=[l],s>1)){const c=pe.getPointer(l);for(let u=1;u<s;u++)o.push(pe.wrapPointer(c+Qee*u,pe.PeGTlistExtendedEntry))}}finally{pe.destroy(a)}return o}},I8e={destroy(t){if(t?.length){for(const e of t)qu(e),e.getEntries().forEach(n=>{qu(n);const r=n.getGeogtran();qu(r),r.getParameters().forEach(qu),[r.getGeogcs1(),r.getGeogcs2()].forEach(i=>{qu(i);const s=i.getDatum();qu(s),qu(s.getSpheroid()),qu(i.getPrimem()),qu(i.getUnit())})});pe.PeGTlistExtendedEntry.prototype.Delete(t[0])}}},P8e={geogToGeog(t,e,n,r,i){pe.ensureCache.prepare();const s=H1(n),o=n===s,a=pe.ensureFloat64(s);let l=0;r&&(l=pe.ensureFloat64(r));const c=pe._pe_geog_to_geog(pe.getPointer(t),e,a,l,i);return c&&Xg(n,e,a,o),c}},C8e={geodesicCoordinate(t,e,n,r,i,s,o,a){pe.PeLineType.prototype.geodesic_coordinate(t,e,n,r,i,s,o,a)},geodeticCoordinate(t,e,n,r,i,s,o,a,l){pe.PeLineType.prototype.geodetic_coordinate(t,e,n,r,i,s,o,a,l)},geodeticDistance(t,e,n,r,i,s,o,a,l,c){pe.PeLineType.prototype.geodetic_distance(t,e,n,r,i,s,o,a,l,c)},greatEllipticDistance(t,e,n,r,i,s,o,a,l){pe.PeLineType.prototype.great_elliptic_distance(t,e,n,r,i,s,o,a,l)}},R8e={phiToEta:(t,e)=>pe.PeMath.prototype.phi_to_eta(t,e),etaToPhi:(t,e)=>pe.PeMath.prototype.eta_to_phi(t,e),phiToPhig:(t,e)=>pe.PeMath.prototype.phi_to_phig(t,e),q:(t,e,n)=>pe.PeMath.prototype.q(t,e,n),q90:(t,e)=>pe.PeMath.prototype.q90(t,e)},qj=(t,e,n,r,i,s)=>{let o,a;switch(pe.ensureCache.prepare(),t){case"dd":o=pe._pe_geog_to_dd,a=$i.PE_DD_MAX;break;case"ddm":o=pe._pe_geog_to_ddm,a=$i.PE_DDM_MAX;break;case"dms":o=pe._pe_geog_to_dms,a=$i.PE_DMS_MAX}let l=0;e&&(l=pe.getPointer(e));const c=H1(r),u=pe.ensureFloat64(c),h=JO(n,a),f=o(l,n,u,i,pe.ensureInt32(h));if(f)for(let g=0;g<n;g++)s[g]=pe.UTF8ToString(h[g]);return f},Kj=(t,e,n,r,i)=>{let s;switch(pe.ensureCache.prepare(),t){case"dd":s=pe._pe_dd_to_geog;break;case"ddm":s=pe._pe_ddm_to_geog;break;case"dms":s=pe._pe_dms_to_geog}let o=0;e&&(o=pe.getPointer(e));const a=r.map(h=>pe.ensureString(h)),l=pe.ensureInt32(a),c=pe.ensureFloat64(new Array(2*n)),u=s(o,n,l,c);return u&&Xg(i,n,c),u},M8e={geogToDms:(t,e,n,r,i)=>qj("dms",t,e,n,r,i),dmsToGeog:(t,e,n,r)=>Kj("dms",t,e,n,r),geogToDdm:(t,e,n,r,i)=>qj("ddm",t,e,n,r,i),ddmToGeog:(t,e,n,r)=>Kj("ddm",t,e,n,r),geogToDd:(t,e,n,r,i)=>qj("dd",t,e,n,r,i),ddToGeog:(t,e,n,r)=>Kj("dd",t,e,n,r)};let Eme=class ex{static init(){ex.PE_MGRS_STYLE_NEW=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,ex.PE_MGRS_STYLE_OLD=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,ex.PE_MGRS_STYLE_AUTO=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,ex.PE_MGRS_180_ZONE_1_PLUS=pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,ex.PE_MGRS_ADD_SPACES=pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}static geogToMgrsExtended(e,n,r,i,s,o,a){pe.ensureCache.prepare();let l=0;e&&(l=pe.getPointer(e));const c=H1(r),u=pe.ensureFloat64(c),h=JO(n,$i.PE_MGRS_MAX),f=pe.ensureInt32(h),g=pe._pe_geog_to_mgrs_extended(l,n,u,i,s,o,f);if(g)for(let y=0;y<n;y++)a[y]=pe.UTF8ToString(h[y]);return g}static mgrsToGeogExtended(e,n,r,i,s){pe.ensureCache.prepare();let o=0;e&&(o=pe.getPointer(e));const a=r.map(h=>pe.ensureString(h)),l=pe.ensureInt32(a),c=pe.ensureFloat64(new Array(2*n)),u=pe._pe_mgrs_to_geog_extended(o,n,l,i,c);return u&&Xg(s,n,c),u}};const N8e={geogToUsng(t,e,n,r,i,s,o){pe.ensureCache.prepare();let a=0;t&&(a=pe.getPointer(t));const l=H1(n),c=pe.ensureFloat64(l),u=JO(e,$i.PE_MGRS_MAX),h=pe.ensureInt32(u),f=pe._pe_geog_to_usng(a,e,c,r,i,s,h);if(f)for(let g=0;g<e;g++)o[g]=pe.UTF8ToString(u[g]);return f},usngToGeog(t,e,n,r){pe.ensureCache.prepare();let i=0;t&&(i=pe.getPointer(t));const s=n.map(c=>pe.ensureString(c)),o=pe.ensureInt32(s),a=pe.ensureFloat64(new Array(2*e)),l=pe._pe_usng_to_geog(i,e,o,a);return l&&Xg(r,e,a),l}};let Sme=class OM{static init(){OM.PE_UTM_OPTS_NONE=pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,OM.PE_UTM_OPTS_ADD_SPACES=pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,OM.PE_UTM_OPTS_NS=pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS}static geogToUtm(e,n,r,i,s){pe.ensureCache.prepare();let o=0;e&&(o=pe.getPointer(e));const a=H1(r),l=pe.ensureFloat64(a),c=JO(n,$i.PE_UTM_MAX),u=pe.ensureInt32(c),h=pe._pe_geog_to_utm(o,n,l,i,u);if(h)for(let f=0;f<n;f++)s[f]=pe.UTF8ToString(c[f]);return h}static utmToGeog(e,n,r,i,s){pe.ensureCache.prepare();let o=0;e&&(o=pe.getPointer(e));const a=r.map(h=>pe.ensureString(h)),l=pe.ensureInt32(a),c=pe.ensureFloat64(new Array(2*n)),u=pe._pe_utm_to_geog(o,n,l,i,c);return u&&Xg(s,n,c),u}};var fl;let Tme=(fl=class{static init(){fl.PE_PCSINFO_OPTION_NONE=pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,fl.PE_PCSINFO_OPTION_DOMAIN=pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,fl.PE_POLE_OUTSIDE_BOUNDARY=pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,fl.PE_POLE_POINT=pe.PePCSInfo.prototype.PE_POLE_POINT}static generate(e,n=fl.PE_PCSINFO_OPTION_DOMAIN){let r=null,i=null;return fl.cache.has(e)&&(i=fl.cache.get(e),i[n]&&(r=i[n])),r||(r=pe.PePCSInfo.prototype.generate(e,n),i||(i=[],fl.cache.set(e,i)),i[n]=r),r}},fl.cache=new Map,fl);const O8e={versionString:()=>pe.PeVersion.prototype.version_string()};function kme(t){function e(s,o,a){s[o]=a(s[o])}pe=t,$i.init(),iW.init(),Eme.init(),Sme.init(),Tme.init(),wme=class extends pe.PeDouble{constructor(s=NaN){super(s)}destroy(){pe.destroy(this)}[Symbol.dispose](){this.destroy()}},bme=class extends pe.PeGCSExtent{destroy(){pe.destroy(this)}[Symbol.dispose](){this.destroy()}};const n=[pe.PeAngunit,pe.PeDatum,pe.PeGeogcs,pe.PeGeogtran,pe.PeObject,pe.PeParameter,pe.PePrimem,pe.PeProjcs,pe.PeSpheroid,pe.PeUnit];for(const s of n)e(s.prototype,"getName",o=>function(){return o.call(this,new Array($i.PE_NAME_MAX))});for(const s of[pe.PeGeogtran,pe.PeProjcs])e(s.prototype,"getParameters",o=>function(){const a=new Array($i.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const u=pe.getValue(l,"*");a[c]=u?pe.wrapPointer(u,pe.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});e(pe.PeHorizon.prototype,"getCoord",s=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return Xg(l,a,s.call(this),o),l}),e(pe.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=pe._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!pe.compare(l,pe.NULL)){a=[l];const c=this.getSteps();if(c>1){const u=pe.getPointer(l);for(let h=1;h<c;h++)a.push(pe.wrapPointer(u+o*h,pe.PeGTlistExtendedGTs))}}return a}});const r=pe._pe_getPeHorizonSize(),i=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!pe.compare(l,pe.NULL)){a=[l];const c=l.getNump();if(c>1){const u=pe.getPointer(l);for(let h=1;h<c;h++)a.push(pe.wrapPointer(u+r*h,pe.PeHorizon))}}return o.set(s,a),a};e(pe.PeProjcs.prototype,"horizonGcsGenerate",i),e(pe.PeProjcs.prototype,"horizonPcsGenerate",i),pe.PeObject.prototype.toString=function(s=$i.PE_STR_OPTS_NONE){pe.ensureCache.prepare();const o=pe.getPointer(this),a=pe.ensureInt8(new Array($i.PE_BUFFER_MAX));return pe.UTF8ToString(pe._pe_object_to_string_ext(o,s,a))},pe.PeGeogcs.prototype.destroy=function(){this.Delete(),qu(this),this.ptr=0},pe.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},pe.PeProjcs.prototype.destroy=function(){this.Delete(),qu(this),this.ptr=0},pe.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function qu(t){if(!t)return;const e=pe.getClass(t);if(!e)return;const n=pe.getCache(e);if(!n)return;const r=pe.getPointer(t);r&&delete n[r]}function JO(t,e){const n=[],r=new Array(e);for(let i=0;i<t;i++)n.push(pe.ensureInt8(r));return n}function H1(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function Xg(t,e,n,r=!1){if(r)for(let i=0;i<2*e;i++)t[i]=pe.getValue(n+i*Float64Array.BYTES_PER_ELEMENT,"double");else{const i=t.length===0;for(let s=0;s<e;s++)i&&(t[s]=new Array(2)),t[s][0]=pe.getValue(n,"double"),t[s][1]=pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}const JPt=Object.freeze(Object.defineProperty({__proto__:null,PeCSTransformations:NM,PeDefs:$i,get PeDouble(){return wme},PeFactory:Q_,get PeGCSExtent(){return bme},PeGTTransformations:P8e,PeGTlistExtended:iW,PeGTlistExtendedEntry:I8e,PeLineType:C8e,PeMath:R8e,PeNotationDms:M8e,PeNotationMgrs:Eme,PeNotationUsng:N8e,PeNotationUtm:Sme,PePCSInfo:Tme,PeVersion:O8e,_init:kme,get _pe(){return pe},isLoaded:xme,isSupported:k8e,load:A8e},Symbol.toStringTag,{value:"Module"}));let v;const H={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(v=2e3;v<=2045;v++)H[v]=0;for(v=2056;v<=2065;v++)H[v]=0;for(v=2067;v<=2135;v++)H[v]=0;for(v=2137;v<=2154;v++)H[v]=0;for(v=2161;v<=2170;v++)H[v]=0;for(v=2172;v<=2193;v++)H[v]=0;for(v=2195;v<=2198;v++)H[v]=0;for(v=2200;v<=2203;v++)H[v]=0;for(v=2205;v<=2217;v++)H[v]=0;for(v=2222;v<=2224;v++)H[v]=1;for(v=2225;v<=2250;v++)H[v]=2;for(v=2251;v<=2253;v++)H[v]=1;for(v=2257;v<=2264;v++)H[v]=2;for(v=2274;v<=2279;v++)H[v]=2;for(v=2280;v<=2282;v++)H[v]=1;for(v=2283;v<=2289;v++)H[v]=2;for(v=2290;v<=2292;v++)H[v]=0;for(v=2308;v<=2313;v++)H[v]=0;for(v=2315;v<=2491;v++)H[v]=0;for(v=2494;v<=2866;v++)H[v]=0;for(v=2867;v<=2869;v++)H[v]=1;for(v=2870;v<=2888;v++)H[v]=2;for(v=2891;v<=2895;v++)H[v]=2;for(v=2896;v<=2898;v++)H[v]=1;for(v=2902;v<=2908;v++)H[v]=2;for(v=2915;v<=2920;v++)H[v]=2;for(v=2921;v<=2923;v++)H[v]=1;for(v=2924;v<=2930;v++)H[v]=2;for(v=2931;v<=2962;v++)H[v]=0;for(v=2964;v<=2968;v++)H[v]=2;for(v=2969;v<=2973;v++)H[v]=0;for(v=2975;v<=2991;v++)H[v]=0;for(v=2995;v<=3051;v++)H[v]=0;for(v=3054;v<=3079;v++)H[v]=0;for(v=3081;v<=3088;v++)H[v]=0;for(v=3092;v<=3101;v++)H[v]=0;for(v=3106;v<=3138;v++)H[v]=0;for(v=3146;v<=3151;v++)H[v]=0;for(v=3153;v<=3166;v++)H[v]=0;for(v=3168;v<=3172;v++)H[v]=0;for(v=3174;v<=3203;v++)H[v]=0;for(v=3294;v<=3358;v++)H[v]=0;for(v=3367;v<=3403;v++)H[v]=0;for(v=3408;v<=3416;v++)H[v]=0;for(v=3417;v<=3438;v++)H[v]=2;for(v=3441;v<=3446;v++)H[v]=2;for(v=3447;v<=3450;v++)H[v]=0;for(v=3451;v<=3459;v++)H[v]=2;for(v=3460;v<=3478;v++)H[v]=0;for(v=3554;v<=3559;v++)H[v]=0;for(v=3560;v<=3570;v++)H[v]=2;for(v=3571;v<=3581;v++)H[v]=0;for(v=3594;v<=3597;v++)H[v]=0;for(v=3601;v<=3604;v++)H[v]=0;for(v=3637;v<=3639;v++)H[v]=0;for(v=3665;v<=3667;v++)H[v]=0;for(v=3693;v<=3695;v++)H[v]=0;for(v=3701;v<=3727;v++)H[v]=0;for(v=3728;v<=3739;v++)H[v]=2;for(v=3740;v<=3751;v++)H[v]=0;for(v=3753;v<=3760;v++)H[v]=2;for(v=3761;v<=3773;v++)H[v]=0;for(v=3775;v<=3777;v++)H[v]=0;for(v=3779;v<=3781;v++)H[v]=0;for(v=3783;v<=3785;v++)H[v]=0;for(v=3788;v<=3791;v++)H[v]=0;for(v=3797;v<=3802;v++)H[v]=0;for(v=3814;v<=3816;v++)H[v]=0;for(v=3825;v<=3829;v++)H[v]=0;for(v=3832;v<=3841;v++)H[v]=0;for(v=3844;v<=3852;v++)H[v]=0;for(v=3873;v<=3885;v++)H[v]=0;for(v=3890;v<=3893;v++)H[v]=0;for(v=3907;v<=3912;v++)H[v]=0;for(v=3942;v<=3950;v++)H[v]=0;for(v=3968;v<=3970;v++)H[v]=0;for(v=3973;v<=3976;v++)H[v]=0;for(v=3986;v<=3989;v++)H[v]=0;for(v=3994;v<=3997;v++)H[v]=0;for(v=4048;v<=4051;v++)H[v]=0;for(v=4056;v<=4063;v++)H[v]=0;for(v=4093;v<=4096;v++)H[v]=0;for(v=4390;v<=4398;v++)H[v]=0;for(v=4399;v<=4413;v++)H[v]=2;for(v=4418;v<=4433;v++)H[v]=2;for(v=4455;v<=4457;v++)H[v]=2;for(v=4484;v<=4489;v++)H[v]=0;for(v=4491;v<=4554;v++)H[v]=0;for(v=4568;v<=4589;v++)H[v]=0;for(v=4652;v<=4656;v++)H[v]=0;for(v=4766;v<=4800;v++)H[v]=0;for(v=5014;v<=5016;v++)H[v]=0;for(v=5069;v<=5072;v++)H[v]=0;for(v=5105;v<=5130;v++)H[v]=0;for(v=5167;v<=5188;v++)H[v]=0;for(v=5253;v<=5259;v++)H[v]=0;for(v=5269;v<=5275;v++)H[v]=0;for(v=5292;v<=5311;v++)H[v]=0;for(v=5329;v<=5331;v++)H[v]=0;for(v=5343;v<=5349;v++)H[v]=0;for(v=5355;v<=5357;v++)H[v]=0;for(v=5387;v<=5389;v++)H[v]=0;for(v=5459;v<=5463;v++)H[v]=0;for(v=5479;v<=5482;v++)H[v]=0;for(v=5518;v<=5520;v++)H[v]=0;for(v=5530;v<=5539;v++)H[v]=0;for(v=5550;v<=5552;v++)H[v]=0;for(v=5562;v<=5583;v++)H[v]=0;for(v=5623;v<=5625;v++)H[v]=2;for(v=5631;v<=5639;v++)H[v]=0;for(v=5649;v<=5653;v++)H[v]=0;for(v=5663;v<=5680;v++)H[v]=0;for(v=5682;v<=5685;v++)H[v]=0;for(v=5875;v<=5877;v++)H[v]=0;for(v=5896;v<=5899;v++)H[v]=0;for(v=5921;v<=5940;v++)H[v]=0;for(v=6050;v<=6125;v++)H[v]=0;for(v=6244;v<=6275;v++)H[v]=0;for(v=6328;v<=6348;v++)H[v]=0;for(v=6350;v<=6356;v++)H[v]=0;for(v=6366;v<=6372;v++)H[v]=0;for(v=6381;v<=6387;v++)H[v]=0;for(v=6393;v<=6404;v++)H[v]=0;for(v=6480;v<=6483;v++)H[v]=0;for(v=6511;v<=6514;v++)H[v]=0;for(v=6579;v<=6581;v++)H[v]=0;for(v=6619;v<=6624;v++)H[v]=0;for(v=6625;v<=6627;v++)H[v]=2;for(v=6628;v<=6632;v++)H[v]=0;for(v=6634;v<=6637;v++)H[v]=0;for(v=6669;v<=6692;v++)H[v]=0;for(v=6707;v<=6709;v++)H[v]=0;for(v=6720;v<=6723;v++)H[v]=0;for(v=6732;v<=6738;v++)H[v]=0;for(v=6931;v<=6933;v++)H[v]=0;for(v=6956;v<=6959;v++)H[v]=0;for(v=7005;v<=7007;v++)H[v]=0;for(v=7057;v<=7070;v++)H[v]=2;for(v=7074;v<=7082;v++)H[v]=0;for(v=7109;v<=7118;v++)H[v]=0;for(v=7119;v<=7127;v++)H[v]=1;for(v=7374;v<=7376;v++)H[v]=0;for(v=7528;v<=7586;v++)H[v]=0;for(v=7587;v<=7645;v++)H[v]=2;for(v=7692;v<=7696;v++)H[v]=0;for(v=7755;v<=7787;v++)H[v]=0;for(v=7791;v<=7795;v++)H[v]=0;for(v=7799;v<=7801;v++)H[v]=0;for(v=7803;v<=7805;v++)H[v]=0;for(v=7825;v<=7831;v++)H[v]=0;for(v=7845;v<=7859;v++)H[v]=0;for(v=8013;v<=8032;v++)H[v]=0;for(v=8065;v<=8068;v++)H[v]=1;for(v=8518;v<=8529;v++)H[v]=2;for(v=8533;v<=8536;v++)H[v]=2;for(v=8538;v<=8540;v++)H[v]=2;for(v=8677;v<=8679;v++)H[v]=0;for(v=8836;v<=8840;v++)H[v]=0;for(v=8857;v<=8859;v++)H[v]=0;for(v=8908;v<=8910;v++)H[v]=0;for(v=9154;v<=9159;v++)H[v]=0;for(v=9205;v<=9218;v++)H[v]=0;for(v=9271;v<=9273;v++)H[v]=0;for(v=9295;v<=9297;v++)H[v]=0;for(v=9356;v<=9360;v++)H[v]=0;for(v=9404;v<=9407;v++)H[v]=0;for(v=9476;v<=9482;v++)H[v]=0;for(v=9487;v<=9494;v++)H[v]=0;for(v=9697;v<=9699;v++)H[v]=0;for(v=9821;v<=9865;v++)H[v]=0;for(v=10285;v<=10291;v++)H[v]=0;for(v=10314;v<=10317;v++)H[v]=0;for(v=10448;v<=10465;v++)H[v]=0;for(v=10726;v<=10729;v++)H[v]=0;for(v=10731;v<=10733;v++)H[v]=0;for(v=11114;v<=11118;v++)H[v]=0;for(v=20004;v<=20032;v++)H[v]=0;for(v=20047;v<=20049;v++)H[v]=0;for(v=20062;v<=20092;v++)H[v]=0;for(v=20135;v<=20138;v++)H[v]=0;for(v=20248;v<=20258;v++)H[v]=0;for(v=20348;v<=20358;v++)H[v]=0;for(v=20436;v<=20440;v++)H[v]=0;for(v=20822;v<=20824;v++)H[v]=0;for(v=20904;v<=20932;v++)H[v]=0;for(v=20934;v<=20936;v++)H[v]=0;for(v=21004;v<=21032;v++)H[v]=0;for(v=21035;v<=21037;v++)H[v]=0;for(v=21095;v<=21097;v++)H[v]=0;for(v=21148;v<=21150;v++)H[v]=0;for(v=21207;v<=21264;v++)H[v]=0;for(v=21307;v<=21364;v++)H[v]=0;for(v=21413;v<=21423;v++)H[v]=0;for(v=21453;v<=21463;v++)H[v]=0;for(v=21473;v<=21483;v++)H[v]=0;for(v=21780;v<=21782;v++)H[v]=0;for(v=21891;v<=21894;v++)H[v]=0;for(v=21896;v<=21899;v++)H[v]=0;for(v=22171;v<=22177;v++)H[v]=0;for(v=22181;v<=22187;v++)H[v]=0;for(v=22191;v<=22197;v++)H[v]=0;for(v=22207;v<=22222;v++)H[v]=0;for(v=22229;v<=22232;v++)H[v]=0;for(v=22234;v<=22236;v++)H[v]=0;for(v=22243;v<=22250;v++)H[v]=0;for(v=22262;v<=22265;v++)H[v]=0;for(v=22307;v<=22322;v++)H[v]=0;for(v=22348;v<=22357;v++)H[v]=0;for(v=22407;v<=22422;v++)H[v]=0;for(v=22462;v<=22465;v++)H[v]=0;for(v=22521;v<=22525;v++)H[v]=0;for(v=22607;v<=22622;v++)H[v]=0;for(v=22641;v<=22646;v++)H[v]=0;for(v=22648;v<=22657;v++)H[v]=0;for(v=22707;v<=22722;v++)H[v]=0;for(v=22762;v<=22765;v++)H[v]=0;for(v=22807;v<=22822;v++)H[v]=0;for(v=22991;v<=22994;v++)H[v]=0;for(v=23028;v<=23038;v++)H[v]=0;for(v=23301;v<=23333;v++)H[v]=2;for(v=23830;v<=23853;v++)H[v]=0;for(v=23866;v<=23872;v++)H[v]=0;for(v=23877;v<=23884;v++)H[v]=0;for(v=23886;v<=23894;v++)H[v]=0;for(v=23946;v<=23948;v++)H[v]=0;for(v=24311;v<=24313;v++)H[v]=0;for(v=24342;v<=24347;v++)H[v]=0;for(v=24370;v<=24374;v++)H[v]=10;for(v=24375;v<=24381;v++)H[v]=0;for(v=24718;v<=24721;v++)H[v]=0;for(v=24817;v<=24821;v++)H[v]=0;for(v=24877;v<=24882;v++)H[v]=0;for(v=24891;v<=24893;v++)H[v]=0;for(v=25391;v<=25395;v++)H[v]=0;for(v=25828;v<=25838;v++)H[v]=0;for(v=26191;v<=26195;v++)H[v]=0;for(v=26391;v<=26393;v++)H[v]=0;for(v=26701;v<=26722;v++)H[v]=0;for(v=26729;v<=26799;v++)H[v]=2;for(v=26801;v<=26803;v++)H[v]=2;for(v=26811;v<=26813;v++)H[v]=2;for(v=26847;v<=26870;v++)H[v]=2;for(v=26891;v<=26899;v++)H[v]=0;for(v=26901;v<=26923;v++)H[v]=0;for(v=26929;v<=26946;v++)H[v]=0;for(v=26948;v<=26998;v++)H[v]=0;for(v=27037;v<=27040;v++)H[v]=0;for(v=27205;v<=27232;v++)H[v]=0;for(v=27258;v<=27260;v++)H[v]=0;for(v=27391;v<=27398;v++)H[v]=0;for(v=27561;v<=27564;v++)H[v]=0;for(v=27571;v<=27574;v++)H[v]=0;for(v=27581;v<=27584;v++)H[v]=0;for(v=27591;v<=27594;v++)H[v]=0;for(v=27700;v<=27707;v++)H[v]=0;for(v=28191;v<=28193;v++)H[v]=0;for(v=28348;v<=28358;v++)H[v]=0;for(v=28402;v<=28432;v++)H[v]=0;for(v=28462;v<=28492;v++)H[v]=0;for(v=29118;v<=29122;v++)H[v]=0;for(v=29168;v<=29172;v++)H[v]=0;for(v=29177;v<=29185;v++)H[v]=0;for(v=29187;v<=29195;v++)H[v]=0;for(v=29900;v<=29903;v++)H[v]=0;for(v=30161;v<=30179;v++)H[v]=0;for(v=30491;v<=30494;v++)H[v]=0;for(v=30729;v<=30732;v++)H[v]=0;for(v=31251;v<=31259;v++)H[v]=0;for(v=31265;v<=31268;v++)H[v]=0;for(v=31275;v<=31279;v++)H[v]=0;for(v=31281;v<=31297;v++)H[v]=0;for(v=31461;v<=31469;v++)H[v]=0;for(v=31491;v<=31495;v++)H[v]=0;for(v=31917;v<=31922;v++)H[v]=0;for(v=31965;v<=32e3;v++)H[v]=0;for(v=32001;v<=32003;v++)H[v]=2;for(v=32005;v<=32031;v++)H[v]=2;for(v=32033;v<=32060;v++)H[v]=2;for(v=32064;v<=32067;v++)H[v]=2;for(v=32074;v<=32077;v++)H[v]=2;for(v=32081;v<=32086;v++)H[v]=0;for(v=32107;v<=32130;v++)H[v]=0;for(v=32133;v<=32159;v++)H[v]=0;for(v=32164;v<=32167;v++)H[v]=2;for(v=32180;v<=32199;v++)H[v]=0;for(v=32201;v<=32260;v++)H[v]=0;for(v=32301;v<=32360;v++)H[v]=0;for(v=32401;v<=32460;v++)H[v]=0;for(v=32501;v<=32560;v++)H[v]=0;for(v=32601;v<=32662;v++)H[v]=0;for(v=32664;v<=32667;v++)H[v]=2;for(v=32701;v<=32761;v++)H[v]=0;for(v=53001;v<=53004;v++)H[v]=0;for(v=53008;v<=53019;v++)H[v]=0;for(v=53021;v<=53032;v++)H[v]=0;for(v=53034;v<=53037;v++)H[v]=0;for(v=53042;v<=53046;v++)H[v]=0;for(v=53074;v<=53080;v++)H[v]=0;for(v=54001;v<=54004;v++)H[v]=0;for(v=54008;v<=54019;v++)H[v]=0;for(v=54021;v<=54032;v++)H[v]=0;for(v=54034;v<=54037;v++)H[v]=0;for(v=54042;v<=54046;v++)H[v]=0;for(v=54048;v<=54053;v++)H[v]=0;for(v=54074;v<=54080;v++)H[v]=0;for(v=54090;v<=54096;v++)H[v]=0;for(v=54098;v<=54101;v++)H[v]=0;for(v=65161;v<=65163;v++)H[v]=0;for(v=102001;v<=102040;v++)H[v]=0;for(v=102042;v<=102063;v++)H[v]=0;for(v=102065;v<=102067;v++)H[v]=0;for(v=102070;v<=102117;v++)H[v]=0;for(v=102122;v<=102216;v++)H[v]=0;for(v=102221;v<=102377;v++)H[v]=0;for(v=102382;v<=102388;v++)H[v]=0;for(v=102389;v<=102398;v++)H[v]=2;for(v=102399;v<=102444;v++)H[v]=0;for(v=102445;v<=102447;v++)H[v]=2;for(v=102448;v<=102458;v++)H[v]=0;for(v=102459;v<=102468;v++)H[v]=2;for(v=102469;v<=102499;v++)H[v]=0;for(v=102500;v<=102519;v++)H[v]=1;for(v=102520;v<=102524;v++)H[v]=0;for(v=102525;v<=102529;v++)H[v]=2;for(v=102530;v<=102588;v++)H[v]=0;for(v=102590;v<=102598;v++)H[v]=0;for(v=102601;v<=102603;v++)H[v]=0;for(v=102605;v<=102628;v++)H[v]=0;for(v=102629;v<=102646;v++)H[v]=2;for(v=102648;v<=102700;v++)H[v]=2;for(v=102701;v<=102703;v++)H[v]=0;for(v=102707;v<=102730;v++)H[v]=2;for(v=102733;v<=102758;v++)H[v]=2;for(v=102767;v<=102900;v++)H[v]=0;for(v=102901;v<=102933;v++)H[v]=2;for(v=102934;v<=102950;v++)H[v]=13;for(v=102951;v<=102963;v++)H[v]=0;for(v=102965;v<=102969;v++)H[v]=0;for(v=102971;v<=102973;v++)H[v]=0;for(v=102975;v<=102989;v++)H[v]=0;for(v=102990;v<=102992;v++)H[v]=1;for(v=102997;v<=103002;v++)H[v]=0;for(v=103003;v<=103008;v++)H[v]=2;for(v=103009;v<=103011;v++)H[v]=0;for(v=103012;v<=103014;v++)H[v]=2;for(v=103019;v<=103021;v++)H[v]=0;for(v=103022;v<=103024;v++)H[v]=2;for(v=103029;v<=103031;v++)H[v]=0;for(v=103032;v<=103034;v++)H[v]=2;for(v=103065;v<=103068;v++)H[v]=0;for(v=103074;v<=103076;v++)H[v]=0;for(v=103077;v<=103079;v++)H[v]=1;for(v=103080;v<=103082;v++)H[v]=0;for(v=103083;v<=103085;v++)H[v]=2;for(v=103090;v<=103093;v++)H[v]=0;for(v=103097;v<=103099;v++)H[v]=0;for(v=103100;v<=103102;v++)H[v]=2;for(v=103107;v<=103109;v++)H[v]=0;for(v=103110;v<=103112;v++)H[v]=2;for(v=103113;v<=103116;v++)H[v]=0;for(v=103117;v<=103120;v++)H[v]=2;for(v=103153;v<=103157;v++)H[v]=0;for(v=103158;v<=103162;v++)H[v]=2;for(v=103163;v<=103165;v++)H[v]=0;for(v=103166;v<=103168;v++)H[v]=1;for(v=103169;v<=103171;v++)H[v]=2;for(v=103186;v<=103188;v++)H[v]=0;for(v=103189;v<=103191;v++)H[v]=2;for(v=103192;v<=103195;v++)H[v]=0;for(v=103196;v<=103199;v++)H[v]=2;for(v=103200;v<=103224;v++)H[v]=0;for(v=103225;v<=103227;v++)H[v]=1;for(v=103232;v<=103237;v++)H[v]=0;for(v=103238;v<=103243;v++)H[v]=2;for(v=103244;v<=103246;v++)H[v]=0;for(v=103247;v<=103249;v++)H[v]=2;for(v=103254;v<=103256;v++)H[v]=0;for(v=103257;v<=103259;v++)H[v]=2;for(v=103264;v<=103266;v++)H[v]=0;for(v=103267;v<=103269;v++)H[v]=2;for(v=103300;v<=103375;v++)H[v]=0;for(v=103381;v<=103383;v++)H[v]=0;for(v=103384;v<=103386;v++)H[v]=1;for(v=103387;v<=103389;v++)H[v]=0;for(v=103390;v<=103392;v++)H[v]=2;for(v=103397;v<=103399;v++)H[v]=0;for(v=103400;v<=103471;v++)H[v]=2;for(v=103476;v<=103478;v++)H[v]=0;for(v=103479;v<=103481;v++)H[v]=2;for(v=103486;v<=103488;v++)H[v]=0;for(v=103489;v<=103491;v++)H[v]=2;for(v=103492;v<=103495;v++)H[v]=0;for(v=103496;v<=103499;v++)H[v]=2;for(v=103528;v<=103543;v++)H[v]=0;for(v=103544;v<=103548;v++)H[v]=2;for(v=103549;v<=103551;v++)H[v]=0;for(v=103552;v<=103554;v++)H[v]=1;for(v=103555;v<=103557;v++)H[v]=2;for(v=103558;v<=103560;v++)H[v]=0;for(v=103571;v<=103573;v++)H[v]=0;for(v=103574;v<=103576;v++)H[v]=2;for(v=103577;v<=103580;v++)H[v]=0;for(v=103581;v<=103583;v++)H[v]=2;for(v=103595;v<=103694;v++)H[v]=0;for(v=103696;v<=103699;v++)H[v]=0;for(v=103700;v<=103793;v++)H[v]=2;for(v=103794;v<=103890;v++)H[v]=0;for(v=103891;v<=103896;v++)H[v]=2;for(v=103900;v<=103971;v++)H[v]=2;for(v=103972;v<=103977;v++)H[v]=0;for(v=112e3;v<=112101;v++)H[v]=0;const Ame=[102100,102113,3857,3785,900913],L8e=[104905,104971],D8e=[104903],j8e=[4326,...Ame,...L8e,...D8e],nA=[-20037508342788905e-9,20037508342788905e-9],O9=[-20037508342787e-6,20037508342787e-6],Yj={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:nA,origin:O9,dx:1e-5},Ime={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:nA,origin:O9,dx:1e-5},102100:Yj,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:nA,origin:O9,dx:1e-5},3857:Yj,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:Yj,104903:{wkTemplate:'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400,0,AUTHORITY["ESRI","107903"]],AUTHORITY["ESRI","106903"]],PRIMEM["Reference_Meridian",0,AUTHORITY["ESRI","108900"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["ESRI","104903"]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function yo(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const n=t.wkid,r=e.wkid;if(n!=null||r!=null){if(n===r||Gd(t)&&Gd(e))return!0;const o=t.latestWkid;if(o!=null&&r===o)return!0;const a=e.latestWkid;return a!=null&&n===a}let i,s;return t.wkt2&&e.wkt2?(i=t.wkt2,s=e.wkt2):t.wkt&&e.wkt&&(i=t.wkt,s=e.wkt),!(!i||!s)&&i.toUpperCase()===s.toUpperCase()}function Ga(t){const e=t?.wkid;return e!=null&&e>=2e3&&Ime[e]||null}function Pme(t){if(!t)return;const{wkid:e,vcsWkid:n}=t;if(e)return n?JSON.stringify({wkid:e,vcsWkid:n}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?n?{wkt:r,vcsWkid:n}:{wkt:r}:{})}function kb(t){if(!dc(t))return!1;const{wkid:e}=t;if(e)return H[e]==null;const n=t.wkt2||t.wkt;return!!n&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(n)}function $8e(t){return!(Cme(t)||Rme(t))}function q1(t){return t?.wkid===4326}function QPt(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function ete(t){return t?.wkid===4490}function Gd(t){const e=t?.wkid;return e!=null&&e>=2e3&&Ame.includes(e)}function F8e(t){return t?.wkid===32662}function QO(t){return t===104971||t===104905}function Cme(t){return QO(t?.wkid)}function eL(t){return t===104903}function Rme(t){return eL(t?.wkid)}function V8e(t){const e=t?.wkid;return e!=null&&e>=2e3&&j8e.includes(e)}function dc(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const Mme={wkid:4326,wkt:Bfe(Ime[4326].wkTemplate,{Central_Meridian:"0.0"})},Nme={wkid:102100,latestWkid:3857},z8e={wkid:32662};function sW(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const G8e=sW(is),oW=sW(Pd),aW=sW(Yg),U8e={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${is.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},B8e=oW.wkt.toUpperCase(),W8e=aW.wkt.toUpperCase();function H8e(t){if(t!=null&&dc(t)){const e=t.wkid,n=t.wkt2??t.wkt;if(QO(e))return Pd;const r=n?.toUpperCase();if(n&&r===B8e)return Pd;if(eL(e)||r&&r===W8e)return Yg}return is}function eCt(t){return QO(t)?Pd:eL(t)?Yg:is}function fN(t){return yo(t,G8e)}function Zg(t){return fN(t)||yo(t,oW)||yo(t,aW)}const tCt=39.37,q8e=is.radius*Math.PI/200,Ome=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,N2=H,Lme=/UNIT\[([^\]]+)]/i,K8e=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),Y8e=Dl()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),Ou=t=>t*t,_m=t=>t*t*t,rA={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Ou(.001)},"square-centimeters":{inBaseUnits:Ou(.01)},"square-decimeters":{inBaseUnits:Ou(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Ou(1e3)},"square-inches":{inBaseUnits:Ou(.0254)},"square-feet":{inBaseUnits:Ou(.3048)},"square-yards":{inBaseUnits:Ou(.9144)},"square-miles":{inBaseUnits:Ou(1609.344)},"square-nautical-miles":{inBaseUnits:Ou(1852)},"square-us-feet":{inBaseUnits:Ou(1200/3937)},acres:{inBaseUnits:.0015625*Ou(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*_m(.001)},"cubic-centimeters":{inBaseUnits:1e3*_m(.01)},"cubic-decimeters":{inBaseUnits:1e3*_m(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*_m(1e3)},"cubic-inches":{inBaseUnits:1e3*_m(.0254)},"cubic-feet":{inBaseUnits:1e3*_m(.3048)},"cubic-yards":{inBaseUnits:1e3*_m(.9144)},"cubic-miles":{inBaseUnits:1e3*_m(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},X8e=(()=>{const t={};for(const e in rA)for(const n in rA[e].units)t[n]=e;return t})();function Z8e(t,e,n){return t*rA[n].units[e].inBaseUnits}function J8e(t,e,n){return t/rA[n].units[e].inBaseUnits}const Q8e=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],e9e=["metric","imperial"],Dme=[...e9e,...Q8e],t9e=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function L9(t){const e=X8e[t];if(!e)throw new Error("unknown type");return e}function tte(t,e=null){return e=e||L9(t),rA[e].baseUnit===t}function wh(t,e,n){if(e===n)return t;const r=L9(e);if(r!==L9(n))throw new Error("incompatible units");const i=tte(e,r)?t:Z8e(t,e,r);return tte(n,r)?i:J8e(i,n,r)}function nCt(t,e,n,r=!1){if(!r&&kb(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const i=wv(e);return i!==n&&(t=i?wh(t,i,n):wh(t*=Jd(e),"meters",n)),t}function rCt(t,e,n,r=!1){if(!r&&kb(n))throw new Error("Unable to convert from a linear unit to an angular unit.");const i=wv(n);return e!==i&&(t=i?wh(t,e,i):wh(t,e,"meters")/Jd(n)),t}function n9e(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function iCt(t){return n9e(t)}function sCt(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function oCt(t,e,n){switch(n){case"metric":return r9e(t,e);case"imperial":return s9e(t,e);default:return n}}function aCt(t,e,n){switch(n){case"metric":return i9e(t,e);case"imperial":return o9e(t,e);default:return n}}function r9e(t,e){const n=wh(t,e,"meters");return Math.abs(n)<3e3?"meters":"kilometers"}function i9e(t,e){const n=wh(t,e,"meters");return Math.abs(n)<1e5?"meters":"kilometers"}function s9e(t,e){const n=wh(t,e,"feet");return Math.abs(n)<1e3?"feet":"miles"}function o9e(t,e){const n=wh(t,e,"feet");return Math.abs(n)<1e5?"feet":"miles"}function lCt(t,e){const n=wh(t,e,"square-meters");return Math.abs(n)<3e6?"square-meters":"square-kilometers"}function cCt(t,e){const n=wh(t,e,"square-feet");return Math.abs(n)<1e6?"square-feet":"square-miles"}function uCt(t,e,n){return wh(t,e,"meters")/(n*Math.PI/180)}function lW(t){return Y8e.fromJSON(t.toLowerCase())||null}function nte(t){if(t!=null&&!$8e(t))return 1;const e=Jd(t);return e>1e5?1:e}function jme(t){return Jd(t)>=H8e(t).metersPerDegree?"meters":wv(t)}function Jd(t,e=is.metersPerDegree){return a9e(t,!0)??e}function a9e(t,e=!1){const n=t?.wkid??null,r=t?.wkt2??t?.wkt??null;let i=null;if(n){if(QO(n))return Pd.metersPerDegree;if(eL(n))return Yg.metersPerDegree;i=N2.values[N2[n]],!i&&e&&K8e.has(n)&&(i=q8e)}else r&&(Vme(r)?i=rte(Ome.exec(r),i):Fme(r)&&(i=rte(Lme.exec(r),i)));return i}function hCt(t){return kb(t)?1:Jd(t)}function rte(t,e){return t?.[1]?$me(t[1]):e}function $me(t){return parseFloat(t.split(",")[1])}function wv(t){const e=t?.wkid??null,n=t?.wkt2??t?.wkt??null;let r=null;if(e)r=N2.units[N2[e]];else if(n){const i=Vme(n)?Ome:Fme(n)?Lme:null;if(i){const s=i.exec(n);s?.[1]&&(r=c9e(s[1]))}}return r!=null?lW(r):null}function dCt(t){const e=wv(t);return e!=null&&Dme.includes(e)?e:null}function fCt(t){const e=jme(t);return e!=null&&Dme.includes(e)?e:null}function pCt(t){const e=wv(t);return e==null?null:t9e.get(e)}function Fme(t){return/^GEOCCS/i.test(t)}function Vme(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const l9e=1e-7;function c9e(t){let n=/[\\"']([^\\"']+)/.exec(t)?.[1];if(!n||!lW(n)){const r=$me(t);n=null;const i=N2.values;for(let s=0;s<i.length;++s)if(Math.abs(r-i[s])<l9e){n=N2.units[s];break}}return n}function mCt(t){const e=wv(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const u9e={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},h9e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},d9e={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},gCt=Dl()(u9e),yCt=Dl()(h9e),vCt=Dl()(d9e);var Zh,gd;let Wt=(gd=class extends qt{static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return Zh.WebMercator;if(e?.wkid===4326)return Zh.WGS84;const n=new Zh;return n.read(e),n}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return q1(this)}get isWebMercator(){return Gd(this)}get isGeographic(){return kb(this)}get isWrappable(){return V8e(this)}get metersPerUnit(){return Jd(this)}get unit(){return wv(this)||(this.isGeographic?"degrees":null)}writeWkt(e,n){this.wkid||(n.wkt=e)}clone(){if(this===Zh.WGS84)return new Zh(Mme);if(this===Zh.WebMercator)return new Zh(Nme);const e=new Zh;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=Ze(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:n,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return n==null||i?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===n&&s.referenceServiceName===r:s.id===n}return yo(this,e)}toJSON(e){return this.write(void 0,e)}},Zh=gd,gd.GCS_NAD_1927=null,gd.WGS84=null,gd.WebMercator=null,gd.PlateCarree=null,gd);x([E({readOnly:!0})],Wt.prototype,"isWGS84",null),x([E({readOnly:!0})],Wt.prototype,"isWebMercator",null),x([E({readOnly:!0})],Wt.prototype,"isGeographic",null),x([E({readOnly:!0})],Wt.prototype,"isWrappable",null),x([E({type:jr,json:{write:!0}})],Wt.prototype,"latestWkid",void 0),x([E({readOnly:!0})],Wt.prototype,"metersPerUnit",null),x([E({readOnly:!0})],Wt.prototype,"unit",null),x([E({type:jr,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Wt.prototype,"wkid",void 0),x([E({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Wt.prototype,"wkt",void 0),x([er("wkt"),er("web-scene","wkt")],Wt.prototype,"writeWkt",null),x([E({type:String,json:{write:!1}})],Wt.prototype,"wkt2",void 0),x([E({type:jr,json:{write:!0}})],Wt.prototype,"vcsWkid",void 0),x([E({type:jr,json:{write:!0}})],Wt.prototype,"latestVcsWkid",void 0),x([E()],Wt.prototype,"imageCoordinateSystem",void 0),Wt=Zh=x([ue("esri.geometry.SpatialReference")],Wt),Wt.prototype.toJSON.isDefaultToJSON=!0,Wt.GCS_NAD_1927=Kt.freeze(new Wt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Wt.WGS84=Kt.freeze(new Wt(Mme)),Wt.WebMercator=Kt.freeze(new Wt(Nme)),Wt.PlateCarree=Kt.freeze(new Wt(z8e));function cr(t,e,n){let r,i;return e===void 0||Array.isArray(e)?(i=t,n=e,r=[void 0]):(i=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;r.forEach(l=>{const c=YB(s,l,i);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],n&&(c.read.source=(c.read.source||[]).concat(n))})}}let Us=class extends qt{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Wt.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,n){if(e instanceof Wt)return e;if(e!=null){const r=new Wt;return r.read(e,n),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,n){this.cache[e]=n}};x([E()],Us.prototype,"type",void 0),x([E({readOnly:!0})],Us.prototype,"cache",null),x([E({readOnly:!0})],Us.prototype,"extent",null),x([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Us.prototype,"hasM",void 0),x([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Us.prototype,"hasZ",void 0),x([E({type:Wt,json:{write:!0},value:Wt.WGS84})],Us.prototype,"spatialReference",void 0),x([cr("spatialReference")],Us.prototype,"readSpatialReference",null),Us=x([ue("esri.geometry.Geometry")],Us);const f9e=Object.prototype.toString;function p9e(t){const e="__accessorMetadata__"in t?qa(t):t;return function(...n){if(n.push(e),typeof n[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return m9e.apply(this,n)}}function m9e(t,e,n,r){CI(t,e).cast=r}function g9e(t){return(e,n)=>{CI(e,t).cast=e[n]}}function Ks(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&f9e.call(t[0])==="[object Function]"?p9e(t[0]):t.length===1&&typeof t[0]=="string"?g9e(t[0]):void 0}function O2(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new Xe("internal:mesh","Mesh geometries are not supported for this operation")}function y9e(t){t.forEach(O2)}const v9e=57.29577951308232,_9e=.017453292519943;function ite(t){return t*v9e}function ste(t){return t*_9e}function xCt(t){return Math.PI/2-2*Math.atan(Math.exp(-t/is.radius))}function D9(t){return t.wkid!=null||t.wkt!=null}const Xj=[0,0];function pN(t,e,n,r,i){const s=t,o=i;if(o.spatialReference=n,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,Xj,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,Xj,r),[o.xmax,o.ymax]=e(s.xmax,s.ymax,Xj,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let c;for(let u=0;u<a.length;u++){const h=a[u];c=[],l.push(c);for(let f=0;f<h.length;f++)c.push(e(h[f][0],h[f][1],[0,0],r)),h[f].length>2&&c[f].push(h[f][2]),h[f].length>3&&c[f].push(h[f][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let c=0;c<a.length;c++)l[c]=e(a[c][0],a[c][1],[0,0],r),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return i}function LM(t,e){const n=t&&(D9(t)?t:t.spatialReference),r=e&&(D9(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!n||!r)&&(!!yo(r,n)||Gd(r)&&q1(n)||Gd(n)&&q1(r))}function tL(t,e){if(t==null)return null;const n=t.spatialReference,r=e&&(D9(e)?e:e.spatialReference);return LM(n,r)?yo(n,r)?Ze(t):Gd(r)?pN(t,Rx,Wt.WebMercator,!1,Ze(t)):q1(r)?pN(t,nL,Wt.WGS84,!1,Ze(t)):null:null}function Rx(t,e,n=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=ste(e);return n[0]=ste(t)*is.radius,n[1]=is.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),n}function nL(t,e,n=[0,0],r=!1){if(t===nA[0])n[0]=-180;else if(t===nA[1])n[0]=180;else{const i=ite(t/is.radius);n[0]=r?i:i-360*Math.floor((i+180)/360)}return n[1]=ite(Math.PI/2-2*Math.atan(Math.exp(-e/is.radius))),n}function h1(t,e=!1,n=Ze(t)){return O2(t),O2(n),pN(t,Rx,Wt.WebMercator,e,n)}function ES(t,e=!1,n=Ze(t)){return O2(t),O2(n),pN(t,nL,Wt.WGS84,e,n)}function zme(t,e){const n=t.x-e.x,r=t.y-e.y,i=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(n*n+r*r+i*i)}function x9e(t){return Gme(t,Ume)?.[0]??null}function w9e(t){return Gme(t,Ume)?.[1]??null}function Gme({x:t,y:e,spatialReference:n},r=[0,0]){if(n){if(Gd(n))return nL(t,e,r);if(kb(n))return r[0]=t,r[1]=e,r}return null}const Ume=[0,0];var DM;const Zj=[0,0];function ote(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Qt=DM=class extends Us{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const n=t._get("spatialReference");e._set("spatialReference",Kt.isFrozen(n)?n:n.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,n,r,i){let s;if(Array.isArray(t))s=t,i=e,t=s[0],e=s[1],n=s[2],r=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,n=s.z,r=s.m,(i=s.spatialReference)&&i.declaredClass!=="esri.geometry.SpatialReference"&&(i=new Wt(i)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)kt.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)kt.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&i?.isWebMercator){const a=Rx(s.longitude,s.latitude,Zj);t=a[0],e=a[1]}}}else ote(n)?(i=n,n=null):ote(r)&&(i=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?kt.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&kt.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),i!=null&&(o.spatialReference=i),n!=null&&(o.z=n),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return w9e(this)}set latitude(t){const{spatialReference:e,x:n}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Rx(n,t,Zj)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return x9e(this)}set longitude(t){const{y:e,spatialReference:n}=this;t!=null&&n&&(n.isWebMercator?this._set("x",Rx(t,e,Zj)[0]):n.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,n){e[n]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new DM;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return DM.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:n,z:r,m:i,spatialReference:s}=this,{z:o,m:a}=t;let{x:l,y:c,spatialReference:u}=t;if(!s.equals(u))if(s.isWebMercator&&u.isWGS84)[l,c]=Rx(l,c),u=s;else{if(!s.isWGS84||!u.isWebMercator)return!1;[l,c]=nL(l,c),u=s}return e===l&&n===c&&r===o&&i===a&&s.wkid===u.wkid}offset(t,e,n){return this.x+=t,this.y+=e,n!=null&&(this.z=(this.z??0)+n),this}normalize(){if(!this.spatialReference)return this;const t=Ga(this.spatialReference);if(!t)return this;let e=this.x;const[n,r]=t.valid,i=2*r;let s;return e>r?(s=Math.ceil(Math.abs(e-r)/i),e-=s*i):e<n&&(s=Math.ceil(Math.abs(e-n)/i),e+=s*i),this._set("x",e),this}distance(t){return zme(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};x([E({readOnly:!0})],Qt.prototype,"cache",null),x([E({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Qt.prototype,"hasM",null),x([E({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Qt.prototype,"hasZ",null),x([E({type:Number})],Qt.prototype,"latitude",null),x([E({type:Number})],Qt.prototype,"longitude",null),x([E({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Ks(t=>isNaN(t)?t:ac(t))],Qt.prototype,"x",void 0),x([er("x")],Qt.prototype,"writeX",null),x([cr("x")],Qt.prototype,"readX",null),x([E({type:Number,json:{write:!0}})],Qt.prototype,"y",void 0),x([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Qt.prototype,"z",void 0),x([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Qt.prototype,"m",void 0),Qt=DM=x([ue("esri.geometry.Point")],Qt),Qt.prototype.toJSON.isDefaultToJSON=!0;const Jj=[0,0];function OI(t,e){return e!=null&&Pa(t,e.x,e.y,e.z)}function wCt(t,e){if(!e.points?.length)return!1;for(const n of e.points)if(!L2(t,n))return!1;return!0}function b9e(t,e){const{xmin:n,ymin:r,zmin:i,xmax:s,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?Pa(t,n,r,i)&&Pa(t,n,o,i)&&Pa(t,s,o,i)&&Pa(t,s,r,i)&&Pa(t,n,r,a)&&Pa(t,n,o,a)&&Pa(t,s,o,a)&&Pa(t,s,r,a):Pa(t,n,r)&&Pa(t,n,o)&&Pa(t,s,o)&&Pa(t,s,r)}function L2(t,e){return Pa(t,e[0],e[1])}function E9e(t,e){return Pa(t,e[0],e[1],e[2])}function Pa(t,e,n,r){return e>=t.xmin&&e<=t.xmax&&n>=t.ymin&&n<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function cW(t,e){return Jj[1]=e.y,Jj[0]=e.x,S9e(t,Jj)}function S9e(t,e){return uW(t.rings,e)}function uW(t,e){if(!t||t.length<1)return!1;if(T9e(t))return ate(!1,t,e);let n=!1;for(let r=0,i=t.length;r<i;r++)n=ate(n,t[r],e);return n}function T9e(t){return!Array.isArray(t[0][0])}function ate(t,e,n){const[r,i]=n;let s=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[c,u]=e[a],[h,f]=e[o];(u<i&&f>=i||f<i&&u>=i)&&c+(i-u)/(f-u)*(h-c)<r&&(s=!s)}return s}function k9e(t,e){return OI(t,e)}function A9e(t,e){const n=t.hasZ&&e.hasZ;let r,i,s;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(i=e.ymin,t.ymax<i)return!1}else if(i=t.ymin,e.ymax<i)return!1;if(n&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function I9e(t,e){const{points:n,hasZ:r}=e,i=r?E9e:L2;for(const s of n)if(i(t,s))return!0;return!1}const K1=[0,0],Y1=[0,0],X1=[0,0],Z1=[0,0],P9e=[K1,Y1,X1,Z1],Bme=[[X1,K1],[K1,Y1],[Y1,Z1],[Z1,X1]];function C9e(t,e){return R9e(t,e.rings)}function R9e(t,e){K1[0]=t.xmin,K1[1]=t.ymax,Y1[0]=t.xmax,Y1[1]=t.ymax,X1[0]=t.xmin,X1[1]=t.ymin,Z1[0]=t.xmax,Z1[1]=t.ymin;for(const n of P9e)if(uW(e,n))return!0;for(const n of e){if(!n.length)continue;let r=n[0];if(L2(t,r))return!0;for(let i=1;i<n.length;i++){const s=n[i];if(L2(t,s)||Wme(r,s,Bme))return!0;r=s}}return!1}function M9e(t,e){K1[0]=t.xmin,K1[1]=t.ymax,Y1[0]=t.xmax,Y1[1]=t.ymax,X1[0]=t.xmin,X1[1]=t.ymin,Z1[0]=t.xmax,Z1[1]=t.ymin;const n=e.paths;for(const r of n){if(!n.length)continue;let i=r[0];if(L2(t,i))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(L2(t,o)||Wme(i,o,Bme))return!0;i=o}}return!1}const no=[0,0];function N9e(t){for(let e=0;e<t.length;e++){const n=t[e];for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const c=t[a][l],u=t[a][l+1];if(j9(s,o,c,u,no)&&!(no[0]===s[0]&&no[1]===s[1]||no[0]===c[0]&&no[1]===c[1]||no[0]===o[0]&&no[1]===o[1]||no[0]===u[0]&&no[1]===u[1]))return!0}}const r=n.length;if(!(r<=4))for(let i=0;i<r-3;i++){let s=r-1;i===0&&(s=r-2);const o=n[i],a=n[i+1];for(let l=i+2;l<s;l++){const c=n[l],u=n[l+1];if(j9(o,a,c,u,no)&&!(no[0]===o[0]&&no[1]===o[1]||no[0]===c[0]&&no[1]===c[1]||no[0]===a[0]&&no[1]===a[1]||no[0]===u[0]&&no[1]===u[1]))return!0}}}return!1}function Wme(t,e,n){for(let r=0;r<n.length;r++)if(j9(t,e,n[r][0],n[r][1]))return!0;return!1}function j9(t,e,n,r,i){const[s,o]=t,[a,l]=e,[c,u]=n,[h,f]=r,g=h-c,y=s-c,_=a-s,b=f-u,T=o-u,A=l-o,I=b*_-g*A;if(I===0)return!1;const P=(g*T-b*y)/I,M=(_*T-A*y)/I;return P>=0&&P<=1&&M>=0&&M<=1&&(i&&(i[0]=s+P*(a-s),i[1]=o+P*(l-o)),!0)}function O9e(t){switch(t){case"esriGeometryEnvelope":case"extent":return A9e;case"esriGeometryMultipoint":case"multipoint":return I9e;case"esriGeometryPoint":case"point":return k9e;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return C9e;case"esriGeometryPolyline":case"polyline":return M9e}}var Uu;function L9e(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function xm(t,e,n){return e==null?n:n==null?e:t(e,n)}let Vn=Uu=class extends Us{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,n,r,i){return L9e(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Wt.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:n,ymax:r,spatialReference:i??Wt.WGS84}}static fromPoint(t){return new Uu({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Qt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Uu;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,n=t.spatialReference;return e&&n&&!e.equals(n)&&LM(e,n)&&(t=e.isWebMercator?h1(t):ES(t,!0)),t.type==="point"?OI(this,t):t.type==="extent"&&b9e(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,n=t.spatialReference;return e&&n&&!e.equals(n)&&LM(e,n)&&(t=e.isWebMercator?h1(t):ES(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),n=this.width*e,r=this.height*e;if(this.xmin+=n,this.ymin+=r,this.xmax-=n,this.ymax-=r,this.hasZ){const i=(this.zmax-this.zmin)*e;this.zmin+=i,this.zmax-=i}if(this.hasM){const i=(this.mmax-this.mmin)*e;this.mmin+=i,this.mmax-=i}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,n=t.spatialReference;return e&&n&&!yo(e,n)&&LM(e,n)&&(t=e.isWebMercator?h1(t):ES(t,!0)),O9e(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,n){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,n!=null&&(this.zmin+=n,this.zmax+=n),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=xm(Math.min,this.zmin,t.zmin),this.zmax=xm(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=xm(Math.min,this.mmin,t.mmin),this.mmax=xm(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=xm(Math.max,this.zmin,t.zmin),this.zmax=xm(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=xm(Math.max,this.mmin,t.mmin),this.mmax=xm(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=Ga(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,n=this._getCM(t);if(n){const r=e.isWebMercator?ES(n):n;this.xmin-=n.x,this.xmax-=n.x,e.isWebMercator||(r.x=Qj(r.x,t).x),this.spatialReference=new Wt(Bfe((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[n,r]=t.valid,i=this.xmin,s=this.xmax;return i>=n&&i<=r&&s>=n&&s<=r||(e=this.center),e}_normalize(t,e,n){const r=this.spatialReference;if(!r)return this;const i=n??Ga(r);if(i==null)return this;const s=this._getParts(i).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(t)return this._shiftCM(i);if(e)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const u=(l.zmax-l.zmin)/2;for(let h=0;h<c.length;h++)c[h].push(u)}if(a){const u=(l.mmax-l.mmin)/2;for(let h=0;h<c.length;h++)c[h].push(u)}return c}),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:i,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let u;t=t||Ga(o);const[h,f]=t.valid;u=Qj(this.xmin,t);const g=u.x,y=u.frameId;u=Qj(this.xmax,t);const _=u.x,b=u.frameId,T=g===_&&a>0;if(a>2*f){const A=new Uu(l<c?g:_,i,f,s,o),I=new Uu(h,i,l<c?_:g,s,o),P=new Uu(0,i,f,s,o),M=new Uu(h,i,0,s,o),V=[],C=[];A.contains(P)&&V.push(y),A.contains(M)&&C.push(y),I.contains(P)&&V.push(b),I.contains(M)&&C.push(b);for(let N=y+1;N<b;N++)V.push(N),C.push(N);e.push({extent:A,frameIds:[y]},{extent:I,frameIds:[b]},{extent:P,frameIds:V},{extent:M,frameIds:C})}else g>_||T?e.push({extent:new Uu(g,i,f,s,o),frameIds:[y]},{extent:new Uu(h,i,_,s,o),frameIds:[b]}):e.push({extent:new Uu(g,i,_,s,o),frameIds:[y]});this.cache._parts=e}const n=this.hasZ,r=this.hasM;if(n||r){const i={};n&&(i.zmin=this.zmin,i.zmax=this.zmax),r&&(i.mmin=this.mmin,i.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(i)}return e}};function Qj(t,e){const[n,r]=e.valid,i=2*r;let s,o=0;return t>r?(s=Math.ceil(Math.abs(t-r)/i),t-=s*i,o=s):t<n&&(s=Math.ceil(Math.abs(t-n)/i),t+=s*i,o=-s),{x:t,frameId:o}}x([E({readOnly:!0})],Vn.prototype,"cache",null),x([E({readOnly:!0})],Vn.prototype,"center",null),x([E({readOnly:!0})],Vn.prototype,"extent",null),x([E({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Vn.prototype,"hasM",null),x([E({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Vn.prototype,"hasZ",null),x([E({readOnly:!0})],Vn.prototype,"height",null),x([E({readOnly:!0})],Vn.prototype,"width",null),x([E({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Vn.prototype,"xmin",void 0),x([E({type:Number,json:{write:!0}})],Vn.prototype,"ymin",void 0),x([E({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Vn.prototype,"mmin",void 0),x([E({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Vn.prototype,"zmin",void 0),x([E({type:Number,json:{write:!0}})],Vn.prototype,"xmax",void 0),x([E({type:Number,json:{write:!0}})],Vn.prototype,"ymax",void 0),x([E({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Vn.prototype,"mmax",void 0),x([E({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Vn.prototype,"zmax",void 0),Vn=Uu=x([ue("esri.geometry.Extent")],Vn),Vn.prototype.toJSON.isDefaultToJSON=!0;let IT;const D9e=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,$9=globalThis.document?.documentElement;function Hme(){const t=$9?.getAttribute("lang"),e=globalThis.navigator?.language;return D9e??t??e??"en"}function du(){return IT===void 0&&(IT=Hme()),IT}const j9e=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function hW(t=du()){return Kme(t)?.language}function qme(t=du()){const e=Kme(t);return e?.language&&e?.extlang?t.replace(`${e.language}-`,""):t}function Kme(t=du()){return j9e.exec(t)?.groups}const jM=[];function Yme(t){return jM.push(t),Zn(()=>{jM.splice(jM.indexOf(t),1)})}const $M=[];function dW(t){return $M.push(t),Zn(()=>$M.splice($M.indexOf(t),1))}function lte(){const t=Hme();IT!==t&&([...$M].forEach(e=>e(t)),IT=t,[...jM].forEach(e=>e(t)))}globalThis.addEventListener?.("languagechange",lte),$9&&new MutationObserver(()=>{lte()}).observe($9,{attributeFilter:["lang"]});let KC;function $9e(t){return KC&&!KC.destroyed||(KC=t()),KC}var F9;const F9e=new Xs({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let us=F9=class extends Kt{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new F9({categories:this.categories?Ze(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let n=[];this.categories&&(n=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=tL(this.extent,Wt.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let i=this.query;!this.disableExtraQuery&&t.extraQuery&&(i="("+i+")"+t.extraQuery);const s={categories:n,bbox:r,q:i,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>F9e.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};x([E()],us.prototype,"categories",void 0),x([E()],us.prototype,"disableExtraQuery",void 0),x([E({type:Vn})],us.prototype,"extent",void 0),x([E()],us.prototype,"filter",void 0),x([E()],us.prototype,"num",void 0),x([E()],us.prototype,"query",void 0),x([E()],us.prototype,"sortField",void 0),x([E()],us.prototype,"sortOrder",null),x([E()],us.prototype,"start",void 0),us=F9=x([ue("esri.portal.PortalQueryParams")],us);var V9;let Wi=V9=class extends qt{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e&&this.portal?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const n=e.categorySchema||[];return n.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):n})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new Xe("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new V9({sourceJSON:t});return e.read(t),e}queryItems(t,e){let n=qa(us,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(n=n||new us,r.queryPortal(`/content/groups/${this.id}/search`,n,"PortalItem",e)):(n=n?n.clone():new us,n.query="group:"+this.id+(n.query?" "+n.query:""),r.queryItems(n,e))}_fetchCategorySchemaSet(t,e){const n=this.portal;return n.fetchSelf(n.authMode,!0,e).then(r=>{const i=r.contentCategorySetsGroupQuery;if(i){const s=new us({disableExtraQuery:!0,num:1,query:i});return n.queryGroups(s,e)}throw new Xe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const i=r.results[0],s=new us({num:1,query:`typekeywords:"${t}"`});return i.queryItems(s,e)}throw new Xe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",e).then(i=>{const s=i?.categorySchema;return s?.length?s:[]}):[])}};x([E()],Wi.prototype,"access",void 0),x([E({type:Date})],Wi.prototype,"created",void 0),x([E()],Wi.prototype,"description",void 0),x([E()],Wi.prototype,"id",void 0),x([E()],Wi.prototype,"isInvitationOnly",void 0),x([E({type:Date})],Wi.prototype,"modified",void 0),x([E()],Wi.prototype,"owner",void 0),x([E()],Wi.prototype,"portal",void 0),x([E()],Wi.prototype,"snippet",void 0),x([E()],Wi.prototype,"sortField",void 0),x([E()],Wi.prototype,"sortOrder",void 0),x([E()],Wi.prototype,"sourceJSON",void 0),x([E()],Wi.prototype,"tags",void 0),x([E()],Wi.prototype,"thumbnail",void 0),x([E({readOnly:!0})],Wi.prototype,"thumbnailUrl",null),x([E()],Wi.prototype,"title",void 0),x([E({readOnly:!0})],Wi.prototype,"url",null),Wi=V9=x([ue("esri.portal.PortalGroup")],Wi);let ay=class extends Kt{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};x([E()],ay.prototype,"nextQueryParams",void 0),x([E()],ay.prototype,"queryParams",void 0),x([E()],ay.prototype,"results",void 0),x([E()],ay.prototype,"total",void 0),ay=x([ue("esri.portal.PortalQueryResult")],ay);let Tf=class extends qt{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new Xe("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};x([E({type:Date})],Tf.prototype,"created",void 0),x([E()],Tf.prototype,"id",void 0),x([E()],Tf.prototype,"portal",void 0),x([E()],Tf.prototype,"title",void 0),x([E({readOnly:!0})],Tf.prototype,"url",null),x([E()],Tf.prototype,"username",void 0),Tf=x([ue("esri.portal.PortalFolder")],Tf);var z9;let Vr=z9=class extends qt{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){const t=this.portal?.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,n=t?.data,r=t?.folder,i={method:"post"};e&&(i.query=e.createPostQuery(),n!=null&&(typeof n=="string"?i.query.text=n:typeof n=="object"&&(i.query.text=JSON.stringify(n))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",i).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let n=this.userContentUrl;t.ownerFolder&&(n+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(n+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const n=this.userContentUrl+"/deleteItems",r=[],i=t.map(s=>s.id);if(i.length){const s={method:"post",query:{items:i.join(","),permanentDelete:e}},o=await this.portal.request(n,s);for(const a of o.results){const l=t.find(h=>a.itemId===h.id),c=a.success;let u=null;c?(l.id=null,l.portal=null):a.error&&(u=new Xe("portal:delete-item-failed",a.error.message,a.error)),r.push({item:l,success:c,error:u})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let n;return n=e&&e.folders?e.folders.map(r=>{const i=Tf.fromJSON(r);return i.portal=this.portal,i}):[],n})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(n=>{const r=Wi.fromJSON(n);return r.portal=this.portal,r}):[],e})}async fetchItems(t){t??={};let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:n}=await ve(()=>Promise.resolve().then(()=>Xme),void 0),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},i=await this.portal.request(e,{query:r});let s;return i?.items?(s=i.items.map(o=>{const a=n.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:i.nextStart,total:i.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Wi({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new Xe("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const n=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(n+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new Xe("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new z9({sourceJSON:t});return e.read(t),e}};x([E()],Vr.prototype,"access",void 0),x([E({type:Date})],Vr.prototype,"created",void 0),x([E()],Vr.prototype,"culture",void 0),x([E()],Vr.prototype,"description",void 0),x([E()],Vr.prototype,"email",void 0),x([E()],Vr.prototype,"favGroupId",void 0),x([E()],Vr.prototype,"fullName",void 0),x([E()],Vr.prototype,"id",void 0),x([E({type:Date})],Vr.prototype,"modified",void 0),x([E()],Vr.prototype,"orgId",void 0),x([E()],Vr.prototype,"portal",void 0),x([E()],Vr.prototype,"preferredView",void 0),x([E()],Vr.prototype,"privileges",void 0),x([E()],Vr.prototype,"region",void 0),x([E()],Vr.prototype,"role",void 0),x([E()],Vr.prototype,"roleId",void 0),x([E()],Vr.prototype,"sourceJSON",void 0),x([E()],Vr.prototype,"thumbnail",void 0),x([E({readOnly:!0})],Vr.prototype,"thumbnailUrl",null),x([E()],Vr.prototype,"units",void 0),x([E({readOnly:!0})],Vr.prototype,"userContentUrl",null),x([E({readOnly:!0})],Vr.prototype,"url",null),x([E()],Vr.prototype,"username",void 0),x([E()],Vr.prototype,"userLicenseTypeId",void 0),x([E()],Vr.prototype,"userType",void 0),Vr=z9=x([ue("esri.portal.PortalUser")],Vr);var Kl;let GE;const cte={PortalGroup:()=>Promise.resolve({default:Wi}),PortalItem:()=>ve(()=>Promise.resolve().then(()=>Xme),void 0),PortalUser:()=>Promise.resolve({default:Vr})};var yd;let st=(yd=class extends m0(NI){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.g3DTilesGalleryGroupQuery=null,this.g3dTilesEnabled=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=nr.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){ute.unregister(this),this.defaultBasemap=Di(this.defaultBasemap),this.defaultDevBasemap=Di(this.defaultDevBasemap),this.defaultVectorBasemap=Di(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=ii(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const n of e)nr.request.trustedServers.includes(n)||nr.request.trustedServers.push(n);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,n=!e||this.canSearchPublic;return this.id&&!n?` AND orgid:${this.id}`:null}get hasAPIKey(){return Hje(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let e=this.url;if(e){const n=e.indexOf("/sharing");e=n>0?e.slice(0,n):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,n=this.thumbnail;return e&&n?this._normalizeSSL(e+"/portals/self/resources/"+n):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let n=null;return e&&(n=Vr.fromJSON(e),n.portal=this),n}load(e){const n=ve(async()=>{const{default:r}=await Promise.resolve().then(()=>Dze);return{default:r}},void 0).then(({default:r})=>{gi(e),GE=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{if(!this.hasAPIKey&&Zr){const i=Zr;this.credential=i.findCredential(this.restUrl),this.credential||this.authMode!==Kl.AUTH_MODE_AUTO&&this.authMode!==Kl.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=i.on("credential-create",V9e(new WeakRef(this))),ute.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(n),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),n=(await ve(async()=>{const{default:r}=await import("./ElevationLayer-C9Uj16uq.js");return{default:r}},__vite__mapDeps([21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36]))).default;return e?e.map(r=>new n({id:r.id,url:r.url})):[]}async fetchBasemaps(e,n){const r=await this._fetchBasemaps(e,n);if(n?.include3d===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(e,n);r.unshift(...i)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const n=new us;n.query=this.default3DBasemapQuery,n.disableExtraQuery=!0;const r=(await this.queryItems(n,e)).results.find(i=>i.type==="Web Scene");return r?new GE({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(n=>n.categorySchema):ya(e)?Promise.reject(Cr()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(n=>n.classificationSchema):null}fetchFeaturedGroups(e){const n=this.featuredGroups,r=new us({num:100,sortField:"title"});if(n?.length){const i=[];for(const s of n)i.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(s=>s.results)}return ya(e)?Promise.reject(Cr()):Promise.resolve([])}fetchRegions(e){const n=this.user?.culture||this.culture||du();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:n}})}fetchSettings(e){const n=this.user?.culture||this.culture||du();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:n}})}static getDefault(){return $9e(()=>new Kl)}queryGroups(e,n){return this.queryPortal("/community/groups",e,"PortalGroup",n)}queryItems(e,n){return this.queryPortal("/search",e,"PortalItem",n)}queryUsers(e,n){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",n)}fetchSelf(e=this.authMode,n=!1,r){const i=this.restUrl+"/portals/self",s={authMode:e,query:{culture:du().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),n&&(s.query.default=!0),this.request(i,s)}queryPortal(e,n,r,i){const s=qa(us,n),o=a=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...i}).then(l=>{const c=s.clone();return c.start=l.nextStart,new ay({nextQueryParams:c,queryParams:s,total:l.total,results:Kl._resultsToTypedArray(a,{portal:this},l,i)})}).then(l=>Promise.all(l.results.map(c=>typeof c.when=="function"?c.when():l)).then(()=>l,c=>(fpe(c),l)));return r&&cte[r]?cte[r]().then(({default:a})=>(gi(i),o(a))):o()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new Xe("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===Kl.AUTH_MODE_ANONYMOUS||this.authMode===Kl.AUTH_MODE_NO_PROMPT&&!Zr)return Promise.reject(new Xe("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=n=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(n||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=n,this.fetchSelf("immediate"))):this.user&&this.credential===n?null:(this.credential=n,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return Zr?Zr.getCredential(this.restUrl,{prompt:this.authMode!==Kl.AUTH_MODE_NO_PROMPT}).then(n=>e(n)):e(this.credential)}normalizeUrl(e){const n=this.credential?.token;return this._normalizeSSL(n?e+(e.includes("?")?"&":"?")+"token="+n:e)}requestToTypedArray(e,n,r){return this.request(e,n).then(i=>{const s=Kl._resultsToTypedArray(r,{portal:this},i);return Promise.all(s.map(o=>typeof o.when=="function"?o.when():i)).then(()=>s,()=>s)})}request(e,n={}){const r={f:"json",...n.query},{authMode:i=this.authMode===Kl.AUTH_MODE_ANONYMOUS||this.authMode===Kl.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:o=!1,method:a="auto",responseType:l="json",signal:c}=n,u={authMode:i,body:s,cacheBust:o,method:a,query:r,responseType:l,timeout:0,signal:c};return n.withCredentials&&(u.withCredentials=!0),ns(this._normalizeSSL(e),u).then(h=>h.data)}toJSON(){throw new Xe("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Kl({sourceJSON:e})}_getHelperService(e){const n=this.helperServices?.[e];if(!n)throw new Xe("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return n}async _fetchBasemaps(e,n){const r=new us;r.query=e||(y9()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const i=await this.queryGroups(r,n);if(!i.total)return[];const s=i.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,n);return o.total?o.results.filter(a=>a.type==="Web Map").map(a=>new GE({portalItem:a})):[]}async _fetchBasemaps3D(e,n){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(y9())return[];const i=new us({query:r,disableExtraQuery:!0}),s=await this.queryGroups(i,n);if(!s.total)return[];const o=s.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=o.sortField||"name",i.sortOrder=o.sortOrder||"desc";const a=await o.queryItems(i,n);return a.total?a.results.filter(l=>l.type==="Web Scene").map(l=>new GE({portalItem:l})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const n=GE.fromJSON(e);return n.portalItem={portal:this},n}return null}static _resultsToTypedArray(e,n,r,i){let s;if(r){const o=i!=null?i.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||n)&&(s=s.map(a=>{const l=Object.assign(e?e.fromJSON(a):a,n);return typeof l.load=="function"&&l.load(o),l}))}else s=[];return s}},Kl=yd,yd.AUTH_MODE_ANONYMOUS="anonymous",yd.AUTH_MODE_AUTO="auto",yd.AUTH_MODE_IMMEDIATE="immediate",yd.AUTH_MODE_NO_PROMPT="no-prompt",yd);x([E()],st.prototype,"access",void 0),x([E()],st.prototype,"allSSL",void 0),x([E()],st.prototype,"authMode",void 0),x([E()],st.prototype,"authorizedCrossOriginDomains",void 0),x([cr("authorizedCrossOriginDomains")],st.prototype,"readAuthorizedCrossOriginDomains",null),x([E()],st.prototype,"basemapGalleryGroupQuery",void 0),x([E({json:{name:"3DBasemapGalleryGroupQuery"}})],st.prototype,"basemapGalleryGroupQuery3D",void 0),x([E({json:{name:"g3DTilesGalleryGroupQuery"}})],st.prototype,"g3DTilesGalleryGroupQuery",void 0),x([E({json:{name:"g3dTilesEnabled"}})],st.prototype,"g3dTilesEnabled",void 0),x([E()],st.prototype,"bingKey",void 0),x([E()],st.prototype,"canListApps",void 0),x([E()],st.prototype,"canListData",void 0),x([E()],st.prototype,"canListPreProvisionedItems",void 0),x([E()],st.prototype,"canProvisionDirectPurchase",void 0),x([E()],st.prototype,"canSearchPublic",void 0),x([E()],st.prototype,"canShareBingPublic",void 0),x([E()],st.prototype,"canSharePublic",void 0),x([E()],st.prototype,"canSignInArcGIS",void 0),x([E()],st.prototype,"canSignInIDP",void 0),x([E()],st.prototype,"colorSetsGroupQuery",void 0),x([E()],st.prototype,"commentsEnabled",void 0),x([E({type:Date})],st.prototype,"created",void 0),x([E()],st.prototype,"credential",void 0),x([E()],st.prototype,"culture",void 0),x([E()],st.prototype,"currentVersion",void 0),x([E()],st.prototype,"customBaseUrl",void 0),x([E()],st.prototype,"default3DBasemapQuery",void 0),x([E()],st.prototype,"defaultBasemap",void 0),x([cr("defaultBasemap")],st.prototype,"readDefaultBasemap",null),x([E()],st.prototype,"defaultDevBasemap",void 0),x([cr("defaultDevBasemap")],st.prototype,"readDefaultDevBasemap",null),x([E({type:Vn})],st.prototype,"defaultExtent",void 0),x([E()],st.prototype,"defaultVectorBasemap",void 0),x([cr("defaultVectorBasemap")],st.prototype,"readDefaultVectorBasemap",null),x([E()],st.prototype,"description",void 0),x([E()],st.prototype,"devBasemapGalleryGroupQuery",void 0),x([E()],st.prototype,"eueiEnabled",void 0),x([E({readOnly:!0})],st.prototype,"extraQuery",null),x([E()],st.prototype,"featuredGroups",void 0),x([E()],st.prototype,"featuredItemsGroupQuery",void 0),x([E()],st.prototype,"galleryTemplatesGroupQuery",void 0),x([E()],st.prototype,"layoutGroupQuery",void 0),x([E()],st.prototype,"livingAtlasGroupQuery",void 0),x([E({readOnly:!0})],st.prototype,"hasAPIKey",null),x([E()],st.prototype,"hasCategorySchema",void 0),x([E()],st.prototype,"hasClassificationSchema",void 0),x([E()],st.prototype,"helpBase",void 0),x([E()],st.prototype,"helperServices",void 0),x([E()],st.prototype,"helpMap",void 0),x([E()],st.prototype,"homePageFeaturedContent",void 0),x([E()],st.prototype,"homePageFeaturedContentCount",void 0),x([E()],st.prototype,"httpPort",void 0),x([E()],st.prototype,"httpsPort",void 0),x([E()],st.prototype,"id",void 0),x([E()],st.prototype,"ipCntryCode",void 0),x([E({readOnly:!0})],st.prototype,"isOrganization",null),x([E()],st.prototype,"isPortal",void 0),x([E()],st.prototype,"isReadOnly",void 0),x([E({readOnly:!0})],st.prototype,"itemPageUrl",null),x([E()],st.prototype,"layerTemplatesGroupQuery",void 0),x([E()],st.prototype,"maxTokenExpirationMinutes",void 0),x([E({type:Date})],st.prototype,"modified",void 0),x([E()],st.prototype,"name",void 0),x([E()],st.prototype,"portalHostname",void 0),x([E()],st.prototype,"portalMode",void 0),x([E()],st.prototype,"portalProperties",void 0),x([E()],st.prototype,"region",void 0),x([E()],st.prototype,"recycleBinEnabled",void 0),x([E({readOnly:!0})],st.prototype,"restUrl",null),x([E()],st.prototype,"rotatorPanels",void 0),x([E()],st.prototype,"showHomePageDescription",void 0),x([E()],st.prototype,"sourceJSON",void 0),x([E()],st.prototype,"staticImagesUrl",void 0),x([E({json:{name:"2DStylesGroupQuery"}})],st.prototype,"stylesGroupQuery2d",void 0),x([E({json:{name:"stylesGroupQuery"}})],st.prototype,"stylesGroupQuery3d",void 0),x([E()],st.prototype,"supportsHostedServices",void 0),x([E()],st.prototype,"symbolSetsGroupQuery",void 0),x([E()],st.prototype,"templatesGroupQuery",void 0),x([E()],st.prototype,"thumbnail",void 0),x([E({readOnly:!0})],st.prototype,"thumbnailUrl",null),x([E()],st.prototype,"units",void 0),x([E()],st.prototype,"url",void 0),x([E()],st.prototype,"urlKey",void 0),x([cr("urlKey")],st.prototype,"readUrlKey",null),x([E()],st.prototype,"user",void 0),x([cr("user")],st.prototype,"readUser",null),x([E()],st.prototype,"use3dBasemaps",void 0),x([E()],st.prototype,"useDefault3dBasemap",void 0),x([E()],st.prototype,"useStandardizedQuery",void 0),x([E()],st.prototype,"useVectorBasemaps",void 0),x([E()],st.prototype,"vectorBasemapGalleryGroupQuery",void 0),st=Kl=x([ue("esri.portal.Portal")],st);const ute=new FinalizationRegistry(t=>{t.remove()});function V9e(t){const e=Zr;return()=>{const n=t.deref();n&&e.findCredential(n.restUrl)&&n.signIn().catch(()=>{})}}let kf=class extends Kt{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:hte(e.path,e.portalItem)}:e}set path(e){e!=null&&kl(e)?kt.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return hte(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",n){const r=this.cdnUrl;if(r==null)throw new Xe("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:n?.cacheBust?Date.now():null},signal:n?.signal})}async update(e,n){const{addOrUpdateResources:r}=await ve(()=>import("./resourceUtils-Dcu_DxmR.js"),[]);return await r(this.portalItem,[{resource:this,content:e,compress:n?.compress,access:n?.access}],"update",n),this}hasPath(){return this.path!=null}};function hte(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&kl(t)&&(t=NB(t,e.itemUrl)),t?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}x([E()],kf.prototype,"portalItem",void 0),x([E({type:String,value:null})],kf.prototype,"path",null),x([Ks("path")],kf.prototype,"_castPath",null),x([E({type:String,readOnly:!0})],kf.prototype,"url",null),x([E({type:String,readOnly:!0})],kf.prototype,"cdnUrl",null),x([E({type:String,readOnly:!0})],kf.prototype,"itemRelativeUrl",null),kf=x([ue("esri.portal.PortalItemResource")],kf);let Hy=class extends Kt{constructor(e){super(e),this.created=null,this.rating=null}};x([E({type:Date})],Hy.prototype,"created",void 0),x([E()],Hy.prototype,"rating",void 0),Hy=x([ue("esri.portal.PortalRating")],Hy);var ly;const z9e=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),G9e=new Set(["KML","GeoJson","CSV"]);let bn=ly=class extends m0(NI){static from(t){return KO(ly,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let n=t;return t==="Feature Service"||t==="Feature Collection"?n=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?n=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?n="Scene Layer":t==="Video Service"?n="Video Layer":t==="Scene Package"?n="Scene Layer Package":t==="Stream Service"?n="Feature Layer":t==="Geoprocessing Service"?n=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?n="GeoEnrichment Service":t==="Geocoding Service"?n="Locator":t==="Microsoft Powerpoint"?n="Microsoft PowerPoint":t==="GeoJson"?n="GeoJSON":t==="Globe Service"?n="Globe Layer":t==="Vector Tile Service"?n="Tile Layer":t==="netCDF"?n="NetCDF":t==="Map Service"?n=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t?.toLowerCase().includes("add in")?n=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?n="Big Data File Share":t==="Compact Tile Package"?n="Tile Package (tpkx)":t==="Raster function template"?n="Raster Function Template":t==="OGCFeatureServer"?n="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?n="Instant App":t==="Insights Page"?n="Insights Report":t==="Excalibur Imagery Project"?n="Excalibur Project":t==="3DTiles Service"?n="3D tiles layer":t==="3DTiles Package"&&(n="3D tiles package"),n}readExtent(t){return t&&t.length?new Vn(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type?.toLowerCase()||"",e=this.typeKeywords||[],n="esri/images/portal/",r="16";let i,s=!1,o=!1,a=!1,l=!1,c=!1,u=!1,h=!1,f=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),c=e.includes("Spatiotemporal"),u=e.includes("UtilityNetwork"),i=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":u?"utilitynetwork":s?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(c=e.includes("Spatiotemporal"),h=e.includes("Relational"),i=c||h?"mapimages":s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):i=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":e.includes("GaussianSplat")?"gaussiansplatlayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?i="maps":t==="web scene"?i=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?i="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?i="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?i="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?i="datafiles":t==="360 vr experience"?i="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?i="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?i="addindesktop":t==="pdf"?i="pdf":t==="microsoft word"?i="word":t==="microsoft excel"?i="excel":t==="microsoft powerpoint"?i="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?i="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?i="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?i="layersgray":t==="analysis model"?i="analysismodel":t==="scene package"?i="scenepackage":t==="3dtiles package"?i="3dtileslayerpackage":t==="3dtiles service"?i="3dtileslayer":t==="mobile scene package"?i="mobilescenepackage":t==="tile package"||t==="compact tile package"?i="tilepackage":t==="task file"?i="taskfile":t==="report template"?i="report-template":t==="statistical data collection"?i="statisticaldatacollection":t==="insights workbook"?i="workbook":t==="insights model"?i="insightsmodel":t==="insights page"?i="insightspage":t==="insights theme"?i="insightstheme":t==="hub initiative"?i="hubinitiative":t==="hub page"?i="hubpage":t==="hub site application"?i="hubsite":t==="hub event"?i="hubevent":t==="hub project"?i="hubproject":t==="relational database connection"?i="relationaldatabaseconnection":t==="big data file share"?i="datastorecollection":t==="image collection"?i="imagecollection":t==="desktop style"?i="desktopstyle":t==="style"?i=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?i="dashboard":t==="raster function template"?i="rasterprocessingtemplate":t==="vector tile package"?i="vectortilepackage":t==="ortho mapping project"?i="orthomappingproject":t==="ortho mapping template"?i="orthomappingtemplate":t==="solution"?i="solutions":t==="geopackage"?i="geopackage":t==="deep learning package"?i="deeplearningpackage":t==="real time analytic"?i="realtimeanalytics":t==="reality mapping project"?i="realitymappingproject":t==="big data analytic"?i="bigdataanalytics":t==="feed"?i="feed":t==="excalibur imagery project"?i="excaliburimageryproject":t==="notebook"?i="notebook":t==="storymap"?i="storymap":t==="survey123 add in"?i="survey123addin":t==="mission"?i="mission":t==="mission report"?i="missionreport":t==="mission template"?i="missiontemplate":t==="quickcapture project"?i="quickcaptureproject":t==="pro report"?i="proreport":t==="pro report template"?i="proreporttemplate":t==="urban model"?i="urbanmodel":t==="urban project"?i="urbanproject":t==="web experience"?i="experiencebuilder":t==="web experience template"?i="webexperiencetemplate":t==="experience builder widget"?i="experiencebuilderwidget":t==="experience builder widget package"?i="experiencebuilderwidgetpackage":t==="workflow"?i="workflow":t==="kernel gateway connection"?i="kernelgatewayconnection":t==="insights script"?i="insightsscript":t==="hub initiative template"?i="hubinitiativetemplate":t==="storymap theme"?i="storymaptheme":t==="knowledge graph"?i="knowledgegraph":t==="knowledge graph layer"?i="knowledgegraphlayer":t==="knowledge studio project"?i="knowledgestudio":t==="native application"?i="nativeapp":t==="native application installer"?i="nativeappinstaller":t==="web link chart"?i="linkchart":t==="knowledge graph web investigation"?i="investigation":t==="ogcfeatureserver"?i="features":t==="pro presentation"?i="propresentation":t==="pro project"?i="proproject":t==="insights workbook package"?i="insightsworkbookpackage":t==="apache parquet"?i="apacheparquet":t==="notebook code snippet library"?i="notebookcodesnippets":t==="suitability model"?i="suitabilitymodel":t==="esri classifier definition"?i="classifierdefinition":t==="esri classification schema"?i="classificationschema":t==="insights data engineering workbook"?i="dataengineeringworkbook":t==="insights data engineering model"?i="dataengineeringmodel":t==="deep learning studio project"?i="deeplearningproject":t==="discussion"?i="discussion":t==="allsource project"?i="allsourceproject":t==="api key"?i="apikey":t==="data pipeline"?i="datapipelines":t==="group layer"?(f=e.includes("Map"),i=f?"layergroup2d":"layergroup"):i=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":t==="xr experience"?"xrexperience":"maps",i?Hi(n+i+r+".png"):null}get isLayer(){return this.type!=null&&z9e.has(this.type)}get itemCdnUrl(){return FB(this.itemUrl)}get itemPageUrl(){const t=this.portal?.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){const t=this.portal?.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get loaded(){return super.loaded}get thumbnailUrl(){const t=this.itemUrl,e=this.thumbnail;return t&&e?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`)??null:null}get userItemUrl(){const t=this.portal?.restUrl;if(!t)return null;const e=this.owner||this.portal?.user?.id;return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=st.getDefault()),n=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(n),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},n=t instanceof Hy?t.rating:t;return n==null||isNaN(n)||typeof t!="number"||(e.query.rating=n),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new Hy({rating:n,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:Ze(this.applicationProxies),avgRating:this.avgRating,categories:Ze(this.categories),classification:Ze(this.classification),created:Ze(this.created),culture:this.culture,description:this.description,extent:Ze(this.extent),groupCategories:Ze(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Ze(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Ze(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Ze(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Ze(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new ly({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const e of["tags","typeKeywords","categories"])t[e]=t[e]?.join(", ");for(const e of["extent","classification"]){const n=t[e];n&&(t[e]=JSON.stringify(n))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new Hy(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},ly)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t?.data,n={method:"post"};n.query=this.createPostQuery();for(const r in n.query)n.query[r]===null&&(n.query[r]="");return n.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?n.query.text=e:typeof e=="object"&&(n.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,n).then(()=>this.reload())}):Promise.reject(new Xe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new Xe("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:n}=this;await e.signIn();const{copyResources:r,folder:i,tags:s,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof i=="string"?i:i?.id,includeResources:!!r,tags:s?.join(","),title:o}},{itemId:l}=await e.request(`${n}/copy`,a);return new ly({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,n=t.filename,r={method:"post"};if(typeof e=="string")_v(e)?r.query={data:e}:r.query={url:ru(e)},n!=null&&(r.query.filename=n);else{const i=new FormData;n!=null?i.append("file",e,n):i.append("file",e),r.body=i}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new Xe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:n}=await ve(()=>import("./resourceUtils-Dcu_DxmR.js"),[]);return n(this,t,e)}async addResource(t,e,n){const{addOrUpdateResources:r}=await ve(()=>import("./resourceUtils-Dcu_DxmR.js"),[]);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:n?.compress,access:n?.access}],"add",n),t}async removeResource(t,e){const{removeResource:n}=await ve(()=>import("./resourceUtils-Dcu_DxmR.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new Xe("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return n(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await ve(()=>import("./resourceUtils-Dcu_DxmR.js"),[]);return e(this,t)}resourceFromPath(t){return new kf({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:Ze(this.categories),classification:Ze(this.classification),created:this.created?.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Ze(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Ze(this.typeKeywords),url:this.url};return G6e(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new ly({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};x([E({type:["private","shared","org","public"]})],bn.prototype,"access",void 0),x([E()],bn.prototype,"accessInformation",void 0),x([E({type:String})],bn.prototype,"apiKey",void 0),x([E({json:{read:{source:"appProxies"}}})],bn.prototype,"applicationProxies",void 0),x([E()],bn.prototype,"avgRating",void 0),x([E()],bn.prototype,"categories",void 0),x([E()],bn.prototype,"classification",void 0),x([E({type:Date})],bn.prototype,"created",void 0),x([E()],bn.prototype,"culture",void 0),x([E()],bn.prototype,"description",void 0),x([E({readOnly:!0})],bn.prototype,"displayName",null),x([E({type:Vn})],bn.prototype,"extent",void 0),x([cr("extent")],bn.prototype,"readExtent",null),x([E()],bn.prototype,"groupCategories",void 0),x([E({readOnly:!0})],bn.prototype,"iconUrl",null),x([E()],bn.prototype,"id",void 0),x([E({readOnly:!0})],bn.prototype,"isLayer",null),x([E({type:Boolean,readOnly:!0})],bn.prototype,"isOrgItem",void 0),x([E()],bn.prototype,"itemControl",void 0),x([E({readOnly:!0})],bn.prototype,"itemPageUrl",null),x([E({readOnly:!0})],bn.prototype,"itemUrl",null),x([E()],bn.prototype,"licenseInfo",void 0),x([E({type:Date})],bn.prototype,"modified",void 0),x([E()],bn.prototype,"name",void 0),x([E()],bn.prototype,"numComments",void 0),x([E()],bn.prototype,"numRatings",void 0),x([E()],bn.prototype,"numViews",void 0),x([E()],bn.prototype,"owner",void 0),x([E()],bn.prototype,"ownerFolder",void 0),x([E({type:st})],bn.prototype,"portal",void 0),x([E()],bn.prototype,"screenshots",void 0),x([E()],bn.prototype,"size",void 0),x([E()],bn.prototype,"snippet",void 0),x([E()],bn.prototype,"sourceJSON",void 0),x([E({type:String})],bn.prototype,"sourceUrl",void 0),x([E({type:String})],bn.prototype,"spatialReference",void 0),x([E()],bn.prototype,"tags",void 0),x([E()],bn.prototype,"thumbnail",void 0),x([E({readOnly:!0})],bn.prototype,"thumbnailUrl",null),x([E()],bn.prototype,"title",void 0),x([E()],bn.prototype,"type",void 0),x([E()],bn.prototype,"typeKeywords",void 0),x([E({type:String,json:{read(t,e){if(G9e.has(e.type)){const n=this.portal?.restUrl;t||=n&&this.id?`${n}/content/items/${this.id}/data`:null}return t}}})],bn.prototype,"url",void 0),x([E({readOnly:!0})],bn.prototype,"userItemUrl",null),bn=ly=x([ue("esri.portal.PortalItem")],bn);const Xme=Object.freeze(Object.defineProperty({__proto__:null,get default(){return bn}},Symbol.toStringTag,{value:"Module"})),Zme={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function U9e(t){return t in Zme}function dte(t){if(U9e(t)){const e=Zme[t];return e===!0?t:e}return null}const SS=[],hw=new Map;function fte(t){for(const e of hw.keys())ege(t.pattern,e)&&hw.delete(e)}function B9e(t){return SS.includes(t)||(fte(t),SS.unshift(t)),Zn(()=>{const e=SS.indexOf(t);e>-1&&(SS.splice(e,1),fte(t))})}async function Jme(t){const e=du();hw.has(t)||hw.set(t,W9e(t,e));const n=hw.get(t);return n&&await H9e.add(n),n}function Qme(t){const e=hW(t);return e?dte(t)??dte(e):null}async function W9e(t,e){const n=[];for(const r of SS)if(ege(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(i){n.push(i)}throw n.length?new Xe("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:n}):new Xe("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function ege(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}dW(()=>{hw.clear()});const H9e=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=bc())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function q9e(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,n=await Jme("esri/t9n/basemaps");return n[t]||n[e]}const G9={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-hillshade",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1},{id:"terrain-base",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/33064a20de0c48d2bb61efa8faca93a8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Terrain Base"},{id:"terrain-reference",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/14fbc125ccc9488888b014db09f35f67/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Reference Reference",isReference:!0}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/94329802cbfa44a18f423e6f1a0b875c/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Hi("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Hi("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Hi("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Hi("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Buildings_v1/SceneServer",itemId:"cd33b09dde0a419c986ca1a78a5fc06d",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Hi("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]}},Ud="system",fW="unknown",iA="UTC",K9e=Intl.DateTimeFormat().resolvedOptions().timeZone,pte=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class bv extends Error{}class Y9e extends bv{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class X9e extends bv{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class Z9e extends bv{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Mx extends bv{}class tge extends bv{constructor(e){super(`Invalid unit ${e}`)}}class ia extends bv{}class wm extends bv{constructor(){super("Zone is an abstract class")}}const Rt="numeric",bh="short",yc="long",mN={year:Rt,month:Rt,day:Rt},nge={year:Rt,month:bh,day:Rt},J9e={year:Rt,month:bh,day:Rt,weekday:bh},rge={year:Rt,month:yc,day:Rt},ige={year:Rt,month:yc,day:Rt,weekday:yc},sge={hour:Rt,minute:Rt},oge={hour:Rt,minute:Rt,second:Rt},age={hour:Rt,minute:Rt,second:Rt,timeZoneName:bh},lge={hour:Rt,minute:Rt,second:Rt,timeZoneName:yc},cge={hour:Rt,minute:Rt,hourCycle:"h23"},uge={hour:Rt,minute:Rt,second:Rt,hourCycle:"h23"},hge={hour:Rt,minute:Rt,second:Rt,hourCycle:"h23",timeZoneName:bh},dge={hour:Rt,minute:Rt,second:Rt,hourCycle:"h23",timeZoneName:yc},fge={year:Rt,month:Rt,day:Rt,hour:Rt,minute:Rt},pge={year:Rt,month:Rt,day:Rt,hour:Rt,minute:Rt,second:Rt},mge={year:Rt,month:bh,day:Rt,hour:Rt,minute:Rt},gge={year:Rt,month:bh,day:Rt,hour:Rt,minute:Rt,second:Rt},Q9e={year:Rt,month:bh,day:Rt,weekday:bh,hour:Rt,minute:Rt},yge={year:Rt,month:yc,day:Rt,hour:Rt,minute:Rt,timeZoneName:bh},vge={year:Rt,month:yc,day:Rt,hour:Rt,minute:Rt,second:Rt,timeZoneName:bh},_ge={year:Rt,month:yc,day:Rt,weekday:yc,hour:Rt,minute:Rt,timeZoneName:yc},xge={year:Rt,month:yc,day:Rt,weekday:yc,hour:Rt,minute:Rt,second:Rt,timeZoneName:yc};class LI{get type(){throw new wm}get name(){throw new wm}get ianaName(){return this.name}get isUniversal(){throw new wm}offsetName(e,n){throw new wm}formatOffset(e,n){throw new wm}offset(e){throw new wm}equals(e){throw new wm}get isValid(){throw new wm}}let e$=null;class rL extends LI{static get instance(){return e$===null&&(e$=new rL),e$}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return Rge(e,n,r)}formatOffset(e,n){return PT(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const U9=new Map;function e7e(t){let e=U9.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),U9.set(t,e)),e}const t7e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function n7e(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,a,l,c,u]=r;return[o,i,s,a,l,c,u]}function r7e(t,e){const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const{type:s,value:o}=n[i],a=t7e[s];s==="era"?r[a]=o:In(a)||(r[a]=parseInt(o,10))}return r}const t$=new Map;class Eh extends LI{static create(e){let n=t$.get(e);return n===void 0&&t$.set(e,n=new Eh(e)),n}static resetCache(){t$.clear(),U9.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Eh.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return Rge(e,n,r,this.name)}formatOffset(e,n){return PT(this.offset(e),n)}offset(e){if(!this.valid)return NaN;const n=new Date(e);if(isNaN(n))return NaN;const r=e7e(this.name);let[i,s,o,a,l,c,u]=r.formatToParts?r7e(r,n):n7e(r,n);a==="BC"&&(i=-Math.abs(i)+1);const f=sL({year:i,month:s,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let g=+n;const y=g%1e3;return g-=y>=0?y:1e3+y,(f-g)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let mte={};function i7e(t,e={}){const n=JSON.stringify([t,e]);let r=mte[n];return r||(r=new Intl.ListFormat(t,e),mte[n]=r),r}const B9=new Map;function W9(t,e={}){const n=JSON.stringify([t,e]);let r=B9.get(n);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),B9.set(n,r)),r}const H9=new Map;function s7e(t,e={}){const n=JSON.stringify([t,e]);let r=H9.get(n);return r===void 0&&(r=new Intl.NumberFormat(t,e),H9.set(n,r)),r}const q9=new Map;function o7e(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let s=q9.get(i);return s===void 0&&(s=new Intl.RelativeTimeFormat(t,e),q9.set(i,s)),s}let TS=null;function a7e(){return TS||(TS=new Intl.DateTimeFormat().resolvedOptions().locale,TS)}const K9=new Map;function wge(t){let e=K9.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),K9.set(t,e)),e}const Y9=new Map;function l7e(t){let e=Y9.get(t);if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,"minimalDays"in e||(e={...bge,...e}),Y9.set(t,e)}return e}function c7e(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=W9(t).resolvedOptions(),i=t}catch{const l=t.substring(0,n);r=W9(l).resolvedOptions(),i=l}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function u7e(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function h7e(t){const e=[];for(let n=1;n<=12;n++){const r=pn.utc(2009,n,1);e.push(t(r))}return e}function d7e(t){const e=[];for(let n=1;n<=7;n++){const r=pn.utc(2016,11,13+n);e.push(t(r))}return e}function YC(t,e,n,r){const i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function f7e(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||wge(t.locale).numberingSystem==="latn"}class p7e{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=s7e(e,a)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):vW(e,3);return ks(n,this.padTo)}}}class m7e{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Eh.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=W9(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class g7e{constructor(e,n,r){this.opts={style:"long",...r},!n&&Pge()&&(this.rtf=o7e(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):$7e(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const bge={firstDay:1,minimalDays:4,weekend:[6,7]};class Dr{static fromOpts(e){return Dr.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,r,i,s=!1){const o=e||Yi.defaultLocale,a=o||(s?"en-US":a7e()),l=n||Yi.defaultNumberingSystem,c=r||Yi.defaultOutputCalendar,u=Z9(i)||Yi.defaultWeekSettings;return new Dr(a,l,c,u,o)}static resetCache(){TS=null,B9.clear(),H9.clear(),q9.clear(),K9.clear(),Y9.clear()}static fromObject({locale:e,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return Dr.create(e,n,r,i)}constructor(e,n,r,i,s){const[o,a,l]=c7e(e);this.locale=o,this.numberingSystem=n||a||null,this.outputCalendar=r||l||null,this.weekSettings=i,this.intl=u7e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=f7e(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Dr.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Z9(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return YC(this,e,Oge,()=>{const r=this.intl==="ja"||this.intl.startsWith("ja-");n&=!r;const i=n?{month:e,day:"numeric"}:{month:e},s=n?"format":"standalone";if(!this.monthsCache[s][e]){const o=r?a=>this.dtFormatter(a,i).format():a=>this.extract(a,i,"month");this.monthsCache[s][e]=h7e(o)}return this.monthsCache[s][e]})}weekdays(e,n=!1){return YC(this,e,jge,()=>{const r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=d7e(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return YC(this,void 0,()=>$ge,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[pn.utc(2016,11,13,9),pn.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return YC(this,e,Fge,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[pn.utc(-40,1,1),pn.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){const i=this.dtFormatter(e,n),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new p7e(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new m7e(e,this.intl,n)}relFormatter(e={}){return new g7e(this.intl,this.isEnglish(),e)}listFormatter(e={}){return i7e(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||wge(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Cge()?l7e(this.locale):bge}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let n$=null;class fa extends LI{static get utcInstance(){return n$===null&&(n$=new fa(0)),n$}static instance(e){return e===0?fa.utcInstance:new fa(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new fa(oL(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${PT(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${PT(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return PT(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class y7e extends LI{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Qm(t,e){if(In(t)||t===null)return e;if(t instanceof LI)return t;if(E7e(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?rL.instance:n==="utc"||n==="gmt"?fa.utcInstance:fa.parseSpecifier(n)||Eh.create(t)}else return Rg(t)?fa.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new y7e(t)}const pW={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},gte={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},v7e=pW.hanidec.replace(/[\[|\]]/g,"").split("");function _7e(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(t[n].search(pW.hanidec)!==-1)e+=v7e.indexOf(t[n]);else for(const i in gte){const[s,o]=gte[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}const X9=new Map;function x7e(){X9.clear()}function Lu({numberingSystem:t},e=""){const n=t||"latn";let r=X9.get(n);r===void 0&&(r=new Map,X9.set(n,r));let i=r.get(e);return i===void 0&&(i=new RegExp(`${pW[n]}${e}`),r.set(e,i)),i}let yte=()=>Date.now(),vte="system",_te=null,xte=null,wte=null,bte=60,Ete,Ste=null,Yi=class{static get now(){return yte}static set now(e){yte=e}static set defaultZone(e){vte=e}static get defaultZone(){return Qm(vte,rL.instance)}static get defaultLocale(){return _te}static set defaultLocale(e){_te=e}static get defaultNumberingSystem(){return xte}static set defaultNumberingSystem(e){xte=e}static get defaultOutputCalendar(){return wte}static set defaultOutputCalendar(e){wte=e}static get defaultWeekSettings(){return Ste}static set defaultWeekSettings(e){Ste=Z9(e)}static get twoDigitCutoffYear(){return bte}static set twoDigitCutoffYear(e){bte=e%100}static get throwOnInvalid(){return Ete}static set throwOnInvalid(e){Ete=e}static resetCaches(){Dr.resetCache(),Eh.resetCache(),pn.resetCache(),x7e()}};class uh{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Ege=[0,31,59,90,120,151,181,212,243,273,304,334],Sge=[0,31,60,91,121,152,182,213,244,274,305,335];function au(t,e){return new uh("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function mW(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function Tge(t,e,n){return n+(DI(t)?Sge:Ege)[e-1]}function kge(t,e){const n=DI(t)?Sge:Ege,r=n.findIndex(s=>s<e),i=e-n[r];return{month:r+1,day:i}}function gW(t,e){return(t-e+7)%7+1}function gN(t,e=4,n=1){const{year:r,month:i,day:s}=t,o=Tge(r,i,s),a=gW(mW(r,i,s),n);let l=Math.floor((o-a+14-e)/7),c;return l<1?(c=r-1,l=sA(c,e,n)):l>sA(r,e,n)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:a,...aL(t)}}function Tte(t,e=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=t,o=gW(mW(r,1,e),n),a=dw(r);let l=i*7+s-o-7+e,c;l<1?(c=r-1,l+=dw(c)):l>a?(c=r+1,l-=dw(r)):c=r;const{month:u,day:h}=kge(c,l);return{year:c,month:u,day:h,...aL(t)}}function r$(t){const{year:e,month:n,day:r}=t,i=Tge(e,n,r);return{year:e,ordinal:i,...aL(t)}}function kte(t){const{year:e,ordinal:n}=t,{month:r,day:i}=kge(e,n);return{year:e,month:r,day:i,...aL(t)}}function Ate(t,e){if(!In(t.localWeekday)||!In(t.localWeekNumber)||!In(t.localWeekYear)){if(!In(t.weekday)||!In(t.weekNumber)||!In(t.weekYear))throw new Mx("Cannot mix locale-based week fields with ISO-based week fields");return In(t.localWeekday)||(t.weekday=t.localWeekday),In(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),In(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function w7e(t,e=4,n=1){const r=iL(t.weekYear),i=lu(t.weekNumber,1,sA(t.weekYear,e,n)),s=lu(t.weekday,1,7);return r?i?s?!1:au("weekday",t.weekday):au("week",t.weekNumber):au("weekYear",t.weekYear)}function b7e(t){const e=iL(t.year),n=lu(t.ordinal,1,dw(t.year));return e?n?!1:au("ordinal",t.ordinal):au("year",t.year)}function Age(t){const e=iL(t.year),n=lu(t.month,1,12),r=lu(t.day,1,yN(t.year,t.month));return e?n?r?!1:au("day",t.day):au("month",t.month):au("year",t.year)}function Ige(t){const{hour:e,minute:n,second:r,millisecond:i}=t,s=lu(e,0,23)||e===24&&n===0&&r===0&&i===0,o=lu(n,0,59),a=lu(r,0,59),l=lu(i,0,999);return s?o?a?l?!1:au("millisecond",i):au("second",r):au("minute",n):au("hour",e)}function In(t){return typeof t>"u"}function Rg(t){return typeof t=="number"}function iL(t){return typeof t=="number"&&t%1===0}function E7e(t){return typeof t=="string"}function S7e(t){return Object.prototype.toString.call(t)==="[object Date]"}function Pge(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Cge(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function T7e(t){return Array.isArray(t)?t:[t]}function Ite(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{const s=[e(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function k7e(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function D2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Z9(t){if(t==null)return null;if(typeof t!="object")throw new ia("Week settings must be an object");if(!lu(t.firstDay,1,7)||!lu(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!lu(e,1,7)))throw new ia("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function lu(t,e,n){return iL(t)&&t>=e&&t<=n}function A7e(t,e){return t-e*Math.floor(t/e)}function ks(t,e=2){const n=t<0;let r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Bm(t){if(!(In(t)||t===null||t===""))return parseInt(t,10)}function W0(t){if(!(In(t)||t===null||t===""))return parseFloat(t)}function yW(t){if(!(In(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function vW(t,e,n="round"){const r=10**e;switch(n){case"expand":return t>0?Math.ceil(t*r)/r:Math.floor(t*r)/r;case"trunc":return Math.trunc(t*r)/r;case"round":return Math.round(t*r)/r;case"floor":return Math.floor(t*r)/r;case"ceil":return Math.ceil(t*r)/r;default:throw new RangeError(`Value rounding ${n} is out of range`)}}function DI(t){return t%4===0&&(t%100!==0||t%400===0)}function dw(t){return DI(t)?366:365}function yN(t,e){const n=A7e(e-1,12)+1,r=t+(e-n)/12;return n===2?DI(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function sL(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function Pte(t,e,n){return-gW(mW(t,1,e),n)+e-1}function sA(t,e=4,n=1){const r=Pte(t,e,n),i=Pte(t+1,e,n);return(dw(t)-r+i)/7}function J9(t){return t>99?t:t>Yi.twoDigitCutoffYear?1900+t:2e3+t}function Rge(t,e,n,r=null){const i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function oL(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function Mge(t){const e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new ia(`Invalid unit value ${t}`);return e}function vN(t,e){const n={};for(const r in t)if(D2(t,r)){const i=t[r];if(i==null)continue;n[e(r)]=Mge(i)}return n}function PT(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${ks(n,2)}:${ks(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${ks(n,2)}${ks(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function aL(t){return k7e(t,["hour","minute","second","millisecond"])}const I7e=["January","February","March","April","May","June","July","August","September","October","November","December"],Nge=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],P7e=["J","F","M","A","M","J","J","A","S","O","N","D"];function Oge(t){switch(t){case"narrow":return[...P7e];case"short":return[...Nge];case"long":return[...I7e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Lge=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Dge=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],C7e=["M","T","W","T","F","S","S"];function jge(t){switch(t){case"narrow":return[...C7e];case"short":return[...Dge];case"long":return[...Lge];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const $ge=["AM","PM"],R7e=["Before Christ","Anno Domini"],M7e=["BC","AD"],N7e=["B","A"];function Fge(t){switch(t){case"narrow":return[...N7e];case"short":return[...M7e];case"long":return[...R7e];default:return null}}function O7e(t){return $ge[t.hour<12?0:1]}function L7e(t,e){return jge(e)[t.weekday-1]}function D7e(t,e){return Oge(e)[t.month-1]}function j7e(t,e){return Fge(e)[t.year<0?0:1]}function $7e(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=i[t],u=r?l?c[1]:c[2]||c[1]:l?i[t][0]:t;return o?`${a} ${u} ago`:`in ${a} ${u}`}function Cte(t,e){let n="";for(const r of t)r.literal?n+=r.val:n+=e(r.val);return n}const F7e={D:mN,DD:nge,DDD:rge,DDDD:ige,t:sge,tt:oge,ttt:age,tttt:lge,T:cge,TT:uge,TTT:hge,TTTT:dge,f:fge,ff:mge,fff:yge,ffff:_ge,F:pge,FF:gge,FFF:vge,FFFF:xge};class ha{static create(e,n={}){return new ha(e,n)}static parseFormat(e){let n=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?((r.length>0||i)&&s.push({literal:i||/^\s+$/.test(r),val:r===""?"'":r}),n=null,r="",i=!i):i||a===n?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,n=a)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return F7e[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0,r=void 0){if(this.opts.forceSimple)return ks(e,n);const i={...this.opts};return n>0&&(i.padTo=n),r&&(i.signDisplay=r),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(g,y)=>this.loc.extract(e,g,y),o=g=>e.isOffsetFixed&&e.offset===0&&g.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,g.format):"",a=()=>r?O7e(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(g,y)=>r?D7e(e,g):s(y?{month:g}:{month:g,day:"numeric"},"month"),c=(g,y)=>r?L7e(e,g):s(y?{weekday:g}:{weekday:g,month:"long",day:"numeric"},"weekday"),u=g=>{const y=ha.macroTokenToFormatOpts(g);return y?this.formatWithSystemDefault(e,y):g},h=g=>r?j7e(e,g):s({era:g},"era"),f=g=>{switch(g){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(g)}};return Cte(ha.parseFormat(n),f)}formatDurationFromString(e,n){const r=this.opts.signMode==="negativeLargestOnly"?-1:1,i=u=>{switch(u[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(u,h)=>f=>{const g=i(f);if(g){const y=h.isNegativeDuration&&g!==h.largestUnit?r:1;let _;return this.opts.signMode==="negativeLargestOnly"&&g!==h.largestUnit?_="never":this.opts.signMode==="all"?_="always":_="auto",this.num(u.get(g)*y,f.length,_)}else return f},o=ha.parseFormat(n),a=o.reduce((u,{literal:h,val:f})=>h?u:u.concat(f),[]),l=e.shiftTo(...a.map(i).filter(u=>u)),c={isNegativeDuration:l<0,largestUnit:Object.keys(l.values)[0]};return Cte(o,s(l,c))}}const Vge=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ab(...t){const e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function Ib(...t){return e=>t.reduce(([n,r,i],s)=>{const[o,a,l]=s(e,i);return[{...n,...o},a||r,l]},[{},null,1]).slice(0,2)}function Pb(t,...e){if(t==null)return[null,null];for(const[n,r]of e){const i=n.exec(t);if(i)return r(i)}return[null,null]}function zge(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=Bm(e[n+i]);return[r,null,n+i]}}const Gge=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,V7e=`(?:${Gge.source}?(?:\\[(${Vge.source})\\])?)?`,_W=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Uge=RegExp(`${_W.source}${V7e}`),xW=RegExp(`(?:[Tt]${Uge.source})?`),z7e=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,G7e=/(\d{4})-?W(\d\d)(?:-?(\d))?/,U7e=/(\d{4})-?(\d{3})/,B7e=zge("weekYear","weekNumber","weekDay"),W7e=zge("year","ordinal"),H7e=/(\d{4})-(\d\d)-(\d\d)/,Bge=RegExp(`${_W.source} ?(?:${Gge.source}|(${Vge.source}))?`),q7e=RegExp(`(?: ${Bge.source})?`);function fw(t,e,n){const r=t[e];return In(r)?n:Bm(r)}function K7e(t,e){return[{year:fw(t,e),month:fw(t,e+1,1),day:fw(t,e+2,1)},null,e+3]}function Cb(t,e){return[{hours:fw(t,e,0),minutes:fw(t,e+1,0),seconds:fw(t,e+2,0),milliseconds:yW(t[e+3])},null,e+4]}function jI(t,e){const n=!t[e]&&!t[e+1],r=oL(t[e+1],t[e+2]),i=n?null:fa.instance(r);return[{},i,e+3]}function $I(t,e){const n=t[e]?Eh.create(t[e]):null;return[{},n,e+1]}const Y7e=RegExp(`^T?${_W.source}$`),X7e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Z7e(t){const[e,n,r,i,s,o,a,l,c]=t,u=e[0]==="-",h=l&&l[0]==="-",f=(g,y=!1)=>g!==void 0&&(y||g&&u)?-g:g;return[{years:f(W0(n)),months:f(W0(r)),weeks:f(W0(i)),days:f(W0(s)),hours:f(W0(o)),minutes:f(W0(a)),seconds:f(W0(l),l==="-0"),milliseconds:f(yW(c),h)}]}const J7e={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function wW(t,e,n,r,i,s,o){const a={year:e.length===2?J9(Bm(e)):Bm(e),month:Nge.indexOf(n)+1,day:Bm(r),hour:Bm(i),minute:Bm(s)};return o&&(a.second=Bm(o)),t&&(a.weekday=t.length>3?Lge.indexOf(t)+1:Dge.indexOf(t)+1),a}const Q7e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function eVe(t){const[,e,n,r,i,s,o,a,l,c,u,h]=t,f=wW(e,i,r,n,s,o,a);let g;return l?g=J7e[l]:c?g=0:g=oL(u,h),[f,new fa(g)]}function tVe(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const nVe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,rVe=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,iVe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Rte(t){const[,e,n,r,i,s,o,a]=t;return[wW(e,i,r,n,s,o,a),fa.utcInstance]}function sVe(t){const[,e,n,r,i,s,o,a]=t;return[wW(e,a,n,r,i,s,o),fa.utcInstance]}const oVe=Ab(z7e,xW),aVe=Ab(G7e,xW),lVe=Ab(U7e,xW),cVe=Ab(Uge),Wge=Ib(K7e,Cb,jI,$I),uVe=Ib(B7e,Cb,jI,$I),hVe=Ib(W7e,Cb,jI,$I),dVe=Ib(Cb,jI,$I);function fVe(t){return Pb(t,[oVe,Wge],[aVe,uVe],[lVe,hVe],[cVe,dVe])}function pVe(t){return Pb(tVe(t),[Q7e,eVe])}function mVe(t){return Pb(t,[nVe,Rte],[rVe,Rte],[iVe,sVe])}function gVe(t){return Pb(t,[X7e,Z7e])}const yVe=Ib(Cb);function vVe(t){return Pb(t,[Y7e,yVe])}const _Ve=Ab(H7e,q7e),xVe=Ab(Bge),wVe=Ib(Cb,jI,$I);function bVe(t){return Pb(t,[_Ve,Wge],[xVe,wVe])}const Mte="Invalid Duration",Hge={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},EVe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...Hge},$c=146097/400,A_=146097/4800,SVe={years:{quarters:4,months:12,weeks:$c/7,days:$c,hours:$c*24,minutes:$c*24*60,seconds:$c*24*60*60,milliseconds:$c*24*60*60*1e3},quarters:{months:3,weeks:$c/28,days:$c/4,hours:$c*24/4,minutes:$c*24*60/4,seconds:$c*24*60*60/4,milliseconds:$c*24*60*60*1e3/4},months:{weeks:A_/7,days:A_,hours:A_*24,minutes:A_*24*60,seconds:A_*24*60*60,milliseconds:A_*24*60*60*1e3},...Hge},qy=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],TVe=qy.slice(0).reverse();function yf(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new mr(r)}function qge(t,e){let n=e.milliseconds??0;for(const r of TVe.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function Nte(t,e){const n=qge(t,e)<0?-1:1;qy.reduceRight((r,i)=>{if(In(e[i]))return r;if(r){const s=e[r]*n,o=t[i][r],a=Math.floor(s/o);e[i]+=a*n,e[r]-=a*o*n}return i},null),qy.reduce((r,i)=>{if(In(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*t[r][i]}return i},null)}function Ote(t){const e={};for(const[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}class mr{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let r=n?SVe:EVe;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Dr.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return mr.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new ia(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new mr({values:vN(e,mr.normalizeUnit),loc:Dr.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Rg(e))return mr.fromMillis(e);if(mr.isDuration(e))return e;if(typeof e=="object")return mr.fromObject(e);throw new ia(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[r]=gVe(e);return r?mr.fromObject(r,n):mr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[r]=vVe(e);return r?mr.fromObject(r,n):mr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new ia("need to specify a reason the Duration is invalid");const r=e instanceof uh?e:new uh(e,n);if(Yi.throwOnInvalid)throw new Z9e(r);return new mr({invalid:r})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new tge(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?ha.create(this.loc,r).formatDurationFromString(this,e):Mte}toHuman(e={}){if(!this.isValid)return Mte;const n=e.showZeros!==!1,r=qy.map(i=>{const s=this.values[i];return In(s)||s===0&&!n?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=vW(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},pn.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?qge(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=mr.fromDurationLike(e),r={};for(const i of qy)(D2(n.values,i)||D2(this.values,i))&&(r[i]=n.get(i)+this.get(i));return yf(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const n=mr.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=Mge(e(this.values[r],r));return yf(this,{values:n},!0)}get(e){return this[mr.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...vN(e,mr.normalizeUnit)};return yf(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return yf(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return Nte(this.matrix,e),yf(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Ote(this.normalize().shiftToAll().toObject());return yf(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>mr.normalizeUnit(o));const n={},r={},i=this.toObject();let s;for(const o of qy)if(e.indexOf(o)>=0){s=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;Rg(i[o])&&(a+=i[o]);const l=Math.trunc(a);n[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else Rg(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(n[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return Nte(this.matrix,n),yf(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return yf(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=Ote(this.values);return yf(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of qy)if(!n(this.values[r],e.values[r]))return!1;return!0}}const I_="Invalid Interval";function kVe(t,e){return!t||!t.isValid?qi.invalid("missing or invalid start"):!e||!e.isValid?qi.invalid("missing or invalid end"):e<t?qi.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class qi{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new ia("need to specify a reason the Interval is invalid");const r=e instanceof uh?e:new uh(e,n);if(Yi.throwOnInvalid)throw new X9e(r);return new qi({invalid:r})}static fromDateTimes(e,n){const r=UE(e),i=UE(n),s=kVe(r,i);return s??new qi({start:r,end:i})}static after(e,n){const r=mr.fromDurationLike(n),i=UE(e);return qi.fromDateTimes(i,i.plus(r))}static before(e,n){const r=mr.fromDurationLike(n),i=UE(e);return qi.fromDateTimes(i.minus(r),i)}static fromISO(e,n){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=pn.fromISO(r,n),o=s.isValid}catch{o=!1}let a,l;try{a=pn.fromISO(i,n),l=a.isValid}catch{l=!1}if(o&&l)return qi.fromDateTimes(s,a);if(o){const c=mr.fromISO(i,n);if(c.isValid)return qi.after(s,c)}else if(l){const c=mr.fromISO(r,n);if(c.isValid)return qi.before(a,c)}}return qi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(e,n);let i;return n?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,n),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?qi.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(UE).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;r.push(qi.fromDateTimes(i,a)),i=a,s+=1}return r}splitBy(e){const n=mr.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(n.mapUnits(l=>l*i));s=+a>+this.e?this.e:a,o.push(qi.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:qi.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return qi.fromDateTimes(n,r)}static merge(e){const[n,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0;const i=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?n=l.time:(n&&+n!=+l.time&&i.push(qi.fromDateTimes(n,l.time)),n=null);return qi.merge(i)}difference(...e){return qi.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:I_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=mN,n={}){return this.isValid?ha.create(this.s.loc.clone(n),e).formatInterval(this):I_}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:I_}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:I_}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:I_}toFormat(e,{separator:n="  "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:I_}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):mr.invalid(this.invalidReason)}mapEndpoints(e){return qi.fromDateTimes(e(this.s),e(this.e))}}let XC=class{static hasDST(e=Yi.defaultZone){const n=pn.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return Eh.isValidZone(e)}static normalizeZone(e){return Qm(e,Yi.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||Dr.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||Dr.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||Dr.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Dr.create(n,r,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Dr.create(n,r,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Dr.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Dr.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Dr.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Dr.create(n,null,"gregory").eras(e)}static features(){return{relative:Pge(),localeWeek:Cge()}}};function Lte(t,e){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(mr.fromMillis(r).as("days"))}function AVe(t,e,n){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=Lte(l,c);return(u-u%7)/7}],["days",Lte]],i={},s=t;let o,a;for(const[l,c]of r)n.indexOf(l)>=0&&(o=l,i[l]=c(t,e),a=s.plus(i),a>e?(i[l]--,t=s.plus(i),t>e&&(a=t,i[l]--,t=s.plus(i))):t=a);return[t,i,a,o]}function IVe(t,e,n,r){let[i,s,o,a]=AVe(t,e,n);const l=e-i,c=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);c.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+l/(o-i)));const u=mr.fromObject(s,r);return c.length>0?mr.fromMillis(l,r).shiftTo(...c).plus(u):u}const PVe="missing Intl.DateTimeFormat.formatToParts support";function Tr(t,e=n=>n){return{regex:t,deser:([n])=>e(_7e(n))}}const CVe="",Kge=`[ ${CVe}]`,Yge=new RegExp(Kge,"g");function RVe(t){return t.replace(/\./g,"\\.?").replace(Yge,Kge)}function Dte(t){return t.replace(/\./g,"").replace(Yge," ").toLowerCase()}function Du(t,e){return t===null?null:{regex:RegExp(t.map(RVe).join("|")),deser:([n])=>t.findIndex(r=>Dte(n)===Dte(r))+e}}function jte(t,e){return{regex:t,deser:([,n,r])=>oL(n,r),groups:e}}function ZC(t){return{regex:t,deser:([e])=>e}}function MVe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function NVe(t,e){const n=Lu(e),r=Lu(e,"{2}"),i=Lu(e,"{3}"),s=Lu(e,"{4}"),o=Lu(e,"{6}"),a=Lu(e,"{1,2}"),l=Lu(e,"{1,3}"),c=Lu(e,"{1,6}"),u=Lu(e,"{1,9}"),h=Lu(e,"{2,4}"),f=Lu(e,"{4,6}"),g=b=>({regex:RegExp(MVe(b.val)),deser:([T])=>T,literal:!0}),_=(b=>{if(t.literal)return g(b);switch(b.val){case"G":return Du(e.eras("short"),0);case"GG":return Du(e.eras("long"),0);case"y":return Tr(c);case"yy":return Tr(h,J9);case"yyyy":return Tr(s);case"yyyyy":return Tr(f);case"yyyyyy":return Tr(o);case"M":return Tr(a);case"MM":return Tr(r);case"MMM":return Du(e.months("short",!0),1);case"MMMM":return Du(e.months("long",!0),1);case"L":return Tr(a);case"LL":return Tr(r);case"LLL":return Du(e.months("short",!1),1);case"LLLL":return Du(e.months("long",!1),1);case"d":return Tr(a);case"dd":return Tr(r);case"o":return Tr(l);case"ooo":return Tr(i);case"HH":return Tr(r);case"H":return Tr(a);case"hh":return Tr(r);case"h":return Tr(a);case"mm":return Tr(r);case"m":return Tr(a);case"q":return Tr(a);case"qq":return Tr(r);case"s":return Tr(a);case"ss":return Tr(r);case"S":return Tr(l);case"SSS":return Tr(i);case"u":return ZC(u);case"uu":return ZC(a);case"uuu":return Tr(n);case"a":return Du(e.meridiems(),0);case"kkkk":return Tr(s);case"kk":return Tr(h,J9);case"W":return Tr(a);case"WW":return Tr(r);case"E":case"c":return Tr(n);case"EEE":return Du(e.weekdays("short",!1),1);case"EEEE":return Du(e.weekdays("long",!1),1);case"ccc":return Du(e.weekdays("short",!0),1);case"cccc":return Du(e.weekdays("long",!0),1);case"Z":case"ZZ":return jte(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return jte(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return ZC(/[a-z_+-/]{1,256}?/i);case" ":return ZC(/[^\S\n\r]/);default:return g(b)}})(t)||{invalidReason:PVe};return _.token=t,_}const OVe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function LVe(t,e,n){const{type:r,value:i}=t;if(r==="literal"){const l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=OVe[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function DVe(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function jVe(t,e,n){const r=t.match(e);if(r){const i={};let s=1;for(const o in n)if(D2(n,o)){const a=n[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,i]}else return[r,{}]}function $Ve(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return In(t.z)||(n=Eh.create(t.z)),In(t.Z)||(n||(n=new fa(t.Z)),r=t.Z),In(t.q)||(t.M=(t.q-1)*3+1),In(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),In(t.u)||(t.S=yW(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),n,r]}let i$=null;function FVe(){return i$||(i$=pn.fromMillis(1555555555555)),i$}function VVe(t,e){if(t.literal)return t;const n=ha.macroTokenToFormatOpts(t.val),r=Qge(n,e);return r==null||r.includes(void 0)?t:r}function Xge(t,e){return Array.prototype.concat(...t.map(n=>VVe(n,e)))}class Zge{constructor(e,n){if(this.locale=e,this.format=n,this.tokens=Xge(ha.parseFormat(n),e),this.units=this.tokens.map(r=>NVe(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=DVe(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[n,r]=jVe(e,this.regex,this.handlers),[i,s,o]=r?$Ve(r):[null,null,void 0];if(D2(r,"a")&&D2(r,"H"))throw new Mx("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Jge(t,e,n){return new Zge(t,n).explainFromTokens(e)}function zVe(t,e,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=Jge(t,e,n);return[r,i,s,o]}function Qge(t,e){if(!t)return null;const r=ha.create(e,t).dtFormatter(FVe()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>LVe(o,t,s))}const s$="Invalid DateTime",$te=864e13;function kS(t){return new uh("unsupported zone",`the zone "${t.name}" is not supported`)}function o$(t){return t.weekData===null&&(t.weekData=gN(t.c)),t.weekData}function a$(t){return t.localWeekData===null&&(t.localWeekData=gN(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function H0(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new pn({...n,...e,old:n})}function e0e(t,e,n){let r=t-e*60*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=n.offset(r);return i===s?[r,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function JC(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function FM(t,e,n){return e0e(sL(t),e,n)}function Fte(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:i,day:Math.min(t.c.day,yN(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=mr.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=sL(s);let[l,c]=e0e(a,n,t.zone);return o!==0&&(l+=o,c=t.zone.offset(l)),{ts:l,o:c}}function P_(t,e,n,r,i,s){const{setZone:o,zone:a}=n;if(t&&Object.keys(t).length!==0||e){const l=e||a,c=pn.fromObject(t,{...n,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return pn.invalid(new uh("unparsable",`the input "${i}" can't be parsed as ${r}`))}function QC(t,e,n=!0){return t.isValid?ha.create(Dr.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function l$(t,e,n){const r=t.c.year>9999||t.c.year<0;let i="";if(r&&t.c.year>=0&&(i+="+"),i+=ks(t.c.year,r?6:4),n==="year")return i;if(e){if(i+="-",i+=ks(t.c.month),n==="month")return i;i+="-"}else if(i+=ks(t.c.month),n==="month")return i;return i+=ks(t.c.day),i}function Vte(t,e,n,r,i,s,o){let a=!n||t.c.millisecond!==0||t.c.second!==0,l="";switch(o){case"day":case"month":case"year":break;default:if(l+=ks(t.c.hour),o==="hour")break;if(e){if(l+=":",l+=ks(t.c.minute),o==="minute")break;a&&(l+=":",l+=ks(t.c.second))}else{if(l+=ks(t.c.minute),o==="minute")break;a&&(l+=ks(t.c.second))}if(o==="second")break;a&&(!r||t.c.millisecond!==0)&&(l+=".",l+=ks(t.c.millisecond,3))}return i&&(t.isOffsetFixed&&t.offset===0&&!s?l+="Z":t.o<0?(l+="-",l+=ks(Math.trunc(-t.o/60)),l+=":",l+=ks(Math.trunc(-t.o%60))):(l+="+",l+=ks(Math.trunc(t.o/60)),l+=":",l+=ks(Math.trunc(t.o%60)))),s&&(l+="["+t.zone.ianaName+"]"),l}const t0e={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},GVe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},UVe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},VM=["year","month","day","hour","minute","second","millisecond"],BVe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],WVe=["year","ordinal","hour","minute","second","millisecond"];function zM(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new tge(t);return e}function zte(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return zM(t)}}function HVe(t){if(AS===void 0&&(AS=Yi.now()),t.type!=="iana")return t.offset(AS);const e=t.name;let n=Q9.get(e);return n===void 0&&(n=t.offset(AS),Q9.set(e,n)),n}function Gte(t,e){const n=Qm(e.zone,Yi.defaultZone);if(!n.isValid)return pn.invalid(kS(n));const r=Dr.fromObject(e);let i,s;if(In(t.year))i=Yi.now();else{for(const l of VM)In(t[l])&&(t[l]=t0e[l]);const o=Age(t)||Ige(t);if(o)return pn.invalid(o);const a=HVe(n);[i,s]=FM(t,a,n)}return new pn({ts:i,zone:n,loc:r,o:s})}function Ute(t,e,n){const r=In(n.round)?!0:n.round,i=In(n.rounding)?"trunc":n.rounding,s=(a,l)=>(a=vW(a,r||n.calendary?0:2,n.calendary?"round":i),e.loc.clone(n).relFormatter(n).format(a,l)),o=a=>n.calendary?e.hasSame(t,a)?0:e.startOf(a).diff(t.startOf(a),a).get(a):e.diff(t,a).get(a);if(n.unit)return s(o(n.unit),n.unit);for(const a of n.units){const l=o(a);if(Math.abs(l)>=1)return s(l,a)}return s(t>e?-0:0,n.units[n.units.length-1])}function Bte(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}let AS;const Q9=new Map;class pn{constructor(e){const n=e.zone||Yi.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new uh("invalid input"):null)||(n.isValid?null:kS(n));this.ts=In(e.ts)?Yi.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,s]=[e.old.c,e.old.o];else{const a=Rg(e.o)&&!e.old?e.o:n.offset(this.ts);i=JC(this.ts,a),r=Number.isNaN(i.year)?new uh("invalid input"):null,i=r?null:i,s=r?null:a}this._zone=n,this.loc=e.loc||Dr.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new pn({})}static local(){const[e,n]=Bte(arguments),[r,i,s,o,a,l,c]=n;return Gte({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,n]=Bte(arguments),[r,i,s,o,a,l,c]=n;return e.zone=fa.utcInstance,Gte({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,n={}){const r=S7e(e)?e.valueOf():NaN;if(Number.isNaN(r))return pn.invalid("invalid input");const i=Qm(n.zone,Yi.defaultZone);return i.isValid?new pn({ts:r,zone:i,loc:Dr.fromObject(n)}):pn.invalid(kS(i))}static fromMillis(e,n={}){if(Rg(e))return e<-$te||e>$te?pn.invalid("Timestamp out of range"):new pn({ts:e,zone:Qm(n.zone,Yi.defaultZone),loc:Dr.fromObject(n)});throw new ia(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Rg(e))return new pn({ts:e*1e3,zone:Qm(n.zone,Yi.defaultZone),loc:Dr.fromObject(n)});throw new ia("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const r=Qm(n.zone,Yi.defaultZone);if(!r.isValid)return pn.invalid(kS(r));const i=Dr.fromObject(n),s=vN(e,zte),{minDaysInFirstWeek:o,startOfWeek:a}=Ate(s,i),l=Yi.now(),c=In(n.specificOffset)?r.offset(l):n.specificOffset,u=!In(s.ordinal),h=!In(s.year),f=!In(s.month)||!In(s.day),g=h||f,y=s.weekYear||s.weekNumber;if((g||u)&&y)throw new Mx("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&u)throw new Mx("Can't mix ordinal dates with month/day");const _=y||s.weekday&&!g;let b,T,A=JC(l,c);_?(b=BVe,T=GVe,A=gN(A,o,a)):u?(b=WVe,T=UVe,A=r$(A)):(b=VM,T=t0e);let I=!1;for(const L of b){const F=s[L];In(F)?I?s[L]=T[L]:s[L]=A[L]:I=!0}const P=_?w7e(s,o,a):u?b7e(s):Age(s),M=P||Ige(s);if(M)return pn.invalid(M);const V=_?Tte(s,o,a):u?kte(s):s,[C,N]=FM(V,c,r),O=new pn({ts:C,zone:r,o:N,loc:i});return s.weekday&&g&&e.weekday!==O.weekday?pn.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${O.toISO()}`):O.isValid?O:pn.invalid(O.invalid)}static fromISO(e,n={}){const[r,i]=fVe(e);return P_(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[r,i]=pVe(e);return P_(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[r,i]=mVe(e);return P_(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(In(e)||In(n))throw new ia("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Dr.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,l,c,u]=zVe(o,e,n);return u?pn.invalid(u):P_(a,l,r,`format ${n}`,e,c)}static fromString(e,n,r={}){return pn.fromFormat(e,n,r)}static fromSQL(e,n={}){const[r,i]=bVe(e);return P_(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new ia("need to specify a reason the DateTime is invalid");const r=e instanceof uh?e:new uh(e,n);if(Yi.throwOnInvalid)throw new Y9e(r);return new pn({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const r=Qge(e,Dr.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return Xge(ha.parseFormat(e),Dr.fromObject(n)).map(i=>i.val).join("")}static resetCache(){AS=void 0,Q9.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?o$(this).weekYear:NaN}get weekNumber(){return this.isValid?o$(this).weekNumber:NaN}get weekday(){return this.isValid?o$(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?a$(this).weekday:NaN}get localWeekNumber(){return this.isValid?a$(this).weekNumber:NaN}get localWeekYear(){return this.isValid?a$(this).weekYear:NaN}get ordinal(){return this.isValid?r$(this.c).ordinal:NaN}get monthShort(){return this.isValid?XC.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?XC.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?XC.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?XC.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,r=sL(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*n),a=this.zone.offset(r-s*n);if(o===a)return[this];const l=r-o*n,c=r-a*n,u=JC(l,o),h=JC(c,a);return u.hour===h.hour&&u.minute===h.minute&&u.second===h.second&&u.millisecond===h.millisecond?[H0(this,{ts:l}),H0(this,{ts:c})]:[this]}get isInLeapYear(){return DI(this.year)}get daysInMonth(){return yN(this.year,this.month)}get daysInYear(){return this.isValid?dw(this.year):NaN}get weeksInWeekYear(){return this.isValid?sA(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?sA(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:r,calendar:i}=ha.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(fa.instance(e),n)}toLocal(){return this.setZone(Yi.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=Qm(e,Yi.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){const s=e.offset(this.ts),o=this.toObject();[i]=FM(o,s,e)}return H0(this,{ts:i,zone:e})}else return pn.invalid(kS(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return H0(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=vN(e,zte),{minDaysInFirstWeek:r,startOfWeek:i}=Ate(n,this.loc),s=!In(n.weekYear)||!In(n.weekNumber)||!In(n.weekday),o=!In(n.ordinal),a=!In(n.year),l=!In(n.month)||!In(n.day),c=a||l,u=n.weekYear||n.weekNumber;if((c||o)&&u)throw new Mx("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Mx("Can't mix ordinal dates with month/day");let h;s?h=Tte({...gN(this.c,r,i),...n},r,i):In(n.ordinal)?(h={...this.toObject(),...n},In(n.day)&&(h.day=Math.min(yN(h.year,h.month),h.day))):h=kte({...r$(this.c),...n});const[f,g]=FM(h,this.o,this.zone);return H0(this,{ts:f,o:g})}plus(e){if(!this.isValid)return this;const n=mr.fromDurationLike(e);return H0(this,Fte(this,n))}minus(e){if(!this.isValid)return this;const n=mr.fromDurationLike(e).negate();return H0(this,Fte(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=mr.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?ha.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):s$}toLocaleString(e=mN,n={}){return this.isValid?ha.create(this.loc.clone(n),e).formatDateTime(this):s$}toLocaleParts(e={}){return this.isValid?ha.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=zM(o);const a=e==="extended";let l=l$(this,a,o);return VM.indexOf(o)>=3&&(l+="T"),l+=Vte(this,a,n,r,i,s,o),l}toISODate({format:e="extended",precision:n="day"}={}){return this.isValid?l$(this,e==="extended",zM(n)):null}toISOWeekDate(){return QC(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended",precision:a="milliseconds"}={}){return this.isValid?(a=zM(a),(i&&VM.indexOf(a)>=3?"T":"")+Vte(this,o==="extended",n,e,r,s,a)):null}toRFC2822(){return QC(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return QC(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?l$(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),QC(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():s$}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return mr.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=T7e(n).map(mr.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=IVe(a,l,s,i);return o?c.negate():c}diffNow(e="milliseconds",n={}){return this.diff(pn.now(),e,n)}until(e){return this.isValid?qi.fromDateTimes(this,e):this}hasSame(e,n,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||pn.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),Ute(n,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?Ute(e.base||pn.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(pn.isDateTime))throw new ia("min requires all arguments be DateTimes");return Ite(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(pn.isDateTime))throw new ia("max requires all arguments be DateTimes");return Ite(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Dr.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return Jge(o,e,n)}static fromStringExplain(e,n,r={}){return pn.fromFormatExplain(e,n,r)}static buildFormatParser(e,n={}){const{locale:r=null,numberingSystem:i=null}=n,s=Dr.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new Zge(s,e)}static fromFormatParser(e,n,r={}){if(In(e)||In(n))throw new ia("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Dr.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(n.locale))throw new ia(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${n.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:u}=n.explainFromTokens(e);return u?pn.invalid(u):P_(a,l,r,`format ${n.format}`,e,c)}static get DATE_SHORT(){return mN}static get DATE_MED(){return nge}static get DATE_MED_WITH_WEEKDAY(){return J9e}static get DATE_FULL(){return rge}static get DATE_HUGE(){return ige}static get TIME_SIMPLE(){return sge}static get TIME_WITH_SECONDS(){return oge}static get TIME_WITH_SHORT_OFFSET(){return age}static get TIME_WITH_LONG_OFFSET(){return lge}static get TIME_24_SIMPLE(){return cge}static get TIME_24_WITH_SECONDS(){return uge}static get TIME_24_WITH_SHORT_OFFSET(){return hge}static get TIME_24_WITH_LONG_OFFSET(){return dge}static get DATETIME_SHORT(){return fge}static get DATETIME_SHORT_WITH_SECONDS(){return pge}static get DATETIME_MED(){return mge}static get DATETIME_MED_WITH_SECONDS(){return gge}static get DATETIME_MED_WITH_WEEKDAY(){return Q9e}static get DATETIME_FULL(){return yge}static get DATETIME_FULL_WITH_SECONDS(){return vge}static get DATETIME_HUGE(){return _ge}static get DATETIME_HUGE_WITH_SECONDS(){return xge}}function UE(t){if(pn.isDateTime(t))return t;if(t&&t.valueOf&&Rg(t.valueOf()))return pn.fromJSDate(t);if(t&&typeof t=="object")return pn.fromObject(t);throw new ia(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const qVe="shortOffset";function KVe(t){return"timeZoneIANA"in t}function YVe(t){return t.startsWith("UTC")}function ICt(t,e=!1){return{json:{read:{source:t,reader:(n,r)=>r[t]?XVe(r[t]):null},write:!!e&&{allowNull:!0,writer(n,r){r[t]=n?ZVe(n):null}}}}}function XVe(t,e=Ud){return t?KVe(t)?t.timeZoneIANA:JVe(t,e):e}function ZVe(t){return{timeZoneIANA:t}}function JVe(t,e=Ud){if(!t||!pte.has(t.timeZone))return e;const n=pte.get(t.timeZone);return YVe(t.timeZone)||t.respectsDaylightSaving?n:QVe(n)}function QVe(t){const e=pn.local().setZone(t),n=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return n===0?"Etc/UTC":`Etc/GMT${fa.instance(-n).formatOffset(0,"narrow")}`}function PCt(t,e,n,r,i){if(e&&i==="date")return{timeZone:iA,timeZoneName:void 0};const s=r.hour,o=n===fW;return{timeZone:o?i==="timestamp-offset"?void 0:t??iA:n,timeZoneName:o&&s?qVe:void 0}}function eze(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),n=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return t===Ud||t===fW||e.has(t.toLowerCase())||n.has(t.toLowerCase())}const tze={dateStyle:void 0,year:void 0,month:void 0,day:void 0,weekday:void 0},nze={timeStyle:void 0,hour12:void 0,hourCycle:void 0,hour:void 0,minute:void 0,second:void 0},n0e={timeZone:iA},Kh={year:"numeric",month:"numeric",day:"numeric"},BE={year:"numeric",month:"long",day:"numeric"},WE={year:"numeric",month:"short",day:"numeric"},HE={year:"numeric",month:"long",weekday:"long",day:"numeric"},Wm={hour:"numeric",minute:"numeric"},cy={...Wm,second:"numeric"},r0e={hourCycle:"h23"},qE={...Wm,...r0e},KE={...cy,...r0e},i0e={"short-date":Kh,"short-date-short-time":{...Kh,...Wm},"short-date-short-time-24":{...Kh,...qE},"short-date-long-time":{...Kh,...cy},"short-date-long-time-24":{...Kh,...KE},"short-date-le":Kh,"short-date-le-short-time":{...Kh,...Wm},"short-date-le-short-time-24":{...Kh,...qE},"short-date-le-long-time":{...Kh,...cy},"short-date-le-long-time-24":{...Kh,...KE},"long-month-day-year":BE,"long-month-day-year-short-time":{...BE,...Wm},"long-month-day-year-short-time-24":{...BE,...qE},"long-month-day-year-long-time":{...BE,...cy},"long-month-day-year-long-time-24":{...BE,...KE},"day-short-month-year":WE,"day-short-month-year-short-time":{...WE,...Wm},"day-short-month-year-short-time-24":{...WE,...qE},"day-short-month-year-long-time":{...WE,...cy},"day-short-month-year-long-time-24":{...WE,...KE},"long-date":HE,"long-date-short-time":{...HE,...Wm},"long-date-short-time-24":{...HE,...qE},"long-date-long-time":{...HE,...cy},"long-date-long-time-24":{...HE,...KE},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Wm,"long-time":cy},rze=Dl()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),s0e={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},ize=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2)),sze=ize.find(({type:t})=>t==="month")?.value.toLowerCase();function o0e(){const t=hW();return(t&&s0e[t])??qme()}sze!=="mart"&&(s0e.bs="sr-Latn-CS");let e7=new WeakMap;const lL=i0e["short-date-short-time"];function oze(t){let e=e7.get(t);if(!e){const n=o0e(),r=EW(t.timeZone??Ud),i={...t,timeZone:r};e=new Intl.DateTimeFormat(n,i),e7.set(t,e)}return e}function CCt(t){return i0e[t]}function RCt(t){const{dateStyle:e,timeStyle:n,hour12:r,year:i,month:s}=t,o={};return e?o.dateStyle=e:i&&(o.year=i,o.month=s||void 0),n&&!o.year&&(o.timeStyle=n,o.hour12=r==="auto"?void 0:r==="always"),o}function bW(t,e=lL){return oze(e).format(t)}function MCt(t,e=lL){return bW(new Date(t),{...e,...n0e,...nze})}function NCt(t,e=lL){return bW(new Date(`1970-01-01T${t}Z`),{...e,...n0e,...tze})}function OCt(t,e=lL){if(e.timeZone)return bW(new Date(t),e);const n=pn.fromISO(t,{setZone:!0}),r=n.offset===0?iA:e.timeZone,i={...e,timeZone:r};return n.toLocaleString(i,{locale:o0e()})}function EW(t){switch(t){case Ud:return K9e;case fW:return iA;default:return t}}dW(()=>{e7=new WeakMap});const aze={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let GM=new WeakMap,a0e={};function t7(t){const e=t||a0e;if(!GM.has(e)){const n=hW(),r=n&&aze[n]||qme();GM.set(e,new Intl.NumberFormat(r,t))}return GM.get(e)}function LCt(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function DCt(t){const{minimumFractionDigits:e,maximumFractionDigits:n,useGrouping:r}=t;return{minimumFractionDigits:e,maximumFractionDigits:n,useGrouping:r==="auto"?"auto":r==="always"}}function jCt(t,e){return Object.is(t,-0)&&(t=0),t7(e).format(t)}function $Ct(t,e=du()){if(!t)return null;let n=Wte.get(e);if(!n){const r=t7().formatToParts(12345.6),i=[...t7({useGrouping:!1}).format(9876543210)].reverse(),s=new Map(i.map((h,f)=>[h,f])),o=new RegExp(`[${r.find(h=>h.type==="group")?.value}]`,"g"),a=new RegExp(`[${r.find(h=>h.type==="decimal")?.value}]`),l=new RegExp(`[${i.join("")}]`,"g"),c=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,u=/[-\u2212\u2013\u2014\u2015]/g;n=h=>{if((h=h.trim().replaceAll(o,"").replace(a,".").replace(l,g=>String(s.get(g))).replaceAll(c,"").replaceAll(u,"-"))==="")return null;const f=Number(h);return isNaN(f)?null:f},Wte.set(e,n)}return n(t)}dW(()=>{GM=new WeakMap,a0e={}});const Wte=new Map;async function lze(t,e,n,r){const i=e.exec(n);if(!i)throw new Xe("esri-intl:invalid-bundle",`Bundle id "${n}" is not compatible with the pattern "${e}"`);const s=i[1]?`${i[1]}/`:"",o=i[2],a=Qme(r),l=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:l;let u;try{u=await Hte(t(c))}catch(h){if(c===l)throw new Xe("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:h});try{u=await Hte(t(l))}catch(f){throw new Xe("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:f})}}return u}async function Hte(t){if(qte.fetchBundleAsset!=null)return qte.fetchBundleAsset(t);const e=await ns(t,{responseType:"text"});return JSON.parse(e.data)}let cze=class{constructor({base:e="",pattern:n,location:r=new URL(window.location.href)}){let i;i=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof n=="string"?new RegExp(`^${n}`):n,this.getAssetUrl=i,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,n){return lze(this.getAssetUrl,this.matcher,e,n)}};function uze(t){return new cze(t)}const qte={};B9e(uze({pattern:"esri/",location:Hi}));let Af=class extends Kt{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let n=e==="local"||e==="global"?e:Qme(e??du())??"global";return n=n==="no"?"nb":n,n}};x([E()],Af.prototype,"apiKey",void 0),x([E()],Af.prototype,"id",void 0),x([E()],Af.prototype,"language",void 0),x([E()],Af.prototype,"places",void 0),x([E()],Af.prototype,"serviceUrl",void 0),x([E()],Af.prototype,"worldview",void 0),Af=x([ue("esri.support.BasemapStyle")],Af);const hze=Af,l0e=Symbol("BasemapInstance");function zCt(t){return t!=null&&typeof t=="object"&&l0e in t}function mn(t,e,n={}){return SW(t,e,n,c0e)}function Ec(t,e,n={}){return SW(t,e,n,u0e)}function SW(t,e,n={},r){let i=null;const s=n.once?(o,a)=>{r(o)&&(ii(i),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(i=gFe(t,s,n.sync,n.equals),n.initial){const o=t();s(o,o)}return i}function J1(t,e,n,r={}){let i=null,s=null,o=null;function a(){i&&s&&(s.remove(),r.onListenerRemove?.(i),i=null,s=null)}function l(u){r.once&&r.once&&ii(o),n(u)}const c=mn(t,(u,h)=>{a(),UO(u)&&(i=u,s=xb(u,e,l),r.onListenerAdd?.(u))},{sync:r.sync,initial:!0});return o=Zn(()=>{c.remove(),a()}),o}function TW(t,e){return dze(t,u0e,e)}function dze(t,e,n){if(ya(n))return Promise.reject(Cr());const r=t();if(e?.(r))return Promise.resolve(r);let i=null;function s(){i=ii(i)}return new Promise((o,a)=>{i=xv([yu(n,()=>{s(),a(Cr())}),SW(t,l=>{s(),o(l)},{sync:!1,once:!0},e??c0e)])})}function c0e(t){return!0}function u0e(t){return!!t}function GCt(t,e,n={}){let r=!1;const i=mn(t,(s,o)=>{r||e(s,o)},n);return{remove(){i.remove()},pause(){r=!0},resume(){r=!1}}}const Jg={sync:!0},_a={initial:!0},sa={sync:!0,initial:!0};let h0e=0;const kW=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+h0e++})}};return n=x([ue("esri.core.Identifiable")],n),n},AW=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:h0e++})}};return n=x([ue("esri.core.Identifiable.NumericIdentifiable")],n),n};kW(class{});async function fze(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:n}=await ve(async()=>{const{fromItem:r}=await import("./portalLayers-B3VdJNdo.js");return{fromItem:r}},__vite__mapDeps([37,38,39,40,41,35]));try{return await n(e)}catch(r){const i=e?.portalItem,s=i?.id||"unset",o=i?.portal?.url||nr.portalUrl;throw kt.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",r),r}}const Kte={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function c$(t,e,n,r=Ud){const i=new Eh(EW(r)),s=pn.fromJSDate(t,{zone:i}),o=n==="decades"||n==="centuries"?"year":d0e(n);return n==="decades"&&(e*=10),n==="centuries"&&(e*=100),s.plus({[o]:e}).toJSDate()}function UCt(t,e,n="milliseconds"){const r=t.getTime(),i=pze(e,n,"milliseconds");return new Date(r+i)}function Yte(t,e,n=Ud){const r=new Eh(EW(n)),i=pn.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const o=i.startOf("year"),{year:a}=o,l=a-a%(e==="decades"?10:100);return o.set({year:l}).toJSDate()}const s=d0e(e);return i.startOf(s).toJSDate()}function pze(t,e,n){return t===0?0:t*Kte[e]/Kte[n]}function BCt(t,e){return t&&e?t.intersection(e):t||e}function d0e(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var Vc,Dw;let Ra=(Dw=class extends qt{static get allTime(){return Xte}static get empty(){return mze}static fromArray(e){return new Vc({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,n){return n.end!=null?new Date(n.end):null}writeEnd(e,n){n.end=e?.getTime()??null}get isAllTime(){return this.equals(Vc.allTime)}get isEmpty(){return this.equals(Vc.empty)}readStart(e,n){return n.start!=null?new Date(n.start):null}writeStart(e,n){n.start=e?.getTime()??null}clone(){return new Vc({end:this.end,start:this.start})}equals(e){if(!e)return!1;const n=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,i=e.start?.getTime()??e.start,s=e.end?.getTime()??e.end;return n===i&&r===s}expandTo(e,n=Ud){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=Yte(r,e,n));let i=this.end;if(i){const s=Yte(i,e,n);i=i.getTime()===s.getTime()?s:c$(s,1,e,n)}return new Vc({start:r,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Vc.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const n=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,i=e.start?.getTime()??-1/0,s=e.end?.getTime()??1/0;let o,a;return i>=n&&i<=r?o=i:n>=i&&n<=s&&(o=n),r>=i&&r<=s?a=r:s>=n&&s<=r&&(a=s),o==null||a==null||isNaN(o)||isNaN(a)?Vc.empty:new Vc({start:o===-1/0?null:new Date(o),end:a===1/0?null:new Date(a)})}offset(e,n,r=Ud){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Vc,{start:s,end:o}=this;return s!=null&&(i.start=c$(s,e,n,r)),o!=null&&(i.end=c$(o,e,n,r)),i}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return Xte.clone();const n=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Vc({start:n,end:r})}},Vc=Dw,Dw);x([E({type:Date,json:{write:{allowNull:!0}}})],Ra.prototype,"end",void 0),x([cr("end")],Ra.prototype,"readEnd",null),x([er("end")],Ra.prototype,"writeEnd",null),x([E({readOnly:!0,json:{read:!1}})],Ra.prototype,"isAllTime",null),x([E({readOnly:!0,json:{read:!1}})],Ra.prototype,"isEmpty",null),x([E({type:Date,json:{write:{allowNull:!0}}})],Ra.prototype,"start",void 0),x([cr("start")],Ra.prototype,"readStart",null),x([er("start")],Ra.prototype,"writeStart",null),Ra=Vc=x([ue("esri.time.TimeExtent")],Ra);const Xte=new Ra,mze=new Ra({start:void 0,end:void 0});let gze=0,wi=class extends XO(kW(NI)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Vn(-180,-90,180,90,Wt.WGS84),this.id=Date.now().toString(16)+"-layer-"+gze++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Wt.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const n=typeof e=="string"?{url:e}:e;return(await ve(async()=>{const{fromUrl:r}=await import("./arcgisLayers-B8zQZ_Fs.js");return{fromUrl:r}},__vite__mapDeps([42,38,39,41]))).fromUrl(n)}static fromPortalItem(e){return fze(e)}initialize(){this.when().catch(e=>{Ea(e)||kt.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const{parent:e}=this;e&&(this.parent=null,e.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){const{parent:e}=this;e&&(e.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return Ha(this.url)}createLayerView(e,n){return Promise.reject(new Xe("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await ns(e,{query:{f:"json"},responseType:"json"})).data;throw new Xe("layer:no-attribution-data","Layer does not have attribution data")}};x([E({type:String})],wi.prototype,"attributionDataUrl",void 0),x([E({readOnly:!0})],wi.prototype,"effectiveVisible",null),x([E({type:Vn})],wi.prototype,"fullExtent",void 0),x([E({readOnly:!0})],wi.prototype,"hasAttributionData",null),x([E({type:String,clonable:!1})],wi.prototype,"id",void 0),x([E({type:Boolean,nonNullable:!0})],wi.prototype,"legendEnabled",void 0),x([E({type:["show","hide","hide-children"]})],wi.prototype,"listMode",void 0),x([E({type:Number,range:{min:0,max:1},nonNullable:!0})],wi.prototype,"opacity",void 0),x([E({clonable:!1})],wi.prototype,"parent",void 0),x([E({readOnly:!0})],wi.prototype,"parsedUrl",null),x([E({type:Boolean,readOnly:!0})],wi.prototype,"persistenceEnabled",void 0),x([E({type:Boolean})],wi.prototype,"popupEnabled",void 0),x([E({type:Boolean})],wi.prototype,"attributionVisible",void 0),x([E({type:Wt})],wi.prototype,"spatialReference",void 0),x([E({type:String})],wi.prototype,"title",void 0),x([E({readOnly:!0,json:{read:!1}})],wi.prototype,"type",void 0),x([E()],wi.prototype,"url",void 0),x([E({type:Ra})],wi.prototype,"visibilityTimeExtent",void 0),x([E({type:Boolean,nonNullable:!0})],wi.prototype,"visible",void 0),wi=x([ue("esri.layers.Layer")],wi);const eR=new WeakMap;function f0e(t){return!t.destroyed&&(eR.has(t)||t.addHandles([mn(()=>{const{parent:e}=t;return!!(e&&e instanceof wi)&&(e.type==="catalog-dynamic-group"||f0e(e))},e=>eR.set(t,e),sa),Zn(()=>eR.delete(t))]),eR.get(t))}function yze(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function HCt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function vze(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function _ze(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function qCt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function Zte(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function tx(t){return t?.type==="subtype-sublayer"}const KCt={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function YCt(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function XCt(t){return t.type==="integrated-mesh"||t.type==="integrated-mesh-3dtiles"}function cL(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function ZCt(t){const e=t?.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&t?.source?.type==="feature-layer"}function xze(t){return t?.type==="feature"&&t.source?.type==="feature-layer"}function JCt(t){return yze(t)&&xze(t)}async function QCt(t,e){const n=Zr?.findServerInfo(t);if(n?.currentVersion!=null)return n.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const i=`${t.slice(0,r)}/rest/info`,s=e!=null?e.signal:null,{data:o}=await ns(i,{query:{f:"json"},responseType:"json",signal:s});return o?.owningSystemUrl||null}function wze(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function bze(t){return wze(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function Eze(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"knowledge-graph-sublayer":return!0;default:return!1}}function Sze(t){return!!Eze(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function Tze(t,e){return null}function eRt(t){return null}function kze(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function tRt(t,e){!e||!kze(t)||Tze(t.url)}const Aze=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),Ize=new Set(["integrated-mesh-3dtiles"]),p0e=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","parquet","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),Pze=new Set([...p0e,"link-chart"]);function Cze(t){switch(t.layerContainerType){case"basemap-base-layers":return Aze;case"basemap-ground-layers":return Ize;case"operational-layers":return t.origin==="link-chart"?Pze:p0e;default:return null}}function Rze(t,e){if(e.restrictedWebMapWriting){const n=Cze(e);return n==null||n.has(t.type)&&!cL(t)}return!0}function Mze(t,e){if(e)if(cL(t)){const n=VO("featureCollection.layers",e),r=n?.[0]?.layerDefinition;r&&Jte(t,r)}else t.type!=="group"&&Jte(t,e)}function Jte(t,e){"maxScale"in t&&(e.maxScale=dN(t.maxScale)??void 0),"minScale"in t&&(e.minScale=dN(t.minScale)??void 0)}function Nze(t,e){if(Mze(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=dN(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(cL(t)){const n=e.featureCollection;n&&(n.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function u$(t,e,n){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return n?.messages&&n.messages.push(new Xe("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(cL(t)&&!t.isTable)e=t.resourceInfo;else if(Rze(t,n)){const r={};return t.write(r,n)?r:null}return e!=null&&Nze(t,e=Ze(e)),e}var Qte,nx,x1;let tl=(x1=class extends m0(NI){constructor(e){super(e),this[Qte]=!0,this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.type="Basemap",this.id=Date.now().toString(16)+"-basemap-"+nx.idCounter++,this.baseLayers=new Ot,this.referenceLayers=new Ot,this.groundLayers=new Ot;const n=a=>{const{parent:l}=a;l&&l!==this&&"remove"in l&&l.remove?.(a),a.parent=this,a.type!=="elevation"&&a.type!=="integrated-mesh-3dtiles"||kt.getLogger(this).error(`Layer '${a.title}, id:${a.id}' of type '${a.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=a=>{const{parent:l}=a;l&&l!==this&&"remove"in l&&l.remove?.(a),a.parent=this},i=a=>{const l=a.item;return l.parent===this?(kt.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' already a ground layer, second add will be ignored.`),void a.preventDefault()):l.type!=="integrated-mesh-3dtiles"&&l.type!=="integrated-mesh"?(kt.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' is not supported as a ground layer and will therefore be ignored.`),void a.preventDefault()):void 0},s=a=>{a.parent=null},o=a=>{a.parent===this&&(a.parent=null)};this.addHandles([this.baseLayers.on("after-add",a=>n(a.item)),this.baseLayers.on("after-remove",a=>s(a.item)),this.referenceLayers.on("after-add",a=>n(a.item)),this.referenceLayers.on("after-remove",a=>s(a.item)),this.groundLayers.on("before-add",i),this.groundLayers.on("after-add",a=>r(a.item)),this.groundLayers.on("after-remove",a=>o(a.item))])}initialize(){this.when().catch(e=>{kt.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const i of e)i.destroyed||i.destroy();const n=this.groundLayers.toArray();for(const i of n)i.destroyed||i.destroy();const r=this.referenceLayers.toArray();for(const i of r)i.destroyed||i.destroy();this.baseLayers.destroy(),this.groundLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Di(this.portalItem)}removeChildLayer(e){for(const n of[this.baseLayers,this.referenceLayers,this.groundLayers])n.remove(e)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Id(e,this._get("baseLayers")))}_writeBaseLayers(e,n,r){const i=[];e&&(r={...r,layerContainerType:"basemap-base-layers"},this.baseLayers.forEach(s=>{const o=u$(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&i.push(o)}),this.referenceLayers.forEach(s=>{const o=u$(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&(s.type!=="scene"&&(o.isReference=!0),i.push(o))})),n.baseMapLayers=i}set groundLayers(e){this._set("groundLayers",Id(e,this._get("groundLayers")))}_writeGroundLayers(e,n,r){const i=[];e&&(r={...r,layerContainerType:"basemap-ground-layers"},this.groundLayers.forEach(s=>{const o=u$(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&i.push(o)}),i.length>0&&(n.groundLayers=i))}get loaded(){return super.loaded}set referenceLayers(e){this._set("referenceLayers",Id(e,this._get("referenceLayers")))}writeTitle(e,n){n.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return _me(this,e=>{e(this.baseLayers,this.groundLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(n=>TT(n)?n.clone():n),groundLayers:this.groundLayers.map(n=>TT(n)?n.clone():n),referenceLayers:this.referenceLayers.map(n=>TT(n)?n.clone():n)};return this.loaded&&(e.loadStatus="loaded"),new nx({resourceInfo:this.resourceInfo}).set(e)}read(e,n){this.resourceInfo||this._set("resourceInfo",{data:e,context:n}),super.read(e,n)}write(e,n){return e=e||{},n?.origin||(n={origin:"web-map",...n}),super.write(e,n),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const i=Ze(r);return i.url&&Vd(i.url)&&(i.url=`https:${i.url}`),i.templateUrl&&Vd(i.templateUrl)&&(i.templateUrl=`https:${i.templateUrl}`),i})),e}async _loadFromSource(e){const{resourceInfo:n,portalItem:r,style:i}=this;gi(e);const s=[];if(n){const o=n.context?n.context.url:null;if(s.push(this._loadLayersFromJSON(n.data,o,e)),n.data.id&&!n.data.title){const a=n.data.id;s.push(q9e(a).then(l=>{l&&this.read({title:l},n.context)}))}}else r?s.push(this._loadFromItem(r,e)):i&&s.push(this._loadFromStylesService(i,e));await Promise.all(s)}async _loadLayersFromJSON(e,n,r){const i=this.resourceInfo?.context,s=this.portalItem?.portal||i?.portal||null,o=Lze[i?.origin||""]??"web-map",{populateOperationalLayers:a}=await ve(async()=>{const{populateOperationalLayers:c}=await import("./layersCreator-BqovF9Ym.js");return{populateOperationalLayers:c}},__vite__mapDeps([43,40,39,38,41,37,35,44])),l=[];if(gi(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const c={context:{...i,origin:o,url:n,portal:s,layerContainerType:"basemap-base-layers"},defaultLayerType:"DefaultTileLayer"},u=g=>o==="web-scene"&&g.layerType==="ArcGISSceneServiceLayer"||g.isReference,h=a(this.baseLayers,e.baseMapLayers.filter(g=>!u(g)),c);l.push(h);const f=a(this.referenceLayers,e.baseMapLayers.filter(u),c);l.push(f)}if(e.groundLayers&&Array.isArray(e.groundLayers)){const c={context:{...i,origin:o,url:n,portal:s,layerContainerType:"basemap-ground-layers"},defaultLayerType:"IntegratedMesh3DTilesLayer"},u=a(this.groundLayers,e.groundLayers,c);l.push(u)}await Promise.allSettled(l)}async _loadFromItem(e,n){const r=await e.load(n),i=await r.fetchData("json",n),s=Ha(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:Oze[e.type||""]??"web-map",portal:e.portal||st.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||st.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,n)}async _loadFromStylesService(e,n){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,i=`${r}/styles/${e.id}/self`,s=`${r}/webmaps/${e.id}`,o=e.apiKey??nr.apiKeys.basemapStyles,[a,l]=await Promise.all([(await ns(i,{query:{token:o},signal:n?.signal})).data,(await ns(s,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:o},signal:n?.signal})).data]);this.thumbnailUrl??=a.thumbnailUrl;const c=Ha(s);if(this._set("resourceInfo",{data:l.baseMap??{},context:{origin:"web-map",url:c}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:l.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,c,n),o)for(const u of[...this.baseLayers,...this.groundLayers,...this.referenceLayers])"apiKey"in u&&(u.apiKey=o)}static fromId(e){const n=G9[e];return n?n.itemId?new nx({portalItem:{id:n.itemId,portal:{url:"https://www.arcgis.com"}}}):nx.fromJSON(n,n.is3d?{origin:"web-scene",portal:new st({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}},Qte=l0e,nx=x1,x1.idCounter=0,x1);x([E({json:{read:!1,write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,n,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Ot}},writer(t,e,n,r){this._writeBaseLayers(t,e,r)}}}}}})],tl.prototype,"baseLayers",null),x([E({json:{read:!1,write:{ignoreOrigin:!0,target:"groundLayers",writer(t,e,n,r){this._writeGroundLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{groundLayers:{type:Ot}},writer(t,e,n,r){this._writeGroundLayers(t,e,r)}}}}}})],tl.prototype,"groundLayers",null),x([E({type:String,json:{origins:{"web-scene":{write:!0}}}})],tl.prototype,"id",void 0),x([E({type:bn})],tl.prototype,"portalItem",void 0),x([E()],tl.prototype,"referenceLayers",null),x([E({readOnly:!0})],tl.prototype,"resourceInfo",void 0),x([E({type:Wt})],tl.prototype,"spatialReference",void 0),x([E({type:hze})],tl.prototype,"style",void 0),x([E()],tl.prototype,"thumbnailUrl",void 0),x([E({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],tl.prototype,"title",void 0),x([er("title")],tl.prototype,"writeTitle",null),tl=nx=x([ue("esri.Basemap")],tl);const Oze={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},Lze={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},CT=tl,Dze=Object.freeze(Object.defineProperty({__proto__:null,default:CT},Symbol.toStringTag,{value:"Module"})),_N={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function jze(t){return!!_N[t]||!!_N[t.toLowerCase()]}function m0e(t){return _N[t]??_N[t.toLowerCase()]}function nRt(t){return[...m0e(t)]}function h$(t,e,n){n<0&&++n,n>1&&--n;const r=6*n;return r<1?t+(e-t)*r:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function $ze(t,e,n,r=1){const i=(t%360+360)%360/360,s=n<=.5?n*(e+1):n+e-n*e,o=2*n-s;return[Math.round(255*h$(o,s,i+1/3)),Math.round(255*h$(o,s,i)),Math.round(255*h$(o,s,i-1/3)),r]}function rRt(t){const e=t.length>5,n=e?8:4,r=(1<<n)-1,i=e?1:17,s=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&r,o>>=n,a[3]=i*l/255),l=o&r,o>>=n,a[2]=i*l,l=o&r,o>>=n,a[1]=i*l,l=o&r,o>>=n,a[0]=i*l,a}function g0e(t){if(!t.startsWith("#")||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),n=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),i=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,n+16*n,r+16*r,(i+16*i)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function y0e(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const n=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&n.length===3||r==="rgba"&&n.length===4){if(n[0].endsWith("%")){const i=n.map(s=>2.56*parseFloat(s));return n.length===4&&(i[3]=parseFloat(n[3])),ene(i)}return ene(n.map(i=>parseFloat(i)))}if(r==="hsl"&&n.length===3||r==="hsla"&&n.length===4)return $ze(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3]??"1"))}return null}function ene(t){return t[0]=pw(t[0]),t[1]=pw(t[1]),t[2]=pw(t[2]),t[3]=t.length===4?_0e(t[3]):1,t}function v0e(t){let e=jze(t)?m0e(t):null;return e??=y0e(t),e??=g0e(t),e}function iRt(t){const e=v0e(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function _0e(t){return x0e(t,0,1)}function pw(t){return Math.round(x0e(t,0,255))}function x0e(t,e,n){return t=Number(t),isNaN(t)?n:t<e?e:t>n?n:t}const w0e=2.2,Fze=1/w0e;function sRt(t){return t**w0e}function oRt(t){return t**Fze}const tne=new Float32Array(1);function aRt(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function vu(t,e,n){return Math.min(Math.max(t,e),n)}function lRt(t){return!(t&t-1)}function cRt(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function IS(t,e,n){return t+(e-t)*n}function uRt(t,e,n,r,i){return IS(r,i,(t-e)/(n-e))}function FI(t){return t*Math.PI/180}function b0e(t){return 180*t/Math.PI}function hRt(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function dRt(t){return Math.acos(vu(t,-1,1))}function Vze(t){return Math.asin(vu(t,-1,1))}function Mg(t,e,n=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=n}function fRt(t,e,n=1e-6){return!Mg(t,e,n)&&t>e}function pRt(t,e,n=1e-6){return!Mg(t,e,n)&&t<e}function mRt(t,e,n=1e-6){return Mg(t,e,n)||t>e}const xN=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function n7(t){return xN.setFloat64(0,t),xN.getBigInt64(0)}function zze(t){return xN.setBigInt64(0,t),xN.getFloat64(0)}const UM=1000000n,Gze=E0e(1);function E0e(t){const e=n7(t=Math.abs(t)),n=zze(e<=UM?UM:e-UM);return Math.abs(t-n)}function gRt(t,e,n=Gze){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(n!=null&&E0e(Math.min(Math.abs(t),Math.abs(e)))<n)return Math.abs(t-e)<=n;const r=n7(t),i=n7(e);return r<0!=i<0?!1:!((r<i?i-r:r-i)>UM)}function S0e(t,e,n=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),i=Math.abs(t),s=Math.abs(e);if(t===0||e===0||i<1e-12&&s<1e-12){if(r>.01*n)return!1}else if(r/(i+s)>n)return!1;return!0}function yRt(t){return T0e(Math.max(-nne,Math.min(t,nne)))}function T0e(t){return tne[0]=t,tne[0]}function vRt(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(Mg(e,1)&&Mg(n,1)&&Mg(r,1))}function _Rt(t,e){return(t%e+e)%e}const nne=T0e(34028234663852886e22);function xRt(t,e,n){if(n===void 0||+n==0)return Math[t](e);if(e=+e,n=+n,isNaN(e)||typeof n!="number"||n%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-n:-n)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+n:n))}function tR(t){return vu(qB(t),0,255)}function nR(t,e){const n=t.toString(16).padStart(2,"0");return e?n.slice(0,1):n}let Jn=class zc{static blendColors(e,n,r,i=new zc){return i.r=Math.round(e.r+(n.r-e.r)*r),i.g=Math.round(e.g+(n.g-e.g)*r),i.b=Math.round(e.b+(n.b-e.b)*r),i.a=e.a+(n.a-e.a)*r,i._sanitize()}static fromRgb(e,n){const r=y0e(e);return r?zc.fromArray(r,n):null}static fromHex(e,n=new zc){const r=g0e(e);return r?zc.fromArray(r,n):null}static fromArray(e,n=new zc){return n._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(n.a)&&(n.a=1),n._sanitize()}static fromString(e,n){const r=v0e(e);return r?zc.fromArray(r,n):null}static fromJSON(e){return e!=null?new zc([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e,n){return e==null?null:(n??=[0,0,0,0],n[0]=e.r/255,n[1]=e.g/255,n[2]=e.b/255,n[3]=e.a!=null?e.a:1,n)}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?zc.fromString(e,this):Array.isArray(e)?zc.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof zc||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const n=e?.capitalize??!1,r=e?.digits??6,i=r===3||r===4,s=r===4||r===8,o=`#${nR(this.r,i)}${nR(this.g,i)}${nR(this.b,i)}${s?nR(Math.round(255*this.a),i):""}`;return n?o.toUpperCase():o}toCss(e=!1){const n=this.r+", "+this.g+", "+this.b;return e?`rgba(${n}, ${this.a})`:`rgb(${n})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const n=tR(this.r),r=tR(this.g),i=tR(this.b);return e===0||this.a!==1?[n,r,i,tR(255*this.a)]:[n,r,i]}clone(){return new zc(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=pw(this.r),this.g=pw(this.g),this.b=pw(this.b),this.a=_0e(this.a),this}_set(e,n,r,i){this.r=e,this.g=n,this.b=r,this.a=i}};Jn.prototype.declaredClass="esri.Color";let th=class extends Ot{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(sFe(()=>this._refresh(),Jg))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections?.();if(e==null)return void this.removeAll();let n=0;for(const r of e)r!=null&&(n=this._processCollection(n,r));this.splice(n)}_createNewInstance(e){return new Ot(e)}_processCollection(e,n){if(!n)return e;const r=this.itemFilterFunction??(i=>!!i);for(const i of n)if(i){if(r(i)){const s=this.indexOf(i,e);s>=0?s!==e&&this.reorder(i,e):this.add(i,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(i);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};x([E()],th.prototype,"getCollections",void 0),x([E()],th.prototype,"getChildrenFunction",void 0),x([E()],th.prototype,"itemFilterFunction",void 0),th=x([ue("esri.core.CollectionFlattener")],th);function yn(t,e={}){const n=t instanceof Xs?t:new Xs(t,e),{alwaysWriteDefaults:r,default:i,ignoreUnknown:s=!0,name:o,nonNullable:a,readOnly:l=!1}=e;return E({type:s?n.apiValues:String,json:{type:n.jsonValues,default:i,name:o,read:!l&&{reader:n.read},write:{writer:n.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:l})}var r7;let BM=r7=class extends qt{constructor(t){super(t),this.type="none"}clone(){return new r7({type:this.type})}};x([yn({none:"none",stayAbove:"stay-above"}),E({json:{write:{isRequired:!0}}})],BM.prototype,"type",void 0),BM=r7=x([ue("esri.ground.NavigationConstraint")],BM);const k0e=Symbol("GroundInstance");function bRt(t){return t!=null&&typeof t=="object"&&k0e in t}function A0e(t){const e=qB(100*(1-t));return Math.max(0,Math.min(e,100))}function I0e(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var rne,i7,rle;let Gc=i7=(rle=class extends m0(NI){constructor(t){super(t),this[rne]=!0,this.parent=null,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Ot;const e=r=>{const{parent:i}=r;i&&i!==this&&"remove"in i&&i.remove?.(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&kt.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},n=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>n(r.item))]),this.allLayers=new th({getCollections:()=>[this.layers,this.parent?.basemap?.groundLayers]})}removeChildLayer(t){this.layers.remove(t)}initialize(){this.when().catch(t=>{Ea(t)||kt.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}get integratedMeshGround(){const t=this.parent?.basemap?.groundLayers.at(0);return t?.replacesTerrain?t:null}destroy(){const t=this.layers.removeAll();for(const e of t)Di(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get loaded(){return super.loaded}get layers(){return this._get("layers")}set layers(t){this._set("layers",Id(t,this._get("layers")))}writeLayers(t,e,n,r){const i=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(s=>{if("write"in s){const o={};N6e(s)().write(o,r)&&i.push(o)}else r?.messages&&r.messages.push(new Xe("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=i}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return _me(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e?.signal});const{queryAll:n}=await ve(()=>import("./ElevationQuery-BFm-VyF_.js"),__vite__mapDeps([45,46]));return gi(e),n(this.layers.filter(ine).toArray(),t,e)}async createElevationSampler(t,e){await this.load({signal:e?.signal});const{createSampler:n}=await ve(()=>import("./ElevationQuery-BFm-VyF_.js"),__vite__mapDeps([45,46]));return gi(e),n(this.layers.filter(ine).toArray(),t,e)}clone(){const t={opacity:this.opacity,surfaceColor:Ze(this.surfaceColor),navigationConstraint:Ze(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new i7({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,n){const r=e?.origin||"web-scene",i=e?.portal||null,s=e?.url||null,{populateOperationalLayers:o}=await ve(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-BqovF9Ym.js");return{populateOperationalLayers:l}},__vite__mapDeps([43,40,39,38,41,37,35,44]));gi(n);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:s,portal:i,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}await Promise.allSettled(a)}},rne=k0e,rle);function ine(t){return t&&"createElevationSampler"in t}x([E()],Gc.prototype,"parent",void 0),x([E()],Gc.prototype,"integratedMeshGround",null),x([E({json:{read:!1,write:{isRequired:!0}}})],Gc.prototype,"layers",null),x([E()],Gc.prototype,"allLayers",void 0),x([er("layers")],Gc.prototype,"writeLayers",null),x([E({readOnly:!0})],Gc.prototype,"resourceInfo",void 0),x([E({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:jr,read:{reader:I0e,source:"transparency"},write:{writer:(t,e)=>{e.transparency=A0e(t)},target:"transparency"}}})],Gc.prototype,"opacity",void 0),x([E({type:Jn,json:{type:[jr],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Gc.prototype,"surfaceColor",void 0),x([E({type:BM,json:{write:!0}})],Gc.prototype,"navigationConstraint",void 0),Gc=i7=x([ue("esri.Ground")],Gc);const wN=Gc,Uze=Symbol("ClonableMixin"),_o=t=>{var i;var e;const n=t;let r=(i=class extends n{constructor(){super(...arguments),this[e]=!0}clone(s){const o=qg(this);dpe(o,"unable to clone instance of non-accessor class");const a=o.metadata,l=o.store,c={},u=new Map;for(const f in a){const g=a[f],y=l?.originOf(f),_=g.clonable;if(g.readOnly||_===!1||y!==7&&y!==0&&y!==5&&y!==4)continue;const b=this[f];let T=null;if(typeof _=="function")T=_(b,s);else if(_==="reference")T=b;else if(T=u9(b,s),b!=null&&T==null)continue;y===0?u.set(f,T):c[f]=T}const h=new(Object.getPrototypeOf(this)).constructor(c);if(u.size){const f=qg(h)?.store;if(f)for(const[g,y]of u)f.set(g,y,0)}return h}},e=Uze,i);return r=x([ue("esri.core.Clonable")],r),r},IW=_o(Kt),Bze="randomUUID"in crypto;function VI(){if(Bze)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=n=>t[n].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function ERt(){return`{${VI().toUpperCase()}}`}function SRt(){return`{${VI()}}`}function TRt(t){const e=t.toUpperCase();return t.startsWith("{")?e:`{${e}}`}const C_={Base64:0,Hex:1,String:2,Raw:3},mw=8,P0e=(1<<mw)-1;function hg(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function Wze(t){const e=[];for(let n=0,r=t.length*mw;n<r;n+=mw)e[n>>5]|=(t.charCodeAt(n/mw)&P0e)<<n%32;return e}function Hze(t){const e=[];for(let n=0,r=32*t.length;n<r;n+=mw)e.push(String.fromCharCode(t[n>>5]>>>n%32&P0e));return e.join("")}function qze(t){const e="0123456789abcdef",n=[];for(let r=0,i=4*t.length;r<i;r++)n.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return n.join("")}function Kze(t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let i=0,s=4*t.length;i<s;i+=3){const o=(t[i>>2]>>i%4*8&255)<<16|(t[i+1>>2]>>(i+1)%4*8&255)<<8|t[i+2>>2]>>(i+2)%4*8&255;for(let a=0;a<4;a++)8*i+6*a>32*t.length?r.push("="):r.push(n.charAt(o>>6*(3-a)&63))}return r.join("")}function Yze(t,e){return t<<e|t>>>32-e}function uL(t,e,n,r,i,s){return hg(Yze(hg(hg(e,t),hg(r,s)),i),n)}function Ho(t,e,n,r,i,s,o){return uL(e&n|~e&r,t,e,i,s,o)}function qo(t,e,n,r,i,s,o){return uL(e&r|n&~r,t,e,i,s,o)}function Ko(t,e,n,r,i,s,o){return uL(e^n^r,t,e,i,s,o)}function Yo(t,e,n,r,i,s,o){return uL(n^(e|~r),t,e,i,s,o)}function Xze(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let n=1732584193,r=-271733879,i=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const a=n,l=r,c=i,u=s;n=Ho(n,r,i,s,t[o],7,-680876936),s=Ho(s,n,r,i,t[o+1],12,-389564586),i=Ho(i,s,n,r,t[o+2],17,606105819),r=Ho(r,i,s,n,t[o+3],22,-1044525330),n=Ho(n,r,i,s,t[o+4],7,-176418897),s=Ho(s,n,r,i,t[o+5],12,1200080426),i=Ho(i,s,n,r,t[o+6],17,-1473231341),r=Ho(r,i,s,n,t[o+7],22,-45705983),n=Ho(n,r,i,s,t[o+8],7,1770035416),s=Ho(s,n,r,i,t[o+9],12,-1958414417),i=Ho(i,s,n,r,t[o+10],17,-42063),r=Ho(r,i,s,n,t[o+11],22,-1990404162),n=Ho(n,r,i,s,t[o+12],7,1804603682),s=Ho(s,n,r,i,t[o+13],12,-40341101),i=Ho(i,s,n,r,t[o+14],17,-1502002290),r=Ho(r,i,s,n,t[o+15],22,1236535329),n=qo(n,r,i,s,t[o+1],5,-165796510),s=qo(s,n,r,i,t[o+6],9,-1069501632),i=qo(i,s,n,r,t[o+11],14,643717713),r=qo(r,i,s,n,t[o],20,-373897302),n=qo(n,r,i,s,t[o+5],5,-701558691),s=qo(s,n,r,i,t[o+10],9,38016083),i=qo(i,s,n,r,t[o+15],14,-660478335),r=qo(r,i,s,n,t[o+4],20,-405537848),n=qo(n,r,i,s,t[o+9],5,568446438),s=qo(s,n,r,i,t[o+14],9,-1019803690),i=qo(i,s,n,r,t[o+3],14,-187363961),r=qo(r,i,s,n,t[o+8],20,1163531501),n=qo(n,r,i,s,t[o+13],5,-1444681467),s=qo(s,n,r,i,t[o+2],9,-51403784),i=qo(i,s,n,r,t[o+7],14,1735328473),r=qo(r,i,s,n,t[o+12],20,-1926607734),n=Ko(n,r,i,s,t[o+5],4,-378558),s=Ko(s,n,r,i,t[o+8],11,-2022574463),i=Ko(i,s,n,r,t[o+11],16,1839030562),r=Ko(r,i,s,n,t[o+14],23,-35309556),n=Ko(n,r,i,s,t[o+1],4,-1530992060),s=Ko(s,n,r,i,t[o+4],11,1272893353),i=Ko(i,s,n,r,t[o+7],16,-155497632),r=Ko(r,i,s,n,t[o+10],23,-1094730640),n=Ko(n,r,i,s,t[o+13],4,681279174),s=Ko(s,n,r,i,t[o],11,-358537222),i=Ko(i,s,n,r,t[o+3],16,-722521979),r=Ko(r,i,s,n,t[o+6],23,76029189),n=Ko(n,r,i,s,t[o+9],4,-640364487),s=Ko(s,n,r,i,t[o+12],11,-421815835),i=Ko(i,s,n,r,t[o+15],16,530742520),r=Ko(r,i,s,n,t[o+2],23,-995338651),n=Yo(n,r,i,s,t[o],6,-198630844),s=Yo(s,n,r,i,t[o+7],10,1126891415),i=Yo(i,s,n,r,t[o+14],15,-1416354905),r=Yo(r,i,s,n,t[o+5],21,-57434055),n=Yo(n,r,i,s,t[o+12],6,1700485571),s=Yo(s,n,r,i,t[o+3],10,-1894986606),i=Yo(i,s,n,r,t[o+10],15,-1051523),r=Yo(r,i,s,n,t[o+1],21,-2054922799),n=Yo(n,r,i,s,t[o+8],6,1873313359),s=Yo(s,n,r,i,t[o+15],10,-30611744),i=Yo(i,s,n,r,t[o+6],15,-1560198380),r=Yo(r,i,s,n,t[o+13],21,1309151649),n=Yo(n,r,i,s,t[o+4],6,-145523070),s=Yo(s,n,r,i,t[o+11],10,-1120210379),i=Yo(i,s,n,r,t[o+2],15,718787259),r=Yo(r,i,s,n,t[o+9],21,-343485551),n=hg(n,a),r=hg(r,l),i=hg(i,c),s=hg(s,u)}return[n,r,i,s]}function Zze(t,e=C_.Hex){const n=e||C_.Base64,r=Xze(Wze(t),t.length*mw);switch(n){case C_.Raw:return r;case C_.Hex:return qze(r);case C_.String:return Hze(r);case C_.Base64:return Kze(r)}}function Jze(t){return t&&"getAtOrigin"in t&&"originOf"in t}function s7(t){return PW[Qze(t)]||tGe}function Qze(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:eGe(t.url)}function eGe(t){const e=spe(t);return o7[e]||C0e}const PW={},C0e="text/plain",tGe=PW[C0e],o7={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in o7)PW[o7[t]]=t;function nGe(t){const e=t?.origins??[void 0];return(n,r)=>{const i=rGe(t,n,r);for(const s of e){const o=YB(n,s,r);for(const a in i)o[a]=i[a]}}}function rGe(t,e,n){if(t?.type==="resource")return iGe(t,e,n);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:i}=zje;return{read:r,write:i}}}}function iGe(t,e,n){const r=CI(e,n);return{type:String,read:(i,s,o)=>{const a=BO(i,s,o);return r.type===String?a:typeof r.type=="function"?new r.type({url:a}):void 0},write:{isRequired:r.json?.write?.isRequired,writer(i,s,o,a){if(!a?.resources)return typeof i=="string"?void(s[o]=P2(i,a)):void(s[o]=i.write({},a));const l=aGe(i),c=P2(l,{...a,verifyItemRelativeUrls:a?.verifyItemRelativeUrls?{writtenUrls:a.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},1),u=r.type!==String&&(!Jze(this)||a?.origin&&this.originIdOf(n)>UB(a.origin)),h={object:this,propertyName:n,value:i,targetUrl:c,dest:s,targetPropertyName:o,context:a,params:t};a?.portalItem&&c&&!kl(c)?u&&t?.contentAddressed?a7(h):u?sGe(h):oGe(h):a?.portalItem&&(c==null||mpe(c)!=null||TI(c)||u)?a7(h):s[o]=c}}}}function a7(t){const{targetUrl:e,params:n,value:r,context:i,dest:s,targetPropertyName:o}=t;if(!i.portalItem)return;const a=gpe(e),l=M0e(r,e,i);if(n?.contentAddressed&&l.type!=="json")return void i.messages?.push(new Xe("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${l.type} with content addressing. Content addressing is only supported for json resources.`,{content:l}));const c=n?.contentAddressed&&l.type==="json"?Zze(l.jsonString):a?.filename??VI(),u=SI(n?.prefix??a?.prefix,c),h=`${u}.${s7(l)}`;if(n?.contentAddressed&&i.resources&&l.type==="json"){const y=i.resources.toKeep.find(({resource:_})=>_.path===h)??i.resources.toAdd.find(({resource:_})=>_.path===h);if(y)return void(s[o]=y.resource.itemRelativeUrl)}const f=i.portalItem.resourceFromPath(h);TI(e)&&i.resources&&i.resources.pendingOperations.push(pje(e).then(y=>{f.path=`${u}.${s7({type:"blob",blob:y})}`,s[o]=f.itemRelativeUrl}).catch(()=>{}));const g=n?.compress??!1;i.resources&&R0e({...t,resource:f,content:l,compress:g,updates:i.resources.toAdd}),s[o]=f.itemRelativeUrl}function sGe(t){const{context:e,targetUrl:n,params:r,value:i,dest:s,targetPropertyName:o}=t;if(!e.portalItem)return;const a=e.portalItem.resourceFromPath(n),l=M0e(i,n,e),c=s7(l),u=spe(a.path),h=r?.compress??!1;c===u?(e.resources&&R0e({...t,resource:a,content:l,compress:h,updates:e.resources.toUpdate}),s[o]=n):a7(t)}function oGe({context:t,targetUrl:e,dest:n,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),n[r]=e)}function R0e({object:t,propertyName:e,updates:n,resource:r,content:i,compress:s}){const o=a=>{lGe(t,e,a)};n.push({resource:r,content:i,compress:s,finish:o})}function M0e(t,e,n){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(n))}}function aGe(t){return t==null?null:typeof t=="string"?t:t.url}function lGe(t,e,n){typeof t[e]=="string"?t[e]=n.url:t[e].url=n.url}let WM=class extends _o(qt){constructor(e){super(e),this.color=null}};x([E({type:Jn,json:{type:[jr],write:!0}})],WM.prototype,"color",void 0),WM=x([ue("esri.effects.FocusAreaOutline")],WM);const cGe=WM;function ARt(t){const e=[];for(t.reset();t.nextPath();){const n=[];for(;t.nextPoint();)n.push([t.x,t.y]);e.push(n)}return t.reset(),e}function uGe(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function IRt(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,n=t.hasM;if(t.type==="point")return n&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:n?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.map(r=>[r]);if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let i=!1,s=!1;return r.forEach(o=>{o.hasZ&&(i=!0),o.hasM&&(s=!0)}),r.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(s&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a})}return null}function hL(t,e){const n=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}return Math.sqrt(n*n+r*r)}function N0e(t,e,n){const r=t[0]+n*(e[0]-t[0]),i=t[1]+n*(e[1]-t[1]);return t.length>2&&e.length>2?[r,i,t[2]+n*(e[2]-t[2])]:[r,i]}function hGe(t,e,n,r){return dGe(t,e,n[r],n[r+1])}function dGe(t,e,n,r){const[i,s]=e,[o,a]=n,[l,c]=r,u=l-o,h=c-a,f=u*u+h*h,g=(i-o)*u+(s-a)*h,y=Math.min(1,Math.max(0,g/f));return t[0]=o+u*y,t[1]=a+h*y,t}function PRt(t,e,n,r,i,s){let o=n,a=r,l=i-o,c=s-a;if(l!==0||c!==0){const u=((t-o)*l+(e-a)*c)/(l*l+c*c);u>1?(o=i,a=s):u>0&&(o+=l*u,a+=c*u)}return l=t-o,c=e-a,l*l+c*c}function O0e(t,e){return N0e(t,e,.5)}function CRt(t){const e=t.length;let n=0;for(let r=0;r<e-1;++r)n+=hL(t[r],t[r+1]);return n}function RRt(t,e){if(e<=0)return t[0];const n=t.length;let r=0;for(let i=0;i<n-1;++i){const s=hL(t[i],t[i+1]);if(e-r<s){const o=(e-r)/s;return N0e(t[i],t[i+1],o)}r+=s}return t[n-1]}function L0e(t,e=0,n=1){let r=0;const i=t.length;let s=t[0];for(let o=1;o<i;o++){const a=t[o];r+=(a[e]-s[e])*(a[n]+s[n]),s=a}if(D0e(t)){const o=t[0];r+=(o[e]-s[e])*(o[n]+s[n])}return r>=0}function D0e(t){const e=t.length;return e>0&&!jO(t[0],t[e-1])}function MRt(t){"rings"in t&&(fGe(t),pGe(t))}function fGe(t){if("rings"in t)for(const e of t.rings)D0e(e)&&e.push(e[0].slice())}function pGe(t){if(!("rings"in t)||t.rings.length===0||L0e(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function NRt(t){return t.type!=="polygon"&&t.type!=="polyline"||mGe(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function mGe(t,e){const n=Ga(e);if(!n)return;const r=n.valid[0],i=n.valid[1],s=i-r;for(const o of t){let a=1/0,l=-1/0;for(const u of o){const h=gGe(u[0],r,i);a=Math.min(a,h),l=Math.max(l,h),u[0]=h}const c=l-a;s-c<c&&o.forEach(u=>{u[0]<0&&(u[0]+=s)})}}function gGe(t,e,n){const r=n-e;return t<e?n-(e-t)%r:t>n?e+(t-e)%r:t}function ORt(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[n,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return n.length===r.length&&n.every((i,s)=>i.length===r[s].length)}function LRt(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function yGe(t){return _Ge(t.rings,t.hasZ??!1)}function vGe(t){const e=yGe(t);if(!e)return null;const{hasZ:n,spatialReference:r}=t,[i,s,o]=e;return isNaN(i)||isNaN(s)||n&&isNaN(o)?null:{x:i,y:s,z:n?o:void 0,spatialReference:r}}function _Ge(t,e){if(!t?.length)return null;const n=[],r=[],i=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const a=j0e(t[s],e,i);a&&r.push(a)}if(r.sort((s,o)=>{let a=s[2]-o[2];return a===0&&e&&(a=s[4]-o[4]),a}),r.length&&(n[0]=r[0][0],n[1]=r[0][1],e&&(n[2]=r[0][3]),(n[0]<i[0]||n[0]>i[1]||n[1]<i[2]||n[1]>i[3]||e&&(n[2]<i[4]||n[2]>i[5]))&&(n.length=0)),!n.length){const s=t[0]&&t[0].length?xGe(t[0],e):null;if(!s)return null;n[0]=s[0],n[1]=s[1],e&&s.length>2&&(n[2]=s[2])}return n}function j0e(t,e,n){let r=0,i=0,s=0,o=0,a=0;const l=t.length?t[0][0]:0,c=t.length?t[0][1]:0,u=t.length&&e?t[0][2]:0;for(let f=0;f<t.length;f++){const g=t[f],y=t[(f+1)%t.length],[_,b,T]=g,A=_-l,I=b-c,[P,M,V]=y,C=P-l,N=M-c,O=A*N-C*I;if(o+=O,r+=(A+C)*O,i+=(I+N)*O,e&&g.length>2&&y.length>2){const L=T-u,F=V-u,G=A*F-C*L;s+=(L+F)*G,a+=G}_<n[0]&&(n[0]=_),_>n[1]&&(n[1]=_),b<n[2]&&(n[2]=b),b>n[3]&&(n[3]=b),e&&(T<n[4]&&(n[4]=T),T>n[5]&&(n[5]=T))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const h=[r/(6*o)+l,i/(6*o)+c,o];return e&&(n[4]===n[5]||a===0?(h[3]=(n[4]+n[5])/2,h[4]=0):(h[3]=s/(6*a)+u,h[4]=a)),h}function DRt(t,e){let n=0,r=0,i=0;t.nextPoint();const s=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let a=0;a<t.pathSize;a++){t.seekInPath(a);const l=[t.x,t.y];t.seekInPath((a+1)%t.pathSize);const c=[t.x,t.y],[u,h]=l,f=u-s,g=h-o,[y,_]=c,b=y-s,T=_-o,A=f*T-b*g;i+=A,n+=(f+b)*A,r+=(g+T)*A,u<e[0]&&(e[0]=u),u>e[1]&&(e[1]=u),h<e[2]&&(e[2]=h),h>e[3]&&(e[3]=h)}return i>0&&(i*=-1),i?(i*=.5,[n/(6*i)+s,r/(6*i)+o,i]):null}function xGe(t,e){const n=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;for(let l=0,c=t.length;l<c-1;l++){const u=t[l],h=t[l+1];if(u&&h){n[0]=u[0],n[1]=u[1],r[0]=h[0],r[1]=h[1],e&&u.length>2&&h.length>2&&(n[2]=u[2],r[2]=h[2]);const f=hL(n,r);if(f){i+=f;const g=O0e(u,h);s+=f*g[0],o+=f*g[1],e&&g.length>2&&(a+=f*g[2])}}}return i>0?e?[s/i,o/i,a/i]:[s/i,o/i]:t.length?t[0]:null}function wGe(t){const{hasZ:e,totalSize:n}=t;if(n===0)return null;const r=[],i=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=j0e(uGe(t),t.hasZ,s);o&&i.push(o)}if(i.sort((o,a)=>{let l=o[2]-a[2];return l===0&&e&&(l=o[4]-a[4]),l}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],e&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.pathSize?bGe(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function bGe(t){const{hasZ:e}=t,n=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;if(t.nextPoint()){let l=t.x,c=t.y,u=t.z;for(;t.nextPoint();){const h=t.x,f=t.y,g=t.z;n[0]=l,n[1]=c,r[0]=h,r[1]=f,e&&(n[2]=u,r[2]=g);const y=hL(n,r);if(y){i+=y;const _=O0e(n,r);s+=y*_[0],o+=y*_[1],e&&_.length>2&&(a+=y*_[2])}l=h,c=f,u=g}}return i>0?e?[s/i,o/i,a/i]:[s/i,o/i]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const EGe=1e-6;function jRt(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<EGe){const i=wGe(t);return i?[i[0],i[1]]:null}const n=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)TGe(n,r,t);return n[0]*=1/e,n[1]*=1/e,n[0]+=r[0],n[1]+=r[1],n}const SGe=1/3;function TGe(t,e,n){if(!t||!n||n.pathSize<3)return null;n.nextPoint();const r=n.x,i=n.y;n.nextPoint();let s,o=n.x-r,a=n.y-i,l=0,c=0;for(;n.nextPoint();)l=n.x-r,c=n.y-i,s=.5*SGe*(l*a-c*o),t[0]+=s*(o+l),t[1]+=s*(a+c),o=l,a=c;const u=n.getCurrentRingArea(),h=[r,i];return h[0]-=e[0],h[1]-=e[1],h[0]*=u,h[1]*=u,t[0]+=h[0],t[1]+=h[1],t}function El(t=RGe){return[t[0],t[1],t[2],t[3]]}function $0e(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function kGe(t,e,n,r,i=El()){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function $Rt(t,e=El()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function AGe(t,e,n=new Vn){return n.xmin=t[0],n.ymin=t[1],n.xmax=t[2],n.ymax=t[3],n.spatialReference=e,n}function iu(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function IGe(t,e){e<t[0]&&(t[0]=e),e>t[2]&&(t[2]=e)}function PGe(t,e){e<t[1]&&(t[1]=e),e>t[3]&&(t[3]=e)}function FRt(t,e,n){if(e!=null)if("length"in e)c7(e)?(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[0]),n[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":n[0]=Math.min(t[0],e.xmin),n[1]=Math.min(t[1],e.ymin),n[2]=Math.max(t[2],e.xmax),n[3]=Math.max(t[3],e.ymax);break;case"point":n[0]=Math.min(t[0],e.x),n[1]=Math.min(t[1],e.y),n[2]=Math.max(t[2],e.x),n[3]=Math.max(t[3],e.y)}else $0e(n,t)}function VRt(t,e,n=t){const r=e.length;let i=t[0],s=t[1],o=t[2],a=t[3];for(let l=0;l<r;l++){const c=e[l];i=Math.min(i,c[0]),s=Math.min(s,c[1]),o=Math.max(o,c[0]),a=Math.max(a,c[1])}return n[0]=i,n[1]=s,n[2]=o,n[3]=a,n}function zRt(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function CW(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function RW(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function GRt(t){return CW(t)*RW(t)}function URt(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function BRt(t){const e=CW(t),n=RW(t);return Math.sqrt(e*e+n*n)}function WRt(t,e){return!!t&&l7(t,e.x,e.y)}function l7(t,e,n){return e>=t[0]&&n>=t[1]&&e<=t[2]&&n<=t[3]}function HRt(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function qRt(t,e,n){return Math.max(e[0],t[0])-n<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-n<=Math.min(e[3],t[3])}function CGe(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function KRt(t,e,n,r){return r??=t,r[0]=t[0]+e,r[1]=t[1]+n,r[2]=t[2]+e,r[3]=t[3]+n,r}function YRt(t){return t?$0e(t,sne):El(sne)}function c7(t){return t!=null&&t.length===4}function XRt(t,e){return c7(t)&&c7(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const sne=[1/0,1/0,-1/0,-1/0],RGe=[0,0,0,0];let MW=1e-6;function Al(){return MW}function MGe(t){MW=t}const NW=Math.random,NGe=Math.PI/180,OGe=180/Math.PI;function OW(t){return t*NGe}function LGe(t){return t*OGe}function DGe(t,e){return Math.abs(t-e)<=MW*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:NW,equals:DGe,getEpsilon:Al,setEpsilon:MGe,toDegree:LGe,toRadian:OW},Symbol.toStringTag,{value:"Module"}));function gw(t,e){return t[0]=e[0],t[1]=e[1],t}function co(t,e,n){return t[0]=e,t[1]=n,t}function F0e(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function oA(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function V0e(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function z0e(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function jGe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function $Ge(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function FGe(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function VGe(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function zGe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function zI(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function GGe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function dL(t,e){const n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function aA(t,e){const n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function bN(t){const e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function G0e(t){const e=t[0],n=t[1];return e*e+n*n}function U0e(t,e){return t[0]=-e[0],t[1]=-e[1],t}function UGe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function u7(t,e){const n=e[0],r=e[1];let i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}function B0e(t,e){return t[0]*e[0]+t[1]*e[1]}function W0e(t,e,n){const r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function BGe(t,e,n,r){const i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function WGe(t,e=1){const n=2*NW()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function HGe(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function dd(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function HM(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function qGe(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function KGe(t,e,n,r){const i=e[0]-n[0],s=e[1]-n[1],o=Math.sin(r),a=Math.cos(r);return t[0]=i*a-s*o+n[0],t[1]=i*o+s*a+n[1],t}function YGe(t,e){const n=t[0],r=t[1],i=e[0],s=e[1];let o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));let a=i*i+s*s;a>0&&(a=1/Math.sqrt(a));const l=(n*i+r*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function XGe(t){return"vec2("+t[0]+", "+t[1]+")"}function ZGe(t,e){return t[0]===e[0]&&t[1]===e[1]}function JGe(t,e){const n=t[0],r=t[1],i=e[0],s=e[1],o=Al();return Math.abs(n-i)<=o*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function QGe(t,e,n,r,i){let s=e[0]-n[0],o=e[1]-n[1];const a=(r[0]*s+r[1]*o)*(i-1);return s=r[0]*a,o=r[1]*a,t[0]=e[0]+s,t[1]=e[1]+o,t}const eUe=bN,LW=oA,tUe=V0e,nUe=z0e,rUe=dL,iUe=aA,sUe=G0e;Object.freeze(Object.defineProperty({__proto__:null,add:F0e,angle:YGe,ceil:jGe,copy:gw,cross:W0e,dist:rUe,distance:dL,div:nUe,divide:z0e,dot:B0e,equals:JGe,exactEquals:ZGe,floor:$Ge,inverse:UGe,len:eUe,length:bN,lerp:BGe,max:VGe,min:FGe,mul:tUe,multiply:V0e,negate:U0e,normalize:u7,projectAndScale:QGe,random:WGe,rotate:KGe,round:zGe,scale:zI,scaleAndAdd:GGe,set:co,sqrDist:iUe,sqrLen:sUe,squaredDistance:aA,squaredLength:G0e,str:XGe,sub:LW,subtract:oA,transformMat2:HGe,transformMat2d:dd,transformMat3:HM,transformMat4:qGe},Symbol.toStringTag,{value:"Module"}));function Kf(t,e,n,r){return t[0]=e[0]*(1-r)+n[0]*r,t[1]=e[1]*(1-r)+n[1]*r,t}function Fa(t,e){return aA(t,e)}function ZRt(t,e,n){const r=Fa(e,n);if(r===0)return Fa(e,t);const i=(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0]);return i*i/r}function oUe(t,e,n,r,i){const[s,o]=e,[a,l]=n,[c,u]=r,[h,f]=i,g=(s-a)*(u-f)-(o-l)*(c-h);if(g===0)return null;const y=(s*l-o*a)*(c-h)-(s-a)*(c*f-u*h),_=(s*l-o*a)*(u-f)-(o-l)*(c*f-u*h);return t[0]=y/g,t[1]=_/g,t}const hh=2*Math.PI;function d1(t,e){const n=Math.atan2(t,e);return n<0?n+hh:n}function H0e(t){return Math.abs(t)%hh}function one(t){const e=H0e(t);return e<Math.PI?e:hh-e}function fL(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function q0e(t,e,n,r){if(Mg(H0e(t-e),0))return n?[t,t]:[t,r?t-hh:t+hh];const[i,s]=r?[t-hh,t]:[t,t+hh];return[t,GI({min:i,max:s},e)]}function GI({min:t,max:e},n){let r;return r=e-n,r>=hh?(r-=r%hh,n+r):(r=n-t,r>=hh?(r-=r%hh,n-r):n)}function aUe(t,e){const n=GI(t,e);return n>t.min&&n<t.max?n:one(n-t.min)<one(n-t.max)?t.min:t.max}function K0e(t,e,n,r=10){return e.map(i=>{let s=i;for(let o=0;o<r;o++){const[a,l,c,u,h,f]=n(s),g=t[0]-a,y=t[1]-l,_=-c,b=-u;s+=-(2*g*_+2*y*b)/(2*_*_+2*g*-h+2*b*b+2*y*-f||1e-6)}return s})}const lUe=[0,0];function Y0e(t){const e=1-t,n=e*e,r=t*t;return[n*e,3*t*n,3*r*e,r*t]}function h7(t,e,n,r,i){const[s,o,a,l]=Y0e(i);return[t[0]*s+e[0]*o+n[0]*a+r[0]*l,t[1]*s+e[1]*o+n[1]*a+r[1]*l]}function ane(t,e,n,r,i){const[s,o,a,l]=Y0e(i);return t*s+e*o+n*a+r*l}function JRt(t,e,n){const r=t,[i,s,o]=e.b;return h7(r,s,o,i,n)}function cUe(t,e,n){const r=t,[i,s,o]=e.b,a=Kf([0,0],r,s,n),l=Kf(lUe,s,o,n),c=Kf([0,0],o,i,n),u=Kf([0,0],a,l,n),h=Kf([0,0],l,c,n);return[{b:[Kf([],u,h,n),a,u]},{b:[[...i],h,c]}]}function QRt(t,e,n){const r=t,[i,s,o]=e.b,a=K0e(n,[.1,.5,.9],h=>{const f=1-h,[g,y]=h7(r,s,o,i,h);return[g,y,3*f*f*(s[0]-r[0])+6*f*h*(o[0]-s[0])+3*h*h*(i[0]-o[0]),3*f*f*(s[1]-r[1])+6*f*h*(o[1]-s[1])+3*h*h*(i[1]-o[1]),6*f*(o[0]-2*s[0]+r[0])+6*h*(i[0]-2*o[0]+s[0]),6*f*(o[1]-2*s[1]+r[1])+6*h*(i[1]-2*o[1]+s[1])]}).map(h=>Math.min(1,Math.max(0,h)));a.push(0,1);let l=1/0;const c=a.map(h=>{const f=h7(r,s,o,i,h),[g,y]=f,_=n[0]-g,b=n[1]-y,T=Math.sqrt(_*_+b*b);return l=Math.min(T,l),{t:h,curvePoint:f,distance:T}}),u=[];for(const h of c){const{t:f,distance:g}=h;S0e(g,l)&&!u.some(({t:y})=>Mg(y,f))&&u.push(h)}return u}function uUe(t,e,n){const r=e,[i,s,o]=n.b;if(iu(t,r),iu(t,i),l7(t,s[0],s[1])&&l7(t,o[0],o[1]))return t;for(const a of lne(r[0],s[0],o[0],i[0]))a>0&&a<1&&IGe(t,ane(r[0],s[0],o[0],i[0],a));for(const a of lne(r[1],s[1],o[1],i[1]))a>0&&a<1&&PGe(t,ane(r[1],s[1],o[1],i[1],a));return t}function lne(t,e,n,r){const i=3*(3*(e-n)-t+r),s=6*(t-2*e+n),o=3*(e-t);if(i===0)return s!==0?[-o/s]:[];const a=Math.sqrt(s*s-4*i*o);return[(-s+a)/(2*i),(-s-a)/(2*i)]}function eMt(t,e,n){let i=0,s=[e];for(let o=0;o<16;o++){let a=t;const l=[];for(const u of s)l.push(...cUe(a,u,.5)),a=u.b[0];s=l,a=t,i=0;let c=0;for(const u of s){const[h,f,g]=u.b,y=Math.sqrt(Fa(a,h));i+=(y+(Math.sqrt(Fa(a,f))+Math.sqrt(Fa(f,g))+Math.sqrt(Fa(g,h))))/2,c+=y,a=h}if(i-c<n)return i}return i}function hUe(t,e,n){const[r,i]=t,[s,o]=e,[a,l]=n,[c,u]=[s-r,o-i];let h=c*(a-r)+u*(l-i);h/=c**2+u**2,h=vu(h,0,1);const f=Kf([0,0],t,e,h);return{t:h,curvePoint:f,distance:Math.sqrt(Fa(f,n))}}let X0e=class{constructor(e,n,r,i,s,o){this.cx=e,this.cy=n,this.radius=r,this.thetaStart=i,this.thetaEnd=s,this.isInvalid=o}get startPoint(){const{cx:e,cy:n,radius:r,thetaStart:i}=this;return[e+r*Math.cos(i),n+r*Math.sin(i)]}get endPoint(){const{cx:e,cy:n,radius:r,thetaEnd:i}=this;return[e+r*Math.cos(i),n+r*Math.sin(i)]}};function EN(t,e){const{cx:n,cy:r,radius:i}=t;return[n+i*Math.cos(e),r+i*Math.sin(e)]}function qM(t,e){if(t.isInvalid)return Kf([0,0],t.startPoint,t.endPoint,e);const{thetaStart:n,thetaEnd:r}=t;return EN(t,n*(1-e)+r*e)}function nMt(t,e){if(t.isInvalid)return hUe(t.startPoint,t.endPoint,e);const{cx:n,cy:r,thetaStart:i,thetaEnd:s}=t,[o,a]=e,l=aUe(fL(i,s),Math.atan2(a-r,o-n)),c=EN(t,l);return{t:(l-i)/(s-i),curvePoint:c,distance:Math.sqrt(Fa(e,c))}}function cne(t,e){if(e.isInvalid)return iu(t,e.startPoint),iu(t,e.endPoint),t;const{cx:n,cy:r,radius:i,thetaStart:s,thetaEnd:o}=e;iu(t,EN(e,s)),iu(t,EN(e,o));const a=fL(s,o),l=Math.PI/2;let c=0;for(const u of[[n+i,r],[n,r+i],[n-i,r],[n,r-i]])c=GI(a,c),c>a.min&&c<a.max&&iu(t,u),c+=l;return t}function rMt(t){if(t.isInvalid)return 2*t.radius;const{radius:e,thetaStart:n,thetaEnd:r}=t;return e*Math.abs(r-n)}function dUe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function fUe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function yw(t,e,n,r,i,s,o,a,l,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t}function Z0e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function J0e(t,e){if(t===e){const n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Q0e(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,f=-u*s+a*l,g=c*s-o*l;let y=n*h+r*f+i*g;return y?(y=1/y,t[0]=h*y,t[1]=(-u*r+i*c)*y,t[2]=(a*r-i*o)*y,t[3]=f*y,t[4]=(u*n-i*l)*y,t[5]=(-a*n+i*s)*y,t[6]=g*y,t[7]=(-c*n+r*l)*y,t[8]=(o*n-r*s)*y,t):null}function pUe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t[0]=o*u-a*c,t[1]=i*c-r*u,t[2]=r*a-i*o,t[3]=a*l-s*u,t[4]=n*u-i*l,t[5]=i*s-n*a,t[6]=s*c-o*l,t[7]=r*l-n*c,t[8]=n*o-r*s,t}function KM(t){const e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*(c*s-o*l)+n*(-c*i+o*a)+r*(l*i-s*a)}function lA(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=n[0],g=n[1],y=n[2],_=n[3],b=n[4],T=n[5],A=n[6],I=n[7],P=n[8];return t[0]=f*r+g*o+y*c,t[1]=f*i+g*a+y*u,t[2]=f*s+g*l+y*h,t[3]=_*r+b*o+T*c,t[4]=_*i+b*a+T*u,t[5]=_*s+b*l+T*h,t[6]=A*r+I*o+P*c,t[7]=A*i+I*a+P*u,t[8]=A*s+I*l+P*h,t}function d7(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=n[0],g=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=f*r+g*o+c,t[7]=f*i+g*a+u,t[8]=f*s+g*l+h,t}function eye(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=Math.sin(n),g=Math.cos(n);return t[0]=g*r+f*o,t[1]=g*i+f*a,t[2]=g*s+f*l,t[3]=g*o-f*r,t[4]=g*a-f*i,t[5]=g*l-f*s,t[6]=c,t[7]=u,t[8]=h,t}function mUe(t,e,n){const r=n[0],i=n[1],s=n[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function gUe(t,e,n){const r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t}function yUe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function vUe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function _Ue(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function xUe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function wUe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,h=r*a,f=i*o,g=i*a,y=i*l,_=s*o,b=s*a,T=s*l;return t[0]=1-h-y,t[3]=u-T,t[6]=f+b,t[1]=u+T,t[4]=1-c-y,t[7]=g-_,t[2]=f-b,t[5]=g+_,t[8]=1-c-h,t}function bUe(t,e){const n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10],h=u*o-a*c,f=-u*s+a*l,g=c*s-o*l,y=n*h+r*f+i*g;if(!y)return null;const _=1/y;return t[0]=h*_,t[1]=(-u*r+i*c)*_,t[2]=(a*r-i*o)*_,t[3]=f*_,t[4]=(u*n-i*l)*_,t[5]=(-a*n+i*s)*_,t[6]=g*_,t[7]=(-c*n+r*l)*_,t[8]=(o*n-r*s)*_,t}function EUe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],y=e[12],_=e[13],b=e[14],T=e[15],A=n*a-r*o,I=n*l-i*o,P=n*c-s*o,M=r*l-i*a,V=r*c-s*a,C=i*c-s*l,N=u*_-h*y,O=u*b-f*y,L=u*T-g*y,F=h*b-f*_,G=h*T-g*_,U=f*T-g*b;let he=A*U-I*G+P*F+M*L-V*O+C*N;return he?(he=1/he,t[0]=(a*U-l*G+c*F)*he,t[1]=(l*L-o*U-c*O)*he,t[2]=(o*G-a*L+c*N)*he,t[3]=(i*G-r*U-s*F)*he,t[4]=(n*U-i*L+s*O)*he,t[5]=(r*L-n*G-s*N)*he,t[6]=(_*C-b*V+T*M)*he,t[7]=(b*P-y*C-T*I)*he,t[8]=(y*V-_*P+T*A)*he,t):null}function SUe(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function TUe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function kUe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function AUe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function tye(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function IUe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function PUe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function CUe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function RUe(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=e[0],f=e[1],g=e[2],y=e[3],_=e[4],b=e[5],T=e[6],A=e[7],I=e[8],P=Al();return Math.abs(n-h)<=P*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-f)<=P*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-g)<=P*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(s-y)<=P*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(o-_)<=P*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-b)<=P*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(l-T)<=P*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(c-A)<=P*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(u-I)<=P*Math.max(1,Math.abs(u),Math.abs(I))}function MUe(t){const e=Al(),n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8];return Math.abs(1-(n*n+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(i*i+a*a+u*u))<=e}const NUe=lA,OUe=tye;Object.freeze(Object.defineProperty({__proto__:null,add:AUe,adjoint:pUe,copy:fUe,determinant:KM,equals:RUe,exactEquals:CUe,frob:kUe,fromMat2d:xUe,fromMat4:dUe,fromQuat:wUe,fromRotation:vUe,fromScaling:_Ue,fromTranslation:yUe,identity:Z0e,invert:Q0e,isOrthoNormal:MUe,mul:NUe,multiply:lA,multiplyScalar:IUe,multiplyScalarAndAdd:PUe,normalFromMat4:EUe,normalFromMat4Legacy:bUe,projection:SUe,rotate:eye,scale:mUe,scaleByVec2:gUe,set:yw,str:TUe,sub:OUe,subtract:tye,translate:d7,transpose:J0e},Symbol.toStringTag,{value:"Module"}));function Ev(){return[1,0,0,0,1,0,0,0,1]}function LUe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function DUe(t,e,n,r,i,s,o,a,l){return[t,e,n,r,i,s,o,a,l]}const jUe=Ev();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:jUe,clone:LUe,create:Ev,fromValues:DUe},Symbol.toStringTag,{value:"Module"}));const R_=Ev();function $Ue(t,e,n){const[r,i]=t,[s,o]=e,[a,l]=n;yw(R_,r,s,a,i,o,l,1,1,1);const c=KM(R_),u=4*c/(Fa(t,e)+Fa(e,n)+Fa(n,t));if(!isFinite(u)||Math.abs(u)<1e-8)return null;const h=r**2+i**2,f=s**2+o**2,g=a**2+l**2;yw(R_,h,f,g,i,o,l,1,1,1);const y=KM(R_);return yw(R_,h,f,g,r,s,a,1,1,1),[y/c*.5,KM(R_)/c*-.5]}function nye(t,e){const[n,r]=e.c,i=$Ue(t,r,n),s=i==null,o=i??Kf([],t,n,.5),[a,l]=t,[c,u]=r,[h,f]=n,[g,y]=o,_=a-g,b=l-y,T=Math.sqrt(_*_+b*b),A=d1(l-y,a-g),I=d1(u-y,c-g);let P=d1(f-y,h-g);return(I-A)*(P-I)<0&&(P+=2*Math.sign(A-P)*Math.PI),new X0e(g,y,T,A,P,s)}function iMt(t,e,n){const r=qM(t,n/2),i=qM(t,n),s=qM(t,(n+1)/2);return[{c:[i,r]},{c:[[...e.c[0]],s]}]}function sMt(t,e){const[n]=e.c,{cx:r,cy:i,thetaStart:s,thetaEnd:o,radius:a,isInvalid:l}=nye(t,e);return{a:[n,[r,i],Math.abs(o-s)<Math.PI?1:0,s>o?1:0,l?s:0,a,l?0:1]}}function oMt(t){return"curveRings"in t&&!!t.curveRings?.length||"curvePaths"in t&&!!t.curvePaths?.length}function aMt(t){return"curveRings"in t?t.curveRings:t.curvePaths}function DW(t){return"b"in t}function jW(t){return"c"in t}function pL(t){return Array.isArray(t)}function lMt(t){return"a"in t}function rye(t){return"a"in t&&t.a.length===4}function FUe(t){return"a"in t&&t.a.length===7}function d$(t){return pL(t)?t:DW(t)?t.b[0]:jW(t)?t.c[0]:t.a[0]}function VUe(t){if(DW(t)){const[e,n,r]=t.b;return{b:[[...e],[...n],[...r]]}}if(jW(t)){const[e,n]=t.c;return{c:[[...e],[...n]]}}if(pL(t))return[...t];if(rye(t)){const[e,n,r,i]=t.a;return{a:[[...e],[...n],r,i]}}if(FUe(t)){const[e,n,r,i,s,o,a]=t.a;return{a:[[...e],[...n],r,i,s,o,a]}}return t}function zUe(t,e){const[n,r,i,s]=e.a,[o,a]=t,[l,c]=n,[u,h]=r,f=o-u,g=a-h,y=Math.sqrt(f*f+g*g),_=l-u,b=c-h,T=Math.sqrt(_*_+b*b),A=y===0||T===0||!S0e(y,T),I=y,[P,M]=q0e(d1(a-h,o-u),Math.atan2(c-h,l-u),i,s);return new X0e(u,h,I,P,M,A)}function cMt(t,e,n){const{cx:r,cy:i,thetaStart:s,thetaEnd:o}=t,[a,l,c,u]=e.a,h=s*(1-n)+o*n;return[{a:[qM(t,n),[r,i],Math.abs(h-s)<Math.PI?1:0,u]},{a:[[...a],[r,i],Math.abs(o-h)<Math.PI?1:0,u]}]}let GUe=class{constructor(e,n,r,i,s,o,a,l,c){this.cx=e,this.cy=n,this.a=r,this.b=i,this.cosR=s,this.sinR=o,this.u1=a,this.u2=l,this.isInvalid=c}};function $W(t,e){const[n,r,i,s,o,a,l]=e.a,[c,u]=t,[h,f]=n,[g,y]=r,_=a*l,b=Math.cos(o),T=Math.sin(o),[A,I]=q0e(d1(1/_*(u-y)*b-1/_*(c-g)*T,1/a*(u-y)*T+1/a*(c-g)*b),Math.atan2(1/_*(f-y)*b-1/_*(h-g)*T,1/a*(f-y)*T+1/a*(h-g)*b),i,s);return new GUe(g,y,a,_,b,T,A,I,a===0||_===0)}function cA(t,e){const{a:n,b:r,cosR:i,sinR:s,cx:o,cy:a}=t,l=Math.cos(e),c=Math.sin(e);return[n*l*i-r*c*s+o,n*l*s+r*c*i+a]}function rx(t,e){const{u1:n,u2:r}=t;return cA(t,n*(1-e)+r*e)}function hMt(t,e,n){if(n<0||n>1)return[];if(n===0||n===1)return[VUe(e)];const[r,[i,s],o,a,l,c,u]=e.a,{u1:h,u2:f}=t,g=h*(1-n)+f*n;return[{a:[[...rx(t,n)],[i,s],Math.abs(g-h)<Math.PI?1:0,a,l,c,u]},{a:[[...r],[i,s],Math.abs(f-g)<Math.PI?1:0,a,l,c,u]}]}function dMt(t,e){const{a:n,b:r,cosR:i,sinR:s,u1:o,u2:a}=t,l=Math.PI/6,c=K0e(e,[1*l,2*l,4*l,5*l,7*l,8*l,10*l,11*l],_=>{const b=Math.cos(_),T=Math.sin(_),[A,I]=cA(t,_);return[A,I,-n*i*T-r*s*b,-n*s*T+r*i*b,-n*i*b+r*s*T,-n*s*b-r*i*T]}),u=fL(o,a),h=new Set(c.map(_=>GI(u,_)).filter(_=>_>u.min&&_<u.max));h.add(o),h.add(a);let f,g,y=1/0;for(const _ of h){const b=cA(t,_),[T,A]=b,I=e[0]-T,P=e[1]-A,M=I*I+P*P;M<y&&(f=(_-o)/(a-o),g=b,y=M)}return{t:f,curvePoint:g,distance:Math.sqrt(y)}}function UUe(t,e,n){const r=$W(e,n),{a:i,b:s,u1:o,u2:a,cosR:l,sinR:c,isInvalid:u}=r,h=n.a[0];if(iu(t,e),iu(t,h),u)return t;const f=Math.atan2(-s*c,i*l),g=f+Math.PI,y=Math.atan2(s*l,i*c),_=y+Math.PI,b=fL(o,a);for(const T of[f,g,y,_].map(A=>GI(b,A)))T>b.min&&T<b.max&&iu(t,cA(r,T));return t}function fMt(t,e,n){const[r,i,s,o,a,l,c]=e.a,u=$W(t,e),{u1:h,u2:f,isInvalid:g}=u,y=f-h;if(g)return Math.sqrt(Fa(t,r));const _=14,b=[0,0];let T=0,A=[rx(u,0),rx(u,.25),rx(u,.5),rx(u,.75),rx(u,1)];for(let I=0;I<_;I++){const P=A.length-1,M=y/(2*P),V=[];for(let N=0;N<P;N++)V.push(A[N]),V.push(cA(u,h+(2*N+1)*M));V.push(A[A.length-1]),A=V,T=0;let C=0;for(let N=1;N<A.length;N++){const O=A[N-1],L=A[N];if(T+=Math.sqrt(Fa(O,L)),N>1){const F=A[N-2],G=oUe(b,F,O,i,L);C+=G?Math.sqrt(Fa(O,G)):Math.abs(L[0]-O[0])+Math.abs(L[1]-O[1])}else C+=T}if(C-T<n)return T}return T}const une=Ev(),rR=Ev(),hne=Ev(),bm=Ev();function pMt(t,e,n){const[r,i,s,o,a,l,c]=e.a,u=$W(t,e),{cosR:h,sinR:f,a:g,b:y,cx:_,cy:b}=u,T=HM([0,0],r,n),A=HM([0,0],i,n),I=n[0]*n[4]<0?1-o:o;{const P=g*g*f*f+y*y*h*h,M=2*(y*y-g*g)*f*h,V=g*g*h*h+y*y*f*f,C=-2*P*_-M*b,N=-M*_-2*V*b;yw(une,P,M/2,C/2,M/2,V,N/2,C/2,N/2,P*_*_+M*_*b+V*b*b-g*g*y*y)}if(Q0e(rR,n),rR==null){const P=HM([0,0],t,n);return{a:[T,A,s,o,d1(T[1],T[0]),Math.sqrt(Fa(T,P))/2,0]}}J0e(hne,rR),lA(bm,lA(bm,hne,une),rR);{const P=bm[0],M=2*bm[1],V=bm[4],C=2*bm[2],N=2*bm[5],O=M*M-4*P*V,L=2*(P*N*N+V*C*C-M*C*N+O*bm[8]),F=Math.sqrt((P-V)**2+M*M),G=-Math.sqrt(L*(P+V+F))/O,U=-Math.sqrt(L*(P+V-F))/O;return{a:[T,A,s,I,.5*d1(-M,V-P),G,U/G]}}}function BUe(t,e,n){if(pL(n))return iu(t,e),iu(t,n),t;if(DW(n))return uUe(t,e,n);if(jW(n)){const r=nye(e,n);return cne(t,r)}if(rye(n)){const r=zUe(e,n);return cne(t,r)}return UUe(t,e,n)}function iye(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function sye(t){return t.points!==void 0}function oye(t){return t.x!==void 0&&t.y!==void 0}function aye(t){return t.paths!==void 0}function lye(t){return t.rings!==void 0}function cye(t){function e(n,r){return n==null?r:r==null?n:t(n,r)}return e}const dg=cye(Math.min),fg=cye(Math.max);function mMt(t,e){return aye(e)?j2(t,e.curvePaths??e.paths,!1,!1)??t:lye(e)?j2(t,e.curveRings??e.rings,!1,!1)??t:sye(e)?FW(t,e.points,!1,!1,!1,!1):iye(e)?uye(t,e):(oye(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function gMt(t){let e,n,r,i;for(t.reset(),e=r=1/0,n=i=-1/0;t.nextPath();){const s=WUe(t);e=Math.min(s[0],e),r=Math.min(s[1],r),n=Math.max(s[2],n),i=Math.max(s[3],i)}return El([e,r,n,i])}function WUe(t){let e,n,r,i;for(e=r=1/0,n=i=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),n=Math.max(t.x,n),i=Math.max(t.y,i);return El([e,r,n,i])}function yMt(t,e){return aye(e)?j2(t,e.curvePaths??e.paths,!0,!1)??t:lye(e)?j2(t,e.curveRings??e.rings,!0,!1)??t:sye(e)?FW(t,e.points,!0,!1,!0,!1):iye(e)?uye(t,e,!0,!1,!0,!1):(oye(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function j2(t,e,n,r){const i=n?3:2;if(!e.length||!e[0].length)return null;let s,o,a,l,[c,u]=d$(e[0][0]),h=c,f=u;for(let g=0;g<e.length;g++){const y=e[g];for(let _=0;_<y.length;_++){const b=d$(y[_]),[T,A]=b;if(c=dg(c,T),u=dg(u,A),h=fg(h,T),f=fg(f,A),n&&b.length>2){const V=b[2];s=dg(s,V),o=fg(o,V)}if(r&&b.length>i){const V=b[i];a=dg(s,V),l=fg(o,V)}const I=y[_];if(pL(I)||_<1)continue;const P=d$(y[_-1]),M=kGe(c,u,h,f);[c,u,h,f]=BUe(M,P,I)}}return n?r?(t[0]=c,t[1]=u,t[2]=s,t[3]=a,t[4]=h,t[5]=f,t[6]=o,t[7]=l,t.length=8,t):(t[0]=c,t[1]=u,t[2]=s,t[3]=h,t[4]=f,t[5]=o,t.length=6,t):r?(t[0]=c,t[1]=u,t[2]=a,t[3]=h,t[4]=f,t[5]=l,t.length=6,t):(t[0]=c,t[1]=u,t[2]=h,t[3]=f,t.length=4,t)}function uye(t,e,n,r,i,s){const o=e.xmin,a=e.xmax,l=e.ymin,c=e.ymax;let u=e.zmin,h=e.zmax,f=e.mmin,g=e.mmax;return i?(u=u||0,h=h||0,s?(f=f||0,g=g||0,t[0]=o,t[1]=l,t[2]=u,t[3]=f,t[4]=a,t[5]=c,t[6]=h,t[7]=g,t):(t[0]=o,t[1]=l,t[2]=u,t[3]=a,t[4]=c,t[5]=h,t)):s?(f=f||0,g=g||0,t[0]=o,t[1]=l,t[2]=f,t[3]=a,t[4]=c,t[5]=g,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=c,t)}function FW(t,e,n,r,i,s){const o=n?3:2,a=r&&s,l=n&&i;if(!e.length||!e[0].length)return null;let c,u,h,f,[g,y]=e[0],[_,b]=e[0];for(let T=0;T<e.length;T++){const A=e[T],[I,P]=A;if(g=dg(g,I),y=dg(y,P),_=fg(_,I),b=fg(b,P),l&&A.length>2){const M=A[2];c=dg(c,M),u=fg(u,M)}if(a&&A.length>o){const M=A[o];h=dg(c,M),f=fg(u,M)}}return i?(c=c||0,u=u||0,s?(h=h||0,f=f||0,t[0]=g,t[1]=y,t[2]=c,t[3]=h,t[4]=_,t[5]=b,t[6]=u,t[7]=f,t):(t[0]=g,t[1]=y,t[2]=c,t[3]=_,t[4]=b,t[5]=u,t)):s?(h=h||0,f=f||0,t[0]=g,t[1]=y,t[2]=h,t[3]=_,t[4]=b,t[5]=f,t):(t[0]=g,t[1]=y,t[2]=_,t[3]=b,t)}function HUe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function qUe(t){return t.points!==void 0}function KUe(t){return t.x!==void 0&&t.y!==void 0}function YUe(t){return t.paths!==void 0}function XUe(t){return t.rings!==void 0}const VW=[];function hye(t,e,n,r){return{xmin:t,ymin:e,xmax:n,ymax:r}}function dye(t,e,n,r,i,s){return{xmin:t,ymin:e,zmin:n,xmax:r,ymax:i,zmax:s}}function fye(t,e,n,r,i,s){return{xmin:t,ymin:e,mmin:n,xmax:r,ymax:i,mmax:s}}function pye(t,e,n,r,i,s,o,a){return{xmin:t,ymin:e,zmin:n,mmin:r,xmax:i,ymax:s,zmax:o,mmax:a}}function zW(t,e=!1,n=!1){return e?n?pye(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):dye(t[0],t[1],t[2],t[3],t[4],t[5]):n?fye(t[0],t[1],t[2],t[3],t[4],t[5]):hye(t[0],t[1],t[2],t[3])}function vMt(t){return t?HUe(t)?t:KUe(t)?ZUe(t):XUe(t)?gye(t):YUe(t)?yye(t):qUe(t)?mye(t):null:null}function mye(t){const{hasZ:e,hasM:n,points:r}=t,i=FW(VW,r,e??!1,n??!1,e??!1,n??!1);return i?zW(i,e,n):null}function ZUe(t){const{x:e,y:n,z:r,m:i}=t,s=i!=null;return r!=null?s?pye(e,n,r,i,e,n,r,i):dye(e,n,r,e,n,r):s?fye(e,n,i,e,n,i):hye(e,n,e,n)}function gye(t){const{hasZ:e,hasM:n,rings:r,curveRings:i}=t,s=j2(VW,i??r,e??!1,n??!1);return s?zW(s,e,n):null}function yye(t){const{hasZ:e,hasM:n,paths:r,curvePaths:i}=t,s=j2(VW,i??r,e??!1,n??!1);return s?zW(s,e,n):null}function $2(t,e,n=!1){let{hasM:r,hasZ:i}=t;Array.isArray(e)?e.length!==4||r||i?e.length===3&&n&&!r?(i=!0,r=!1):e.length===3&&r&&i&&(r=!1,i=!1):(r=!0,i=!0):(i=!i&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!i||e.hasZ)),t.hasZ=i,t.hasM=r}var YM;function dne(t){return!Array.isArray(t[0])}function JUe(t){return typeof t[0]?.[0]=="number"}function QUe(t){if(!t)return;let{rings:e,hasM:n,hasZ:r,spatialReference:i}=t;switch(e??=[],JUe(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,n??=!0;break;case 3:r??=n!==!0,n??=!r;break;default:r??=!1,n??=!1}return i??=Wt.WGS84,{...t,hasM:n,hasZ:r,rings:e,spatialReference:i}}let bi=YM=class extends Us{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:n}=t;let r=!1,i=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(i=!0);const s={rings:e.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(i&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}),spatialReference:n};return r&&(s.hasZ=!0),i&&(s.hasM=!0),new YM(s)}constructor(t){super(QUe(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){w9(kt.getLogger(this),"centroid",{replacement:"Please use centroidOperator.execute() instead.",version:"4.34",warnOnce:!0});const t=vGe(this);return t?Qt.fromJSON(t):null}writeCurveRings(t,e){e.curveRings=Ze(t)}get extent(){const t=gye(this),{spatialReference:e}=this;return t?new Vn({...t,spatialReference:e}):null}get isSelfIntersecting(){return w9(kt.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),N9e(this.rings)}writeRings(t,e){e.rings=Ze(this.rings)}addRing(t){if(!t)return;const e=this.rings,n=e.length;if(dne(t)){const r=[];for(let i=0,s=t.length;i<s;i++)r[i]=t[i].toArray();e[n]=r}else e[n]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new YM;return t.spatialReference=this.spatialReference,t.rings=Ze(this.rings),t.curveRings=Ze(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,n=t.spatialReference;if(e!=null!=(n!=null)||e!=null&&n!=null&&!e.equals(n)||this.rings.length!==t.rings.length)return!1;const r=([i,s,o,a],[l,c,u,h])=>i===l&&s===c&&(o==null&&u==null||o===u)&&(a==null&&h==null||a===h);for(let i=0;i<this.rings.length;i++){const s=this.rings[i],o=t.rings[i];if(!jO(s,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=tL(t,this.spatialReference);return cW(this,e??t)}isClockwise(t){const e=dne(t)?t.map(n=>this.hasZ?this.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y]):t;return L0e(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const n=this.rings[t][e],r=this.hasZ,i=this.hasM;return r&&!i?new Qt(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new Qt(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new Qt(n[0],n[1],n[2],n[3],this.spatialReference):new Qt(n[0],n[1],this.spatialReference)}insertPoint(t,e,n){return this._validateInputs(t,e,!0)?($2(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[t].splice(e,0,n),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const n=new Qt(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),n}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],n=this.spatialReference,r=e.map(i=>new Qt(i,n));return this.notifyChange("rings"),r}setPoint(t,e,n){return this._validateInputs(t,e)?($2(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[t][e]=n,this.notifyChange("rings"),this):this}_validateInputs(t,e,n=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(n&&(e<0||e>r.length)||!n&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};x([E({readOnly:!0})],bi.prototype,"cache",null),x([E({readOnly:!0})],bi.prototype,"centroid",null),x([E({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],bi.prototype,"curveRings",void 0),x([er("curveRings")],bi.prototype,"writeCurveRings",null),x([E({readOnly:!0})],bi.prototype,"extent",null),x([E({readOnly:!0})],bi.prototype,"isSelfIntersecting",null),x([E({type:[[[Number]]],json:{write:{isRequired:!0}}})],bi.prototype,"rings",void 0),x([er("rings")],bi.prototype,"writeRings",null),bi=YM=x([ue("esri.geometry.Polygon")],bi),bi.prototype.toJSON.isDefaultToJSON=!0;function g0(){return[0,0,0]}function eBe(t){return[t[0],t[1],t[2]]}function Rb(t,e,n){return[t,e,n]}function tBe(t,e,n){return[t,e,n]}function nBe(t,e=g0()){const n=Math.min(3,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e}function vye(){return g0()}function _ye(){return Rb(1,1,1)}function xye(){return Rb(1,0,0)}function wye(){return Rb(0,1,0)}function bye(){return Rb(0,0,1)}const rBe=vye(),iBe=_ye(),sBe=xye(),oBe=wye(),aBe=bye();Object.freeze(Object.defineProperty({__proto__:null,ONES:iBe,UNIT_X:sBe,UNIT_Y:oBe,UNIT_Z:aBe,ZEROS:rBe,clone:eBe,create:g0,freeze:tBe,fromArray:nBe,fromValues:Rb,ones:_ye,unitX:xye,unitY:wye,unitZ:bye,zeros:vye},Symbol.toStringTag,{value:"Module"}));var f7;function lBe(t){if(!t)return;let{points:e,hasM:n,hasZ:r,spatialReference:i}=t;switch(e??=[],e?.at(0)?.length){case 4:r??=!0,n??=!0;break;case 3:r??=n!==!0,n??=!r;break;default:r??=!1,n??=!1}return i??=Wt.WGS84,{...t,hasM:n,hasZ:r,points:e,spatialReference:i}}let Ju=f7=class extends Us{constructor(t){super(lBe(t)),this.points=[],this.type="multipoint"}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=mye(this);return t?new Vn({...t,spatialReference:this.spatialReference}):null}writePoints(t,e){e.points=Ze(this.points)}clone(){const{points:t,spatialReference:e,hasM:n,hasZ:r}=this;return new f7({points:Ze(t),spatialReference:e.clone(),hasM:n,hasZ:r})}addPoint(t){return $2(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],n={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(n.z=e[2],r=3),this.hasM&&(n.m=e[r]),new Qt(n)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Qt(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?($2(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};x([E({readOnly:!0})],Ju.prototype,"cache",null),x([E({readOnly:!0})],Ju.prototype,"extent",null),x([E({type:[[Number]],json:{write:{isRequired:!0}}})],Ju.prototype,"points",void 0),x([er("points")],Ju.prototype,"writePoints",null),Ju=f7=x([ue("esri.geometry.Multipoint")],Ju),Ju.prototype.toJSON.isDefaultToJSON=!0;var p7;function cBe(t){return!Array.isArray(t[0])}function uBe(t){return typeof t[0]?.[0]=="number"}function hBe(t){if(!t)return;let{paths:e,hasM:n,hasZ:r,spatialReference:i}=t;switch(e??=[],uBe(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,n??=!0;break;case 3:r??=n!==!0,n??=!r;break;default:r??=!1,n??=!1}return i??=Wt.WGS84,{...t,hasM:n,hasZ:r,paths:e,spatialReference:i}}let As=p7=class extends Us{constructor(t){super(hBe(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=Ze(t)}get extent(){const t=yye(this),{spatialReference:e}=this;return t?new Vn({...t,spatialReference:e}):null}writePaths(t,e){e.paths=Ze(this.paths)}addPath(t){if(!t)return;const e=this.paths,n=e.length;if(cBe(t)){const r=[];for(let i=0,s=t.length;i<s;i++)r[i]=t[i].toArray();e[n]=r}else e[n]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new p7;return t.spatialReference=this.spatialReference,t.paths=Ze(this.paths),t.curvePaths=Ze(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const n=this.paths[t][e],r=this.hasZ,i=this.hasM;return r&&!i?new Qt(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new Qt(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new Qt(n[0],n[1],n[2],n[3],this.spatialReference):new Qt(n[0],n[1],this.spatialReference)}insertPoint(t,e,n){return this._validateInputs(t,e,!0)?($2(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[t].splice(e,0,n),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],n=this.spatialReference,r=e.map(i=>new Qt(i,n));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const n=new Qt(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),n}setPoint(t,e,n){return this._validateInputs(t,e)?($2(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[t][e]=n,this.notifyChange("paths"),this):this}_validateInputs(t,e,n=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(n&&(e<0||e>r.length)||!n&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};x([E({readOnly:!0})],As.prototype,"cache",null),x([E({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],As.prototype,"curvePaths",void 0),x([er("curvePaths")],As.prototype,"writeCurvePaths",null),x([E({readOnly:!0})],As.prototype,"extent",null),x([E({type:[[[Number]]],json:{write:{isRequired:!0}}})],As.prototype,"paths",void 0),x([er("paths")],As.prototype,"writePaths",null),As=p7=x([ue("esri.geometry.Polyline")],As),As.prototype.toJSON.isDefaultToJSON=!0;var m7;let ix=m7=class extends Kt{constructor(t){super(t),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new m7({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};x([E()],ix.prototype,"isInverse",void 0),x([E()],ix.prototype,"wkt",void 0),x([E()],ix.prototype,"wkid",void 0),ix=m7=x([ue("esri.geometry.operators.support.GeographicTransformationStep")],ix);var g7;let RT=g7=class extends Kt{constructor(t){super(t),this.steps=[]}getInverse(){const t=new g7;for(let e=this.steps.length-1;e>=0;e--){const n=this.steps[e];t.steps.push(n.getInverse())}return t}};x([E({type:[ix],nonNullable:!0})],RT.prototype,"steps",void 0),RT=g7=x([ue("esri.geometry.operators.support.GeographicTransformation")],RT);const _Mt=Math.PI/180,xMt=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,Em=is.radius,ju=is.eccentricitySquared,dBe={a1:Em*ju,a2:Em*ju*Em*ju,a3:Em*ju*ju/2,a4:Em*ju*Em*ju*2.5,a5:Em*ju+Em*ju*ju/2,a6:1-ju},wMt={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:is.radius,f:is.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Yg.radius,f:Yg.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Pd.radius,f:Pd.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Pd.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}},fBe={2:{5:fi,7:null,9:null,10:fi,1:NT,6:null,8:null,0:null,3:vw,11:_w,2:fi,4:bw},5:{5:fi,7:null,9:null,10:fi,1:NT,6:null,8:null,0:null,3:vw,11:_w,2:fi,4:bw},7:{5:null,7:fi,9:null,10:fi,1:null,6:mne,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:fi,10:fi,1:null,6:null,8:pne,0:null,3:null,11:null,2:null,4:null},3:{5:MT,7:null,9:null,10:MT,1:mBe,6:null,8:null,0:null,3:fi,11:vBe,2:MT,4:gBe},4:{5:Ew,7:null,9:null,10:Ew,1:ABe,6:null,8:null,0:null,3:IBe,11:_Be,2:Ew,4:fi},1:{5:ww,7:null,9:null,10:ww,1:fi,6:null,8:null,0:null,3:SBe,11:xBe,2:ww,4:TBe},6:{5:null,7:yne,9:null,10:yne,1:null,6:fi,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:gne,10:gne,1:null,6:null,8:fi,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:fi,3:null,11:null,2:null,4:null},10:{5:fi,7:fi,9:fi,10:fi,1:NT,6:mne,8:pne,0:null,3:vw,11:_w,2:fi,4:bw},11:{5:xw,7:null,9:null,10:xw,1:wBe,6:null,8:null,0:null,3:bBe,11:fi,2:xw,4:EBe}};function Eye(t,e){return pBe(t,e)?.projector}function pBe(t,e){if(t==null||e==null)return null;if(vf.source.spatialReference===t&&vf.dest.spatialReference===e)return vf;const n=fne(t,vf.source),r=fne(e,vf.dest);return n===0&&r===0?yo(t,e)?vf.projector=fi:vf.projector=null:vf.projector=fBe[n][r],vf}function fne(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Jd(t,1)),fN(t)?e.spatialReferenceId=1:q1(t)?e.spatialReferenceId=2:Gd(t)?e.spatialReferenceId=3:F8e(t)?e.spatialReferenceId=11:t.wkt===U8e.wkt?e.spatialReferenceId=4:t.wkid===4490?e.spatialReferenceId=5:t.wkt===oW.wkt?e.spatialReferenceId=6:t.wkt===aW.wkt?e.spatialReferenceId=8:Cme(t)?e.spatialReferenceId=7:Rme(t)?e.spatialReferenceId=9:e.spatialReferenceId=0):0}function fi(t,e,n,r){t!==n&&(n[r++]=t[e++],n[r++]=t[e++],n[r]=t[e])}function MT(t,e,n,r){n[r]=V2*(t[e]/f1),n[r+1]=V2*(Sye-2*Math.atan(Math.exp(-t[e+1]/f1))),n[r+2]=t[e+2]}function mBe(t,e,n,r){const i=t[e]/f1,s=Sye-2*Math.atan(Math.exp(-t[e+1]/f1)),o=f1+t[e+2],a=Math.cos(s)*o;n[r]=Math.cos(i)*a,n[r+1]=Math.sin(i)*a,n[r+2]=Math.sin(s)*o}function gBe(t,e,n,r){MT(t,e,n,r),bw(n,r,n,r)}function yBe(t,e,n,r,i){const s=.4999999*Math.PI,o=vu(F2*t[e+1],-s,s),a=Math.sin(o);n[r++]=F2*t[e]*i.radius,n[r++]=i.halfSemiMajorAxis*Math.log((1+a)/(1-a)),n[r]=t[e+2]}function vw(t,e,n,r){yBe(t,e,n,r,is)}function _w(t,e,n,r){n[r]=t[e]*vne,n[r+1]=t[e+1]*vne,n[r+2]=t[e+2]}function xw(t,e,n,r){n[r]=t[e]*_ne,n[r+1]=t[e+1]*_ne,n[r+2]=t[e+2]}function vBe(t,e,n,r){MT(t,e,n,r),_w(n,r,n,r)}function _Be(t,e,n,r){Ew(t,e,n,r),_w(n,r,n,r)}function xBe(t,e,n,r){ww(t,e,n,r),_w(n,r,n,r)}function wBe(t,e,n,r){xw(t,e,n,r),NT(n,r,n,r)}function bBe(t,e,n,r){xw(t,e,n,r),vw(n,r,n,r)}function EBe(t,e,n,r){xw(t,e,n,r),bw(n,r,n,r)}function GW(t,e,n,r,i){const s=i+t[e+2],o=F2*t[e+1],a=F2*t[e],l=Math.cos(o)*s;n[r]=Math.cos(a)*l,n[r+1]=Math.sin(a)*l,n[r+2]=Math.sin(o)*s}function pne(t,e,n,r){GW(t,e,n,r,Yg.radius)}function mne(t,e,n,r){GW(t,e,n,r,Pd.radius)}function NT(t,e,n,r){GW(t,e,n,r,is.radius)}function UW(t,e,n,r,i){const s=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(s*s+o*o+a*a),c=Vze(a/(l===0?1:l)),u=Math.atan2(o,s);n[r++]=V2*u,n[r++]=V2*c,n[r]=l-i}function gne(t,e,n,r){UW(t,e,n,r,Yg.radius)}function yne(t,e,n,r){UW(t,e,n,r,Pd.radius)}function ww(t,e,n,r){UW(t,e,n,r,is.radius)}function SBe(t,e,n,r){ww(t,e,n,r),vw(n,r,n,r)}function TBe(t,e,n,r){ww(t,e,n,r),bw(n,r,n,r)}function kBe(t,e,n,r,i){const s=F2*t[e],o=F2*t[e+1],a=t[e+2],l=Math.sin(o),c=Math.cos(o),u=i.radius/Math.sqrt(1-i.eccentricitySquared*l*l);n[r++]=(u+a)*c*Math.cos(s),n[r++]=(u+a)*c*Math.sin(s),n[r++]=(u*(1-i.eccentricitySquared)+a)*l}function bw(t,e,n,r){kBe(t,e,n,r,is)}function Ew(t,e,n,r){const i=dBe,s=t[e],o=t[e+1],a=t[e+2];let l,c,u,h,f,g,y,_,b,T,A,I,P,M,V,C,N,O,L,F,G;l=Math.abs(a),c=s*s+o*o,u=Math.sqrt(c),h=c+a*a,f=Math.sqrt(h),F=Math.atan2(o,s),g=a*a/h,y=c/h,M=i.a2/f,V=i.a3-i.a4/f,y>.3?(_=l/f*(1+y*(i.a1+M+g*V)/f),L=Math.asin(_),T=_*_,b=Math.sqrt(1-T)):(b=u/f*(1-g*(i.a5-M-y*V)/f),L=Math.acos(b),T=1-b*b,_=Math.sqrt(T)),A=1-is.eccentricitySquared*T,I=is.radius/Math.sqrt(A),P=i.a6*I,M=u-I*b,V=l-P*_,N=b*M+_*V,C=b*V-_*M,O=C/(P/A+N),L+=O,G=N+C*O/2,a<0&&(L=-L),n[r++]=V2*F,n[r++]=V2*L,n[r]=G}function ABe(t,e,n,r){Ew(t,e,n,r),NT(n,r,n,r)}function IBe(t,e,n,r){Ew(t,e,n,r),vw(n,r,n,r)}const vf={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:fi},F2=FI(1),V2=b0e(1),Sye=.5*Math.PI,f1=is.radius,vne=f1*Math.PI/180,_ne=180/(f1*Math.PI);function UI(t,e,n,r,i,s,o=Math.floor(t.length/3)){const a=Eye(e,i);if(a==null)return!1;if(a===fi){if(t===r&&n===s)return!0;const c=n+3*o;for(let u=n,h=s;u<c;u++,h++)r[h]=t[u];return!0}const l=n+3*o;for(let c=n,u=s;c<l;c+=3,u+=3)a(t,c,r,u);return!0}const bMt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:UI},Symbol.toStringTag,{value:"Module"}));function xne(t,e,n,r,i,s){return iR[0]=t,iR[1]=e,iR[2]=n,UI(iR,r,0,i,s,0)}const iR=g0();function PBe(t,e,n){if(e==null||n==null||n.vcsWkid||yo(e,n)||Zg(e)||Zg(n))return null;const r=nte(e)/nte(n);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return i=>CBe(i,r);case"polyline":case"esriGeometryPolyline":return i=>MBe(i,r);case"polygon":case"esriGeometryPolygon":return i=>RBe(i,r);case"multipoint":case"esriGeometryMultipoint":return i=>NBe(i,r);case"extent":case"esriGeometryEnvelope":return i=>OBe(i,r);default:return null}}function CBe(t,e){t?.z!=null&&(t.z*=e)}function RBe(t,e){if(t)for(const n of t.rings)for(const r of n)r.length>2&&(r[2]*=e)}function MBe(t,e){if(t)for(const n of t.paths)for(const r of n)r.length>2&&(r[2]*=e)}function NBe(t,e){if(t)for(const n of t.points)n.length>2&&(n[2]*=e)}function OBe(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let OT=null,uA=null,hA=null,z2=null,y7={};const BW=new MI;function Op(){return!!(uA?.isLoaded()&&hA?.isLoaded()&&z2?.isLoaded())}function Tye(){return!!Op()||(sn(BW),Qg(),!1)}function kye(t,e){return!t||!e||Sh(t,e)||Tye()}function LBe(t,e){return!Sh(t,e)&&!Op()}async function Qg(t){OT==null&&(OT=Promise.all([ve(()=>import("./projectOperator-BnhAoPVV.js"),__vite__mapDeps([47,48,49])).then(e=>(uA=e,uA.load())),ve(()=>import("./projectOperator-Dzv8VC3g.js"),__vite__mapDeps([50,48,49])).then(e=>(hA=e,hA.load())),ve(()=>import("./geographicTransformationUtils-BPV2xeOL.js"),[]).then(e=>(z2=e,z2.load()))])),await OT,gi(t),BW.notify()}function Sv(t,e,n){return Array.isArray(t)?t.length===0?[]:(y9e(t),v7(t,t[0].spatialReference,e,n)):(O2(t),v7([t],t.spatialReference,e,n)[0])}function v7(t,e,n,r){if(e==null||n==null)return t;if(Sh(e,n,r))return t.map(i=>XM(i,e,n));if(r?.geographicTransformation==null&&fN(e))return t.map(i=>XM(i,e,Wt.WGS84)).map(i=>dA(i,n));if(r?.geographicTransformation==null&&fN(n))return t.map(i=>dA(i,Wt.WGS84)).map(i=>XM(i,Wt.WGS84,n));if(!Op())throw new Iye;if(!r?.geographicTransformation){if(r?.extendedParams)r={...r,geographicTransformation:z2.getTransformation(e,n,r.areaOfInterestExtent)||new RT};else if(!r?.areaOfInterestExtent){const i=DBe(e,n);let s=y7[i];s||(s=z2.getTransformation(e,n)||new RT,y7[i]=s),r={geographicTransformation:s}}}return t[0].spatialReference||(t[0].spatialReference=e),t[0]instanceof Us?uA.executeMany(t,n,r):hA.executeMany(t,n,r)}function DBe(t,e){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??""].join()}function jBe(t,e){const n=Aye([t],e);return n.pending!=null?{pending:n.pending,geometry:null}:n.geometries!=null?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function Aye(t,e){if(!Op()){for(const n of t)if(n!=null&&!yo(n.spatialReference,e)&&dc(n.spatialReference)&&dc(e)&&!Sh(n.spatialReference,e))return sn(BW),{pending:Qg(),geometries:null}}return{pending:null,geometries:t.map(n=>n==null?null:yo(n.spatialReference,e)?n:dc(n.spatialReference)&&dc(e)?dA(n,e):null)}}let Iye=class extends Xe{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function $Be(){OT=null,uA=null,hA=null,z2=null,y7={}}const FBe={get loadPromise(){return OT}};function dA(t,e){try{const n=Sv(t,e);if(n==null)return null;"xmin"in t&&"xmin"in n&&(n.zmin=t.zmin,n.zmax=t.zmax);const r=PBe(n.type,t.spatialReference,e);return r?.(n),n}catch(n){if(!(n instanceof Iye))throw n;return null}}async function Pye(t,e,n){const r=t.spatialReference;return r!=null&&e!=null&&await Cye(r,e,null,n),dA(t,e)}function Sh(t,e,n){return!(n?.areaOfInterestExtent||n?.extendedParams||n?.geographicTransformation)&&(!!yo(t,e)||dc(t)&&dc(e)&&!!Eye(t,e))}function VBe(t,e){if(yo(t,e))return!0;if(!dc(t)||!dc(e))return!1;const n=q1(t)||Gd(t)||ete(t),r=q1(e)||Gd(e)||ete(e);return n&&r}async function Cye(t,e,n,r){if(Op())return yee(r);if(Array.isArray(t)){for(const{source:i,dest:s,options:o}of t)if(i&&s&&!Sh(i,s,o))return Qg(r)}else if(t&&e&&!Sh(t,e,n))return Qg(r);return yee(r)}function XM(t,e,n){return t?"x"in t?Rye(t,e,new Qt,n,0):"xmin"in t?Dye(t,e,new Vn,n,0):"rings"in t?Lye(t,e,new bi,n,0):"paths"in t?Nye(t,e,new As,n,0):"points"in t?Mye(t,e,new Ju,n,0):null:null}function zBe(t,e,n=e.spatialReference,r=0){return n!=null&&t.spatialReference!=null&&Rye(t,t.spatialReference,e,n,r)!=null}function Rye(t,e,n,r,i){oa[0]=t.x,oa[1]=t.y;const s=t.z;return oa[2]=s!==void 0?s:i,UI(oa,e,0,oa,r,0)?(n.x=oa[0],n.y=oa[1],n.spatialReference=r,s!==void 0||Zg(r)?(n.z=oa[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),t.m===void 0?(n.m=void 0,n.hasM=!1):(n.m=t.m,n.hasM=!0),n):null}function GBe(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&Mye(t,t.spatialReference,e,n,r)!=null}function Mye(t,e,n,r,i){const{points:s,hasZ:o,hasM:a}=t,l=[],c=s.length,u=[];for(const f of s)u.push(f[0],f[1],o?f[2]:i);if(!UI(u,e,0,u,r,0,c))return null;const h=o||Zg(r);for(let f=0;f<c;++f){const g=3*f,y=u[g],_=u[g+1];h&&a?l.push([y,_,u[g+2],s[f][3]]):h?l.push([y,_,u[g+2]]):a?l.push([y,_,s[f][2]]):l.push([y,_])}return n.points=l,n.spatialReference=r,n.hasZ=o,n.hasM=a,n}function UBe(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&Nye(t,t.spatialReference,e,n,r)!=null}function Nye(t,e,n,r,i){const{paths:s,hasZ:o,hasM:a}=t,l=[];if(!jye(s,o??!1,a??!1,e,l,r,i))return null;const c=o||Zg(r);return n.paths=l,n.spatialReference=r,n.hasZ=c,n.hasM=a,n}function Oye(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&Lye(t,t.spatialReference,e,n,r)!=null}function Lye(t,e,n,r,i){const{rings:s,hasZ:o,hasM:a}=t,l=[];if(!jye(s,o??!1,a??!1,e,l,r,i))return null;const c=o||Zg(r);return n.rings=l,n.spatialReference=r,n.hasZ=c,n.hasM=a,n}function BBe(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&Dye(t,t.spatialReference,e,n,r)!=null}function Dye(t,e,n,r,i){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:u}=t,h=c?t.zmin:i;if(!xne(s,o,h,e,oa,r))return null;const f=c||Zg(r);n.xmin=oa[0],n.ymin=oa[1],f&&(n.zmin=oa[2]);const g=c?t.zmax:i;return xne(a,l,g,e,oa,r)?(n.xmax=oa[0],n.ymax=oa[1],f&&(n.zmax=oa[2]),u&&(n.mmin=t.mmin,n.mmax=t.mmax),n.spatialReference=r,n):null}function jye(t,e,n,r,i,s,o=0){const a=new Array;for(const u of t)for(const h of u)a.push(h[0],h[1],e?h[2]:o);if(!UI(a,r,0,a,s,0))return!1;let l=0;i.length=0;const c=e||Zg(s);for(const u of t){const h=new Array;for(const f of u)c&&n?h.push([a[l++],a[l++],a[l++],f[3]]):c?h.push([a[l++],a[l++],a[l++]]):n?(h.push([a[l++],a[l++],f[2]]),l++):(h.push([a[l++],a[l++]]),l++);i.push(h)}return!0}const oa=g0(),SMt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Sh,initializeProjection:Cye,isEqualBaseGCS:VBe,isLoaded:Op,isLoadedOrLoad:Tye,isLoadedOrLoadFor:kye,load:Qg,project:Sv,projectExtent:BBe,projectMany:v7,projectMultipoint:GBe,projectOrLoad:jBe,projectOrLoadMany:Aye,projectPoint:zBe,projectPolygon:Oye,projectPolyline:UBe,projectWithZConversion:Pye,projectWithoutEngine:XM,requiresLoad:LBe,test:FBe,tryProjectWithZConversion:dA,unload:$Be},Symbol.toStringTag,{value:"Module"}));var ZM;let _7=ZM=class extends m0(Ot.ofType(bi)){constructor(t){super(t)}clone(){return new ZM(this.items.map(t=>t.clone()))}write(t,e){return this.toJSON(e)}toJSON(t){const e=t?.layer?.spatialReference;return e?this.toArray().map(n=>{if(!e.equals(n.spatialReference)){if(!Sh(n.spatialReference,e))return t?.messages?.push(new zd("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const i=new bi;Oye(n,i,e),n=i}const r=n.toJSON(t);return delete r.spatialReference,r}).filter(n=>n!=null):this.toArray().map(n=>n.toJSON(t))}static fromJSON(t,e){const n=new ZM;return t.forEach(r=>n.add(bi.fromJSON(r,e))),n}};_7=ZM=x([ue("esri.layers.support.PolygonCollection")],_7);const LT=_7;let If=class extends m0(IW){constructor(e){super(e),this.id=`focusarea-${VI()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new LT}readGeometries(e,n,r){Array.isArray(e)?this.geometries=LT.fromJSON(e,r):r.origin!=="web-scene"&&r.origin!=="portal-item"||r.hooks?.onAfterLoad?.(()=>this._loadGeometries(wb(e,r),r))}async _loadGeometries(e,n){const r=await ns(e,{responseType:"json"});this.geometries=LT.fromJSON(r.data,n)}};x([E({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),E()],If.prototype,"id",void 0),x([E({type:String,json:{write:!0}})],If.prototype,"title",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],If.prototype,"enabled",void 0),x([E({type:cGe,json:{write:!0}})],If.prototype,"outline",void 0),x([E({type:LT,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new LT(t.items.map(e=>e.clone()))}),nGe({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],If.prototype,"geometries",void 0),x([cr(["web-scene","portal-item","service"],"geometries")],If.prototype,"readGeometries",null),If=x([ue("esri.effects.FocusArea")],If);const WBe=If;let PS=class extends m0(IW){constructor(e){super(e),this.areas=new Ot,this.style="bright"}};x([E({type:Ot.ofType(WBe),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new Ot(t.items.map(e=>e.clone()))})],PS.prototype,"areas",void 0),x([E({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],PS.prototype,"style",void 0),PS=x([ue("esri.effects.FocusAreas")],PS);const $ye=PS;function HBe(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function qBe(t){return!(!HBe(t)||!bze(t)?.operations?.supportsEditing||"editingEnabled"in t&&!Sze(t)||f0e(t))}const KBe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,YBe="screenUtils.toPt: input not recognized!",Fye=96;function AMt(t){return t?t/72*Fye:0}function Q1(t){return t?72*t/Fye:0}function Ti(t){if(typeof t=="string"){const e=t.match(KBe);if(e){const n=Number(e[1]),r=e[3]&&e[3].toLowerCase(),i=t.startsWith("-"),s=r==="px"?Q1(n):n;return i?-s:s}return console.warn(YBe),null}return t}function qs(t=0,e=0){return{x:t,y:e}}function IMt(t){return t?qs(t.x,t.y):null}function PMt(t=0,e=0){return[t,e]}function CMt(t=0,e=0,n=0){return[t,e,n]}function RMt(t){return t}function MMt(t){return t}function NMt(t){return t}function OMt(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function Vye(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function XBe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ZBe(t,e,n,r,i,s,o,a,l,c,u,h,f,g,y,_){const b=new Float32Array(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=r,b[4]=i,b[5]=s,b[6]=o,b[7]=a,b[8]=l,b[9]=c,b[10]=u,b[11]=h,b[12]=f,b[13]=g,b[14]=y,b[15]=_,b}const JBe=Vye();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:JBe,clone:XBe,create:Vye,fromValues:ZBe},Symbol.toStringTag,{value:"Module"}));function zye(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function QBe(t,e,n,r,i,s,o,a,l,c,u,h,f,g,y,_,b){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=u,t[10]=h,t[11]=f,t[12]=g,t[13]=y,t[14]=_,t[15]=b,t}function mL(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function eWe(t,e){if(t===e){const n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function tWe(t,e){return Gye(t,e)||mL(t),t}function Gye(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],y=e[12],_=e[13],b=e[14],T=e[15],A=n*a-r*o,I=n*l-i*o,P=n*c-s*o,M=r*l-i*a,V=r*c-s*a,C=i*c-s*l,N=u*_-h*y,O=u*b-f*y,L=u*T-g*y,F=h*b-f*_,G=h*T-g*_,U=f*T-g*b;let he=A*U-I*G+P*F+M*L-V*O+C*N;return he?(he=1/he,t[0]=(a*U-l*G+c*F)*he,t[1]=(i*G-r*U-s*F)*he,t[2]=(_*C-b*V+T*M)*he,t[3]=(f*V-h*C-g*M)*he,t[4]=(l*L-o*U-c*O)*he,t[5]=(n*U-i*L+s*O)*he,t[6]=(b*P-y*C-T*I)*he,t[7]=(u*C-f*P+g*I)*he,t[8]=(o*G-a*L+c*N)*he,t[9]=(r*L-n*G-s*N)*he,t[10]=(y*V-_*P+T*A)*he,t[11]=(h*P-u*V-g*A)*he,t[12]=(a*O-o*F-l*N)*he,t[13]=(n*F-r*O+i*N)*he,t[14]=(_*I-y*M-b*A)*he,t[15]=(u*M-h*I+f*A)*he,t):null}function nWe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],y=e[12],_=e[13],b=e[14],T=e[15];return t[0]=a*(f*T-g*b)-h*(l*T-c*b)+_*(l*g-c*f),t[1]=-(r*(f*T-g*b)-h*(i*T-s*b)+_*(i*g-s*f)),t[2]=r*(l*T-c*b)-a*(i*T-s*b)+_*(i*c-s*l),t[3]=-(r*(l*g-c*f)-a*(i*g-s*f)+h*(i*c-s*l)),t[4]=-(o*(f*T-g*b)-u*(l*T-c*b)+y*(l*g-c*f)),t[5]=n*(f*T-g*b)-u*(i*T-s*b)+y*(i*g-s*f),t[6]=-(n*(l*T-c*b)-o*(i*T-s*b)+y*(i*c-s*l)),t[7]=n*(l*g-c*f)-o*(i*g-s*f)+u*(i*c-s*l),t[8]=o*(h*T-g*_)-u*(a*T-c*_)+y*(a*g-c*h),t[9]=-(n*(h*T-g*_)-u*(r*T-s*_)+y*(r*g-s*h)),t[10]=n*(a*T-c*_)-o*(r*T-s*_)+y*(r*c-s*a),t[11]=-(n*(a*g-c*h)-o*(r*g-s*h)+u*(r*c-s*a)),t[12]=-(o*(h*b-f*_)-u*(a*b-l*_)+y*(a*f-l*h)),t[13]=n*(h*b-f*_)-u*(r*b-i*_)+y*(r*f-i*h),t[14]=-(n*(a*b-l*_)-o*(r*b-i*_)+y*(r*l-i*a)),t[15]=n*(a*f-l*h)-o*(r*f-i*h)+u*(r*l-i*a),t}function rWe(t){const e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11],g=t[12],y=t[13],_=t[14],b=t[15];return(e*o-n*s)*(h*b-f*_)-(e*a-r*s)*(u*b-f*y)+(e*l-i*s)*(u*_-h*y)+(n*a-r*o)*(c*b-f*g)-(n*l-i*o)*(c*_-h*g)+(r*l-i*a)*(c*y-u*g)}function Uye(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],g=e[10],y=e[11],_=e[12],b=e[13],T=e[14],A=e[15];let I=n[0],P=n[1],M=n[2],V=n[3];return t[0]=I*r+P*a+M*h+V*_,t[1]=I*i+P*l+M*f+V*b,t[2]=I*s+P*c+M*g+V*T,t[3]=I*o+P*u+M*y+V*A,I=n[4],P=n[5],M=n[6],V=n[7],t[4]=I*r+P*a+M*h+V*_,t[5]=I*i+P*l+M*f+V*b,t[6]=I*s+P*c+M*g+V*T,t[7]=I*o+P*u+M*y+V*A,I=n[8],P=n[9],M=n[10],V=n[11],t[8]=I*r+P*a+M*h+V*_,t[9]=I*i+P*l+M*f+V*b,t[10]=I*s+P*c+M*g+V*T,t[11]=I*o+P*u+M*y+V*A,I=n[12],P=n[13],M=n[14],V=n[15],t[12]=I*r+P*a+M*h+V*_,t[13]=I*i+P*l+M*f+V*b,t[14]=I*s+P*c+M*g+V*T,t[15]=I*o+P*u+M*y+V*A,t}function iWe(t,e,n){const r=n[0],i=n[1],s=n[2];if(e===t)t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15];else{const o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],g=e[7],y=e[8],_=e[9],b=e[10],T=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=f,t[7]=g,t[8]=y,t[9]=_,t[10]=b,t[11]=T,t[12]=o*r+u*i+y*s+e[12],t[13]=a*r+h*i+_*s+e[13],t[14]=l*r+f*i+b*s+e[14],t[15]=c*r+g*i+T*s+e[15]}return t}function sWe(t,e,n){const r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function oWe(t,e,n,r){let i=r[0],s=r[1],o=r[2],a=Math.sqrt(i*i+s*s+o*o);if(a<=Al())return void zye(t,e);a=1/a,i*=a,s*=a,o*=a;const l=Math.sin(n),c=Math.cos(n),u=1-c,h=e[0],f=e[1],g=e[2],y=e[3],_=e[4],b=e[5],T=e[6],A=e[7],I=e[8],P=e[9],M=e[10],V=e[11],C=i*i*u+c,N=s*i*u+o*l,O=o*i*u-s*l,L=i*s*u-o*l,F=s*s*u+c,G=o*s*u+i*l,U=i*o*u+s*l,he=s*o*u-i*l,Ie=o*o*u+c;t[0]=h*C+_*N+I*O,t[1]=f*C+b*N+P*O,t[2]=g*C+T*N+M*O,t[3]=y*C+A*N+V*O,t[4]=h*L+_*F+I*G,t[5]=f*L+b*F+P*G,t[6]=g*L+T*F+M*G,t[7]=y*L+A*F+V*G,t[8]=h*U+_*he+I*Ie,t[9]=f*U+b*he+P*Ie,t[10]=g*U+T*he+M*Ie,t[11]=y*U+A*he+V*Ie,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function aWe(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+u*r,t[6]=a*i+h*r,t[7]=l*i+f*r,t[8]=c*i-s*r,t[9]=u*i-o*r,t[10]=h*i-a*r,t[11]=f*i-l*r,t}function lWe(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-u*r,t[2]=a*i-h*r,t[3]=l*i-f*r,t[8]=s*r+c*i,t[9]=o*r+u*i,t[10]=a*r+h*i,t[11]=l*r+f*i,t}function cWe(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+u*r,t[2]=a*i+h*r,t[3]=l*i+f*r,t[4]=c*i-s*r,t[5]=u*i-o*r,t[6]=h*i-a*r,t[7]=f*i-l*r,t}function uWe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function hWe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function dWe(t,e,n){if(e===0)return mL(t);let r=n[0],i=n[1],s=n[2],o=Math.sqrt(r*r+i*i+s*s);if(o<=Al())return null;o=1/o,r*=o,i*=o,s*=o;const a=Math.sin(e),l=Math.cos(e),c=1-l;return t[0]=r*r*c+l,t[1]=i*r*c+s*a,t[2]=s*r*c-i*a,t[3]=0,t[4]=r*i*c-s*a,t[5]=i*i*c+l,t[6]=s*i*c+r*a,t[7]=0,t[8]=r*s*c+i*a,t[9]=i*s*c-r*a,t[10]=s*s*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fWe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pWe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function mWe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Bye(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=r+r,l=i+i,c=s+s,u=r*a,h=r*l,f=r*c,g=i*l,y=i*c,_=s*c,b=o*a,T=o*l,A=o*c;return t[0]=1-(g+_),t[1]=h+A,t[2]=f-T,t[3]=0,t[4]=h-A,t[5]=1-(u+_),t[6]=y+b,t[7]=0,t[8]=f+T,t[9]=y-b,t[10]=1-(u+g),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function gWe(t,e){const n=yWe,r=-e[0],i=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=r*r+i*i+s*s+o*o;return h>0?(n[0]=2*(a*o+u*r+l*s-c*i)/h,n[1]=2*(l*o+u*i+c*r-a*s)/h,n[2]=2*(c*o+u*s+a*i-l*r)/h):(n[0]=2*(a*o+u*r+l*s-c*i),n[1]=2*(l*o+u*i+c*r-a*s),n[2]=2*(c*o+u*s+a*i-l*r)),Bye(t,e,n),t}const yWe=g0();function vWe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function _We(t,e){const n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(l*l+c*c+u*u),t}function xWe(t,e){const n=e[0]+e[5]+e[10];let r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function wWe(t,e,n,r){const i=e[0],s=e[1],o=e[2],a=e[3],l=i+i,c=s+s,u=o+o,h=i*l,f=i*c,g=i*u,y=s*c,_=s*u,b=o*u,T=a*l,A=a*c,I=a*u,P=r[0],M=r[1],V=r[2];return t[0]=(1-(y+b))*P,t[1]=(f+I)*P,t[2]=(g-A)*P,t[3]=0,t[4]=(f-I)*M,t[5]=(1-(h+b))*M,t[6]=(_+T)*M,t[7]=0,t[8]=(g+A)*V,t[9]=(_-T)*V,t[10]=(1-(h+y))*V,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function bWe(t,e,n,r,i){const s=e[0],o=e[1],a=e[2],l=e[3],c=s+s,u=o+o,h=a+a,f=s*c,g=s*u,y=s*h,_=o*u,b=o*h,T=a*h,A=l*c,I=l*u,P=l*h,M=r[0],V=r[1],C=r[2],N=i[0],O=i[1],L=i[2],F=(1-(_+T))*M,G=(g+P)*M,U=(y-I)*M,he=(g-P)*V,Ie=(1-(f+T))*V,ze=(b+A)*V,Oe=(y+I)*C,fe=(b-A)*C,ge=(1-(f+_))*C;return t[0]=F,t[1]=G,t[2]=U,t[3]=0,t[4]=he,t[5]=Ie,t[6]=ze,t[7]=0,t[8]=Oe,t[9]=fe,t[10]=ge,t[11]=0,t[12]=n[0]+N-(F*N+he*O+Oe*L),t[13]=n[1]+O-(G*N+Ie*O+fe*L),t[14]=n[2]+L-(U*N+ze*O+ge*L),t[15]=1,t}function EWe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,h=r*a,f=i*o,g=i*a,y=i*l,_=s*o,b=s*a,T=s*l;return t[0]=1-h-y,t[1]=u+T,t[2]=f-b,t[3]=0,t[4]=u-T,t[5]=1-c-y,t[6]=g+_,t[7]=0,t[8]=f+b,t[9]=g-_,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function SWe(t,e,n,r,i,s,o){const a=1/(n-e),l=1/(i-r),c=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function TWe(t,e,n,r,i){const s=1/Math.tan(e/2);let o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function kWe(t,e,n,r){const i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(i+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(i-s)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function AWe(t,e,n,r,i,s,o){const a=1/(e-n),l=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*c,t[15]=1,t}function IWe(t,e,n,r){const i=e[0],s=e[1],o=e[2];let a=i-n[0],l=s-n[1],c=o-n[2];const u=Al();if(Math.abs(a)<u&&Math.abs(l)<u&&Math.abs(c)<u)return void mL(t);let h=1/Math.sqrt(a*a+l*l+c*c);a*=h,l*=h,c*=h;const f=r[0],g=r[1],y=r[2];let _=g*c-y*l,b=y*a-f*c,T=f*l-g*a;h=Math.sqrt(_*_+b*b+T*T),h?(h=1/h,_*=h,b*=h,T*=h):(_=0,b=0,T=0);let A=l*T-c*b,I=c*_-a*T,P=a*b-l*_;h=Math.sqrt(A*A+I*I+P*P),h?(h=1/h,A*=h,I*=h,P*=h):(A=0,I=0,P=0),t[0]=_,t[1]=A,t[2]=a,t[3]=0,t[4]=b,t[5]=I,t[6]=l,t[7]=0,t[8]=T,t[9]=P,t[10]=c,t[11]=0,t[12]=-(_*i+b*s+T*o),t[13]=-(A*i+I*s+P*o),t[14]=-(a*i+l*s+c*o),t[15]=1}function PWe(t,e,n,r){const i=e[0],s=e[1],o=e[2],a=r[0],l=r[1],c=r[2];let u=i-n[0],h=s-n[1],f=o-n[2],g=u*u+h*h+f*f;g>0&&(g=1/Math.sqrt(g),u*=g,h*=g,f*=g);let y=l*f-c*h,_=c*u-a*f,b=a*h-l*u;return g=y*y+_*_+b*b,g>0&&(g=1/Math.sqrt(g),y*=g,_*=g,b*=g),t[0]=y,t[1]=_,t[2]=b,t[3]=0,t[4]=h*b-f*_,t[5]=f*y-u*b,t[6]=u*_-h*y,t[7]=0,t[8]=u,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=s,t[14]=o,t[15]=1,t}function CWe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function RWe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function MWe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Wye(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function NWe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function OWe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function LWe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function DWe(t,e){if(t===e)return!0;const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],g=t[11],y=t[12],_=t[13],b=t[14],T=t[15],A=e[0],I=e[1],P=e[2],M=e[3],V=e[4],C=e[5],N=e[6],O=e[7],L=e[8],F=e[9],G=e[10],U=e[11],he=e[12],Ie=e[13],ze=e[14],Oe=e[15],fe=Al();return Math.abs(n-A)<=fe*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(r-I)<=fe*Math.max(1,Math.abs(r),Math.abs(I))&&Math.abs(i-P)<=fe*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(s-M)<=fe*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-V)<=fe*Math.max(1,Math.abs(o),Math.abs(V))&&Math.abs(a-C)<=fe*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(l-N)<=fe*Math.max(1,Math.abs(l),Math.abs(N))&&Math.abs(c-O)<=fe*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(u-L)<=fe*Math.max(1,Math.abs(u),Math.abs(L))&&Math.abs(h-F)<=fe*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(f-G)<=fe*Math.max(1,Math.abs(f),Math.abs(G))&&Math.abs(g-U)<=fe*Math.max(1,Math.abs(g),Math.abs(U))&&Math.abs(y-he)<=fe*Math.max(1,Math.abs(y),Math.abs(he))&&Math.abs(_-Ie)<=fe*Math.max(1,Math.abs(_),Math.abs(Ie))&&Math.abs(b-ze)<=fe*Math.max(1,Math.abs(b),Math.abs(ze))&&Math.abs(T-Oe)<=fe*Math.max(1,Math.abs(T),Math.abs(Oe))}function jWe(t){const e=Al(),n=t[0],r=t[1],i=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],u=t[10];return Math.abs(1-(n*n+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(i*i+a*a+u*u))<=e}function $We(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const FWe=Uye,VWe=Wye;Object.freeze(Object.defineProperty({__proto__:null,add:MWe,adjoint:nWe,copy:zye,determinant:rWe,equals:DWe,exactEquals:LWe,frob:RWe,fromQuat:EWe,fromQuat2:gWe,fromRotation:dWe,fromRotationTranslation:Bye,fromRotationTranslationScale:wWe,fromRotationTranslationScaleOrigin:bWe,fromScaling:hWe,fromTranslation:uWe,fromXRotation:fWe,fromYRotation:pWe,fromZRotation:mWe,frustum:SWe,getRotation:xWe,getScale:_We,getTranslation:vWe,hasIdentityRotation:$We,identity:mL,invert:Gye,invertOrIdentity:tWe,isOrthoNormal:jWe,lookAt:IWe,mul:FWe,multiply:Uye,multiplyScalar:NWe,multiplyScalarAndAdd:OWe,ortho:AWe,perspective:TWe,perspectiveFromFieldOfView:kWe,rotate:oWe,rotateX:aWe,rotateY:lWe,rotateZ:cWe,scale:sWe,set:QBe,str:CWe,sub:VWe,subtract:Wye,targetTo:PWe,translate:iWe,transpose:eWe},Symbol.toStringTag,{value:"Module"}));const f$=()=>kt.getLogger("esri.support.basemapUtils");function zWe(){return{}}function GWe(t){for(const e in t){const n=t[e];n&&!n.destroyed&&n.destroy(),delete t[e]}}function UWe(t,e){let n;if(typeof t=="string"){const r=t in G9,i=!r&&t.includes("/");if(!r&&!i){if(y9())f$().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(G9).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");f$().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`)}return null}e&&(n=e[t]),n||(n=r?CT.fromId(t):new CT({style:{id:t}}),e&&(e[t]=n))}else n=qa(CT,t);return n?.destroyed&&(f$().warn("The provided basemap is already destroyed",{basemap:n}),n=null),n}function BWe(t){return new th({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const n=[];return"tables"in e&&n.push(e.tables),"layers"in e&&n.push(e.layers),n},itemFilterFunction:e=>{const n=e.parent;return!!n&&"tables"in n&&n.tables.includes(e)}})}function sR(t){for(const e of t.values())e?.destroy();t.clear()}const wne={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function WWe(t){let e=null;if(typeof t=="string")if(t in wne){const n=wne[t];e=new wN({resourceInfo:{data:{layers:[n]}}})}else kt.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=qa(wN,t);return e}function x7(t,e,n){let r,i;if(t)for(let s=0,o=t.length;s<o;s++){if(r=t.at(s),r?.[e]===n)return r;if(r?.type==="group"&&(i=x7(r.layers,e,n),i))return i}}const HWe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.layers=new Ot;const i=a=>{a.parent&&a.removeFromParent()},s=a=>{a.parent=this,this.layerAdded(a),a.type!=="elevation"&&a.type!=="base-elevation"||kt.getLogger(this).error(`Layer 'title:${a.title}, id:${a.id}' of type '${a.type}' is not supported as an operational layer and will therefore be ignored.`)},o=a=>{a.parent=null,this.layerRemoved(a)};this.addHandles([this.layers.on("before-add",a=>{if(a.item===this)return a.preventDefault(),void kt.getLogger(this).error("#add()","Cannot add layer to itself.");i(a.item)}),this.layers.on("after-add",a=>s(a.item)),this.layers.on("after-remove",a=>o(a.item))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}removeChildLayer(r){this.layers.remove(r),super.removeChildLayer?.(r)}set layers(r){this._set("layers",Id(r,this._get("layers")))}add(r,i){const s=this.layers;if(i=s.getNextIndex(i),r instanceof wi){const o=r;o.parent===this?this.reorder(o,i):s.add(o,i)}else va(r)?r.then(o=>{this.destroyed||this.add(o,i)}):kt.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const s=this.layers;let o=s.getNextIndex(i);r.slice().forEach(a=>{a.parent!==this?(s.add(a,o),o+=1):this.reorder(a,o)})}findLayerById(r){return x7(this.layers,"id",r)}findLayerByUid(r){return x7(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return x([E()],n.prototype,"layers",null),n=x([ue("esri.support.LayersMixin")],n),n},qWe=new Set(["feature","subtype-group"]);function w7(t,e,n){if(t)for(let r=0,i=t.length;r<i;r++){const s=t.at(r);if(s[e]===n)return s;if(s?.type==="group"){const o=w7(s.tables,e,n);if(o)return o}}}const KWe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.tables=new Ot,this.addHandles([this.tables.on("after-add",i=>{const s=i.item;s.parent&&s.parent!==this&&s.removeFromParent(),s.parent=this,qWe.has(s.type)||kt.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}removeChildLayer(r){this.tables.remove(r),super.removeChildLayer?.(r)}set tables(r){this._set("tables",Id(r,this._get("tables")))}findTableById(r){return w7(this.tables,"id",r)}findTableByUid(r){return w7(this.tables,"uid",r)}};return x([E()],n.prototype,"tables",null),n=x([ue("esri.support.TablesMixin")],n),n};let Uc=class extends KWe(HWe(RI)){constructor(e){super(e),this.allLayers=new th({getCollections:()=>[this.basemap?.baseLayers,this.basemap?.groundLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:n=>"layers"in n?n.layers:null}),this.focusAreas=new $ye,this.allTables=BWe(this),this.basemap=null,this.editableLayers=new th({getCollections:()=>[this.allLayers],itemFilterFunction:qBe}),this.ground=new wN,this._basemapCache=zWe(),this.addHandles(Ec(()=>this.ground,(n,r)=>{r?.parent===this&&(r.parent=null),n.parent=this},{sync:!0}))}destroy(){GWe(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Di(this.basemap),Di(this.ground),this._set("ground",null)}castBasemap(e){return UWe(e,this._basemapCache)}castGround(e){return WWe(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(n=>n.id===e)}findTableById(e){return this.allTables.find(n=>n.id===e)}};x([E({readOnly:!0,dependsOn:[]})],Uc.prototype,"allLayers",void 0),x([E({type:$ye,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],Uc.prototype,"focusAreas",void 0),x([E({readOnly:!0})],Uc.prototype,"allTables",void 0),x([E({type:CT,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Uc.prototype,"basemap",void 0),x([Ks("basemap")],Uc.prototype,"castBasemap",null),x([E({readOnly:!0})],Uc.prototype,"editableLayers",void 0),x([E({type:wN,nonNullable:!0})],Uc.prototype,"ground",void 0),x([Ks("ground")],Uc.prototype,"castGround",null),x([E()],Uc.prototype,"undoRedo",void 0),Uc=x([ue("esri.Map")],Uc);const Hye=Uc;let uy=class extends IW{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};x([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],uy.prototype,"row",void 0),x([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],uy.prototype,"column",void 0),x([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],uy.prototype,"rows",void 0),x([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],uy.prototype,"columns",void 0),uy=x([ue("esri.CameraLayout")],uy);const qye=uy;let gL=class{constructor(e,n){this.min=e,this.max=n,this.range=n-e}normalize(e,n=0,r=!1){return bne(this.range,this.min,this.max,e,n,r)}clamp(e,n=0){return vu(e-n,this.min,this.max)+n}monotonic(e,n,r){return e<n?n:n+b7(this.range,e-n,r)}minimalMonotonic(e,n,r){return bne(this.range,e,e+this.range,n,r)}center(e,n,r){return n=this.monotonic(e,n,r),this.normalize((e+n)/2,r)}diff(e,n,r){return this.monotonic(e,n,r)-e}shortestSignedDiff(e,n){e=this.normalize(e);const r=(n=this.normalize(n))-e,i=n<e?this.minimalMonotonic(e,n)-e:n-this.minimalMonotonic(n,e);return Math.abs(r)<Math.abs(i)?r:i}contains(e,n,r){return n=this.minimalMonotonic(e,n),(r=this.minimalMonotonic(e,r))>e&&r<n}};function bne(t,e,n,r,i=0,s=!1){return(r-=i)<e?r+=b7(t,e-r):r>n&&(r-=b7(t,r-n)),s&&r===n&&(r=e),r+i}function b7(t,e,n=0){return Math.ceil((e-n)/t)*t+n}const $Mt=new gL(0,2*Math.PI),FMt=new gL(-Math.PI,Math.PI),YWe=new gL(0,360);let Jh=class extends _o(qt){constructor(...e){super(...e),this.position=new Qt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new qye}normalizeCtorArgs(e,n,r,i){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return n!=null&&(s.heading=n),r!=null&&(s.tilt=r),i!=null&&(s.fov=i),s}return e}writePosition(e,n,r,i){const s=e.clone();s.x=ac(e.x||0),s.y=ac(e.y||0),s.z=e.hasZ?ac(e.z||0):e.z,n[r]=s.write({},i)}readPosition(e,n){const r=new Qt;return r.read(e,n),r.x=ac(r.x||0),r.y=ac(r.y||0),r.z=r.hasZ?ac(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};x([E({type:Qt,json:{write:{isRequired:!0}}})],Jh.prototype,"position",void 0),x([er("position")],Jh.prototype,"writePosition",null),x([cr("position")],Jh.prototype,"readPosition",null),x([E({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ks(t=>YWe.normalize(ac(t)))],Jh.prototype,"heading",void 0),x([E({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ks(t=>vu(ac(t),-180,180))],Jh.prototype,"tilt",void 0),x([E({type:Number,nonNullable:!0,json:{default:55,write:!0}}),Ks(t=>vu(ac(t,55),1,170))],Jh.prototype,"fov",void 0),x([E({type:qye,nonNullable:!0,json:{read:!1,write:!1}})],Jh.prototype,"layout",void 0),Jh=x([ue("esri.Camera")],Jh);const XWe=Jh;function Kye(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Yye(t){return t.points!==void 0}function Xye(t){return t.x!==void 0&&t.y!==void 0}function Zye(t){return t.paths!==void 0||t.curvePaths!==void 0}function WW(t){return t.rings!==void 0||t.curveRings!==void 0}function G2(t){return t==null?null:t instanceof Us?t:Xye(t)?Qt.fromJSON(t):Zye(t)?As.fromJSON(t):WW(t)?bi.fromJSON(t):Yye(t)?Ju.fromJSON(t):Kye(t)?Vn.fromJSON(t):null}function HW(t){return t?Xye(t)?"esriGeometryPoint":Zye(t)?"esriGeometryPolyline":WW(t)?"esriGeometryPolygon":Kye(t)?"esriGeometryEnvelope":Yye(t)?"esriGeometryMultipoint":null:null}const ZWe={esriGeometryPoint:Qt,esriGeometryPolyline:As,esriGeometryPolygon:bi,esriGeometryEnvelope:Vn,esriGeometryMultipoint:Ju,esriGeometryMultiPatch:bi};function JWe(t){return t&&ZWe[t]||null}const QWe=Dl()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),zMt=Dl()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),qW={base:Us,key:"type",typeMap:{extent:Vn,multipoint:Ju,point:Qt,polyline:As,polygon:bi}};function GMt(t){return t.type==="point"}function UMt(t){return t.type==="multipoint"}function BMt(t){return t.type==="polygon"}function WMt(t){return t.type==="polyline"}var E7;let Cm=E7=class extends qt{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new E7({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};x([E({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:p$}}}}})],Cm.prototype,"rotation",void 0),x([Ks("rotation")],Cm.prototype,"castRotation",null),x([E({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:p$}}}}})],Cm.prototype,"scale",void 0),x([E({types:qW,json:{read:G2,write:!0,origins:{"web-scene":{read:G2,write:{overridePolicy:p$}}}}})],Cm.prototype,"targetGeometry",void 0),x([E({type:XWe,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Cm.prototype,"camera",void 0),Cm=E7=x([ue("esri.Viewpoint")],Cm);const fu=Cm;function p$(){return{enabled:!this.camera}}let fA=class{constructor(e=n=>n.values().next().value){this._peeker=e,this._observable=new MI,this._items=new Set}get length(){return sn(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return sn(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const n=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),n!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){sn(this._observable),yield*this._items}};const Jye=new FinalizationRegistry(t=>{t.close()});function eHe(t,e){Jye.register(t,e,e)}function tHe(t){Jye.unregister(t)}function Qye(t,e){return new Proxy({},{get:(n,r,i)=>(...s)=>{let o,a;const l=s[s.length-1];return nHe(l)&&(o=l.signal,a=l.transferList,s.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),s,{transferList:a,signal:o})}})}function nHe(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const rHe={statsWorker:()=>ve(()=>import("./statsWorker-CpGdLfRT.js"),__vite__mapDeps([51,52,53,54,55,56,57,58,59])),geometryEngineWorker:()=>ve(()=>import("./geometryEngineWorker-BkMQzpX8.js"),__vite__mapDeps([60,61,62,63])),arcadeGeometryOperatorsWorker:()=>ve(()=>import("./operatorsWorker-Dw0BbDS7.js"),[]),CSVSourceWorker:()=>ve(()=>import("./CSVSourceWorker-Bpz16hAk.js"),__vite__mapDeps([64,65,66,28,67,68,69,70,71,72,73,74,75,76,26,27,77,78,79,80,81,53,52,54,55,56,57,58,59,82,83,84,85,86,87,88,89])),EdgeProcessingWorker:()=>ve(()=>import("./EdgeProcessingWorker-BooTWrA2.js"),__vite__mapDeps([90,91,92,93,55,56,94,95,96,97,98,99,100])),ElevationSamplerWorker:()=>ve(()=>import("./ElevationSamplerWorker-DWv0iQP3.js"),__vite__mapDeps([101,71,102,103,104,105,106,107,108,93,55,56,109])),FeatureServiceSnappingSourceWorker:()=>ve(()=>import("./FeatureServiceSnappingSourceWorker-C4DfneCK.js"),__vite__mapDeps([110,67,68,66,28,69,70,71,72,73,74,75,76,26,27,77,78,79,80,81,53,52,54,55,56,57,58,59,82,83,84,85,32,33,111,112,113,114,115])),GaussianSplatSortWorker:()=>ve(()=>import("./GaussianSplatSortWorker-CkystscD.js"),[]),GeoJSONSourceWorker:()=>ve(()=>import("./GeoJSONSourceWorker-ODfdPbVp.js"),__vite__mapDeps([116,68,66,28,69,67,70,71,72,73,74,75,76,26,27,77,78,79,80,81,53,52,54,55,56,57,58,59,82,83,84,85,117,65,88,89,118])),LercWorker:()=>ve(()=>import("./LercWorker-uyCaxrlF.js"),[]),MemorySourceWorker:()=>ve(()=>import("./MemorySourceWorker-CzwyGOmb.js"),__vite__mapDeps([119,68,66,28,69,120,67,70,71,72,73,74,75,76,26,27,77,78,79,80,81,53,52,54,55,56,57,58,59,82,83,84,85,88,89,118,65])),PBFDecoderWorker:()=>ve(()=>import("./PBFDecoderWorker-CrmGPSMW.js"),__vite__mapDeps([121,122,28,68,66,69,112,113])),FeaturePipelineWorker:()=>ve(()=>import("./FeaturePipelineWorker-CRYBl2z7.js"),__vite__mapDeps([123,124,125,126,127,95,128,129,78,79,80,85,130,66,28,68,69,131,53,132,133,134,135,73,72,136,137,138,139,140,141,142,143,144,89,145,146,147,148,74,75,76,26,27,77,81,52,54,55,56,57,58,59,82,83,84,149,150,151,152,49,153,154,155,156,157,117,65,88,118,114,112,113,115,158,159])),PointCloudWorker:()=>ve(()=>import("./PointCloudWorker-C50JGtLT.js"),__vite__mapDeps([160,161,162,55,163,164,165,166,167,168,56,104,105,169,170])),RasterWorker:()=>ve(()=>import("./RasterWorker-BseTJh_7.js"),__vite__mapDeps([171,172,173,63,174,175,55,56,176,177,178,179,180,181])),SceneLayerSnappingSourceWorker:()=>ve(()=>import("./SceneLayerSnappingSourceWorker-ByztIysS.js"),__vite__mapDeps([182,183,184,56,170,162,185,186,55,169,93,97,98,99,92,94,95,96,100])),SceneLayerWorker:()=>ve(()=>import("./SceneLayerWorker-9ZxZnq7s.js"),__vite__mapDeps([187,102,108,188,106])),WFSSourceWorker:()=>ve(()=>import("./WFSSourceWorker-U6dKiiYl.js"),__vite__mapDeps([189,68,66,28,69,67,70,71,72,73,74,75,76,26,27,77,78,79,80,81,53,52,54,55,56,57,58,59,82,83,84,85,117,65,118,190,191])),WorkerTileHandler:()=>ve(()=>import("./WorkerTileHandler-DtfCERFG.js"),__vite__mapDeps([192,142,193,143,194,113,28,146,195,196,96,95,175,55,56,197,141])),Lyr3DWorker:()=>ve(()=>import("./Lyr3DWorker-CKY5-vuv.js"),[]),Feature3DPipelineWorker:()=>ve(()=>import("./Feature3DPipelineWorker-C2xAQ_Ko.js"),__vite__mapDeps([198,75,68,66,28,69,76,26,27,77,78,79,80,72,73,81,53,52,54,55,56,57,58,59,82,83,84,85,199,200,201,202,179,166,203,33,204,205,144,89,165,137,129,133,134,206,207,124,208,209,107,102,188,106,210,163,211,99,93,212,184,170,162,183,213,214,186,169,168,161,104,105,96,95,92,94,215,216,217,218,219,220,221,222,223,224,71,114,112,113,115,225])),TextureCompressionWorker:()=>ve(()=>import("./TextureCompressionWorker-BPOWCnuE.js"),[]),FlowWorker:()=>ve(()=>import("./FlowWorker-DucK-DRn.js"),__vite__mapDeps([226,181])),ParquetSourceWorker:()=>ve(()=>import("./ParquetSourceWorker-DTdYFCUk.js"),__vite__mapDeps([227,148,75,68,66,28,69,76,26,27,77,78,79,80,72,73,81,53,52,54,55,56,57,58,59,82,83,84,85,88,89,228,87,151,130,131,150,149])),PanoramicMeshWorker:()=>ve(()=>import("./PanoramicMeshWorker--EWKRx7C.js"),__vite__mapDeps([229,172]))},e1e="worker:port-closed",dp={HANDSHAKE:0,OPEN:1,OPENED:2,RESPONSE:3,INVOKE:4,ABORT:5,CLOSE:6,OPEN_PORT:7,ON:8};let iHe=0;function t1e(){return iHe++}function sHe(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function SN(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function n1e(t,e,n,r){if(e.type===dp.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==dp.INVOKE&&e.type!==dp.RESPONSE)return void t.postMessage(e);let i;sHe(n)?(i=Ene(n.transferList),e.data=n.result):(i=Ene(r),e.data=n),i?t.postMessage(e,i):t.postMessage(e)}function pA(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function Ene(t){if(!t?.length)return null;if(_e("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(n=>!oHe(n));return e.length?e:null}function oHe(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"}async function qMt(t){try{return await t}catch(e){const n=e?.name===e1e;if(!(Ea(e)||n))throw e;return}}const{CLOSE:oR,ABORT:S7,INVOKE:Sne,RESPONSE:YE,OPEN_PORT:Tne,ON:kne}=dp,aHe=2;let lHe=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===S7?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var eu;let U2=(eu=class{static connect(e,n){const r=new MessageChannel;let i;i=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const s=new eu(r.port1,{channel:r,client:i,schedule:n});return typeof i=="object"&&"remoteClient"in i&&(i.remoteClient=s),eu.clients.set(s,i),r.port2}static loadWorker(e){const n=rHe[e];return n?n():Promise.resolve(null)}constructor(e,n,r,i){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new lHe(s=>this._onInvokeMessage(s)),this._client=n.client,this._onMessage=this._onMessage.bind(this),this._channel=n.channel,this._schedule=n.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:oR}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,n,r){return this.apply(e,[n],r)}apply(e,n,r){const i=r?.signal,s=r?.transferList;if(!this._port)return Promise.reject(new Xe(e1e,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:n}));const o=t1e();return new Promise((a,l)=>{if(ya(i))return this._processWork(),void l(Cr());const c=yu(i,()=>{const h=this._outJobs.get(o);h&&(this._outJobs.delete(o),this._processWork(),ii(h.abortHandle),this._post({type:S7,jobId:o}),l(Cr()))}),u={resolve:a,reject:l,abortHandle:c,debugInfo:e};this._outJobs.set(o,u),this._post({type:Sne,jobId:o,methodName:e,abortable:i!=null},n,s)})}createInvokeProxy(e){return Qye(this,e)}on(e,n){const r=new MessageChannel;function i(s){n(s.data)}return this._port.postMessage({type:kne,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",i),r.port1.start(),Zn(()=>{r.port1.postMessage({type:oR}),r.port1.close(),r.port1.removeEventListener("message",i)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:Tne,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=aHe)return;const e=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!e)return;const{methodName:n,data:r,invokeOptions:i,resolver:s}=e;this.apply(n,r,i).then(o=>s.resolve(o)).catch(o=>s.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{ii(e.abortHandle),e.reject(Cr(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,n){const r=pA(e);if(r)switch(r.type){case YE:this._onResponseMessage(r);break;case Sne:n?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case S7:this._onAbortMessage(r);break;case oR:this._onCloseMessage();break;case Tne:this._onOpenPortMessage(r);break;case kne:this._onOnMessage(r)}}_onAbortMessage(e){const n=this._inJobs,r=e.jobId,i=n.get(r);this._invokeQueue.push(e),i&&(i.controller&&i.controller.abort(),n.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&eu.clients.get(this)===e&&e.destroy(),eu.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:n,jobId:r,data:i=[],abortable:s}=e,o=s?new AbortController:null,a=this._inJobs;let l,c=this._client,u=c[n];try{if(!u&&n&&n.includes(".")){const h=n.split(".");for(let f=0;f<h.length-1;f++)c=c[h[f]],u=c[h[f+1]]}if(typeof u!="function")throw new TypeError(`${n} is not a function`);i.push({client:this,signal:o?o.signal:null}),l=u.apply(c,i)}catch(h){return void this._post({type:YE,jobId:r,error:SN(h)})}va(l)?(a.set(r,{controller:o,promise:l}),l.then(h=>{a.has(r)&&(a.delete(r),this._post({type:YE,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),Ea(h)||this._post({type:YE,jobId:r,error:SN(h||{message:`Error encountered at method ${n}`})}))})):this._post({type:YE,jobId:r},l)}_onOpenPortMessage(e){new eu(e.port,{client:this._client})}_onOnMessage(e){const{port:n}=e,r=this._client.on(e.eventType,s=>{n.postMessage(s)}),i=xb(e.port,"message",s=>{pA(s)?.type===oR&&(i.remove(),r.remove(),n.close())})}_onResponseMessage(e){const{jobId:n,error:r,data:i}=e,s=this._outJobs;if(!s.has(n))return;const o=s.get(n);s.delete(n),this._processWork(),ii(o.abortHandle),r?o.reject(Xe.fromJSON(JSON.parse(r))):o.resolve(i)}_post(e,n,r){return n1e(this._port,e,n,r)}},eu.kernelInfo={buildDate:ape,fullVersion:DB,revision:lpe},eu.clients=new Map,eu),cHe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new fA,this._ongoingLowPriorityJobsQueue=new fA}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,n){return new Promise((r,i)=>{let s=!0;const o=a=>{gi(n.signal),s&&(s=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];va(l)?this._clientPromises[a]=l.then(c=>(this._clients[a]=new U2(c,n,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(r),this._clients[a]),()=>(o(i),null)):(this._clients[a]=new U2(l,n,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(e,n,r){const i=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];i[s]=o.then(a=>a?.invoke(e,n,r))}return i}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Cr(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(Cr(`Worker closing, aborting job calling '${e.methodName}'`));for(const n of this._clientPromises)n.then(r=>r?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,tHe(this)}invoke(e,n,r){return this.apply(e,[n],r)}apply(e,n,r){const i=bc();(r?.priority==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:n,invokeOptions:r,resolver:i});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then(a=>a?.jobAdded())}return i.promise}createInvokeProxy(e){return Qye(this,e)}on(e,n){return Promise.all(this._clientPromises).then(()=>xv(this._clients.map(r=>r.on(e,n))))}openPorts(){return new Promise(e=>{const n=new Array(this._clientPromises.length);let r=n.length;for(let i=0;i<this._clientPromises.length;++i)this._clientPromises[i].then(s=>{s&&(n[i]=s.openPort()),--r===0&&e(n)})})}get test(){}};const uHe={async request(t,e){const n=t.options,r=n.responseType;n.signal=e?.signal,n.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&h9(t.url)?.after?r:"array-buffer";const i=await ns(t.url,n),s={data:i.data,httpStatus:i.httpStatus,ssl:i.ssl};switch(i.requestOptions?.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}},Ane={};function hHe(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages?.slice()||[],paths:{...Ane.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=Ane.baseUrl),e}let dHe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(n=>{this[n]=(...r)=>e[n](...r)})}},JM=class{constructor(){this._dispatcher=new dHe,this._workerPostMessage({type:dp.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){nN(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,n,r){this._dispatcher.addEventListener(e,n,r)}removeEventListener(e,n,r){this._dispatcher.removeEventListener(e,n,r)}_workerPostMessage(e){nN(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const n=pA(e);if(n&&n.type===dp.OPEN){const{modulePath:r,jobId:i}=n;let s=await U2.loadWorker(r);s||(s=await import(r));const o=U2.connect(s);this._workerPostMessage({type:dp.OPENED,jobId:i,data:o})}}};const T7=()=>kt.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:fHe}=dp,pHe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}).finally(()=>{t&&t.removeEventListener("abort",s)})}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://esriurl.com/using-local-assets.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||new Promise(e=>{require([o.modulePath],e)})).then(t)}):"System"in self&&"function"==typeof System.import?System.import(workerPath).then(e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath))).then(e=>e||System.import(o.modulePath)).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||import(o.modulePath)).then(t)}):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let aR,lR;const Ine="Failed to create Worker. Fallback to execute module in main thread";async function mHe(){if(!_e("esri-workers"))return Pne(new JM);if(!aR&&!lR)try{const e=pHe.split("{CONFIGURATION}").join(gHe());aR=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){lR=e||{}}let t;if(aR)try{t=new Worker(aR,{name:"esri-worker-"+yHe++})}catch{T7().warn(Ine,lR),t=new JM}else T7().warn(Ine,lR),t=new JM;return Pne(t)}async function Pne(t){return new Promise(e=>{function n(i){const s=pA(i);s&&s.type===fHe&&(t.removeEventListener("message",n),t.removeEventListener("error",r),e(t))}function r(i){i.preventDefault(),t.removeEventListener("message",n),t.removeEventListener("error",r),T7().warn("Failed to create Worker. Fallback to execute module in main thread",i),(t=new JM).addEventListener("message",n),t.addEventListener("error",r)}t.addEventListener("message",n),t.addEventListener("error",r)})}function gHe(){let t;if(nr.default!=null){const i={...nr};delete i.default,t=JSON.parse(JSON.stringify(i))}else t=JSON.parse(JSON.stringify(nr));t.assetsPath=ru(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?ru(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=du(),t.has={"esri-csp-restrictions":_e("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":_e("esri-2d-update-debug"),"esri-2d-log-updating":_e("esri-2d-log-updating"),"featurelayer-pbf":_e("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":_e("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":_e("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":_e("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":_e("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":_e("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":_e("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":_e("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":_e("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":_e("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":_e("featurelayer-snapshot-enabled"),"parquetlayer-full-query-feature-count":_e("parquetlayer-full-query-feature-count"),"esri-atomics":_e("esri-atomics"),"esri-shared-array-buffer":_e("esri-shared-array-buffer"),"esri-tiles-debug":_e("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":_e("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":_e("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=ru(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=ru(t.workers.workerPath):t.workers.workerPath=ru(Hi("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=nr.workers.loaderConfig,n=hHe({baseUrl:e?.baseUrl,locale:du(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e?.has},map:{...e?.map},paths:{...e?.paths},packages:e?.packages||[]});return JSON.stringify({esriConfig:t,loaderConfig:n,kernelInfo:{buildDate:ape,fullVersion:DB,revision:lpe}})}let yHe=0;const{ABORT:Cne,INVOKE:vHe,OPEN:_He,OPENED:xHe,RESPONSE:XE}=dp;let wHe=class r1e{static async create(e){const n=await mHe();return new r1e(n,e)}constructor(e,n){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=n,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),kt.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,n={}){const{signal:r}=n,i=t1e();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:jB(r,()=>{this._outJobs.delete(i),this._post({type:Cne,jobId:i})})};this._outJobs.set(i,a),this._post({type:_He,jobId:i,modulePath:e})})}_onMessage(e){const n=pA(e);if(n)switch(n.type){case xHe:this._onOpenedMessage(n);break;case XE:this._onResponseMessage(n);break;case Cne:this._onAbortMessage(n);break;case vHe:this._onInvokeMessage(n)}}_onAbortMessage(e){const n=this._inJobs,r=e.jobId,i=n.get(r);i&&(i.controller&&i.controller.abort(),n.delete(r))}_onInvokeMessage(e){const{methodName:n,jobId:r,data:i,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs,l=uHe[n];let c;try{if(typeof l!="function")throw new TypeError(`${n} is not a function`);c=l.call(null,i,{signal:o?o.signal:null})}catch(u){return void this._post({type:XE,jobId:r,error:SN(u)})}va(c)?(a.set(r,{controller:o,promise:c}),c.then(u=>{a.has(r)&&(a.delete(r),this._post({type:XE,jobId:r},u))},u=>{a.has(r)&&(a.delete(r),u||(u={message:"Error encountered at method"+n}),Ea(u)||this._post({type:XE,jobId:r,error:SN(u||{message:`Error encountered at method ${n}`})}))})):this._post({type:XE,jobId:r},c)}_onOpenedMessage(e){const{jobId:n,data:r}=e,i=this._outJobs.get(n);i&&(this._outJobs.delete(n),ii(i.abortHandle),i.resolve(r))}_onResponseMessage(e){const{jobId:n,error:r,data:i}=e,s=this._outJobs.get(n);s&&(this._outJobs.delete(n),ii(s.abortHandle),r?s.reject(Xe.fromJSON(JSON.parse(r))):s.resolve(i))}_post(e,n,r){return n1e(this.worker,e,n,r)}};const Rne=_e("host-browser")?Math.min(navigator.hardwareConcurrency-1,_e("workers-pool-size")??8):0;let Ky=_e("esri-mobile")?Math.min(Rne,3):Rne;Ky||(Ky=_e("safari")&&_e("mac")?7:2);let Mne=0;const QM=[];function bHe(){i1e()}async function cR(t,e){const n=new cHe,{registryTarget:r,...i}=e;return await n.open(t,i),r&&eHe(r,n),n}async function JMt(t,e={}){if(typeof t!="string")throw new Xe("workers:undefined-module","modulePath is missing");let n=e.strategy||"distributed";if(_e("host-webworker")&&!_e("esri-workers")&&(n="local"),n==="local"){let r=await U2.loadWorker(t);r||(r=await import(t)),gi(e.signal);const i=e.client||r;return cR([U2.connect(r,e.schedule)],{...e,client:i})}if(await i1e(),gi(e.signal),n==="dedicated"){const r=Mne++%Ky;return cR([await QM[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,Ky);if(r<Ky){const i=new Array(r);for(let s=0;s<r;++s){const o=Mne++%Ky;i[s]=QM[o].open(t,e)}return cR(i,e)}}return cR(QM.map(r=>r.open(t,e)),e)}let uR=null;async function i1e(){if(uR)return uR;new AbortController;const t=[];for(let e=0;e<Ky;e++){const n=wHe.create(e).then(r=>(QM[e]=r,r));t.push(n)}return uR=Promise.all(t),uR}let DT=class extends Ot{constructor(e){super(e),this.addHandles([this.on("before-add",n=>{n.item==null&&n.preventDefault()}),this.on("after-add",n=>this._own(n.item)),this.on("after-remove",n=>this._release(n.item))])}get owner(){return this._get("owner")}set owner(e){this.destroyed||e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Ot.ofType(this.itemType.Type))(e):new Ot(e)}};function k7(t,e){return{type:t,cast:fme,set(n){const r=Id(n,this._get(e),t);r&&!r.destroyed&&(r.owner=this),this._set(e,r)}}}x([E()],DT.prototype,"owner",null),DT=x([ue("esri.core.support.OwningCollection")],DT);var A7,jw;let Ro=(jw=class extends qt{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new A7({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},A7=jw,jw);x([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ro.prototype,"cols",void 0),x([E({type:jr,json:{write:!0}})],Ro.prototype,"level",void 0),x([E({type:String,json:{write:!0}})],Ro.prototype,"levelValue",void 0),x([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ro.prototype,"origin",void 0),x([E({type:Number,json:{write:!0}})],Ro.prototype,"resolution",void 0),x([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Ro.prototype,"rows",void 0),x([E({type:Number,json:{write:!0}})],Ro.prototype,"scale",void 0),Ro=A7=x([ue("esri.layers.support.LOD")],Ro);let EHe=class s1e{constructor(e,n,r,i=El()){this._level=e,this._row=n,this._col=r,this.extent=i}get id(){return this._id??=`${this.level}/${this.row}/${this.col}`,this._id}get level(){return this._level}set level(e){this._level=e,this._id=null}get row(){return this._row}set row(e){this._row=e,this._id=null}get col(){return this._col}set col(e){this._col=e,this._id=null}toJSON(){return{level:this._level,row:this._row,col:this._col,extent:this.extent}}static fromJSON(e){return new s1e(e.level,e.row,e.col,e.extent)}};var sx;const Nne=new Xs({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var $w;let ka=($w=class extends qt{static create(e={}){const{resolutionFactor:n=1,scales:r,size:i=256,spatialReference:s=Wt.WebMercator,numLODs:o=24}=e;if(!dc(s)){const f=[];if(r)for(let g=0;g<r.length;g++){const y=r[g];f.push(new Ro({level:g,scale:y,resolution:y}))}else{let g=5e-4;for(let y=o-1;y>=0;y--)f.unshift(new Ro({level:y,scale:g,resolution:g})),g*=2}return new sx({dpi:96,lods:f,origin:new Qt(0,0,s),size:[i,i],spatialReference:s})}const a=Ga(s),l=e.origin?new Qt({x:e.origin.x,y:e.origin.y,spatialReference:s}):new Qt(a?{x:a.origin[0],y:a.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),c=96,u=1/(Jd(s)*39.37*c),h=[];if(r)for(let f=0;f<r.length;f++){const g=r[f],y=g*u;h.push(new Ro({level:f,scale:g,resolution:y}))}else{let f=kb(s)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const g=Math.ceil(o/n);h.push(new Ro({level:0,scale:f,resolution:f*u}));for(let y=1;y<g;y++){const _=f/2**n,b=_*u;h.push(new Ro({level:y,scale:_,resolution:b})),f=_}}return new sx({dpi:c,lods:h,origin:l,size:[i,i],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:n}=this;if(e&&n){const r=Ga(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-n.x)<=r.dx}return!1}readOrigin(e,n){return Qt.fromJSON({spatialReference:n.spatialReference,...e})}set lods(e){let n=0,r=0;const i=[],s=this._levelToLOD={};e&&(n=-1/0,r=1/0,e.forEach(o=>{i.push(o.scale),n=o.scale>n?o.scale:n,r=o.scale<r?o.scale:r,s[o.level]=o})),this._set("scales",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,n){return[n.cols,n.rows]}writeSize(e,n){n.cols=e[0],n.rows=e[1]}zoomToScale(e){const n=this.scales;if(e<=0)return n[0];if(e>=n.length-1)return n[n.length-1];const r=Math.floor(e),i=r+1;return n[r]/(n[r]/n[i])**(e-r)}scaleToZoom(e){const n=this.scales,r=n.length-1;let i=0;for(;i<r;i++){const s=n[i],o=n[i+1];if(s<=e)return i;if(o===e)return i+1;if(s>e&&o<e)return i+Math.log(s/e)/Math.log(s/o)}return i}tileAt(e,n,r,i){const s=this.lodAt(e);if(!s)return null;let o,a;if(typeof n=="number")o=n,a=r;else if(yo(n.spatialReference,this.spatialReference))o=n.x,a=n.y,i=r;else{const u=tL(n,this.spatialReference);if(u==null)return null;o=u.x,a=u.y,i=r}const l=s.resolution*this.size[0],c=s.resolution*this.size[1];return i??=new EHe(0,0,0),i.level=e,i.row=Math.floor((this.origin.y-a)/c+.001),i.col=Math.floor((o-this.origin.x)/l+.001),this.updateTileInfo(i),i}updateTileInfo(e,n=0){if(!("extent"in e))return!1;let r=this.lodAt(e.level);if(!r&&n===1){const a=this.lods[this.lods.length-1];a.level<e.level&&(r=a)}if(!r)return!1;const i=e.level-r.level,s=r.resolution*this.size[0]/2**i,o=r.resolution*this.size[1]/2**i;return e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+o,!0}upsampleTile(e){const n=this._upsampleLevels[e.level];return!(!n||n.parentLevel===-1)&&(e.level=n.parentLevel,e.row=Math.floor(e.row/n.factor+.001),e.col=Math.floor(e.col/n.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,n){const r=this.lodAt(n.level);if(r==null)return null;const{resolution:i}=r,s=i*this.size[0],o=i*this.size[1];return e[0]=this.origin.x+n.col*s,e[1]=this.origin.y-(n.row+1)*o,e[2]=e[0]+s,e[3]=e[1]+o,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return sx.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const n=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&n===0)return this;const r=[],i=this.lods.length-n;for(let s=0;s<i;s++){const o=s+n,{scale:a,resolution:l}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new Ro({level:s,scale:a,resolution:l}))}return new sx({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let n=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:n?n.level:-1,factor:n?n.resolution/i.resolution:0},n=i}}},sx=$w,$w);x([E({type:Number,json:{write:!0}})],ka.prototype,"compressionQuality",void 0),x([E({type:Number,json:{write:!0}})],ka.prototype,"dpi",void 0),x([E({type:String,json:{read:Nne.read,write:Nne.write,origins:{"web-scene":{read:!1,write:!1}}}})],ka.prototype,"format",void 0),x([E({readOnly:!0})],ka.prototype,"isWrappable",null),x([E({type:Qt,json:{write:!0}})],ka.prototype,"origin",void 0),x([cr("origin")],ka.prototype,"readOrigin",null),x([E({type:[Ro],value:null,json:{write:!0}})],ka.prototype,"lods",null),x([E({readOnly:!0})],ka.prototype,"scales",void 0),x([E({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],ka.prototype,"size",void 0),x([cr("size",["rows","cols"])],ka.prototype,"readSize",null),x([er("size",{cols:{type:jr},rows:{type:jr}})],ka.prototype,"writeSize",null),x([E({type:Wt,json:{write:!0}})],ka.prototype,"spatialReference",void 0),ka=sx=x([ue("esri.layers.support.TileInfo")],ka);let B2=class extends DT{constructor(e){super(e),this.addHandles(this.on("before-add",n=>{n.item!=null&&n.item.parent===this.owner&&(kt.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),n.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};B2=x([ue("esri.support.AnalysesCollection")],B2);const e3={widthBreakpoint:{getValue(t){const e=t.viewSize[0],n=t.breakpoints,r=this.values;return e<=n.xsmall?r.xsmall:e<=n.small?r.small:e<=n.medium?r.medium:e<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],n=t.breakpoints,r=this.values;return e<=n.xsmall?r.xsmall:e<=n.small?r.small:e<=n.medium?r.medium:e<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,n=e[0],r=e[1],i=this.values;return r>=n?i.portrait:i.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},m$={xsmall:544,small:768,medium:992,large:1200};function SHe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function g$(t,e){return e?e3[t].valueToClassName[e].split(" "):[]}const THe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=m$}initialize(){this.addHandles(mn(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),_a))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!SHe(r)){const i=JSON.stringify(m$,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=m$}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=La.acquire(),i=La.acquire();let s,o=!1;for(s in e3){const a=this[s],l=e3[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});a!==l&&(o=!0,this[s]=l,g$(s,a).forEach(c=>i.push(c)),g$(s,l).forEach(c=>r.push(c)))}o&&(this._applyClassNameChanges(r,i),La.release(r),La.release(i))}_applyClassNameChanges(r,i){const s=this.container;s&&(i.forEach(o=>s.classList.remove(o)),r.forEach(o=>s.classList.add(o)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in e3)g$(i,this[i]).forEach(s=>r.classList.remove(s))}};return x([E()],n.prototype,"breakpoints",null),x([E()],n.prototype,"orientation",void 0),x([E()],n.prototype,"widthBreakpoint",void 0),x([E()],n.prototype,"heightBreakpoint",void 0),n=x([ue("esri.views.BreakpointsOwner")],n),n};function KW(t){return typeof t=="string"?document.getElementById(t):t??null}function One(t,e){for(;;){const n=t.firstChild;if(!n)break;e.appendChild(n)}}let p1=class extends Kt{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,n,r={}){return this._installWatch(e,n,r,mn)}addWhen(e,n,r={}){return this._installWatch(e,n,r,Ec)}addOnCollectionChange(e,n,{initial:r=!1,final:i=!1}={}){const s=++this._handleId;return this.addHandles([J1(e,"after-changes",this._createSyncUpdatingCallback(),Jg),J1(e,"change",n,{onListenerAdd:r?o=>n({added:o.toArray(),removed:[]}):void 0,onListenerRemove:i?o=>n({added:[],removed:o.toArray()}):void 0})],s),Zn(()=>this.removeHandles(s))}addPromise(e){if(e==null)return e;const n=++this._handleId;this.addHandles(Zn(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(hR)||this._set("updating",!1))}),n),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(n);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,n,r={},i){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,s);const o=i(e,n,r);return this.addHandles(o,s),Zn(()=>this.removeHandles(s))}_installSyncUpdatingWatch(e,n){const r=this._createSyncUpdatingCallback(),i=mn(e,r,{sync:!0,equals:()=>!1});return this.addHandles(i,n),i}_createSyncUpdatingCallback(){return()=>{this.removeHandles(hR),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(Tb(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(hR))}),hR)}}};x([E({readOnly:!0})],p1.prototype,"updating",void 0),p1=x([ue("esri.core.support.UpdatingHandles")],p1);const hR=-42;var TN=function(){return TN=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},TN.apply(this,arguments)},I7={exports:{}},zi={},P7={exports:{}},Tv={};function o1e(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function kHe(t,e,n){}function AHe(t,e,n){}var IHe=/javascript\s*\:/img;function PHe(t,e){return IHe.test(e)?"":e}Tv.whiteList=o1e();Tv.getDefaultWhiteList=o1e;Tv.onAttr=kHe;Tv.onIgnoreAttr=AHe;Tv.safeAttrValue=PHe;var CHe={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,i;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},ZE=CHe;function RHe(t,e){t=ZE.trimRight(t),t[t.length-1]!==";"&&(t+=";");var n=t.length,r=!1,i=0,s=0,o="";function a(){if(!r){var u=ZE.trim(t.slice(i,s)),h=u.indexOf(":");if(h!==-1){var f=ZE.trim(u.slice(0,h)),g=ZE.trim(u.slice(h+1));if(f){var y=e(i,o.length,f,g,u);y&&(o+=y+"; ")}}}i=s+1}for(;s<n;s++){var l=t[s];if(l==="/"&&t[s+1]==="*"){var c=t.indexOf("*/",s+2);if(c===-1)break;s=c+1,i=s+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return ZE.trim(o)}var MHe=RHe,dR=Tv,NHe=MHe;function Lne(t){return t==null}function OHe(t){var e={};for(var n in t)e[n]=t[n];return e}function a1e(t){t=OHe(t||{}),t.whiteList=t.whiteList||dR.whiteList,t.onAttr=t.onAttr||dR.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||dR.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||dR.safeAttrValue,this.options=t}a1e.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,i=n.onAttr,s=n.onIgnoreAttr,o=n.safeAttrValue,a=NHe(t,function(l,c,u,h,f){var g=r[u],y=!1;if(g===!0?y=g:typeof g=="function"?y=g(h):g instanceof RegExp&&(y=g.test(h)),y!==!0&&(y=!1),h=o(u,h),!!h){var _={position:c,sourcePosition:l,source:f,isWhite:y};if(y){var b=i(u,h,_);return Lne(b)?u+":"+h:b}else{var b=s(u,h,_);if(!Lne(b))return b}}});return a};var LHe=a1e;(function(t,e){var n=Tv,r=LHe;function i(o,a){var l=new r(a);return l.process(o)}e=t.exports=i,e.FilterCSS=r;for(var s in n)e[s]=n[s]})(P7,P7.exports);var YW=P7.exports,XW={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,i;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,n=e.exec(t);return n?n.index:-1}},DHe=YW.FilterCSS,jHe=YW.getDefaultWhiteList,kN=XW;function l1e(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var c1e=new DHe;function $He(t,e,n){}function FHe(t,e,n){}function VHe(t,e,n){}function zHe(t,e,n){}function u1e(t){return t.replace(UHe,"&lt;").replace(BHe,"&gt;")}function GHe(t,e,n,r){if(n=g1e(n),e==="href"||e==="src"){if(n=kN.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(e==="background"){if(fR.lastIndex=0,fR.test(n))return""}else if(e==="style"){if(Dne.lastIndex=0,Dne.test(n)||(jne.lastIndex=0,jne.test(n)&&(fR.lastIndex=0,fR.test(n))))return"";r!==!1&&(r=r||c1e,n=r.process(n))}return n=y1e(n),n}var UHe=/</g,BHe=/>/g,WHe=/"/g,HHe=/&quot;/g,qHe=/&#([a-zA-Z0-9]*);?/gim,KHe=/&colon;?/gim,YHe=/&newline;?/gim,fR=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Dne=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,jne=/u\s*r\s*l\s*\(.*/gi;function h1e(t){return t.replace(WHe,"&quot;")}function d1e(t){return t.replace(HHe,'"')}function f1e(t){return t.replace(qHe,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function p1e(t){return t.replace(KHe,":").replace(YHe," ")}function m1e(t){for(var e="",n=0,r=t.length;n<r;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return kN.trim(e)}function g1e(t){return t=d1e(t),t=f1e(t),t=p1e(t),t=m1e(t),t}function y1e(t){return t=h1e(t),t=u1e(t),t}function XHe(){return""}function ZHe(t,e){typeof e!="function"&&(e=function(){});var n=!Array.isArray(t);function r(o){return n?!0:kN.indexOf(t,o)!==-1}var i=[],s=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var c="[/removed]",u=l.position+c.length;return i.push([s!==!1?s:l.position,u]),s=!1,c}else return s||(s=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return kN.forEach(i,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function JHe(t){for(var e="",n=0;n<t.length;){var r=t.indexOf("<!--",n);if(r===-1){e+=t.slice(n);break}e+=t.slice(n,r);var i=t.indexOf("-->",r);if(i===-1)break;n=i+3}return e}function QHe(t){var e=t.split("");return e=e.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}zi.whiteList=l1e();zi.getDefaultWhiteList=l1e;zi.onTag=$He;zi.onIgnoreTag=FHe;zi.onTagAttr=VHe;zi.onIgnoreTagAttr=zHe;zi.safeAttrValue=GHe;zi.escapeHtml=u1e;zi.escapeQuote=h1e;zi.unescapeQuote=d1e;zi.escapeHtmlEntities=f1e;zi.escapeDangerHtml5Entities=p1e;zi.clearNonPrintableCharacter=m1e;zi.friendlyAttrValue=g1e;zi.escapeAttrValue=y1e;zi.onIgnoreTagStripAll=XHe;zi.StripTagBody=ZHe;zi.stripCommentTag=JHe;zi.stripBlankChar=QHe;zi.cssFilter=c1e;zi.getDefaultCSSWhiteList=jHe;var yL={},Hm=XW;function eqe(t){var e=Hm.spaceIndex(t),n;return e===-1?n=t.slice(1,-1):n=t.slice(1,e+1),n=Hm.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function tqe(t){return t.slice(0,2)==="</"}function nqe(t,e,n){var r="",i=0,s=!1,o=!1,a=0,l=t.length,c="",u="";e:for(a=0;a<l;a++){var h=t.charAt(a);if(s===!1){if(h==="<"){s=a;continue}}else if(o===!1){if(h==="<"){r+=n(t.slice(i,a)),s=a,i=a;continue}if(h===">"){r+=n(t.slice(i,s)),u=t.slice(s,a+1),c=eqe(u),r+=e(s,r.length,c,u,tqe(u)),i=a+1,s=!1;continue}if(h==='"'||h==="'")for(var f=1,g=t.charAt(a-f);g.trim()===""||g==="=";){if(g==="="){o=h;continue e}g=t.charAt(a-++f)}}else if(h===o){o=!1;continue}}return i<t.length&&(r+=n(t.substr(i))),r}var rqe=/[^a-zA-Z0-9\\_:.-]/gim;function iqe(t,e){var n=0,r=0,i=[],s=!1,o=t.length;function a(f,g){if(f=Hm.trim(f),f=f.replace(rqe,"").toLowerCase(),!(f.length<1)){var y=e(f,g||"");y&&i.push(y)}}for(var l=0;l<o;l++){var c=t.charAt(l),u,h;if(s===!1&&c==="="){s=t.slice(n,l),n=l+1,r=t.charAt(n)==='"'||t.charAt(n)==="'"?n:oqe(t,l+1);continue}if(s!==!1&&l===r){if(h=t.indexOf(c,l+1),h===-1)break;u=Hm.trim(t.slice(r+1,h)),a(s,u),s=!1,l=h,n=l+1;continue}if(/\s|\n|\t/.test(c))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(h=sqe(t,l),h===-1){u=Hm.trim(t.slice(n,l)),a(u),s=!1,n=l+1;continue}else{l=h-1;continue}else if(h=aqe(t,l-1),h===-1){u=Hm.trim(t.slice(n,l)),u=$ne(u),a(s,u),s=!1,n=l+1;continue}else continue}return n<t.length&&(s===!1?a(t.slice(n)):a(s,$ne(Hm.trim(t.slice(n))))),Hm.trim(i.join(" "))}function sqe(t,e){for(;e<t.length;e++){var n=t[e];if(n!==" ")return n==="="?e:-1}}function oqe(t,e){for(;e<t.length;e++){var n=t[e];if(n!==" ")return n==="'"||n==='"'?e:-1}}function aqe(t,e){for(;e>0;e--){var n=t[e];if(n!==" ")return n==="="?e:-1}}function lqe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function $ne(t){return lqe(t)?t.substr(1,t.length-2):t}yL.parseTag=nqe;yL.parseAttr=iqe;var cqe=YW.FilterCSS,Xu=zi,v1e=yL,uqe=v1e.parseTag,hqe=v1e.parseAttr,t3=XW;function pR(t){return t==null}function dqe(t){var e=t3.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=t3.trim(t.slice(e+1,-1));var n=t[t.length-1]==="/";return n&&(t=t3.trim(t.slice(0,-1))),{html:t,closing:n}}function fqe(t){var e={};for(var n in t)e[n]=t[n];return e}function pqe(t){var e={};for(var n in t)Array.isArray(t[n])?e[n.toLowerCase()]=t[n].map(function(r){return r.toLowerCase()}):e[n.toLowerCase()]=t[n];return e}function _1e(t){t=fqe(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Xu.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=pqe(t.whiteList||t.allowList):t.whiteList=Xu.whiteList,t.onTag=t.onTag||Xu.onTag,t.onTagAttr=t.onTagAttr||Xu.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Xu.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Xu.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Xu.safeAttrValue,t.escapeHtml=t.escapeHtml||Xu.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new cqe(t.css))}_1e.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,i=n.onTag,s=n.onIgnoreTag,o=n.onTagAttr,a=n.onIgnoreTagAttr,l=n.safeAttrValue,c=n.escapeHtml,u=e.cssFilter;n.stripBlankChar&&(t=Xu.stripBlankChar(t)),n.allowCommentTag||(t=Xu.stripCommentTag(t));var h=!1;n.stripIgnoreTagBody&&(h=Xu.StripTagBody(n.stripIgnoreTagBody,s),s=h.onIgnoreTag);var f=uqe(t,function(g,y,_,b,T){var A={sourcePosition:g,position:y,isClosing:T,isWhite:Object.prototype.hasOwnProperty.call(r,_)},I=i(_,b,A);if(!pR(I))return I;if(A.isWhite){if(A.isClosing)return"</"+_+">";var P=dqe(b),M=r[_],V=hqe(P.html,function(C,N){var O=t3.indexOf(M,C)!==-1,L=o(_,C,N,O);return pR(L)?O?(N=l(_,C,N,u),N?C+'="'+N+'"':C):(L=a(_,C,N,O),pR(L)?void 0:L):L});return b="<"+_,V&&(b+=" "+V),P.closing&&(b+=" /"),b+=">",b}else return I=s(_,b,A),pR(I)?c(b):I},c);return h&&(f=h.remove(f)),f};var mqe=_1e;(function(t,e){var n=zi,r=yL,i=mqe;function s(a,l){var c=new i(l);return c.process(a)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=i,(function(){for(var a in n)e[a]=n[a];for(var l in r)e[l]=r[l]})();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(I7,I7.exports);var M_=I7.exports,gqe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},x1e=(function(){function t(e,n){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=TN(TN({},M_.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(a):M_.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var i;e&&!n?i=e:e&&n?(i=Object.create(this.arcgisFilterOptions),i.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(s){if(s==="whiteList")i.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(s==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(a){return i.css.whiteList[a]=o[a]})}else i[s]=e[s]})):(i=Object.create(this.arcgisFilterOptions),i.whiteList=this.arcgisWhiteList,i.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=i,this._xssFilter=new M_.FilterXSS(i)}return t.prototype.sanitize=function(e,n){switch(n===void 0&&(n={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,n);default:return n.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,n){var r=(n??{}).isProtocolRequired,i=r===void 0?!0:r,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?M_.escapeAttrValue(e):!s&&!i?M_.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,n,r,i){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,n,r,i):M_.safeAttrValue(e,n,r,i)},t.prototype.validate=function(e,n){n===void 0&&(n={});var r=this.sanitize(e,n);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var n=this;return String(e).replace(/[&<>"'\/]/g,function(r){return n._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var n=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,i){return n.test(r)?r:"&#x".concat(Number(e.charCodeAt(i)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var n={};return e.forEach(function(r){Object.keys(r).forEach(function(i){Array.isArray(r[i])&&Array.isArray(n[i])?n[i]=n[i].concat(r[i]):n[i]=r[i]})}),n},t.prototype._iterateOverObject=function(e,n){var r=this;n===void 0&&(n={});try{var i=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(a,l){var c=r.validate(l,n);return c.isValid?a.concat([l]):(i=!0,a.concat([c.sanitized]))},[]);else if(gqe(e)){var o=Object.keys(e);s=o.reduce(function(a,l){var c=e[l],u=r.validate(c,n);return u.isValid?a[l]=c:(i=!0,a[l]=u.sanitized),a},{})}else return n.allowUndefined&&typeof e>"u"?void 0:null;return i?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t})();const yqe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],vqe=yqe.reduce((t,e)=>(t[e]=[],t),{}),_qe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],w1e=new x1e({whiteList:vqe,onTagAttr:(t,e,n)=>{const r=`${e}="${n}"`;if(_qe.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),n3t=new x1e({whiteList:{br:[]},stripIgnoreTag:!0,escapeHtml:t=>t},!1),b1e="http://www.w3.org/",vL=`${b1e}2000/svg`,E1e=`${b1e}1999/xlink`;let Fne=[],ZW=(t,e)=>{let n={};return Object.keys(t).forEach(r=>{n[r]=t[r]}),e&&Object.keys(e).forEach(r=>{n[r]=e[r]}),n},JW=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),S1e=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},xqe=(t,e,n)=>{if(e.vnodeSelector!==""){for(let r=n;r<t.length;r++)if(JW(t[r],e))return r}return-1},y$=(t,e,n,r)=>{let i=t[e];if(i.vnodeSelector==="")return;let s=i.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(JW(a,i))throw new Error(`${n.vnodeSelector} had a ${i.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},wqe=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},C7=[],R7=!1,T1e=t=>{(t.children||[]).forEach(T1e),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},Vne=()=>{R7=!1,C7.forEach(T1e),C7.length=0},zne=t=>{C7.push(t),R7||(R7=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(Vne,{timeout:16}):setTimeout(Vne,16))},Gne=t=>{let e=t.domNode;if(t.properties){let n=t.properties.exitAnimation;if(n)return e.style.pointerEvents="none",void n(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),zne(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),zne(t))},bqe=(t,e,n)=>{if(!e)return;let r=n.eventHandlerInterceptor,i=Object.keys(e),s=i.length;for(let o=0;o<s;o++){let a=i[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")N7(t,l,!0);else if(a==="classes"){let c=Object.keys(l),u=c.length;for(let h=0;h<u;h++){let f=c[h];l[f]&&t.classList.add(f)}}else if(a==="styles"){let c=Object.keys(l),u=c.length;for(let h=0;h<u;h++){let f=c[h],g=l[f];g&&(S1e(g),n.styleApplyer(t,f,g))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,t,e)),a==="oninput"&&(function(){let u=l;l=function(h){u.apply(this,[h]),h.target["oninput-value"]=h.target.value}})()),t[a]=l):n.namespace===vL?a==="href"?t.setAttributeNS(E1e,a,l):t.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?t[a]=w1e.sanitize(l):M7(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function M7(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let AN,Eqe=(t,e,n)=>{if(e)for(let r of e)jT(r,t,void 0,n)},k1e=(t,e,n)=>{Eqe(t,e.children,n),e.text&&(t.textContent=e.text),bqe(t,e.properties,n),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,n,e.vnodeSelector,e.properties,e.children])},jT=(t,e,n,r)=>{let i,s=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")i=t.domNode=a.createTextNode(t.text),n!==void 0?e.insertBefore(i,n):e.appendChild(i);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let u=o.charAt(s-1),h=o.slice(s,l);u==="."?i.classList.add(h):u==="#"?i.id=h:(h==="svg"&&(r=ZW(r,{namespace:vL})),r.namespace!==void 0?i=t.domNode=a.createElementNS(r.namespace,h):(i=t.domNode=t.domNode||a.createElement(h),h==="input"&&t.properties&&t.properties.type!==void 0&&i.setAttribute("type",t.properties.type)),n!==void 0?e.insertBefore(i,n):i.parentNode!==e&&e.appendChild(i)),s=l+1}}k1e(i,t,r)}},N7=(t,e,n)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,n)})},Sqe=(t,e,n,r)=>{if(!n)return;let i=!1,s=Object.keys(n),o=s.length;for(let a=0;a<o;a++){let l=s[a],c=n[l],u=e[l];if(l==="class")u!==c&&(N7(t,u,!1),N7(t,c,!0));else if(l==="classes"){let h=t.classList,f=Object.keys(c),g=f.length;for(let y=0;y<g;y++){let _=f[y],b=!!c[_];b!==!!u[_]&&(i=!0,b?h.add(_):h.remove(_))}}else if(l==="styles"){let h=Object.keys(c),f=h.length;for(let g=0;g<f;g++){let y=h[g],_=c[y];_!==u[y]&&(i=!0,_?(S1e(_),r.styleApplyer(t,y,_)):r.styleApplyer(t,y,""))}}else if(c||typeof u!="string"||(c=""),l!=="value"||M7(t)){if(c!==u){let h=typeof c;h==="function"&&r.eventHandlerInterceptor||(r.namespace===vL?l==="href"?t.setAttributeNS(E1e,l,c):t.setAttribute(l,c):h==="string"?l==="innerHTML"?t[l]=w1e.sanitize(c):l==="role"&&c===""?t.removeAttribute(l):M7(t)&&l in t?t[l]=c:t.setAttribute(l,c):t[l]!==c&&(t[l]=c),i=!0)}}else{let h=t[l];h!==c&&(t["oninput-value"]?h===t["oninput-value"]:c!==u)&&(t[l]=c,t["oninput-value"]=void 0),c!==u&&(i=!0)}}return i},Tqe=(t,e,n,r,i)=>{if(n===r)return!1;r=r||Fne;let s,o=(n=n||Fne).length,a=r.length,l=0,c=0,u=!1;for(;c<a;){let h=l<o?n[l]:void 0,f=r[c];if(h!==void 0&&JW(h,f))u=AN(h,f,i)||u,l++;else{let g=xqe(n,f,l+1);if(g>=0){for(s=l;s<g;s++)Gne(n[s]),y$(n,s,t,"removed");u=AN(n[g],f,i)||u,l=g+1}else jT(f,e,l<o?n[l].domNode:void 0,i),wqe(f),y$(r,c,t,"added")}c++}if(o>l)for(s=l;s<o;s++)Gne(n[s]),y$(n,s,t,"removed");return u};AN=(t,e,n)=>{let r=t.domNode,i=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,i=!0,i}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(n=ZW(n,{namespace:vL})),t.text!==e.text&&(s=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,s=Tqe(e,r,t.children,e.children,n)||s,s=Sqe(r,t.properties,e.properties,n)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,n,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),i};let mR=(t,e)=>({getLastRender:()=>t,update:n=>{if(t.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=n,AN(r,n,e)},domNode:t.domNode});const kqe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,n)=>{e.charAt(0)==="-"?t.style.setProperty(e,n):t.style[e]=n}};let CS=t=>ZW(kqe,t),pg={append:(t,e,n)=>(n=CS(n),jT(e,t,void 0,n),mR(e,n)),insertBefore:(t,e,n)=>(n=CS(n),jT(e,t.parentNode,t,n),mR(e,n)),merge:(t,e,n)=>(n=CS(n),e.domNode=t,k1e(t,e,n),mR(e,n)),replace:(t,e,n)=>(n=CS(n),jT(e,t.parentNode,t,n),t.parentNode.removeChild(t),mR(e,n))},A1e,Aqe=(t,e)=>{let n=[];for(;t&&t!==e;)n.push(t),t=t.parentNode;return n};A1e=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let Iqe=(t,e)=>{let n=t;return e.forEach(r=>{n=n&&n.children?A1e(n.children,i=>i.domNode===r):void 0}),n},Pqe=(t,e,n)=>{let r=function(i){n("domEvent",i);let s=e(),o=Aqe(i.currentTarget,s.domNode);o.reverse();let a,l=Iqe(s.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${i.type}`].apply(l.properties.bind||this,arguments)),n("domEventProcessed",i),a};return(i,s,o,a)=>r},Une=t=>{let e,n,r=CS(t),i=r.performanceLogger,s=!0,o=!1,a=[],l=[],c=(h,f,g)=>{let y,_=()=>y;r.eventHandlerInterceptor=Pqe(e,_,i),y=h(f,g(),r),a.push(y),l.push(g)},u=()=>{if(n=void 0,s){s=!1,i("renderStart",void 0);for(let h=0;h<a.length;h++){let f=l[h]();i("rendered",void 0),a[h].update(f),i("patched",void 0)}i("renderDone",void 0),s=!0}};return e={renderNow:u,scheduleRender:()=>{n||o||(n=requestAnimationFrame(u))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),o=!0},resume:()=>{o=!1,s=!0,e.scheduleRender()},append:(h,f)=>{c(pg.append,h,f)},insertBefore:(h,f)=>{c(pg.insertBefore,h,f)},merge:(h,f)=>{c(pg.merge,h,f)},replace:(h,f)=>{c(pg.replace,h,f)},detach:h=>{for(let f=0;f<l.length;f++)if(l[f]===h)return l.splice(f,1),a.splice(f,1)[0];throw new Error("renderFunction was not found")}},e},Rm=class extends Kt{constructor(){super(...arguments),this.items=new Ot,this._watchUpdatingTracking=new p1,this._callbacks=new Map,this._projector=Une(),this._hiddenProjector=Une()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,n=>{for(const r of n.added){const i=()=>r.render();this._callbacks.set(r,i),this._projector.append(this.surface,i)}for(const r of n.removed){const i=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(i.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const n=this._hiddenSurface,r=this._hiddenProjector;let i;const s=()=>(i=e.render(),i);r.append(n,s),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(i?.domNode){const a=i.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(s);n.firstChild;)n.removeChild(n.firstChild);return o}overlaps(e,n){const r=this.computeBoundingRect(e),i=this.computeBoundingRect(n);return Math.max(r.left,i.left)<=Math.min(r.right,i.right)&&Math.max(r.top,i.top)<=Math.min(r.bottom,i.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,n){const r=!!n?.disableDecorations;if(!this.items.some(s=>s.visible&&!(r&&s.isDecoration)))return;const i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(s=>{r&&s.isDecoration||(i.save(),s.renderCanvas(i),i.restore())}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};x([E({readOnly:!0})],Rm.prototype,"surface",void 0),x([E({readOnly:!0})],Rm.prototype,"items",void 0),x([E({readOnly:!0})],Rm.prototype,"needsRender",null),x([E({readOnly:!0})],Rm.prototype,"_watchUpdatingTracking",void 0),x([E({readOnly:!0})],Rm.prototype,"updating",null),Rm=x([ue("esri.views.overlay.ViewOverlay")],Rm);const Bne=Rm,v$=[0,0];function Cqe(t){const e=(t.ownerDocument||window.document).defaultView,n=t.getBoundingClientRect();return v$[0]=n.left+(e?.pageXOffset??0),v$[1]=n.top+(e?.pageYOffset??0),v$}function Wne(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function Rqe(t){const e=document.createElement("div");return t.appendChild(e),e}const N_=16,JE=750,Mqe=512,Nqe=2,Oqe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this._freqInfo={freq:N_,time:JE},this._overlayRenderTaskHandle=null,this.aria={},this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([mn(()=>this.cursor,i=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",i)}),mn(()=>this.navigating,i=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",i.toString())}),mn(()=>[this.aria,this.surface],()=>this._updateAria(),{initial:!0})])}initialize(){const r=this;this.addHandles([mn(()=>this.ui,(i,s)=>this._handleUIChange(i,s),_a),r.on("focus",()=>this.notifyChange("focused")),r.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),s=KW(r);if(s||typeof r!="string"||kt.getLogger(this).error("#container",`element with id '${r}' not found`),i===s)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Wne(this.root),this._set("root",null)),this.userContent&&(One(this.userContent,i),Wne(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",One(s,o),s.appendChild(o),this._set("userContent",o);const a=document.createElement("div");a.className="esri-view-root",s.insertBefore(a,s.firstChild),this._set("root",a);const l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,a.appendChild(l),this._set("surface",l);const c=new Bne;a.appendChild(c.surface),this._set("overlay",c),this.addHandles(mn(()=>c.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=M2({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=ii(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}set ui(r){const i=this._get("ui");i!==r&&i?.destroy(),this._set("ui",r)}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(r,i,s){const o=this.position;return r-=o?o[0]:0,i-=o?o[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}containerToPage(r,i,s){const o=this.position;return r+=o?o[0]:0,i+=o?o[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}_updateAria(){const{surface:r,aria:i}=this;r&&(r.ariaLabelledByElements=i?.labelledByElements??null,r.ariaDescribedByElements=i?.describedByElements??null,r.ariaLabel=i?.label??null,r.ariaDescription=i?.description??null)}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(mn(()=>this.root,s=>{r.container=s?Rqe(s):null},_a),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=N_,r.time=JE;const i=M2({prepare:a=>{const l=this._measure(),c=this._freqInfo;if(c.time+=a.deltaTime,l&&(c.freq=N_,this._get("resizing")||this._set("resizing",!0)),c.time<c.freq)return;c.time=0;const u=this._position();c.freq=u||l?N_:Math.min(JE,c.freq*Nqe),!l&&c.freq>=Mqe&&(i.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver(a=>{r.freq=N_,r.time=JE,i.resume()});this.container!=null&&s.observe(this.container);const o=Zn(()=>s.disconnect());this.addHandles([xb(window,"resize",()=>{r.freq=N_,r.time=JE,i.resume()}),o,i],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,s=r?r.clientHeight:0;if(i===0||s===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,a=this.height;return i===o&&s===a?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:a,width:i,height:s}),!0)}_position(){const r=this.container,i=this.position,s=r&&Cqe(r);return!!s&&(!i||s[0]!==i[0]||s[1]!==i[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return x([E()],n.prototype,"aria",void 0),x([E()],n.prototype,"container",null),x([E({readOnly:!0})],n.prototype,"focused",null),x([E({readOnly:!0})],n.prototype,"height",void 0),x([E()],n.prototype,"messagesCommon",void 0),x([E({type:Bne})],n.prototype,"overlay",void 0),x([E({readOnly:!0})],n.prototype,"position",void 0),x([E({readOnly:!0})],n.prototype,"resizing",void 0),x([E({readOnly:!0})],n.prototype,"root",void 0),x([E({value:null,readOnly:!0})],n.prototype,"size",null),x([E({readOnly:!0})],n.prototype,"surface",void 0),x([E({readOnly:!0})],n.prototype,"suspended",void 0),x([E({nonNullable:!0})],n.prototype,"ui",null),x([E({readOnly:!0})],n.prototype,"userContent",void 0),x([E({readOnly:!0})],n.prototype,"width",void 0),x([E()],n.prototype,"widthBreakpoint",void 0),n=x([ue("esri.views.DOMContainer")],n),n},gR="popup",Hne="manual";function Cd(t){return t!=null&&"open"in t&&"declaredClass"in t}function kp(t){return!!t&&t.tagName.toLowerCase()==="arcgis-popup"&&"open"in t}function Lqe(t,e,n){const[r,i,s]=e;if(n){const[o,a,l]=n;o&&Cd(a)&&(a.view=null,o.remove(a,gR),a!==i&&i&&a.destroy()),o&&l&&kp(l)&&(l.view=null,o.remove(l,gR),l!==s&&s&&l.remove())}r&&Cd(i)&&(i.view=t,r.add(i,{key:gR,position:Hne,internal:!0})),r&&s&&kp(s)&&(s.view=t,r.add(s,{key:gR,position:Hne,internal:!0}))}async function Dqe(t,e){const{popup:n,popupElement:r}=t;Cd(n)?await yR(n,null,e):r&&kp(r)?await yR(null,r,e):e?.defer(async()=>{await t.setupPopup();const{popup:i,popupElement:s}=t;Cd(i)&&!t.destroyed&&t.ready&&t.popupEnabled?await yR(i,null,e):s&&kp(s)&&await yR(null,s,e)})}function jqe(t,e){const{popup:n,popupElement:r}=t;if(Cd(n))return n.open(e);r&&kp(r)&&r.open(e)}function $qe(t,e){Cd(t)&&t.close(),e&&kp(e)&&(e.visible=!1)}async function yR(t,e,n){if(Cd(t)){const r=await t.viewModel.handleViewClick(n);return void(r?.promises?.length?t.open(r):t.visible&&t.close())}if(e&&kp(e)){const r=await e.handleViewClick(n);r?.promises?.length?e.open(r):e.visible&&(e.visible=!1)}}const I1e=_e("mac")?"Meta":"Control",Fqe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),Vqe=t=>Fqe.has(t);let zqe=class{constructor(e,n=[]){this.eventType=e,this.keyModifiers=n}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const n=e.modifiers;for(const r of this.keyModifiers)if(!n.has(r))return!1;return!0}},Js=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const n=this._incoming[e];for(const r of n)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(n=>this._handleEvent(n)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,n,r){let i;typeof n=="function"?(r=n,i=[]):i=n||[];const s=typeof e=="string"?new zqe(e,i):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=u=>{const h=this._incoming[u.match.eventType];if(h){const f=h.indexOf(u);h.splice(f,1),o(),this._manager&&this._manager.updateDependencies()}},l=new Gqe(s,r,{onPause:a,onRemove:a,onResume:u=>{const h=this._incoming[u.match.eventType];h&&!h.includes(u)&&(h.push(u),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const n=new Uqe(e,{onEmit:(r,i,s,o)=>{this._manager?.emit(r.eventType,i,s,o)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=n,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),n}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const n=this._incoming[e.type];if(n){for(const r of n)if(r.match.matches(e)&&(r.callback?.(e),e.shouldStopPropagation()))break}}},Gqe=class{constructor(e,n,r){this.match=e,this._callback=n,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Uqe=class{constructor(e,n){this.eventType=e,this._removed=!1,this._handler=n}emit(e,n,r){this._removed||this._handler.onEmit(this,e,n,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},Bqe=class extends Js{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this._id=null,this.registerIncoming("pointer-move",n=>this._update(n.data))}_update(e){const n=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:i,native:{pointerId:s}}=e;n===this._value&&this._x===r&&this._y===i&&this._id===s||(this._value=n,this._x=r,this._y=i,this._id=s,this._onChange(s,n,r,i))}},Wqe=class{constructor(e,n){this._observable=new MI,this._value=e,this._equalityFunction=n}get value(){return sn(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function W2(t,e=zfe){return new Wqe(t,e)}let Hqe=class extends Js{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=W2(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},qqe=class{constructor(e,n){this._owner=n,this._properties={},this._afterDispatchHandle=null;for(const r in e){const i=e[r],s=new Fpe(i,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=uFe(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const n=this._properties[e];for(const r of n.acquired)Dee(r)||n.pool.release(r);n.pool.destroy(),n.pool=null,n.acquired=null}this._properties=null,this._owner=null}get(e){const n=this._owner._get(e),r=this._properties[e];let i=r.pool.acquire();for(r.acquired.push(i);i===n;)i=r.pool.acquire(),r.acquired.push(i);return Xpe(),i}_release(){for(const e in this._properties){const n=this._properties[e];let r=0;for(const i of n.acquired)Dee(i)?n.acquired[r++]=i:n.pool.release(i);n.acquired.length=r}}},Kqe=class{constructor(){this.id=0,this.type="mouse",this.location=qs()}},Bu=class extends Kt{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=I1e,this._propertiesPool=new qqe({latestPointerInfo:()=>new Kqe},this),this._latestPointerInfo=void 0,this._paused=!1,this._testTimestamp=void 0}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const n of e)this.uninstallHandlers(n);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get latestPointerInfo(){return this._latestPointerInfo}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,n,r=fp.INTERNAL){if(this._nameToGroup[e]||n.length===0)return;const i={name:e,handlers:n.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=i;for(let s=i.handlers.length-1;s>=0;s--){const o=i.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,c,u,h)=>{this._emitInputEvent(o.priorityIndex+1,a,l,c,h,u)},setPointerCapture:(a,l)=>{this._setPointerCapture(i,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const n=this._nameToGroup[e];n?(n.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):kt.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,n=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const i=this._handlers[r];i.priorityIndex=r,this._handlersPriority.push(i)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const i=this._handlersPriority[r];i.priorityIndex=r;let s=i.handler.hasSideEffects;if(!s){for(const o of i.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of i.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)Vqe(a)||n.add(a)}i.active=s}this._sourceEvents=e,this._keyModifiers=n,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,n,r,i){const s=this._latestPointerInfo;if(s==null||s.id!==e||s.type!==n||s.location.x!==r||s.location.y!==i){const o=this._propertiesPool.get("latestPointerInfo");o.id=e,o.type=n,o.location.x=r,o.location.y=i,this._latestPointerInfo=o}}_onEventReceived(e,n){if(e==="pointer-capture-lost"){const s=n;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,n);const r=this._testTimestamp??n.native?.timestamp,i=n.native?.cancelable;this._emitInputEventFromSource(e,n,r,i)}_updateKeyModifiers(e,n){if(!n)return;let r=!1;const i=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(i(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(i(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=n.key;this._keyModifiers.has(a)&&s(a,e==="key-down")}const o=n.native;s("Alt",!!o?.altKey),s("Control",!!o?.ctrlKey),s("Ctrl",!!o?.ctrlKey),s("Shift",!!o?.shiftKey),s("Meta",!!o?.metaKey),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new Bqe((e,n,r,i)=>this._setLatestPointer(e,n,r,i)),this._multiTouchHandler=new Hqe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],fp.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,fp.INTERNAL)}_setPointerCapture(e,n,r,i){const s=e.name+"-"+n.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),i?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,n,r,i){this._emitInputEvent(0,e,n,r,i)}_emitInputEvent(e,n,r,i,s,o){const a=i??this._currentPropagation?.timestamp??performance.now(),l=s??!1,c={event:new Yqe(n,r,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new fA,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:n,priorityIndex:r}=e.events.pop(),i=n.data?.eventId;if(!(i!=null&&this._stoppedPropagationEventIds.has(i)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!n.shouldStopPropagation()&&e.currentHandler.eventCallback?.(n),n.shouldStopPropagation()){i!=null&&this._stoppedPropagationEventIds.add(i);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const n=new fA;n.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)n.push(r.events.pop());r.events=n,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,n){if(e.handler.hasSideEffects!==n.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==n.groupPriority)return e.groupPriority>n.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const i of n.handler.incomingEventMatches){if(r.eventType!==i.eventType)continue;const s=r.keyModifiers.filter(o=>i.keyModifiers.includes(o));if(s.length===r.keyModifiers.length!=(s.length===i.keyModifiers.length))return r.keyModifiers.length>i.keyModifiers.length?-1:1}return e.priorityIndex>n.priorityIndex?-1:1}_sortHandlersPriority(e){const n=[];for(const r of e){let i=0;for(;i<n.length&&this._compareHandlerPriority(r,n[i])>=0;)i++;n.splice(i,0,r)}return n}get test(){}};x([E({readOnly:!0})],Bu.prototype,"hasPendingInputs",null),x([E({constructOnly:!0})],Bu.prototype,"eventSource",void 0),x([E({constructOnly:!0})],Bu.prototype,"recognizers",void 0),x([E()],Bu.prototype,"multiTouchActive",null),x([E()],Bu.prototype,"_latestPointerInfo",void 0),x([E()],Bu.prototype,"latestPointerInfo",null),x([E()],Bu.prototype,"_paused",void 0),x([E({readOnly:!0})],Bu.prototype,"updating",null),Bu=x([ue("esri.views.input.InputManager")],Bu);let Yqe=class{constructor(e,n,r,i,s){this.type=e,this.data=n,this.timestamp=r,this.modifiers=i,this.cancelable=s,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return!!(1&this._propagationState)}defer(e){this._propagationState|=2;const n=(r,i)=>{this._propagationState&=-3;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),i)throw r;return r};return(typeof e=="function"?e():e).then(r=>n(r,!1),r=>n(r,!0))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};const fp={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},Xqe=t=>{const e=t;let n=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([mn(()=>[this.ui,this.popup,this.popupElement],([r,i,s],o)=>{const[a,l,c]=o??[];Lqe(this,[r,i,s],[a,l,c])},sa),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&Dqe(this,r)},fp.WIDGET)]),TW(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>ve(()=>import("./Popup-BV8EEl3k.js").then(r=>r.P),__vite__mapDeps([230,231,20,232,233,234,235,206,202,179,166,203,33,204,205,144,89,207,124,165,208,84,132,236,57,237,238,133,134,26,27,200,201,137,85,80,129,78,79,54,55,56,239,114,112,113,28,66,69,115,240,241,242,243,244,22,31,245,246,247,248,29,249,250,251,252,253,254,156,255,256,257,258,259,30,32,260,261,262,263,264,35,265,266,199,267,268,34,269,270,271,272,273,274,275,276,277,278,44,279,136,280,281,282,283])))}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(Cd(this.popup))return this.popup.open(r);if(this.popupElement&&kp(this.popupElement))this.popupElement.open(r).catch(()=>{});else try{if(await this.setupPopup(),!this.popup)return void kt.getLogger(this).error(new Xe("view:null-popup","Popup is null and can't be opened"));jqe(this,r)}catch{}}closePopup(){this._popupSetupTask?.abort(),$qe(this.popup,this.popupElement)}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!Cd(this.popup))return this._popupSetupTask=ZO(async r=>{if(!this.popupEnabled||!kp(this.popupElement))if(this.dependencies.popup&&typeof this.dependencies.popup=="function")await this.dependencies.popup(),gi(r),customElements.get("arcgis-popup")||kt.getLogger(this).error(new Xe("view:undefined-popup-element","`arcgis-popup` custom element is undefined and can't be opened")),this.popupElement=document.createElement("arcgis-popup");else{const{default:i}=await ve(()=>import("./Popup-BV8EEl3k.js").then(o=>o.P),__vite__mapDeps([230,231,20,232,233,234,235,206,202,179,166,203,33,204,205,144,89,207,124,165,208,84,132,236,57,237,238,133,134,26,27,200,201,137,85,80,129,78,79,54,55,56,239,114,112,113,28,66,69,115,240,241,242,243,244,22,31,245,246,247,248,29,249,250,251,252,253,254,156,255,256,257,258,259,30,32,260,261,262,263,264,35,265,266,199,267,268,34,269,270,271,272,273,274,275,276,277,278,44,279,136,280,281,282,283]));if(gi(r),!this.popup||Cd(this.popup))return;const s=this.popup;if("open"in s||"close"in s){const{open:o,close:a,...l}=s;this.popup=new i({...l})}else this.popup=new i(s)}}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},s){const o=[],a=[];let l=!1;const c=$je(s,_e("popup-view-fetch-timeout")??Jqe),u=g=>{const y=new Zqe(g);return a.push(y),o.push(y.promise),y},h=g=>{const y=a.at(-1);return y&&y.layerView===g&&!l?y:u(g)};for(const g of i)"graphic"in g?(h(g.layerView).graphics.push(g.graphic),l=!1):(o.push(g.layerView.fetchPopupFeaturesAtLocation(g.mapPoint,c)),l=!0);a.forEach(g=>g.resolve(c));const f=jje(o).then(g=>g.filter(y=>!!y).flat());return{pendingFeatures:o,allGraphicsPromise:f,location:r}}async _getPopupHits(r,i){const{hits:s,location:o}=await this.popupHitTest(r);gi(i);const a=[];for(const l of s)if("graphic"in l){if(this._isValidPopupGraphic(l.graphic,i)){const c=this._isValidPopupGraphicsLayerView(l.layerView)?l.layerView:void 0;a.push({graphic:l.graphic,layerView:c})}}else this._isValidPopupLocationLayerView(l.layerView)&&a.push({mapPoint:l.mapPoint,layerView:l.layerView});return{hits:a,location:o}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return x([E()],n.prototype,"popup",void 0),x([E()],n.prototype,"popupElement",void 0),x([E()],n.prototype,"popupEnabled",void 0),n=x([ue("esri.views.PopupView")],n),n};let Zqe=class{constructor(e){this.layerView=e,this._resolver=bc(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:n,graphics:r,_resolver:i}=this;if(!n)return i.resolve(r),i.promise;let s;return n.fetchPopupFeaturesFromGraphics(r,e).catch(o=>(s=o,null)).then(o=>{o?i.resolve(o):i.reject(s)}),i.promise}};const Jqe=5e3;var RS;const IN=Dl()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),P1e=IN.jsonValues.slice();c9(P1e,"orthometric");const $T=Dl()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let al=RS=class extends qt{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,n){return IN.write(t,e,n)}readHeightModel(t,e,n){return IN.read(t)||(n?.messages&&n.messages.push(Qqe(t,{context:n})),null)}readHeightUnit(t,e,n){return $T.read(t)||(n?.messages&&n.messages.push(qne(t,{context:n})),null)}readHeightUnitService(t,e,n){return lW(t)||$T.read(t)||(n?.messages&&n.messages.push(qne(t,{context:n})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new RS({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const n=jme(e);return new RS({heightModel:t.heightModel,heightUnit:n??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new RS;return e.read(t,{origin:"web-scene"}),e}};function qne(t,e){return new zd("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function Qqe(t,e){return new zd("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}x([E({type:IN.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:P1e,default:"ellipsoidal",write:{isRequired:!0}}}}})],al.prototype,"heightModel",void 0),x([er("web-scene","heightModel")],al.prototype,"writeHeightModel",null),x([cr(["web-scene","service"],"heightModel")],al.prototype,"readHeightModel",null),x([E({type:$T.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:$T.jsonValues,write:{writer:$T.write,isRequired:!0}}}}})],al.prototype,"heightUnit",void 0),x([cr("web-scene","heightUnit")],al.prototype,"readHeightUnit",null),x([cr("service","heightUnit")],al.prototype,"readHeightUnitService",null),x([E({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],al.prototype,"vertCRS",void 0),x([cr("service","vertCRS",["vertCRS","ellipsoid","geoid"])],al.prototype,"readVertCRS",null),al=RS=x([ue("esri.geometry.HeightModelInfo")],al);let _$;async function eKe(){return _$==null&&(_$=ve(()=>import("./WhereClauseCache-CZ_V2O1i.js"),__vite__mapDeps([76,26,27,77,78,79,80])).then(t=>new t.WhereClauseCache(500,500))),_$}async function tKe(t,e){const n=await eKe(),r=n.get(t,e);if(r==null)throw n.getError(t,e);return r}function g3t(t,e){return t||=null,e||=null,t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function y3t(t,e){return t||=null,e||=null,t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function v3t(t,e){return e.length===0?null:`${t} IN (${nKe(e)})`}function nKe(t){return t.map(e=>typeof e=="string"?rKe(e):e).join(",")}function rKe(t){return`'${t.replaceAll("'","''")}'`}function _3t(t){return typeof t=="number"}function x3t(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function w3t(t){return typeof t=="boolean"}function BI(t){return typeof t=="string"||t instanceof String}function iKe(t){return t==null||BI(t)}function b3t(t){return Array.isArray(t)}function E3t(t){return t?.declaredClass==="esri.Graphic"}function S3t(t){return t instanceof Date}const sKe="HH:mm",oKe="HH:mm:ss",aKe="HH:mm:ss.SSS",lKe=[aKe,oKe,sKe,"TT"],cKe="yyyy-MM-dd";function Kne(t){if(!t||!BI(t))return null;const e=pn.fromFormat(t,cKe);return e.isValid?e:null}function Yne(t){return t&&BI(t)?Lje(lKe,e=>{const n=pn.fromFormat(t,e);return n.isValid?n:null})??null:null}function Xne(t){if(!t||!BI(t))return null;const e=pn.fromISO(t);return e.isValid?e:null}const C1e=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function uKe(t){return t!=null&&C1e.has(t.type)}function R1e(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function M1e(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function N1e(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const hKe=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);WB(C1e,hKe);function T3t(t,e){const n=t?.domain;if(!n||n.type!=="range")return;const r="range"in n?n.range[0]:n.minValue,i="range"in n?n.range[1]:n.maxValue,s=uKe(t);return R1e(t)||N1e(t)||M1e(t)?{...dKe(t,i,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:i!=null&&typeof i=="number"?i:null,rawMin:r,rawMax:i,isInteger:s}}function dKe(t,e,n){return R1e(t)?{min:Kne(n)?.toMillis(),max:Kne(e)?.toMillis(),rawMin:n,rawMax:e}:N1e(t)?{min:Yne(n)?.toMillis(),max:Yne(e)?.toMillis(),rawMin:n,rawMax:e}:M1e(t)?{min:Xne(n)?.toMillis(),max:Xne(e)?.toMillis(),rawMin:n,rawMax:e}:{max:null,min:null}}function fKe(t){if(!t)return;const e=t.match(pKe);return e?.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const pKe=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function k3t(t){return t.match(mKe)?.[1]?.replaceAll("\\'","'")??null}const mKe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let x$;function gKe(){return x$||(x$=(async()=>{const[t,e,n]=await Promise.all([ve(()=>import("./arcadeUtils-DQf4eKCa.js"),__vite__mapDeps([284,285,286,79,287,78,80,288,241,86,289,68,66,28,69,85,290,291,77,136,292,242,243,293])),ve(()=>import("./batchExec-p8TOZQEk.js"),__vite__mapDeps([294,148])),ve(()=>import("./aiServices-CPIEms7c.js").then(r=>r.a),__vite__mapDeps([290,80,287,78,79,288,241,86,291,286]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:n,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel,Pixel:t.Pixel}})()),x$}const yKe=/^([0-9_])/,vKe=/[^a-z0-9_\u0080-\uffff]+/gi;function A3t(t){return t==null?null:t.trim().replaceAll(vKe,"_").replace(yKe,"F$1")||null}const _Ke=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],xKe=["field","normalizationField"];function I3t(t,e){if(t!=null&&e!=null){for(const n of Array.isArray(t)?t:[t])if(Zne(_Ke,n,e),"visualVariables"in n&&n.visualVariables)for(const r of n.visualVariables)Zne(xKe,r,e)}}function Zne(t,e,n){if(t)for(const r of t){const i=VO(r,e),s=i&&typeof i!="function"&&n.get(i);s&&yb(r,s.name,e)}}function P3t(t,e){if(t!=null&&e?.fields?.length)if("startField"in t){const n=e.get(t.startField),r=e.get(t.endField);t.startField=n?.name??null,t.endField=r?.name??null}else{const n=e.get(t.startTimeField),r=e.get(t.endTimeField);t.startTimeField=n?.name??null,t.endTimeField=r?.name??null}}const w$=new Set;function QW(t,e){return t&&e?(w$.clear(),mA(w$,t,e),Array.from(w$).sort()):[]}function mA(t,e,n){if(n)if(e?.fields?.length)if(n.includes("*"))for(const{name:r}of e.fields)t.add(r);else for(const r of n)gA(t,e,r);else{if(n.includes("*"))return t.clear(),void t.add("*");for(const r of n)r!=null&&t.add(r)}}function gA(t,e,n){if(typeof n=="string")if(e){const r=e.get(n);r&&t.add(r.name)}else t.add(n)}function C3t(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(n=>n.name):e}function R3t(t,e,n=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=QW(t,e);return r.length/t.fields.length>=n?["*"]:r}async function ev(t,e,n,r){if(!r)return;const i=fKe(r);if(i)gA(t,e,i);else{const{arcadeUtils:s}=await gKe(),o=s.extractFieldNames(r,n?.partitions??e?.fields?.map(a=>a.name));for(const a of o)gA(t,n?.index??e,a)}}async function eH(t,e,n){if(n&&n!=="1=1"){const r=await tKe(n,e);if(!r.isStandardized)throw new Xe("fieldUtils:collectFilterFields","Where clause is not standardized",{where:n});mA(t,e,r.fieldNames)}}function M3t({displayField:t,fields:e}){return t||(e?.length?wKe(e):null)}function wKe(t){return b$(t,"name-or-title")||b$(t,"unique-identifier")||b$(t,"type-or-category")||bKe(t)}function bKe(t){for(const e of t){if(!e?.name)continue;const n=e.name.toLowerCase();if(n.includes("name")||n.includes("title"))return e.name}return null}function b$(t,e){for(const n of t)if(n?.valueType&&n.valueType===e)return n.name;return null}async function N3t(t,e){if(!e)return;const n=e.elevationInfo?.featureExpressionInfo;return n?n.collectRequiredFields(t,e.fieldsIndex):void 0}function EKe(t,e,n){n.onStatisticExpression?ev(t,e,null,n.onStatisticExpression.expression):t.add(n.onStatisticField)}async function O3t(t,e,n){if(!e||!n||!("fields"in n))return;const r=[],i=n.popupTemplate;r.push(O1e(t,e,i)),n.fields&&r.push(...n.fields.map(async s=>EKe(t,e.fieldsIndex,s))),await Promise.all(r)}async function L3t(t,e){const{fieldsIndex:n,trackInfo:r}=e;if(!e||!r||!n)return;const i=[r.latestObservations.renderer?.collectRequiredFields(t,n),r.previousObservations.renderer?.collectRequiredFields(t,n),r.trackLines.renderer?.collectRequiredFields(t,n)];r.popupTemplate&&i.push(O1e(t,e,r.popupTemplate));for(const s of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(s)for(const o of s)i.push(j1e(t,n,o));await Promise.all(i)}async function O1e(t,e,n){const r=[];n?.expressionInfos&&r.push(...n.expressionInfos.map(s=>ev(t,e.fieldsIndex,null,s.expression)));const i=n?.content;if(Array.isArray(i))for(const s of i)s.type==="expression"&&s.expressionInfo&&r.push(ev(t,e.fieldsIndex,null,s.expressionInfo.expression));await Promise.all(r)}async function D3t(t,e,n){e&&(e.timeInfo&&n?.timeExtent&&mA(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&mA(t,e.fieldsIndex,[e.floorInfo.floorField]),n?.where!=null&&await eH(t,e.fieldsIndex,n.where))}async function j3t(t,e,n){e&&n&&await Promise.all(n.map(r=>SKe(t,e,r)))}async function SKe(t,e,n){e&&n&&(n.valueExpression?await ev(t,e.fieldsIndex,null,n.valueExpression):n.field&&gA(t,e.fieldsIndex,n.field))}function $3t(t){return t?QW(t.fieldsIndex,L1e(t)):[]}function TKe(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?QW(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function F3t(t,e,n){if(!e||!n)return;const r=e.fieldsIndex;await Promise.all(n.filters.map(i=>eH(t,r,i.where)))}const kKe=new Set(["oid","global-id","guid"]),AKe=new Set(["oid","global-id"]),IKe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function PKe(t){const e=new Set;D1e(t).forEach(r=>e.add(r)),TKe(t).forEach(r=>e.add(r.toLowerCase()));const n=t&&"infoFor3D"in t?t.infoFor3D:void 0;return n&&(Object.values(n.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(n.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function L1e(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:n,creatorField:r,editDateField:i,editorField:s}=e;return[n,r,i,s].filter(Boolean)}function D1e(t){return L1e(t).map(e=>e.toLowerCase())}function V3t(t,e){return t.editable&&!kKe.has(t.type)&&!D1e(e).includes(t.name?.toLowerCase()??"")}function z3t(t,e){const n=t.name?.toLowerCase()??"";return!(e?.objectIdField!=null&&n===e.objectIdField.toLowerCase()||e?.globalIdField!=null&&n===e.globalIdField.toLowerCase()||PKe(e).includes(n)||AKe.has(t.type)||IKe.some(r=>r.test(n)))}async function G3t(t,e){const{labelingInfo:n,fieldsIndex:r}=e;n?.length&&await Promise.all(n.map(i=>j1e(t,r,i)))}async function j1e(t,e,n){if(!n)return;const r=n.getLabelExpression(),i=n.where;if(r.type==="arcade")await ev(t,e,null,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{gA(t,e,o.slice(1,-1))})}await eH(t,e,i)}function U3t(t){const e=t.defaultValue;return e!==void 0&&F1e(t,e)?e:t.nullable?null:void 0}function B3t(t){const e=typeof t=="string"?{type:t}:t;return FKe(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function $1e(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function CKe(t){return t===null||$1e(t)}function RKe(t){return t===null||Number.isInteger(t)}function MKe(){return!0}function F1e(t,e){let n;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":n=t.nullable?RKe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":n=t.nullable?CKe:$1e;break;case"string":case"esriFieldTypeString":n=t.nullable?iKe:BI;break;default:n=MKe}return arguments.length===1?n:n(e)}const NKe=["integer","small-integer","big-integer","long"],OKe=["single","double"],LKe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],DKe=["esriFieldTypeSingle","esriFieldTypeDouble"],V1e=new Set([...NKe,...LKe]),jKe=new Set([...OKe,...DKe]),$Ke=WB(V1e,jKe);function W3t(t){return t!=null&&V1e.has(t.type)}function z1e(t){return t!=null&&$Ke.has(t.type)}function FKe(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function VKe(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function zKe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function GKe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function UKe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function H3t(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function q3t(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function K3t(t,e){return BKe(t,e)===null}function Y3t(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function BKe(t,e){return t==null||t.nullable&&e===null?null:F1e(t,e)?z1e(t)&&!WKe(t.type,Number(e))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function WKe(t,e){const n=typeof t=="string"?G1e(t):t;if(!n)return!1;const r=n.min,i=n.max;return n.isInteger?Number.isInteger(e)&&e>=r&&e<=i:e>=r&&e<=i}function G1e(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return HKe;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return qKe;case"esriFieldTypeBigInteger":case"big-integer":return KKe;case"esriFieldTypeSingle":case"single":return YKe;case"esriFieldTypeDouble":case"double":return XKe}}const HKe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},qKe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},KKe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},vR=(2-2**-23)*2**127,YKe={min:-vR,max:vR,isInteger:!1,rawMin:-vR,rawMax:vR},XKe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function X3t(t,e,n){switch(t){case"domain-validation-error::invalid-coded-value":return`Value ${n} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${n} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"type-validation-error::invalid-type":return`Value ${n} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:r,max:i}=G1e(e.type);return`Value ${n} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${i}`}}}function Z3t(t,e){return!ZKe(t,e,null)}function ZKe(t,e,n){if(!t?.attributes||!e)return!0;const r=new Set(Object.keys(t.attributes));let i=!1;for(const s of e)if(!r.has(s)&&(i=!0,n==null))break;return i}function J3t(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function JKe(t){const e=t?.match(/{[^}]+}/g);return e?e.map(n=>n.slice(1,-1).split(":")[0].trim()):[]}let n3=class extends qt{constructor(e){super(e),this.type=null}};x([E({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],n3.prototype,"type",void 0),n3=x([ue("esri.popup.content.Content")],n3);const Lp=n3,_R=new Xs({asc:"ascending",desc:"descending"});let MS=class extends _o(qt){constructor(e){super(e),this.field=null,this.order="ascending"}};x([E({type:String,json:{write:!0}})],MS.prototype,"field",void 0),x([E({type:_R.apiValues,json:{type:_R.jsonValues,read:_R.read,write:_R.write}})],MS.prototype,"order",void 0),MS=x([ue("esri.popup.support.AttachmentsOrderByInfo")],MS);const QKe=MS;let Qh=class extends _o(Lp){constructor(e){super(e),this.attachmentKeywords=null,this.attachmentTypes=null,this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};x([E({type:[String],json:{write:!0}})],Qh.prototype,"attachmentKeywords",void 0),x([E({type:[["application","audio","image","model","text","video"]],json:{write:!0}})],Qh.prototype,"attachmentTypes",void 0),x([E({type:String,json:{write:!0}})],Qh.prototype,"description",void 0),x([E({type:["auto","preview","list"],json:{write:!0}})],Qh.prototype,"displayType",void 0),x([E({type:[QKe],json:{write:!0}})],Qh.prototype,"orderByFields",void 0),x([E({type:String,json:{write:!0}})],Qh.prototype,"title",void 0),x([E({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Qh.prototype,"type",void 0),Qh=x([ue("esri.popup.content.AttachmentsContent")],Qh);const yA=Qh;var O7;let hy=O7=class extends Lp{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new O7({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?Ze(this.outFields):null})}};x([E()],hy.prototype,"creator",void 0),x([E()],hy.prototype,"destroyer",void 0),x([E()],hy.prototype,"outFields",void 0),x([E({type:["custom"],readOnly:!0})],hy.prototype,"type",void 0),hy=O7=x([ue("esri.popup.content.CustomContent")],hy);const eYe=hy;var L7;let ox=L7=class extends qt{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new L7({title:this.title,expression:this.expression})}};x([E({type:String,json:{write:!0}})],ox.prototype,"title",void 0),x([E({type:String,json:{write:!0}})],ox.prototype,"expression",void 0),x([E({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],ox.prototype,"returnType",void 0),ox=L7=x([ue("esri.popup.ElementExpressionInfo")],ox);const tYe=ox;var D7;let NS=D7=class extends Lp{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){return new D7({expressionInfo:this.expressionInfo?.clone()})}};x([E({type:tYe,json:{write:!0}})],NS.prototype,"expressionInfo",void 0),x([E({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],NS.prototype,"type",void 0),NS=D7=x([ue("esri.popup.content.ExpressionContent")],NS);const _L=NS;let r3=class extends _o(qt){constructor(e){super(e),this.type=null}};x([E({type:["date-time","number"],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],r3.prototype,"type",void 0),r3=x([ue("esri.layers.support.FieldFormat")],r3);const tH=r3,U1e="auto";let Pf=class extends tH{constructor(e){super(e),this.dateStyle=null,this.hour12=U1e,this.month=null,this.timeStyle=null,this.type="date-time",this.year=null}};x([E({type:["full","long","medium","short"],json:{write:!0}})],Pf.prototype,"dateStyle",void 0),x([E({type:["always","auto","never"],nonNullable:!0,json:{default:U1e,write:!0}})],Pf.prototype,"hour12",void 0),x([E({type:["long","short"],json:{write:!0}})],Pf.prototype,"month",void 0),x([E({type:["full","long","medium","short"],json:{write:!0}})],Pf.prototype,"timeStyle",void 0),x([E({type:["date-time"]})],Pf.prototype,"type",void 0),x([E({type:["numeric"],json:{write:!0}})],Pf.prototype,"year",void 0),Pf=x([ue("esri.layers.support.DateTimeFieldFormat")],Pf);const m1=Pf,Jne={min:0,max:20},B1e=2,W1e=0,H1e="decimal",q1e="auto";let Mm=class extends tH{constructor(e){super(e),this.maximumFractionDigits=B1e,this.minimumFractionDigits=W1e,this.style=H1e,this.type="number",this.useGrouping=q1e}};x([E({type:jr,nonNullable:!0,range:Jne,json:{default:B1e,write:!0}})],Mm.prototype,"maximumFractionDigits",void 0),x([E({type:jr,nonNullable:!0,range:Jne,json:{default:W1e,write:!0}})],Mm.prototype,"minimumFractionDigits",void 0),x([E({type:["decimal"],nonNullable:!0,json:{default:H1e,write:!0}})],Mm.prototype,"style",void 0),x([E({type:["number"]})],Mm.prototype,"type",void 0),x([E({type:["always","auto","never"],nonNullable:!0,json:{default:q1e,write:!0}})],Mm.prototype,"useGrouping",void 0),Mm=x([ue("esri.layers.support.NumberFieldFormat")],Mm);const PN=Mm;let ax=class extends _o(qt){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};x([yn(rze)],ax.prototype,"dateFormat",void 0),x([E({type:Boolean,json:{write:!0}})],ax.prototype,"digitSeparator",void 0),x([E({type:jr,json:{write:!0}})],ax.prototype,"places",void 0),ax=x([ue("esri.popup.support.FieldInfoFormat")],ax);const Mb=ax,nYe={base:tH,key:"type",errorContext:"field-configuration-field-format",typeMap:{"date-time":m1,number:PN}};function o4t(t,e){const{format:n}=t;return e&&xL(e)?n?K1e(n,e):i3(e,{hour12:"always",useGrouping:"always"}):null}function K1e(t,e){const{dateFormat:n}=t;if(!e)return n?ere(t):Qne(t);if(!xL(e))return;const r={hour12:"always"};switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return Y1e(t);case"single":case"double":return Qne(t);case"date":case"timestamp-offset":return n?ere(t):i3(e,r);case"date-only":return n?rYe(t):i3(e);case"time-only":return n?iYe(t):i3(e,r)}}function xL(t){return z1e(t)||VKe(t)||zKe(t)||UKe(t)||GKe(t)}function Y1e(t){return new PN({useGrouping:t.digitSeparator?"always":"never"})}function Qne(t){const e=Y1e(t),{places:n}=t;return e.minimumFractionDigits=n??0,e.maximumFractionDigits=n??2,e}function ere(t){return new m1({dateStyle:X1e(t),year:eve(t),month:J1e(t),timeStyle:Q1e(t),hour12:Z1e(t)})}function rYe(t){return new m1({dateStyle:X1e(t),year:eve(t),month:J1e(t)})}function iYe(t){return new m1({timeStyle:Q1e(t),hour12:Z1e(t)})}function X1e(t){const{dateFormat:e}=t;return e?e.startsWith("short-date")?"short":e.startsWith("day-short-month-year")?"medium":e.startsWith("long-month-day-year")?"long":e.startsWith("long-date")?"full":null:null}function Z1e(t){return t.dateFormat?.endsWith("-24")?"never":"always"}function J1e(t){switch(t.dateFormat){case"short-month-year":return"short";case"long-month-year":return"long";default:return null}}function Q1e(t){const{dateFormat:e}=t;return e?e.includes("short-time")?"short":e.includes("long-time")?"medium":null:null}function eve(t){switch(t.dateFormat){case"short-month-year":case"long-month-year":case"year":return"numeric";default:return null}}function sYe(t,e){const n=t.type==="number",r=t.type==="date-time";if(!e)return n?tre(t):r?nre(t):null;if(xL(e))switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return n?tve(t):null;case"single":case"double":return n?tre(t):null;case"date":case"timestamp-offset":return r?nre(t):null;case"date-only":return r?oYe(t):null;case"time-only":return r?aYe(t):null}}function tve(t){return new Mb({digitSeparator:t.useGrouping!=="never"})}function tre(t){const e=tve(t);return e.places=t.maximumFractionDigits,e}function nre(t){let e;const n=nve(t),r=rve(t),i=t.hour12==="never"?"24":null,s=t.year==="numeric"?"year":null,o=ive(t);return n&&r&&i?e=`${n}-${r}-${i}`:n&&r?e=`${n}-${r}`:n?e=n:s&&o?e=`${o}-${s}`:s&&(e=s),e?new Mb({dateFormat:e}):null}function oYe(t){let e;const n=nve(t),r=t.year==="numeric"?"year":null,i=ive(t);return n?e=n:r&&i?e=`${i}-${r}`:r&&(e=r),e?new Mb({dateFormat:e}):null}function aYe(t){let e;const n=rve(t),r=t.hour12==="never"?"24":null;return n&&r?e=`short-date-${n}-${r}`:n&&(e=`short-date-${n}`),e?new Mb({dateFormat:e}):null}function nve(t){switch(t.dateStyle){case"short":return"short-date";case"medium":return"day-short-month-year";case"long":return"long-month-day-year";case"full":return"long-date";default:return}}function rve(t){return t.timeStyle&&(t.timeStyle==="short"?"short-time":"long-time")}function ive(t){switch(t.month){case"short":return"short-month";case"long":return"long-month";default:return}}function i3(t,e){if(!xL(t))return;const n=e?.useGrouping??"auto",r=e?.hour12??"auto";switch(t.type){case"integer":case"small-integer":case"big-integer":case"long":return new PN({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:n});case"single":case"double":return new PN({minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:n});case"date":case"timestamp-offset":return new m1({dateStyle:"short",timeStyle:"short",hour12:r});case"date-only":return new m1({dateStyle:"short"});case"time-only":return new m1({timeStyle:"short",hour12:r})}}let Yl=class extends _o(qt){constructor(e){super(e),this.fieldName=null,this.isEditable=!0,this.label=null,this.statisticType=null,this.stringFieldOption="text-box",this.tooltip=null,this.visible=!0}set fieldFormat(e){this._set("fieldFormat",e),this._set("format",e?sYe(e):null)}set format(e){this._set("format",e),this._set("fieldFormat",e?K1e(e):null)}readFormat(e,n){if(!n.fieldFormat)return e?Mb.fromJSON(e):null}clone(){const e=super.clone();return e._set("format",this.format?.clone()),e._set("fieldFormat",this.fieldFormat?.clone()),e}};x([E({value:null,clonable:!1,types:nYe,json:{write:{overridePolicy(t,e,n){const{fieldName:r}=this;return{enabled:!!r&&!r.startsWith("expression/")&&!r.startsWith("relationships/")&&!!n?.writeFieldFormat}}}}})],Yl.prototype,"fieldFormat",null),x([E({type:String,json:{write:!0}})],Yl.prototype,"fieldName",void 0),x([E({value:null,clonable:!1,type:Mb,json:{write:!0}})],Yl.prototype,"format",null),x([cr("format")],Yl.prototype,"readFormat",null),x([E({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Yl.prototype,"isEditable",void 0),x([E({type:String,json:{write:!0}})],Yl.prototype,"label",void 0),x([E({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Yl.prototype,"statisticType",void 0),x([yn(new Xs({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Yl.prototype,"stringFieldOption",void 0),x([E({type:String,json:{write:!0}})],Yl.prototype,"tooltip",void 0),x([E({type:Boolean,json:{write:!0}})],Yl.prototype,"visible",void 0),Yl=x([ue("esri.popup.FieldInfo")],Yl);const sve=Yl;var j7;let Nm=j7=class extends Lp{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}clone(){return new j7(Ze({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};x([E({type:Object,json:{write:!0}})],Nm.prototype,"attributes",void 0),x([E({type:String,json:{write:!0}})],Nm.prototype,"description",void 0),x([E({type:[sve],json:{write:!0}})],Nm.prototype,"fieldInfos",void 0),x([E({type:String,json:{write:!0}})],Nm.prototype,"title",void 0),x([E({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Nm.prototype,"type",void 0),Nm=j7=x([ue("esri.popup.content.FieldsContent")],Nm);const vA=Nm;let dy=class extends qt{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};x([E({type:String,json:{write:!0}})],dy.prototype,"altText",void 0),x([E({type:String,json:{write:!0}})],dy.prototype,"caption",void 0),x([E({type:String,json:{write:!0}})],dy.prototype,"title",void 0),x([E({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],dy.prototype,"type",void 0),dy=x([ue("esri.popup.content.mixins.MediaInfo")],dy);const nH=dy;var $7;let fy=$7=class extends Kt{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new $7({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};x([E()],fy.prototype,"color",void 0),x([E()],fy.prototype,"fieldName",void 0),x([E()],fy.prototype,"tooltip",void 0),x([E()],fy.prototype,"value",void 0),fy=$7=x([ue("esri.popup.content.support.ChartMediaInfoValueSeries")],fy);const lYe=fy;var F7;let Om=F7=class extends qt{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new F7({colors:Ze(this.colors),fields:Ze(this.fields),normalizeField:this.normalizeField,series:Ze(this.series),tooltipField:this.tooltipField})}};x([E({type:[Jn],json:{type:[[jr]],write:!0}})],Om.prototype,"colors",void 0),x([E({type:[String],json:{write:{isRequired:!0}}})],Om.prototype,"fields",void 0),x([E({type:String,json:{write:!0}})],Om.prototype,"normalizeField",void 0),x([E({type:[lYe],json:{read:!1}})],Om.prototype,"series",void 0),x([E({type:String,json:{write:!0}})],Om.prototype,"tooltipField",void 0),Om=F7=x([ue("esri.popup.content.support.ChartMediaInfoValue")],Om);const cYe=Om;let OS=class extends nH{constructor(e){super(e),this.type=null,this.value=void 0}};x([E({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],OS.prototype,"type",void 0),x([E({type:cYe,json:{write:{isRequired:!0}}})],OS.prototype,"value",void 0),OS=x([ue("esri.popup.content.mixins.ChartMediaInfo")],OS);const wL=OS,bL=Dl()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var V7;let s3=V7=class extends wL{constructor(t){super(t),this.type="bar-chart"}clone(){return new V7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};x([E({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:bL.write,isRequired:!0}}})],s3.prototype,"type",void 0),s3=V7=x([ue("esri.popup.content.BarChartMediaInfo")],s3);const ove=s3;var z7;let o3=z7=class extends wL{constructor(t){super(t),this.type="column-chart"}clone(){return new z7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};x([E({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:bL.write,isRequired:!0}}})],o3.prototype,"type",void 0),o3=z7=x([ue("esri.popup.content.ColumnChartMediaInfo")],o3);const ave=o3;var G7;let LS=G7=class extends qt{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new G7({linkURL:this.linkURL,sourceURL:this.sourceURL})}};x([E({type:String,json:{write:!0}})],LS.prototype,"linkURL",void 0),x([E({type:String,json:{write:{isRequired:!0}}})],LS.prototype,"sourceURL",void 0),LS=G7=x([ue("esri.popup.content.support.ImageMediaInfoValue")],LS);const uYe=LS;var U7;let lx=U7=class extends nH{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new U7({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};x([E({type:Number,json:{write:!0}})],lx.prototype,"refreshInterval",void 0),x([E({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],lx.prototype,"type",void 0),x([E({type:uYe,json:{write:{isRequired:!0}}})],lx.prototype,"value",void 0),lx=U7=x([ue("esri.popup.content.ImageMediaInfo")],lx);const lve=lx;var B7;let a3=B7=class extends wL{constructor(t){super(t),this.type="line-chart"}clone(){return new B7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};x([E({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:bL.write,isRequired:!0}}})],a3.prototype,"type",void 0),a3=B7=x([ue("esri.popup.content.LineChartMediaInfo")],a3);const cve=a3;var W7;let l3=W7=class extends wL{constructor(t){super(t),this.type="pie-chart"}clone(){return new W7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};x([E({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:bL.write,isRequired:!0}}})],l3.prototype,"type",void 0),l3=W7=x([ue("esri.popup.content.PieChartMediaInfo")],l3);const uve=l3,H7={base:nH,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":ove,"column-chart":ave,"line-chart":cve,"pie-chart":uve,image:lve}};var q7;let Wu=q7=class extends Lp{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?lve.fromJSON(e):e.type==="barchart"?ove.fromJSON(e):e.type==="columnchart"?ave.fromJSON(e):e.type==="linechart"?cve.fromJSON(e):e.type==="piechart"?uve.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(n=>n.toJSON())}clone(){return new q7(Ze({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};x([E()],Wu.prototype,"activeMediaInfoIndex",void 0),x([E({type:Object,json:{write:!0}})],Wu.prototype,"attributes",void 0),x([E({type:String,json:{write:!0}})],Wu.prototype,"description",void 0),x([E({types:[H7]})],Wu.prototype,"mediaInfos",void 0),x([cr("mediaInfos")],Wu.prototype,"readMediaInfos",null),x([er("mediaInfos")],Wu.prototype,"writeMediaInfos",null),x([E({type:String,json:{write:!0}})],Wu.prototype,"title",void 0),x([E({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Wu.prototype,"type",void 0),Wu=q7=x([ue("esri.popup.content.MediaContent")],Wu);const _A=Wu;var K7;let DS=K7=class extends qt{constructor(t){super(t),this.field=null,this.order=null}clone(){return new K7({field:this.field,order:this.order})}};x([E({type:String,json:{write:!0}})],DS.prototype,"field",void 0),x([E({type:["asc","desc"],json:{write:!0}})],DS.prototype,"order",void 0),DS=K7=x([ue("esri.popup.support.RelatedRecordsInfoFieldOrder")],DS);const hve=DS;let ed=class extends _o(Lp){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};x([E({type:String,json:{write:!0}})],ed.prototype,"description",void 0),x([E({type:Number,json:{type:jr,write:!0}})],ed.prototype,"displayCount",void 0),x([E({type:["list"],json:{write:{isRequired:!0}}})],ed.prototype,"displayType",void 0),x([E({type:[hve],json:{write:!0}})],ed.prototype,"orderByFields",void 0),x([E({type:Number,json:{type:jr,write:{isRequired:!0}}})],ed.prototype,"relationshipId",void 0),x([E({type:String,json:{write:!0}})],ed.prototype,"title",void 0),x([E({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],ed.prototype,"type",void 0),ed=x([ue("esri.popup.content.RelationshipContent")],ed);const xA=ed;var Y7;let jS=Y7=class extends Lp{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new Y7({text:this.text})}};x([E({type:String,json:{write:!0}})],jS.prototype,"text",void 0),x([E({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],jS.prototype,"type",void 0),jS=Y7=x([ue("esri.popup.content.TextContent")],jS);const wA=jS;let Cf=class extends _o(qt){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};x([E({type:String,json:{write:!0}})],Cf.prototype,"title",void 0),x([E({type:String,json:{write:!0}})],Cf.prototype,"description",void 0),x([E({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],Cf.prototype,"type",void 0),x([E({type:Number,json:{type:jr,write:!0}})],Cf.prototype,"associatedNetworkSourceId",void 0),x([E({type:Number,json:{type:jr,write:!0}})],Cf.prototype,"associatedAssetGroup",void 0),x([E({type:Number,json:{type:jr,write:!0}})],Cf.prototype,"associatedAssetType",void 0),Cf=x([ue("esri.popup.support.UtilityNetworkAssociationType")],Cf);const hYe=Cf;let Lm=class extends _o(Lp){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};x([E({type:String,json:{write:!0}})],Lm.prototype,"description",void 0),x([E({type:Number,json:{type:jr,write:!0}})],Lm.prototype,"displayCount",void 0),x([E({type:String,json:{write:!0}})],Lm.prototype,"title",void 0),x([E({type:[hYe],json:{write:!0}})],Lm.prototype,"associationTypes",void 0),x([yn({utilityNetworkAssociations:"utility-network-associations"})],Lm.prototype,"type",void 0),Lm=x([ue("esri.popup.content.UtilityNetworkAssociationsContent")],Lm);const rH=Lm,dYe={base:null,key:"type",typeMap:{attachment:yA,media:_A,text:wA,expression:_L,field:vA,relationship:xA,utilityNetworkAssociations:rH}},fYe={base:null,key:"type",typeMap:{attachment:yA,media:_A,text:wA,expression:_L,field:vA,relationship:xA}};var X7;let py=X7=class extends qt{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new X7({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};x([E({type:String,json:{write:!0}})],py.prototype,"name",void 0),x([E({type:String,json:{write:!0}})],py.prototype,"title",void 0),x([E({type:String,json:{write:!0}})],py.prototype,"expression",void 0),x([E({type:["string","number"],json:{write:!0}})],py.prototype,"returnType",void 0),py=X7=x([ue("esri.popup.ExpressionInfo")],py);const pYe=py;var Z7;let $S=Z7=class extends qt{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new Z7({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};x([E({type:Boolean,json:{write:!0}})],$S.prototype,"returnTopmostRaster",void 0),x([E({type:Boolean,json:{write:!0}})],$S.prototype,"showNoDataRecords",void 0),$S=Z7=x([ue("esri.popup.LayerOptions")],$S);const mYe=$S;var J7;let FS=J7=class extends qt{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new J7({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?Ze(this.orderByFields):null})}};x([E({type:Boolean,json:{write:!0}})],FS.prototype,"showRelatedRecords",void 0),x([E({type:[hve],json:{write:!0}})],FS.prototype,"orderByFields",void 0),FS=J7=x([ue("esri.popup.RelatedRecordsInfo")],FS);const rre=FS;var Q7;let Bc=Q7=class extends kW(Kt){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Q7({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};x([E()],Bc.prototype,"active",void 0),x([E()],Bc.prototype,"className",void 0),x([E()],Bc.prototype,"disabled",void 0),x([E()],Bc.prototype,"icon",void 0),x([E()],Bc.prototype,"id",void 0),x([E()],Bc.prototype,"indicator",void 0),x([E()],Bc.prototype,"title",void 0),x([E()],Bc.prototype,"type",void 0),x([E()],Bc.prototype,"visible",void 0),Bc=Q7=x([ue("esri.support.actions.ActionBase")],Bc);const iH=Bc;var eV;let c3=eV=class extends iH{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new eV({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};x([E()],c3.prototype,"image",void 0),c3=eV=x([ue("esri.support.actions.ActionButton")],c3);const gYe=c3;var tV;let VS=tV=class extends iH{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new tV({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};x([E()],VS.prototype,"image",void 0),x([E()],VS.prototype,"value",void 0),VS=tV=x([ue("esri.support.actions.ActionToggle")],VS);const yYe=VS,QE="relationships/",ire="expression/",vYe=Ot.ofType({key:"type",defaultKeyValue:"button",base:iH,typeMap:{button:gYe,toggle:yYe}}),_Ye={base:Lp,key:"type",typeMap:{media:_A,custom:eYe,text:wA,attachments:yA,fields:vA,expression:_L,relationship:xA,utilityNetworkAssociations:rH}},dve=new Set(["attachments","fields","media","text","expression","relationship"]),xYe=new Set([...dve,"utility-network-associations"]);let bs=class extends _o(qt){constructor(e){super(e),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(n=>Kg(_Ye,n)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||va(e)?e:(kt.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,n){const{popupElements:r}=n;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(n.description,n.mediaInfos,r):this._readPopupInfo(n)}writeWebSceneContent(e,n,r,i){this._writePopupTemplateContent(e,n,i)}writeWebMapContent(e,n,r,i){this._writePopupTemplateContent(e,n,i)}writeFieldInfos(e,n,r,i){const{content:s}=this,o=Array.isArray(s)?s:null,{writeFieldFormat:a,...l}=i||{};if(e){const c=o?o.filter(h=>h.type==="fields"):[],u=c.length&&c.every(h=>h.fieldInfos?.length);n.fieldInfos=e.filter(Boolean).map(h=>{const f=h.toJSON(l);return u&&(f.visible=!1),f})}if(o)for(const c of o)c.type==="fields"&&this._writeFieldsContent(c,n,l)}writeLayerOptions(e,n,r,i){n[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(i)}writeTitle(e,n){n.title=e||""}async collectRequiredFields(e,n,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,n,r,[...i,...this._getContentExpressionInfos(this.content,i)]),mA(e,n,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e,n){const r=new Set;return await this.collectRequiredFields(r,e,n),[...r].sort()}_writePopupTemplateContent(e,n,r){typeof e!="string"?Array.isArray(e)&&(n.popupElements=e.filter(i=>r?.origin==="web-scene"?dve.has(i.type):xYe.has(i.type)).map(i=>i?.toJSON(r)),n.popupElements.forEach(i=>{i.type==="attachments"?this._writeAttachmentContent(n):i.type==="media"?this._writeMediaContent(i,n):i.type==="text"?this._writeTextContent(i,n):i.type==="relationship"&&this._writeRelationshipContent(i,n)})):n.description=e}_writeFieldsContent(e,n,r){const i=e.fieldInfos;if(!Array.isArray(i)||!i.length)return;const s=n.fieldInfos;if(Array.isArray(s))for(const o of i){const a=s.find(l=>l.fieldName?.toLowerCase()===o.fieldName?.toLowerCase());a?a.visible=!0:s.push(o.toJSON(r))}else n.fieldInfos=i.map(o=>o.toJSON(r))}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,n){const r=e.orderByFields?.map(s=>this._toFieldOrderJSON(s,e.relationshipId))||[],i=[...n.relatedRecordsInfo?.orderByFields||[],...r];n.relatedRecordsInfo={showRelatedRecords:!0,...i?.length&&{orderByFields:i}}}_writeTextContent(e,n){!n.description&&e.text&&(n.description=e.text)}_writeMediaContent(e,n){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=Ze(e.mediaInfos);Array.isArray(n.mediaInfos)?n.mediaInfos=[...n.mediaInfos,...r]:n.mediaInfos=r}_readPopupInfoElements(e,n,r){const i={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!n||i.mediaInfos||(s.mediaInfos=n,i.mediaInfos=!0),_A.fromJSON(s)):s.type==="text"?(s.text||!e||i.description||(s.text=e,i.description=!0),wA.fromJSON(s)):s.type==="attachments"?yA.fromJSON(s):s.type==="fields"?vA.fromJSON(s):s.type==="expression"?_L.fromJSON(s):s.type==="relationship"?xA.fromJSON(s):s.type==="utilityNetworkAssociations"?rH.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:n,order:r}=e;if(!n?.startsWith(QE))return null;const i=n.replace(QE,"").split("/");if(i.length!==2)return null;const s=parseInt(i[0],10),o=i[1];return!Number.isNaN(s)&&o?xA.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,n){const{order:r,field:i}=e;return{field:`${QE}${n}/${i}`,order:r}}_readPopupInfo({description:e,mediaInfos:n,showAttachments:r,relatedRecordsInfo:i={showRelatedRecords:!1}}){const s=[];e?s.push(new wA({text:e})):s.push(new vA),Array.isArray(n)&&n.length&&s.push(_A.fromJSON({mediaInfos:n})),r&&s.push(yA.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=i;return o&&a?.length&&a.forEach(l=>{const c=this._toRelationshipContent(l);c&&s.push(c)}),s.length?s:e}_getContentElementFields(e){const n=e?.type;if(n==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(n==="custom")return e.outFields||[];if(n==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(n==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((i,s)=>[...i,...this._getMediaInfoFields(s)],[])]}return n==="text"?this._extractFieldNames(e.text):n==="relationship"||n==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:n,title:r,value:i}=e,s=i||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:c,linkURL:u}=s,h=[...this._extractFieldNames(r),...this._extractFieldNames(n),...this._extractFieldNames(c),...this._extractFieldNames(u),...o??[]];return a&&h.push(a),l&&h.push(l),h}_getContentExpressionInfos(e,n){return Array.isArray(e)?e.reduce((r,i)=>[...r,...i.type==="expression"&&i.expressionInfo?[i.expressionInfo]:[]],n):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((n,r)=>[...n,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,n,r,i){i&&await Promise.all(i.map(s=>ev(e,n,r,s.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:n,visible:r})=>!(r!==void 0&&!r||!n||n.startsWith(QE)||n.startsWith(ire))).map(n=>n.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((n,r)=>[...n,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:n,title:r,type:i}=e,s=i==="button"||i==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(n),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return JKe(e).filter(n=>!(n.startsWith(QE)||n.startsWith(ire)))}};x([E({type:vYe})],bs.prototype,"actions",void 0),x([E()],bs.prototype,"content",void 0),x([Ks("content")],bs.prototype,"castContent",null),x([cr("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],bs.prototype,"readContent",null),x([er("web-scene","content",{popupElements:{type:Ot.ofType(fYe)},showAttachments:{type:Boolean},mediaInfos:{type:Ot.ofType(H7)},description:{type:String},relatedRecordsInfo:{type:rre}})],bs.prototype,"writeWebSceneContent",null),x([er("content",{popupElements:{type:Ot.ofType(dYe)},showAttachments:{type:Boolean},mediaInfos:{type:Ot.ofType(H7)},description:{type:String},relatedRecordsInfo:{type:rre}})],bs.prototype,"writeWebMapContent",null),x([E({type:[pYe],json:{write:!0}})],bs.prototype,"expressionInfos",void 0),x([E({type:[sve]})],bs.prototype,"fieldInfos",void 0),x([er("fieldInfos")],bs.prototype,"writeFieldInfos",null),x([E({type:mYe})],bs.prototype,"layerOptions",void 0),x([er("layerOptions")],bs.prototype,"writeLayerOptions",null),x([E({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],bs.prototype,"lastEditInfoEnabled",void 0),x([E()],bs.prototype,"outFields",void 0),x([E()],bs.prototype,"overwriteActions",void 0),x([E()],bs.prototype,"returnGeometry",void 0),x([E({json:{type:String}})],bs.prototype,"title",void 0),x([er("title")],bs.prototype,"writeTitle",null),bs=x([ue("esri.PopupTemplate")],bs);const wYe=bs,fve=Symbol("idFieldsProviderSymbol");function bYe(t){return!!t&&fve in t}function sre(t){return bYe(t)?t[fve]:void 0}const pve=Symbol("popupProvider");function p4t(t){return typeof t=="object"&&t!==null&&"popupEnabled"in t&&"popupTemplate"in t}function EYe(t){return!!t&&pve in t}function SYe(t){return EYe(t)?t[pve]:null}function m4t(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const n=[];for(const r of e.fieldNames)n.push(t.attributes[r]??null);return JSON.stringify(n)}}}function ore(t,e){if("uniqueIdFields"in e&&e.uniqueIdFields?.length){if(e.uniqueIdFields.length===1)return t.attributes?.[e.uniqueIdFields[0]];const n=e.uniqueIdFields.map(r=>t.attributes?.[r]);return JSON.stringify(n)}return"objectIdField"in e&&e.objectIdField?t.attributes?.[e.objectIdField]:null}const are=new Xs({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let TYe=0,fs=class extends qt{constructor(e){super(e),this.id="sym"+TYe++,this.type=null,this.color=new Jn([0,0,0,1])}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,n){}hash(){return JSON.stringify(this.toJSON())}clone(){}};x([E({type:are.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:are.write,isRequired:!0}}})],fs.prototype,"type",void 0),x([E({type:Jn,json:{write:{allowNull:!0}}})],fs.prototype,"color",void 0),x([cr("color")],fs.prototype,"readColor",null),fs=x([ue("esri.symbols.Symbol")],fs);var nV;let pl=nV=class extends fs{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){if(this.data?.type==="CIMSymbolReference"){const n=this.data.primitiveOverrides;if(n){const r=n.map(i=>{const s=i.valueExpressionInfo;return s?ev(t,e,null,s.expression):null});await Promise.all(r)}}}clone(){return new nV({data:Ze(this.data)})}hash(){return Wfe(JSON.stringify(this.data)).toString()}};x([E({json:{write:!1}})],pl.prototype,"color",void 0),x([E({json:{write:!0}})],pl.prototype,"data",void 0),x([cr("data",["symbol"])],pl.prototype,"readData",null),x([er("data",{})],pl.prototype,"writeData",null),x([yn({CIMSymbolReference:"cim"},{readOnly:!0})],pl.prototype,"type",void 0),pl=nV=x([ue("esri.symbols.CIMSymbol")],pl);let Da=class extends qt{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,n,r){e||(n[r]=e)}};x([E({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Da.prototype,"enabled",void 0),x([er("enabled")],Da.prototype,"writeEnabled",null),x([E({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],Da.prototype,"type",void 0),Da=x([ue("esri.symbols.Symbol3DLayer")],Da);function kYe(t,e){const n=e.transparency!=null?I0e(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new Jn([r[0]||0,r[1]||0,r[2]||0,n]):null}function AYe(t,e){e.color=t.toJSON().slice(0,3);const n=A0e(t.a);n!==0&&(e.transparency=n)}function y0(t){return{type:Jn,nonNullable:t?.nonNullable,json:{type:[jr],default:null,read:{source:["color","transparency"],reader:kYe},write:{target:{color:{type:[jr],isRequired:t?.colorRequiredOnWrite},transparency:{type:jr}},writer:AYe}}}}const Bd={type:Number,cast:Ti,json:{write:!0}};function v4t(t){return t==="emissive"?0:1}let my=class extends qt{constructor(e){super(e),this.color=new Jn([0,0,0,1]),this.extensionLength=0,this.size=Q1(1)}clone(){}cloneProperties(){return{color:Ze(this.color),size:this.size,extensionLength:this.extensionLength}}};x([E({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],my.prototype,"type",void 0),x([E(y0({colorRequiredOnWrite:!0}))],my.prototype,"color",void 0),x([E({...Bd,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],my.prototype,"extensionLength",void 0),x([E(Bd)],my.prototype,"size",void 0),my=x([ue("esri.symbols.edges.Edges3D")],my);const sH=my;var rV;let u3=rV=class extends sH{constructor(t){super(t),this.type="sketch"}clone(){return new rV(this.cloneProperties())}};x([yn({sketch:"sketch"},{readOnly:!0})],u3.prototype,"type",void 0),u3=rV=x([ue("esri.symbols.edges.SketchEdges3D")],u3);const IYe=u3;var iV;let h3=iV=class extends sH{constructor(t){super(t),this.type="solid"}clone(){return new iV(this.cloneProperties())}};x([yn({solid:"solid"},{readOnly:!0})],h3.prototype,"type",void 0),h3=iV=x([ue("esri.symbols.edges.SolidEdges3D")],h3);const PYe=h3,mve={types:{key:"type",base:sH,typeMap:{solid:PYe,sketch:IYe}},json:{write:!0}};var sV;let Nx=sV=class extends qt{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new sV(t)}};x([E({json:{write:!1}})],Nx.prototype,"strength",void 0),x([E({json:{write:!1}})],Nx.prototype,"source",void 0),Nx=sV=x([ue("esri.symbols.support.Symbol3DEmissive")],Nx);var oV;let fc=oV=class extends qt{constructor(t){super(t),this.color=null,this.emissive=new Nx({source:"emissive"})}clone(){const t={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new oV(t)}};x([E(y0())],fc.prototype,"color",void 0),x([E({type:Nx,json:{write:!1}})],fc.prototype,"emissive",void 0),fc=oV=x([ue("esri.symbols.support.Symbol3DMaterial")],fc);var aV,Fw;let Vf=(Fw=class extends Da{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new aV({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},aV=Fw,Fw);x([yn({Extrude:"extrude"},{readOnly:!0})],Vf.prototype,"type",void 0),x([E({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Vf.prototype,"size",void 0),x([E({type:fc,json:{write:!0}})],Vf.prototype,"material",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Vf.prototype,"castShadows",void 0),x([E(mve)],Vf.prototype,"edges",void 0),Vf=aV=x([ue("esri.symbols.ExtrudeSymbol3DLayer")],Vf);let FT=class extends qt{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};x([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],FT.prototype,"type",void 0),FT=x([ue("esri.symbols.patterns.LinePattern3D")],FT);const CYe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var lV;const RYe=Dl()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Yy=lV=class extends FT{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new lV(t)}};x([E({type:["style"],json:{write:{isRequired:!0}}})],Yy.prototype,"type",void 0),x([yn(RYe),E({type:CYe,json:{write:{isRequired:!0}}})],Yy.prototype,"style",void 0),Yy=lV=x([ue("esri.symbols.patterns.LineStylePattern3D")],Yy);let VT=class extends qt{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};x([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],VT.prototype,"type",void 0),VT=x([ue("esri.symbols.patterns.Pattern3D")],VT);const MYe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var cV;let Ox=cV=class extends VT{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new cV({style:this.style})}};x([E({type:["style"],json:{write:{isRequired:!0}}})],Ox.prototype,"type",void 0),x([E({type:MYe,json:{read:!0,write:{isRequired:!0}}})],Ox.prototype,"style",void 0),Ox=cV=x([ue("esri.symbols.patterns.StylePattern3D")],Ox);const NYe={types:{key:"type",base:VT,typeMap:{style:Ox}},json:{write:!0}},gve={types:{key:"type",base:FT,typeMap:{style:Yy}},json:{write:!0}},zT=new Jn("white"),OYe=new Jn([255,255,255,0]);function LYe(t){return t.r===0&&t.g===0&&t.b===0}var uV;let GT=uV=class extends fc{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new uV(t)}};x([yn({multiply:"multiply",replace:"replace",tint:"tint"})],GT.prototype,"colorMixMode",void 0),GT=uV=x([ue("esri.symbols.support.Symbol3DFillMaterial")],GT);function oH(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function DYe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function jYe(t,e,n,r,i,s,o,a,l,c,u,h,f,g,y,_){return[t,e,n,r,i,s,o,a,l,c,u,h,f,g,y,_]}const $Ye=oH();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:$Ye,clone:DYe,create:oH,fromValues:jYe},Symbol.toStringTag,{value:"Module"}));function FYe(t){return t<=jfe?new Array(t).fill(0):new Float64Array(t)}function b4t(t){return(z6e(t)?t.byteLength/8:t.length)<=jfe?Array.from(t):new Float64Array(t)}function E4t(t,e,n){return Array.isArray(t)?t.slice(e,e+n):t.subarray(e,e+n)}function S4t(t){return[...t]}function T4t(t){const e=oH();for(let n=0;n<16;++n)e[n]=t[n];return e}function WI(t=UYe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function aH(t,e,n,r,i,s,o=WI()){return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o[4]=i,o[5]=s,o}function k4t(t,e=WI()){return VYe(t,0,t.length/3,e)}function VYe(t,e,n,r=WI()){return yve(r,hV),zYe(r,t,e,n),r}function A4t(t,e=FYe(24)){const[n,r,i,s,o,a]=t;return e[0]=n,e[1]=r,e[2]=i,e[3]=n,e[4]=r,e[5]=a,e[6]=n,e[7]=o,e[8]=i,e[9]=n,e[10]=o,e[11]=a,e[12]=s,e[13]=r,e[14]=i,e[15]=s,e[16]=r,e[17]=a,e[18]=s,e[19]=o,e[20]=i,e[21]=s,e[22]=o,e[23]=a,e}function I4t(t,e){const n=isFinite(t[2])||isFinite(t[5]);return new Vn(n?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function P4t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function C4t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function R4t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function zYe(t,e,n=0,r=e.length/3){let i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let u=0;u<r;u++)i=Math.min(i,e[n+3*u]),s=Math.min(s,e[n+3*u+1]),o=Math.min(o,e[n+3*u+2]),a=Math.max(a,e[n+3*u]),l=Math.max(l,e[n+3*u+1]),c=Math.max(c,e[n+3*u+2]);t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function M4t(t,e,n){const r=e.length;let i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];if(n)for(let u=0;u<r;u++){const h=e[u];i=Math.min(i,h[0]),s=Math.min(s,h[1]),o=Math.min(o,h[2]),a=Math.max(a,h[0]),l=Math.max(l,h[1]),c=Math.max(c,h[2])}else for(let u=0;u<r;u++){const h=e[u];i=Math.min(i,h[0]),s=Math.min(s,h[1]),a=Math.max(a,h[0]),l=Math.max(l,h[1])}t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function N4t(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function HI(t){return t[0]>=t[3]?0:t[3]-t[0]}function qI(t){return t[1]>=t[4]?0:t[4]-t[1]}function KI(t){return t[2]>=t[5]?0:t[5]-t[2]}function O4t(t){const e=HI(t),n=KI(t),r=qI(t);return Math.sqrt(e*e+n*n+r*r)}function L4t(t,e=[0,0,0]){return e[0]=t[0]+HI(t)/2,e[1]=t[1]+qI(t)/2,e[2]=t[2]+KI(t)/2,e}function D4t(t,e=[0,0,0]){return e[0]=HI(t),e[1]=qI(t),e[2]=KI(t),e}function j4t(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function GYe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function $4t(t,e){return e==null||GYe(t,e)}function F4t(t,e,n,r,i=t){return i[0]=t[0]+e,i[1]=t[1]+n,i[2]=t[2]+r,i[3]=t[3]+e,i[4]=t[4]+n,i[5]=t[5]+r,i}function V4t(t,e,n=t){const r=t[0]+HI(t)/2,i=t[1]+qI(t)/2,s=t[2]+KI(t)/2;return n[0]=r+(t[0]-r)*e,n[1]=i+(t[1]-i)*e,n[2]=s+(t[2]-s)*e,n[3]=r+(t[3]-r)*e,n[4]=i+(t[4]-i)*e,n[5]=s+(t[5]-s)*e,n}function z4t(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function G4t(t,e,n=t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n!==t&&(n[3]=t[3],n[4]=t[4],n[5]=t[5]),n}function U4t(t,e,n=t){return n[3]=e[0],n[4]=e[1],n[5]=e[2],n!==t&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),t}function yve(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function B4t(t){return t?yve(t,hV):WI(hV)}function W4t(t,e=El()){return e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function H4t(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function q4t(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=i,t[5]=Number.POSITIVE_INFINITY,t}function lre(t){return t.length===6}function K4t(t){return HI(t)===0&&qI(t)===0&&KI(t)===0}function Y4t(t,e,n){if(t==null||e==null)return t===e;if(!lre(t)||!lre(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const hV=[1/0,1/0,1/0,-1/0,-1/0,-1/0],UYe=[0,0,0,0,0,0];WI();function X4t(t,{isPrimitive:e,width:n,depth:r,height:i}){const s=e?10:1;if(n==null&&i==null&&r==null)return[s*t[0],s*t[1],s*t[2]];const o=Rb(n,r,i);let a;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const BYe=aH(-.5,-.5,-.5,.5,.5,.5),WYe=aH(-.5,-.5,0,.5,.5,1),HYe=aH(-.5,-.5,0,.5,.5,.5);function Z4t(t){switch(t){case"sphere":case"cube":case"diamond":return BYe;case"cylinder":case"cone":case"inverted-cone":return WYe;case"tetrahedron":return HYe;default:return}}const lH=["butt","square","round"],qYe=[...lH,"none"],vve=["miter","bevel","round"];var dV;let gy=dV=class extends qt{constructor(t){super(t),this.color=new Jn([0,0,0,1]),this.size=Q1(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new dV(t)}};x([E(y0({colorRequiredOnWrite:!0}))],gy.prototype,"color",void 0),x([E({...Bd,json:{write:{isRequired:!0}}})],gy.prototype,"size",void 0),x([E(gve)],gy.prototype,"pattern",void 0),x([E({type:lH,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],gy.prototype,"patternCap",void 0),gy=dV=x([ue("esri.symbols.support.Symbol3DOutline")],gy);var d3,Vw;let tc=(Vw=class extends Da{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new d3(e)}static fromSimpleFillSymbol(e){const n=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Yy({style:e.outline.style}):null,r={size:e.outline?.width??0,color:(e.outline?.color??zT).clone(),pattern:n};return n&&e.outline?.cap&&(r.patternCap=e.outline.cap),new d3({material:new GT({color:(e.color??OYe).clone()}),pattern:e.style&&e.style!=="solid"?new Ox({style:e.style}):null,outline:r})}},d3=Vw,Vw);x([yn({Fill:"fill"},{readOnly:!0})],tc.prototype,"type",void 0),x([E({type:GT,json:{write:!0}})],tc.prototype,"material",void 0),x([E(NYe)],tc.prototype,"pattern",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],tc.prototype,"castShadows",void 0),x([E({type:gy,json:{write:!0}})],tc.prototype,"outline",void 0),x([E(mve)],tc.prototype,"edges",void 0),tc=d3=x([ue("esri.symbols.FillSymbol3DLayer")],tc);var fV;const KYe=Dl()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let yy=fV=class extends qt{constructor(t){super(t)}readHref(t,e,n){return t?wb(t,n):e.dataURI}writeHref(t,e,n,r){t&&(_v(t)?e.dataURI=t:(e.href=P2(t,r),kl(e.href)&&(e.href=Cg(e.href))))}clone(){return new fV({href:this.href,primitive:this.primitive})}equals(t){return t.primitive===this.primitive&&t.href===this.href}};x([E({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],yy.prototype,"href",void 0),x([cr("href")],yy.prototype,"readHref",null),x([er("href",{href:{type:String},dataURI:{type:String}})],yy.prototype,"writeHref",null),x([yn(KYe)],yy.prototype,"primitive",void 0),yy=fV=x([ue("esri.symbols.support.IconSymbol3DLayerResource")],yy);const J4t="circle";let f3=class extends _o(qt){constructor(e){super(e),this.mode="hidden"}equals(e){return this.mode===e.mode}};x([E({type:["adaptive","hidden","visible"],json:{write:{isRequired:!0}}})],f3.prototype,"mode",void 0),f3=x([ue("esri.symbols.support.OccludedVisibility")],f3);const _ve=f3;var pV;let Lx=pV=class extends Kt{constructor(t){super(t),this.x=0,this.y=0}clone(){return new pV({x:this.x,y:this.y})}equals(t){return t.x===this.x&&t.y===this.y}};x([E({type:Number})],Lx.prototype,"x",void 0),x([E({type:Number})],Lx.prototype,"y",void 0),Lx=pV=x([ue("esri.symbols.support.Symbol3DAnchorPosition2D")],Lx);var mV;let zS=mV=class extends qt{constructor(t){super(t),this.color=new Jn([0,0,0,1]),this.size=Q1(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new mV(t)}equals(t){return t.size===this.size&&(this.color==null?t.color==null:this.color.equals(t.color))}};x([E(y0({colorRequiredOnWrite:!0}))],zS.prototype,"color",void 0),x([E({...Bd,json:{write:{isRequired:!0}}})],zS.prototype,"size",void 0),zS=mV=x([ue("esri.symbols.support.Symbol3DIconOutline")],zS);var cx,zw;let oo=(zw=class extends Da{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0,this.occludedVisibility=null}clone(){return new cx({anchor:this.anchor,anchorPosition:Ze(this.anchorPosition),enabled:this.enabled,material:Ze(this.material),outline:Ze(this.outline),resource:Ze(this.resource),angle:this.angle,size:this.size,occludedVisibility:Ze(this.occludedVisibility)})}static fromSimpleMarkerSymbol(e){const n=e.color||zT,r=cre(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||zT).clone()}:null;return new cx({size:e.size,angle:e.angle,resource:{primitive:XYe(()=>kt.getLogger(this.prototype),e.style)},material:{color:n},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const n=!e.color||LYe(e.color)?zT:e.color,r=cre(e);return new cx({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:n.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new cx({resource:{href:npe({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},cx=zw,zw);function cre(t){const e="width"in t?t.width:t.size,n="height"in t?t.height:t.size,r=ure(t.xoffset),i=ure(t.yoffset);return(r||i)&&e&&n?{x:-r/e,y:i/n}:null}function ure(t){return isFinite(t)?t:0}x([E({type:fc,json:{write:!0}})],oo.prototype,"material",void 0),x([E({type:yy,json:{write:!0}})],oo.prototype,"resource",void 0),x([yn({Icon:"icon"},{readOnly:!0})],oo.prototype,"type",void 0),x([E({...Bd,json:{write:{isRequired:!0}}})],oo.prototype,"size",void 0),x([yn({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],oo.prototype,"anchor",void 0),x([E({type:Lx,json:{type:[Number],read:{reader:t=>new Lx({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],oo.prototype,"anchorPosition",void 0),x([E({type:zS,json:{write:!0}})],oo.prototype,"outline",void 0),x([E({type:Number,json:{write:!0,default:0}})],oo.prototype,"angle",void 0),x([E({type:_ve})],oo.prototype,"occludedVisibility",void 0),oo=cx=x([ue("esri.symbols.IconSymbol3DLayer")],oo);const YYe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function XYe(t,e){return YYe[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const ZYe=["begin","end","begin-end"],xve=["arrow","circle","square","diamond","cross","x"];let Yf=class extends _o(qt){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};x([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Yf.prototype,"type",void 0),x([E({type:ZYe,json:{default:"begin-end",write:!0}})],Yf.prototype,"placement",void 0),x([E({type:xve,json:{default:"arrow",write:!0}})],Yf.prototype,"style",void 0),x([E({type:Jn,json:{type:[jr],default:null,write:!0}})],Yf.prototype,"color",void 0),Yf=x([ue("esri.symbols.LineStyleMarker3D")],Yf);var p3,Gw;let ul=(Gw=class extends Da{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Q1(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new p3(e)}static fromSimpleLineSymbol(e){const n={enabled:!0,size:e.width??Q1(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Yy({style:e.style}):null,material:new fc({color:(e.color||zT).clone()}),marker:e.marker?new Yf({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new p3(n)}},p3=Gw,Gw);x([E({type:fc,json:{write:!0}})],ul.prototype,"material",void 0),x([yn({Line:"line"},{readOnly:!0})],ul.prototype,"type",void 0),x([E({type:vve,json:{write:!0,default:"miter"}})],ul.prototype,"join",void 0),x([E({type:lH,json:{write:!0,default:"butt"}})],ul.prototype,"cap",void 0),x([E({...Bd,json:{write:{isRequired:!0}}})],ul.prototype,"size",void 0),x([E(gve)],ul.prototype,"pattern",void 0),x([E({types:{key:"type",base:Yf,typeMap:{style:Yf}},json:{write:!0}})],ul.prototype,"marker",void 0),ul=p3=x([ue("esri.symbols.LineSymbol3DLayer")],ul);var gV;const JYe=Dl()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let GS=gV=class extends qt{clone(){return new gV({href:this.href,primitive:this.primitive})}};x([E({type:String,json:{read:BO,write:C2}})],GS.prototype,"href",void 0),x([yn(JYe)],GS.prototype,"primitive",void 0),GS=gV=x([ue("esri.symbols.support.ObjectSymbol3DLayerResource")],GS);const tNt="sphere";var yV;let Oy=yV=class extends Kt{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new yV({x:this.x,y:this.y,z:this.z})}};x([E({type:Number})],Oy.prototype,"x",void 0),x([E({type:Number})],Oy.prototype,"y",void 0),x([E({type:Number})],Oy.prototype,"z",void 0),Oy=yV=x([ue("esri.symbols.support.Symbol3DAnchorPosition3D")],Oy);var vV,Uw;let io=(Uw=class extends Da{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new vV({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},vV=Uw,Uw);x([E({type:fc,json:{write:!0}})],io.prototype,"material",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],io.prototype,"castShadows",void 0),x([E({type:GS,json:{write:!0}})],io.prototype,"resource",void 0),x([yn({Object:"object"},{readOnly:!0})],io.prototype,"type",void 0),x([E({type:Number,json:{write:!0}})],io.prototype,"width",void 0),x([E({type:Number,json:{write:!0}})],io.prototype,"height",void 0),x([E({type:Number,json:{write:!0}})],io.prototype,"depth",void 0),x([yn({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],io.prototype,"anchor",void 0),x([E({type:Oy,json:{type:[Number],read:{reader:t=>new Oy({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],io.prototype,"anchorPosition",void 0),x([E({type:Number,json:{write:!0}})],io.prototype,"heading",void 0),x([E({type:Number,json:{write:!0}})],io.prototype,"tilt",void 0),x([E({type:Number,json:{write:!0}})],io.prototype,"roll",void 0),x([E({readOnly:!0})],io.prototype,"isPrimitive",null),io=vV=x([ue("esri.symbols.ObjectSymbol3DLayer")],io);var _V,Bw;let Ao=(Bw=class extends Da{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,n){return e??(n.height==null&&n.size!=null?n.size:void 0)}readHeight(e,n){return e??(n.width==null&&n.size!=null?n.size:void 0)}clone(){return new _V({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},_V=Bw,Bw);x([E({type:fc,json:{write:!0}})],Ao.prototype,"material",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ao.prototype,"castShadows",void 0),x([yn({Path:"path"},{readOnly:!0})],Ao.prototype,"type",void 0),x([E({type:["circle","quad"],nonNullable:!0,json:{write:!0,default:"circle"}})],Ao.prototype,"profile",void 0),x([E({type:vve,nonNullable:!0,json:{write:!0,default:"miter"}})],Ao.prototype,"join",void 0),x([E({type:qYe,nonNullable:!0,json:{write:!0,default:"butt"}})],Ao.prototype,"cap",void 0),x([E({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Ao.prototype,"width",void 0),x([cr("width",["width","size","height"])],Ao.prototype,"readWidth",null),x([E({type:Number,json:{write:!0}})],Ao.prototype,"height",void 0),x([cr("height",["height","size","width"])],Ao.prototype,"readHeight",null),x([E({type:["center","bottom","top"],nonNullable:!0,json:{write:!0,default:"center"}})],Ao.prototype,"anchor",void 0),x([E({type:["heading","all"],nonNullable:!0,json:{write:!0,default:"all"}})],Ao.prototype,"profileRotation",void 0),Ao=_V=x([ue("esri.symbols.PathSymbol3DLayer")],Ao);const QYe=["none","underline","line-through"],eXe=["normal","italic","oblique"],tXe=["normal","lighter","bold","bolder"],wve={type:Number,cast:t=>{const e=ac(t);return e===0?1:vu(e,.1,4)},nonNullable:!0},nXe=["left","right","center"],rXe=["baseline","top","middle","bottom"],bve={type:nXe,nonNullable:!0},Eve={type:rXe,nonNullable:!0},nNt=8;var xV;let Xc=xV=class extends qt{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Ti(t)}clone(){return new xV({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};x([E({type:QYe,json:{default:"none",write:!0}})],Xc.prototype,"decoration",void 0),x([E({type:String,json:{write:!0}})],Xc.prototype,"family",void 0),x([E({type:Number,json:{write:{overridePolicy:(t,e,n)=>({enabled:!n||!n.textSymbol3D})}}})],Xc.prototype,"size",void 0),x([Ks("size")],Xc.prototype,"castSize",null),x([E({type:eXe,json:{default:"normal",write:!0}})],Xc.prototype,"style",void 0),x([E({type:tXe,json:{default:"normal",write:!0}})],Xc.prototype,"weight",void 0),Xc=xV=x([ue("esri.symbols.Font")],Xc);var wV;let Dx=wV=class extends qt{constructor(){super(...arguments),this.color=new Jn([0,0,0,1]),this.size=0}clone(){const t={color:Ze(this.color),size:this.size};return new wV(t)}};x([E(y0())],Dx.prototype,"color",void 0),x([E(Bd)],Dx.prototype,"size",void 0),Dx=wV=x([ue("esri.symbols.support.Symbol3DHalo")],Dx);let UT=class extends _o(qt){constructor(e){super(e),this.color=null}};x([E(y0())],UT.prototype,"color",void 0),UT=x([ue("esri.symbols.support.Symbol3DTextBackground")],UT);var m3,Ww;let Ts=(Ww=class extends Da{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline",this.occludedVisibility=null}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,n,r,i){const s={...i,textSymbol3D:!0};n.font=e.write({},s),delete n.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new m3({enabled:this.enabled,font:Ze(this.font),halo:Ze(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:Ze(this.background),occludedVisibility:Ze(this.occludedVisibility)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new m3({font:e.font!=null?e.font.clone():new Xc,halo:iXe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new fc({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new UT({color:e.backgroundColor.clone()}):null})}},m3=Ww,Ww);function iXe(t,e){return t&&e!=null&&e>0?new Dx({color:Ze(t),size:e}):null}x([E({type:Xc,json:{write:!0}})],Ts.prototype,"font",null),x([er("font")],Ts.prototype,"writeFont",null),x([E({type:Dx,json:{write:!0}})],Ts.prototype,"halo",void 0),x([E({...bve,json:{default:"center",write:!0}})],Ts.prototype,"horizontalAlignment",void 0),x([E({...wve,json:{default:1,write:!0}})],Ts.prototype,"lineHeight",void 0),x([E({type:fc,json:{write:!0}})],Ts.prototype,"material",void 0),x([E({type:UT,json:{write:!0}})],Ts.prototype,"background",void 0),x([E(Bd)],Ts.prototype,"size",null),x([E({type:String,json:{write:!0}})],Ts.prototype,"text",void 0),x([yn({Text:"text"},{readOnly:!0})],Ts.prototype,"type",void 0),x([E({...Eve,json:{default:"baseline",write:!0}})],Ts.prototype,"verticalAlignment",void 0),x([E({type:_ve})],Ts.prototype,"occludedVisibility",void 0),Ts=m3=x([ue("esri.symbols.TextSymbol3DLayer")],Ts);var bV,Hw;let zf=(Hw=class extends Da{constructor(e){super(e),this.color=EV.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new bV({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},bV=Hw,Hw);x([E({type:Jn,nonNullable:!0,json:{type:[jr],write:(t,e,n)=>e[n]=t.toArray(1),default:()=>EV.clone(),defaultEquals:t=>t.toCss(!0)===EV.toCss(!0)}})],zf.prototype,"color",void 0),x([yn({Water:"water"},{readOnly:!0})],zf.prototype,"type",void 0),x([E({type:["small","medium","large"],json:{write:!0,default:"medium"}})],zf.prototype,"waterbodySize",void 0),x([E({type:Number,json:{write:!0,default:null}})],zf.prototype,"waveDirection",void 0),x([E({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],zf.prototype,"waveStrength",void 0),zf=bV=x([ue("esri.symbols.WaterSymbol3DLayer")],zf);const EV=new Jn([0,119,190]);var SV;let Xf=SV=class extends Kt{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new SV({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};x([E({type:String})],Xf.prototype,"name",void 0),x([E({type:String})],Xf.prototype,"styleUrl",void 0),x([E({type:String})],Xf.prototype,"styleName",void 0),x([E({type:st})],Xf.prototype,"portal",void 0),Xf=SV=x([ue("esri.symbols.support.StyleOrigin")],Xf);var TV;let BT=TV=class extends Kt{constructor(){super(...arguments),this.url=""}clone(){return new TV({url:this.url})}};x([E({type:String})],BT.prototype,"url",void 0),BT=TV=x([ue("esri.symbols.support.Thumbnail")],BT);const Sve={icon:oo,object:io,line:ul,path:Ao,fill:tc,extrude:Vf,text:Ts,water:zf},sXe=Ot.ofType({base:Da,key:"type",typeMap:Sve,errorContext:"symbol-layer"});let hl=class extends fs{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const n=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=n?.type,i=r||Ot;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.constructed&&kt.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Id(e,this._get("symbolLayers"))}readStyleOrigin(e,n,r){if(e.styleUrl&&e.name){const i=wb(e.styleUrl,r);return new Xf({styleUrl:i,name:e.name})}if(e.styleName&&e.name)return new Xf({portal:r?.portal||st.getDefault(),styleName:e.styleName,name:e.name});r?.messages&&r.messages.push(new zd("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,n,r,i){if(e.styleUrl&&e.name){let s=P2(e.styleUrl,i);kl(s)&&(s=Cg(s)),n.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&i?.portal&&!uje(e.portal.restUrl,i.portal.restUrl)?i?.messages&&i.messages.push(new zd("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):n.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Da||e&&Sve[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};x([E({json:{read:!1,write:!1}})],hl.prototype,"color",null),x([E({type:sXe,nonNullable:!0,json:{write:!0}}),Ks(fme)],hl.prototype,"symbolLayers",null),x([E({type:Xf})],hl.prototype,"styleOrigin",void 0),x([cr("styleOrigin")],hl.prototype,"readStyleOrigin",null),x([er("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],hl.prototype,"writeStyleOrigin",null),x([E({type:BT,json:{read:!1}})],hl.prototype,"thumbnail",void 0),x([E({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],hl.prototype,"type",void 0),hl=x([ue("esri.symbols.Symbol3D")],hl);let jx=class extends qt{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};x([E({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],jx.prototype,"type",void 0),x([E({readOnly:!0})],jx.prototype,"visible",void 0),jx=x([ue("esri.symbols.callouts.Callout3D")],jx);var kV;let g3=kV=class extends qt{constructor(t){super(t),this.color=new Jn("white")}clone(){return new kV({color:Ze(this.color)})}};x([E(y0({colorRequiredOnWrite:!0}))],g3.prototype,"color",void 0),g3=kV=x([ue("esri.symbols.callouts.LineCallout3DBorder")],g3);const oXe=g3;var AV;let Gf=AV=class extends jx{constructor(t){super(t),this.type="line",this.color=new Jn([0,0,0,1]),this.size=Q1(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new AV({color:Ze(this.color),size:this.size,border:Ze(this.border)})}};x([yn({line:"line"})],Gf.prototype,"type",void 0),x([E(y0({colorRequiredOnWrite:!0}))],Gf.prototype,"color",void 0),x([E({...Bd,json:{write:{isRequired:!0}}})],Gf.prototype,"size",void 0),x([E({type:oXe,json:{write:!0}})],Gf.prototype,"border",void 0),x([E({readOnly:!0})],Gf.prototype,"visible",null),Gf=AV=x([ue("esri.symbols.callouts.LineCallout3D")],Gf);function cH(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function Tve(t){return!t||!t.supportsCallout||!t.supportsCallout()?!1:!!t.callout?.visible&&!!cH(t)}function oNt(t){return t.type==="point-3d"||t.type==="label-3d"}function aNt(t){return t.horizontalAlignment==="center"}const kve={types:{key:"type",base:jx,typeMap:{line:Gf}},json:{write:!0}};var IV;let eg=IV=class extends qt{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new IV({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};x([E({...Bd,json:{write:{isRequired:!0}}})],eg.prototype,"screenLength",void 0),x([E({type:Number,nonNullable:!0,json:{write:!0,default:0}})],eg.prototype,"minWorldLength",void 0),x([E({type:Number,json:{write:!0}})],eg.prototype,"maxWorldLength",void 0),eg=IV=x([ue("esri.symbols.support.Symbol3DVerticalOffset")],eg);var y3;const Ave=Ot.ofType({base:null,key:"type",typeMap:{text:Ts}});let cd=y3=class extends hl{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Ave,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Tve(this)}hasVisibleVerticalOffset(){return cH(this)}clone(){return new y3({styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail),callout:Ze(this.callout),verticalOffset:Ze(this.verticalOffset)})}static fromTextSymbol(t){return new y3({symbolLayers:new Ot([Ts.fromTextSymbol(t)])})}};x([E({type:eg,json:{write:!0}})],cd.prototype,"verticalOffset",void 0),x([E(kve)],cd.prototype,"callout",void 0),x([E({json:{read:!1,write:!1}})],cd.prototype,"styleOrigin",void 0),x([E({type:Ave})],cd.prototype,"symbolLayers",void 0),x([yn({LabelSymbol3D:"label-3d"},{readOnly:!0})],cd.prototype,"type",void 0),cd=y3=x([ue("esri.symbols.LabelSymbol3D")],cd);var v3;const Ive=Ot.ofType({base:null,key:"type",typeMap:{line:ul,path:Ao}}),aXe=Ot.ofType({base:null,key:"type",typeMap:{line:ul,path:Ao}});let mg=v3=class extends hl{constructor(t){super(t),this.symbolLayers=new Ive,this.type="line-3d"}clone(){return new v3({styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail)})}static fromSimpleLineSymbol(t){return new v3({symbolLayers:new Ot([ul.fromSimpleLineSymbol(t)])})}};x([E({type:Ive,json:{type:aXe}})],mg.prototype,"symbolLayers",void 0),x([yn({LineSymbol3D:"line-3d"},{readOnly:!0})],mg.prototype,"type",void 0),mg=v3=x([ue("esri.symbols.LineSymbol3D")],mg);var _3;const Pve=Ot.ofType({base:null,key:"type",typeMap:{fill:tc}});let Xy=_3=class extends hl{constructor(t){super(t),this.symbolLayers=new Pve,this.type="mesh-3d"}clone(){return new _3({styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail)})}static fromSimpleFillSymbol(t){return new _3({symbolLayers:new Ot([tc.fromSimpleFillSymbol(t)])})}};x([E({type:Pve})],Xy.prototype,"symbolLayers",void 0),x([yn({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Xy.prototype,"type",void 0),Xy=_3=x([ue("esri.symbols.MeshSymbol3D")],Xy);let US=class extends fs{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};x([yn({esriSLS:"simple-line"},{readOnly:!0})],US.prototype,"type",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],US.prototype,"width",void 0),US=x([ue("esri.symbols.LineSymbol")],US);var PV;let td=PV=class extends qt{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,n,r){e[n]=r?.origin==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,n,r){r?.origin==="web-map"||(e[n]=t)}clone(){return new PV({color:Ze(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};x([E({type:["begin","end","begin-end"],json:{write:!0}})],td.prototype,"placement",void 0),x([yn({"line-marker":"line-marker"},{readOnly:!0}),E({json:{origins:{"web-map":{write:!1}}}})],td.prototype,"type",void 0),x([E({type:xve})],td.prototype,"style",void 0),x([er("style")],td.prototype,"writeStyle",null),x([E({type:Jn,value:null,json:{write:{allowNull:!0}}})],td.prototype,"color",null),x([cr("color")],td.prototype,"readColor",null),x([er("color")],td.prototype,"writeColor",null),td=PV=x([ue("esri.symbols.LineSymbolMarker")],td);const lXe=td;var CV;const E$=new Xs({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Ma=CV=class extends US{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,n,r,i,s){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),n!=null&&(o.width=Ti(n)),r!=null&&(o.cap=r),i!=null&&(o.join=i),s!=null&&(o.miterLimit=Ti(s)),o}clone(){return new CV({color:Ze(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};x([yn({esriSLS:"simple-line"},{readOnly:!0})],Ma.prototype,"type",void 0),x([E({type:E$.apiValues,json:{read:E$.read,write:E$.write}})],Ma.prototype,"style",void 0),x([E({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,n)=>({enabled:t!=="round"&&n?.origin==null})}}})],Ma.prototype,"cap",void 0),x([E({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,n)=>({enabled:t!=="round"&&n?.origin==null})}}})],Ma.prototype,"join",void 0),x([E({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":lXe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ma.prototype,"marker",void 0),x([E({type:Number,json:{read:!1,write:!1}})],Ma.prototype,"miterLimit",void 0),Ma=CV=x([ue("esri.symbols.SimpleLineSymbol")],Ma);let $x=class extends fs{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};x([E({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ma}},json:{default:null,write:!0}})],$x.prototype,"outline",void 0),x([E({type:["simple-fill","picture-fill"],readOnly:!0})],$x.prototype,"type",void 0),$x=x([ue("esri.symbols.FillSymbol")],$x);function cXe(t,e,n){return e.imageData?npe({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):Cve(e.url,n)}function Cve(t,e){if(!kl(t)){const n=hXe(e);if(n)return SI(n,"images",t)}return wb(t,e)}function uXe(t,e,n,r){if(_v(t)){const i=I2(t);if(!i)return;e.contentType=i.mediaType,e.imageData=i.data,n&&n.imageData===e.imageData&&n.url&&C2(n.url,e,"url",r)}else C2(t,e,"url",r)}const Rve={json:{read:{source:["imageData","url"],reader:cXe},write:{writer(t,e,n,r){uXe(t,e,this.source,r)}}}},Mve={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,n){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=Cve(e.url,n)),r}}}};function hXe(t){if(!t)return null;const{origin:e,layer:n}=t;if(e!=="service"&&e!=="portal-item")return null;const r=n?.type;return r==="feature"||r==="stream"?n.parsedUrl?.path:r==="map-image"||r==="tile"?t.url?.path:null}var RV;let sl=RV=class extends $x{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,n,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const i={};return t&&(i.url=t),e&&(i.outline=e),n!=null&&(i.width=Ti(n)),r!=null&&(i.height=Ti(r)),i}clone(){const t=new RV({color:Ze(this.color),height:this.height,outline:Ze(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",Ze(this.source)),t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};x([yn({esriPFS:"picture-fill"},{readOnly:!0})],sl.prototype,"type",void 0),x([E(Rve)],sl.prototype,"url",void 0),x([E({type:Number,json:{write:!0}})],sl.prototype,"xscale",void 0),x([E({type:Number,json:{write:!0}})],sl.prototype,"yscale",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],sl.prototype,"width",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],sl.prototype,"height",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],sl.prototype,"xoffset",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],sl.prototype,"yoffset",void 0),x([E(Mve)],sl.prototype,"source",void 0),sl=RV=x([ue("esri.symbols.PictureFillSymbol")],sl);let Uf=class extends fs{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};x([E({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Uf.prototype,"angle",void 0),x([E({type:["simple-marker","picture-marker"],readOnly:!0})],Uf.prototype,"type",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],Uf.prototype,"xoffset",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],Uf.prototype,"yoffset",void 0),x([E({cast:t=>t==="auto"?t:ac(Ti(t)),json:{write:!0}})],Uf.prototype,"size",void 0),Uf=x([ue("esri.symbols.MarkerSymbol")],Uf);var MV;let ll=MV=class extends Uf{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,n){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=Ti(e)),n!=null&&(r.height=Ti(n)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new MV({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",Ze(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};x([E({json:{write:!1}})],ll.prototype,"color",void 0),x([yn({esriPMS:"picture-marker"},{readOnly:!0})],ll.prototype,"type",void 0),x([E(Rve)],ll.prototype,"url",void 0),x([E(Mve)],ll.prototype,"source",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],ll.prototype,"height",void 0),x([cr("height",["height","size"])],ll.prototype,"readHeight",null),x([E({type:Number,cast:Ti,json:{write:!0}})],ll.prototype,"width",void 0),x([E({json:{write:!1}})],ll.prototype,"size",void 0),ll=MV=x([ue("esri.symbols.PictureMarkerSymbol")],ll);var vy;const Nve=Ot.ofType({base:null,key:"type",typeMap:{icon:oo,object:io,text:Ts}});let fd=vy=class extends hl{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Nve,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Tve(this)}hasVisibleVerticalOffset(){return cH(this)}clone(){return new vy({verticalOffset:Ze(this.verticalOffset),callout:Ze(this.callout),styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new vy({symbolLayers:new Ot([oo.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new vy({symbolLayers:new Ot([oo.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){if(t.data?.symbol?.type!=="CIMPointSymbol")return null;const n=t.data.symbol;return new vy(n?.callout?{symbolLayers:new Ot([oo.fromCIMSymbol(t)]),callout:new Gf({size:.5,color:new Jn([0,0,0])}),verticalOffset:new eg({screenLength:40})}:{symbolLayers:new Ot([oo.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new vy({symbolLayers:new Ot([Ts.fromTextSymbol(t)])})}};x([E({type:eg,json:{write:!0}})],fd.prototype,"verticalOffset",void 0),x([E(kve)],fd.prototype,"callout",void 0),x([E({type:Nve,json:{origins:{"web-scene":{write:!0}}}})],fd.prototype,"symbolLayers",void 0),x([yn({PointSymbol3D:"point-3d"},{readOnly:!0})],fd.prototype,"type",void 0),fd=vy=x([ue("esri.symbols.PointSymbol3D")],fd);var BS;const Ove=Ot.ofType({base:null,key:"type",typeMap:{extrude:Vf,fill:tc,icon:oo,line:ul,object:io,text:Ts,water:zf}});let gg=BS=class extends hl{constructor(t){super(t),this.symbolLayers=new Ove,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&Hg(kt.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&Hg(kt.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(J1(()=>this.symbolLayers,"after-add",({item:e})=>t(e),Jg))}clone(){return new BS({styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail)})}static fromJSON(t){const e=new BS;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const n=e.symbolLayers.at(0),r=e.symbolLayers.at(1);!r.enabled||t.symbolLayers?.[1]&&t.symbolLayers[1].enable===!1||(n.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new BS({symbolLayers:new Ot([tc.fromSimpleFillSymbol(t)])})}};x([E({type:Ove,json:{write:!0}})],gg.prototype,"symbolLayers",void 0),x([yn({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],gg.prototype,"type",void 0),gg=BS=x([ue("esri.symbols.PolygonSymbol3D")],gg);var NV;const S$=new Xs({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Zf=NV=class extends $x{constructor(...t){super(...t),this.color=new Jn([0,0,0,.25]),this.outline=new Ma,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,n){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),n&&(r.color=n),r}clone(){return new NV({color:Ze(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};x([E()],Zf.prototype,"color",void 0),x([E()],Zf.prototype,"outline",void 0),x([yn({esriSFS:"simple-fill"},{readOnly:!0})],Zf.prototype,"type",void 0),x([E({type:S$.apiValues,json:{read:S$.read,write:S$.write}})],Zf.prototype,"style",void 0),Zf=NV=x([ue("esri.symbols.SimpleFillSymbol")],Zf);var OV;const T$=new Xs({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Ql=OV=class extends Uf{constructor(...t){super(...t),this.color=new Jn([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Ma}normalizeCtorArgs(t,e,n,r){if(t&&typeof t!="string")return t;const i={};return t&&(i.style=t),e!=null&&(i.size=Ti(e)),n&&(i.outline=n),r&&(i.color=r),i}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new OV({angle:this.angle,color:Ze(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};x([E()],Ql.prototype,"color",void 0),x([er("color")],Ql.prototype,"writeColor",null),x([yn({esriSMS:"simple-marker"},{readOnly:!0})],Ql.prototype,"type",void 0),x([E()],Ql.prototype,"size",void 0),x([E({type:T$.apiValues,json:{read:T$.read,write:T$.write}})],Ql.prototype,"style",void 0),x([E({type:String,json:{write:!0}})],Ql.prototype,"path",null),x([E({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ma}},json:{default:null,write:!0}})],Ql.prototype,"outline",void 0),Ql=OV=x([ue("esri.symbols.SimpleMarkerSymbol")],Ql);var LV;let Yr=LV=class extends fs{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Xc,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,n){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),n&&(r.color=n),r}writeLineWidth(t,e,n,r){r&&typeof r!="string"?r.origin:e[n]=t}castLineWidth(t){return Ti(t)}writeLineHeight(t,e,n,r){r&&typeof r!="string"?r.origin:e[n]=t}clone(){return new LV({angle:this.angle,backgroundColor:Ze(this.backgroundColor),borderLineColor:Ze(this.borderLineColor),borderLineSize:this.borderLineSize,color:Ze(this.color),font:this.font&&this.font.clone(),haloColor:Ze(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};x([E({type:Jn,json:{write:!0}})],Yr.prototype,"backgroundColor",void 0),x([E({type:Jn,json:{write:!0}})],Yr.prototype,"borderLineColor",void 0),x([E({type:Number,json:{write:!0},cast:Ti})],Yr.prototype,"borderLineSize",void 0),x([E({type:Xc,json:{write:!0}})],Yr.prototype,"font",void 0),x([E({...bve,json:{write:!0}})],Yr.prototype,"horizontalAlignment",void 0),x([E({type:Boolean,json:{write:!0}})],Yr.prototype,"kerning",void 0),x([E({type:Jn,json:{write:!0}})],Yr.prototype,"haloColor",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],Yr.prototype,"haloSize",void 0),x([E({type:Boolean,json:{write:!0}})],Yr.prototype,"rightToLeft",void 0),x([E({type:Boolean,json:{write:!0}})],Yr.prototype,"rotated",void 0),x([E({type:String,json:{write:!0}})],Yr.prototype,"text",void 0),x([yn({esriTS:"text"},{readOnly:!0})],Yr.prototype,"type",void 0),x([E({...Eve,json:{write:!0}})],Yr.prototype,"verticalAlignment",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],Yr.prototype,"xoffset",void 0),x([E({type:Number,cast:Ti,json:{write:!0}})],Yr.prototype,"yoffset",void 0),x([E({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Yr.prototype,"angle",void 0),x([E({type:Number,json:{write:!0}})],Yr.prototype,"width",void 0),x([E({type:Number})],Yr.prototype,"lineWidth",void 0),x([er("lineWidth")],Yr.prototype,"writeLineWidth",null),x([Ks("lineWidth")],Yr.prototype,"castLineWidth",null),x([E(wve)],Yr.prototype,"lineHeight",void 0),x([er("lineHeight")],Yr.prototype,"writeLineHeight",null),Yr=LV=x([ue("esri.symbols.TextSymbol")],Yr);var DV;let cl=DV=class extends fs{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:st.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e?.portal,super.read(t,e)}clone(){return new DV({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){Ape(kt.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if(e?.type!=="cim")throw new Xe("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,n=e?this._fetchCacheKey:null;if(e!=null){const o=n&&e.get(n);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await ve(()=>import("./webStyleSymbolUtils-DH-EECFT.js"),__vite__mapDeps([295,296,204,205,144,89,208]));gi(t);const i=r(this,{portal:this.portal},t);i.catch(o=>{kt.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const s=await i;return e?.set(n,s.clone()),s}};x([E({json:{write:!1}})],cl.prototype,"color",void 0),x([E({type:String,json:{write:!0}})],cl.prototype,"styleName",void 0),x([E({type:st,json:{write:!1}})],cl.prototype,"portal",void 0),x([E({type:String,json:{read:BO,write:C2}})],cl.prototype,"styleUrl",void 0),x([E({type:BT,json:{read:!1}})],cl.prototype,"thumbnail",void 0),x([E({type:String,json:{write:!0}})],cl.prototype,"name",void 0),x([yn({styleSymbolReference:"web-style"},{readOnly:!0})],cl.prototype,"type",void 0),x([E()],cl.prototype,"_fetchCacheKey",null),cl=DV=x([ue("esri.symbols.WebStyleSymbol")],cl);function hNt(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function dNt(t){switch(t?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const uH={base:fs,key:"type",typeMap:{"simple-fill":Zf,"picture-fill":sl,"picture-marker":ll,"simple-line":Ma,"simple-marker":Ql,text:Yr,"label-3d":cd,"line-3d":mg,"mesh-3d":Xy,"point-3d":fd,"polygon-3d":gg,"web-style":cl,cim:pl},errorContext:"symbol"},fNt={base:fs,key:"type",typeMap:{"picture-marker":ll,"simple-marker":Ql,"point-3d":fd,cim:pl},errorContext:"symbol"},pNt={base:fs,key:"type",typeMap:{"simple-line":Ma,"line-3d":mg,cim:pl},errorContext:"symbol"},mNt={base:fs,key:"type",typeMap:{"simple-fill":Zf,"picture-fill":sl,"polygon-3d":gg,cim:pl},errorContext:"symbol"},gNt={base:fs,key:"type",typeMap:{"picture-marker":ll,"simple-marker":Ql,text:Yr,"web-style":cl,cim:pl},errorContext:"symbol"},yNt=ZB({types:uH}),vNt={base:fs,key:"type",typeMap:{"simple-fill":Zf,"picture-fill":sl,"picture-marker":ll,"simple-line":Ma,"simple-marker":Ql,text:Yr,"line-3d":mg,"mesh-3d":Xy,"point-3d":fd,"polygon-3d":gg,"web-style":cl,cim:pl},errorContext:"symbol"},_Nt={base:fs,key:"type",typeMap:{text:Yr,"label-3d":cd},errorContext:"symbol"},xNt={base:fs,key:"type",typeMap:{"line-3d":mg,"mesh-3d":Xy,"point-3d":fd,"polygon-3d":gg,"web-style":cl,cim:pl},errorContext:"symbol"},wNt={base:fs,key:"type",typeMap:{"label-3d":cd},errorContext:"symbol"},bNt=Kg(uH);var jV;function dXe(t){if(!t)return null;const e={};for(const n in t){const r=G2(t[n]);r&&(e[n]=r)}return Object.keys(e).length!==0?e:null}function fXe(t){if(t==null)return null;const e={};for(const n in t){const r=t[n];r&&(e[n]=r.toJSON())}return Object.keys(e).length!==0?e:null}var qw;let ea=(qw=class extends _o(qt){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:RM(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&y$e(kt.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const n=this._get("aggregateGeometries");JSON.stringify(n)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const n=this._get("attributes");n!==e&&(this._set("attributes",e),this._notifyLayer("attributes",n,e))}set geometry(e){const n=this._get("geometry");n!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",n,e))}set popupTemplate(e){const n=this._get("popupTemplate");n!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",n,e))}set symbol(e){const n=this._get("symbol");n!==e&&(this._set("symbol",e),this._notifyLayer("symbol",n,e))}get version(){return this._version}set visible(e){const n=this._get("visible");n!==e&&(this._set("visible",e),this._notifyLayer("visible",n,e))}cloneShallow(){return new jV({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const n=SYe(this.origin);if(n)return n.popupTemplate??(e?n.defaultPopupTemplate:null)??null;const r=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[r,this.sourceLayer,this.layer])if(i&&typeof i=="object"){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,n){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=n,this._notifyLayer("attributes",r,n,e)}else this.attributes={[e]:n}}getObjectId(){const e=sre(this.origin);if(e)return ore(this,e);const n=this.sourceLayer??this.layer;return n?ore(this,n):null}getGlobalId(){const e=sre(this.origin);if(e?.globalIdField)return this.getAttribute(e.globalIdField);const n=this.sourceLayer??this.layer;return n&&"globalIdField"in n&&n.globalIdField?this.getAttribute(n.globalIdField):null}toJSON(){return{aggregateGeometries:fXe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:W4(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:n}=this;if(n?.type==="mesh"){const r={origin:n.origin,transform:n.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,n,r,i){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:n,newValue:r};e==="origin-transform"&&(s.action=i),e==="attributes"&&(s.attributeName=i),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([Ec(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:n})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===n||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=n,this.notifyMeshTransformChanged())}),Ec(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,n)=>e===n,sync:!0})])}},jV=qw,qw);x([E({value:null,json:{read:dXe}})],ea.prototype,"aggregateGeometries",null),x([E({value:null})],ea.prototype,"attributes",null),x([E({value:null,types:qW,json:{read:G2}})],ea.prototype,"geometry",null),x([E({type:Boolean})],ea.prototype,"isAggregate",void 0),x([E({clonable:!1})],ea.prototype,"layer",void 0),x([E({clonable:"reference"})],ea.prototype,"origin",void 0),x([E({type:wYe,value:null})],ea.prototype,"popupTemplate",null),x([E({clonable:"reference"})],ea.prototype,"sourceLayer",void 0),x([E({value:null,types:uH})],ea.prototype,"symbol",null),x([E({clonable:!1,json:{read:!1,write:!1}})],ea.prototype,"_version",void 0),x([E({type:Boolean,value:!0})],ea.prototype,"visible",null),ea=jV=x([ue("esri.Graphic")],ea);let WT=class extends DT{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};x([hme({Type:ea,ensureType:qa(ea)})],WT.prototype,"itemType",void 0),WT=x([ue("esri.support.GraphicsCollection")],WT);let Rf=class extends Kt{constructor(e){super(e),this.view=null,this.baseLayerViews=new Ot,this.groundLayerViews=new Ot,this.referenceLayerViews=new Ot,this._loadingHandle=mn(()=>this.view?.map?.basemap,n=>{n&&n.load().catch(()=>{})},_a)}destroy(){this._set("view",null),this._loadingHandle=ii(this._loadingHandle),this.baseLayerViews.destroyAll(),this.groundLayerViews.destroyAll(),this.referenceLayerViews.destroyAll()}get suspended(){return this.view?.suspended??!0}get updating(){return this.view?.suspended?!1:!!this.view?.map?.basemap?.loaded&&(this.baseLayerViews.some(n=>n.updating)||this.groundLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};x([E({constructOnly:!0})],Rf.prototype,"view",void 0),x([E({readOnly:!0})],Rf.prototype,"baseLayerViews",void 0),x([E({readOnly:!0})],Rf.prototype,"groundLayerViews",void 0),x([E({readOnly:!0})],Rf.prototype,"referenceLayerViews",void 0),x([E({readOnly:!0})],Rf.prototype,"suspended",null),x([E({type:Boolean,readOnly:!0})],Rf.prototype,"updating",null),Rf=x([ue("esri.views.BasemapView")],Rf);const pXe=Rf;let Xl=class extends Kt{constructor(e){super(e),this.factor=1.5,this.offset=qs(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};x([E({type:Number})],Xl.prototype,"factor",void 0),x([E({nonNullable:!0})],Xl.prototype,"offset",void 0),x([E()],Xl.prototype,"position",void 0),x([E({type:Number,range:{min:0}})],Xl.prototype,"size",void 0),x([E()],Xl.prototype,"maskUrl",void 0),x([E()],Xl.prototype,"maskEnabled",void 0),x([E()],Xl.prototype,"overlayUrl",void 0),x([E()],Xl.prototype,"overlayEnabled",void 0),x([E({readOnly:!0})],Xl.prototype,"version",null),x([E({type:Boolean})],Xl.prototype,"visible",void 0),Xl=x([ue("esri.views.Magnifier")],Xl);const Lve=Xl;let Sw=class{constructor(e){this._observable=new MI,this._map=new Map(e)}get size(){return sn(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const n=this._map.delete(e);return n&&this._observable.notify(),n}entries(){return sn(this._observable),this._map.entries()}forEach(e,n){sn(this._observable),this._map.forEach((r,i)=>e.call(n,r,i,this),n)}get(e){return sn(this._observable),this._map.get(e)}has(e){return sn(this._observable),this._map.has(e)}keys(){return sn(this._observable),this._map.keys()}set(e,n){return this._map.set(e,n),this._observable.notify(),this}values(){return sn(this._observable),this._map.values()}[Symbol.iterator](){return sn(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var $V;let WS=$V=class extends qt{constructor(t){super(t),this.name=null,this.code=null}clone(){return new $V({name:this.name,code:this.code})}};x([E({type:String,json:{write:{isRequired:!0}}})],WS.prototype,"name",void 0),x([E({type:[String,Number],json:{write:{isRequired:!0}}})],WS.prototype,"code",void 0),WS=$V=x([ue("esri.layers.support.CodedValue")],WS);const mXe=new Xs({inherited:"inherited",codedValue:"coded-value",range:"range"});let yg=class extends qt{constructor(e){super(e),this.name=null,this.type=null}};x([E({type:String,json:{write:!0}})],yg.prototype,"name",void 0),x([yn(mXe),E({json:{write:{isRequired:!0}}})],yg.prototype,"type",void 0),yg=x([ue("esri.layers.support.Domain")],yg);var FV,Kw;let Fx=(Kw=class extends yg{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let n=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(n=i.name),!!n))}return n}clone(){return new FV({codedValues:Ze(this.codedValues),name:this.name})}},FV=Kw,Kw);x([E({type:[WS],json:{write:{isRequired:!0}}})],Fx.prototype,"codedValues",void 0),x([yn({codedValue:"coded-value"})],Fx.prototype,"type",void 0),Fx=FV=x([ue("esri.layers.support.CodedValueDomain")],Fx);var VV,Yw;let HT=(Yw=class extends yg{constructor(e){super(e),this.type="inherited"}clone(){return new VV}},VV=Yw,Yw);x([yn({inherited:"inherited"})],HT.prototype,"type",void 0),HT=VV=x([ue("esri.layers.support.InheritedDomain")],HT);var zV,Xw;let Ly=(Xw=class extends yg{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new zV({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},zV=Xw,Xw);x([E({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,n){e[n]=[this.minValue||0,t]},isRequired:!0}}})],Ly.prototype,"maxValue",void 0),x([E({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[0]},write:{target:"range",writer(t,e,n){e[n]=[t,this.maxValue||0]},isRequired:!0}}})],Ly.prototype,"minValue",void 0),x([yn({range:"range"})],Ly.prototype,"type",void 0),Ly=zV=x([ue("esri.layers.support.RangeDomain")],Ly);const gXe={key:"type",base:yg,typeMap:{range:Ly,"coded-value":Fx,inherited:HT}};function yXe(t){if(!t?.type)return null;switch(t.type){case"range":return Ly.fromJSON(t);case"codedValue":return Fx.fromJSON(t);case"inherited":return HT.fromJSON(t)}return null}const vXe=new Xs({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var GV;const _Xe=new Xs({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",currency:"currency",dateAndTime:"date-and-time",description:"description",emailAddress:"email-address",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",phoneNumber:"phone-number",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var Zw;let Xo=(Zw=class extends qt{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:n}){let r=null;try{r=n?JSON.parse(n):null}catch{}return r?.value??null}readValueType(e,{description:n}){let r=null;try{r=n?JSON.parse(n):null}catch{}return r?_Xe.fromJSON(r.fieldValueType):null}clone(){return new GV({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},GV=Zw,Zw);x([E({type:String,json:{write:!0}})],Xo.prototype,"alias",void 0),x([E({type:[String,Number],json:{write:{allowNull:!0}}})],Xo.prototype,"defaultValue",void 0),x([E()],Xo.prototype,"description",void 0),x([cr("description")],Xo.prototype,"readDescription",null),x([E({types:gXe,json:{read:{reader:yXe},write:!0}})],Xo.prototype,"domain",void 0),x([E({type:Boolean,json:{write:!0}})],Xo.prototype,"editable",void 0),x([E({type:jr,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Xo.prototype,"length",void 0),x([E({type:String,json:{write:!0}})],Xo.prototype,"name",void 0),x([E({type:Boolean,json:{write:!0}})],Xo.prototype,"nullable",void 0),x([yn(vXe)],Xo.prototype,"type",void 0),x([E()],Xo.prototype,"valueType",void 0),x([cr("valueType",["description"])],Xo.prototype,"readValueType",null),x([E({type:Boolean,json:{read:!1}})],Xo.prototype,"visible",void 0),Xo=GV=x([ue("esri.layers.support.Field")],Xo);var UV;let ux=UV=class extends qt{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new UV({mapLayerId:t,gdbVersion:e})}};x([yn({mapLayer:"map-layer"}),E({json:{write:{isRequired:!0}}})],ux.prototype,"type",void 0),x([E({type:jr,json:{write:{isRequired:!0}}})],ux.prototype,"mapLayerId",void 0),x([E({type:String,json:{write:!0}})],ux.prototype,"gdbVersion",void 0),ux=UV=x([ue("esri.layers.support.source.MapLayerSource")],ux);var BV;let Mf=BV=class extends qt{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:n,spatialReference:r,geometryType:i}=this,s={workspaceId:t,query:e,oidFields:n,spatialReference:r?.clone()??void 0,geometryType:i};return new BV(s)}};x([yn({queryTable:"query-table"}),E({json:{write:{isRequired:!0}}})],Mf.prototype,"type",void 0),x([E({type:String,json:{write:!0}})],Mf.prototype,"workspaceId",void 0),x([E({type:String,json:{write:!0}})],Mf.prototype,"query",void 0),x([E({type:String,json:{write:!0}})],Mf.prototype,"oidFields",void 0),x([E({type:Wt,json:{write:!0}})],Mf.prototype,"spatialReference",void 0),x([yn(QWe)],Mf.prototype,"geometryType",void 0),Mf=BV=x([ue("esri.layers.support.source.QueryTableDataSource")],Mf);var WV;let hx=WV=class extends qt{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new WV({workspaceId:t,dataSourceName:e})}};x([yn({raster:"raster"}),E({json:{write:{isRequired:!0}}})],hx.prototype,"type",void 0),x([E({type:String,json:{write:!0}})],hx.prototype,"dataSourceName",void 0),x([E({type:String,json:{write:!0}})],hx.prototype,"workspaceId",void 0),hx=WV=x([ue("esri.layers.support.source.RasterDataSource")],hx);var HV;let _y=HV=class extends qt{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:n}=this;return new HV({workspaceId:t,gdbVersion:e,dataSourceName:n})}};x([yn({table:"table"}),E({json:{write:{isRequired:!0}}})],_y.prototype,"type",void 0),x([E({type:String,json:{write:!0}})],_y.prototype,"workspaceId",void 0),x([E({type:String,json:{write:!0}})],_y.prototype,"gdbVersion",void 0),x([E({type:String,json:{write:!0}})],_y.prototype,"dataSourceName",void 0),_y=HV=x([ue("esri.layers.support.source.TableDataSource")],_y);var qV,KV;const xXe=Dl()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Zl=qV=class extends qt{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,n){return hre()(t,e,n)}castLeftTableSource(t){return Kg(YV(),t)}readRightTableSource(t,e,n){return hre()(t,e,n)}castRightTableSource(t){return Kg(YV(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:n,rightTableSource:r,joinType:i}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:n?.clone()??void 0,rightTableSource:r?.clone()??void 0,joinType:i};return new qV(s)}};x([yn({joinTable:"join-table"}),E({json:{write:{isRequired:!0}}})],Zl.prototype,"type",void 0),x([E({type:String,json:{write:!0}})],Zl.prototype,"leftTableKey",void 0),x([E({type:String,json:{write:!0}})],Zl.prototype,"rightTableKey",void 0),x([E({json:{write:!0}})],Zl.prototype,"leftTableSource",void 0),x([cr("leftTableSource")],Zl.prototype,"readLeftTableSource",null),x([Ks("leftTableSource")],Zl.prototype,"castLeftTableSource",null),x([E({json:{write:!0}})],Zl.prototype,"rightTableSource",void 0),x([cr("rightTableSource")],Zl.prototype,"readRightTableSource",null),x([Ks("rightTableSource")],Zl.prototype,"castRightTableSource",null),x([yn(xXe)],Zl.prototype,"joinType",void 0),Zl=qV=x([ue("esri.layers.support.source.JoinTableDataSource")],Zl);let k$=null;function hre(){return k$||(k$=ZB({types:YV()})),k$}let A$=null;function YV(){return A$||(A$={key:"type",base:null,typeMap:{"data-layer":Bf,"map-layer":ux}}),A$}const wXe={key:"type",base:null,typeMap:{"join-table":Zl,"query-table":Mf,raster:hx,table:_y}};var Jw;let Bf=(Jw=class extends qt{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:n}=this;return new KV({fields:e,dataSource:n})}},KV=Jw,Jw);x([yn({dataLayer:"data-layer"}),E({json:{write:{isRequired:!0}}})],Bf.prototype,"type",void 0),x([E({type:[Xo],json:{write:!0}})],Bf.prototype,"fields",void 0),x([E({types:wXe,json:{write:!0}})],Bf.prototype,"dataSource",void 0),Bf=KV=x([ue("esri.layers.support.source.DataLayerSource")],Bf),Bf.from=qa(Bf);let xy=class extends _o(qt){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};x([E({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],xy.prototype,"onFields",void 0),x([E({type:String,json:{write:!0}})],xy.prototype,"operator",void 0),x([E({type:String,json:{write:!0}})],xy.prototype,"searchTerm",void 0),x([E({type:String,json:{write:!0}})],xy.prototype,"searchType",void 0),xy=x([ue("esri.rest.support.FullTextSearch")],xy);const bXe=xy;var XV;const dre=new Xs({upperLeft:"upper-left",lowerLeft:"lower-left"});let qm=XV=class extends qt{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new XV(Ze({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};x([E({type:Vn,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],qm.prototype,"extent",void 0),x([E({type:["view","edit"],json:{write:!0}})],qm.prototype,"mode",void 0),x([E({type:String,json:{read:dre.read,write:dre.write}})],qm.prototype,"originPosition",void 0),x([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],qm.prototype,"tolerance",void 0),qm=XV=x([ue("esri.rest.support.QuantizationParameters")],qm);const EXe=t=>{const e=t;let n=class extends e{};return n=x([ue("esri.rest.support.QueryMixin")],n),n},SXe=new Xs({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var ZV;const fre=new Xs({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Hu=ZV=class extends qt{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=Ze(t))}clone(){return new ZV({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Ze(this.statisticParameters)})}};x([E({type:Number,json:{write:!0}})],Hu.prototype,"maxPointCount",void 0),x([E({type:Number,json:{write:!0}})],Hu.prototype,"maxRecordCount",void 0),x([E({type:Number,json:{write:!0}})],Hu.prototype,"maxVertexCount",void 0),x([E({type:String,json:{write:!0}})],Hu.prototype,"onStatisticField",void 0),x([E({type:String,json:{write:!0}})],Hu.prototype,"outStatisticFieldName",void 0),x([E({type:String,json:{read:{source:"statisticType",reader:fre.read},write:{target:"statisticType",writer:fre.write}}})],Hu.prototype,"statisticType",void 0),x([E({type:Object})],Hu.prototype,"statisticParameters",void 0),x([er("statisticParameters")],Hu.prototype,"writeStatisticParameters",null),Hu=ZV=x([ue("esri.rest.support.StatisticDefinition")],Hu);var x3;const TXe=new Xs({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var w1;let rn=(w1=class extends EXe(qt){static from(e){return KO(x3,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,n){n.historicMoment=e&&e.getTime()}writeParameterValues(e,n){if(e){const r={};for(const i in e){const s=e[i];Array.isArray(s)?r[i]=s.map(o=>o instanceof Date?o.getTime():o):s instanceof Date?r[i]=s.getTime():r[i]=s}n.parameterValues=r}}writeStart(e,n){n.resultOffset=this.start,n.resultRecordCount=this.num||10,n.where="1=1"}writeWhere(e,n){n.where=e||"1=1"}clone(){return new x3(Ze({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},x3=w1,w1.MAX_MAX_RECORD_COUNT_FACTOR=5,w1);x([E({json:{write:!0}})],rn.prototype,"aggregateIds",void 0),x([E({type:Boolean,json:{write:!0}})],rn.prototype,"cacheHint",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],rn.prototype,"compactGeometryEnabled",void 0),x([E({json:{write:!0}})],rn.prototype,"datumTransformation",void 0),x([Ks("datumTransformation")],rn.prototype,"castDatumTransformation",null),x([E({type:Boolean,json:{default:!1,write:!0}})],rn.prototype,"defaultSpatialReferenceEnabled",void 0),x([E({type:Number,json:{write:!0}})],rn.prototype,"distance",void 0),x([E({type:Bf,json:{write:!0}})],rn.prototype,"dynamicDataSource",void 0),x([E({type:String,json:{write:!0}})],rn.prototype,"formatOf3DObjects",void 0),x([E({type:[bXe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],rn.prototype,"fullText",void 0),x([E({type:String,json:{write:!0}})],rn.prototype,"gdbVersion",void 0),x([E({types:qW,json:{read:G2,write:!0}})],rn.prototype,"geometry",void 0),x([E({type:Number,json:{write:!0}})],rn.prototype,"geometryPrecision",void 0),x([E({type:[String],json:{write:!0}})],rn.prototype,"groupByFieldsForStatistics",void 0),x([E({type:String,json:{write:!0}})],rn.prototype,"having",void 0),x([E({type:Date})],rn.prototype,"historicMoment",void 0),x([er("historicMoment")],rn.prototype,"writeHistoricMoment",null),x([E({type:Number,json:{write:!0}})],rn.prototype,"maxAllowableOffset",void 0),x([E({type:Number,cast:t=>t<1?1:t>rn.MAX_MAX_RECORD_COUNT_FACTOR?rn.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],rn.prototype,"maxRecordCountFactor",void 0),x([E({type:["xyFootprint"],json:{write:!0}})],rn.prototype,"multipatchOption",void 0),x([E({type:Number,json:{read:{source:"resultRecordCount"}}})],rn.prototype,"num",void 0),x([E({json:{write:!0}})],rn.prototype,"objectIds",void 0),x([E({type:[String],json:{write:!0}})],rn.prototype,"orderByFields",void 0),x([E({type:[String],json:{write:!0}})],rn.prototype,"outFields",void 0),x([E({type:Wt,json:{name:"outSR",write:!0}})],rn.prototype,"outSpatialReference",void 0),x([E({type:[Hu],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],rn.prototype,"outStatistics",void 0),x([E({json:{write:!0}})],rn.prototype,"parameterValues",void 0),x([er("parameterValues")],rn.prototype,"writeParameterValues",null),x([E({type:Qt,json:{write:!0}})],rn.prototype,"pixelSize",void 0),x([E({type:qm,json:{write:!0}})],rn.prototype,"quantizationParameters",void 0),x([E({type:[Object],json:{write:!0}})],rn.prototype,"rangeValues",void 0),x([E({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],rn.prototype,"relationParameter",void 0),x([E({type:String,json:{write:!0}})],rn.prototype,"resultType",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],rn.prototype,"returnCentroid",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],rn.prototype,"returnDistinctValues",void 0),x([E({type:Boolean,json:{default:!0,write:!0}})],rn.prototype,"returnExceededLimitFeatures",void 0),x([E({type:Boolean,json:{write:!0}})],rn.prototype,"returnGeometry",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],rn.prototype,"returnQueryGeometry",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],rn.prototype,"returnM",void 0),x([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],rn.prototype,"returnZ",void 0),x([E({type:Boolean,json:{write:!0}})],rn.prototype,"returnTrueCurves",void 0),x([E({type:Wt,json:{write:!0}})],rn.prototype,"sourceSpatialReference",void 0),x([yn(SXe,{ignoreUnknown:!1,name:"spatialRel"})],rn.prototype,"spatialRelationship",void 0),x([E({type:Number,json:{read:{source:"resultOffset"}}})],rn.prototype,"start",void 0),x([er("start"),er("num")],rn.prototype,"writeStart",null),x([E({type:String,json:{write:!0}})],rn.prototype,"sqlFormat",void 0),x([E({type:String,json:{write:!0}})],rn.prototype,"text",void 0),x([E({type:Ra,json:{write:!0}})],rn.prototype,"timeExtent",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],rn.prototype,"timeReferenceUnknownClient",void 0),x([yn(TXe,{ignoreUnknown:!1}),E({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],rn.prototype,"units",void 0),x([E({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],rn.prototype,"where",void 0),x([er("where")],rn.prototype,"writeWhere",null),rn=x3=x([ue("esri.rest.support.Query")],rn);function Sm(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let Wc=class extends RI{constructor(e){super(e),this._selectionMap=new Sw,this._sources=new Ot,this._trashCan=[],this._layerEditHandles=new Ot,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([mn(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),mn(()=>this.view,e=>{e?.when().then(()=>this.syncSources())},_a),J1(()=>this.sources,"change",e=>{const n=this._selectionMap,r=[];for(const i of e.removed){const s=n.get(i);s&&(n.delete(i),s.highlightHandle?.remove(),r.push({layer:i,selection:[],added:[],removed:[...s.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(ii)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[n,r]=e;return{layer:n,selection:[...r.selection]}})}get count(){let e=0;for(const n of this._selectionMap.values())e+=n.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){Id(e,this._sources)}syncSources(){const e=new Set,n=this.view?.map;if(!n)return;const r=i=>{_ze(i)?(i.layers?.forEach(r),i.tables?.forEach(r)):vze(i)?(i.sublayers?.forEach(r),i.subtables?.forEach(r)):Zte(i)?i.sublayers?.forEach(r):Sm(i)&&e.add(i)};n.allLayers.forEach(r),n.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,n={},r="layerView"){const{view:i,selections:s}=this;if(!i&&r==="layerView")return kt.getLogger(this).warn("Cannot query layer views without a view."),[];const o=(e?.length?s.filter(a=>e.includes(a.layer)):s).map(async a=>{const{layer:l,selection:c}=a;if(!c.length)return;const u=tx(l)?l.parent:l;if(u!=null){if(i&&r==="layerView"&&!pre(u)&&mre(u)){const h=await i.whenLayerView(u).catch(()=>null);if(h)return gre(h,c,n)}return gre(u,c,n)}}).filter(A2);return(await Promise.all(o)).filter(A2)}updateSelection(e){const n=new Map;for(const[s,o]of this._selectionMap)n.set(s,[...o.selection]);let r=!1;const i=e.current.concat(e.added);for(const s of i){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(Sm(o)||tx(o))&&a!==null){const l=kI(n,o,()=>[]);l.includes(a)||(l.push(a),r=!0)}}for(const s of e.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(Sm(o)||tx(o))&&a!==null){const l=n.get(o),c=l?.indexOf(a);c!==void 0&&c>=0&&(l?.splice(c,1),r=!0)}}if(r){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[l,c]of n){const u=s.get(l);u!==void 0&&o.push(u),s.set(l,{selection:c}),a.push({layer:l,selection:c,...oee(u!==void 0?u.selection:[],c)})}this._onSelectionChange(a)}}setSelection(e,n){this._setSelection(e,n)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,n){const r=this._selectionMap.get(e),i=r!==void 0?[...r.selection]:[];for(const s of n)i.includes(s)||i.push(s);this._setSelection(e,i)}removeFromSelection(e,n){const r=this._selectionMap.get(e);if(!r)return;const i=[];for(const s of r.selection)n.includes(s)||i.push(s);this._setSelection(e,i)}toggleInSelection(e,n){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,n);const i=new Set(r.selection),s=new Set(n),o=tFe(i,s);this._setSelection(e,Array.from(o))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const n=[];for(const[r,i]of this._selectionMap.entries())n.push({layer:r,added:[],removed:[...i.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(n)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();if(this.view==null)return;const{sources:e,view:n,_selectionMap:r,showHighlight:i}=this,s=this._vizTaskId;for(const o of e){const a=r.get(o),l=tx(o)?o.parent:o;if(l!=null&&mre(l)){if(pre(l))continue;n.whenLayerView(l).then(c=>{a?.highlightHandle?.remove(),a!=null&&i&&s===this._vizTaskId&&"highlight"in c&&typeof c.highlight=="function"&&a.selection.length>0&&(a.highlightHandle=c.highlight(a.selection,this.highlightName))}).catch(()=>{a?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(ii);const e=new Set(this.sources.map(n=>tx(n)?n.parent:n));for(const n of e)Sm(n)&&"on"in n&&n.on&&this._layerEditHandles.push(n.on("edits",r=>this._onLayerEdit(r,n)))}_onLayerEdit(e,n){if(Zte(n))this._onParentLayerEdit(e,n);else if(e.deletedFeatures.length&&this._selectionMap.has(n)){const r=[];e.deletedFeatures.forEach(({error:i,objectId:s})=>{s!=null&&i==null&&r.push(s)}),this.removeFromSelection(n,r)}}_onParentLayerEdit(e,n){const{deletedFeatures:r,edits:i,updatedFeatures:s}=e;if(i?.updateFeatures?.forEach(o=>{const a=o.getObjectId()??o.attributes[n.objectIdField];if(a==null||s.find(u=>u.objectId===a)?.error)return;const l=n.findSublayerForFeature(o);if(!Sm(l))return;const c=n.sublayers.find(u=>!(!Sm(u)||!this.getSelection(u)?.includes(a)));Sm(c)&&c!==l&&(this.removeFromSelection(c,[a]),this.appendToSelection(l,[a]))}),r.length){const o=[];r.forEach(({error:a,objectId:l})=>{l!=null&&a==null&&o.push(l)}),n.sublayers.forEach(a=>{Sm(a)&&this._selectionMap.has(a)&&this.removeFromSelection(a,o)})}}_setSelection(e,n){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!AXe(r,{selection:n})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...n]});const i={layer:e,selection:[...n],...oee(r!==void 0?r.selection:[],n)};this._onSelectionChange([i])}}};x([E()],Wc.prototype,"_selectionMap",void 0),x([E()],Wc.prototype,"_sources",void 0),x([E({readOnly:!0,nonNullable:!0})],Wc.prototype,"selections",null),x([E({readOnly:!0,nonNullable:!0})],Wc.prototype,"count",null),x([E()],Wc.prototype,"view",void 0),x([E({readOnly:!0,nonNullable:!0})],Wc.prototype,"hasSelection",null),x([E()],Wc.prototype,"showHighlight",void 0),x([E()],Wc.prototype,"sources",null),x([E()],Wc.prototype,"highlightName",void 0),Wc=x([ue("esri.views.SelectionManager")],Wc);const pre=t=>tx(t)?t.parent?.isTable===!0:t.isTable,kXe=t=>t.layer!==void 0,mre=t=>t?.when!==void 0,AXe=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const n=[...t.selection],r=[...e.selection];if(n.length!==r.length)return!1;n.sort(),r.sort();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1}return!0},gre=async(t,e,n={})=>{let r;if(kXe(t)){const i=t;r=i===void 0?null:await i.queryFeatures(new rn({...n,objectIds:e})).then(s=>({data:s,layer:t.layer}))}else{const i=t;r=i===void 0?null:await i.queryFeatures(new rn({...n,objectIds:e})).then(s=>({data:s,layer:i}))}return r},IXe=Wc;let HS=class extends _o(Kt){constructor(e){super(e),this.accentColor=new Jn([255,127,0]),this.textColor=new Jn([255,255,255])}};x([E({type:Jn,nonNullable:!0})],HS.prototype,"accentColor",void 0),x([E({type:Jn,nonNullable:!0})],HS.prototype,"textColor",void 0),HS=x([ue("esri.views.Theme")],HS);const JV=HS,Dve=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],jve={};function $ve(t){return!!jve[t]}function PXe(t){for(const e of t)if(!$ve(e))return!1;return!0}Dve.forEach(t=>{jve[t]=!0});let Fve=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:n,priority:r},i)=>this.inputManager?.installHandlers(i,[n],r))}disconnect(){this.inputManager&&this._handlers.forEach((e,n)=>this.inputManager?.uninstallHandlers(n)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,n,r,i){const s=Array.isArray(e)?e:e.split(",");if(!PXe(s))return s.some($ve)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(n)?a=n:(o=n,a=[]),typeof r=="function"?o=r:i=r,i=i??fp.DEFAULT;const l=this._createUniqueGroupName(),c=new CXe(this.view,s,a,o);this._handlers.set(l,{handler:c,priority:i});for(const u of s){const h=this._handlerCounts.get(u)||0;this._handlerCounts.set(u,h+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],i),Zn(()=>this._removeHandler(l,s))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,n){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of n){const i=this._handlerCounts.get(r);i===void 0||(i===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,i-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},CXe=class extends Js{constructor(e,n,r,i){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of n)switch(s){case"click":this.registerIncoming("click",r,o=>i(NXe(e,o)));break;case"double-click":this.registerIncoming("double-click",r,o=>i(OXe(e,o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>i(LXe(e,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>i(DXe(e,o)));break;case"hold":this.registerIncoming("hold",r,o=>i(jXe(e,o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&i(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>i($Xe(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>i(FXe(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>i(eS(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>i(eS(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>i(eS(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>i(VXe(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>i(zXe(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>i(eS(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>i(eS(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{i(GXe(o))});break;case"focus":this.registerIncoming("focus",r,o=>{i(RXe(o))});break;case"blur":this.registerIncoming("blur",r,o=>{i(MXe(o))})}}_wrapDrag(e){const n=e.data,{x:r,y:i}=n.center,{action:s,pointerType:o,button:a}=n;if(s==="start"&&(this._latestDragStart=n),!this._latestDragStart)return;const l=n.pointer.native,c=n.buttons,{cancelable:u,timestamp:h}=e,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:i,origin:f,pointerType:o,button:a,buttons:c,radius:n.radius,angle:b0e(n.angle),native:l,timestamp:h,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:g=>e.defer(g),preventDefault:()=>e.preventDefault()}}};function RXe(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function MXe(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function NXe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:u}=e;return{type:"click",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:u,screenPoint:qs(s,o),mapPoint:YI(t,s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function OXe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:u}=e;return{type:"double-click",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:u,mapPoint:YI(t,s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function LXe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:u,timestamp:h}=e;return{type:"immediate-click",pointerId:c,pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:h,mapPoint:YI(t,s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function DXe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:u,timestamp:h}=e;return{type:"immediate-double-click",pointerId:c,pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:h,mapPoint:YI(t,s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function jXe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"hold",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:c,mapPoint:YI(t,s,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),defer:u=>e.defer(u),preventDefault:()=>e.preventDefault()}}function YI(t,e,n){return t.toMap(qs(e,n),{exclude:[]})}function $Xe(t){const{key:e,repeat:n,native:r}=t.data,{cancelable:i,timestamp:s}=t;return{type:"key-down",key:e,repeat:n,native:r,timestamp:s,cancelable:i,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function FXe(t){const{key:e,native:n}=t.data,{cancelable:r,timestamp:i}=t;return{type:"key-up",key:e,native:n,timestamp:i,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:s=>t.defer(s),preventDefault:()=>t.preventDefault()}}function eS(t,e){const{x:n,y:r,button:i,buttons:s,native:o,eventId:a}=t.data,l=o.pointerId,c=o.pointerType,{cancelable:u,timestamp:h}=t;return{type:e,x:n,y:r,pointerId:l,pointerType:c,button:i,buttons:s,native:o,timestamp:h,eventId:a,cancelable:u,stopPropagation:()=>t.stopPropagation(),defer:f=>t.defer(f),preventDefault:()=>t.preventDefault()}}function VXe(t){const{x:e,y:n,buttons:r,native:i,eventId:s}=t.data.currentEvent,{button:o}=t.data.startEvent,a=t.data.startEvent.native.pointerId,l=t.data.startEvent.native.pointerType,c=t.data.action,u={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:h,timestamp:f}=t;return{type:"pointer-drag",x:e,y:n,pointerId:a,pointerType:l,button:o,buttons:r,action:c,origin:u,native:i,timestamp:f,eventId:s,cancelable:h,stopPropagation:()=>t.stopPropagation(),defer:g=>t.defer(g),preventDefault:()=>t.preventDefault()}}function zXe(t){const{cancelable:e,data:n,timestamp:r}=t,{x:i,y:s,deltaY:o,native:a}=n;return{type:"mouse-wheel",x:i,y:s,deltaY:o,native:a,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}function GXe(t){const{action:e,state:n,device:r}=t.data,{cancelable:i,timestamp:s}=t,{buttons:o,axes:a}=n;return{type:"gamepad",device:r,timestamp:s,action:e,buttons:o,axes:a,cancelable:i,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}const UXe="z",BXe="r",Vve={cancel:"Escape",complete:"Enter"},NNt={...Vve,redo:BXe,undo:UXe,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},ONt={toggle:"Control"},LNt={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},DNt={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:I1e,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let jNt=class{constructor(){this._bindings=new Map}add(e,n){return this.addToggle(e,r=>{r.type==="key-down"&&n(r)})}addToggle(e,n){const r=WXe.fromDefinition(e,n),i=kI(this._bindings,r.key,()=>[]);return i.push(r),Zn(()=>Mfe(i,r))}register(e,n=fp.WIDGET){return xv([e.on("key-down",r=>this.dispatch(e.inputManager,r),n),e.on("key-up",r=>this.dispatch(e.inputManager,r),n)])}dispatch(e,n){const r=n.key,i=this._bindings.get(r);if(i)for(const s of i)s.process(e,n)}},WXe=class QV{constructor(e,n,r,i,s){this.key=e,this.modifiers=n,this.repeats=r,this.continuePropagation=i,this.callback=s}process(e,n){if(!(n.key!==this.key||"repeat"in n&&n.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||n.stopPropagation(),this.callback(n)}}static fromDefinition(e,n){if(typeof e=="string")return new QV(e,[],!1,!1,n);const{key:r,modifier:i,repeats:s,continuePropagation:o}=e;return new QV(r,i?Array.isArray(i)?i:[i]:[],!!s,!!o,n)}};function HXe(t){return[t.on("before-add",e=>{const n=e.item;if(n==null||t.includes(n))return kt.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();n.onAdd()}),t.on("after-remove",e=>{const n=e.item;n.active&&(n.view.activeTool=null),n.destroy()})]}function ez(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(0)&&t.getEditableFlag(1)}function qXe(t){return t.type==="key-down"&&t.key===Vve.cancel}function nd(t){return qs(t.x,t.y)}function zve(t,e){const n=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return n?qs(e.clientX-n.left,e.clientY-n.top):qs(0,0)}function Gve(t,e){return e instanceof Event?zve(t,e):nd(e)}function Uve(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let w3=class extends Kt{constructor(){super(...arguments),this._pointerLocations=new Map,this._hoveredManipulators=new Sw,this._grabbedManipulators=new Sw,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1}get cursor(){return this._cursorFromMap(this._grabbedManipulators,"grabbing")??this._cursorFromMap(this._hoveredManipulators,"pointer")}get hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,n){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":yre(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!vre(e))break;const i=nd(e),s=O_(i,e.pointerType,n.tools);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,n),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:i,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&n.activeTool==null&&(this._revertToNullActiveTool=!0,n.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:i}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,n);break;case"pointer-drag":{if(!vre(e))break;const i=this._grabbedManipulators.get(e.pointerId),s=i?.manipulator,o=i?.tool;if(s==null||o==null)break;const a=nd(e);a.x=vu(a.x,0,n.view.width),a.y=vu(a.y,0,n.view.height);const l=i.start,c=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,n)}r();break}case"immediate-click":{const i=nd(e),s=O_(i,e.pointerType,n.tools);if(!KXe(e)){for(const c of n.tools)if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let u=!1;c.manipulators.forEach(({manipulator:h})=>{h.selected&&(h.selected=!1,u=!0)}),u&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}if(s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}),I$(o,r);break}case"click":{const i=nd(e),s=O_(i,e.pointerType,n.tools),o=s?.manipulator;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const i=nd(e),s=O_(i,e.pointerType,n.tools),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),I$(o,r);break}case"immediate-double-click":{const i=nd(e),s=O_(i,e.pointerType,n.tools),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),e.pointerType==="mouse"&&I$(o,r);break}}this._onFocusChange(n.tools)}_releaseManipulatorBeforeDragging(e,n,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:n.pointerType,screenPoint:nd(n)}),this._grabbedManipulators.forEach(({manipulator:i},s)=>{i===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,n){const r=this._grabbedManipulators.get(e.pointerId)?.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:nd(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(n.setActiveTool))}_onFocusChange(e){this._updateFocusedManipulatorTools(e)}_updateFocusedManipulatorTools(e){const n=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:i})=>n.add(i)),this._hoveredManipulators.forEach(({tool:i})=>r.add(i));for(const i of e){i.hasGrabbedManipulators=n.has(i),i.hasHoveredManipulators=r.has(i);const s=this._grabbedManipulators.values(),o=v$e(s,({tool:a})=>a===i);i.firstGrabbedManipulator=o!=null?o.manipulator:null}}clearPointers(e,{tools:n,setActiveTool:r},i=!0,s){const o=(a,l)=>a===e&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:c},u)=>{o(a,l)&&(this._grabbedManipulators.delete(u),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),i&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(n)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((n,r)=>{this._updateHoveredStateForPointerAtScreenPosition(qs(n.x,n.y),r,n.pointerType,e)})}handleHoverEvent(e,n){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!yre(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(nd(e),e.pointerId,e.pointerType,n))}_updateHoveredStateForPointerAtScreenPosition(e,n,r,i){let s=O_(e,r,i);const o=this._hoveredManipulators.get(n)?.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(n,s)):this._hoveredManipulators.delete(n),this._onFocusChange(i))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:n},r)=>{e===r&&(this._hoveredManipulators.delete(e),n.hovering=!1)})}_cursorFromMap(e,n){if(!e?.size)return null;for(const{manipulator:r}of e.values())if(r?.interactive){if(r.grabbing&&r.grabCursor)return r.grabCursor;if(r.cursor)return r.cursor}return n}};function O_(t,e,n){for(const r of n){if(r.manipulators==null||!ez(r))continue;const i=r.manipulators.intersect(t,e);if(i!=null)return{tool:r,manipulator:i}}return null}function yre(t){return t==="mouse"}function vre(t){return t.pointerType!=="mouse"||t.button===0}function KXe(t){return!!t.native.shiftKey}function I$(t,e){t?.consumesClicks&&e()}x([E()],w3.prototype,"cursor",null),w3=x([ue("esri.views.interactive.ToolViewManagerManipulatorState")],w3);const _re="attached",P$="tools",YXe=1e3;let rd=class extends Kt{constructor(e){super(e),this._updatingHandles=new p1,this._clock=_b,this._manipulatorState=new w3,this.tools=new Ot,this._interacting=!1,this._interactingTimeout=YXe,this._interactingTimeoutHandle=null}initialize(){this.addHandles([this.view.on(Dve,e=>{this._handleInputEvent(e)},fp.TOOL),...HXe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy(),this._manipulatorState.destroy()}get _manipulatorStateEventArgs(){return{tools:this.tools,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void kt.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const n=this.activeTool;this._set("activeTool",e),n?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const i=ez(r);this.activeTool!=null&&i||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!i)}}get cursor(){const e=this._manipulatorState.cursor;if(e!=null)return e;for(const n of this.tools)if(n.visible&&n.cursor!=null)return n.cursor;return null}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=ii(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([mn(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider.on("elevation-change",e=>this._forEachManipulator(n=>n.onElevationChange(e)))],_re):this.addHandles(mn(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(_re),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){for(const n of this.tools)n.manipulators&&n.manipulators.forEach(({manipulator:r})=>e(r,n))}_handleInputEvent(e){let n=!1;const r={...e,stopPropagation:()=>{n=!0,e.stopPropagation()}};if(this.activeTool!=null)this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r);else for(const i of this.tools)!n&&i.visible&&i.handleInputEvent(r);!n&&qXe(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),n||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this.tools),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(P$);for(const e of this.tools){if(e instanceof Kt){const n=mn(()=>[e.cursor,e.visible,e.editable],()=>{ez(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)});this.addHandles(n,P$)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",n=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,n.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)})],P$)}this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)}_updateToolEditableFlag(e){e.setEditableFlag?.(1,this.activeTool==null||e===this.activeTool)}_removeIncompleteTools(e){this.tools.filter(n=>(e==null||n!==e)&&!n.created&&n.removeIncompleteOnCancel).forEach(n=>{this.tools.remove(n)})}get test(){}};x([E({constructOnly:!0,nonNullable:!0})],rd.prototype,"view",void 0),x([E({value:null})],rd.prototype,"activeTool",null),x([E({readOnly:!0,type:Ot})],rd.prototype,"tools",void 0),x([E()],rd.prototype,"cursor",null),x([E({readOnly:!0})],rd.prototype,"updating",null),x([E()],rd.prototype,"_interacting",void 0),x([E({readOnly:!0})],rd.prototype,"interacting",null),rd=x([ue("esri.views.ToolViewManager")],rd);const XXe=new Jn("cyan"),ZXe=1,JXe=.25,QXe=new Jn("black"),eZe=.4,tZe=.2,zNt=.25,Bve="default",nZe="temporary",rZe=new Jn("yellow");var tz;let Jl=tz=class extends Kt{constructor(t){super(t),this.name=Bve,this.color=XXe.clone(),this.haloColor=null,this.haloOpacity=ZXe,this.fillOpacity=JXe,this.shadowColor=QXe.clone(),this.shadowOpacity=eZe,this.shadowDifference=tZe,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){return new tz({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(t){this.color=t.color.clone(),this.haloColor=t.haloColor?.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};x([E({type:String,constructOnly:!0,nonNullable:!0})],Jl.prototype,"name",void 0),x([E({type:Jn,nonNullable:!0})],Jl.prototype,"color",void 0),x([E({type:Jn})],Jl.prototype,"haloColor",void 0),x([E({nonNullable:!0})],Jl.prototype,"haloOpacity",void 0),x([E({nonNullable:!0})],Jl.prototype,"fillOpacity",void 0),x([E({type:Jn,nonNullable:!0})],Jl.prototype,"shadowColor",void 0),x([E({nonNullable:!0})],Jl.prototype,"shadowOpacity",void 0),x([E({nonNullable:!0})],Jl.prototype,"shadowDifference",void 0),x([E({nonNullable:!0})],Jl.prototype,"haloWidth",void 0),x([E({nonNullable:!0})],Jl.prototype,"haloBlur",void 0),Jl=tz=x([ue("esri.views.support.HighlightOptions")],Jl);const Ng=Jl;function iZe(){return new(Ot.ofType(Ng))([new Ng({name:Bve}),new Ng({name:nZe,color:rZe})])}let dx=class extends Kt{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":sZe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return oZe[this.deviceType]}};x([E({nonNullable:!0,readOnly:!0})],dx.prototype,"nativeIndex",void 0),x([E({type:String,readOnly:!0})],dx.prototype,"deviceType",null),x([E({type:Number,readOnly:!0})],dx.prototype,"axisThreshold",null),dx=x([ue("esri.views.input.gamepad.GamepadInputDevice")],dx);const hH=dx,sZe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),oZe={standard:.15,spacemouse:.025,unknown:0};let qS=class extends Kt{constructor(e){super(e),this.devices=new Ot,this.enabledFocusMode="document"}};x([E({type:Ot.ofType(hH),readOnly:!0})],qS.prototype,"devices",void 0),x([E({type:["document","view","none"]})],qS.prototype,"enabledFocusMode",void 0),qS=x([ue("esri.views.input.gamepad.GamepadSettings")],qS);const aZe=qS;let b3=class extends Kt{constructor(){super(...arguments),this.gamepad=new aZe}};x([E({readOnly:!0})],b3.prototype,"gamepad",void 0),b3=x([ue("esri.views.input.Input")],b3);const lZe=b3,C$=()=>E({type:["pan","rotate","zoom","none"],nonNullable:!0});let wy=class extends Kt{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};x([C$()],wy.prototype,"dragPrimary",void 0),x([C$()],wy.prototype,"dragSecondary",void 0),x([C$()],wy.prototype,"dragTertiary",void 0),x([E({type:["zoom","none"],nonNullable:!0})],wy.prototype,"mouseWheel",void 0),wy=x([ue("esri.views.navigation.NavigationActionMap")],wy);const dH=wy;let Dm=class extends Kt{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};x([E({type:Boolean,nonNullable:!0})],Dm.prototype,"enabled",void 0),x([E({type:hH})],Dm.prototype,"device",void 0),x([E({type:["pan","zoom"],nonNullable:!0})],Dm.prototype,"mode",void 0),x([E({type:["forward-down","forward-up"],nonNullable:!0})],Dm.prototype,"tiltDirection",void 0),x([E({type:Number,nonNullable:!0})],Dm.prototype,"velocityFactor",void 0),Dm=x([ue("esri.views.navigation.gamepad.GamepadSettings")],Dm);const Wve=Dm;let jm=class extends Kt{constructor(e){super(e),this.actionMap=new dH,this.browserTouchPanEnabled=!0,this.gamepad=new Wve,this.momentumEnabled=!0}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){w9(kt.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};x([E({type:dH,nonNullable:!0})],jm.prototype,"actionMap",void 0),x([E({type:Boolean})],jm.prototype,"browserTouchPanEnabled",void 0),x([E({type:Wve,nonNullable:!0})],jm.prototype,"gamepad",void 0),x([E({type:Boolean})],jm.prototype,"momentumEnabled",void 0),x([E({type:Boolean})],jm.prototype,"mouseWheelZoomEnabled",null),jm=x([ue("esri.views.navigation.Navigation")],jm);const EL=jm;function KNt(t,e,n){const r=Hve(t),i=e,s=cZe(r,i,n);if(r){const o=al.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!n&&o!==r.heightUnit){const a=new Xe("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new Xe("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:a})}}if(!uZe(t)||s===4)return new Xe("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(s){case 1:{const o=r?.heightUnit||"unknown",a=i?.heightUnit||"unknown",l=new Xe("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new Xe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:l})}case 2:{const o=r?.heightModel||"unknown",a=i?.heightModel||"unknown",l=new Xe("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new Xe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:l})}case 3:{const o=r?.vertCRS||"unknown",a=i?.vertCRS||"unknown",l=new Xe("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new Xe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:l})}}return null}function cZe(t,e,n){if(!xre(t)||!xre(e))return 4;if(t==null||e==null)return 0;if(!n&&t.heightUnit!==e.heightUnit)return 1;if(t.heightModel!==e.heightModel)return 2;switch(t.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return t.vertCRS===e.vertCRS?0:3;default:return 4}}function xre(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function uZe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!Yve(t)}function Hve(t){if(t.type==="integrated-mesh-3dtiles"||t.type==="gaussian-splat")return null;const e=t.url?II(t.url):void 0;return!(t.spatialReference?.vcsWkid==null&&e!=null&&e.serverType==="ImageServer")&&qve(t)&&t.heightModelInfo?t.heightModelInfo:Yve(t)?al.deriveUnitFromSR(dZe,t.spatialReference):null}function qve(t){return"heightModelInfo"in t}function Kve(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Yve(t){return Kve(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):Xve(t)}function hZe(t){return t.layers!=null||Xve(t)||Kve(t)||qve(t)}function Xve(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"gaussian-splat":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const dZe=new al({heightModel:"gravity-related-height"});let nz,R$=null;async function fZe(t){R$||(R$=ve(()=>import("./geometryServiceUtils-nirLJjHY.js"),__vite__mapDeps([297,298])).then(e=>nz=e)),await R$,gi(t)}async function Zve(t,e,n,r){if(!t)return null;const i=t.spatialReference;return Op()||Sh(i,e)?Sv(t,e):nz?nz.projectGeometry(t,e,n,r):(await Promise.race([fZe(r),Qg(r)]),Zve(t,e,n,r))}async function YNt(t,e){try{return t?.spatialReference?await Pye(t,e):null}catch{return null}}let Kr=class extends Kt{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=B1(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),n=[];return this.priorityCollection!=null&&n.push(this.priorityCollection),n.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),n}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,r=>{const i=this._getSupportedSpatialReferences(r);if(i.length>0){const s=this._narrowDownSpatialReferenceCandidates(e,i);s!=null&&(e=s)}return e?.length===1})&&e?.length!==1)return{updating:!0};const n=this._pickSpatialReferenceCandidate(e);return{spatialReference:n?.spatialReference??null,viewingMode:n?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),n=this.spatialReference;if(!n)return{updating:this._spatialReferenceTask.updating};let r;const i=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers}],s=>!(!("tileInfo"in s)||!s.tileInfo?.spatialReference.equals(n))&&(r=s,!0),s=>"tileInfo"in s);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:i}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const n=this._collectLayers(this.mapCollections,r=>{const i=Hve(r);return!!i&&(e={heightModelInfo:i,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid},!0)},r=>hZe(r));return{...e,updating:n}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],n=this._collectLayers(this.mapCollections,r=>{const i="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:i[0],o=i.find(a=>a.spatialReference.equals(this.spatialReference))??s;if(o)return e.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of i)e.push({extent:a,layer:r});return!1});return{candidates:e,updating:n}}get _extentTask(){const{candidates:e,updating:n}=this._extentCandidatesTask;if(n)return{updating:n};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),i=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&i.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=B1(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:i.clone(),task:ZO(async s=>{try{const o=await Zve(r.extent,i,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(ya(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,n){if(e==null)return n;const r=new Array;for(const i of e)for(const s of n){if(!i.spatialReference.equals(s.spatialReference))continue;const o=mZe(i.viewingMode,s.viewingMode);if(o!==!1){r.push({spatialReference:i.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const n=this.defaultSpatialReference;return e==null||e.length<1?n?{spatialReference:n,viewingMode:null}:null:(n!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(n))&&(e=e.filter(({spatialReference:r})=>r.equals(n))),e.length>1&&e.some(({viewingMode:r})=>r!==2)&&(e=e.filter(({viewingMode:r})=>r!==2)),e[0])}_getSupportedSpatialReferences(e){const n="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(n.length===0)return[];const r=[];for(const i of n){const s=this.getSpatialReferenceSupport(i,e);if(s!=null){const o=s.constraints??[{spatialReference:i,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(e){const n=this.spatialReference;return e.find(({extent:r})=>n.equals(r.spatialReference))||e[0]}_collectLayers(e,n,r=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const i=new pZe(r,n);for(const s of e)if(this._collectCollection(s,i),i.done||i.preloading===this.sourcePreloadCount)break;return i.updating}_collectCollection(e,n){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return n.updating=!0,void++n.preloading;case"failed":return}for(const r of e.layers)if((r.type!=="graphics"||!r.internal)&&n.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":n.updating=!0,++n.preloading;break;case"loaded":if(n.updating||(n.done=n.pushLayer(r)),n.done||n.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},n)}if(n.done||n.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(n=>{Ea(n)}),"loading"):e.loadStatus:"loaded"}};x([E()],Kr.prototype,"required",void 0),x([E({constructOnly:!0})],Kr.prototype,"map",void 0),x([E({constructOnly:!0})],Kr.prototype,"getSpatialReferenceSupport",void 0),x([E()],Kr.prototype,"defaultSpatialReference",void 0),x([E()],Kr.prototype,"userSpatialReference",void 0),x([E()],Kr.prototype,"sourcePreloadCount",void 0),x([E()],Kr.prototype,"priorityCollection",void 0),x([E()],Kr.prototype,"requiresExtentInSpatialReference",void 0),x([E()],Kr.prototype,"suspended",void 0),x([E({readOnly:!0})],Kr.prototype,"ready",null),x([E({readOnly:!0})],Kr.prototype,"heightModelInfoReady",null),x([E({readOnly:!0})],Kr.prototype,"spatialReference",null),x([E({readOnly:!0})],Kr.prototype,"extent",null),x([E({readOnly:!0})],Kr.prototype,"heightModelInfo",null),x([E({readOnly:!0})],Kr.prototype,"vcsWkid",null),x([E({readOnly:!0})],Kr.prototype,"latestVcsWkid",null),x([E({readOnly:!0})],Kr.prototype,"viewingMode",null),x([E({readOnly:!0})],Kr.prototype,"tileInfo",null),x([E({readOnly:!0})],Kr.prototype,"mapCollections",null),x([E({readOnly:!0})],Kr.prototype,"_spatialReferenceTask",null),x([E({readOnly:!0})],Kr.prototype,"_tileInfoTask",null),x([E({readOnly:!0})],Kr.prototype,"_heightModelInfoTask",null),x([E({readOnly:!0})],Kr.prototype,"_extentCandidatesTask",null),x([E()],Kr.prototype,"_extentTask",null),x([E()],Kr.prototype,"_projectExtentTask",void 0),Kr=x([ue("esri.views.support.DefaultsFromMap")],Kr);let pZe=class{constructor(e,n){this.layerFilter=e,this.pushLayer=n,this.preloading=-1,this.updating=!1,this.done=!1}};function mZe(t,e){return t!=null?e!=null?t===e&&t:t:e}function gZe(t){return"tryRecycleWith"in t}let yZe=class{constructor(e,n,r){this.layer=e,this.view=n,this.layerViewImporter=r,this._controller=new AbortController,this._started=!1,this.done=!1,this._deferred=bc(),this.promise=this._deferred.promise,yu(this._controller.signal,()=>{this._recycleController?.abort();const i=new Xe("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred?.reject(i)})}tryRecycle(e){if(!this.done||!this.layerView||!gZe(this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;const n=this.layer.type,r=this._recycleController.signal;for(let i=0;i<e.length;i++){const s=e[i];if(s.type!==n)continue;const o=this.layerView.tryRecycleWith(s,{signal:r});if(o){e.splice(i,1),this.layer=s;const a=this.layerView,l=a.view;return this.promise=o.then(()=>(gi(r),s.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),s.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:n,view:r}=this;n.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:n,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:n},layer:r}=this;this._map=e.map;try{let i,s;if(await r.load({signal:n}),r.prefetchResources&&await r.prefetchResources({signal:n}),vZe(r))i=await r.createLayerView(e,{signal:n});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new Xe("layer:view-not-supported","No layerview implementation was found");const l=await this.layerViewImporter.importLayerView(r);gi(n),i="default"in l?new l.default({layer:r,view:e}):new l({layer:r,view:e})}const o=()=>{s=ii(s),i.destroyed||i.destroy(),this.done=!0};s=yu(n,o),gi(n);try{await i.when()}catch(l){throw o(),l}if(!this._map?.allLayers?.includes(r))return o(),void this._deferred?.reject(new Xe("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=i,r.emit("layerview-create",{view:e,layerView:i}),e.emit("layerview-create",{layer:r,layerView:i}),this.done=!0,this._deferred?.resolve(i)}catch(i){r.emit("layerview-create-error",{view:e,error:i}),e.emit("layerview-create-error",{layer:r,error:i}),this.done=!0,this._deferred?.reject(new Xe("layerview:create-error","layerview creation failed",{layer:r,error:i}))}}};function vZe(t){return t.createLayerView!==wi.prototype.createLayerView}function _Ze(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let nl=class extends Kt{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new p1,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const n=this.view.map?.allLayers;if(n)for(const r of n)this.layerViewFilter?.(r)!==!1&&this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=bc(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Tb(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const{map:n}=this.view;if(!n)return void this.clear();if(this._map!==n&&(this.clear(),this._map=n),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,i=[],s=this.view.ready,o=u=>{if(u!=null){for(const h of u)if(h){if(this.layerViewFilter?.(h)===!1)continue;r.add(h);const f=this._layerLayerViewInfoMap.get(h);f&&s?f.start():f||this._recyclingInfoMap.has(h)||i.push(h),"layers"in h&&h.layers&&o(h.layers)}}};for(const u of this._rootCollectionNames)o(wd(this,u));const a=new Array,l=u=>{const h=u.tryRecycle(i);h?(this._recyclingInfoMap.set(u.layer,u),this.notifyChange("updating"),h.then(()=>{this._recyclingInfoMap.delete(u.layer),this._layerLayerViewInfoMap.set(u.layer,u),this._reschedule(),this.notifyChange("updating")}).catch(f=>{Ea(f)||(this._recyclingInfoMap.delete(u.layer),u.destroy(),this._reschedule(),this.notifyChange("updating"))})):a.push(u)};for(const u of this._layerLayerViewInfoMap.values())r.has(u.layer)||(this._layerLayerViewInfoMap.delete(u.layer),l(u));for(const u of this._recyclingInfoMap.values())r.has(u.layer)||(this._recyclingInfoMap.delete(u.layer),l(u));for(const u of i)this._createLayerView(u);this._refreshCollections(),a.forEach(u=>u.destroy());const c=[n?.ground?.layers,n?.basemap?.baseLayers,n?.basemap?.groundLayers,n?.basemap?.referenceLayers,n?.layers].filter(u=>!!u);r.forEach(u=>"layers"in u&&c.push(u.layers)),this.addHandles(c.map(u=>this._watchUpdatingTracking.addOnCollectionChange(()=>u,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null},this._layersToLayerViews=new Map(e.layerviewMapping)}initialize(){this.addHandles([J1(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),mn(()=>{const e=this.view,n=e?.map;return[n?.basemap,n?.ground,n?.layers,e?.ready]},()=>this._reschedule(),sa)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),sR(this._recyclingInfoMap),sR(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Cr()),this._workPromise=null)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Ije(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const n of this._layerLayerViewInfoMap.values())n.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),sR(this._layerLayerViewInfoMap),sR(this._recyclingInfoMap))}async whenLayerView(e){await this._reschedule();const n=this._layerLayerViewInfoMap.get(e)?.promise;if(!n){const r=this._recyclingInfoMap.get(e)?.promise;if(!r)throw new Xe("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return r}return n}isCreatingLayerViewsForLayer(e,n){this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!r?.done)return!0;const i=r.layerView;return!(!i||!n||i.parent===n)||!!(r.done&&i&&"layers"in e&&e.layers?.length)&&e.layers.some(s=>this.isCreatingLayerViewsForLayer(s,i))}_refreshCollections(){for(const[e,n]of this._layersToLayerViews)this._populateLayerViewsOwners(wd(this,e),wd(this,n),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){for(const e of this._layersToLayerViews.values())wd(this,e)?.removeAll()}_populateLayerViewsOwners(e,n,r){if(!e||!n)return void n?.removeAll();let i=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!o?.layerView)continue;const{layerView:a}=o;a.layer=s,a.parent=r,n.at(i)!==a&&n.splice(i,0,a),"layers"in s&&_Ze(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),++i}i<n.length&&n.splice(i)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const n=new yZe(e,this.view,this.layerViewImporter);n.promise?.then(()=>this._refreshCollections(),r=>{r&&(Ea(r)||r.name==="cancelled:layerview-create")||kt.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this.destroyed||this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,n),this.view.ready&&n.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};x([E()],nl.prototype,"_workPromise",void 0),x([E({readOnly:!0})],nl.prototype,"_watchUpdatingTracking",void 0),x([E({readOnly:!0})],nl.prototype,"_layersToLayerViews",void 0),x([E({constructOnly:!0})],nl.prototype,"layerviewMapping",void 0),x([E({readOnly:!0})],nl.prototype,"_rootCollectionNames",null),x([E({constructOnly:!0})],nl.prototype,"layerViewFilter",void 0),x([E()],nl.prototype,"layerViewImporter",void 0),x([E()],nl.prototype,"supportsGround",void 0),x([E({readOnly:!0})],nl.prototype,"updating",null),x([E({readOnly:!0})],nl.prototype,"updatingRemaining",null),x([E({constructOnly:!0})],nl.prototype,"view",void 0),nl=x([ue("esri.views.support.LayerViewManager")],nl);const xZe=nl;let fx=class extends Kt{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};x([E()],fx.prototype,"featureTitleFields",void 0),x([E()],fx.prototype,"utilityNetworkFields",void 0),x([E()],fx.prototype,"globalIdField",void 0),fx=x([ue("esri.views.support.RequiredFieldsOptions")],fx);const wZe=fx;var px,$g;let Lt=($g=class extends XO(eW){constructor(e){super(e),this._userSpatialReference=null,this.handles=new Eb,this.updatingHandles=new p1,this.allLayerViews=new th({getCollections:()=>this.layerviewCollections,getChildrenFunction:EZe}),this.analyses=new B2,this.basemapView=null,this.dependencies={popup:void 0},this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new WT,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Ot,this.magnifier=new Lve,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new Ot,this._highPriorityCursorHandles=new Ot,this.input=new lZe,this.navigation=new EL,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new Fve(this),this.persistableViewModels=new Ot,this.requiredFieldsOptions=new wZe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(mn(()=>this.preconditionsReady,n=>{const r=this.ready;if(n?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,px.views.add(this)):(this._lockedSpatialReference=null,px.views.remove(this)),this.notifyChange("spatialReference"),!n&&r)this.toolViewManager?.detach(),this.analysisViewManager?.detach(),this.layerViewManager?.clear(),this._teardown();else if(n&&!r){try{this._startup()}catch(i){return void queueMicrotask(()=>{this.fatalError=new Xe("view:startup-error","View._startup failed",i)})}this.analysisViewManager?.attach(),this.toolViewManager.attach()}},Jg))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this._validateWithErrorDisplay()]).then(()=>(this._isValid=!0,TW(()=>this.ready)))),this.basemapView=new pXe({view:this}),this.layerViewManager=new xZe({view:this,layerViewFilter:e=>this.layerViewFilter?.(e)??!0,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},layerviewMapping:this._layerToLayerviewMapping}),this.toolViewManager=new rd({view:this}),this.selectionManager=new IXe({view:this}),this.addHandles([Ec(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{kt.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),mn(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},sa),mn(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Jg),mn(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},sa)])}get _layerToLayerviewMapping(){return px._layerToLayerview}destroy(){this.destroyed||(px.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Di(this.graphics),this.analyses=Di(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.analysisViewManager=Di(this.analysisViewManager),this.toolViewManager=Di(this.toolViewManager),this.layerViewManager=Di(this.layerViewManager),this.selectionManager=Di(this.selectionManager),this.basemapView=Di(this.basemapView),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this.handles.destroy(),this.map=Di(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return kt.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get layerviewCollections(){return[this.basemapView?.baseLayerViews,this.basemapView?.groundLayerViews,this.layerViews,this.basemapView?.referenceLayerViews]}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Kr({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,n)=>this.getSpatialReferenceSupport(e,n),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??iZe()}set highlights(e){this._set("highlights",Id(e,this._get("highlights"),Ot.ofType(Ng)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||N9(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(kt.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),N9(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((this.defaultsFromMap?.ready??!1)&&!this.spatialReference){const e=!("loaded"in this.map)||this.map.loaded,n=this.map.ground.loaded,r=this.map.basemap?.loaded??!0;return e&&r&&n&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=ZO(i=>ppe(_e("view-readyState-waiting-delay"),null,i)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=B1(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const n=e.clone();return n.vcsWkid=this.defaultsFromMap.vcsWkid,n.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,n}return e}set spatialReference(e){const n=!yo(e,this._get("spatialReference"));this._set("_userSpatialReference",e),n&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Ud}set timeZone(e){this._userTimeZone=e,eze(e)||kt.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._highPriorityCursorHandles.at(-1)?.cursor??this._lowPriorityCursorHandles.at(-1)?.cursor??"default"}acquireCursor(e,n="low"){const r=n==="high"?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,i={cursor:e},s=Zn(()=>r.remove(i));return r.add(i),this.addHandles(s),s}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new JV}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}getSurface(){return null}importLayerView(e){throw new Xe("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,n){return this.isResolved()&&!this.ready&&kt.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,n)}forceReadyCycle(){this.ready&&(Ec(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,n){return super.on(e,n)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}async _validateWithErrorDisplay(){try{await this.validate()}catch(e){const n=document.createElement("div");n.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const i=document.createElement("div");i.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",i.setAttribute("style","font-size: 18px;");const s=document.createElement("a");s.innerHTML="https://esriurl.com/webgl-faq",s.target="_blank",s.setAttribute("style","font-size: 18px;"),s.href="https://esriurl.com/webgl-faq",n.appendChild(r),n.appendChild(i),n.appendChild(s);const o=this.getSurface();throw o&&o.appendChild(n),e}}},px=$g,$g._layerToLayerview=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.basemap.groundLayers","view.basemapView.groundLayerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"],["view.map.layers","view.layerViews"]],$g.views=new Ot,$g);x([E()],Lt.prototype,"_userSpatialReference",void 0),x([E()],Lt.prototype,"activeTool",null),x([E({readOnly:!0})],Lt.prototype,"allLayerViews",void 0),x([E({readOnly:!0})],Lt.prototype,"layerviewCollections",null),x([E(k7(B2,"analyses"))],Lt.prototype,"analyses",void 0),x([E()],Lt.prototype,"animation",null),x([E()],Lt.prototype,"basemapView",void 0),x([E()],Lt.prototype,"center",null),x([E()],Lt.prototype,"defaultsFromMapSettings",null),x([E()],Lt.prototype,"defaultsFromMap",null),x([E()],Lt.prototype,"dependencies",void 0),x([E()],Lt.prototype,"displayFilterEnabled",void 0),x([E({type:Vn})],Lt.prototype,"extent",null),x([E()],Lt.prototype,"fatalError",void 0),x([E(k7(WT,"graphics"))],Lt.prototype,"graphics",void 0),x([E({readOnly:!0,type:al})],Lt.prototype,"heightModelInfo",null),x([E({type:Ot.ofType(Ng)})],Lt.prototype,"highlights",null),x([E({readOnly:!0})],Lt.prototype,"interacting",null),x([E({constructOnly:!0})],Lt.prototype,"layerViewFilter",void 0),x([E({readOnly:!0})],Lt.prototype,"navigating",null),x([E({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Lt.prototype,"preconditionsReady",null),x([E({readOnly:!0})],Lt.prototype,"typeSpecificPreconditionsReady",void 0),x([E({type:Ot,readOnly:!0})],Lt.prototype,"layerViews",void 0),x([E()],Lt.prototype,"resolution",null),x([E({type:Lve})],Lt.prototype,"magnifier",void 0),x([E({value:null,type:Hye})],Lt.prototype,"map",null),x([E()],Lt.prototype,"padding",void 0),x([E({readOnly:!0})],Lt.prototype,"ready",void 0),x([E()],Lt.prototype,"_readyStateWaitingTask",void 0),x([E({readOnly:!0})],Lt.prototype,"readyState",null),x([E({type:Wt})],Lt.prototype,"spatialReference",null),x([E()],Lt.prototype,"stationary",null),x([E({type:Ra})],Lt.prototype,"timeExtent",null),x([E({type:String,nonNullable:!0})],Lt.prototype,"timeZone",null),x([E()],Lt.prototype,"tools",null),x([E()],Lt.prototype,"toolViewManager",void 0),x([E({readOnly:!0})],Lt.prototype,"type",void 0),x([E({type:Number})],Lt.prototype,"scale",void 0),x([E({readOnly:!0})],Lt.prototype,"updating",void 0),x([E({readOnly:!0})],Lt.prototype,"initialExtentRequired",void 0),x([E({readOnly:!0})],Lt.prototype,"initialExtent",null),x([E()],Lt.prototype,"cursor",null),x([E({readOnly:!0})],Lt.prototype,"input",void 0),x([E({type:EL,nonNullable:!0})],Lt.prototype,"navigation",void 0),x([E()],Lt.prototype,"layerViewManager",void 0),x([E()],Lt.prototype,"analysisViewManager",void 0),x([E()],Lt.prototype,"selectionManager",void 0),x([E()],Lt.prototype,"width",void 0),x([E()],Lt.prototype,"height",void 0),x([E({readOnly:!0})],Lt.prototype,"resizing",void 0),x([E({value:null,readOnly:!0})],Lt.prototype,"size",null),x([E({readOnly:!0})],Lt.prototype,"suspended",void 0),x([E({readOnly:!0})],Lt.prototype,"viewEvents",void 0),x([E({readOnly:!0})],Lt.prototype,"persistableViewModels",void 0),x([E()],Lt.prototype,"_isValid",void 0),x([E()],Lt.prototype,"_readyCycleForced",void 0),x([E()],Lt.prototype,"_lockedSpatialReference",void 0),x([E()],Lt.prototype,"_userTimeZone",void 0),x([E()],Lt.prototype,"_lockedTimeZone",void 0),x([E()],Lt.prototype,"_userTimeExtent",void 0),x([E()],Lt.prototype,"_lockedTimeExtent",void 0),x([E({type:JV})],Lt.prototype,"theme",void 0),x([E({readOnly:!0,type:JV})],Lt.prototype,"effectiveTheme",null),Lt=px=x([ue("esri.views.View")],Lt);const M$=globalThis.$arcgis;M$&&!M$.views&&Object.defineProperty(M$,"views",{configurable:!1,enumerable:!0,writable:!1,value:Lt.views});const bZe=Lt;function EZe(t){return t.layerViews}function Vi(){return[0,0]}function SZe(t){return[t[0],t[1]]}function XI(t,e){return[t,e]}function TZe(t,e){return[t,e]}function kZe(t,e=Vi()){const n=Math.min(2,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e}function Jve(){return Vi()}function Qve(){return XI(1,1)}function e_e(){return XI(1,0)}function t_e(){return XI(0,1)}const AZe=Jve(),IZe=Qve(),PZe=e_e(),CZe=t_e();Object.freeze(Object.defineProperty({__proto__:null,ONES:IZe,UNIT_X:PZe,UNIT_Y:CZe,ZEROS:AZe,clone:SZe,create:Vi,freeze:TZe,fromArray:kZe,fromValues:XI,ones:Qve,unitX:e_e,unitY:t_e,zeros:Jve},Symbol.toStringTag,{value:"Module"}));function RZe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function n_e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function MZe(t,e,n,r,i,s,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t}function fH(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5];let l=n*s-r*i;return l?(l=1/l,t[0]=s*l,t[1]=-r*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*a-s*o)*l,t[5]=(r*o-n*a)*l,t):null}function NZe(t){return t[0]*t[3]-t[1]*t[2]}function r_e(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1],h=n[2],f=n[3],g=n[4],y=n[5];return t[0]=r*c+s*u,t[1]=i*c+o*u,t[2]=r*h+s*f,t[3]=i*h+o*f,t[4]=r*g+s*y+a,t[5]=i*g+o*y+l,t}function ZI(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=r*u+s*c,t[1]=i*u+o*c,t[2]=r*-c+s*u,t[3]=i*-c+o*u,t[4]=a,t[5]=l,t}function SL(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=r*c,t[1]=i*c,t[2]=s*u,t[3]=o*u,t[4]=a,t[5]=l,t}function H2(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=r*c+s*u+a,t[5]=i*c+o*u+l,t}function i_e(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function s_e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function pH(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function OZe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function LZe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function DZe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function o_e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function jZe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function $Ze(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function FZe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function VZe(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],u=e[2],h=e[3],f=e[4],g=e[5],y=Al();return Math.abs(n-l)<=y*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-c)<=y*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-u)<=y*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-h)<=y*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(o-f)<=y*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-g)<=y*Math.max(1,Math.abs(a),Math.abs(g))}const zZe=r_e,GZe=o_e;Object.freeze(Object.defineProperty({__proto__:null,add:DZe,copy:RZe,determinant:NZe,equals:VZe,exactEquals:FZe,frob:LZe,fromRotation:i_e,fromScaling:s_e,fromTranslation:pH,identity:n_e,invert:fH,mul:zZe,multiply:r_e,multiplyScalar:jZe,multiplyScalarAndAdd:$Ze,rotate:ZI,scale:SL,set:MZe,str:OZe,sub:GZe,subtract:o_e,translate:H2},Symbol.toStringTag,{value:"Module"}));function Rd(){return[1,0,0,1,0,0]}function UZe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function BZe(t,e,n,r,i,s){return[t,e,n,r,i,s]}const WZe=Rd();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:WZe,clone:UZe,create:Rd,fromValues:BZe},Symbol.toStringTag,{value:"Module"}));const xR={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new As({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Wt.WebMercator}),minus180Line:new As({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Wt.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new As({paths:[[[180,-180],[180,180]]],spatialReference:Wt.WGS84}),minus180Line:new As({paths:[[[-180,-180],[-180,180]]],spatialReference:Wt.WGS84})}};function Zy(t,e){return Math.ceil((t-e)/(2*e))}function a_e(t,e){const n=qT(t);for(const r of n)for(const i of r)i[0]+=e;return t}function qT(t){return WW(t)?t.rings:t.paths}function t5t(t,e){return e?{...e,query:{...t,...e.query}}:{query:t}}function HZe(t){return typeof t=="string"?Ha(t):Ze(t)}function qZe(t,e,n){const r={};for(const i in t){if(i==="declaredClass")continue;const s=t[i];if(s!=null&&typeof s!="function")if(Array.isArray(s))r[i]=s.map(o=>qZe(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(n?.[i]);r[i]=e?o:JSON.stringify(o)}else r[i]=e?s:JSON.stringify(s);else r[i]=s}return r}function KZe(t,e){return t?e&&zB(t)?e:VB(t)??Zr?.findCredential(t)?.token:null}async function n5t(t,e,n){const r=KZe(t,e);return r||(!Zr&&nr.request.useIdentity&&await ve(()=>import("./IdentityManager-DnsDZJCc.js"),__vite__mapDeps([19,20])),(await Zr.getCredential(t,n))?.token)}async function YZe(t,e,n,r){const i=HZe(t),s=e[0].spatialReference,o={...r,responseType:"json",query:{...i.query,f:"json",sr:Pme(s),target:JSON.stringify({geometryType:HW(e[0]),geometries:e}),cutter:JSON.stringify(n)}},a=await ns(i.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map(u=>{const h=G2(u);return h.spatialReference=s,h})}}function XZe(t){return{geometryType:HW(t[0]),geometries:t.map(e=>e.toJSON())}}function ZZe(t,e,n){const r=JWe(e);return t.map(i=>{const s=r.fromJSON(i);return s.spatialReference=n,s})}async function JZe(t,e,n){const r=typeof t=="string"?Ha(t):t,i=e[0].spatialReference,s=HW(e[0]),o={...n,query:{...r.query,f:"json",sr:Pme(i),geometries:JSON.stringify(XZe(e))}},{data:a}=await ns(r.path+"/simplify",o);return ZZe(a.geometries,s,i)}const l_e=()=>kt.getLogger("esri.geometry.support.normalizeUtils");function QZe(t){return t.type==="polygon"}function eJe(t){return t[0].type==="polygon"}function tJe(t){return t[0].type==="polyline"}function wre(t){const e=[];let n=0,r=0;for(let i=0;i<t.length;i++){const s=t[i];let o=null;for(let a=0;a<s.length;a++)o=s[a],e.push(o),a===0?(n=o[0],r=n):(n=Math.min(n,o[0]),r=Math.max(r,o[0]));o&&e.push([(n+r)/2,0])}return e}function nJe(t,e){if(!(t instanceof As||t instanceof bi)){const i="straightLineDensify: the input geometry is neither polyline nor polygon";throw l_e().error(i),new Xe("internal:geometry",i)}const n=qT(t),r=[];for(const i of n){const s=[];r.push(s),s.push([i[0][0],i[0][1]]);for(let o=0;o<i.length-1;o++){const a=i[o][0],l=i[o][1],c=i[o+1][0],u=i[o+1][1],h=Math.sqrt((c-a)*(c-a)+(u-l)*(u-l)),f=(u-l)/h,g=(c-a)/h,y=h/e;if(y>1){for(let A=1;A<=y-1;A++){const I=A*e,P=g*I+a,M=f*I+l;s.push([P,M])}const _=(h+Math.floor(y-1)*e)/2,b=g*_+a,T=f*_+l;s.push([b,T])}s.push([c,u])}}return QZe(t)?new bi({rings:r,spatialReference:t.spatialReference}):new As({paths:r,spatialReference:t.spatialReference})}function bre(t,e,n){if(e){const r=nJe(t,1e6);t=ES(r,!0)}return n&&(t=a_e(t,n)),t}function Ere(t,e,n){if(Array.isArray(t)){const r=t[0];if(r>e){const i=Zy(r,e);t[0]=r+i*(-2*e)}else if(r<n){const i=Zy(r,n);t[0]=r+i*(-2*n)}}else{const r=t.x;if(r>e){const i=Zy(r,e);t=t.clone().offset(i*(-2*e),0)}else if(r<n){const i=Zy(r,n);t=t.clone().offset(i*(-2*n),0)}}return t}function rJe(t,e){let n=-1;for(let r=0;r<e.cutIndexes.length;r++){const i=e.cutIndexes[r],s=e.geometries[r],o=qT(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(c=>{if(c[0]<180)return!0;{let u=0;for(let f=0;f<l.length;f++){const g=l[f][0];u=g>u?g:u}u=Number(u.toFixed(9));const h=-360*Zy(u,180);for(let f=0;f<l.length;f++){const g=s.getPoint(a,f);s.setPoint(a,f,g.clone().offset(h,0))}return!0}})}if(i===n){if(eJe(t))for(const a of qT(s))t[i]=t[i].addRing(a);else if(tJe(t))for(const a of qT(s))t[i]=t[i].addPath(a)}else n=i,t[i]=s}return t}async function iJe(t,e,n){if(!Array.isArray(t))return iJe([t],e);e&&typeof e!="string"&&l_e().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:e?.url??nr.geometryServiceUrl;let i,s,o,a,l,c,u,h,f=0;const g=[],y=[];for(const P of t)if(P!=null)if(i||(i=P.spatialReference,s=Ga(i),o=i.isWebMercator,c=o?102100:4326,a=xR[c].maxX,l=xR[c].minX,u=xR[c].plus180Line,h=xR[c].minus180Line),s)if(P.type==="mesh")y.push(P);else if(P.type==="point")y.push(Ere(P.clone(),a,l));else if(P.type==="multipoint"){const M=P.clone();M.points=M.points.map(V=>Ere(V,a,l)),y.push(M)}else if(P.type==="extent"){const M=P.clone()._normalize(!1,!1,s);y.push(M.rings?new bi(M):M)}else if(P.extent){const M=P.extent,V=Zy(M.xmin,l)*(2*a);let C=V===0?P.clone():a_e(P.clone(),V);M.offset(V,0);let{xmin:N,xmax:O}=M;N=Number(N.toFixed(9)),O=Number(O.toFixed(9)),M.intersects(u)&&O!==a?(f=O>f?O:f,C=bre(C,o),g.push(C),y.push("cut")):M.intersects(h)&&N!==l?(f=O*(2*a)>f?O*(2*a):f,C=bre(C,o,360),g.push(C),y.push("cut")):y.push(C)}else y.push(P.clone());else y.push(P);else y.push(P);let _=Zy(f,a),b=-90;const T=_,A=new As;for(;_>0;){const P=360*_-180;A.addPath([[P,b],[P,-1*b]]),b*=-1,_--}if(g.length>0&&T>0){const P=rJe(g,await YZe(r,g,A,n)),M=[],V=[];for(let O=0;O<y.length;O++){const L=y[O];if(L!=="cut")V.push(L);else{const F=P.shift(),G=t[O];G!=null&&G.type==="polygon"&&G.rings&&G.rings.length>1&&F.rings.length>=G.rings.length?(M.push(F),V.push("simplify")):V.push(o?h1(F):F)}}if(!M.length)return V;const C=await JZe(r,M,n),N=[];for(let O=0;O<V.length;O++){const L=V[O];L!=="simplify"?N.push(L):N.push(o?h1(C.shift()):C.shift())}return N}const I=[];for(let P=0;P<y.length;P++){const M=y[P];if(M!=="cut")I.push(M);else{const V=g.shift();I.push(o===!0?h1(V):V)}}return I}function sJe(t){if(!t)return null;const e=t.extent;if(!e)return null;const n=t.spatialReference&&Ga(t.spatialReference);if(!n)return e;const[r,i]=n.valid,s=2*i,{width:o}=e;let a,{xmin:l,xmax:c}=e;if([l,c]=[c,l],t.type==="extent"||o===0||o<=i||o>s||l<r||c>i)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;a=wre(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;a=wre(t.paths);break;case"multipoint":a=t.points}const u=e.clone();for(let h=0;h<a.length;h++){let f=a[h][0];f<0?(f+=i,c=Math.max(f,c)):(f-=i,l=Math.min(f,l))}return u.xmin=l,u.xmax=c,u.width<o?(u.xmin-=i,u.xmax-=i,u):e}function mH(t,e,n){const r=Ga(n);if(r==null)return t;const[i,s]=r.valid,o=2*s;let a=0,l=0;e>s?a=Math.ceil(Math.abs(e-s)/o):e<i&&(a=-Math.ceil(Math.abs(e-i)/o)),t>s?l=Math.ceil(Math.abs(t-s)/o):t<i&&(l=-Math.ceil(Math.abs(t-i)/o));let c=t+(a-l)*o;const u=c-e;return u>s?c-=o:u<i&&(c+=o),c}function r5t(t,e){return gH(e)?.normalize(t)??t}function gH(t){const e=Ga(t);if(e==null)return null;const[n,r]=e.valid;return new gL(n,r)}const i5t=gH(Wt.WGS84);gH(Wt.WebMercator);const c_e=96,u_e=39.37,oJe=180/Math.PI;function h_e(t){return t.wkid?t:t.spatialReference||Wt.WGS84}function yH(t,e){return e.type?co(t,e.x,e.y):gw(t,e)}function d_e(t){return Jd(t)}function TL(t,e,n=0){let r=t.width,i=t.height;if(n!==0){const a=FI(n),l=Math.abs(Math.cos(a)),c=Math.abs(Math.sin(a));r=t.width*l+t.height*c,i=t.width*c+t.height*l}const s=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(r/s,i/o)*pJe(t.spatialReference)}async function KS(t,e,n,r){let i,s;if(!t||Array.isArray(t)&&!t.length)return null;if(Ot.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const a=t.every(u=>"attributes"in u),l=t.some(u=>!u.geometry);let c=t;if(a&&l&&e&&e.allLayerViews){const u=new Map;for(const y of t){const _=y.layer,b=u.get(_)||[],T=y.attributes[_.objectIdField];T!=null&&b.push(T),u.set(_,b)}const h=[];u.forEach((y,_)=>{const b=e.allLayerViews?.find(T=>T.layer.id===_.id);if(b&&"queryFeatures"in b){const T=_.createQuery();T.objectIds=y,T.returnGeometry=!0,h.push(b.queryFeatures(T))}});const f=await Promise.all(h),g=[];for(const y of f)if(y&&y.features&&y.features.length)for(const _ of y.features)_.geometry!=null&&g.push(_.geometry);c=g}for(const u of c)r=await KS(u,e,n,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")i=new Qt(t);else if(t instanceof Us)i=t;else if("geometry"in t){if(t.geometry)i=t.geometry;else if(t.layer){const a=t.layer,l=e.allLayerViews?.find(c=>c.layer.id===a.id);if(l&&"queryFeatures"in l){const c=a.createQuery();c.objectIds=[t.attributes[a.objectIdField]],c.returnGeometry=!0,i=(await l.queryFeatures(c))?.features?.[0]?.geometry}}}if(i==null)return null;switch(i.type){case"point":s=new Vn({xmin:i.x,ymin:i.y,xmax:i.x,ymax:i.y,spatialReference:i.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=sJe(i);break;default:s=i.extent}if(!s)return null;Op()||Sh(s.spatialReference,n)||await Qg();const o=Sv(s,n);if(!o)return null;if(r){const a=o.center,l=a.clone();l.x=mH(a.x,r.center.x,n),l.x!==a.x&&o.centerAt(l),r=r.union(o)}else r=o;return r}function aJe(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer?.minScale!=null&&t.layer.maxScale!=null){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,n=0;for(const r of t){const i=r.layer;i?.minScale&&i.maxScale&&(e=i.minScale<e?i.minScale:e,n=i.maxScale>n?i.maxScale:n)}return e&&n?{min:e,max:n}:null}}}function Sre(t,e){const n=h_e(t);return yo(n,e)||n.imageCoordinateSystem||e.imageCoordinateSystem?t:Sv(t,e)}async function lJe(t,e){if(!t||!e)return new fu({targetGeometry:new Qt,scale:0,rotation:0});let n=e.spatialReference;const{constraints:r,padding:i,viewpoint:s,size:o}=e,a=[i?o[0]-i.left-i.right:o[0],i?o[1]-i.top-i.bottom:o[1]];let l=null;t instanceof fu?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let c=null;l?.targetGeometry?c=l.targetGeometry:t instanceof Vn?c=t:t instanceof Us?c=await KS(t,e,n):t&&(c=await KS(t.center,e,n)||await KS(t.target,e,n)||await KS(t,e,n)),!c&&s?.targetGeometry?c=s.targetGeometry:!c&&e.extent&&(c=e.extent),n||(n=h_e(e.spatialReference||e.extent||c)),Op()||yo(c.spatialReference,n)||Sh(c.spatialReference,n)||await Qg();const u=Sre(c,n),h="center"in u?u.center:u;e.pickClosestTarget!==!1&&h.type==="point"&&s.targetGeometry?.type==="point"&&(h.x=mH(h.x,s.targetGeometry.x,h.spatialReference));let f=0;l?f=l.rotation:t.hasOwnProperty("rotation")?f=t.rotation:s&&(f=s.rotation);let g=0;g=l?.targetGeometry!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?s.scale:TL(Sre(c.extent,n),a,f);const y=aJe(t.target??t);y&&(y.min&&y.min<g?g=y.min:y.max&&y.max>g&&(g=y.max));let _=new fu({targetGeometry:h,scale:g,rotation:f});return r&&(_=r.fit(_),r.constrainByGeometry(_),r.rotationEnabled||(_.rotation=s.rotation)),_}function pa(t,e){const n=t.targetGeometry,r=e.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function cJe(t,e,n){return n?co(t,.5*(e[0]-n.right+n.left),.5*(e[1]-n.bottom+n.top)):zI(t,e,.5)}const uJe=(function(){const t=Vi();return function(e,n,r){const i=n.targetGeometry;yH(t,i);const s=.5*Nb(n);return e.xmin=t[0]-s*r[0],e.ymin=t[1]-s*r[1],e.xmax=t[0]+s*r[0],e.ymax=t[1]+s*r[1],e.spatialReference=i.spatialReference,e}})();function hJe(t,e,n,r,i){return rz(t,e,n.center),t.scale=TL(n,r),i?.constraints?.constrain(t),t}function dJe(t,e,n,r){return xH(t,e,n,r),fH(t,t)}const f_e=(function(){const t=Vi();return function(e,n,r){return LW(e,mJe(e,n),cJe(t,n,r))}})(),fJe=(function(){const t=Rd(),e=Vi();return function(n,r,i,s){const o=Nb(r),a=vH(r);return co(e,o,o),s_e(t,e),ZI(t,t,a),H2(t,t,f_e(e,i,s)),H2(t,t,[0,s.top-s.bottom]),co(n,t[4],t[5])}})();function Nb(t){return t.scale*p_e(t.targetGeometry?.spatialReference)}function p_e(t){return dc(t)?1/(d_e(t)*u_e*c_e):1}function vH(t){return OW(t.rotation)||0}function pJe(t){return dc(t)?d_e(t)*u_e*c_e:1}function mJe(t,e){return zI(t,e,.5)}const _H=(function(){const t=Vi(),e=Vi(),n=Vi();return function(r,i,s,o,a,l){return U0e(t,i),zI(e,s,.5*l),co(n,1/o*l,-1/o*l),pH(r,e),a&&ZI(r,r,a),SL(r,r,n),H2(r,r,t),r}})(),xH=(function(){const t=Vi();return function(e,n,r,i){const s=Nb(n),o=vH(n);return yH(t,n.targetGeometry),_H(e,t,r,s,o,i)}})(),gJe=(function(){const t=Vi();return function(e,n,r,i){const s=Nb(n);return yH(t,n.targetGeometry),_H(e,t,r,s,0,i)}})();function m_e(t){const e=Ga(t);return e?e.valid[1]-e.valid[0]:0}function yJe(t,e){return Math.round(m_e(t)/e)}const vJe=(function(){const t=Vi(),e=Vi(),n=[0,0,0];return function(r,i,s){oA(t,r,i),u7(t,t),oA(e,r,s),u7(e,e),W0e(n,t,e);let o=Math.acos(B0e(t,e)/(bN(t)*bN(e)))*oJe;return n[2]<0&&(o=-o),isNaN(o)&&(o=0),o}})(),_Je=(function(){const t=Vi();return function(e,n,r,i){const s=e.targetGeometry;return pa(e,n),fJe(t,n,r,i),s.x+=t[0],s.y+=t[1],e}})(),rz=function(t,e,n){pa(t,e);const r=t.targetGeometry;return r.x=n.x,r.y=n.y,r.spatialReference=n.spatialReference,t},xJe=(function(){const t=Vi();return function(e,n,r,i,s){s||(s="center"),LW(t,r,i),zI(t,t,.5);const o=t[0],a=t[1];switch(s){case"center":co(t,0,0);break;case"left":co(t,-o,0);break;case"top":co(t,0,a);break;case"right":co(t,o,0);break;case"bottom":co(t,0,-a);break;case"top-left":co(t,-o,a);break;case"bottom-left":co(t,-o,-a);break;case"top-right":co(t,o,a);break;case"bottom-right":co(t,o,-a)}return kL(e,n,t),e}})();function s5t(t,e,n){return pa(t,e),t.rotation+=n,t}function wJe(t,e,n){return pa(t,e),t.rotation=n,t}const bJe=(function(){const t=Vi();return function(e,n,r,i,s){return pa(e,n),isNaN(r)||r===0||(y_e(t,i,n,s),e.scale=n.scale*r,v_e(t,t,e,s),kL(e,e,co(t,t[0]-i[0],i[1]-t[1]))),e}})();function Tre(t,e,n){return pa(t,e),t.scale=n,t}const g_e=(function(){const t=Vi();return function(e,n,r,i,s,o){return pa(e,n),isNaN(r)||r===0||(y_e(t,s,n,o),e.scale=n.scale*r,e.rotation+=i,v_e(t,t,e,o),kL(e,e,co(t,t[0]-s[0],s[1]-t[1]))),e}})(),o5t=(function(){const t=Vi(),e=Vi();return function(n,r,i,s,o,a,l){return f_e(e,a,l),F0e(t,o,e),s?g_e(n,r,i,s,t,a):bJe(n,r,i,t,a)}})(),y_e=(function(){const t=Rd();return function(e,n,r,i){return dd(e,n,dJe(t,r,i,1))}})(),v_e=(function(){const t=Rd();return function(e,n,r,i){return dd(e,n,xH(t,r,i,1))}})(),kL=(function(){const t=Vi(),e=Rd();return function(n,r,i){pa(n,r);const s=Nb(r),o=n.targetGeometry;return i_e(e,vH(r)),SL(e,e,XI(s,s)),dd(t,i,e),o.x+=t[0],o.y+=t[1],n}})();function __e(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function EJe(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function SJe(t,e,n,r,i,s){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o[4]=i,o[5]=s,o}function x_e(t,e,n,r){const i=e[r],s=e[r+1];t[r]=n[0]*i+n[2]*s+n[4],t[r+1]=n[1]*i+n[3]*s+n[5]}function TJe(t,e,n,r=0,i=0,s=2){const o=i||e.length/s;for(let a=r;a<o;a++)x_e(t,e,n,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:EJe,create:__e,fromValues:SJe,transform:x_e,transformMany:TJe},Symbol.toStringTag,{value:"Module"}));function E3(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function kJe(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function AJe(t,e,n,r,i,s,o,a,l){const c=new Float32Array(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}Object.freeze(Object.defineProperty({__proto__:null,clone:kJe,create:E3,fromValues:AJe},Symbol.toStringTag,{value:"Module"}));function w_e(){return new Float32Array(2)}function IJe(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function q2(t,e){const n=new Float32Array(2);return n[0]=t,n[1]=e,n}function b_e(){return w_e()}function E_e(){return q2(1,1)}function S_e(){return q2(1,0)}function T_e(){return q2(0,1)}const PJe=b_e(),CJe=E_e(),RJe=S_e(),MJe=T_e();Object.freeze(Object.defineProperty({__proto__:null,ONES:CJe,UNIT_X:RJe,UNIT_Y:MJe,ZEROS:PJe,clone:IJe,create:w_e,fromValues:q2,ones:E_e,unitX:S_e,unitY:T_e,zeros:b_e},Symbol.toStringTag,{value:"Module"}));function NJe(t){return t instanceof Float32Array&&t.length>=2}function OJe(t){return Array.isArray(t)&&t.length>=2}function N$(t){return NJe(t)||OJe(t)}var iz;const _f=[0,0];let Nf=iz=class extends qt{constructor(t){super(t),this._viewpoint2D={center:Vi(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Vn,this.id=0,this.inverseTransform=Rd(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Rd(),this.transformNoRotation=Rd(),this.displayMat3=E3(),this.displayViewMat3=E3(),this.viewMat3=E3(),this.viewMat2d=__e(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,n=t.targetGeometry;e.center[0]=n.x,e.center[1]=n.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=n.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,n=this.viewpoint;return n&&e?(this.viewpoint=pa(n,t.viewpoint),this._set("size",gw(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new iz({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,n){return N$(e)?dd(t,e,this.inverseTransform):(_f[0]=e,_f[1]=n,dd(t,_f,this.inverseTransform))}toScreen(t,e,n){return N$(e)?dd(t,e,this.transform):(_f[0]=e,_f[1]=n,dd(t,_f,this.transform))}toScreenNoRotation(t,e,n){return N$(e)?dd(t,e,this.transformNoRotation):(_f[0]=e,_f[1]=n,dd(t,_f,this.transformNoRotation))}wrapMapCoordinate(t,e){gw(t,e);const[n]=e,[r]=this.center,{extent:i,spatialReference:s}=this;let{xmin:o,xmax:a}=i;if(s.isWrappable){const l=m_e(s)/2;o=Math.max(o,r-l),a=Math.min(a,r+l)}return(n<o||n>a)&&(t[0]=mH(n,r,s)),t}getScreenTransform(t,e){const{center:n}=this._viewpoint2D,r=this._get("pixelRatio")||1,i=this._get("size");return _H(t,n,i,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:n,rotation:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size"),o=new fu({targetGeometry:new Qt(t[0],t[1],e),scale:n,rotation:r});if(this._set("viewpoint",o),!s||!e||!n)return;this.resolution=Nb(o),this.rotation=r,this.scale=n,this.spatialReference=e,gw(this.center,t);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;yw(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=Z0e(this.viewMat3),u=q2(s[0]/2,s[1]/2),h=q2(-s[0]/2,-s[1]/2),f=OW(r);d7(c,c,u),eye(c,c,f),d7(c,c,h),lA(this.displayViewMat3,this.displayMat3,c);const g=pH(this.viewMat2d,u);return ZI(g,g,f),H2(g,g,h),uJe(this.extent,o,s),xH(this.transform,o,s,i),fH(this.inverseTransform,this.transform),gJe(this.transformNoRotation,o,s,i),this.worldScreenWidth=yJe(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};x([E({readOnly:!0})],Nf.prototype,"id",void 0),x([E({value:1,json:{write:!0}})],Nf.prototype,"pixelRatio",null),x([E({json:{write:!0}})],Nf.prototype,"size",null),x([E()],Nf.prototype,"spatialReference",void 0),x([E({type:fu,json:{write:!0}})],Nf.prototype,"viewpoint",null),x([E({readOnly:!0})],Nf.prototype,"visibleArea",null),Nf=iz=x([ue("esri.views.2d.ViewState")],Nf);const kre=Nf;var sz,oz;let Jf=sz=class extends Kt{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new sz({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};x([E()],Jf.prototype,"left",void 0),x([E()],Jf.prototype,"top",void 0),x([E()],Jf.prototype,"right",void 0),x([E()],Jf.prototype,"bottom",void 0),Jf=sz=x([ue("esri.views.2d.PaddedViewState.Padding")],Jf);let mx=oz=class extends kre{constructor(...t){super(...t),this.paddedViewState=new kre,this._updateContent=(()=>{const e=Vi();return()=>{const n=this._get("size"),r=this._get("padding");if(!n||!r)return;const i=this.paddedViewState;co(e,r.left+r.right,r.top+r.bottom),oA(e,n,e),gw(i.size,e);const s=i.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(mn(()=>[this.size,this.padding],()=>this._updateContent(),Jg)),this.padding=new Jf,this.size=[0,0]}set padding(t){this._set("padding",t||new Jf)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const n=this._get("padding");n&&(e=_Je(t.clone(),t,this._get("size"),n));const{targetGeometry:r,rotation:i,scale:s}=e,{x:o,y:a,spatialReference:l}=r,c=this._viewpoint2D;c.center[0]=o,c.center[1]=a,c.rotation=i,c.scale=s,c.spatialReference=l,this._update()}}clone(){return new oz({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};x([E()],mx.prototype,"paddedViewState",void 0),x([E({type:Jf})],mx.prototype,"padding",null),x([E()],mx.prototype,"viewpoint",null),mx=oz=x([ue("esri.views.2d.PaddedViewState")],mx);const wH=mx;let YS=class extends Kt{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};x([E()],YS.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),x([E()],YS.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),YS=x([ue("esri.views.support.debugFlags")],YS);const LJe=new YS,k_e=Symbol("Yield");let DJe=class{constructor(){this._tasks=new Array,this._numPendingTasks=W2(0),this._readyToRun=W2(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get readyToRun(){return this._readyToRun.value}_updateReadyToRun(){this._readyToRun.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return k_e;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,n,r){return this._addTask((i,s)=>new Ire(i,s,e,n,r),Array.prototype.push)}unshift(e,n,r){return this._addTask((i,s)=>new Ire(i,s,e,n,r),Array.prototype.unshift)}pushGenerator(e,n,r){return this._addTask((i,s)=>new jJe(i,s,e,n,r),Array.prototype.push)}_process(e){if(this._tasks.length===0)return!1;const n=this._tasks.shift();this._updateReadyToRun();try{if(ya(n.signal))this._cancelTask(n,Cr());else switch(n.type){case 0:this._processSimple(n,e);break;case 1:this._processGenerator(n,e);break;case 2:this._processIterator(n,e);break;default:}}catch(r){n.reject(r)}return!0}cancelAll(){const e=Cr();for(const n of this._tasks)this._cancelTask(n,e);this._tasks.length=0,this._updateReadyToRun()}_cancelTask(e,n){if(e.abortCallback){const r=e.abortCallback(n);e.type===2&&e.iterator.return&&Are(e.iterator.return()),va(r)?r.then(e.resolve,e.reject):e.resolve(r)}else e.type===2&&e.iterator.throw&&Are(e.iterator.throw(n)),e.reject(n)}_onIteratorResult(e,n){n.done?e.resolve(n.value):(this._tasks.unshift(e),this._updateReadyToRun())}_processSimple(e,n){const r=e.callback(n);va(r)?r.then(e.resolve,e.reject):e.resolve(r)}_processGenerator(e,n){const r=e.generatorFunction(n),i=new $Je(e.resolve,e.reject,r,e.signal,e.abortCallback);this._processIterator(i,n)}_processIterator(e,n){const r=e.iterator.next(n);va(r)?r.then(i=>this._onIteratorResult(e,i),e.reject):this._onIteratorResult(e,r)}_addTask(e,n){return new Promise((r,i)=>{const s=e(r,i);n.call(this._tasks,s),++this._numPendingTasks.value,this._updateReadyToRun()}).finally(()=>--this._numPendingTasks.value)}};function Are(t){va(t)?t.then(O$,O$):O$(t)}function O$(t){Ea(t)||t instanceof Error||t instanceof Xe||t!=null&&typeof t=="object"&&"done"in t&&t.done||kt.getLogger("esri.layers.support.PromiseQueue").warn("Generator iterator was aborted, but it is not done.")}let bH=class{constructor(e,n,r=void 0,i=void 0){this.resolve=e,this.reject=n,this.signal=r,this.abortCallback=i}},Ire=class extends bH{constructor(e,n,r,i,s){super(e,n,i,s),this.callback=r,this.type=0}},jJe=class extends bH{constructor(e,n,r,i,s){super(e,n,i,s),this.generatorFunction=r,this.type=1}},$Je=class extends bH{constructor(e,n,r,i,s){super(e,n,i,s),this.iterator=r,this.type=2}};function FJe(){return new BJe}const Ln={RESOURCE_CONTROLLER_IMMEDIATE:"immediate",RESOURCE_CONTROLLER:"schedule",SLIDE:"slide",STREAM_DATA_LOADER:"stream loader",ELEVATION_QUERY:"elevation query",TERRAIN_SURFACE:"terrain",SURFACE_GEOMETRY_UPDATES:"surface geometry updates",LOD_RENDERER:"LoD renderer",GRAPHICS_CORE:"Graphics3D",I3S_CONTROLLER:"I3S",POINT_CLOUD_LAYER:"point cloud",FEATURE_TILE_FETCHER:"feature fetcher",STREAM_CONTROLLER:"stream controller",OVERLAY:"overlay",OVERLAY_RENDERER:"overlay renderer",STAGE:"stage",GRAPHICS_DECONFLICTOR:"graphics deconflictor",FILTER_VISIBILITY:"Graphics3D filter visibility",SCALE_VISIBILITY:"Graphics3D scale visibility",FRUSTUM_VISIBILITY:"Graphics3D frustum visibility",POINT_OF_INTEREST_FREQUENT:"POI frequent",POINT_OF_INTEREST_INFREQUENT:"POI infrequent",LABELER:"labeler",FEATURE_QUERY_ENGINE:"feature query",FEATURE_TILE_TREE:"feature tile tree",FEATURE_TILE_TREE_ACTIVE:"fast feature tile tree",ELEVATION_ALIGNMENT:"elevation alignment",ELEVATION_ALIGNMENT_SCENE:"elevation alignment scene",TEXT_TEXTURE_ATLAS:"text texture atlas",TEXTURE_UNLOAD:"texture unload",LINE_OF_SIGHT_TOOL:"line of sight tool",LINE_OF_SIGHT_TOOL_INTERACTIVE:"interactive line of sight tool",ELEVATION_PROFILE:"elevation profile",SNAPPING:"snapping",SHADOW_ACCUMULATOR:"shadow accumulator",CLOUDS_GENERATOR:"clouds generator",FLOW_GENERATOR:"flow generator",MAPVIEW_FETCH_QUEUE:"mapview fetch queue",MAPVIEW_LAYERVIEW_UPDATE:"mapview layerview update",MAPVIEW_VECTOR_TILE_PARSING_QUEUE:"mapview vector tile parsing queue",NONE:0,TEST_PRIO:1},Yc=0,Pre=new Map([[Ln.RESOURCE_CONTROLLER_IMMEDIATE,Yc],[Ln.RESOURCE_CONTROLLER,4],[Ln.SLIDE,Yc],[Ln.STREAM_DATA_LOADER,Yc],[Ln.ELEVATION_QUERY,Yc],[Ln.TERRAIN_SURFACE,1],[Ln.SURFACE_GEOMETRY_UPDATES,1],[Ln.LOD_RENDERER,2],[Ln.GRAPHICS_CORE,2],[Ln.I3S_CONTROLLER,2],[Ln.POINT_CLOUD_LAYER,2],[Ln.FEATURE_TILE_FETCHER,2],[Ln.STREAM_CONTROLLER,2],[Ln.CLOUDS_GENERATOR,2],[Ln.OVERLAY,4],[Ln.OVERLAY_RENDERER,4],[Ln.STAGE,4],[Ln.GRAPHICS_DECONFLICTOR,4],[Ln.FILTER_VISIBILITY,4],[Ln.SCALE_VISIBILITY,4],[Ln.FRUSTUM_VISIBILITY,4],[Ln.POINT_OF_INTEREST_FREQUENT,6],[Ln.POINT_OF_INTEREST_INFREQUENT,30],[Ln.LABELER,8],[Ln.FEATURE_QUERY_ENGINE,8],[Ln.FEATURE_TILE_TREE,16],[Ln.FEATURE_TILE_TREE_ACTIVE,Yc],[Ln.ELEVATION_ALIGNMENT,12],[Ln.ELEVATION_ALIGNMENT_SCENE,14],[Ln.TEXT_TEXTURE_ATLAS,12],[Ln.TEXTURE_UNLOAD,12],[Ln.LINE_OF_SIGHT_TOOL,16],[Ln.LINE_OF_SIGHT_TOOL_INTERACTIVE,Yc],[Ln.SNAPPING,Yc],[Ln.SHADOW_ACCUMULATOR,30],[Ln.FLOW_GENERATOR,12],[Ln.MAPVIEW_FETCH_QUEUE,Yc],[Ln.MAPVIEW_LAYERVIEW_UPDATE,2],[Ln.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,Yc]]);function Cre(t){return Pre.has(t)?Pre.get(t):typeof t=="number"?t:1}const VJe=6.5,Rre=1,zJe=30,GJe=1e3/30,UJe=100,Mre=.9;let BJe=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(e=>e.needsUpdate)}constructor(){this._updating=W2(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new AT("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new A_e,this.state=1,this._tasks=new Array,this._runQueue=new Array,this._load=0,this._forceTask=!1,this._debug=!1,this._debugHandle=mn(()=>LJe.SCHEDULER_LOG_SLOW_TASKS,e=>this._debug=e,_a);for(const e of Object.keys(Ln))this.performanceInfo.tasks.set(Ln[e],new AT(String(Ln[e])))}destroy(){this._tasks.forEach(e=>e.remove()),this._tasks.length=0,this._runQueue.length=0,ii(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(e,n){const r=new WJe(this,e,n);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new AT(e)),r}get load(){return this._load}frame(e){if(this._startFrameTaskTimes(),this._updateBudget(e)){const n=this._budget.now();return this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-n),!0}return this._recordFrameTaskTimes(0),!1}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let n=VJe,r=e.frameDuration,i=Rre;switch(this.state){case 2:n=0,r=Math.max(UJe,e.frameDuration),i=zJe;break;case 1:r=Math.max(GJe,e.frameDuration)}return r=r-e.elapsedFrameTime-n,this.state!==2&&r<Rre&&!this._forceTask?(this._forceTask=!0,!1):(r=Math.max(r,i),this._budget.reset(r),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}removeTask(e){c9(this._tasks,e),c9(this._runQueue,e),this._updatingChanged()}_updateTask(e){this._tasks.forEach(n=>{n.name===e&&n.setPriority(e)})}_getState(e){if(this._runQueue.some(r=>r.name===e))return"s";let n="i";return this._tasks.forEach(r=>{r.name===e&&r.needsUpdate&&(r.schedulePriority<=1?n="r":n!=="r"&&(n="w"))}),n}_getRuntime(e){let n=0;return this._tasks.forEach(r=>{r.name===e&&(n+=r.runtime)}),n}_resetRuntimes(){this._tasks.forEach(e=>e.runtime=0)}_getRunning(){const e=new Map;if(this._tasks.forEach(r=>{r.needsUpdate&&e.set(r.name,(e.get(r.name)||0)+1)}),e.size===0)return null;let n="";return e.forEach((r,i)=>{n+=r>1?` ${r}x ${i}`:` ${i}`}),n}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce((n,r)=>r.needsUpdate?++n:n,0);this._load=this._load*Mre+e*(1-Mre)}_schedule(){for(F6e(this._runQueue,e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1)),this._tasks.forEach(e=>{e.basePriority===Yc&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)});this._runQueue.length===0;){let e=!1,n=0;if(this._tasks.forEach(r=>{r.needsUpdate&&r.schedulePriority!==0&&r.basePriority!==Yc&&r.blockFrame!==this._frameNumber&&(e=!0,n=Math.max(n,r.basePriority),r.schedulePriority===1?(r.schedulePriority=0,this._runQueue.push(r)):--r.schedulePriority)}),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const e=this._budget.now(),n=this._runQueue.pop();this._budget.resetProgress();try{n.task.runTask(this._budget)===k_e&&(n.blockFrame=this._frameNumber)}catch(i){kt.getLogger("esri.views.support.Scheduler").error(`Exception in task "${n.name}"`,i),n.blockFrame=this._frameNumber}!this._budget.hasProgressed&&n.blockFrame!==this._frameNumber&&n.needsUpdate&&(n.name,n.blockFrame=this._frameNumber),n.schedulePriority=n.basePriority;const r=this._budget.now()-e;if(n.runtime+=r,this._frameTaskTimes.set(n.priority,this._frameTaskTimes.get(n.priority)+r),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const e of Object.keys(Ln))this._frameTaskTimes.set(Ln[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach((n,r)=>this.performanceInfo.tasks.get(r).push(n)),this.performanceInfo.total.push(e)}get test(){return this._test}},WJe=class{get task(){return this._task.value}get readyToRun(){return this._queue.readyToRun}get updating(){return this._queue.updating}constructor(e,n,r){this._scheduler=e,this.name=n,this.blockFrame=0,this.runtime=0,this._queue=new DJe,this._handles=new Eb,this._basePriority=Cre(n),this.schedulePriority=this._basePriority,this._task=W2(r??this._queue),this._handles.add(Ec(()=>this.task.readyToRun,i=>e.taskRunningChanged(i)))}remove(){this.processQueue(KT),this._scheduler.removeTask(this),this.schedule=L$.schedule,this.reschedule=L$.reschedule,this.scheduleGenerator=L$.scheduleGenerator,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const n=Cre(e);this._basePriority!==Yc&&this.schedulePriority===0||(this.schedulePriority=n),this._basePriority=n}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.readyToRun||!this.task.destroyed&&this.task.readyToRun}schedule(e,n,r){return this._queue.push(e,n,r)}reschedule(e,n,r){return this._queue.unshift(e,n,r)}scheduleGenerator(e,n,r){return this._queue.pushGenerator(e,n,r)}processQueue(e){return this._queue.runTask(e)}},A_e=class{constructor(){this._begin=performance?.now()??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(e()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e){this._begin=this.now(),this._budget=e,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}};const KT=new A_e;KT.enabled=!1;let HJe=class{remove(){}processQueue(){}schedule(e,n,r){try{if(ya(n)){const i=Cr();return r?Promise.resolve(r(i)):Promise.reject(i)}return m9(e(KT))}catch(i){return Promise.reject(i)}}reschedule(e,n,r){return this.schedule(e,n,r)}async scheduleGenerator(e,n,r){if(ya(n)){const s=Cr();if(r)return r(s);throw s}const i=e(KT);for(;;){const s=i.next(KT),o=va(s)?await s:s;if(ya(n)){const a=Cr();if(r){const c=r(a),u=i.return(null);return va(u)&&await K4(u),c}const l=i.throw(a);throw va(l)&&await K4(l),a}if(o.done)return o.value}}};const L$=new HJe;let qJe=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=FJe(),this._schedulerHandle=Ec(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||va(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=n=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:r,graphicsView:i,labelManager:s,state:{id:o}}=this.view;r?.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),i!=null&&(i.lastUpdateId!==o&&(i.viewChange(),i.lastUpdateId=o),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(n)||this._updateRequested||this._scheduler.state!==2||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new wH,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=mn(()=>e.stationary,n=>{this.stationary=n,this.requestFrame()}),this._frameTaskHandle=M2(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const n=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==n.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=n.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}};function KJe(t,e){const{spatialReference:n}=e,r=[e.x,e.y];let i,s,o,a;const l=[0,0],c=YJe(t);for(let f=0;f<c.length;f++){const g=c[f];for(let y=0;y<g.length-1;y++){hGe(l,r,g,y);const _=dL(r,l);(i==null||_<i)&&(i=_,s=[...l],o=f,a=y)}}if(i==null||!s||o==null||a==null)throw new Xe("nearest-coordinate:failed","Failed to find the nearest coordinate");const[u,h]=s;return{coordinate:new Qt({x:u,y:h,spatialReference:n}),distance:i}}function YJe(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var az;let Dy=az=class extends AW(Kt){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Sv(this.geometry,this.spatialReference)}catch(t){return kt.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const n=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?OI(this.normalizedGeometry,n):cW(this.normalizedGeometry,n))return t;const{coordinate:r}=KJe(this.normalizedGeometry,n);return r&&(t.targetGeometry=r),t}clone(){return new az({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};x([E({constructOnly:!0})],Dy.prototype,"geometry",void 0),x([E({readOnly:!0})],Dy.prototype,"normalizedGeometry",null),x([E({constructOnly:!0})],Dy.prototype,"spatialReference",void 0),Dy=az=x([ue("esri.views.2d.constraints.GeometryConstraint")],Dy);var lz;let XS=lz=class extends AW(Kt){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new lz({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};x([E()],XS.prototype,"enabled",void 0),x([E()],XS.prototype,"rotationEnabled",void 0),XS=lz=x([ue("esri.views.2d.constraints.RotationConstraint")],XS);const I_e=XS;var cz;let rl=cz=class extends AW(Kt){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:n,maxScale:r,minZoom:i,maxZoom:s}=this,o=-1,a=-1,l=!1,c=!1;if(n!==0&&r!==0&&n<r&&([n,r]=[r,n]),!e?.length)return this._set("effectiveMinScale",n),void this._set("effectiveMaxScale",r);e=e.map(u=>u.clone()),e.sort((u,h)=>h.scale-u.scale),e.forEach((u,h)=>u.level=h);for(const u of e)!l&&n>0&&n>=u.scale&&(o=u.level,l=!0),!c&&r>0&&r>=u.scale&&(a=t?t.level:-1,c=!0),t=u;i===-1&&(i=n===0?0:o),s===-1&&(s=r===0?e.length-1:a),i=Math.max(i,0),i=Math.min(i,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),i>s&&([i,s]=[s,i]),n=e[i].scale,r=e[s].scale,e.splice(0,i),e.splice(s-i+1),e.forEach((u,h)=>{this._lodByScale[u.scale]=u,this._scales[h]=u.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",i),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",n),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const n=this.effectiveMinScale,r=this.effectiveMaxScale,i=t.targetGeometry,s=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=n!==0&&t.scale>n;if(o||a){const l=a?n:r;if(e&&s){const c=(l-e.scale)/(t.scale-e.scale);i.x=s.x+(i.x-s.x)*c,i.y=s.y+(i.y-s.y)*c}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),n=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(n>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const n=Math.floor(t),r=Math.ceil(t);return e[n]+(t-n)*(e[r]-e[n])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let n,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let i=0;i<e.length-1;i++){if(n=e[i],r=e[i+1],r===t)return i+this.effectiveMinZoom+1;if(n>t&&r<t)return i+this.effectiveMinZoom+1-(t-r)/(n-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const n=Math.round(this.scaleToZoom(t));return this.zoomToScale(n+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const n=Math.round(this.scaleToZoom(t));return this.zoomToScale(n-1)}clone(){return new cz({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,n)=>Math.abs(n-t)<=Math.abs(e-t)?n:e,this._scales[0])),this._lodByScale[t].scale}};x([E({readOnly:!0})],rl.prototype,"effectiveLODs",void 0),x([E({readOnly:!0})],rl.prototype,"effectiveMinZoom",void 0),x([E({readOnly:!0})],rl.prototype,"effectiveMaxZoom",void 0),x([E({readOnly:!0})],rl.prototype,"effectiveMinScale",void 0),x([E({readOnly:!0})],rl.prototype,"effectiveMaxScale",void 0),x([E()],rl.prototype,"lods",void 0),x([E()],rl.prototype,"minZoom",void 0),x([E()],rl.prototype,"maxZoom",void 0),x([E()],rl.prototype,"minScale",void 0),x([E()],rl.prototype,"maxScale",void 0),x([E()],rl.prototype,"snapToZoom",void 0),rl=cz=x([ue("esri.views.2d.constraints.ZoomConstraint")],rl);const P_e=rl,XJe={base:null,key:"type",typeMap:{extent:Vn,polygon:bi}};let Bi=class extends Kt{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Ot}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new Dy({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new I_e({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),n=this.lods||this.view?.constraintsInfo.lods,r=this.minZoom,i=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===n&&e.minZoom===r&&e.maxZoom===i&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===a?e:new P_e({lods:n,minZoom:r,maxZoom:i,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(e){const n=this.effectiveMaxScale;return n===0||e>=n}canZoomOutTo(e){const n=this.effectiveMinScale;return n===0||e<=n}constrain(e,n){return this._zoom.constrain(e,n),this._rotation.constrain(e,n),this._geometry.constrain(e,n),this.customConstraints.forEach(r=>r.constrain(e,n)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(n=>n.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};x([E({readOnly:!0})],Bi.prototype,"effectiveLODs",null),x([E({readOnly:!0})],Bi.prototype,"effectiveMinScale",null),x([E({readOnly:!0})],Bi.prototype,"effectiveMaxScale",null),x([E({readOnly:!0})],Bi.prototype,"effectiveMinZoom",null),x([E({readOnly:!0})],Bi.prototype,"effectiveMaxZoom",null),x([E({types:XJe,value:null})],Bi.prototype,"geometry",null),x([E({type:[Ro]})],Bi.prototype,"lods",void 0),x([E()],Bi.prototype,"minScale",void 0),x([E()],Bi.prototype,"maxScale",void 0),x([E()],Bi.prototype,"minZoom",void 0),x([E()],Bi.prototype,"maxZoom",void 0),x([E()],Bi.prototype,"rotationEnabled",void 0),x([E()],Bi.prototype,"snapToZoom",void 0),x([E({type:Ot})],Bi.prototype,"customConstraints",void 0),x([E()],Bi.prototype,"view",void 0),x([E({readOnly:!0})],Bi.prototype,"version",null),x([E({type:Dy,readOnly:!0})],Bi.prototype,"_geometry",null),x([E({type:I_e})],Bi.prototype,"_rotation",null),x([E({readOnly:!0,type:P_e})],Bi.prototype,"_zoom",null),Bi=x([ue("esri.views.2d.MapViewConstraints")],Bi);const Nre=Bi;let Zo=class extends Kt{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([mn(()=>this.constraints?.version,n=>{this.constraints&&n&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Jg)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:n}=this.state.paddedViewState;return this.state.commitProperty("id"),new Qt({x:e[0],y:e[1],spatialReference:n})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let n;try{n=this._project(e,this.state.spatialReference)}catch(i){return void kt.getLogger(this).error(new Xe("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:i}))}const r=this.viewpoint;rz(r,r,n),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void kt.getLogger(this).error(new Xe("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let n;try{n=this._project(e,this.state.spatialReference)}catch(i){return void kt.getLogger(this).error(new Xe("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:i}))}const r=this.viewpoint;hJe(r,r,n,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const n=this.viewpoint;wJe(n,n,e),this.viewpoint=n}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const n=this.viewpoint;Tre(n,n,e),this.viewpoint=n}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let n,r;try{n=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new Xe("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new Xe("mapview:invalid-viewpoint","geometry not defined"))}catch(s){r=new Xe("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(r)return void kt.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const i=new fu({targetGeometry:new Qt,scale:0,rotation:0});pa(i,n),this.constraints?.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this._set("viewpoint",i)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const n=this.constraints?.zoomToScale(e)??0;if(!n)return void this._set("zoom",-1);const r=this.viewpoint;Tre(r,r,n),this.viewpoint=r,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:n,constraints:r}=this,i=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),u=c!=null&&r!=null&&r.zoomToScale(c)||void 0;let h,f,g;const y=l?.rotation,_=l?.targetGeometry;_?.type==="extent"?h=_:_?.type==="point"&&(f=_,g=l?.scale);const b=s??h;return{center:i??f??b?.center,rotation:a??y,scale:(o??u??g??(b&&TL(b,[e[0]-n.left-n.right,e[1]-n.top-n.bottom])))||void 0}}startup(e,n,r,i){const s=e.targetGeometry;try{this._project(e,r)}catch(o){kt.getLogger(this).warn(new zd("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:o})),e.targetGeometry=i||new Qt({x:0,y:0,spatialReference:r})}this.constraints?.fit(e),this._set("state",new wH({padding:this.padding,size:n,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,n],spatialReference:r,rotation:i,scale:s}=this.state.paddedViewState,o=new Qt({x:e,y:n,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",i),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){const n=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=n.scale;else{const l=n.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,n.viewpoint=l}const r=n.clone(),[i,s]=n.center;let o=null;try{o=this._project(new Qt({x:i,y:s,spatialReference:n.spatialReference}),e)}catch(l){xme()||kt.getLogger(this).warn(new zd("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o?.toJSON(),spatialReference:e,error:l}))}o||(o=new Qt({x:0,y:0,spatialReference:e}));const a=rz(new fu({targetGeometry:new Qt,scale:0,rotation:0}),n.viewpoint,o);r.viewpoint=a;try{const c=[n.size[0]/2,n.size[1]/2],u=[c[0]+20,c[1]],h=n.toMap([0,0],u),{x:f,y:g}=this._project(new Qt({x:h[0],y:h[1],spatialReference:n.spatialReference}),e);h[0]=f,h[1]=g,r.toScreen(h,h);const y=vJe(c,h,u),_=Math.hypot(h[0]-c[0],h[1]-c[1])/20;!Number.isFinite(_)||Math.abs(_)>4?(a.rotation=0,a.targetGeometry=new Qt({x:0,y:0,spatialReference:e})):(a.scale*=_,a.scale>_e("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(y)?y:0)}catch{}this._get("constraints")?.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,n){if(!this.ready)return;const r=this.state;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();r.size=[e,n],xJe(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints?.constrain(i,void 0)??i,this.state.viewpoint=i}toMap(e){if(!this.ready)return null;const n=[0,0],[r,i]=this.state.toMap(n,[e.x,e.y]),s=this.state.spatialReference;return new Qt({x:r,y:i,spatialReference:s})}toScreen(e,n){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),i=[r.x,r.y];return n?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(i,i),this.state.toScreen(i,i),qs(i[0],i[1])}_project(e,n){const r=e?.targetGeometry||e;if(!n)return e;if(!r)return null;if(n.imageCoordinateSystem||r.spatialReference?.imageCoordinateSystem||yo(n,r.spatialReference))return e;const i=Sv(r,n);if(!i)throw new Xe("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:n});return ZJe(e)?(e.targetGeometry=i,e):i}};function ZJe(t){return t?.declaredClass==="esri.Viewpoint"}x([E({type:Qt})],Zo.prototype,"center",null),x([E()],Zo.prototype,"constraints",void 0),x([E({type:Vn})],Zo.prototype,"extent",null),x([E({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Zo.prototype,"padding",null),x([E()],Zo.prototype,"ready",void 0),x([E()],Zo.prototype,"resizeAlign",void 0),x([E({readOnly:!0})],Zo.prototype,"resolution",null),x([E({type:Number})],Zo.prototype,"rotation",null),x([E({type:Number})],Zo.prototype,"scale",null),x([E({readOnly:!0})],Zo.prototype,"state",void 0),x([E({type:fu})],Zo.prototype,"viewpoint",null),x([E({readOnly:!0})],Zo.prototype,"visibleArea",null),x([E()],Zo.prototype,"zoom",null),Zo=x([ue("esri.views.2d.ViewStateManager")],Zo);const Ore=160;let ZS=class extends Kt{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=Ore&&this.clear()},Ore))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};x([E()],ZS.prototype,"_timer",void 0),x([E()],ZS.prototype,"stationary",null),ZS=x([ue("esri.views.2d.support.StationaryManager")],ZS);const JJe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new Zo({constraints:new Nre({view:this})}),this.stationaryManager=new ZS,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new qJe(this),this.viewEvents=new Fve(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([mn(()=>this.viewpoint,()=>this.stationaryManager.flip(),Jg)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(r){const i=this._get("animation");if(r===i)return;if(i&&i.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const s=()=>{this.destroyed||r===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};r.when(s,s)}get constraints(){return this.stateManager?.constraints}set constraints(r){r.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=r,i?.destroy()}get padding(){return this.stateManager?.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=i}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}};return x([E({readOnly:!0})],n.prototype,"animationManager",void 0),x([E({readOnly:!0})],n.prototype,"fullOpacity",void 0),x([E()],n.prototype,"stateManager",void 0),x([E()],n.prototype,"constraintsInfo",null),x([E()],n.prototype,"extent",null),x([E({readOnly:!0})],n.prototype,"state",null),x([E({readOnly:!0})],n.prototype,"mapViewNavigation",void 0),x([E()],n.prototype,"renderingOptions",void 0),x([E({readOnly:!0})],n.prototype,"interacting",null),x([E()],n.prototype,"stationary",null),x([E()],n.prototype,"animation",null),x([E({type:Nre})],n.prototype,"constraints",null),x([E()],n.prototype,"padding",null),x([E()],n.prototype,"resizeAlign",null),x([E()],n.prototype,"rotation",null),x([E({readOnly:!0})],n.prototype,"viewEvents",void 0),x([E({type:fu})],n.prototype,"viewpoint",null),n=x([ue("esri.views.Viewport2DBaseMixin")],n),n},QJe=()=>nr.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;var Qw;let gx=(Qw=class extends eW{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=bc(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new Xe("view:animation-stopped","ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,n){n||(n=va(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",n)}},Qw.state={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"},Qw);x([E({readOnly:!0})],gx.prototype,"done",null),x([E({readOnly:!0,type:String})],gx.prototype,"state",void 0),x([E()],gx.prototype,"target",void 0),gx=x([ue("esri.views.ViewAnimation")],gx);const uz=gx;let S3=class extends Kt{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,n){if(!e)return void kt.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new uz;this.view.animation=r,await TW(()=>this.view.ready,n);const i={...n,animate:n?.animate??(!QJe()&&this.view.animationsEnabled),animationMode:n?.animationMode??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:u,allLayerViews:h}=this.view,f=lJe(e,{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:u,allLayerViews:h,pickClosestTarget:n?.pickClosestTarget??!0});return r?.update(f),this._gotoTask={},i.animate?this._gotoAnimated(f,i):this._gotoImmediate(f,i)}_gotoImmediate(e,n){const r=this._gotoTask,i=this.view.animation,s=e.then(o=>{if(gi(n),r!==this._gotoTask)throw new Xe("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=i.target=o,i.finish()});return this._cancellableGoTo(r,i,s,n)}_gotoAnimated(e,n){const r=this._gotoTask,i=this.view.animation;if(!i)return Promise.resolve();const s=e.then(o=>{if(gi(n),r!==this._gotoTask)throw new Xe("view:goto-interrupted","Goto was interrupted");return i.update(o),this.view.animationManager.animate(i,this.view.viewpoint,n),i.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,i,s,n)}_cancellableGoTo(e,n,r,i){const s=()=>e===this._gotoTask;return Dje(r,i).finally(()=>{s()&&(n.done||n.stop())})}};x([E({constructOnly:!0})],S3.prototype,"view",void 0),S3=x([ue("esri.views.2d.GoToManager")],S3);function C_e(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function R_e(t,e){return e.some(n=>C_e(t,n))}function Lre(t,{dragPrimary:e,dragSecondary:n,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:n},{key:"tertiary",value:r}].filter(i=>i.value===t).map(i=>i.key)}let Dre=class extends Js{constructor(e,n){super(!0),this._view=e,this.registerIncoming("double-click",n,r=>this._handleDoubleClick(r,n))}_handleDoubleClick(e,n){C_e(e.data,"primary")&&(e.stopPropagation(),n?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},eQe=class extends Js{constructor(e,n,r){super(!0),this.view=e,this.pointerType=n,this.registerIncoming("double-tap-drag",r,i=>this._handleDoubleTapDrag(i))}_handleDoubleTapDrag(e){const{data:n}=e,{pointerType:r}=n;if(r!==this.pointerType)return;e.stopPropagation();const{action:i,delta:s}=n,{view:o}=this,{mapViewNavigation:a}=o;switch(i){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,c=this._startScale*l,u=c/this._currentScale;a.setViewpointImmediate(u),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:u}=l;if(!u||!c)return void a.end();const h=l.snapScale(this._currentScale),f=(s.y>0?Math.max(h,l.snapToPreviousScale(this._startScale)):Math.min(h,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(f).then(()=>{a.end()});break}}}},AL=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const n=e.data,r=n.pointers.size;switch(n.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},tQe=class extends Js{constructor(e,n,r){super(!0),this.view=e,this.pointerActions=n,this.registerIncoming("drag",r,i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new AL({start:(n,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(n,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(n,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(n,r)=>n===1&&R_e(r.data,this.pointerActions)})}_handleDrag(e){const n=this.view.mapViewNavigation;n.pinch.zoomMomentum||n.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},nQe=class extends Js{constructor(e,n,r){super(!0),this._view=e,this.pointerActions=n;const i=this._view.mapViewNavigation;this._dragEventSeparator=new AL({start:(s,o)=>{i.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{i.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{i.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&R_e(o.data,this.pointerActions)}),this.registerIncoming("drag",r,s=>this._dragEventSeparator.handle(s))}};function M_e(t){const e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function rQe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function iQe(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function sQe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function N_e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function O_e(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function L_e(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function oQe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function aQe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function lQe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function cQe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function uQe(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function hQe(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function dQe(t,e=0,n=1){return t[0]=Math.min(Math.max(t[0],e),n),t[1]=Math.min(Math.max(t[1],e),n),t[2]=Math.min(Math.max(t[2],e),n),t}function fQe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function D_e(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function pQe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function j_e(t,e){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function $_e(t,e){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function F_e(t){const e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function mQe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function gQe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function hz(t,e){const n=e[0],r=e[1],i=e[2];let s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function V_e(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function yQe(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function vQe(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2],c=i*l-s*a,u=s*o-r*l,h=r*a-i*o,f=Math.sqrt(c*c+u*u+h*h);return t[0]=c/f,t[1]=u/f,t[2]=h/f,t}function _Qe(t,e,n,r){const i=e[0],s=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t}function xQe(t,e,n,r,i,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),u=o*(3-2*s);return t[0]=e[0]*a+n[0]*l+r[0]*c+i[0]*u,t[1]=e[1]*a+n[1]*l+r[1]*c+i[1]*u,t[2]=e[2]*a+n[2]*l+r[2]*c+i[2]*u,t}function wQe(t,e,n,r,i,s){const o=1-s,a=o*o,l=s*s,c=a*o,u=3*s*a,h=3*l*o,f=l*s;return t[0]=e[0]*c+n[0]*u+r[0]*h+i[0]*f,t[1]=e[1]*c+n[1]*u+r[1]*h+i[1]*f,t[2]=e[2]*c+n[2]*u+r[2]*h+i[2]*f,t}function bQe(t,e=1){const n=NW,r=2*n()*Math.PI,i=2*n()-1,s=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*s,t[1]=Math.sin(r)*s,t[2]=i*e,t}function EQe(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12],t[1]=n[1]*r+n[5]*i+n[9]*s+n[13],t[2]=n[2]*r+n[6]*i+n[10]*s+n[14],t}function SQe(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function TQe(t,e,n){const r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=i*c-s*l,h=s*a-r*c,f=r*l-i*a,g=i*f-s*h,y=s*u-r*f,_=r*h-i*u,b=2*o;return t[0]=a+u*b+2*g,t[1]=l+h*b+2*y,t[2]=c+f*b+2*_,t}function kQe(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function AQe(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function IQe(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function PQe(t,e){hz(jre,t),hz($re,e);const n=V_e(jre,$re);return n>1?0:n<-1?Math.PI:Math.acos(n)}const jre=g0(),$re=g0();function CQe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function RQe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function MQe(t,e){if(t===e)return!0;const n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Al();return Math.abs(n-s)<=l*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=l*Math.max(1,Math.abs(i),Math.abs(a))}function NQe(t,e,n){const r=n[0]-e[0],i=n[1]-e[1],s=n[2]-e[2];let o=r*r+i*i+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=i*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const OQe=N_e,LQe=O_e,DQe=L_e,jQe=j_e,$Qe=$_e,FQe=M_e,VQe=F_e;Object.freeze(Object.defineProperty({__proto__:null,abs:lQe,add:sQe,angle:PQe,bezier:wQe,ceil:oQe,clamp:dQe,copy:rQe,cross:yQe,crossAndNormalize:vQe,direction:NQe,dist:jQe,distance:j_e,div:DQe,divide:L_e,dot:V_e,equals:MQe,exactEquals:RQe,floor:aQe,hermite:xQe,inverse:gQe,len:FQe,length:M_e,lerp:_Qe,max:hQe,min:uQe,mul:LQe,multiply:O_e,negate:mQe,normalize:hz,random:bQe,rotateX:kQe,rotateY:AQe,rotateZ:IQe,round:fQe,scale:D_e,scaleAndAdd:pQe,set:iQe,sign:cQe,sqrDist:$Qe,sqrLen:VQe,squaredDistance:$_e,squaredLength:F_e,str:CQe,sub:OQe,subtract:N_e,transformMat3:SQe,transformMat4:EQe,transformQuat:TQe},Symbol.toStringTag,{value:"Module"}));function $u(t){let e=t*t;return t<0&&(e*=-1),e}function zQe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function GQe(t,e,n){const r=n,i=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(r.translation[0]=$u(i.axes[0]),r.translation[1]=$u(i.axes[1]),r.translation[2]=$u(i.buttons[7])-$u(i.buttons[6]),r.heading=$u(i.axes[2]),r.tilt=$u(i.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*$u(i.axes[0]),r.translation[1]=1.2*$u(i.axes[1]),r.translation[2]=2*-$u(i.axes[2]),r.heading=1.2*$u(i.axes[5]),r.tilt=1.2*$u(i.axes[3])),r.tilt*=o,D_e(r.translation,r.translation,a),r}function UQe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let BQe=class extends Js{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new Eb,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",n=>this._handleGamePadEvent(n)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([mn(()=>this._view.navigation.gamepad?.enabled,n=>{n?(this._handle.resume(),this._frameTask||(this._frameTask=M2({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},_a)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const n=this._view.navigation.gamepad.device;n&&e.data.device!==n||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,zQe(this._transformation)):(this._currentDevice=e.data.device,GQe(e.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(e){const n=this._transformation;if(UQe(n))return void this._frameTask?.pause();const r=this._view.viewpoint.clone(),i=this._view.navigation.gamepad.velocityFactor,s=HQe*i*e;kL(r,r,[n.translation[0]*s,-n.translation[1]*s]);const o=1+n.translation[2]*qQe*e,a=this._view.constraints.rotationEnabled?-n.heading*WQe*e:0,l=this._view.size,c=[l[0]/2,l[1]];g_e(r,r,o,a,c,l);const u=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=u}};const WQe=.06,HQe=.7,qQe=6e-4;function z_e(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Zn(()=>document.removeEventListener("visibilitychange",e))}let KQe=class extends Js{constructor(e,n,r){super(!0),this.view=e,this.keys=n,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=i=>{const s=this._keyMap[i.data.key];if(i.modifiers.has("Meta")||i.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;i.stopPropagation(),i.preventDefault();const o=i.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[n.left]:"left",[n.right]:"right",[n.up]:"up",[n.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=z_e(i=>i?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){const n=this._currentDirection!=null;if(e!=null){if(n||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else n&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},YQe=class extends Js{constructor(e,n,r){super(!0),this.view=e,this.keys=n,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(n),this.registerIncoming("key-down",r,i=>this._handleKeyDown(i)),this.registerIncoming("key-up",r,i=>this._handleKeyUp(i)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=z_e(i=>i?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,n){for(const r of e)this._keyToDirection.set(r,n)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,n){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const i=this._keyToDirection.get(e.data.key);if(this._pressed=i!=null,this._pressed){if(e.preventDefault(),n)switch(this.view.mapViewNavigation.begin(),i){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},XQe=class extends Js{constructor(e,n,r){super(!0),this.view=e,this.keys=n,this._keysToZoomAction={},this.registerIncoming("key-down",r,i=>this._handleKeyDown(i)),n.zoomIn.forEach(i=>this._keysToZoomAction[i]=0),n.zoomOut.forEach(i=>this._keysToZoomAction[i]=1)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const n=e.modifiers;if(n.size>0&&!n.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const i=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(i){case 0:o=s.zoomIn();break;case 1:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),e.stopPropagation()}};const ZQe=.6;let JQe=class extends Js{constructor(e,n){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",n,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const n=this._view.mapViewNavigation,{x:r,y:i,deltaY:s}=e.data,o=1/ZQe**(1/60*s),a=n.zoom(o,[r,i]);this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,n.end()})}},QQe=class extends Js{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const n=this.view.mapViewNavigation;this._dragEventSeparator=new AL({start:(r,i)=>{n.pinch.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{n.pinch.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{n.pinch.end(this.view),i.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function Fre(t){const e=t.native;return e?{buttons:e.buttons.map(n=>n.pressed?n.value||1:0),axes:e.axes.map(n=>net(n,t.axisThreshold))}:{buttons:[],axes:[]}}function eet(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let n=0;n<t.axes.length;n++)if(t.axes[n]!==e.axes[n])return!1;for(let n=0;n<t.buttons.length;n++)if(t.buttons[n]!==e.buttons[n])return!1;return!0}function tet(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function net(t,e){const n=Math.abs(t);return n<e?0:Math.sign(t)*(n-e)/(1-e)}let ret=class{constructor(e,n){this._element=e,this._input=n,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,Fre(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,i=window.isSecureContext;this.supported=r&&i,this.supported&&(Vre(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const n=new hH(e);n.deviceType!=="unknown"&&(this._inputDevices[e.index]=n,this._input.gamepad.devices.add(n)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=M2({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),n=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!n;Vre(i=>{const s=this._inputDevices[i.index];if(!s)return;const o=this._latestUpdate[i.index],a=Fre(s),l=r||tet(a);o&&(o.timestamp===i.timestamp||!o.active&&l||eet(o.state,a))||this._emitGamepadEvent(i,a,!l)})}_emitGamepadEvent(e,n,r){const i=this._latestUpdate[e.index],s=i&&i.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:n,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:n,action:o})}};function iet(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function Vre(t){for(const e of navigator.getGamepads())iet(e)&&t(e)}const zre=_e("edge"),set=_e("chrome"),oet=_e("ff"),aet=_e("safari"),Gre="esri-view-surface",L_={touchNone:`${Gre}--touch-none`,touchPan:`${Gre}--touch-pan`};var b1;let cet=(b1=class{constructor(e,n){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new ret(e,n),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=Di(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const n in this._active)if(!e||!e.has(n)){const r=this._active[n];this._element.removeEventListener(D$[n],r),delete this._active[n]}e&&e.forEach(n=>{if(!this._active[n]&&D$[n]){const r=(this._eventHandlers[n]||this._handleDefault).bind(this,n);this._element.addEventListener(D$[n],r),this._active[n]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1)}setPointerCapture(e,n){n?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?L_.touchNone:L_.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?L_.touchPan:L_.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(L_.touchNone),this._element.classList.remove(L_.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,n){const r=zve(this._element,e);return b1.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),n.x=r.x,n.y=r.y,n}_handleKey(e,n){const{key:r}=n;r&&e==="key-up"&&this._keyDownState.delete(r);const i={native:n,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(i.key),this._callback(e,i)}_handlePointer(e,n){const r=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,pointerType:n.pointerType,button:n.button,buttons:n.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,n){const r=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,pointerType:n.pointerType,button:n.button,buttons:n.buttons,eventId:this._eventId++});n.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&_e("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,n){let r=this._getDeltaFromTrackpadOrMouseWheel(n);switch(n.deltaMode){case 0:zre&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}zre?r*=.7:set||aet?r*=.6:oet&&(r*=1.375);const i=100,s=Math.abs(r);s>i&&(r=r/s*200/(1+Math.exp(-.02*(s-i))));const o=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,n){this._activePointerCaptures.delete(n.pointerId),this._handleDefault(e,n)}_handleDefault(e,n){const r={native:n};n.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},b1.test={disableSubpixelCoordinates:!1},b1);const D$={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let uet=class extends Js{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const G_e=()=>({maximumClickDelay:300}),het=(t={})=>({...G_e(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),EH=(t={})=>({...G_e(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function CN(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function det(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function fet(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:qs()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[I,P]=t,[M,V]=[P.x-I.x,P.y-I.y];return e.radius=Math.sqrt(M*M+V*V)/2,e.center.x=(I.x+P.x)/2,e.center.y=(I.y+P.y)/2,e}let n=0,r=0;for(let I=0;I<t.length;I++)n+=t[I].x,r+=t[I].y;n/=t.length,r/=t.length;const i=t.map(I=>I.x-n),s=t.map(I=>I.y-r);let o=0,a=0,l=0,c=0,u=0,h=0,f=0;for(let I=0;I<i.length;I++){const P=i[I],M=s[I],V=P*P,C=M*M;o+=V,a+=C,l+=P*M,c+=V*P,u+=C*M,h+=P*C,f+=M*V}const g=.5*(c+h),y=.5*(u+f),_=o*a-l*l,b=(g*a-y*l)/_,T=(o*y-l*g)/_,A=qs(b+n,T+r);return{radius:Math.sqrt(b*b+T*T+(o+a)/t.length),center:A}}function g1(t){const{native:e}=t,{pointerId:n,button:r,pointerType:i}=e;return i==="mouse"?`${n}:${r}`:`${i}`}let pet=class extends Js{constructor(e={},n=_b){super(!1),this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=qs(0,0),this._pointerState=new Map,this._parameters=EH(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new AL({start:(r,i)=>this._dragStart(r,i),update:(r,i)=>this._dragUpdate(i),end:(r,i)=>this._dragEnd(i)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=ii(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const n=this._pointerState.get(e);n&&(n.doubleTapTimeout=ii(n.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,n){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:i}=n,{center:s}=r;this._dragStartCenter=s;const o=j$("begin",qs(0,0),r);this._doubleTapDrag.emit(o,void 0,i),n.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:n,modifiers:r}=e,{center:i}=n,s=j$("update",qs(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(s,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:n,modifiers:r}=e,{center:i}=n,s=j$("end",qs(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:n}=e,r=g1(n),i=this._pointerState.get(r),{pointerType:s}=n.native;if(i){const o=s==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),CN(i.event.data,n)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:n}=e,{pointerType:r}=n.native,i=g1(n),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(i),s);this._pointerState.set(i,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function j$(t,e,n){const{button:r,buttons:i,pointer:s,pointers:o,pointerType:a,timestamp:l}=n;return{action:t,delta:e,button:r,buttons:i,pointer:s,pointers:o,pointerType:a,timestamp:l}}let met=class extends Js{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,n,r,i){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:n.buttons,timestamp:i,pointers:get(this._activePointerMap),pointer:n,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const n=e.native.pointerId,r=wR(this._activePointerMap).angle,i={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(n,i);const s=T3(i,U_e(this._activePointerMap));i.initialAngle=s,i.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const n=e.native.pointerId,r=this._activePointerMap.get(n);r?r.event=e:this._addPointer(e)}_removePointer(e){const n=wR(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(n)}_updatePointerAngles(e){const n=wR(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=T3(r,n)-e,r.lastAngle=T3(r,n)-e})}_emitEvent(e,n,r){const i=wR(this._activePointerMap);this._drag.emit(this._createPayload(e,n,i,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const n=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(n)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(n)):(this._removePointer(n),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const n=e.data,r=n.currentEvent,i=e.timestamp;switch(n.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,i)):(this._addPointer(r),this._emitEvent("added",r,i),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,i))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function U_e(t){const e=[];return t.forEach(n=>{e.push(qs(n.event.x,n.event.y))}),fet(e)}function wR(t){const e=U_e(t);let n=0;return t.forEach(r=>{let i=T3(r,e),s=i-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;i=r.lastAngle+s,r.lastAngle=i;const o=i-r.initialAngle;n+=o}),n/=t.size||1,{angle:n,radius:e.radius,center:e.center}}function get(t){const e=new Map;return t.forEach((n,r)=>e.set(r,n.event)),e}function T3(t,e){const n=t.event,r=n.x-e.center.x,i=n.y-e.center.y;return Math.atan2(i,r)}let yet=class extends Js{constructor(e={},n=_b){super(!1),this._clock=n,this._pointerState=new Map,this._parameters=EH(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const n=e.data,r=g1(n);if(!this._pointerState.has(r)){const i={downButton:n.native.button,x:n.x,y:n.y,immediateDoubleClick:null};this._pointerState.set(r,i),this.startCapturingPointer(n.native)}}_handlePointerUp(e){const n=e.data,r=g1(n),i=this._pointerState.get(r);if(i&&i.downButton===n.native.button){const s=i.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),CN(s,e.data)>o?this._startImmediateDoubleClick(e,i):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(n))):CN(i,e.data)>o?this._removeState(n):this._startImmediateDoubleClick(e,i)}}_startImmediateDoubleClick(e,n){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;n.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const n=g1(e);this._pointerState.delete(n),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},vet=class extends Js{constructor(e={},n=_b){super(!1),this._clock=n,this._pointerState=new Map,this._parameters=het(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",r=>this._handlePointerLoss(r,"pointer-up")),this.registerIncoming("pointer-capture-lost",r=>this._handlePointerLoss(r,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",r=>this._handlePointerLoss(r,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",r=>this._handlePointerMove(r)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=ii(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const n=e.data,r=n.native.pointerId;let i=null;this._pointerState.size===0&&(i=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._parameters.holdDelay));const s={startEvent:n,previousEvent:n,startTimestamp:e.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:i,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(n.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const n=e.data,r=n.native.pointerId,i=this._pointerState.get(r);i&&(i.isDragging?this._pointerDrag.emit(bR("update",i,n),void 0,i.modifiers):det(n,i.startEvent)>this._getDragThreshold(n.native.pointerType)&&this._startDragging(e),i.previousEvent=n)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const n=e.data,r=n.native.pointerId;this._pointerState.forEach(i=>{i.holdTimeout!=null&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging||(i.modifiers=e.modifiers,i.isDragging=!0,r===i.startEvent.native.pointerId?this._pointerDrag.emit(bR("start",i,n)):this._pointerDrag.emit(bR("start",i,i.previousEvent),e.timestamp))})}_handlePointerLoss(e,n){const r=e.data,i=r.native.pointerId,s=this._pointerState.get(i);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(bR("end",s,n==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):n==="pointer-up"&&s.downButton===r.native.button&&e.timestamp-s.startTimestamp<=this._parameters.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(i),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function bR(t,e,n){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:n}}let _et=class extends Js{constructor(e={},n=_b){super(!1),this._clock=n,this._pointerState=new Map,this._parameters=EH(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",r=>this._handleImmediateClick(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=ii(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,n){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=ii(r.doubleClickTimer),n&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const n=this._pointerState.get(e);n.pointerDownCount===1&&this._click.emit(n.event.data,void 0,n.event.modifiers),n.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const n=e.data,{pointerType:r}=n.native,i=xet(n);if(!this._pointerState.has(i))return void this._startClick(e);const s=this._pointerState.get(i),{data:o,modifiers:a}=s.event,l=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;CN(o,n)>l?(this._clearDoubleClickTimer(i,!0),this._startClick(e)):(this._clearDoubleClickTimer(i,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const n=g1(e.data),r=this._pointerState.get(n);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:n}=e,{native:{pointerType:r}}=n,i=g1(n),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),s);this._pointerState.set(i,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function xet(t){const{pointerId:e,pointerType:n,button:r}=t.native;return n==="mouse"?`${e}:${r}`:`${n}`}const ER={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},Ure=Symbol("handles");let yx=class extends Kt{initialize(){const e=()=>this.view?.ready;this.addHandles([Ec(()=>!e(),()=>this._disconnect()),Ec(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){return this._inputManager?.latestPointerInfo}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(Ure),this._inputManager=Di(this._inputManager)}_connect(){const e=this.view.surface,n=new cet(e,this.view.input),r=[new yet,new vet,new _et,new met(this.view.navigation),new pet],i=new Bu({eventSource:n,recognizers:r}),s=new tQe(this.view,["primary"]),o=new nQe(this.view,["secondary"]);i.installHandlers("prevent-context-menu",[new uet],fp.INTERNAL),i.installHandlers("navigation",[new QQe(this.view),new BQe(this.view),new JQe(this.view),new Dre(this.view),new Dre(this.view,[ER.counter]),s,new KQe(this.view,ER.pan),new XQe(this.view,ER.zoom),new YQe(this.view,ER.rotate),o,new eQe(this.view,"touch")],fp.INTERNAL),this.view.viewEvents.connect(i),this._source=n,this._inputManager=i,this.addHandles([mn(()=>this.view?.navigation?.browserTouchPanEnabled,a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},_a),mn(()=>{const{actionMap:a}=this.view.navigation;return{panActions:Lre("pan",a),rotateActions:Lre("rotate",a)}},({panActions:a,rotateActions:l})=>{s.pointerActions=a,o.pointerActions=l},sa)],Ure)}get test(){}};x([E()],yx.prototype,"view",void 0),x([E()],yx.prototype,"latestPointerInfo",null),x([E()],yx.prototype,"multiTouchActive",null),yx=x([ue("esri.views.2d.input.MapViewInputManager")],yx);const wet=yx,bet=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.goToManager=new S3({view:this}),this.animationsEnabled=!0,this.inputManager=new wet({view:this}),this.addHandles([this.on("resize",i=>this.stateManager.resize(i.width,i.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(r,i,s,o){return this.viewEvents.on(r,i,s,o)||super.on(r,i)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,i){return this.goToManager.goTo(r,i)}toMap(r){if(!this.ready)return null;const i=Uve(r)?Gve(this,r):r;return this.stateManager.toMap(i)}};return x([E()],n.prototype,"goToManager",void 0),x([E({readOnly:!0})],n.prototype,"interacting",null),x([E()],n.prototype,"stationary",null),x([E()],n.prototype,"animationsEnabled",void 0),x([E({readOnly:!0})],n.prototype,"inputManager",void 0),n=x([ue("esri.views.Viewport2DMixin")],n),n};let Bre=class{constructor(e){this._view=e,this.viewpoint=new fu({targetGeometry:new Qt,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,n]=this._view.size;return Math.sqrt(e*e+n*n)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return p_e(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,n){n.pan=zme(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,n.rotate=FI(r),n.sourceZoom=this.scale,n.targetZoom=e.scale}interpolate(e,n,r){const{pan:i,rotate:s,zoom:o,zoomOffset:a}=r,{center:l}=this;l.spatialReference=e.center.spatialReference,l.x=IS(e.center.x,n.center.x,i),l.y=IS(e.center.y,n.center.y,i),this.viewpoint.scale=IS(e.scale,n.scale+a,o);let c=e.rotation;const u=n.rotation;Math.abs(u-c)>=180&&(c+=360*(c<u?1:-1)),this.viewpoint.rotation=IS(c,u,s)}copyFrom(e){pa(this.viewpoint,e.viewpoint),this._view=e.view}};function tS(t,e,n,r){const i=3*t,s=3*(n-t)-i,o=1-i-s,a=3*e,l=3*(r-e)-a,c=1-a-l;function u(y){return((o*y+s)*y+i)*y}function h(y){return((c*y+l)*y+a)*y}function f(y){return(3*o*y+2*s)*y+i}function g(y,_){let b,T,A,I,P,M;for(A=y,M=0;M<8;M++){if(I=u(A)-y,Math.abs(I)<_)return A;if(P=f(A),Math.abs(P)<1e-6)break;A-=I/P}if(b=0,T=1,A=y,A<b)return b;if(A>T)return T;for(;b<T;){if(I=u(A),Math.abs(I-y)<_)return A;y>I?b=A:T=A,A=.5*(T-b)+b}return A}return function(y,_=1e-6){return h(g(y,_))}}const Zc={};Zc.ease=tS(.25,.1,.25,1),Zc.linear=tS(0,0,1,1),Zc.easeIn=Zc["ease-in"]=tS(.42,0,1,1),Zc.easeOut=Zc["ease-out"]=tS(0,0,.58,1),Zc.easeInOut=Zc["ease-in-out"]=tS(.42,0,.58,1);const Eet=t=>t,bA=t=>t*t,RN=t=>1-bA(1-t),Wre=t=>t<.5?bA(2*t)/2:(RN(2*(t-.5))+1)/2,MN=t=>t*t*t,dz=t=>1-MN(1-t),Hre=t=>t<.5?MN(2*t)/2:(dz(2*(t-.5))+1)/2,NN=t=>t*t*t*t,fz=t=>1-NN(1-t),qre=t=>t<.5?NN(2*t)/2:(fz(2*(t-.5))+1)/2,ON=t=>t*t*t*t*t,pz=t=>1-ON(1-t),Kre=t=>t<.5?ON(2*t)/2:(pz(2*(t-.5))+1)/2,LN=t=>1-Math.cos(t*Math.PI/2),mz=t=>1-LN(1-t),Yre=t=>t<.5?LN(2*t)/2:(mz(2*(t-.5))+1)/2,DN=t=>2**(10*(t-1)),jN=t=>1-DN(1-t),Xre=t=>t<.5?DN(2*t)/2:(jN(2*(t-.5))+1)/2,$N=t=>-(Math.sqrt(1-t*t)-1),gz=t=>1-$N(1-t),Zre=t=>t<.5?$N(2*t)/2:(gz(2*(t-.5))+1)/2;function _u(t){const e=2*(t-Math.sqrt((t-1)*t)),n=e/2/t;return r=>r<n?t*r*r:e*r-e+1}function xu(t,e){return(n,r)=>n<e?e*t(n/e,r):1-t((1-n)/(1-e),r)*(1-e)}const Jre=xu(_u(1),1),Qre=xu(_u(1),0),FN=xu(_u(1),.5),eie=xu(_u(2),1),tie=xu(_u(2),0),nie=xu(_u(2),.5),rie=xu(_u(3),1),iie=xu(_u(3),0),sie=xu(_u(3),.5),oie=xu(_u(4),1),aie=xu(_u(4),0),lie=xu(_u(4),.5),cie={linear:Eet,"in-quad":bA,"out-quad":RN,"in-out-quad":Wre,"in-coast-quad":Jre,"out-coast-quad":Qre,"in-out-coast-quad":FN,"in-cubic":MN,"out-cubic":dz,"in-out-cubic":Hre,"in-coast-cubic":eie,"out-coast-cubic":tie,"in-out-coast-cubic":nie,"in-quart":NN,"out-quart":fz,"in-out-quart":qre,"in-coast-quart":rie,"out-coast-quart":iie,"in-out-coast-quart":sie,"in-quint":ON,"out-quint":pz,"in-out-quint":Kre,"in-coast-quint":oie,"out-coast-quint":aie,"in-out-coast-quint":lie,"in-sine":LN,"out-sine":mz,"in-out-sine":Yre,"in-expo":DN,"out-expo":jN,"in-out-expo":Xre,"in-circ":$N,"out-circ":gz,"in-out-circ":Zre,"quad-in":bA,"quad-out":RN,"quad-in-out":Wre,"quad-in-coast":Jre,"quad-out-coast":Qre,"quad-in-out-coast":FN,"cubic-in":MN,"cubic-out":dz,"cubic-in-out":Hre,"cubic-in-coast":eie,"cubic-out-coast":tie,"cubic-in-out-coast":nie,"quart-in":NN,"quart-out":fz,"quart-in-out":qre,"quart-in-coast":rie,"quart-out-coast":iie,"quart-in-out-coast":sie,"quint-in":ON,"quint-out":pz,"quint-in-out":Kre,"quint-in-coast":oie,"quint-out-coast":aie,"quint-in-out-coast":lie,"sine-in":LN,"sine-out":mz,"sine-in-out":Yre,"expo-in":DN,"expo-out":jN,"expo-in-out":Xre,"circ-in":$N,"circ-out":gz,"circ-in-out":Zre,ease:t=>Zc.ease(t),"ease-in":t=>Zc.easeIn(t),"ease-out":t=>Zc.easeOut(t),"ease-in-out":t=>Zc.easeInOut(t)};let Tet=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const VN={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},B_e={maxDuration:4e3};let ket=class W_e{constructor(e){this._createCamera=e,this.compared=new Tet,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:VN.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new W_e(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,n,r){this.source!==e&&this.source.copyFrom(e),this.target!==n&&this.target.copyFrom(n),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??VN.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const n=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/n}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>Al()}get hasFov(){return Math.abs(this.compared.fov)>Al()}get hasRotate(){return this.compared.rotate>Al()}},Aet=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},Iet=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,n)=>e+n.time,0)}interpolateComponentsAt(e,n){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,i=0;const s=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],c=l.definition;if(e<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:e/l.time,n),s.hasPan&&!isNaN(n.pan)&&isFinite(s.compared.pan)?n.pan=(r+c.compared.pan*n.pan)/s.compared.pan:n.pan=1,s.hasRotate&&!isNaN(n.rotate)&&isFinite(s.compared.rotate)?n.rotate=(i+c.compared.rotate*n.rotate)/s.compared.rotate:n.rotate=1,o&&!isNaN(n.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:u,targetZoom:h}=c.compared,f=n.zoom*(h-u)+u,g=this.segments[0].definition.compared.sourceZoom,y=this.segments[this.segments.length-1].definition.compared.targetZoom,_=Math.abs(h-g)>Math.abs(u-g)?h:u;n.zoomOffset=_-y,n.zoom=(f-g)/(_-g)}else n.zoom=1;return n}e-=l.time,r+=c.compared.pan,i+=c.compared.rotate}}segmentInterpolateComponentsAt(e,n,r){e.interpolateComponentsAt(n,r)}},$$=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,n=e.compared,r=n.sourceZoom,i=n.targetZoom;this._zoomSign=r>i?1:-1,this._panPixelsAtSource=n.pan*e.source.pixelsPerPanAtZoom(r);const s=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=n.rotate*s}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,n=this.definition.compared.targetZoom,{hasZoom:r,hasPan:i,hasRotate:s}=this.definition;let o=0,a=0;r&&(i&&(o=(n/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(e/n)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(r&&i&&s){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*l,this._panPixelFlow=a/c*l,this._rotatePixelFlow=o/c*l}else if(r&&i){const c=1+o;this._zoomPixelFlow=o/c*l,this._panPixelFlow=1/c*l}else if(r&&s){const c=1+a;this._zoomPixelFlow=a/c*l,this._rotatePixelFlow=1/c*l}else if(i&&s){const c=this._panPixelsAtSource/this._rotatePixels,u=1+c;this._panPixelFlow=c/u*l,this._rotatePixelFlow=1/u*l}else i?this._panPixelFlow=l:r?this._zoomPixelFlow=l:s&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const c=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=c,this._panPixelFlow/=c,this._rotatePixelFlow/=c}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/Pet:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,n=e*this._panPixelsAtSource;return Math.log(n*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const n=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(n*(n/r)**-e-n)/(r-n)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:n,segmentEnd:r}=this.definition;return n+e*(r-n)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const n=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(n*e*this._time)-1))/(n*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,n){e=Math.min(Math.max(e,0),1),n.zoom=this._interpolateComponentsZoom(e),n.pan=this._interpolateComponentsPan(e),n.rotate=this._interpolateComponentsRotate(e),n.zoomOffset=0,n.fov=this._interpolateComponentsFov(e)}};const Pet=FI(45);function Cet(t,e,n){const r=e-t.compared.sourceZoom,i=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(n.ascensionFactor*Math.LN2*t.compared.pan+i)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*i)}function Ret(t,e,n){const r=1/e,i=Math.log(t.compared.sourceZoom*r),s=1/t.desiredPixelFlow,o=1/Math.LN2,a=e-t.compared.sourceZoom,l=1/a,c=(n.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(a))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*s*o*l*c-t.halfWindowSize*i*s*o*l+t.halfWindowSize*i*s*o*c/(a*a)}function Met(t,e,n){const r=e-t.compared.sourceZoom,i=1/r,s=1/e,o=Math.log(t.compared.sourceZoom*s),a=(n.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*i*(-2*i*s*a+2*i*o+2*s-2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function Net(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function Oet(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function Let(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function Det(t,e,n){return-t.compared.pan*t.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function jet(t,e,n){return t.compared.pan*t.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function $et(t,e,n){return-2*t.compared.pan*t.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function Fet(t,e,n){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-n.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function Vet(t,e,n){const r=Math.log(e/t.compared.targetZoom),i=1/t.desiredPixelFlow,s=1/Math.LN2,o=-e+t.compared.targetZoom,a=1/o,l=(-t.halfWindowPanAtZoom(e)-n.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*i*s*a+t.halfWindowSize*r*i*s*l/(o*o)+t.halfWindowSize*i*s*a*l/e}function zet(t,e,n){const r=e-t.compared.targetZoom,i=1/r,s=1/e,o=Math.log(e/t.compared.targetZoom),a=(t.halfWindowPanAtZoom(e)+n.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*i*(-2*i*s*a-2*i*o+2*s+2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function Get(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function Uet(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function Bet(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function Wet(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const n=Math.LN2*t.compared.pan,r=e,i=t.halfWindowPanAtZoom(r),s=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*i);return t.compared.sourceZoom<=t.compared.targetZoom?s*(n-i):s*(n+i)}function Het(t,e){let n=qet(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},i=r.ascensionFactor===0,s=r.descensionFactor===0,o=i?Net:Cet,a=i?Oet:Ret,l=i?Let:Met,c=s?Get:Fet,u=s?Uet:Vet,h=s?Bet:zet,f=M=>o(t,M,r)+Det(t,M,r)+c(t,M,r),g=M=>a(t,M,r)+jet(t,M,r)+u(t,M,r),y=M=>l(t,M,r)+$et(t,M,r)+h(t,M,r);let _=f(n);const b=Wet(t);let T;const A=e.maximumIterations||20,I=e.maximumDistance!=null?e.maximumDistance:1/0;for(T=0;T<A;T++){const M=e.desiredSlope??1e-6;let V=g(n);Math.abs(V)>M&&(V+=M);const C=V/y(n);if(isNaN(C)||n>=I&&C<0){if(!isFinite(I))return null;n=I,_=f(n);break}if(n-=C,n<=t.compared.sourceZoom||n<=t.compared.targetZoom)return null;const N=f(n);if(Math.abs(N-_)/_<=.005)break;_=N}return isNaN(_)||_>b*(1-.3)||n<=t.compared.sourceZoom||n<=t.compared.targetZoom?null:n}function qet(t,e){const n=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<n?e.maximumDistance!=null?n+(e.maximumDistance-n)/2:1.5*n:e.maximumDistance?Math.min(e.maximumDistance,r):r}let Ket=class extends Iet{constructor(e,n){super(),this._preallocSegments=[new $$,new $$,new $$],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,n)}update(e,n){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=n?.apex?Het(e,n.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,n?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,n,r){e.interpolateComponentsAt(n,r),e===this._ascensionSegment?r.zoom=RN(r.zoom):e===this._descensionSegment&&(r.zoom=bA(r.zoom))}_updateWithApex(e,n){const[r,i,s]=this._preallocSegments,o=n?.ascensionFactor??.5,a=Math.min(1-o,n?.ascensionFactor!=null&&n.descensionFactor!=null?n.descensionFactor:.5),l=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),l>0&&(i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.copyFrom(this.definition),i.definition.compared.sourceZoom=e,i.definition.compared.targetZoom=e,i.definition.compared.pan=this.definition.compared.pan*l,i.definition.compared.rotate=this.definition.compared.rotate*l,i.definition.segmentStart=r.definition.segmentEnd,i.definition.segmentEnd=r.definition.segmentEnd+l,i.update(),this.segments.push(i)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=e,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+l,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const Yet=new Aet;let Xet=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=FN,this.definition=new ket(e),this.path=new Ket}update(e,n,r){this.definition.update(e,n,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(z$e(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?FN:jN)}cameraAt(e,n){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,Yet);n.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const n=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-n)/(r-n)}_applyTimeSettings(e,n){const r=n.speedFactor!=null?n.speedFactor:1,i=n.minDuration??VN.minDuration/r,s=n.maxDuration??VN.maxDuration/r;return e=n.duration!=null?n.duration:Math.min(Math.max(e/r,i),s)}};const Zet=2e3,Jet=64;let Qet=class{constructor(e){this._view=e,this._animation=new Xet(()=>new Bre(this._view)),this._current=new Bre(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,n,r={}){pa(this._current.viewpoint,e),pa(this._source.viewpoint,e),pa(this._target.viewpoint,n),this._animation.update(this._source,this._target,r)}applyRatio(e,n){this._animation.cameraAt(n,this._current),pa(e,this._current.viewpoint)}},vx=class extends Kt{constructor(e){super(e),this._animation=null,this._destinationViewState=new wH,this.updateFunction=null,this.easing=cie.ease,this.viewpoint=new fu({targetGeometry:new Qt,scale:0,rotation:0}),this._updateTask=M2({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new Qet(e.view)}destroy(){this._updateTask=ii(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,n,r){this.stop();const i=this.viewpoint;pa(i,n);const s=e.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(n.scale,s.scale)*Jet,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r?.duration,maxDuration:r?.animationMode==="auto"?1/0:r?.maxDuration??B_e.maxDuration,speedFactor:r?.speedFactor,easing:(typeof r?.easing=="string"?cie[r.easing]:r?.easing)||this.easing}),r?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,ett(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,n){this.stop(),this.updateFunction=n,this.viewpoint=e;const r=new uz({target:e.clone()}),i=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const n=this.animation;if(n&&n.state!==uz.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{const r=performance.now()-this._startTime,i=this._transition.duration,s=i>0?r/i:1,o=s>=1;this._transition.applyRatio(this.viewpoint,s),o&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function ett(t,e,n,r){if(e?.duration!=null)return!0;const{time:i,isLinear:s}=t,o=e?.speedFactor||1;if(i>(e?.maxDuration??B_e.maxDuration/o))return!1;if(s){const l=Vi(),c=qs(...r.toScreen(l,...n.center)),u=qs(...n.toScreen(l,...r.center)),h=u!=null&&u.x>-1*n.size[0]&&u.x<(1.5+.5)*n.size[0]&&u.y>-1*n.size[1]&&u.y<(1.5+.5)*n.size[1],f=c!=null&&c.x>-1*r.size[0]&&c.x<(1.5+.5)*r.size[0]&&c.y>-1*r.size[1]&&c.y<(1.5+.5)*r.size[1];if(i>Zet/o&&!h&&!f)return!1}return!0}x([E()],vx.prototype,"easing",void 0),x([E()],vx.prototype,"view",void 0),x([E()],vx.prototype,"viewpoint",void 0),vx=x([ue("esri.views.2d.AnimationManager")],vx);const ttt=vx;function ai(){return Promise.all([ve(()=>import("./webglDeps-C48zTcMT.js"),__vite__mapDeps([299,224,300,301,302,28,96])),ve(()=>import("./mapViewDeps-HlEDu9W8.js"),__vite__mapDeps([303,175,55,56,140,141,131,66,28,142,133,134,139,143,127,144,89,304,305,224,300,301,215,128,306,135,302,96,223,95,307,126,163,308,251,194,197,68,69,33,136,148,309,145,146,310,85,80,129,78,79,311,53,299,312,158,313,314,193,315,213,214,316,113,125,130,132,124,73,72,317,147,318,138,47,48,49,319,149,154,122,320,321,322,323,220,254,324,325]))])}const nS=()=>ai().then(()=>ve(()=>import("./TileLayerView2D-DGmdAneU.js"),__vite__mapDeps([326,139,134,140,141,131,66,28,142,133,143,127,144,89,310,175,55,56,85,80,129,78,79,311,53,308,251,307,126,95,301,302,96,223,224,163,194,197,68,69,312,305,300,215,306,135,158,313,314,193,113,304,128,33,136,148,145,146,213,214,319,125,130,132,124,73,72,149,154,122,327,328,329,323,330,283,331,321,322,332,333,334,254,335,336,337,338,339]))),q0=()=>ai().then(()=>ve(()=>import("./FeatureLayerView2D-D0PoBIJA.js").then(t=>t.F),__vite__mapDeps([340,304,140,141,131,66,28,142,133,134,139,143,127,144,89,305,224,300,301,215,128,306,135,302,96,223,95,307,126,163,308,251,194,197,68,69,33,136,148,258,235,206,202,179,166,203,204,205,207,124,165,208,84,132,341,240,342,343,73,83,330,283,322,323,158,114,112,113,115,155,156,149,85,80,268,54,55,56,309,344,228,87,151,257,250,335,338,332,333,339]))),uie={"base-dynamic":()=>ai().then(()=>ve(()=>import("./BaseDynamicLayerView2D-DHzjWTYG.js"),__vite__mapDeps([345,346,307,126,127,95,301,302,28,96,223,224,163,308,251,194,197,68,66,69,328,305,300,215,329,330,283,347,332,333]))),"base-tile":nS,"bing-maps":nS,catalog:()=>ai().then(()=>ve(()=>import("./CatalogLayerView2D-Bn8lxnf8.js"),__vite__mapDeps([348,330,308,251,283,332]))),"catalog-dynamic-group":()=>ai().then(()=>ve(()=>import("./CatalogDynamicGroupLayerView2D-54hXO2-Y.js"),__vite__mapDeps([349,330,308,251,283,332]))),"catalog-footprint":()=>ai().then(()=>ve(()=>import("./CatalogFootprintLayerView2D-BU45Ao4M.js"),__vite__mapDeps([350,340,304,140,141,131,66,28,142,133,134,139,143,127,144,89,305,224,300,301,215,128,306,135,302,96,223,95,307,126,163,308,251,194,197,68,69,33,136,148,258,235,206,202,179,166,203,204,205,207,124,165,208,84,132,341,240,342,343,73,83,330,283,322,323,158,114,112,113,115,155,156,149,85,80,268,54,55,56,309,344,228,87,151,257,250,335,338,332,333,339]))),csv:q0,"geo-rss":()=>ai().then(()=>ve(()=>import("./GeoRSSLayerView2D-D0m0GX85.js"),__vite__mapDeps([351,246,206,202,179,166,203,33,204,205,144,89,199,200,201,165,26,27,137,85,80,129,78,79,133,134,54,55,56,207,124,208,240,330,308,251,283,320,321,322,28,128,126,127,95,300,224,323,307,301,302,96,223,163,194,197,68,66,69,304,140,141,131,142,139,143,305,215,306,135,136,148,319,310,175,311,53,125,130,132,73,72,149,154,122,332]))),feature:q0,geojson:q0,parquet:q0,graphics:()=>ai().then(()=>ve(()=>import("./GraphicsLayerView2D-D-mwAjeI.js"),__vite__mapDeps([352,330,308,251,283,320,321,322,28,128,126,127,95,300,224,323,307,301,302,96,223,163,194,197,68,66,69,304,140,141,131,142,133,134,139,143,144,89,305,215,306,135,33,136,148,319,85,80,310,175,55,56,129,78,79,311,53,125,130,132,124,73,72,149,154,122,332,339]))),group:()=>ai().then(()=>ve(()=>import("./GroupLayerView2D-BicehNCz.js"),__vite__mapDeps([353,330,308,251,283,332]))),imagery:()=>ai().then(()=>ve(()=>import("./ImageryLayerView2D-B7HPPV3F.js"),__vite__mapDeps([354,355,302,28,96,223,224,95,181,307,126,127,301,163,308,251,194,197,68,66,69,174,172,330,283,319,85,80,140,141,131,142,133,134,139,143,144,89,310,175,55,56,129,78,79,311,53,125,128,130,132,124,135,73,72,304,305,300,215,306,33,136,148,149,154,122,331,321,322,323,346,328,329,347,178,293,341,338,332,333,339]))),"imagery-tile":()=>ai().then(()=>ve(()=>import("./ImageryTileLayerView2D-DDoa9VfH.js"),__vite__mapDeps([356,357,355,302,28,96,223,224,95,181,307,126,127,301,163,308,251,194,197,68,66,69,174,172,330,283,177,358,323,305,300,215,318,306,135,329,359,178,339,293,341,338,332,333]))),kml:()=>ai().then(()=>ve(()=>import("./KMLLayerView2D-DEmp8QCN.js"),__vite__mapDeps([360,361,199,200,201,202,179,166,203,33,204,205,144,89,165,26,27,137,85,80,129,78,79,133,134,54,55,56,206,207,124,208,240,328,308,251,305,224,300,301,215,329,346,307,126,127,95,302,28,96,223,163,194,197,68,66,69,330,283,320,321,322,128,323,304,140,141,131,142,139,143,306,135,136,148,319,310,175,311,53,125,130,132,73,72,149,154,122,332,47,48,49,178,315,299,213,214,313,358]))),"knowledge-graph":()=>ai().then(()=>ve(()=>import("./KnowledgeGraphLayerView2D-CisHkQRY.js"),__vite__mapDeps([362,330,308,251,283,332]))),"link-chart":()=>ai().then(()=>ve(()=>import("./KnowledgeGraphLayerView2D-CisHkQRY.js"),__vite__mapDeps([362,330,308,251,283,332]))),"knowledge-graph-sublayer":q0,"map-image":()=>ai().then(()=>ve(()=>import("./MapImageLayerView2D-Csg3YuOA.js"),__vite__mapDeps([363,346,307,126,127,95,301,302,28,96,223,224,163,308,251,194,197,68,66,69,328,305,300,215,329,330,283,319,85,80,140,141,131,142,133,134,139,143,144,89,310,175,55,56,129,78,79,311,53,125,128,130,132,124,135,73,72,304,306,33,136,148,149,154,122,331,321,322,323,347,332,364,254,335,337,341,333,334,336,338,339]))),"map-notes":()=>ai().then(()=>ve(()=>import("./MapNotesLayerView2D-CocYwJ2-.js"),__vite__mapDeps([365,330,308,251,283,320,321,322,28,128,126,127,95,300,224,323,307,301,302,96,223,163,194,197,68,66,69,304,140,141,131,142,133,134,139,143,144,89,305,215,306,135,33,136,148,319,85,80,310,175,55,56,129,78,79,311,53,125,130,132,124,73,72,149,154,122,332,339]))),media:()=>ai().then(()=>ve(()=>import("./MediaLayerView2D-Blyut32g.js"),__vite__mapDeps([366,367,154,206,202,179,166,203,33,204,205,144,89,139,134,140,141,131,66,28,142,133,143,127,310,175,55,56,85,80,129,78,79,311,53,308,251,307,126,95,301,302,96,223,224,163,194,197,68,69,312,305,300,215,306,135,158,313,314,193,113,304,128,136,148,145,146,213,214,319,125,130,132,124,73,72,149,122,317,147,368,318,330,283,332]))),"ogc-feature":()=>ai().then(()=>ve(()=>import("./OGCFeatureLayerView2D-DcQNGrpX.js"),__vite__mapDeps([369,340,304,140,141,131,66,28,142,133,134,139,143,127,144,89,305,224,300,301,215,128,306,135,302,96,223,95,307,126,163,308,251,194,197,68,69,33,136,148,258,235,206,202,179,166,203,204,205,207,124,165,208,84,132,341,240,342,343,73,83,330,283,322,323,158,114,112,113,115,155,156,149,85,80,268,54,55,56,309,344,228,87,151,257,250,335,338,332,333,339]))),"open-street-map":nS,"oriented-imagery":q0,route:()=>ai().then(()=>ve(()=>import("./RouteLayerView2D-CWuExzfG.js"),__vite__mapDeps([370,371,372,330,308,251,283,320,321,322,28,128,126,127,95,300,224,323,307,301,302,96,223,163,194,197,68,66,69,304,140,141,131,142,133,134,139,143,144,89,305,215,306,135,33,136,148,319,85,80,310,175,55,56,129,78,79,311,53,125,130,132,124,73,72,149,154,122,332,339]))),stream:()=>ai().then(()=>ve(()=>import("./StreamLayerView2D-BRkcjoNM.js"),__vite__mapDeps([373,240,340,304,140,141,131,66,28,142,133,134,139,143,127,144,89,305,224,300,301,215,128,306,135,302,96,223,95,307,126,163,308,251,194,197,68,69,33,136,148,258,235,206,202,179,166,203,204,205,207,124,165,208,84,132,341,342,343,73,83,330,283,322,323,158,114,112,113,115,155,156,149,85,80,268,54,55,56,309,344,228,87,151,257,250,335,338,332,333,339]))),"subtype-group":()=>ai().then(()=>ve(()=>import("./SubtypeGroupLayerView2D-DRw8egpB.js"),__vite__mapDeps([374,340,304,140,141,131,66,28,142,133,134,139,143,127,144,89,305,224,300,301,215,128,306,135,302,96,223,95,307,126,163,308,251,194,197,68,69,33,136,148,258,235,206,202,179,166,203,204,205,207,124,165,208,84,132,341,240,342,343,73,83,330,283,322,323,158,114,112,113,115,155,156,149,85,80,268,54,55,56,309,344,228,87,151,257,250,335,338,332,333,339]))),tile:nS,"vector-tile":()=>ai().then(()=>ve(()=>import("./VectorTileLayerView2D-B-EeNVwr.js"),__vite__mapDeps([375,124,143,113,28,139,134,26,27,193,314,194,142,224,302,96,223,307,126,127,95,301,163,308,251,197,68,66,69,323,71,246,195,196,175,55,56,330,283,332,333]))),video:()=>ai().then(()=>ve(()=>import("./VideoLayerView2D-B-r-_rAv.js"),__vite__mapDeps([376,377,249,31,250,251,270,32,33,378,238,133,134,237,26,27,368,163,307,126,127,95,301,302,28,96,223,224,308,194,197,68,66,69,304,140,141,131,142,139,143,144,89,305,300,215,128,306,135,136,148,318,379,330,283,320,321,322,323,319,85,80,310,175,55,56,129,78,79,311,53,125,130,132,124,73,72,149,154,122,332]))),wcs:()=>ai().then(()=>ve(()=>import("./ImageryTileLayerView2D-DDoa9VfH.js"),__vite__mapDeps([356,357,355,302,28,96,223,224,95,181,307,126,127,301,163,308,251,194,197,68,66,69,174,172,330,283,177,358,323,305,300,215,318,306,135,329,359,178,339,293,341,338,332,333]))),"web-tile":nS,wfs:q0,wms:()=>ai().then(()=>ve(()=>import("./WMSLayerView2D-l-HzSHl9.js"),__vite__mapDeps([380,346,307,126,127,95,301,302,28,96,223,224,163,308,251,194,197,68,66,69,328,305,300,215,329,330,283,347,332,333,381,341]))),wmts:()=>ai().then(()=>ve(()=>import("./WMTSLayerView2D-CGC6K_vs.js"),__vite__mapDeps([382,327,328,308,251,305,224,300,301,215,329,307,126,127,95,302,28,96,223,163,194,197,68,66,69,323,330,283,332,333]))),"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"gaussian-splat":null,"integrated-mesh-3dtiles":null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,scene:null,unknown:null,unsupported:null,viewshed:null,voxel:null};function ntt(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",n=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new Xe(`${n}:view-not-supported`,`${e} is not supported in 2D`)}const hie={hasLayerViewModule:t=>uie[t.type]!=null,importLayerView:t=>{const e=uie[t.type];if(e==null)throw ntt(t);return e(t)}};var nc;let Ob=(nc=class{static getId(e,n,r,i){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${n}/${r}/${i}`}constructor(e,n,r,i){this.set(e,n,r,i)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,n=4095&this.col,r=63&this.level;return(3&this.world)<<30|n<<22|e<<8|r}acquire(e,n,r,i){this.set(e,n,r,i)}contains(e){const n=e.level-this.level;return n>=0&&this.row===e.row>>n&&this.col===e.col>>n&&this.world===e.world}containsChild(e){const n=e.level-this.level;return n>0&&this.row===e.row>>n&&this.col===e.col>>n&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new nc(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,n,r,i){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,a,l]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+n,this.col=+r,this.world=+i||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new nc(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,n,r){const i=this.clone();return i.col+=e,i.row+=n,r.normalizeKey(i),i}getChildKeys(){const e=this.level+1,n=this.row<<1,r=this.col<<1,i=this.world;return[new nc(e,n,r,i),new nc(e,n,r+1,i),new nc(e,n+1,r,i),new nc(e,n+1,r+1,i)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},nc.pool=new bb(()=>new nc(""),null,null,25,50),nc);function D_(t,e){return[t,e]}function K0(t,e,n){return t[0]=e,t[1]=n,t}function rtt(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}const Fu=new Ob("0/0/0/0");let itt=class H_e{static create(e,n,r=null){const i=Ga(e.spatialReference),s=n.origin||D_(e.origin.x,e.origin.y),o=D_(e.size[0]*n.resolution,e.size[1]*n.resolution),a=D_(-1/0,-1/0),l=D_(1/0,1/0),c=D_(1/0,1/0);r!=null&&(K0(a,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),K0(l,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),K0(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:u,rows:h}=n;let f,g,y,_;return!r&&u&&h&&(K0(a,u[0],h[0]),K0(l,u[1],h[1]),K0(c,u[1]-u[0]+1,h[1]-h[0]+1)),e.isWrappable?(f=D_(Math.ceil(Math.round((i.valid[1]-i.valid[0])/n.resolution)/e.size[0]),c[1]),g=!0,y=i.origin,_=i.valid):(f=c,g=!1),new H_e(n.level,n.resolution,n.scale,s,a,l,c,o,f,g,y,_)}constructor(e,n,r,i,s,o,a,l,c,u,h,f){this.level=e,this.resolution=n,this.scale=r,this.origin=i,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldSize=c,this.wrap=u,this._spatialReferenceOrigin=h,this._spatialReferenceValid=f}normalizeCol(e){if(!this.wrap)return e;const n=this.worldSize[0];return e<0?n-1-Math.abs((e+1)%n):e%n}normalizeKey(e){if(!this.wrap)return;const n=this.worldSize[0],r=e.col;r<0?(e.col=r+n,e.world-=1):r>=n&&(e.col=r-n,e.world+=1)}denormalizeCol(e,n){return this.wrap?this.worldSize[0]*n+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const n=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,i=this._spatialReferenceValid;return this.wrap&&r&&i?n===r[0]?i[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?i[1]:n:n}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,n,r=!1){Fu.set(n);const i=r?Fu.col:this.denormalizeCol(Fu.col,Fu.world),s=Fu.row;return rtt(e,this.getXForColumn(i),this.getYForRow(s+1),this.getXForColumn(i+1),this.getYForRow(s)),e}getTileCoords(e,n,r=!1){Fu.set(n);const i=r?Fu.col:this.denormalizeCol(Fu.col,Fu.world);return Array.isArray(e)?K0(e,this.getXForColumn(i),this.getYForRow(Fu.row)):(e.x=this.getXForColumn(i),e.y=this.getYForRow(Fu.row)),e}};var E1;let SH=(E1=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:n,colFrom:r,colTo:i}of this.spans)for(let s=r;s<=i;s++){const o=e.getWorldForColumn(s);yield new Ob(e.level,n,e.normalizeCol(s),o)}}forEach(e,n){const{spans:r,lodInfo:i}=this,{level:s}=i;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++)e.call(n,s,o,i.normalizeCol(c),i.getWorldForColumn(c))}},E1.pool=new bb(()=>new E1),E1),F$=class{constructor(e,n,r){this.row=e,this.colFrom=n,this.colTo=r}};const di=new Ob("0/0/0/0");let stt=class q_e{static create(e,n){e[1]>n[1]&&([e,n]=[n,e]);const[r,i]=e,[s,o]=n,a=s-r,l=o-i,c=l!==0?a/l:0,u=(Math.ceil(i)-i)*c,h=(Math.floor(i)-i)*c;return new q_e(r,Math.floor(i),Math.ceil(o),c,a<0?u:h,a<0?h:u,a<0?s:r,a<0?r:s)}constructor(e,n,r,i,s,o,a,l){this.x=e,this.ymin=n,this.ymax=r,this.invM=i,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Hl=[[0,0],[0,0],[0,0],[0,0]],ott=1e-6;let att=class{constructor(e,n=null,r=e.lods[0].level,i=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=n,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter(a=>a.level>=r&&a.level<=i);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>itt.create(e,a,n));s.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,n,r=!1){di.set(n);const i=this._infoByLevel[di.level];return i?i.getTileBounds(e,di,r):e}getTileCoords(e,n,r=!1){di.set(n);const i=this._infoByLevel[di.level];return i?i.getTileCoords(e,di,r):e}getTileCoverage(e,n=192,r=!0,i="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=i==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=SH.pool.acquire(s),a=this._wrap;let l,c,u,h=1/0,f=-1/0;const g=o.spans;Hl[0][0]=Hl[0][1]=Hl[1][1]=Hl[3][0]=-n,Hl[1][0]=Hl[2][0]=e.size[0]+n,Hl[2][1]=Hl[3][1]=e.size[1]+n;for(const T of Hl)e.toMap(T,T),T[0]=s.getColumnForX(T[0]),T[1]=s.getRowForY(T[1]);const y=[];let _=3;for(let T=0;T<4;T++){if(Hl[T][1]===Hl[_][1]){_=T;continue}const A=stt.create(Hl[T],Hl[_]);h=Math.min(A.ymin,h),f=Math.max(A.ymax,f),y[A.ymin]===void 0&&(y[A.ymin]=[]),y[A.ymin].push(A),_=T}if(h==null||f==null||f-h>100)return null;let b=[];for(l=h;l<f;){y[l]!=null&&(b=b.concat(y[l])),c=1/0,u=-1/0;for(let T=b.length-1;T>=0;T--){const A=b[T];c=Math.min(c,A.getLeftCol()),u=Math.max(u,A.getRightCol())}if(c=Math.floor(c),u=Math.floor(u),l>=s.first[1]&&l<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const T=Math.floor(u/s.worldSize[0]);for(let A=Math.floor(c/s.worldSize[0]);A<=T;A++)g.push(new F$(l,Math.max(s.getFirstColumnForWorld(A),c),Math.min(s.getLastColumnForWorld(A),u)))}else g.push(new F$(l,c,u));else c>s.last[0]||u<s.first[0]||(c=Math.max(c,s.first[0]),u=Math.min(u,s.last[0]),g.push(new F$(l,c,u)));l+=1;for(let T=b.length-1;T>=0;T--){const A=b[T];A.ymax>=l?A.incrRow():b.splice(T,1)}}return o}getTileParentId(e){di.set(e);const n=this._infoByLevel[di.level],r=this._lodInfos.indexOf(n)-1;return r<0?null:(this._getTileIdAtLOD(di,this._lodInfos[r],di),di.id)}getTileResolution(e){const n=this._infoByLevel[typeof e=="object"?e.level:e];return n?n.resolution:-1}getTileScale(e){const n=this._infoByLevel[e.level];return n?n.scale:-1}intersects(e,n){di.set(n);const r=this._infoByLevel[di.level],i=e.lodInfo;if(i.resolution>r.resolution){this._getTileIdAtLOD(di,i,di);const o=i.denormalizeCol(di.col,di.world);for(const a of e.spans)if(a.row===di.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(i.resolution<r.resolution){const[o,a,l,c]=e.spans.reduce((_,b)=>(_[0]=Math.min(_[0],b.row),_[1]=Math.max(_[1],b.row),_[2]=Math.min(_[2],b.colFrom),_[3]=Math.max(_[3],b.colTo),_),[1/0,-1/0,1/0,-1/0]),u=r.denormalizeCol(di.col,di.world),h=i.getColumnForX(r.getXForColumn(u)),f=i.getRowForY(r.getYForRow(di.row)),g=i.getColumnForX(r.getXForColumn(u+1))-1,y=i.getRowForY(r.getYForRow(di.row+1))-1;return!(h>c||g<l||f>a||y<o)}const s=i.denormalizeCol(di.col,di.world);return e.spans.some(o=>o.row===di.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(e,n,r){if(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],this._wrap){const i=Ga(this.tileInfo.spatialReference),s=-r*(i.valid[1]-i.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const n=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>n[0])return this._infoByScale[n[0]];for(let r=1;r<n.length-1;r++)if(e>n[r]+ott)return this._infoByScale[n[r-1]];return this._infoByScale[n[n.length-1]]}getClosestInfoForScale(e){const n=this.scales;return this._infoByScale[e]||(e=n.reduce((r,i)=>Math.abs(i-e)<Math.abs(r-e)?i:r,n[0])),this._infoByScale[e]}scaleToLevel(e){const n=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=n.length-1;r>=0;r--)if(e<n[r])return r===n.length-1?this._infoByScale[n[n.length-1]].level:this._infoByScale[n[r]].level+(n[r]-e)/(n[r]-n[r+1]);return this._infoByScale[n[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,n,r){const i=this._infoByLevel[r.level];return e.set(r),n.resolution<i.resolution?null:(n.resolution===i.resolution||(e.level=n.level,e.col=Math.floor(r.col*i.resolution/n.resolution+.01),e.row=Math.floor(r.row*i.resolution/n.resolution+.01)),e)}},ltt=class{constructor(e,n){this.item=e,this.controller=n,this.promise=null}},ctt=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new Sw,this._controllers=new Sw,this._processingItems=new Sw,this._pausedSignal=W2(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new fA(e.peeker),this.process=e.process;const n=e.scheduler;e.priority&&n&&(this._task=n.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=ii(this._schedule),this._task=ii(this._task)}get updating(){return!!this._task?.updating||this.readyToRun}get length(){return this._processingItems.size+this._queue.length}abort(e){const n=this._controllers.get(e);n&&n.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(n=>e.push(n)),this._controllers.clear(),e.forEach(n=>n.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((n,r)=>e(r))}get(e){const n=this._deferreds.get(e);return n?n.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,n){const r=this.get(e);if(r)return r;const i=new AbortController;let s=null;n&&(s=yu(n,()=>i.abort()));const o=()=>{const u=this._processingItems.get(e);u&&u.controller.abort(),a(),c.reject(Cr())},a=()=>{l.remove(),s?.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},l=jB(i.signal,o),c=bc();return this._deferreds.set(e,c),this._controllers.set(e,i),c.promise.then(a,a),this._queue.push(e),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject(Cr()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const n of e)this._queue.push(n.item),n.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get readyToRun(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=Tb(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,n){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(n))}_processError(e,n){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(n))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let n;const r=new AbortController,i=new ltt(e,r);this._processingItems.set(e,i);try{n=this.process(e,r.signal)}catch(s){this._processError(i,s)}va(n)?(i.promise=n,n.then(s=>this._processResult(i,s),s=>this._processError(i,s))):this._processResult(i,n)}get test(){}};const die=[0,0];let Of=class extends Kt{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:n,scheduler:r,priority:i}=this;this._queue=new ctt({concurrency:e,scheduler:r,priority:i,process:(s,o)=>{const a=this._keyToItem.get(s);return n(a,{signal:o})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=Di(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const n=typeof e=="string"?e:e.id;this._queue.abort(n)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const n=e.key.id;if(this._queue.has(n))return this._queue.get(n);const r=this._queue.push(n),i=this.tileInfoView.getTileScale(e.key),s=kI(this._tilesByScale,i,()=>new Set),o=()=>{s.delete(e.key),s.size===0&&this._tilesByScale.delete(i),this._keyToItem.delete(n)};return s.add(e.key),this._keyToItem.set(n,e),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const n=new Set;for(const o of e)n.add(this._keyToItem.get(o).key);const r=this.state.scale;let i,s=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(Wpe(a,l=>n.has(l))){const l=Math.abs(o-r);l<s&&(i=a,s=l)}return this._getClosestTileKey(i,e).id}_getClosestTileKey(e,n){const r=this.tileInfoView,i=this.state.center;let s,o=Number.POSITIVE_INFINITY;for(const a of e)if(n.has(a.id)){r.getTileCoords(die,a);const l=dL(die,i);l<o&&(o=l,s=a)}return s}};x([E({constructOnly:!0})],Of.prototype,"concurrency",void 0),x([E({constructOnly:!0})],Of.prototype,"priority",void 0),x([E({constructOnly:!0})],Of.prototype,"process",void 0),x([E({constructOnly:!0})],Of.prototype,"scheduler",void 0),x([E()],Of.prototype,"state",void 0),x([E({constructOnly:!0})],Of.prototype,"tileInfoView",void 0),Of=x([ue("esri.views.2d.tiling.TileQueue")],Of);const tOt=Of;let utt=class{constructor(e,n,r){this.maxSize=e,this._tileInfoView=n,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const n=this._tilePerId.get(e);if(!n)return;const r=n.key.level,i=this._tileKeysPerLevel[r];fie(this._tilePerId,e);for(let s=0;s<i.length;s++)if(i[s].id===e){i.splice(s,1);break}return n.visible=!0,n}add(e){e.visible=!1;const n=e.key,r=n.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const i=n.level;this._tileKeysPerLevel[i]||(this._tileKeysPerLevel[i]=[]),this._tileKeysPerLevel[i].push(n)}prune(e,n,r){let i=this._tilePerId.size;if(i<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;i>this.maxSize&&s>=0;)s!==e&&(i=this._pruneAroundCenterTile(i,n,r,s)),s--;i>this.maxSize&&(i=this._pruneAroundCenterTile(i,n,r,e))}_pruneAroundCenterTile(e,n,r,i){const s=this._tileKeysPerLevel[i];if(!s||s.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],c=r*o[1],u=[0,0],h=[0,0];for(s.sort((f,g)=>(u[0]=a.x+l*(f.col+.5),u[1]=a.y-c*(f.row+.5),h[0]=a.x+l*(g.col+.5),h[1]=a.y-c*(g.row+.5),aA(u,n)-aA(h,n)));s.length>0;){const f=s.pop();if(this._removeTile(f.id),--e===this.maxSize)break}return e}_removeTile(e){const n=this._tilePerId.get(e);this._removedFunc&&n&&this._removedFunc(n),fie(this._tilePerId,e)}};function fie(t,e){t.delete(e)}const Y0=new Ob(0,0,0,0),xf=new Map,rS=[],V$=[];let rOt=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new utt(e.cacheSize,this.tileInfoView,n=>{this.releaseTile(n)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:n,tileIndex:r}=this,{scale:i,center:s,resolution:o}=e.state,{minScale:a,maxScale:l}=this.tileInfoView,c=!e.stationary&&i>this._previousScale;if(this._previousScale=i,!n&&(i>a||i<l))return this.tiles.length=0,void this.clear();const u=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!u)return this.tiles.length=0,void this.clear();const{spans:h,lodInfo:f}=u,{level:g}=f;this.tiles.length=0,r.forEach(T=>T.visible=!0);let y=0,_=0;if(h.length>0)for(const{row:T,colFrom:A,colTo:I}of h)for(let P=A;P<=I;P++){y++;const M=Y0.set(g,T,f.normalizeCol(P),f.getWorldForColumn(P)).id;let V=r.get(M);if(V)V.isReady?(xf.set(M,V),_++):c||this._addParentTile(M,xf);else{if(this._tileCache?.has(M)){if(V=this._tileCache.pop(M),this.tileIndex.set(M,V),V.isReady){xf.set(M,V),_++;continue}}else V=this.acquireTile(Y0),this.tileIndex.set(M,V);c||this._addParentTile(M,xf)}}const b=_===y;for(const[T,A]of r){if(xf.has(T))continue;Y0.set(T);const I=this.tileInfoView.intersects(u,Y0),P=this.cachePolicy==="purge"?Y0.level!==g:Y0.level>g;!I||!c&&b?!P&&I||rS.push(A):A.isReady?P&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Y0,g)?rS.push(A):V$.push(A):P&&rS.push(A)}for(const T of V$)T.isReady&&xf.set(T.key.id,T);for(const T of rS)this._tileCache?this._tileCache.add(T):this.releaseTile(T),r.delete(T.key.id);for(const T of xf.values())this.tiles.push(T);for(const T of r.values())xf.has(T.key.id)||(T.visible=!1);this._tileCache?.prune(g,s,o),SH.pool.release(u),V$.length=0,rS.length=0,xf.clear()}clear(){const{tileIndex:e}=this;for(const n of e.values())this.releaseTile(n);e.clear()}refresh(e){for(const n of this.tileIndex.values())e(n);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,n){let r=e,i=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(i=this.tileIndex.get(r),i?.isReady){n.has(i.key.id)||n.set(i.key.id,i);break}}else if(this._tileCache?.has(r)&&(i=this._tileCache.pop(r),this.tileIndex.set(r,i),i?.isReady)){n.has(i.key.id)||n.set(i.key.id,i);break}}_hasReadyAncestor(e,n){const r=El();this.tileInfoView.getTileBounds(r,e,!0);for(const i of this.tileIndex.values())if(i.isReady&&i.key.level>=n&&i.key.level<e.level){const s=El();if(this.tileInfoView.getTileBounds(s,i.key,!0),CGe(s,r))return!0}return!1}};const htt={"area-measurement":null,dimension:null,"direct-line-measurement":null,"elevation-profile":()=>ve(()=>import("./ElevationProfileAnalysisView2D-CNOyS1te.js"),__vite__mapDeps([383,175,55,56,231,377,249,31,250,251,270,32,33,384,325,385,386,387,388,389,390,49,391,392,393,394,395,161,162,26,27,396,397,398,46,399,400,188,106,169,170,184,233,104,401,153,197,212,183])),"line-of-sight":null,slice:null,viewshed:null,"volume-measurement":null};function dtt(t){const e=htt[t.type];if(!e)throw new Xe("analysis-view-module-import-utils:analysis-not-supported",`Analysis "${t.type}" is not supported`);return e()}let ftt=class{constructor(e,n={}){this.events=new ZFe,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):n.canvas!=null&&(this._canvas=n.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let i=this._canvas.getContext("webgl2",r);i||(i=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=i,this._handles=xv([xb(this._canvas,"webglcontextlost",s=>this.events.emit("webgl-context-lost",s))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,n){if(this._hasMajorPerformanceCaveat||_e("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=_e("esri-performance-mode-frames-between-render")&&(n(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,i,s,o,a,l]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${i}, ${s}, ${o}, ${a}, ${l})`}}else n()}resize(e){const n=this._canvas,r=n.style,{state:{size:i},pixelRatio:s}=e,o=i[0],a=i[1],l=Math.round(o*s),c=Math.round(a*s);n.width===l&&n.height===c||(n.width=l,n.height=c),r.width=o+"px",r.height=a+"px"}_computeViewTransform(e,n){const[r,i]=e.center,[s,o]=n.center,[a,l]=e.toScreen([0,0],s,o),[c,u]=e.toScreen([0,0],r,i),h=c-a,f=u-l,g=e.scale/n.scale,y=n.rotation-e.rotation,_=Rd();return n_e(_),SL(_,_,[g,g]),ZI(_,_,FI(y)),H2(_,_,[h,f]),_}};function ptt(t,e,n,r,i){K_e(t,e,n||0,r||t.length-1,i||mtt)}function K_e(t,e,n,r,i){for(;r>n;){if(r-n>600){var s=r-n+1,o=e-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);K_e(t,e,Math.max(n,Math.floor(e-o*l/s+c)),Math.min(r,Math.floor(e+(s-o)*l/s+c)),i)}var u=t[e],h=n,f=r;for(iS(t,n,e),i(t[r],u)>0&&iS(t,n,r);h<f;){for(iS(t,h,f),h++,f--;i(t[h],u)<0;)h++;for(;i(t[f],u)>0;)f--}i(t[n],u)===0?iS(t,n,f):iS(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function iS(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function mtt(t,e){return t<e?-1:t>e?1:0}function zN(t,e){if(!(this instanceof zN))return new zN(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function gtt(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function j_(t,e){JS(t,0,t.children.length,e,t)}function JS(t,e,n,r,i){i||(i=_x(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s,o=e;o<n;o++)s=t.children[o],QS(i,t.leaf?r(s):s);return i}function QS(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function pie(t,e){return t.minX-e.minX}function mie(t,e){return t.minY-e.minY}function z$(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function SR(t){return t.maxX-t.minX+(t.maxY-t.minY)}function ytt(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function vtt(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function G$(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function TR(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function _x(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function gie(t,e,n,r,i){for(var s,o=[e,n];o.length;)(n=o.pop())-(e=o.pop())<=r||(s=e+Math.ceil((n-e)/r/2)*r,ptt(t,s,e,n,i),o.push(e,s,s,n))}zN.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!TR(t,e))return n;for(var i,s,o,a,l=[];e;){for(i=0,s=e.children.length;i<s;i++)o=e.children[i],TR(t,a=e.leaf?r(o):o)&&(e.leaf?n.push(o):G$(t,a)?this._all(o,n):l.push(o));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!TR(t,e))return!1;for(var r,i,s,o,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(s=e.children[r],TR(t,o=e.leaf?n(s):s)){if(e.leaf||G$(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=_x([]),this},remove:function(t,e){if(t==null)return this;for(var n,r,i,s,o=this.data,a=this.toBBox(t),l=[],c=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],n=c.pop(),s=!0),o.leaf&&(i=gtt(t,o.children,e))!==-1)return o.children.splice(i,1),l.push(o),this._condense(l),this;s||o.leaf||!G$(o,a)?r?(n++,o=r.children[n],s=!1):o=null:(l.push(o),c.push(n),n=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:pie,compareMinY:mie,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,s=n-e+1,o=this._maxEntries;if(s<=o)return j_(i=_x(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(i=_x([])).leaf=!1,i.height=r;var a,l,c,u,h=Math.ceil(s/o),f=h*Math.ceil(Math.sqrt(o));for(gie(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(gie(t,a,c=Math.min(a+f-1,n),h,this.compareMinY),l=a;l<=c;l+=h)u=Math.min(l+h-1,c),i.children.push(this._build(t,l,u,r-1));return j_(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,s,o,a,l,c,u,h;r.push(e),!e.leaf&&r.length-1!==n;){for(u=h=1/0,i=0,s=e.children.length;i<s;i++)l=z$(o=e.children[i]),(c=ytt(t,o)-l)<h?(h=c,u=l<u?l:u,a=o):c===h&&l<u&&(u=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),s=[],o=this._chooseSubtree(i,this.data,e,s);for(o.children.push(t),QS(o,i);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(i,s,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var s=this._chooseSplitIndex(n,i,r),o=_x(n.children.splice(s,n.children.length-s));o.height=n.height,o.leaf=n.leaf,j_(n,this.toBBox),j_(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(n,o)},_splitRoot:function(t,e){this.data=_x([t,e]),this.data.height=t.height+1,this.data.leaf=!1,j_(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,s,o,a,l,c,u;for(l=c=1/0,r=e;r<=n-e;r++)o=vtt(i=JS(t,0,r,this.toBBox),s=JS(t,r,n,this.toBBox)),a=z$(i)+z$(s),o<l?(l=o,u=r,c=a<c?a:c):o===l&&a<c&&(c=a,u=r);return u},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:pie,i=t.leaf?this.compareMinY:mie;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,s,o=this.toBBox,a=JS(t,0,e,o),l=JS(t,n-e,n,o),c=SR(a)+SR(l);for(i=e;i<n-e;i++)s=t.children[i],QS(a,t.leaf?o(s):s),c+=SR(a);for(i=n-e-1;i>=e;i--)s=t.children[i],QS(l,t.leaf?o(s):s),c+=SR(l);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)QS(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)t[n].children.length===0?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():j_(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function _tt(t,{timeZone:e,timeExtent:n}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:n?.start,currentEnd:n?.end}}}}let yie=class Y_e{constructor(e,n){this.key=new Ob(0,0,0,0),this.bounds=El(),this.objectIds=new Set,this.key.set(n);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return AGe(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return _tt(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),n=La.acquire();for(let r=0;r<e.length;r++)n[r]=new Y_e(this.tileInfoView,e[r]);return n}getQuantizationParameters(){return qm.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const X0={added:[],removed:[]},U$=new Set,xtt=new Ob(0,0,0,0);function wtt(t,e){const n=Ga(e);if(!n)return null;const[r,i]=n.valid;return t[2]>i?[El([t[0],t[1],i,t[3]]),El([r,t[1],r+t[2]-i,t[3]])]:t[0]<r?[El([r,t[1],t[2],t[3]]),El([i-(r-t[0]),t[1],i,t[3]])]:null}let btt=class extends ume{constructor(e){super(),this._tiles=new Map,this._index=zN(9,_e("esri-csp-restrictions")?n=>({minX:n.bounds[0],minY:n.bounds[1],maxX:n.bounds[2],maxY:n.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){super.destroy(),this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||CW(e)===0||RW(e)===0)return[];const n=wtt(e,this.tileScheme.spatialReference);return n!=null?[...new Set([...this.boundsIntersections(n[0]),...this.boundsIntersections(n[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const n={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const i=new yie(this.tileScheme,r);this._tiles.set(r,i),this._index.insert(i),n.added.push(i)}for(const r of e.removed)if(this.has(r)){const i=this.get(r);this._tiles.delete(r),this._index.remove(i),n.removed.push(i)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(n.added.length||n.removed.length)&&this.emit("update",n)}setViewState(e){const n=this.tileScheme.getTileCoverage(e,0);if(!n)return;const{spans:r,lodInfo:i}=n,{level:s}=i;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++){const u=xtt.set(s,o,i.normalizeCol(c),i.getWorldForColumn(c)).id;if(U$.add(u),!this.has(u)){const h=new yie(this.tileScheme,u);this._tiles.set(u,h),this._index.insert(h),this.tiles.push(h),X0.added.push(h)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];U$.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),X0.removed.push(a))}(X0.added.length||X0.removed.length)&&this.emit("update",X0),SH.pool.release(n),U$.clear(),X0.added.length=0,X0.removed.length=0}};const aOt=1e-30,vie=512,kR=16777216,lOt=8,cOt=29,uOt=24,hOt=4,dOt=0,fOt=0,pOt=0,mOt=1,gOt=2,yOt=3,vOt=4,_Ot=5,xOt=6,wOt=12,bOt=13,EOt=5,Ett=6,SOt=5,TOt=6,X_e=6,Stt=1<<X_e,kOt=Stt<<1,AOt=1.05,IOt=3,POt=1,COt=3,ROt=3,MOt=5,NOt=6,OOt=1.15,Ttt=4,LOt=128,ktt=256,DOt=ktt-2*Ttt,jOt=2,$Ot=128,FOt=1,VOt=10,zOt=1024,GOt=128,UOt=4,BOt=1,WOt=1<<20,HOt=.75,qOt=10,KOt=.75,YOt=256,XOt=32,ZOt=512,JOt=0,QOt=1,Att=1,eLt=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],tLt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],sS=256,Itt=()=>kt.getLogger("esri.views.webgl.checkWebGLError");function Z_e(t){switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const J_e=!!_e("enable-feature:webgl-debug");function Q_e(){return J_e}function nLt(){return J_e}function Z0(t,e=Q_e()){if(e){const n=Z_e(t);if(n){const r=new Error().stack;Itt().error(new Xe("webgl-error","WebGL error occurred",{message:n,stack:r}))}}}const rLt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},J0={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,HALF_FLOAT:5131},Bt={RGBA4:32854,R16F:33325,RG16F:33327,RGB32F:34837,RGBA16F:34842,R32F:33326,RG32F:33328,RGBA32F:34836,R11F_G11F_B10F:35898,RGB8:32849,RGBA8:32856,RGB5_A1:32855,R8:33321,RG8:33323,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,RGB16F:34843,RGB9_E5:35901,SRGB8:35905,SRGB8_ALPHA8:35907,RGB565:36194,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2:32857,RGB10_A2UI:36975},Ptt=Object.values(Bt),GN={DEPTH24_STENCIL8:35056,DEPTH32F_STENCIL8:36013},YT={DEPTH_COMPONENT16:33189,DEPTH_COMPONENT24:33190,DEPTH_COMPONENT32F:36012},yz={FLOAT:J0.FLOAT,UNSIGNED_BYTE:J0.UNSIGNED_BYTE,UNSIGNED_INT_24_8:34042,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,BYTE:J0.BYTE,UNSIGNED_SHORT:J0.UNSIGNED_SHORT,SHORT:J0.SHORT,UNSIGNED_INT:J0.UNSIGNED_INT,INT:J0.INT,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269},iLt=33984,_ie={Texture:0,TileTexture:1,BufferObject:2,VertexArrayObject:3,Shader:4,Program:5,FramebufferObject:6,Renderbuffer:7,TransformFeedback:8,Sync:9,UNCOUNTED:10,LinesOfCode:10,Uniform:11,COUNT:12},sLt=1029,oLt=0,aLt=36064,lLt=36065,cLt=36066,uLt=36067,hLt=33306,dLt=36096,fLt=36128,Jo={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497};function pLt(t,e,n,r=0){const i=t.gl;t.bindBuffer(n);for(const s of n.layout){const o=e.get(s.name);if(o==null){console.warn(`There is no location for vertex attribute '${s.name}' defined.`);continue}const a=r*s.stride;if(s.count<=4)i.vertexAttribPointer(o,s.count,s.type,s.normalized,s.stride,s.offset+a),i.enableVertexAttribArray(o),s.divisor>0&&i.vertexAttribDivisor(o,s.divisor);else if(s.count===9)for(let l=0;l<3;l++)i.vertexAttribPointer(o+l,3,s.type,s.normalized,s.stride,s.offset+12*l+a),i.enableVertexAttribArray(o+l),s.divisor>0&&i.vertexAttribDivisor(o+l,s.divisor);else if(s.count===16)for(let l=0;l<4;l++)i.vertexAttribPointer(o+l,4,s.type,s.normalized,s.stride,s.offset+16*l+a),i.enableVertexAttribArray(o+l),s.divisor>0&&i.vertexAttribDivisor(o+l,s.divisor);else console.error("Unsupported vertex attribute element count: "+s.count);if(Q_e()){const l=Z_e(t.gl);l&&console.error(`Unable to bind vertex attribute "${s.name}" with baseInstanceOffset ${a}:`,l,s)}}}function mLt(t){switch(t){case 6406:case 6409:case 6403:case 36244:case 6402:case 34041:return 1;case 6410:case 33319:case 33320:return 2;case 6407:case 36248:return 3;case 6408:case 36249:return 4}return 0}function Ctt(t){switch(t){case 6406:case 6409:case 6403:case 36244:case Bt.R8:case Bt.R8I:case Bt.R8UI:case Bt.R8_SNORM:case 36168:return 1;case 6410:case 33319:case 33320:case Bt.RGBA4:case Bt.R16F:case Bt.R16I:case Bt.R16UI:case Bt.RG8:case Bt.RG8I:case Bt.RG8UI:case Bt.RG8_SNORM:case Bt.RGB565:case Bt.RGB5_A1:case YT.DEPTH_COMPONENT16:return 2;case 6407:case 36248:case Bt.RGB8:case Bt.RGB8I:case Bt.RGB8UI:case Bt.RGB8_SNORM:case Bt.SRGB8:case YT.DEPTH_COMPONENT24:return 3;case 6408:case 36249:case Bt.RGBA8:case Bt.R32F:case Bt.R11F_G11F_B10F:case Bt.RG16F:case Bt.R32I:case Bt.R32UI:case Bt.RG16I:case Bt.RG16UI:case Bt.RGBA8I:case Bt.RGBA8UI:case Bt.RGBA8_SNORM:case Bt.SRGB8_ALPHA8:case Bt.RGB9_E5:case Bt.RGB10_A2UI:case Bt.RGB10_A2:case YT.DEPTH_COMPONENT32F:case GN.DEPTH24_STENCIL8:return 4;case GN.DEPTH32F_STENCIL8:return 5;case Bt.RGB16F:case Bt.RGB16I:case Bt.RGB16UI:return 6;case Bt.RG32F:case Bt.RG32I:case Bt.RG32UI:case Bt.RGBA16F:case Bt.RGBA16I:case Bt.RGBA16UI:return 8;case Bt.RGB32F:case Bt.RGB32I:case Bt.RGB32UI:return 12;case Bt.RGBA32F:case Bt.RGBA32I:case Bt.RGBA32UI:return 16;case Jo.COMPRESSED_RGB_S3TC_DXT1_EXT:case Jo.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Jo.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Jo.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Jo.COMPRESSED_R11_EAC:case Jo.COMPRESSED_SIGNED_R11_EAC:case Jo.COMPRESSED_RGB8_ETC2:case Jo.COMPRESSED_SRGB8_ETC2:case Jo.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Jo.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Jo.COMPRESSED_RG11_EAC:case Jo.COMPRESSED_SIGNED_RG11_EAC:case Jo.COMPRESSED_RGBA8_ETC2_EAC:case Jo.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let exe=class{constructor(e=0,n=e){this.width=e,this.height=n,this.type=0,this.target=3553,this.pixelFormat=6408,this.dataType=yz.UNSIGNED_BYTE,this.samplingMode=9729,this.wrapMode=10497,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function Rtt(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:Ctt(t.internalFormat))*(t.target===34067?6:1))}const oS=()=>kt.getLogger("esri/views/webgl/textureUtils");function aS(t){const{width:e,height:n,depth:r}=t;(e!=null&&e<0||n!=null&&n<0||r!=null&&r<0)&&oS().error("Negative dimension parameters are not allowed!");const{internalFormat:i}=t;if(i&&(txe(i)||nxe(i))){const{linearFilterDepth:s,compareEnabled:o,samplingMode:a,hasMipmap:l}=t;l&&oS().error("Depth textures cannot have mipmaps"),s?a!==9729&&a!==9728&&oS().error("Depth textures cannot sample mipmaps"):(a!==9728&&oS().error("Depth textures without filtering must use NEAREST filtering"),o&&oS().error("Depth textures without filtering cannot use compare function"))}}function Mtt(t){return Ptt.includes(t)}function txe(t){return zO(YT,t)}function nxe(t){return zO(GN,t)}function Ntt(t){return t!=null&&zO(Jo,t)}function xx(t){return t!=null&&"type"in t&&t.type==="compressed"}function Ott(t){return t!=null&&"byteLength"in t}function xie(t){return t!=null&&!xx(t)&&!Ott(t)}function $_(t){return t===32879||t===35866}function wie(t,e,n,r=1){let i=Math.max(e,n);return t===32879&&(i=Math.max(i,r)),Math.floor(Math.log2(i))+1}function AR(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case yz.FLOAT:switch(t.pixelFormat){case 6408:return Bt.RGBA32F;case 6407:return Bt.RGB32F;default:throw new Xe("texture:unknown-format","Unable to derive format")}case yz.UNSIGNED_BYTE:switch(t.pixelFormat){case 6408:return Bt.RGBA8;case 6407:return Bt.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===34041?GN.DEPTH24_STENCIL8:e===6402?YT.DEPTH_COMPONENT24:e,t.internalFormat}function Ltt(t){let e="width"in t?t.width:t.codedWidth,n="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,n=t.videoHeight),{width:e,height:n,depth:1}}let Dtt=class rxe extends exe{constructor(e,n){switch(super(),this.context=e,Object.assign(this,n),this.internalFormat){case Bt.R16F:case Bt.R32F:case Bt.R8_SNORM:case Bt.R8:this.pixelFormat=6403;break;case Bt.R8I:case Bt.R8UI:case Bt.R16I:case Bt.R16UI:case Bt.R32I:case Bt.R32UI:this.pixelFormat=36244}}static validate(e,n){return new rxe(e,n)}};const jtt=!!_e("esri-tests-disable-gpu-memory-measurements"),wf=()=>kt.getLogger("esri/views/webgl/Texture");var Ss;let $tt=(Ss=class{constructor(e,n=null,r=null){if(this.type=1,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=n;else{const i=Dtt.validate(e,n);if(!i)throw new Xe("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=i}this._descriptor.target===34067?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return jtt?0:Rtt(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this.hasWebGLTextureObject&&this._descriptor.context?.gl&&(this._descriptor.context.instanceCounter.decrement(_ie.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null,this._descriptor=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,n){const r=this._descriptor;if(r.width!==e||r.height!==n){if(this._wasImmutablyAllocated)throw new Xe("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=n,this._descriptor.target===34067?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!xx(e)&&this._descriptor.internalFormat&&zO(Jo,this._descriptor.internalFormat)&&(this._descriptor.internalFormat=void 0),this._setData(e),!xx(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,n,r,i,s,o,a=0){o||wf().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||wf().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=AR(l);const{context:c,pixelFormat:u,dataType:h,target:f,isImmutable:g}=l;if(g&&!this._wasImmutablyAllocated)throw new Xe("texture:uninitialized","Cannot update immutable texture before allocation!");const y=c.bindTexture(this,Ss.TEXTURE_UNIT_FOR_UPDATES,!0);(n<0||r<0||n+i>l.width||r+s>l.height)&&wf().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:_}=c;a&&(i&&s||wf().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),_.pixelStorei(_.UNPACK_SKIP_ROWS,a)),xie(o)?_.texSubImage2D(f,e,n,r,i,s,u,h,o):xx(o)?_.compressedTexSubImage2D(f,e,n,r,i,s,l.internalFormat,o.levels[e]):_.texSubImage2D(f,e,n,r,i,s,u,h,o),a&&_.pixelStorei(_.UNPACK_SKIP_ROWS,0),c.bindTexture(y,Ss.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,n,r,i,s,o,a,l){l||wf().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||wf().error("An attempt to update an uninitialized texture!");const c=this._descriptor;c.internalFormat=AR(c);const{context:u,pixelFormat:h,dataType:f,isImmutable:g,target:y}=c;if(g&&!this._wasImmutablyAllocated)throw new Xe("texture:uninitialized","Cannot update immutable texture before allocation!");$_(y)||wf().warn("Attempting to set 3D texture data on a non-3D texture");const _=u.bindTexture(this,Ss.TEXTURE_UNIT_FOR_UPDATES);u.setActiveTexture(Ss.TEXTURE_UNIT_FOR_UPDATES),(n<0||r<0||i<0||n+s>c.width||r+o>c.height||i+a>c.depth)&&wf().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:b}=u;if(xx(l))l=l.levels[e],b.compressedTexSubImage3D(y,e,n,r,i,s,o,a,c.internalFormat,l);else{const T=l;b.texSubImage3D(y,e,n,r,i,s,o,a,h,f,T)}u.bindTexture(_,Ss.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new Xe("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,aS(e)}e.samplingMode===9729?(this._samplingModeDirty=!0,e.samplingMode=9985):e.samplingMode===9728&&(this._samplingModeDirty=!0,e.samplingMode=9984);const n=this._descriptor.context.bindTexture(this,Ss.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(Ss.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(n,Ss.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new Xe("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,aS(e)}e.samplingMode===9985?(this._samplingModeDirty=!0,e.samplingMode=9729):e.samplingMode===9984&&(this._samplingModeDirty=!0,e.samplingMode=9728)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,aS(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?9729:9728),aS(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=B1(this._compressionAbortController)}_setData(e,n){const r=this._descriptor,i=r.context?.gl;if(!i)return;Z0(i),this.hasWebGLTextureObject||(this._glName=i.createTexture(),r.context.instanceCounter.increment(_ie.Texture,this)),aS(r);const s=r.context.bindTexture(this,Ss.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(Ss.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),Z0(i);const o=n??r.target,a=$_(o);if(xie(e))this._setDataFromTexImageSource(e,o);else{const{width:l,height:c,depth:u}=r;if(l==null||c==null)throw new Xe("texture:missing-size","Width and height must be specified!");if(a&&u==null)throw new Xe("texture:missing-depth","Depth must be specified!");if(r.internalFormat=AR(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,l,c,u),xx(e)){if(!Ntt(r.internalFormat))throw new Xe("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,l,c,u,e),Z0(i),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),Z0(i),r.context.bindTexture(s,Ss.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let n=34069;n<=34074;n++)this._setData(e,n)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:n,flipped:r,preMultiplyAlpha:i}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,n),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i?1:0)}_setDataFromTexImageSource(e,n){const{gl:r}=this._descriptor.context,i=this._descriptor;i.internalFormat=AR(i);const s=$_(n),{width:o,height:a,depth:l}=Ltt(e);i.width&&i.height,i.width||(i.width=o),i.height||(i.height=a),s&&i.depth,s&&(i.depth=l),i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(n,i.internalFormat,i.hasMipmap,o,a,l),this._texImage(n,0,i.internalFormat,o,a,l,e),Z0(r),i.hasMipmap&&(this.generateMipmap(),Z0(r))}_setDataFromCompressedSource(e,n,r){const i=this._descriptor,{width:s,height:o,depth:a}=i,l=e.levels,c=wie(r,s,o,a),u=Math.min(c,l.length)-1;this._descriptor.context.gl.texParameteri(i.target,33085,u),this._forEachMipmapLevel((h,f,g,y)=>{const _=l[Math.min(h,l.length-1)];this._compressedTexImage(r,h,n,f,g,y,_)},u)}_texStorage(e,n,r,i,s,o){const{gl:a}=this._descriptor.context;if(!Mtt(n)&&!txe(n)&&!nxe(n))throw new Xe("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=r?wie(e,i,s,o):1;if($_(e)){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");a.texStorage3D(e,l,n,i,s,o)}else a.texStorage2D(e,l,n,i,s);this._wasImmutablyAllocated=!0}_texImage(e,n,r,i,s,o,a){const l=this._descriptor.context.gl,c=$_(e),{isImmutable:u,pixelFormat:h,dataType:f}=this._descriptor;if(u){if(a!=null){const g=a;if(c){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texSubImage3D(e,n,0,0,0,i,s,o,h,f,g)}else l.texSubImage2D(e,n,0,0,i,s,h,f,g)}}else{const g=a;if(c){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texImage3D(e,n,r,i,s,o,0,h,f,g)}else l.texImage2D(e,n,r,i,s,0,h,f,g)}}_compressedTexImage(e,n,r,i,s,o,a){const l=this._descriptor.context.gl,c=$_(e);if(this._descriptor.isImmutable){if(a!=null)if(c){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,n,0,0,0,i,s,o,r,a)}else l.compressedTexSubImage2D(e,n,0,0,i,s,r,a)}else if(c){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,n,r,i,s,o,0,a)}else l.compressedTexImage2D(e,n,r,i,s,0,a)}async _compressOnWorker(e){const{width:n,height:r,context:i,flipped:s,preMultiplyAlpha:o,hasMipmap:a}=this._descriptor,l=this._descriptor.compress?.compressionTracker,c=this._descriptor.compress?.compressionCallback,{compressedTextureETC:u,compressedTextureS3TC:h}=i.capabilities;if(!Ss.compressionWorkerHandle?.isCompressible(e,this._descriptor)||!u&&!h)return;this.abortCompression();const f=new AbortController;let g;this._compressionAbortController=f,l?.increment();try{e instanceof Uint8Array?g=e.buffer:(g=await createImageBitmap(e,{imageOrientation:s?"flipY":"none"}),gi(f));const y={data:g,width:n,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===6408?4:3,preMultiplyAlpha:o,hasMipmap:a,hasETC:!!u,hasS3TC:!!h},_=await Ss.compressionWorkerHandle.invoke(y,f.signal,"low");if(gi(f),_.compressedTexture&&this.hasWebGLTextureObject){const b=this.usedMemory;this._descriptor.internalFormat=_.internalFormat,this._setData(_.compressedTexture),c?.(b-this.usedMemory)}}catch(y){Ea(y)||wf().error("Texture compression failed!")}finally{l?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null),g instanceof ImageBitmap&&g.close()}}_forEachMipmapLevel(e,n=1/0){let{width:r,height:i,depth:s,hasMipmap:o,target:a}=this._descriptor;const l=a===32879;if(r==null||i==null||l&&s==null)throw new Xe("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let c=0;e(c,r,i,s),o&&(r!==1||i!==1||l&&s!==1)&&!(c>=n);++c)r=Math.max(1,r>>1),i=Math.max(1,i>>1),l&&(s=Math.max(1,s>>1))}_applySamplingMode(){const e=this._descriptor,n=e.context?.gl;let r=e.samplingMode,i=e.samplingMode;r===9985||r===9987?(r=9729,e.hasMipmap||(i=9729)):r!==9984&&r!==9986||(r=9728,e.hasMipmap||(i=9728)),n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,r),n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,i)}_applyWrapMode(){const e=this._descriptor,n=e.context?.gl;typeof e.wrapMode=="number"?(n.texParameteri(e.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,e.wrapMode)):(n.texParameteri(e.target,n.TEXTURE_WRAP_S,e.wrapMode.s),n.texParameteri(e.target,n.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){const e=this._descriptor,n=e.context?.gl,r=e.compareEnabled?n.COMPARE_REF_TO_TEXTURE:n.NONE;n.texParameteri(e.target,n.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&n.texParameteri(e.target,n.TEXTURE_COMPARE_FUNC,n.GREATER),Z0(n)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,n=e.context.capabilities.textureFilterAnisotropic;n&&e.context.gl.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},Ss.TEXTURE_UNIT_FOR_UPDATES=0,Ss.compressionWorkerHandle=null,Ss);const B$=()=>kt.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function Ftt(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const Vtt=[0,0,0,0];let ixe=class{constructor(){this.type="single",this._highlightOptions=new Ng,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*sS),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,n){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,Ett),n.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<X_e)-1,activeGradient:this}]}_updateGradientTexture(e){const n=ztt(this._highlightOptions);if(n===this._optionsShadeTexKey)return;this._optionsShadeTexKey=n,Ftt(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,i=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,s=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,l=Math.sqrt(Math.PI/2)*Att,c=Math.abs(i)>l?Math.round(10*(Math.abs(i)-l))/10:0,u=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let h;c&&!u?B$().error("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!c&&u?B$().error("The inner rim of the highlight is "+u+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&u&&B$().error("The highlight is "+Math.max(c,u)+"px away from the edge of the feature; consider reducing some width values.");const f=[void 0,void 0,void 0,void 0];function g(_,b,T){f[0]=(1-T)*_[0]+T*b[0],f[1]=(1-T)*_[1]+T*b[1],f[2]=(1-T)*_[2]+T*b[2],f[3]=(1-T)*_[3]+T*b[3]}const{_texelData:y}=this;for(let _=0;_<sS;++_)h=i+_/(sS-1)*(a-i),h<i?(f[0]=0,f[1]=0,f[2]=0,f[3]=0):h<s?g(Vtt,r.outlineColor,(h-i)/(s-i)):h<o?[f[0],f[1],f[2],f[3]]=r.outlineColor:h<a?g(r.outlineColor,r.fillColor,(h-o)/(a-o)):[f[0],f[1],f[2],f[3]]=r.fillColor,y[4*_]=255*f[0],y[4*_+1]=255*f[1],y[4*_+2]=255*f[2],y[4*_+3]=255*f[3];if(this._minMaxDistance[0]=i,this._minMaxDistance[1]=a,!this._shadeTex){const _=new exe(sS,1);_.wrapMode=33071,this._shadeTex=new $tt(e,_)}this._shadeTex.updateData(0,0,0,sS,1,this._texelData)}};function ztt(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let Gtt=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let n=0;n<e.length;n++)this.gradients[n]||(this.gradients[n]=new ixe),this.gradients[n].setHighlightOptions(e[n]);for(let n=e.length+1;n<this.gradients.length;n++)this.gradients[n].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const n=[];for(let r=0;r<this.gradients.length;r++){const i=this.gradients[r];n.push({activeReasons:e,activeGradient:i}),e<<=1}return n}};const sxe={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},Utt={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},Btt={...sxe,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function Wtt({pixelRatio:t,state:e,displayLevel:n,requiredLevel:r},i){const s=1/2**(n-i.key.level),o=1/2**(r-i.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:i.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:i.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[i.x,i.y],currentScale:e.scale,currentZoom:n,metersPerSRUnit:Jd(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function oxe(t){return t.passOptions?.type==="highlight"}function axe(t){return t.passOptions?.type==="hittest"}function Htt(t){if(!axe(t))return null;const{position:e,distance:n,smallSymbolDistance:r,smallSymbolSizeThreshold:i}=t.passOptions;return{position:e,distance:n,smallSymbolDistance:r,smallSymbolSizeThreshold:i}}function qtt(t){if(!oxe(t))return null;const{activeReasons:e,highlightAll:n}=t.passOptions;return{activeReasons:e,highlightAll:n?1:0}}function _Lt(t,e,n){const r={};for(const i in n)typeof n[i]!="function"?r[i]=n[i]:r[i]=n[i](t,e);return r}function xLt(t,e){const{attributeView:n,context:r}=t;return{storage:n.getUniforms(r),view:Wtt(t,e),hittestRequest:Htt(t),highlight:qtt(t)}}function wLt(t){return{inside:t.selection===2,outside:t.selection===3}}function Ktt(t){return axe(t)?Utt:oxe(t)&&t.passOptions.stepType==="clear"?Btt:sxe}function bLt(t){const{row:e,col:n}=t.key,r=n*vie,i=e*vie;return{tileOffsetFromLocalOrigin:[r%kR,i%kR],maxIntsToLocalOrigin:[Math.floor(r/kR),Math.floor(i/kR)]}}const Ytt=new Xs({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function ELt(t){return Ytt.toJSON(t)}function SLt(t){const{bandCount:e,attributeTable:n,colormap:r,pixelType:i}=t.raster.rasterInfo;return e===1&&(n!=null||r!=null||i==="u8"||i==="s8")}function Xtt(t,e){return e==null?(t?.destroy(),null):(t?.type==="single"&&Array.isArray(e)&&(t.destroy(),t=null),t?.type!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new Gtt:new ixe),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function TLt(t,e,n,r){const{painter:i,highlightGradient:s}=t,{highlight:o}=i.effects;if(!s)return;const a=t.passOptions,l=s.getReasonsWithGradients();for(let c=0;c<l.length;c++){const u={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(u),n(u),c<l.length-1){let f=0;for(let g=c+1;g<l.length;g++)f|=l[g].activeReasons;n({...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:f,stepType:"clear",highlightAll:e}})}const h={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"draw",highlightAll:e}};i.setPipelineState(Ktt(t)),i.updatePipelineState(t.context),o.draw(h),o.unbind()}t.passOptions=a}const IR=t=>parseFloat(t)/100;function Ztt(t,e,n){const r=typeof t.left=="string"?IR(t.left)*e:t.left,i=typeof t.right=="string"?IR(t.right)*e:t.right,s=typeof t.top=="string"?IR(t.top)*n:t.top,o=typeof t.bottom=="string"?IR(t.bottom)*n:t.bottom,a=s;return{xmin:r,xmax:Math.max(e-i,r),ymin:a,ymax:Math.max(n-o,s)}}function lxe(t,e,n,r){switch(e.type){case"rect":{const{width:i,height:s}=t,{xmin:o,xmax:a,ymin:l,ymax:c}=Ztt(e,i,s),{x:u,y:h}=n;return u>o&&u<a&&h>l&&h<c}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||uW(e.path,[n.x,n.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?cW(e.geometry,r):OI(e.geometry,r))}}function Jtt(t){if(!t.highlights)return null;const e=t.highlights.findIndex(n=>n.name==="default");return e===-1?null:t.highlights.items[e]}function Qtt(t,e){if(!t.highlights){if(!e)return;t.highlights=new Ot([new Ng])}const n=t.highlights.findIndex(r=>r.name==="default");e?t.highlights.items[n].assignFrom(e):(t.highlights.removeAt(n),t.highlights.length===0&&(t.highlights=null))}async function ent(t,e,n){const r=Uve(e)?Gve(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let i=new Set;const s=new Set;let o=!1,a=null,l=null;n?.include?Eie(n.include,bie(t,f=>{i.add(f),W$(f,g=>s.add(g))},(f,g)=>{s.add(f),i.add(g)},f=>{a||(a=new Set),a.add(f)},f=>i.add(f),()=>o=!0)):(o=!0,i=new Set(t.allLayerViews),i.forEach(f=>{W$(f,g=>s.add(g))})),n?.exclude&&Eie(n.exclude,bie(t,f=>{i.delete(f),W$(f,g=>s.delete(g))},f=>s.delete(f),f=>{l||(l=new Set),l.add(f)}));const c=t.toMap(r),u=t.allLayerViews.filter(f=>!f.suspended&&i.has(f)&&f.clips.every(g=>lxe(t,g,r,c))).reverse();let h=[...o?t.graphicsView.hitTest(c).map(f=>({type:"graphic",graphic:f,layer:null,mapPoint:c})):[],...await Promise.all(u.map(f=>f.hitTest(c,r)).toArray())].filter(A2).flat().filter(A2);return h=h.filter(f=>f.type!=="graphic"||f.layer?.type!=="subtype-group"||s.has(f.graphic.layer)),a&&(h=h.filter(f=>!("graphic"in f)||!f.graphic||a?.has(vz(f.graphic)))),l&&(h=h.filter(f=>!("graphic"in f)||!f.graphic||!l?.has(vz(f.graphic)))),{screenPoint:r,results:h}}function bie(t,e,n,r,i,s){return o=>{if(o instanceof ea){if(o.layer===t)s?.();else{const a=t.allLayerViews.find(l=>l.layer===o.layer);a&&i?.(a)}r(vz(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=t.allLayerViews.find(l=>l.layer===o.parent);a&&n(o,a)}else{const a=t.allLayerViews.find(l=>l.layer===o);a&&e(a)}}}function Eie(t,e){if(t)if(J4(t))for(const n of t)if(J4(n))for(const r of n)e(r);else e(n);else e(t)}function vz(t){const e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function W$(t,e){const n=t.layer;n?.type==="subtype-group"&&n.sublayers.forEach(r=>{e(r)})}let lS=null,UN=!0;function tnt(t,e,n){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(UN)try{return new ImageData(t,e)}catch{UN=!1}return cxe(t,e,n)}function kLt(t,e,n,r){if(!e||!n)throw new Error("Cannot construct image data without dimensions");if(UN)try{return new ImageData(t,e,n)}catch{UN=!1}const i=cxe(e,n,r);return i.data.set(t,0),i}function nnt(){return lS||(lS=document.createElement("canvas"),lS.width=1,lS.height=1),lS}function cxe(t,e,n){return n||(n=nnt()),n.getContext("2d").createImageData(t,e)}async function rnt(t,e){const n=window.URL.createObjectURL(t);try{const{data:r}=await ns(n,{...e,responseType:"image"});return r}catch(r){throw Ea(r)?r:new Xe("invalid-image",`Could not fetch requested image at ${n}`)}finally{window.URL.revokeObjectURL(n)}}async function ALt(t,e){const{arrayBuffer:n,mediaType:r}=await int(t,e),i=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await ve(()=>import("./gif-C5ZdXvxa.js"),[]);if(s(n))return o(n,e)}if(i){const{isAnimatedPNG:s,parseApng:o}=await ve(()=>import("./apng-DWYVW58k.js"),__vite__mapDeps([402,63]));if(s(n))return o(n,e)}return rnt(new Blob([n],{type:r}),e)}async function int(t,e){const n=I2(t);if(n?.isBase64)return{arrayBuffer:Xfe(n.data),mediaType:n.mediaType};const r=await ns(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:r.getHeader?.("Content-Type")??""}}function uxe(t,e,n){const{ctx:r,canvas:i}=dxe(t,n),s=r.getImageData(0,0,t.width,t.height),o=pxe(i,e);return fxe(i),{dataUrl:o,data:s}}function hxe(t,e){const{ctx:n,canvas:r}=dxe(t,e),i=n.getImageData(0,0,t.width,t.height);return fxe(r),i}function dxe(t,e){const n=snt();e.premultipliedAlpha&&cnt(t),n.width=t.width,n.height=t.height;const r=n.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&lnt(r),{ctx:r,canvas:n}}function fxe(t){t.width=0,t.height=0}function snt(){return H$==null&&(H$=document.createElement("canvas")),H$}let H$=null;function pxe(t,e){const n=unt[e.format],r=e.quality/100;return t.toDataURL(n,r)}function mxe(t,e){const n=ant(t),r=dnt[n];return{format:n,quality:vu(e??r,0,100)}}function gxe(t,e){return e/Math.max(t[0],t[1])}function ont(t,e,n,r=0,i=0,s=t.width-r,o=t.height-i,a=!1){const{data:l}=t,{width:c,height:u,data:h}=e,f=s/c,g=o/u,y=Math.ceil(f/2),_=Math.ceil(g/2),b=t.width;for(let T=0;T<u;T++)for(let A=0;A<c;A++){const I=4*(A+(a?u-T-1:T)*c);let P=0,M=0,V=0,C=0,N=0,O=0;const L=(T+.5)*g;for(let F=Math.floor(T*g);F<(T+1)*g;F++){const G=Math.abs(L-(F+.5))/_,U=(A+.5)*f,he=G*G;for(let Ie=Math.floor(A*f);Ie<(A+1)*f;Ie++){const ze=Math.abs(U-(Ie+.5))/y,Oe=Math.sqrt(he+ze*ze);if(Oe>=1)continue;let fe=2*Oe*Oe*Oe-3*Oe*Oe+1;const ge=4*(r+Ie+(i+F)*b);O+=fe*l[ge+3],M+=fe,!n&&l[ge+3]<255&&(fe=fe*l[ge+3]/255),V+=fe*l[ge],C+=fe*l[ge+1],N+=fe*l[ge+2],P+=fe}}h[I]=V/P,h[I+1]=C/P,h[I+2]=N/P,h[I+3]=O/M}return e}function ant(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return hnt}}function lnt(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function cnt(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4){const i=e[r+3];if(i!==255&&i>0){const s=255/i;e[r]=e[r]*s,e[r+1]=e[r+1]*s,e[r+2]=e[r+2]*s}}}const unt={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Sie=98,hnt="png",dnt={png:100,jpg:Sie,jpeg:Sie},ILt=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:tnt,encode:uxe,encodeData:hxe,getFormatAndQuality:mxe,getMaximumResolutionScale:gxe,resampleHermite:ont,toDataUrl:pxe},Symbol.toStringTag,{value:"Module"})),yxe={flipY:!0,premultipliedAlpha:!0};async function fnt(t,e){const n=await vxe(t,e),{format:r,quality:i}=mxe(e?.format,e?.quality);return uxe(n,{format:r,quality:i},yxe)}async function pnt(t,e){const n=await vxe(t,e);return hxe(n,yxe)}function vxe(t,e){const n=ynt(e||{},gnt(t.stage,t.size),t.size,t.padding),r=mnt(e,t.allLayerViews);return t.stage.takeScreenshot(n,r,t.backgroundColor,e?.rotation)}function mnt(t={},e){if(!t.layers)return;const n=[];return t.layers.forEach(r=>{const i=e.find(s=>s.layer.id===r.id);i?.container&&n.push(i.container)}),n}function gnt(t,e){return Math.min(4,gxe(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function ynt(t,e,n,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let i=null;t.width!=null&&t.height!=null?i=[t.width,t.height]:t.width==null&&t.height!=null?i=[t.height,t.height]:t.width!=null&&t.height==null?i=[t.width,t.width]:t.width==null&&t.height==null&&(i=null);const s=n[0]-(r.left+r.right),o=n[1]-(r.top+r.bottom);let a,l,c=t.area||{x:0,y:0,width:s,height:o};if(i){const u=s/o,h=i[0]/i[1];if(h>u){const f=c.width/h;c={x:c.x,y:Math.round(c.y+(c.height-f)/2),width:c.width,height:Math.round(f)}}else{const f=c.height*h;c={x:Math.round(c.x+(c.width-f)/2),y:c.y,width:Math.round(f),height:c.height}}}else i=[c.width,c.height];return i[0]>c.width?(a=Math.min(i[0]/c.width,e),l=i[0]/c.width/a):(a=1,l=i[0]/c.width),{cropArea:{x:Math.round((c.x+r.left)*a),y:Math.round((c.y+r.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:l,resolutionScale:a}}const vnt=t=>t.includes("Brush");let _xe=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),vnt(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};const Tie=Symbol("analyses-owner-handles");let $m=class extends Kt{constructor(e){super(e),this._allAnalysisViews=new Ot,this._creatingViewCount=0,this._attachedToViewResolver=kie(),this._items=new Map,this._moduleMap=new Map,this._scheduledUpdateHandle=null,this._emitOnView=(n,r)=>this.view.emit(n,r)}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject(Cr("AnalysisViewManager was destroyed")),this._set("view",null)}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject(Cr()),this._attachedToViewResolver=kie()}get updating(){return!this.view.ready||this._creatingViewCount!==0||this._allAnalysisViews.some(e=>e.updating)}get testInfo(){}async whenAnalysisView(e){await this._attachedToViewResolver.promise;const n=this._items.get(e);if(n==null||n.state.list===1)throw new Xe("AnalysisViewManager:no-analysis-view-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return n.createAnalysisViewTask.promise}_connectOwners(){this.addHandles(this._connectAnalysesCollection(this.view.analyses),Tie)}_disconnectOwners(){this.removeHandles(Tie),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(e){for(const i of e)this._addAnalysis(i);const n=e.on("after-add",i=>this._addAnalysis(i.item)),r=e.on("after-remove",i=>this._removeAnalysis(i.item));return Zn(()=>{n.remove(),r.remove();for(const i of e)this._removeAnalysis(i)})}_addAnalysis(e){const n=this._items.get(e);if(n==null){const r={state:{view:0,list:0},analysis:e,view:null,createAnalysisViewTask:null};this._items.set(e,r),r.createAnalysisViewTask=ZO(i=>this._createAnalysisViewPromise(r,i).then(s=>(this._emitOnView("analysis-view-create",{analysis:e,analysisView:s}),s),s=>{throw this._emitOnView("analysis-view-create-error",{analysis:e,error:s}),s}))}else n.state.list=0}_removeAnalysis(e){const n=this._items.get(e);n!=null?(n.state.list=1,this._scheduleUpdate()):kt.getLogger(this).error("Trying to remove analysis which was not added")}_scheduleUpdate(){this._scheduledUpdateHandle==null&&(this._scheduledUpdateHandle=Tb(()=>this._update()))}_update(){this._scheduledUpdateHandle=ii(this._scheduledUpdateHandle),this._items.forEach(e=>{if(e.state.list!==1)return;const{analysis:n,view:r}=e;switch(this._items.delete(n),e.state.view){case 0:e.createAnalysisViewTask=B1(e.createAnalysisViewTask);break;case 1:r!=null&&(this._allAnalysisViews.remove(r),e.view=Di(r),e.createAnalysisViewTask=null,this._emitOnView("analysis-view-destroy",{analysis:n,analysisView:r}))}})}async _createAnalysisViewPromise(e,n){const{analysis:r}=e;if(this._creatingViewCount+=1,!this._moduleMap.has(r.type))try{this._moduleMap.set(r.type,await this.importAnalysisViewModule(r))}catch{throw this._creatingViewCount-=1,new Xe("AnalysisViewManager:no-analysis-view-for-analysis",`Analysis of type "${r.type}" is not supported`)}if(ya(n))throw this._creatingViewCount-=1,Cr("AnalysisView creation aborted");const i=new(this._moduleMap.get(r.type)).default({analysis:r,view:this.view});let s=!0;yu(n,()=>{s&&this._destroyAnalysisView(r,i)});try{await i.when()}catch(o){throw s=!1,this._destroyAnalysisView(r,i),o}if(ya(n))throw Cr();return s=!1,e.view=i,e.state.view=1,this._allAnalysisViews.add(i),this._creatingViewCount-=1,i}_destroyAnalysisView(e,n){n.destroyed||(this._creatingViewCount-=1,n.destroy(),this._emitOnView("analysis-view-destroy",{analysis:e,analysisView:n}))}};x([E()],$m.prototype,"updating",null),x([E({constructOnly:!0})],$m.prototype,"importAnalysisViewModule",void 0),x([E({constructOnly:!0})],$m.prototype,"view",void 0),x([E()],$m.prototype,"_allAnalysisViews",void 0),x([E()],$m.prototype,"_creatingViewCount",void 0),$m=x([ue("esri.views.support.AnalysisViewManager")],$m);const _nt=$m;function kie(){const t=bc();return t.promise.catch(()=>{}),t}let xnt=class{constructor(e){this.getUnmaskedRenderer=e}};function wnt(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new xnt(()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL)):null}let Aie;function bnt(){return Aie??=Tnt(),Aie}let Ent=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function Snt(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let n=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(n==null&&(n=e.getContext("webgl2"),n!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=wnt(n)?.getUnmaskedRenderer()??"unknown")),n==null)return n;t.available=!0,t.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),n}function Tnt(){const t=new Ent,e=Snt(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function knt(t){const e=bnt();return e.available?t==="3d"&&e.majorPerformanceCaveat?new Xe("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new Xe("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new Xe("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new Xe("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function Ant(t){return t&&"nodeType"in t}function Int(t){return t&&typeof t.render=="function"}const Iie={component:"esri-component"};let by=class extends Kt{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const n=this._get("node");e!==n&&(e&&e.classList.add(Iie.component),n&&n.classList.remove(Iie.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||Ant(e)?(this._set("widget",null),KW(e)):(Int(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};x([E()],by.prototype,"id",null),x([E()],by.prototype,"node",null),x([Ks("node")],by.prototype,"castNode",null),x([E({readOnly:!0})],by.prototype,"widget",void 0),by=x([ue("esri.views.ui.Component")],by);const k3=by,Pnt=(t,e)=>{let n=t;for(;n;){if(n===e)return!0;if(!n.parentNode)return!1;n.parentNode instanceof ShadowRoot?n=n.parentNode.host:n=n.parentNode}return!1},OLt=(t,e,n)=>{const r=Cnt(e).subscribe;return r(i=>{i.some(o=>Pnt(t,o.target))&&n()})},q$={},Cnt=t=>{const e=t.join(","),n=q$[e];if(n!==void 0)return n;const r=new Set,i=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&i.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(i.disconnect(),q$[e]=void 0)})};return q$[e]=s,s},xxe=(t,e)=>{let n=t;for(;n;){const r=n.closest?.(e);if(r)return r;const i=n.getRootNode?.();if(i===globalThis.document)return;n=i.host}};function Rnt(t){const e=xxe(t,".calcite-mode-dark, .calcite-mode-light, .calcite-mode-auto");return e?.classList.contains("calcite-mode-dark")||e?.classList.contains("calcite-mode-auto")&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}const LLt=(t,e,n)=>xxe(t,`[${e}]`)?.getAttribute(e)??n,Mnt="--esri-calcite-mode-name";function Nnt(){const t=getComputedStyle(document.body).getPropertyValue(Mnt).replaceAll(/\W/g,"").toLowerCase();return t==="dark"||t==="light"?t:void 0}const wxe="calcite-mode-";function bxe(t){return Nnt()??Rnt(t??document.body)}function DLt(t){return bxe(t)==="dark"}function Ont(t){return`${wxe}${bxe(t)}`}function Lnt(t){const e=Ont(t);Dnt(t),t.classList.add(e)}function Dnt(t){Array.from(t.classList).forEach(e=>{e.startsWith(wxe)&&t.classList.remove(e)})}const IL=new Map;function Exe(){IL.clear()}function jnt(t){return IL.get(t)}function $nt(t,e){IL.set(t,e)}function K$(t){IL.delete(t)}function Fnt(...t){const e=La.acquire();for(let r=0;r<t.length;r++){const i=t[r],s=typeof i;if(s==="string")e.push(i);else if(Array.isArray(i))e.push.apply(e,i);else if(s==="object")for(const o in i)i[o]&&e.push(o)}const n=e.join(" ");return La.release(e),n}(()=>{const t=new Map,e=new ResizeObserver(r=>{Exe();for(const i of r)t.get(i.target)?.(i)}),n=(r,i,s)=>(t.set(r,i),e.observe(r,s),Zn(()=>{e.unobserve(r),t.delete(r)}));return(r,i,s)=>{let o=null;return xv([mn(()=>typeof r=="function"?r():r,a=>{o?.remove(),a&&(o=n(a,i,s))},sa),Zn(()=>o?.remove())])}})();function Vnt(t){const e=t?.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function jLt(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function $Lt(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function znt(t){return t==="Enter"||t===" "}async function Gnt(t,e){await X$e(AI(e));const n=typeof t=="function"?t():t;n&&("setFocus"in n&&typeof n.setFocus=="function"?await n.setFocus():n instanceof HTMLElement&&n.focus())}const Unt={left:0,top:0,bottom:0,right:0},Sxe={bottom:30,top:15,right:15,left:15},bf="esri-ui",el={ui:bf,corner:`${bf}-corner`,innerContainer:`${bf}-inner-container`,manualContainer:`${bf}-manual-container`,cornerContainer:`${bf}-corner-container`,topLeft:`${bf}-top-left`,topRight:`${bf}-top-right`,bottomLeft:`${bf}-bottom-left`,bottomRight:`${bf}-bottom-right`};function Bnt(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function PR(t){return t===0?"0":`${t}px`}function Y$(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function X$(t,{top:e,bottom:n,left:r,right:i}){t.style.top=e,t.style.bottom=n,t.style.left=r,t.style.right=i}let id=class extends RI{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=du(),this.view=null,this._applyViewPadding=()=>{const n=this.container;n&&X$(n,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const n=this._innerContainer;n&&X$(n,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([mn(()=>[this.view?.padding,this.container],this._applyViewPadding,_a),mn(()=>this.padding,this._applyUIPadding,_a),mn(()=>[this.container,this._locale],([e,n])=>{e&&e.setAttribute("lang",n)},_a),Yme(e=>{this._locale=e})])}destroy(){this.removeAllHandles(),this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear(),this.view=null,this._set("view",null)}set container(e){const n=this._get("container");e!==n&&(e&&(e.classList.add(el.ui),Lnt(e),this._attachContainers(e)),n&&(n.classList.remove(el.ui),X$(n,{top:"",bottom:"",left:"",right:""}),n.textContent=""),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const n=this._getViewPadding(),{top:r,bottom:i}=n;return Math.max(e-r-i,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...Sxe,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const n=this._getViewPadding(),{left:r,right:i}=n;return Math.max(e-r-i,0)}add(e,n){let r,i,s;if(Array.isArray(e))return void e.forEach(a=>this.add(a,n));const o=Y$(e);o&&({index:r,position:n,component:e,key:i}=o),n&&typeof n=="object"&&({index:r,key:i,position:n,internal:s}=n),!e||n&&!this._isValidPosition(n)||this._add(e,n,r??this._getNumComponentsAtPosition(n),i,s)}remove(e,n){if(!e)return;if(Array.isArray(e))return e.map(i=>this.remove(i,n));const r=this._find(e);if(r){const i=this._componentMap.get(r);if(!i||i.key!==n)return;const s=this._components.indexOf(r);return r.node.parentNode?.removeChild(r.node),this._componentMap.delete(r),r.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(a=>{const l=this._componentMap.get(a);l&&l.position===i.position&&l.index>i.index&&l.index--}),this._components.splice(s,1)[0]}}empty(e,n={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,n);return}const r=this._positionNameToContainerLookup[e??"manual"],i=Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(s=>s==null?!1:!(this._componentMap.get(s)?.internal??!1)||n.removeInternal);for(const s of i)this.remove(s)}move(e,n){if(Array.isArray(e)&&e.forEach(o=>this.move(o,n)),!e)return;let r;const i=Y$(e)||Y$(n);if(i&&(r=i.index,n=i.position,e=i.component||e),n&&!this._isValidPosition(n))return;const s=this.remove(e);s&&this.add(s,{position:n,index:r})}find(e){if(!e)return null;const n=this._findById(e);return n&&(n.widget||n.node)}getComponents(e,n={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,n)):this._getComponentsAtPosition(e,n):this._components.filter(r=>n.includeInternal||!this._componentMap.get(r)?.internal).map(({widget:r,node:i})=>r??i)}getPosition(e){for(const n in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[n].contains(e))return n;return null}_add(e,n,r,i,s){e instanceof k3||(e=new k3({node:e}));const{widget:o}=e;o!=null&&o instanceof Kt&&o.addHandles(Zn(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey);const a=this._positionNameToContainerLookup[n];this._components.some(l=>{const c=this._componentMap.get(l)?.position,u=c?this._positionNameToContainerLookup[c]:null;return a===u&&this._componentMap.get(l)?.index===r})&&this._components.forEach(l=>{const c=this._componentMap.get(l),u=c?.position,h=u?this._positionNameToContainerLookup[u]:null;c&&h===a&&c.index>=r&&c.index++}),this._place({component:e,position:n,index:r}),this._components.push(e),this._componentMap.set(e,{key:i,position:n,internal:s,index:r})}_find(e){return e?e instanceof k3?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){return this.view?.padding??Unt}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(el.innerContainer,el.cornerContainer);const n=document.createElement("div");n.classList.add(el.innerContainer,el.manualContainer);const r=document.createElement("div");r.classList.add(el.topLeft,el.corner),e.appendChild(r);const i=document.createElement("div");i.classList.add(el.topRight,el.corner),e.appendChild(i);const s=document.createElement("div");s.classList.add(el.bottomLeft,el.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(el.bottomRight,el.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=n;const a=Vnt();this._cornerNameToContainerLookup={"top-left":r,"top-right":i,"bottom-left":s,"bottom-right":o,"top-leading":a?i:r,"top-trailing":a?r:i,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:n,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const n=e.position??"manual",{component:r,index:i}=e,s=this._positionNameToContainerLookup[n],o=i!=null&&i>-1;if(Bnt(r.widget)&&r.widget.startup(),!o)return void s.appendChild(r.node);const a=Array.from(s.children);if(a.length!==0){for(const l of a){const c=this._findByNode(l);if(c&&i<(this._componentMap.get(c)?.index??0))return void l.parentNode?.insertBefore(r.node,l)}s.appendChild(r.node)}else s.appendChild(r.node)}_toPixelPosition(e){return{top:PR(e.top),left:PR(e.left),right:PR(e.right),bottom:PR(e.bottom)}}_findByComponent(e){return this._components.find(n=>n===e)??null}_findById(e){return this._components.find(({id:n})=>n===e)??null}_findByNode(e){return e?this._components.find(({node:n})=>n===e):null}_getComponentsAtPosition(e,n){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(i=>this._findByNode(i)).filter(A2).filter(i=>n.includeInternal||!this._componentMap.get(i)?.internal).map(({widget:i,node:s})=>i??s)}_getNumComponentsAtPosition(e){return this._positionNameToContainerLookup[e]?.children.length??0}};x([E()],id.prototype,"_locale",void 0),x([E()],id.prototype,"container",null),x([E()],id.prototype,"height",null),x([E({value:Sxe})],id.prototype,"padding",null),x([Ks("padding")],id.prototype,"castPadding",null),x([E()],id.prototype,"view",void 0),x([E()],id.prototype,"width",null),id=x([ue("esri.views.ui.UI")],id);const Wnt=id,Hnt={handleInterceptedEvent:(t,e,n,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||n,[r]))},qnt={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,n)=>{e.startsWith("-")?t.style.setProperty(e,n):t.style[e]=n}},Knt=t=>({...qnt,...t}),Ynt=(t,e)=>{const n=[];for(;t&&t!==e;)n.push(t),t=t.parentNode;return n},Xnt=(t,e)=>t.find(e),Pie=(t,e,n=!1)=>{let r=t;return e.forEach((i,s)=>{const o=r?.children?Xnt(r.children,a=>a.domNode===i):void 0;n&&!o&&s!==e.length-1||(r=o)}),r},Znt=t=>{let e;const n={...Hnt,...t},r=Knt(n),i=r.performanceLogger;let s,o=!0,a=!1;const l=[],c=[],u=(f,g,y)=>{let _;r.eventHandlerInterceptor=(T,A,I,P)=>function(M){let V;i("domEvent",M);const C=Ynt(M.currentTarget,_.domNode),N=C.some(L=>customElements.get(L?.tagName?.toLowerCase()));if(M.eventPhase===Event.CAPTURING_PHASE||!N)C.reverse(),V=Pie(_.getLastRender(),C);else{const L=M.composedPath(),F=L.slice(L.indexOf(M.currentTarget),L.indexOf(_.domNode)).reverse();V=Pie(_.getLastRender(),F,!0)}let O;return V&&(O=n.handleInterceptedEvent(e,V,this,M)),i("domEventProcessed",M),O},n.postProcessProjectionOptions?.(r);const b=y();_=f(g,b,r),r.eventHandlerInterceptor=void 0,l.push(_),c.push(y),n.afterFirstVNodeRendered&&n.afterFirstVNodeRendered(_,b)};let h=()=>{if(s=void 0,o){o=!1,i("renderStart",void 0);for(let f=0;f<l.length;f++){const g=c[f]();i("rendered",void 0);try{l[f].update(g)}catch(y){console.error(y)}i("patched",void 0)}i("renderDone",void 0),o=!0}};return n.modifyDoRenderImplementation&&(h=n.modifyDoRenderImplementation(h,l,c)),e={renderNow:h,scheduleRender:()=>{s||a||(s=requestAnimationFrame(h))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(f,g)=>{u(pg.append,f,g)},insertBefore:(f,g)=>{u(pg.insertBefore,f,g)},merge:(f,g)=>{u(pg.merge,f,g)},replace:(f,g)=>{u(pg.replace,f,g)},detach:f=>{for(let g=0;g<c.length;g++)if(c[g]===f)return c.splice(g,1),l.splice(g,1)[0];throw new Error("renderFunction was not found")}},e},Mi=(t,e,...n)=>{try{return t?.call(e,...n)}catch(r){console.error(r,t)}},_z=async(t,e,...n)=>{try{return await t?.call(e,...n)}catch(r){console.error(r,t)}},TH=Symbol.for("controller"),Jnt=t=>typeof t=="object"&&t!==null&&(TH in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),VLt=t=>typeof t?.then=="function";let eT;const tT=t=>{eT!==t&&(eT=t,queueMicrotask(()=>eT===t?eT=void 0:0))},PL=t=>eT;let Ey=[];const Qnt=t=>{if(t===void 0){Ey=[];return}const e=Ey.indexOf(t);Ey=e===-1?[...Ey,t]:Ey.slice(0,e+1),queueMicrotask(()=>Ey=[])},ert=()=>Ey;let Vx;const zLt=t=>{Vx!==t&&(Vx=t,queueMicrotask(()=>Vx===t?Vx=void 0:0))},trt=()=>{const t=Vx;return Vx=void 0,t},nrt=async(t,e)=>{const n=kH(t);if(n===void 0)return t;if(await n.ready,typeof e=="function"){const r=n.watchExports(i=>e(i,r))}return n.exports},rrt=async t=>{const e=kH(t);return await e.ready,e},kH=t=>{const n=PL().manager.X(t);if(n!==void 0)return n;if(Jnt(t))return t;const r=trt();if(r!==void 0)return r};let xz=!1;const GLt=t=>{xz=!0;try{return t()}finally{xz=!1}};const A3=globalThis,AH=A3.ShadowRoot&&(A3.ShadyCSS===void 0||A3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,IH=Symbol(),Cie=new WeakMap;let Txe=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==IH)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(AH&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=Cie.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&Cie.set(n,e))}return e}toString(){return this.cssText}};const irt=t=>new Txe(typeof t=="string"?t:t+"",void 0,IH),BLt=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,i,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Txe(n,t,IH)},srt=(t,e)=>{if(AH)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),i=A3.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)}},Rie=AH?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return irt(n)})(t):t;const{is:ort,defineProperty:art,getOwnPropertyDescriptor:lrt,getOwnPropertyNames:crt,getOwnPropertySymbols:urt,getPrototypeOf:hrt}=Object,CL=globalThis,Mie=CL.trustedTypes,drt=Mie?Mie.emptyScript:"",frt=CL.reactiveElementPolyfillSupport,XT=(t,e)=>t,wz={toAttribute(t,e){switch(e){case Boolean:t=t?drt:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},PH=(t,e)=>!ort(t,e),Nie={attribute:!0,type:String,converter:wz,reflect:!1,useDefault:!1,hasChanged:PH};Symbol.metadata??=Symbol("metadata"),CL.litPropertyMetadata??=new WeakMap;let wx=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=Nie){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(e,r,n);i!==void 0&&art(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){const{get:i,set:s}=lrt(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:i,set(o){const a=i?.call(this);s?.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Nie}static _$Ei(){if(this.hasOwnProperty(XT("elementProperties")))return;const e=hrt(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(XT("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(XT("properties"))){const n=this.properties,r=[...crt(n),...urt(n)];for(const i of r)this.createProperty(i,n[i])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,i]of n)this.elementProperties.set(r,i)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const i=this._$Eu(n,r);i!==void 0&&this._$Eh.set(i,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(Rie(i))}else e!==void 0&&n.push(Rie(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return srt(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){const r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(i!==void 0&&r.reflect===!0){const s=(r.converter?.toAttribute!==void 0?r.converter:wz).toAttribute(n,r.type);this._$Em=e,s==null?this.removeAttribute(i):this.setAttribute(i,s),this._$Em=null}}_$AK(e,n){const r=this.constructor,i=r._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const s=r.getPropertyOptions(i),o=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:wz;this._$Em=i;const a=o.fromAttribute(n,s.type);this[i]=a??this._$Ej?.get(i)??a,this._$Em=null}}requestUpdate(e,n,r,i=!1,s){if(e!==void 0){const o=this.constructor;if(i===!1&&(s=this[e]),r??=o.getPropertyOptions(e),!((r.hasChanged??PH)(s,n)||r.useDefault&&r.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(o._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:i,wrapped:s},o){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??n??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),i===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[i,s]of this._$Ep)this[i]=s;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[i,s]of r){const{wrapped:o}=s,a=this[i];o!==!0||this._$AL.has(i)||a===void 0||this.C(i,void 0,s,a)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(n)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(n)}willUpdate(e){}_$AE(e){this._$EO?.forEach(n=>n.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(n=>this._$ET(n,this[n])),this._$EM()}updated(e){}firstUpdated(e){}};wx.elementStyles=[],wx.shadowRootOptions={mode:"open"},wx[XT("elementProperties")]=new Map,wx[XT("finalized")]=new Map,frt?.({ReactiveElement:wx}),(CL.reactiveElementVersions??=[]).push("2.1.2");const CH=globalThis,Oie=t=>t,BN=CH.trustedTypes,Lie=BN?BN.createPolicy("lit-html",{createHTML:t=>t}):void 0,kxe="$lit$",tg=`lit$${Math.random().toFixed(9).slice(2)}$`,Axe="?"+tg,prt=`<${Axe}>`,tv=document,EA=()=>tv.createComment(""),SA=t=>t===null||typeof t!="object"&&typeof t!="function",RH=Array.isArray,mrt=t=>RH(t)||typeof t?.[Symbol.iterator]=="function",Z$=`[ 	
\f\r]`,cS=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Die=/-->/g,jie=/>/g,Q0=RegExp(`>|${Z$}(?:([^\\s"'>=/]+)(${Z$}*=${Z$}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),$ie=/'/g,Fie=/"/g,Ixe=/^(?:script|style|textarea|title)$/i,Pxe=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),HLt=Pxe(1),qLt=Pxe(2),e0=Symbol.for("lit-noChange"),es=Symbol.for("lit-nothing"),Vie=new WeakMap,Jy=tv.createTreeWalker(tv,129);function Cxe(t,e){if(!RH(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Lie!==void 0?Lie.createHTML(e):e}const grt=(t,e)=>{const n=t.length-1,r=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=cS;for(let a=0;a<n;a++){const l=t[a];let c,u,h=-1,f=0;for(;f<l.length&&(o.lastIndex=f,u=o.exec(l),u!==null);)f=o.lastIndex,o===cS?u[1]==="!--"?o=Die:u[1]!==void 0?o=jie:u[2]!==void 0?(Ixe.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=Q0):u[3]!==void 0&&(o=Q0):o===Q0?u[0]===">"?(o=i??cS,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?Q0:u[3]==='"'?Fie:$ie):o===Fie||o===$ie?o=Q0:o===Die||o===jie?o=cS:(o=Q0,i=void 0);const g=o===Q0&&t[a+1].startsWith("/>")?" ":"";s+=o===cS?l+prt:h>=0?(r.push(c),l.slice(0,h)+kxe+l.slice(h)+tg+g):l+tg+(h===-2?a:g)}return[Cxe(t,s+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class TA{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[c,u]=grt(e,n);if(this.el=TA.createElement(c,r),Jy.currentNode=this.el.content,n===2||n===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(i=Jy.nextNode())!==null&&l.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const h of i.getAttributeNames())if(h.endsWith(kxe)){const f=u[o++],g=i.getAttribute(h).split(tg),y=/([.?@])?(.*)/.exec(f);l.push({type:1,index:s,name:y[2],strings:g,ctor:y[1]==="."?vrt:y[1]==="?"?_rt:y[1]==="@"?xrt:RL}),i.removeAttribute(h)}else h.startsWith(tg)&&(l.push({type:6,index:s}),i.removeAttribute(h));if(Ixe.test(i.tagName)){const h=i.textContent.split(tg),f=h.length-1;if(f>0){i.textContent=BN?BN.emptyScript:"";for(let g=0;g<f;g++)i.append(h[g],EA()),Jy.nextNode(),l.push({type:2,index:++s});i.append(h[f],EA())}}}else if(i.nodeType===8)if(i.data===Axe)l.push({type:2,index:s});else{let h=-1;for(;(h=i.data.indexOf(tg,h+1))!==-1;)l.push({type:7,index:s}),h+=tg.length-1}s++}}static createElement(e,n){const r=tv.createElement("template");return r.innerHTML=e,r}}function K2(t,e,n=t,r){if(e===e0)return e;let i=r!==void 0?n._$Co?.[r]:n._$Cl;const s=SA(e)?void 0:e._$litDirective$;return i?.constructor!==s&&(i?._$AO?.(!1),s===void 0?i=void 0:(i=new s(t),i._$AT(t,n,r)),r!==void 0?(n._$Co??=[])[r]=i:n._$Cl=i),i!==void 0&&(e=K2(t,i._$AS(t,e.values),i,r)),e}class yrt{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,i=(e?.creationScope??tv).importNode(n,!0);Jy.currentNode=i;let s=Jy.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new JI(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new wrt(s,this,e)),this._$AV.push(c),l=r[++a]}o!==l?.index&&(s=Jy.nextNode(),o++)}return Jy.currentNode=tv,i}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class JI{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,n,r,i){this.type=2,this._$AH=es,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=K2(this,e,n),SA(e)?e===es||e==null||e===""?(this._$AH!==es&&this._$AR(),this._$AH=es):e!==this._$AH&&e!==e0&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):mrt(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==es&&SA(this._$AH)?this._$AA.nextSibling.data=e:this.T(tv.createTextNode(e)),this._$AH=e}$(e){const{values:n,_$litType$:r}=e,i=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=TA.createElement(Cxe(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===i)this._$AH.p(n);else{const s=new yrt(i,this),o=s.u(this.options);s.p(n),this.T(o),this._$AH=s}}_$AC(e){let n=Vie.get(e.strings);return n===void 0&&Vie.set(e.strings,n=new TA(e)),n}k(e){RH(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const s of e)i===n.length?n.push(r=new JI(this.O(EA()),this.O(EA()),this,this.options)):r=n[i],r._$AI(s),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){for(this._$AP?.(!1,!0,n);e!==this._$AB;){const r=Oie(e).nextSibling;Oie(e).remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class RL{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,i,s){this.type=1,this._$AH=es,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=es}_$AI(e,n=this,r,i){const s=this.strings;let o=!1;if(s===void 0)e=K2(this,e,n,0),o=!SA(e)||e!==this._$AH&&e!==e0,o&&(this._$AH=e);else{const a=e;let l,c;for(e=s[0],l=0;l<s.length-1;l++)c=K2(this,a[r+l],n,l),c===e0&&(c=this._$AH[l]),o||=!SA(c)||c!==this._$AH[l],c===es?e=es:e!==es&&(e+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!i&&this.j(e)}j(e){e===es?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}let vrt=class extends RL{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===es?void 0:e}};class _rt extends RL{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==es)}}let xrt=class extends RL{constructor(e,n,r,i,s){super(e,n,r,i,s),this.type=5}_$AI(e,n=this){if((e=K2(this,e,n,0)??es)===e0)return;const r=this._$AH,i=e===es&&r!==es||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==es&&(r===es||i);i&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},wrt=class{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){K2(this,e)}};const brt=CH.litHtmlPolyfillSupport;brt?.(TA,JI),(CH.litHtmlVersions??=[]).push("3.3.2");const Ert=(t,e,n)=>{const r=n?.renderBefore??e;let i=r._$litPart$;if(i===void 0){const s=n?.renderBefore??null;r._$litPart$=i=new JI(e.insertBefore(EA(),s),s,void 0,n??{})}return i._$AI(t),i};const MH=globalThis;let Tw=class extends wx{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Ert(n,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return e0}};Tw._$litElement$=!0,Tw.finalized=!0,MH.litElementHydrateSupport?.({LitElement:Tw});const Srt=MH.litElementPolyfillSupport;Srt?.({LitElement:Tw});(MH.litElementVersions??=[]).push("4.2.2");class kA{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}const Trt=(t,e)=>{const n=e/krt;let r=0;const i=setInterval(()=>{r+=n,r>=e&&(clearInterval(i),t())},n);return i},krt=4,Art=(t,e,n)=>{const r=Object.keys(t),i=r.length;zx===void 0&&queueMicrotask(ML),zx??=new Map;let s=zx.get(t);return s===void 0&&(s={callbacks:[],keyCount:i},zx.set(t,s)),s.keyCount!==i&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=i),s.callbacks.push(o=>{const a=c=>Mi(e,null,c),l=o[i];l===void 0?a(void 0):t[l]===n?a(l):a(void 0)}),n};let zx;const ML=()=>{zx?.forEach(({callbacks:t},e)=>{const n=Object.keys(e);t.forEach(r=>r(n))}),zx=void 0},Irt=(t,e,n)=>{const r=t.manager;return r.V!==es&&r.V!==n&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=n,r.T.push((i,s)=>Mi(e,void 0,n===s?i:void 0)),n},Prt=(t=[PL(),...ert()],e,n)=>{const r=Array.isArray(t)?t:[t];let i=r.length+1;const s=o=>{i-=1,o!==void 0&&(i=Math.min(i,0)),i===0&&e(o)};r.forEach(o=>Art(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),n));for(const o of r)if("manager"in o&&o.manager.component===o){Irt(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),n);break}return n},Crt=(t="",e={},n=PL())=>{const r={emit:i=>{t===""&&ML();const s=new CustomEvent(t,{detail:i,cancelable:!0,bubbles:!0,composed:!0,...e});return n.el.dispatchEvent(s),s}};return t===""&&Prt(void 0,i=>t=i.key,r),r},JLt=Crt.bind(null,"");var Rxe;Rxe=TH;class Rrt{constructor(e){this.#n=[],this.#e=[],this.#r=[],this.#l=[],this.#c=[],this.#u=[],this.#h=[],this.#d=[],this.#o=[],this.#a=!1,this.P=new kA,this.connectedCalled=!1,this.loadedCalled=!1,this[Rxe]=!0,this.#s=[];const n=this,r=e??PL();n.#t=r,n.ready=n.P.promise,n.#i=Gie(n),n.component=r,n.#t.addController(n),n.#t.manager===void 0||(Qnt(n),queueMicrotask(()=>n.catchUpLifecycle()))}#n;#e;#r;#l;#c;#u;#h;#d;#o;#a;#t;catchUpLifecycle(){const{manager:e}=this.#t;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e.#a&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}#i;get exports(){return this.#i}set exports(e){const n=this.#i;n!==e&&(this.#i=e,this.#s.forEach(Mi),this.connectedCalled&&this.O!==!1&&this.#t.requestUpdate(this.O,n)),this.P.resolve(e)}setProvisionalExports(e,n=!0){this.#i=n?Gie(e):e,this.#s.forEach(Mi)}#s;watchExports(e){const n=()=>e(this.#i);return this.#s.push(n),()=>{this.#s.splice(this.#s.indexOf(n),1)}}get use(){return tT(this.#t),nrt}get useRef(){return tT(this.#t),rrt}get useRefSync(){return tT(this.#t),kH}controllerRemoved(){this.#t.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this.#n.push(e)}onDisconnected(e){this.#e.push(e)}onLoad(e){this.#r.push(e)}onLoaded(e){this.#l.push(e)}onUpdate(e){this.#c.push(e)}onUpdated(e){this.#u.push(e)}onDestroy(e){this.#h.push(e)}onLifecycle(e){this.#d.push(e),this.connectedCalled&&this.#t.el.isConnected&&this.#f(e)}triggerConnected(){const e=this;e.hostConnected&&Mi(e.hostConnected,e),e.#n.forEach(Mi),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Mi(e.hostDisconnected,e),e.#e.forEach(Mi),e.#o.forEach(Mi),e.#o=[]}async triggerLoad(){if(this.#a)return;this.#a=!0;const e=this;e.hostLoad&&await _z(e.hostLoad,e),this.#r.length>0&&await Promise.allSettled(this.#r.map(_z)),this.P.resolve(this.#i)}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&Mi(this.hostLoaded,this),this.#l.forEach(Mi),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&Mi(this.hostUpdate,this,e),this.#c.forEach(zie,e)}triggerUpdated(e){this.hostUpdated&&Mi(this.hostUpdated,this,e),this.#u.forEach(zie,e)}triggerDestroy(){this.hostDestroy&&Mi(this.hostDestroy,this),this.#h.forEach(Mi)}triggerLifecycle(){this.hostLifecycle&&this.#f(()=>this.hostLifecycle()),this.#d.forEach(this.#f,this)}#f(e){tT(this.#t);const n=Mi(e);(Array.isArray(n)?n:[n]).forEach(i=>{typeof i=="function"?this.#o.push(i):typeof i=="object"&&typeof i.remove=="function"&&this.#o.push(i.remove)})}}function zie(t){Mi(t,void 0,this)}const Mrt=Rrt,Gie=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,i,s){if(!((i==="exports"||i==="_exports")&&i in r&&r[i]===n)&&(i in r||i in Promise.prototype||typeof i=="symbol"))return typeof r=="function"?r[i]:Reflect.get(r,i,s)}},n=new Proxy(t,e);return n},Nrt=t=>t.replace(Ort,(e,n)=>`${n===0?"":"-"}${e.toLowerCase()}`),Ort=/[A-Z]+(?![a-z])|[A-Z]/gu,Lrt=1,Drt=2,jrt=4,$rt=8,Frt=16,Vrt=32,zrt=64,Mxe=t=>{let e=t;for(;e=e.parentNode??e.host;)if(e?.constructor?.lumina){const n=e;return n.manager?.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},Uie={};function Nxe(){}const I3=Object.defineProperty,Grt=globalThis.HTMLElement??Nxe;var ol,Qf,e2,qA,bz;const gK=class gK extends Grt{constructor(){var i;super();Cu(this,qA);Cu(this,ol);Cu(this,Qf);Cu(this,e2);Ru(this,Qf,{}),Ru(this,e2,[]),this.I=new kA,this.H=new kA,this.J=[];const n=this,r=n.constructor;n._offspring=n.J,n._postLoad=n.I,r.C?.forEach(s=>{Object.hasOwn(n,s)&&(Nr(n,Qf)[s]=n[s],delete n[s])}),r.A?kE(i=n,qA,bz).call(i,{a:r.A}):r.B.then(async s=>{var o;await r.K.p,kE(o=n,qA,bz).call(o,await(s.default?.then(a=>typeof a=="function"?{a}:a)??s))}).catch(s=>{n.H.reject(s),setTimeout(()=>{throw s})})}static F(){for(const n of this.C??[])I3(this.prototype,n,{configurable:!0,enumerable:!0,get(){return Nr(this,Qf)[n]},set(r){Nr(this,Qf)[n]=r}});for(const n of this.E??[])I3(this.prototype,n,{async value(...r){return Nr(this,ol)||await this.H.promise,await Nr(this,ol)[n](...r)},configurable:!0});for(const n of this.D??[])I3(this.prototype,n,{value(...r){return Nr(this,ol)[n](...r)},configurable:!0})}get manager(){return Nr(this,ol)?.manager}attributeChangedCallback(n,r,i){Nr(this,ol)?.attributeChangedCallback(n,r,i),Nr(this,ol)||Nr(this,e2).push(n)}connectedCallback(){Nr(this,ol)?Nr(this,ol).connectedCallback?.():queueMicrotask(()=>this.G=Mxe(this))}disconnectedCallback(){Nr(this,ol)?.disconnectedCallback?.()}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){Nr(this,ol)?.requestUpdate()}};ol=new WeakMap,Qf=new WeakMap,e2=new WeakMap,qA=new WeakSet,bz=function(n){const r=this.constructor,i=r.L,s=Nr(this,Qf),o=Object.values(n).find(f=>f.L===i),a=`${i}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);Brt(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const u=document.createElement(a);o.N=void 0,Ru(this,ol,u),Ru(this,Qf,u),Nr(this,e2).forEach(f=>u.attributeChangedCallback(f,null,this.getAttribute(f))),Object.entries(s).forEach(Urt,u);const h=this.isConnected;(h||this.G)&&(u.connectedCallback?.(),h||u.disconnectedCallback())},gK.lumina=!0;let Bie=gK;function Urt([t,e]){this[t]=e}const Brt=t=>{const e=t.prototype,n=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(i,s){n.setAttribute.call(this.el,i,s)},e.removeAttribute=function(i){n.removeAttribute.call(this.el,i)},I3(e,"isConnected",{get(){return Reflect.get(n,"isConnected",this.el)}}))};const Oxe={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},Lxe=t=>(...e)=>({_$litDirective$:t,values:e});let Dxe=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,r){this._$Ct=e,this._$AM=n,this._$Ci=r}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}};const Wrt=Lxe(class extends Dxe{constructor(t){if(super(t),t.type!==Oxe.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(r=>r!=="")));for(const r in e)e[r]&&!this.nt?.has(r)&&this.st.add(r);return this.render(e)}const n=t.element.classList;for(const r of this.st)r in e||(n.remove(r),this.st.delete(r));for(const r in e){const i=!!e[r];i===this.st.has(r)||this.nt?.has(r)||(i?(n.add(r),this.st.add(r)):(n.remove(r),this.st.delete(r)))}return e0}});const jxe="important",Hrt=" !"+jxe,qrt=Lxe(class extends Dxe{constructor(t){if(super(t),t.type!==Oxe.ATTRIBUTE||t.name!=="style"||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r==null?e:e+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(t,[e]){const{style:n}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?n.removeProperty(r):n[r]=null);for(const r in e){const i=e[r];if(i!=null){this.ft.add(r);const s=typeof i=="string"&&i.endsWith(Hrt);r.includes("-")||s?n.setProperty(r,s?i.slice(0,-11):i,s?jxe:""):n[r]=i}}return e0}});class Krt extends Mrt{constructor(e){super(e),this.destroyed=!1,this.R=!1,this.V=es,this.T=[],this.#r=new WeakMap,this.#e=e,this.exports=void 0,this.hasDestroy=Ez in e&&typeof e.destroy=="function",Tw.prototype.addController.call(e,{hostConnected:()=>{if(this.destroyed){const n=e.el.localName;throw e.el.remove(),new Error(`The ${n} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${Ez} prop.`)}this.#n!==void 0&&clearTimeout(this.#n),ML();for(const n of e.M)"triggerConnected"in n?n.triggerConnected():Mi(n.hostConnected,n)},hostDisconnected:()=>{for(const n of e.M)"triggerDisconnected"in n?n.triggerDisconnected():Mi(n.hostDisconnected,n);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const n of e.M)"triggerUpdate"in n?n.triggerUpdate(this.Q):Mi(n.hostUpdate,n,this.Q)},hostUpdated:()=>{for(const n of e.M)"triggerUpdated"in n?n.triggerUpdated(this.Q):Mi(n.hostUpdated,n,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),tT(e)}#n;#e;async destroy(){if(!this.destroyed){this.#e.el.isConnected&&(this.hasDestroy=!1,this.#e.el.remove()),this.#n=void 0,this.destroyed=!0;for(const e of this.#e.M)"triggerDestroy"in e?e.triggerDestroy():Mi(e.hostDestroy,e);this.#e.M.splice(0)}}U(){if(this.#n!==void 0&&clearTimeout(this.#n),!this.#e.el.isConnected&&!this.#e.autoDestroyDisabled){const e=()=>{this.#e.destroy()};this.#n=Trt(e,Yrt)}}S(e,n){const r=this.T;this.V=es,this.T=[],r.forEach(i=>i(e,n))}#r;W(e,n){(typeof n=="object"&&n!==null||typeof n=="function")&&this.#r.set(n,e)}X(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this.#r.get(e)}}let Yrt=1e3;const Ez="autoDestroyDisabled";var n1,KA,YA,r1,ud,nb,$xe,Fxe;const xk=class xk extends Tw{constructor(){super();Cu(this,nb);Cu(this,n1);Cu(this,KA);Cu(this,YA);Cu(this,r1);Cu(this,ud);this.M=[],this.manager=new Krt(this);const n=this,r=n.constructor,i=r.N,s=r.K.o,o=xk.prototype.shouldUpdate;Ru(n,r1,i?.H??new kA),n.I=i?.I??new kA,n.J=i?.J??[],n._offspring=n.J,n._postLoad=n.I,n.el=i??n,Ru(n,YA,n.enableUpdating),n.enableUpdating=Nxe,n.shouldUpdate!==o&&(Ru(n,KA,n.shouldUpdate),n.shouldUpdate=o),s&&(Ru(n,n1,new Map),r.elementProperties.forEach((a,l)=>Nr(n,n1).set(l,s())))}static finalizeStyles(n){const r=super.finalizeStyles(n),i=this.shadowRootOptions===Uie;return this.K?.commonStyles===void 0||i?r:[this.K.commonStyles,...r]}static createProperty(n,r){const i=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=s?.hasChanged??PH,a={attribute:i&Lrt&&typeof n=="string"?Nrt(n):!1,reflect:!!(i&Drt),type:i&jrt?Boolean:i&$rt?Number:void 0,state:!!(i&Frt),readOnly:!!(i&Vrt),noAccessor:!!(i&zrt),c:!1,...s,hasChanged(l,c){const u=o(l,c);return a.c=u,u}};super.createProperty(n,a)}static getPropertyDescriptor(n,r,i){const s=this.K,o=super.getPropertyDescriptor(n,r,i);return i.d=o,{...o,get(){return s.t?.(Nr(this,n1).get(n)),o.get?.call(this)},set(a){const l=this.manager;if(i.readOnly&&!xz&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${n}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),i.c&&Nr(this,n1)?.get(n)?.notify(),l.T.length>0&&(ML(),l?.S(n,a))}}}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const n=this.constructor.K.c?.(()=>this.requestUpdate());Ru(this,ud,n);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>kE(this,nb,Fxe).call(this).catch(i=>{Nr(this,r1).reject(i),setTimeout(()=>{throw i})})):n&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),Nr(this,ud)?.destroy(),Ru(this,ud,void 0)}createRenderRoot(){const n=this.el.shadowRoot,r=this.constructor,i=r.shadowRootOptions,o=n??(i===Uie?this.el:this.el.attachShadow(i));if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(n){var r;return this.manager.Q=n,((r=Nr(this,KA))==null?void 0:r.call(this,n))??!0}update(n){Nr(this,ud)?kE(this,nb,$xe).call(this,n):super.update(n)}listen(n,r,i){const s=r?.bind(this)??r;this.manager.onLifecycle(()=>(this.el.addEventListener(n,s,i),()=>this.el.removeEventListener(n,s,i)))}listenOn(n,r,i,s){const o=i?.bind(this)??i;this.manager.onLifecycle(()=>(n.addEventListener(r,o,s),()=>n.removeEventListener(r,o,s)))}async componentOnReady(){return await Nr(this,r1).promise,this}addController(n){this.M.push(n),!(TH in n)&&this.renderRoot&&this.el.isConnected&&n.hostConnected?.()}removeController(n){this.M.splice(this.M.indexOf(n),1),n.controllerRemoved?.()}};n1=new WeakMap,KA=new WeakMap,YA=new WeakMap,r1=new WeakMap,ud=new WeakMap,nb=new WeakSet,$xe=function(n){try{Nr(this,ud).clear(),this.constructor.K.r(Nr(this,ud),()=>kX(xk.prototype,this,"update").call(this,n))}catch(r){throw Nr(this,ud).clear(),r}},Fxe=async function(){const n=this.el.G??Mxe(this.el);n&&await n;const r=[];for(const s of this.M)"triggerLoad"in s?r.push(s.triggerLoad()):r.push(_z(s.hostLoad,s));await Promise.all(r),await this.load?.(),this.manager.hasDestroy&&this.manager.onUpdate(s=>s.has(Ez)&&this.manager.U()),Nr(this,YA).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const i=this.J.filter(s=>!s.manager?.loadedCalled);i.length&&await Promise.allSettled(i.map(async s=>await s.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const s of this.M)"triggerLoaded"in s?s.triggerLoaded():Mi(s.hostLoaded,s);this.loaded?.(),Nr(this,r1).resolve()},xk.lumina=!0;let Wie=xk;const Xrt=t=>{let e;const n=i=>{e=new URL(i,globalThis.location?.href||void 0).href},r={...t,getAssetPath(i){const s=new URL(i,e);return s.origin!==globalThis.location?.origin?s.href:s.pathname},setAssetPath:n,customElement(i,s){s.K=r,s.L=i,customElements.get(i)||customElements.define(i,s)}};return n(t.defaultAssetPath),r},eDt=t=>typeof t=="object"&&t!=null?Wrt(t):t,tDt=t=>typeof t=="object"&&t!=null?qrt(t):t,nDt=es;function rDt(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n)}const iDt={toAttribute:t=>t===!0?"":t===!1?null:t},Zrt="calcite-mode-auto",Jrt="calcite-mode-dark",sDt={rtl:"calcite--rtl"},oDt={filter:250,nextTick:0,resize:150,reposition:100},aDt=25;function Hie(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,n=()=>t.contains(Jrt)||t.contains(Zrt)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),i=o=>{s!==o&&r(o),s=o};let s=n();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>i(o.matches?"dark":"light")),new MutationObserver(()=>i(n())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const ZT=globalThis.calciteConfig,lDt=ZT?.focusTrapStack||[],cDt=ZT?.logLevel||"info",qie="3.3.3",Qrt="2025-10-08",eit="7391af08e";function tit(){if(ZT&&ZT.version)return;console.info(`Using Calcite Components ${qie} [Date: ${Qrt}, Revision: ${eit}]`);const t=ZT||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:qie,writable:!1}),globalThis.calciteConfig=t}document.readyState==="interactive"?Hie():document.addEventListener("DOMContentLoaded",Hie,{once:!0});queueMicrotask(tit);const nit=Xrt({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:uDt,getAssetPath:hDt,setAssetPath:rit}=nit;let Vxe=!1;const iit=t=>{Vxe=!0,rit(t)};let zxe;function sit(){Vxe||iit(ru(Hi(zxe)))}function NH(t){const e=[];for(const n of Object.keys(t))customElements.get(`calcite-${n}`)||e.push(t[n]?.());return e.length>0?Promise.all(e):null}zxe="components/assets";const Gxe=Symbol("widget"),Uxe=Symbol("widget-test-data"),oit=[],ait={},WN=new WeakMap;function Bxe(t,e){let n=e.children;if(n?.length)for(let i=0;i<n.length;++i)n[i]=Bxe(t,n[i]);else n=oit;const r=e.vnodeSelector;if(HN(r)){const i=e.properties||ait,s=i.key||r,o={key:s,afterCreate:lit,afterUpdate:cit,afterRemoved:Wxe,parentWidget:t,widgetConstructor:r,widgetProperties:{...i,key:s,children:n}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function lit(t,e,n,{parentWidget:r,widgetConstructor:i,widgetProperties:s}){const o=new i(s);o.container=t,WN.set(t,o),o.afterCreate?.(o,t),r.addHandles(Zn(()=>Wxe(t))),queueMicrotask(()=>{o[Uxe].projector?.renderNow()})}function cit(t,e,n,{widgetProperties:r}){const i=WN.get(t);i&&(i.set(r),i.afterUpdate?.(i,t))}function Wxe(t){const e=WN.get(t);e&&(e.afterRemoved?.(e,t),e.destroy(),WN.delete(t))}function HN(t){return typeof t=="function"&&t[Gxe]}const Kie=new Set;function uit(t){Kie.add(t),t.finally(()=>Kie.delete(t))}function hit(t){return Zn()}var Yie;let dit=0;function Hxe(t,e){const n=Object.prototype.hasOwnProperty;for(const r in e)n.call(e,r)&&n.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?Hxe(t[r],e[r]):t[r]=e[r]);return t}const fit=Znt({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,n=/capture$/i;t.eventHandlerInterceptor=(r,i,s,o)=>{const a=e?.(r,i,s,o),l=n.test(r);if(!((r=r.replace(n,"")).toLowerCase()in s)||l){const c=r[2].toLowerCase()+r.slice(3),u=g=>a?.call(s,g);s.addEventListener(c,u,l);const h=()=>s.removeEventListener(c,u,l),f=o.afterRemoved;o.afterRemoved=g=>{f?.(g),h()}}return a}},handleInterceptedEvent(t,e,n,r){const{eventPhase:i,type:s}=r,o=i===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(Exe(),t.scheduleRender(),l[a].call(l.bind||n,r))}});let J$=!1;var S1;let ro=(S1=class extends yme(RI){constructor(e,n){super(e,n),this._attached=!1,this._projector=fit,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=Fje(async()=>{if(this._messageBundleProps?.length){const l=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:c,propertyName:u})=>{if(this.destroyed)return;let h=await Jme(c);this.destroyed||(this.uiStrings&&Object.keys(this.uiStrings)&&(h=Hxe(Ze(h),this.uiStrings)),this[u]=h)}));if(this.destroyed)return;for(const c of l)c.status==="rejected"&&kt.getLogger(this).error("widget-intl:locale-error",this.declaredClass,c.reason)}await this.loadLocale()}),this.addHandles(hit()),sit();const r="esri-widget-uid-"+VI(),i=this.render.bind(this);this._trackingTarget=new qO(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const l=i()??s(),c=l.properties??={};if(c.key??=r,HN(l.vnodeSelector)){if(!this.visible)return s()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),c.styles.display??="";let u=0;return l.children?.forEach(h=>{HN(h.vnodeSelector)||(h.properties??={},h.properties.key??=`${this.id}--${u++}`)}),Bxe(this,l)};this.render=()=>{if(J$)return o();let l=jnt(this)??null;if(l)return l;this._trackingTarget.clear(),J$=!0;try{l=Tp(this._trackingTarget,o)}catch(c){throw kt.getLogger(this).error(c),c}finally{J$=!1}return l&&$nt(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this.destroyed||(this._readyForTrueRender=!0,this._postInitialize())}):(this._resourcesFetch=Promise.resolve().then(()=>{this.destroyed||this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),uit(this._resourcesFetch)}normalizeCtorArgs(e,n){const r={...e};return n&&(r.container=n),r}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(gee):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Di(this._trackingTarget),Di(this.viewModel),this._detach(this.container),this._set("container",null),this.render=()=>null,this._projector=null,K$(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return KW(e)}get destroyed(){return super.destroyed}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+dit++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(Yie=Gxe,Uxe)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(K$(this),this._projector.scheduleRender())}classes(...e){return Fnt.apply(this,e)}renderNow(){K$(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(mn(()=>this.viewModel,(n,r)=>{r&&this.removeHandles("delegated-events"),n&&UO(n)&&this.addHandles(this._delegatedEventNames.map(i=>xb(n,i,s=>{this.emit(i,s)})),"delegated-events")},sa)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(gee),this.scheduleRender()};this.addHandles([Yme(e),mn(()=>this.uiStrings,e)]),this.addHandles(Ec(()=>this.container,n=>{this.destroyed||this._attach(n)},{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}},S1[Yie]=!0,S1.vnodeSelector="div",S1);x([E()],ro.prototype,"_readyForTrueRender",void 0),x([E({value:null})],ro.prototype,"container",null),x([Ks("container")],ro.prototype,"castContainer",null),x([E()],ro.prototype,"icon",null),x([E()],ro.prototype,"id",null),x([E()],ro.prototype,"label",null),x([E()],ro.prototype,"renderable",null),x([E()],ro.prototype,"uiStrings",void 0),x([E()],ro.prototype,"viewModel",void 0),x([E({value:!0})],ro.prototype,"visible",null),x([E()],ro.prototype,"key",void 0),x([E()],ro.prototype,"children",void 0),x([E()],ro.prototype,"afterCreate",void 0),x([E()],ro.prototype,"afterUpdate",void 0),x([E()],ro.prototype,"afterRemoved",void 0),ro=x([ue("esri.widgets.Widget")],ro);const NL=ro,pit=new Map;function mit(t){return pit.get(t)}function Xie(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function git(t,e){return t.length!==e.length||t.some((n,r)=>n.text!==e[r].text)}function CR(t,e,n){!n||!e||t.find(r=>r.layerView===e&&r.text===n)||t.push({text:n,layerView:e})}function yit(t){return t.type==="bing-maps"}const Yh=[];let bx=class extends Kt{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Ot,this.view=null,this._allLayerViewsChange=e=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const n=this.view?.allLayerViews;n&&(this.addHandles(n.map(r=>mn(()=>[r.suspended,r.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),n.forEach(r=>{r.declaredClass==="esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D"&&this.addHandles(r.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),e?.removed&&e.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.addHandles([J1(()=>this.view?.allLayerViews,"change",e=>this._allLayerViewsChange(e),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Ec(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,e=t?.allLayerViews;Yh.length=0;let n=!1,r=null;if(!t||!e)return void this._clear();e.forEach(s=>{if(s.suspended||!s.layer?.attributionVisible)return;const o=s.layer;if(Xie(o,"user"))return void CR(Yh,s,o.copyright);if(o.type==="integrated-mesh-3dtiles"&&o.hasGoogleUrl&&(n=!0,r=s),o.hasAttributionData){if(this._fetchedAttributionData.has(s)){const l=this._fetchedAttributionData.get(s);return void(l?CR(Yh,s,this._getDynamicAttribution(l,t,o)):Xie(o)&&CR(Yh,s,o.copyright))}return void this._fetchAttributionData(s)}const a="portalItem"in o?o.portalItem?.accessInformation:void 0;CR(Yh,s,a||o.copyright)});const i=e.find(s=>s.layer?.type==="integrated-mesh-3dtiles");if(this.view&&i){const s=mit(this.view);if(s){const o=s.getAttributionText();for(let a=o.length-1;a>-1;--a)Yh.unshift({text:o[a],layerView:i})}}n&&r&&Yh.unshift({text:"Google Maps",layerView:r}),git(this.items,Yh)&&(this.items.removeAll(),this.items.addMany(Yh)),Yh.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const e=await vme(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const n=e.ok?this._createContributionIndex(e.value,yit(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,n)}this._updateAttributionItems()}_createContributionIndex(t,e){const n=t.contributors,r={};if(!n)return r;for(let i=0;i<n.length;i++){const s=n[i],o=s.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,c=a.zoomMin-(e&&a.zoomMin?1:0),u=a.zoomMax-(e&&a.zoomMax?1:0),h=new Vn({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:Wt.WGS84}),f={extent:h1(h),attribution:s.attribution||"",score:a.score!=null?a.score:100,id:i};for(let g=c;g<=u;g++)r[g]??=[],r[g].push(f)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(t,e,n){const{extent:r,scale:i}=e;let s=n.tileInfo?.scaleToZoom(i)??0;if(s=Math.min(t.maxKey??0,Math.round(s)),!r||s==null||s<=-1)return"";const o=t[s],a=tL(r.center.clone().normalize(),Wt.WebMercator),l=new Set;return o?o.filter(c=>{const u=c.id,h=!l.has(u)&&a&&c.extent&&OI(c.extent,a);return h&&l.add(u),h}).sort((c,u)=>u.score-c.score||c.objectId-u.objectId).map(c=>c.attribution).join(", "):""}};x([E({readOnly:!0,type:Ot})],bx.prototype,"items",void 0),x([E({readOnly:!0})],bx.prototype,"state",null),x([E()],bx.prototype,"view",void 0),bx=x([ue("esri.widgets.Attribution.AttributionViewModel")],bx);const qxe=bx,Md={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function vit(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:xit(t[e])}}}function _it(t){const e=t?.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function xit(t){return function(e,...n){_it(e)?znt(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...n)}}function OL(t){return(e,n)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:n})}}var wit=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},Kxe=function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];Array.isArray(i)?Kxe(i,e):i!=null&&i!==!1&&(i.hasOwnProperty("vnodeSelector")||(i=wit(i)),e.push(i))}},bit=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(n.length===1&&typeof n[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:n[0],domNode:null};var i=[];return Kxe(n,i),{vnodeSelector:t,properties:e||void 0,children:i,text:void 0,domNode:null}};function Sl(t,e,...n){return typeof t!="function"||HN(t)?bit(t,e??null,...n):t(e,...n)}function dDt(...t){return t}const F_="esri-attribution",V_={base:F_,poweredBy:`${F_}__powered-by`,sources:`${F_}__sources`,open:`${F_}--open`,sourcesOpen:`${F_}__sources--open`,link:`${F_}__link`};let Aa=class extends NL{constructor(e,n){super(e,n),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._sourcesNode=null,this._overflowRequestAnimationFrame=null,this._resizeObserver=new ResizeObserver(r=>{r.forEach(({target:i})=>{this._scheduleOverflowCheck(i)})}),this._mutationObserver=new MutationObserver(r=>{let i=!1;for(const s of r)if(s.type==="childList"||s.type==="characterData"||s.type==="attributes"){i=!0;break}i&&this._sourcesNode&&this._scheduleOverflowCheck(this._sourcesNode)}),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new qxe}initialize(){this.addHandles(J1(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect(),this._mutationObserver?.disconnect(),this._overflowRequestAnimationFrame!=null&&(cancelAnimationFrame(this._overflowRequestAnimationFrame),this._overflowRequestAnimationFrame=null)}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}_scheduleOverflowCheck(e){this._overflowRequestAnimationFrame==null&&(this._overflowRequestAnimationFrame=requestAnimationFrame(()=>{this._overflowRequestAnimationFrame=null,this._checkSourceTextOverflow(e)}))}get attributionText(){return this.viewModel.items.reduce((e,n)=>(e.includes(n.text)||e.push(n.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[V_.open]:this._isOpen};return Sl("div",{bind:this,class:this.classes(V_.base,Md.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return Sl("div",{class:V_.poweredBy},"Powered by"," ",Sl("a",{class:V_.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,n=this._isInteractive,r=n?0:void 0,{attributionText:i}=this,s={[V_.sourcesOpen]:e,[Md.interactive]:n};return Sl("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(V_.sources,s),innerHTML:i,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._sourcesNode=e,this._resizeObserver.observe(e),this._mutationObserver.observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0}),this._scheduleOverflowCheck(e)}_checkSourceTextOverflow(e){let n=!1;const{clientHeight:r,clientWidth:i,scrollWidth:s}=e,o=s>i,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(n=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,n=!0)}n&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};x([E()],Aa.prototype,"_isOpen",void 0),x([E()],Aa.prototype,"_isInteractive",null),x([E()],Aa.prototype,"_attributionTextOverflowed",void 0),x([E()],Aa.prototype,"_prevSourceNodeHeight",void 0),x([E({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Aa.prototype,"attributionText",null),x([E()],Aa.prototype,"icon",null),x([E()],Aa.prototype,"itemDelimiter",void 0),x([E()],Aa.prototype,"label",null),x([E(),OL("esri/widgets/Attribution/t9n/Attribution")],Aa.prototype,"messages",void 0),x([E()],Aa.prototype,"view",null),x([E({type:qxe})],Aa.prototype,"viewModel",void 0),x([vit()],Aa.prototype,"_toggleState",null),Aa=x([ue("esri.widgets.Attribution")],Aa);const Eit=Aa;function Sit(){const t=_e("mapview-essential-goto-duration");return t==null?t:t}function Tit(t){return t?.spatialReference?.isWebMercator||t?.spatialReference?.isGeographic||!1}function kit(t,e,n){return t.goTo(e,n)}const Ait=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return dpe(i),this.goToOverride?this.goToOverride(i,r):kit(i,r.target,r.options)}};return x([E()],n.prototype,"goToOverride",void 0),x([E()],n.prototype,"view",void 0),n=x([ue("esri.widgets.support.GoTo")],n),n};let Sy=class extends Ait(Kt){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(_a)}destroy(){this.view=null}get canShowNorth(){return Tit(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:Sit()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const n=-e.heading;this._set("orientation",{x:0,y:0,z:n})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?mn(()=>e?.rotation,this._updateForRotation,_a):mn(()=>e?.camera,this._updateForCamera,_a))}_watchForView(e){this.addHandles(mn(()=>this.view,this._updateRotationWatcher,e))}};x([E({readOnly:!0})],Sy.prototype,"canShowNorth",null),x([E({readOnly:!0})],Sy.prototype,"orientation",void 0),x([E({readOnly:!0})],Sy.prototype,"state",null),x([E()],Sy.prototype,"view",void 0),Sy=x([ue("esri.widgets.Compass.CompassViewModel")],Sy);const Yxe=Sy,Zie="esri-compass",Jie={base:Zie,iconContainer:`${Zie}__icon-container`};let Lf=class extends NL{constructor(e,n){super(e,n),this.messages=null,this.viewModel=new Yxe,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return NH({button:()=>ve(()=>import("./index-Bs8l5Zqk.js"),__vite__mapDeps([403,404,405,406,407,408,409,410,411,412,413,414,415,416])),icon:()=>ve(()=>import("./index-BJTDFJxj.js").then(e=>e.i),__vite__mapDeps([408,409,410]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:n}=this.viewModel,{messages:r}=this;return Sl("div",{class:this.classes(Jie.base,Md.widget)},Sl("calcite-button",{class:Md.widgetButton,disabled:n==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},Sl("div",{"aria-hidden":"true",class:Jie.iconContainer,title:r.reset},Sl("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};x([E()],Lf.prototype,"goToOverride",null),x([E()],Lf.prototype,"icon",null),x([E()],Lf.prototype,"label",null),x([E(),OL("esri/widgets/Compass/t9n/Compass")],Lf.prototype,"messages",void 0),x([E()],Lf.prototype,"view",null),x([E({type:Yxe})],Lf.prototype,"viewModel",void 0),Lf=x([ue("esri.widgets.Compass")],Lf);const Iit=Lf,Qie="esri-navigation-toggle",ese={base:Qie,isLayoutHorizontal:`${Qie}--horizontal`};let Ex=class extends Kt{constructor(t){super(t),this._navigationMode="pan",this.view=null,t?.isDefaultViewModel||g$e(kt.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(t={}){const{isDefaultViewModel:e,...n}=t;return n}initialize(){this.addHandles(Ec(()=>this.view?.navigation?.actionMap,()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){const t=this.view?.navigation?.actionMap;if(!t)return;const e=this._navigationMode==="pan";t.dragPrimary=e?"pan":"rotate",t.dragSecondary=e?"rotate":"pan"}};x([E({readOnly:!0})],Ex.prototype,"state",null),x([E()],Ex.prototype,"_navigationMode",void 0),x([E()],Ex.prototype,"view",void 0),Ex=x([ue("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Ex);const Xxe=Ex;let Df=class extends NL{constructor(e,n){super(e,n),this.messages=null,this.viewModel=new Xxe({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const r=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;Gnt(r),this.toggle()},e?.isDefaultUI||m$e(kt.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:n,...r}=e;return r}loadDependencies(){return NH({button:()=>ve(()=>import("./index-Bs8l5Zqk.js"),__vite__mapDeps([403,404,405,406,407,408,409,410,411,412,413,414,415,416]))})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.viewModel?.state==="disabled",n=this.viewModel?.navigationMode==="pan",r=this.messages.toggle;return Sl("div",{class:this.classes(ese.base,Md.widget,{[ese.isLayoutHorizontal]:this.layout==="horizontal"})},Sl("calcite-button",{afterCreate:i=>{this._panButton=i},appearance:n?"outline-fill":"solid",class:Md.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:n?void 0:-1,title:r}),Sl("calcite-button",{afterCreate:i=>{this._rotateButton=i},appearance:n?"solid":"outline-fill",class:Md.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:n?-1:void 0,title:r}))}};x([E()],Df.prototype,"icon",null),x([E()],Df.prototype,"label",null),x([E({value:"vertical"})],Df.prototype,"layout",null),x([E(),OL("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Df.prototype,"messages",void 0),x([E()],Df.prototype,"view",null),x([E({type:Xxe})],Df.prototype,"viewModel",void 0),Df=x([ue("esri.widgets.NavigationToggle")],Df);const Pit=Df;let Ty=class extends Kt{get canZoomIn(){if(!this.view?.ready)return!1;const n=this.view?.constraints?.effectiveMaxScale;return n===0||this._scale>n}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const r=e.constraints?.effectiveMinScale;return r===0||this._scale<r}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};x([E({readOnly:!0})],Ty.prototype,"canZoomIn",null),x([E({readOnly:!0})],Ty.prototype,"canZoomOut",null),x([E()],Ty.prototype,"view",void 0),x([E()],Ty.prototype,"_scale",null),Ty=x([ue("esri.widgets.Zoom.ZoomConditions2D")],Ty);const Cit=Ty;let Sx=class extends Kt{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};x([E({readOnly:!0})],Sx.prototype,"canZoomIn",null),x([E({readOnly:!0})],Sx.prototype,"canZoomOut",null),x([E()],Sx.prototype,"view",void 0),Sx=x([ue("esri.widgets.Zoom.ZoomConditions3D")],Sx);const Rit=Sx;let Fm=class extends Kt{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Cit({view:e}):e.type==="3d"&&(this._zoomConditions=new Rit({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():K4(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():K4(e.goTo({zoomFactor:.5})))}};x([E()],Fm.prototype,"_zoomConditions",void 0),x([E()],Fm.prototype,"canZoomIn",null),x([E()],Fm.prototype,"canZoomOut",null),x([E({readOnly:!0})],Fm.prototype,"state",null),x([E()],Fm.prototype,"view",null),Fm=x([ue("esri.widgets.Zoom.ZoomViewModel")],Fm);const Zxe=Fm,tse={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let jf=class extends NL{constructor(e,n){super(e,n),this.messages=null,this.viewModel=new Zxe,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return NH({button:()=>ve(()=>import("./index-Bs8l5Zqk.js"),__vite__mapDeps([403,404,405,406,407,408,409,410,411,412,413,414,415,416]))})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[tse.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:n,canZoomOut:r}=this.viewModel,{zoomIn:i,zoomOut:s}=this.messages;return Sl("div",{class:this.classes(tse.base,Md.widget,e)},Sl("calcite-button",{class:Md.widgetButton,disabled:!n,iconStart:"plus",kind:"neutral",label:i,onclick:this.zoomIn,title:i}),Sl("calcite-button",{class:Md.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};x([E()],jf.prototype,"icon",null),x([E()],jf.prototype,"label",null),x([E({value:"vertical"})],jf.prototype,"layout",null),x([E(),OL("esri/widgets/Zoom/t9n/Zoom")],jf.prototype,"messages",void 0),x([E()],jf.prototype,"view",null),x([E({type:Zxe})],jf.prototype,"viewModel",void 0),jf=x([ue("esri.widgets.Zoom")],jf);const Mit=jf;function Nit(t){return t?.view!==void 0}let P3=class extends Wnt{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=e=>{this.components.forEach(n=>{const r=this._find(n),i=r?.widget;Nit(i)&&(i.view=e)})},this._componentsWatcher=(e,n)=>{this._removeComponents(n),this._addComponents(e),this._adjustPadding(e)}}initialize(){this.addHandles([mn(()=>this.components,this._componentsWatcher,_a),mn(()=>this.view,this._updateViewAwareWidgets,_a)])}_add(t,e,n,r,i){let s=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;s=this._createComponent(t)}super._add(s,e,n,r,i)}_removeComponents(t){t.forEach(e=>{const n=this._find(e);n&&(this.remove(n),n.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:e}=this.padding;this.padding=e}}_addComponents(t){this.constructed&&t.forEach(e=>this.add(this._createComponent(e),this._defaultPositionLookup[e]))}_createComponent(t){const e=this._createWidget(t);return new k3({id:t,node:e})}_createWidget(t){const e=this.view;switch(t){case"attribution":return new Eit({view:e});case"compass":return new Iit({view:e});case"navigation-toggle":return new Pit({view:e,isDefaultUI:!0});case"zoom":return new Mit({view:e})}}};x([E()],P3.prototype,"components",void 0),P3=x([ue("esri.views.ui.DefaultUI")],P3);const Jxe=P3;let C3=class extends Jxe{constructor(e){super(e),this.components=["attribution","zoom"]}};x([E()],C3.prototype,"components",void 0),C3=x([ue("esri.views.ui.2d.DefaultUI2D")],C3);const Qxe=C3;let Oit=class{constructor(t={},e={},n=8,r=1/0){this.disabledExtensions=t,this.debugWebGLExtensions=e,this.maxAnisotropy=n,this.maxPreferredTexturePixels=r}},Lit=class Sz{constructor(e,n,r=""){this.major=e,this.minor=n,this._context=r}lessThan(e,n){return this.major<e||e===this.major&&this.minor<n}greaterEqual(e,n){return!this.lessThan(e,n)}validate(e){if(this.major!==e.major){const n=this._context&&this._context+":",r=this._context&&this._context+" ";throw new Xe(n+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new Sz(this.major,this.minor,this._context)}static parse(e,n=""){const[r,i]=e.split("."),s=/^\s*\d+\s*$/;if(!r?.match||!s.test(r))throw new Xe((n&&n+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!i?.match||!s.test(i))throw new Xe((n&&n+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(i,10);return new Sz(o,a,n)}};class Dit extends Lit{constructor(e,n){super(e,n,"webmap")}}function Q$(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}new Dit(2,35);var Tz;let R3=Tz=class extends qt{constructor(t){super(t),this.color=new Jn([0,0,0,1])}clone(){return new Tz(Ze({color:this.color}))}};x([E({type:Jn,json:{write:!0}})],R3.prototype,"color",void 0),R3=Tz=x([ue("esri.webmap.background.ColorBackground")],R3);const jit=R3;let ewe,twe,nwe,rwe,iwe,swe,owe;async function $it(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:n,MapViewNavigation:r,MagnifierView2D:i,GridView2D:s,Stage:o}]=await Promise.all([ve(()=>import("./webglDeps-C48zTcMT.js"),__vite__mapDeps([299,224,300,301,302,28,96])),ve(()=>import("./mapViewDeps-HlEDu9W8.js"),__vite__mapDeps([303,175,55,56,140,141,131,66,28,142,133,134,139,143,127,144,89,304,305,224,300,301,215,128,306,135,302,96,223,95,307,126,163,308,251,194,197,68,69,33,136,148,309,145,146,310,85,80,129,78,79,311,53,299,312,158,313,314,193,315,213,214,316,113,125,130,132,124,73,72,317,147,318,138,47,48,49,319,149,154,122,320,321,322,323,220,254,324,325]))]);twe=t,nwe=e,rwe=n,iwe=r,swe=i,owe=s,ewe=o}var t2;let Gn=(t2=class extends bet(JJe(THe(Xqe(Oqe(bZe))))){get timeZone(){return super.timeZone}set timeZone(e){super.timeZone=e}constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new th({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new EL({actionMap:new dH({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.analyses=new B2,this.analysisViewManager=new _nt({importAnalysisViewModule:n=>dtt(n),view:this}),this.floors=new Ot,this.grid=null,this.map=null,this.timeline=new _xe,this.type="2d",this.view2dType=null,this.ui=new Qxe,this.animationsEnabled=!0,this.test={takeScreenshot:async n=>pnt(this._getScreenshotView(n),n)},this.padding={top:0,right:0,bottom:0,left:0},bHe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Di(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new btt(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,n=this.spatialReference;return{lods:e?.spatialReference?.equals(n)?e.lods:null,spatialReference:n}}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:n,center:r,viewpoint:i,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!s&&(n?.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&(i?.targetGeometry==null||i.targetGeometry.type!=="extent"&&!i.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const n=e.targetGeometry,r=this.spatialReference;return kye(n.spatialReference,r)}get background(){return Q$(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return super.constraints}set constraints(e){super.constraints=e}get highlightOptions(){return Jtt(this)}set highlightOptions(e){Qtt(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return super.resizeAlign}set resizeAlign(e){super.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return super.rotation}set rotation(e){super.rotation=e}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get spatialReference(){return super.spatialReference}set spatialReference(e){super.spatialReference=e}get spatialReferenceLocked(){return this._get("spatialReferenceLocked")}set spatialReferenceLocked(e){this.stage&&kt.getLogger(this).warn("spatialReferenceLocked cannot be changed after the view has become ready"),this._set("spatialReferenceLocked",e)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),n=!this.destroyed&&(!this.analysisViewManager||!this.layerViewManager||!this.labelManager||!this.graphicsView||this.analysisViewManager.updating===!0||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(r=>!r.destroyed&&!("layerViews"in r)&&r.updating===!0)||e);if(_e("esri-2d-log-updating")){const r=this.allLayerViews.reduce((i,s)=>({...i,[`${s.layer.id}(${s.layer.type})`]:!s.destroyed&&!("layerViews"in s)&&s.updating}),{});console.log(`Updating MapView: ${n}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(r)}
-> updatingMagnifier: ${e}
`)}return n}get viewpoint(){return super.viewpoint}set viewpoint(e){super.viewpoint=e}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new bi({rings:[e.map(n=>[n[0],n[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(e,n){return ent(this,e,n)}async takeScreenshot(e){return fnt(this._getScreenshotView(e),e)}toScreen(e,n){return this.stateManager.toScreen(e,n)}async whenAnalysisView(e){if(e.parent==null)throw new Xe("view:no-analysisview-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return this.analysisViewManager.whenAnalysisView(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return Q$(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return Q$(this.map)?this.map.initialViewProperties.timeExtent:null}getSurface(){return this.surface}hasLayerViewModule(e){return hie.hasLayerViewModule(e)}importLayerView(e){return hie.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(kt.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const n=this.toMap(e),r=await this.hitTest(e),i=this.allLayerViews.toArray().filter(c=>c.clips.every(u=>lxe(this,u,e,n))).reverse(),s=new globalThis.Map(i.map(c=>[c.layer.uid,c])),o=[];let a=0,l=0;for(;a<r.results.length||l<i.length;){const c=r.results.at(a);if(c&&c.type!=="graphic"){++a;continue}const u=s.get((c?.layer??c?.graphic.layer)?.uid);if((!c||u)&&l<i.length&&i.at(l)!==u){const h=i.at(l);"fetchPopupFeaturesAtLocation"in h&&o.push({mapPoint:n,layerView:h}),++l}else c&&(o.push({graphic:c.graphic,layerView:u}),++a)}return{hits:o,location:n}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=knt(this.type);if(_e("safari")&&_e("safari")<9&&(e=new Xe("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:_e("safari")})),e!=null)throw kt.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return $it()}_getDefaultViewpoint(){const{constraints:e,initialExtent:n,map:r,padding:i,size:s}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o?.viewpoint,c=l?.targetGeometry?.extent??n,u=c?.center,h=l?.rotation??0,f=l?.scale||c&&TL(c,[s[0]-i.left-i.right,s[1]-i.top-i.bottom]),g=a.center??u,y=a.rotation??h,_=a.scale??f;return g&&_?new fu({targetGeometry:g,scale:_,rotation:y}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const n=new ftt(this.surface),r=new ewe(this.surface,{canvas:this.renderCanvas,contextOptions:new Oit(this.deactivatedWebGLExtensions,this.debugWebGLExtensions),renderingOptions:this.renderingOptions,timeline:this.timeline},n);this.stage=r,this._magnifierView=new swe,this._magnifierView.magnifier=this.magnifier,this._gridView=new owe;const i=new rwe({view:this});this._set("labelManager",i);const s=new ttt({view:this});this._set("animationManager",s);const o=new iwe({view:this,animationManager:s});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",l=>this.fatalError=l.error),mn(()=>this.stationary,l=>r.stationary=l,sa),mn(()=>this.background,l=>{r.backgroundColor=l?.color,this._magnifierView.backgroundColor=l?.color},sa),mn(()=>this.magnifier,l=>this._magnifierView.magnifier=l,sa),mn(()=>this.grid,l=>this._gridView.grid=l,sa),mn(()=>this.renderingOptions,l=>r.renderingOptions=l,sa),mn(()=>this.highlights.items.map(l=>({name:l.name,options:{fillColor:l.color,haloColor:l.haloColor,fillOpacity:l.fillOpacity,haloOpacity:l.haloOpacity,haloWidth:l.haloWidth,haloBlur:l.haloBlur}})),()=>{r.highlightGradient=Xtt(r.highlightGradient,this.highlights.items)},sa),mn(()=>this.state.id,()=>r.state=this.state,sa),mn(()=>this.animationsEnabled,l=>{this.stage.animationsEnabled=l},sa)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(l=>l(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(n=>{this.stage.addChild(n.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new att(ka.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const n=new twe({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new nwe(e)});this._set("graphicsView",n)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:n,padding:r,size:i,stage:s}=this;return{allLayerViews:n,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:r,size:i,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const n of this.allLayerViews)n.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const n of this.allLayerViews)n.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},t2.type="2d",t2);x([E({constructOnly:!0})],Gn.prototype,"deactivatedWebGLExtensions",void 0),x([E({constructOnly:!0})],Gn.prototype,"debugWebGLExtensions",void 0),x([E({readOnly:!0})],Gn.prototype,"featuresTilingScheme",void 0),x([E({readOnly:!0})],Gn.prototype,"graphicsTileStore",null),x([E()],Gn.prototype,"graphicsView",void 0),x([E()],Gn.prototype,"constraintsInfo",null),x([E()],Gn.prototype,"initialExtentRequired",null),x([E()],Gn.prototype,"labelManager",void 0),x([E({type:EL,nonNullable:!0})],Gn.prototype,"navigation",void 0),x([E({constructOnly:!0})],Gn.prototype,"renderCanvas",void 0),x([E()],Gn.prototype,"renderingOptions",void 0),x([E({constructOnly:!0})],Gn.prototype,"supersampleScreenshotsEnabled",void 0),x([E()],Gn.prototype,"defaultsFromMapSettings",null),x([E({readOnly:!0})],Gn.prototype,"typeSpecificPreconditionsReady",null),x([E(k7(B2,"analyses"))],Gn.prototype,"analyses",void 0),x([E()],Gn.prototype,"analysisViewManager",void 0),x([E({type:jit})],Gn.prototype,"background",null),x([E()],Gn.prototype,"center",null),x([E({type:Ot})],Gn.prototype,"floors",void 0),x([E()],Gn.prototype,"grid",void 0),x([E({type:Ng})],Gn.prototype,"highlightOptions",null),x([E()],Gn.prototype,"map",void 0),x([E()],Gn.prototype,"padding",null),x([E({readOnly:!0})],Gn.prototype,"rendering",null),x([E({readOnly:!0})],Gn.prototype,"resolution",null),x([E()],Gn.prototype,"scale",null),x([E({type:Boolean,value:!1})],Gn.prototype,"spatialReferenceLocked",null),x([E({readOnly:!0})],Gn.prototype,"tileInfo",null),x([E({type:_xe,readOnly:!0})],Gn.prototype,"timeline",void 0),x([E({readOnly:!0})],Gn.prototype,"type",void 0),x([E({readOnly:!0})],Gn.prototype,"updating",null),x([E({readOnly:!0})],Gn.prototype,"view2dType",void 0),x([E({readOnly:!0})],Gn.prototype,"visibleArea",null),x([E()],Gn.prototype,"zoom",null),x([E({readOnly:!0})],Gn.prototype,"navigating",null),x([E(),Ks(t=>t instanceof Jxe?t:KO(Qxe,t))],Gn.prototype,"ui",void 0),x([E()],Gn.prototype,"animationsEnabled",void 0),Gn=x([ue("esri.views.View2D")],Gn);const Fit=Gn;let M3=class extends Fit{constructor(t){super(t),this.view2dType="map"}};x([E({readOnly:!0})],M3.prototype,"view2dType",void 0),M3=x([ue("esri.views.MapView")],M3);const Vit=M3,nse=["CartoDB (licht)","OpenStreetMap","Luchtfoto","Satelliet (wereld)","TMK 1850","Bonnebladen 1900"];function zit(){const t=Y.useRef(null),e=Y.useRef(null),n=Y.useRef(!1),r=Y.useRef(!1),[i,s]=Y.useState(!1);R6e({target:"map"});const o=li(T=>T.map),a=li(T=>T.setArcGISMap),l=Ws(T=>T.registerLayer),c=Ws(T=>T.setLayerVisibility),u=an(T=>T.defaultBackground);Y.useEffect(()=>{if(!o){console.warn(" Map not initialized yet");return}console.log(" Initializing map layers...");const T=new $f({properties:{title:"OpenStreetMap",type:"base"},visible:!1,source:new vRe}),A=new $f({properties:{title:"CartoDB (licht)",type:"base"},visible:!0,source:new Gm({url:"https://{a-d}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO"})}),I=new $f({properties:{title:"Luchtfoto",type:"base"},visible:!1,source:new Gm({url:"https://service.pdok.nl/hwh/luchtfotorgb/wmts/v1_0/Actueel_orthoHR/EPSG:3857/{z}/{x}/{y}.jpeg",attributions:" Kadaster / PDOK Luchtfoto",maxZoom:19})}),P=new $f({properties:{title:"Satelliet (wereld)",type:"base"},visible:!1,source:new Gm({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attributions:" Esri, Maxar, Earthstar Geographics",maxZoom:19,crossOrigin:"anonymous"})}),M=new $f({properties:{title:"Labels Overlay",type:"overlay"},visible:!1,source:new Gm({url:"https://{a-d}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO",maxZoom:20}),zIndex:100}),V=new $f({properties:{title:"TMK 1850",type:"base"},visible:!1,source:new Gm({url:"https://s.map5.nl/map/gast/tiles/tmk_1850/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})}),C=new $f({properties:{title:"Bonnebladen 1900",type:"base"},visible:!1,source:new Gm({url:"https://s.map5.nl/map/gast/tiles/bonne_1900/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})});o.addLayer(T),o.addLayer(A),o.addLayer(I),o.addLayer(P),o.addLayer(M),o.addLayer(V),o.addLayer(C),console.log(" Base layers added:",{osm:T.getVisible(),cartodb:A.getVisible(),satellite:I.getVisible(),worldSatellite:P.getVisible()}),l("OpenStreetMap",T),l("CartoDB (licht)",A),l("Luchtfoto",I),l("Satelliet (wereld)",P),l("Labels Overlay",M),l("TMK 1850",V),l("Bonnebladen 1900",C),o.updateSize(),console.log(" Map size:",o.getSize()),console.log(" Map center:",o.getView().getCenter()),console.log(" Map zoom:",o.getView().getZoom()),h()},[o,l]);async function h(){if(!o){console.error(" Cannot load layers: map is null");return}const T=kMe();console.log(` Loading ${T.length} immediate-load layers (WMS/Tile)...`);const A=await Promise.allSettled(T.map(async P=>{try{const M=await P.factory();return M?{name:P.name,layer:M}:null}catch(M){return console.warn(` Failed to create ${P.name}:`,M),null}}));let I=0;A.forEach(P=>{if(P.status==="fulfilled"&&P.value){const{name:M,layer:V}=P.value;o.addLayer(V),l(M,V),I++,console.log(`   ${M}`)}}),console.log(` Immediate layers loaded: ${I}/${T.length}`),console.log(` Total layers on map: ${o.getLayers().getLength()}`),console.log(" Vector layers will load on first toggle (lazy loading enabled)")}Y.useEffect(()=>{if(!o||!e.current||r.current)return;console.log(" Initializing ArcGIS MapView for AHN layers...");const T=o.getView(),A=T.getCenter(),I=T.getZoom()||8,P=A?Fn(A):[5.5,52],M=new Hye({}),V=new Vit({container:e.current,map:M,center:P,zoom:I,constraints:{rotationEnabled:!1},ui:{components:[]},background:{color:[0,0,0,0]}});return V.when(()=>{console.log(" ArcGIS MapView ready"),console.log(" ArcGIS center:",V.center?.longitude,V.center?.latitude),console.log(" ArcGIS zoom:",V.zoom),a(M,V),s(!0),r.current=!0,T.on("change:center",()=>{const C=T.getCenter();if(C){const N=Fn(C);V.goTo({center:N},{animate:!1})}}),T.on("change:resolution",()=>{const C=T.getZoom();C!==void 0&&V.goTo({zoom:C},{animate:!1})})}).catch(C=>{console.error(" ArcGIS MapView initialization failed:",C),console.error("Error details:",C.message)}),()=>{V&&V.destroy()}},[o,a]),Y.useEffect(()=>{if(!o||n.current)return;const T=setTimeout(()=>{const A=u||"CartoDB (licht)";nse.forEach(I=>{c(I,!1)}),nse.includes(A)?c(A,!0):c("CartoDB (licht)",!0),n.current=!0,console.log(` Default background: ${A}`)},100);return()=>clearTimeout(T)},[o,u,c]);const f=an(T=>T.gpsAutoStart),g=Ps(T=>T.startTracking),y=Y.useRef(!1);Y.useEffect(()=>{if(!(!o||y.current)&&f){const T=setTimeout(()=>{g(),y.current=!0,console.log(" GPS autostart enabled - tracking started")},500);return()=>clearTimeout(T)}},[o,f,g]);const _={width:"100%",height:"100vh"},b={opacity:i?1:0,transition:"opacity 0.3s ease"};return p.jsxs("div",{style:{position:"relative",width:"100%",height:"100vh"},children:[p.jsx("div",{id:"map",ref:t,style:_}),p.jsx("div",{id:"arcgis-map",ref:e,style:b})]})}const OH=Y.createContext({});function LH(t){const e=Y.useRef(null);return e.current===null&&(e.current=t()),e.current}const LL=Y.createContext(null),DH=Y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Git extends Y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Uit({children:t,isPresent:e}){const n=Y.useId(),r=Y.useRef(null),i=Y.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=Y.useContext(DH);return Y.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),p.jsx(Git,{isPresent:e,childRef:r,sizeRef:i,children:Y.cloneElement(t,{ref:r})})}const Bit=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=LH(Wit),l=Y.useId(),c=Y.useCallback(h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},[a,r]),u=Y.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:h=>(a.set(h,!1),()=>a.delete(h))}),s?[Math.random(),c]:[n,c]);return Y.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),Y.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=p.jsx(Uit,{isPresent:n,children:t})),p.jsx(LL.Provider,{value:u,children:t})};function Wit(){return new Map}function awe(t=!0){const e=Y.useContext(LL);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=Y.useId();Y.useEffect(()=>{t&&i(s)},[t]);const o=Y.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const RR=t=>t.key||"";function rse(t){const e=[];return Y.Children.forEach(t,n=>{Y.isValidElement(n)&&e.push(n)}),e}const jH=typeof window<"u",lwe=jH?Y.useLayoutEffect:Y.useEffect,Wn=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=awe(o),c=Y.useMemo(()=>rse(t),[t]),u=o&&!a?[]:c.map(RR),h=Y.useRef(!0),f=Y.useRef(c),g=LH(()=>new Map),[y,_]=Y.useState(c),[b,T]=Y.useState(c);lwe(()=>{h.current=!1,f.current=c;for(let P=0;P<b.length;P++){const M=RR(b[P]);u.includes(M)?g.delete(M):g.get(M)!==!0&&g.set(M,!1)}},[b,u.length,u.join("-")]);const A=[];if(c!==y){let P=[...c];for(let M=0;M<b.length;M++){const V=b[M],C=RR(V);u.includes(C)||(P.splice(M,0,V),A.push(V))}s==="wait"&&A.length&&(P=A),T(rse(P)),_(c);return}const{forceRender:I}=Y.useContext(OH);return p.jsx(p.Fragment,{children:b.map(P=>{const M=RR(P),V=o&&!a?!1:c===b||u.includes(M),C=()=>{if(g.has(M))g.set(M,!0);else return;let N=!0;g.forEach(O=>{O||(N=!1)}),N&&(I?.(),T(f.current),o&&l?.(),r&&r())};return p.jsx(Bit,{isPresent:V,initial:!h.current||n?void 0:!1,custom:V?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:V?void 0:C,children:P},M)})})},vc=t=>t;let cwe=vc;function $H(t){let e;return()=>(e===void 0&&(e=t()),e)}const Y2=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},pp=t=>t*1e3,mp=t=>t/1e3,Hit={useManualTiming:!1};function qit(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,h=!1)=>{const g=h&&r?e:n;return u&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const MR=["read","resolveKeyframes","update","preRender","render","postRender"],Kit=40;function uwe(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=MR.reduce((T,A)=>(T[A]=qit(s),T),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:f}=o,g=()=>{const T=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,Kit),1),i.timestamp=T,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),h.process(i),f.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(g))},y=()=>{n=!0,r=!0,i.isProcessing||t(g)};return{schedule:MR.reduce((T,A)=>{const I=o[A];return T[A]=(P,M=!1,V=!1)=>(n||y(),I.schedule(P,M,V)),T},{}),cancel:T=>{for(let A=0;A<MR.length;A++)o[MR[A]].cancel(T)},state:i,steps:o}}const{schedule:yi,cancel:t0,state:Co,steps:eF}=uwe(typeof requestAnimationFrame<"u"?requestAnimationFrame:vc,!0),hwe=Y.createContext({strict:!1}),ise={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},X2={};for(const t in ise)X2[t]={isEnabled:e=>ise[t].some(n=>!!e[n])};function Yit(t){for(const e in t)X2[e]={...X2[e],...t[e]}}const Xit=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qN(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Xit.has(t)}let dwe=t=>!qN(t);function Zit(t){t&&(dwe=e=>e.startsWith("on")?!qN(e):t(e))}try{Zit(require("@emotion/is-prop-valid").default)}catch{}function Jit(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(dwe(i)||n===!0&&qN(i)||!e&&!qN(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Qit(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const DL=Y.createContext({});function AA(t){return typeof t=="string"||Array.isArray(t)}function jL(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const FH=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],VH=["initial",...FH];function $L(t){return jL(t.animate)||VH.some(e=>AA(t[e]))}function fwe(t){return!!($L(t)||t.variants)}function est(t,e){if($L(t)){const{initial:n,animate:r}=t;return{initial:n===!1||AA(n)?n:void 0,animate:AA(r)?r:void 0}}return t.inherit!==!1?e:{}}function tst(t){const{initial:e,animate:n}=est(t,Y.useContext(DL));return Y.useMemo(()=>({initial:e,animate:n}),[sse(e),sse(n)])}function sse(t){return Array.isArray(t)?t.join(" "):t}const nst=Symbol.for("motionComponentSymbol");function Gx(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function rst(t,e,n){return Y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Gx(n)&&(n.current=r))},[e])}const zH=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ist="framerAppearId",pwe="data-"+zH(ist),{schedule:GH}=uwe(queueMicrotask,!1),mwe=Y.createContext({});function sst(t,e,n,r,i){var s,o;const{visualElement:a}=Y.useContext(DL),l=Y.useContext(hwe),c=Y.useContext(LL),u=Y.useContext(DH).reducedMotion,h=Y.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,g=Y.useContext(mwe);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&ost(h.current,n,i,g);const y=Y.useRef(!1);Y.useInsertionEffect(()=>{f&&y.current&&f.update(n,c)});const _=n[pwe],b=Y.useRef(!!_&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,_))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,_)));return lwe(()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),GH.render(f.render),b.current&&f.animationState&&f.animationState.animateChanges())}),Y.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)===null||T===void 0||T.call(window,_)}),b.current=!1))}),f}function ost(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:gwe(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Gx(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function gwe(t){if(t)return t.options.allowProjection!==!1?t.projection:gwe(t.parent)}function ast({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&Yit(t);function a(c,u){let h;const f={...Y.useContext(DH),...c,layoutId:lst(c)},{isStatic:g}=f,y=tst(c),_=r(c,g);if(!g&&jH){cst();const b=ust(f);h=b.MeasureLayout,y.visualElement=sst(i,_,f,e,b.ProjectionNode)}return p.jsxs(DL.Provider,{value:y,children:[h&&y.visualElement?p.jsx(h,{visualElement:y.visualElement,...f}):null,n(i,c,rst(_,y.visualElement,u),_,g,y.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=Y.forwardRef(a);return l[nst]=i,l}function lst({layoutId:t}){const e=Y.useContext(OH).id;return e&&t!==void 0?e+"-"+t:t}function cst(t,e){Y.useContext(hwe).strict}function ust(t){const{drag:e,layout:n}=X2;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const hst=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function UH(t){return typeof t!="string"||t.includes("-")?!1:!!(hst.indexOf(t)>-1||/[A-Z]/u.test(t))}function ose(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function BH(t,e,n,r){if(typeof e=="function"){const[i,s]=ose(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=ose(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const kz=t=>Array.isArray(t),dst=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),fst=t=>kz(t)?t[t.length-1]||0:t,ma=t=>!!(t&&t.getVelocity);function N3(t){const e=ma(t)?t.get():t;return dst(e)?e.toValue():e}function pst({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:mst(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const ywe=t=>(e,n)=>{const r=Y.useContext(DL),i=Y.useContext(LL),s=()=>pst(t,e,r,i);return n?s():LH(s)};function mst(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=N3(s[f]);let{initial:o,animate:a}=t;const l=$L(t),c=fwe(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!jL(h)){const f=Array.isArray(h)?h:[h];for(let g=0;g<f.length;g++){const y=BH(t,f[g]);if(y){const{transitionEnd:_,transition:b,...T}=y;for(const A in T){let I=T[A];if(Array.isArray(I)){const P=u?I.length-1:0;I=I[P]}I!==null&&(i[A]=I)}for(const A in _)i[A]=_[A]}}}return i}const Lb=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kv=new Set(Lb),vwe=t=>e=>typeof e=="string"&&e.startsWith(t),_we=vwe("--"),gst=vwe("var(--"),WH=t=>gst(t)?yst.test(t.split("/*")[0].trim()):!1,yst=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,xwe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ap=(t,e,n)=>n>e?e:n<t?t:n,Db={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},IA={...Db,transform:t=>Ap(0,1,t)},NR={...Db,default:1},QI=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Vm=QI("deg"),Nd=QI("%"),vn=QI("px"),vst=QI("vh"),_st=QI("vw"),ase={...Nd,parse:t=>Nd.parse(t)/100,transform:t=>Nd.transform(t*100)},xst={borderWidth:vn,borderTopWidth:vn,borderRightWidth:vn,borderBottomWidth:vn,borderLeftWidth:vn,borderRadius:vn,radius:vn,borderTopLeftRadius:vn,borderTopRightRadius:vn,borderBottomRightRadius:vn,borderBottomLeftRadius:vn,width:vn,maxWidth:vn,height:vn,maxHeight:vn,top:vn,right:vn,bottom:vn,left:vn,padding:vn,paddingTop:vn,paddingRight:vn,paddingBottom:vn,paddingLeft:vn,margin:vn,marginTop:vn,marginRight:vn,marginBottom:vn,marginLeft:vn,backgroundPositionX:vn,backgroundPositionY:vn},wst={rotate:Vm,rotateX:Vm,rotateY:Vm,rotateZ:Vm,scale:NR,scaleX:NR,scaleY:NR,scaleZ:NR,skew:Vm,skewX:Vm,skewY:Vm,distance:vn,translateX:vn,translateY:vn,translateZ:vn,x:vn,y:vn,z:vn,perspective:vn,transformPerspective:vn,opacity:IA,originX:ase,originY:ase,originZ:vn},lse={...Db,transform:Math.round},HH={...xst,...wst,zIndex:lse,size:vn,fillOpacity:IA,strokeOpacity:IA,numOctaves:lse},bst={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Est=Lb.length;function Sst(t,e,n){let r="",i=!0;for(let s=0;s<Est;s++){const o=Lb[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=xwe(a,HH[o]);if(!l){i=!1;const u=bst[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function qH(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(kv.has(l)){o=!0;continue}else if(_we(l)){i[l]=c;continue}else{const u=xwe(c,HH[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=Sst(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const Tst={offset:"stroke-dashoffset",array:"stroke-dasharray"},kst={offset:"strokeDashoffset",array:"strokeDasharray"};function Ast(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Tst:kst;t[s.offset]=vn.transform(-r);const o=vn.transform(e),a=vn.transform(n);t[s.array]=`${o} ${a}`}function cse(t,e,n){return typeof t=="string"?t:vn.transform(e+n*t)}function Ist(t,e,n){const r=cse(e,t.x,t.width),i=cse(n,t.y,t.height);return`${r} ${i}`}function KH(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(qH(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:g,dimensions:y}=t;f.transform&&(y&&(g.transform=f.transform),delete f.transform),y&&(i!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=Ist(y,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&Ast(f,o,a,l,!1)}const YH=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),wwe=()=>({...YH(),attrs:{}}),XH=t=>typeof t=="string"&&t.toLowerCase()==="svg";function bwe(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const Ewe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Swe(t,e,n,r){bwe(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Ewe.has(i)?i:zH(i),e.attrs[i])}const KN={};function Pst(t){Object.assign(KN,t)}function Twe(t,{layout:e,layoutId:n}){return kv.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!KN[t]||t==="opacity")}function ZH(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(ma(i[o])||e.style&&ma(e.style[o])||Twe(o,t)||((r=n?.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function kwe(t,e,n){const r=ZH(t,e,n);for(const i in t)if(ma(t[i])||ma(e[i])){const s=Lb.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function Cst(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const use=["x","y","width","height","cx","cy","r"],Rst={useVisualState:ywe({scrapeMotionValuesFromProps:kwe,createRenderState:wwe,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(kv.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<use.length;a++){const l=use[a];t[l]!==e[l]&&(o=!0)}o&&yi.read(()=>{Cst(n,r),yi.render(()=>{KH(r,i,XH(n.tagName),t.transformTemplate),Swe(n,r)})})}})},Mst={useVisualState:ywe({scrapeMotionValuesFromProps:ZH,createRenderState:YH})};function Awe(t,e,n){for(const r in e)!ma(e[r])&&!Twe(r,n)&&(t[r]=e[r])}function Nst({transformTemplate:t},e){return Y.useMemo(()=>{const n=YH();return qH(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Ost(t,e){const n=t.style||{},r={};return Awe(r,n,t),Object.assign(r,Nst(t,e)),r}function Lst(t,e){const n={},r=Ost(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function Dst(t,e,n,r){const i=Y.useMemo(()=>{const s=wwe();return KH(s,e,XH(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Awe(s,t.style,t),i.style={...s,...i.style}}return i}function jst(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(UH(n)?Dst:Lst)(r,s,o,n),c=Jit(r,typeof n=="string",t),u=n!==Y.Fragment?{...c,...l,ref:i}:{},{children:h}=r,f=Y.useMemo(()=>ma(h)?h.get():h,[h]);return Y.createElement(n,{...u,children:f})}}function $st(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...UH(r)?Rst:Mst,preloadedFeatures:t,useRender:jst(i),createVisualElement:e,Component:r};return ast(o)}}function Iwe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function FL(t,e,n){const r=t.getProps();return BH(r,e,n!==void 0?n:r.custom,t)}const Fst=$H(()=>window.ScrollTimeline!==void 0);class Vst{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(Fst()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class zst extends Vst{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function JH(t,e){return t?t[e]||t.default||t:void 0}const Az=2e4;function Pwe(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Az;)e+=n,r=t.next(e);return e>=Az?1/0:e}function QH(t){return typeof t=="function"}function hse(t,e){t.timeline=e,t.onfinish=null}const eq=t=>Array.isArray(t)&&typeof t[0]=="number",Gst={linearEasing:void 0};function Ust(t,e){const n=$H(t);return()=>{var r;return(r=Gst[e])!==null&&r!==void 0?r:n()}}const YN=Ust(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Cwe=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Y2(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function Rwe(t){return!!(typeof t=="function"&&YN()||!t||typeof t=="string"&&(t in Iz||YN())||eq(t)||Array.isArray(t)&&t.every(Rwe))}const nT=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Iz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nT([0,.65,.55,1]),circOut:nT([.55,0,1,.45]),backIn:nT([.31,.01,.66,-.59]),backOut:nT([.33,1.53,.69,.99])};function Mwe(t,e){if(t)return typeof t=="function"&&YN()?Cwe(t,e):eq(t)?nT(t):Array.isArray(t)?t.map(n=>Mwe(n,e)||Iz.easeOut):Iz[t]}const Ku={x:!1,y:!1};function Nwe(){return Ku.x||Ku.y}function Bst(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function Owe(t,e){const n=Bst(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function dse(t){return e=>{e.pointerType==="touch"||Nwe()||t(e)}}function Wst(t,e,n={}){const[r,i,s]=Owe(t,n),o=dse(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=dse(h=>{c(h),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const Lwe=(t,e)=>e?t===e?!0:Lwe(t,e.parentElement):!1,tq=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Hst=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qst(t){return Hst.has(t.tagName)||t.tabIndex!==-1}const rT=new WeakSet;function fse(t){return e=>{e.key==="Enter"&&t(e)}}function tF(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Kst=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=fse(()=>{if(rT.has(n))return;tF(n,"down");const i=fse(()=>{tF(n,"up")}),s=()=>tF(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function pse(t){return tq(t)&&!Nwe()}function Yst(t,e,n={}){const[r,i,s]=Owe(t,n),o=a=>{const l=a.currentTarget;if(!pse(a)||rT.has(l))return;rT.add(l);const c=e(a),u=(g,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!pse(g)||!rT.has(l))&&(rT.delete(l),typeof c=="function"&&c(g,{success:y}))},h=g=>{u(g,n.useGlobalTarget||Lwe(l,g.target))},f=g=>{u(g,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{!qst(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>Kst(c,i),i)}),s}function Xst(t){return t==="x"||t==="y"?Ku[t]?null:(Ku[t]=!0,()=>{Ku[t]=!1}):Ku.x||Ku.y?null:(Ku.x=Ku.y=!0,()=>{Ku.x=Ku.y=!1})}const Dwe=new Set(["width","height","top","left","right","bottom",...Lb]);let O3;function Zst(){O3=void 0}const Od={now:()=>(O3===void 0&&Od.set(Co.isProcessing||Hit.useManualTiming?Co.timestamp:performance.now()),O3),set:t=>{O3=t,queueMicrotask(Zst)}};function nq(t,e){t.indexOf(e)===-1&&t.push(e)}function rq(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class iq{constructor(){this.subscriptions=[]}add(e){return nq(this.subscriptions,e),()=>rq(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function jwe(t,e){return e?t*(1e3/e):0}const mse=30,Jst=t=>!isNaN(parseFloat(t));class Qst{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Od.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Od.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Jst(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new iq);const r=this.events[e].add(n);return e==="change"?()=>{r(),yi.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Od.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>mse)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,mse);return jwe(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function PA(t,e){return new Qst(t,e)}function eot(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,PA(n))}function tot(t,e){const n=FL(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=fst(s[o]);eot(t,o,a)}}function not(t){return!!(ma(t)&&t.add)}function Pz(t,e){const n=t.getValue("willChange");if(not(n))return n.add(e)}function $we(t){return t.props[pwe]}const Fwe=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,rot=1e-7,iot=12;function sot(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=Fwe(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>rot&&++a<iot);return o}function eP(t,e,n,r){if(t===e&&n===r)return vc;const i=s=>sot(s,0,1,t,n);return s=>s===0||s===1?s:Fwe(i(s),e,r)}const Vwe=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,zwe=t=>e=>1-t(1-e),Gwe=eP(.33,1.53,.69,.99),sq=zwe(Gwe),Uwe=Vwe(sq),Bwe=t=>(t*=2)<1?.5*sq(t):.5*(2-Math.pow(2,-10*(t-1))),oq=t=>1-Math.sin(Math.acos(t)),Wwe=zwe(oq),Hwe=Vwe(oq),qwe=t=>/^0[^.\s]+$/u.test(t);function oot(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||qwe(t):!0}const JT=t=>Math.round(t*1e5)/1e5,aq=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function aot(t){return t==null}const lot=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lq=(t,e)=>n=>!!(typeof n=="string"&&lot.test(n)&&n.startsWith(t)||e&&!aot(n)&&Object.prototype.hasOwnProperty.call(n,e)),Kwe=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(aq);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},cot=t=>Ap(0,255,t),nF={...Db,transform:t=>Math.round(cot(t))},Qy={test:lq("rgb","red"),parse:Kwe("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+nF.transform(t)+", "+nF.transform(e)+", "+nF.transform(n)+", "+JT(IA.transform(r))+")"};function uot(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Cz={test:lq("#"),parse:uot,transform:Qy.transform},Ux={test:lq("hsl","hue"),parse:Kwe("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Nd.transform(JT(e))+", "+Nd.transform(JT(n))+", "+JT(IA.transform(r))+")"},ta={test:t=>Qy.test(t)||Cz.test(t)||Ux.test(t),parse:t=>Qy.test(t)?Qy.parse(t):Ux.test(t)?Ux.parse(t):Cz.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Qy.transform(t):Ux.transform(t)},hot=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function dot(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(aq))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(hot))===null||n===void 0?void 0:n.length)||0)>0}const Ywe="number",Xwe="color",fot="var",pot="var(",gse="${}",mot=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function CA(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(mot,l=>(ta.test(l)?(r.color.push(s),i.push(Xwe),n.push(ta.parse(l))):l.startsWith(pot)?(r.var.push(s),i.push(fot),n.push(l)):(r.number.push(s),i.push(Ywe),n.push(parseFloat(l))),++s,gse)).split(gse);return{values:n,split:a,indexes:r,types:i}}function Zwe(t){return CA(t).values}function Jwe(t){const{split:e,types:n}=CA(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===Ywe?s+=JT(i[o]):a===Xwe?s+=ta.transform(i[o]):s+=i[o]}return s}}const got=t=>typeof t=="number"?0:t;function yot(t){const e=Zwe(t);return Jwe(t)(e.map(got))}const n0={test:dot,parse:Zwe,createTransformer:Jwe,getAnimatableNone:yot},vot=new Set(["brightness","contrast","saturate","opacity"]);function _ot(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(aq)||[];if(!r)return t;const i=n.replace(r,"");let s=vot.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const xot=/\b([a-z-]*)\(.*?\)/gu,Rz={...n0,getAnimatableNone:t=>{const e=t.match(xot);return e?e.map(_ot).join(" "):t}},wot={...HH,color:ta,backgroundColor:ta,outlineColor:ta,fill:ta,stroke:ta,borderColor:ta,borderTopColor:ta,borderRightColor:ta,borderBottomColor:ta,borderLeftColor:ta,filter:Rz,WebkitFilter:Rz},cq=t=>wot[t];function Qwe(t,e){let n=cq(t);return n!==Rz&&(n=n0),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const bot=new Set(["auto","none","0"]);function Eot(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!bot.has(s)&&CA(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=Qwe(n,i)}const yse=t=>t===Db||t===vn,vse=(t,e)=>parseFloat(t.split(", ")[e]),_se=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return vse(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?vse(s[1],t):0}},Sot=new Set(["x","y","z"]),Tot=Lb.filter(t=>!Sot.has(t));function kot(t){const e=[];return Tot.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Z2={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:_se(4,13),y:_se(5,14)};Z2.translateX=Z2.x;Z2.translateY=Z2.y;const y1=new Set;let Mz=!1,Nz=!1;function e2e(){if(Nz){const t=Array.from(y1).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=kot(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Nz=!1,Mz=!1,y1.forEach(t=>t.complete()),y1.clear()}function t2e(){y1.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Nz=!0)})}function Aot(){t2e(),e2e()}class uq{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(y1.add(this),Mz||(Mz=!0,yi.read(t2e),yi.resolveKeyframes(e2e))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),y1.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,y1.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const n2e=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Iot=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Pot(t){const e=Iot.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function r2e(t,e,n=1){const[r,i]=Pot(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return n2e(o)?parseFloat(o):o}return WH(i)?r2e(i,e,n+1):i}const i2e=t=>e=>e.test(t),Cot={test:t=>t==="auto",parse:t=>t},s2e=[Db,vn,Nd,Vm,_st,vst,Cot],xse=t=>s2e.find(i2e(t));class o2e extends uq{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),WH(c))){const u=r2e(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Dwe.has(r)||e.length!==2)return;const[i,s]=e,o=xse(i),a=xse(s);if(o!==a)if(yse(o)&&yse(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)oot(e[i])&&r.push(i);r.length&&Eot(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Z2[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Z2[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const wse=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(n0.test(t)||t==="0")&&!t.startsWith("url("));function Rot(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Mot(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=wse(i,e),a=wse(s,e);return!o||!a?!1:Rot(t)||(n==="spring"||QH(n))&&r}const Not=t=>t!==null;function VL(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Not),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const Oot=40;class a2e{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Od.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Oot?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Aot(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Od.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!Mot(e,r,i,s))if(o)this.options.duration=0;else{l&&l(VL(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Fi=(t,e,n)=>t+(e-t)*n;function rF(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Lot({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=rF(l,a,t+1/3),s=rF(l,a,t),o=rF(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function XN(t,e){return n=>n>0?e:t}const iF=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Dot=[Cz,Qy,Ux],jot=t=>Dot.find(e=>e.test(t));function bse(t){const e=jot(t);if(!e)return!1;let n=e.parse(t);return e===Ux&&(n=Lot(n)),n}const Ese=(t,e)=>{const n=bse(t),r=bse(e);if(!n||!r)return XN(t,e);const i={...n};return s=>(i.red=iF(n.red,r.red,s),i.green=iF(n.green,r.green,s),i.blue=iF(n.blue,r.blue,s),i.alpha=Fi(n.alpha,r.alpha,s),Qy.transform(i))},$ot=(t,e)=>n=>e(t(n)),tP=(...t)=>t.reduce($ot),Oz=new Set(["none","hidden"]);function Fot(t,e){return Oz.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Vot(t,e){return n=>Fi(t,e,n)}function hq(t){return typeof t=="number"?Vot:typeof t=="string"?WH(t)?XN:ta.test(t)?Ese:Uot:Array.isArray(t)?l2e:typeof t=="object"?ta.test(t)?Ese:zot:XN}function l2e(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>hq(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function zot(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=hq(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Got(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const Uot=(t,e)=>{const n=n0.createTransformer(e),r=CA(t),i=CA(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Oz.has(t)&&!i.values.length||Oz.has(e)&&!r.values.length?Fot(t,e):tP(l2e(Got(r,i),i.values),n):XN(t,e)};function c2e(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Fi(t,e,n):hq(t)(t,e)}const Bot=5;function u2e(t,e,n){const r=Math.max(e-Bot,0);return jwe(n-t(r),e-r)}const Xi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},sF=.001;function Wot({duration:t=Xi.duration,bounce:e=Xi.bounce,velocity:n=Xi.velocity,mass:r=Xi.mass}){let i,s,o=1-e;o=Ap(Xi.minDamping,Xi.maxDamping,o),t=Ap(Xi.minDuration,Xi.maxDuration,mp(t)),o<1?(i=c=>{const u=c*o,h=u*t,f=u-n,g=Lz(c,o),y=Math.exp(-h);return sF-f/g*y},s=c=>{const h=c*o*t,f=h*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-h),_=Lz(Math.pow(c,2),o);return(-i(c)+sF>0?-1:1)*((f-g)*y)/_}):(i=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-sF+u*h},s=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=qot(i,s,a);if(t=pp(t),isNaN(l))return{stiffness:Xi.stiffness,damping:Xi.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const Hot=12;function qot(t,e,n){let r=n;for(let i=1;i<Hot;i++)r=r-t(r)/e(r);return r}function Lz(t,e){return t*Math.sqrt(1-e*e)}const Kot=["duration","bounce"],Yot=["stiffness","damping","mass"];function Sse(t,e){return e.some(n=>t[n]!==void 0)}function Xot(t){let e={velocity:Xi.velocity,stiffness:Xi.stiffness,damping:Xi.damping,mass:Xi.mass,isResolvedFromDuration:!1,...t};if(!Sse(t,Yot)&&Sse(t,Kot))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Ap(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Xi.mass,stiffness:i,damping:s}}else{const n=Wot(t);e={...e,...n,mass:Xi.mass},e.isResolvedFromDuration=!0}return e}function h2e(t=Xi.visualDuration,e=Xi.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:g}=Xot({...n,velocity:-mp(n.velocity||0)}),y=f||0,_=c/(2*Math.sqrt(l*u)),b=o-s,T=mp(Math.sqrt(l/u)),A=Math.abs(b)<5;r||(r=A?Xi.restSpeed.granular:Xi.restSpeed.default),i||(i=A?Xi.restDelta.granular:Xi.restDelta.default);let I;if(_<1){const M=Lz(T,_);I=V=>{const C=Math.exp(-_*T*V);return o-C*((y+_*T*b)/M*Math.sin(M*V)+b*Math.cos(M*V))}}else if(_===1)I=M=>o-Math.exp(-T*M)*(b+(y+T*b)*M);else{const M=T*Math.sqrt(_*_-1);I=V=>{const C=Math.exp(-_*T*V),N=Math.min(M*V,300);return o-C*((y+_*T*b)*Math.sinh(N)+M*b*Math.cosh(N))/M}}const P={calculatedDuration:g&&h||null,next:M=>{const V=I(M);if(g)a.done=M>=h;else{let C=0;_<1&&(C=M===0?pp(y):u2e(I,M,V));const N=Math.abs(C)<=r,O=Math.abs(o-V)<=i;a.done=N&&O}return a.value=a.done?o:V,a},toString:()=>{const M=Math.min(Pwe(P),Az),V=Cwe(C=>P.next(M*C).value,M,30);return M+"ms "+V}};return P}function Tse({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},g=N=>a!==void 0&&N<a||l!==void 0&&N>l,y=N=>a===void 0?l:l===void 0||Math.abs(a-N)<Math.abs(l-N)?a:l;let _=n*e;const b=h+_,T=o===void 0?b:o(b);T!==b&&(_=T-h);const A=N=>-_*Math.exp(-N/r),I=N=>T+A(N),P=N=>{const O=A(N),L=I(N);f.done=Math.abs(O)<=c,f.value=f.done?T:L};let M,V;const C=N=>{g(f.value)&&(M=N,V=h2e({keyframes:[f.value,y(f.value)],velocity:u2e(I,N,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return C(0),{calculatedDuration:null,next:N=>{let O=!1;return!V&&M===void 0&&(O=!0,P(N),C(N)),M!==void 0&&N>=M?V.next(N-M):(!O&&P(N),f)}}}const Zot=eP(.42,0,1,1),Jot=eP(0,0,.58,1),d2e=eP(.42,0,.58,1),Qot=t=>Array.isArray(t)&&typeof t[0]!="number",eat={linear:vc,easeIn:Zot,easeInOut:d2e,easeOut:Jot,circIn:oq,circInOut:Hwe,circOut:Wwe,backIn:sq,backInOut:Uwe,backOut:Gwe,anticipate:Bwe},kse=t=>{if(eq(t)){cwe(t.length===4);const[e,n,r,i]=t;return eP(e,n,r,i)}else if(typeof t=="string")return eat[t];return t};function tat(t,e,n){const r=[],i=n||c2e,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||vc:e;a=tP(l,a)}r.push(a)}return r}function nat(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(cwe(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=tat(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=Y2(t[h],t[h+1],u);return a[h](f)};return n?u=>c(Ap(t[0],t[s-1],u)):c}function rat(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Y2(0,e,r);t.push(Fi(n,1,i))}}function iat(t){const e=[0];return rat(e,t.length-1),e}function sat(t,e){return t.map(n=>n*e)}function oat(t,e){return t.map(()=>e||d2e).splice(0,t.length-1)}function ZN({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Qot(r)?r.map(kse):kse(r),s={done:!1,value:e[0]},o=sat(n&&n.length===e.length?n:iat(e),t),a=nat(o,e,{ease:Array.isArray(i)?i:oat(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const aat=t=>{const e=({timestamp:n})=>t(n);return{start:()=>yi.update(e,!0),stop:()=>t0(e),now:()=>Co.isProcessing?Co.timestamp:Od.now()}},lat={decay:Tse,inertia:Tse,tween:ZN,keyframes:ZN,spring:h2e},cat=t=>t/100;class dq extends a2e{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=i?.KeyframeResolver||uq,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=QH(n)?n:lat[n]||ZN;let l,c;a!==ZN&&typeof e[0]!="number"&&(l=tP(cat,c2e(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Pwe(u));const{calculatedDuration:h}=u,f=h+i,g=f*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:f,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:g,repeatType:y,repeatDelay:_,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const T=this.currentTime-f*(this.speed>=0?1:-1),A=this.speed>=0?T<0:T>u;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let I=this.currentTime,P=s;if(g){const N=Math.min(this.currentTime,u)/h;let O=Math.floor(N),L=N%1;!L&&N>=1&&(L=1),L===1&&O--,O=Math.min(O,g+1),O%2&&(y==="reverse"?(L=1-L,_&&(L-=_/h)):y==="mirror"&&(P=o)),I=Ap(0,1,L)*h}const M=A?{done:!1,value:l[0]}:P.next(I);a&&(M.value=a(M.value));let{done:V}=M;!A&&c!==null&&(V=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return C&&i!==void 0&&(M.value=VL(l,this.options,i)),b&&b(M.value),C&&this.finish(),M}get duration(){const{resolved:e}=this;return e?mp(e.calculatedDuration):0}get time(){return mp(this.currentTime)}set time(e){e=pp(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=mp(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=aat,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const uat=new Set(["opacity","clipPath","filter","transform"]);function hat(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=Mwe(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const dat=$H(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),JN=10,fat=2e4;function pat(t){return QH(t.type)||t.type==="spring"||!Rwe(t.ease)}function mat(t,e){const n=new dq({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<fat;)r=n.sample(s),i.push(r.value),s+=JN;return{times:void 0,keyframes:i,duration:s-JN,ease:"linear"}}const f2e={anticipate:Bwe,backInOut:Uwe,circInOut:Hwe};function gat(t){return t in f2e}class Ase extends a2e{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new o2e(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&YN()&&gat(s)&&(s=f2e[s]),pat(this.options)){const{onComplete:h,onUpdate:f,motionValue:g,element:y,..._}=this.options,b=mat(e,_);e=b.keyframes,e.length===1&&(e[1]=e[0]),r=b.duration,i=b.times,s=b.ease,o="keyframes"}const u=hat(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(hse(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;a.set(VL(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return mp(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return mp(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=pp(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return vc;const{animation:r}=n;hse(r,e)}return vc}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:h,element:f,...g}=this.options,y=new dq({...g,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),_=pp(this.time);c.setWithVelocity(y.sample(_-JN).value,y.sample(_).value,JN)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return dat()&&r&&uat.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const yat={type:"spring",stiffness:500,damping:25,restSpeed:10},vat=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),_at={type:"keyframes",duration:.8},xat={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wat=(t,{keyframes:e})=>e.length>2?_at:kv.has(t)?t.startsWith("scale")?vat(e[1]):yat:xat;function bat({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const fq=(t,e,n,r={},i,s)=>o=>{const a=JH(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-pp(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};bat(a)||(u={...u,...wat(t,u)}),u.duration&&(u.duration=pp(u.duration)),u.repeatDelay&&(u.repeatDelay=pp(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!s&&e.get()!==void 0){const f=VL(u.keyframes,a);if(f!==void 0)return yi.update(()=>{u.onUpdate(f),u.onComplete()}),new zst([])}return!s&&Ase.supports(u)?new Ase(u):new dq(u)};function Eat({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function p2e(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const f=t.getValue(h,(s=t.latestValues[h])!==null&&s!==void 0?s:null),g=l[h];if(g===void 0||u&&Eat(u,h))continue;const y={delay:n,...JH(o||{},h)};let _=!1;if(window.MotionHandoffAnimation){const T=$we(t);if(T){const A=window.MotionHandoffAnimation(T,h,yi);A!==null&&(y.startTime=A,_=!0)}}Pz(t,h),f.start(fq(h,f,g,t.shouldReduceMotion&&Dwe.has(h)?{type:!1}:y,t,_));const b=f.animation;b&&c.push(b)}return a&&Promise.all(c).then(()=>{yi.update(()=>{a&&tot(t,a)})}),c}function Dz(t,e,n={}){var r;const i=FL(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(p2e(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=s;return Sat(t,e,u+c,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function Sat(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(Tat).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(Dz(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Tat(t,e){return t.sortNodePosition(e)}function kat(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Dz(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Dz(t,e,n);else{const i=typeof e=="function"?FL(t,e,n.custom):e;r=Promise.all(p2e(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Aat=VH.length;function m2e(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?m2e(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Aat;n++){const r=VH[n],i=t.props[r];(AA(i)||i===!1)&&(e[r]=i)}return e}const Iat=[...FH].reverse(),Pat=FH.length;function Cat(t){return e=>Promise.all(e.map(({animation:n,options:r})=>kat(t,n,r)))}function Rat(t){let e=Cat(t),n=Ise(),r=!0;const i=l=>(c,u)=>{var h;const f=FL(t,u,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:g,transitionEnd:y,..._}=f;c={...c,..._,...y}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=m2e(t.parent)||{},h=[],f=new Set;let g={},y=1/0;for(let b=0;b<Pat;b++){const T=Iat[b],A=n[T],I=c[T]!==void 0?c[T]:u[T],P=AA(I),M=T===l?A.isActive:null;M===!1&&(y=b);let V=I===u[T]&&I!==c[T]&&P;if(V&&r&&t.manuallyAnimateOnMount&&(V=!1),A.protectedKeys={...g},!A.isActive&&M===null||!I&&!A.prevProp||jL(I)||typeof I=="boolean")continue;const C=Mat(A.prevProp,I);let N=C||T===l&&A.isActive&&!V&&P||b>y&&P,O=!1;const L=Array.isArray(I)?I:[I];let F=L.reduce(i(T),{});M===!1&&(F={});const{prevResolvedValues:G={}}=A,U={...G,...F},he=Oe=>{N=!0,f.has(Oe)&&(O=!0,f.delete(Oe)),A.needsAnimating[Oe]=!0;const fe=t.getValue(Oe);fe&&(fe.liveStyle=!1)};for(const Oe in U){const fe=F[Oe],ge=G[Oe];if(g.hasOwnProperty(Oe))continue;let Se=!1;kz(fe)&&kz(ge)?Se=!Iwe(fe,ge):Se=fe!==ge,Se?fe!=null?he(Oe):f.add(Oe):fe!==void 0&&f.has(Oe)?he(Oe):A.protectedKeys[Oe]=!0}A.prevProp=I,A.prevResolvedValues=F,A.isActive&&(g={...g,...F}),r&&t.blockInitialAnimation&&(N=!1),N&&(!(V&&C)||O)&&h.push(...L.map(Oe=>({animation:Oe,options:{type:T}})))}if(f.size){const b={};f.forEach(T=>{const A=t.getBaseTarget(T),I=t.getValue(T);I&&(I.liveStyle=!0),b[T]=A??null}),h.push({animation:b})}let _=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(h):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var g;return(g=f.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Ise(),r=!0}}}function Mat(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Iwe(e,t):!1}function ey(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ise(){return{animate:ey(!0),whileInView:ey(),whileHover:ey(),whileTap:ey(),whileDrag:ey(),whileFocus:ey(),exit:ey()}}class v0{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Nat extends v0{constructor(e){super(e),e.animationState||(e.animationState=Rat(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();jL(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Oat=0;class Lat extends v0{constructor(){super(...arguments),this.id=Oat++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Dat={animation:{Feature:Nat},exit:{Feature:Lat}};function RA(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function nP(t){return{point:{x:t.pageX,y:t.pageY}}}const jat=t=>e=>tq(e)&&t(e,nP(e));function QT(t,e,n,r){return RA(t,e,jat(n),r)}const Pse=(t,e)=>Math.abs(t-e);function $at(t,e){const n=Pse(t.x,e.x),r=Pse(t.y,e.y);return Math.sqrt(n**2+r**2)}class g2e{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=aF(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=$at(h.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:y}=h,{timestamp:_}=Co;this.history.push({...y,timestamp:_});const{onStart:b,onMove:T}=this.handlers;f||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=oF(f,this.transformPagePoint),yi.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=aF(h.type==="pointercancel"?this.lastMoveEventInfo:oF(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,b),y&&y(h,b)},!tq(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=nP(e),a=oF(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Co;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,aF(a,this.history)),this.removeListeners=tP(QT(this.contextWindow,"pointermove",this.handlePointerMove),QT(this.contextWindow,"pointerup",this.handlePointerUp),QT(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),t0(this.updatePoint)}}function oF(t,e){return e?{point:e(t.point)}:t}function Cse(t,e){return{x:t.x-e.x,y:t.y-e.y}}function aF({point:t},e){return{point:t,delta:Cse(t,y2e(e)),offset:Cse(t,Fat(e)),velocity:Vat(e,.1)}}function Fat(t){return t[0]}function y2e(t){return t[t.length-1]}function Vat(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=y2e(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>pp(e)));)n--;if(!r)return{x:0,y:0};const s=mp(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const v2e=1e-4,zat=1-v2e,Gat=1+v2e,_2e=.01,Uat=0-_2e,Bat=0+_2e;function Sc(t){return t.max-t.min}function Wat(t,e,n){return Math.abs(t-e)<=n}function Rse(t,e,n,r=.5){t.origin=r,t.originPoint=Fi(e.min,e.max,t.origin),t.scale=Sc(n)/Sc(e),t.translate=Fi(n.min,n.max,t.origin)-t.originPoint,(t.scale>=zat&&t.scale<=Gat||isNaN(t.scale))&&(t.scale=1),(t.translate>=Uat&&t.translate<=Bat||isNaN(t.translate))&&(t.translate=0)}function ek(t,e,n,r){Rse(t.x,e.x,n.x,r?r.originX:void 0),Rse(t.y,e.y,n.y,r?r.originY:void 0)}function Mse(t,e,n){t.min=n.min+e.min,t.max=t.min+Sc(e)}function Hat(t,e,n){Mse(t.x,e.x,n.x),Mse(t.y,e.y,n.y)}function Nse(t,e,n){t.min=e.min-n.min,t.max=t.min+Sc(e)}function tk(t,e,n){Nse(t.x,e.x,n.x),Nse(t.y,e.y,n.y)}function qat(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Fi(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Fi(n,t,r.max):Math.min(t,n)),t}function Ose(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Kat(t,{top:e,left:n,bottom:r,right:i}){return{x:Ose(t.x,n,i),y:Ose(t.y,e,r)}}function Lse(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Yat(t,e){return{x:Lse(t.x,e.x),y:Lse(t.y,e.y)}}function Xat(t,e){let n=.5;const r=Sc(t),i=Sc(e);return i>r?n=Y2(e.min,e.max-r,t.min):r>i&&(n=Y2(t.min,t.max-i,e.min)),Ap(0,1,n)}function Zat(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const jz=.35;function Jat(t=jz){return t===!1?t=0:t===!0&&(t=jz),{x:Dse(t,"left","right"),y:Dse(t,"top","bottom")}}function Dse(t,e,n){return{min:jse(t,e),max:jse(t,n)}}function jse(t,e){return typeof t=="number"?t:t[e]||0}const $se=()=>({translate:0,scale:1,origin:0,originPoint:0}),Bx=()=>({x:$se(),y:$se()}),Fse=()=>({min:0,max:0}),ls=()=>({x:Fse(),y:Fse()});function qc(t){return[t("x"),t("y")]}function x2e({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Qat({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function elt(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function lF(t){return t===void 0||t===1}function $z({scale:t,scaleX:e,scaleY:n}){return!lF(t)||!lF(e)||!lF(n)}function ky(t){return $z(t)||w2e(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function w2e(t){return Vse(t.x)||Vse(t.y)}function Vse(t){return t&&t!=="0%"}function QN(t,e,n){const r=t-n,i=e*r;return n+i}function zse(t,e,n,r,i){return i!==void 0&&(t=QN(t,i,r)),QN(t,n,r)+e}function Fz(t,e=0,n=1,r,i){t.min=zse(t.min,e,n,r,i),t.max=zse(t.max,e,n,r,i)}function b2e(t,{x:e,y:n}){Fz(t.x,e.translate,e.scale,e.originPoint),Fz(t.y,n.translate,n.scale,n.originPoint)}const Gse=.999999999999,Use=1.0000000000001;function tlt(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Hx(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,b2e(t,o)),r&&ky(s.latestValues)&&Hx(t,s.latestValues))}e.x<Use&&e.x>Gse&&(e.x=1),e.y<Use&&e.y>Gse&&(e.y=1)}function Wx(t,e){t.min=t.min+e,t.max=t.max+e}function Bse(t,e,n,r,i=.5){const s=Fi(t.min,t.max,i);Fz(t,e,n,s,r)}function Hx(t,e){Bse(t.x,e.x,e.scaleX,e.scale,e.originX),Bse(t.y,e.y,e.scaleY,e.scale,e.originY)}function E2e(t,e){return x2e(elt(t.getBoundingClientRect(),e))}function nlt(t,e,n){const r=E2e(t,n),{scroll:i}=e;return i&&(Wx(r.x,i.offset.x),Wx(r.y,i.offset.y)),r}const S2e=({current:t})=>t?t.ownerDocument.defaultView:null,rlt=new WeakMap;class ilt{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ls(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(nP(u).point)},s=(u,h)=>{const{drag:f,dragPropagation:g,onDragStart:y}=this.getProps();if(f&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Xst(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qc(b=>{let T=this.getAxisMotionValue(b).get()||0;if(Nd.test(T)){const{projection:A}=this.visualElement;if(A&&A.layout){const I=A.layout.layoutBox[b];I&&(T=Sc(I)*(parseFloat(T)/100))}}this.originPoint[b]=T}),y&&yi.postRender(()=>y(u,h)),Pz(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:y,onDrag:_}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:b}=h;if(g&&this.currentDirection===null){this.currentDirection=slt(b),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),_&&_(u,h)},a=(u,h)=>this.stop(u,h),l=()=>qc(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new g2e(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:S2e(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&yi.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!OR(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=qat(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Gx(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=Kat(i.layoutBox,n):this.constraints=!1,this.elastic=Jat(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&qc(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Zat(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Gx(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=nlt(r,i.root,this.visualElement.getTransformPagePoint());let o=Yat(i.layout.layoutBox,s);if(n){const a=n(Qat(o));this.hasMutatedConstraints=!!a,a&&(o=x2e(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=qc(u=>{if(!OR(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=i?200:1e6,g=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Pz(this.visualElement,e),r.start(fq(e,r,0,n,this.visualElement,!1))}stopAnimation(){qc(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){qc(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){qc(n=>{const{drag:r}=this.getProps();if(!OR(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Fi(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Gx(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};qc(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=Xat({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),qc(o=>{if(!OR(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Fi(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;rlt.set(this.visualElement,this);const e=this.visualElement.current,n=QT(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Gx(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),yi.read(r);const o=RA(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(qc(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=jz,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function OR(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function slt(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class olt extends v0{constructor(e){super(e),this.removeGroupControls=vc,this.removeListeners=vc,this.controls=new ilt(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vc}unmount(){this.removeGroupControls(),this.removeListeners()}}const Wse=t=>(e,n)=>{t&&yi.postRender(()=>t(e,n))};class alt extends v0{constructor(){super(...arguments),this.removePointerDownListener=vc}onPointerDown(e){this.session=new g2e(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:S2e(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Wse(e),onStart:Wse(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&yi.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=QT(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const L3={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Hse(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const uS={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(vn.test(t))t=parseFloat(t);else return t;const n=Hse(t,e.target.x),r=Hse(t,e.target.y);return`${n}% ${r}%`}},llt={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=n0.parse(t);if(i.length>5)return r;const s=n0.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Fi(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class clt extends Y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Pst(ult),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),L3.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||yi.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),GH.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function T2e(t){const[e,n]=awe(),r=Y.useContext(OH);return p.jsx(clt,{...t,layoutGroup:r,switchLayoutGroup:Y.useContext(mwe),isPresent:e,safeToRemove:n})}const ult={borderRadius:{...uS,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:uS,borderTopRightRadius:uS,borderBottomLeftRadius:uS,borderBottomRightRadius:uS,boxShadow:llt};function hlt(t,e,n){const r=ma(t)?t:PA(t);return r.start(fq("",r,e,n)),r.animation}function dlt(t){return t instanceof SVGElement&&t.tagName!=="svg"}const flt=(t,e)=>t.depth-e.depth;class plt{constructor(){this.children=[],this.isDirty=!1}add(e){nq(this.children,e),this.isDirty=!0}remove(e){rq(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(flt),this.isDirty=!1,this.children.forEach(e)}}function mlt(t,e){const n=Od.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(t0(r),t(s-e))};return yi.read(r,!0),()=>t0(r)}const k2e=["TopLeft","TopRight","BottomLeft","BottomRight"],glt=k2e.length,qse=t=>typeof t=="string"?parseFloat(t):t,Kse=t=>typeof t=="number"||vn.test(t);function ylt(t,e,n,r,i,s){i?(t.opacity=Fi(0,n.opacity!==void 0?n.opacity:1,vlt(r)),t.opacityExit=Fi(e.opacity!==void 0?e.opacity:1,0,_lt(r))):s&&(t.opacity=Fi(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<glt;o++){const a=`border${k2e[o]}Radius`;let l=Yse(e,a),c=Yse(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Kse(l)===Kse(c)?(t[a]=Math.max(Fi(qse(l),qse(c),r),0),(Nd.test(c)||Nd.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Fi(e.rotate||0,n.rotate||0,r))}function Yse(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const vlt=A2e(0,.5,Wwe),_lt=A2e(.5,.95,vc);function A2e(t,e,n){return r=>r<t?0:r>e?1:n(Y2(t,e,r))}function Xse(t,e){t.min=e.min,t.max=e.max}function Fc(t,e){Xse(t.x,e.x),Xse(t.y,e.y)}function Zse(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Jse(t,e,n,r,i){return t-=e,t=QN(t,1/n,r),i!==void 0&&(t=QN(t,1/i,r)),t}function xlt(t,e=0,n=1,r=.5,i,s=t,o=t){if(Nd.test(e)&&(e=parseFloat(e),e=Fi(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Fi(s.min,s.max,r);t===s&&(a-=e),t.min=Jse(t.min,e,n,a,i),t.max=Jse(t.max,e,n,a,i)}function Qse(t,e,[n,r,i],s,o){xlt(t,e[n],e[r],e[i],e.scale,s,o)}const wlt=["x","scaleX","originX"],blt=["y","scaleY","originY"];function eoe(t,e,n,r){Qse(t.x,e,wlt,n?n.x:void 0,r?r.x:void 0),Qse(t.y,e,blt,n?n.y:void 0,r?r.y:void 0)}function toe(t){return t.translate===0&&t.scale===1}function I2e(t){return toe(t.x)&&toe(t.y)}function noe(t,e){return t.min===e.min&&t.max===e.max}function Elt(t,e){return noe(t.x,e.x)&&noe(t.y,e.y)}function roe(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function P2e(t,e){return roe(t.x,e.x)&&roe(t.y,e.y)}function ioe(t){return Sc(t.x)/Sc(t.y)}function soe(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Slt{constructor(){this.members=[]}add(e){nq(this.members,e),e.scheduleRender()}remove(e){if(rq(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Tlt(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:f,skewX:g,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),g&&(r+=`skewX(${g}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Ay={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},iT=typeof window<"u"&&window.MotionDebug!==void 0,cF=["","X","Y","Z"],klt={visibility:"hidden"},ooe=1e3;let Alt=0;function uF(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function C2e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=$we(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",yi,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&C2e(r)}function R2e({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=Alt++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,iT&&(Ay.totalNodes=Ay.resolvedTargetDeltas=Ay.recalculatedProjection=0),this.nodes.forEach(Clt),this.nodes.forEach(Llt),this.nodes.forEach(Dlt),this.nodes.forEach(Rlt),iT&&window.MotionDebug.record(Ay)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new plt)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new iq),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=dlt(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=mlt(f,250),L3.hasAnimatedSinceResize&&(L3.hasAnimatedSinceResize=!1,this.nodes.forEach(loe))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||zlt,{onLayoutAnimationStart:b,onLayoutAnimationComplete:T}=u.getProps(),A=!this.targetLayout||!P2e(this.targetLayout,y)||g,I=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||I||f&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,I);const P={...JH(_,"layout"),onPlay:b,onComplete:T};(u.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else f||loe(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,t0(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(jlt),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&C2e(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aoe);return}this.isUpdating||this.nodes.forEach(Nlt),this.isUpdating=!1,this.nodes.forEach(Olt),this.nodes.forEach(Ilt),this.nodes.forEach(Plt),this.clearAllSnapshots();const a=Od.now();Co.delta=Ap(0,1e3/60,a-Co.timestamp),Co.timestamp=a,Co.isProcessing=!0,eF.update.process(Co),eF.preRender.process(Co),eF.render.process(Co),Co.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,GH.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Mlt),this.sharedNodes.forEach($lt)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ls(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!I2e(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||ky(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Glt(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return ls();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Ult))){const{scroll:u}=this.root;u&&(Wx(l.x,u.offset.x),Wx(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=ls();if(Fc(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Fc(l,o),Wx(l.x,h.offset.x),Wx(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=ls();Fc(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Hx(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),ky(u.latestValues)&&Hx(l,u.latestValues)}return ky(this.latestValues)&&Hx(l,this.latestValues),l}removeTransform(o){const a=ls();Fc(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ky(c.latestValues))continue;$z(c.latestValues)&&c.updateSnapshot();const u=ls(),h=c.measurePageBox();Fc(u,h),eoe(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return ky(this.latestValues)&&eoe(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Co.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Co.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ls(),this.relativeTargetOrigin=ls(),tk(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Fc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ls(),this.targetWithTransforms=ls()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Hat(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fc(this.target,this.layout.layoutBox),b2e(this.target,this.targetDelta)):Fc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ls(),this.relativeTargetOrigin=ls(),tk(this.relativeTargetOrigin,this.target,g.target),Fc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}iT&&Ay.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||$z(this.parent.latestValues)||w2e(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Co.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Fc(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;tlt(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ls());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Zse(this.prevProjectionDelta.x,this.projectionDelta.x),Zse(this.prevProjectionDelta.y,this.projectionDelta.y)),ek(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!soe(this.projectionDelta.x,this.prevProjectionDelta.x)||!soe(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),iT&&Ay.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Bx(),this.projectionDelta=Bx(),this.projectionDeltaWithTransform=Bx()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=Bx();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=ls(),g=l?l.source:void 0,y=this.layout?this.layout.source:void 0,_=g!==y,b=this.getStack(),T=!b||b.members.length<=1,A=!!(_&&!T&&this.options.crossfade===!0&&!this.path.some(Vlt));this.animationProgress=0;let I;this.mixTargetDelta=P=>{const M=P/1e3;coe(h.x,o.x,M),coe(h.y,o.y,M),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(tk(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Flt(this.relativeTarget,this.relativeTargetOrigin,f,M),I&&Elt(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=ls()),Fc(I,this.relativeTarget)),_&&(this.animationValues=u,ylt(u,c,this.latestValues,M,A,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(t0(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yi.update(()=>{L3.hasAnimatedSinceResize=!0,this.currentAnimation=hlt(0,ooe,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ooe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&M2e(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ls();const h=Sc(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=Sc(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Fc(a,l),Hx(a,u),ek(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Slt),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&uF("z",o,c,this.animationValues);for(let u=0;u<cF.length;u++)uF(`rotate${cF[u]}`,o,c,this.animationValues),uF(`skew${cF[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return klt;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=N3(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=N3(o?.pointerEvents)||""),this.hasProjected&&!ky(this.latestValues)&&(_.transform=u?u({},""):"none",this.hasProjected=!1),_}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=Tlt(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:g,y}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const _ in KN){if(f[_]===void 0)continue;const{correct:b,applyTo:T}=KN[_],A=c.transform==="none"?f[_]:b(f[_],h);if(T){const I=T.length;for(let P=0;P<I;P++)c[T[P]]=A}else c[_]=A}return this.options.layoutId&&(c.pointerEvents=h===this?N3(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(aoe),this.root.sharedNodes.clear()}}}function Ilt(t){t.updateLayout()}function Plt(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?qc(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],g=Sc(f);f.min=r[h].min,f.max=f.min+g}):M2e(s,n.layoutBox,r)&&qc(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],g=Sc(r[h]);f.max=f.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const a=Bx();ek(a,r,n.layoutBox);const l=Bx();o?ek(l,t.applyTransform(i,!0),n.measuredBox):ek(l,r,n.layoutBox);const c=!I2e(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:g}=h;if(f&&g){const y=ls();tk(y,n.layoutBox,f.layoutBox);const _=ls();tk(_,r,g.layoutBox),P2e(y,_)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function Clt(t){iT&&Ay.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Rlt(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Mlt(t){t.clearSnapshot()}function aoe(t){t.clearMeasurements()}function Nlt(t){t.isLayoutDirty=!1}function Olt(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function loe(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Llt(t){t.resolveTargetDelta()}function Dlt(t){t.calcProjection()}function jlt(t){t.resetSkewAndRotation()}function $lt(t){t.removeLeadSnapshot()}function coe(t,e,n){t.translate=Fi(e.translate,0,n),t.scale=Fi(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function uoe(t,e,n,r){t.min=Fi(e.min,n.min,r),t.max=Fi(e.max,n.max,r)}function Flt(t,e,n,r){uoe(t.x,e.x,n.x,r),uoe(t.y,e.y,n.y,r)}function Vlt(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const zlt={duration:.45,ease:[.4,0,.1,1]},hoe=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),doe=hoe("applewebkit/")&&!hoe("chrome/")?Math.round:vc;function foe(t){t.min=doe(t.min),t.max=doe(t.max)}function Glt(t){foe(t.x),foe(t.y)}function M2e(t,e,n){return t==="position"||t==="preserve-aspect"&&!Wat(ioe(e),ioe(n),.2)}function Ult(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Blt=R2e({attachResizeListener:(t,e)=>RA(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),hF={current:void 0},N2e=R2e({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!hF.current){const t=new Blt({});t.mount(window),t.setOptions({layoutScroll:!0}),hF.current=t}return hF.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Wlt={pan:{Feature:alt},drag:{Feature:olt,ProjectionNode:N2e,MeasureLayout:T2e}};function poe(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&yi.postRender(()=>s(e,nP(e)))}class Hlt extends v0{mount(){const{current:e}=this.node;e&&(this.unmount=Wst(e,n=>(poe(this.node,n,"Start"),r=>poe(this.node,r,"End"))))}unmount(){}}class qlt extends v0{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=tP(RA(this.node.current,"focus",()=>this.onFocus()),RA(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function moe(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&yi.postRender(()=>s(e,nP(e)))}class Klt extends v0{mount(){const{current:e}=this.node;e&&(this.unmount=Yst(e,n=>(moe(this.node,n,"Start"),(r,{success:i})=>moe(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Vz=new WeakMap,dF=new WeakMap,Ylt=t=>{const e=Vz.get(t.target);e&&e(t)},Xlt=t=>{t.forEach(Ylt)};function Zlt({root:t,...e}){const n=t||document;dF.has(n)||dF.set(n,{});const r=dF.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Xlt,{root:t,...e})),r[i]}function Jlt(t,e,n){const r=Zlt(e);return Vz.set(t,n),r.observe(t),()=>{Vz.delete(t),r.unobserve(t)}}const Qlt={some:0,all:1};class ect extends v0{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Qlt[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return Jlt(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(tct(e,n))&&this.startObserver()}unmount(){}}function tct({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const nct={inView:{Feature:ect},tap:{Feature:Klt},focus:{Feature:qlt},hover:{Feature:Hlt}},rct={layout:{ProjectionNode:N2e,MeasureLayout:T2e}},zz={current:null},O2e={current:!1};function ict(){if(O2e.current=!0,!!jH)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>zz.current=t.matches;t.addListener(e),e()}else zz.current=!1}const sct=[...s2e,ta,n0],oct=t=>sct.find(i2e(t)),goe=new WeakMap;function act(t,e,n){for(const r in e){const i=e[r],s=n[r];if(ma(i))t.addValue(r,i);else if(ma(s))t.addValue(r,PA(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,PA(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const yoe=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class lct{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=uq,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Od.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,yi.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=$L(n),this.isVariantNode=fwe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in f){const y=f[g];l[g]!==void 0&&ma(y)&&y.set(l[g],!1)}}mount(e){this.current=e,goe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),O2e.current||ict(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zz.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){goe.delete(this.current),this.projection&&this.projection.unmount(),t0(this.notifyUpdate),t0(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=kv.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&yi.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in X2){const n=X2[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ls()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<yoe.length;r++){const i=yoe[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=act(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=PA(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(n2e(i)||qwe(i))?i=parseFloat(i):!oct(i)&&n0.test(n)&&(i=Qwe(e,n)),this.setBaseTarget(e,ma(i)?i.get():i)),ma(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=BH(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!ma(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new iq),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class L2e extends lct{constructor(){super(...arguments),this.KeyframeResolver=o2e}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ma(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function cct(t){return window.getComputedStyle(t)}class uct extends L2e{constructor(){super(...arguments),this.type="html",this.renderInstance=bwe}readValueFromInstance(e,n){if(kv.has(n)){const r=cq(n);return r&&r.default||0}else{const r=cct(e),i=(_we(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return E2e(e,n)}build(e,n,r){qH(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return ZH(e,n,r)}}class hct extends L2e{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ls}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(kv.has(n)){const r=cq(n);return r&&r.default||0}return n=Ewe.has(n)?n:zH(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return kwe(e,n,r)}build(e,n,r){KH(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){Swe(e,n,r,i)}mount(e){this.isSVGTag=XH(e.tagName),super.mount(e)}}const dct=(t,e)=>UH(t)?new hct(e):new uct(e,{allowProjection:t!==Y.Fragment}),fct=$st({...Dat,...nct,...Wlt,...rct},dct),yt=Qit(fct);const pct=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mct=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),voe=t=>{const e=mct(t);return e.charAt(0).toUpperCase()+e.slice(1)},D2e=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),gct=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var yct={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vct=Y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>Y.createElement("svg",{ref:l,...yct,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:D2e("lucide",i),...!s&&!gct(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>Y.createElement(c,u)),...Array.isArray(s)?s:[s]]));const rt=(t,e)=>{const n=Y.forwardRef(({className:r,...i},s)=>Y.createElement(vct,{ref:s,iconNode:e,className:D2e(`lucide-${pct(voe(t))}`,`lucide-${t}`,r),...i}));return n.displayName=voe(t),n};const _ct=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],xct=rt("archive-restore",_ct);const wct=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],j2e=rt("archive",wct);const bct=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ect=rt("ban",bct);const Sct=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],$2e=rt("book-open",Sct);const Tct=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],kct=rt("bookmark",Tct);const Act=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],F2e=rt("bug",Act);const Ict=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],pq=rt("calendar",Ict);const Pct=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],zL=rt("camera",Pct);const Cct=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],V2e=rt("chart-column",Cct);const Rct=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ip=rt("check",Rct);const Mct=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],jb=rt("chevron-down",Mct);const Nct=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],z2e=rt("chevron-left",Nct);const Oct=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],nh=rt("chevron-right",Oct);const Lct=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],GL=rt("chevron-up",Lct);const Dct=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],G2e=rt("circle-alert",Dct);const jct=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$ct=rt("circle-check-big",jct);const Fct=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],e5=rt("clock",Fct);const Vct=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 17H7",key:"pygtm1"}],["path",{d:"M17 21H9",key:"1u2q02"}]],zct=rt("cloud-fog",Vct);const Gct=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],Uct=rt("cloud-lightning",Gct);const Bct=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],Wct=rt("cloud-off",Bct);const Hct=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],mq=rt("cloud-rain",Hct);const qct=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],Kct=rt("cloud-snow",qct);const Yct=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Th=rt("cloud",Yct);const Xct=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],Zct=rt("code",Xct);const Jct=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],gq=rt("compass",Jct);const Qct=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],t5=rt("crosshair",Qct);const eut=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],MA=rt("download",eut);const tut=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],nut=rt("droplets",tut);const rut=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Og=rt("external-link",rut);const iut=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],n5=rt("eye-off",iut);const sut=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],NA=rt("eye",sut);const out=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],_oe=rt("file-image",out);const aut=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],yq=rt("file-text",aut);const lut=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],cut=rt("flame",lut);const uut=[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]],xoe=rt("flower-2",uut);const hut=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],dut=rt("folder-open",hut);const fut=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],put=rt("folder-plus",fut);const mut=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],gut=rt("folder",mut);const yut=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],vq=rt("funnel",yut);const vut=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],_ut=rt("gauge",vut);const xut=[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]],wut=rt("gem",xut);const but=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Eut=rt("globe",but);const Sut=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],U2e=rt("grid-3x3",Sut);const Tut=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],B2e=rt("grip-horizontal",Tut);const kut=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],Aut=rt("image-plus",kut);const Iut=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],_q=rt("info",Iut);const Put=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],W2e=rt("landmark",Put);const Cut=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],_c=rt("layers",Cut);const Rut=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],H2e=rt("list",Rut);const Mut=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],rP=rt("loader-circle",Mut);const Nut=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Out=rt("locate-fixed",Nut);const Lut=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Gz=rt("lock",Lut);const Dut=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],xq=rt("log-out",Dut);const jut=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],jo=rt("map-pin",jut);const $ut=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],kw=rt("map",$ut);const Fut=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],r5=rt("menu",Fut);const Vut=[["path",{d:"M5 12h14",key:"1ays0h"}]],q2e=rt("minus",Vut);const zut=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],J2=rt("mountain",zut);const Gut=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Uut=rt("mouse-pointer",Gut);const But=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],Wut=rt("move",But);const Hut=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],rh=rt("navigation",Hut);const qut=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],K2e=rt("pause",qut);const Kut=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],woe=rt("pen-line",Kut);const Yut=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Xut=rt("pen",Yut);const Zut=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Wd=rt("pencil",Zut);const Jut=[["path",{d:"M10.83 2.38a2 2 0 0 1 2.34 0l8 5.74a2 2 0 0 1 .73 2.25l-3.04 9.26a2 2 0 0 1-1.9 1.37H7.04a2 2 0 0 1-1.9-1.37L2.1 10.37a2 2 0 0 1 .73-2.25z",key:"2hea0t"}]],Qut=rt("pentagon",Jut);const eht=[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["path",{d:"m9 20 3-6 3 6",key:"se2kox"}],["path",{d:"m6 8 6 2 6-2",key:"4o3us4"}],["path",{d:"M12 10v4",key:"1kjpxc"}]],Y2e=rt("person-standing",eht);const tht=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],X2e=rt("play",tht);const nht=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Tc=rt("plus",nht);const rht=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],OA=rt("printer",rht);const iht=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],sht=rt("refresh-cw",iht);const oht=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Z2e=rt("rotate-ccw",oht);const aht=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],lht=rt("rotate-cw",aht);const cht=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],i5=rt("route",cht);const uht=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],Ld=rt("ruler",uht);const hht=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],wq=rt("save",hht);const dht=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],fht=rt("scale",dht);const pht=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],nv=rt("search",pht);const mht=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],s5=rt("settings",mht);const ght=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],yht=rt("settings-2",ght);const vht=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],_ht=rt("share-2",vht);const xht=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],wht=rt("shield",xht);const bht=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],J2e=rt("sliders-horizontal",bht);const Eht=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],Sht=rt("sliders-vertical",Eht);const Tht=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],kht=rt("smartphone",Tht);const Aht=[["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M5 17A12 12 0 0 1 17 5",key:"1okkup"}]],Iht=rt("spline",Aht);const Pht=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Cht=rt("square",Pht);const Rht=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],boe=rt("star",Rht);const Mht=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Nht=rt("sun",Mht);const Oht=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Lht=rt("tag",Oht);const Dht=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],jht=rt("target",Dht);const $ht=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Fht=rt("timer",$ht);const Vht=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ah=rt("trash-2",Vht);const zht=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],Ght=rt("tree-palm",zht);const Uht=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Bht=rt("trending-down",Uht);const Wht=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Hht=rt("trending-up",Wht);const qht=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],bq=rt("type",qht);const Kht=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],iP=rt("upload",Kht);const Yht=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Eq=rt("user",Yht);const Xht=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Zht=rt("volume-2",Xht);const Jht=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],Qht=rt("waves",Jht);const edt=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],tdt=rt("wifi-off",edt);const ndt=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],Eoe=rt("wind",ndt);const rdt=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Qr=rt("x",rdt);const idt=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],sdt=rt("zoom-in",idt);function odt(){const{tracking:t,startTracking:e,stopTracking:n,updatePosition:r,setWatchId:i}=Ps(),s=Y.useCallback(a=>{r(a)},[r]),o=Y.useCallback(a=>{console.error("GPS error:",a),alert(`GPS fout: ${a.message}`),n()},[n]);return Y.useEffect(()=>{if(!t)return;if(!navigator.geolocation){alert("Geolocation wordt niet ondersteund door deze browser"),n();return}const a=navigator.geolocation.watchPosition(s,o,{enableHighAccuracy:!0,maximumAge:1e3,timeout:15e3});return i(a),()=>{navigator.geolocation.clearWatch(a)}},[t,s,o,i,n]),{tracking:t,start:e,stop:n,toggle:()=>t?n():e()}}async function adt(){const t=DeviceOrientationEvent;if(typeof t.requestPermission=="function")try{return await t.requestPermission()==="granted"}catch{return!1}return!0}function ldt(){const{tracking:t,start:e,stop:n}=odt(),r=Ps(a=>a.navigationMode),i=Ps(a=>a.setNavigationMode),s=t&&r==="headingUp",o=async()=>{t?r==="free"?i("headingUp"):n():(await adt(),e(),i("free"))};return p.jsx(yt.button,{className:`
        fixed bottom-2 right-[104px] z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${s?"bg-gradient-to-br from-green-400 to-green-600 text-white shadow-lg shadow-green-500/30":t?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:o,whileHover:{scale:1.05},whileTap:{scale:.95},animate:t?{scale:[1,1.02,1]}:{},transition:t?{scale:{duration:2,repeat:1/0,ease:"easeInOut"}}:{},"aria-label":s?"Rijmodus actief (kaart draait mee)":t?"GPS actief - klik voor rijmodus":"GPS starten",title:s?"Rijmodus actief - klik om GPS te stoppen":t?"GPS actief - klik voor rijmodus":"GPS starten",children:s?p.jsx(rh,{size:22,strokeWidth:2,className:"drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"}):p.jsx(Out,{size:22,strokeWidth:2,className:"drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})})}const cdt="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
    <polygon points="24,6 38,38 24,30 10,38" fill="#4285F4" stroke="white" stroke-width="3" stroke-linejoin="round"/>
  </svg>`),Soe=new xn({image:new gs({radius:7,fill:new Dn({color:"#4285F4"}),stroke:new Mn({color:"white",width:2.5})})});function udt(){const t=li(y=>y.map),e=Ps(y=>y.position),n=Ps(y=>y.accuracy),r=Ps(y=>y.tracking),i=Ps(y=>y.smoothHeading),s=Ps(y=>y.navigationMode),o=an(y=>y.showAccuracyCircle),a=Ps(y=>y.firstFix),l=Ps(y=>y.resetFirstFix),c=Ps(y=>y.config.centerOnUser),u=Y.useRef(null),h=Y.useRef(null),f=Y.useRef(null),g=Y.useMemo(()=>y=>new xn({image:new sI({src:cdt,scale:.9,rotation:y,rotateWithView:!0,anchor:[.5,.5]})}),[]);return Y.useEffect(()=>{if(!t||!e)return;const y=Ni([e.lng,e.lat]);return u.current=new yr({geometry:new ki(y)}),u.current.setStyle(r?g(0):Soe),h.current=new yr({geometry:new ki(y)}),f.current=new Ll({source:new Ol({features:[h.current,u.current]}),zIndex:1e3}),t.addLayer(f.current),()=>{f.current&&t&&t.removeLayer(f.current)}},[t,!!e,g]),Y.useEffect(()=>{if(u.current)if(r){const y=i!==null?i*Math.PI/180:0;u.current.setStyle(g(y))}else u.current.setStyle(Soe)},[r,g,i]),Y.useEffect(()=>{if(!t||!e||!u.current||!h.current)return;const y=Ni([e.lng,e.lat]);if(u.current.getGeometry()?.setCoordinates(y),h.current.getGeometry()?.setCoordinates(y),r&&o&&n){const _=t.getView().getResolution()||1,b=Math.min(n/_,80);h.current.setStyle(new xn({image:new gs({radius:b,fill:new Dn({color:"rgba(66, 133, 244, 0.12)"})})}))}else h.current.setStyle(new xn({}));if(a&&r){t.getView().setCenter(y),t.getView().setZoom(17),l();return}r&&c&&!a&&t.getView().animate({center:y,duration:150})},[t,r,e,n,a,l,c,o]),Y.useEffect(()=>{if(!u.current||!r)return;const y=i!==null?i*Math.PI/180:0;u.current.setStyle(g(y))},[i,g,r]),Y.useEffect(()=>{if(!(!t||!r)&&s==="headingUp"&&i!==null){const y=-(i*Math.PI)/180,_=t.getView(),b=_.getRotation();let T=y-b;for(;T>Math.PI;)T-=2*Math.PI;for(;T<-Math.PI;)T+=2*Math.PI;Math.abs(T)>.01&&_.animate({rotation:b+T,duration:200})}},[t,r,s,i]),Y.useEffect(()=>{if(t&&s==="free"){const y=t.getView(),_=y.getRotation();Math.abs(_)>.01&&y.animate({rotation:0,duration:300})}},[t,s]),null}function hdt(){const t=gr(o=>o.themesPanelOpen),e=gr(o=>o.toggleThemesPanel),n=li(o=>o.map),[r,i]=Y.useState(!1);Y.useEffect(()=>{if(!n)return;const o=n.getView(),a=()=>{const l=o.getRotation();i(Math.abs(l)>.087)};return a(),o.on("change:rotation",a),()=>{o.un("change:rotation",a)}},[n]);const s=r?"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)) + 112px)":"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)) + 52px)";return p.jsx(yt.button,{className:`
        fixed right-2 z-[800]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${t?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,style:{top:s},animate:{top:s},transition:{duration:.2},onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":t?"Kaartlagen sluiten":"Kaartlagen openen",title:"Kaartlagen",children:p.jsx(_c,{size:22,strokeWidth:2,className:"drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})})}function ddt(){return p.jsx(hdt,{})}const LR=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],Km=["Mineraal","Fossiel","Erfgoed","Monument","Overig"],tu="default-vondsten",Uz={id:tu,name:"Mijn vondsten",color:"#f97316",categories:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"],points:[],visible:!0,archived:!1,createdAt:new Date().toISOString()},fdt=t=>t.some(n=>n.id===tu)?t:[{...Uz,createdAt:new Date().toISOString()},...t],ms=vo()(kh((t,e)=>({layers:[{...Uz}],colorIndex:0,addLayer:(n,r=Km)=>{const i=crypto.randomUUID(),s=LR[e().colorIndex%LR.length];return t(o=>({layers:[...o.layers,{id:i,name:n,color:s,categories:[...r],points:[],visible:!0,archived:!1,createdAt:new Date().toISOString()}],colorIndex:o.colorIndex+1})),i},removeLayer:n=>{t(r=>({layers:r.layers.filter(i=>i.id!==n)}))},updateLayer:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n?{...s,...r}:s)}))},toggleVisibility:n=>{t(r=>({layers:r.layers.map(i=>i.id===n?{...i,visible:!i.visible}:i)}))},toggleArchived:n=>{t(r=>({layers:r.layers.map(i=>i.id===n?{...i,archived:!i.archived,visible:i.archived?i.visible:!1}:i)}))},addPoint:(n,r)=>{const i={...r,status:r.status||"todo",id:crypto.randomUUID(),createdAt:new Date().toISOString()};t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:[...o.points,i]}:o)}))},removePoint:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n?{...s,points:s.points.filter(o=>o.id!==r)}:s)}))},updatePoint:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,...i}:a)}:o)}))},setPointStatus:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,status:i}:a)}:o)}))},addCategory:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n&&!s.categories.includes(r)?{...s,categories:[...s.categories,r]}:s)}))},removeCategory:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n?{...s,categories:s.categories.filter(o=>o!==r)}:s)}))},addPhotoToPoint:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,photos:[...a.photos||[],i]}:a)}:o)}))},removePhotoFromPoint:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,photos:(a.photos||[]).filter(l=>l.id!==i)}:a)}:o)}))},updatePhotoInPoint:(n,r,i,s)=>{t(o=>({layers:o.layers.map(a=>a.id===n?{...a,points:a.points.map(l=>l.id===r?{...l,photos:(l.photos||[]).map(c=>c.id===i?{...c,...s}:c)}:l)}:a)}))},exportLayerAsGeoJSON:n=>{const r=e().layers.find(l=>l.id===n);if(!r)return;const i={type:"FeatureCollection",properties:{name:r.name,color:r.color,categories:r.categories,createdAt:r.createdAt,exportedAt:new Date().toISOString()},features:r.points.map(l=>({type:"Feature",geometry:{type:"Point",coordinates:l.coordinates},properties:{id:l.id,name:l.name,category:l.category,notes:l.notes,url:l.url,status:l.status,sourceLayer:l.sourceLayer,sourceId:l.sourceId,photos:l.photos,createdAt:l.createdAt}}))},s=new Blob([JSON.stringify(i,null,2)],{type:"application/geo+json"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=`${r.name.replace(/[^a-zA-Z0-9]/g,"-")}-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)},importLayerFromGeoJSON:n=>{try{const r=JSON.parse(n);if(r.type!=="FeatureCollection")return{success:!1,error:"Ongeldig GeoJSON formaat"};const i=r.properties||{},s=i.name||`Gemporteerd ${new Date().toLocaleDateString("nl-NL")}`,o=i.categories||Km,a=i.color||LR[e().colorIndex%LR.length],l=(r.features||[]).filter(u=>u.geometry?.type==="Point").map(u=>({id:u.properties?.id||crypto.randomUUID(),name:u.properties?.name||"Naamloos",category:u.properties?.category||"Overig",notes:u.properties?.notes||"",url:u.properties?.url,status:u.properties?.status||"todo",sourceLayer:u.properties?.sourceLayer,sourceId:u.properties?.sourceId,photos:u.properties?.photos,coordinates:u.geometry.coordinates,createdAt:u.properties?.createdAt||new Date().toISOString()})),c=crypto.randomUUID();return t(u=>({layers:[...u.layers,{id:c,name:s,color:a,categories:o,points:l,visible:!0,archived:!1,createdAt:new Date().toISOString()}],colorIndex:u.colorIndex+1})),{success:!0,layerId:c}}catch{return{success:!1,error:"Fout bij parsen van GeoJSON"}}},getLayer:n=>e().layers.find(r=>r.id===n),getActiveLayerCount:()=>e().layers.filter(n=>!n.archived).length,getArchivedLayerCount:()=>e().layers.filter(n=>n.archived).length,clearAll:()=>{t(n=>({layers:n.layers.map(r=>r.id===tu?{...r,points:[]}:r).filter(r=>r.id===tu),colorIndex:0}))}}),{name:"detectorapp-custom-point-layers",version:3,onRehydrateStorage:()=>t=>{t&&(t.layers.some(n=>n.id===tu)||(t.layers=[{...Uz,createdAt:new Date().toISOString()},...t.layers]))},migrate:(t,e)=>{const n=t;return e<2?{...n,layers:fdt(n.layers||[])}:e<3?{...n,layers:(n.layers||[]).map(r=>r.id===tu?{...r,name:"Mijn vondsten"}:r)}:n}}));function xs({title:t,children:e,defaultExpanded:n=!0,layerNames:r}){const[i,s]=Y.useState(n),o=Ws(b=>b.visible),a=Ws(b=>b.setLayerVisibility),l=EB(b=>b.isLayerUnlocked),c=b=>{const T=Gy[b],A=T?.tier??"free",I=T?.regions??["nl"];return l(b,A,I)},u=r?.filter(b=>c(b))||[],h=u.filter(b=>o[b]).length,f=u.length,g=f>0&&h===f,y=h>0&&h<f,_=b=>{if(b.stopPropagation(),!r||u.length===0)return;const T=!g;u.forEach(A=>{a(A,T)})};return p.jsxs("div",{className:"mb-0.5",children:[p.jsxs("div",{className:"flex items-center gap-1 py-1 px-1 hover:bg-blue-50 transition-colors",children:[p.jsxs("button",{onClick:b=>{b.stopPropagation(),s(!i)},className:"flex-1 flex items-center gap-1 bg-transparent border-0 outline-none text-left",style:{fontSize:"inherit"},children:[p.jsx(yt.span,{animate:{rotate:i?90:0},transition:{duration:.15},className:"text-gray-400",children:p.jsx(nh,{size:14})}),i?p.jsx(dut,{size:16,className:"text-blue-500"}):p.jsx(gut,{size:16,className:"text-blue-500"}),p.jsx("span",{className:"text-gray-700 font-medium",style:{fontSize:"1em"},children:t}),h>0&&p.jsx("span",{className:"ml-1 px-1.5 py-0.5 font-medium bg-blue-100 text-blue-600 rounded-full",style:{fontSize:"0.7em"},children:h})]}),r&&r.length>0&&p.jsx("button",{onClick:_,className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:g?"#3b82f6":y?"#93c5fd":"white",border:g?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:(g||y)&&p.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:p.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),p.jsx(Wn,{initial:!1,children:i&&p.jsx(yt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},style:{overflow:"hidden"},className:"ml-5",children:e})})]})}function ut({name:t,type:e,hasOverlay:n,displayName:r}){const i=Ws(P=>P.visible[t]),s=Ws(P=>P.visible["Labels Overlay"]),o=Ws(P=>P.loadingState[t]),a=Ws(P=>P.toggleLayer),l=Ws(P=>P.setLayerVisibility),c=EB(P=>P.isLayerUnlocked),u=o==="loading",h=o==="error",f=Gy[t],g=f?.tier??"free",y=f?.regions??["nl"],b=!c(t,g,y),T=P=>{P.stopPropagation(),!(u||b)&&(e==="overlay"?a(t):["CartoDB (licht)","OpenStreetMap","Luchtfoto","Satelliet (wereld)","TMK 1850","Bonnebladen 1900"].forEach(V=>{l(V,V===t)}))},A=P=>{P.stopPropagation(),l("Labels Overlay",!s)},I=i??!1;return p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("button",{onClick:T,disabled:u||b,className:`flex-1 flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${b?"opacity-50 cursor-not-allowed bg-gray-50":u?"opacity-70 cursor-wait bg-transparent":I?"bg-blue-50 hover:bg-blue-100":"bg-transparent hover:bg-blue-50"}`,style:{fontSize:"inherit"},title:b?"Premium laag - upgrade om te ontgrendelen":void 0,children:[p.jsxs("span",{className:`flex items-center gap-1 ${h?"text-red-500":b?"text-gray-400":"text-gray-600"}`,children:[r||t,h&&p.jsx(G2e,{size:12,className:"text-red-500"}),b&&p.jsx(Gz,{size:12,className:"text-amber-500"})]}),p.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:b?"#e5e7eb":u?"#93c5fd":I?"#3b82f6":"white",border:b?"2px solid #d1d5db":u?"2px solid #93c5fd":I?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:b?p.jsx(Gz,{size:10,strokeWidth:3,className:"text-gray-400"}):u?p.jsx(rP,{size:10,strokeWidth:3,className:"animate-spin"}):I?p.jsx(Ip,{size:12,strokeWidth:3}):null})]}),n&&I&&p.jsx("button",{onClick:A,className:`p-1 rounded transition-colors border-0 outline-none ${s?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:s?"Labels verbergen":"Labels tonen",children:p.jsx(Lht,{size:12})})]})}const pdt=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899","#6b7280"];function Q2e({layer:t,compact:e=!1}){const{toggleVisibility:n,removeLayer:r,updateLayer:i,setColor:s}=EI(),[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),[u,h]=Y.useState(t.name),[f,g]=Y.useState(!1),y=Y.useRef(null),_=Y.useRef(null),b=t.features.features.length,T=[...new Set(t.features.features.map(C=>C.geometry?.type).filter(Boolean))];Y.useEffect(()=>{l&&y.current&&(y.current.focus(),y.current.select())},[l]),Y.useEffect(()=>{const C=N=>{_.current&&!_.current.contains(N.target)&&g(!1)};if(f)return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[f]);const A=()=>{o?r(t.id):(a(!0),setTimeout(()=>a(!1),3e3))},I=()=>{const C=u.trim();C&&C!==t.name&&i(t.id,{name:C}),c(!1)},P=()=>{h(t.name),c(!1)},M=C=>{C.key==="Enter"?I():C.key==="Escape"&&P()},V=C=>{s(t.id,C),g(!1)};return e?p.jsxs("div",{className:"flex items-center gap-1 py-0.5 px-1 hover:bg-blue-50 transition-colors rounded",children:[p.jsx("button",{onClick:()=>n(t.id),className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:t.visible?t.color:"white",border:`2px solid ${t.color}`},title:t.visible?"Verbergen":"Tonen",children:t.visible&&p.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:p.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"white",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})}),p.jsx("span",{className:"text-gray-700 truncate flex-1 cursor-pointer",style:{fontSize:"0.9em"},onClick:()=>n(t.id),children:t.name}),p.jsx("span",{className:"text-[10px] text-gray-400 flex-shrink-0",children:b})]}):p.jsxs("div",{className:"flex items-center justify-between py-1.5 group",children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[p.jsxs("div",{className:"relative",ref:_,children:[p.jsx("button",{onClick:()=>g(!f),className:"w-5 h-5 rounded border-2 border-white shadow-sm flex-shrink-0 hover:scale-110 transition-transform",style:{backgroundColor:t.color},title:"Kleur wijzigen"}),f&&p.jsx("div",{className:"absolute top-6 left-0 z-50 bg-white rounded-lg shadow-lg border p-2 grid grid-cols-3 gap-1",children:pdt.map(C=>p.jsx("button",{onClick:()=>V(C),className:`w-6 h-6 rounded border-2 transition-transform hover:scale-110 ${C===t.color?"border-gray-800 scale-110":"border-white"}`,style:{backgroundColor:C},title:C},C))})]}),p.jsx("div",{className:"flex-1 min-w-0",children:l?p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("input",{ref:y,type:"text",value:u,onChange:C=>h(C.target.value),onKeyDown:M,className:"flex-1 text-sm px-1 py-0.5 border rounded min-w-0"}),p.jsx("button",{onClick:I,className:"p-0.5 text-green-600 hover:bg-green-50 rounded",title:"Opslaan",children:p.jsx(Ip,{size:14})}),p.jsx("button",{onClick:P,className:"p-0.5 text-gray-400 hover:bg-gray-100 rounded",title:"Annuleren",children:p.jsx(Qr,{size:14})})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-sm text-gray-700 truncate",children:t.name}),p.jsx("button",{onClick:()=>c(!0),className:"p-0.5 text-gray-400 hover:text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Naam wijzigen",children:p.jsx(Wd,{size:12})})]}),p.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:[p.jsxs("span",{children:[b," ",b===1?"feature":"features"]}),T.length>0&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"mx-0.5",children:""}),p.jsx("span",{children:T.join(", ")})]})]})]})})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:()=>n(t.id),className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:t.visible?t.color:"white",border:`2px solid ${t.visible?t.color:"#9ca3af"}`},title:t.visible?"Verbergen":"Tonen",children:t.visible&&p.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:p.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"white",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})}),p.jsx("button",{onClick:A,className:`p-1 rounded transition-colors border-0 outline-none ${o?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,title:o?"Klik nogmaals om te verwijderen":"Verwijderen",children:p.jsx(Ah,{size:14})})]})]})}const nk="commercial",mdt={commercial:["Archeologische lagen","Archeologische verwachtingen","Erfgoed & Monumenten","WOII & Militair","Hillshade & LiDAR","Terrein & Bodem","Percelen","Recreatie"],personal:["Steentijd & Prehistorie","Paleokaarten","Archeologische lagen","Archeologische verwachtingen","Erfgoed & Monumenten","WOII & Militair","Hillshade & LiDAR","Terrein & Bodem","Percelen","Provinciale Thema's","Fossielen, Mineralen & Goud","Recreatie"]},gdt={commercial:["Specials (3D)"],personal:["Specials (3D)"]};function ql(t){return mdt[nk].includes(t)}function ydt(t){return gdt[nk].includes(t)}const vdt=[{name:"Rapa Nui - Moai Productie",url:"https://arcg.is/qu59O1",desc:"Paaseiland steengroeve in 3D"},{name:"Digital Giza - Piramides",url:"http://giza.fas.harvard.edu/giza3d/",desc:"Harvard 3D reconstructie"},{name:"Stonehenge 360",url:"https://www.english-heritage.org.uk/visit/places/stonehenge/history-and-stories/stonehenge360/",desc:"English Heritage virtuele tour"},{name:"Pompeii 3D Explorer",url:"https://www.cyark.org/projects/pompeii/3D-Explorer",desc:"CyArk LiDAR scans"},{name:"Virtual Angkor Wat",url:"https://www.virtualangkor.com/",desc:"3D reconstructie 1300 n.Chr."},{name:"Petra Virtuele Tour",url:"https://www.zamaniproject.org/site-jordan-petra.html",desc:"Zamani Project 3D"}],_dt=[{name:"CyArk (200+ sites)",url:"https://www.cyark.org/projects/",desc:"Wereldwijd erfgoed archief"},{name:"Google Open Heritage",url:"https://artsandculture.google.com/project/openheritage",desc:"26+ UNESCO sites in 3D"}];function xdt(){const{themesPanelOpen:t,toggleThemesPanel:e,toggleSettingsPanel:n}=gr(),{layers:r,toggleVisibility:i}=ms(),s=EI(y=>y.layers),o=Y.useRef(null),a=an(y=>y.layerPanelFontScale),l=an(y=>y.setLayerPanelFontScale),c=an(y=>y.showFontSliders),u=an(y=>y.showCustomPointLayers),h=13*a/100,[f,g]=Y.useState(!1);return Y.useEffect(()=>{if(!t)return;const y=b=>{o.current&&!o.current.contains(b.target)&&e()},_=setTimeout(()=>{document.addEventListener("click",y)},100);return()=>{clearTimeout(_),document.removeEventListener("click",y)}},[t,e]),p.jsx(Wn,{children:t&&p.jsxs(yt.div,{ref:o,className:"fixed right-[56px] z-[1101] bg-white rounded-lg shadow-lg overflow-hidden w-[300px] max-h-[calc(100vh-100px)] flex flex-col",style:{top:"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)) + 52px)"},initial:{opacity:0,x:50,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:50,scale:.95},transition:{duration:.15},children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-blue-500",style:{fontSize:`${h}px`},children:[p.jsx("span",{className:"font-medium text-white",children:"Kaartlagen"}),c&&p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-[10px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:a,onInput:y=>{l(parseInt(y.target.value))},onChange:y=>l(parseInt(y.target.value)),className:"w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${a}%`}),p.jsx("span",{className:"text-xs text-blue-200",children:"T"})]})]}),p.jsxs("div",{className:"p-2 overflow-y-auto flex-1",style:{fontSize:`${h}px`},children:[u&&r.filter(y=>!y.archived).length>0&&p.jsxs("div",{className:"mb-2 pb-1 border-b border-gray-100",children:[p.jsx("div",{className:"flex items-center gap-1 py-0.5 px-1 mb-1",children:p.jsx("span",{className:"text-orange-600 font-medium",style:{fontSize:"0.9em"},children:"Mijn lagen"})}),r.filter(y=>!y.archived).map(y=>p.jsxs("button",{onClick:_=>{_.stopPropagation(),i(y.id)},className:`w-full flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${y.visible?"bg-orange-50 hover:bg-orange-100":"bg-transparent hover:bg-orange-50"}`,style:{fontSize:"inherit"},children:[p.jsxs("span",{className:"flex items-center gap-2 text-gray-600",children:[y.name,p.jsxs("span",{className:"text-xs text-gray-400",children:["(",y.points.length,")"]})]}),p.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:y.visible?"#f97316":"white",border:y.visible?"2px solid #f97316":"2px solid #fb923c",color:"white"},children:y.visible&&p.jsx(Ip,{size:12,strokeWidth:3})})]},y.id))]}),s.length>0&&p.jsxs("div",{className:"mb-2 pb-1 border-b border-gray-100",children:[p.jsxs("div",{className:"flex items-center gap-1 py-0.5 px-1 mb-1",children:[p.jsx(iP,{size:12,className:"text-cyan-600"}),p.jsx("span",{className:"text-cyan-600 font-medium",style:{fontSize:"0.9em"},children:"Gemporteerde lagen"})]}),s.map(y=>p.jsx(Q2e,{layer:y,compact:!0},y.id)),p.jsx("button",{onClick:()=>{e(),n()},className:"w-full text-left py-1 pl-3 text-xs text-cyan-500 hover:text-cyan-700 hover:bg-cyan-50 transition-colors",children:"+ Laag importeren..."})]}),p.jsxs("div",{className:"mb-2",children:[p.jsx("div",{className:"flex items-center gap-1 py-1 px-1 mb-1",children:p.jsx("span",{className:"text-blue-600 font-medium",style:{fontSize:"0.95em"},children:"Basislaag"})}),p.jsxs("div",{className:"space-y-0",children:[p.jsx(ut,{name:"CartoDB (licht)",type:"base"}),p.jsx(ut,{name:"OpenStreetMap",type:"base"}),p.jsx(ut,{name:"Luchtfoto",type:"base",hasOverlay:!0,displayName:"Luchtfoto (NL)"}),p.jsx(ut,{name:"Satelliet (wereld)",type:"base",hasOverlay:!0}),p.jsx(ut,{name:"TMK 1850",type:"base",hasOverlay:!0}),p.jsx(ut,{name:"Bonnebladen 1900",type:"base",hasOverlay:!0})]})]}),p.jsxs("div",{className:"mb-2",children:[p.jsx("div",{className:"flex items-center gap-1 py-1 px-1 mb-1 border-t border-gray-100 pt-2",children:p.jsx("span",{className:"text-blue-600 font-medium",style:{fontSize:"0.95em"},children:"Thema's"})}),ql("Steentijd & Prehistorie")&&p.jsxs(xs,{title:"Steentijd & Prehistorie",defaultExpanded:!1,layerNames:["Hunebedden","Grafheuvels","Terpen","FAMKE Steentijd","FAMKE IJzertijd"],children:[p.jsx(ut,{name:"Hunebedden",type:"overlay"}),p.jsx(ut,{name:"Grafheuvels",type:"overlay"}),p.jsx(ut,{name:"Terpen",type:"overlay"}),p.jsx(ut,{name:"FAMKE Steentijd",type:"overlay"}),p.jsx(ut,{name:"FAMKE IJzertijd",type:"overlay"})]}),ql("Paleokaarten")&&p.jsxs(xs,{title:"Paleokaarten",defaultExpanded:!1,layerNames:["Paleokaart 9000 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 500 v.Chr.","Paleokaart 100 n.Chr.","Paleokaart 800 n.Chr."],children:[p.jsx(ut,{name:"Paleokaart 9000 v.Chr.",type:"overlay"}),p.jsx(ut,{name:"Paleokaart 5500 v.Chr.",type:"overlay"}),p.jsx(ut,{name:"Paleokaart 2750 v.Chr.",type:"overlay"}),p.jsx(ut,{name:"Paleokaart 1500 v.Chr.",type:"overlay"}),p.jsx(ut,{name:"Paleokaart 500 v.Chr.",type:"overlay"}),p.jsx(ut,{name:"Paleokaart 100 n.Chr.",type:"overlay"}),p.jsx(ut,{name:"Paleokaart 800 n.Chr.",type:"overlay"})]}),ql("Archeologische lagen")&&p.jsxs(xs,{title:"Archeologische lagen",defaultExpanded:!1,layerNames:["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Archeo Onderzoeken","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten"],children:[p.jsx(ut,{name:"AMK Monumenten",type:"overlay"}),p.jsxs(xs,{title:"Per periode",defaultExpanded:!1,layerNames:["AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"],children:[p.jsx(ut,{name:"AMK Romeins",type:"overlay"}),p.jsx(ut,{name:"AMK Steentijd",type:"overlay"}),p.jsx(ut,{name:"AMK Vroege ME",type:"overlay"}),p.jsx(ut,{name:"AMK Late ME",type:"overlay"}),p.jsx(ut,{name:"AMK Overig",type:"overlay"})]}),p.jsx(ut,{name:"Archeo Onderzoeken",type:"overlay"}),p.jsxs(xs,{title:"Romeinse tijd",defaultExpanded:!1,layerNames:["Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten"],children:[p.jsx(ut,{name:"Romeinse wegen (regio)",type:"overlay"}),p.jsx(ut,{name:"Romeinse wegen (Wereld)",type:"overlay"}),p.jsx(ut,{name:"Romeinse Forten",type:"overlay"})]})]}),ql("Archeologische verwachtingen")&&p.jsxs(xs,{title:"Archeologische verwachtingen",defaultExpanded:!1,layerNames:["Kansenkaart","IKAW","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[p.jsx(ut,{name:"Kansenkaart",type:"overlay"}),p.jsx(ut,{name:"IKAW",type:"overlay"}),p.jsx(ut,{name:"UIKAV Punten",type:"overlay"}),p.jsx(ut,{name:"UIKAV Vlakken",type:"overlay"}),p.jsx(ut,{name:"UIKAV Expert",type:"overlay"}),p.jsx(ut,{name:"UIKAV Buffer",type:"overlay"}),p.jsx(ut,{name:"UIKAV Indeling",type:"overlay"})]}),ql("Erfgoed & Monumenten")&&p.jsxs(xs,{title:"Erfgoed & Monumenten",defaultExpanded:!1,layerNames:["Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Kastelen","Runes"],children:[p.jsx(ut,{name:"Rijksmonumenten",type:"overlay"}),p.jsx(ut,{name:"Werelderfgoed",type:"overlay"}),p.jsx(ut,{name:"Religieus Erfgoed",type:"overlay"}),p.jsx(ut,{name:"Kastelen",type:"overlay"}),p.jsx(ut,{name:"Runes",type:"overlay"})]}),ql("WOII & Militair")&&p.jsxs(xs,{title:"WOII & Militair",defaultExpanded:!1,layerNames:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Militaire Objecten","Inundatiegebieden"],children:[p.jsx(ut,{name:"WWII Bunkers",type:"overlay"}),p.jsx(ut,{name:"Slagvelden",type:"overlay"}),p.jsx(ut,{name:"Militaire Vliegvelden",type:"overlay"}),p.jsx(ut,{name:"Verdedigingslinies",type:"overlay"}),p.jsx(ut,{name:"Militaire Objecten",type:"overlay"}),p.jsx(ut,{name:"Inundatiegebieden",type:"overlay"})]}),ql("Hillshade & LiDAR")&&p.jsxs(xs,{title:"Hillshade & LiDAR",defaultExpanded:!1,layerNames:["AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN4 Hillshade Kleur","AHN 0.5m"],children:[p.jsx(ut,{name:"AHN4 Hoogtekaart Kleur",type:"overlay"}),p.jsx(ut,{name:"AHN4 Hillshade NL",type:"overlay"}),p.jsx(ut,{name:"AHN4 Multi-Hillshade NL",type:"overlay"}),p.jsx(ut,{name:"AHN4 Hillshade Kleur",type:"overlay"}),p.jsx(ut,{name:"AHN 0.5m",type:"overlay"})]}),ql("Terrein & Bodem")&&p.jsxs(xs,{title:"Terrein & Bodem",defaultExpanded:!1,layerNames:["Geomorfologie","Bodemkaart","Essen"],children:[nk==="personal",p.jsx(ut,{name:"Geomorfologie",type:"overlay"}),p.jsx(ut,{name:"Bodemkaart",type:"overlay"}),p.jsx(ut,{name:"Essen",type:"overlay"})]}),ql("Percelen")&&p.jsxs(xs,{title:"Percelen",defaultExpanded:!1,layerNames:["Gewaspercelen","Kadastrale Grenzen"],children:[p.jsx(ut,{name:"Gewaspercelen",type:"overlay"}),p.jsx(ut,{name:"Kadastrale Grenzen",type:"overlay"})]}),ql("Provinciale Thema's")&&p.jsxs(xs,{title:"Provinciale Thema's",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],children:[p.jsxs(xs,{title:"Zuid-Holland",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen"],children:[p.jsx(ut,{name:"Scheepswrakken",type:"overlay"}),p.jsx(ut,{name:"Woonheuvels ZH",type:"overlay"}),p.jsx(ut,{name:"Windmolens",type:"overlay"}),p.jsx(ut,{name:"Erfgoedlijnen",type:"overlay"}),p.jsx(ut,{name:"Oude Kernen",type:"overlay"})]}),p.jsxs(xs,{title:"Gelderland",defaultExpanded:!1,layerNames:["Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken"],children:[p.jsx(ut,{name:"Relictenkaart Punten",type:"overlay"}),p.jsx(ut,{name:"Relictenkaart Lijnen",type:"overlay"}),p.jsx(ut,{name:"Relictenkaart Vlakken",type:"overlay"})]}),p.jsx(xs,{title:"Zeeland",defaultExpanded:!1,layerNames:["Verdronken Dorpen"],children:p.jsx(ut,{name:"Verdronken Dorpen",type:"overlay"})})]}),ql("Fossielen, Mineralen & Goud")&&p.jsxs(xs,{title:"Fossielen, Mineralen & Goud",defaultExpanded:!1,layerNames:["Fossiel Hotspots","Mineralen Hotspots","Goudrivieren","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk"],children:[p.jsx(ut,{name:"Fossiel Hotspots",type:"overlay"}),p.jsx(ut,{name:"Mineralen Hotspots",type:"overlay"}),p.jsx(ut,{name:"Goudrivieren",type:"overlay"}),p.jsx(ut,{name:"Fossielen Nederland",type:"overlay"}),p.jsx(ut,{name:"Fossielen Belgi",type:"overlay"}),p.jsx(ut,{name:"Fossielen Duitsland",type:"overlay"}),p.jsx(ut,{name:"Fossielen Frankrijk",type:"overlay"})]}),p.jsxs(xs,{title:"Belgi",defaultExpanded:!1,layerNames:["Monumenten BE","Archeo Zones BE","Arch Sites BE","Erfgoed Landschap BE","CAI Elementen"],children:[p.jsx(ut,{name:"Monumenten BE",type:"overlay"}),p.jsx(ut,{name:"Archeo Zones BE",type:"overlay"}),p.jsx(ut,{name:"Arch Sites BE",type:"overlay"}),p.jsx(ut,{name:"Erfgoed Landschap BE",type:"overlay"}),p.jsx(ut,{name:"CAI Elementen",type:"overlay"})]}),p.jsxs(xs,{title:"Frankrijk",defaultExpanded:!1,layerNames:["Sites Classs FR","Monumenten IDF","Hist. Gebouwen FR","INRAP Sites FR","Archeo Sites Bretagne","Operaties Bretagne","Archeo Parijs","Sites Patrimoine Occitanie","Sites Patrimoine PACA","Sites Patrimoine Normandie","Maginotlinie"],children:[p.jsx(ut,{name:"Sites Classs FR",type:"overlay"}),p.jsx(ut,{name:"Monumenten IDF",type:"overlay"}),p.jsx(ut,{name:"Hist. Gebouwen FR",type:"overlay"}),p.jsx(ut,{name:"INRAP Sites FR",type:"overlay"}),p.jsx(ut,{name:"Archeo Sites Bretagne",type:"overlay"}),p.jsx(ut,{name:"Operaties Bretagne",type:"overlay"}),p.jsx(ut,{name:"Archeo Parijs",type:"overlay"}),p.jsx(ut,{name:"Sites Patrimoine Occitanie",type:"overlay"}),p.jsx(ut,{name:"Sites Patrimoine PACA",type:"overlay"}),p.jsx(ut,{name:"Sites Patrimoine Normandie",type:"overlay"}),p.jsx(ut,{name:"Maginotlinie",type:"overlay"})]}),ql("Recreatie")&&nk==="commercial"&&p.jsxs(xs,{title:"Recreatie",defaultExpanded:!1,layerNames:["Parken","Speeltuinen","Strandjes"],children:[p.jsx(ut,{name:"Parken",type:"overlay"}),p.jsx(ut,{name:"Speeltuinen",type:"overlay"}),p.jsx(ut,{name:"Strandjes",type:"overlay",displayName:"Recreatie (strand)"})]}),ql("Recreatie")&&nk==="personal"&&p.jsxs(xs,{title:"Recreatie",defaultExpanded:!1,layerNames:["Ruiterpaden","Laarzenpaden","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels"],children:[p.jsx(ut,{name:"Ruiterpaden",type:"overlay"}),p.jsx(ut,{name:"Laarzenpaden",type:"overlay"}),p.jsx(ut,{name:"Parken",type:"overlay"}),p.jsx(ut,{name:"Speeltuinen",type:"overlay"}),p.jsx(ut,{name:"Musea",type:"overlay"}),p.jsx(ut,{name:"Strandjes",type:"overlay"}),p.jsx(ut,{name:"Kringloopwinkels",type:"overlay"})]}),ydt("Specials (3D)")&&p.jsxs("div",{className:"mb-2",children:[p.jsxs("button",{onClick:y=>{y.stopPropagation(),g(!f)},className:"w-full flex items-center gap-1 py-1 px-1 hover:bg-purple-50 rounded transition-colors border-0 outline-none bg-transparent",children:[f?p.jsx(jb,{size:14,className:"text-purple-500"}):p.jsx(nh,{size:14,className:"text-purple-500"}),p.jsx(Eut,{size:12,className:"text-purple-500"}),p.jsx("span",{className:"text-purple-600 font-medium",style:{fontSize:"0.95em"},children:"Specials (3D)"}),p.jsx(Og,{size:10,className:"text-purple-400 ml-auto"})]}),f&&p.jsxs("div",{className:"mt-1",onClick:y=>y.stopPropagation(),children:[vdt.map(y=>p.jsxs("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",onClick:_=>_.stopPropagation(),className:"w-full flex items-center justify-between py-1.5 pl-6 pr-2 hover:bg-purple-50 rounded transition-colors text-left",style:{fontSize:"inherit"},children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-gray-700",children:y.name}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:y.desc})]}),p.jsx(Og,{size:12,className:"text-purple-400 flex-shrink-0 ml-2"})]},y.name)),p.jsx("div",{className:"border-t border-gray-200 my-1.5 mx-2"}),_dt.map(y=>p.jsxs("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",onClick:_=>_.stopPropagation(),className:"w-full flex items-center justify-between py-1.5 pl-6 pr-2 hover:bg-purple-50 rounded transition-colors text-left",style:{fontSize:"inherit"},children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-gray-700 font-medium",children:y.name}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:y.desc})]}),p.jsx(Og,{size:12,className:"text-purple-400 flex-shrink-0 ml-2"})]},y.name))]})]})]})]})]})})}function wdt(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var rv=1,iv=2,Aw=3,bdt=4,Bz=5,Toe=6378137,Edt=6356752314e-3,koe=.0066943799901413165,rk=484813681109536e-20,ot=Math.PI/2,Sdt=.16666666666666666,Tdt=.04722222222222222,kdt=.022156084656084655,St=1e-10,Ki=.017453292519943295,Tl=57.29577951308232,Or=Math.PI/4,LA=Math.PI*2,hs=3.14159265359,jl={};jl.greenwich=0;jl.lisbon=-9.131906111111;jl.paris=2.337229166667;jl.bogota=-74.080916666667;jl.madrid=-3.687938888889;jl.rome=12.452333333333;jl.bern=7.439583333333;jl.jakarta=106.807719444444;jl.ferro=-17.666666666667;jl.brussels=4.367975;jl.stockholm=18.058277777778;jl.athens=23.7163375;jl.oslo=10.722916666667;const Adt={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var Aoe=/[\s_\-\/\(\)]/g;function r0(t,e){if(t[e])return t[e];for(var n=Object.keys(t),r=e.toLowerCase().replace(Aoe,""),i=-1,s,o;++i<n.length;)if(s=n[i],o=s.toLowerCase().replace(Aoe,""),o===r)return t[s]}function Wz(t){var e={},n=t.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var c=l.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),r,i,s,o={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*Ki},lat_1:function(a){e.lat1=a*Ki},lat_2:function(a){e.lat2=a*Ki},lat_ts:function(a){e.lat_ts=a*Ki},lon_0:function(a){e.long0=a*Ki},lon_1:function(a){e.long1=a*Ki},lon_2:function(a){e.long2=a*Ki},alpha:function(a){e.alpha=parseFloat(a)*Ki},gamma:function(a){e.rectified_grid_angle=parseFloat(a)*Ki},lonc:function(a){e.longc=a*Ki},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r:function(a){e.a=e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var l=r0(Adt,a);l&&(e.to_meter=l.to_meter)},from_greenwich:function(a){e.from_greenwich=a*Ki},pm:function(a){var l=r0(jl,a);e.from_greenwich=(l||parseFloat(a))*Ki},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in n)i=n[r],r in o?(s=o[r],typeof s=="function"?s(i):e[s]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=t,e}class ebe{static getId(e){const n=e.find(r=>Array.isArray(r)&&r[0]==="ID");return n&&n.length>=3?{authority:n[1],code:parseInt(n[2],10)}:null}static convertUnit(e,n="unit"){if(!e||e.length<3)return{type:n,name:"unknown",conversion_factor:null};const r=e[1],i=parseFloat(e[2])||null,s=e.find(a=>Array.isArray(a)&&a[0]==="ID"),o=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:n,name:r,conversion_factor:i,id:o}}static convertAxis(e){const n=e[1]||"Unknown";let r;const i=n.match(/^\((.)\)$/);if(i){const c=i[1].toUpperCase();if(c==="E")r="east";else if(c==="N")r="north";else if(c==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${c}`)}else r=e[2]?e[2].toLowerCase():"unknown";const s=e.find(c=>Array.isArray(c)&&c[0]==="ORDER"),o=s?parseInt(s[1],10):null,a=e.find(c=>Array.isArray(c)&&(c[0]==="LENGTHUNIT"||c[0]==="ANGLEUNIT"||c[0]==="SCALEUNIT")),l=this.convertUnit(a);return{name:n,direction:r,unit:l,order:o}}static extractAxes(e){return e.filter(n=>Array.isArray(n)&&n[0]==="AXIS").map(n=>this.convertAxis(n)).sort((n,r)=>(n.order||0)-(r.order||0))}static convert(e,n={}){switch(e[0]){case"PROJCRS":n.type="ProjectedCRS",n.name=e[1],n.base_crs=e.find(f=>Array.isArray(f)&&f[0]==="BASEGEOGCRS")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="BASEGEOGCRS")):null,n.conversion=e.find(f=>Array.isArray(f)&&f[0]==="CONVERSION")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="CONVERSION")):null;const r=e.find(f=>Array.isArray(f)&&f[0]==="CS");r&&(n.coordinate_system={type:r[1],axis:this.extractAxes(e)});const i=e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT");if(i){const f=this.convertUnit(i);n.coordinate_system.unit=f}n.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":n.type="GeographicCRS",n.name=e[1];const s=e.find(f=>Array.isArray(f)&&(f[0]==="DATUM"||f[0]==="ENSEMBLE"));if(s){const f=this.convert(s);s[0]==="ENSEMBLE"?n.datum_ensemble=f:n.datum=f;const g=e.find(y=>Array.isArray(y)&&y[0]==="PRIMEM");g&&g[1]!=="Greenwich"&&(f.prime_meridian={name:g[1],longitude:parseFloat(g[2])})}n.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},n.id=this.getId(e);break;case"DATUM":n.type="GeodeticReferenceFrame",n.name=e[1],n.ellipsoid=e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":n.type="DatumEnsemble",n.name=e[1],n.members=e.filter(f=>Array.isArray(f)&&f[0]==="MEMBER").map(f=>({type:"DatumEnsembleMember",name:f[1],id:this.getId(f)}));const o=e.find(f=>Array.isArray(f)&&f[0]==="ENSEMBLEACCURACY");o&&(n.accuracy=parseFloat(o[1]));const a=e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID");a&&(n.ellipsoid=this.convert(a)),n.id=this.getId(e);break;case"ELLIPSOID":n.type="Ellipsoid",n.name=e[1],n.semi_major_axis=parseFloat(e[2]),n.inverse_flattening=parseFloat(e[3]),e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT")&&this.convert(e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT"),n);break;case"CONVERSION":n.type="Conversion",n.name=e[1],n.method=e.find(f=>Array.isArray(f)&&f[0]==="METHOD")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="METHOD")):null,n.parameters=e.filter(f=>Array.isArray(f)&&f[0]==="PARAMETER").map(f=>this.convert(f));break;case"METHOD":n.type="Method",n.name=e[1],n.id=this.getId(e);break;case"PARAMETER":n.type="Parameter",n.name=e[1],n.value=parseFloat(e[2]),n.unit=this.convertUnit(e.find(f=>Array.isArray(f)&&(f[0]==="LENGTHUNIT"||f[0]==="ANGLEUNIT"||f[0]==="SCALEUNIT"))),n.id=this.getId(e);break;case"BOUNDCRS":n.type="BoundCRS";const l=e.find(f=>Array.isArray(f)&&f[0]==="SOURCECRS");if(l){const f=l.find(g=>Array.isArray(g));n.source_crs=f?this.convert(f):null}const c=e.find(f=>Array.isArray(f)&&f[0]==="TARGETCRS");if(c){const f=c.find(g=>Array.isArray(g));n.target_crs=f?this.convert(f):null}const u=e.find(f=>Array.isArray(f)&&f[0]==="ABRIDGEDTRANSFORMATION");u?n.transformation=this.convert(u):n.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(n.type="Transformation",n.name=e[1],n.method=e.find(f=>Array.isArray(f)&&f[0]==="METHOD")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="METHOD")):null,n.parameters=e.filter(f=>Array.isArray(f)&&(f[0]==="PARAMETER"||f[0]==="PARAMETERFILE")).map(f=>{if(f[0]==="PARAMETER")return this.convert(f);if(f[0]==="PARAMETERFILE")return{name:f[1],value:f[2],id:{authority:"EPSG",code:8656}}}),n.parameters.length===7){const f=n.parameters[6];f.name==="Scale difference"&&(f.value=Math.round((f.value-1)*1e12)/1e6)}n.id=this.getId(e);break;case"AXIS":n.coordinate_system||(n.coordinate_system={type:"unspecified",axis:[]}),n.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const h=this.convertUnit(e,"LinearUnit");n.coordinate_system&&n.coordinate_system.axis&&n.coordinate_system.axis.forEach(f=>{f.unit||(f.unit=h)}),h.conversion_factor&&h.conversion_factor!==1&&n.semi_major_axis&&(n.semi_major_axis={value:n.semi_major_axis,unit:h});break;default:n.keyword=e[0];break}return n}}class Idt extends ebe{static convert(e,n={}){return super.convert(e,n),n.coordinate_system&&n.coordinate_system.subtype==="Cartesian"&&delete n.coordinate_system,n.usage&&delete n.usage,n}}class Pdt extends ebe{static convert(e,n={}){super.convert(e,n);const r=e.find(s=>Array.isArray(s)&&s[0]==="CS");r&&(n.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});const i=e.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(i){const s=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),o=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),a=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");n.usage={},s&&(n.usage.scope=s[1]),o&&(n.usage.area=o[1]),a&&(n.usage.bbox=a.slice(1))}return n}}function Cdt(t){return t.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(t.find(e=>Array.isArray(e)&&e[0]==="CS")||t[0]==="BOUNDCRS"||t[0]==="PROJCRS"||t[0]==="GEOGCRS","2015")}function Rdt(t){return(Cdt(t)==="2019"?Pdt:Idt).convert(t)}function Mdt(t){const e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var DA=1,tbe=2,nbe=3,o5=4,rbe=5,Sq=-1,Ndt=/\s/,Odt=/[A-Za-z]/,Ldt=/[A-Za-z84_]/,UL=/[,\]]/,ibe=/[\d\.E\-\+]/;function Dp(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=DA}Dp.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==o5)for(;Ndt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case DA:return this.neutral(t);case tbe:return this.keyword(t);case o5:return this.quoted(t);case rbe:return this.afterquote(t);case nbe:return this.number(t);case Sq:return}};Dp.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=o5;return}if(UL.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Dp.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=DA;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=DA,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Sq);return}};Dp.prototype.number=function(t){if(ibe.test(t)){this.word+=t;return}if(UL.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Dp.prototype.quoted=function(t){if(t==='"'){this.state=rbe;return}this.word+=t};Dp.prototype.keyword=function(t){if(Ldt.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=DA;return}if(UL.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Dp.prototype.neutral=function(t){if(Odt.test(t)){this.word=t,this.state=tbe;return}if(t==='"'){this.word="",this.state=o5;return}if(ibe.test(t)){this.word=t,this.state=nbe;return}if(UL.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Dp.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Sq)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Ddt(t){var e=new Dp(t);return e.output()}function fF(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce(function(s,o){return qx(o,s),s},r);e&&(t[e]=i)}function qx(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},qx(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var r;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&qx(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&qx(t[3],e[n]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],fF(e,n,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],fF(e,n,t),e[n].type=n;return;default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return qx(t,e[n]);return fF(e,n,t)}}var jdt=.017453292519943295;function Yu(t){return t*jdt}function sbe(t){const e=(t.projName||"").toLowerCase().replace(/_/g," ");!t.long0&&t.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(t.lat0=Yu(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1):!t.lat_ts&&t.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(t.lat_ts=t.lat0,t.lat0=Yu(t.lat0>0?90:-90),delete t.lat1)}function Ioe(t){let e={units:null,to_meter:void 0};return typeof t=="string"?(e.units=t.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function Poe(t){return typeof t=="object"?t.value*t.unit.conversion_factor:t}function Coe(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=Poe(t.ellipsoid.semi_major_axis),t.ellipsoid.inverse_flattening!==void 0?e.rf=t.ellipsoid.inverse_flattening:t.ellipsoid.semi_major_axis!==void 0&&t.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-Poe(t.ellipsoid.semi_minor_axis))))}function a5(t,e={}){return!t||typeof t!="object"?t:t.type==="BoundCRS"?(a5(t.source_crs,e),t.transformation&&(t.transformation.method&&t.transformation.method.name==="NTv2"?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(n=>n.value)),e):(Object.keys(t).forEach(n=>{const r=t[n];if(r!==null)switch(n){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,Coe(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,Coe(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{const s=i.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",r.unit){const{units:i,to_meter:s}=Ioe(r.unit);e.units=i,e.to_meter=s}else if(r.axis[0]&&r.axis[0].unit){const{units:i,to_meter:s}=Ioe(r.axis[0].unit);e.units=i,e.to_meter=s}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{const s=i.name.toLowerCase().replace(/\s+/g,"_"),o=i.value;i.unit&&i.unit.conversion_factor?e[s]=o*i.unit.conversion_factor:i.unit==="degree"?e[s]=o*Math.PI/180:e[s]=o});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":a5(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),sbe(e),e)}var $dt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Fdt(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],e.length===3&&(t[n]=e[2](t[n])))}function obe(t){for(var e=Object.keys(t),n=0,r=e.length;n<r;++n){var i=e[n];$dt.indexOf(i)!==-1&&Vdt(t[i]),typeof t[i]=="object"&&obe(t[i])}}function Vdt(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",r=0,i=t.AXIS.length;r<i;++r){var s=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?n+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?n+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?n+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;t.type==="GEOGCS"&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=Yu(t.rectified_grid_angle));function a(u){var h=t.to_meter||1;return u*h}var l=function(u){return Fdt(t,u)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Yu],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Yu],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",Yu],["lat0","latitude_of_origin",Yu],["lat0","standard_parallel_1",Yu],["lat1","standard_parallel_1",Yu],["lat2","standard_parallel_2",Yu],["azimuth","Azimuth"],["alpha","azimuth",Yu],["srsCode","name"]];c.forEach(l),sbe(t)}function l5(t){if(typeof t=="object")return a5(t);const e=Mdt(t);var n=Ddt(t);if(e==="WKT2"){const s=Rdt(n);return a5(s)}var r=n[0],i={};return qx(n,i),obe(i),i[r]}function Po(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?Po[t]=Wz(arguments[1]):Po[t]=l5(arguments[1]):n&&typeof n=="object"&&!("projName"in n)?Po[t]=l5(arguments[1]):(Po[t]=n,n||delete Po[t])}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(r){return Array.isArray(r)?Po.apply(e,r):Po(r)});if(typeof t=="string"){if(t in Po)return Po[t]}else"EPSG"in t?Po["EPSG:"+t.EPSG]=t:"ESRI"in t?Po["ESRI:"+t.ESRI]=t:"IAU2000"in t?Po["IAU2000:"+t.IAU2000]=t:console.log(t);return}}wdt(Po);function zdt(t){return typeof t=="string"}function Gdt(t){return t in Po}function Udt(t){return t.indexOf("+")!==0&&t.indexOf("[")!==-1||typeof t=="object"&&!("srsCode"in t)}var Bdt=["3857","900913","3785","102113"];function Wdt(t){var e=r0(t,"authority");if(e){var n=r0(e,"epsg");return n&&Bdt.indexOf(n)>-1}}function Hdt(t){var e=r0(t,"extension");if(e)return r0(e,"proj4")}function qdt(t){return t[0]==="+"}function Kdt(t){if(zdt(t)){if(Gdt(t))return Po[t];if(Udt(t)){var e=l5(t);if(Wdt(e))return Po["EPSG:3857"];var n=Hdt(e);return n?Wz(n):e}if(qdt(t))return Wz(t)}else return"projName"in t?t:l5(t)}function Roe(t,e){t=t||{};var n,r;if(!e)return t;for(r in e)n=e[r],n!==void 0&&(t[r]=n);return t}function Hd(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function sP(t){return t<0?-1:1}function Pt(t,e){return e||Math.abs(t)<=hs?t:t-sP(t)*LA}function mh(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(ot-e))/r}function jA(t,e){for(var n=.5*t,r,i,s=ot-2*Math.atan(e),o=0;o<=15;o++)if(r=t*Math.sin(s),i=ot-2*Math.atan(e*Math.pow((1-r)/(1+r),n))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function Ydt(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Hd(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Xdt(t){var e=t.x,n=t.y;if(n*Tl>90&&n*Tl<-90&&e*Tl>180&&e*Tl<-180)return null;var r,i;if(Math.abs(Math.abs(n)-ot)<=St)return null;if(this.sphere)r=this.x0+this.a*this.k0*Pt(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(Or+.5*n));else{var s=Math.sin(n),o=mh(this.e,n,s);r=this.x0+this.a*this.k0*Pt(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(o)}return t.x=r,t.y=i,t}function Zdt(t){var e=t.x-this.x0,n=t.y-this.y0,r,i;if(this.sphere)i=ot-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var s=Math.exp(-n/(this.a*this.k0));if(i=jA(this.e,s),i===-9999)return null}return r=Pt(this.long0+e/(this.a*this.k0),this.over),t.x=r,t.y=i,t}var Jdt=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const Qdt={init:Ydt,forward:Xdt,inverse:Zdt,names:Jdt};function eft(){}function Moe(t){return t}var abe=["longlat","identity"];const tft={init:eft,forward:Moe,inverse:Moe,names:abe};var nft=[Qdt,tft],Iy={},Kx=[];function lbe(t,e){var n=Kx.length;return t.names?(Kx[n]=t,t.names.forEach(function(r){Iy[r.toLowerCase()]=n}),this):(console.log(e),!0)}function cbe(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function rft(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Iy[e]<"u"&&Kx[Iy[e]]||(e=cbe(e),e in Iy&&Kx[Iy[e]]))return Kx[Iy[e]]}function ift(){nft.forEach(lbe)}const sft={start:ift,add:lbe,get:rft};var ube={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const oft=ube.WGS84;function aft(t,e,n,r){var i=t*t,s=e*e,o=(i-s)/i,a=0;r?(t*=1-o*(Sdt+o*(Tdt+o*kdt)),i=t*t,o=0):a=Math.sqrt(o);var l=(i-s)/s;return{es:o,e:a,ep2:l}}function lft(t,e,n,r,i){if(!t){var s=r0(ube,r);s||(s=oft),t=s.a,e=s.b,n=s.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<St)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}var D3={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var cft in D3){var pF=D3[cft];pF.datumName&&(D3[pF.datumName]=pF)}function uft(t,e,n,r,i,s,o){var a={};return t===void 0||t==="none"?a.datum_type=Bz:a.datum_type=bdt,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=rv),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=iv,a.datum_params[3]*=rk,a.datum_params[4]*=rk,a.datum_params[5]*=rk,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=Aw,a.grids=o),a.a=n,a.b=r,a.es=i,a.ep2=s,a}var Tq={};function hft(t,e,n){return e instanceof ArrayBuffer?dft(t,e,n):{ready:fft(t,e)}}function dft(t,e,n){var r=!0;n!==void 0&&n.includeErrorFields===!1&&(r=!1);var i=new DataView(e),s=gft(i),o=yft(i,s),a=vft(i,o,s,r),l={header:o,subgrids:a};return Tq[t]=l,l}async function fft(t,e){for(var n=[],r=await e.getImageCount(),i=r-1;i>=0;i--){var s=await e.getImage(i),o=await s.readRasters(),a=o,l=[s.getWidth(),s.getHeight()],c=s.getBoundingBox().map(Noe),u=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(Noe),h=c[0]+(l[0]-1)*u[0],f=c[3]-(l[1]-1)*u[1],g=a[0],y=a[1],_=[];for(let A=l[1]-1;A>=0;A--)for(let I=l[0]-1;I>=0;I--){var b=A*l[0]+I;_.push([-vg(y[b]),vg(g[b])])}n.push({del:u,lim:l,ll:[-h,f],cvs:_})}var T={header:{nSubgrids:r},subgrids:n};return Tq[t]=T,T}function pft(t){if(t===void 0)return null;var e=t.split(",");return e.map(mft)}function mft(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Tq[t]||null,isNull:!1}}function Noe(t){return t*Math.PI/180}function vg(t){return t/3600*Math.PI/180}function gft(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function yft(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Hz(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function Hz(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function vft(t,e,n,r){for(var i=176,s=[],o=0;o<e.nSubgrids;o++){var a=xft(t,i,n),l=wft(t,i,a,n,r),c=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),u=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);s.push({ll:[vg(a.lowerLongitude),vg(a.lowerLatitude)],del:[vg(a.longitudeInterval),vg(a.latitudeInterval)],lim:[c,u],count:a.gridNodeCount,cvs:_ft(l)});var h=16;r===!1&&(h=8),i+=176+a.gridNodeCount*h}return s}function _ft(t){return t.map(function(e){return[vg(e.longitudeShift),vg(e.latitudeShift)]})}function xft(t,e,n){return{name:Hz(t,e+8,e+16).trim(),parent:Hz(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function wft(t,e,n,r,i){var s=e+176,o=16;i===!1&&(o=8);for(var a=[],l=0;l<n.gridNodeCount;l++){var c={latitudeShift:t.getFloat32(s+l*o,r),longitudeShift:t.getFloat32(s+l*o+4,r)};i!==!1&&(c.latitudeAccuracy=t.getFloat32(s+l*o+8,r),c.longitudeAccuracy=t.getFloat32(s+l*o+12,r)),a.push(c)}return a}function pu(t,e){if(!(this instanceof pu))return new pu(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(c){if(c)throw c};var n=Kdt(t);if(typeof n!="object"){e("Could not parse to valid json: "+t);return}var r=pu.projections.get(n.projName);if(!r){e("Could not get projection name from: "+t);return}if(n.datumCode&&n.datumCode!=="none"){var i=r0(D3,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s=lft(n.a,n.b,n.rf,n.ellps,n.sphere),o=aft(s.a,s.b,s.rf,n.R_A),a=pft(n.nadgrids),l=n.datum||uft(n.datumCode,n.datum_params,s.a,s.b,o.es,o.ep2,a);Roe(this,n),Roe(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}pu.projections=sft;pu.projections.start();function bft(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===rv?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===iv?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function hbe(t,e,n){var r=t.x,i=t.y,s=t.z?t.z:0,o,a,l,c;if(i<-ot&&i>-1.001*ot)i=-ot;else if(i>ot&&i<1.001*ot)i=ot;else{if(i<-ot)return{x:-1/0,y:-1/0,z:t.z};if(i>ot)return{x:1/0,y:1/0,z:t.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(i),c=Math.cos(i),l=a*a,o=n/Math.sqrt(1-e*l),{x:(o+s)*c*Math.cos(r),y:(o+s)*c*Math.sin(r),z:(o*(1-e)+s)*a}}function dbe(t,e,n,r){var i=1e-12,s=i*i,o=30,a,l,c,u,h,f,g,y,_,b,T,A,I,P=t.x,M=t.y,V=t.z?t.z:0,C,N,O;if(a=Math.sqrt(P*P+M*M),l=Math.sqrt(P*P+M*M+V*V),a/n<i){if(C=0,l/n<i)return N=ot,O=-r,{x:t.x,y:t.y,z:t.z}}else C=Math.atan2(M,P);c=V/l,u=a/l,h=1/Math.sqrt(1-e*(2-e)*u*u),y=u*(1-e)*h,_=c*h,I=0;do I++,g=n/Math.sqrt(1-e*_*_),O=a*y+V*_-g*(1-e*_*_),f=e*g/(g+O),h=1/Math.sqrt(1-f*(2-f)*u*u),b=u*(1-f)*h,T=c*h,A=T*y-b*_,y=b,_=T;while(A*A>s&&I<o);return N=Math.atan(T/Math.abs(b)),{x:C,y:N,z:O}}function Eft(t,e,n){if(e===rv)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===iv){var r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6];return{x:c*(t.x-l*t.y+a*t.z)+r,y:c*(l*t.x+t.y-o*t.z)+i,z:c*(-a*t.x+o*t.y+t.z)+s}}}function Sft(t,e,n){if(e===rv)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===iv){var r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],u=(t.x-r)/c,h=(t.y-i)/c,f=(t.z-s)/c;return{x:u+l*h-a*f,y:-l*u+h+o*f,z:a*u-o*h+f}}}function DR(t){return t===rv||t===iv}function Tft(t,e,n){if(bft(t,e)||t.datum_type===Bz||e.datum_type===Bz)return n;var r=t.a,i=t.es;if(t.datum_type===Aw){var s=Ooe(t,!1,n);if(s!==0)return;r=Toe,i=koe}var o=e.a,a=e.b,l=e.es;if(e.datum_type===Aw&&(o=Toe,a=Edt,l=koe),i===l&&r===o&&!DR(t.datum_type)&&!DR(e.datum_type))return n;if(n=hbe(n,i,r),DR(t.datum_type)&&(n=Eft(n,t.datum_type,t.datum_params)),DR(e.datum_type)&&(n=Sft(n,e.datum_type,e.datum_params)),n=dbe(n,l,o,a),e.datum_type===Aw){var c=Ooe(e,!0,n);if(c!==0)return}return n}function Ooe(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},s=[];e:for(var o=0;o<t.grids.length;o++){var a=t.grids[o];if(s.push(a.name),a.isNull){i=r;break}if(a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,c=0,u=l.length;c<u;c++){var h=l[c],f=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,g=h.ll[0]-f,y=h.ll[1]-f,_=h.ll[0]+(h.lim[0]-1)*h.del[0]+f,b=h.ll[1]+(h.lim[1]-1)*h.del[1]+f;if(!(y>r.y||g>r.x||b<r.y||_<r.x)&&(i=kft(r,e,h),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Tl+" "+r.y*Tl+" tried: '"+s+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function kft(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=Pt(i.x-Math.PI)+Math.PI;var s=Loe(i,n);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var o=9,a=1e-12,l,c;do{if(c=Loe(s,n),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(c.x+s.x),y:i.y-(c.y+s.y)},s.x+=l.x,s.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=Pt(s.x+n.ll[0]),r.y=s.y+n.ll[1]}else isNaN(s.x)||(r.x=t.x+s.x,r.y=t.y+s.y);return r}function Loe(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},r={x:Math.floor(n.x),y:Math.floor(n.y)},i={x:n.x-1*r.x,y:n.y-1*r.y},s={x:Number.NaN,y:Number.NaN},o;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;o=r.y*e.lim[0]+r.x;var a={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var c={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var u={x:e.cvs[o][0],y:e.cvs[o][1]},h=i.x*i.y,f=i.x*(1-i.y),g=(1-i.x)*(1-i.y),y=(1-i.x)*i.y;return s.x=g*a.x+f*l.x+y*u.x+h*c.x,s.y=g*a.y+f*l.y+y*u.y+h*c.y,s}function Doe(t,e,n){var r=n.x,i=n.y,s=n.z||0,o,a,l,c={};for(l=0;l<3;l++)if(!(e&&l===2&&n.z===void 0))switch(l===0?(o=r,"ew".indexOf(t.axis[l])!==-1?a="x":a="y"):l===1?(o=i,"ns".indexOf(t.axis[l])!==-1?a="y":a="x"):(o=s,a="z"),t.axis[l]){case"e":c[a]=o;break;case"w":c[a]=-o;break;case"n":c[a]=o;break;case"s":c[a]=-o;break;case"u":n[a]!==void 0&&(c.z=o);break;case"d":n[a]!==void 0&&(c.z=-o);break;default:return null}return c}function fbe(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Aft(t){joe(t.x),joe(t.y)}function joe(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Ift(t,e){return(t.datum.datum_type===rv||t.datum.datum_type===iv||t.datum.datum_type===Aw)&&e.datumCode!=="WGS84"||(e.datum.datum_type===rv||e.datum.datum_type===iv||e.datum.datum_type===Aw)&&t.datumCode!=="WGS84"}function c5(t,e,n,r){var i;Array.isArray(n)?n=fbe(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var s=n.z!==void 0;if(Aft(n),t.datum&&e.datum&&Ift(t,e)&&(i=new pu("WGS84"),n=c5(t,i,n,r),t=i),r&&t.axis!=="enu"&&(n=Doe(t,!1,n)),t.projName==="longlat")n={x:n.x*Ki,y:n.y*Ki,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=Tft(t.datum,e.datum,n),!!n)return n=n,e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*Tl,y:n.y*Tl,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&e.axis!=="enu"?Doe(e,!0,n):(n&&!s&&delete n.z,n)}var $oe=pu("WGS84");function mF(t,e,n,r){var i,s,o;return Array.isArray(n)?(i=c5(t,e,n,r)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(n.slice(3)):[i.x,i.y,n[2]].concat(n.slice(3)):[i.x,i.y].concat(n.slice(2)):[i.x,i.y]):(s=c5(t,e,n,r),o=Object.keys(n),o.length===2||o.forEach(function(a){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;s[a]=n[a]}),s)}function jR(t){return t instanceof pu?t:typeof t=="object"&&"oProj"in t?t.oProj:pu(t)}function Pft(t,e,n){var r,i,s=!1,o;return typeof e>"u"?(i=jR(t),r=$oe,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,i=jR(t),r=$oe,s=!0),r||(r=jR(t)),i||(i=jR(e)),n?mF(r,i,n):(o={forward:function(a,l){return mF(r,i,a,l)},inverse:function(a,l){return mF(i,r,a,l)}},s&&(o.oProj=i),o)}var Foe=6,pbe="AJSAJS",mbe="AFAFAF",Yx=65,il=73,Kc=79,sT=86,oT=90;const Cft={forward:gbe,inverse:Rft,toPoint:ybe};function gbe(t,e){return e=e||5,Oft(Mft({lat:t[1],lon:t[0]}),e)}function Rft(t){var e=kq(_be(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function ybe(t){var e=kq(_be(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function gF(t){return t*(Math.PI/180)}function Voe(t){return 180*(t/Math.PI)}function Mft(t){var e=t.lat,n=t.lon,r=6378137,i=.00669438,s=.9996,o,a,l,c,u,h,f,g=gF(e),y=gF(n),_,b;b=Math.floor((n+180)/6)+1,n===180&&(b=60),e>=56&&e<64&&n>=3&&n<12&&(b=32),e>=72&&e<84&&(n>=0&&n<9?b=31:n>=9&&n<21?b=33:n>=21&&n<33?b=35:n>=33&&n<42&&(b=37)),o=(b-1)*6-180+3,_=gF(o),a=i/(1-i),l=r/Math.sqrt(1-i*Math.sin(g)*Math.sin(g)),c=Math.tan(g)*Math.tan(g),u=a*Math.cos(g)*Math.cos(g),h=Math.cos(g)*(y-_),f=r*((1-i/4-3*i*i/64-5*i*i*i/256)*g-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*g)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*g)-35*i*i*i/3072*Math.sin(6*g));var T=s*l*(h+(1-c+u)*h*h*h/6+(5-18*c+c*c+72*u-58*a)*h*h*h*h*h/120)+5e5,A=s*(f+l*Math.tan(g)*(h*h/2+(5-c+9*u+4*u*u)*h*h*h*h/24+(61-58*c+c*c+600*u-330*a)*h*h*h*h*h*h/720));return e<0&&(A+=1e7),{northing:Math.round(A),easting:Math.round(T),zoneNumber:b,zoneLetter:Nft(e)}}function kq(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var s=.9996,o=6378137,a=.00669438,l,c=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),u,h,f,g,y,_,b,T,A,I=n-5e5,P=e;r<"N"&&(P-=1e7),b=(i-1)*6-180+3,l=a/(1-a),_=P/s,T=_/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),A=T+(3*c/2-27*c*c*c/32)*Math.sin(2*T)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*T)+151*c*c*c/96*Math.sin(6*T),u=o/Math.sqrt(1-a*Math.sin(A)*Math.sin(A)),h=Math.tan(A)*Math.tan(A),f=l*Math.cos(A)*Math.cos(A),g=o*(1-a)/Math.pow(1-a*Math.sin(A)*Math.sin(A),1.5),y=I/(u*s);var M=A-u*Math.tan(A)/g*(y*y/2-(5+3*h+10*f-4*f*f-9*l)*y*y*y*y/24+(61+90*h+298*f+45*h*h-252*l-3*f*f)*y*y*y*y*y*y/720);M=Voe(M);var V=(y-(1+2*h+f)*y*y*y/6+(5-2*f+28*h-3*f*f+8*l+24*h*h)*y*y*y*y*y/120)/Math.cos(A);V=b+Voe(V);var C;if(t.accuracy){var N=kq({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});C={top:N.lat,right:N.lon,bottom:M,left:V}}else C={lat:M,lon:V};return C}function Nft(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Oft(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+Lft(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}function Lft(t,e,n){var r=vbe(n),i=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return Dft(i,s,r)}function vbe(t){var e=t%Foe;return e===0&&(e=Foe),e}function Dft(t,e,n){var r=n-1,i=pbe.charCodeAt(r),s=mbe.charCodeAt(r),o=i+t-1,a=s+e,l=!1;o>oT&&(o=o-oT+Yx-1,l=!0),(o===il||i<il&&o>il||(o>il||i<il)&&l)&&o++,(o===Kc||i<Kc&&o>Kc||(o>Kc||i<Kc)&&l)&&(o++,o===il&&o++),o>oT&&(o=o-oT+Yx-1),a>sT?(a=a-sT+Yx-1,l=!0):l=!1,(a===il||s<il&&a>il||(a>il||s<il)&&l)&&a++,(a===Kc||s<Kc&&a>Kc||(a>Kc||s<Kc)&&l)&&(a++,a===il&&a++),a>sT&&(a=a-sT+Yx-1);var c=String.fromCharCode(o)+String.fromCharCode(a);return c}function _be(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,r="",i,s=0;!/[A-Z]/.test(i=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=i,s++}var o=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+t;n=t.substring(s,s+=2);for(var l=vbe(o),c=jft(n.charAt(0),l),u=$ft(n.charAt(1),l);u<Fft(a);)u+=2e6;var h=e-s;if(h%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var f=h/2,g=0,y=0,_,b,T,A,I;return f>0&&(_=1e5/Math.pow(10,f),b=t.substring(s,s+f),g=parseFloat(b)*_,T=t.substring(s+f),y=parseFloat(T)*_),A=g+c,I=y+u,{easting:A,northing:I,zoneLetter:a,zoneNumber:o,accuracy:_}}function jft(t,e){for(var n=pbe.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(n++,n===il&&n++,n===Kc&&n++,n>oT){if(i)throw"Bad character: "+t;n=Yx,i=!0}r+=1e5}return r}function $ft(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=mbe.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(n++,n===il&&n++,n===Kc&&n++,n>sT){if(i)throw"Bad character: "+t;n=Yx,i=!0}r+=1e5}return r}function Fft(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Q2(t,e,n){if(!(this instanceof Q2))return new Q2(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var r=t.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Q2.fromMGRS=function(t){return new Q2(ybe(t))};Q2.prototype.toMGRS=function(t){return gbe([this.x,this.y],t)};var Vft=1,zft=.25,zoe=.046875,Goe=.01953125,Uoe=.01068115234375,Gft=.75,Uft=.46875,Bft=.013020833333333334,Wft=.007120768229166667,Hft=.3645833333333333,qft=.005696614583333333,Kft=.3076171875;function Aq(t){var e=[];e[0]=Vft-t*(zft+t*(zoe+t*(Goe+t*Uoe))),e[1]=t*(Gft-t*(zoe+t*(Goe+t*Uoe)));var n=t*t;return e[2]=n*(Uft-t*(Bft+t*Wft)),n*=t,e[3]=n*(Hft-t*qft),e[4]=n*t*Kft,e}function $b(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var Yft=20;function Iq(t,e,n){for(var r=1/(1-e),i=t,s=Yft;s;--s){var o=Math.sin(i),a=1-e*o*o;if(a=($b(i,o,Math.cos(i),n)-t)*(a*Math.sqrt(a))*r,i-=a,Math.abs(a)<St)return i}return i}function Xft(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=Aq(this.es),this.ml0=$b(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function Zft(t){var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i,s,o,a=Math.sin(n),l=Math.cos(n);if(this.es){var u=l*r,h=Math.pow(u,2),f=this.ep2*Math.pow(l,2),g=Math.pow(f,2),y=Math.abs(l)>St?Math.tan(n):0,_=Math.pow(y,2),b=Math.pow(_,2);i=1-this.es*Math.pow(a,2),u=u/Math.sqrt(i);var T=$b(n,a,l,this.en);s=this.a*(this.k0*u*(1+h/6*(1-_+f+h/20*(5-18*_+b+14*f-58*_*f+h/42*(61+179*b-b*_-479*_)))))+this.x0,o=this.a*(this.k0*(T-this.ml0+a*r*u/2*(1+h/12*(5-_+9*f+4*g+h/30*(61+b-58*_+270*f-330*_*f+h/56*(1385+543*b-b*_-3111*_))))))+this.y0}else{var c=l*Math.sin(r);if(Math.abs(Math.abs(c)-1)<St)return 93;if(s=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,o=l*Math.cos(r)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(o),c>=1){if(c-1>St)return 93;o=0}else o=Math.acos(o);n<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=s,t.y=o,t}function Jft(t){var e,n,r,i,s=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,n=Iq(e,this.es,this.en),Math.abs(n)<ot){var h=Math.sin(n),f=Math.cos(n),g=Math.abs(f)>St?Math.tan(n):0,y=this.ep2*Math.pow(f,2),_=Math.pow(y,2),b=Math.pow(g,2),T=Math.pow(b,2);e=1-this.es*Math.pow(h,2);var A=s*Math.sqrt(e)/this.k0,I=Math.pow(A,2);e=e*g,r=n-e*I/(1-this.es)*.5*(1-I/12*(5+3*b-9*y*b+y-4*_-I/30*(61+90*b-252*y*b+45*T+46*y-I/56*(1385+3633*b+4095*T+1574*T*b)))),i=Pt(this.long0+A*(1-I/6*(1+2*b+y-I/20*(5+28*b+24*T+8*y*b+6*y-I/42*(61+662*b+1320*T+720*T*b))))/f,this.over)}else r=ot*sP(o),i=0;else{var a=Math.exp(s/this.k0),l=.5*(a-1/a),c=this.lat0+o/this.k0,u=Math.cos(c);e=Math.sqrt((1-Math.pow(u,2))/(1+Math.pow(l,2))),r=Math.asin(e),o<0&&(r=-r),l===0&&u===0?i=0:i=Pt(Math.atan2(l,u)+this.long0,this.over)}return t.x=i,t.y=r,t}var Qft=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const j3={init:Xft,forward:Zft,inverse:Jft,names:Qft};function xbe(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function xl(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function ept(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function tpt(t){var e=Math.abs(t);return e=ept(e*(1+e/(xl(1,e)+1))),t<0?-e:e}function Pq(t,e){for(var n=2*Math.cos(2*e),r=t.length-1,i=t[r],s=0,o;--r>=0;)o=-s+n*i+t[r],s=i,i=o;return e+o*Math.sin(2*e)}function npt(t,e){for(var n=2*Math.cos(e),r=t.length-1,i=t[r],s=0,o;--r>=0;)o=-s+n*i+t[r],s=i,i=o;return Math.sin(e)*o}function rpt(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function wbe(t,e,n){for(var r=Math.sin(e),i=Math.cos(e),s=xbe(n),o=rpt(n),a=2*i*o,l=-2*r*s,c=t.length-1,u=t[c],h=0,f=0,g=0,y,_;--c>=0;)y=f,_=h,f=u,h=g,u=-y+a*f-l*h+t[c],g=-_+l*f+a*h;return a=r*o,l=i*s,[a*u-l*g,a*g+l*u]}function ipt(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(j3.init.apply(this),this.forward=j3.forward,this.inverse=j3.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var r=Pq(this.cbg,this.lat0);this.Zb=-this.Qn*(r+npt(this.gtu,2*r))}function spt(t){var e=Pt(t.x-this.long0,this.over),n=t.y;n=Pq(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),s=Math.sin(e),o=Math.cos(e);n=Math.atan2(r,o*i),e=Math.atan2(s*i,xl(r,i*o)),e=tpt(Math.tan(e));var a=wbe(this.gtu,2*n,2*e);n=n+a[0],e=e+a[1];var l,c;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*n+this.Zb)+this.y0):(l=1/0,c=1/0),t.x=l,t.y=c,t}function opt(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var s=wbe(this.utg,2*n,2*e);n=n+s[0],e=e+s[1],e=Math.atan(xbe(e));var o=Math.sin(n),a=Math.cos(n),l=Math.sin(e),c=Math.cos(e);n=Math.atan2(o*c,xl(l,c*a)),e=Math.atan2(l,c*a),r=Pt(e+this.long0,this.over),i=Pq(this.cgb,n)}else r=1/0,i=1/0;return t.x=r,t.y=i,t}var apt=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const $3={init:ipt,forward:spt,inverse:opt,names:apt};function lpt(t,e){if(t===void 0){if(t=Math.floor((Pt(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var cpt="etmerc";function upt(){var t=lpt(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Ki,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,$3.init.apply(this),this.forward=$3.forward,this.inverse=$3.inverse}var hpt=["Universal Transverse Mercator System","utm"];const dpt={init:upt,names:hpt,dependsOn:cpt};function Cq(t,e){return Math.pow((1-t)/(1+t),e)}var fpt=20;function ppt(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Or)/(Math.pow(Math.tan(.5*this.lat0+Or),this.C)*Cq(this.e*t,this.ratexp))}function mpt(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+Or),this.C)*Cq(this.e*Math.sin(n),this.ratexp))-ot,t.x=this.C*e,t}function gpt(t){for(var e=1e-14,n=t.x/this.C,r=t.y,i=Math.pow(Math.tan(.5*r+Or)/this.K,1/this.C),s=fpt;s>0&&(r=2*Math.atan(i*Cq(this.e*Math.sin(t.y),-.5*this.e))-ot,!(Math.abs(r-t.y)<e));--s)t.y=r;return s?(t.x=n,t.y=r,t):null}const Rq={init:ppt,forward:mpt,inverse:gpt};function ypt(){Rq.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function vpt(t){var e,n,r,i;return t.x=Pt(t.x-this.long0,this.over),Rq.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function _pt(t){var e,n,r,i,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=xl(t.x,t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),n=Math.cos(o),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),r=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,Rq.inverse.apply(this,[t]),t.x=Pt(t.x+this.long0,this.over),t}var xpt=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const wpt={init:ypt,forward:vpt,inverse:_pt,names:xpt};function Mq(t,e,n){return e*=n,Math.tan(.5*(ot+t))*Math.pow((1-e)/(1+e),.5*n)}function bpt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=St&&(this.k0=.5*(1+sP(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=St&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=St&&Math.abs(Math.cos(this.lat_ts))>St&&(this.k0=.5*this.cons*Hd(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/mh(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Hd(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(Mq(this.lat0,this.sinlat0,this.e))-ot,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Ept(t){var e=t.x,n=t.y,r=Math.sin(n),i=Math.cos(n),s,o,a,l,c,u,h=Pt(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=St&&Math.abs(n+this.lat0)<=St?(t.x=NaN,t.y=NaN,t):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(h)),t.x=this.a*s*i*Math.sin(h)+this.x0,t.y=this.a*s*(this.coslat0*r-this.sinlat0*i*Math.cos(h))+this.y0,t):(o=2*Math.atan(Mq(n,r,this.e))-ot,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=St?(c=mh(this.e,n*this.con,this.con*r),u=2*this.a*this.k0*c/this.cons,t.x=this.x0+u*Math.sin(e-this.long0),t.y=this.y0-this.con*u*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<St?(s=2*this.a*this.k0/(1+l*Math.cos(h)),t.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(h))),t.y=s*(this.cosX0*a-this.sinX0*l*Math.cos(h))+this.y0),t.x=s*l*Math.sin(h)+this.x0,t))}function Spt(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,n=this.lat0,o<=St?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<St?this.lat0>0?e=Pt(this.long0+Math.atan2(t.x,-1*t.y),this.over):e=Pt(this.long0+Math.atan2(t.x,t.y),this.over):e=Pt(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a)),this.over),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=St){if(o<=St)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=o*this.cons/(2*this.a*this.k0),n=this.con*jA(this.e,r),e=this.con*Pt(this.con*this.long0+Math.atan2(t.x,-1*t.y),this.over)}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=St?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/o),e=Pt(this.long0+Math.atan2(t.x*Math.sin(i),o*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)),this.over)),n=-1*jA(this.e,Math.tan(.5*(ot+s)));return t.x=e,t.y=n,t}var Tpt=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const kpt={init:bpt,forward:Ept,inverse:Spt,names:Tpt,ssfn_:Mq};function Apt(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=this.rf,i=1/r,s=2*i-Math.pow(i,2),o=this.e=Math.sqrt(s);this.R=this.k0*n*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),c=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*l+this.alpha*o/2*c}function Ipt(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t}function Ppt(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+o/this.alpha,l=0,c=s,u=-1e3,h=0;Math.abs(c-u)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=c,t}var Cpt=["somerc"];const Rpt={init:Apt,forward:Ipt,inverse:Ppt,names:Cpt};var Tx=1e-7;function Mpt(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.projName=="object"?Object.keys(t.projName)[0]:t.projName;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1||e.indexOf(cbe(n))!==-1}function Npt(){var t,e,n,r,i,s,o,a,l,c,u=0,h,f=0,g=0,y=0,_=0,b=0,T=0;this.no_off=Mpt(this),this.no_rot="no_rot"in this;var A=!1;"alpha"in this&&(A=!0);var I=!1;if("rectified_grid_angle"in this&&(I=!0),A&&(T=this.alpha),I&&(u=this.rectified_grid_angle),A||I)f=this.longc;else if(g=this.long1,_=this.lat1,y=this.long2,b=this.lat2,Math.abs(_-b)<=Tx||(t=Math.abs(_))<=Tx||Math.abs(t-ot)<=Tx||Math.abs(Math.abs(this.lat0)-ot)<=Tx||Math.abs(Math.abs(b)-ot)<=Tx)throw new Error;var P=1-this.es;e=Math.sqrt(P),Math.abs(this.lat0)>St?(a=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*a*a,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/P),this.A=this.B*this.k0*e/t,r=this.B*e/(n*Math.sqrt(t)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(mh(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),A||I?(A?(h=Math.asin(Math.sin(T)/r),I||(u=T)):(h=u,T=Math.asin(r*Math.sin(h))),this.lam0=f-Math.asin(.5*(i-1/i)*Math.tan(h))/this.B):(s=Math.pow(mh(this.e,_,Math.sin(_)),this.B),o=Math.pow(mh(this.e,b,Math.sin(b)),this.B),i=this.E/s,l=(o-s)/(o+s),c=this.E*this.E,c=(c-o*s)/(c+o*s),t=g-y,t<-Math.PI?y-=LA:t>Math.PI&&(y+=LA),this.lam0=Pt(.5*(g+y)-Math.atan(c*Math.tan(.5*this.B*(g-y))/l)/this.B,this.over),h=Math.atan(2*Math.sin(this.B*Pt(g-this.lam0,this.over))/(i-1/i)),u=T=Math.asin(r*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(T))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(Or-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(Or+i))}function Opt(t){var e={},n,r,i,s,o,a,l,c;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-ot)>St){if(o=this.E/Math.pow(mh(this.e,t.y,Math.sin(t.y)),this.B),a=1/o,n=.5*(o-a),r=.5*(o+a),s=Math.sin(this.B*t.x),i=(n*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(i)-1)<St)throw new Error;c=.5*this.ArB*Math.log((1-i)/(1+i)),a=Math.cos(this.B*t.x),Math.abs(a)<Tx?l=this.A*t.x:l=this.ArB*Math.atan2(n*this.cosgam+s*this.singam,a)}else c=t.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*t.y;return this.no_rot?(e.x=l,e.y=c):(l-=this.u_0,e.x=c*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Lpt(t){var e,n,r,i,s,o,a,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*n),i=.5*(r-1/r),s=.5*(r+1/r),o=Math.sin(this.BrA*e),a=(o*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(a)-1)<St)l.x=0,l.y=a<0?-ot:ot;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=jA(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var Dpt=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const jpt={init:Npt,forward:Opt,inverse:Lpt,names:Dpt};function $pt(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<St)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=Hd(this.e,e,n),i=mh(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Hd(this.e,s,o),l=mh(this.e,this.lat2,s),c=Math.abs(Math.abs(this.lat0)-ot)<St?0:mh(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>St?this.ns=Math.log(r/a)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Fpt(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=St&&(n=sP(n)*(ot-2*St));var r=Math.abs(Math.abs(n)-ot),i,s;if(r>St)i=mh(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(r=n*this.ns,r<=0)return null;s=0}var o=this.ns*Pt(e-this.long0,this.over);return t.x=this.k0*(s*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,t}function Vpt(t){var e,n,r,i,s,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),n=1):(e=-Math.sqrt(o*o+a*a),n=-1);var l=0;if(e!==0&&(l=Math.atan2(n*o,n*a)),e!==0||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),i=jA(this.e,r),i===-9999)return null}else i=-ot;return s=Pt(l/this.ns+this.long0,this.over),t.x=s,t.y=i,t}var zpt=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Gpt={init:$pt,forward:Fpt,inverse:Vpt,names:zpt};function Upt(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Bpt(t){var e,n,r,i,s,o,a,l=t.x,c=t.y,u=Pt(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-u*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),s=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function Wpt(t){var e,n,r,i,s,o,a,l,c=t.x;t.x=t.y,t.y=c,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x),i=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,l=0;var u=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(l=1),a=t.y,u+=1;while(l===0&&u<15);return u>=15?null:t}var Hpt=["Krovak","krovak"];const qpt={init:Upt,forward:Bpt,inverse:Wpt,names:Hpt};function Va(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function oP(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function aP(t){return .375*t*(1+.25*t*(1+.46875*t))}function lP(t){return .05859375*t*t*(1+.75*t)}function cP(t){return t*t*t*(35/3072)}function Nq(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function _0(t){return Math.abs(t)<ot?t:t-sP(t)*Math.PI}function u5(t,e,n,r,i){var s,o;s=t/e;for(var a=0;a<15;a++)if(o=(t-(e*s-n*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function Kpt(){this.sphere||(this.e0=oP(this.es),this.e1=aP(this.es),this.e2=lP(this.es),this.e3=cP(this.es),this.ml0=this.a*Va(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Ypt(t){var e,n,r=t.x,i=t.y;if(r=Pt(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),o=Math.cos(i),a=Nq(this.a,this.e,s),l=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),u=c*c,h=this.es*o*o/(1-this.es),f=this.a*Va(this.e0,this.e1,this.e2,this.e3,i);e=a*c*(1-u*l*(1/6-(8-l+8*h)*u/120)),n=f-this.ml0+a*s/o*u*(.5+(5-l+6*h)*u/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function Xpt(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i;if(this.sphere){var s=n+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(s))}else{var o=this.ml0/this.a+n,a=u5(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-ot)<=St)return t.x=this.long0,t.y=ot,n<0&&(t.y*=-1),t;var l=Nq(this.a,this.e,Math.sin(a)),c=l*l*l/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(a),2),h=e*this.a/l,f=h*h;r=a-l*Math.tan(a)/c*h*h*(.5-(1+3*u)*h*h/24),i=h*(1-f*(u/3+(1+3*u)*u*f/15))/Math.cos(a)}return t.x=Pt(i+this.long0,this.over),t.y=_0(r),t}var Zpt=["Cassini","Cassini_Soldner","cass"];const Jpt={init:Kpt,forward:Ypt,inverse:Xpt,names:Zpt};function Lg(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var qz=1,Kz=2,Yz=3,F3=4;function Qpt(){var t=Math.abs(this.lat0);if(Math.abs(t-ot)<St?this.mode=this.lat0<0?qz:Kz:Math.abs(t)<St?this.mode=Yz:this.mode=F3,this.es>0){var e;switch(this.qp=Lg(this.e,1),this.mmf=.5/(1-this.es),this.apa=lmt(this.es),this.mode){case Kz:this.dd=1;break;case qz:this.dd=1;break;case Yz:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case F3:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Lg(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===F3&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function emt(t){var e,n,r,i,s,o,a,l,c,u,h=t.x,f=t.y;if(h=Pt(h-this.long0,this.over),this.sphere){if(s=Math.sin(f),u=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+u*r:1+this.sinph0*s+this.cosph0*u*r,n<=St)return null;n=Math.sqrt(2/n),e=n*u*Math.sin(h),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*u*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.lat0)<St)return null;n=Or-f*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(h),n*=r}}else{switch(a=0,l=0,c=0,r=Math.cos(h),i=Math.sin(h),s=Math.sin(f),o=Lg(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:c=1+l*r;break;case this.N_POLE:c=ot+f,o=this.qp-o;break;case this.S_POLE:c=f-ot,o=this.qp+o;break}if(Math.abs(c)<St)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?n=this.ymf*c*(this.cosb1*a-this.sinb1*l*r):n=(c=Math.sqrt(2/(1+l*r)))*a*this.ymf,e=this.xmf*c*l*i;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(c=Math.sqrt(o))*i,n=r*(this.mode===this.S_POLE?c:-c)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function tmt(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i,s,o,a,l,c;if(this.sphere){var u=0,h,f=0;if(h=Math.sqrt(e*e+n*n),i=h*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(i),u=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(h)<=St?0:Math.asin(n*f/h),e*=f,n=u*h;break;case this.OBLIQ:i=Math.abs(h)<=St?this.lat0:Math.asin(u*this.sinph0+n*f*this.cosph0/h),e*=f*this.cosph0,n=(u-Math.sin(i)*this.sinph0)*h;break;case this.N_POLE:n=-n,i=ot-i;break;case this.S_POLE:i-=ot;break}r=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,l=Math.sqrt(e*e+n*n),l<St)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*l/this.rq),s=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(c=s*this.sinb1+n*o*this.cosb1/l,a=this.qp*c,n=l*this.cosb1*s-n*this.sinb1*o):(c=n*o/l,a=this.qp*c,n=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),a=e*e+n*n,!a)return t.x=this.long0,t.y=this.lat0,t;c=1-a/this.qp,this.mode===this.S_POLE&&(c=-c)}r=Math.atan2(e,n),i=cmt(Math.asin(c),this.apa)}return t.x=Pt(this.long0+r,this.over),t.y=i,t}var nmt=.3333333333333333,rmt=.17222222222222222,imt=.10257936507936508,smt=.06388888888888888,omt=.0664021164021164,amt=.016415012942191543;function lmt(t){var e,n=[];return n[0]=t*nmt,e=t*t,n[0]+=e*rmt,n[1]=e*smt,e*=t,n[0]+=e*imt,n[1]+=e*omt,n[2]=e*amt,n}function cmt(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var umt=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const hmt={init:Qpt,forward:emt,inverse:tmt,names:umt,S_POLE:qz,N_POLE:Kz,EQUIT:Yz,OBLIQ:F3};function i0(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function dmt(){Math.abs(this.lat1+this.lat2)<St||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Hd(this.e3,this.sin_po,this.cos_po),this.qs1=Lg(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Hd(this.e3,this.sin_po,this.cos_po),this.qs2=Lg(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Lg(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>St?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function fmt(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Lg(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*Pt(e-this.long0,this.over),o=i*Math.sin(s)+this.x0,a=this.rh-i*Math.cos(s)+this.y0;return t.x=o,t.y=a,t}function pmt(t){var e,n,r,i,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,n)),s=Pt(i/this.ns0+this.long0,this.over),t.x=s,t.y=o,t}function mmt(t,e){var n,r,i,s,o,a=i0(.5*e);if(t<St)return a;for(var l=t*t,c=1;c<=25;c++)if(n=Math.sin(a),r=Math.cos(a),i=t*n,s=1-i*i,o=.5*s*s/r*(e/(1-l)-n/s+.5/t*Math.log((1-i)/(1+i))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var gmt=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const ymt={init:dmt,forward:fmt,inverse:pmt,names:gmt,phi1z:mmt};function vmt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function _mt(t){var e,n,r,i,s,o,a,l,c=t.x,u=t.y;return r=Pt(c-this.long0,this.over),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),o=this.sin_p14*e+this.cos_p14*n*i,s=1,o>0||Math.abs(o)<=St?(a=this.x0+this.a*s*n*Math.sin(r)/o,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=l,t}function xmt(t){var e,n,r,i,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),o=i0(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),s=Pt(this.long0+s,this.over)):(o=this.phic0,s=0),t.x=s,t.y=o,t}var wmt=["gnom"];const bmt={init:vmt,forward:_mt,inverse:xmt,names:wmt};function Emt(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*ot:ot;for(var r=Math.asin(.5*e),i,s,o,a,l=0;l<30;l++)if(s=Math.sin(r),o=Math.cos(r),a=t*s,i=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-s/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function Smt(){this.sphere||(this.k0=Hd(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Tmt(t){var e=t.x,n=t.y,r,i,s=Pt(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var o=Lg(this.e,Math.sin(n));r=this.x0+this.a*this.k0*s,i=this.y0+this.a*o*.5/this.k0}return t.x=r,t.y=i,t}function kmt(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=Pt(this.long0+t.x/this.a/Math.cos(this.lat_ts),this.over),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=Emt(this.e,2*t.y*this.k0/this.a),e=Pt(this.long0+t.x/(this.a*this.k0),this.over)),t.x=e,t.y=n,t}var Amt=["cea"];const Imt={init:Smt,forward:Tmt,inverse:kmt,names:Amt};function Pmt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Cmt(t){var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i=_0(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t}function Rmt(t){var e=t.x,n=t.y;return t.x=Pt(this.long0+(e-this.x0)/(this.a*this.rc),this.over),t.y=_0(this.lat0+(n-this.y0)/this.a),t}var Mmt=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const Nmt={init:Pmt,forward:Cmt,inverse:Rmt,names:Mmt};var Boe=20;function Omt(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=oP(this.es),this.e1=aP(this.es),this.e2=lP(this.es),this.e3=cP(this.es),this.ml0=this.a*Va(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Lmt(t){var e=t.x,n=t.y,r,i,s,o=Pt(e-this.long0,this.over);if(s=o*Math.sin(n),this.sphere)Math.abs(n)<=St?(r=this.a*o,i=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(n),i=this.a*(_0(n-this.lat0)+(1-Math.cos(s))/Math.tan(n)));else if(Math.abs(n)<=St)r=this.a*o,i=-1*this.ml0;else{var a=Nq(this.a,this.e,Math.sin(n))/Math.tan(n);r=a*Math.sin(s),i=this.a*Va(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+a*(1-Math.cos(s))}return t.x=r+this.x0,t.y=i+this.y0,t}function Dmt(t){var e,n,r,i,s,o,a,l,c;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=St)e=Pt(r/this.a+this.long0,this.over),n=0;else{o=this.lat0+i/this.a,a=r*r/this.a/this.a+o*o,l=o;var u;for(s=Boe;s;--s)if(u=Math.tan(l),c=-1*(o*(l*u+1)-l-.5*(l*l+a)*u)/((l-o)/u-1),l+=c,Math.abs(c)<=St){n=l;break}e=Pt(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n),this.over)}else if(Math.abs(i+this.ml0)<=St)n=0,e=Pt(this.long0+r/this.a,this.over);else{o=(this.ml0+i)/this.a,a=r*r/this.a/this.a+o*o,l=o;var h,f,g,y,_;for(s=Boe;s;--s)if(_=this.e*Math.sin(l),h=Math.sqrt(1-_*_)*Math.tan(l),f=this.a*Va(this.e0,this.e1,this.e2,this.e3,l),g=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),y=f/this.a,c=(o*(h*y+1)-y-.5*h*(y*y+a))/(this.es*Math.sin(2*l)*(y*y+a-2*o*y)/(4*h)+(o-y)*(h*g-2/Math.sin(2*l))-g),l-=c,Math.abs(c)<=St){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Pt(this.long0+Math.asin(r*h/this.a)/Math.sin(n),this.over)}return t.x=e,t.y=n,t}var jmt=["Polyconic","American_Polyconic","poly"];const $mt={init:Omt,forward:Lmt,inverse:Dmt,names:jmt};function Fmt(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Vmt(t){var e,n=t.x,r=t.y,i=r-this.lat0,s=n-this.long0,o=i/rk*1e-5,a=s,l=1,c=0;for(e=1;e<=10;e++)l=l*o,c=c+this.A[e]*l;var u=c,h=a,f=1,g=0,y,_,b=0,T=0;for(e=1;e<=6;e++)y=f*u-g*h,_=g*u+f*h,f=y,g=_,b=b+this.B_re[e]*f-this.B_im[e]*g,T=T+this.B_im[e]*f+this.B_re[e]*g;return t.x=T*this.a+this.x0,t.y=b*this.a+this.y0,t}function zmt(t){var e,n=t.x,r=t.y,i=n-this.x0,s=r-this.y0,o=s/this.a,a=i/this.a,l=1,c=0,u,h,f=0,g=0;for(e=1;e<=6;e++)u=l*o-c*a,h=c*o+l*a,l=u,c=h,f=f+this.C_re[e]*l-this.C_im[e]*c,g=g+this.C_im[e]*l+this.C_re[e]*c;for(var y=0;y<this.iterations;y++){var _=f,b=g,T,A,I=o,P=a;for(e=2;e<=6;e++)T=_*f-b*g,A=b*f+_*g,_=T,b=A,I=I+(e-1)*(this.B_re[e]*_-this.B_im[e]*b),P=P+(e-1)*(this.B_im[e]*_+this.B_re[e]*b);_=1,b=0;var M=this.B_re[1],V=this.B_im[1];for(e=2;e<=6;e++)T=_*f-b*g,A=b*f+_*g,_=T,b=A,M=M+e*(this.B_re[e]*_-this.B_im[e]*b),V=V+e*(this.B_im[e]*_+this.B_re[e]*b);var C=M*M+V*V;f=(I*M+P*V)/C,g=(P*M-I*V)/C}var N=f,O=g,L=1,F=0;for(e=1;e<=9;e++)L=L*N,F=F+this.D[e]*L;var G=this.lat0+F*rk*1e5,U=this.long0+O;return t.x=U,t.y=G,t}var Gmt=["New_Zealand_Map_Grid","nzmg"];const Umt={init:Fmt,forward:Vmt,inverse:zmt,names:Gmt};function Bmt(){}function Wmt(t){var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=s,t}function Hmt(t){t.x-=this.x0,t.y-=this.y0;var e=Pt(this.long0+t.x/this.a,this.over),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var qmt=["Miller_Cylindrical","mill"];const Kmt={init:Bmt,forward:Wmt,inverse:Hmt,names:qmt};var Ymt=20;function Xmt(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Aq(this.es)}function Zmt(t){var e,n,r=t.x,i=t.y;if(r=Pt(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),o=Ymt;o;--o){var a=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=a,Math.abs(a)<St)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),c=Math.cos(i);n=this.a*$b(i,l,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t}function Jmt(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=i0((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=i0(Math.sin(e)/this.n)),r=Pt(r+this.long0,this.over),e=_0(e)):(e=Iq(t.y/this.a,this.es,this.en),i=Math.abs(e),i<ot?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=Pt(n,this.over)):i-St<ot&&(r=this.long0)),t.x=r,t.y=e,t}var Qmt=["Sinusoidal","sinu"];const egt={init:Xmt,forward:Zmt,inverse:Jmt,names:Qmt};function tgt(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function ngt(t){for(var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i=n,s=Math.PI*Math.sin(n);;){var o=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=o,Math.abs(o)<St)break}i/=2,Math.PI/2-Math.abs(n)<St&&(r=0);var a=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=a,t.y=l,t}function rgt(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=Pt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t}var igt=["Mollweide","moll"];const sgt={init:tgt,forward:ngt,inverse:rgt,names:igt};function ogt(){Math.abs(this.lat1+this.lat2)<St||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=oP(this.es),this.e1=aP(this.es),this.e2=lP(this.es),this.e3=cP(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Hd(this.e,this.sin_phi,this.cos_phi),this.ml1=Va(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<St?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Hd(this.e,this.sin_phi,this.cos_phi),this.ml2=Va(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Va(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function agt(t){var e=t.x,n=t.y,r;if(this.sphere)r=this.a*(this.g-n);else{var i=Va(this.e0,this.e1,this.e2,this.e3,n);r=this.a*(this.g-i)}var s=this.ns*Pt(e-this.long0,this.over),o=this.x0+r*Math.sin(s),a=this.y0+this.rh-r*Math.cos(s);return t.x=o,t.y=a,t}function lgt(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,r,i;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(n!==0&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=Pt(this.long0+s/this.ns,this.over),r=_0(this.g-n/this.a),t.x=i,t.y=r,t;var o=this.g-n/this.a;return r=u5(o,this.e0,this.e1,this.e2,this.e3),i=Pt(this.long0+s/this.ns,this.over),t.x=i,t.y=r,t}var cgt=["Equidistant_Conic","eqdc"];const ugt={init:ogt,forward:agt,inverse:lgt,names:cgt};function hgt(){this.R=this.a}function dgt(t){var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i,s;Math.abs(n)<=St&&(i=this.x0+this.R*r,s=this.y0);var o=i0(2*Math.abs(n/Math.PI));(Math.abs(r)<=St||Math.abs(Math.abs(n)-ot)<=St)&&(i=this.x0,n>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,c=Math.sin(o),u=Math.cos(o),h=u/(c+u-1),f=h*h,g=h*(2/c-1),y=g*g,_=Math.PI*this.R*(a*(h-y)+Math.sqrt(l*(h-y)*(h-y)-(y+l)*(f-y)))/(y+l);r<0&&(_=-_),i=this.x0+_;var b=l+h;return _=Math.PI*this.R*(g*b-a*Math.sqrt((y+l)*(l+1)-b*b))/(y+l),n>=0?s=this.y0+_:s=this.y0-_,t.x=i,t.y=s,t}function fgt(t){var e,n,r,i,s,o,a,l,c,u,h,f,g;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,r=t.x/h,i=t.y/h,s=r*r+i*i,o=-Math.abs(i)*(1+s),a=o-2*i*i+r*r,l=-2*o+1+2*i*i+s*s,g=i*i/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,c=(o-a*a/3/l)/l,u=2*Math.sqrt(-c/3),h=3*g/c/u,Math.abs(h)>1&&(h>=0?h=1:h=-1),f=Math.acos(h)/3,t.y>=0?n=(-u*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI:n=-(-u*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI,Math.abs(r)<St?e=this.long0:e=Pt(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r,this.over),t.x=e,t.y=n,t}var pgt=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const mgt={init:hgt,forward:dgt,inverse:fgt,names:pgt};function ggt(t,e,n,r,i,s){const o=r-e,a=Math.atan((1-s)*Math.tan(t)),l=Math.atan((1-s)*Math.tan(n)),c=Math.sin(a),u=Math.cos(a),h=Math.sin(l),f=Math.cos(l);let g=o,y,_=100,b,T,A,I,P,M,V,C,N,O,L,F,G,U;do{if(b=Math.sin(g),T=Math.cos(g),A=Math.sqrt(f*b*(f*b)+(u*h-c*f*T)*(u*h-c*f*T)),A===0)return{azi1:0,s12:0};I=c*h+u*f*T,P=Math.atan2(A,I),M=u*f*b/A,V=1-M*M,C=V!==0?I-2*c*h/V:0,N=s/16*V*(4+s*(4-3*V)),y=g,g=o+(1-N)*s*M*(P+N*A*(C+N*I*(-1+2*C*C)))}while(Math.abs(g-y)>1e-12&&--_>0);return _===0?{azi1:NaN,s12:NaN}:(O=V*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),L=1+O/16384*(4096+O*(-768+O*(320-175*O))),F=O/1024*(256+O*(-128+O*(74-47*O))),G=F*A*(C+F/4*(I*(-1+2*C*C)-F/6*C*(-3+4*A*A)*(-3+4*C*C))),U=i*(1-s)*L*(P-G),{azi1:Math.atan2(f*b,u*h-c*f*T),s12:U})}function ygt(t,e,n,r,i,s){const o=Math.atan((1-s)*Math.tan(t)),a=Math.sin(o),l=Math.cos(o),c=Math.sin(n),u=Math.cos(n),h=Math.atan2(a,l*u),f=l*c,g=1-f*f,y=g*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),_=1+y/16384*(4096+y*(-768+y*(320-175*y))),b=y/1024*(256+y*(-128+y*(74-47*y)));let T=r/(i*(1-s)*_),A,I=100,P,M,V,C;do P=Math.cos(2*h+T),M=Math.sin(T),V=Math.cos(T),C=b*M*(P+b/4*(V*(-1+2*P*P)-b/6*P*(-3+4*M*M)*(-3+4*P*P))),A=T,T=r/(i*(1-s)*_)+C;while(Math.abs(T-A)>1e-12&&--I>0);if(I===0)return{lat2:NaN,lon2:NaN};const N=a*M-l*V*u,O=Math.atan2(a*V+l*M*u,(1-s)*Math.sqrt(f*f+N*N)),L=Math.atan2(M*c,l*V-a*M*u),F=s/16*g*(4+s*(4-3*g)),G=L-(1-F)*s*f*(T+F*M*(P+F*V*(-1+2*P*P))),U=e+G;return{lat2:O,lon2:U}}function vgt(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function _gt(t){var e=t.x,n=t.y,r=Math.sin(t.y),i=Math.cos(t.y),s=Pt(e-this.long0,this.over),o,a,l,c,u,h,f,g,y,_,b;return this.sphere?Math.abs(this.sin_p12-1)<=St?(t.x=this.x0+this.a*(ot-n)*Math.sin(s),t.y=this.y0-this.a*(ot-n)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=St?(t.x=this.x0+this.a*(ot+n)*Math.sin(s),t.y=this.y0+this.a*(ot+n)*Math.cos(s),t):(y=this.sin_p12*r+this.cos_p12*i*Math.cos(s),f=Math.acos(y),g=f?f/Math.sin(f):1,t.x=this.x0+this.a*g*i*Math.sin(s),t.y=this.y0+this.a*g*(this.cos_p12*r-this.sin_p12*i*Math.cos(s)),t):(o=oP(this.es),a=aP(this.es),l=lP(this.es),c=cP(this.es),Math.abs(this.sin_p12-1)<=St?(u=this.a*Va(o,a,l,c,ot),h=this.a*Va(o,a,l,c,n),t.x=this.x0+(u-h)*Math.sin(s),t.y=this.y0-(u-h)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=St?(u=this.a*Va(o,a,l,c,ot),h=this.a*Va(o,a,l,c,n),t.x=this.x0+(u+h)*Math.sin(s),t.y=this.y0+(u+h)*Math.cos(s),t):Math.abs(e)<St&&Math.abs(n-this.lat0)<St?(t.x=t.y=0,t):(_=ggt(this.lat0,this.long0,n,e,this.a,this.f),b=_.azi1,t.x=_.s12*Math.sin(b),t.y=_.s12*Math.cos(b),t))}function xgt(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,o,a,l,c,u,h,f,g,y,_,b;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*ot*this.a?void 0:(n=e/this.a,r=Math.sin(n),i=Math.cos(n),s=this.long0,Math.abs(e)<=St?o=this.lat0:(o=i0(i*this.sin_p12+t.y*r*this.cos_p12/e),a=Math.abs(this.lat0)-ot,Math.abs(a)<=St?this.lat0>=0?s=Pt(this.long0+Math.atan2(t.x,-t.y),this.over):s=Pt(this.long0-Math.atan2(-t.x,t.y),this.over):s=Pt(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r),this.over)),t.x=s,t.y=o,t)):(l=oP(this.es),c=aP(this.es),u=lP(this.es),h=cP(this.es),Math.abs(this.sin_p12-1)<=St?(f=this.a*Va(l,c,u,h,ot),e=Math.sqrt(t.x*t.x+t.y*t.y),g=f-e,o=u5(g/this.a,l,c,u,h),s=Pt(this.long0+Math.atan2(t.x,-1*t.y),this.over),t.x=s,t.y=o,t):Math.abs(this.sin_p12+1)<=St?(f=this.a*Va(l,c,u,h,ot),e=Math.sqrt(t.x*t.x+t.y*t.y),g=e-f,o=u5(g/this.a,l,c,u,h),s=Pt(this.long0+Math.atan2(t.x,t.y),this.over),t.x=s,t.y=o,t):(y=Math.atan2(t.x,t.y),_=Math.sqrt(t.x*t.x+t.y*t.y),b=ygt(this.lat0,this.long0,y,_,this.a,this.f),t.x=b.lon2,t.y=b.lat2,t))}var wgt=["Azimuthal_Equidistant","aeqd"];const bgt={init:vgt,forward:_gt,inverse:xgt,names:wgt};function Egt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Sgt(t){var e,n,r,i,s,o,a,l,c=t.x,u=t.y;return r=Pt(c-this.long0,this.over),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),o=this.sin_p14*e+this.cos_p14*n*i,s=1,(o>0||Math.abs(o)<=St)&&(a=this.a*s*n*Math.sin(r),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=l,t}function Tgt(t){var e,n,r,i,s,o,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=i0(e/this.a),r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=St?(a=this.lat0,t.x=o,t.y=a,t):(a=i0(i*this.sin_p14+t.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-ot,Math.abs(s)<=St?(this.lat0>=0?o=Pt(this.long0+Math.atan2(t.x,-t.y),this.over):o=Pt(this.long0-Math.atan2(-t.x,t.y),this.over),t.x=o,t.y=a,t):(o=Pt(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r),this.over),t.x=o,t.y=a,t))}var kgt=["ortho"];const Agt={init:Egt,forward:Sgt,inverse:Tgt,names:kgt};var Oi={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Lr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Igt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=ot-Or/2?this.face=Oi.TOP:this.lat0<=-(ot-Or/2)?this.face=Oi.BOTTOM:Math.abs(this.long0)<=Or?this.face=Oi.FRONT:Math.abs(this.long0)<=ot+Or?this.face=this.long0>0?Oi.RIGHT:Oi.LEFT:this.face=Oi.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Pgt(t){var e={x:0,y:0},n,r,i,s,o,a,l={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,r=t.x,this.face===Oi.TOP)s=ot-n,r>=Or&&r<=ot+Or?(l.value=Lr.AREA_0,i=r-ot):r>ot+Or||r<=-(ot+Or)?(l.value=Lr.AREA_1,i=r>0?r-hs:r+hs):r>-(ot+Or)&&r<=-Or?(l.value=Lr.AREA_2,i=r+ot):(l.value=Lr.AREA_3,i=r);else if(this.face===Oi.BOTTOM)s=ot+n,r>=Or&&r<=ot+Or?(l.value=Lr.AREA_0,i=-r+ot):r<Or&&r>=-Or?(l.value=Lr.AREA_1,i=-r):r<-Or&&r>=-(ot+Or)?(l.value=Lr.AREA_2,i=-r-ot):(l.value=Lr.AREA_3,i=r>0?-r+hs:-r-hs);else{var c,u,h,f,g,y,_;this.face===Oi.RIGHT?r=Iw(r,+ot):this.face===Oi.BACK?r=Iw(r,+hs):this.face===Oi.LEFT&&(r=Iw(r,-ot)),f=Math.sin(n),g=Math.cos(n),y=Math.sin(r),_=Math.cos(r),c=g*_,u=g*y,h=f,this.face===Oi.FRONT?(s=Math.acos(c),i=$R(s,h,u,l)):this.face===Oi.RIGHT?(s=Math.acos(u),i=$R(s,h,-c,l)):this.face===Oi.BACK?(s=Math.acos(-c),i=$R(s,h,-u,l)):this.face===Oi.LEFT?(s=Math.acos(-u),i=$R(s,h,c,l)):(s=i=0,l.value=Lr.AREA_0)}return a=Math.atan(12/hs*(i+Math.acos(Math.sin(i)*Math.cos(Or))-ot)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===Lr.AREA_1?a+=ot:l.value===Lr.AREA_2?a+=hs:l.value===Lr.AREA_3&&(a+=1.5*hs),e.x=o*Math.cos(a),e.y=o*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function Cgt(t){var e={lam:0,phi:0},n,r,i,s,o,a,l,c,u,h={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?h.value=Lr.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(h.value=Lr.AREA_1,n-=ot):t.x<0&&-t.x>=Math.abs(t.y)?(h.value=Lr.AREA_2,n=n<0?n+hs:n-hs):(h.value=Lr.AREA_3,n+=ot),u=hs/12*Math.tan(n),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),i=Math.cos(n),s=Math.tan(r),l=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===Oi.TOP)c=Math.acos(l),e.phi=ot-c,h.value===Lr.AREA_0?e.lam=a+ot:h.value===Lr.AREA_1?e.lam=a<0?a+hs:a-hs:h.value===Lr.AREA_2?e.lam=a-ot:e.lam=a;else if(this.face===Oi.BOTTOM)c=Math.acos(l),e.phi=c-ot,h.value===Lr.AREA_0?e.lam=-a+ot:h.value===Lr.AREA_1?e.lam=-a:h.value===Lr.AREA_2?e.lam=-a-ot:e.lam=a<0?-a-hs:-a+hs;else{var f,g,y;f=l,u=f*f,u>=1?y=0:y=Math.sqrt(1-u)*Math.sin(a),u+=y*y,u>=1?g=0:g=Math.sqrt(1-u),h.value===Lr.AREA_1?(u=g,g=-y,y=u):h.value===Lr.AREA_2?(g=-g,y=-y):h.value===Lr.AREA_3&&(u=g,g=y,y=-u),this.face===Oi.RIGHT?(u=f,f=-g,g=u):this.face===Oi.BACK?(f=-f,g=-g):this.face===Oi.LEFT&&(u=f,f=g,g=-u),e.phi=Math.acos(-y)-ot,e.lam=Math.atan2(g,f),this.face===Oi.RIGHT?e.lam=Iw(e.lam,-ot):this.face===Oi.BACK?e.lam=Iw(e.lam,-hs):this.face===Oi.LEFT&&(e.lam=Iw(e.lam,+ot))}if(this.es!==0){var _,b,T;_=e.phi<0?1:0,b=Math.tan(e.phi),T=this.b/Math.sqrt(b*b+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-T*T)/(this.one_minus_f*T)),_&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function $R(t,e,n,r){var i;return t<St?(r.value=Lr.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=Or?r.value=Lr.AREA_0:i>Or&&i<=ot+Or?(r.value=Lr.AREA_1,i-=ot):i>ot+Or||i<=-(ot+Or)?(r.value=Lr.AREA_2,i=i>=0?i-hs:i+hs):(r.value=Lr.AREA_3,i+=ot)),i}function Iw(t,e){var n=t+e;return n<-hs?n+=LA:n>+hs&&(n-=LA),n}var Rgt=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const Mgt={init:Igt,forward:Pgt,inverse:Cgt,names:Rgt};var Xz=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],aT=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],bbe=.8487,Ebe=1.3523,Sbe=Tl/5,Ngt=1/Sbe,Xx=18,h5=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},Ogt=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function Lgt(t,e,n,r){for(var i=e;r;--r){var s=t(i);if(i-=s,Math.abs(s)<n)break}return i}function Dgt(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function jgt(t){var e=Pt(t.x-this.long0,this.over),n=Math.abs(t.y),r=Math.floor(n*Sbe);r<0?r=0:r>=Xx&&(r=Xx-1),n=Tl*(n-Ngt*r);var i={x:h5(Xz[r],n)*e,y:h5(aT[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*bbe+this.x0,i.y=i.y*this.a*Ebe+this.y0,i}function $gt(t){var e={x:(t.x-this.x0)/(this.a*bbe),y:Math.abs(t.y-this.y0)/(this.a*Ebe)};if(e.y>=1)e.x/=Xz[Xx][0],e.y=t.y<0?-ot:ot;else{var n=Math.floor(e.y*Xx);for(n<0?n=0:n>=Xx&&(n=Xx-1);;)if(aT[n][0]>e.y)--n;else if(aT[n+1][0]<=e.y)++n;else break;var r=aT[n],i=5*(e.y-r[0])/(aT[n+1][0]-r[0]);i=Lgt(function(s){return(h5(r,s)-e.y)/Ogt(r,s)},i,St,100),e.x/=h5(Xz[n],i),e.y=(5*n+i)*Ki,t.y<0&&(e.y=-e.y)}return e.x=Pt(e.x+this.long0,this.over),e}var Fgt=["Robinson","robin"];const Vgt={init:Dgt,forward:jgt,inverse:$gt,names:Fgt};function zgt(){this.name="geocent"}function Ggt(t){var e=hbe(t,this.es,this.a);return e}function Ugt(t){var e=dbe(t,this.es,this.a,this.b);return e}var Bgt=["Geocentric","geocentric","geocent","Geocent"];const Wgt={init:zgt,forward:Ggt,inverse:Ugt,names:Bgt};var aa={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},hS={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Hgt(){if(Object.keys(hS).forEach((function(n){if(typeof this[n]>"u")this[n]=hS[n].def;else{if(hS[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);hS[n].num&&(this[n]=parseFloat(this[n]))}hS[n].degrees&&(this[n]=this[n]*Ki)}).bind(this)),Math.abs(Math.abs(this.lat0)-ot)<St?this.mode=this.lat0<0?aa.S_POLE:aa.N_POLE:Math.abs(this.lat0)<St?this.mode=aa.EQUIT:(this.mode=aa.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function qgt(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i,s;switch(this.mode){case aa.OBLIQ:s=this.sinph0*e+this.cosph0*n*r;break;case aa.EQUIT:s=n*r;break;case aa.S_POLE:s=-e;break;case aa.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),i=s*n*Math.sin(t.x),this.mode){case aa.OBLIQ:s*=this.cosph0*e-this.sinph0*n*r;break;case aa.EQUIT:s*=e;break;case aa.N_POLE:s*=-(n*r);break;case aa.S_POLE:s*=n*r;break}var o,a;return o=s*this.cg+i*this.sg,a=1/(o*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*a,s=o*a,t.x=i*this.a,t.y=s*this.a,t}function Kgt(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,r,i;i=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*i,r=this.pn1*t.y*this.cw*i,t.x=n*this.cg+r*this.sg,t.y=r*this.cg-n*this.sg;var s=xl(t.x,t.y);if(Math.abs(s)<St)e.x=0,e.y=t.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case aa.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*a*this.cosph0/s),t.y=(o-this.sinph0*Math.sin(e.y))*s,t.x*=a*this.cosph0;break;case aa.EQUIT:e.y=Math.asin(t.y*a/s),t.y=o*s,t.x*=a;break;case aa.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case aa.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var Ygt=["Tilted_Perspective","tpers"];const Xgt={init:Hgt,forward:qgt,inverse:Kgt,names:Ygt};function Zgt(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Jgt(t){var e=t.x,n=t.y,r,i,s,o;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var a=this.radius_p/xl(this.radius_p*Math.cos(n),Math.sin(n));if(i=a*Math.cos(e)*Math.cos(n),s=a*Math.sin(e)*Math.cos(n),o=a*Math.sin(n),(this.radius_g-i)*i-s*s-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/xl(o,r)),t.y=this.radius_g_1*Math.atan(o/r)):(t.x=this.radius_g_1*Math.atan(s/r),t.y=this.radius_g_1*Math.atan(o/xl(s,r)))}else this.shape==="sphere"&&(r=Math.cos(n),i=Math.cos(e)*r,s=Math.sin(e)*r,o=Math.sin(n),r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/xl(o,r)),t.y=this.radius_g_1*Math.atan(o/r)):(t.x=this.radius_g_1*Math.atan(s/r),t.y=this.radius_g_1*Math.atan(o/xl(s,r))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function Qgt(t){var e=-1,n=0,r=0,i,s,o,a;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*xl(1,r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*xl(1,n));var l=r/this.radius_p;if(i=n*n+l*l+e*e,s=2*this.radius_g*e,o=s*s-4*i*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-s-Math.sqrt(o))/(2*i),e=this.radius_g+a*e,n*=a,r*=a,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+r*r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),i=n*n+r*r+e*e,s=2*this.radius_g*e,o=s*s-4*i*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-s-Math.sqrt(o))/(2*i),e=this.radius_g+a*e,n*=a,r*=a,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var e0t=["Geostationary Satellite View","Geostationary_Satellite","geos"];const t0t={init:Zgt,forward:Jgt,inverse:Qgt,names:e0t};var ik=1.340264,sk=-.081106,ok=893e-6,ak=.003796,d5=Math.sqrt(3)/2;function n0t(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function r0t(t){var e=Pt(t.x-this.long0,this.over),n=t.y,r=Math.asin(d5*Math.sin(n)),i=r*r,s=i*i*i;return t.x=e*Math.cos(r)/(d5*(ik+3*sk*i+s*(7*ok+9*ak*i))),t.y=r*(ik+sk*i+s*(ok+ak*i)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function i0t(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,n=12,r=t.y,i,s,o,a,l,c;for(c=0;c<n&&(i=r*r,s=i*i*i,o=r*(ik+sk*i+s*(ok+ak*i))-t.y,a=ik+3*sk*i+s*(7*ok+9*ak*i),r-=l=o/a,!(Math.abs(l)<e));++c);return i=r*r,s=i*i*i,t.x=d5*t.x*(ik+3*sk*i+s*(7*ok+9*ak*i))/Math.cos(r),t.y=Math.asin(Math.sin(r)/d5),t.x=Pt(t.x+this.long0,this.over),t}var s0t=["eqearth","Equal Earth","Equal_Earth"];const o0t={init:n0t,forward:r0t,inverse:i0t,names:s0t};var $A=1e-10;function a0t(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<$A)throw new Error;this.es?(this.en=Aq(this.es),this.m1=$b(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=c0t,this.forward=l0t):(Math.abs(this.phi1)+$A>=ot?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=h0t,this.forward=u0t)}function l0t(t){var e=Pt(t.x-(this.long0||0),this.over),n=t.y,r,i,s;return r=this.am1+this.m1-$b(n,i=Math.sin(n),s=Math.cos(n),this.en),i=s*e/(r*Math.sqrt(1-this.es*i*i)),t.x=r*Math.sin(i),t.y=this.am1-r*Math.cos(i),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function c0t(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r,i;if(n=xl(t.x,t.y=this.am1-t.y),i=Iq(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(i))<ot)e=Math.sin(i),r=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-ot)<=$A)r=0;else throw new Error;return t.x=Pt(r+(this.long0||0),this.over),t.y=_0(i),t}function u0t(t){var e=Pt(t.x-(this.long0||0),this.over),n=t.y,r,i;return i=this.cphi1+this.phi1-n,Math.abs(i)>$A?(t.x=i*Math.sin(r=e*Math.cos(n)/i),t.y=this.cphi1-i*Math.cos(r)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function h0t(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r=xl(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-r,Math.abs(n)>ot)throw new Error;return Math.abs(Math.abs(n)-ot)<=$A?e=0:e=r*Math.atan2(t.x,t.y)/Math.cos(n),t.x=Pt(e+(this.long0||0),this.over),t.y=_0(n),t}var d0t=["bonne","Bonne (Werner lat_1=90)"];const f0t={init:a0t,names:d0t},Woe={OBLIQUE:{forward:v0t,inverse:x0t},TRANSVERSE:{forward:_0t,inverse:w0t}},f5={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function p0t(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=abe.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const t=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=pu(t);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let n;const r=Object.keys(f5),i=a=>{if(typeof this[a]>"u")return;const l=parseFloat(this[a])*Ki;if(isNaN(l))throw new Error("Invalid value for "+a+": "+this[a]);return l};for(let a=0;a<r.length;a++){const l=r[a],c=f5[l],u=Object.entries(c);if(u.some(([f])=>typeof this[f]<"u")){n=c;for(let f=0;f<u.length;f++){const[g,y]=u[f],_=i(g);if(typeof _>"u")throw new Error("Missing parameter: "+g+".");this[y]=_}break}}if(!n)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:s,phip:o}=y0t(this,n);this.lamp=s,Math.abs(o)>St?(this.cphip=Math.cos(o),this.sphip=Math.sin(o),this.projectionType=Woe.OBLIQUE):this.projectionType=Woe.TRANSVERSE}function m0t(t){return this.projectionType.forward(this,t)}function g0t(t){return this.projectionType.inverse(this,t)}function y0t(t,e){let n,r;if(e===f5.ROTATE){let i=t.oLongC,s=t.oLatC,o=t.oAlpha;if(Math.abs(Math.abs(s)-ot)<=St)throw new Error("Invalid value for o_lat_c: "+t.o_lat_c+" should be < 90");r=i+Math.atan2(-1*Math.cos(o),-1*Math.sin(o)*Math.sin(s)),n=Math.asin(Math.cos(s)*Math.sin(o))}else if(e===f5.NEW_POLE)r=t.oLongP,n=t.oLatP;else{let i=t.oLong1,s=t.oLat1,o=t.oLong2,a=t.oLat2,l=Math.abs(s);if(Math.abs(s)>ot-St)throw new Error("Invalid value for o_lat_1: "+t.o_lat_1+" should be < 90");if(Math.abs(a)>ot-St)throw new Error("Invalid value for o_lat_2: "+t.o_lat_2+" should be < 90");if(Math.abs(s-a)<St)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<St)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(s)*Math.sin(a)*Math.cos(i)-Math.sin(s)*Math.cos(a)*Math.cos(o),Math.sin(s)*Math.cos(a)*Math.sin(o)-Math.cos(s)*Math.sin(a)*Math.sin(i)),n=Math.atan(-1*Math.cos(r-i)/Math.tan(s))}return{lamp:r,phip:n}}function v0t(t,e){let{x:n,y:r}=e;n+=t.long0;const i=Math.cos(n),s=Math.sin(r),o=Math.cos(r);e.x=Pt(Math.atan2(o*Math.sin(n),t.sphip*o*i+t.cphip*s)+t.lamp),e.y=Math.asin(t.sphip*s-t.cphip*o*i);const a=t.obliqueProjection.forward(e);return t.isIdentity&&(a.x*=Tl,a.y*=Tl),a}function _0t(t,e){let{x:n,y:r}=e;n+=t.long0;const i=Math.cos(r),s=Math.cos(n);e.x=Pt(Math.atan2(i*Math.sin(n),Math.sin(r))+t.lamp),e.y=Math.asin(-1*i*s);const o=t.obliqueProjection.forward(e);return t.isIdentity&&(o.x*=Tl,o.y*=Tl),o}function x0t(t,e){t.isIdentity&&(e.x*=Ki,e.y*=Ki);const n=t.obliqueProjection.inverse(e);let{x:r,y:i}=n;if(r<Number.MAX_VALUE){r-=t.lamp;const s=Math.cos(r),o=Math.sin(i),a=Math.cos(i);e.x=Math.atan2(a*Math.sin(r),t.sphip*a*s-t.cphip*o),e.y=Math.asin(t.sphip*o+t.cphip*a*s)}return e.x=Pt(e.x+t.long0),e}function w0t(t,e){t.isIdentity&&(e.x*=Ki,e.y*=Ki);const n=t.obliqueProjection.inverse(e);let{x:r,y:i}=n;if(r<Number.MAX_VALUE){const s=Math.cos(i);r-=t.lamp,e.x=Math.atan2(s*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(s*Math.cos(r))}return e.x=Pt(e.x+t.long0),e}var b0t=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const E0t={init:p0t,forward:m0t,inverse:g0t,names:b0t};function S0t(t){t.Proj.projections.add(j3),t.Proj.projections.add($3),t.Proj.projections.add(dpt),t.Proj.projections.add(wpt),t.Proj.projections.add(kpt),t.Proj.projections.add(Rpt),t.Proj.projections.add(jpt),t.Proj.projections.add(Gpt),t.Proj.projections.add(qpt),t.Proj.projections.add(Jpt),t.Proj.projections.add(hmt),t.Proj.projections.add(ymt),t.Proj.projections.add(bmt),t.Proj.projections.add(Imt),t.Proj.projections.add(Nmt),t.Proj.projections.add($mt),t.Proj.projections.add(Umt),t.Proj.projections.add(Kmt),t.Proj.projections.add(egt),t.Proj.projections.add(sgt),t.Proj.projections.add(ugt),t.Proj.projections.add(mgt),t.Proj.projections.add(bgt),t.Proj.projections.add(Agt),t.Proj.projections.add(Mgt),t.Proj.projections.add(Vgt),t.Proj.projections.add(Wgt),t.Proj.projections.add(Xgt),t.Proj.projections.add(t0t),t.Proj.projections.add(o0t),t.Proj.projections.add(f0t),t.Proj.projections.add(E0t)}const lr=Object.assign(Pft,{defaultDatum:"WGS84",Proj:pu,WGS84:new pu("WGS84"),Point:Q2,toPoint:fbe,defs:Po,nadgrid:hft,transform:c5,mgrs:Cft,version:"__VERSION__"});S0t(lr);class Tbe{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=yr,this.supportedMediaTypes=null}getReadOptions(e,n){if(n){let r=n.dataProjection?Jr(n.dataProjection):this.readProjection(e);n.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Jr(r),r.setWorldExtent(n.extent)),n={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Sn()}readFeature(e,n){return Sn()}readFeatures(e,n){return Sn()}readGeometry(e,n){return Sn()}readProjection(e){return Sn()}writeFeature(e,n){return Sn()}writeFeatures(e,n){return Sn()}writeGeometry(e,n){return Sn()}}function Ih(t,e,n){const r=n?Jr(n.featureProjection):null,i=n?Jr(n.dataProjection):null;let s=t;if(r&&i&&!i1(r,i)){e&&(s=t.clone());const o=e?r:i,a=e?i:r;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(Ek(o,a))}if(e&&n&&n.decimals!==void 0){const o=Math.pow(10,n.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};s===t&&(s=t.clone()),s.applyTransform(a)}return s}const T0t={Point:ki,LineString:ts,Polygon:Pl,MultiPoint:u0,MultiLineString:_h,MultiPolygon:xp};function k0t(t,e,n){return Array.isArray(e[0])?(Xle(t,0,e,n)||(t=t.slice(),a8(t,0,e,n)),t):($G(t,0,e,n)||(t=t.slice(),e4(t,0,e,n)),t)}function kbe(t,e){const n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map(s=>kbe({...t,geometry:s})).flat();const r=n.type==="MultiPolygon"?"Polygon":n.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=n.layout.length;return Ih(new yl(r,r==="Polygon"?k0t(n.flatCoordinates,n.ends,i):n.flatCoordinates,n.ends?.flat(),i,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function Oq(t,e){if(!t)return null;if(Array.isArray(t)){const r=t.map(i=>Oq(i,e));return new hu(r)}const n=T0t[t.type];return Ih(new n(t.flatCoordinates,t.layout||"XY",t.ends),!1,e)}class A0t extends Tbe{constructor(){super()}getType(){return"json"}readFeature(e,n){return this.readFeatureFromObject(FR(e),this.getReadOptions(e,n))}readFeatures(e,n){return this.readFeaturesFromObject(FR(e),this.getReadOptions(e,n))}readFeatureFromObject(e,n){return Sn()}readFeaturesFromObject(e,n){return Sn()}readGeometry(e,n){return this.readGeometryFromObject(FR(e),this.getReadOptions(e,n))}readGeometryFromObject(e,n){return Sn()}readProjection(e){return this.readProjectionFromObject(FR(e))}readProjectionFromObject(e){return Sn()}writeFeature(e,n){return JSON.stringify(this.writeFeatureObject(e,n))}writeFeatureObject(e,n){return Sn()}writeFeatures(e,n){return JSON.stringify(this.writeFeaturesObject(e,n))}writeFeaturesObject(e,n){return Sn()}writeGeometry(e,n){return JSON.stringify(this.writeGeometryObject(e,n))}writeGeometryObject(e,n){return Sn()}}function FR(t){if(typeof t=="string"){const e=JSON.parse(t);return e||null}return t!==null?t:null}class BL extends A0t{constructor(e){e=e||{},super(),this.dataProjection=Jr(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Jr(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,n){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=Lq(r.geometry);if(this.featureClass===yl)return kbe({geometry:i,id:r.id,properties:r.properties},n);const s=new yr;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(Oq(i,n)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,n){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const c=this.readFeatureFromObject(o[a],n);c&&i.push(c)}}else i=[this.readFeatureFromObject(e,n)];return i.flat()}readGeometryFromObject(e,n){return I0t(e,n)}readProjectionFromObject(e){const n=e.crs;let r;if(n)if(n.type=="name")r=Jr(n.properties.name);else if(n.type==="EPSG")r=Jr("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,n){n=this.adaptOptions(n);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),o=e.getGeometry();return o&&(r.geometry=Zz(o,n),delete s[e.getGeometryName()]),T1(s)||(r.properties=s),r}writeFeaturesObject(e,n){n=this.adaptOptions(n);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],n));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,n){return Zz(e,this.adaptOptions(n))}}function Lq(t,e){if(!t)return null;let n;switch(t.type){case"Point":{n=C0t(t);break}case"LineString":{n=R0t(t);break}case"Polygon":{n=L0t(t);break}case"MultiPoint":{n=N0t(t);break}case"MultiLineString":{n=M0t(t);break}case"MultiPolygon":{n=O0t(t);break}case"GeometryCollection":{n=P0t(t);break}default:throw new Error("Unsupported GeoJSON type: "+t.type)}return n}function I0t(t,e){const n=Lq(t);return Oq(n,e)}function P0t(t,e){return t.geometries.map(function(r){return Lq(r)})}function C0t(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:hv(e.length)}}function R0t(t){const e=t.coordinates,n=e.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:hv(e[0]?.length||2)}}function M0t(t){const e=t.coordinates,n=e[0]?.[0]?.length||2,r=[],i=nI(r,0,e,n);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:hv(n)}}function N0t(t){const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:hv(e[0]?.length||2)}}function O0t(t){const e=t.coordinates,n=[],r=e[0]?.[0]?.[0].length||2,i=kle(n,0,e,r);return{type:"MultiPolygon",flatCoordinates:n,ends:i,layout:hv(r)}}function L0t(t){const e=t.coordinates,n=[],r=e[0]?.[0]?.length,i=nI(n,0,e,r);return{type:"Polygon",flatCoordinates:n,ends:i,layout:hv(r)}}function Zz(t,e){t=Ih(t,!0,e);const n=t.getType();let r;switch(n){case"Point":{r=z0t(t);break}case"LineString":{r=j0t(t);break}case"Polygon":{r=G0t(t,e);break}case"MultiPoint":{r=F0t(t);break}case"MultiLineString":{r=$0t(t);break}case"MultiPolygon":{r=V0t(t,e);break}case"GeometryCollection":{r=D0t(t,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return r}function D0t(t,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(r){return Zz(r,e)})}}function j0t(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function $0t(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function F0t(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function V0t(t,e){let n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}function z0t(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function G0t(t,e){let n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}const p5="http://www.w3.org/2001/XMLSchema-instance";function Av(t,e){return Fb().createElementNS(t,e)}function Ph(t,e){return Abe(t,e,[]).join("")}function Abe(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n.push(t.nodeValue);else{let r;for(r=t.firstChild;r;r=r.nextSibling)Abe(r,e,n)}return n}function rp(t){return"documentElement"in t}function ip(t){return new DOMParser().parseFromString(t,"application/xml")}function Hoe(t,e){return(function(n,r){const i=t.call(e??this,n,r);if(i!==void 0){const s=r[r.length-1];xr(s,i)}})}function ih(t,e){return(function(n,r){const i=t.call(e??this,n,r);i!==void 0&&r[r.length-1].push(i)})}function Dq(t,e){return(function(n,r){const i=t.call(this,n,r);i!==void 0&&(r[r.length-1]=i)})}function Qe(t,e,n){return(function(r,i){const s=t.call(this,r,i);if(s!==void 0){const o=i[i.length-1],a=e!==void 0?e:r.localName;o[a]=s}})}function mt(t,e){return(function(n,r,i){t.call(this,n,r,i),i[i.length-1].node.appendChild(n)})}function Ibe(t,e){let n,r;return function(i,s,o){if(n===void 0){n={};const a={};a[i.localName]=t,n[i.namespaceURI]=a,r=Ch(i.localName)}Pbe(n,r,s,o)}}function Ch(t,e){return(function(n,r,i){const o=r[r.length-1].node;let a=t;a===void 0&&(a=i);const l=o.namespaceURI;return Av(l,a)})}const xa=Ch();function Rl(t,e){const n=e.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=t[e[i]];return r}function It(t,e,n){n=n!==void 0?n:{};let r,i;for(r=0,i=t.length;r<i;++r)n[t[r]]=e;return n}function x0(t,e,n,r){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const s=t[i.namespaceURI];if(s!==void 0){const o=s[i.localName];o!==void 0&&o.call(r,i,n)}}}function ir(t,e,n,r,i){return r.push(t),x0(e,n,r,i),r.pop()}function Pbe(t,e,n,r,i,s){const o=(i!==void 0?i:n).length;let a,l;for(let c=0;c<o;++c)a=n[c],a!==void 0&&(l=e.call(s,a,r,i!==void 0?i[c]:void 0),l!==void 0&&t[l.namespaceURI][l.localName].call(s,l,a,r))}function si(t,e,n,r,i,s,o){return i.push(t),Pbe(e,n,r,i,s,o),i.pop()}let yF;function U0t(){return yF===void 0&&typeof XMLSerializer<"u"&&(yF=new XMLSerializer),yF}let vF;function Fb(){return vF===void 0&&typeof document<"u"&&(vF=document.implementation.createDocument("","",null)),vF}class Cbe extends Tbe{constructor(){super(),this.xmlSerializer_=U0t()}getType(){return"xml"}readFeature(e,n){if(!e)return null;if(typeof e=="string"){const r=ip(e);return this.readFeatureFromDocument(r,n)}return rp(e)?this.readFeatureFromDocument(e,n):this.readFeatureFromNode(e,n)}readFeatureFromDocument(e,n){const r=this.readFeaturesFromDocument(e,n);return r.length>0?r[0]:null}readFeatureFromNode(e,n){return null}readFeatures(e,n){if(!e)return[];if(typeof e=="string"){const r=ip(e);return this.readFeaturesFromDocument(r,n)}return rp(e)?this.readFeaturesFromDocument(e,n):this.readFeaturesFromNode(e,n)}readFeaturesFromDocument(e,n){const r=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&xr(r,this.readFeaturesFromNode(i,n));return r}readFeaturesFromNode(e,n){return Sn()}readGeometry(e,n){if(!e)return null;if(typeof e=="string"){const r=ip(e);return this.readGeometryFromDocument(r,n)}return rp(e)?this.readGeometryFromDocument(e,n):this.readGeometryFromNode(e,n)}readGeometryFromDocument(e,n){return null}readGeometryFromNode(e,n){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const n=ip(e);return this.readProjectionFromDocument(n)}return rp(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,n){const r=this.writeFeatureNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,n){return null}writeFeatures(e,n){const r=this.writeFeaturesNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,n){return null}writeGeometry(e,n){const r=this.writeGeometryNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,n){return null}}function s0(t){const e=Ph(t,!1);return B0t(e)}function B0t(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e)return e[1]!==void 0||!1}function WL(t){const e=Ph(t,!1),n=Date.parse(e);return isNaN(n)?void 0:n/1e3}function br(t){const e=Ph(t,!1);return W0t(e)}function W0t(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function FA(t){const e=Ph(t,!1);return H0t(e)}function H0t(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function Bn(t){return Ph(t,!1).trim()}function eb(t,e){Ir(t,e?"1":"0")}function q0t(t,e){t.appendChild(Fb().createCDATASection(e))}function K0t(t,e){const n=new Date(e*1e3),r=n.getUTCFullYear()+"-"+IE(n.getUTCMonth()+1,2)+"-"+IE(n.getUTCDate(),2)+"T"+IE(n.getUTCHours(),2)+":"+IE(n.getUTCMinutes(),2)+":"+IE(n.getUTCSeconds(),2)+"Z";t.appendChild(Fb().createTextNode(r))}function ml(t,e){const n=e.toPrecision();t.appendChild(Fb().createTextNode(n))}function m5(t,e){const n=e.toString();t.appendChild(Fb().createTextNode(n))}const Y0t=/^\s/,X0t=/\s$/,Z0t=/(\n|\t|\r|<|&| {2})/;function Ir(t,e){typeof e=="string"&&(Y0t.test(e)||X0t.test(e)||Z0t.test(e))?e.split("]]>").forEach((n,r,i)=>{r<i.length-1&&(n+="]]"),r>0&&(n=">"+n),q0t(t,n)}):t.appendChild(Fb().createTextNode(e))}const mi=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],J0t="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",Q0t={rte:Rbe,trk:Mbe,wpt:Nbe},eyt=It(mi,{rte:ih(Rbe),trk:ih(Mbe),wpt:ih(Nbe)}),tyt=It(mi,{text:Qe(Bn,"linkText"),type:Qe(Bn,"linkType")}),nyt=It(mi,{name:Qe(Bn),email:Pyt,link:uP}),ryt=It(mi,{name:Qe(Bn),desc:Qe(Bn),author:Qe(kyt),copyright:Qe(Ayt),link:uP,time:Qe(WL),keywords:Qe(Bn),bounds:Iyt,extensions:HL}),iyt=It(mi,{year:Qe(FA),license:Qe(Bn)}),syt=It(mi,{rte:mt(Nyt),trk:mt(Oyt),wpt:mt(Dyt)});class oyt extends Cbe{constructor(e){super(),e=e||{},this.dataProjection=Jr("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let n=0,r=e.length;n<r;++n){const i=e[n];if(this.readExtensions_){const s=i.get("extensionsNode_")||null;this.readExtensions_(i,s)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(ip(e)):rp(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(n);if(r)return r}return null}readMetadataFromNode(e){if(!mi.includes(e.namespaceURI))return null;for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(mi.includes(n.namespaceURI)&&n.localName==="metadata")return ir({},ryt,n,[]);return null}readFeatureFromNode(e,n){if(!mi.includes(e.namespaceURI))return null;const r=Q0t[e.localName];if(!r)return null;const i=r(e,[this.getReadOptions(e,n)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,n){if(!mi.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=ir([],eyt,e,[this.getReadOptions(e,n)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,n){n=this.adaptOptions(n);const r=Av("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",p5),r.setAttributeNS(p5,"xsi:schemaLocation",J0t),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),si({node:r},syt,Tyt,e,[n]),r}}const ayt=It(mi,{name:Qe(Bn),cmt:Qe(Bn),desc:Qe(Bn),src:Qe(Bn),link:uP,number:Qe(FA),extensions:HL,type:Qe(Bn),rtept:Cyt}),lyt=It(mi,{ele:Qe(br),time:Qe(WL)}),cyt=It(mi,{name:Qe(Bn),cmt:Qe(Bn),desc:Qe(Bn),src:Qe(Bn),link:uP,number:Qe(FA),type:Qe(Bn),extensions:HL,trkseg:Myt}),uyt=It(mi,{trkpt:Ryt}),hyt=It(mi,{ele:Qe(br),time:Qe(WL)}),dyt=It(mi,{ele:Qe(br),time:Qe(WL),magvar:Qe(br),geoidheight:Qe(br),name:Qe(Bn),cmt:Qe(Bn),desc:Qe(Bn),src:Qe(Bn),link:uP,sym:Qe(Bn),type:Qe(Bn),fix:Qe(Bn),sat:Qe(FA),hdop:Qe(br),vdop:Qe(br),pdop:Qe(br),ageofdgpsdata:Qe(br),dgpsid:Qe(FA),extensions:HL}),fyt=["text","type"],pyt=It(mi,{text:mt(Ir),type:mt(Ir)}),myt=It(mi,["name","cmt","desc","src","link","number","type","rtept"]),gyt=It(mi,{name:mt(Ir),cmt:mt(Ir),desc:mt(Ir),src:mt(Ir),link:mt(Fq),number:mt(m5),type:mt(Ir),rtept:Ibe(mt(Vq))}),yyt=It(mi,["ele","time"]),vyt=It(mi,["name","cmt","desc","src","link","number","type","trkseg"]),_yt=It(mi,{name:mt(Ir),cmt:mt(Ir),desc:mt(Ir),src:mt(Ir),link:mt(Fq),number:mt(m5),type:mt(Ir),trkseg:Ibe(mt(Lyt))}),xyt=Ch("trkpt"),wyt=It(mi,{trkpt:mt(Vq)}),byt=It(mi,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Eyt=It(mi,{ele:mt(ml),time:mt(K0t),magvar:mt(ml),geoidheight:mt(ml),name:mt(Ir),cmt:mt(Ir),desc:mt(Ir),src:mt(Ir),link:mt(Fq),sym:mt(Ir),type:mt(Ir),fix:mt(Ir),sat:mt(m5),hdop:mt(ml),vdop:mt(ml),pdop:mt(ml),ageofdgpsdata:mt(ml),dgpsid:mt(m5)}),Syt={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Tyt(t,e,n){const r=t.getGeometry();if(r){const i=Syt[r.getType()];if(i){const s=e[e.length-1].node;return Av(s.namespaceURI,i)}}}function jq(t,e,n,r){return t.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,e.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,e.hasM=!0):t.push(0),t}function $q(t,e,n){let r="XY",i=2;if(t.hasZ&&t.hasM?(r="XYZM",i=4):t.hasZ?(r="XYZ",i=3):t.hasM&&(r="XYM",i=3),i!==4){for(let s=0,o=e.length/4;s<o;s++)e[s*i]=e[s*4],e[s*i+1]=e[s*4+1],t.hasZ&&(e[s*i+2]=e[s*4+2]),t.hasM&&(e[s*i+2]=e[s*4+3]);if(e.length=e.length/4*i,n)for(let s=0,o=n.length;s<o;s++)n[s]=n[s]/4*i}return r}function kyt(t,e){const n=ir({},nyt,t,e);if(n)return n}function Ayt(t,e){const n=ir({},iyt,t,e);if(n){const r=t.getAttribute("author");return r!==null&&(n.author=r),n}}function Iyt(t,e){const n=e[e.length-1],r=t.getAttribute("minlat"),i=t.getAttribute("minlon"),s=t.getAttribute("maxlat"),o=t.getAttribute("maxlon");i!==null&&r!==null&&o!==null&&s!==null&&(n.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(o),parseFloat(s)]])}function Pyt(t,e){const n=e[e.length-1],r=t.getAttribute("id"),i=t.getAttribute("domain");r!==null&&i!==null&&(n.email=`${r}@${i}`)}function uP(t,e){const n=e[e.length-1],r=t.getAttribute("href");r!==null&&(n.link=r),x0(tyt,t,e)}function HL(t,e){const n=e[e.length-1];n.extensionsNode_=t}function Cyt(t,e){const n=ir({},lyt,t,e);if(n){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;jq(i,s,t,n)}}function Ryt(t,e){const n=ir({},hyt,t,e);if(n){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;jq(i,s,t,n)}}function Myt(t,e){const n=e[e.length-1];x0(uyt,t,e);const r=n.flatCoordinates;n.ends.push(r.length)}function Rbe(t,e){const n=e[0],r=ir({flatCoordinates:[],layoutOptions:{}},ayt,t,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const o=$q(s,i),a=new ts(i,o);Ih(a,!1,n);const l=new yr(a);return l.setProperties(r,!0),l}function Mbe(t,e){const n=e[0],r=ir({flatCoordinates:[],ends:[],layoutOptions:{}},cyt,t,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const o=r.layoutOptions;delete r.layoutOptions;const a=$q(o,i,s),l=new _h(i,a,s);Ih(l,!1,n);const c=new yr(l);return c.setProperties(r,!0),c}function Nbe(t,e){const n=e[0],r=ir({},dyt,t,e);if(!r)return;const i={},s=jq([],i,t,r),o=$q(i,s),a=new ki(s,o);Ih(a,!1,n);const l=new yr(a);return l.setProperties(r,!0),l}function Fq(t,e,n){t.setAttribute("href",e);const i=n[n.length-1].properties,s=[i.linkText,i.linkType];si({node:t},pyt,xa,s,n,fyt)}function Vq(t,e,n){const r=n[n.length-1],s=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(o.time=e[3]);case"XYZ":e[2]!==0&&(o.ele=e[2]);break;case"XYM":e[2]!==0&&(o.time=e[2]);break}const l=t.nodeName=="rtept"?yyt[s]:byt[s],c=Rl(o,l);si({node:t,properties:o},Eyt,xa,c,n,l)}function Nyt(t,e,n){const r=n[0],i=e.getProperties(),s={node:t};s.properties=i;const o=e.getGeometry();if(o.getType()=="LineString"){const u=Ih(o,!0,r);s.geometryLayout=u.getLayout(),i.rtept=u.getCoordinates()}const a=n[n.length-1].node,l=myt[a.namespaceURI],c=Rl(i,l);si(s,gyt,xa,c,n,l)}function Oyt(t,e,n){const r=n[0],i=e.getProperties(),s={node:t};s.properties=i;const o=e.getGeometry();if(o.getType()=="MultiLineString"){const u=Ih(o,!0,r);i.trkseg=u.getLineStrings()}const a=n[n.length-1].node,l=vyt[a.namespaceURI],c=Rl(i,l);si(s,_yt,xa,c,n,l)}function Lyt(t,e,n){const r={node:t};r.geometryLayout=e.getLayout(),r.properties={},si(r,wyt,xyt,e.getCoordinates(),n)}function Dyt(t,e,n){const r=n[0],i=n[n.length-1];i.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const o=Ih(s,!0,r);i.geometryLayout=o.getLayout(),Vq(t,o.getCoordinates(),n)}}const jp=["http://www.google.com/kml/ext/2.2"],Zt=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],jyt="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",qoe={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},$yt=It(Zt,{ExtendedData:Kbe,Region:Ybe,MultiGeometry:Qe(Wbe,"geometry"),LineString:Qe(Ube,"geometry"),LinearRing:Qe(Bbe,"geometry"),Point:Qe(Hbe,"geometry"),Polygon:Qe(qbe,"geometry"),Style:Qe(Uq),StyleMap:w1t,address:Qe(Bn),description:Qe(Bn),name:Qe(Bn),open:Qe(s0),phoneNumber:Qe(Bn),styleUrl:Qe($be),visibility:Qe(s0)},It(jp,{MultiTrack:Qe(l1t,"geometry"),Track:Qe(Gbe,"geometry")})),Fyt=It(Zt,{ExtendedData:Kbe,Region:Ybe,Link:N1t,address:Qe(Bn),description:Qe(Bn),name:Qe(Bn),open:Qe(s0),phoneNumber:Qe(Bn),visibility:Qe(s0)}),Vyt=It(Zt,{href:Qe(jbe)}),zyt=It(Zt,{Altitude:Qe(br),Longitude:Qe(br),Latitude:Qe(br),Tilt:Qe(br),AltitudeMode:Qe(Bn),Heading:Qe(br),Roll:Qe(br)}),Obe=It(Zt,{LatLonAltBox:k1t,Lod:I1t}),Gyt=It(Zt,["Document","Placemark"]),Uyt=It(Zt,{Document:mt(z1t),Placemark:mt(Jbe)});let Pw,V3=null,Jz,lk,ck,uk,g5,Qz=null,zq,eG=null,tG,e1=null,Koe=null,nG=null;function y5(t){return 32/Math.min(t[0],t[1])}function Byt(){Pw=[255,255,255,1],V3=new Dn({color:Pw}),Jz=[20,2],lk="pixels",ck="pixels",uk=[64,64],g5="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Qz=new sI({anchor:Jz,anchorOrigin:"bottom-left",anchorXUnits:lk,anchorYUnits:ck,crossOrigin:"anonymous",rotation:0,scale:y5(uk),size:uk,src:g5}),zq="NO_IMAGE",eG=new Mn({color:Pw,width:1}),tG=new Mn({color:[51,51,51,1],width:2}),e1=new pc({font:"bold 16px Helvetica",fill:V3,stroke:tG,scale:.8}),Koe=new xn({fill:V3,image:Qz,text:e1,stroke:eG,zIndex:0}),nG=[Koe]}let VR;function Wyt(t){return t}class Hyt extends Cbe{constructor(e){super(),e=e||{},nG||Byt(),this.dataProjection=Jr("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:nG,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:Wyt,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,n){const r=It(Zt,{Document:Hoe(this.readDocumentOrFolder_,this),Folder:Hoe(this.readDocumentOrFolder_,this),Placemark:ih(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=ir([],r,e,n,this);if(i)return i}readPlacemark_(e,n){const r=ir({geometry:null},$yt,e,n,this);if(!r)return;const i=new yr,s=e.getAttribute("id");s!==null&&i.setId(s);const o=n[0],a=r.geometry;if(a&&Ih(a,!1,o),i.setGeometry(a),delete r.geometry,this.extractStyles_){const l=r.Style,c=r.styleUrl,u=Kyt(l,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(u)}return delete r.Style,i.setProperties(r,!0),i}readSharedStyle_(e,n){const r=e.getAttribute("id");if(r!==null){const i=Uq.call(this,e,n);if(i){let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+r,o).href:s="#"+r,this.sharedStyles_[s]=i}}}readSharedStyleMap_(e,n){const r=e.getAttribute("id");if(r===null)return;const i=Vbe.call(this,e,n);if(!i)return;let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+r,o).href:s="#"+r,this.sharedStyles_[s]=i}readFeatureFromNode(e,n){if(!Zt.includes(e.namespaceURI))return null;const r=this.readPlacemark_(e,[this.getReadOptions(e,n)]);return r||null}readFeaturesFromNode(e,n){if(!Zt.includes(e.namespaceURI))return[];let r;const i=e.localName;if(i=="Document"||i=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,n)]),r||[];if(i=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,n)]);return s?[s]:[]}if(i=="kml"){r=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const o=this.readFeaturesFromNode(s,n);o&&xr(r,o)}return r}return[]}readName(e){if(e){if(typeof e=="string"){const n=ip(e);return this.readNameFromDocument(n)}return rp(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(n);if(r)return r}}readNameFromNode(e){for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(Zt.includes(n.namespaceURI)&&n.localName=="name")return Bn(n);for(let n=e.firstElementChild;n;n=n.nextElementSibling){const r=n.localName;if(Zt.includes(n.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const i=this.readNameFromNode(n);if(i)return i}}}readNetworkLinks(e){const n=[];if(typeof e=="string"){const r=ip(e);xr(n,this.readNetworkLinksFromDocument(r))}else rp(e)?xr(n,this.readNetworkLinksFromDocument(e)):xr(n,this.readNetworkLinksFromNode(e));return n}readNetworkLinksFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&xr(n,this.readNetworkLinksFromNode(r));return n}readNetworkLinksFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Zt.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const i=ir({},Fyt,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Zt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&xr(n,this.readNetworkLinksFromNode(r))}return n}readRegion(e){const n=[];if(typeof e=="string"){const r=ip(e);xr(n,this.readRegionFromDocument(r))}else rp(e)?xr(n,this.readRegionFromDocument(e)):xr(n,this.readRegionFromNode(e));return n}readRegionFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&xr(n,this.readRegionFromNode(r));return n}readRegionFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Zt.includes(r.namespaceURI)&&r.localName=="Region"){const i=ir({},Obe,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Zt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&xr(n,this.readRegionFromNode(r))}return n}readCamera(e){const n=[];if(typeof e=="string"){const r=ip(e);xr(n,this.readCameraFromDocument(r))}else rp(e)?xr(n,this.readCameraFromDocument(e)):xr(n,this.readCameraFromNode(e));return n}readCameraFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&xr(n,this.readCameraFromNode(r));return n}readCameraFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Zt.includes(r.namespaceURI)&&r.localName==="Camera"){const i=ir({},zyt,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Zt.includes(r.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&xr(n,this.readCameraFromNode(r))}return n}writeFeaturesNode(e,n){n=this.adaptOptions(n);const r=Av(Zt[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",jp[0]),r.setAttributeNS(i,"xmlns:xsi",p5),r.setAttributeNS(p5,"xsi:schemaLocation",jyt);const s={node:r},o={};e.length>1?o.Document=e:e.length==1&&(o.Placemark=e[0]);const a=Gyt[r.namespaceURI],l=Rl(o,a);return si(s,Uyt,xa,l,[n],a,this),r}}function qyt(t,e){const n=[0,0];let r="start";const i=t.getImage();if(i){const a=i.getSize();if(a&&a.length==2){const l=i.getScaleArray(),c=i.getAnchor();n[0]=l[0]*(a[0]-c[0]),n[1]=l[1]*(a[1]/2-c[1]),r="left"}}let s=t.getText();return s?(s=s.clone(),s.setFont(s.getFont()||e1.getFont()),s.setScale(s.getScale()||e1.getScale()),s.setFill(s.getFill()||e1.getFill()),s.setStroke(s.getStroke()||tG)):s=e1.clone(),s.setText(e),s.setOffsetX(n[0]),s.setOffsetY(n[1]),s.setTextAlign(r),new xn({image:i,text:s})}function Kyt(t,e,n,r,i){return(function(s,o){let a=i,l="",c=[];if(a){const h=s.getGeometry();if(h)if(h instanceof hu)c=h.getGeometriesArrayRecursive().filter(function(f){const g=f.getType();return g==="Point"||g==="MultiPoint"}),a=c.length>0;else{const f=h.getType();a=f==="Point"||f==="MultiPoint"}}a&&(l=s.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&(VR||(VR=document.createElement("textarea")),VR.innerHTML=l,l=VR.value));let u=n;if(t?u=t:e&&(u=Lbe(e,n,r)),a){const h=qyt(u[0],l);if(c.length>0){h.setGeometry(new hu(c));const f=new xn({geometry:u[0].getGeometry(),image:null,fill:u[0].getFill(),stroke:u[0].getStroke(),text:null});return[h,f].concat(u.slice(1))}return h}return u})}function Lbe(t,e,n){return Array.isArray(t)?t:typeof t=="string"?Lbe(n[t],e,n):e}function qL(t){const e=Ph(t,!1),n=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(n){const r=n[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function Dbe(t){let e=Ph(t,!1);const n=[];e=e.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let i;for(;i=r.exec(e);){const s=parseFloat(i[1]),o=parseFloat(i[2]),a=i[3]?parseFloat(i[3]):0;n.push(s,o,a),e=e.substr(i[0].length)}if(e==="")return n}function jbe(t){const e=Ph(t,!1).trim();let n=t.baseURI;return(!n||n=="about:blank")&&(n=window.location.href),n?new URL(e,n).href:e}function $be(t){const e=Ph(t,!1).trim().replace(/^(?!.*#)/,"#");let n=t.baseURI;return(!n||n=="about:blank")&&(n=window.location.href),n?new URL(e,n).href:e}function Yyt(t){const e=t.getAttribute("xunits"),n=t.getAttribute("yunits");let r;return e!=="insetPixels"?n!=="insetPixels"?r="bottom-left":r="top-left":n!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(t.getAttribute("x")),xunits:qoe[e],y:parseFloat(t.getAttribute("y")),yunits:qoe[n],origin:r}}function Fbe(t){return br(t)}const Xyt=It(Zt,{Pair:x1t});function Vbe(t,e){return ir(void 0,Xyt,t,e,this)}const Zyt=It(Zt,{Icon:Qe(h1t),color:Qe(qL),heading:Qe(br),hotSpot:Qe(Yyt),scale:Qe(Fbe)});function Jyt(t,e){const n=ir({},Zyt,t,e);if(!n)return;const r=e[e.length-1],i="Icon"in n?n.Icon:{},s=!("Icon"in n)||Object.keys(i).length>0;let o;const a=i.href;a?o=a:s&&(o=g5);let l,c,u,h="bottom-left";const f=n.hotSpot;f?(l=[f.x,f.y],c=f.xunits,u=f.yunits,h=f.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(o.includes("pushpin")?(l=Jz,c=lk,u=ck):o.includes("arrow-reverse")?(l=[54,42],c=lk,u=ck):o.includes("paddle")&&(l=[32,1],c=lk,u=ck));let g;const y=i.x,_=i.y;y!==void 0&&_!==void 0&&(g=[y,_]);let b;const T=i.w,A=i.h;T!==void 0&&A!==void 0&&(b=[T,A]);let I;const P=n.heading;P!==void 0&&(I=cu(P));const M=n.scale,V=n.color;if(s){o==g5&&(b=uk);const C=new sI({anchor:l,anchorOrigin:h,anchorXUnits:c,anchorYUnits:u,crossOrigin:this.crossOrigin_,offset:g,offsetOrigin:"bottom-left",rotation:I,scale:M,size:b,src:this.iconUrlFunction_(o),color:V}),N=C.getScaleArray()[0],O=C.getSize();if(O===null){const L=C.getImageState();if(L===zt.IDLE||L===zt.LOADING){const F=function(){const G=C.getImageState();if(!(G===zt.IDLE||G===zt.LOADING)){const U=C.getSize();if(U&&U.length==2){const he=y5(U);C.setScale(N*he)}C.unlistenImageChange(F)}};C.listenImageChange(F),L===zt.IDLE&&C.load()}}else if(O.length==2){const L=y5(O);C.setScale(N*L)}r.imageStyle=C}else r.imageStyle=zq}const Qyt=It(Zt,{color:Qe(qL),scale:Qe(Fbe)});function e1t(t,e){const n=ir({},Qyt,t,e);if(!n)return;const r=e[e.length-1],i=new pc({fill:new Dn({color:"color"in n?n.color:Pw}),scale:n.scale});r.textStyle=i}const t1t=It(Zt,{color:Qe(qL),width:Qe(br)});function n1t(t,e){const n=ir({},t1t,t,e);if(!n)return;const r=e[e.length-1],i=new Mn({color:"color"in n?n.color:Pw,width:"width"in n?n.width:1});r.strokeStyle=i}const r1t=It(Zt,{color:Qe(qL),fill:Qe(s0),outline:Qe(s0)});function i1t(t,e){const n=ir({},r1t,t,e);if(!n)return;const r=e[e.length-1],i=new Dn({color:"color"in n?n.color:Pw});r.fillStyle=i;const s=n.fill;s!==void 0&&(r.fill=s);const o=n.outline;o!==void 0&&(r.outline=o)}const s1t=It(Zt,{coordinates:Dq(Dbe)});function zbe(t,e){return ir(null,s1t,t,e)}function o1t(t,e){const r=e[e.length-1].coordinates,i=Ph(t,!1),o=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(o){const a=parseFloat(o[1]),l=parseFloat(o[2]),c=parseFloat(o[3]);r.push([a,l,c])}else r.push([])}const a1t=It(jp,{Track:ih(Gbe)});function l1t(t,e){const n=ir([],a1t,t,e);if(n)return new _h(n)}const c1t=It(Zt,{when:O1t},It(jp,{coord:o1t}));function Gbe(t,e){const n=ir({coordinates:[],whens:[]},c1t,t,e);if(!n)return;const r=[],i=n.coordinates,s=n.whens;for(let o=0,a=Math.min(i.length,s.length);o<a;++o)i[o].length==3&&r.push(i[o][0],i[o][1],i[o][2],s[o]);return new ts(r,"XYZM")}const u1t=It(Zt,{href:Qe(jbe)},It(jp,{x:Qe(br),y:Qe(br),w:Qe(br),h:Qe(br)}));function h1t(t,e){const n=ir({},u1t,t,e);return n||null}const d1t=It(Zt,{coordinates:Dq(Dbe)});function Gq(t,e){return ir(null,d1t,t,e)}const KL=It(Zt,{extrude:Qe(s0),tessellate:Qe(s0),altitudeMode:Qe(Bn)});function Ube(t,e){const n=ir({},KL,t,e),r=Gq(t,e);if(r){const i=new ts(r,"XYZ");return i.setProperties(n,!0),i}}function Bbe(t,e){const n=ir({},KL,t,e),r=Gq(t,e);if(r){const i=new Pl(r,"XYZ",[r.length]);return i.setProperties(n,!0),i}}const f1t=It(Zt,{LineString:ih(Ube),LinearRing:ih(Bbe),MultiGeometry:ih(Wbe),Point:ih(Hbe),Polygon:ih(qbe)});function Wbe(t,e){const n=ir([],f1t,t,e);if(!n)return null;if(n.length===0)return new hu(n);let r,i=!0;const s=n[0].getType();let o;for(let a=1,l=n.length;a<l;++a)if(o=n[a],o.getType()!=s){i=!1;break}if(i){let a,l;if(s=="Point"){const c=n[0];a=c.getLayout(),l=c.getFlatCoordinates();for(let u=1,h=n.length;u<h;++u)o=n[u],xr(l,o.getFlatCoordinates());r=new u0(l,a),_F(r,n)}else if(s=="LineString")r=new _h(n),_F(r,n);else if(s=="Polygon")r=new xp(n),_F(r,n);else if(s=="GeometryCollection"||s.startsWith("Multi"))r=new hu(n);else throw new Error("Unknown geometry type found")}else r=new hu(n);return r}function Hbe(t,e){const n=ir({},KL,t,e),r=Gq(t,e);if(r){const i=new ki(r,"XYZ");return i.setProperties(n,!0),i}}const p1t=It(Zt,{innerBoundaryIs:C1t,outerBoundaryIs:M1t});function qbe(t,e){const n=ir({},KL,t,e),r=ir([null],p1t,t,e);if(r&&r[0]){const i=r[0],s=[i.length];for(let a=1,l=r.length;a<l;++a)xr(i,r[a]),s.push(i.length);const o=new Pl(i,"XYZ",s);return o.setProperties(n,!0),o}}const m1t=It(Zt,{IconStyle:Jyt,LabelStyle:e1t,LineStyle:n1t,PolyStyle:i1t});function Uq(t,e){const n=ir({},m1t,t,e,this);if(!n)return null;let r="fillStyle"in n?n.fillStyle:V3;const i=n.fill;i!==void 0&&!i&&(r=null);let s;"imageStyle"in n?n.imageStyle!=zq&&(s=n.imageStyle):s=Qz;const o="textStyle"in n?n.textStyle:e1,a="strokeStyle"in n?n.strokeStyle:eG,l=n.outline;return l!==void 0&&!l?[new xn({geometry:function(c){const u=c.getGeometry(),h=u.getType();if(h==="GeometryCollection"){const f=u;return new hu(f.getGeometriesArrayRecursive().filter(function(g){const y=g.getType();return y!=="Polygon"&&y!=="MultiPolygon"}))}if(h!=="Polygon"&&h!=="MultiPolygon")return u},fill:r,image:s,stroke:a,text:o,zIndex:void 0}),new xn({geometry:function(c){const u=c.getGeometry(),h=u.getType();if(h==="GeometryCollection"){const f=u;return new hu(f.getGeometriesArrayRecursive().filter(function(g){const y=g.getType();return y==="Polygon"||y==="MultiPolygon"}))}if(h==="Polygon"||h==="MultiPolygon")return u},fill:r,stroke:null,zIndex:void 0})]:[new xn({fill:r,image:s,stroke:a,text:o,zIndex:void 0})]}function _F(t,e){const n=e.length,r=new Array(e.length),i=new Array(e.length),s=new Array(e.length);let o,a,l;o=!1,a=!1,l=!1;for(let c=0;c<n;++c){const u=e[c];r[c]=u.get("extrude"),i[c]=u.get("tessellate"),s[c]=u.get("altitudeMode"),o=o||r[c]!==void 0,a=a||i[c]!==void 0,l=l||s[c]}o&&t.set("extrude",r),a&&t.set("tessellate",i),l&&t.set("altitudeMode",s)}const g1t=It(Zt,{displayName:Qe(Bn),value:Qe(Bn)});function y1t(t,e){const n=t.getAttribute("name");x0(g1t,t,e);const r=e[e.length-1];n&&r.displayName?r[n]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:n!==null?r[n]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const v1t=It(Zt,{Data:y1t,SchemaData:E1t});function Kbe(t,e){x0(v1t,t,e)}function Ybe(t,e){x0(Obe,t,e)}const _1t=It(Zt,{Style:Qe(Uq),key:Qe(Bn),styleUrl:Qe($be)});function x1t(t,e){const n=ir({},_1t,t,e,this);if(!n)return;const r=n.key;if(r&&r=="normal"){const i=n.styleUrl;i&&(e[e.length-1]=i);const s=n.Style;s&&(e[e.length-1]=s)}}function w1t(t,e){const n=Vbe.call(this,t,e);if(!n)return;const r=e[e.length-1];if(Array.isArray(n))r.Style=n;else if(typeof n=="string")r.styleUrl=n;else throw new Error("`styleMapValue` has an unknown type")}const b1t=It(Zt,{SimpleData:S1t});function E1t(t,e){x0(b1t,t,e)}function S1t(t,e){const n=t.getAttribute("name");if(n!==null){const r=Bn(t),i=e[e.length-1];i[n]=r}}const T1t=It(Zt,{altitudeMode:Qe(Bn),minAltitude:Qe(br),maxAltitude:Qe(br),north:Qe(br),south:Qe(br),east:Qe(br),west:Qe(br)});function k1t(t,e){const n=ir({},T1t,t,e);if(!n)return;const r=e[e.length-1],i=[parseFloat(n.west),parseFloat(n.south),parseFloat(n.east),parseFloat(n.north)];r.extent=i,r.altitudeMode=n.altitudeMode,r.minAltitude=parseFloat(n.minAltitude),r.maxAltitude=parseFloat(n.maxAltitude)}const A1t=It(Zt,{minLodPixels:Qe(br),maxLodPixels:Qe(br),minFadeExtent:Qe(br),maxFadeExtent:Qe(br)});function I1t(t,e){const n=ir({},A1t,t,e);if(!n)return;const r=e[e.length-1];r.minLodPixels=parseFloat(n.minLodPixels),r.maxLodPixels=parseFloat(n.maxLodPixels),r.minFadeExtent=parseFloat(n.minFadeExtent),r.maxFadeExtent=parseFloat(n.maxFadeExtent)}const P1t=It(Zt,{LinearRing:ih(zbe)});function C1t(t,e){const n=ir([],P1t,t,e);n.length>0&&e[e.length-1].push(...n)}const R1t=It(Zt,{LinearRing:Dq(zbe)});function M1t(t,e){const n=ir(void 0,R1t,t,e);if(n){const r=e[e.length-1];r[0]=n}}function N1t(t,e){x0(Vyt,t,e)}function O1t(t,e){const r=e[e.length-1].whens,i=Ph(t,!1),s=Date.parse(i);r.push(isNaN(s)?0:s)}function YL(t,e){const n=gu(e),i=[(n.length==4?n[3]:1)*255,n[2],n[1],n[0]];for(let s=0;s<4;++s){const o=Math.floor(i[s]).toString(16);i[s]=o.length==1?"0"+o:o}Ir(t,i.join(""))}function L1t(t,e,n){const r=n[n.length-1],i=r.layout,s=r.stride;let o;if(i=="XY"||i=="XYM")o=2;else if(i=="XYZ"||i=="XYZM")o=3;else throw new Error("Invalid geometry layout");const a=e.length;let l="";if(a>0){l+=e[0];for(let c=1;c<o;++c)l+=","+e[c];for(let c=s;c<a;c+=s){l+=" "+e[c];for(let u=1;u<o;++u)l+=","+e[c+u]}}Ir(t,l)}const z3=It(Zt,{Data:mt(D1t),value:mt($1t),displayName:mt(j1t)});function D1t(t,e,n){t.setAttribute("name",e.name);const r={node:t},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&si(r,z3,xa,[i.displayName],n,["displayName"]),i!==null&&i.value&&si(r,z3,xa,[i.value],n,["value"])):si(r,z3,xa,[i],n,["value"])}function j1t(t,e){Ir(t,e)}function $1t(t,e){Ir(t,e)}const F1t=It(Zt,{Placemark:mt(Jbe)}),V1t=function(t,e,n){const r=e[e.length-1].node;return Av(r.namespaceURI,"Placemark")};function z1t(t,e,n){si({node:t},F1t,V1t,e,n,void 0,this)}const G1t=Ch("Data");function U1t(t,e,n){const r={node:t},i=e.names,s=e.values,o=i.length;for(let a=0;a<o;a++)si(r,z3,G1t,[{name:i[a],value:s[a]}],n)}const Yoe=It(Zt,["href"],It(jp,["x","y","w","h"])),Xoe=It(Zt,{href:mt(Ir)},It(jp,{x:mt(ml),y:mt(ml),w:mt(ml),h:mt(ml)})),B1t=function(t,e,n){return Av(jp[0],"gx:"+n)};function W1t(t,e,n){const r={node:t},i=n[n.length-1].node;let s=Yoe[i.namespaceURI],o=Rl(e,s);si(r,Xoe,xa,o,n,s),s=Yoe[jp[0]],o=Rl(e,s),si(r,Xoe,B1t,o,n,s)}const H1t=It(Zt,["scale","heading","Icon","color","hotSpot"]),q1t=It(Zt,{Icon:mt(W1t),color:mt(YL),heading:mt(ml),hotSpot:mt(xvt),scale:mt(eEe)});function K1t(t,e,n){const r={node:t},i={},s=e.getSrc(),o=e.getSize(),a=e.getImageSize(),l={href:s};if(o){l.w=o[0],l.h=o[1];const b=e.getAnchor(),T=e.getOrigin();if(T&&a&&T[0]!==0&&T[1]!==o[1]&&(l.x=T[0],l.y=a[1]-(T[1]+o[1])),b&&(b[0]!==o[0]/2||b[1]!==o[1]/2)){const A={x:b[0],xunits:"pixels",y:o[1]-b[1],yunits:"pixels"};i.hotSpot=A}}i.Icon=l;let c=e.getScaleArray()[0],u=o;if(u===null&&(u=uk),u.length==2){const b=y5(u);c=c/b}c!==1&&(i.scale=c);const h=e.getRotation();h!==0&&(i.heading=h);const f=e.getColor();f&&(i.color=f);const g=n[n.length-1].node,y=H1t[g.namespaceURI],_=Rl(i,y);si(r,q1t,xa,_,n,y)}const Y1t=It(Zt,["color","scale"]),X1t=It(Zt,{color:mt(YL),scale:mt(eEe)});function Z1t(t,e,n){const r={node:t},i={},s=e.getFill();s&&(i.color=s.getColor());const o=e.getScale();o&&o!==1&&(i.scale=o);const a=n[n.length-1].node,l=Y1t[a.namespaceURI],c=Rl(i,l);si(r,X1t,xa,c,n,l)}const J1t=It(Zt,["color","width"]),Q1t=It(Zt,{color:mt(YL),width:mt(ml)});function evt(t,e,n){const r={node:t},i={color:e.getColor(),width:Number(e.getWidth())||1},s=n[n.length-1].node,o=J1t[s.namespaceURI],a=Rl(i,o);si(r,Q1t,xa,a,n,o)}const tvt={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Xbe=function(t,e,n){if(t){const r=e[e.length-1].node;return Av(r.namespaceURI,tvt[t.getType()])}},nvt=Ch("Point"),rvt=Ch("LineString"),ivt=Ch("LinearRing"),svt=Ch("Polygon"),ovt=It(Zt,{LineString:mt(Cw),Point:mt(Cw),Polygon:mt(Qbe),GeometryCollection:mt(Zbe)});function Zbe(t,e,n){const r={node:t},i=e.getType();let s=[],o;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(a){const l=a.getType();if(l==="MultiPoint")s=s.concat(a.getPoints());else if(l==="MultiLineString")s=s.concat(a.getLineStrings());else if(l==="MultiPolygon")s=s.concat(a.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(a);else throw new Error("Unknown geometry type")}),o=Xbe;else if(i==="MultiPoint")s=e.getPoints(),o=nvt;else if(i==="MultiLineString")s=e.getLineStrings(),o=rvt;else if(i==="MultiPolygon")s=e.getPolygons(),o=svt;else throw new Error("Unknown geometry type");si(r,ovt,o,s,n)}const avt=It(Zt,{LinearRing:mt(Cw)});function Zoe(t,e,n){si({node:t},avt,ivt,[e],n)}const xF=It(Zt,{ExtendedData:mt(U1t),MultiGeometry:mt(Zbe),LineString:mt(Cw),LinearRing:mt(Cw),Point:mt(Cw),Polygon:mt(Qbe),Style:mt(_vt),address:mt(Ir),description:mt(Ir),name:mt(Ir),open:mt(eb),phoneNumber:mt(Ir),styleUrl:mt(Ir),visibility:mt(eb)}),lvt=It(Zt,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),cvt=Ch("ExtendedData");function Jbe(t,e,n){const r={node:t};e.getId()&&t.setAttribute("id",e.getId());const i=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const o=Object.keys(i||{}).sort().filter(function(g){return!s[g]}),a=e.getStyleFunction();if(a){const g=a(e,0);if(g){const y=Array.isArray(g)?g:[g];let _=y;if(e.getGeometry()&&(_=y.filter(function(b){const T=b.getGeometryFunction()(e);if(T){const A=T.getType();return A==="GeometryCollection"?T.getGeometriesArrayRecursive().filter(function(I){const P=I.getType();return P==="Point"||P==="MultiPoint"}).length:A==="Point"||A==="MultiPoint"}})),this.writeStyles_){let b=y,T=y;e.getGeometry()&&(b=y.filter(function(A){const I=A.getGeometryFunction()(e);if(I){const P=I.getType();return P==="GeometryCollection"?I.getGeometriesArrayRecursive().filter(function(M){const V=M.getType();return V==="LineString"||V==="MultiLineString"}).length:P==="LineString"||P==="MultiLineString"}}),T=y.filter(function(A){const I=A.getGeometryFunction()(e);if(I){const P=I.getType();return P==="GeometryCollection"?I.getGeometriesArrayRecursive().filter(function(M){const V=M.getType();return V==="Polygon"||V==="MultiPolygon"}).length:P==="Polygon"||P==="MultiPolygon"}})),i.Style={pointStyles:_,lineStyles:b,polyStyles:T}}if(_.length&&i.name===void 0){const b=_[0].getText();b&&(i.name=b.getText())}}}const l=n[n.length-1].node,c=lvt[l.namespaceURI],u=Rl(i,c);if(si(r,xF,xa,u,n,c),o.length>0){const g=Rl(i,o);si(r,xF,cvt,[{names:o,values:g}],n)}const h=n[0];let f=e.getGeometry();f&&(f=Ih(f,!0,h)),si(r,xF,Xbe,[f],n)}const uvt=It(Zt,["extrude","tessellate","altitudeMode","coordinates"]),hvt=It(Zt,{extrude:mt(eb),tessellate:mt(eb),altitudeMode:mt(Ir),coordinates:mt(L1t)});function Cw(t,e,n){const r=e.getFlatCoordinates(),i={node:t};i.layout=e.getLayout(),i.stride=e.getStride();const s=e.getProperties();s.coordinates=r;const o=n[n.length-1].node,a=uvt[o.namespaceURI],l=Rl(s,a);si(i,hvt,xa,l,n,a)}const dvt=It(Zt,["color","fill","outline"]),Joe=It(Zt,{outerBoundaryIs:mt(Zoe),innerBoundaryIs:mt(Zoe)}),fvt=Ch("innerBoundaryIs"),pvt=Ch("outerBoundaryIs");function Qbe(t,e,n){const r=e.getLinearRings(),i=r.shift(),s={node:t};si(s,Joe,fvt,r,n),si(s,Joe,pvt,[i],n)}const mvt=It(Zt,{color:mt(YL),fill:mt(eb),outline:mt(eb)});function gvt(t,e,n){const r={node:t},i=e.getFill(),s=e.getStroke(),o={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:s?void 0:!1},a=n[n.length-1].node,l=dvt[a.namespaceURI],c=Rl(o,l);si(r,mvt,xa,c,n,l)}function eEe(t,e){ml(t,Math.round(e*1e6)/1e6)}const yvt=It(Zt,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),vvt=It(Zt,{IconStyle:mt(K1t),LabelStyle:mt(Z1t),LineStyle:mt(evt),PolyStyle:mt(gvt)});function _vt(t,e,n){const r={node:t},i={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(i.LabelStyle=l);const c=e.pointStyles[0].getImage();c&&typeof c.getSrc=="function"&&(i.IconStyle=c)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(i.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=e.polyStyles[0]}const s=n[n.length-1].node,o=yvt[s.namespaceURI],a=Rl(i,o);si(r,vvt,xa,a,n,o)}function xvt(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}function tEe(t){const e=Object.keys(t.defs),n=e.length;let r,i;for(r=0;r<n;++r){const s=e[r];if(!lM(s)){const o=t.defs(s);let a=o.units;!a&&o.projName==="longlat"&&(a="degrees"),q3(new F5({code:s,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:a}))}}for(r=0;r<n;++r){const s=e[r],o=lM(s);for(i=0;i<n;++i){const a=e[i],l=lM(a);if(!cM(s,a))if(t.defs[s]===t.defs[a])QF([o,l]);else{const c=t(s,a);tAe(o,l,HX(o,l,c.forward),HX(l,o,c.inverse))}}}}console.log(" parcelHighlight.ts v3.1 loaded - fixed pixelRatio for Android");lr.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");tEe(lr);let t1=null,hk=null,kx=null;function rG(t){t1&&(t.removeLayer(t1),t1=null),hk&&(t.removeLayer(hk),hk=null),kx=null}async function wvt(t,e){try{const n=Fn(e);console.log(` Click (3857): ${e[0].toFixed(0)}, ${e[1].toFixed(0)}`),console.log(` LonLat (WGS84): ${n[0].toFixed(5)}, ${n[1].toFixed(5)}`);const r=lr("EPSG:4326","EPSG:28992",n);if(console.log(` RD (28992): ${r?r[0].toFixed(0)+", "+r[1].toFixed(0):"FAILED"}`),!r||r[0]<7e3||r[0]>3e5||r[1]<289e3||r[1]>629e3)return console.error(" Coordinate outside Netherlands or transformation failed:",r),!1;rG(t);const i=1,s=`${r[0]-i},${r[1]-i},${r[0]+i},${r[1]+i}`,o=Date.now(),a=`https://service.pdok.nl/rvo/brpgewaspercelen/wfs/v1_0?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=brpgewaspercelen:BrpGewas&OUTPUTFORMAT=json&SRSNAME=EPSG:28992&BBOX=${s},EPSG:28992&_=${o}`;console.log(" WFS URL:",a);const l=new AbortController,c=setTimeout(()=>l.abort(),1e4),u=await fetch(a,{signal:l.signal});if(clearTimeout(c),!u.ok)return console.error("WFS request failed:",u.status),!1;const h=await u.json();if(console.log(" WFS RESPONSE:",JSON.stringify(h).substring(0,500)),!h.features||h.features.length===0)return console.log("No parcel found at location"),!1;const f=h.features[0];console.log(" PARCEL ID:",f.id||f.properties?.id||"geen ID"),console.log(" PARCEL BBOX:",JSON.stringify(f.bbox||"geen bbox"));const y=new BL().readFeature(f,{dataProjection:"EPSG:28992",featureProjection:"EPSG:3857"}),_=y.getGeometry();if(!_)return console.log("No geometry in parcel feature"),!1;const b=f.properties||{};console.log(` Parcel: ${b.category||"unknown"} - ${b.gewasnaam||b.gewas||"geen gewas"}`),console.log(` Geometry type: ${_.getType()}, extent: ${_.getExtent().map(O=>O.toFixed(0)).join(", ")}`);const T=_.getExtent(),A=T[2]-T[0],I=T[3]-T[1],P=Math.max(A,I)*.05,M=[T[0]-P,T[1]-P,T[2]+P,T[3]+P],V=Math.max(A,I)*.3,C=[T[0]-V,T[1]-V,T[2]+V,T[3]+V];kx=_,t1=new zCe({source:new pRe({url:"https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer",params:{renderingRule:JSON.stringify({rasterFunction:"AHN - Color Ramp D"})},crossOrigin:"anonymous"}),extent:M,zIndex:998}),t1.on("prerender",O=>{if(!kx)return;const L=O.context;if(!L)return;const F=O.frameState;if(!F)return;L.save(),L.beginPath(),(kx.getType()==="Polygon"?kx.getCoordinates()[0]:kx.getCoordinates()[0][0]).forEach((U,he)=>{const Ie=t.getPixelFromCoordinate(U);if(!Ie)return;const ze=F.pixelRatio,Oe=Ie[0]*ze,fe=Ie[1]*ze;he===0?L.moveTo(Oe,fe):L.lineTo(Oe,fe)}),L.closePath(),L.clip()}),t1.on("postrender",O=>{const L=O.context;L&&L.restore()}),t.addLayer(t1);const N=new Ol({features:[y]});return hk=new Ll({source:N,style:new xn({fill:new Dn({color:"rgba(0, 0, 0, 0)"}),stroke:new Mn({color:"#dc2626",width:3})}),zIndex:999}),t.addLayer(hk),console.log(" Parcel height map displayed"),!0}catch(n){return console.error("Failed to show parcel height map:",n),!1}}var v5={};v5.version="0.18.5";var nEe=1252,bvt=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],rEe=function(t){bvt.indexOf(t)!=-1&&(nEe=t)};function Evt(){rEe(1252)}var VA=function(t){rEe(t)};function Svt(){VA(1200),Evt()}var zR=function(e){return String.fromCharCode(e)},Qoe=function(e){return String.fromCharCode(e)},_5,_g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function zA(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0,c=0;c<t.length;)n=t.charCodeAt(c++),s=n>>2,r=t.charCodeAt(c++),o=(n&3)<<4|r>>4,i=t.charCodeAt(c++),a=(r&15)<<2|i>>6,l=i&63,isNaN(r)?a=l=64:isNaN(i)&&(l=64),e+=_g.charAt(s)+_g.charAt(o)+_g.charAt(a)+_g.charAt(l);return e}function Pp(t){var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)s=_g.indexOf(t.charAt(c++)),o=_g.indexOf(t.charAt(c++)),n=s<<2|o>>4,e+=String.fromCharCode(n),a=_g.indexOf(t.charAt(c++)),r=(o&15)<<4|a>>2,a!==64&&(e+=String.fromCharCode(r)),l=_g.indexOf(t.charAt(c++)),i=(a&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var Ar=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),$p=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function sv(t){return Ar?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function eae(t){return Ar?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var sh=function(e){return Ar?$p(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function XL(t){if(typeof ArrayBuffer>"u")return sh(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function hP(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function Tvt(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var Oo=Ar?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:$p(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),i=0;for(e=0,n=0;e<t.length;n+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function kvt(t){for(var e=[],n=0,r=t.length+250,i=sv(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)i[n++]=o;else if(o<2048)i[n++]=192|o>>6&31,i[n++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var a=t.charCodeAt(++s)&1023;i[n++]=240|o>>8&7,i[n++]=128|o>>2&63,i[n++]=128|a>>6&15|(o&3)<<4,i[n++]=128|a&63}else i[n++]=224|o>>12&15,i[n++]=128|o>>6&63,i[n++]=128|o&63;n>r&&(e.push(i.slice(0,n)),n=0,i=sv(65535),r=65530)}return e.push(i.slice(0,n)),Oo(e)}var dk=/\u0000/g,GR=/[\u0001-\u0006]/g;function Rw(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function dh(t,e){var n=""+t;return n.length>=e?n:Ji("0",e-n.length)+n}function Bq(t,e){var n=""+t;return n.length>=e?n:Ji(" ",e-n.length)+n}function x5(t,e){var n=""+t;return n.length>=e?n:n+Ji(" ",e-n.length)}function Avt(t,e){var n=""+Math.round(t);return n.length>=e?n:Ji("0",e-n.length)+n}function Ivt(t,e){var n=""+t;return n.length>=e?n:Ji("0",e-n.length)+n}var tae=Math.pow(2,32);function z_(t,e){if(t>tae||t<-tae)return Avt(t,e);var n=Math.round(t);return Ivt(n,e)}function w5(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var nae=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],wF=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Pvt(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var rs={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},rae={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Cvt={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function b5(t,e,n){for(var r=t<0?-1:1,i=t*r,s=0,o=1,a=0,l=1,c=0,u=0,h=Math.floor(i);c<e&&(h=Math.floor(i),a=h*o+s,u=h*c+l,!(i-h<5e-8));)i=1/(i-h),s=o,o=a,l=c,c=u;if(u>e&&(c>e?(u=l,a=s):(u=c,a=o)),!n)return[0,r*a,u];var f=Math.floor(r*a/u);return[f,r*a-f*u,u]}function UR(t,e,n){if(t>2958465||t<0)return null;var r=t|0,i=Math.floor(86400*(t-r)),s=0,o=[],a={D:r,T:i,u:86400*(t-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),e&&e.date1904&&(r+=1462),a.u>.9999&&(a.u=0,++i==86400&&(a.T=i=0,++r,++a.D)),r===60)o=n?[1317,10,29]:[1900,2,29],s=3;else if(r===0)o=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=jvt(l,o))}return a.y=o[0],a.m=o[1],a.d=o[2],a.S=i%60,i=Math.floor(i/60),a.M=i%60,i=Math.floor(i/60),a.H=i,a.q=s,a}var iEe=new Date(1899,11,31,0,0,0),Rvt=iEe.getTime(),Mvt=new Date(1900,2,1,0,0,0);function sEe(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=Mvt&&(n+=1440*60*1e3),(n-(Rvt+(t.getTimezoneOffset()-iEe.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Wq(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Nvt(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Ovt(t){var e=t<0?12:11,n=Wq(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function Lvt(t){var e=Wq(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Dvt(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=Ovt(t):e===10?n=t.toFixed(10).substr(0,12):n=Lvt(t),Wq(Nvt(n.toUpperCase()))}function iG(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Dvt(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return o0(14,sEe(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function jvt(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function $vt(t,e,n,r){var i="",s=0,o=0,a=n.y,l,c=0;switch(t){case 98:a=n.y+543;case 121:switch(e.length){case 1:case 2:l=a%100,c=2;break;default:l=a%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=n.m,c=e.length;break;case 3:return wF[n.m-1][1];case 5:return wF[n.m-1][0];default:return wF[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=n.d,c=e.length;break;case 3:return nae[n.q][0];default:return nae[n.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(n.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=n.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=n.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?dh(n.S,e.length):(r>=2?o=r===3?1e3:100:o=r===1?10:1,s=Math.round(o*(n.S+n.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(i=dh(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=a,c=1;break}var u=c>0?dh(l,c):"";return u}function xg(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var oEe=/%/g;function Fvt(t,e,n){var r=e.replace(oEe,""),i=e.length-r.length;return gp(t,r,n*Math.pow(10,2*i))+Ji("%",i)}function Vvt(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return gp(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function aEe(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+aEe(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),n.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var lEe=/# (\?+)( ?)\/( ?)(\d+)/;function zvt(t,e,n){var r=parseInt(t[4],10),i=Math.round(e*r),s=Math.floor(i/r),o=i-s*r,a=r;return n+(s===0?"":""+s)+" "+(o===0?Ji(" ",t[1].length+1+t[4].length):Bq(o,t[1].length)+t[2]+"/"+t[3]+dh(a,t[4].length))}function Gvt(t,e,n){return n+(e===0?"":""+e)+Ji(" ",t[1].length+2+t[4].length)}var cEe=/^#*0*\.([0#]+)/,uEe=/\).*[0#]/,hEe=/\(###\) ###\\?-####/;function Na(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function iae(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function sae(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function Uvt(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function Bvt(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Hc(t,e,n){if(t.charCodeAt(0)===40&&!e.match(uEe)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Hc("n",r,n):"("+Hc("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return Vvt(t,e,n);if(e.indexOf("%")!==-1)return Fvt(t,e,n);if(e.indexOf("E")!==-1)return aEe(e,n);if(e.charCodeAt(0)===36)return"$"+Hc(t,e.substr(e.charAt(1)==" "?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(e.match(/^00+$/))return c+z_(l,e.length);if(e.match(/^[#?]+$/))return i=z_(n,0),i==="0"&&(i=""),i.length>e.length?i:Na(e.substr(0,e.length-i.length))+i;if(s=e.match(lEe))return zvt(s,l,c);if(e.match(/^#+0+$/))return c+z_(l,e.length-e.indexOf("0"));if(s=e.match(cEe))return i=iae(n,s[1].length).replace(/^([^\.]+)$/,"$1."+Na(s[1])).replace(/\.$/,"."+Na(s[1])).replace(/\.(\d*)$/,function(y,_){return"."+_+Ji("0",Na(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+iae(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+xg(z_(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Hc(t,e,-n):xg(""+(Math.floor(n)+Uvt(n,s[1].length)))+"."+dh(sae(n,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Hc(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Rw(Hc(t,e.replace(/[\\-]/g,""),n)),o=0,Rw(Rw(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<i.length?i.charAt(o++):y==="0"?"0":""}));if(e.match(hEe))return i=Hc(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=b5(l,Math.pow(10,o)-1,!1),i=""+c,u=gp("n",s[1],a[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=x5(a[2],o),u.length<s[4].length&&(u=Na(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=b5(l,Math.pow(10,o)-1,!0),c+(a[0]||(a[1]?"":"0"))+" "+(a[1]?Bq(a[1],o)+s[2]+"/"+s[3]+x5(a[2],o):Ji(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=z_(n,0),e.length<=i.length?i:Na(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var h=e.indexOf(".")-o,f=e.length-i.length-h;return Na(e.substr(0,h)+i+e.substr(e.length-f))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=sae(n,s[1].length),n<0?"-"+Hc(t,e,-n):xg(Bvt(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?dh(0,3-y.length):"")+y})+"."+dh(o,s[1].length);switch(e){case"###,##0.00":return Hc(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var g=xg(z_(l,0));return g!=="0"?c+g:"";case"###,###.00":return Hc(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Hc(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function Wvt(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return gp(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function Hvt(t,e,n){var r=e.replace(oEe,""),i=e.length-r.length;return gp(t,r,n*Math.pow(10,2*i))+Ji("%",i)}function dEe(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+dEe(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!n.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function sd(t,e,n){if(t.charCodeAt(0)===40&&!e.match(uEe)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?sd("n",r,n):"("+sd("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return Wvt(t,e,n);if(e.indexOf("%")!==-1)return Hvt(t,e,n);if(e.indexOf("E")!==-1)return dEe(e,n);if(e.charCodeAt(0)===36)return"$"+sd(t,e.substr(e.charAt(1)==" "?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(e.match(/^00+$/))return c+dh(l,e.length);if(e.match(/^[#?]+$/))return i=""+n,n===0&&(i=""),i.length>e.length?i:Na(e.substr(0,e.length-i.length))+i;if(s=e.match(lEe))return Gvt(s,l,c);if(e.match(/^#+0+$/))return c+dh(l,e.length-e.indexOf("0"));if(s=e.match(cEe))return i=(""+n).replace(/^([^\.]+)$/,"$1."+Na(s[1])).replace(/\.$/,"."+Na(s[1])),i=i.replace(/\.(\d*)$/,function(y,_){return"."+_+Ji("0",Na(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+xg(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+sd(t,e,-n):xg(""+n)+"."+Ji("0",s[1].length);if(s=e.match(/^#,#*,#0/))return sd(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Rw(sd(t,e.replace(/[\\-]/g,""),n)),o=0,Rw(Rw(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<i.length?i.charAt(o++):y==="0"?"0":""}));if(e.match(hEe))return i=sd(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=b5(l,Math.pow(10,o)-1,!1),i=""+c,u=gp("n",s[1],a[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=x5(a[2],o),u.length<s[4].length&&(u=Na(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=b5(l,Math.pow(10,o)-1,!0),c+(a[0]||(a[1]?"":"0"))+" "+(a[1]?Bq(a[1],o)+s[2]+"/"+s[3]+x5(a[2],o):Ji(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+n,e.length<=i.length?i:Na(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var h=e.indexOf(".")-o,f=e.length-i.length-h;return Na(e.substr(0,h)+i+e.substr(e.length-f))}if(s=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+sd(t,e,-n):xg(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?dh(0,3-y.length):"")+y})+"."+dh(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=xg(""+l);return g!=="0"?c+g:"";default:if(e.match(/\.[0#?]*$/))return sd(t,e.slice(0,e.lastIndexOf(".")),n)+Na(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function gp(t,e,n){return(n|0)===n?sd(t,e,n):Hc(t,e,n)}function qvt(t){for(var e=[],n=!1,r=0,i=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(i,r-i),i=r+1}if(e[e.length]=t.substr(i),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var fEe=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function pEe(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":w5(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(fEe))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Kvt(t,e,n,r){for(var i=[],s="",o=0,a="",l="t",c,u,h,f="H";o<t.length;)switch(a=t.charAt(o)){case"G":if(!w5(t,o))throw new Error("unrecognized character "+a+" in "+t);i[i.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(h=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(h);i[i.length]={t:"t",v:s},++o;break;case"\\":var g=t.charAt(++o),y=g==="("||g===")"?g:"t";i[i.length]={t:y,v:g},++o;break;case"_":i[i.length]={t:"t",v:" "},o+=2;break;case"@":i[i.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(c==null&&(c=UR(e,n,t.charAt(o+1)==="2"),c==null))return"";i[i.length]={t:"X",v:t.substr(o,2)},l=a,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":a=a.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=UR(e,n),c==null))return"";for(s=a;++o<t.length&&t.charAt(o).toLowerCase()===a;)s+=a;a==="m"&&l.toLowerCase()==="h"&&(a="M"),a==="h"&&(a=f),i[i.length]={t:a,v:s},l=a;break;case"A":case"a":case"":var _={t:a,v:a};if(c==null&&(c=UR(e,n)),t.substr(o,3).toUpperCase()==="A/P"?(c!=null&&(_.v=c.H>=12?"P":"A"),_.t="T",f="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(c!=null&&(_.v=c.H>=12?"PM":"AM"),_.t="T",o+=5,f="h"):t.substr(o,5).toUpperCase()==="/"?(c!=null&&(_.v=c.H>=12?"":""),_.t="T",o+=5,f="h"):(_.t="t",++o),c==null&&_.t==="T")return"";i[i.length]=_,l=a;break;case"[":for(s=a;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(fEe)){if(c==null&&(c=UR(e,n),c==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",pEe(t)||(i[i.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=a;++o<t.length&&(a=t.charAt(o))==="0";)s+=a;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=a;++o<t.length&&"0#?.,E+-%".indexOf(a=t.charAt(o))>-1;)s+=a;i[i.length]={t:"n",v:s};break;case"?":for(s=a;t.charAt(++o)===a;)s+=a;i[i.length]={t:a,v:s},l=a;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":i[i.length]={t:r===1?"t":a,v:a},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=a;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:a,v:a},++o;break;case"$":i[i.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(a)===-1)throw new Error("unrecognized character "+a+" in "+t);i[i.length]={t:"t",v:a},++o;break}var b=0,T=0,A;for(o=i.length-1,l="t";o>=0;--o)switch(i[o].t){case"h":case"H":i[o].t=f,l="h",b<1&&(b=1);break;case"s":(A=i[o].v.match(/\.0+$/))&&(T=Math.max(T,A[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=i[o].t;break;case"m":l==="s"&&(i[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&i[o].v.match(/[Hh]/)&&(b=1),b<2&&i[o].v.match(/[Mm]/)&&(b=2),b<3&&i[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var I="",P;for(o=0;o<i.length;++o)switch(i[o].t){case"t":case"T":case" ":case"D":break;case"X":i[o].v="",i[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[o].v=$vt(i[o].t.charCodeAt(0),i[o].v,c,T),i[o].t="t";break;case"n":case"?":for(P=o+1;i[P]!=null&&((a=i[P].t)==="?"||a==="D"||(a===" "||a==="t")&&i[P+1]!=null&&(i[P+1].t==="?"||i[P+1].t==="t"&&i[P+1].v==="/")||i[o].t==="("&&(a===" "||a==="n"||a===")")||a==="t"&&(i[P].v==="/"||i[P].v===" "&&i[P+1]!=null&&i[P+1].t=="?"));)i[o].v+=i[P].v,i[P]={v:"",t:";"},++P;I+=i[o].v,o=P-1;break;case"G":i[o].t="t",i[o].v=iG(e,n);break}var M="",V,C;if(I.length>0){I.charCodeAt(0)==40?(V=e<0&&I.charCodeAt(0)===45?-e:e,C=gp("n",I,V)):(V=e<0&&r>1?-e:e,C=gp("n",I,V),V<0&&i[0]&&i[0].t=="t"&&(C=C.substr(1),i[0].v="-"+i[0].v)),P=C.length-1;var N=i.length;for(o=0;o<i.length;++o)if(i[o]!=null&&i[o].t!="t"&&i[o].v.indexOf(".")>-1){N=o;break}var O=i.length;if(N===i.length&&C.indexOf("E")===-1){for(o=i.length-1;o>=0;--o)i[o]==null||"n?".indexOf(i[o].t)===-1||(P>=i[o].v.length-1?(P-=i[o].v.length,i[o].v=C.substr(P+1,i[o].v.length)):P<0?i[o].v="":(i[o].v=C.substr(0,P+1),P=-1),i[o].t="t",O=o);P>=0&&O<i.length&&(i[O].v=C.substr(0,P+1)+i[O].v)}else if(N!==i.length&&C.indexOf("E")===-1){for(P=C.indexOf(".")-1,o=N;o>=0;--o)if(!(i[o]==null||"n?".indexOf(i[o].t)===-1)){for(u=i[o].v.indexOf(".")>-1&&o===N?i[o].v.indexOf(".")-1:i[o].v.length-1,M=i[o].v.substr(u+1);u>=0;--u)P>=0&&(i[o].v.charAt(u)==="0"||i[o].v.charAt(u)==="#")&&(M=C.charAt(P--)+M);i[o].v=M,i[o].t="t",O=o}for(P>=0&&O<i.length&&(i[O].v=C.substr(0,P+1)+i[O].v),P=C.indexOf(".")+1,o=N;o<i.length;++o)if(!(i[o]==null||"n?(".indexOf(i[o].t)===-1&&o!==N)){for(u=i[o].v.indexOf(".")>-1&&o===N?i[o].v.indexOf(".")+1:0,M=i[o].v.substr(0,u);u<i[o].v.length;++u)P<C.length&&(M+=C.charAt(P++));i[o].v=M,i[o].t="t",O=o}}}for(o=0;o<i.length;++o)i[o]!=null&&"n?".indexOf(i[o].t)>-1&&(V=r>1&&e<0&&o>0&&i[o-1].v==="-"?-e:e,i[o].v=gp(i[o].t,i[o].v,V),i[o].t="t");var L="";for(o=0;o!==i.length;++o)i[o]!=null&&(L+=i[o].v);return L}var oae=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function aae(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function Yvt(t,e){var n=qvt(t),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var s=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,s];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var o=n[0].match(oae),a=n[1].match(oae);return aae(e,o)?[r,n[0]]:aae(e,a)?[r,n[1]]:[r,n[o!=null&&a!=null?2:1]]}return[r,s]}function o0(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:rs)[t],r==null&&(r=n.table&&n.table[rae[t]]||rs[rae[t]]),r==null&&(r=Cvt[t]||"General");break}if(w5(r,0))return iG(e,n);e instanceof Date&&(e=sEe(e,n.date1904));var i=Yvt(r,e);if(w5(i[1]))return iG(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Kvt(i[1],e,n,i[0])}function mEe(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(rs[n]==null){e<0&&(e=n);continue}if(rs[n]==t){e=n;break}}e<0&&(e=391)}return rs[e]=t,e}function ZL(t){for(var e=0;e!=392;++e)t[e]!==void 0&&mEe(t[e],e)}function JL(){rs=Pvt()}var gEe=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Xvt(t){var e=typeof t=="number"?rs[t]:t;return e=e.replace(gEe,"(\\d+)"),new RegExp("^"+e+"$")}function Zvt(t,e,n){var r=-1,i=-1,s=-1,o=-1,a=-1,l=-1;(e.match(gEe)||[]).forEach(function(h,f){var g=parseInt(n[f+1],10);switch(h.toLowerCase().charAt(0)){case"y":r=g;break;case"d":s=g;break;case"h":o=g;break;case"s":l=g;break;case"m":o>=0?a=g:i=g;break}}),l>=0&&a==-1&&i>=0&&(a=i,i=-1);var c=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return o==-1&&a==-1&&l==-1?c:r==-1&&i==-1&&s==-1?u:c+"T"+u}var Jvt=(function(){var t={};t.version="1.2.0";function e(){for(var C=0,N=new Array(256),O=0;O!=256;++O)C=O,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,N[O]=C;return typeof Int32Array<"u"?new Int32Array(N):N}var n=e();function r(C){var N=0,O=0,L=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)F[L]=C[L];for(L=0;L!=256;++L)for(O=C[L],N=256+L;N<4096;N+=256)O=F[N]=O>>>8^C[O&255];var G=[];for(L=1;L!=16;++L)G[L-1]=typeof Int32Array<"u"?F.subarray(L*256,L*256+256):F.slice(L*256,L*256+256);return G}var i=r(n),s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],h=i[6],f=i[7],g=i[8],y=i[9],_=i[10],b=i[11],T=i[12],A=i[13],I=i[14];function P(C,N){for(var O=N^-1,L=0,F=C.length;L<F;)O=O>>>8^n[(O^C.charCodeAt(L++))&255];return~O}function M(C,N){for(var O=N^-1,L=C.length-15,F=0;F<L;)O=I[C[F++]^O&255]^A[C[F++]^O>>8&255]^T[C[F++]^O>>16&255]^b[C[F++]^O>>>24]^_[C[F++]]^y[C[F++]]^g[C[F++]]^f[C[F++]]^h[C[F++]]^u[C[F++]]^c[C[F++]]^l[C[F++]]^a[C[F++]]^o[C[F++]]^s[C[F++]]^n[C[F++]];for(L+=15;F<L;)O=O>>>8^n[(O^C[F++])&255];return~O}function V(C,N){for(var O=N^-1,L=0,F=C.length,G=0,U=0;L<F;)G=C.charCodeAt(L++),G<128?O=O>>>8^n[(O^G)&255]:G<2048?(O=O>>>8^n[(O^(192|G>>6&31))&255],O=O>>>8^n[(O^(128|G&63))&255]):G>=55296&&G<57344?(G=(G&1023)+64,U=C.charCodeAt(L++)&1023,O=O>>>8^n[(O^(240|G>>8&7))&255],O=O>>>8^n[(O^(128|G>>2&63))&255],O=O>>>8^n[(O^(128|U>>6&15|(G&3)<<4))&255],O=O>>>8^n[(O^(128|U&63))&255]):(O=O>>>8^n[(O^(224|G>>12&15))&255],O=O>>>8^n[(O^(128|G>>6&63))&255],O=O>>>8^n[(O^(128|G&63))&255]);return~O}return t.table=n,t.bstr=P,t.buf=M,t.str=V,t})(),Xr=(function(){var e={};e.version="1.2.1";function n(q,re){for(var Q=q.split("/"),te=re.split("/"),se=0,oe=0,Me=Math.min(Q.length,te.length);se<Me;++se){if(oe=Q[se].length-te[se].length)return oe;if(Q[se]!=te[se])return Q[se]<te[se]?-1:1}return Q.length-te.length}function r(q){if(q.charAt(q.length-1)=="/")return q.slice(0,-1).indexOf("/")===-1?q:r(q.slice(0,-1));var re=q.lastIndexOf("/");return re===-1?q:q.slice(0,re+1)}function i(q){if(q.charAt(q.length-1)=="/")return i(q.slice(0,-1));var re=q.lastIndexOf("/");return re===-1?q:q.slice(re+1)}function s(q,re){typeof re=="string"&&(re=new Date(re));var Q=re.getHours();Q=Q<<6|re.getMinutes(),Q=Q<<5|re.getSeconds()>>>1,q.write_shift(2,Q);var te=re.getFullYear()-1980;te=te<<4|re.getMonth()+1,te=te<<5|re.getDate(),q.write_shift(2,te)}function o(q){var re=q.read_shift(2)&65535,Q=q.read_shift(2)&65535,te=new Date,se=Q&31;Q>>>=5;var oe=Q&15;Q>>>=4,te.setMilliseconds(0),te.setFullYear(Q+1980),te.setMonth(oe-1),te.setDate(se);var Me=re&31;re>>>=5;var Be=re&63;return re>>>=6,te.setHours(re),te.setMinutes(Be),te.setSeconds(Me<<1),te}function a(q){ic(q,0);for(var re={},Q=0;q.l<=q.length-4;){var te=q.read_shift(2),se=q.read_shift(2),oe=q.l+se,Me={};switch(te){case 21589:Q=q.read_shift(1),Q&1&&(Me.mtime=q.read_shift(4)),se>5&&(Q&2&&(Me.atime=q.read_shift(4)),Q&4&&(Me.ctime=q.read_shift(4))),Me.mtime&&(Me.mt=new Date(Me.mtime*1e3));break}q.l=oe,re[te]=Me}return re}var l;function c(){return l||(l={})}function u(q,re){if(q[0]==80&&q[1]==75)return on(q,re);if((q[0]|32)==109&&(q[1]|32)==105)return Je(q,re);if(q.length<512)throw new Error("CFB file size "+q.length+" < 512");var Q=3,te=512,se=0,oe=0,Me=0,Be=0,Re=0,Le=[],De=q.slice(0,512);ic(De,0);var ct=h(De);switch(Q=ct[0],Q){case 3:te=512;break;case 4:te=4096;break;case 0:if(ct[1]==0)return on(q,re);default:throw new Error("Major Version: Expected 3 or 4 saw "+Q)}te!==512&&(De=q.slice(0,te),ic(De,28));var vt=q.slice(0,te);f(De,Q);var Ct=De.read_shift(4,"i");if(Q===3&&Ct!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ct);De.l+=4,Me=De.read_shift(4,"i"),De.l+=4,De.chk("00100000","Mini Stream Cutoff Size: "),Be=De.read_shift(4,"i"),se=De.read_shift(4,"i"),Re=De.read_shift(4,"i"),oe=De.read_shift(4,"i");for(var ht=-1,dt=0;dt<109&&(ht=De.read_shift(4,"i"),!(ht<0));++dt)Le[dt]=ht;var Tn=g(q,te);b(Re,oe,Tn,te,Le);var Mr=A(Tn,Me,Le,te);Mr[Me].name="!Directory",se>0&&Be!==U&&(Mr[Be].name="!MiniFAT"),Mr[Le[0]].name="!FAT",Mr.fat_addrs=Le,Mr.ssz=te;var $r={},_i=[],bu=[],Ic=[];I(Me,Mr,Tn,_i,se,$r,bu,Be),y(bu,Ic,_i),_i.shift();var $l={FileIndex:bu,FullPaths:Ic};return re&&re.raw&&($l.raw={header:vt,sectors:Tn}),$l}function h(q){if(q[q.l]==80&&q[q.l+1]==75)return[0,0];q.chk(he,"Header Signature: "),q.l+=16;var re=q.read_shift(2,"u");return[q.read_shift(2,"u"),re]}function f(q,re){var Q=9;switch(q.l+=2,Q=q.read_shift(2)){case 9:if(re!=3)throw new Error("Sector Shift: Expected 9 saw "+Q);break;case 12:if(re!=4)throw new Error("Sector Shift: Expected 12 saw "+Q);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Q)}q.chk("0600","Mini Sector Shift: "),q.chk("000000000000","Reserved: ")}function g(q,re){for(var Q=Math.ceil(q.length/re)-1,te=[],se=1;se<Q;++se)te[se-1]=q.slice(se*re,(se+1)*re);return te[Q-1]=q.slice(Q*re),te}function y(q,re,Q){for(var te=0,se=0,oe=0,Me=0,Be=0,Re=Q.length,Le=[],De=[];te<Re;++te)Le[te]=De[te]=te,re[te]=Q[te];for(;Be<De.length;++Be)te=De[Be],se=q[te].L,oe=q[te].R,Me=q[te].C,Le[te]===te&&(se!==-1&&Le[se]!==se&&(Le[te]=Le[se]),oe!==-1&&Le[oe]!==oe&&(Le[te]=Le[oe])),Me!==-1&&(Le[Me]=te),se!==-1&&te!=Le[te]&&(Le[se]=Le[te],De.lastIndexOf(se)<Be&&De.push(se)),oe!==-1&&te!=Le[te]&&(Le[oe]=Le[te],De.lastIndexOf(oe)<Be&&De.push(oe));for(te=1;te<Re;++te)Le[te]===te&&(oe!==-1&&Le[oe]!==oe?Le[te]=Le[oe]:se!==-1&&Le[se]!==se&&(Le[te]=Le[se]));for(te=1;te<Re;++te)if(q[te].type!==0){if(Be=te,Be!=Le[Be])do Be=Le[Be],re[te]=re[Be]+"/"+re[te];while(Be!==0&&Le[Be]!==-1&&Be!=Le[Be]);Le[te]=-1}for(re[0]+="/",te=1;te<Re;++te)q[te].type!==2&&(re[te]+="/")}function _(q,re,Q){for(var te=q.start,se=q.size,oe=[],Me=te;Q&&se>0&&Me>=0;)oe.push(re.slice(Me*G,Me*G+G)),se-=G,Me=jy(Q,Me*4);return oe.length===0?Ue(0):Oo(oe).slice(0,q.size)}function b(q,re,Q,te,se){var oe=U;if(q===U){if(re!==0)throw new Error("DIFAT chain shorter than expected")}else if(q!==-1){var Me=Q[q],Be=(te>>>2)-1;if(!Me)return;for(var Re=0;Re<Be&&(oe=jy(Me,Re*4))!==U;++Re)se.push(oe);b(jy(Me,te-4),re-1,Q,te,se)}}function T(q,re,Q,te,se){var oe=[],Me=[];se||(se=[]);var Be=te-1,Re=0,Le=0;for(Re=re;Re>=0;){se[Re]=!0,oe[oe.length]=Re,Me.push(q[Re]);var De=Q[Math.floor(Re*4/te)];if(Le=Re*4&Be,te<4+Le)throw new Error("FAT boundary crossed: "+Re+" 4 "+te);if(!q[De])break;Re=jy(q[De],Le)}return{nodes:oe,data:mae([Me])}}function A(q,re,Q,te){var se=q.length,oe=[],Me=[],Be=[],Re=[],Le=te-1,De=0,ct=0,vt=0,Ct=0;for(De=0;De<se;++De)if(Be=[],vt=De+re,vt>=se&&(vt-=se),!Me[vt]){Re=[];var ht=[];for(ct=vt;ct>=0;){ht[ct]=!0,Me[ct]=!0,Be[Be.length]=ct,Re.push(q[ct]);var dt=Q[Math.floor(ct*4/te)];if(Ct=ct*4&Le,te<4+Ct)throw new Error("FAT boundary crossed: "+ct+" 4 "+te);if(!q[dt]||(ct=jy(q[dt],Ct),ht[ct]))break}oe[vt]={nodes:Be,data:mae([Re])}}return oe}function I(q,re,Q,te,se,oe,Me,Be){for(var Re=0,Le=te.length?2:0,De=re[q].data,ct=0,vt=0,Ct;ct<De.length;ct+=128){var ht=De.slice(ct,ct+128);ic(ht,64),vt=ht.read_shift(2),Ct=Xq(ht,0,vt-Le),te.push(Ct);var dt={name:Ct,type:ht.read_shift(1),color:ht.read_shift(1),L:ht.read_shift(4,"i"),R:ht.read_shift(4,"i"),C:ht.read_shift(4,"i"),clsid:ht.read_shift(16),state:ht.read_shift(4,"i"),start:0,size:0},Tn=ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2);Tn!==0&&(dt.ct=P(ht,ht.l-8));var Mr=ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2)+ht.read_shift(2);Mr!==0&&(dt.mt=P(ht,ht.l-8)),dt.start=ht.read_shift(4,"i"),dt.size=ht.read_shift(4,"i"),dt.size<0&&dt.start<0&&(dt.size=dt.type=0,dt.start=U,dt.name=""),dt.type===5?(Re=dt.start,se>0&&Re!==U&&(re[Re].name="!StreamData")):dt.size>=4096?(dt.storage="fat",re[dt.start]===void 0&&(re[dt.start]=T(Q,dt.start,re.fat_addrs,re.ssz)),re[dt.start].name=dt.name,dt.content=re[dt.start].data.slice(0,dt.size)):(dt.storage="minifat",dt.size<0?dt.size=0:Re!==U&&dt.start!==U&&re[Re]&&(dt.content=_(dt,re[Re].data,(re[Be]||{}).data))),dt.content&&ic(dt.content,0),oe[Ct]=dt,Me.push(dt)}}function P(q,re){return new Date((cc(q,re+4)/1e7*Math.pow(2,32)+cc(q,re)/1e7-11644473600)*1e3)}function M(q,re){return c(),u(l.readFileSync(q),re)}function V(q,re){var Q=re&&re.type;switch(Q||Ar&&Buffer.isBuffer(q)&&(Q="buffer"),Q||"base64"){case"file":return M(q,re);case"base64":return u(sh(Pp(q)),re);case"binary":return u(sh(q),re)}return u(q,re)}function C(q,re){var Q=re||{},te=Q.root||"Root Entry";if(q.FullPaths||(q.FullPaths=[]),q.FileIndex||(q.FileIndex=[]),q.FullPaths.length!==q.FileIndex.length)throw new Error("inconsistent CFB structure");q.FullPaths.length===0&&(q.FullPaths[0]=te+"/",q.FileIndex[0]={name:te,type:5}),Q.CLSID&&(q.FileIndex[0].clsid=Q.CLSID),N(q)}function N(q){var re="Sh33tJ5";if(!Xr.find(q,"/"+re)){var Q=Ue(4);Q[0]=55,Q[1]=Q[3]=50,Q[2]=54,q.FileIndex.push({name:re,type:2,content:Q,size:4,L:69,R:69,C:69}),q.FullPaths.push(q.FullPaths[0]+re),O(q)}}function O(q,re){C(q);for(var Q=!1,te=!1,se=q.FullPaths.length-1;se>=0;--se){var oe=q.FileIndex[se];switch(oe.type){case 0:te?Q=!0:(q.FileIndex.pop(),q.FullPaths.pop());break;case 1:case 2:case 5:te=!0,isNaN(oe.R*oe.L*oe.C)&&(Q=!0),oe.R>-1&&oe.L>-1&&oe.R==oe.L&&(Q=!0);break;default:Q=!0;break}}if(!(!Q&&!re)){var Me=new Date(1987,1,19),Be=0,Re=Object.create?Object.create(null):{},Le=[];for(se=0;se<q.FullPaths.length;++se)Re[q.FullPaths[se]]=!0,q.FileIndex[se].type!==0&&Le.push([q.FullPaths[se],q.FileIndex[se]]);for(se=0;se<Le.length;++se){var De=r(Le[se][0]);te=Re[De],te||(Le.push([De,{name:i(De).replace("/",""),type:1,clsid:ze,ct:Me,mt:Me,content:null}]),Re[De]=!0)}for(Le.sort(function(Ct,ht){return n(Ct[0],ht[0])}),q.FullPaths=[],q.FileIndex=[],se=0;se<Le.length;++se)q.FullPaths[se]=Le[se][0],q.FileIndex[se]=Le[se][1];for(se=0;se<Le.length;++se){var ct=q.FileIndex[se],vt=q.FullPaths[se];if(ct.name=i(vt).replace("/",""),ct.L=ct.R=ct.C=-(ct.color=1),ct.size=ct.content?ct.content.length:0,ct.start=0,ct.clsid=ct.clsid||ze,se===0)ct.C=Le.length>1?1:-1,ct.size=0,ct.type=5;else if(vt.slice(-1)=="/"){for(Be=se+1;Be<Le.length&&r(q.FullPaths[Be])!=vt;++Be);for(ct.C=Be>=Le.length?-1:Be,Be=se+1;Be<Le.length&&r(q.FullPaths[Be])!=r(vt);++Be);ct.R=Be>=Le.length?-1:Be,ct.type=1}else r(q.FullPaths[se+1]||"")==r(vt)&&(ct.R=se+1),ct.type=2}}}function L(q,re){var Q=re||{};if(Q.fileType=="mad")return Ge(q,Q);switch(O(q),Q.fileType){case"zip":return Tt(q,Q)}var te=(function(Ct){for(var ht=0,dt=0,Tn=0;Tn<Ct.FileIndex.length;++Tn){var Mr=Ct.FileIndex[Tn];if(Mr.content){var $r=Mr.content.length;$r>0&&($r<4096?ht+=$r+63>>6:dt+=$r+511>>9)}}for(var _i=Ct.FullPaths.length+3>>2,bu=ht+7>>3,Ic=ht+127>>7,$l=bu+dt+_i+Ic,ss=$l+127>>7,Fp=ss<=109?0:Math.ceil((ss-109)/127);$l+ss+Fp+127>>7>ss;)Fp=++ss<=109?0:Math.ceil((ss-109)/127);var Pi=[1,Fp,ss,Ic,_i,dt,ht,0];return Ct.FileIndex[0].size=ht<<6,Pi[7]=(Ct.FileIndex[0].start=Pi[0]+Pi[1]+Pi[2]+Pi[3]+Pi[4]+Pi[5])+(Pi[6]+7>>3),Pi})(q),se=Ue(te[7]<<9),oe=0,Me=0;{for(oe=0;oe<8;++oe)se.write_shift(1,Ie[oe]);for(oe=0;oe<8;++oe)se.write_shift(2,0);for(se.write_shift(2,62),se.write_shift(2,3),se.write_shift(2,65534),se.write_shift(2,9),se.write_shift(2,6),oe=0;oe<3;++oe)se.write_shift(2,0);for(se.write_shift(4,0),se.write_shift(4,te[2]),se.write_shift(4,te[0]+te[1]+te[2]+te[3]-1),se.write_shift(4,0),se.write_shift(4,4096),se.write_shift(4,te[3]?te[0]+te[1]+te[2]-1:U),se.write_shift(4,te[3]),se.write_shift(-4,te[1]?te[0]-1:U),se.write_shift(4,te[1]),oe=0;oe<109;++oe)se.write_shift(-4,oe<te[2]?te[1]+oe:-1)}if(te[1])for(Me=0;Me<te[1];++Me){for(;oe<236+Me*127;++oe)se.write_shift(-4,oe<te[2]?te[1]+oe:-1);se.write_shift(-4,Me===te[1]-1?U:Me+1)}var Be=function(Ct){for(Me+=Ct;oe<Me-1;++oe)se.write_shift(-4,oe+1);Ct&&(++oe,se.write_shift(-4,U))};for(Me=oe=0,Me+=te[1];oe<Me;++oe)se.write_shift(-4,Oe.DIFSECT);for(Me+=te[2];oe<Me;++oe)se.write_shift(-4,Oe.FATSECT);Be(te[3]),Be(te[4]);for(var Re=0,Le=0,De=q.FileIndex[0];Re<q.FileIndex.length;++Re)De=q.FileIndex[Re],De.content&&(Le=De.content.length,!(Le<4096)&&(De.start=Me,Be(Le+511>>9)));for(Be(te[6]+7>>3);se.l&511;)se.write_shift(-4,Oe.ENDOFCHAIN);for(Me=oe=0,Re=0;Re<q.FileIndex.length;++Re)De=q.FileIndex[Re],De.content&&(Le=De.content.length,!(!Le||Le>=4096)&&(De.start=Me,Be(Le+63>>6)));for(;se.l&511;)se.write_shift(-4,Oe.ENDOFCHAIN);for(oe=0;oe<te[4]<<2;++oe){var ct=q.FullPaths[oe];if(!ct||ct.length===0){for(Re=0;Re<17;++Re)se.write_shift(4,0);for(Re=0;Re<3;++Re)se.write_shift(4,-1);for(Re=0;Re<12;++Re)se.write_shift(4,0);continue}De=q.FileIndex[oe],oe===0&&(De.start=De.size?De.start-1:U);var vt=oe===0&&Q.root||De.name;if(Le=2*(vt.length+1),se.write_shift(64,vt,"utf16le"),se.write_shift(2,Le),se.write_shift(1,De.type),se.write_shift(1,De.color),se.write_shift(-4,De.L),se.write_shift(-4,De.R),se.write_shift(-4,De.C),De.clsid)se.write_shift(16,De.clsid,"hex");else for(Re=0;Re<4;++Re)se.write_shift(4,0);se.write_shift(4,De.state||0),se.write_shift(4,0),se.write_shift(4,0),se.write_shift(4,0),se.write_shift(4,0),se.write_shift(4,De.start),se.write_shift(4,De.size),se.write_shift(4,0)}for(oe=1;oe<q.FileIndex.length;++oe)if(De=q.FileIndex[oe],De.size>=4096)if(se.l=De.start+1<<9,Ar&&Buffer.isBuffer(De.content))De.content.copy(se,se.l,0,De.size),se.l+=De.size+511&-512;else{for(Re=0;Re<De.size;++Re)se.write_shift(1,De.content[Re]);for(;Re&511;++Re)se.write_shift(1,0)}for(oe=1;oe<q.FileIndex.length;++oe)if(De=q.FileIndex[oe],De.size>0&&De.size<4096)if(Ar&&Buffer.isBuffer(De.content))De.content.copy(se,se.l,0,De.size),se.l+=De.size+63&-64;else{for(Re=0;Re<De.size;++Re)se.write_shift(1,De.content[Re]);for(;Re&63;++Re)se.write_shift(1,0)}if(Ar)se.l=se.length;else for(;se.l<se.length;)se.write_shift(1,0);return se}function F(q,re){var Q=q.FullPaths.map(function(Re){return Re.toUpperCase()}),te=Q.map(function(Re){var Le=Re.split("/");return Le[Le.length-(Re.slice(-1)=="/"?2:1)]}),se=!1;re.charCodeAt(0)===47?(se=!0,re=Q[0].slice(0,-1)+re):se=re.indexOf("/")!==-1;var oe=re.toUpperCase(),Me=se===!0?Q.indexOf(oe):te.indexOf(oe);if(Me!==-1)return q.FileIndex[Me];var Be=!oe.match(GR);for(oe=oe.replace(dk,""),Be&&(oe=oe.replace(GR,"!")),Me=0;Me<Q.length;++Me)if((Be?Q[Me].replace(GR,"!"):Q[Me]).replace(dk,"")==oe||(Be?te[Me].replace(GR,"!"):te[Me]).replace(dk,"")==oe)return q.FileIndex[Me];return null}var G=64,U=-2,he="d0cf11e0a1b11ae1",Ie=[208,207,17,224,161,177,26,225],ze="00000000000000000000000000000000",Oe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:U,FREESECT:-1,HEADER_SIGNATURE:he,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ze,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function fe(q,re,Q){c();var te=L(q,Q);l.writeFileSync(re,te)}function ge(q){for(var re=new Array(q.length),Q=0;Q<q.length;++Q)re[Q]=String.fromCharCode(q[Q]);return re.join("")}function Se(q,re){var Q=L(q,re);switch(re&&re.type||"buffer"){case"file":return c(),l.writeFileSync(re.filename,Q),Q;case"binary":return typeof Q=="string"?Q:ge(Q);case"base64":return zA(typeof Q=="string"?Q:ge(Q));case"buffer":if(Ar)return Buffer.isBuffer(Q)?Q:$p(Q);case"array":return typeof Q=="string"?sh(Q):Q}return Q}var Z;function W(q){try{var re=q.InflateRaw,Q=new re;if(Q._processChunk(new Uint8Array([3,0]),Q._finishFlushFlag),Q.bytesRead)Z=q;else throw new Error("zlib does not expose bytesRead")}catch(te){console.error("cannot use native zlib: "+(te.message||te))}}function ne(q,re){if(!Z)return Pe(q,re);var Q=Z.InflateRaw,te=new Q,se=te._processChunk(q.slice(q.l),te._finishFlushFlag);return q.l+=te.bytesRead,se}function ie(q){return Z?Z.deflateRawSync(q):jn(q)}var le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],xe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],qe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ke(q){var re=(q<<1|q<<11)&139536|(q<<5|q<<15)&558144;return(re>>16|re>>8|re)&255}for(var ke=typeof Uint8Array<"u",be=ke?new Uint8Array(256):[],Dt=0;Dt<256;++Dt)be[Dt]=Ke(Dt);function Ye(q,re){var Q=be[q&255];return re<=8?Q>>>8-re:(Q=Q<<8|be[q>>8&255],re<=16?Q>>>16-re:(Q=Q<<8|be[q>>16&255],Q>>>24-re))}function cn(q,re){var Q=re&7,te=re>>>3;return(q[te]|(Q<=6?0:q[te+1]<<8))>>>Q&3}function jt(q,re){var Q=re&7,te=re>>>3;return(q[te]|(Q<=5?0:q[te+1]<<8))>>>Q&7}function gn(q,re){var Q=re&7,te=re>>>3;return(q[te]|(Q<=4?0:q[te+1]<<8))>>>Q&15}function wn(q,re){var Q=re&7,te=re>>>3;return(q[te]|(Q<=3?0:q[te+1]<<8))>>>Q&31}function pt(q,re){var Q=re&7,te=re>>>3;return(q[te]|(Q<=1?0:q[te+1]<<8))>>>Q&127}function hr(q,re,Q){var te=re&7,se=re>>>3,oe=(1<<Q)-1,Me=q[se]>>>te;return Q<8-te||(Me|=q[se+1]<<8-te,Q<16-te)||(Me|=q[se+2]<<16-te,Q<24-te)||(Me|=q[se+3]<<24-te),Me&oe}function zn(q,re,Q){var te=re&7,se=re>>>3;return te<=5?q[se]|=(Q&7)<<te:(q[se]|=Q<<te&255,q[se+1]=(Q&7)>>8-te),re+3}function Hn(q,re,Q){var te=re&7,se=re>>>3;return Q=(Q&1)<<te,q[se]|=Q,re+1}function ei(q,re,Q){var te=re&7,se=re>>>3;return Q<<=te,q[se]|=Q&255,Q>>>=8,q[se+1]=Q,re+8}function xo(q,re,Q){var te=re&7,se=re>>>3;return Q<<=te,q[se]|=Q&255,Q>>>=8,q[se+1]=Q&255,q[se+2]=Q>>>8,re+16}function Rr(q,re){var Q=q.length,te=2*Q>re?2*Q:re+5,se=0;if(Q>=re)return q;if(Ar){var oe=eae(te);if(q.copy)q.copy(oe);else for(;se<q.length;++se)oe[se]=q[se];return oe}else if(ke){var Me=new Uint8Array(te);if(Me.set)Me.set(q);else for(;se<Q;++se)Me[se]=q[se];return Me}return q.length=te,q}function Ai(q){for(var re=new Array(q),Q=0;Q<q;++Q)re[Q]=0;return re}function js(q,re,Q){var te=1,se=0,oe=0,Me=0,Be=0,Re=q.length,Le=ke?new Uint16Array(32):Ai(32);for(oe=0;oe<32;++oe)Le[oe]=0;for(oe=Re;oe<Q;++oe)q[oe]=0;Re=q.length;var De=ke?new Uint16Array(Re):Ai(Re);for(oe=0;oe<Re;++oe)Le[se=q[oe]]++,te<se&&(te=se),De[oe]=0;for(Le[0]=0,oe=1;oe<=te;++oe)Le[oe+16]=Be=Be+Le[oe-1]<<1;for(oe=0;oe<Re;++oe)Be=q[oe],Be!=0&&(De[oe]=Le[Be+16]++);var ct=0;for(oe=0;oe<Re;++oe)if(ct=q[oe],ct!=0)for(Be=Ye(De[oe],te)>>te-ct,Me=(1<<te+4-ct)-1;Me>=0;--Me)re[Be|Me<<ct]=ct&15|oe<<4;return te}var wt=ke?new Uint16Array(512):Ai(512),Qn=ke?new Uint16Array(32):Ai(32);if(!ke){for(var dr=0;dr<512;++dr)wt[dr]=0;for(dr=0;dr<32;++dr)Qn[dr]=0}(function(){for(var q=[],re=0;re<32;re++)q.push(5);js(q,Qn,32);var Q=[];for(re=0;re<=143;re++)Q.push(8);for(;re<=255;re++)Q.push(9);for(;re<=279;re++)Q.push(7);for(;re<=287;re++)Q.push(8);js(Q,wt,288)})();var Vt=(function(){for(var re=ke?new Uint8Array(32768):[],Q=0,te=0;Q<qe.length-1;++Q)for(;te<qe[Q+1];++te)re[te]=Q;for(;te<32768;++te)re[te]=29;var se=ke?new Uint8Array(259):[];for(Q=0,te=0;Q<xe.length-1;++Q)for(;te<xe[Q+1];++te)se[te]=Q;function oe(Be,Re){for(var Le=0;Le<Be.length;){var De=Math.min(65535,Be.length-Le),ct=Le+De==Be.length;for(Re.write_shift(1,+ct),Re.write_shift(2,De),Re.write_shift(2,~De&65535);De-- >0;)Re[Re.l++]=Be[Le++]}return Re.l}function Me(Be,Re){for(var Le=0,De=0,ct=ke?new Uint16Array(32768):[];De<Be.length;){var vt=Math.min(65535,Be.length-De);if(vt<10){for(Le=zn(Re,Le,+(De+vt==Be.length)),Le&7&&(Le+=8-(Le&7)),Re.l=Le/8|0,Re.write_shift(2,vt),Re.write_shift(2,~vt&65535);vt-- >0;)Re[Re.l++]=Be[De++];Le=Re.l*8;continue}Le=zn(Re,Le,+(De+vt==Be.length)+2);for(var Ct=0;vt-- >0;){var ht=Be[De];Ct=(Ct<<5^ht)&32767;var dt=-1,Tn=0;if((dt=ct[Ct])&&(dt|=De&-32768,dt>De&&(dt-=32768),dt<De))for(;Be[dt+Tn]==Be[De+Tn]&&Tn<250;)++Tn;if(Tn>2){ht=se[Tn],ht<=22?Le=ei(Re,Le,be[ht+1]>>1)-1:(ei(Re,Le,3),Le+=5,ei(Re,Le,be[ht-23]>>5),Le+=3);var Mr=ht<8?0:ht-4>>2;Mr>0&&(xo(Re,Le,Tn-xe[ht]),Le+=Mr),ht=re[De-dt],Le=ei(Re,Le,be[ht]>>3),Le-=3;var $r=ht<4?0:ht-2>>1;$r>0&&(xo(Re,Le,De-dt-qe[ht]),Le+=$r);for(var _i=0;_i<Tn;++_i)ct[Ct]=De&32767,Ct=(Ct<<5^Be[De])&32767,++De;vt-=Tn-1}else ht<=143?ht=ht+48:Le=Hn(Re,Le,1),Le=ei(Re,Le,be[ht]),ct[Ct]=De&32767,++De}Le=ei(Re,Le,0)-1}return Re.l=(Le+7)/8|0,Re.l}return function(Re,Le){return Re.length<8?oe(Re,Le):Me(Re,Le)}})();function jn(q){var re=Ue(50+Math.floor(q.length*1.1)),Q=Vt(q,re);return re.slice(0,Q)}var nn=ke?new Uint16Array(32768):Ai(32768),Fo=ke?new Uint16Array(32768):Ai(32768),Gi=ke?new Uint16Array(128):Ai(128),$s=1,Nn=1;function Ii(q,re){var Q=wn(q,re)+257;re+=5;var te=wn(q,re)+1;re+=5;var se=gn(q,re)+4;re+=4;for(var oe=0,Me=ke?new Uint8Array(19):Ai(19),Be=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Re=1,Le=ke?new Uint8Array(8):Ai(8),De=ke?new Uint8Array(8):Ai(8),ct=Me.length,vt=0;vt<se;++vt)Me[le[vt]]=oe=jt(q,re),Re<oe&&(Re=oe),Le[oe]++,re+=3;var Ct=0;for(Le[0]=0,vt=1;vt<=Re;++vt)De[vt]=Ct=Ct+Le[vt-1]<<1;for(vt=0;vt<ct;++vt)(Ct=Me[vt])!=0&&(Be[vt]=De[Ct]++);var ht=0;for(vt=0;vt<ct;++vt)if(ht=Me[vt],ht!=0){Ct=be[Be[vt]]>>8-ht;for(var dt=(1<<7-ht)-1;dt>=0;--dt)Gi[Ct|dt<<ht]=ht&7|vt<<3}var Tn=[];for(Re=1;Tn.length<Q+te;)switch(Ct=Gi[pt(q,re)],re+=Ct&7,Ct>>>=3){case 16:for(oe=3+cn(q,re),re+=2,Ct=Tn[Tn.length-1];oe-- >0;)Tn.push(Ct);break;case 17:for(oe=3+jt(q,re),re+=3;oe-- >0;)Tn.push(0);break;case 18:for(oe=11+pt(q,re),re+=7;oe-- >0;)Tn.push(0);break;default:Tn.push(Ct),Re<Ct&&(Re=Ct);break}var Mr=Tn.slice(0,Q),$r=Tn.slice(Q);for(vt=Q;vt<286;++vt)Mr[vt]=0;for(vt=te;vt<30;++vt)$r[vt]=0;return $s=js(Mr,nn,286),Nn=js($r,Fo,30),re}function He(q,re){if(q[0]==3&&!(q[1]&3))return[sv(re),2];for(var Q=0,te=0,se=eae(re||1<<18),oe=0,Me=se.length>>>0,Be=0,Re=0;(te&1)==0;){if(te=jt(q,Q),Q+=3,te>>>1)te>>1==1?(Be=9,Re=5):(Q=Ii(q,Q),Be=$s,Re=Nn);else{Q&7&&(Q+=8-(Q&7));var Le=q[Q>>>3]|q[(Q>>>3)+1]<<8;if(Q+=32,Le>0)for(!re&&Me<oe+Le&&(se=Rr(se,oe+Le),Me=se.length);Le-- >0;)se[oe++]=q[Q>>>3],Q+=8;continue}for(;;){!re&&Me<oe+32767&&(se=Rr(se,oe+32767),Me=se.length);var De=hr(q,Q,Be),ct=te>>>1==1?wt[De]:nn[De];if(Q+=ct&15,ct>>>=4,(ct>>>8&255)===0)se[oe++]=ct;else{if(ct==256)break;ct-=257;var vt=ct<8?0:ct-4>>2;vt>5&&(vt=0);var Ct=oe+xe[ct];vt>0&&(Ct+=hr(q,Q,vt),Q+=vt),De=hr(q,Q,Re),ct=te>>>1==1?Qn[De]:Fo[De],Q+=ct&15,ct>>>=4;var ht=ct<4?0:ct-2>>1,dt=qe[ct];for(ht>0&&(dt+=hr(q,Q,ht),Q+=ht),!re&&Me<Ct&&(se=Rr(se,Ct+100),Me=se.length);oe<Ct;)se[oe]=se[oe-dt],++oe}}}return re?[se,Q+7>>>3]:[se.slice(0,oe),Q+7>>>3]}function Pe(q,re){var Q=q.slice(q.l||0),te=He(Q,re);return q.l+=te[1],te[0]}function Ce(q,re){if(q)typeof console<"u"&&console.error(re);else throw new Error(re)}function on(q,re){var Q=q;ic(Q,0);var te=[],se=[],oe={FileIndex:te,FullPaths:se};C(oe,{root:re.root});for(var Me=Q.length-4;(Q[Me]!=80||Q[Me+1]!=75||Q[Me+2]!=5||Q[Me+3]!=6)&&Me>=0;)--Me;Q.l=Me+4,Q.l+=4;var Be=Q.read_shift(2);Q.l+=6;var Re=Q.read_shift(4);for(Q.l=Re,Me=0;Me<Be;++Me){Q.l+=20;var Le=Q.read_shift(4),De=Q.read_shift(4),ct=Q.read_shift(2),vt=Q.read_shift(2),Ct=Q.read_shift(2);Q.l+=8;var ht=Q.read_shift(4),dt=a(Q.slice(Q.l+ct,Q.l+ct+vt));Q.l+=ct+vt+Ct;var Tn=Q.l;Q.l=ht+4,z(Q,Le,De,oe,dt),Q.l=Tn}return oe}function z(q,re,Q,te,se){q.l+=2;var oe=q.read_shift(2),Me=q.read_shift(2),Be=o(q);if(oe&8257)throw new Error("Unsupported ZIP encryption");for(var Re=q.read_shift(4),Le=q.read_shift(4),De=q.read_shift(4),ct=q.read_shift(2),vt=q.read_shift(2),Ct="",ht=0;ht<ct;++ht)Ct+=String.fromCharCode(q[q.l++]);if(vt){var dt=a(q.slice(q.l,q.l+vt));(dt[21589]||{}).mt&&(Be=dt[21589].mt),((se||{})[21589]||{}).mt&&(Be=se[21589].mt)}q.l+=vt;var Tn=q.slice(q.l,q.l+Le);switch(Me){case 8:Tn=ne(q,De);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Me)}var Mr=!1;oe&8&&(Re=q.read_shift(4),Re==134695760&&(Re=q.read_shift(4),Mr=!0),Le=q.read_shift(4),De=q.read_shift(4)),Le!=re&&Ce(Mr,"Bad compressed size: "+re+" != "+Le),De!=Q&&Ce(Mr,"Bad uncompressed size: "+Q+" != "+De),et(te,Ct,Tn,{unsafe:!0,mt:Be})}function Tt(q,re){var Q=re||{},te=[],se=[],oe=Ue(1),Me=Q.compression?8:0,Be=0,Re=0,Le=0,De=0,ct=0,vt=q.FullPaths[0],Ct=vt,ht=q.FileIndex[0],dt=[],Tn=0;for(Re=1;Re<q.FullPaths.length;++Re)if(Ct=q.FullPaths[Re].slice(vt.length),ht=q.FileIndex[Re],!(!ht.size||!ht.content||Ct=="Sh33tJ5")){var Mr=De,$r=Ue(Ct.length);for(Le=0;Le<Ct.length;++Le)$r.write_shift(1,Ct.charCodeAt(Le)&127);$r=$r.slice(0,$r.l),dt[ct]=Jvt.buf(ht.content,0);var _i=ht.content;Me==8&&(_i=ie(_i)),oe=Ue(30),oe.write_shift(4,67324752),oe.write_shift(2,20),oe.write_shift(2,Be),oe.write_shift(2,Me),ht.mt?s(oe,ht.mt):oe.write_shift(4,0),oe.write_shift(-4,dt[ct]),oe.write_shift(4,_i.length),oe.write_shift(4,ht.content.length),oe.write_shift(2,$r.length),oe.write_shift(2,0),De+=oe.length,te.push(oe),De+=$r.length,te.push($r),De+=_i.length,te.push(_i),oe=Ue(46),oe.write_shift(4,33639248),oe.write_shift(2,0),oe.write_shift(2,20),oe.write_shift(2,Be),oe.write_shift(2,Me),oe.write_shift(4,0),oe.write_shift(-4,dt[ct]),oe.write_shift(4,_i.length),oe.write_shift(4,ht.content.length),oe.write_shift(2,$r.length),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(4,0),oe.write_shift(4,Mr),Tn+=oe.l,se.push(oe),Tn+=$r.length,se.push($r),++ct}return oe=Ue(22),oe.write_shift(4,101010256),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,ct),oe.write_shift(2,ct),oe.write_shift(4,Tn),oe.write_shift(4,De),oe.write_shift(2,0),Oo([Oo(te),Oo(se),oe])}var X={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ae(q,re){if(q.ctype)return q.ctype;var Q=q.name||"",te=Q.match(/\.([^\.]+)$/);return te&&X[te[1]]||re&&(te=(Q=re).match(/[\.\\]([^\.\\])+$/),te&&X[te[1]])?X[te[1]]:"application/octet-stream"}function Ve(q){for(var re=zA(q),Q=[],te=0;te<re.length;te+=76)Q.push(re.slice(te,te+76));return Q.join(`\r
`)+`\r
`}function ee(q){var re=q.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Le){var De=Le.charCodeAt(0).toString(16).toUpperCase();return"="+(De.length==1?"0"+De:De)});re=re.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),re.charAt(0)==`
`&&(re="=0D"+re.slice(1)),re=re.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Q=[],te=re.split(`\r
`),se=0;se<te.length;++se){var oe=te[se];if(oe.length==0){Q.push("");continue}for(var Me=0;Me<oe.length;){var Be=76,Re=oe.slice(Me,Me+Be);Re.charAt(Be-1)=="="?Be--:Re.charAt(Be-2)=="="?Be-=2:Re.charAt(Be-3)=="="&&(Be-=3),Re=oe.slice(Me,Me+Be),Me+=Be,Me<oe.length&&(Re+="="),Q.push(Re)}}return Q.join(`\r
`)}function ye(q){for(var re=[],Q=0;Q<q.length;++Q){for(var te=q[Q];Q<=q.length&&te.charAt(te.length-1)=="=";)te=te.slice(0,te.length-1)+q[++Q];re.push(te)}for(var se=0;se<re.length;++se)re[se]=re[se].replace(/[=][0-9A-Fa-f]{2}/g,function(oe){return String.fromCharCode(parseInt(oe.slice(1),16))});return sh(re.join(`\r
`))}function je(q,re,Q){for(var te="",se="",oe="",Me,Be=0;Be<10;++Be){var Re=re[Be];if(!Re||Re.match(/^\s*$/))break;var Le=Re.match(/^(.*?):\s*([^\s].*)$/);if(Le)switch(Le[1].toLowerCase()){case"content-location":te=Le[2].trim();break;case"content-type":oe=Le[2].trim();break;case"content-transfer-encoding":se=Le[2].trim();break}}switch(++Be,se.toLowerCase()){case"base64":Me=sh(Pp(re.slice(Be).join("")));break;case"quoted-printable":Me=ye(re.slice(Be));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+se)}var De=et(q,te.slice(Q.length),Me,{unsafe:!0});oe&&(De.ctype=oe)}function Je(q,re){if(ge(q.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Q=re&&re.root||"",te=(Ar&&Buffer.isBuffer(q)?q.toString("binary"):ge(q)).split(`\r
`),se=0,oe="";for(se=0;se<te.length;++se)if(oe=te[se],!!/^Content-Location:/i.test(oe)&&(oe=oe.slice(oe.indexOf("file")),Q||(Q=oe.slice(0,oe.lastIndexOf("/")+1)),oe.slice(0,Q.length)!=Q))for(;Q.length>0&&(Q=Q.slice(0,Q.length-1),Q=Q.slice(0,Q.lastIndexOf("/")+1),oe.slice(0,Q.length)!=Q););var Me=(te[1]||"").match(/boundary="(.*?)"/);if(!Me)throw new Error("MAD cannot find boundary");var Be="--"+(Me[1]||""),Re=[],Le=[],De={FileIndex:Re,FullPaths:Le};C(De);var ct,vt=0;for(se=0;se<te.length;++se){var Ct=te[se];Ct!==Be&&Ct!==Be+"--"||(vt++&&je(De,te.slice(ct,se),Q),ct=se)}return De}function Ge(q,re){var Q=re||{},te=Q.boundary||"SheetJS";te="------="+te;for(var se=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+te.slice(2)+'"',"","",""],oe=q.FullPaths[0],Me=oe,Be=q.FileIndex[0],Re=1;Re<q.FullPaths.length;++Re)if(Me=q.FullPaths[Re].slice(oe.length),Be=q.FileIndex[Re],!(!Be.size||!Be.content||Me=="Sh33tJ5")){Me=Me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Tn){return"_x"+Tn.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Tn){return"_u"+Tn.charCodeAt(0).toString(16)+"_"});for(var Le=Be.content,De=Ar&&Buffer.isBuffer(Le)?Le.toString("binary"):ge(Le),ct=0,vt=Math.min(1024,De.length),Ct=0,ht=0;ht<=vt;++ht)(Ct=De.charCodeAt(ht))>=32&&Ct<128&&++ct;var dt=ct>=vt*4/5;se.push(te),se.push("Content-Location: "+(Q.root||"file:///C:/SheetJS/")+Me),se.push("Content-Transfer-Encoding: "+(dt?"quoted-printable":"base64")),se.push("Content-Type: "+ae(Be,Me)),se.push(""),se.push(dt?ee(De):Ve(De))}return se.push(te+`--\r
`),se.join(`\r
`)}function nt(q){var re={};return C(re,q),re}function et(q,re,Q,te){var se=te&&te.unsafe;se||C(q);var oe=!se&&Xr.find(q,re);if(!oe){var Me=q.FullPaths[0];re.slice(0,Me.length)==Me?Me=re:(Me.slice(-1)!="/"&&(Me+="/"),Me=(Me+re).replace("//","/")),oe={name:i(re),type:2},q.FileIndex.push(oe),q.FullPaths.push(Me),se||Xr.utils.cfb_gc(q)}return oe.content=Q,oe.size=Q?Q.length:0,te&&(te.CLSID&&(oe.clsid=te.CLSID),te.mt&&(oe.mt=te.mt),te.ct&&(oe.ct=te.ct)),oe}function Mt(q,re){C(q);var Q=Xr.find(q,re);if(Q){for(var te=0;te<q.FileIndex.length;++te)if(q.FileIndex[te]==Q)return q.FileIndex.splice(te,1),q.FullPaths.splice(te,1),!0}return!1}function Gt(q,re,Q){C(q);var te=Xr.find(q,re);if(te){for(var se=0;se<q.FileIndex.length;++se)if(q.FileIndex[se]==te)return q.FileIndex[se].name=i(Q),q.FullPaths[se]=Q,!0}return!1}function _n(q){O(q,!0)}return e.find=F,e.read=V,e.parse=u,e.write=Se,e.writeFile=fe,e.utils={cfb_new:nt,cfb_add:et,cfb_del:Mt,cfb_mov:Gt,cfb_gc:_n,ReadShift:pk,CheckField:OEe,prep_blob:ic,bconcat:Oo,use_zlib:W,_deflateRaw:jn,_inflateRaw:Pe,consts:Oe},e})();function Qvt(t){return typeof t=="string"?XL(t):Array.isArray(t)?Tvt(t):t}function dP(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=XL(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?UA(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var i=new Blob([Qvt(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var a=File(t);return a.open("w"),a.encoding="binary",Array.isArray(e)&&(e=hP(e)),a.write(e),a.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function $o(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function lae(t,e){for(var n=[],r=$o(t),i=0;i!==r.length;++i)n[t[r[i]][e]]==null&&(n[t[r[i]][e]]=r[i]);return n}function Hq(t){for(var e=[],n=$o(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function QL(t){for(var e=[],n=$o(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function e_t(t){for(var e=[],n=$o(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var E5=new Date(1899,11,30,0,0,0);function Ml(t,e){var n=t.getTime(),r=E5.getTime()+(t.getTimezoneOffset()-E5.getTimezoneOffset())*6e4;return(n-r)/(1440*60*1e3)}var yEe=new Date,t_t=E5.getTime()+(yEe.getTimezoneOffset()-E5.getTimezoneOffset())*6e4,cae=yEe.getTimezoneOffset();function vEe(t){var e=new Date;return e.setTime(t*24*60*60*1e3+t_t),e.getTimezoneOffset()!==cae&&e.setTime(e.getTime()+(e.getTimezoneOffset()-cae)*6e4),e}var uae=new Date("2017-02-19T19:06:09.000Z"),_Ee=isNaN(uae.getFullYear())?new Date("2/19/17"):uae,n_t=_Ee.getFullYear()==2017;function Ua(t,e){var n=new Date(t);if(n_t)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(_Ee.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function eD(t,e){if(Ar&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return n[s]||s})}catch{}for(var r=[],i=0;i!=t.length;++i)r.push(String.fromCharCode(t[i]));return r.join("")}function Nl(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=Nl(t[n]));return e}function Ji(t,e){for(var n="";n.length<e;)n+=t;return n}function yp(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return n=-n,s}),!isNaN(e=Number(r)))?e/n:e}var r_t=["january","february","march","april","may","june","july","august","september","october","november","december"];function GA(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return n;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&r_t.indexOf(o)==-1)return n}else if(o.match(/[a-z]/))return n;return r<0||r>8099?n:(i>0||s>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}function Un(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return Ar?r=$p(n):r=kvt(n),Xr.utils.cfb_add(t,e,r)}Xr.utils.cfb_add(t,e,n)}else t.file(e,n)}function qq(){return Xr.utils.cfb_new()}var Ds=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,i_t={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Kq=Hq(i_t),Yq=/[&<>'"]/g,s_t=/[\u0000-\u0008\u000b-\u001f]/g;function Wr(t){var e=t+"";return e.replace(Yq,function(n){return Kq[n]}).replace(s_t,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function hae(t){return Wr(t).replace(/ /g,"_x0020_")}var xEe=/[\u0000-\u001f]/g;function o_t(t){var e=t+"";return e.replace(Yq,function(n){return Kq[n]}).replace(/\n/g,"<br/>").replace(xEe,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function a_t(t){var e=t+"";return e.replace(Yq,function(n){return Kq[n]}).replace(xEe,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}function l_t(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function c_t(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function bF(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(i=t.charCodeAt(n++),r>191&&r<224){o=(r&31)<<6,o|=i&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}o=t.charCodeAt(n++),a=((r&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(a>>>10&1023)),e+=String.fromCharCode(56320+(a&1023))}return e}function dae(t){var e=sv(2*t.length),n,r,i=1,s=0,o=0,a;for(r=0;r<t.length;r+=i)i=1,(a=t.charCodeAt(r))<128?n=a:a<224?(n=(a&31)*64+(t.charCodeAt(r+1)&63),i=2):a<240?(n=(a&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),i=3):(i=4,n=(a&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,o=55296+(n>>>10&1023),n=56320+(n&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=n%256,e[s++]=n>>>8;return e.slice(0,s).toString("ucs2")}function fae(t){return $p(t,"binary").toString("utf8")}var BR="foo bar baz",fk=Ar&&(fae(BR)==bF(BR)&&fae||dae(BR)==bF(BR)&&dae)||bF,UA=Ar?function(t){return $p(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,i=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},u_t=(function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)r=r.replace(t[i][0],t[i][1]);return r}})(),wEe=/(^\s|\s$|\n)/;function Lo(t,e){return"<"+t+(e.match(wEe)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function BA(t){return $o(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function _t(t,e,n){return"<"+t+(n!=null?BA(n):"")+(e!=null?(e.match(wEe)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function sG(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function h_t(t,e){switch(typeof t){case"string":var n=_t("vt:lpwstr",Wr(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return _t((t|0)==t?"vt:i4":"vt:r8",Wr(String(t)));case"boolean":return _t("vt:bool",t?"true":"false")}if(t instanceof Date)return _t("vt:filetime",sG(t));throw new Error("Unable to serialize "+t)}var ho={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Vb=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],lc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function d_t(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return r==2047?i==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}function f_t(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,o=r?-e:e;isFinite(o)?o==0?i=s=0:(i=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var a=0;a<=5;++a,s/=256)t[n+a]=s&255;t[n+6]=(i&15)<<4|s&15,t[n+7]=i>>4|r}var pae=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var i=0,s=t[0][r].length;i<s;i+=n)e.push.apply(e,t[0][r].slice(i,i+n));return e},mae=Ar?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:$p(e)})):pae(t)}:pae,gae=function(t,e,n){for(var r=[],i=e;i<n;i+=2)r.push(String.fromCharCode(lT(t,i)));return r.join("").replace(dk,"")},Xq=Ar?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(dk,""):gae(t,e,n)}:gae,yae=function(t,e,n){for(var r=[],i=e;i<e+n;++i)r.push(("0"+t[i].toString(16)).slice(-2));return r.join("")},bEe=Ar?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):yae(t,e,n)}:yae,vae=function(t,e,n){for(var r=[],i=e;i<n;i++)r.push(String.fromCharCode(Ax(t,i)));return r.join("")},fP=Ar?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):vae(e,n,r)}:vae,EEe=function(t,e){var n=cc(t,e);return n>0?fP(t,e+4,e+4+n-1):""},SEe=EEe,TEe=function(t,e){var n=cc(t,e);return n>0?fP(t,e+4,e+4+n-1):""},kEe=TEe,AEe=function(t,e){var n=2*cc(t,e);return n>0?fP(t,e+4,e+4+n-1):""},IEe=AEe,PEe=function(e,n){var r=cc(e,n);return r>0?Xq(e,n+4,n+4+r):""},CEe=PEe,REe=function(t,e){var n=cc(t,e);return n>0?fP(t,e+4,e+4+n):""},MEe=REe,NEe=function(t,e){return d_t(t,e)},S5=NEe,Zq=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Ar&&(SEe=function(e,n){if(!Buffer.isBuffer(e))return EEe(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},kEe=function(e,n){if(!Buffer.isBuffer(e))return TEe(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},IEe=function(e,n){if(!Buffer.isBuffer(e))return AEe(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},CEe=function(e,n){if(!Buffer.isBuffer(e))return PEe(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},MEe=function(e,n){if(!Buffer.isBuffer(e))return REe(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},S5=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):NEe(e,n)},Zq=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Ax=function(t,e){return t[e]},lT=function(t,e){return t[e+1]*256+t[e]},p_t=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},cc=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},jy=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},m_t=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function pk(t,e){var n="",r,i,s=[],o,a,l,c;switch(e){case"dbcs":if(c=this.l,Ar&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)n+=String.fromCharCode(lT(this,c)),c+=2;t*=2;break;case"utf8":n=fP(this,this.l,this.l+t);break;case"utf16le":t*=2,n=Xq(this,this.l,this.l+t);break;case"wstr":return pk.call(this,t,"dbcs");case"lpstr-ansi":n=SEe(this,this.l),t=4+cc(this,this.l);break;case"lpstr-cp":n=kEe(this,this.l),t=4+cc(this,this.l);break;case"lpwstr":n=IEe(this,this.l),t=4+2*cc(this,this.l);break;case"lpp4":t=4+cc(this,this.l),n=CEe(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+cc(this,this.l),n=MEe(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(o=Ax(this,this.l+t++))!==0;)s.push(zR(o));n=s.join("");break;case"_wstr":for(t=0,n="";(o=lT(this,this.l+t))!==0;)s.push(zR(o)),t+=2;t+=2,n=s.join("");break;case"dbcs-cont":for(n="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return o=Ax(this,c),this.l=c+1,a=pk.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(zR(lT(this,c))),c+=2}n=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return o=Ax(this,c),this.l=c+1,a=pk.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(zR(Ax(this,c))),c+=1}n=s.join("");break;default:switch(t){case 1:return r=Ax(this,this.l),this.l++,r;case 2:return r=(e==="i"?p_t:lT)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(t>0?jy:m_t)(this,this.l),this.l+=4,r):(i=cc(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=S5(this,this.l):i=S5([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:n=bEe(this,this.l,t);break}}return this.l+=t,n}var g_t=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},y_t=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},v_t=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function __t(t,e,n){var r=0,i=0;if(n==="dbcs"){for(i=0;i!=e.length;++i)v_t(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(n==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(n==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var o=e.charCodeAt(i);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,g_t(this,e,this.l);break;case 8:if(r=8,n==="f"){f_t(this,e,this.l);break}case 16:break;case-4:r=4,y_t(this,e,this.l);break}return this.l+=r,this}function OEe(t,e){var n=bEe(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function ic(t,e){t.l=e,t.read_shift=pk,t.chk=OEe,t.write_shift=__t}function qd(t,e){t.l+=e}function Ue(t){var e=sv(t);return ic(e,0),e}function Il(){var t=[],e=Ar?256:2048,n=function(c){var u=Ue(c);return ic(u,0),u},r=n(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},s=function(c){return r&&c<r.length-r.l?r:(i(),r=n(Math.max(c+1,e)))},o=function(){return i(),Oo(t)},a=function(c){i(),r=c,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:a,end:o,_bufs:t}}function tt(t,e,n,r){var i=+e,s;if(!isNaN(i)){r||(r=dSt[i].p||(n||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var o=t.next(s);i<=127?o.write_shift(1,i):(o.write_shift(1,(i&127)+128),o.write_shift(1,i>>7));for(var a=0;a!=4;++a)if(r>=128)o.write_shift(1,(r&127)+128),r>>=7;else{o.write_shift(1,r);break}r>0&&Zq(n)&&t.push(n)}}function mk(t,e,n){var r=Nl(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function _ae(t,e,n){var r=Nl(t);return r.s=mk(r.s,e.s,n),r.e=mk(r.e,e.s,n),r}function gk(t,e){if(t.cRel&&t.c<0)for(t=Nl(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Nl(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=qr(t);return!t.cRel&&t.cRel!=null&&(n=b_t(n)),!t.rRel&&t.rRel!=null&&(n=x_t(n)),n}function EF(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+wa(t.s.c)+":"+(t.e.cRel?"":"$")+wa(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Do(t.s.r)+":"+(t.e.rRel?"":"$")+Do(t.e.r):gk(t.s,e.biff)+":"+gk(t.e,e.biff)}function Jq(t){return parseInt(w_t(t),10)-1}function Do(t){return""+(t+1)}function x_t(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function w_t(t){return t.replace(/\$(\d+)$/,"$1")}function Qq(t){for(var e=E_t(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function wa(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function b_t(t){return t.replace(/^([A-Z])/,"$$$1")}function E_t(t){return t.replace(/^\$([A-Z])/,"$1")}function S_t(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function po(t){for(var e=0,n=0,r=0;r<t.length;++r){var i=t.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:e-1}}function qr(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function kc(t){var e=t.indexOf(":");return e==-1?{s:po(t),e:po(t)}:{s:po(t.slice(0,e)),e:po(t.slice(e+1))}}function Ls(t,e){return typeof e>"u"||typeof e=="number"?Ls(t.s,t.e):(typeof t!="string"&&(t=qr(t)),typeof e!="string"&&(e=qr(e)),t==e?t:t+":"+e)}function vi(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,s=t.length;for(n=0;r<s&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.s.c=--n,n=0;r<s&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(e.s.r=--n,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=s&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.e.c=--n,n=0;r!=s&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return e.e.r=--n,e}function xae(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=o0(t.z,n?Ml(e):e)}catch{}try{return t.w=o0((t.XF||{}).numFmtId||(n?14:0),n?Ml(e):e)}catch{return""+e}}function Cp(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?pP[t.v]||t.v:e==null?xae(t,t.v):xae(t,e))}function Iv(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function LEe(t,e,n){var r=n||{},i=t?Array.isArray(t):r.dense,s=t||(i?[]:{}),o=0,a=0;if(s&&r.origin!=null){if(typeof r.origin=="number")o=r.origin;else{var l=typeof r.origin=="string"?po(r.origin):r.origin;o=l.r,a=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=vi(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),o==-1&&(c.e.r=o=u.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=e[h].length;++f)if(!(typeof e[h][f]>"u")){var g={v:e[h][f]},y=o+h,_=a+f;if(c.s.r>y&&(c.s.r=y),c.s.c>_&&(c.s.c=_),c.e.r<y&&(c.e.r=y),c.e.c<_&&(c.e.c=_),e[h][f]&&typeof e[h][f]=="object"&&!Array.isArray(e[h][f])&&!(e[h][f]instanceof Date))g=e[h][f];else if(Array.isArray(g.v)&&(g.f=e[h][f][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(r.nullError)g.t="e",g.v=0;else if(r.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=r.dateNF||rs[14],r.cellDates?(g.t="d",g.w=o0(g.z,Ml(g.v))):(g.t="n",g.v=Ml(g.v),g.w=o0(g.z,g.v))):g.t="s";if(i)s[y]||(s[y]=[]),s[y][_]&&s[y][_].z&&(g.z=s[y][_].z),s[y][_]=g;else{var b=qr({c:_,r:y});s[b]&&s[b].z&&(g.z=s[b].z),s[b]=g}}}return c.s.c<1e7&&(s["!ref"]=Ls(c)),s}function zb(t,e){return LEe(null,t,e)}function T_t(t){return t.read_shift(4,"i")}function gh(t,e){return e||(e=Ue(4)),e.write_shift(4,t),e}function ba(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function mo(t,e){var n=!1;return e==null&&(n=!0,e=Ue(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function k_t(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function A_t(t,e){return e||(e=Ue(4)),e.write_shift(2,0),e.write_shift(2,0),e}function eK(t,e){var n=t.l,r=t.read_shift(1),i=ba(t),s=[],o={t:i,h:i};if((r&1)!==0){for(var a=t.read_shift(4),l=0;l!=a;++l)s.push(k_t(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=n+e,o}function I_t(t,e){var n=!1;return e==null&&(n=!0,e=Ue(15+4*t.t.length)),e.write_shift(1,0),mo(t.t,e),n?e.slice(0,e.l):e}var P_t=eK;function C_t(t,e){var n=!1;return e==null&&(n=!0,e=Ue(23+4*t.t.length)),e.write_shift(1,1),mo(t.t,e),e.write_shift(4,1),A_t({},e),n?e.slice(0,e.l):e}function wu(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function Pv(t,e){return e==null&&(e=Ue(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Cv(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Rv(t,e){return e==null&&(e=Ue(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var R_t=ba,DEe=mo;function tK(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function T5(t,e){var n=!1;return e==null&&(n=!0,e=Ue(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var M_t=ba,oG=tK,nK=T5;function jEe(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var i=r===0?S5([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):jy(e,0)>>2;return n?i/100:i}function $Ee(t,e){e==null&&(e=Ue(4));var n=0,r=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?i:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function FEe(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function N_t(t,e){return e||(e=Ue(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Mv=FEe,Gb=N_t;function Ub(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function ov(t,e){return(e||Ue(8)).write_shift(8,t,"f")}function O_t(t){var e={},n=t.read_shift(1),r=n>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),a=t.read_shift(1),l=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var c=U_t[i];c&&(e.rgb=Rae(c));break;case 2:e.rgb=Rae([o,a,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function k5(t,e){if(e||(e=Ue(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function L_t(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function D_t(t,e){e||(e=Ue(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}var VEe=2,ec=3,WR=11,A5=19,HR=64,j_t=65,$_t=71,F_t=4108,V_t=4126,Mo=80,wae={1:{n:"CodePage",t:VEe},2:{n:"Category",t:Mo},3:{n:"PresentationFormat",t:Mo},4:{n:"ByteCount",t:ec},5:{n:"LineCount",t:ec},6:{n:"ParagraphCount",t:ec},7:{n:"SlideCount",t:ec},8:{n:"NoteCount",t:ec},9:{n:"HiddenCount",t:ec},10:{n:"MultimediaClipCount",t:ec},11:{n:"ScaleCrop",t:WR},12:{n:"HeadingPairs",t:F_t},13:{n:"TitlesOfParts",t:V_t},14:{n:"Manager",t:Mo},15:{n:"Company",t:Mo},16:{n:"LinksUpToDate",t:WR},17:{n:"CharacterCount",t:ec},19:{n:"SharedDoc",t:WR},22:{n:"HyperlinksChanged",t:WR},23:{n:"AppVersion",t:ec,p:"version"},24:{n:"DigSig",t:j_t},26:{n:"ContentType",t:Mo},27:{n:"ContentStatus",t:Mo},28:{n:"Language",t:Mo},29:{n:"Version",t:Mo},255:{},2147483648:{n:"Locale",t:A5},2147483651:{n:"Behavior",t:A5},1919054434:{}},bae={1:{n:"CodePage",t:VEe},2:{n:"Title",t:Mo},3:{n:"Subject",t:Mo},4:{n:"Author",t:Mo},5:{n:"Keywords",t:Mo},6:{n:"Comments",t:Mo},7:{n:"Template",t:Mo},8:{n:"LastAuthor",t:Mo},9:{n:"RevNumber",t:Mo},10:{n:"EditTime",t:HR},11:{n:"LastPrinted",t:HR},12:{n:"CreatedDate",t:HR},13:{n:"ModifiedDate",t:HR},14:{n:"PageCount",t:ec},15:{n:"WordCount",t:ec},16:{n:"CharCount",t:ec},17:{n:"Thumbnail",t:$_t},18:{n:"Application",t:Mo},19:{n:"DocSecurity",t:ec},255:{},2147483648:{n:"Locale",t:A5},2147483651:{n:"Behavior",t:A5},1919054434:{}};function z_t(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var G_t=z_t([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),U_t=Nl(G_t),pP={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},B_t={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},qR={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function zEe(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function GEe(t,e){var n=e_t(B_t),r=[],i;r[r.length]=Ds,r[r.length]=_t("Types",null,{xmlns:ho.CT,"xmlns:xsd":ho.xsd,"xmlns:xsi":ho.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return _t("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(i=t[l][0],r[r.length]=_t("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:qR[l][e.bookType]||qR[l].xlsx}))},o=function(l){(t[l]||[]).forEach(function(c){r[r.length]=_t("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:qR[l][e.bookType]||qR[l].xlsx})})},a=function(l){(t[l]||[]).forEach(function(c){r[r.length]=_t("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:n[l][0]})})};return s("workbooks"),o("sheets"),o("charts"),a("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(a),a("vba"),a("comments"),a("threadedcomments"),a("drawings"),o("metadata"),a("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var wr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function UEe(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Mw(t){var e=[Ds,_t("Relationships",null,{xmlns:ho.RELS})];return $o(t["!id"]).forEach(function(n){e[e.length]=_t("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Gr(t,e,n,r,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=n,[wr.HLINK,wr.XPATH,wr.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}function W_t(t){var e=[Ds];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function Eae(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function H_t(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function q_t(t){var e=[Ds];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(Eae(t[n][0],t[n][1])),e.push(H_t("",t[n][0]));return e.push(Eae("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function BEe(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+v5.version+"</meta:generator></office:meta></office:document-meta>"}var v1=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function SF(t,e,n,r,i){i[t]!=null||e==null||e===""||(i[t]=e,e=Wr(e),r[r.length]=n?_t(t,e,n):Lo(t,e))}function WEe(t,e){var n=e||{},r=[Ds,_t("cp:coreProperties",null,{"xmlns:cp":ho.CORE_PROPS,"xmlns:dc":ho.dc,"xmlns:dcterms":ho.dcterms,"xmlns:dcmitype":ho.dcmitype,"xmlns:xsi":ho.xsi})],i={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&SF("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:sG(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),t.ModifiedDate!=null&&SF("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:sG(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=v1.length;++s){var o=v1[s],a=n.Props&&n.Props[o[1]]!=null?n.Props[o[1]]:t?t[o[1]]:null;a===!0?a="1":a===!1?a="0":typeof a=="number"&&(a=String(a)),a!=null&&SF(o[0],a,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Nw=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],HEe=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function qEe(t){var e=[],n=_t;return t||(t={}),t.Application="SheetJS",e[e.length]=Ds,e[e.length]=_t("Properties",null,{xmlns:ho.EXT_PROPS,"xmlns:vt":ho.vt}),Nw.forEach(function(r){if(t[r[1]]!==void 0){var i;switch(r[2]){case"string":i=Wr(String(t[r[1]]));break;case"bool":i=t[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=n(r[0],i))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+Wr(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function KEe(t){var e=[Ds,_t("Properties",null,{xmlns:ho.CUST_PROPS,"xmlns:vt":ho.vt})];if(!t)return e.join("");var n=1;return $o(t).forEach(function(i){++n,e[e.length]=_t("property",h_t(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:Wr(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Sae={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function K_t(t,e){var n=[];return $o(Sae).map(function(r){for(var i=0;i<v1.length;++i)if(v1[i][1]==r)return v1[i];for(i=0;i<Nw.length;++i)if(Nw[i][1]==r)return Nw[i];throw r}).forEach(function(r){if(t[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(Lo(Sae[r[1]]||r[1],i))}}),_t("DocumentProperties",n.join(""),{xmlns:lc.o})}function Y_t(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return t&&$o(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<v1.length;++o)if(s==v1[o][1])return;for(o=0;o<Nw.length;++o)if(s==Nw[o][1])return;for(o=0;o<n.length;++o)if(s==n[o])return;var a=t[s],l="string";typeof a=="number"?(l="float",a=String(a)):a===!0||a===!1?(l="boolean",a=a?"1":"0"):a=String(a),i.push(_t(hae(s),a,{"dt:dt":l}))}}),e&&$o(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],a="string";typeof o=="number"?(a="float",o=String(o)):o===!0||o===!1?(a="boolean",o=o?"1":"0"):o instanceof Date?(a="dateTime.tz",o=o.toISOString()):o=String(o),i.push(_t(hae(s),o,{"dt:dt":a}))}}),"<"+r+' xmlns="'+lc.o+'">'+i.join("")+"</"+r+">"}function X_t(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),i=(n-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var o=Ue(8);return o.write_shift(4,r),o.write_shift(4,i),o}function Tae(t,e){var n=Ue(4),r=Ue(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=Ue(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=X_t(e);break;case 31:case 80:for(r=Ue(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Oo([n,r])}var YEe=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Z_t(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function kae(t,e,n){var r=Ue(8),i=[],s=[],o=8,a=0,l=Ue(8),c=Ue(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),o+=8+l.length,!e){c=Ue(8),c.write_shift(4,0),i.unshift(c);var u=[Ue(4)];for(u[0].write_shift(4,t.length),a=0;a<t.length;++a){var h=t[a][0];for(l=Ue(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,a+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=Oo(u),s.unshift(l),o+=8+l.length}for(a=0;a<t.length;++a)if(!(e&&!e[t[a][0]])&&!(YEe.indexOf(t[a][0])>-1||HEe.indexOf(t[a][0])>-1)&&t[a][1]!=null){var f=t[a][1],g=0;if(e){g=+e[t[a][0]];var y=n[g];if(y.p=="version"&&typeof f=="string"){var _=f.split(".");f=(+_[0]<<16)+(+_[1]||0)}l=Tae(y.t,f)}else{var b=Z_t(f);b==-1&&(b=31,f=String(f)),l=Tae(b,f)}s.push(l),c=Ue(8),c.write_shift(4,e?g:2+a),i.push(c),o+=8+l.length}var T=8*(s.length+1);for(a=0;a<s.length;++a)i[a].write_shift(4,T),T+=s[a].length;return r.write_shift(4,o),r.write_shift(4,s.length),Oo([r].concat(i).concat(s))}function Aae(t,e,n,r,i,s){var o=Ue(i?68:48),a=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Xr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,i?68:48);var l=kae(t,n,r);if(a.push(l),i){var c=kae(i,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+l.length),a.push(c)}return Oo(a)}function J_t(t,e){e||(e=Ue(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function Q_t(t,e){return t.read_shift(e)===1}function Oa(t,e){return e||(e=Ue(2)),e.write_shift(2,+!!t),e}function XEe(t){return t.read_shift(2,"u")}function Jc(t,e){return e||(e=Ue(2)),e.write_shift(2,t),e}function ZEe(t,e,n){return n||(n=Ue(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function JEe(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var s=t.read_shift(1);s&&(i="dbcs-cont")}else n.biff==12&&(i="wstr");n.biff>=2&&n.biff<=5&&(i="cpstr");var o=r?t.read_shift(r,i):"";return o}function ext(t){var e=t.t||"",n=Ue(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=Ue(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[n,r];return Oo(i)}function txt(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function nxt(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):txt(t,r,n)}function rxt(t,e,n){if(n.biff>5)return nxt(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function QEe(t,e,n){return n||(n=Ue(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function Iae(t,e){e||(e=Ue(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function ixt(t){var e=Ue(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(n=0;n<o.length;++n)e.write_shift(4,o[n]);if(s==28)r=r.slice(1),Iae(r,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));var a=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(a.length+1)),n=0;n<a.length;++n)e.write_shift(2,a.charCodeAt(n));e.write_shift(2,0),s&8&&Iae(i>-1?r.slice(i+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)e.write_shift(1,r.charCodeAt(n+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function av(t,e,n,r){return r||(r=Ue(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function sxt(t,e,n){var r=n.biff>8?4:2,i=t.read_shift(r),s=t.read_shift(r,"i"),o=t.read_shift(r,"i");return[i,s,o]}function oxt(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:n}}}function eSe(t,e){return e||(e=Ue(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function rK(t,e,n){var r=1536,i=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ue(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function axt(t,e){var n=!e||e.biff==8,r=Ue(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function lxt(t,e){var n=!e||e.biff>=8?2:1,r=Ue(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function cxt(t,e){var n=Ue(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],i=0;i<t.length;++i)r[i]=ext(t[i]);var s=Oo([n].concat(r));return s.parts=[n.length].concat(r.map(function(o){return o.length})),s}function uxt(){var t=Ue(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function hxt(t){var e=Ue(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function dxt(t,e){var n=t.name||"Arial",r=e&&e.biff==5,i=r?15+n.length:16+2*n.length,s=Ue(i);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,n.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),s}function fxt(t,e,n,r){var i=Ue(10);return av(t,e,r,i),i.write_shift(4,n),i}function pxt(t,e,n,r,i){var s=!i||i.biff==8,o=Ue(8+ +s+(1+s)*n.length);return av(t,e,r,o),o.write_shift(2,n.length),s&&o.write_shift(1,1),o.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),o}function mxt(t,e,n,r){var i=n&&n.biff==5;r||(r=Ue(i?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function gxt(t,e){var n=e.biff==8||!e.biff?4:2,r=Ue(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function Pae(t,e,n,r){var i=n&&n.biff==5;r||(r=Ue(i?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function yxt(t){var e=Ue(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function vxt(t,e,n,r,i,s){var o=Ue(8);return av(t,e,r,o),ZEe(n,s,o),o}function _xt(t,e,n,r){var i=Ue(14);return av(t,e,r,i),ov(n,i),i}function xxt(t,e,n){if(n.biff<8)return wxt(t,e,n);for(var r=[],i=t.l+e,s=t.read_shift(n.biff>8?4:2);s--!==0;)r.push(sxt(t,n.biff>8?12:6,n));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return r}function wxt(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=JEe(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function bxt(t){var e=Ue(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)eSe(t[n],e);return e}function Ext(t){var e=Ue(24),n=po(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return Oo([e,ixt(t[1])])}function Sxt(t){var e=t[1].Tooltip,n=Ue(10+2*(e.length+1));n.write_shift(2,2048);var r=po(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<e.length;++i)n.write_shift(2,e.charCodeAt(i));return n.write_shift(2,0),n}function Txt(t){return t||(t=Ue(4)),t.write_shift(2,1),t.write_shift(2,1),t}function kxt(t,e,n){if(!n.cellStyles)return qd(t,e);var r=n&&n.biff>=12?4:2,i=t.read_shift(r),s=t.read_shift(r),o=t.read_shift(r),a=t.read_shift(r),l=t.read_shift(2);r==2&&(t.l+=2);var c={s:i,e:s,w:o,ixfe:a,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}function Axt(t,e){var n=Ue(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function Ixt(t){for(var e=Ue(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}function Pxt(t,e,n){var r=Ue(15);return gP(r,t,e),r.write_shift(8,n,"f"),r}function Cxt(t,e,n){var r=Ue(9);return gP(r,t,e),r.write_shift(2,n),r}var Rxt=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Hq({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(a,l){var c=[],u=sv(1);switch(l.type){case"base64":u=sh(Pp(a));break;case"binary":u=sh(a);break;case"buffer":case"array":u=a;break}ic(u,0);var h=u.read_shift(1),f=!!(h&136),g=!1,y=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,f=!0;break;case 49:g=!0,f=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var _=0,b=521;h==2&&(_=u.read_shift(2)),u.l+=3,h!=2&&(_=u.read_shift(4)),_>1048576&&(_=1e6),h!=2&&(b=u.read_shift(2));var T=u.read_shift(2),A=l.codepage||1252;h!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(A=t[u[u.l]]),u.l+=1,u.l+=2),y&&(u.l+=36);for(var I=[],P={},M=Math.min(u.length,h==2?521:b-10-(g?264:0)),V=y?32:11;u.l<M&&u[u.l]!=13;)switch(P={},P.name=_5.utils.decode(A,u.slice(u.l,u.l+V)).replace(/[\u0000\r\n].*$/g,""),u.l+=V,P.type=String.fromCharCode(u.read_shift(1)),h!=2&&!y&&(P.offset=u.read_shift(4)),P.len=u.read_shift(1),h==2&&(P.offset=u.read_shift(2)),P.dec=u.read_shift(1),P.name.length&&I.push(P),h!=2&&(u.l+=y?13:14),P.type){case"B":(!g||P.len!=8)&&l.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+P.type)}if(u[u.l]!==13&&(u.l=b-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=b;var C=0,N=0;for(c[0]=[],N=0;N!=I.length;++N)c[0][N]=I[N].name;for(;_-- >0;){if(u[u.l]===42){u.l+=T;continue}for(++u.l,c[++C]=[],N=0,N=0;N!=I.length;++N){var O=u.slice(u.l,u.l+I[N].len);u.l+=I[N].len,ic(O,0);var L=_5.utils.decode(A,O);switch(I[N].type){case"C":L.trim().length&&(c[C][N]=L.replace(/\s+$/,""));break;case"D":L.length===8?c[C][N]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):c[C][N]=L;break;case"F":c[C][N]=parseFloat(L.trim());break;case"+":case"I":c[C][N]=y?O.read_shift(-4,"i")^2147483648:O.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":c[C][N]=!0;break;case"N":case"F":c[C][N]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));c[C][N]="##MEMO##"+(y?parseInt(L.trim(),10):O.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(c[C][N]=+L||0);break;case"@":c[C][N]=new Date(O.read_shift(-8,"f")-621356832e5);break;case"T":c[C][N]=new Date((O.read_shift(4)-2440588)*864e5+O.read_shift(4));break;case"Y":c[C][N]=O.read_shift(4,"i")/1e4+O.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[C][N]=-O.read_shift(-8,"f");break;case"B":if(g&&I[N].len==8){c[C][N]=O.read_shift(8,"f");break}case"G":case"P":O.l+=I[N].len;break;case"0":if(I[N].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+I[N].type)}}}if(h!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=I,c}function r(a,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=zb(n(a,c),c);return u["!cols"]=c.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete c.DBF,u}function i(a,l){try{return Iv(r(a,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(a,l){var c=l||{};if(+c.codepage>=0&&VA(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=Il(),h=M5(a,{header:1,raw:!0,cellDates:!0}),f=h[0],g=h.slice(1),y=a["!cols"]||[],_=0,b=0,T=0,A=1;for(_=0;_<f.length;++_){if(((y[_]||{}).DBF||{}).name){f[_]=y[_].DBF.name,++T;continue}if(f[_]!=null){if(++T,typeof f[_]=="number"&&(f[_]=f[_].toString(10)),typeof f[_]!="string")throw new Error("DBF Invalid column name "+f[_]+" |"+typeof f[_]+"|");if(f.indexOf(f[_])!==_){for(b=0;b<1024;++b)if(f.indexOf(f[_]+"_"+b)==-1){f[_]+="_"+b;break}}}}var I=vi(a["!ref"]),P=[],M=[],V=[];for(_=0;_<=I.e.c-I.s.c;++_){var C="",N="",O=0,L=[];for(b=0;b<g.length;++b)g[b][_]!=null&&L.push(g[b][_]);if(L.length==0||f[_]==null){P[_]="?";continue}for(b=0;b<L.length;++b){switch(typeof L[b]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=L[b]instanceof Date?"D":"C";break;default:N="C"}O=Math.max(O,String(L[b]).length),C=C&&C!=N?"C":N}O>250&&(O=250),N=((y[_]||{}).DBF||{}).type,N=="C"&&y[_].DBF.len>O&&(O=y[_].DBF.len),C=="B"&&N=="N"&&(C="N",V[_]=y[_].DBF.dec,O=y[_].DBF.len),M[_]=C=="C"||N=="N"?O:s[C]||0,A+=M[_],P[_]=C}var F=u.next(32);for(F.write_shift(4,318902576),F.write_shift(4,g.length),F.write_shift(2,296+32*T),F.write_shift(2,A),_=0;_<4;++_)F.write_shift(4,0);for(F.write_shift(4,0|(+e[nEe]||3)<<8),_=0,b=0;_<f.length;++_)if(f[_]!=null){var G=u.next(32),U=(f[_].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);G.write_shift(1,U,"sbcs"),G.write_shift(1,P[_]=="?"?"C":P[_],"sbcs"),G.write_shift(4,b),G.write_shift(1,M[_]||s[P[_]]||0),G.write_shift(1,V[_]||0),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(1,0),G.write_shift(4,0),G.write_shift(4,0),b+=M[_]||s[P[_]]||0}var he=u.next(264);for(he.write_shift(4,13),_=0;_<65;++_)he.write_shift(4,0);for(_=0;_<g.length;++_){var Ie=u.next(A);for(Ie.write_shift(1,0),b=0;b<f.length;++b)if(f[b]!=null)switch(P[b]){case"L":Ie.write_shift(1,g[_][b]==null?63:g[_][b]?84:70);break;case"B":Ie.write_shift(8,g[_][b]||0,"f");break;case"N":var ze="0";for(typeof g[_][b]=="number"&&(ze=g[_][b].toFixed(V[b]||0)),T=0;T<M[b]-ze.length;++T)Ie.write_shift(1,32);Ie.write_shift(1,ze,"sbcs");break;case"D":g[_][b]?(Ie.write_shift(4,("0000"+g[_][b].getFullYear()).slice(-4),"sbcs"),Ie.write_shift(2,("00"+(g[_][b].getMonth()+1)).slice(-2),"sbcs"),Ie.write_shift(2,("00"+g[_][b].getDate()).slice(-2),"sbcs")):Ie.write_shift(8,"00000000","sbcs");break;case"C":var Oe=String(g[_][b]!=null?g[_][b]:"").slice(0,M[b]);for(Ie.write_shift(1,Oe,"sbcs"),T=0;T<M[b]-Oe.length;++T)Ie.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:i,to_sheet:r,from_sheet:o}})(),Mxt=(function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+$o(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(f,g){var y=t[g];return typeof y=="number"?Qoe(y):y},r=function(f,g,y){var _=g.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return _==59?f:Qoe(_)};t["|"]=254;function i(f,g){switch(g.type){case"base64":return s(Pp(f),g);case"binary":return s(f,g);case"buffer":return s(Ar&&Buffer.isBuffer(f)?f.toString("binary"):hP(f),g);case"array":return s(eD(f),g)}throw new Error("Unrecognized type "+g.type)}function s(f,g){var y=f.split(/[\n\r]+/),_=-1,b=-1,T=0,A=0,I=[],P=[],M=null,V={},C=[],N=[],O=[],L=0,F;for(+g.codepage>=0&&VA(+g.codepage);T!==y.length;++T){L=0;var G=y[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),U=G.replace(/;;/g,"\0").split(";").map(function(le){return le.replace(/\u0000/g,";")}),he=U[0],Ie;if(G.length>0)switch(he){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":U[1].charAt(0)=="P"&&P.push(G.slice(3).replace(/;;/g,";"));break;case"C":var ze=!1,Oe=!1,fe=!1,ge=!1,Se=-1,Z=-1;for(A=1;A<U.length;++A)switch(U[A].charAt(0)){case"A":break;case"X":b=parseInt(U[A].slice(1))-1,Oe=!0;break;case"Y":for(_=parseInt(U[A].slice(1))-1,Oe||(b=0),F=I.length;F<=_;++F)I[F]=[];break;case"K":Ie=U[A].slice(1),Ie.charAt(0)==='"'?Ie=Ie.slice(1,Ie.length-1):Ie==="TRUE"?Ie=!0:Ie==="FALSE"?Ie=!1:isNaN(yp(Ie))?isNaN(GA(Ie).getDate())||(Ie=Ua(Ie)):(Ie=yp(Ie),M!==null&&pEe(M)&&(Ie=vEe(Ie))),ze=!0;break;case"E":ge=!0;var W=Cwt(U[A].slice(1),{r:_,c:b});I[_][b]=[I[_][b],W];break;case"S":fe=!0,I[_][b]=[I[_][b],"S5S"];break;case"G":break;case"R":Se=parseInt(U[A].slice(1))-1;break;case"C":Z=parseInt(U[A].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}if(ze&&(I[_][b]&&I[_][b].length==2?I[_][b][0]=Ie:I[_][b]=Ie,M=null),fe){if(ge)throw new Error("SYLK shared formula cannot have own formula");var ne=Se>-1&&I[Se][Z];if(!ne||!ne[1])throw new Error("SYLK shared formula cannot find base");I[_][b][1]=Rwt(ne[1],{r:_-Se,c:b-Z})}break;case"F":var ie=0;for(A=1;A<U.length;++A)switch(U[A].charAt(0)){case"X":b=parseInt(U[A].slice(1))-1,++ie;break;case"Y":for(_=parseInt(U[A].slice(1))-1,F=I.length;F<=_;++F)I[F]=[];break;case"M":L=parseInt(U[A].slice(1))/20;break;case"F":break;case"G":break;case"P":M=P[parseInt(U[A].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(O=U[A].slice(1).split(" "),F=parseInt(O[0],10);F<=parseInt(O[1],10);++F)L=parseInt(O[2],10),N[F-1]=L===0?{hidden:!0}:{wch:L},iK(N[F-1]);break;case"C":b=parseInt(U[A].slice(1))-1,N[b]||(N[b]={});break;case"R":_=parseInt(U[A].slice(1))-1,C[_]||(C[_]={}),L>0?(C[_].hpt=L,C[_].hpx=sSe(L)):L===0&&(C[_].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}ie<1&&(M=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}}return C.length>0&&(V["!rows"]=C),N.length>0&&(V["!cols"]=N),g&&g.sheetRows&&(I=I.slice(0,g.sheetRows)),[I,V]}function o(f,g){var y=i(f,g),_=y[0],b=y[1],T=zb(_,g);return $o(b).forEach(function(A){T[A]=b[A]}),T}function a(f,g){return Iv(o(f,g),g)}function l(f,g,y,_){var b="C;Y"+(y+1)+";X"+(_+1)+";K";switch(f.t){case"n":b+=f.v||0,f.f&&!f.F&&(b+=";E"+oK(f.f,{r:y,c:_}));break;case"b":b+=f.v?"TRUE":"FALSE";break;case"e":b+=f.w||f.v;break;case"d":b+='"'+(f.w||f.v)+'"';break;case"s":b+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function c(f,g){g.forEach(function(y,_){var b="F;W"+(_+1)+" "+(_+1)+" ";y.hidden?b+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=I5(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=P5(y.wpx)),typeof y.wch=="number"&&(b+=Math.round(y.wch))),b.charAt(b.length-1)!=" "&&f.push(b)})}function u(f,g){g.forEach(function(y,_){var b="F;";y.hidden?b+="M0;":y.hpt?b+="M"+20*y.hpt+";":y.hpx&&(b+="M"+20*C5(y.hpx)+";"),b.length>2&&f.push(b+"R"+(_+1))})}function h(f,g){var y=["ID;PWXL;N;E"],_=[],b=vi(f["!ref"]),T,A=Array.isArray(f),I=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),f["!cols"]&&c(y,f["!cols"]),f["!rows"]&&u(y,f["!rows"]),y.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var P=b.s.r;P<=b.e.r;++P)for(var M=b.s.c;M<=b.e.c;++M){var V=qr({r:P,c:M});T=A?(f[P]||[])[M]:f[V],!(!T||T.v==null&&(!T.f||T.F))&&_.push(l(T,f,P,M))}return y.join(I)+I+_.join(I)+I+"E"+I}return{to_workbook:a,to_sheet:o,from_sheet:h}})(),Nxt=(function(){function t(s,o){switch(o.type){case"base64":return e(Pp(s),o);case"binary":return e(s,o);case"buffer":return e(Ar&&Buffer.isBuffer(s)?s.toString("binary"):hP(s),o);case"array":return e(eD(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var a=s.split(`
`),l=-1,c=-1,u=0,h=[];u!==a.length;++u){if(a[u].trim()==="BOT"){h[++l]=[],c=0;continue}if(!(l<0)){var f=a[u].trim().split(","),g=f[0],y=f[1];++u;for(var _=a[u]||"";(_.match(/["]/g)||[]).length&1&&u<a.length-1;)_+=`
`+a[++u];switch(_=_.trim(),+g){case-1:if(_==="BOT"){h[++l]=[],c=0;continue}else if(_!=="EOD")throw new Error("Unrecognized DIF special command "+_);break;case 0:_==="TRUE"?h[l][c]=!0:_==="FALSE"?h[l][c]=!1:isNaN(yp(y))?isNaN(GA(y).getDate())?h[l][c]=y:h[l][c]=Ua(y):h[l][c]=yp(y),++c;break;case 1:_=_.slice(1,_.length-1),_=_.replace(/""/g,'"'),_&&_.match(/^=".*"$/)&&(_=_.slice(2,-1)),h[l][c++]=_!==""?_:null;break}if(_==="EOD")break}}return o&&o.sheetRows&&(h=h.slice(0,o.sheetRows)),h}function n(s,o){return zb(t(s,o),o)}function r(s,o){return Iv(n(s,o),o)}var i=(function(){var s=function(l,c,u,h,f){l.push(c),l.push(u+","+h),l.push('"'+f.replace(/"/g,'""')+'"')},o=function(l,c,u,h){l.push(c+","+u),l.push(c==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var c=[],u=vi(l["!ref"]),h,f=Array.isArray(l);s(c,"TABLE",0,1,"sheetjs"),s(c,"VECTORS",0,u.e.r-u.s.r+1,""),s(c,"TUPLES",0,u.e.c-u.s.c+1,""),s(c,"DATA",0,0,"");for(var g=u.s.r;g<=u.e.r;++g){o(c,-1,0,"BOT");for(var y=u.s.c;y<=u.e.c;++y){var _=qr({r:g,c:y});if(h=f?(l[g]||[])[y]:l[_],!h){o(c,1,0,"");continue}switch(h.t){case"n":var b=h.w;!b&&h.v!=null&&(b=h.v),b==null?h.f&&!h.F?o(c,1,0,"="+h.f):o(c,1,0,""):o(c,0,b,"V");break;case"b":o(c,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":o(c,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=o0(h.z||rs[14],Ml(Ua(h.v)))),o(c,0,h.w,"V");break;default:o(c,1,0,"")}}}o(c,-1,0,"EOD");var T=`\r
`,A=c.join(T);return A}})();return{to_workbook:r,to_sheet:n,from_sheet:i}})(),tSe=(function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(h,f){for(var g=h.split(`
`),y=-1,_=-1,b=0,T=[];b!==g.length;++b){var A=g[b].trim().split(":");if(A[0]==="cell"){var I=po(A[1]);if(T.length<=I.r)for(y=T.length;y<=I.r;++y)T[y]||(T[y]=[]);switch(y=I.r,_=I.c,A[2]){case"t":T[y][_]=t(A[3]);break;case"v":T[y][_]=+A[3];break;case"vtf":var P=A[A.length-1];case"vtc":switch(A[3]){case"nl":T[y][_]=!!+A[4];break;default:T[y][_]=+A[4];break}A[2]=="vtf"&&(T[y][_]=[T[y][_],P])}}}return f&&f.sheetRows&&(T=T.slice(0,f.sheetRows)),T}function r(h,f){return zb(n(h,f),f)}function i(h,f){return Iv(r(h,f),f)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(h){if(!h||!h["!ref"])return"";for(var f=[],g=[],y,_="",b=kc(h["!ref"]),T=Array.isArray(h),A=b.s.r;A<=b.e.r;++A)for(var I=b.s.c;I<=b.e.c;++I)if(_=qr({r:A,c:I}),y=T?(h[A]||[])[I]:h[_],!(!y||y.v==null||y.t==="z")){switch(g=["cell",_,"t"],y.t){case"s":case"str":g.push(e(y.v));break;case"n":y.f?(g[2]="vtf",g[3]="n",g[4]=y.v,g[5]=e(y.f)):(g[2]="v",g[3]=y.v);break;case"b":g[2]="vt"+(y.f?"f":"c"),g[3]="nl",g[4]=y.v?"1":"0",g[5]=e(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var P=Ml(Ua(y.v));g[2]="vtc",g[3]="nd",g[4]=""+P,g[5]=y.w||o0(y.z||rs[14],P);break;case"e":continue}f.push(g.join(":"))}return f.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(h){return[s,o,a,o,c(h),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:u}})(),Oxt=(function(){function t(u,h,f,g,y){y.raw?h[f][g]=u:u===""||(u==="TRUE"?h[f][g]=!0:u==="FALSE"?h[f][g]=!1:isNaN(yp(u))?isNaN(GA(u).getDate())?h[f][g]=u:h[f][g]=Ua(u):h[f][g]=yp(u))}function e(u,h){var f=h||{},g=[];if(!u||u.length===0)return g;for(var y=u.split(/[\r\n]/),_=y.length-1;_>=0&&y[_].length===0;)--_;for(var b=10,T=0,A=0;A<=_;++A)T=y[A].indexOf(" "),T==-1?T=y[A].length:T++,b=Math.max(b,T);for(A=0;A<=_;++A){g[A]=[];var I=0;for(t(y[A].slice(0,b).trim(),g,A,I,f),I=1;I<=(y[A].length-b)/10+1;++I)t(y[A].slice(b+(I-1)*10,b+I*10).trim(),g,A,I,f)}return f.sheetRows&&(g=g.slice(0,f.sheetRows)),g}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(u){for(var h={},f=!1,g=0,y=0;g<u.length;++g)(y=u.charCodeAt(g))==34?f=!f:!f&&y in n&&(h[y]=(h[y]||0)+1);y=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&y.push([h[g],g]);if(!y.length){h=r;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&y.push([h[g],g])}return y.sort(function(_,b){return _[0]-b[0]||r[_[1]]-r[b[1]]}),n[y.pop()[1]]||44}function s(u,h){var f=h||{},g="",y=f.dense?[]:{},_={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(g=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(g=u.charAt(4),u=u.slice(6)):g=i(u.slice(0,1024)):f&&f.FS?g=f.FS:g=i(u.slice(0,1024));var b=0,T=0,A=0,I=0,P=0,M=g.charCodeAt(0),V=!1,C=0,N=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var O=f.dateNF!=null?Xvt(f.dateNF):null;function L(){var F=u.slice(I,P),G={};if(F.charAt(0)=='"'&&F.charAt(F.length-1)=='"'&&(F=F.slice(1,-1).replace(/""/g,'"')),F.length===0)G.t="z";else if(f.raw)G.t="s",G.v=F;else if(F.trim().length===0)G.t="s",G.v=F;else if(F.charCodeAt(0)==61)F.charCodeAt(1)==34&&F.charCodeAt(F.length-1)==34?(G.t="s",G.v=F.slice(2,-1).replace(/""/g,'"')):Mwt(F)?(G.t="n",G.f=F.slice(1)):(G.t="s",G.v=F);else if(F=="TRUE")G.t="b",G.v=!0;else if(F=="FALSE")G.t="b",G.v=!1;else if(!isNaN(A=yp(F)))G.t="n",f.cellText!==!1&&(G.w=F),G.v=A;else if(!isNaN(GA(F).getDate())||O&&F.match(O)){G.z=f.dateNF||rs[14];var U=0;O&&F.match(O)&&(F=Zvt(F,f.dateNF,F.match(O)||[]),U=1),f.cellDates?(G.t="d",G.v=Ua(F,U)):(G.t="n",G.v=Ml(Ua(F,U))),f.cellText!==!1&&(G.w=o0(G.z,G.v instanceof Date?Ml(G.v):G.v)),f.cellNF||delete G.z}else G.t="s",G.v=F;if(G.t=="z"||(f.dense?(y[b]||(y[b]=[]),y[b][T]=G):y[qr({c:T,r:b})]=G),I=P+1,N=u.charCodeAt(I),_.e.c<T&&(_.e.c=T),_.e.r<b&&(_.e.r=b),C==M)++T;else if(T=0,++b,f.sheetRows&&f.sheetRows<=b)return!0}e:for(;P<u.length;++P)switch(C=u.charCodeAt(P)){case 34:N===34&&(V=!V);break;case M:case 10:case 13:if(!V&&L())break e;break}return P-I>0&&L(),y["!ref"]=Ls(_),y}function o(u,h){return!(h&&h.PRN)||h.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?s(u,h):zb(e(u,h),h)}function a(u,h){var f="",g=h.type=="string"?[0,0,0,0]:HSt(u,h);switch(h.type){case"base64":f=Pp(u);break;case"binary":f=u;break;case"buffer":h.codepage==65001?f=u.toString("utf8"):h.codepage&&typeof _5<"u"||(f=Ar&&Buffer.isBuffer(u)?u.toString("binary"):hP(u));break;case"array":f=eD(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?f=fk(f.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?f=fk(f):h.type=="binary"&&typeof _5<"u",f.slice(0,19)=="socialcalc:version:"?tSe.to_sheet(h.type=="string"?f:fk(f),h):o(f,h)}function l(u,h){return Iv(a(u,h),h)}function c(u){for(var h=[],f=vi(u["!ref"]),g,y=Array.isArray(u),_=f.s.r;_<=f.e.r;++_){for(var b=[],T=f.s.c;T<=f.e.c;++T){var A=qr({r:_,c:T});if(g=y?(u[_]||[])[T]:u[A],!g||g.v==null){b.push("          ");continue}for(var I=(g.w||(Cp(g),g.w)||"").slice(0,10);I.length<10;)I+=" ";b.push(I+(T===0?" ":""))}h.push(b.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:a,from_sheet:c}})(),Cae=(function(){function t(W,ne,ie){if(W){ic(W,W.l||0);for(var le=ie.Enum||Se;W.l<W.length;){var xe=W.read_shift(2),qe=le[xe]||le[65535],Ke=W.read_shift(2),ke=W.l+Ke,be=qe.f&&qe.f(W,Ke,ie);if(W.l=ke,ne(be,qe,xe))return}}}function e(W,ne){switch(ne.type){case"base64":return n(sh(Pp(W)),ne);case"binary":return n(sh(W),ne);case"buffer":case"array":return n(W,ne)}throw"Unsupported type "+ne.type}function n(W,ne){if(!W)return W;var ie=ne||{},le=ie.dense?[]:{},xe="Sheet1",qe="",Ke=0,ke={},be=[],Dt=[],Ye={s:{r:0,c:0},e:{r:0,c:0}},cn=ie.sheetRows||0;if(W[2]==0&&(W[3]==8||W[3]==9)&&W.length>=16&&W[14]==5&&W[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(W[2]==2)ie.Enum=Se,t(W,function(pt,hr,zn){switch(zn){case 0:ie.vers=pt,pt>=4096&&(ie.qpro=!0);break;case 6:Ye=pt;break;case 204:pt&&(qe=pt);break;case 222:qe=pt;break;case 15:case 51:ie.qpro||(pt[1].v=pt[1].v.slice(1));case 13:case 14:case 16:zn==14&&(pt[2]&112)==112&&(pt[2]&15)>1&&(pt[2]&15)<15&&(pt[1].z=ie.dateNF||rs[14],ie.cellDates&&(pt[1].t="d",pt[1].v=vEe(pt[1].v))),ie.qpro&&pt[3]>Ke&&(le["!ref"]=Ls(Ye),ke[xe]=le,be.push(xe),le=ie.dense?[]:{},Ye={s:{r:0,c:0},e:{r:0,c:0}},Ke=pt[3],xe=qe||"Sheet"+(Ke+1),qe="");var Hn=ie.dense?(le[pt[0].r]||[])[pt[0].c]:le[qr(pt[0])];if(Hn){Hn.t=pt[1].t,Hn.v=pt[1].v,pt[1].z!=null&&(Hn.z=pt[1].z),pt[1].f!=null&&(Hn.f=pt[1].f);break}ie.dense?(le[pt[0].r]||(le[pt[0].r]=[]),le[pt[0].r][pt[0].c]=pt[1]):le[qr(pt[0])]=pt[1];break}},ie);else if(W[2]==26||W[2]==14)ie.Enum=Z,W[2]==14&&(ie.qpro=!0,W.l=0),t(W,function(pt,hr,zn){switch(zn){case 204:xe=pt;break;case 22:pt[1].v=pt[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(pt[3]>Ke&&(le["!ref"]=Ls(Ye),ke[xe]=le,be.push(xe),le=ie.dense?[]:{},Ye={s:{r:0,c:0},e:{r:0,c:0}},Ke=pt[3],xe="Sheet"+(Ke+1)),cn>0&&pt[0].r>=cn)break;ie.dense?(le[pt[0].r]||(le[pt[0].r]=[]),le[pt[0].r][pt[0].c]=pt[1]):le[qr(pt[0])]=pt[1],Ye.e.c<pt[0].c&&(Ye.e.c=pt[0].c),Ye.e.r<pt[0].r&&(Ye.e.r=pt[0].r);break;case 27:pt[14e3]&&(Dt[pt[14e3][0]]=pt[14e3][1]);break;case 1537:Dt[pt[0]]=pt[1],pt[0]==Ke&&(xe=pt[1]);break}},ie);else throw new Error("Unrecognized LOTUS BOF "+W[2]);if(le["!ref"]=Ls(Ye),ke[qe||xe]=le,be.push(qe||xe),!Dt.length)return{SheetNames:be,Sheets:ke};for(var jt={},gn=[],wn=0;wn<Dt.length;++wn)ke[be[wn]]?(gn.push(Dt[wn]||be[wn]),jt[Dt[wn]]=ke[Dt[wn]]||ke[be[wn]]):(gn.push(Dt[wn]),jt[Dt[wn]]={"!ref":"A1"});return{SheetNames:gn,Sheets:jt}}function r(W,ne){var ie=ne||{};if(+ie.codepage>=0&&VA(+ie.codepage),ie.type=="string")throw new Error("Cannot write WK1 to JS string");var le=Il(),xe=vi(W["!ref"]),qe=Array.isArray(W),Ke=[];bt(le,0,s(1030)),bt(le,6,l(xe));for(var ke=Math.min(xe.e.r,8191),be=xe.s.r;be<=ke;++be)for(var Dt=Do(be),Ye=xe.s.c;Ye<=xe.e.c;++Ye){be===xe.s.r&&(Ke[Ye]=wa(Ye));var cn=Ke[Ye]+Dt,jt=qe?(W[be]||[])[Ye]:W[cn];if(!(!jt||jt.t=="z"))if(jt.t=="n")(jt.v|0)==jt.v&&jt.v>=-32768&&jt.v<=32767?bt(le,13,g(be,Ye,jt.v)):bt(le,14,_(be,Ye,jt.v));else{var gn=Cp(jt);bt(le,15,h(be,Ye,gn.slice(0,239)))}}return bt(le,1),le.end()}function i(W,ne){var ie=ne||{};if(+ie.codepage>=0&&VA(+ie.codepage),ie.type=="string")throw new Error("Cannot write WK3 to JS string");var le=Il();bt(le,0,o(W));for(var xe=0,qe=0;xe<W.SheetNames.length;++xe)(W.Sheets[W.SheetNames[xe]]||{})["!ref"]&&bt(le,27,ge(W.SheetNames[xe],qe++));var Ke=0;for(xe=0;xe<W.SheetNames.length;++xe){var ke=W.Sheets[W.SheetNames[xe]];if(!(!ke||!ke["!ref"])){for(var be=vi(ke["!ref"]),Dt=Array.isArray(ke),Ye=[],cn=Math.min(be.e.r,8191),jt=be.s.r;jt<=cn;++jt)for(var gn=Do(jt),wn=be.s.c;wn<=be.e.c;++wn){jt===be.s.r&&(Ye[wn]=wa(wn));var pt=Ye[wn]+gn,hr=Dt?(ke[jt]||[])[wn]:ke[pt];if(!(!hr||hr.t=="z"))if(hr.t=="n")bt(le,23,L(jt,wn,Ke,hr.v));else{var zn=Cp(hr);bt(le,22,C(jt,wn,Ke,zn.slice(0,239)))}}++Ke}}return bt(le,1),le.end()}function s(W){var ne=Ue(2);return ne.write_shift(2,W),ne}function o(W){var ne=Ue(26);ne.write_shift(2,4096),ne.write_shift(2,4),ne.write_shift(4,0);for(var ie=0,le=0,xe=0,qe=0;qe<W.SheetNames.length;++qe){var Ke=W.SheetNames[qe],ke=W.Sheets[Ke];if(!(!ke||!ke["!ref"])){++xe;var be=kc(ke["!ref"]);ie<be.e.r&&(ie=be.e.r),le<be.e.c&&(le=be.e.c)}}return ie>8191&&(ie=8191),ne.write_shift(2,ie),ne.write_shift(1,xe),ne.write_shift(1,le),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(1,1),ne.write_shift(1,2),ne.write_shift(4,0),ne.write_shift(4,0),ne}function a(W,ne,ie){var le={s:{c:0,r:0},e:{c:0,r:0}};return ne==8&&ie.qpro?(le.s.c=W.read_shift(1),W.l++,le.s.r=W.read_shift(2),le.e.c=W.read_shift(1),W.l++,le.e.r=W.read_shift(2),le):(le.s.c=W.read_shift(2),le.s.r=W.read_shift(2),ne==12&&ie.qpro&&(W.l+=2),le.e.c=W.read_shift(2),le.e.r=W.read_shift(2),ne==12&&ie.qpro&&(W.l+=2),le.s.c==65535&&(le.s.c=le.e.c=le.s.r=le.e.r=0),le)}function l(W){var ne=Ue(8);return ne.write_shift(2,W.s.c),ne.write_shift(2,W.s.r),ne.write_shift(2,W.e.c),ne.write_shift(2,W.e.r),ne}function c(W,ne,ie){var le=[{c:0,r:0},{t:"n",v:0},0,0];return ie.qpro&&ie.vers!=20768?(le[0].c=W.read_shift(1),le[3]=W.read_shift(1),le[0].r=W.read_shift(2),W.l+=2):(le[2]=W.read_shift(1),le[0].c=W.read_shift(2),le[0].r=W.read_shift(2)),le}function u(W,ne,ie){var le=W.l+ne,xe=c(W,ne,ie);if(xe[1].t="s",ie.vers==20768){W.l++;var qe=W.read_shift(1);return xe[1].v=W.read_shift(qe,"utf8"),xe}return ie.qpro&&W.l++,xe[1].v=W.read_shift(le-W.l,"cstr"),xe}function h(W,ne,ie){var le=Ue(7+ie.length);le.write_shift(1,255),le.write_shift(2,ne),le.write_shift(2,W),le.write_shift(1,39);for(var xe=0;xe<le.length;++xe){var qe=ie.charCodeAt(xe);le.write_shift(1,qe>=128?95:qe)}return le.write_shift(1,0),le}function f(W,ne,ie){var le=c(W,ne,ie);return le[1].v=W.read_shift(2,"i"),le}function g(W,ne,ie){var le=Ue(7);return le.write_shift(1,255),le.write_shift(2,ne),le.write_shift(2,W),le.write_shift(2,ie,"i"),le}function y(W,ne,ie){var le=c(W,ne,ie);return le[1].v=W.read_shift(8,"f"),le}function _(W,ne,ie){var le=Ue(13);return le.write_shift(1,255),le.write_shift(2,ne),le.write_shift(2,W),le.write_shift(8,ie,"f"),le}function b(W,ne,ie){var le=W.l+ne,xe=c(W,ne,ie);if(xe[1].v=W.read_shift(8,"f"),ie.qpro)W.l=le;else{var qe=W.read_shift(2);P(W.slice(W.l,W.l+qe),xe),W.l+=qe}return xe}function T(W,ne,ie){var le=ne&32768;return ne&=-32769,ne=(le?W:0)+(ne>=8192?ne-16384:ne),(le?"":"$")+(ie?wa(ne):Do(ne))}var A={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},I=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function P(W,ne){ic(W,0);for(var ie=[],le=0,xe="",qe="",Ke="",ke="";W.l<W.length;){var be=W[W.l++];switch(be){case 0:ie.push(W.read_shift(8,"f"));break;case 1:qe=T(ne[0].c,W.read_shift(2),!0),xe=T(ne[0].r,W.read_shift(2),!1),ie.push(qe+xe);break;case 2:{var Dt=T(ne[0].c,W.read_shift(2),!0),Ye=T(ne[0].r,W.read_shift(2),!1);qe=T(ne[0].c,W.read_shift(2),!0),xe=T(ne[0].r,W.read_shift(2),!1),ie.push(Dt+Ye+":"+qe+xe)}break;case 3:if(W.l<W.length){console.error("WK1 premature formula end");return}break;case 4:ie.push("("+ie.pop()+")");break;case 5:ie.push(W.read_shift(2));break;case 6:{for(var cn="";be=W[W.l++];)cn+=String.fromCharCode(be);ie.push('"'+cn.replace(/"/g,'""')+'"')}break;case 8:ie.push("-"+ie.pop());break;case 23:ie.push("+"+ie.pop());break;case 22:ie.push("NOT("+ie.pop()+")");break;case 20:case 21:ke=ie.pop(),Ke=ie.pop(),ie.push(["AND","OR"][be-20]+"("+Ke+","+ke+")");break;default:if(be<32&&I[be])ke=ie.pop(),Ke=ie.pop(),ie.push(Ke+I[be]+ke);else if(A[be]){if(le=A[be][1],le==69&&(le=W[W.l++]),le>ie.length){console.error("WK1 bad formula parse 0x"+be.toString(16)+":|"+ie.join("|")+"|");return}var jt=ie.slice(-le);ie.length-=le,ie.push(A[be][0]+"("+jt.join(",")+")")}else return be<=7?console.error("WK1 invalid opcode "+be.toString(16)):be<=24?console.error("WK1 unsupported op "+be.toString(16)):be<=30?console.error("WK1 invalid opcode "+be.toString(16)):be<=115?console.error("WK1 unsupported function opcode "+be.toString(16)):console.error("WK1 unrecognized opcode "+be.toString(16))}}ie.length==1?ne[1].f=""+ie[0]:console.error("WK1 bad formula parse |"+ie.join("|")+"|")}function M(W){var ne=[{c:0,r:0},{t:"n",v:0},0];return ne[0].r=W.read_shift(2),ne[3]=W[W.l++],ne[0].c=W[W.l++],ne}function V(W,ne){var ie=M(W);return ie[1].t="s",ie[1].v=W.read_shift(ne-4,"cstr"),ie}function C(W,ne,ie,le){var xe=Ue(6+le.length);xe.write_shift(2,W),xe.write_shift(1,ie),xe.write_shift(1,ne),xe.write_shift(1,39);for(var qe=0;qe<le.length;++qe){var Ke=le.charCodeAt(qe);xe.write_shift(1,Ke>=128?95:Ke)}return xe.write_shift(1,0),xe}function N(W,ne){var ie=M(W);ie[1].v=W.read_shift(2);var le=ie[1].v>>1;if(ie[1].v&1)switch(le&7){case 0:le=(le>>3)*5e3;break;case 1:le=(le>>3)*500;break;case 2:le=(le>>3)/20;break;case 3:le=(le>>3)/200;break;case 4:le=(le>>3)/2e3;break;case 5:le=(le>>3)/2e4;break;case 6:le=(le>>3)/16;break;case 7:le=(le>>3)/64;break}return ie[1].v=le,ie}function O(W,ne){var ie=M(W),le=W.read_shift(4),xe=W.read_shift(4),qe=W.read_shift(2);if(qe==65535)return le===0&&xe===3221225472?(ie[1].t="e",ie[1].v=15):le===0&&xe===3489660928?(ie[1].t="e",ie[1].v=42):ie[1].v=0,ie;var Ke=qe&32768;return qe=(qe&32767)-16446,ie[1].v=(1-Ke*2)*(xe*Math.pow(2,qe+32)+le*Math.pow(2,qe)),ie}function L(W,ne,ie,le){var xe=Ue(14);if(xe.write_shift(2,W),xe.write_shift(1,ie),xe.write_shift(1,ne),le==0)return xe.write_shift(4,0),xe.write_shift(4,0),xe.write_shift(2,65535),xe;var qe=0,Ke=0,ke=0,be=0;return le<0&&(qe=1,le=-le),Ke=Math.log2(le)|0,le/=Math.pow(2,Ke-31),be=le>>>0,(be&2147483648)==0&&(le/=2,++Ke,be=le>>>0),le-=be,be|=2147483648,be>>>=0,le*=Math.pow(2,32),ke=le>>>0,xe.write_shift(4,ke),xe.write_shift(4,be),Ke+=16383+(qe?32768:0),xe.write_shift(2,Ke),xe}function F(W,ne){var ie=O(W);return W.l+=ne-14,ie}function G(W,ne){var ie=M(W),le=W.read_shift(4);return ie[1].v=le>>6,ie}function U(W,ne){var ie=M(W),le=W.read_shift(8,"f");return ie[1].v=le,ie}function he(W,ne){var ie=U(W);return W.l+=ne-10,ie}function Ie(W,ne){return W[W.l+ne-1]==0?W.read_shift(ne,"cstr"):""}function ze(W,ne){var ie=W[W.l++];ie>ne-1&&(ie=ne-1);for(var le="";le.length<ie;)le+=String.fromCharCode(W[W.l++]);return le}function Oe(W,ne,ie){if(!(!ie.qpro||ne<21)){var le=W.read_shift(1);W.l+=17,W.l+=1,W.l+=2;var xe=W.read_shift(ne-21,"cstr");return[le,xe]}}function fe(W,ne){for(var ie={},le=W.l+ne;W.l<le;){var xe=W.read_shift(2);if(xe==14e3){for(ie[xe]=[0,""],ie[xe][0]=W.read_shift(2);W[W.l];)ie[xe][1]+=String.fromCharCode(W[W.l]),W.l++;W.l++}}return ie}function ge(W,ne){var ie=Ue(5+W.length);ie.write_shift(2,14e3),ie.write_shift(2,ne);for(var le=0;le<W.length;++le){var xe=W.charCodeAt(le);ie[ie.l++]=xe>127?95:xe}return ie[ie.l++]=0,ie}var Se={0:{n:"BOF",f:XEe},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:a},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:y},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Ie},222:{n:"SHEETNAMELP",f:ze},65535:{n:""}},Z={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:V},23:{n:"NUMBER17",f:O},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:fe},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:G},38:{n:"??"},39:{n:"NUMBER27",f:U},40:{n:"FORMULA28",f:he},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Ie},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Oe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}})(),Lxt=/^\s|\s$|[\t\n\r]/;function nSe(t,e){if(!e.bookSST)return"";var n=[Ds];n[n.length]=_t("sst",null,{xmlns:Vb[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var i=t[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(Lxt)&&(s+=' xml:space="preserve"'),s+=">"+Wr(i.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function Dxt(t){return[t.read_shift(4),t.read_shift(4)]}function jxt(t,e){return e||(e=Ue(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var $xt=I_t;function Fxt(t){var e=Il();tt(e,159,jxt(t));for(var n=0;n<t.length;++n)tt(e,19,$xt(t[n]));return tt(e,160),e.end()}function Vxt(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function rSe(t){var e=0,n,r=Vxt(t),i=r.length+1,s,o,a,l,c;for(n=sv(i),n[0]=r.length,s=1;s!=i;++s)n[s]=r[s-1];for(s=i-1;s>=0;--s)o=n[s],a=(e&16384)===0?0:1,l=e<<1&32767,c=a|l,e=c^o;return e^52811}var zxt=(function(){function t(i,s){switch(s.type){case"base64":return e(Pp(i),s);case"binary":return e(i,s);case"buffer":return e(Ar&&Buffer.isBuffer(i)?i.toString("binary"):hP(i),s);case"array":return e(eD(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var o=s||{},a=o.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,h){Array.isArray(a)&&(a[h]=[]);for(var f=/\\\w+\b/g,g=0,y,_=-1;y=f.exec(u);){switch(y[0]){case"\\cell":var b=u.slice(g,f.lastIndex-y[0].length);if(b[0]==" "&&(b=b.slice(1)),++_,b.length){var T={v:b,t:"s"};Array.isArray(a)?a[h][_]=T:a[qr({r:h,c:_})]=T}break}g=f.lastIndex}_>c.e.c&&(c.e.c=_)}),a["!ref"]=Ls(c),a}function n(i,s){return Iv(t(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],o=vi(i["!ref"]),a,l=Array.isArray(i),c=o.s.r;c<=o.e.r;++c){s.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)s.push("\\cellx"+(u+1));for(s.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var h=qr({r:c,c:u});a=l?(i[c]||[])[u]:i[h],!(!a||a.v==null&&(!a.f||a.F))&&(s.push(" "+(a.w||(Cp(a),a.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}})();function Rae(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}var Gxt=6,vp=Gxt;function I5(t){return Math.floor((t+Math.round(128/vp)/256)*vp)}function P5(t){return Math.floor((t-5)/vp*100+.5)/100}function aG(t){return Math.round((t*vp+5)/vp*256)/256}function iK(t){t.width?(t.wpx=I5(t.width),t.wch=P5(t.wpx),t.MDW=vp):t.wpx?(t.wch=P5(t.wpx),t.width=aG(t.wch),t.MDW=vp):typeof t.wch=="number"&&(t.width=aG(t.wch),t.wpx=I5(t.width),t.MDW=vp),t.customWidth&&delete t.customWidth}var Uxt=96,iSe=Uxt;function C5(t){return t*96/iSe}function sSe(t){return t*iSe/96}function Bxt(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=_t("numFmt",null,{numFmtId:r,formatCode:Wr(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=_t("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function Wxt(t){var e=[];return e[e.length]=_t("cellXfs",null),t.forEach(function(n){e[e.length]=_t("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=_t("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function oSe(t,e){var n=[Ds,_t("styleSheet",null,{xmlns:Vb[0],"xmlns:vt":ho.vt})],r;return t.SSF&&(r=Bxt(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=Wxt(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function Hxt(t,e){var n=t.read_shift(2),r=ba(t);return[n,r]}function qxt(t,e,n){n||(n=Ue(6+4*e.length)),n.write_shift(2,t),mo(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function Kxt(t,e,n){var r={};r.sz=t.read_shift(2)/20;var i=L_t(t);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=t.read_shift(2);switch(s===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(r.underline=o);var a=t.read_shift(1);a>0&&(r.family=a);var l=t.read_shift(1);switch(l>0&&(r.charset=l),t.l++,r.color=O_t(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=ba(t),r}function Yxt(t,e){e||(e=Ue(153)),e.write_shift(2,t.sz*20),D_t(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),k5(t.color,e);var r=0;return r=2,e.write_shift(1,r),mo(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Xxt=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],TF,Zxt=qd;function Mae(t,e){e||(e=Ue(84)),TF||(TF=Hq(Xxt));var n=TF[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(k5({auto:1},e),k5({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Jxt(t,e){var n=t.l+e,r=t.read_shift(2),i=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:i}}function aSe(t,e,n){n||(n=Ue(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function dS(t,e){return e||(e=Ue(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Qxt=qd;function ewt(t,e){return e||(e=Ue(51)),e.write_shift(1,0),dS(null,e),dS(null,e),dS(null,e),dS(null,e),dS(null,e),e.length>e.l?e.slice(0,e.l):e}function twt(t,e){return e||(e=Ue(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),T5(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function nwt(t,e,n){var r=Ue(2052);return r.write_shift(4,t),T5(e,r),T5(n,r),r.length>r.l?r.slice(0,r.l):r}function rwt(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++n}),n!=0&&(tt(t,615,gh(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&tt(t,44,qxt(i,e[i]))}),tt(t,616))}}function iwt(t){var e=1;tt(t,611,gh(e)),tt(t,43,Yxt({sz:12,color:{theme:1},name:"Calibri",family:2})),tt(t,612)}function swt(t){var e=2;tt(t,603,gh(e)),tt(t,45,Mae({patternType:"none"})),tt(t,45,Mae({patternType:"gray125"})),tt(t,604)}function owt(t){var e=1;tt(t,613,gh(e)),tt(t,46,ewt()),tt(t,614)}function awt(t){var e=1;tt(t,626,gh(e)),tt(t,47,aSe({numFmtId:0},65535)),tt(t,627)}function lwt(t,e){tt(t,617,gh(e.length)),e.forEach(function(n){tt(t,47,aSe(n,0))}),tt(t,618)}function cwt(t){var e=1;tt(t,619,gh(e)),tt(t,48,twt({xfId:0,name:"Normal"})),tt(t,620)}function uwt(t){var e=0;tt(t,505,gh(e)),tt(t,506)}function hwt(t){var e=0;tt(t,508,nwt(e,"TableStyleMedium9","PivotStyleMedium4")),tt(t,509)}function dwt(t,e){var n=Il();return tt(n,278),rwt(n,t.SSF),iwt(n),swt(n),owt(n),awt(n),lwt(n,e.cellXfs),cwt(n),uwt(n),hwt(n),tt(n,279),n.end()}function lSe(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[Ds];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function fwt(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:ba(t)}}function pwt(t){var e=Ue(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),mo(t.name,e),e.slice(0,e.l)}function mwt(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function gwt(t){var e=Ue(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function ywt(t,e){var n=Ue(8+2*e.length);return n.write_shift(4,t),mo(e,n),n.slice(0,n.l)}function vwt(t){return t.l+=4,t.read_shift(4)!=0}function _wt(t,e){var n=Ue(8);return n.write_shift(4,t),n.write_shift(4,1),n}function xwt(){var t=Il();return tt(t,332),tt(t,334,gh(1)),tt(t,335,pwt({name:"XLDAPR",version:12e4,flags:3496657072})),tt(t,336),tt(t,339,ywt(1,"XLDAPR")),tt(t,52),tt(t,35,gh(514)),tt(t,4096,gh(0)),tt(t,4097,Jc(1)),tt(t,36),tt(t,53),tt(t,340),tt(t,337,_wt(1)),tt(t,51,gwt([[1,0]])),tt(t,338),tt(t,333),t.end()}function cSe(){var t=[Ds];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function wwt(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=qr(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Zx=1024;function uSe(t,e){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[_t("xml",null,{"xmlns:v":lc.v,"xmlns:o":lc.o,"xmlns:x":lc.x,"xmlns:mv":lc.mv}).replace(/\/>/,">"),_t("o:shapelayout",_t("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),_t("v:shapetype",[_t("v:stroke",null,{joinstyle:"miter"}),_t("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];Zx<t*1e3;)Zx+=1e3;return e.forEach(function(s){var o=po(s[0]),a={color2:"#BEFF82",type:"gradient"};a.type=="gradient"&&(a.angle="-180");var l=a.type=="gradient"?_t("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=_t("v:fill",l,a),u={on:"t",obscured:"t"};++Zx,i=i.concat(["<v:shape"+BA({id:"_x0000_s"+Zx,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,_t("v:shadow",null,u),_t("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Lo("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Lo("x:AutoFill","False"),Lo("x:Row",String(o.r)),Lo("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function hSe(t){var e=[Ds,_t("comments",null,{xmlns:Vb[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(i){var s=Wr(i.a);n.indexOf(s)==-1&&(n.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&n.indexOf("tc="+i.ID)==-1&&(n.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=n.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(i=n.indexOf(Wr(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(Lo("t",Wr(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,a=1;a<s.length;++a)o+=`Reply:
    `+s[a]+`
`;e.push(Lo("t",Wr(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function bwt(t,e,n){var r=[Ds,_t("ThreadedComments",null,{xmlns:ho.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(o,a){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};a==0?s=l.id:l.parentId=s,o.ID=l.id,o.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),r.push(_t("threadedComment",Lo("text",o.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function Ewt(t){var e=[Ds,_t("personList",null,{xmlns:ho.TCMNT,"xmlns:x":Vb[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(_t("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Swt(t){var e={};e.iauthor=t.read_shift(4);var n=Mv(t);return e.rfx=n.s,e.ref=qr(n.s),t.l+=16,e}function Twt(t,e){return e==null&&(e=Ue(36)),e.write_shift(4,t[1].iauthor),Gb(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var kwt=ba;function Awt(t){return mo(t.slice(0,54))}function Iwt(t){var e=Il(),n=[];return tt(e,628),tt(e,630),t.forEach(function(r){r[1].forEach(function(i){n.indexOf(i.a)>-1||(n.push(i.a.slice(0,54)),tt(e,632,Awt(i.a)))})}),tt(e,631),tt(e,633),t.forEach(function(r){r[1].forEach(function(i){i.iauthor=n.indexOf(i.a);var s={s:po(r[0]),e:po(r[0])};tt(e,635,Twt([s,i])),i.t&&i.t.length>0&&tt(e,637,C_t(i)),tt(e,636),delete i.iauthor})}),tt(e,634),tt(e,629),e.end()}function Pwt(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var i=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Xr.utils.cfb_add(t,i,e.FileIndex[r].content)}})}var dSe=["xlsb","xlsm","xlam","biff8","xla"],Cwt=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,i,s,o){var a=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),o.length==0?a=!0:o.charAt(0)=="["&&(a=!0,o=o.slice(1,-1));var c=s.length>0?parseInt(s,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return a?u+=e.c:--u,l?c+=e.r:--c,i+(a?"":"$")+wa(u)+(l?"":"$")+Do(c)}return function(i,s){return e=s,i.replace(t,n)}})(),sK=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,oK=(function(){return function(e,n){return e.replace(sK,function(r,i,s,o,a,l){var c=Qq(o)-(s?0:n.c),u=Jq(l)-(a?0:n.r),h=u==0?"":a?u+1:"["+u+"]",f=c==0?"":s?c+1:"["+c+"]";return i+"R"+h+"C"+f})}})();function Rwt(t,e){return t.replace(sK,function(n,r,i,s,o,a){return r+(i=="$"?i+s:wa(Qq(s)+e.c))+(o=="$"?o+a:Do(Jq(a)+e.r))})}function Mwt(t){return t.length!=1}function ws(t){t.l+=1}function a0(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function fSe(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return pSe(t);n.biff==12&&(r=4)}var i=t.read_shift(r),s=t.read_shift(r),o=a0(t),a=a0(t);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function pSe(t){var e=a0(t),n=a0(t),r=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function Nwt(t,e,n){if(n.biff<8)return pSe(t);var r=t.read_shift(n.biff==12?4:2),i=t.read_shift(n.biff==12?4:2),s=a0(t),o=a0(t);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function mSe(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return Owt(t);var r=t.read_shift(n&&n.biff==12?4:2),i=a0(t);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function Owt(t){var e=a0(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function Lwt(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function Dwt(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return jwt(t);var i=t.read_shift(r>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,a=(s&32768)>>15;if(s&=16383,a==1)for(;i>524287;)i-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:o,rRel:a}}function jwt(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:i,rRel:r}}function $wt(t,e,n){var r=(t[t.l++]&96)>>5,i=fSe(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,i]}function Fwt(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=fSe(t,s,n);return[r,i,o]}function Vwt(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function zwt(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[r,i]}function Gwt(t,e,n){var r=(t[t.l++]&96)>>5,i=Nwt(t,e-1,n);return[r,i]}function Uwt(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function Nae(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function Bwt(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(t.read_shift(n&&n.biff==2?1:2));return i}function Wwt(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function Hwt(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function qwt(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function Kwt(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function gSe(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function Ywt(t){return t.read_shift(2),gSe(t)}function Xwt(t){return t.read_shift(2),gSe(t)}function Zwt(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=mSe(t,0,n);return[r,i]}function Jwt(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=Dwt(t,0,n);return[r,i]}function Qwt(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var s=mSe(t,0,n);return[r,i,s]}function e2t(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(n&&n.biff<=3?1:2);return[ebt[i],_Se[i],r]}function t2t(t,e,n){var r=t[t.l++],i=t.read_shift(1),s=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:n2t(t);return[i,(s[0]===0?_Se:Q2t)[s[1]]]}function n2t(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function r2t(t,e,n){t.l+=n&&n.biff==2?3:4}function i2t(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function s2t(t){return t.l++,pP[t.read_shift(1)]}function o2t(t){return t.l++,t.read_shift(2)}function a2t(t){return t.l++,t.read_shift(1)!==0}function l2t(t){return t.l++,Ub(t)}function c2t(t,e,n){return t.l++,JEe(t,e-1,n)}function u2t(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=Q_t(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=pP[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=Ub(t);break;case 2:n[1]=rxt(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function h2t(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((n.biff==12?Mv:oxt)(t));return i}function d2t(t,e,n){var r=0,i=0;n.biff==12?(r=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--i==0&&(i=256));for(var s=0,o=[];s!=r&&(o[s]=[]);++s)for(var a=0;a!=i;++a)o[s][a]=u2t(t,n.biff);return o}function f2t(t,e,n){var r=t.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,s=t.read_shift(i);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,s]}function p2t(t,e,n){if(n.biff==5)return m2t(t);var r=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[r,i,s]}function m2t(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function g2t(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function y2t(t,e,n){var r=t.read_shift(1)>>>5&3,i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function v2t(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function _2t(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[r,i]}var x2t=qd,w2t=qd,b2t=qd;function mP(t,e,n){return t.l+=2,[Lwt(t)]}function aK(t){return t.l+=6,[]}var E2t=mP,S2t=aK,T2t=aK,k2t=mP;function ySe(t){return t.l+=2,[XEe(t),t.read_shift(2)&1]}var A2t=mP,I2t=ySe,P2t=aK,C2t=mP,R2t=mP,M2t=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function N2t(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),o=M2t[n>>2&31];return{ixti:e,coltype:n&3,rt:o,idx:r,c:i,C:s}}function O2t(t){return t.l+=2,[t.read_shift(4)]}function L2t(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function D2t(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function j2t(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function $2t(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function F2t(t){return t.l+=4,[0,0]}var Oae={1:{n:"PtgExp",f:i2t},2:{n:"PtgTbl",f:b2t},3:{n:"PtgAdd",f:ws},4:{n:"PtgSub",f:ws},5:{n:"PtgMul",f:ws},6:{n:"PtgDiv",f:ws},7:{n:"PtgPower",f:ws},8:{n:"PtgConcat",f:ws},9:{n:"PtgLt",f:ws},10:{n:"PtgLe",f:ws},11:{n:"PtgEq",f:ws},12:{n:"PtgGe",f:ws},13:{n:"PtgGt",f:ws},14:{n:"PtgNe",f:ws},15:{n:"PtgIsect",f:ws},16:{n:"PtgUnion",f:ws},17:{n:"PtgRange",f:ws},18:{n:"PtgUplus",f:ws},19:{n:"PtgUminus",f:ws},20:{n:"PtgPercent",f:ws},21:{n:"PtgParen",f:ws},22:{n:"PtgMissArg",f:ws},23:{n:"PtgStr",f:c2t},26:{n:"PtgSheet",f:L2t},27:{n:"PtgEndSheet",f:D2t},28:{n:"PtgErr",f:s2t},29:{n:"PtgBool",f:a2t},30:{n:"PtgInt",f:o2t},31:{n:"PtgNum",f:l2t},32:{n:"PtgArray",f:Uwt},33:{n:"PtgFunc",f:e2t},34:{n:"PtgFuncVar",f:t2t},35:{n:"PtgName",f:f2t},36:{n:"PtgRef",f:Zwt},37:{n:"PtgArea",f:$wt},38:{n:"PtgMemArea",f:g2t},39:{n:"PtgMemErr",f:x2t},40:{n:"PtgMemNoMem",f:w2t},41:{n:"PtgMemFunc",f:y2t},42:{n:"PtgRefErr",f:v2t},43:{n:"PtgAreaErr",f:Vwt},44:{n:"PtgRefN",f:Jwt},45:{n:"PtgAreaN",f:Gwt},46:{n:"PtgMemAreaN",f:j2t},47:{n:"PtgMemNoMemN",f:$2t},57:{n:"PtgNameX",f:p2t},58:{n:"PtgRef3d",f:Qwt},59:{n:"PtgArea3d",f:Fwt},60:{n:"PtgRefErr3d",f:_2t},61:{n:"PtgAreaErr3d",f:zwt},255:{}},V2t={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},z2t={1:{n:"PtgElfLel",f:ySe},2:{n:"PtgElfRw",f:C2t},3:{n:"PtgElfCol",f:E2t},6:{n:"PtgElfRwV",f:R2t},7:{n:"PtgElfColV",f:k2t},10:{n:"PtgElfRadical",f:A2t},11:{n:"PtgElfRadicalS",f:P2t},13:{n:"PtgElfColS",f:S2t},15:{n:"PtgElfColSV",f:T2t},16:{n:"PtgElfRadicalLel",f:I2t},25:{n:"PtgList",f:N2t},29:{n:"PtgSxName",f:O2t},255:{}},G2t={0:{n:"PtgAttrNoop",f:F2t},1:{n:"PtgAttrSemi",f:Kwt},2:{n:"PtgAttrIf",f:Hwt},4:{n:"PtgAttrChoose",f:Bwt},8:{n:"PtgAttrGoto",f:Wwt},16:{n:"PtgAttrSum",f:r2t},32:{n:"PtgAttrBaxcel",f:Nae},33:{n:"PtgAttrBaxcel",f:Nae},64:{n:"PtgAttrSpace",f:Ywt},65:{n:"PtgAttrSpaceSemi",f:Xwt},128:{n:"PtgAttrIfError",f:qwt},255:{}};function U2t(t,e,n,r){if(r.biff<8)return qd(t,e);for(var i=t.l+e,s=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=d2t(t,0,r),s.push(n[o][1]);break;case"PtgMemArea":n[o][2]=h2t(t,n[o][1],r),s.push(n[o][2]);break;case"PtgExp":r&&r.biff==12&&(n[o][1][1]=t.read_shift(4),s.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return e=i-t.l,e!==0&&s.push(qd(t,e)),s}function B2t(t,e,n){for(var r=t.l+e,i,s,o=[];r!=t.l;)e=r-t.l,s=t[t.l],i=Oae[s]||Oae[V2t[s]],(s===24||s===25)&&(i=(s===24?z2t:G2t)[t[t.l+1]]),!i||!i.f?qd(t,e):o.push([i.n,i.f(t,e,n)]);return o}function W2t(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],i=[],s=0;s<r.length;++s){var o=r[s];if(o)switch(o[0]){case 2:i.push('"'+o[1].replace(/"/g,'""')+'"');break;default:i.push(o[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var H2t={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function q2t(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function vSe(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(t[r[0]][0]){case 357:return i=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[r[0]][0][3]?(i=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function Lae(t,e,n){var r=vSe(t,e,n);return r=="#REF"?r:q2t(r,n)}function tb(t,e,n,r,i){var s=i&&i.biff||8,o={s:{c:0,r:0}},a=[],l,c,u,h=0,f=0,g,y="";if(!t[0]||!t[0][0])return"";for(var _=-1,b="",T=0,A=t[0].length;T<A;++T){var I=t[0][T];switch(I[0]){case"PtgUminus":a.push("-"+a.pop());break;case"PtgUplus":a.push("+"+a.pop());break;case"PtgPercent":a.push(a.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=a.pop(),c=a.pop(),_>=0){switch(t[0][_][1][0]){case 0:b=Ji(" ",t[0][_][1][1]);break;case 1:b=Ji("\r",t[0][_][1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][_][1][0])}c=c+b,_=-1}a.push(c+H2t[I[0]]+l);break;case"PtgIsect":l=a.pop(),c=a.pop(),a.push(c+" "+l);break;case"PtgUnion":l=a.pop(),c=a.pop(),a.push(c+","+l);break;case"PtgRange":l=a.pop(),c=a.pop(),a.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=mk(I[1][1],o,i),a.push(gk(u,s));break;case"PtgRefN":u=n?mk(I[1][1],n,i):I[1][1],a.push(gk(u,s));break;case"PtgRef3d":h=I[1][1],u=mk(I[1][2],o,i),y=Lae(r,h,i),a.push(y+"!"+gk(u,s));break;case"PtgFunc":case"PtgFuncVar":var P=I[1][0],M=I[1][1];P||(P=0),P&=127;var V=P==0?[]:a.slice(-P);a.length-=P,M==="User"&&(M=V.shift()),a.push(M+"("+V.join(",")+")");break;case"PtgBool":a.push(I[1]?"TRUE":"FALSE");break;case"PtgInt":a.push(I[1]);break;case"PtgNum":a.push(String(I[1]));break;case"PtgStr":a.push('"'+I[1].replace(/"/g,'""')+'"');break;case"PtgErr":a.push(I[1]);break;case"PtgAreaN":g=_ae(I[1][1],n?{s:n}:o,i),a.push(EF(g,i));break;case"PtgArea":g=_ae(I[1][1],o,i),a.push(EF(g,i));break;case"PtgArea3d":h=I[1][1],g=I[1][2],y=Lae(r,h,i),a.push(y+"!"+EF(g,i));break;case"PtgAttrSum":a.push("SUM("+a.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=I[1][2];var C=(r.names||[])[f-1]||(r[0]||[])[f],N=C?C.Name:"SH33TJSNAME"+String(f);N&&N.slice(0,6)=="_xlfn."&&!i.xlfn&&(N=N.slice(6)),a.push(N);break;case"PtgNameX":var O=I[1][1];f=I[1][2];var L;if(i.biff<=5)O<0&&(O=-O),r[O]&&(L=r[O][f]);else{var F="";if(((r[O]||[])[0]||[])[0]==14849||(((r[O]||[])[0]||[])[0]==1025?r[O][f]&&r[O][f].itab>0&&(F=r.SheetNames[r[O][f].itab-1]+"!"):F=r.SheetNames[f-1]+"!"),r[O]&&r[O][f])F+=r[O][f].Name;else if(r[0]&&r[0][f])F+=r[0][f].Name;else{var G=(vSe(r,O,i)||"").split(";;");G[f-1]?F=G[f-1]:F+="SH33TJSERRX"}a.push(F);break}L||(L={Name:"SH33TJSERRY"}),a.push(L.Name);break;case"PtgParen":var U="(",he=")";if(_>=0){switch(b="",t[0][_][1][0]){case 2:U=Ji(" ",t[0][_][1][1])+U;break;case 3:U=Ji("\r",t[0][_][1][1])+U;break;case 4:he=Ji(" ",t[0][_][1][1])+he;break;case 5:he=Ji("\r",t[0][_][1][1])+he;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][_][1][0])}_=-1}a.push(U+a.pop()+he);break;case"PtgRefErr":a.push("#REF!");break;case"PtgRefErr3d":a.push("#REF!");break;case"PtgExp":u={c:I[1][1],r:I[1][0]};var Ie={c:n.c,r:n.r};if(r.sharedf[qr(u)]){var ze=r.sharedf[qr(u)];a.push(tb(ze,o,Ie,r,i))}else{var Oe=!1;for(l=0;l!=r.arrayf.length;++l)if(c=r.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){a.push(tb(c[1],o,Ie,r,i)),Oe=!0;break}Oe||a.push(I[1])}break;case"PtgArray":a.push("{"+W2t(I[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":a.push("");break;case"PtgAreaErr":a.push("#REF!");break;case"PtgAreaErr3d":a.push("#REF!");break;case"PtgList":a.push("Table"+I[1].idx+"[#"+I[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(I));default:throw new Error("Unrecognized Formula Token: "+String(I))}var fe=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&_>=0&&fe.indexOf(t[0][T][0])==-1){I=t[0][_];var ge=!0;switch(I[1][0]){case 4:ge=!1;case 0:b=Ji(" ",I[1][1]);break;case 5:ge=!1;case 1:b=Ji("\r",I[1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+I[1][0])}a.push((ge?b:"")+a.pop()+(ge?"":b)),_=-1}}if(a.length>1&&i.WTF)throw new Error("bad formula stack");return a[0]}function K2t(t){if(t==null){var e=Ue(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return ov(t);return ov(0)}function Y2t(t,e,n,r,i){var s=av(e,n,i),o=K2t(t.v),a=Ue(6),l=33;a.write_shift(2,l),a.write_shift(4,0);for(var c=Ue(t.bf.length),u=0;u<t.bf.length;++u)c[u]=t.bf[u];var h=Oo([s,o,a,c]);return h}function tD(t,e,n){var r=t.read_shift(4),i=B2t(t,r,n),s=t.read_shift(4),o=s>0?U2t(t,s,i,n):null;return[i,o]}var X2t=tD,nD=tD,Z2t=tD,J2t=tD,Q2t={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},_Se={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},ebt={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function tbt(t){var e="of:="+t.replace(sK,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function nbt(t){return t.replace(/\./,"!")}var yk=typeof Map<"u";function lK(t,e,n){var r=0,i=t.length;if(n){if(yk?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var s=yk?n.get(e):n[e];r<s.length;++r)if(t[s[r]].t===e)return t.Count++,s[r]}}else for(;r<i;++r)if(t[r].t===e)return t.Count++,r;return t[i]={t:e},t.Count++,t.Unique++,n&&(yk?(n.has(e)||n.set(e,[]),n.get(e).push(i)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(i))),i}function rD(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(vp=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=P5(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=aG(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function xSe(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function w0(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(r==null&&n.ssf){for(;i<392;++i)if(n.ssf[i]==null){mEe(e.z,i),n.ssf[i]=e.z,n.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===r)return i;return t[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function rbt(t,e,n){if(t&&t["!ref"]){var r=vi(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function ibt(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+Ls(t[n])+'"/>';return e+"</mergeCells>"}function sbt(t,e,n,r,i){var s=!1,o={},a=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[n];try{e.Workbook&&(l=e.Workbook.Sheets[n].CodeName||l)}catch{}s=!0,o.codeName=UA(Wr(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),a=(a||"")+_t("outlinePr",null,c)}!s&&!a||(i[i.length]=_t("sheetPr",a,o))}var obt=["objects","scenarios","selectLockedCells","selectUnlockedCells"],abt=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function lbt(t){var e={sheet:1};return obt.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),abt.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=rSe(t.password).toString(16).toUpperCase()),_t("sheetProtection",null,e)}function cbt(t){return xSe(t),_t("pageMargins",null,t)}function ubt(t,e){for(var n=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(n[n.length]=_t("col",null,rD(i,r)));return n[n.length]="</cols>",n.join("")}function hbt(t,e,n,r){var i=typeof t.ref=="string"?t.ref:Ls(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,o=kc(i);o.s.r==o.e.r&&(o.e.r=kc(e["!ref"]).e.r,i=Ls(o));for(var a=0;a<s.length;++a){var l=s[a];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+i;break}}return a==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),_t("autoFilter",null,{ref:i})}function dbt(t,e,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),_t("sheetViews",_t("sheetView",null,i),{})}function fbt(t,e,n,r){if(t.c&&n["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",s=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=pP[t.v];break;case"d":r&&r.cellDates?i=Ua(t.v,-1).toISOString():(t=Nl(t),t.t="n",i=""+(t.v=Ml(Ua(t.v)))),typeof t.z>"u"&&(t.z=rs[14]);break;default:i=t.v;break}var a=Lo("v",Wr(i)),l={r:e},c=w0(r.cellXfs,t,r);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){a=Lo("v",""+lK(r.Strings,t.v,r.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=o),typeof t.f=="string"&&t.f){var u=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;a=_t("f",Wr(t.f),u)+(t.v!=null?a:"")}return t.l&&n["!links"].push([e,t.l]),t.D&&(l.cm=1),_t("c",a,l)}function pbt(t,e,n,r){var i=[],s=[],o=vi(t["!ref"]),a="",l,c="",u=[],h=0,f=0,g=t["!rows"],y=Array.isArray(t),_={r:c},b,T=-1;for(f=o.s.c;f<=o.e.c;++f)u[f]=wa(f);for(h=o.s.r;h<=o.e.r;++h){for(s=[],c=Do(h),f=o.s.c;f<=o.e.c;++f){l=u[f]+c;var A=y?(t[h]||[])[f]:t[l];A!==void 0&&(a=fbt(A,l,t,e))!=null&&s.push(a)}(s.length>0||g&&g[h])&&(_={r:c},g&&g[h]&&(b=g[h],b.hidden&&(_.hidden=1),T=-1,b.hpx?T=C5(b.hpx):b.hpt&&(T=b.hpt),T>-1&&(_.ht=T,_.customHeight=1),b.level&&(_.outlineLevel=b.level)),i[i.length]=_t("row",s.join(""),_))}if(g)for(;h<g.length;++h)g&&g[h]&&(_={r:h+1},b=g[h],b.hidden&&(_.hidden=1),T=-1,b.hpx?T=C5(b.hpx):b.hpt&&(T=b.hpt),T>-1&&(_.ht=T,_.customHeight=1),b.level&&(_.outlineLevel=b.level),i[i.length]=_t("row","",_));return i.join("")}function wSe(t,e,n,r){var i=[Ds,_t("worksheet",null,{xmlns:Vb[0],"xmlns:r":ho.r})],s=n.SheetNames[t],o=0,a="",l=n.Sheets[s];l==null&&(l={});var c=l["!ref"]||"A1",u=vi(c);if(u.e.c>16383||u.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=Ls(u)}r||(r={}),l["!comments"]=[];var h=[];sbt(l,n,t,e,i),i[i.length]=_t("dimension",null,{ref:c}),i[i.length]=dbt(l,e,t,n),e.sheetFormat&&(i[i.length]=_t("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=ubt(l,l["!cols"])),i[o=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(a=pbt(l,e),a.length>0&&(i[i.length]=a)),i.length>o+1&&(i[i.length]="</sheetData>",i[o]=i[o].replace("/>",">")),l["!protect"]&&(i[i.length]=lbt(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=hbt(l["!autofilter"],l,n,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=ibt(l["!merges"]));var f=-1,g,y=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(_){_[1].Target&&(g={ref:_[0]},_[1].Target.charAt(0)!="#"&&(y=Gr(r,-1,Wr(_[1].Target).replace(/#.*$/,""),wr.HLINK),g["r:id"]="rId"+y),(f=_[1].Target.indexOf("#"))>-1&&(g.location=Wr(_[1].Target.slice(f+1))),_[1].Tooltip&&(g.tooltip=Wr(_[1].Tooltip)),i[i.length]=_t("hyperlink",null,g))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=cbt(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Lo("ignoredErrors",_t("ignoredError",null,{numberStoredAsText:1,sqref:c}))),h.length>0&&(y=Gr(r,-1,"../drawings/drawing"+(t+1)+".xml",wr.DRAW),i[i.length]=_t("drawing",null,{"r:id":"rId"+y}),l["!drawing"]=h),l["!comments"].length>0&&(y=Gr(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",wr.VML),i[i.length]=_t("legacyDrawing",null,{"r:id":"rId"+y}),l["!legacy"]=y),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function mbt(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=r,s&7&&(n.level=s&7),s&16&&(n.hidden=!0),s&32&&(n.hpt=i/20),n}function gbt(t,e,n){var r=Ue(145),i=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var s=320;i.hpx?s=C5(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),r.write_shift(1,o),r.write_shift(1,0);var a=0,l=r.l;r.l+=4;for(var c={r:t,c:0},u=0;u<16;++u)if(!(e.s.c>u+1<<10||e.e.c<u<<10)){for(var h=-1,f=-1,g=u<<10;g<u+1<<10;++g){c.c=g;var y=Array.isArray(n)?(n[c.r]||[])[c.c]:n[qr(c)];y&&(h<0&&(h=g),f=g)}h<0||(++a,r.write_shift(4,h),r.write_shift(4,f))}var _=r.l;return r.l=l,r.write_shift(4,a),r.l=_,r.length>r.l?r.slice(0,r.l):r}function ybt(t,e,n,r){var i=gbt(r,n,e);(i.length>17||(e["!rows"]||[])[r])&&tt(t,0,i)}var vbt=Mv,_bt=Gb;function xbt(){}function wbt(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=R_t(t),n}function bbt(t,e,n){n==null&&(n=Ue(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return k5({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),DEe(t,n),n.slice(0,n.l)}function Ebt(t){var e=wu(t);return[e]}function Sbt(t,e,n){return n==null&&(n=Ue(8)),Pv(e,n)}function Tbt(t){var e=Cv(t);return[e]}function kbt(t,e,n){return n==null&&(n=Ue(4)),Rv(e,n)}function Abt(t){var e=wu(t),n=t.read_shift(1);return[e,n,"b"]}function Ibt(t,e,n){return n==null&&(n=Ue(9)),Pv(e,n),n.write_shift(1,t.v?1:0),n}function Pbt(t){var e=Cv(t),n=t.read_shift(1);return[e,n,"b"]}function Cbt(t,e,n){return n==null&&(n=Ue(5)),Rv(e,n),n.write_shift(1,t.v?1:0),n}function Rbt(t){var e=wu(t),n=t.read_shift(1);return[e,n,"e"]}function Mbt(t,e,n){return n==null&&(n=Ue(9)),Pv(e,n),n.write_shift(1,t.v),n}function Nbt(t){var e=Cv(t),n=t.read_shift(1);return[e,n,"e"]}function Obt(t,e,n){return n==null&&(n=Ue(8)),Rv(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function Lbt(t){var e=wu(t),n=t.read_shift(4);return[e,n,"s"]}function Dbt(t,e,n){return n==null&&(n=Ue(12)),Pv(e,n),n.write_shift(4,e.v),n}function jbt(t){var e=Cv(t),n=t.read_shift(4);return[e,n,"s"]}function $bt(t,e,n){return n==null&&(n=Ue(8)),Rv(e,n),n.write_shift(4,e.v),n}function Fbt(t){var e=wu(t),n=Ub(t);return[e,n,"n"]}function Vbt(t,e,n){return n==null&&(n=Ue(16)),Pv(e,n),ov(t.v,n),n}function zbt(t){var e=Cv(t),n=Ub(t);return[e,n,"n"]}function Gbt(t,e,n){return n==null&&(n=Ue(12)),Rv(e,n),ov(t.v,n),n}function Ubt(t){var e=wu(t),n=jEe(t);return[e,n,"n"]}function Bbt(t,e,n){return n==null&&(n=Ue(12)),Pv(e,n),$Ee(t.v,n),n}function Wbt(t){var e=Cv(t),n=jEe(t);return[e,n,"n"]}function Hbt(t,e,n){return n==null&&(n=Ue(8)),Rv(e,n),$Ee(t.v,n),n}function qbt(t){var e=wu(t),n=eK(t);return[e,n,"is"]}function Kbt(t){var e=wu(t),n=ba(t);return[e,n,"str"]}function Ybt(t,e,n){return n==null&&(n=Ue(12+4*t.v.length)),Pv(e,n),mo(t.v,n),n.length>n.l?n.slice(0,n.l):n}function Xbt(t){var e=Cv(t),n=ba(t);return[e,n,"str"]}function Zbt(t,e,n){return n==null&&(n=Ue(8+4*t.v.length)),Rv(e,n),mo(t.v,n),n.length>n.l?n.slice(0,n.l):n}function Jbt(t,e,n){var r=t.l+e,i=wu(t);i.r=n["!row"];var s=t.read_shift(1),o=[i,s,"b"];if(n.cellFormula){t.l+=2;var a=nD(t,r-t.l,n);o[3]=tb(a,null,i,n.supbooks,n)}else t.l=r;return o}function Qbt(t,e,n){var r=t.l+e,i=wu(t);i.r=n["!row"];var s=t.read_shift(1),o=[i,s,"e"];if(n.cellFormula){t.l+=2;var a=nD(t,r-t.l,n);o[3]=tb(a,null,i,n.supbooks,n)}else t.l=r;return o}function eEt(t,e,n){var r=t.l+e,i=wu(t);i.r=n["!row"];var s=Ub(t),o=[i,s,"n"];if(n.cellFormula){t.l+=2;var a=nD(t,r-t.l,n);o[3]=tb(a,null,i,n.supbooks,n)}else t.l=r;return o}function tEt(t,e,n){var r=t.l+e,i=wu(t);i.r=n["!row"];var s=ba(t),o=[i,s,"str"];if(n.cellFormula){t.l+=2;var a=nD(t,r-t.l,n);o[3]=tb(a,null,i,n.supbooks,n)}else t.l=r;return o}var nEt=Mv,rEt=Gb;function iEt(t,e){return e==null&&(e=Ue(4)),e.write_shift(4,t),e}function sEt(t,e){var n=t.l+e,r=Mv(t),i=tK(t),s=ba(t),o=ba(t),a=ba(t);t.l=n;var l={rfx:r,relId:i,loc:s,display:a};return o&&(l.Tooltip=o),l}function oEt(t,e){var n=Ue(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Gb({s:po(t[0]),e:po(t[0])},n),nK("rId"+e,n);var r=t[1].Target.indexOf("#"),i=r==-1?"":t[1].Target.slice(r+1);return mo(i||"",n),mo(t[1].Tooltip||"",n),mo("",n),n.slice(0,n.l)}function aEt(){}function lEt(t,e,n){var r=t.l+e,i=FEe(t),s=t.read_shift(1),o=[i];if(o[2]=s,n.cellFormula){var a=X2t(t,r-t.l,n);o[1]=a}else t.l=r;return o}function cEt(t,e,n){var r=t.l+e,i=Mv(t),s=[i];if(n.cellFormula){var o=J2t(t,r-t.l,n);s[1]=o,t.l=r}else t.l=r;return s}function uEt(t,e,n){n==null&&(n=Ue(18));var r=rD(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),n.write_shift(2,i),n}var bSe=["left","right","top","bottom","header","footer"];function hEt(t){var e={};return bSe.forEach(function(n){e[n]=Ub(t)}),e}function dEt(t,e){return e==null&&(e=Ue(48)),xSe(t),bSe.forEach(function(n){ov(t[n],e)}),e}function fEt(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function pEt(t,e,n){n==null&&(n=Ue(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function mEt(t){var e=Ue(24);return e.write_shift(4,4),e.write_shift(4,1),Gb(t,e),e}function gEt(t,e){return e==null&&(e=Ue(66)),e.write_shift(2,t.password?rSe(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function yEt(){}function vEt(){}function _Et(t,e,n,r,i,s,o){if(e.v===void 0)return!1;var a="";switch(e.t){case"b":a=e.v?"1":"0";break;case"d":e=Nl(e),e.z=e.z||rs[14],e.v=Ml(Ua(e.v)),e.t="n";break;case"n":case"e":a=""+e.v;break;default:a=e.v;break}var l={r:n,c:r};switch(l.s=w0(i.cellXfs,e,i),e.l&&s["!links"].push([qr(l),e.l]),e.c&&s["!comments"].push([qr(l),e.c]),e.t){case"s":case"str":return i.bookSST?(a=lK(i.Strings,e.v,i.revStrings),l.t="s",l.v=a,o?tt(t,18,$bt(e,l)):tt(t,7,Dbt(e,l))):(l.t="str",o?tt(t,17,Zbt(e,l)):tt(t,6,Ybt(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?tt(t,13,Hbt(e,l)):tt(t,2,Bbt(e,l)):o?tt(t,16,Gbt(e,l)):tt(t,5,Vbt(e,l)),!0;case"b":return l.t="b",o?tt(t,15,Cbt(e,l)):tt(t,4,Ibt(e,l)),!0;case"e":return l.t="e",o?tt(t,14,Obt(e,l)):tt(t,3,Mbt(e,l)),!0}return o?tt(t,12,kbt(e,l)):tt(t,1,Sbt(e,l)),!0}function xEt(t,e,n,r){var i=vi(e["!ref"]||"A1"),s,o="",a=[];tt(t,145);var l=Array.isArray(e),c=i.e.r;e["!rows"]&&(c=Math.max(i.e.r,e["!rows"].length-1));for(var u=i.s.r;u<=c;++u){o=Do(u),ybt(t,e,i,u);var h=!1;if(u<=i.e.r)for(var f=i.s.c;f<=i.e.c;++f){u===i.s.r&&(a[f]=wa(f)),s=a[f]+o;var g=l?(e[u]||[])[f]:e[s];if(!g){h=!1;continue}h=_Et(t,g,u,f,r,e,h)}}tt(t,146)}function wEt(t,e){!e||!e["!merges"]||(tt(t,177,iEt(e["!merges"].length)),e["!merges"].forEach(function(n){tt(t,176,rEt(n))}),tt(t,178))}function bEt(t,e){!e||!e["!cols"]||(tt(t,390),e["!cols"].forEach(function(n,r){n&&tt(t,60,uEt(r,n))}),tt(t,391))}function EEt(t,e){!e||!e["!ref"]||(tt(t,648),tt(t,649,mEt(vi(e["!ref"]))),tt(t,650))}function SEt(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var i=Gr(n,-1,r[1].Target.replace(/#.*$/,""),wr.HLINK);tt(t,494,oEt(r,i))}}),delete e["!links"]}function TEt(t,e,n,r){if(e["!comments"].length>0){var i=Gr(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",wr.VML);tt(t,551,nK("rId"+i)),e["!legacy"]=i}}function kEt(t,e,n,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Ls(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var o=n.Workbook.Names,a=kc(s);a.s.r==a.e.r&&(a.e.r=kc(e["!ref"]).e.r,s=Ls(a));for(var l=0;l<o.length;++l){var c=o[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+s;break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),tt(t,161,Gb(vi(s))),tt(t,162)}}function AEt(t,e,n){tt(t,133),tt(t,137,pEt(e,n)),tt(t,138),tt(t,134)}function IEt(t,e){e["!protect"]&&tt(t,535,gEt(e["!protect"]))}function PEt(t,e,n,r){var i=Il(),s=n.SheetNames[t],o=n.Sheets[s]||{},a=s;try{n&&n.Workbook&&(a=n.Workbook.Sheets[t].CodeName||a)}catch{}var l=vi(o["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],tt(i,129),(n.vbaraw||o["!outline"])&&tt(i,147,bbt(a,o["!outline"])),tt(i,148,_bt(l)),AEt(i,o,n.Workbook),bEt(i,o),xEt(i,o,t,e),IEt(i,o),kEt(i,o,n,t),wEt(i,o),SEt(i,o,r),o["!margins"]&&tt(i,476,dEt(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&EEt(i,o),TEt(i,o,t,r),tt(i,130),i.end()}function CEt(t,e){t.l+=10;var n=ba(t);return{name:n}}var REt=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function MEt(t){return!t.Workbook||!t.Workbook.WBProps?"false":c_t(t.Workbook.WBProps.date1904)?"true":"false"}var NEt="][*?/\\".split("");function ESe(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return NEt.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function OEt(t,e,n){t.forEach(function(r,i){ESe(r);for(var s=0;s<i;++s)if(r==t[s])throw new Error("Duplicate Sheet Name: "+r);if(n){var o=e&&e[i]&&e[i].CodeName||r;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function LEt(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];OEt(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)rbt(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n)}function SSe(t){var e=[Ds];e[e.length]=_t("workbook",null,{xmlns:Vb[0],"xmlns:r":ho.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(REt.forEach(function(a){t.Workbook.WBProps[a[0]]!=null&&t.Workbook.WBProps[a[0]]!=a[1]&&(r[a[0]]=t.Workbook.WBProps[a[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=_t("workbookPr",null,r);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:Wr(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=_t("sheet",null,o)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(a){var l={name:a.Name};a.Comment&&(l.comment=a.Comment),a.Sheet!=null&&(l.localSheetId=""+a.Sheet),a.Hidden&&(l.hidden="1"),a.Ref&&(e[e.length]=_t("definedName",Wr(a.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function DEt(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=oG(t),n.name=ba(t),n}function jEt(t,e){return e||(e=Ue(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),nK(t.strRelID,e),mo(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function $Et(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var i=e>8?ba(t):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function FEt(t,e){e||(e=Ue(72));var n=0;return t&&t.filterPrivacy&&(n|=8),e.write_shift(4,n),e.write_shift(4,0),DEe(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function VEt(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),s=M_t(t),o=Z2t(t,0,n),a=tK(t);t.l=r;var l={Name:s,Ptg:o};return i<268435455&&(l.Sheet=i),a&&(l.Comment=a),l}function zEt(t,e){tt(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,i={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};tt(t,156,jEt(i))}tt(t,144)}function GEt(t,e){e||(e=Ue(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return mo("SheetJS",e),mo(v5.version,e),mo(v5.version,e),mo("7262",e),e.length>e.l?e.slice(0,e.l):e}function UEt(t,e){e||(e=Ue(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function BEt(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,i=-1,s=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&i==-1?i=r:n[r].Hidden==1&&s==-1&&(s=r);s>i||(tt(t,135),tt(t,158,UEt(i)),tt(t,136))}}function WEt(t,e){var n=Il();return tt(n,131),tt(n,128,GEt()),tt(n,153,FEt(t.Workbook&&t.Workbook.WBProps||null)),BEt(n,t),zEt(n,t),tt(n,132),n.end()}function HEt(t,e,n){return(e.slice(-4)===".bin"?WEt:SSe)(t)}function qEt(t,e,n,r,i){return(e.slice(-4)===".bin"?PEt:wSe)(t,n,r,i)}function KEt(t,e,n){return(e.slice(-4)===".bin"?dwt:oSe)(t,n)}function YEt(t,e,n){return(e.slice(-4)===".bin"?Fxt:nSe)(t,n)}function XEt(t,e,n){return(e.slice(-4)===".bin"?Iwt:hSe)(t)}function ZEt(t){return(t.slice(-4)===".bin"?xwt:cSe)()}function JEt(t,e){var n=[];return t.Props&&n.push(K_t(t.Props,e)),t.Custprops&&n.push(Y_t(t.Props,t.Custprops)),n.join("")}function QEt(){return""}function eSt(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(_t("NumberFormat",null,{"ss:Format":Wr(rs[r.numFmtId])}));var o={"ss:ID":"s"+(21+i)};n.push(_t("Style",s.join(""),o))}),_t("Styles",n.join(""))}function TSe(t){return _t("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+oK(t.Ref,{r:0,c:0})})}function tSt(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||n.push(TSe(i)))}return _t("Names",n.join(""))}function nSt(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],o=0;o<i.length;++o){var a=i[o];a.Sheet==n&&(a.Name.match(/^_xlfn\./)||s.push(TSe(a)))}return s.join("")}function rSt(t,e,n,r){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(_t("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(_t("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(_t("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(_t("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(Lo("ProtectContents","True")),t["!protect"].objects&&i.push(Lo("ProtectObjects","True")),t["!protect"].scenarios&&i.push(Lo("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(Lo("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(Lo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&i.push("<"+o[1]+"/>")})),i.length==0?"":_t("WorksheetOptions",i.join(""),{xmlns:lc.x})}function iSt(t){return t.map(function(e){var n=l_t(e.t||""),r=_t("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return _t("Comment",r,{"ss:Author":e.a})}).join("")}function sSt(t,e,n,r,i,s,o){if(!t||t.v==null&&t.f==null)return"";var a={};if(t.f&&(a["ss:Formula"]="="+Wr(oK(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var l=po(t.F.slice(e.length+1));a["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(t.l&&t.l.Target&&(a["ss:HRef"]=Wr(t.l.Target),t.l.Tooltip&&(a["x:HRefScreenTip"]=Wr(t.l.Tooltip))),n["!merges"])for(var c=n["!merges"],u=0;u!=c.length;++u)c[u].s.c!=o.c||c[u].s.r!=o.r||(c[u].e.c>c[u].s.c&&(a["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(a["ss:MergeDown"]=c[u].e.r-c[u].s.r));var h="",f="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",f=String(t.v);break;case"b":h="Boolean",f=t.v?"1":"0";break;case"e":h="Error",f=pP[t.v];break;case"d":h="DateTime",f=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||rs[14]);break;case"s":h="String",f=a_t(t.v||"");break}var g=w0(r.cellXfs,t,r);a["ss:StyleID"]="s"+(21+g),a["ss:Index"]=o.c+1;var y=t.v!=null?f:"",_=t.t=="z"?"":'<Data ss:Type="'+h+'">'+y+"</Data>";return(t.c||[]).length>0&&(_+=iSt(t.c)),_t("Cell",_,a)}function oSt(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=sSe(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function aSt(t,e,n,r){if(!t["!ref"])return"";var i=vi(t["!ref"]),s=t["!merges"]||[],o=0,a=[];t["!cols"]&&t["!cols"].forEach(function(b,T){iK(b);var A=!!b.width,I=rD(T,b),P={"ss:Index":T+1};A&&(P["ss:Width"]=I5(I.width)),b.hidden&&(P["ss:Hidden"]="1"),a.push(_t("Column",null,P))});for(var l=Array.isArray(t),c=i.s.r;c<=i.e.r;++c){for(var u=[oSt(c,(t["!rows"]||[])[c])],h=i.s.c;h<=i.e.c;++h){var f=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>h)&&!(s[o].s.r>c)&&!(s[o].e.c<h)&&!(s[o].e.r<c)){(s[o].s.c!=h||s[o].s.r!=c)&&(f=!0);break}if(!f){var g={r:c,c:h},y=qr(g),_=l?(t[c]||[])[h]:t[y];u.push(sSt(_,y,t,e,n,r,g))}}u.push("</Row>"),u.length>2&&a.push(u.join(""))}return a.join("")}function lSt(t,e,n){var r=[],i=n.SheetNames[t],s=n.Sheets[i],o=s?nSt(s,e,t,n):"";return o.length>0&&r.push("<Names>"+o+"</Names>"),o=s?aSt(s,e,t,n):"",o.length>0&&r.push("<Table>"+o+"</Table>"),r.push(rSt(s,e,t,n)),r.join("")}function cSt(t,e){e||(e={}),t.SSF||(t.SSF=Nl(rs)),t.SSF&&(JL(),ZL(t.SSF),e.revssf=QL(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],w0(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(JEt(t,e)),n.push(QEt()),n.push(""),n.push("");for(var r=0;r<t.SheetNames.length;++r)n.push(_t("Worksheet",lSt(r,e,t),{"ss:Name":Wr(t.SheetNames[r])}));return n[2]=eSt(t,e),n[3]=tSt(t),Ds+_t("Workbook",n.join(""),{xmlns:lc.ss,"xmlns:o":lc.o,"xmlns:x":lc.x,"xmlns:ss":lc.ss,"xmlns:dt":lc.dt,"xmlns:html":lc.html})}var kF={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function uSt(t,e){var n=[],r=[],i=[],s=0,o,a=lae(wae,"n"),l=lae(bae,"n");if(t.Props)for(o=$o(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(a,o[s])?n:Object.prototype.hasOwnProperty.call(l,o[s])?r:i).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=$o(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(a,o[s])?n:Object.prototype.hasOwnProperty.call(l,o[s])?r:i).push([o[s],t.Custprops[o[s]]]);var c=[];for(s=0;s<i.length;++s)YEe.indexOf(i[s][0])>-1||HEe.indexOf(i[s][0])>-1||i[s][1]!=null&&c.push(i[s]);r.length&&Xr.utils.cfb_add(e,"/SummaryInformation",Aae(r,kF.SI,l,bae)),(n.length||c.length)&&Xr.utils.cfb_add(e,"/DocumentSummaryInformation",Aae(n,kF.DSI,a,wae,c.length?c:null,kF.UDI))}function hSt(t,e){var n=e||{},r=Xr.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return Xr.utils.cfb_add(r,i,kSe(t,n)),n.biff==8&&(t.Props||t.Custprops)&&uSt(t,r),n.biff==8&&t.vbaraw&&Pwt(r,Xr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var dSt={0:{f:mbt},1:{f:Ebt},2:{f:Ubt},3:{f:Rbt},4:{f:Abt},5:{f:Fbt},6:{f:Kbt},7:{f:Lbt},8:{f:tEt},9:{f:eEt},10:{f:Jbt},11:{f:Qbt},12:{f:Tbt},13:{f:Wbt},14:{f:Nbt},15:{f:Pbt},16:{f:zbt},17:{f:Xbt},18:{f:jbt},19:{f:eK},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:VEt},40:{},42:{},43:{f:Kxt},44:{f:Hxt},45:{f:Zxt},46:{f:Qxt},47:{f:Jxt},48:{},49:{f:T_t},50:{},51:{f:mwt},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:kxt},62:{f:qbt},63:{f:wwt},64:{f:yEt},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:qd,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:fEt},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:wbt},148:{f:vbt,p:16},151:{f:aEt},152:{},153:{f:$Et},154:{},155:{},156:{f:DEt},157:{},158:{},159:{T:1,f:Dxt},160:{T:-1},161:{T:1,f:Mv},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:nEt},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:fwt},336:{T:-1},337:{f:vwt,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:oG},357:{},358:{},359:{},360:{T:1},361:{},362:{f:xxt},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:lEt},427:{f:cEt},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:hEt},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:xbt},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:sEt},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:oG},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:kwt},633:{T:1},634:{T:-1},635:{T:1,f:Swt},636:{T:-1},637:{f:P_t},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:CEt},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:vEt},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function bt(t,e,n,r){var i=e;if(!isNaN(i)){var s=r||(n||[]).length||0,o=t.next(4);o.write_shift(2,i),o.write_shift(2,s),s>0&&Zq(n)&&t.push(n)}}function fSt(t,e,n,r){var i=(n||[]).length||0;if(i<=8224)return bt(t,e,n,i);var s=e;if(!isNaN(s)){for(var o=n.parts||[],a=0,l=0,c=0;c+(o[a]||8224)<=8224;)c+=o[a]||8224,a++;var u=t.next(4);for(u.write_shift(2,s),u.write_shift(2,c),t.push(n.slice(l,l+c)),l+=c;l<i;){for(u=t.next(4),u.write_shift(2,60),c=0;c+(o[a]||8224)<=8224;)c+=o[a]||8224,a++;u.write_shift(2,c),t.push(n.slice(l,l+c)),l+=c}}}function gP(t,e,n){return t||(t=Ue(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function pSt(t,e,n,r){var i=Ue(9);return gP(i,t,e),ZEe(n,r||"b",i),i}function mSt(t,e,n){var r=Ue(8+2*n.length);return gP(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function gSt(t,e,n,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Ml(Ua(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?bt(t,2,Cxt(n,r,i)):bt(t,3,Pxt(n,r,i));return;case"b":case"e":bt(t,5,pSt(n,r,e.v,e.t));return;case"s":case"str":bt(t,4,mSt(n,r,(e.v||"").slice(0,255)));return}bt(t,1,gP(null,n,r))}function ySt(t,e,n,r){var i=Array.isArray(e),s=vi(e["!ref"]||"A1"),o,a="",l=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=Ls(s)}for(var c=s.s.r;c<=s.e.r;++c){a=Do(c);for(var u=s.s.c;u<=s.e.c;++u){c===s.s.r&&(l[u]=wa(u)),o=l[u]+a;var h=i?(e[c]||[])[u]:e[o];h&&gSt(t,h,c,u)}}}function vSt(t,e){for(var n=e||{},r=Il(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==n.sheet&&(i=s);if(i==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return bt(r,n.biff==4?1033:n.biff==3?521:9,rK(t,16,n)),ySt(r,t.Sheets[t.SheetNames[i]],i,n),bt(r,10),r.end()}function _St(t,e,n){bt(t,49,dxt({sz:12,name:"Arial"},n))}function xSt(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&bt(t,1054,mxt(i,e[i],n))})}function wSt(t,e){var n=Ue(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),bt(t,2151,n),n=Ue(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),eSe(vi(e["!ref"]||"A1"),n),n.write_shift(4,4),bt(t,2152,n)}function bSt(t,e){for(var n=0;n<16;++n)bt(t,224,Pae({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){bt(t,224,Pae(r,0,e))})}function ESt(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];bt(t,440,Ext(r)),r[1].Tooltip&&bt(t,2048,Sxt(r))}delete e["!links"]}function SSt(t,e){if(e){var n=0;e.forEach(function(r,i){++n<=256&&r&&bt(t,125,Axt(rD(i,r),i))})}}function TSt(t,e,n,r,i){var s=16+w0(i.cellXfs,e,i);if(e.v==null&&!e.bf){bt(t,513,av(n,r,s));return}if(e.bf)bt(t,6,Y2t(e,n,r,i,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?Ml(Ua(e.v)):e.v;bt(t,515,_xt(n,r,o,s));break;case"b":case"e":bt(t,517,vxt(n,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var a=lK(i.Strings,e.v,i.revStrings);bt(t,253,fxt(n,r,a,s))}else bt(t,516,pxt(n,r,(e.v||"").slice(0,255),s,i));break;default:bt(t,513,av(n,r,s))}}function kSt(t,e,n){var r=Il(),i=n.SheetNames[t],s=n.Sheets[i]||{},o=(n||{}).Workbook||{},a=(o.Sheets||[])[t]||{},l=Array.isArray(s),c=e.biff==8,u,h="",f=[],g=vi(s["!ref"]||"A1"),y=c?65536:16384;if(g.e.c>255||g.e.r>=y){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,y-1)}bt(r,2057,rK(n,16,e)),bt(r,13,Jc(1)),bt(r,12,Jc(100)),bt(r,15,Oa(!0)),bt(r,17,Oa(!1)),bt(r,16,ov(.001)),bt(r,95,Oa(!0)),bt(r,42,Oa(!1)),bt(r,43,Oa(!1)),bt(r,130,Jc(1)),bt(r,128,yxt()),bt(r,131,Oa(!1)),bt(r,132,Oa(!1)),c&&SSt(r,s["!cols"]),bt(r,512,gxt(g,e)),c&&(s["!links"]=[]);for(var _=g.s.r;_<=g.e.r;++_){h=Do(_);for(var b=g.s.c;b<=g.e.c;++b){_===g.s.r&&(f[b]=wa(b)),u=f[b]+h;var T=l?(s[_]||[])[b]:s[u];T&&(TSt(r,T,_,b,e),c&&T.l&&s["!links"].push([u,T.l]))}}var A=a.CodeName||a.name||i;return c&&bt(r,574,hxt((o.Views||[])[0])),c&&(s["!merges"]||[]).length&&bt(r,229,bxt(s["!merges"])),c&&ESt(r,s),bt(r,442,QEe(A)),c&&wSt(r,s),bt(r,10),r.end()}function ASt(t,e,n){var r=Il(),i=(t||{}).Workbook||{},s=i.Sheets||[],o=i.WBProps||{},a=n.biff==8,l=n.biff==5;if(bt(r,2057,rK(t,5,n)),n.bookType=="xla"&&bt(r,135),bt(r,225,a?Jc(1200):null),bt(r,193,J_t(2)),l&&bt(r,191),l&&bt(r,192),bt(r,226),bt(r,92,axt("SheetJS",n)),bt(r,66,Jc(a?1200:1252)),a&&bt(r,353,Jc(0)),a&&bt(r,448),bt(r,317,Ixt(t.SheetNames.length)),a&&t.vbaraw&&bt(r,211),a&&t.vbaraw){var c=o.CodeName||"ThisWorkbook";bt(r,442,QEe(c))}bt(r,156,Jc(17)),bt(r,25,Oa(!1)),bt(r,18,Oa(!1)),bt(r,19,Jc(0)),a&&bt(r,431,Oa(!1)),a&&bt(r,444,Jc(0)),bt(r,61,uxt()),bt(r,64,Oa(!1)),bt(r,141,Jc(0)),bt(r,34,Oa(MEt(t)=="true")),bt(r,14,Oa(!0)),a&&bt(r,439,Oa(!1)),bt(r,218,Jc(0)),_St(r,t,n),xSt(r,t.SSF,n),bSt(r,n),a&&bt(r,352,Oa(!1));var u=r.end(),h=Il();a&&bt(h,140,Txt()),a&&n.Strings&&fSt(h,252,cxt(n.Strings)),bt(h,10);var f=h.end(),g=Il(),y=0,_=0;for(_=0;_<t.SheetNames.length;++_)y+=(a?12:11)+(a?2:1)*t.SheetNames[_].length;var b=u.length+y+f.length;for(_=0;_<t.SheetNames.length;++_){var T=s[_]||{};bt(g,133,lxt({pos:b,hs:T.Hidden||0,dt:0,name:t.SheetNames[_]},n)),b+=e[_].length}var A=g.end();if(y!=A.length)throw new Error("BS8 "+y+" != "+A.length);var I=[];return u.length&&I.push(u),A.length&&I.push(A),f.length&&I.push(f),Oo(I)}function ISt(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=Nl(rs)),t&&t.SSF&&(JL(),ZL(t.SSF),n.revssf=QL(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,cK(n),n.cellXfs=[],w0(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)r[r.length]=kSt(i,n,t);return r.unshift(ASt(t,r,n)),Oo(r)}function kSe(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var i=kc(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return ISt(t,e);case 4:case 3:case 2:return vSt(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function PSt(t,e,n,r){for(var i=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var a=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>n||i[c].s.c>o)&&!(i[c].e.r<n||i[c].e.c<o)){if(i[c].s.r<n||i[c].s.c<o){a=-1;break}a=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(a<0)){var u=qr({r:n,c:o}),h=r.dense?(t[n]||[])[o]:t[u],f=h&&h.v!=null&&(h.h||o_t(h.w||(Cp(h),h.w)||""))||"",g={};a>1&&(g.rowspan=a),l>1&&(g.colspan=l),r.editable?f='<span contenteditable="true">'+f+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+h.l.Target+'">'+f+"</a>")),g.id=(r.id||"sjs")+"-"+u,s.push(_t("td",f,g))}}var y="<tr>";return y+s.join("")+"</tr>"}var CSt='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',RSt="</body></html>";function MSt(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function ASe(t,e){var n=e||{},r=n.header!=null?n.header:CSt,i=n.footer!=null?n.footer:RSt,s=[r],o=kc(t["!ref"]);n.dense=Array.isArray(t),s.push(MSt(t,o,n));for(var a=o.s.r;a<=o.e.r;++a)s.push(PSt(t,o,a,n));return s.push("</table>"+i),s.join("")}function ISe(t,e,n){var r=n||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var o=typeof r.origin=="string"?po(r.origin):r.origin;i=o.r,s=o.c}var a=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,a.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(t["!ref"]){var u=kc(t["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),i==-1&&(c.e.r=i=u.e.r+1)}var h=[],f=0,g=t["!rows"]||(t["!rows"]=[]),y=0,_=0,b=0,T=0,A=0,I=0;for(t["!cols"]||(t["!cols"]=[]);y<a.length&&_<l;++y){var P=a[y];if(Dae(P)){if(r.display)continue;g[_]={hidden:!0}}var M=P.children;for(b=T=0;b<M.length;++b){var V=M[b];if(!(r.display&&Dae(V))){var C=V.hasAttribute("data-v")?V.getAttribute("data-v"):V.hasAttribute("v")?V.getAttribute("v"):u_t(V.innerHTML),N=V.getAttribute("data-z")||V.getAttribute("z");for(f=0;f<h.length;++f){var O=h[f];O.s.c==T+s&&O.s.r<_+i&&_+i<=O.e.r&&(T=O.e.c+1-s,f=-1)}I=+V.getAttribute("colspan")||1,((A=+V.getAttribute("rowspan")||1)>1||I>1)&&h.push({s:{r:_+i,c:T+s},e:{r:_+i+(A||1)-1,c:T+s+(I||1)-1}});var L={t:"s",v:C},F=V.getAttribute("data-t")||V.getAttribute("t")||"";C!=null&&(C.length==0?L.t=F||"z":r.raw||C.trim().length==0||F=="s"||(C==="TRUE"?L={t:"b",v:!0}:C==="FALSE"?L={t:"b",v:!1}:isNaN(yp(C))?isNaN(GA(C).getDate())||(L={t:"d",v:Ua(C)},r.cellDates||(L={t:"n",v:Ml(L.v)}),L.z=r.dateNF||rs[14]):L={t:"n",v:yp(C)})),L.z===void 0&&N!=null&&(L.z=N);var G="",U=V.getElementsByTagName("A");if(U&&U.length)for(var he=0;he<U.length&&!(U[he].hasAttribute("href")&&(G=U[he].getAttribute("href"),G.charAt(0)!="#"));++he);G&&G.charAt(0)!="#"&&(L.l={Target:G}),r.dense?(t[_+i]||(t[_+i]=[]),t[_+i][T+s]=L):t[qr({c:T+s,r:_+i})]=L,c.e.c<T+s&&(c.e.c=T+s),T+=I}}++_}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),c.e.r=Math.max(c.e.r,_-1+i),t["!ref"]=Ls(c),_>=l&&(t["!fullref"]=Ls((c.e.r=a.length-y+_-1+i,c))),t}function PSe(t,e){var n=e||{},r=n.dense?[]:{};return ISe(r,t,e)}function NSt(t,e){return Iv(PSe(t,e),e)}function Dae(t){var e="",n=OSt(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function OSt(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var LSt=(function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+BA({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Ds+e}})(),jae=(function(){var t=function(s){return Wr(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,r=function(s,o,a){var l=[];l.push('      <table:table table:name="'+Wr(o.SheetNames[a])+`" table:style-name="ta1">
`);var c=0,u=0,h=kc(s["!ref"]||"A1"),f=s["!merges"]||[],g=0,y=Array.isArray(s);if(s["!cols"])for(u=0;u<=h.e.c;++u)l.push("        <table:table-column"+(s["!cols"][u]?' table:style-name="co'+s["!cols"][u].ods+'"':"")+`></table:table-column>
`);var _="",b=s["!rows"]||[];for(c=0;c<h.s.r;++c)_=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+_+`></table:table-row>
`);for(;c<=h.e.r;++c){for(_=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+_+`>
`),u=0;u<h.s.c;++u)l.push(e);for(;u<=h.e.c;++u){var T=!1,A={},I="";for(g=0;g!=f.length;++g)if(!(f[g].s.c>u)&&!(f[g].s.r>c)&&!(f[g].e.c<u)&&!(f[g].e.r<c)){(f[g].s.c!=u||f[g].s.r!=c)&&(T=!0),A["table:number-columns-spanned"]=f[g].e.c-f[g].s.c+1,A["table:number-rows-spanned"]=f[g].e.r-f[g].s.r+1;break}if(T){l.push(n);continue}var P=qr({r:c,c:u}),M=y?(s[c]||[])[u]:s[P];if(M&&M.f&&(A["table:formula"]=Wr(tbt(M.f)),M.F&&M.F.slice(0,P.length)==P)){var V=kc(M.F);A["table:number-matrix-columns-spanned"]=V.e.c-V.s.c+1,A["table:number-matrix-rows-spanned"]=V.e.r-V.s.r+1}if(!M){l.push(e);continue}switch(M.t){case"b":I=M.v?"TRUE":"FALSE",A["office:value-type"]="boolean",A["office:boolean-value"]=M.v?"true":"false";break;case"n":I=M.w||String(M.v||0),A["office:value-type"]="float",A["office:value"]=M.v||0;break;case"s":case"str":I=M.v==null?"":M.v,A["office:value-type"]="string";break;case"d":I=M.w||Ua(M.v).toISOString(),A["office:value-type"]="date",A["office:date-value"]=Ua(M.v).toISOString(),A["table:style-name"]="ce1";break;default:l.push(e);continue}var C=t(I);if(M.l&&M.l.Target){var N=M.l.Target;N=N.charAt(0)=="#"?"#"+nbt(N.slice(1)):N,N.charAt(0)!="#"&&!N.match(/^\w+:/)&&(N="../"+N),C=_t("text:a",C,{"xlink:href":N.replace(/&/g,"&amp;")})}l.push("          "+_t("table:table-cell",_t("text:p",C,{}),A)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var a=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var u=0;u<c["!cols"].length;++u)if(c["!cols"][u]){var h=c["!cols"][u];if(h.width==null&&h.wpx==null&&h.wch==null)continue;iK(h),h.ods=a;var f=c["!cols"][u].wpx+"px";s.push('  <style:style style:name="co'+a+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+f+`"/>
`),s.push(`  </style:style>
`),++a}}});var l=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var u=0;u<c["!rows"].length;++u)if(c["!rows"][u]){c["!rows"][u].ods=l;var h=c["!rows"][u].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,a){var l=[Ds],c=BA({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=BA({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});a.bookType=="fods"?(l.push("<office:document"+c+u+`>
`),l.push(BEe().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),i(l,o),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=o.SheetNames.length;++h)l.push(r(o.Sheets[o.SheetNames[h]],o,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),a.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function CSe(t,e){if(e.bookType=="fods")return jae(t,e);var n=qq(),r="",i=[],s=[];return r="mimetype",Un(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",Un(n,r,jae(t,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",Un(n,r,LSt(t,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",Un(n,r,Ds+BEe()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",Un(n,r,q_t(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",Un(n,r,W_t(i)),n}function R5(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function DSt(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):sh(UA(t))}function jSt(t,e){e:for(var n=0;n<=t.length-e.length;++n){for(var r=0;r<e.length;++r)if(t[n+r]!=e[r])continue e;return!0}return!1}function l0(t){var e=t.reduce(function(i,s){return i+s.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(i){n.set(i,r),r+=i.length}),n}function $St(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,i=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=n>=0?0:128}function WA(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function zr(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e.slice(0,n)}function Ow(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function zs(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],i=WA(t,n),s=i&7;i=Math.floor(i/8);var o=0,a;if(i==0)break;switch(s){case 0:{for(var l=n[0];t[n[0]++]>=128;);a=t.slice(l,n[0])}break;case 5:o=4,a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=WA(t,n),a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var c={data:a,type:s};e[i]==null?e[i]=[c]:e[i].push(c)}return e}function ko(t){var e=[];return t.forEach(function(n,r){n.forEach(function(i){i.data&&(e.push(zr(r*8+i.type)),i.type==2&&e.push(zr(i.data.length)),e.push(i.data))})}),l0(e)}function Vu(t){for(var e,n=[],r=[0];r[0]<t.length;){var i=WA(t,r),s=zs(t.slice(r[0],r[0]+i));r[0]+=i;var o={id:Ow(s[1][0].data),messages:[]};s[2].forEach(function(a){var l=zs(a.data),c=Ow(l[3][0].data);o.messages.push({meta:l,data:t.slice(r[0],r[0]+c)}),r[0]+=c}),(e=s[3])!=null&&e[0]&&(o.merge=Ow(s[3][0].data)>>>0>0),n.push(o)}return n}function G_(t){var e=[];return t.forEach(function(n){var r=[];r[1]=[{data:zr(n.id),type:0}],r[2]=[],n.merge!=null&&(r[3]=[{data:zr(+!!n.merge),type:0}]);var i=[];n.messages.forEach(function(o){i.push(o.data),o.meta[3]=[{type:0,data:zr(o.data.length)}],r[2].push({data:ko(o.meta),type:2})});var s=ko(r);e.push(zr(s.length)),e.push(s),i.forEach(function(o){return e.push(o)})}),l0(e)}function FSt(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=WA(e,n),i=[];n[0]<e.length;){var s=e[n[0]]&3;if(s==0){var o=e[n[0]++]>>2;if(o<60)++o;else{var a=o-59;o=e[n[0]],a>1&&(o|=e[n[0]+1]<<8),a>2&&(o|=e[n[0]+2]<<16),a>3&&(o|=e[n[0]+3]<<24),o>>>=0,o++,n[0]+=a}i.push(e.slice(n[0],n[0]+o)),n[0]+=o;continue}else{var l=0,c=0;if(s==1?(c=(e[n[0]]>>2&7)+4,l=(e[n[0]++]&224)<<3,l|=e[n[0]++]):(c=(e[n[0]++]>>2)+1,s==2?(l=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(l=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),i=[l0(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var u=l0(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function zu(t){for(var e=[],n=0;n<t.length;){var r=t[n++],i=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(FSt(r,t.slice(n,n+i))),n+=i}if(n!==t.length)throw new Error("data is not a valid framed stream!");return l0(e)}function U_(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),i=new Uint8Array(4);e.push(i);var s=zr(r),o=s.length;e.push(s),r<=60?(o++,e.push(new Uint8Array([r-1<<2]))):r<=256?(o+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(o+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(o+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(o+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t.slice(n,n+r)),o+=r,i[0]=0,i[1]=o&255,i[2]=o>>8&255,i[3]=o>>16&255,n+=r}return l0(e)}function AF(t,e){var n=new Uint8Array(32),r=R5(n),i=12,s=0;switch(n[0]=5,t.t){case"n":n[1]=2,$St(n,i,t.v),s|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[1]=3,r.setUint32(i,e.indexOf(t.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,s,!0),n.slice(0,i)}function IF(t,e){var n=new Uint8Array(32),r=R5(n),i=12,s=0;switch(n[0]=3,t.t){case"n":n[2]=2,r.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":n[2]=6,r.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[2]=3,r.setUint32(i,e.indexOf(t.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,s,!0),n.slice(0,i)}function Tm(t){var e=zs(t);return WA(e[1][0].data)}function VSt(t,e,n){var r,i,s,o;if(!((r=t[6])!=null&&r[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var a=((o=(s=t[8])==null?void 0:s[0])==null?void 0:o.data)&&Ow(t[8][0].data)>0||!1;if(a)throw"Math only works with normal offsets";for(var l=0,c=R5(t[7][0].data),u=0,h=[],f=R5(t[4][0].data),g=0,y=[],_=0;_<e.length;++_){if(e[_]==null){c.setUint16(_*2,65535,!0),f.setUint16(_*2,65535);continue}c.setUint16(_*2,u,!0),f.setUint16(_*2,g,!0);var b,T;switch(typeof e[_]){case"string":b=AF({t:"s",v:e[_]},n),T=IF({t:"s",v:e[_]},n);break;case"number":b=AF({t:"n",v:e[_]},n),T=IF({t:"n",v:e[_]},n);break;case"boolean":b=AF({t:"b",v:e[_]},n),T=IF({t:"b",v:e[_]},n);break;default:throw new Error("Unsupported value "+e[_])}h.push(b),u+=b.length,y.push(T),g+=T.length,++l}for(t[2][0].data=zr(l);_<t[7][0].data.length/2;++_)c.setUint16(_*2,65535,!0),f.setUint16(_*2,65535,!0);return t[6][0].data=l0(h),t[3][0].data=l0(y),l}function zSt(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=kc(n["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Ls(r)));var s=M5(n,{range:r,header:1}),o=["~Sh33tJ5~"];s.forEach(function(ne){return ne.forEach(function(ie){typeof ie=="string"&&o.push(ie)})});var a={},l=[],c=Xr.read(e.numbers,{type:"base64"});c.FileIndex.map(function(ne,ie){return[ne,c.FullPaths[ie]]}).forEach(function(ne){var ie=ne[0],le=ne[1];if(ie.type==2&&ie.name.match(/\.iwa/)){var xe=ie.content,qe=zu(xe),Ke=Vu(qe);Ke.forEach(function(ke){l.push(ke.id),a[ke.id]={deps:[],location:le,type:Ow(ke.messages[0].meta[1][0].data)}})}}),l.sort(function(ne,ie){return ne-ie});var u=l.filter(function(ne){return ne>1}).map(function(ne){return[ne,zr(ne)]});c.FileIndex.map(function(ne,ie){return[ne,c.FullPaths[ie]]}).forEach(function(ne){var ie=ne[0];if(ne[1],!!ie.name.match(/\.iwa/)){var le=Vu(zu(ie.content));le.forEach(function(xe){xe.messages.forEach(function(qe){u.forEach(function(Ke){xe.messages.some(function(ke){return Ow(ke.meta[1][0].data)!=11006&&jSt(ke.data,Ke[1])})&&a[Ke[0]].deps.push(xe.id)})})})}});for(var h=Xr.find(c,a[1].location),f=Vu(zu(h.content)),g,y=0;y<f.length;++y){var _=f[y];_.id==1&&(g=_)}var b=Tm(zs(g.messages[0].data)[1][0].data);for(h=Xr.find(c,a[b].location),f=Vu(zu(h.content)),y=0;y<f.length;++y)_=f[y],_.id==b&&(g=_);for(b=Tm(zs(g.messages[0].data)[2][0].data),h=Xr.find(c,a[b].location),f=Vu(zu(h.content)),y=0;y<f.length;++y)_=f[y],_.id==b&&(g=_);for(b=Tm(zs(g.messages[0].data)[2][0].data),h=Xr.find(c,a[b].location),f=Vu(zu(h.content)),y=0;y<f.length;++y)_=f[y],_.id==b&&(g=_);var T=zs(g.messages[0].data);{T[6][0].data=zr(r.e.r+1),T[7][0].data=zr(r.e.c+1);var A=Tm(T[46][0].data),I=Xr.find(c,a[A].location),P=Vu(zu(I.content));{for(var M=0;M<P.length&&P[M].id!=A;++M);if(P[M].id!=A)throw"Bad ColumnRowUIDMapArchive";var V=zs(P[M].messages[0].data);V[1]=[],V[2]=[],V[3]=[];for(var C=0;C<=r.e.c;++C){var N=[];N[1]=N[2]=[{type:0,data:zr(C+420690)}],V[1].push({type:2,data:ko(N)}),V[2].push({type:0,data:zr(C)}),V[3].push({type:0,data:zr(C)})}V[4]=[],V[5]=[],V[6]=[];for(var O=0;O<=r.e.r;++O)N=[],N[1]=N[2]=[{type:0,data:zr(O+726270)}],V[4].push({type:2,data:ko(N)}),V[5].push({type:0,data:zr(O)}),V[6].push({type:0,data:zr(O)});P[M].messages[0].data=ko(V)}I.content=U_(G_(P)),I.size=I.content.length,delete T[46];var L=zs(T[4][0].data);{L[7][0].data=zr(r.e.r+1);var F=zs(L[1][0].data),G=Tm(F[2][0].data);I=Xr.find(c,a[G].location),P=Vu(zu(I.content));{if(P[0].id!=G)throw"Bad HeaderStorageBucket";var U=zs(P[0].messages[0].data);for(O=0;O<s.length;++O){var he=zs(U[2][0].data);he[1][0].data=zr(O),he[4][0].data=zr(s[O].length),U[2][O]={type:U[2][0].type,data:ko(he)}}P[0].messages[0].data=ko(U)}I.content=U_(G_(P)),I.size=I.content.length;var Ie=Tm(L[2][0].data);I=Xr.find(c,a[Ie].location),P=Vu(zu(I.content));{if(P[0].id!=Ie)throw"Bad HeaderStorageBucket";for(U=zs(P[0].messages[0].data),C=0;C<=r.e.c;++C)he=zs(U[2][0].data),he[1][0].data=zr(C),he[4][0].data=zr(r.e.r+1),U[2][C]={type:U[2][0].type,data:ko(he)};P[0].messages[0].data=ko(U)}I.content=U_(G_(P)),I.size=I.content.length;var ze=Tm(L[4][0].data);(function(){for(var ne=Xr.find(c,a[ze].location),ie=Vu(zu(ne.content)),le,xe=0;xe<ie.length;++xe){var qe=ie[xe];qe.id==ze&&(le=qe)}var Ke=zs(le.messages[0].data);{Ke[3]=[];var ke=[];o.forEach(function(Ye,cn){ke[1]=[{type:0,data:zr(cn)}],ke[2]=[{type:0,data:zr(1)}],ke[3]=[{type:2,data:DSt(Ye)}],Ke[3].push({type:2,data:ko(ke)})})}le.messages[0].data=ko(Ke);var be=G_(ie),Dt=U_(be);ne.content=Dt,ne.size=ne.content.length})();var Oe=zs(L[3][0].data);{var fe=Oe[1][0];delete Oe[2];var ge=zs(fe.data);{var Se=Tm(ge[2][0].data);(function(){for(var ne=Xr.find(c,a[Se].location),ie=Vu(zu(ne.content)),le,xe=0;xe<ie.length;++xe){var qe=ie[xe];qe.id==Se&&(le=qe)}var Ke=zs(le.messages[0].data);{delete Ke[6],delete Oe[7];var ke=new Uint8Array(Ke[5][0].data);Ke[5]=[];for(var be=0,Dt=0;Dt<=r.e.r;++Dt){var Ye=zs(ke);be+=VSt(Ye,s[Dt],o),Ye[1][0].data=zr(Dt),Ke[5].push({data:ko(Ye),type:2})}Ke[1]=[{type:0,data:zr(r.e.c+1)}],Ke[2]=[{type:0,data:zr(r.e.r+1)}],Ke[3]=[{type:0,data:zr(be)}],Ke[4]=[{type:0,data:zr(r.e.r+1)}]}le.messages[0].data=ko(Ke);var cn=G_(ie),jt=U_(cn);ne.content=jt,ne.size=ne.content.length})()}fe.data=ko(ge)}L[3][0].data=ko(Oe)}T[4][0].data=ko(L)}g.messages[0].data=ko(T);var Z=G_(f),W=U_(Z);return h.content=W,h.size=h.content.length,c}function GSt(t){return function(n){for(var r=0;r!=t.length;++r){var i=t[r];n[i[0]]===void 0&&(n[i[0]]=i[1]),i[2]==="n"&&(n[i[0]]=Number(n[i[0]]))}}}function cK(t){GSt([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function USt(t,e){return e.bookType=="ods"?CSe(t,e):e.bookType=="numbers"?zSt(t,e):e.bookType=="xlsb"?BSt(t,e):WSt(t,e)}function BSt(t,e){Zx=1024,t&&!t.SSF&&(t.SSF=Nl(rs)),t&&t.SSF&&(JL(),ZL(t.SSF),e.revssf=QL(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,yk?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n=e.bookType=="xlsb"?"bin":"xml",r=dSe.indexOf(e.bookType)>-1,i=zEe();cK(e=e||{});var s=qq(),o="",a=0;if(e.cellXfs=[],w0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Un(s,o,WEe(t.Props,e)),i.coreprops.push(o),Gr(e.rels,2,o,wr.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Un(s,o,qEe(t.Props)),i.extprops.push(o),Gr(e.rels,3,o,wr.EXT_PROPS),t.Custprops!==t.Props&&$o(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Un(s,o,KEe(t.Custprops)),i.custprops.push(o),Gr(e.rels,4,o,wr.CUST_PROPS)),a=1;a<=t.SheetNames.length;++a){var u={"!id":{}},h=t.Sheets[t.SheetNames[a-1]],f=(h||{})["!type"]||"sheet";switch(f){case"chart":default:o="xl/worksheets/sheet"+a+"."+n,Un(s,o,qEt(a-1,o,e,t,u)),i.sheets.push(o),Gr(e.wbrels,-1,"worksheets/sheet"+a+"."+n,wr.WS[0])}if(h){var g=h["!comments"],y=!1,_="";g&&g.length>0&&(_="xl/comments"+a+"."+n,Un(s,_,XEt(g,_)),i.comments.push(_),Gr(u,-1,"../comments"+a+"."+n,wr.CMNT),y=!0),h["!legacy"]&&y&&Un(s,"xl/drawings/vmlDrawing"+a+".vml",uSe(a,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&Un(s,UEe(o),Mw(u))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,Un(s,o,YEt(e.Strings,o,e)),i.strs.push(o),Gr(e.wbrels,-1,"sharedStrings."+n,wr.SST)),o="xl/workbook."+n,Un(s,o,HEt(t,o)),i.workbooks.push(o),Gr(e.rels,1,o,wr.WB),o="xl/theme/theme1.xml",Un(s,o,lSe(t.Themes,e)),i.themes.push(o),Gr(e.wbrels,-1,"theme/theme1.xml",wr.THEME),o="xl/styles."+n,Un(s,o,KEt(t,o,e)),i.styles.push(o),Gr(e.wbrels,-1,"styles."+n,wr.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",Un(s,o,t.vbaraw),i.vba.push(o),Gr(e.wbrels,-1,"vbaProject.bin",wr.VBA)),o="xl/metadata."+n,Un(s,o,ZEt(o)),i.metadata.push(o),Gr(e.wbrels,-1,"metadata."+n,wr.XLMETA),Un(s,"[Content_Types].xml",GEe(i,e)),Un(s,"_rels/.rels",Mw(e.rels)),Un(s,"xl/_rels/workbook."+n+".rels",Mw(e.wbrels)),delete e.revssf,delete e.ssf,s}function WSt(t,e){Zx=1024,t&&!t.SSF&&(t.SSF=Nl(rs)),t&&t.SSF&&(JL(),ZL(t.SSF),e.revssf=QL(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,yk?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=dSe.indexOf(e.bookType)>-1,i=zEe();cK(e=e||{});var s=qq(),o="",a=0;if(e.cellXfs=[],w0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Un(s,o,WEe(t.Props,e)),i.coreprops.push(o),Gr(e.rels,2,o,wr.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Un(s,o,qEe(t.Props)),i.extprops.push(o),Gr(e.rels,3,o,wr.EXT_PROPS),t.Custprops!==t.Props&&$o(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Un(s,o,KEe(t.Custprops)),i.custprops.push(o),Gr(e.rels,4,o,wr.CUST_PROPS));var u=["SheetJ5"];for(e.tcid=0,a=1;a<=t.SheetNames.length;++a){var h={"!id":{}},f=t.Sheets[t.SheetNames[a-1]],g=(f||{})["!type"]||"sheet";switch(g){case"chart":default:o="xl/worksheets/sheet"+a+"."+n,Un(s,o,wSe(a-1,e,t,h)),i.sheets.push(o),Gr(e.wbrels,-1,"worksheets/sheet"+a+"."+n,wr.WS[0])}if(f){var y=f["!comments"],_=!1,b="";if(y&&y.length>0){var T=!1;y.forEach(function(A){A[1].forEach(function(I){I.T==!0&&(T=!0)})}),T&&(b="xl/threadedComments/threadedComment"+a+"."+n,Un(s,b,bwt(y,u,e)),i.threadedcomments.push(b),Gr(h,-1,"../threadedComments/threadedComment"+a+"."+n,wr.TCMNT)),b="xl/comments"+a+"."+n,Un(s,b,hSe(y)),i.comments.push(b),Gr(h,-1,"../comments"+a+"."+n,wr.CMNT),_=!0}f["!legacy"]&&_&&Un(s,"xl/drawings/vmlDrawing"+a+".vml",uSe(a,f["!comments"])),delete f["!comments"],delete f["!legacy"]}h["!id"].rId1&&Un(s,UEe(o),Mw(h))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,Un(s,o,nSe(e.Strings,e)),i.strs.push(o),Gr(e.wbrels,-1,"sharedStrings."+n,wr.SST)),o="xl/workbook."+n,Un(s,o,SSe(t)),i.workbooks.push(o),Gr(e.rels,1,o,wr.WB),o="xl/theme/theme1.xml",Un(s,o,lSe(t.Themes,e)),i.themes.push(o),Gr(e.wbrels,-1,"theme/theme1.xml",wr.THEME),o="xl/styles."+n,Un(s,o,oSe(t,e)),i.styles.push(o),Gr(e.wbrels,-1,"styles."+n,wr.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",Un(s,o,t.vbaraw),i.vba.push(o),Gr(e.wbrels,-1,"vbaProject.bin",wr.VBA)),o="xl/metadata."+n,Un(s,o,cSe()),i.metadata.push(o),Gr(e.wbrels,-1,"metadata."+n,wr.XLMETA),u.length>1&&(o="xl/persons/person.xml",Un(s,o,Ewt(u)),i.people.push(o),Gr(e.wbrels,-1,"persons/person.xml",wr.PEOPLE)),Un(s,"[Content_Types].xml",GEe(i,e)),Un(s,"_rels/.rels",Mw(e.rels)),Un(s,"xl/_rels/workbook."+n+".rels",Mw(e.wbrels)),delete e.revssf,delete e.ssf,s}function HSt(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=Pp(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function RSe(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return dP(e.file,Xr.write(t,{type:Ar?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Xr.write(t,e)}function qSt(t,e){var n=Nl(e||{}),r=USt(t,n);return KSt(r,n)}function KSt(t,e){var n={},r=Ar?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?Xr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(XL(i))}return e.password&&typeof encrypt_agile<"u"?RSe(encrypt_agile(i,e.password),e):e.type==="file"?dP(e.file,i):e.type=="string"?fk(i):i}function YSt(t,e){var n=e||{},r=hSt(t,n);return RSe(r,n)}function od(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return zA(UA(r));case"binary":return UA(r);case"string":return t;case"file":return dP(e.file,r,"utf8");case"buffer":return Ar?$p(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):od(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function XSt(t,e){switch(e.type){case"base64":return zA(t);case"binary":return t;case"string":return t;case"file":return dP(e.file,t,"binary");case"buffer":return Ar?$p(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function KR(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?zA(n):e.type=="string"?fk(n):n;case"file":return dP(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function MSe(t,e){Svt(),LEt(t);var n=Nl(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=MSe(t,n);return n.type="array",XL(r)}var i=0;if(n.sheet&&(typeof n.sheet=="number"?i=n.sheet:i=t.SheetNames.indexOf(n.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return od(cSt(t,n),n);case"slk":case"sylk":return od(Mxt.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"htm":case"html":return od(ASe(t.Sheets[t.SheetNames[i]],n),n);case"txt":return XSt(NSe(t.Sheets[t.SheetNames[i]],n),n);case"csv":return od(uK(t.Sheets[t.SheetNames[i]],n),n,"\uFEFF");case"dif":return od(Nxt.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"dbf":return KR(Rxt.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"prn":return od(Oxt.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"rtf":return od(zxt.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"eth":return od(tSe.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"fods":return od(CSe(t,n),n);case"wk1":return KR(Cae.sheet_to_wk1(t.Sheets[t.SheetNames[i]],n),n);case"wk3":return KR(Cae.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),KR(kSe(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),YSt(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return qSt(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function ZSt(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function JSt(t,e,n){var r={};return r.type="file",r.file=e,ZSt(r),MSe(t,r)}function QSt(t,e,n,r,i,s,o,a){var l=Do(n),c=a.defval,u=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),h=!0,f=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:n,enumerable:!1})}catch{f.__rowNum__=n}else f.__rowNum__=n;if(!o||t[n])for(var g=e.s.c;g<=e.e.c;++g){var y=o?t[n][g]:t[r[g]+l];if(y===void 0||y.t===void 0){if(c===void 0)continue;s[g]!=null&&(f[s[g]]=c);continue}var _=y.v;switch(y.t){case"z":if(_==null)break;continue;case"e":_=_==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(s[g]!=null){if(_==null)if(y.t=="e"&&_===null)f[s[g]]=null;else if(c!==void 0)f[s[g]]=c;else if(u&&_===null)f[s[g]]=null;else continue;else f[s[g]]=u&&(y.t!=="n"||y.t==="n"&&a.rawNumbers!==!1)?_:Cp(y,_,a);_!=null&&(h=!1)}}return{row:f,isempty:h}}function M5(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,i=1,s=[],o=0,a="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:t["!ref"];switch(c.header===1?r=1:c.header==="A"?r=2:Array.isArray(c.header)?r=3:c.header==null&&(r=0),typeof u){case"string":l=vi(u);break;case"number":l=vi(t["!ref"]),l.s.r=u;break;default:l=u}r>0&&(i=0);var h=Do(l.s.r),f=[],g=[],y=0,_=0,b=Array.isArray(t),T=l.s.r,A=0,I={};b&&!t[T]&&(t[T]=[]);var P=c.skipHidden&&t["!cols"]||[],M=c.skipHidden&&t["!rows"]||[];for(A=l.s.c;A<=l.e.c;++A)if(!(P[A]||{}).hidden)switch(f[A]=wa(A),n=b?t[T][A]:t[f[A]+h],r){case 1:s[A]=A-l.s.c;break;case 2:s[A]=f[A];break;case 3:s[A]=c.header[A-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),a=o=Cp(n,null,c),_=I[o]||0,!_)I[o]=1;else{do a=o+"_"+_++;while(I[a]);I[o]=_,I[a]=1}s[A]=a}for(T=l.s.r+i;T<=l.e.r;++T)if(!(M[T]||{}).hidden){var V=QSt(t,l,T,f,r,s,b,c);(V.isempty===!1||(r===1?c.blankrows!==!1:c.blankrows))&&(g[y++]=V.row)}return g.length=y,g}var $ae=/"/g;function eTt(t,e,n,r,i,s,o,a){for(var l=!0,c=[],u="",h=Do(n),f=e.s.c;f<=e.e.c;++f)if(r[f]){var g=a.dense?(t[n]||[])[f]:t[r[f]+h];if(g==null)u="";else if(g.v!=null){l=!1,u=""+(a.rawNumbers&&g.t=="n"?g.v:Cp(g,null,a));for(var y=0,_=0;y!==u.length;++y)if((_=u.charCodeAt(y))===i||_===s||_===34||a.forceQuotes){u='"'+u.replace($ae,'""')+'"';break}u=="ID"&&(u='"ID"')}else g.f!=null&&!g.F?(l=!1,u="="+g.f,u.indexOf(",")>=0&&(u='"'+u.replace($ae,'""')+'"')):u="";c.push(u)}return a.blankrows===!1&&l?null:c.join(o)}function uK(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var i=vi(t["!ref"]),s=r.FS!==void 0?r.FS:",",o=s.charCodeAt(0),a=r.RS!==void 0?r.RS:`
`,l=a.charCodeAt(0),c=new RegExp((s=="|"?"\\|":s)+"+$"),u="",h=[];r.dense=Array.isArray(t);for(var f=r.skipHidden&&t["!cols"]||[],g=r.skipHidden&&t["!rows"]||[],y=i.s.c;y<=i.e.c;++y)(f[y]||{}).hidden||(h[y]=wa(y));for(var _=0,b=i.s.r;b<=i.e.r;++b)(g[b]||{}).hidden||(u=eTt(t,i,b,h,o,l,s,r),u!=null&&(r.strip&&(u=u.replace(c,"")),(u||r.blankrows!==!1)&&n.push((_++?a:"")+u)));return delete r.dense,n.join("")}function NSe(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=uK(t,e);return n}function tTt(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var i=vi(t["!ref"]),s="",o=[],a,l=[],c=Array.isArray(t);for(a=i.s.c;a<=i.e.c;++a)o[a]=wa(a);for(var u=i.s.r;u<=i.e.r;++u)for(s=Do(u),a=i.s.c;a<=i.e.c;++a)if(e=o[a]+s,n=c?(t[u]||[])[a]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}l[l.length]=e+"="+r}return l}function OSe(t,e,n){var r=n||{},i=+!r.skipHeader,s=t||{},o=0,a=0;if(s&&r.origin!=null)if(typeof r.origin=="number")o=r.origin;else{var l=typeof r.origin=="string"?po(r.origin):r.origin;o=l.r,a=l.c}var c,u={s:{c:0,r:0},e:{c:a,r:o+e.length-1+i}};if(s["!ref"]){var h=vi(s["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),o==-1&&(o=h.e.r+1,u.e.r=o+e.length-1+i)}else o==-1&&(o=0,u.e.r=e.length-1+i);var f=r.header||[],g=0;e.forEach(function(_,b){$o(_).forEach(function(T){(g=f.indexOf(T))==-1&&(f[g=f.length]=T);var A=_[T],I="z",P="",M=qr({c:a+g,r:o+b+i});c=HA(s,M),A&&typeof A=="object"&&!(A instanceof Date)?s[M]=A:(typeof A=="number"?I="n":typeof A=="boolean"?I="b":typeof A=="string"?I="s":A instanceof Date?(I="d",r.cellDates||(I="n",A=Ml(A)),P=r.dateNF||rs[14]):A===null&&r.nullError&&(I="e",A=0),c?(c.t=I,c.v=A,delete c.w,delete c.R,P&&(c.z=P)):s[M]=c={t:I,v:A},P&&(c.z=P))})}),u.e.c=Math.max(u.e.c,a+f.length-1);var y=Do(o);if(i)for(g=0;g<f.length;++g)s[wa(g+a)+y]={t:"s",v:f[g]};return s["!ref"]=Ls(u),s}function nTt(t,e){return OSe(null,t,e)}function HA(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=po(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?HA(t,qr(e)):HA(t,qr({r:e,c:n||0}))}function rTt(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function iTt(){return{SheetNames:[],Sheets:{}}}function sTt(t,e,n,r){var i=1;if(!n)for(;i<=65535&&t.SheetNames.indexOf(n="Sheet"+i)!=-1;++i,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var o=s&&s[1]||n;for(++i;i<=65535&&t.SheetNames.indexOf(n=o+i)!=-1;++i);}if(ESe(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function oTt(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=rTt(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function aTt(t,e){return t.z=e,t}function LSe(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function lTt(t,e,n){return LSe(t,"#"+e,n)}function cTt(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function uTt(t,e,n,r){for(var i=typeof e!="string"?e:vi(e),s=typeof e=="string"?e:Ls(e),o=i.s.r;o<=i.e.r;++o)for(var a=i.s.c;a<=i.e.c;++a){var l=HA(t,o,a);l.t="n",l.F=s,delete l.v,o==i.s.r&&a==i.s.c&&(l.f=n,r&&(l.D=!0))}return t}var PF={encode_col:wa,encode_row:Do,encode_cell:qr,encode_range:Ls,decode_col:Qq,decode_row:Jq,split_cell:S_t,decode_cell:po,decode_range:kc,format_cell:Cp,sheet_add_aoa:LEe,sheet_add_json:OSe,sheet_add_dom:ISe,aoa_to_sheet:zb,json_to_sheet:nTt,table_to_sheet:PSe,table_to_book:NSt,sheet_to_csv:uK,sheet_to_txt:NSe,sheet_to_json:M5,sheet_to_html:ASe,sheet_to_formulae:tTt,sheet_to_row_object_array:M5,sheet_get_cell:HA,book_new:iTt,book_append_sheet:sTt,book_set_sheet_visibility:oTt,cell_set_number_format:aTt,cell_set_hyperlink:LSe,cell_set_internal_link:lTt,cell_add_comment:cTt,sheet_set_array_formula:uTt,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const yh=vo()(kh((t,e)=>({vondsten:[],addVondst:n=>t(r=>({vondsten:[...r.vondsten,{...n,id:crypto.randomUUID(),timestamp:new Date().toISOString()}]})),removeVondst:n=>t(r=>({vondsten:r.vondsten.filter(i=>i.id!==n)})),updateVondst:(n,r)=>t(i=>({vondsten:i.vondsten.map(s=>s.id===n?{...s,...r}:s)})),clearAll:()=>t({vondsten:[]}),exportAsGeoJSON:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r={type:"FeatureCollection",features:n.map(a=>({type:"Feature",geometry:{type:"Point",coordinates:[a.location.lng,a.location.lat]},properties:{id:a.id,objectType:a.objectType,material:a.material,period:a.period,depth:a.depth,notes:a.notes,timestamp:a.timestamp,photoUrl:a.photoUrl,condition:a.condition,weight:a.weight,length:a.length}}))},i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(i),o=document.createElement("a");o.href=s,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)},exportAsCSV:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r=`ID,Latitude,Longitude,Datum,Type,Materiaal,Periode,Diepte (cm),Conditie,Gewicht (g),Lengte (mm),Notities,Foto URL
`,i=n.map(c=>{const u=new Date(c.timestamp).toLocaleDateString("nl-NL"),h=c.notes?`"${c.notes.replace(/"/g,'""')}"`:"";return`${c.id},${c.location.lat},${c.location.lng},${u},${c.objectType},${c.material},${c.period},${c.depth||""},${c.condition||""},${c.weight||""},${c.length||""},${h},${c.photoUrl||""}`}).join(`
`),s=r+i,o=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(o),l=document.createElement("a");l.href=a,l.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)},exportAsExcel:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r=n.map(a=>({ID:a.id,Latitude:a.location.lat,Longitude:a.location.lng,Datum:new Date(a.timestamp).toLocaleDateString("nl-NL"),Type:a.objectType,Materiaal:a.material,Periode:a.period,"Diepte (cm)":a.depth||"",Conditie:a.condition||"","Gewicht (g)":a.weight||"","Lengte (mm)":a.length||"",Notities:a.notes||"","Foto URL":a.photoUrl||""})),i=PF.json_to_sheet(r),s=PF.book_new();PF.book_append_sheet(s,i,"Vondsten");const o=[{wch:36},{wch:12},{wch:12},{wch:12},{wch:15},{wch:12},{wch:25},{wch:12},{wch:12},{wch:12},{wch:12},{wch:40},{wch:50}];i["!cols"]=o,JSt(s,`mijn-vondsten-${new Date().toISOString().split("T")[0]}.xlsx`)},exportAsGPX:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r=n.map(l=>{const c=new Date(l.timestamp).toISOString();return`  <wpt lat="${l.location.lat}" lon="${l.location.lng}">
    <name>${l.objectType} - ${l.material}</name>
    <desc>${l.period}${l.depth?`, ${l.depth}cm diep`:""}${l.condition&&l.condition!=="Onbekend"?`, ${l.condition}`:""}${l.weight?`, ${l.weight}g`:""}${l.length?`, ${l.length}mm`:""}${l.notes?`. ${l.notes}`:""}</desc>
    <time>${c}</time>
    <sym>Pin</sym>
  </wpt>`}).join(`
`),i=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL" xmlns="http://www.topografix.com/GPX/1/1">
  <metadata>
    <name>Mijn Vondsten</name>
    <desc>Geexporteerd uit DetectorApp NL</desc>
    <time>${new Date().toISOString()}</time>
  </metadata>
${r}
</gpx>`,s=new Blob([i],{type:"application/gpx+xml"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.gpx`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)},exportAsKML:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const i=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Mijn Vondsten</name>
    <description>Geexporteerd uit DetectorApp NL</description>
${n.map(l=>{const c=new Date(l.timestamp).toLocaleDateString("nl-NL"),u=`<![CDATA[
            <b>Type:</b> ${l.objectType}<br/>
            <b>Materiaal:</b> ${l.material}<br/>
            <b>Periode:</b> ${l.period}<br/>
            ${l.depth?`<b>Diepte:</b> ${l.depth} cm<br/>`:""}
            ${l.condition&&l.condition!=="Onbekend"?`<b>Conditie:</b> ${l.condition}<br/>`:""}
            ${l.weight?`<b>Gewicht:</b> ${l.weight} gram<br/>`:""}
            ${l.length?`<b>Lengte:</b> ${l.length} mm<br/>`:""}
            <b>Datum:</b> ${c}<br/>
            ${l.notes?`<b>Notities:</b> ${l.notes}<br/>`:""}
            ${l.photoUrl?`<a href="${l.photoUrl}">Bekijk foto</a>`:""}
          ]]>`;return`    <Placemark>
      <name>${l.objectType} - ${l.material}</name>
      <description>${u}</description>
      <Point>
        <coordinates>${l.location.lng},${l.location.lat},0</coordinates>
      </Point>
    </Placemark>`}).join(`
`)}
  </Document>
</kml>`,s=new Blob([i],{type:"application/vnd.google-earth.kml+xml"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.kml`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}}),{name:"detectorapp-local-vondsten"})),hTt={Fectio:{naam:"Fectio",latinNaam:"Fectio",type:"castellum",periode:"ca. 4 - 270 n.Chr.",beschrijving:"Groot Romeins castellum bij Bunnik/Vechten, aan de splitsing van Rijn en Vecht. Een van de belangrijkste legerbases in Nederland met ruimte voor 500 soldaten. Het fort had barakken, badhuis, hospitaal en pakhuizen. Buiten de muren woonden handelaren en soldatenfamilies in een vicus. Hier is een compleet Romeins schip gevonden (De Meern 1). Strategisch gelegen voor transport over de rivieren. Veel vondsten door natte bodem: leer, hout, textiel naast munten en militaria. Te bezoeken: Archeologisch Park Castellum Hoge Woerd met reconstructie en museum.",watWasHier:"Groot castellum met ruimte voor 500 soldaten, barakken, badhuis, hospitaal en pakhuizen. Buiten het fort een burgerdorp.",watTeZien:"Archeologisch Park Castellum Hoge Woerd toont de contouren. Museum met veel vondsten waaronder een Romeins schip.",verwachteVondsten:"Munten, fibulae, aardewerk, wapens, paardentuig, militaire uitrusting. Door natte bodem ook leer, hout en textiel.",betekenis:"Een van de belangrijkste forten aan de Limes. Knooppunt voor troepen- en goederentransport.",bronnen:["https://www.hogewoerd.nl","https://www.livius.org/articles/place/fectio-vechten/"]},Traiectum:{naam:"Traiectum",latinNaam:"Traiectum",type:"castellum",periode:"ca. 42 - 275 n.Chr.",beschrijving:'Romeins castellum onder het huidige Domplein in Utrecht. De naam betekent "doorwaadbare plaats" - hier splitsten Rijn en Vecht. Het fort (124x152m in laatste fase) bood plaats aan ca. 500 soldaten. Vijf bouwfases: eerst hout, na 200 n.Chr. steen met tufsteen uit de Eifel. Cohors II Hispanorum peditata (Spaanse infanterie) was hier uniek gelegerd 88-275 n.Chr. - hun dakpanstempels zijn nergens anders aan de Limes gevonden! Het fort werd verwoest tijdens de Bataafse Opstand (69 n.Chr.). DOMunder onder het Domplein toont de opgegraven resten. UNESCO Werelderfgoed sinds 2021.',watWasHier:"Castellum (500 soldaten) bij riviersplitsing. Cohors II Hispanorum gelegerd.",watTeZien:"DOMunder onder het Domplein: opgravingen te bezoeken. Principia en poorten blootgelegd.",verwachteVondsten:"Dakpannen met stempels, munten, aardewerk, tufsteen bouwmateriaal, militaria.",betekenis:"UNESCO Werelderfgoed. Oorsprong van de stad Utrecht.",bronnen:["https://www.livius.org/articles/place/traiectum-utrecht/","https://www.utrechtaltijd.nl/verhalen/castellum-traiectum-een-romeinse-legerbasis-in-het-hart-van-de-domstad/","https://www.romeinen.nl/locatie-overzicht/3447271878/domunder-castellum-traiectum"]},Laurum:{naam:"Laurum",latinNaam:"Laurum",type:"castellum",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum in het huidige Woerden aan de Oude Rijn. Garnizoen van ca. 500 soldaten in houten barakken. Bijzonder vanwege de natte veenbodem: organisch materiaal bleef bewaard zoals houten schrijfplankjes met Latijnse teksten, leren schoenen en een Romeinse boot. Het fort werd meerdere keren herbouwd na overstromingen. De contouren zijn in het stratenpatroon herkenbaar. Buiten de muren lag een vicus (burgerdorp). Vondsten in Stadsmuseum Woerden, waaronder unieke houten voorwerpen die elders zijn vergaan.",watWasHier:"Castellum voor 500 soldaten met houten barakken, badhuis en pakhuizen. Vicus buiten de muren.",watTeZien:"Stadsmuseum Woerden met bijzondere vondsten. Fort-contouren in stratenpatroon herkenbaar.",verwachteVondsten:"Militaria, aardewerk, munten, schrijfplankjes. Door natte veengrond ook hout, leer en schoenen.",betekenis:"Toont Romeins bouwen in moeilijk veengebied. Unieke organische vondsten.",bronnen:["https://www.castellumwoerden.nl"]},"Castellum Praetorium Agrippinae":{naam:"Praetorium Agrippinae",latinNaam:"Praetorium Agrippinae",type:"castellum",periode:"ca. 40 - 275 n.Chr.",beschrijving:"Een van de best opgegraven Romeinse locaties van Nederland. Het castellum werd gesticht in de winter van 39/40 n.Chr. door keizer Caligula, vernoemd naar zijn moeder Vipsania Agrippina. Een opgegraven wijnvat bevatte wijn van de persoonlijke wijngaarden van de keizer! Er zijn 7 bouwfasen gevonden, 6 van hout en de laatste van steen - uniek compleet inzicht in Romeinse bouwtechnieken. Cohors III Gallorum equitata was hier gelegerd. Bij opgravingen (1941-1953) zijn door het grondwater veel organische vondsten bewaard: voedselresten, leer, touw. De vicus buiten het fort strekte zich 1 km uit met 700+ graven. Op het Castellumplein zijn de contouren in brons gemarkeerd.",watWasHier:"Castellum met 7 bouwfasen. Vicus (1 km) met 700+ graven. Detachement Cohors III Gallorum.",watTeZien:"Castellumplein met bronzen markeringen. Torenmuseum Valkenburg. Gereconstrueerde poort.",verwachteVondsten:"Militaria, organisch materiaal (voedsel, leer, touw), aardewerk, munten, inscripties.",betekenis:"Best gedocumenteerde Romeinse fort van Nederland. UNESCO Werelderfgoed.",bronnen:["https://www.livius.org/articles/place/praetorium-agrippinae-valkenburg-zh/","https://www.geschiedenisvanzuidholland.nl/zien-en-doen/locaties/praetorium-agrippinae-in-valkenburg/","https://oudvalkenburgzh.nl/torenmuseum-5/"]},"Castra Hunnerberg":{naam:"Castra Hunnerberg",latinNaam:"Castra",type:"legerkamp",periode:"ca. 16 v.Chr. - 104 n.Chr.",beschrijving:'Enorm Romeins legerkamp op de Hunnerberg bij Nijmegen - 42 hectare (80 voetbalvelden), ruimte voor 12.000 man. De enige plek in Nederland waar echte legioenen (geen hulptroepen) verbleven! Na de Bataafse Opstand (69 n.Chr.) vestigde Legio X Gemina Pia Fidelis zich hier - opgericht door Julius Caesar en het bekendste legioen van Nederland. De afkorting LXG is talloze keren gevonden op dakpannen en tegels. Bij opgravingen zijn ruim 1000 fragmenten militaire uitrusting en paardentuig gevonden. In 104 n.Chr. vertrok het legioen naar de Balkan - een ramp voor de economie. UNESCO Werelderfgoed sinds 2021, omschreven als "bakermat van de Nederduitse Limes".',watWasHier:"Legerkamp voor 12.000 man. Legio X Gemina (71-104 n.Chr.), opgericht door Julius Caesar.",watTeZien:"Museum Het Valkhof. Museum Kam in de Hunnerberg. Grafvelden in Nijmegen-Oost.",verwachteVondsten:"Legioenstempels LXG, militaria, paardentuig, dakpannen, munten, grafstenen.",betekenis:"UNESCO Werelderfgoed. Bakermat van de Limes. Enige legioenskamp in Nederland.",bronnen:["https://www.livius.org/articles/place/noviomagus-nijmegen-hunnerberg/","https://www.welkominnijmegen.nl/pages/geschiedenis/de-romeinen-in-nijmegen/de-legerkampen.php","https://mijngelderland.nl/inhoud/specials/archeokroniek/romeinse-militaire-uitrusting-en-paardentuig-van-de-hunerberg-te-nijmegen"]},"Castellum Kops Plateau":{naam:"Kops Plateau",latinNaam:"Oppidum Batavorum",type:"castellum",periode:"ca. 10 v.Chr. - 70 n.Chr.",beschrijving:"Vroege Romeinse basis op het Kops Plateau in Nijmegen, later de civiele hoofdstad van de Bataven: Oppidum Batavorum. Hier woonden Romeinen en Bataven samen - het eerste contactpunt tussen beide culturen. Verwoest tijdens de Bataafse Opstand van 69-70 n.Chr. onder leiding van Julius Civilis. Gemengde vondsten: Romeinse militaria n Keltisch-Bataafse voorwerpen. Vroege importaardewerk en munten van Augustus. Nu natuurgebied. Museum Het Valkhof toont de unieke vondsten van deze ontmoeting van culturen.",watWasHier:"Eerst Romeins kamp, later Bataafse hoofdstad. Romeinen en Bataven woonden samen.",watTeZien:"Kops Plateau is natuurgebied. Museum Het Valkhof toont de vondsten.",verwachteVondsten:"Vroege militaria, Keltisch-Bataafse voorwerpen, importaardewerk, munten van Augustus.",betekenis:"Eerste contactpunt Romeinen-Bataven. Begin van romanisering Nederland.",bronnen:["https://www.livius.org/articles/place/noviomagus-nijmegen-kops-plateau/"]},"Nijmegen, Valkhof":{naam:"Valkhof Nijmegen",latinNaam:"Valkhof",type:"versterking",periode:"ca. 270 - 400 n.Chr.",beschrijving:"Laat-Romeinse versterking op het Valkhof in Nijmegen, aan de Waaloever. Gebouwd toen het Rijk onder druk stond van Germaanse invallen. Strategische positie boven de rivier. Continuteit: Karel de Grote bouwde hier later zijn palts (koninklijke residentie). De Sint-Nicolaaskapel bevat mogelijk Karolingische elementen op Romeinse fundamenten. Typische laat-Romeinse vondsten: gordels met riemtongen, militaire gespen, munten van 3e-4e eeuwse keizers. Museum Het Valkhof toont de overgang van Romeinse tijd naar vroege middeleeuwen.",watWasHier:"Laat-Romeinse versterking boven de Waal. Later Karolingische palts.",watTeZien:"Valkhofpark met Sint-Nicolaaskapel. Museum Het Valkhof.",verwachteVondsten:"Laat-Romeinse munten, gordels, riemtongen, militaire gespen, 3e-4e eeuws aardewerk.",betekenis:"Toont overgang Romeinse tijd naar middeleeuwen. Nijmegen bleef machtscentrum.",bronnen:["https://www.museumhetvalkhof.nl"]},"Castellum Op de Hoge Woerd":{naam:"Hoge Woerd",latinNaam:"Castellum",type:"castellum",periode:"ca. 50 - 270 n.Chr.",beschrijving:"Romeins castellum in Leidsche Rijn (Utrecht), nu een voorbeeldig archeologisch park. Middelgroot fort met houten gebouwen en een burgerdorp (vicus) buiten de muren. Hier is een compleet Romeins schip gevonden: De Meern 1, een 25 meter lange vrachtboot. Door de natte kleigrond bleef veel organisch materiaal bewaard. Het park toont de reconstructie van het fort - je kunt over de originele fundamenten lopen. Modern museum met interactieve presentatie. Ideale plek om te zien hoe een Romeins fort eruitzag.",watWasHier:"Middelgroot castellum met houten gebouwen. Vicus buiten de muren. Compleet schip gevonden.",watTeZien:"Archeologisch Park Hoge Woerd: reconstructie fort, museum, originele fundamenten.",verwachteVondsten:"Militaria, scheepsonderdelen, aardewerk, munten. Door natte grond ook organisch materiaal.",betekenis:"Best gepresenteerde Romeinse fort in Nederland. Ideaal om fort-layout te begrijpen.",bronnen:["https://www.hogewoerd.nl"]},Lugdunum:{naam:"Lugdunum",latinNaam:"Lugdunum",type:"vlootbasis",periode:"ca. 40 - 270 n.Chr.",beschrijving:`Romeinse vlootbasis en versterkte graanopslagplaats bij de monding van de Rijn, het westelijkste punt van de gehele Limes. Hier stond mogelijk een enorme vuurtoren (ca. 60m hoog) naar model van de Pharos van Ostia - vissers noemden deze "Kalla's toren" (Caligula). Door de vele dakpannen van de Romeinse vloot wordt aangenomen dat dit een vlootbasis was. Het fort is door kustafslag in zee verdwenen. Bij stormen in 1520, 1552 en 1562 waren de runes van de "Brittenburg" zichtbaar op het strand; de laatst gedateerde vondst was 270 n.Chr. Het Rijksmuseum van Oudheden in Leiden toont vondsten. De beroemde kaart van Ortelius toont hoe het eruit zag.`,watWasHier:"Vlootbasis met vuurtoren bij Rijnmonding. Graanopslag voor Britannia.",watTeZien:"Fort verdwenen in zee. RMO Leiden toont vondsten en kaart van Ortelius.",verwachteVondsten:"Na stormen: munten, aardewerk, militaria. Fort zelf onbereikbaar in Noordzee.",betekenis:"Westelijk eindpunt van de Limes. Verbinding met Britannia.",bronnen:["https://www.livius.org/articles/place/lugdunum-katwijk/","https://nl.wikipedia.org/wiki/Lugdunum_(Katwijk)"]},"Vlootbasis Naaldwijk":{naam:"Vlootbasis Naaldwijk",type:"vlootbasis",periode:"1e - 2e eeuw n.Chr.",beschrijving:"Vermoedelijke basis van de Classis Germanica (Germaanse vloot) bij Naaldwijk in het Westland. De Romeinse vloot patrouilleerde langs de Noordzeekust en vervoerde troepen en goederen naar Britannia. Haven met dokken voor oorlogsschepen en transportboten. Mariniers (classiarii) waren hier gestationeerd. Het gebied is nu landbouwgrond, maar bij opgravingen zijn haven-structuren en scheepsgerelateerde vondsten gedaan. Ankers, scheepsonderdelen en specifieke mariniers-uitrusting. Toont het belang van zeemacht voor de Romeinse grensverdediging.",watWasHier:"Haven voor oorlogsschepen. Mariniers gestationeerd. Patrouilles langs Noordzeekust.",watTeZien:"Gebied is landbouwgrond. Vondsten in lokale musea.",verwachteVondsten:"Scheepsonderdelen, ankers, mariniers-uitrusting, importaardewerk.",betekenis:"Toont belang Romeinse vloot voor kustverdediging.",bronnen:[]},"Minifort Ockenburg":{naam:"Minifort Ockenburg",type:"minifort",periode:"ca. 150 - 180 n.Chr.",beschrijving:"Klein Romeins kustfort bij Ockenburg in Den Haag, op een oude strandwal. Bewaakte de kust tegen piraten en Germaanse invallen over zee. Ruimte voor slechts 20-30 soldaten - een wachtpost eerder dan een echt fort. Korte gebruiksperiode van ca. 30 jaar. Toont dat de Romeinen niet alleen de rivieren maar ook de Noordzeekust verdedigden. Het terrein is beschermd rijksmonument maar niet publiek toegankelijk. Vondsten in het Haags Historisch Museum: militaria, aardewerk en munten uit de 2e eeuw.",watWasHier:"Kleine kustwachtpost voor 20-30 soldaten op strandwal.",watTeZien:"Terrein beschermd maar niet toegankelijk. Haags Historisch Museum.",verwachteVondsten:"Kleine hoeveelheden militaria, aardewerk, munten 2e eeuw.",betekenis:"Toont Romeinse kustverdediging naast rivierforten.",bronnen:[]},"Castellum Ceuclum":{naam:"Ceuclum",latinNaam:"Ceuclum",type:"castellum",periode:"ca. 70 - 270 n.Chr.",beschrijving:"Romeins castellum bij Cuijk aan de Maas, waar de belangrijke weg naar het noorden de rivier kruiste. Het fort bewaakte een brug of veerpont. Garnizoen van hulptroepen. De naam Cuijk is afgeleid van Ceuclum. Bij de brug werden ritueel munten geofferd. Het fort lag op een strategisch punt waar de Maasroute de landweg kruiste. Vondsten wijzen op handel en militaire activiteit. Het Maasmuseum in Cuijk toont lokale Romeinse vondsten. Onder het centrum zijn bij bouwwerkzaamheden regelmatig resten gevonden.",watWasHier:"Castellum bij Maasbrug. Belangrijke rivierovergang en kruispunt.",watTeZien:"Maasmuseum Cuijk. Resten gevonden onder centrum.",verwachteVondsten:"Munten (geofferd bij brug), fibulae, aardewerk, bruggerelateerde vondsten.",betekenis:"Belangrijke schakel in wegennet langs de Maas.",bronnen:["https://www.livius.org/articles/place/ceuclum-cuijk/"]},"Castellum Meinerswijk":{naam:"Meinerswijk",type:"castellum",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum in de uiterwaarden bij Arnhem-Meinerswijk aan de Rijn. Het fort bewaakt een strategisch punt waar de rivier goed te overzien was. Meerdere bouwfasen door overstromingen. In de uiterwaarden zijn bij erosie en opgravingen vondsten gedaan: militaria, aardewerk, munten en scheepsresten. Het gebied is nu natuurgebied Meinerswijk met wisselende waterstanden. Na hoog water kunnen vondsten aan de oppervlakte komen. Museum Arnhem toont Romeinse vondsten uit de regio.",watWasHier:"Castellum in uiterwaarden. Meerdere bouwfasen door overstromingen.",watTeZien:"Natuurgebied Meinerswijk. Museum Arnhem.",verwachteVondsten:"Militaria, aardewerk, munten, scheepsresten. Na hoog water aan oppervlakte.",betekenis:"Onderdeel fortenketen langs de Rijn.",bronnen:[]},Levefanum:{naam:"Levefanum",latinNaam:"Levefanum",type:"versterking",periode:"ca. 50 - 270 n.Chr.",beschrijving:"Romeinse versterking bij Wijk bij Duurstede, waar de Rijn splitste in de Lek en Kromme Rijn. Strategisch cruciaal punt voor controle over het scheepvaartverkeer. Waarschijnlijk ook een haven voor overslag van goederen. Op dezelfde plek ontstond later de Karolingische handelsstad Dorestad, een van de belangrijkste havens van vroegmiddeleeuws Europa. De continuteit toont het blijvende belang van deze locatie. Dorestad Museum vertelt het verhaal van Romeinse tijd tot Vikingaanvallen. Vondsten: munten, handelsaardewerk, militaria.",watWasHier:"Versterking bij riviersplitsing. Haven en overslagpunt. Later Dorestad.",watTeZien:"Dorestad Museum. Terrein bebouwd.",verwachteVondsten:"Munten, handelsaardewerk, militaria, scheepsgerelateerde vondsten.",betekenis:"Strategisch controlepunt waterwegen. Later belangrijke handelsstad Dorestad.",bronnen:[]},"Nigrum Pullum":{naam:"Nigrum Pullum",latinNaam:"Nigrum Pullum (Zwarte Poel)",type:"minifort",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum bij Zwammerdam aan de Oude Rijn. Garnizoen van 100-150 soldaten met pakhuizen en haven voor riviertransport. Wereldberoemd door de vondst van 6 Romeinse schepen (1971-1974) in perfecte staat - bewaard door de natte veengrond. De Zwammerdamschepen zijn de best bewaarde Romeinse rivierschepen ter wereld en tonen uniek inzicht in Romeins transport en scheepsbouw. Vondsten: schepen, leren schoeisel, houten voorwerpen, aardewerk, munten, militaria. Te zien in Rijksmuseum van Oudheden, Leiden.",watWasHier:"Klein fort met pakhuizen en haven. Bij opgravingen werden 6 Romeinse schepen gevonden.",watTeZien:"De schepen zijn in het Rijksmuseum van Oudheden in Leiden. Het terrein zelf is niet te bezoeken.",verwachteVondsten:"Scheepsonderdelen, leren schoeisel, houten voorwerpen, aardewerk, munten, en door de natte veengrond organisch materiaal.",betekenis:"Wereldberoemd om de goed bewaarde Romeinse schepen. Toont transport over de Rijn.",bronnen:["https://www.rmo.nl/collectie/themas/zwammerdam"]},"Stenen wachttoren Vleuterweide":{naam:"Wachttoren Vleuterweide",type:"wachttoren",periode:"ca. 150 - 250 n.Chr.",beschrijving:"Bijzondere stenen wachttoren in Vleuterweide bij Utrecht - de meeste Romeinse wachttorens waren van hout. De stenen constructie wijst op permanentie en belang. Onderdeel van het signaleringssysteem langs de Limes: bij gevaar werden vuren aangestoken om forten te waarschuwen. De toren bood uitzicht over de omgeving en de rivier. Mogelijk woonden hier ook families van de soldaten. De fundamenten zijn gemarkeerd in de moderne woonwijk. Vondsten: bouwmateriaal (dakpannen, stenen), aardewerk, persoonlijke bezittingen. Centraal Museum Utrecht.",watWasHier:"Stenen wachttoren (ongebruikelijk). Signaalpost voor waarschuwingssysteem.",watTeZien:"Fundamenten gemarkeerd in wijk. Centraal Museum Utrecht.",verwachteVondsten:"Dakpannen met legioenstempels, aardewerk, persoonlijke bezittingen.",betekenis:"Een van weinige bekende stenen wachttorens. Toont variatie in bouwwijzen.",bronnen:[]},"Wachttoren Bunnik":{naam:"Wachttoren Bunnik",type:"wachttoren",periode:"ca. 50 - 270 n.Chr.",beschrijving:"Houten wachttoren bij Bunnik aan de Rijn, onderdeel van het signaleringssysteem langs de Limes. Elke paar kilometer stond een toren met uitzicht over de rivier. Bij nadering van vijanden werden vuren of rooksignalen gegeven, zodat binnen minuten alle forten gewaarschuwd waren. De torens waren meestal van hout op een aarden verhoging. Kleine bezetting van 4-8 soldaten. De exacte locatie is niet precies bekend doordat het gebied nu bebouwd is. Vondsten zijn schaars: wat aardewerk en militaria.",watWasHier:"Houten uitkijktoren voor signalering. Kleine bezetting van 4-8 soldaten.",watTeZien:"Exacte locatie onbekend. Gebied bebouwd.",verwachteVondsten:"Kleine hoeveelheden militaria en aardewerk.",betekenis:"Onderdeel signaleringssysteem langs Limes.",bronnen:[]},"Castellum Maastricht":{naam:"Castellum Maastricht",latinNaam:"Mosae Trajectum",type:"versterking",periode:"ca. 270 - 400 n.Chr.",beschrijving:'Laat-Romeinse versterking in het centrum van Maastricht bij de brug over de Maas. Mosae Trajectum betekent "Maasoversteek". Gebouwd in een periode dat het Rijk onder druk stond van Germaanse invallen. Het fort bewaakte de strategische rivierovergang. Continuteit van bewoning: Maastricht bleef bewoond tot op heden. Onder het Vrijthof en omgeving zijn Romeinse resten gevonden. Typische laat-Romeinse vondsten: gordels, riembeslag, munten 3e-4e eeuw, zwaar versterkte muren. Centre Ceramique vertelt de geschiedenis.',watWasHier:"Laat-Romeinse versterking bij Maasbrug. Verdediging tegen Germaanse invallen.",watTeZien:"Onder Vrijthof zijn resten. Centre Ceramique.",verwachteVondsten:"Laat-Romeinse munten, militaire gordelbeslag, riemtongen, 3e-4e eeuws aardewerk.",betekenis:"Toont continuteit - Maastricht ononderbroken bewoond sinds Romeinse tijd.",bronnen:["https://www.centreceramique.nl"]},Roompot:{naam:"Roompot Fort",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins kustfort bij de Roompot in Zeeland dat de toegang tot de Oosterschelde bewaakte. Het fort beschermde schepen tegen piraterij en controleerde de vaarroute. Door zeespiegelstijging en kustafslag is het fort in de golven verdwenen. De exacte locatie ligt nu onder water. Soms spoelen na stormen vondsten aan op de stranden van Noord-Beveland en Walcheren: munten, aardewerk, metalen voorwerpen. Toont dat de Romeinen de gehele Zeeuwse delta controleerden, niet alleen de grote rivieren.",watWasHier:"Kustfort dat zeeroute bewaakte. Bescherming tegen piraterij.",watTeZien:"Fort verdwenen in zee. Soms vondsten op strand na stormen.",verwachteVondsten:"Na stormen: munten, aardewerk, metalen voorwerpen op Zeeuwse stranden.",betekenis:"Toont Romeinse controle over Zeeuwse wateren.",bronnen:[]},"Castellum Carvium":{naam:"Carvium",latinNaam:"Carvium",type:"castellum",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum bij Herwen-Aerdt (bij Lobith) waar Rijn en Waal samenkwamen - een strategisch knooppunt van eerste orde. Het fort controleerde het rivierverkeer op beide grote stromen. Garnizoen van hulptroepen. In de uiterwaarden zijn bij erosie en opgravingen vondsten gedaan. Het gebied is nu natuurgebied de Gelderse Poort met dynamische rivierlandschap. Na hoog water kunnen vondsten aan oppervlakte komen. Museum Het Valkhof in Nijmegen toont vondsten uit de regio. Scheepsresten gevonden.",watWasHier:"Fort bij samenvloeiing Rijn en Waal. Controleerde twee grote rivieren.",watTeZien:"Natuurgebied Gelderse Poort. Museum Het Valkhof Nijmegen.",verwachteVondsten:"Militaria, aardewerk, munten, scheepsresten. Na hoog water aan oppervlakte.",betekenis:"Controleerde strategisch knooppunt waterwegen.",bronnen:[]},Matilo:{naam:"Matilo",latinNaam:"Matilo",type:"castellum",periode:"ca. 70 - 260 n.Chr.",beschrijving:'Romeins castellum bij Leiden-Roomburg, gebouwd na de Bataafse Opstand (69-70 n.Chr.) op een strategische plek aan de monding van het Kanaal van Corbulo. Het gigantische fort (80x120m) bood plaats aan ca. 500 soldaten en is een van de best bewaarde castella in Nederland. De archeologische resten liggen grotendeels intact onder Archeologisch Park Matilo. In het park staan 6 replica-wachttorens en een aarden wal die de omtrek van het fort visualiseert. Het fort werd tussen 240-260 n.Chr. opgeheven. De locatie Roomburg ("Romeinse burcht") verwijst naar de oorsprong. UNESCO Werelderfgoed sinds 2021.',watWasHier:"Groot castellum (500 soldaten) bij monding Kanaal van Corbulo. Vicus buiten de muren.",watTeZien:"Archeologisch Park Matilo met 6 wachttoren-replica's en aarden wal. Rijksmuseum van Oudheden.",verwachteVondsten:"Militaria, grafgiften, crematie-urnen, aardewerk, munten, fibulae.",betekenis:"UNESCO Werelderfgoed. Een van de best bewaarde castella van Nederland.",bronnen:["https://parkmatilo.nl/het-verhaal-van-matilo/","https://www.limeswerelderfgoed.nl/locaties/2016475046/archeologisch-park-matilo","https://www.romeinen.nl/locatie-overzicht/2016475046/archeologisch-park-matilo"]},Corbulo:{naam:"Forum Hadriani",latinNaam:"Forum Hadriani (Municipium Aelium Cananefatium)",type:"versterking",periode:"ca. 70 - 270 n.Chr.",beschrijving:"Forum Hadriani bij Voorburg was de noordelijkste Romeinse stad van het Europese continent en de enige stad met stadsrechten in Nederland. Gesticht rond 70 n.Chr. aan het Kanaal van Corbulo (34 km, verbinding Rijn-Maas). Keizer Hadrianus verleende in 121 n.Chr. marktrechten en gaf de stad zijn naam. Rond 150 n.Chr. kreeg het stadsrechten (Municipium). De stad had ca. 1000 inwoners, een stadsmuur met dubbele gracht, stenen gebouwen en tempels. Park Arentsburgh markeert de locatie. UNESCO Werelderfgoed sinds 2021. De eerste wetenschappelijke opgravingen (1827-1833) waren door Caspar Reuvens, de eerste hoogleraar archeologie ter wereld.",watWasHier:"Enige Romeinse stad met stadsrechten in Nederland. Ca. 1000 inwoners.",watTeZien:"Park Arentsburgh in Voorburg. Kanaal traceerbaar als de Vliet.",verwachteVondsten:"Stedelijke vondsten: bouwmateriaal, aardewerk, munten, inscripties, religieuze voorwerpen.",betekenis:"UNESCO Werelderfgoed. Noordelijkste Romeinse stad van Europa.",bronnen:["https://www.awlv.nl/forum-hadriani/de-stad-forum-hadriani/","https://www.romeinen.nl/weten/nederland-in-de-romeinse-tijd/zuid-holland/regio-voorburg","https://kennis.cultureelerfgoed.nl/index.php/Monumenten/508083"]},"Berg - Tomveld":{naam:"Berg-Tomveld",type:"villa",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse villa bij Berg in Zuid-Limburg, mogelijk tijdelijk militair gebruikt. Dit type gebouwen diende als landbouwbedrijf met luxe woondeel voor de eigenaar. De regio Zuid-Limburg was dicht bebouwd met villa's die graan en vee leverden aan het Romeinse leger. Vondsten wijzen op welvaart: mozaekvloeren, beschilderd pleisterwerk, hypocaustum (vloerverwarming). De locatie Tomveld verwijst mogelijk naar Romeinse grafheuvels (tumuli) in de buurt. Thermenmuseum Heerlen toont de villa-cultuur.",watWasHier:"Villa rustica met mogelijk militair gebruik. Landbouw voor legervoorraden.",watTeZien:"Locatie in agrarisch gebied. Thermenmuseum Heerlen.",verwachteVondsten:"Bouwmateriaal, dakpannen, aardewerk, munten, sieraden.",betekenis:"Toont Romeinse landbouweconomie in Zuid-Limburg.",bronnen:[]},"Berg - Trappenberg":{naam:"Berg-Trappenberg",type:"legerkamp",periode:"1e eeuw v.Chr. - 1e eeuw n.Chr.",beschrijving:"Vroeg-Romeins legerkamp bij Berg in Zuid-Limburg dat later werd omgebouwd tot villa of boerderij. Toont de transitie van militaire bezetting naar civiele bewoning. Het kamp dateert uit de veroveringsperiode toen Rome dit gebied inlijfde. Na pacificatie was een fort niet meer nodig en werd het terrein civiel benut. Vondsten: vroege Romeinse militaria naast later agrarisch materiaal. Zuid-Limburg was een grenszone voordat de Limes naar de Rijn verplaatste.",watWasHier:"Eerst legerkamp, later villa/boerderij. Overgang militair naar civiel.",watTeZien:"Locatie in landbouwgebied.",verwachteVondsten:"Vroege militaria, later agrarisch aardewerk, bouwmateriaal.",betekenis:"Toont Romeinse verovering en pacificatie van Zuid-Limburg.",bronnen:[]},"Castellum Blariacum":{naam:"Blariacum",latinNaam:"Blariacum",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke locatie van het Romeinse castellum Blariacum bij Blerick (nu deel van Venlo). De naam leeft voort in de plaatsnaam. Het fort zou de Maasovergang hebben bewaakt op de route tussen Xanten en Maastricht. De exacte locatie is nooit definitief vastgesteld ondanks vele opgravingspogingen. Vondsten in de omgeving wijzen wel op Romeinse militaire aanwezigheid: militaria, munten, aardewerk. Het Limburgs Museum in Venlo toont de Romeinse geschiedenis van de regio.",watWasHier:"Vermoedelijk castellum bij Maasovergang. Exacte locatie onzeker.",watTeZien:"Locatie niet vastgesteld. Limburgs Museum Venlo.",verwachteVondsten:"Militaria, munten, aardewerk als aanwijzingen voor fortlocatie.",betekenis:"Plaatsnaam Blerick afgeleid van Blariacum. Schakel in Maasroute.",bronnen:[]},"Fortificatie Bodegraven":{naam:"Wachtpost Bodegraven",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Waarschijnlijke Romeinse wachtpost bij Bodegraven aan de Oude Rijn. Onderdeel van het signaleringssysteem tussen de grotere forten zoals Nigrum Pullum en Laurum. De wachttorens stonden om de paar kilometer en konden met vuur- of rooksignalen waarschuwingen doorgeven. Kleine bezetting van 4-8 soldaten. De exacte locatie is niet precies bekend. Bij graafwerkzaamheden in Bodegraven zijn wel Romeinse scherven gevonden die op aanwezigheid wijzen.",watWasHier:"Kleine wachtpost voor signalering. 4-8 soldaten.",watTeZien:"Exacte locatie onbekend.",verwachteVondsten:"Aardewerk, kleine hoeveelheden militaria.",betekenis:"Onderdeel communicatiesysteem langs de Limes.",bronnen:[]},Caestert:{naam:"Caestert",type:"versterking",periode:"1e eeuw v.Chr.",beschrijving:"Mogelijk de locatie waar de Eburonen onder leiding van Ambiorix in 54 v.Chr. een Romeins legioen vernietigden - de zwaarste Romeinse nederlaag in de Lage Landen. Het plateau van Caestert bij Kanne (Belgisch Limburg) had een oppidum (versterkte nederzetting). Julius Caesar beschrijft de slag in zijn Gallische Oorlogen. De locatie is omstreden, maar Caestert is een sterke kandidaat. Symbolisch belangrijke plek voor de Belgische geschiedenis. De site is nu natuurgebied met grotten.",watWasHier:"Mogelijk slagveld Ambiorix-opstand 54 v.Chr. Oppidum (versterking).",watTeZien:"Plateau Caestert, natuurgebied met grotten.",verwachteVondsten:"Keltische en vroeg-Romeinse voorwerpen, mogelijk slagveldvondsten.",betekenis:"Mogelijke locatie grootste Romeinse nederlaag in de regio.",bronnen:[]},"Castellum Driel?":{naam:"Castellum Driel",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:'Mogelijke locatie van een Romeins castellum bij Driel in de Betuwe. Het bestaan en de exacte locatie zijn onzeker, vandaar het vraagteken. De Betuwe (Insula Batavorum - "Eiland der Bataven") was kerngebied van de Bataven, bondgenoten van Rome. Zij leverden beroemde hulptroepen aan het Romeinse leger. Een fort hier zou logisch zijn om het gebied te controleren. Vondsten in de omgeving wijzen op Romeinse aanwezigheid. Museum Het Valkhof Nijmegen toont de Bataafse cultuur.',watWasHier:"Mogelijk castellum in Bataafs kerngebied. Bestaan onzeker.",watTeZien:"Geen zichtbare resten. Museum Het Valkhof.",verwachteVondsten:"Romeinse en Bataafse voorwerpen indien locatie juist.",betekenis:"Zou Romeinse controle over Bataafs gebied tonen.",bronnen:[]},"Castellum Duiven - Loowaard":{naam:"Duiven-Loowaard",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins castellum bij Duiven/Loowaard aan de Rijn, in de uiterwaarden tussen Arnhem en Zevenaar. Het fort bewaakte de rivierroute en de overgang naar het Bataafse gebied. De dynamische rivier heeft veel resten weggespoeld of diep begraven. Bij lage waterstanden en na erosie komen soms vondsten aan oppervlakte: munten, militaria, aardewerk. Het gebied is nu natuurgebied met grazende grote grazers. Museum Arnhem en Het Valkhof Nijmegen tonen vondsten uit de regio.",watWasHier:"Castellum aan de Rijn in uiterwaarden. Bewaakte rivierovergang.",watTeZien:"Natuurgebied. Na erosie mogelijk vondsten aan oppervlakte.",verwachteVondsten:"Militaria, munten, aardewerk na erosie of bij laag water.",betekenis:"Onderdeel fortenketen langs de Rijn.",bronnen:[]},"Castellum Grinnes":{naam:"Grinnes",latinNaam:"Grinnes",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins castellum bij Rossum in de gemeente Maasdriel - waarschijnlijk het antieke Grinnes vermeld op de Peutingerkaart. Het fort lag aan de Waal en controleerde de rivierroute. Bij opgravingen zijn resten van het fort gevonden. De omgeving is rijk aan Romeinse vondsten: militaria, munten, aardewerk, bouwmateriaal. Het Museum voor de Bommelerwaard in Ammerzoden toont lokale vondsten. De naam Grinnes leeft niet voort in moderne plaatsnamen.",watWasHier:"Castellum aan de Waal. Vermeld op Peutingerkaart.",watTeZien:"Locatie opgegraven. Museum Bommelerwaard.",verwachteVondsten:"Militaria, munten, aardewerk, bouwmateriaal.",betekenis:"Verbinding antieke bronnen met archeologische locatie.",bronnen:[]},"Wachttoren Heumen":{naam:"Wachttoren Heumen",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse wachttoren bij Heumen ten zuiden van Nijmegen. Onderdeel van het signaleringssysteem langs de Maas en verbindingswegen. De torens stonden op strategische punten met goed uitzicht. Bij nadering van vijanden werden signalen gegeven naar de grotere forten. Kleine bezetting van 4-8 soldaten die in de toren woonden. De exacte locatie is archeologisch vastgesteld. Vondsten: militaria, aardewerk, persoonlijke bezittingen.",watWasHier:"Signaleertoren met klein garnizoen. Uitzichtpunt.",watTeZien:"Locatie bekend maar geen zichtbare resten.",verwachteVondsten:"Militaria, aardewerk, kleine persoonlijke voorwerpen.",betekenis:"Onderdeel communicatienetwerk Romeins leger.",bronnen:[]},"Castellum Huissen?":{naam:"Castellum Huissen",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke locatie van een Romeins castellum bij Huissen aan de Rijn. Het bestaan is niet zeker vastgesteld, vandaar het vraagteken. Huissen ligt op een logische plek tussen de bekende forten bij Arnhem en Zevenaar. Vondsten in de omgeving wijzen op Romeinse activiteit. De moderne bebouwing maakt onderzoek lastig. Als er een fort was, bewaakte het de rivierroute en mogelijk een oversteekplaats.",watWasHier:"Mogelijk castellum aan de Rijn. Bestaan onzeker.",watTeZien:"Geen resten zichtbaar. Gebied bebouwd.",verwachteVondsten:"Romeinse vondsten die fortaanwezigheid zouden bevestigen.",betekenis:"Zou gat in fortenketen opvullen indien bevestigd.",bronnen:[]},"Castellum Kessel-Lith":{naam:"Kessel-Lith",type:"castellum",periode:"3e - 4e eeuw n.Chr.",beschrijving:"Laat-Romeins castellum uit de 3e-4e eeuw bij Kessel-Lith aan de Maas. Gebouwd in een periode van Germaanse invallen toen de oude Limes niet meer te handhaven was. Dit type forten was compacter en zwaarder versterkt dan de vroege castella. De locatie bij een rivierovergang bleef strategisch. Typische laat-Romeinse vondsten: gordels met riemtongen, militaire gespen, munten van 3e-4e eeuwse keizers. Het fort toont de veranderde militaire strategie van het late Romeinse Rijk.",watWasHier:"Laat-Romeins fort, compacter en zwaarder versterkt.",watTeZien:"Locatie bekend, weinig zichtbaar.",verwachteVondsten:"Laat-Romeinse munten, gordelbeslag, riemtongen, 3e-4e eeuws aardewerk.",betekenis:"Toont Romeinse aanpassing aan nieuwe dreigingen.",bronnen:[]},Carvo:{naam:"Carvo",latinNaam:"Carvo",type:"versterking",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke Romeinse versterking nabij Kesteren in de Betuwe. De naam komt voor op de Peutingerkaart. Kesteren lag in het hart van het Bataafse stamgebied. De Bataven waren belangrijke bondgenoten van Rome en leverden beroemde cavalerie-eenheden. Een versterking hier zou zowel bescherming als controle bieden. De exacte locatie is niet vastgesteld. Vondsten in de regio tonen intensief Romeins-Bataafs contact: import-aardewerk, wapens, paardentuig.",watWasHier:"Vermoedelijke versterking in Bataafs kerngebied.",watTeZien:"Locatie onbekend.",verwachteVondsten:"Gemengd Romeins-Bataafse voorwerpen, paardentuig.",betekenis:"Zou Romeinse aanwezigheid in Bataafs gebied tonen.",bronnen:[]},Mannaricium:{naam:"Mannaricium",latinNaam:"Mannaricium",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Vermoedelijke locatie van het Romeinse castellum Mannaricium bij Maurik aan de Rijn. De naam komt voor op de Peutingerkaart. Het fort zou de rivierroute hebben bewaakt tussen Levefanum (Wijk bij Duurstede) en forten stroomopwaarts. De moderne plaats Maurik zou afgeleid kunnen zijn van Mannaricium. Bij bouwwerkzaamheden zijn Romeinse vondsten gedaan die op een fort wijzen. De exacte contouren zijn niet bekend.",watWasHier:"Vermoedelijk castellum aan de Rijn. Vermeld op Peutingerkaart.",watTeZien:"Geen zichtbare resten. Gebied bebouwd.",verwachteVondsten:"Militaria, aardewerk, munten bij bouwwerkzaamheden.",betekenis:"Mogelijke herkomst plaatsnaam Maurik.",bronnen:[]},Oostvoorne:{naam:"Castellum Oostvoorne",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins kustfort bij de monding van de Waal en Maas, nu verdwenen in zee door kustafslag. Het fort bewaakte de zeeroute en beschermde tegen piraterij. De kust lag in de Romeinse tijd kilometers verder westwaarts. Door zeespiegelstijging en erosie is het fort in de golven verdwenen. Na stormen spoelen soms vondsten aan op de stranden van Voorne-Putten: munten, aardewerk, metalen voorwerpen. De Brittenburg bij Katwijk was een soortgelijk lot beschoren.",watWasHier:"Kustfort bij riviermonding. Bewaking zeeroute.",watTeZien:"Fort verdwenen in zee. Soms strandvondsten na stormen.",verwachteVondsten:"Na stormen: munten, aardewerk, metalen op strand.",betekenis:"Toont voormalige kustlijn en Romeinse kustverdediging.",bronnen:[]},"Castellum Randwijk":{naam:"Castellum Randwijk",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke locatie van een Romeins castellum bij Randwijk aan de Rijn in de Betuwe. Het bestaan en de exacte locatie zijn onzeker. De rivier heeft veel oude resten weggespoeld. Randwijk ligt tussen bekende fortlocaties wat een fort hier logisch zou maken. In de uiterwaarden zijn bij erosie Romeinse vondsten gedaan. Het dynamische rivierlandschap maakt onderzoek lastig maar kan ook vondsten blootleggen na hoog water.",watWasHier:"Mogelijk castellum. Bestaan en locatie onzeker.",watTeZien:"Geen zichtbare resten. Uiterwaarden.",verwachteVondsten:"Mogelijk vondsten na erosie of hoog water.",betekenis:"Zou gat in fortenketen opvullen indien bevestigd.",bronnen:[]},"Versterking Scheveningseweg":{naam:"Minifort Scheveningseweg",type:"minifort",periode:"2e eeuw n.Chr.",beschrijving:"Vermoede locatie van een klein Romeins kustfort bij de Scheveningseweg in Den Haag, vergelijkbaar met het nabije Minifort Ockenburg. Dit type miniforten bewaakte de kust tegen piraten en Germaanse raids over zee. Ruimte voor 20-30 soldaten. De exacte locatie is niet vastgesteld maar vondsten in de omgeving suggereren Romeinse militaire aanwezigheid. Het zou aantonen dat de gehele Noordzeekust werd bewaakt, niet alleen de riviermonding.",watWasHier:"Vermoedelijk klein kustfort zoals Ockenburg. 20-30 soldaten.",watTeZien:"Locatie niet vastgesteld.",verwachteVondsten:"Militaria, aardewerk 2e eeuw indien locatie gevonden.",betekenis:"Zou Romeinse kustverdediging Den Haag bevestigen.",bronnen:[]},"Tongeren - Sacramentstraat":{naam:"Atuatuca Tungrorum",latinNaam:"Atuatuca Tungrorum / Municipium Tungrorum",type:"legerkamp",periode:"ca. 10 v.Chr. - 400 n.Chr.",beschrijving:"Oudste stad van Belgi, gesticht ca. 10 v.Chr. Hoofdstad van de Civitas Tungrorum - met 150 hectare de grootste civitas van Noordwest-Europa! Strategisch gelegen op de weg Boulogne-Bavay-Keulen. Onder keizer Trajanus (2e eeuw) ommuurd met meer dan 4,5 km muren en tot 3 grachten - waarvan nog 1,5 km staat! Een 1e-eeuwse buste van Julius Caesar is een topstuk. Het Gallo-Romeins Museum (Europees Museum van het Jaar 2011) toont een schat aan vondsten: beelden, steles, sieraden, architectuurelementen. Ook de Romeinse muren, het tempelcomplex, het aquaduct van Beukenberg en tumuli zijn te bezoeken.",watWasHier:"Civitas-hoofdstad Tungri (150 ha). 4,5 km stadsmuur. Politiek en religieus centrum.",watTeZien:"Gallo-Romeins Museum. Romeinse muren (1,5 km). Tempelcomplex. Aquaduct Beukenberg. Tumuli.",verwachteVondsten:"Stadsaardewerk, bouwmateriaal, munten, inscripties, religieuze objecten.",betekenis:"Oudste stad van Belgi. Grootste civitas van Noordwest-Europa.",bronnen:["https://www.galloromeinsmuseum.be","https://www.canonvanvlaanderen.be/en/events/tongeren-a-roman-town/"]},"Valkenburg-Marktveld, mini-castellum":{naam:"Marktveld Valkenburg",type:"minifort",periode:"1e - 2e eeuw n.Chr.",beschrijving:"Klein Romeins castellum met wachttoren bij het Marktveld in Valkenburg (Zuid-Holland), nabij het grotere Praetorium Agrippinae. Dit type miniforten vulde de ruimtes tussen de grote castella op. Wachttoren voor signalering en kleine bezetting voor patrouilles. De combinatie van toren en klein fort was effectief voor grensbewaking. Bij opgravingen zijn de contouren vastgesteld. Vondsten in Archeologisch Steunpunt Valkenburg.",watWasHier:"Klein fort met wachttoren. Aanvulling op Praetorium Agrippinae.",watTeZien:"Archeologisch Steunpunt Valkenburg.",verwachteVondsten:"Militaria, aardewerk, kleine persoonlijke voorwerpen.",betekenis:"Toont gelaagdheid Romeinse grensverdediging.",bronnen:[]},"Wachttoren a":{naam:"Wachttoren Utrecht-West",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Een van meerdere Romeinse wachttorens in de omgeving van Utrecht, onderdeel van het signaleringssysteem langs de Limes. De torens stonden om de 1-2 kilometer met zicht op elkaar. Bij nadering van vijanden werden vuur- of rooksignalen gegeven. Binnen minuten kon de hele grens gewaarschuwd zijn. Kleine houten constructie op aarden verhoging met bezetting van 4-8 soldaten. Vondsten zijn schaars door de kleine schaal.",watWasHier:"Houten signaleertoren. 4-8 soldaten.",watTeZien:"Geen zichtbare resten.",verwachteVondsten:"Kleine hoeveelheden aardewerk en militaria.",betekenis:"Onderdeel vroegwaarschuwingssysteem.",bronnen:[]},"Wachttoren b":{naam:"Wachttoren Utrecht-Oost",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse wachttoren ten oosten van Utrecht, onderdeel van de keten signaleertorens langs de Rijn. Elke toren had zichtlijn naar de volgende. Dit systeem maakte snelle communicatie mogelijk in een tijd zonder telegraaf of telefoon. De soldaten woonden in of bij de toren en hielden permanent wacht. Bij gevaar werden brandende fakkels of rookpotten gebruikt. De locatie is archeologisch vastgesteld maar niet zichtbaar.",watWasHier:"Signaleertoren in torenketen. Permanente wacht.",watTeZien:"Geen zichtbare resten.",verwachteVondsten:"Aardewerk, militaria, persoonlijke bezittingen.",betekenis:"Onderdeel communicatienetwerk Limes.",bronnen:[]},"Wachttoren c":{naam:"Wachttoren Hoge Woerd",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse wachttoren nabij Castellum Op de Hoge Woerd, onderdeel van het signaleringssysteem. Torens bij forten dienden als vooruitgeschoven posten en waarschuwingsplaatsen. De combinatie van fort met omringende torens was de standaard Romeinse grensverdediging. Het Archeologisch Park Hoge Woerd geeft een goed beeld van hoe dit systeem functioneerde. De toren zelf is niet gereconstrueerd maar de context is te begrijpen.",watWasHier:"Signaleertoren bij castellum. Vooruitgeschoven post.",watTeZien:"Archeologisch Park Hoge Woerd toont context.",verwachteVondsten:"Aardewerk, militaria.",betekenis:"Toont samenhang fort en torens.",bronnen:[]},"Zwammerdam-Rijksstraatweg":{naam:"Zwammerdam-Rijksstraatweg",type:"versterking",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke militaire nederzetting aan de Rijksstraatweg in Zwammerdam, naast het bekende Nigrum Pullum fort. Mogelijk een vicus (burgerdorp) of aparte militaire faciliteit. Bij Zwammerdam werden de beroemde Romeinse schepen gevonden. De hele zone langs de Oude Rijn was dicht bezet met militaire en civiele structuren. Vondsten wijzen op intensieve Romeinse activiteit: aardewerk, munten, militaria en door de natte veenbodem ook organisch materiaal.",watWasHier:"Mogelijk vicus of militaire faciliteit nabij Nigrum Pullum.",watTeZien:"Geen zichtbare resten.",verwachteVondsten:"Aardewerk, munten, militaria, organisch materiaal.",betekenis:"Toont dichtheid Romeinse bewoning langs Oude Rijn.",bronnen:[]},"Kastell Aachen":{naam:"Aquae Granni",latinNaam:"Aquae Granni",type:"versterking",periode:"1e - 4e eeuw n.Chr.",beschrijving:'Romeinse kuuroord bij de hete bronnen (tot 75C!) gewijd aan Apollo en de Keltische geneesheer Grannos - "aan de wateren van Grannos". In de 1e eeuw uitgebouwd tot kurort voor de legioenen van Neder-Germani. Onder keizer Trajanus bouwden legioenen uit Xanten een aquaduct en thermen onder de huidige Dom. De Mnsterthermen hadden de indeling van een valetudinarium (Romeins hospitaal). Karel de Grote bouwde hier zijn Pfalz (793-813) en maakte Aken tot keizerlijke residentie - bewust als "vernieuwer van het Romeinse Rijk". De Dom (UNESCO 1978, eerste in Duitsland!) staat op Romeinse fundamenten. Karel stierf hier in 814.',watWasHier:"Kurort voor legioenen. Thermen. Later keizerlijke Pfalz van Karel de Grote.",watTeZien:"Dom (UNESCO). Centre Charlemagne. Thermen onder de stad.",verwachteVondsten:"Badhuisresten, inscripties, munten, Romeins en Karolingisch bouwmateriaal.",betekenis:"Ononderbroken bewoning van Romeinse tijd tot Karel de Grote. Eerste UNESCO-site Duitsland.",bronnen:["https://centre-charlemagne.eu/zeitreise/?lang=en","http://www.aquaegranni.de/","https://de.wikipedia.org/wiki/Aquae_Granni"]},Hazerswoude:{naam:"Hazerswoude-Rijndijk",type:"wachttoren",periode:"2e - 3e eeuw n.Chr.",beschrijving:"Bevestigde Romeinse wachtpost langs de Limesweg bij Hazerswoude-Rijndijk. Bij opgravingen in 2021-2023 door Vestigia BV en het Rijksmuseum van Oudheden zijn spectaculaire vondsten gedaan: resten van de houten Limesweg (eiken palen uit 124-125 n.Chr.), een Romeinse dam, en aanwijzingen voor een kleine wachtpost. Bijzondere vondsten: de eerste Romeinse mijlpaal in Nederland (2023), een muntschat met 22 zilveren munten (na 166 n.Chr.), aardewerk, mantelspelden, leren schoenzolen en ca. 40.000-50.000 objecten. De locatie ligt precies tussen Albaniana (Alphen) en Matilo (Leiden).",watWasHier:"Wachtpost langs de Limesweg. Houten wegdek uit 124-125 n.Chr.",watTeZien:"Opgravingen afgerond. Vondsten naar Rijksmuseum van Oudheden.",verwachteVondsten:"Militaria, munten, aardewerk. Gebied grotendeels onderzocht.",betekenis:"Eerste Romeinse mijlpaal in Nederland. Bevestigt trac Limesweg.",bronnen:["https://www.rmo.nl/onderzoek/opgravingsprojecten/hazerswoude/","https://www.vestigia.nl/opgraving-hazerswoude-in-samenwerking-met-het-rijksmuseum-van-oudheden-en-de-gemeente-alphen-aan-den-rijn/","https://romeinsalphen.nl/themas/romeinse-weg-hazerswoude-rijndijk"]},Albaniana:{naam:"Albaniana",latinNaam:"Albaniana",type:"castellum",periode:"41 - 275 n.Chr.",beschrijving:"Groot Romeins castellum bij Alphen aan den Rijn, een van de belangrijkste forten aan de Nederlandse Limes. Het fort werd gesticht in 41-42 n.Chr., kort na de dood van keizer Caligula. De locatie is nauwkeurig bekend: bij het Rijnplein en Theater Castellum aan de Castellumstraat. Het fort (80x120m) was beschermd door een omgrachte aarden wal. Bij opgravingen tussen 1950 en 2002 zijn uitgebreide resten gevonden. Door de natte bodem zijn veel houten structuren bewaard gebleven. Een bronzen maquette van het castellum staat op het Rijnplein.",watWasHier:"Castellum met vicus. Locatie bekend: Rijnplein/Castellumstraat.",watTeZien:"Bronzen maquette Rijnplein. Theater Castellum op fortlocatie. Archeon.",verwachteVondsten:"Munten, militaria, aardewerk, dakpannen, fibulae. Veel bij bouwwerkzaamheden.",betekenis:"Een van de hoofdforten aan de Limes. UNESCO Werelderfgoed.",bronnen:["https://www.hierisalphen.nl/home/ontdekken/romeinse-limes","https://www.romeinen.nl/weten/nederland-in-de-romeinse-tijd/zuid-holland/alphen-aan-den-rijn","https://archeologiehuiszuidholland.nl/zien-en-doen/het-archeologiehuis/fort-aan-de-rijn"]}},dTt={naam:"Romeins fort",type:"versterking",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse militaire versterking langs de Limes, de noordgrens van het Romeinse Rijk. Forten lagen om de 10-15 km langs de Rijn. Garnizoen van hulptroepen (auxilia) die de grens bewaakten tegen Germaanse invallen. Standaard rechthoekige plattegrond met houten of stenen muur, gracht, poorten en binnengebouwen (barakken, commandopost, graanopslagplaats, werkplaatsen). Buiten de muren vaak een vicus (burgerdorp) met handelaren en soldatenfamilies. Vondsten: munten, fibulae (mantelspelden), aardewerk, wapens, gereedschap. Onderdeel van UNESCO Werelderfgoed sinds 2021."},fTt={castellum:"Castellum (legerplaats)",wachttoren:"Wachttoren (signaalpost)",vlootbasis:"Vlootbasis (haven)",legerkamp:"Legerkamp (castra)",minifort:"Minifort (wachtpost)",versterking:"Versterking",villa:"Villa (militair gebruikt)"};lr.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");function Fae(t){if(!t)return t;const e={Mo:"ma",Tu:"di",We:"wo",Th:"do",Fr:"vr",Sa:"za",Su:"zo",Mon:"ma",Tue:"di",Wed:"wo",Thu:"do",Fri:"vr",Sat:"za",Sun:"zo",PH:"feestdagen",SH:"schoolvakantie"};let n=t;return Object.entries(e).forEach(([r,i])=>{n=n.replace(new RegExp(`\\b${r}\\b`,"gi"),i)}),n=n.replace(/\boff\b/gi,"gesloten").replace(/\bclosed\b/gi,"gesloten").replace(/\bopen\b/gi,"open"),n}async function pTt(t){try{const e=Fn(t),n=lr("EPSG:4326","EPSG:28992",e);if(n[0]<7e3||n[0]>3e5||n[1]<289e3||n[1]>629e3)return null;const r=1,s=`https://service.pdok.nl/rws/ahn/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=dtm_05m&QUERY_LAYERS=dtm_05m&INFO_FORMAT=application/json&CRS=EPSG:28992&BBOX=${`${n[0]-r},${n[1]-r},${n[0]+r},${n[1]+r}`}&WIDTH=1&HEIGHT=1&I=0&J=0`,a=await(await fetch(s)).json();if(a.features&&a.features.length>0){const l=a.features[0].properties,c=l?.value_list??l?.GRAY_INDEX??l?.value??l?.gray_index;if(c!=null){const u=typeof c=="number"?c:parseFloat(c);if(!isNaN(u))return u}}}catch(e){console.warn("AHN height query failed:",e)}return null}const mTt={ABG:"Alphen-Chaam",ACM:"Alkmaar",ALF:"Alfen",ALK:"Alkemade",AML:"Ameland",AMR:"Amerongen",AMS:"Amsterdam",ANL:"Anloo",APD:"Apeldoorn",ARN:"Arnhem",ASN:"Assen",AVW:"Avenhorn",BDA:"Breda",BLK:"Blokker",BRN:"Barneveld",DEL:"Delft",DHG:"Den Haag",DRD:"Dordrecht",EHV:"Eindhoven",EMN:"Emmen",EPE:"Epe",GNP:"Gennep",GRN:"Groningen",GRV:"Grave",GTB:"Giethoorn",HDK:"Harderwijk",HLM:"Haarlem",HLN:"Heiloo",HRL:"Harlingen",HTN:"Houten",LDN:"Leiden",LWR:"Leeuwarden",MST:"Maastricht",NKK:"Nijkerk",NMG:"Nijmegen",OTM:"Ootmarsum",RTD:"Rotterdam",SND:"Sneek",TBG:"Tilburg",UTR:"Utrecht",VLO:"Venlo",WGN:"Wageningen",ZWL:"Zwolle",ZTP:"Zutphen",444:"Houten",811:"Gouda",310:"Utrecht",344:"Amsterdam",363:"Rotterdam",518:"Den Haag",758:"Eindhoven",772:"Tilburg",855:"Breda",85:"Arnhem",268:"Nijmegen",14:"Groningen",80:"Leeuwarden",995:"Maastricht",106:"Enschede",153:"Zwolle",34:"Almere"},gTt={1:"Zeer lage trefkans op archeologische resten",2:"Lage trefkans op archeologische resten",3:"Middelhoge trefkans op archeologische resten",4:"Hoge trefkans op archeologische resten",5:"Lage trefkans (water)",6:"Middelhoge trefkans (water)",7:"Hoge trefkans (water)",8:"Water",9:"Niet gekarteerd"};function Vae(t,e){const n=[],r=t.toLowerCase(),i=(e||"").toLowerCase();return r.includes("kalkhoudend")||i.endsWith("a")?n.push("Kalkhoudend = goede metaalconservering"):(r.includes("kalkarm")||r.includes("kalkloos"))&&n.push("Kalkarm = meer corrosie op metalen"),r.includes("poldervaag")?n.push("Poldervaaggrond = jonge rivierklei, ingepolderd gebied"):r.includes("enkeerdgrond")||r.includes("enk")?n.push("Enkeerdgrond = oude akkers met plaggenbemesting - archeologisch interessant!"):r.includes("podzol")?n.push("Podzolgrond = uitgeloogde zandgrond, vaak zuur"):(r.includes("veengrond")||r.includes("veen"))&&n.push("Veengrond = zuur, slechte metaalconservering (tenzij waterverzadigd)"),r.includes("zware klei")?n.push("Zware klei = moeilijk graven, goede conservering"):r.includes("lichte klei")||r.includes("zavel")?n.push("Zavel/lichte klei = redelijk te graven"):r.includes("zand")&&!r.includes("zavel")&&n.push("Zandgrond = makkelijk graven"),r.includes("rivierklei")||i.startsWith("r")?n.push("Rivierafzetting"):(r.includes("zeeklei")||i.startsWith("m"))&&n.push("Zeekleiafzetting"),n}function yTt(){const t=li(wt=>wt.map);gr(wt=>wt.isDrawingMode);const e=yh(wt=>wt.removeVondst),n=yh(wt=>wt.updateVondst),r=yh(wt=>wt.vondsten),{layers:i,addPoint:s,addLayer:o}=ms(),[a,l]=Y.useState([]),[c,u]=Y.useState(0),[h,f]=Y.useState(!1),[g,y]=Y.useState(null),[_,b]=Y.useState(!1),[T,A]=Y.useState(!1),[I,P]=Y.useState(null),[M,V]=Y.useState(null),[C,N]=Y.useState(null),[O,L]=Y.useState(null),[F,G]=Y.useState(!1),[U,he]=Y.useState(null),[Ie,ze]=Y.useState(null),[Oe,fe]=Y.useState(null),[ge,Se]=Y.useState(!1),[Z,W]=Y.useState(""),[ne,ie]=Y.useState([]),le=ne[c]||null,[xe,qe]=Y.useState(()=>{const wt=localStorage.getItem("popupTextScale");return wt?parseInt(wt):100}),[Ke,ke]=Y.useState("half"),be=wt=>{qe(wt),localStorage.setItem("popupTextScale",wt.toString())},Dt=a[c]||"",Ye=a.length>1,cn=wt=>{const Qn=wt.match(/<strong[^>]*>(.*?)<\/strong>/);if(Qn){const dr=Qn[1].replace(/<[^>]+>/g,""),Vt=wt.replace(Qn[0],"").replace(/^(<br\s*\/?>)+/,"");return{title:dr,contentWithoutTitle:Vt}}return{title:"",contentWithoutTitle:wt}},jt=wt=>wt.replace(/class="([^"]*)"/g,(dr,Vt)=>{if(Vt.includes("text-xs")){const jn=Vt.replace(/\btext-xs\b/g,"").trim();return jn?`style="font-size:0.857em" class="${jn}"`:'style="font-size:0.857em"'}if(Vt.includes("text-sm")){const jn=Vt.replace(/\btext-sm\b/g,"").trim();return jn?`class="${jn}"`:""}return dr}).replace(/class=""/g,""),{title:gn,contentWithoutTitle:wn}=cn(Dt),pt=jt(wn),hr=Dt.includes("Landbouwperceel"),zn=Dt.includes("data-vondst-id="),Hn=()=>{u(wt=>(wt-1+a.length)%a.length)},ei=()=>{u(wt=>(wt+1)%a.length)},xo=async()=>{if(console.log(" HOOGTEKAART KNOP GEKLIKT"),console.log(" parcelCoordinate uit state:",g),!t||!g||T){console.log(" STOP - map:",!!t,"coord:",g,"loading:",T);return}console.log(` DOORGEVEN AAN showParcelHeightMap: [${g[0]}, ${g[1]}]`),A(!0);try{await wvt(t,g)&&b(!0)}catch(wt){console.error("Failed to load height map:",wt)}finally{A(!1)}},Rr=()=>{t&&(rG(t),b(!1))};Y.useEffect(()=>{if(!t)return;const wt=Vt=>{let jn='<strong class="text-purple-800">AMK Monument</strong>';if(Vt.toponiem&&(jn+=`<br/><span class="text-sm font-semibold">${Vt.toponiem}</span>`),Vt.kwaliteitswaarde&&(jn+=`<br/><span class="text-sm text-purple-700">${Vt.kwaliteitswaarde}</span>`),Vt.omschrijving&&(jn+=`<br/><span class="text-xs text-gray-600 mt-1 block">${Vt.omschrijving}</span>`),Vt.txt_label){const nn=Vt.txt_label.split(", ").slice(0,3).join(", ");jn+=`<br/><span class="text-xs text-gray-500 italic">${nn}${Vt.txt_label.split(", ").length>3?"...":""}</span>`}return jn},Qn=async(Vt,jn)=>{const nn=[],Fo=t.getLayers().getArray().filter(Gi=>Gi instanceof $f&&Gi.getVisible()?Gi.getSource()instanceof bRe:!1);for(const Gi of Fo){const $s=Gi.getSource();if(!$s)continue;const Nn=Gi.get("title")||"";if(Nn.startsWith("Paleokaart"))continue;if(Nn==="Archeo Landschappen"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=100,z=`https://services.rce.geovoorziening.nl/landschappenkaart/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=landschappenkaart_nl&QUERY_LAYERS=landschappenkaart_nl&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,Ve=ae.landschapsnaam||ae.naam||"Archeologisch Landschap",ee=ae.omschrijving||"";let ye=`<strong class="text-green-800">${Ve}</strong>`;ee&&(ye+=`<br/><span class="text-sm text-gray-600">${ee}</span>`),ye+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',ye+='<div class="text-sm text-gray-700 mt-1">Een archeologisch landschap is een gebied waar het landschap nog sporen draagt van menselijke activiteit uit het verleden. Denk aan oude akkers, nederzettingen of verdedigingswerken.</div>',ye+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ye+='<div class="text-sm text-gray-700 mt-1">Aardewerk, munten, gereedschap en andere voorwerpen van vroegere bewoners. De kans op vondsten hangt af van het type landschap.</div>',ye+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',ye+='<div class="text-sm text-gray-700 mt-1"><a href="https://www.cultureelerfgoed.nl/onderwerpen/bronnen-en-kaarten/overzicht/landschappenkaart" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">RCE Landschappenkaart</a></div>',ye+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Landschapstypen_van_Nederland" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Landschapstypen</a></div>',nn.push(ye)}}catch(He){console.warn("Archeo Landschappen WMS query failed:",He)}continue}if(Nn==="Essen"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=100,z=`https://services.rce.geovoorziening.nl/landschapsatlas/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=essen&QUERY_LAYERS=essen&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let Ve='<strong class="text-amber-800">Es (historisch akkercomplex)</strong>';(ae.naam||ae.Naam||ae.NAME)&&(Ve+=`<br/><span class="text-sm font-semibold text-amber-700">${ae.naam||ae.Naam||ae.NAME}</span>`),(ae.type||ae.Type||ae.TYPE)&&(Ve+=`<br/><span class="text-xs text-gray-600">${ae.type||ae.Type||ae.TYPE}</span>`),(ae.omschrijving||ae.Omschrijving)&&(Ve+=`<br/><span class="text-xs text-gray-500">${ae.omschrijving||ae.Omschrijving}</span>`),Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is een es?</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1">Een es is een oud akkercomplex op hogere zandgronden. Eeuwenlang werden hier gewassen verbouwd. De bodem werd bemest met plaggen en mest, waardoor de grond donker en vruchtbaar werd.</div>',Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1">Munten, gespen, knopen, aardewerk en soms bijzondere voorwerpen die door bemesting op het land terechtkwamen. Essen behoren tot de beste vindplaatsen voor metaaldetectie.</div>',Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Conservering</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1 italic">De zure zandgrond tast metaal aan. IJzer en koper zijn vaak slecht bewaard. Zilver en brons houden zich beter.</div>',Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Es_(geografie)" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Es (geografie)</a></div>',nn.push(Ve)}}catch(He){console.warn("Essen WMS query failed:",He)}continue}if(Nn==="FAMKE Steentijd"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=`https://geoportaal.fryslan.nl/arcgis/rest/services/Themas/cultuurhistorie/MapServer/2/query?geometry=${Pe[0]},${Pe[1]}&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=BESCHR,BESCHRTOELICHTING,BESCHRLINK&returnGeometry=false&f=json`,z=await(await fetch(Ce)).json();if(z.features&&z.features.length>0){const Tt=z.features[0].attributes;let X='<strong class="text-amber-800">FAMKE Steentijd-Bronstijd</strong>';X+='<br/><span class="text-sm text-gray-500">Friese verwachtingskaart</span>';const ae=Tt.BESCHR||"";ae&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Advies</span></div>',X+=`<div class="text-sm text-amber-700 mt-1 font-medium">${ae}</div>`);const Ve=Tt.BESCHRTOELICHTING||"";Ve&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Toelichting</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${Ve}</div>`);const ee=Tt.BESCHRLINK||"";ee&&(X+=`<div class="mt-3"><a href="${ee}" target="_blank" rel="noopener noreferrer" class="text-sm text-blue-600 hover:underline">Meer informatie</a></div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is FAMKE?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">FAMKE is de Friese Archeologische Monumentenkaart Extra. Deze kaart toont waar in Friesland vondsten uit de steentijd en bronstijd te verwachten zijn.</div>',nn.push(X)}}catch(He){console.warn("FAMKE Steentijd query failed:",He)}continue}if(Nn==="FAMKE IJzertijd"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=`https://geoportaal.fryslan.nl/arcgis/rest/services/Themas/cultuurhistorie/MapServer/1/query?geometry=${Pe[0]},${Pe[1]}&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=BESCHR,BESCHRTOELICHTING,BESCHRLINK&returnGeometry=false&f=json`,z=await(await fetch(Ce)).json();if(z.features&&z.features.length>0){const Tt=z.features[0].attributes;let X='<strong class="text-orange-800">FAMKE IJzertijd-Middeleeuwen</strong>';X+='<br/><span class="text-sm text-gray-500">Friese verwachtingskaart</span>';const ae=Tt.BESCHR||"";ae&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Advies</span></div>',X+=`<div class="text-sm text-orange-700 mt-1 font-medium">${ae}</div>`);const Ve=Tt.BESCHRTOELICHTING||"";Ve&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Toelichting</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${Ve}</div>`);const ee=Tt.BESCHRLINK||"";ee&&(X+=`<div class="mt-3"><a href="${ee}" target="_blank" rel="noopener noreferrer" class="text-sm text-blue-600 hover:underline">Meer informatie</a></div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is FAMKE?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">FAMKE is de Friese Archeologische Monumentenkaart Extra. Deze kaart toont waar in Friesland vondsten uit de ijzertijd tot en met de middeleeuwen te verwachten zijn.</div>',nn.push(X)}}catch(He){console.warn("FAMKE IJzertijd query failed:",He)}continue}if(Nn==="Archeo Onderzoeken"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=100,z=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&QUERY_LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}&FEATURE_COUNT=20`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0)for(const ae of X.features){const Ve=ae.properties,ee=Ve.type_onderzoek||"",ye=Ve.projectnaam||Ve.project_naam||Ve.naam||"",je=ye&&ye!=="-"&&ye.trim()!==""&&!/^\d+$/.test(ye.trim())?ye:"",Je=Ve.gemeente||"",Ge=Ve.uitvoerder||"",nt=Ve.onderzoeksmeldingnummer||"",et=Ve.adres||Ve.straat||"";let Mt="Archeologisch Onderzoek";je?Mt=je:Je&&et?Mt=`${Je} - ${et}`:Je&&(Mt=`Onderzoek ${Je}`);let Gt=`<strong class="text-blue-800">${Mt}</strong>`;if(ee&&(Gt+=`<br/><span class="text-sm font-semibold text-blue-700">${ee}</span>`),Je&&!Mt.includes(Je)&&(Gt+=`<br/><span class="text-sm text-gray-700">${Je}</span>`),et&&!Mt.includes(et)&&(Gt+=`<br/><span class="text-sm text-gray-600">${et}</span>`),nt&&(Gt+=`<br/><span class="text-xs text-gray-500 font-mono">OM: ${nt}</span>`),Ge&&(Gt+=`<br/><span class="text-sm text-gray-700">Uitvoerder: ${Ge}</span>`),Ve.startdatum||Ve.einddatum){const re=[Ve.startdatum,Ve.einddatum].filter(Boolean).join(" - ");Gt+=`<br/><span class="text-xs text-gray-600">Periode: ${re}</span>`}const _n=[];Ve.periode_paleolithicum&&_n.push("Paleolithicum"),Ve.periode_mesolithicum&&_n.push("Mesolithicum"),Ve.periode_neolithicum&&_n.push("Neolithicum"),Ve.periode_bronstijd&&_n.push("Bronstijd"),Ve.periode_ijzertijd&&_n.push("IJzertijd"),Ve.periode_romeins&&_n.push("Romeins"),Ve.periode_middeleeuwen&&_n.push("Middeleeuwen"),Ve.periode_nieuwe_tijd&&_n.push("Nieuwe tijd"),_n.length>0&&(Gt+=`<br/><span class="text-sm text-purple-700">Datering: ${_n.join(", ")}</span>`),Gt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',ee.toLowerCase().includes("opgraving")?Gt+='<div class="text-sm text-gray-700 mt-1">Hier is een archeologische opgraving gedaan. Professionele archeologen hebben vondsten en sporen gedocumenteerd en geborgen.</div>':ee.toLowerCase().includes("bureauonderzoek")?Gt+='<div class="text-sm text-gray-700 mt-1">Een bureauonderzoek naar de archeologische verwachting op basis van historische bronnen en kaarten.</div>':ee.toLowerCase().includes("booronderzoek")?Gt+='<div class="text-sm text-gray-700 mt-1">Met boringen is onderzocht wat er in de grond zit. Vaak de eerste stap om te bepalen of er verder onderzoek nodig is.</div>':ee.toLowerCase().includes("proefsleuven")?Gt+='<div class="text-sm text-gray-700 mt-1">Proefsleuven zijn gegraven om te kijken of er archeologische sporen in de grond zitten.</div>':ee.toLowerCase().includes("begeleiding")?Gt+='<div class="text-sm text-gray-700 mt-1">Archeologische begeleiding bij graafwerk. Een archeoloog was aanwezig om te controleren of er vondsten naar boven kwamen.</div>':ee.toLowerCase().includes("inventariserend")||ee.toLowerCase().includes("karterend")?Gt+='<div class="text-sm text-gray-700 mt-1">Verkennend onderzoek om te bepalen of er archeologische resten in de grond kunnen zitten.</div>':Gt+='<div class="text-sm text-gray-700 mt-1">Op deze locatie is archeologisch onderzoek uitgevoerd. De resultaten zijn opgeslagen in het landelijke archief.</div>',Gt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Interessant voor detectie?</span></div>',Gt+='<div class="text-sm text-gray-700 mt-1 italic">Onderzoekslocaties kunnen interessant zijn: archeologen vinden vaak niet alles. Maar check altijd eerst of je daar mag zoeken.</div>',Gt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Rapport opzoeken</span></div>';let q="";if(je?q=je:Ge&&Je?q=`${Ge} ${Je}`:Je&&(q=Je),q){const re=q.length>35?q.substring(0,35)+"...":q;Gt+=`<div class="text-sm text-gray-700 mt-1"><a href="https://archaeology.datastations.nl/dataverse/root?q=${encodeURIComponent(q)}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Zoek "${re}" in DANS</a></div>`,Gt+=`<div class="text-sm text-gray-700 mt-1"><a href="https://scholar.google.nl/scholar?q=${encodeURIComponent(q+" archeologisch rapport")}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Zoek in Google Scholar</a></div>`}nt&&(Gt+=`<div class="text-sm text-gray-700 mt-1"><a href="https://archis.cultureelerfgoed.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Zoek OM ${nt} in ARCHIS</a> <span class="text-xs text-gray-400">(account nodig)</span></div>`),nn.push(Gt)}}catch(He){console.warn("Archeo Onderzoeken WMS query failed:",He)}continue}if(Nn==="IKAW"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=500,z=`https://services.rce.geovoorziening.nl/ikaw/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&QUERY_LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,Ve=Math.round(ae.PALETTE_INDEX||ae.palette_index||0),ee=gTt[Ve]||`Trefkans onbekend (${Ve})`;let ye='<strong class="text-orange-800">IKAW Verwachtingskaart</strong>';ye+='<br/><span class="text-sm text-gray-500">Kaart met kansen op archeologische vondsten</span>',ye+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',ye+=`<div class="text-sm text-orange-700 mt-1">${ee}</div>`;const Je={1:{tekst:"De kans op archeologische vondsten is hier zeer klein. De grond is waarschijnlijk verstoord of te jong.",vondsten:"Niet veel te verwachten, maar verrassingen zijn altijd mogelijk.",kleur:"text-gray-600"},2:{tekst:"De kans op vondsten is laag, maar niet uitgesloten. Soms worden hier toch interessante objecten gevonden.",vondsten:"Af en toe losse vondsten uit verschillende periodes.",kleur:"text-yellow-600"},3:{tekst:"Dit is een interessant gebied met een redelijke kans op vondsten. Hier woonden of werkten mensen in het verleden.",vondsten:"Aardewerk, munten, metalen voorwerpen uit verschillende tijdperken.",kleur:"text-amber-600"},4:{tekst:"Dit is een zeer kansrijk gebied! Hier zijn waarschijnlijk resten van oude bewoning of activiteit. Let op: bij graafwerk kan een vergunning nodig zijn.",vondsten:"Grote kans op interessante vondsten: aardewerk, munten, sieraden, gereedschap.",kleur:"text-orange-600"},5:{tekst:"Dit is een waterbodem. Vondsten zijn hier moeilijker te bereiken maar kunnen goed bewaard zijn gebleven.",vondsten:"Scheepswrakken, verloren lading, gedumpte voorwerpen.",kleur:"text-blue-600"},6:{tekst:"Waterbodem met archeologische potentie. Hier kunnen interessante vondsten liggen die door het water goed bewaard zijn.",vondsten:"Scheepsresten, ankers, aardewerk, metalen voorwerpen.",kleur:"text-blue-600"},7:{tekst:"Waterbodem met hoge archeologische waarde. Hier zijn bekende vindplaatsen of scheepswrakken.",vondsten:"Belangrijke maritieme vondsten, beschermd gebied.",kleur:"text-blue-700"}}[Ve];Je&&(ye+=`<div class="text-sm ${Je.kleur} mt-1">${Je.tekst}</div>`,ye+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ye+=`<div class="text-sm text-gray-700 mt-1">${Je.vondsten}</div>`),ye+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de IKAW?</span></div>',ye+='<div class="text-sm text-gray-700 mt-1">De IKAW (Indicatieve Kaart Archeologische Waarden) toont de kans op archeologische vondsten in heel Nederland. De kaart is gemaakt door de Rijksdienst voor het Cultureel Erfgoed.</div>',nn.push(ye)}}catch(He){console.warn("IKAW WMS query failed:",He)}continue}if(Nn==="Inundatiegebieden"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=100,z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=inundaties&QUERY_LAYERS=inundaties&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let Ve='<strong class="text-blue-800">Inundatiegebied</strong>';(ae["linie-naam"]||ae.linie_naam)&&(Ve+=`<br/><span class="text-sm font-semibold text-blue-700">${ae["linie-naam"]||ae.linie_naam}</span>`),ae.naam&&(Ve+=`<br/><span class="text-sm text-gray-700">${ae.naam}</span>`),ae.periode&&(Ve+=`<br/><span class="text-xs text-gray-500">${ae.periode}</span>`),ae.lin_period&&(Ve+=`<br/><span class="text-xs text-gray-400">${ae.lin_period}</span>`),nn.push(Ve)}}catch(He){console.warn("Inundatiegebieden WMS query failed:",He)}continue}if(Nn==="Militaire Objecten"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=50,z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=objecten&QUERY_LAYERS=objecten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,Ve=ae.obj_soort||"",ee=ae.obj_naam||"",ye=ae.lin_period||"",je=ae["linie-naam"]||ae.linie_naam||"";let Je=Ve||"Militair Object",Ge="Dit is een historisch militair object uit de Nederlandse verdedigingsgeschiedenis.",nt="";const et=Ve.toLowerCase();et.includes("fort")?(Ge="Een fort is een versterkte verdedigingspost, vaak met dikke muren en geschutsopstellingen. Forten maakten deel uit van grotere verdedigingslinies.",nt="Rond forten worden soms kogels, knopen van uniformen, muntjes of andere militaire voorwerpen gevonden."):et.includes("schans")?(Ge="Een schans is een kleinere versterking, vaak gemaakt van aarde en palissaden. Schansen werden gebruikt om strategische punten te verdedigen.",nt="Bij schansen kun je musketkogels, knopen en soms munten uit de 17e-18e eeuw tegenkomen."):et.includes("batterij")||et.includes("battery")?(Ge="Een batterij is een geschutsopstelling, vaak op een strategische plek om vijanden onder vuur te nemen.",nt="Bij batterijen worden soms kanonkogels of onderdelen van geschut gevonden."):et.includes("bunker")||et.includes("kazemat")?(Ge="Een bunker of kazemat is een versterkte betonnen schuilplaats. Veel werden gebouwd rond 1940 als onderdeel van verdedigingslinies.",nt="Bij bunkers worden soms militaire voorwerpen uit WOII gevonden, zoals knopen, gespen of munitieresten."):et.includes("sluis")||et.includes("inlaatwerk")?(Ge="Militaire sluizen en inlaatwerken werden gebruikt om land onder water te zetten (inunderen). Dit was een belangrijke verdedigingstactiek.",nt="Bij historische sluizen worden soms voorwerpen gevonden van soldaten die deze bewaakten."):et.includes("toren")||et.includes("wachttoren")?(Ge="Wachttorens werden gebruikt om de omgeving in de gaten te houden en vijandelijke bewegingen te signaleren.",nt="Bij torens worden soms persoonlijke voorwerpen van soldaten gevonden."):et.includes("kazerne")&&(Ge="Een kazerne is een gebouw waar soldaten gelegerd waren. Hier woonden, aten en oefenden de troepen.",nt="Rond kazernes worden regelmatig knopen, gespen en andere persoonlijke voorwerpen gevonden.");let Mt=`<strong class="text-stone-800">${Je}</strong>`;ee&&(Mt+=`<br/><span class="text-sm font-semibold text-stone-700">${ee}</span>`),je&&(Mt+=`<br/><span class="text-sm text-blue-600">${je}</span>`),ye&&(Mt+=`<br/><span class="text-xs text-gray-500">${ye}</span>`),Mt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Mt+=`<div class="text-sm text-gray-700 mt-1">${Ge}</div>`,nt&&(Mt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Mt+=`<div class="text-sm text-gray-700 mt-1">${nt}</div>`),Mt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',Mt+='<div class="text-sm text-gray-700 mt-1">',Mt+='<a href="https://erfgoedenlocatie.nl/linies-en-stellingen" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">RCE Linies en Stellingen</a>',Mt+="</div>",nn.push(Mt)}}catch(He){console.warn("Militaire Objecten WMS query failed:",He)}continue}if(Nn==="Verdedigingslinies"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=100,z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=linies&QUERY_LAYERS=linies&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let Ve='<strong class="text-amber-800">Verdedigingslinie</strong>';const ee={"Hollandse Waterlinie":"Verdedigingsstelsel (1815-1940) dat gebruik maakte van inundaties om Holland te beschermen. UNESCO Werelderfgoed.","Nieuwe Hollandse Waterlinie":"Uitgebreide versie (1815-1940) met forten en inundatiegebieden van Muiden tot Gorinchem.","Stelling van Amsterdam":"Ringverdediging rond Amsterdam (1880-1920) met 42 forten. UNESCO Werelderfgoed.",Grebbelinie:"Verdedigingslinie langs de Grebbe (17e-20e eeuw). Zware gevechten in mei 1940.",IJssellinie:"Koude Oorlog verdediging (1950-1968) langs de IJssel tegen Sovjet-invasie.",Atlantikwall:"Duitse kustverdediging WOII (1942-1945) van Noorwegen tot Spanje.","Peel-Raamstelling":"Verdedigingslinie in Brabant/Limburg. Gevechten mei 1940.","Maas-Waalstelling":"Linie tussen Maas en Waal, onderdeel landsverdediging.",Zuiderwaterlinie:"Waterlinie in West-Brabant en Zeeland (17e-19e eeuw).","Staats-Spaanse Linies":"Vestingwerken uit de 80-jarige oorlog (1568-1648)."},ye=ae.naam||ae.lin_naam||"";if(ye){Ve+=`<br/><span class="text-sm font-semibold text-amber-700">${ye}</span>`;const je=Object.entries(ee).find(([Je])=>ye.toLowerCase().includes(Je.toLowerCase())||Je.toLowerCase().includes(ye.toLowerCase()));je&&(Ve+=`<br/><span class="text-sm text-gray-700">${je[1]}</span>`)}ae.lin_period&&(Ve+=`<br/><span class="text-xs text-purple-600">${ae.lin_period}</span>`),ae.status&&(Ve+=`<br/><span class="text-xs text-gray-400">${ae.status}</span>`),nn.push(Ve)}}catch(He){console.warn("Verdedigingslinies WMS query failed:",He)}continue}if(Nn==="Rijksmonumenten"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=50,z=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=rijksmonumentpunten&QUERY_LAYERS=rijksmonumentpunten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let Ve='<strong class="text-red-800">Rijksmonument</strong>';(ae.cbsNaam||ae.cbs_naam)&&(Ve+=`<br/><span class="text-sm font-semibold">${ae.cbsNaam||ae.cbs_naam}</span>`),ae.hoofdcategorie&&(Ve+=`<br/><span class="text-sm text-red-700">${ae.hoofdcategorie}</span>`),ae.subcategorie&&(Ve+=`<br/><span class="text-xs text-gray-600">${ae.subcategorie}</span>`),ae.rijksmonumentnummer&&(Ve+=`<br/><span class="text-xs text-gray-500">Nr: ${ae.rijksmonumentnummer}</span>`),(ae.bouwjaar||ae.oorspronkelijkebouwjaar)&&(Ve+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${ae.bouwjaar||ae.oorspronkelijkebouwjaar}</span>`),Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',ae.rijksmonumentnummer&&(Ve+=`<div class="text-sm text-gray-700 mt-1"><a href="https://monumentenregister.cultureelerfgoed.nl/monumenten/${ae.rijksmonumentnummer}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Bekijk in Monumentenregister</a></div>`),Ve+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Rijksmonument" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Rijksmonument</a></div>',nn.push(Ve)}}catch(He){console.warn("Rijksmonumenten WMS query failed:",He)}continue}if(Nn==="Werelderfgoed"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=500,z=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let Ve='<strong class="text-cyan-800">UNESCO Werelderfgoed</strong>';(ae.siteName||ae.naam)&&(Ve+=`<br/><span class="text-sm font-semibold text-cyan-700">${ae.siteName||ae.naam}</span>`),ae.siteDesignation&&(Ve+=`<br/><span class="text-xs text-gray-600">${ae.siteDesignation}</span>`),nn.push(Ve)}}catch(He){console.warn("Werelderfgoed WMS query failed:",He)}continue}if(Nn==="Terpen"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=`https://geoportaal.fryslan.nl/arcgis/rest/services/ProvinciaalGeoRegister/PGR2/MapServer/66/query?geometry=${Pe[0]},${Pe[1]}&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=SOORT,SHAPE_Area&returnGeometry=false&f=json`,z=await(await fetch(Ce)).json();if(z.features&&z.features.length>0){const Tt=z.features[0].attributes,X=Tt.SOORT||"Terp",ae=Tt.SHAPE_Area?Math.round(Tt.SHAPE_Area):null;let Ve="",ee="",ye=!1;try{const Mt=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-100},${Pe[1]-100},${Pe[0]+100},${Pe[1]+100}`}`,_n=await(await fetch(Mt)).json();if(_n.features&&_n.features.length>0){const q=_n.features[0].properties;Ve=q.siteName||q.naam||"",ee=q.inspireId||q.monumentnummer||"",ye=!0}}catch{}let je="";Ve?(je=`<strong class="text-orange-800">${Ve}</strong>`,je+=`<br/><span class="text-sm text-orange-600 font-medium">${X}</span>`):je=`<strong class="text-orange-800">${X}</strong>`,je+='<br/><span class="text-sm text-gray-600">Friese terp (woonheuvel)</span>';const Ge={terp:{uitleg:"Een kunstmatige woonheuvel waar mensen woonden om droge voeten te houden.",periode:"IJzertijd tot Middeleeuwen"},"afgegraven terp":{uitleg:"Deze terp is deels of geheel afgegraven voor de vruchtbare grond (terpaarde).",periode:"Oorspronkelijk IJzertijd-Middeleeuwen"},terprestant:{uitleg:"Hier lag ooit een terp, waarvan nu alleen nog resten over zijn.",periode:"IJzertijd tot Middeleeuwen"},"deels afgegraven terp":{uitleg:"Een deel van deze terp is afgegraven, een deel is nog intact.",periode:"IJzertijd tot Middeleeuwen"},"verhoogd kerkhof":{uitleg:"Een verhoogd kerkhof, vaak op een oude terplocatie gebouwd.",periode:"Middeleeuwen"},kerkterp:{uitleg:"Een terp met daarop een kerk, vaak het centrum van een terpdorp.",periode:"IJzertijd tot heden"}}[X.toLowerCase()]||{uitleg:"Een kunstmatige woonheuvel uit de tijd dat dit gebied vaak overstroomde.",periode:"IJzertijd tot Middeleeuwen"};if(je+=`<div class="mt-2 text-sm text-gray-700">${Ge.uitleg}</div>`,je+=`<br/><span class="text-sm text-gray-600">Periode: ${Ge.periode}</span>`,ae&&ae>100){const nt=(ae/1e4).toFixed(1);je+=`<br/><span class="text-sm text-gray-500">Oppervlak: ${nt} hectare</span>`}if(ye&&(je+='<div class="mt-2 p-2 bg-orange-100 rounded text-xs text-orange-800">',je+="<strong> Rijksmonument</strong> - Deze terp is wettelijk beschermd. Detecteren is niet toegestaan zonder vergunning.",ee&&(je+=`<br/>Monumentnummer: ${ee}`),je+="</div>"),je+='<div class="mt-2 p-2 bg-amber-50 rounded text-xs text-amber-800">',je+="<strong>Detectietip:</strong> ",X.toLowerCase().includes("afgegraven")?je+="Afgegraven terpen zijn interessant! Bij het afgraven kwam materiaal aan de oppervlakte. Zoek op akkers rond de oude terplocatie.":je+="Terpen zijn rijk aan vondsten: aardewerk, munten, fibulae, botten, gereedschap. De grond is vaak donker en vruchtbaar door eeuwenlange bewoning.",je+="</div>",je+='<div class="mt-3 space-y-1">',je+='<a href="https://www.terpenonderzoek.nl/" target="_blank" class="block text-blue-600 hover:underline text-sm">Terpenonderzoek.nl - Wetenschappelijk onderzoek</a>',je+='<a href="https://www.friesmuseum.nl/collectie/archeologie/" target="_blank" class="block text-blue-600 hover:underline text-sm">Fries Museum - Terpvondsten</a>',je+='<a href="https://nl.wikipedia.org/wiki/Terp" target="_blank" class="block text-blue-600 hover:underline text-sm">Wikipedia - Terpen</a>',Ve){const nt=encodeURIComponent(Ve+" terp friesland");je+=`<a href="https://www.google.com/search?q=${nt}" target="_blank" class="block text-blue-600 hover:underline text-sm">Zoek meer over ${Ve}</a>`}je+="</div>",nn.push(je)}}catch(He){console.warn("Terpen query failed:",He)}continue}if(Nn==="Religieus Erfgoed"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=50,z=`https://services.rce.geovoorziening.nl/landschapsatlas_view/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=religieuserfgoed&QUERY_LAYERS=religieuserfgoed&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,Ve=ae.naam||ae.NAAM||ae.name||ae.NAME||"Onbekend",ee=ae.denominatie||ae.DENOMINATIE||ae.religie||"",ye=ae.type||ae.TYPE||ae.functie||"",je=ae.bouwjaar||ae.BOUWJAAR||ae.jaar||"",Je=ae.gemeente||ae.GEMEENTE||ae.plaats||"";let Ge=`<strong class="text-purple-800">${Ve}</strong>`;const nt=ye.toLowerCase();let et="Een religieus gebouw of heilige plek.",Mt="Munten van kerkgangers, knopen, gespen, religieuze voorwerpen";nt.includes("kerk")||nt.includes("church")?(et="Een kerk was het hart van de gemeenschap. Hier kwamen mensen samen voor diensten, maar ook voor belangrijke gebeurtenissen.",Mt="Munten uit de collecte, knopen, gespen, pelgrimsinsignes, loden zegels"):nt.includes("kapel")||nt.includes("chapel")?(et="Een kapel is een klein gebedshuis, vaak bij een landgoed, langs een weg, of op een bijzondere plek.",Mt="Devotionalia, munten, kruisjes, rozenkransen"):nt.includes("synagoge")?(et="Een synagoge is een Joods gebedshuis. Veel synagogen in Nederland zijn verwoest of herbestemd na de Tweede Wereldoorlog.",Mt="Munten, knopen, kleine religieuze voorwerpen"):nt.includes("klooster")||nt.includes("monastery")?(et="Een klooster was een woon- en werkplek voor monniken of nonnen. Veel kloosters hadden eigen werkplaatsen en landerijen.",Mt="Religieuze voorwerpen, zegels, gereedschap, aardewerk, middeleeuwse munten"):nt.includes("toren")||nt.includes("tower")?(et="Een kerktoren of klokkentoren. Soms is alleen de toren nog over van een verdwenen kerk.",Mt="Munten, knopen, bouwmateriaal"):(nt.includes("begraafplaats")||nt.includes("cemetery"))&&(et="Een historische begraafplaats. Detecteren op begraafplaatsen is niet toegestaan zonder toestemming.",Mt="Detecteren hier niet toegestaan"),ee&&(Ge+=`<br/><span class="text-sm text-purple-600">${ee}</span>`),ye&&(Ge+=`<br/><span class="text-sm text-gray-600">${ye}</span>`),je&&(Ge+=`<br/><span class="text-sm text-gray-500">Bouwjaar: ${je}</span>`),Je&&(Ge+=`<br/><span class="text-xs text-gray-400">${Je}</span>`),Ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Ge+=`<div class="text-sm text-gray-700 mt-1">${et}</div>`,Ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Ge+=`<div class="text-sm text-gray-700 mt-1">${Mt}</div>`,Ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',nt.includes("begraafplaats")?Ge+='<div class="text-sm text-red-600 mt-1">Detecteren op begraafplaatsen is niet toegestaan. Respecteer de rust van de overledenen.</div>':Ge+='<div class="text-sm text-gray-700 mt-1">Veel kerken en religieuze gebouwen zijn beschermd monument. Vraag altijd toestemming voordat je gaat detecteren op het terrein.</div>',nn.push(Ge)}}catch(He){console.warn("Religieus Erfgoed WMS query failed:",He)}continue}if(Nn==="Gewaspercelen"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=50,on=`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`,z=`https://service.pdok.nl/rvo/brpgewaspercelen/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=BrpGewas&QUERY_LAYERS=BrpGewas&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${on}`,Tt=`https://service.pdok.nl/bzk/bro-bodemkaart/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=soilarea&QUERY_LAYERS=soilarea&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${on}`,[X,ae]=await Promise.all([fetch(z),fetch(Tt).catch(()=>null)]),Ve=await X.json();if(Ve.features&&Ve.features.length>0){const ee=Ve.features[0].properties;let ye='<strong class="text-green-800">Landbouwperceel</strong>';if((ee.gewas||ee.gewasnaam)&&(ye+=`<br/><span class="text-sm font-semibold text-green-700">${ee.gewas||ee.gewasnaam}</span>`),(ee.categorie||ee.category)&&(ye+=`<br/><span class="text-xs text-gray-600">${ee.categorie||ee.category}</span>`),ee.oppervlakte&&(ye+=`<br/><span class="text-xs text-gray-500">${ee.oppervlakte} ha</span>`),ae)try{const je=await ae.json();if(je.features&&je.features.length>0){const Je=je.features[0].properties,Ge=Je.first_soilname||Je.soilname||Je.bodemtype,nt=Je.first_soilcode||Je.soilcode||Je.maparea_soilcode;if(Ge){ye+=`<br/><span class="text-xs text-amber-700 font-medium">Grondsoort: ${Ge}</span>`;const et=Vae(Ge,nt);et.length>0&&(ye+=`<br/><span class="text-xs text-gray-500 italic">${et.join("  ")}</span>`)}}}catch{}nn.push(ye)}}catch(He){console.warn("BRP Gewaspercelen WMS query failed:",He)}continue}if(Nn==="Kadastrale Grenzen"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=20,z=`https://service.pdok.nl/kadaster/kadastralekaart/wms/v5_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=Perceel&QUERY_LAYERS=Perceel&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,Ve=ae.kadastraleGemeenteWaarde||ae.kadastrale_gemeente_waarde||ae.kadastraleGemeente||mTt[String(ae.kadastraleGemeenteCode)]||ae.kadastraleGemeenteCode,ee=ae.sectie||ae.Sectie||"",ye=ae.perceelnummer||ae.perceelNummer||ae.Perceelnummer||"",je=ae.kadastraleGrootteWaarde||ae.kadastrale_grootte_waarde||ae.kadastraleGrootte||ae.oppervlakte,Je=ae.AKRKadastraleGemeenteCodeWaarde||ae.akrKadastraleGemeenteCodeWaarde||"",Ge=[Ve,ee,ye].filter(Boolean).join(" "),nt=Je&&ee&&ye?`${Je}-${ee}-${ye}`:"";let et='<strong class="text-indigo-800">Kadastraal Perceel</strong>';if(Ge&&(et+=`<br/><span class="text-sm text-indigo-700">${Ge}</span>`),nt&&(et+=`<br/><span class="text-sm font-bold text-gray-800 font-mono">${nt}</span>`),je){const Mt=typeof je=="number"?je:parseFloat(je);isNaN(Mt)||(et+=`<br/><span class="text-xs text-gray-600">${Mt.toLocaleString("nl-NL")} m</span>`)}et+='<br/><br/><span class="text-xs text-gray-600">Eigenaar opzoeken? Kopieer bovenstaande code, ga naar </span><a href="https://www.kadaster.nl/winkel" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">kadaster.nl/winkel</a><span class="text-xs text-gray-600"> en klik "Zoek op aanduiding"</span><span class="text-xs text-gray-400"> (betaalde dienst)</span>',nn.push(et)}}catch(He){console.warn("Kadastrale Grenzen WMS query failed:",He)}continue}if(Nn==="Scheepswrakken"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=100,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let ee=`<strong class="text-cyan-800">${ae.naam||ae.NAAM||"Scheepswrak"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Historisch scheepswrak in Zuid-Holland</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Op deze plek ligt een oud scheepswrak. Dit is een schip dat lang geleden is gezonken. ",ee+="In de bodem kunnen nog resten van het schip en de lading liggen.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-cyan-700">Type: ${ae.type||ae.TYPE}</span>`),(ae.datering||ae.DATERING)&&(ee+=`<br/><span class="text-sm text-gray-600">Periode: ${ae.datering||ae.DATERING}</span>`),(ae.bron||ae.BRON)&&(ee+=`<br/><span class="text-xs text-gray-500">Bron: ${ae.bron||ae.BRON}</span>`),ee+='<div class="mt-2 p-2 bg-cyan-50 rounded text-xs text-cyan-800">',ee+="<strong>Detectietip:</strong> Bij scheepswrakken kun je bijzondere vondsten doen zoals scheepsonderdelen, munten, gereedschap en lading. Let op: vaak is een vergunning nodig.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.zuid-holland.nl/onderwerpen/cultuur-erfgoed/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over erfgoed Zuid-Holland</a></div>',nn.push(ee)}}catch(He){console.warn("Scheepswrakken WMS query failed:",He)}continue}if(Nn==="Woonheuvels ZH"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=100,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let ee=`<strong class="text-orange-800">${ae.naam||ae.NAAM||"Woonheuvel"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Historische woonheuvel (terp)</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Een woonheuvel is een door mensen opgeworpen heuvel. Mensen woonden hierop om droge voeten te houden bij hoog water. ",ee+="Deze heuvels werden steeds hoger gemaakt. Je vindt ze vooral in laaggelegen gebieden.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-orange-700">Type: ${ae.type||ae.TYPE}</span>`),ee+='<div class="mt-2 p-2 bg-orange-50 rounded text-xs text-orange-800">',ee+="<strong>Detectietip:</strong> Woonheuvels zijn rijk aan vondsten! Denk aan aardewerk, munten, sieraden en huisraad uit de middeleeuwen. De grond bevat vaak veel materiaal.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.zuid-holland.nl/onderwerpen/cultuur-erfgoed/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over erfgoed Zuid-Holland</a></div>',nn.push(ee)}}catch(He){console.warn("Woonheuvels WMS query failed:",He)}continue}if(Nn==="Romeinse Forten"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=200,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let ee=`<strong class="text-red-800">${ae.naam||ae.NAAM||"Romeins Fort"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Romeins militair fort (castellum)</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Dit was een Romeins legerfort. De Romeinen bouwden deze forten langs de Rijn, de grens van hun rijk. ",ee+="Soldaten woonden hier en bewaakten de grens. Deze forten zijn ongeveer 2000 jaar oud.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-red-700">Type: ${ae.type||ae.TYPE}</span>`),(ae.periode||ae.PERIODE)&&(ee+=`<br/><span class="text-sm text-gray-600">Periode: ${ae.periode||ae.PERIODE}</span>`),ee+='<div class="mt-2 p-2 bg-red-50 rounded text-xs text-red-800">',ee+="<strong>Detectietip:</strong> Romeinse forten zijn toplocaties! Je kunt hier Romeinse munten, fibulae (mantelspelden), militaire uitrusting en aardewerk vinden. Vaak beschermd, check de regels!",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.limesworld.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over de Romeinse Limes</a></div>',nn.push(ee)}}catch(He){console.warn("Romeinse Forten WMS query failed:",He)}continue}if(Nn==="Windmolens"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=50,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&QUERY_LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let ee=`<strong class="text-amber-800">${ae.naam||ae.NAAM||"Windmolen"}</strong>`;if(ee+='<br/><span class="text-sm text-gray-800">Historische windmolen</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Windmolens gebruikten de kracht van de wind. Ze maalden graan tot meel of pompten water weg uit polders. ",ee+="Nederland heeft veel molens omdat we laaggelegen land droog moesten houden.",ee+="</div>",ae.type||ae.TYPE||ae.functie||ae.FUNCTIE){const ye=ae.functie||ae.FUNCTIE||ae.type||ae.TYPE;ee+=`<br/><span class="text-sm text-amber-700">Functie: ${ye}</span>`}(ae.bouwjaar||ae.BOUWJAAR)&&(ee+=`<br/><span class="text-sm text-gray-600">Bouwjaar: ${ae.bouwjaar||ae.BOUWJAAR}</span>`),ee+='<div class="mt-2 p-2 bg-amber-50 rounded text-xs text-amber-800">',ee+="<strong>Detectietip:</strong> Bij molens vind je vaak voorwerpen van de molenaar en bezoekers: munten, knopen, gereedschap. Ook de grond rond verdwenen molens kan interessant zijn.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.molendatabase.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over Nederlandse molens</a></div>',nn.push(ee)}}catch(He){console.warn("Windmolens WMS query failed:",He)}continue}if(Nn==="Erfgoedlijnen"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=200,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&QUERY_LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let ee=`<strong class="text-purple-800">${ae.naam||ae.NAAM||ae.erfgoedlijn||"Erfgoedlijn"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Historische lijn in het landschap</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Een erfgoedlijn is een route of lijn met veel geschiedenis. Dit kunnen oude dijken, wegen, kanalen of verdedigingslinies zijn. ",ee+="Langs deze lijnen vind je vaak bijzondere plekken.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-purple-700">Type: ${ae.type||ae.TYPE}</span>`),(ae.omschrijving||ae.OMSCHRIJVING)&&(ee+=`<br/><span class="text-sm text-gray-600">${ae.omschrijving||ae.OMSCHRIJVING}</span>`),ee+='<div class="mt-2 p-2 bg-purple-50 rounded text-xs text-purple-800">',ee+="<strong>Detectietip:</strong> Erfgoedlijnen volgen oude routes waar mensen langskwamen. Denk aan munten, knopen, gespen en andere verloren voorwerpen. Dijken en wegen zijn vaak interessant.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.erfgoedlijnen.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over Erfgoedlijnen</a></div>',nn.push(ee)}}catch(He){console.warn("Erfgoedlijnen WMS query failed:",He)}continue}if(Nn==="Oude Kernen"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=200,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let ee=`<strong class="text-stone-800">${ae.naam||ae.NAAM||"Historische Kern"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Oude dorps- of stadskern</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Dit is het oude centrum van een dorp of stad. Hier woonden en werkten mensen al honderden jaren geleden. ",ee+="De grond bevat vaak veel sporen van het verleden.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-stone-700">Type: ${ae.type||ae.TYPE}</span>`),(ae.periode||ae.PERIODE)&&(ee+=`<br/><span class="text-sm text-gray-600">Periode: ${ae.periode||ae.PERIODE}</span>`),ee+='<div class="mt-2 p-2 bg-stone-100 rounded text-xs text-stone-800">',ee+="<strong>Detectietip:</strong> Oude kernen zijn rijk aan vondsten! Munten, knopen, sieraden, gereedschap en huisraad. Let op: detecteren is vaak niet toegestaan in beschermde kernen.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.zuid-holland.nl/onderwerpen/cultuur-erfgoed/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over erfgoed Zuid-Holland</a></div>',nn.push(ee)}}catch(He){console.warn("Oude Kernen WMS query failed:",He)}continue}if(Nn==="Relictenkaart Punten"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=50,z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_p&QUERY_LAYERS=ChAr_Relictenkaart_p&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,Ve={KV:{naam:"Kasteel of Vesting",uitleg:"Een versterkt gebouw uit de middeleeuwen. Vaak zijn er nog resten in de grond."},K:{naam:"Kapel",uitleg:"Een klein kerkgebouw. Rond kapellen worden vaak religieuze voorwerpen gevonden."},KE:{naam:"Kerkhof",uitleg:"Historische begraafplaats. Respecteer deze plek en vraag altijd toestemming."},B:{naam:"Buitenhuis",uitleg:"Een landhuis van welgestelde families. Vaak met tuinen en bijgebouwen."},OB:{naam:"Oud Bebouwingsrelict",uitleg:"Resten van oude bebouwing. Hier stonden ooit huizen of boerderijen."},OV:{naam:"Oude Verkaveling",uitleg:"Historisch patroon van akkers en weilanden uit vroeger tijden."},NR:{naam:"Nijverheidsrelict",uitleg:"Plek waar vroeger ambacht of industrie was, zoals smederijen of molens."},GH:{naam:"Grafheuvel",uitleg:"Prehistorische begraafplaats. Beschermd monument - niet detecteren!"},BP:{naam:"Begraafplaats",uitleg:"Historische begraafplaats. Respecteer deze plek."},HH:{naam:"Havezate",uitleg:"Adellijk huis met landerijen. Interessant voor middeleeuwse vondsten."},RM:{naam:"Rosmolen",uitleg:"Molen aangedreven door paarden. Zeldzaam cultuurhistorisch object."},WM:{naam:"Windmolen",uitleg:"Historische windmolen. Vaak zijn funderingen nog zichtbaar."},PM:{naam:"Poldermolen",uitleg:"Molen voor waterbeheer. Belangrijk voor de waterhuishouding."},EK:{naam:"Eendenkooi",uitleg:"Plek om wilde eenden te vangen. Bijzonder cultuurlandschap."},SH:{naam:"Scholtenhoeve",uitleg:"Boerderij van een welgestelde boer. Vaak eeuwenoud."},SL:{naam:"Slot",uitleg:"Versterkt kasteel of adellijke woning."},MO:{naam:"Motte",uitleg:"Vroegmiddeleeuwse kasteelberg. Zeer interessant voor detectie."},BR:{naam:"Borg",uitleg:"Versterkte adellijke woning, typisch voor het noorden."}},ee=ae.type?.replace(/[0-9]/g,"")||"",ye=Ve[ee]||{naam:ae.type||"Cultuurhistorisch object",uitleg:"Een historisch relict in het Gelderse landschap."};let je=`<strong class="text-emerald-800">${ye.naam}</strong>`;je+='<br/><span class="text-sm text-gray-800">Gelders cultuurhistorisch relict</span>',ae.streek&&(je+=`<br/><span class="text-sm text-gray-600">Streek: ${ae.streek}</span>`),je+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is dit?</span></div>',je+=`<div class="text-sm text-gray-700 mt-1">${ye.uitleg}</div>`,je+='<div class="mt-3"><a href="https://www.gelderland.nl/erfgoed" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-sm">Meer over Gelders erfgoed</a></div>',nn.push(je)}}catch(He){console.warn("Relictenkaart Punten WMS query failed:",He)}continue}if(Nn==="Relictenkaart Lijnen"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=50,z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_l&QUERY_LAYERS=ChAr_Relictenkaart_l&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,ee={1:{naam:"Sprengenbeek",uitleg:"Kunstmatig aangelegde beek voor waterkracht. Vaak bij papiermolens."},2:{naam:"Oude waterloop",uitleg:"Historische beek of rivier. Langs waterlopen vind je vaak oude bewoningssporen."},3:{naam:"Doorgaande weg",uitleg:"Eeuwenoude handelsroute. Langs deze wegen gingen reizigers en handelaren."},4:{naam:"Hessenweg",uitleg:"Historische handelsweg naar Duitsland. Gebruikt door marskramers en kooplieden."},5:{naam:"Oude weg",uitleg:"Historische route door het landschap. Vaak al eeuwen in gebruik."},6:{naam:"Historische grens",uitleg:"Oude eigendoms- of gebiedsgrens. Soms gemarkeerd met grenspalen."},7:{naam:"Trekpad",uitleg:"Pad langs een kanaal waar paarden schepen trokken."},8:{naam:"Jaagpad",uitleg:"Pad langs water voor scheepvaart met paardentractie."}}[ae.klasse]||{naam:"Historisch lijnrelict",uitleg:"Een lijnvormig historisch element in het landschap."};let ye=`<strong class="text-teal-800">${ee.naam}</strong>`;ye+='<br/><span class="text-sm text-gray-800">Gelders lijnrelict</span>',ye+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is dit?</span></div>',ye+=`<div class="text-sm text-gray-700 mt-1">${ee.uitleg}</div>`,ye+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Tip</span></div>',ye+='<div class="text-sm text-gray-700 mt-1">Langs oude wegen en waterlopen worden vaak vondsten gedaan. Mensen verloren er munten en voorwerpen.</div>',nn.push(ye)}}catch(He){console.warn("Relictenkaart Lijnen WMS query failed:",He)}continue}if(Nn==="Relictenkaart Vlakken"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=100,z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_v&QUERY_LAYERS=ChAr_Relictenkaart_v&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,ee={1:{naam:"Oud agrarisch land",uitleg:"Gebied dat al voor 1850 als landbouwgrond werd gebruikt. Rijk aan geschiedenis."},2:{naam:"Jonge heideontginning",uitleg:"Heide die tussen 1850 en 1950 is ontgonnen voor landbouw."},3:{naam:"Open essencomplex",uitleg:"Historische akkers op hoge grond. Vaak eeuwenoud en rijk aan vondsten."},4:{naam:"Kampenlandschap",uitleg:"Landschap met kleine akkers omringd door houtwallen. Typisch voor Oost-Nederland."},5:{naam:"Heiderelict",uitleg:"Restant van het vroegere uitgestrekte heidelandschap. Vaak prehistorische vondsten."},6:{naam:"Oud bosrelict",uitleg:"Bos dat al in 1850 bestond. Oude bossen bevatten vaak cultuurhistorische resten."},7:{naam:"Stuifzandrelict",uitleg:"Overblijfsel van actief stuifzand. Vaak bij grafheuvels en prehistorische sites."},8:{naam:"Oud bouwland",uitleg:"Historische akkergrond. Boeren hebben hier eeuwenlang gewerkt."},9:{naam:"Historisch grasland",uitleg:"Oud weiland of hooiland. Vaak bij boerderijen en dorpen."},10:{naam:"Beekdal",uitleg:"Laagte langs een beek. Mensen woonden graag bij water."}}[ae.klasse]||{naam:"Historisch landschap",uitleg:"Een waardevol cultuurlandschap in Gelderland."};let ye=`<strong class="text-lime-800">${ee.naam}</strong>`;if(ye+='<br/><span class="text-sm text-gray-800">Gelders landschapsrelict</span>',ae.st_area_shape_){const je=(ae.st_area_shape_/1e4).toFixed(1);ye+=`<br/><span class="text-sm text-gray-600">${je} hectare</span>`}ye+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is dit?</span></div>',ye+=`<div class="text-sm text-gray-700 mt-1">${ee.uitleg}</div>`,nn.push(ye)}}catch(He){console.warn("Relictenkaart Vlakken WMS query failed:",He)}continue}if(Nn==="Verdronken Dorpen"){try{const He=Fn(Vt),Pe=lr("EPSG:4326","EPSG:28992",He),Ce=200,z=`https://opengeodata.zeeland.nl/geoserver/chs/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=geocmd_vrddrppnt&QUERY_LAYERS=geocmd_vrddrppnt&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Pe[0]-Ce},${Pe[1]-Ce},${Pe[0]+Ce},${Pe[1]+Ce}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let ee=`<strong class="text-blue-800">${ae.naam||ae.NAAM||"Verdronken dorp"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Verdronken dorp in Zeeland</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Dit dorp is lang geleden door de zee verzwolgen. Bij stormvloeden brak de zeedijk door en liep het land onder water. ",ee+="De mensen vluchtten, maar hun huizen en bezittingen bleven achter. In de bodem liggen nog resten van dit dorp.",ee+="</div>",(ae.verdronken||ae.VERDRONKEN||ae.jaar||ae.JAAR)&&(ee+=`<br/><span class="text-sm text-blue-700">Verdronken in: ${ae.verdronken||ae.VERDRONKEN||ae.jaar||ae.JAAR}</span>`),(ae.gemeente||ae.GEMEENTE)&&(ee+=`<br/><span class="text-sm text-gray-600">Gemeente: ${ae.gemeente||ae.GEMEENTE}</span>`),(ae.bron||ae.BRON)&&(ee+=`<br/><span class="text-xs text-gray-500">Bron: ${ae.bron||ae.BRON}</span>`),ee+='<div class="mt-2 p-2 bg-blue-50 rounded text-xs text-blue-800">',ee+="<strong>Detectietip:</strong> Verdronken dorpen bevatten veel vondsten! Aardewerk, munten, sieraden, gereedschap en huisraad. Bij laag water komen soms stukken vrij. Let op getijden en veiligheid!",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.verdronkengeschiedenis.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over verdronken dorpen</a></div>',nn.push(ee)}}catch(He){console.warn("Verdronken Dorpen WMS query failed:",He)}continue}const Ii=$s.getFeatureInfoUrl(Vt,jn,"EPSG:3857",{INFO_FORMAT:"application/json"});if(Ii)try{const Pe=await(await fetch(Ii)).json();if(Pe.features&&Pe.features.length>0){const Ce=Pe.features[0].properties;if(Nn==="AHN 0.5m"){let X='<strong class="text-blue-800">AHN Hoogtekaart</strong>';const ae=Ce.value_list??Ce.GRAY_INDEX??Ce.value??Ce.gray_index??Ce.dtm_05m??Ce.DTM_05M??Ce.hoogte??Ce.HOOGTE??Ce.elevation??Ce.ELEVATION;if(ae!=null&&!isNaN(Number(ae))){const Ve=typeof ae=="number"?ae.toFixed(2):Number(ae).toFixed(2);X+=`<br/><span class="text-sm text-blue-700">Hoogte: ${Ve} m NAP</span>`,nn.push(X)}else{let Ve=!1;const ee=["geometry","id","fid","gml_id","bbox"];for(const[ye,je]of Object.entries(Ce))!ee.includes(ye.toLowerCase())&&je!==null&&je!==""&&(X+=`<br/><span class="text-xs text-gray-600">${ye}: ${je}</span>`,Ve=!0);Ve&&nn.push(X)}continue}if(Nn==="Geomorfologie"){let X='<strong class="text-green-800">Geomorfologie</strong>',ae=!1;const Ve=Ce.landform_subgroup_description,ee=Ce.relief_klasse,ye=Ce.relief_subklasse,je=Ce.genese_description,Je=Ce.active_process;if(Ve&&(X+=`<br/><span class="text-sm text-green-700">${Ve}</span>`,ae=!0),ee){const Ge=ye&&ye!==ee?`${ee} (${ye})`:ee;X+=`<br/><span class="text-xs text-gray-600">Relief: ${Ge}</span>`,ae=!0}if(je&&(X+=`<br/><span class="text-xs text-gray-500">Ontstaan: ${je}</span>`,ae=!0),Je&&Je!=="onbekend"&&(X+=`<br/><span class="text-xs text-gray-500">Actief proces: ${Je}</span>`,ae=!0),!ae){const Ge=["geometry","id","fid","gml_id","bbox","fuuid","geom","collection_id"];for(const[nt,et]of Object.entries(Ce))!Ge.includes(nt.toLowerCase())&&et!==null&&et!==""&&!nt.includes("validfrom")&&!nt.includes("validto")&&(X+=`<br/><span class="text-xs text-gray-600">${nt}: ${et}</span>`)}X+='<br/><a href="https://legendageomorfologie.wur.nl/" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">Meer over geomorfologie</a>',nn.push(X);continue}let on=`<strong>${Nn}</strong>`;const z=Ce.first_soilname||Ce.soilname,Tt=Ce.soilcode||Ce.first_soilcode;if(z&&(on+=`<br/><span class="text-sm text-amber-700">${z}</span>`,Nn==="Bodemkaart")){const X=Vae(z,Tt);X.length>0&&(on+=`<br/><span class="text-xs text-gray-500 italic">${X.join("  ")}</span>`)}if(Ce.soilslope&&Ce.soilslope!=="Niet opgenomen"&&(on+=`<br/><span class="text-xs text-gray-500">Helling: ${Ce.soilslope}</span>`),!z){const X=["geometry","id","fid","gml_id","GRAY_INDEX","gray_index","value"];for(const[ae,Ve]of Object.entries(Ce))!X.includes(ae)&&Ve&&Ve!=="Niet opgenomen"&&(on+=`<br/><span class="text-xs text-gray-600">${ae}: ${Ve}</span>`)}nn.push(on)}}catch(He){console.warn("WMS GetFeatureInfo failed:",He)}}return nn},dr=async Vt=>{if(gr.getState().isDrawingMode)return;const jn=[],nn=[],Fo=Pe=>{if(!Pe)return;const Ce=Pe.getType(),z=Pe.clone().transform("EPSG:3857","EPSG:4326").getCoordinates();return{type:Ce,coordinates:z}},Gi=pTt(Vt.coordinate),$s=[];t.forEachFeatureAtPixel(Vt.pixel,Pe=>{$s.push(Pe)});for(const Pe of $s){const Ce=Pe.getProperties(),{geometry:on,...z}=Ce;if(z.vondst){const ee=z.vondst,ye=`<strong>${ee.objectType}</strong>
            <div data-vondst-id="${ee.id}"></div>
            <br/><span class="text-sm text-gray-600"><strong>Materiaal:</strong> ${ee.material}</span>
            <br/><span class="text-sm text-gray-600"><strong>Periode:</strong> ${ee.period}</span>
            ${ee.depth?`<br/><span class="text-sm text-gray-600"><strong>Diepte:</strong> ${ee.depth} cm</span>`:""}
            ${ee.condition&&ee.condition!=="Onbekend"?`<br/><span class="text-sm text-gray-600"><strong>Conditie:</strong> ${ee.condition}</span>`:""}
            ${ee.weight?`<br/><span class="text-sm text-gray-600"><strong>Gewicht:</strong> ${ee.weight} gram</span>`:""}
            ${ee.notes?`<br/><span class="text-sm text-gray-600"><strong>Notities:</strong> ${ee.notes}</span>`:""}
            ${ee.photoUrl?`<br/><a href="${ee.photoUrl}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm"> Bekijk foto</a>`:""}
            <br/><span class="text-xs text-gray-400">${new Date(ee.timestamp).toLocaleDateString("nl-NL")}</span>`;jn.push(ye),nn.push(null),P(ee.id);continue}if(z.layerType==="customPoint"&&z.customPoint){const ee=z.customPoint,ye=z.customLayerName||"Mijn Laag",je=z.customLayerColor||"#f97316";let Je="";if(ee.popupContent?(Je=`<div class="flex items-center gap-2 mb-2 pb-2 border-b border-gray-100">
              <span class="w-3 h-3 rounded-full flex-shrink-0" style="background-color: ${je}"></span>
              <span class="text-xs font-medium" style="color: ${je}">${ye}</span>
            </div>`,Je+=ee.popupContent):(Je=`<strong>${ee.name}</strong>`,Je+=`<br/><span class="text-xs text-gray-500">${ye}</span>`,ee.category&&ee.category!=="Overig"&&(Je+=`<br/><span class="text-sm text-gray-600"><strong>Categorie:</strong> ${ee.category}</span>`)),ee.photos&&ee.photos.length>0){Je+='<div class="flex flex-wrap gap-1 my-2">';for(const Ge of ee.photos.slice(0,3)){const nt=Ge.thumbnailUrl||Ge.thumbnailBase64;nt&&(Je+=`<img src="${nt}" alt="Foto" class="w-16 h-16 object-cover rounded border border-gray-200" />`)}ee.photos.length>3&&(Je+=`<span class="text-xs text-gray-400 self-end">+${ee.photos.length-3} meer</span>`),Je+="</div>"}ee.notes&&!ee.popupContent&&(Je+=`<br/><span class="text-sm text-gray-600 mt-1">${ee.notes}</span>`),ee.url&&(Je+=`<br/><a href="${ee.url}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm">Meer info</a>`),Je+=`<br/><span class="text-xs text-gray-400">${new Date(ee.createdAt).toLocaleDateString("nl-NL")}</span>`,jn.push(Je),nn.push(null);continue}if(z.layerType==="importedLayer"){const ee=z.layerName||"Gemporteerde laag",ye=z.layerColor||"#8b5cf6",je=["layerType","layerId","layerName","layerColor","featureIndex","geometry"],Je=z.name||z.Name||z.naam||z.title||z.NAAM||z.NAME||z.label||z.description||"Feature";let Ge=`<strong style="color: ${ye}">${Je}</strong>`;Ge+=`<br/><span class="text-xs text-gray-500">${ee}</span>`;const nt=Object.entries(z).filter(([et])=>!je.includes(et)&&et!=="name"&&et!=="Name");if(nt.length>0){Ge+='<div class="mt-2 space-y-1">';for(const[et,Mt]of nt)if(Mt!=null&&Mt!==""){const Gt=et.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/^./,q=>q.toUpperCase());let _n=String(Mt);_n.length>200&&(_n=_n.substring(0,200)+"..."),_n.startsWith("http://")||_n.startsWith("https://")?Ge+=`<div class="text-sm"><span class="text-gray-500">${Gt}:</span> <a href="${_n}" target="_blank" rel="noopener" class="text-blue-600 hover:underline">Link</a></div>`:Ge+=`<div class="text-sm"><span class="text-gray-500">${Gt}:</span> <span class="text-gray-700">${_n}</span></div>`}Ge+="</div>"}jn.push(Ge),nn.push({geometry:Fo(on),properties:z,popupHtml:Ge});continue}if(z.kwaliteitswaarde&&z.kwaliteitswaarde.includes("archeologische waarde")){const ee=wt(z);jn.push(ee),nn.push({geometry:Fo(on),properties:z,popupHtml:ee});continue}if(z.layerType==="romeinsFort"||z.layerType==="romeinsFortLijn"){const ee=z.Name||z.name||"";z.description;const ye=hTt[ee]||null,je=ye||dTt;let Je=`<strong class="text-red-800">${ye?je.naam:ee||"Romeins Fort"}</strong>`;if(Je+=`<br/><span class="text-sm text-red-700">${fTt[je.type]||je.type}</span>`,Je+=`<br/><span class="text-sm text-gray-500">${je.periode}</span>`,z.layerType==="romeinsFortLijn"&&(Je+='<br/><span class="text-sm text-red-600"> Gereconstrueerde fortomtrek</span>'),Je+=`<br/><span class="text-xs text-gray-600 mt-1 block">${je.beschrijving}</span>`,ye?.bronnen&&ye.bronnen.length>0){const Ge=ye.bronnen[0].replace(/^https?:\/\//,"").split("/")[0];Je+=`<br/><a href="${ye.bronnen[0]}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-xs">${Ge}</a>`}jn.push(Je),nn.push({geometry:Fo(on),properties:z,popupHtml:Je});continue}let Tt=z.name||z.Name||z.naam||z.title||z.NAAM||z.NAME||z.label||z.route_name||z.road_name;Tt||(z.leisure==="playground"?Tt="Speeltuin":z.leisure==="park"?Tt="Park":z.leisure==="swimming_area"||z.sport==="swimming"?Tt="Zwemplek":z.tourism==="museum"?Tt="Museum":z.amenity==="cafe"||z.amenity==="restaurant"?Tt=z.amenity==="cafe"?"Caf":"Restaurant":z.historic==="castle"?Tt="Kasteel":Tt="Info"),(z.bunker_type||z.name&&(z.name.toLowerCase().includes("bunker")||z.name.toLowerCase().includes("kazemat")||z.name.toLowerCase().includes("schuilplaats")))&&(Tt="Bunker"),z.historic==="battlefield"&&(Tt="Historisch slagveld");let X=`<strong>${Tt}</strong>`,ae=!1;if(z.category&&(X+=`<br/><span class="text-sm text-gray-600">Categorie: ${z.category}</span>`),z.from_to&&z.from_to!==Tt&&(X+=`<br/><span class="text-sm text-gray-600">${z.from_to}</span>`),z.route&&z.route!==Tt&&(X+=`<br/><span class="text-sm text-gray-600">${z.route}</span>`),z.TOPONIEM&&(X+=`<br/><span class="text-sm font-semibold text-gray-800">${z.TOPONIEM}</span>`,z.PLAATS&&(X+=`<br/><span class="text-xs text-gray-500">${z.PLAATS}</span>`)),(z.AARD_VINDP||z.Aard_vindp)&&(X+=`<br/><span class="text-sm text-gray-700">Aard: ${z.AARD_VINDP||z.Aard_vindp}</span>`),z.BEGIN_PER&&z.EIND_PER&&(X+=`<br/><span class="text-sm text-purple-700">Periode: ${z.BEGIN_PER} - ${z.EIND_PER}</span>`),(z.AARD_OPM||z.Aard_opmer)&&(X+=`<br/><span class="text-xs text-gray-600 italic">${z.AARD_OPM||z.Aard_opmer}</span>`),z.Gemeente&&(X+=`<br/><span class="text-sm text-gray-600">Gemeente: ${z.Gemeente}</span>`),z.Bron&&(X+=`<br/><span class="text-xs text-gray-500">Bron: ${z.Bron}</span>`),z.Bron_besch&&(X+=`<br/><span class="text-xs text-gray-500">${z.Bron_besch}</span>`),z.Dat_st_z&&z.Dat_ei_z&&(X+=`<br/><span class="text-sm text-purple-700">Datering: ${z.Dat_st_z} - ${z.Dat_ei_z}</span>`),z.Begin&&z.Einde&&(X+=`<br/><span class="text-sm text-purple-700">Periode: ${z.Begin} - ${z.Einde}</span>`),z.Uiterwaard&&(X+=`<br/><span class="text-sm font-semibold">${z.Uiterwaard}</span>`),z.rivier&&(X+=`<br/><span class="text-sm text-blue-600">Rivier: ${z.rivier}</span>`),z.Beschrijvi&&(X+=`<br/><span class="text-sm text-gray-700">${z.Beschrijvi}</span>`),z.leisure==="park"){ae=!0,X=`<strong class="text-green-800">${z.name||"Park"}</strong>`,X+='<br/><span class="text-sm text-gray-800">Park</span>',z.description&&(X+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`),z.area&&(X+=`<br/><span class="text-sm text-gray-600">Oppervlakte: ${z.area}</span>`);const ye=[];if(z.dog==="yes"&&ye.push("Honden toegestaan"),z.lit==="yes"&&ye.push("Verlicht"),z.bench==="yes"&&ye.push("Bankjes"),ye.length>0&&(X+=`<br/><span class="text-sm text-gray-600">${ye.join("  ")}</span>`),z.operator&&(X+=`<br/><span class="text-xs text-gray-500">Beheer: ${z.operator}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Tip voor detectie</span></div>',X+='<div class="text-sm text-gray-700">Parken zijn populair bij detectoristen. Mensen verliezen hier munten en sieraden. Vraag eerst toestemming aan de gemeente of beheerder.</div>',z.website){const je=z.website.replace(/^https?:\/\//,"").split("/")[0];X+=`<div class="mt-2"><a href="${z.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-sm">${je}</a></div>`}}else z.leisure==="playground"&&(ae=!0,X=`<strong class="text-orange-800">${z.name||"Speeltuin"}</strong>`,X+='<br/><span class="text-sm text-gray-800">Speeltuin</span>',z.description&&(X+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`));if(z.tourism==="museum"||z.museum){ae=!0;const ee=z.name||"Museum",ye=z.museum||z["museum:type"]||"",Je=ye&&ye!=="yes"?{art:"Kunstmuseum",history:"Geschiedenismuseum",archaeology:"Archeologisch museum",science:"Wetenschapsmuseum",technology:"Techniekmuseum",nature:"Natuurmuseum",open_air:"Openluchtmuseum",local:"Streekmuseum",military:"Militair museum",railway:"Spoorwegmuseum",maritime:"Maritiem museum",children:"Kindermuseum"}[ye.toLowerCase()]||ye:"Museum";if(X=`<strong class="text-purple-800">${ee}</strong>`,X+=`<br/><span class="text-sm text-purple-600">${Je}</span>`,z.description&&(X+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`),z.fee){const Ge=z.fee==="yes"?"Toegangsprijs":z.fee==="no"?"Gratis toegang":z.fee;X+=`<div class="mt-2"><span class="text-sm text-gray-600">${Ge}</span></div>`}if(z.opening_hours){const Ge=Fae(String(z.opening_hours));X+=`<div class="mt-2"><span class="text-xs text-green-600">Open: ${Ge}</span></div>`}if(z.website||z.url){const Ge=z.website||z.url;X+=`<div class="mt-1"><a href="${Ge}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-sm">Bezoek ${ee}</a></div>`}if(z.wikipedia){const Ge=z.wikipedia.split(":")[0]||"nl",nt=z.wikipedia.split(":")[1]||z.wikipedia;X+=`<div class="text-sm"><a href="https://${Ge}.wikipedia.org/wiki/${encodeURIComponent(nt)}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Meer info op Wikipedia</a></div>`}if(z["addr:street"]||z["addr:housenumber"]||z["addr:city"]){if(X+='<div class="mt-2 text-xs text-gray-400">',z["addr:street"]||z["addr:housenumber"]){const Ge=[z["addr:street"],z["addr:housenumber"]].filter(Boolean).join(" ");Ge&&(X+=`${Ge}<br/>`)}z["addr:city"]&&(X+=`${z["addr:postcode"]||""} ${z["addr:city"]}`),X+="</div>"}}if(z.leisure==="swimming_area"||z.sport==="swimming"||z.natural==="beach"){ae=!0,X=`<strong class="text-cyan-800">${z.name||"Zwemplek"}</strong>`;const ye=z.natural==="beach"?"Strand":z.leisure==="swimming_area"?"Zwemplek":"Zwemwater";X+=`<br/><span class="text-sm text-gray-800">${ye}</span>`,z.water&&(X+=`<br/><span class="text-sm text-gray-700">${{lake:"Meer",river:"Rivier",pond:"Vijver",reservoir:"Reservoir",canal:"Kanaal"}[z.water]||z.water}</span>`),z.supervised==="yes"&&(X+='<br/><span class="text-sm text-green-700">Met toezicht</span>'),z.changing_rooms==="yes"&&(X+='<br/><span class="text-sm text-gray-600">Kleedruimte aanwezig</span>'),z.description&&(X+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Tip voor detectie</span></div>',X+='<div class="text-sm text-gray-700">Zwemplekken kunnen interessant zijn voor detectie. Mensen verliezen hier sieraden en munten. Let op: niet overal is detecteren toegestaan.</div>'}if(z.osm_id&&z.address!==void 0&&(X+='<br/><span class="text-sm text-lime-700">Kringloopwinkel</span>',z.address&&(X+=`<br/><span class="text-xs text-gray-500">${z.address}</span>`),z.phone&&(X+=`<br/><span class="text-xs text-gray-600">${z.phone}</span>`)),z.site_type==="tumulus"){ae=!0;const ee=Pe.getGeometry()?.getCoordinates();let ye="",je="";if(ee){const Je=Fn(ee),Ge=Je[0],nt=Je[1];Ge>5.5&&Ge<6.3&&nt>52&&nt<52.5?(ye="Veluwe",je="De Veluwe heeft de grootste concentratie grafheuvels van Nederland. Veel heuvels liggen in grafvelden met tientallen heuvels bij elkaar."):Ge>6.2&&Ge<7.1&&nt>52.6&&nt<53.3?(ye="Drenthe",je="Drenthe is beroemd om zijn prehistorische monumenten. Naast hunebedden liggen hier honderden grafheuvels uit de Bronstijd."):Ge>4.5&&Ge<6&&nt>51.3&&nt<51.9?(ye="Noord-Brabant",je="Op de Brabantse zandgronden liggen veel grafheuvels, vaak in kleine groepjes op hogere gronden."):Ge>5.5&&Ge<6.3&&nt>50.7&&nt<51.6?(ye="Limburg",je="De Limburgse heuvels en plateaus herbergen grafheuvels uit verschillende periodes, van Bronstijd tot Romeinse tijd."):Ge>5&&Ge<5.6&&nt>52&&nt<52.4&&(ye="Utrechtse Heuvelrug",je="De stuwwallen van de Utrechtse Heuvelrug en het Gooi waren al in de prehistorie bewoond. Grafheuvels markeren de laatste rustplaats van de vroege bewoners.")}X+='<br/><span class="text-sm text-amber-700">Grafheuvel uit de Bronstijd of IJzertijd</span>',ye&&(X+=`<br/><span class="text-sm text-gray-500">${ye}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Een grafheuvel is een kunstmatige heuvel over een of meerdere graven. De meeste Nederlandse grafheuvels zijn 3000 tot 4000 jaar oud, uit de Bronstijd (2000-800 v.Chr.) of vroege IJzertijd.</div>',je&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Over deze regio</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${je}</div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe herken je een grafheuvel?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Grafheuvels zijn vaak ronde, lage heuvels van 10-30 meter doorsnee en 1-3 meter hoog. Ze liggen meestal op zandgronden, vaak in groepjes (grafvelden). Let op de kenmerkende ronde vorm in het landschap.</div>',z.wikidata?(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',X+=`<div class="text-sm text-gray-700 mt-1"><a href="https://www.wikidata.org/wiki/${z.wikidata}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Bekijk op Wikidata</a></div>`):(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',X+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Grafheuvel" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Lees meer over grafheuvels op Wikipedia</a></div>')}if(z.historic==="castle"||z.castle_type){ae=!0;const ee={manor:{label:"Landhuis",uitleg:"Een landhuis of havezate was het woonhuis van een adellijke familie. Vaak met een landgoed eromheen.",vondsten:"Sieraden, gespen, munten, aardewerk van rijke bewoners"},stately:{label:"Statig huis",uitleg:"Een groot en deftig woonhuis, vaak van welgestelde families. Soms met kasteelachtige kenmerken.",vondsten:"Huishoudelijke voorwerpen, munten, knopen, aardewerk"},fortress:{label:"Fort/Vesting",uitleg:"Een versterkte militaire bouwwerk, gebouwd om een gebied te verdedigen.",vondsten:"Militaire voorwerpen, kogels, gespen, uniformonderdelen"},defensive:{label:"Verdedigingskasteel",uitleg:"Een kasteel gebouwd voor verdediging, met dikke muren, een gracht en torens.",vondsten:"Wapens, harnasonderdelen, pijlpunten, middeleeuwse munten"},palace:{label:"Paleis",uitleg:"Een groot en luxueus gebouw voor koningen, prinsen of zeer rijke families.",vondsten:"Luxe voorwerpen, sieraden, zegels, zeldzame munten"},castrum:{label:"Romeins fort",uitleg:"Een Romeins legerkamp of fort. Deze zijn bijna 2000 jaar oud!",vondsten:"Romeinse munten, fibulae, militaria, aardewerk"},citadel:{label:"Citadel",uitleg:"Een sterk versterkte kern binnen een stad, als laatste verdedigingslinie.",vondsten:"Militaire voorwerpen uit verschillende periodes"}},ye=z.castle_type?ee[z.castle_type]:null,je=ye?.label||"Kasteel";if(X+=`<br/><span class="text-sm text-purple-700">${je}</span>`,z.start_date&&(X+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${z.start_date}</span>`),z.heritage&&(X+='<br/><span class="text-sm text-amber-700">Rijksmonument</span>'),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',ye?X+=`<div class="text-sm text-gray-700 mt-1">${ye.uitleg}</div>`:X+='<div class="text-sm text-gray-700 mt-1">Een historisch kasteel of adellijk huis. Kastelen waren vaak het middelpunt van macht en rijkdom in een gebied.</div>',X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ye?X+=`<div class="text-sm text-gray-700 mt-1">${ye.vondsten}</div>`:X+='<div class="text-sm text-gray-700 mt-1">Munten, sieraden, gespen, aardewerk en andere voorwerpen van de vroegere bewoners.</div>',z.wikipedia||z.website){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',z.wikipedia){const Je=z.wikipedia.startsWith("http")?z.wikipedia:`https://nl.wikipedia.org/wiki/${z.wikipedia.replace(/^nl:/,"")}`;X+=`<div class="text-sm text-gray-700 mt-1"><a href="${Je}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}z.website&&(X+=`<div class="text-sm text-gray-700 mt-1"><a href="${z.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Website bezoeken</a></div>`)}}if(z.historic==="ruins"){const ee=z.ruins_type||"";let ye="Rune",je="Een rune is wat overblijft van een oud gebouw. Het kan een kerk, kasteel, molen of ander bouwwerk zijn geweest.",Je="Baksteenfragmenten, aardewerk, metalen voorwerpen van vroegere bewoners of gebruikers";if(ee.toLowerCase().includes("church")||ee.toLowerCase().includes("kerk")?(ye="Kerkrune",je="De overblijfselen van een oude kerk. Vaak nog te herkennen aan de fundering of een paar muren.",Je="Religieuze voorwerpen, munten van kerkgangers, knopen, gespen"):ee.toLowerCase().includes("castle")||ee.toLowerCase().includes("kasteel")?(ye="Kasteelrune",je="De resten van een middeleeuws kasteel. Soms is alleen de gracht of fundering nog zichtbaar.",Je="Middeleeuwse munten, sieraden, harnasonderdelen, pijlpunten"):ee.toLowerCase().includes("mill")||ee.toLowerCase().includes("molen")?(ye="Molenrune",je="Wat rest van een oude molen. Vaak nog te zien aan de stenen fundering of de molenberg.",Je="Gereedschap, munten, huishoudelijke voorwerpen"):ee.toLowerCase().includes("fort")&&(ye="Fortrune",je="De overblijfselen van een militair fort of verdedigingswerk.",Je="Militaire voorwerpen, kogels, gespen, uniformonderdelen"),X+=`<br/><span class="text-sm text-amber-700">${ye}</span>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${je}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${Je}</div>`,z.description&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Beschrijving</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`),z.wikipedia){const Ge=z.wikipedia.startsWith("http")?z.wikipedia:`https://${z.wikipedia.split(":")[0]||"nl"}.wikipedia.org/wiki/${z.wikipedia.replace(/^[a-z]{2}:/,"")}`;X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${Ge}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(z.bunker_type||z.name&&(z.name.toLowerCase().includes("bunker")||z.name.toLowerCase().includes("kazemat")||z.name.toLowerCase().includes("schuilplaats"))){ae=!0;const ee={munitions:"Munitiebunker",personnel_shelter:"Personeelsschuilplaats",personell_shelter:"Personeelsschuilplaats",command:"Commandobunker",gun_emplacement:"Geschutsbunker",mg_nest:"Mitrailleursnest",technical:"Technische bunker",storage:"Opslagbunker",tobruk:"Tobruk",kazemat:"Kazemat",Flak:"Luchtafweerstelling",hardened_aircraft_shelter:"Vliegtuigshelter",shelter:"Schuilkelder",observation:"Observatiebunker",anti_aircraft:"Luchtafweerstelling"},ye=z.name||"",je=z.bunker_type?ee[z.bunker_type]||z.bunker_type:"";ye&&ye!=="Bunker"&&(X+=`<br/><span class="text-sm font-semibold text-gray-700">${ye}</span>`),je&&je!==ye&&(X+=`<br/><span class="text-xs text-gray-500">${je}</span>`);const Je=Pe.getGeometry()?.getCoordinates();let Ge="",nt="",et="";if(Je){const Mt=Fn(Je),Gt=Mt[0],_n=Mt[1],q=Gt<4.8||Gt<5.2&&_n>51.8&&_n<53.5,re=Gt>4.2&&Gt<4.4&&_n>52&&_n<52.15,Q=Gt>4.5&&Gt<4.7&&_n>52.4&&_n<52.5,te=Gt>4&&Gt<4.2&&_n>51.95&&_n<52.05,se=Gt<4.2&&_n<51.6,oe=Gt>5.2&&Gt<5.8&&_n>51.9&&_n<52.3;re?(Ge="Deze bunker maakt deel uit van de Atlantikwall bij Scheveningen. De Duitsers bouwden hier tijdens WOII zo'n 80 bunkers in de duinen. De muren zijn soms 3 meter dik beton. Voor deze bunkers moesten 138.000 mensen uit Den Haag en Scheveningen hun huis verlaten.",nt="https://nl.wikipedia.org/wiki/Atlantikwall_Museum_Scheveningen",et="Atlantikwall Museum Scheveningen"):Q?(Ge="Deze bunker hoort bij Festung IJmuiden, een van de zwaarst verdedigde punten van de Atlantikwall. De Duitsers bouwden hier bunkers om de haventoegang te beschermen. Er zijn nu rondleidingen door het Bunkermuseum.",nt="https://www.bunkermuseum.nl/",et="Bunkermuseum IJmuiden"):te?(Ge="Deze bunker maakt deel uit van de Atlantikwall bij Hoek van Holland. Dit was een strategisch punt voor de Duitsers vanwege de Nieuwe Waterweg. Veel bunkers zijn nog te bezoeken.",nt="https://www.atlantikwallhoekvanholland.nl/",et="Atlantikwall Hoek van Holland"):se?(Ge="Deze bunker hoort bij de Atlantikwall in Zeeland. De Duitsers verdedigden hier de Westerschelde en de kust. Bij Zoutelande en Westkapelle zijn veel bunkers bewaard gebleven.",nt="https://www.bunkermuseumzoutelande.nl/",et="Bunkermuseum Zoutelande"):q?(Ge="Deze bunker maakt deel uit van de Atlantikwall: de Duitse verdedigingslinie langs de hele kust van Europa. In Nederland bouwden de Duitsers duizenden bunkers tussen 1942 en 1944.",nt="https://nl.wikipedia.org/wiki/Atlantikwall",et="Atlantikwall (Wikipedia)"):oe?(Ge="Deze bunker hoort mogelijk bij de Grebbelinie of de Nieuwe Hollandse Waterlinie. Dit waren Nederlandse verdedigingslinies die de Duitsers na 1940 versterkten met bunkers.",nt="https://nl.wikipedia.org/wiki/Grebbelinie",et="Grebbelinie (Wikipedia)"):(Ge="Een bunker uit de Tweede Wereldoorlog. De meeste bunkers in Nederland zijn gebouwd tussen 1940 en 1944, als onderdeel van de Duitse verdediging of langs bestaande Nederlandse linies.",nt="https://nl.wikipedia.org/wiki/Atlantikwall",et="WOII bunkers (Wikipedia)")}else Ge="Een bunker uit de Tweede Wereldoorlog.",nt="https://nl.wikipedia.org/wiki/Atlantikwall",et="WOII bunkers (Wikipedia)";X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${Ge}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je vinden?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Bij bunkers worden soms voorwerpen gevonden zoals patronen, uniformknopen, gespen en persoonlijke spullen van soldaten.</div>',X+='<div class="mt-2 text-xs text-gray-500 italic">Let op: betreed nooit een bunker zonder toestemming. Raak munitieresten niet aan.</div>',X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',X+='<div class="text-sm text-gray-700 mt-1">',X+=`<a href="${nt}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">${et}</a>`,z.website?X+=`<br/><a href="${z.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>`:X+='<br/><a href="https://www.tracesofwar.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>',X+="</div>"}if(z.historic==="battlefield"){ae=!0;const ee=z.name||"Onbekend slagveld",je={"Slag om Arnhem":{periode:"September 1944",samenvatting:"De Slag om Arnhem was onderdeel van Operatie Market Garden. Geallieerde parachutisten probeerden de brug over de Rijn te veroveren. Na negen dagen hevige gevechten moesten ze zich terugtrekken. Van de 10.000 Britse soldaten werden er 1.500 gedood en 6.500 krijgsgevangen gemaakt.",watZieJe:"Er zijn veel monumenten en infoborden. Het Airborne Museum in Oosterbeek vertelt het hele verhaal. Elk jaar in september is er een herdenking.",uitkomst:"De geallieerden verloren de slag. Nederland bleef nog tot mei 1945 bezet.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Arnhem"},"Slag om de Sloedam":{periode:"1-2 november 1944",samenvatting:"Canadese soldaten vielen de Sloedam aan om Walcheren te bevrijden. De dam was smal en de Duitsers verdedigden fel. Veel soldaten sneuvelden bij deze bloedige aanval.",watZieJe:"Bij de dam staat een monument voor de gevallen Canadezen. Er zijn infoborden die de slag uitleggen.",uitkomst:"De Canadezen wonnen na zware verliezen. Dit opende de weg naar de bevrijding van Walcheren.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_de_Sloedam"},"Slag bij Heiligerlee (1568)":{periode:"23 mei 1568",samenvatting:"De eerste veldslag van de Tachtigjarige Oorlog. Lodewijk van Nassau versloeg het Spaanse leger. Zijn broer Adolf sneuvelde tijdens de strijd.",watZieJe:"In Heiligerlee staat het Slag bij Heiligerlee monument. Het klooster waar Adolf van Nassau begraven ligt is nog te bezoeken.",uitkomst:"De opstandelingen wonnen, maar dit was pas het begin van 80 jaar oorlog.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_bij_Heiligerlee_(1568)"},Overloon:{periode:"Oktober 1944",samenvatting:"Bij Overloon vochten Britten en Amerikanen tegen de Duitsers. Het was een van de zwaarste tankgevechten op Nederlandse bodem. Het dorp werd volledig verwoest.",watZieJe:"Het Oorlogsmuseum Overloon staat op het voormalige slagveld. Je kunt tanks, vliegtuigen en andere voertuigen zien.",uitkomst:"De geallieerden wonnen na wekenlange gevechten.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Overloon"},"Slagveld Lanakerveld":{periode:"1568",samenvatting:"Onderdeel van de Nederlandse opstand tegen Spanje. Hier vonden gevechten plaats tijdens de beginjaren van de Tachtigjarige Oorlog.",watZieJe:"Het gebied is nu grotendeels landbouwgrond. Lokaal zijn er soms infoborden.",uitkomst:"Onderdeel van de lange strijd tegen de Spaanse overheersing.",wikiUrl:"https://nl.wikipedia.org/wiki/Tachtigjarige_Oorlog"},Blessebrugschans:{periode:"Diverse periodes",samenvatting:"Een historische schans die meerdere keren werd gebruikt in militaire conflicten.",watZieJe:"De resten van de schans zijn nog zichtbaar in het landschap.",uitkomst:"De schans speelde een rol in verschillende conflicten.",wikiUrl:"https://nl.wikipedia.org/wiki/Schans_(vestingwerk)"}}[ee];if(ee!=="Onbekend slagveld"&&ee!=="Historisch slagveld"&&(X+=`<br/><span class="text-sm font-semibold text-red-700">${ee}</span>`),je)X+=`<br/><span class="text-xs text-gray-500">${je.periode}</span>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${je.samenvatting}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe liep het af?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${je.uitkomst}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je zien?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${je.watZieJe}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',X+='<div class="text-sm text-gray-700 mt-1">',X+=`<a href="${je.wikiUrl}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a>`,ee.includes("Arnhem")&&(X+='<br/><a href="https://www.airbornemuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Airborne Museum Oosterbeek</a>'),ee.includes("Overloon")&&(X+='<br/><a href="https://www.oorlogsmuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Oorlogsmuseum Overloon</a>'),X+="</div>";else if(z.date&&(X+=`<br/><span class="text-xs text-gray-500">${z.date}</span>`),z.description?(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`):(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Op deze plek vonden historische gevechten plaats. Zoek lokaal naar infoborden of monumenten.</div>'),z.wikipedia){const Je=z.wikipedia.startsWith("http")?z.wikipedia:`https://nl.wikipedia.org/wiki/${z.wikipedia.replace("nl:","")}`;X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',X+=`<div class="text-sm text-gray-700 mt-1"><a href="${Je}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(z.bron==="Paleobiology Database"){const ee=Ge=>{const nt={Mollusca:"weekdieren zoals schelpen en slakken",Brachiopoda:"armpotigen, schelp-achtige dieren",Echinodermata:"stekelhuidigen zoals zee-egels en zeesterren",Chordata:"gewervelde dieren",Arthropoda:"geleedpotigen zoals kreeften en trilobieten",Cnidaria:"neteldieren zoals koralen en kwallen",Bryozoa:"mosdiertjes",Foraminifera:"eencellige schelpdieren",Plantae:"planten",Crinoidea:"zeelelies",Gastropoda:"slakken",Bivalvia:"tweekleppigen zoals mossels en oesters",Cephalopoda:"koppotigen zoals inktvissen en ammonieten",Trilobita:"trilobieten, uitgestorven kreeftachtigen",Mammalia:"zoogdieren",Reptilia:"reptielen",Pisces:"vissen",Amphibia:"amfibien"};for(const[et,Mt]of Object.entries(nt))if(Ge.toLowerCase().includes(et.toLowerCase()))return Mt;return""},ye=Ge=>{const nt={Cambrium:"541-485 miljoen jaar geleden",Ordovicium:"485-444 miljoen jaar geleden",Siluur:"444-419 miljoen jaar geleden",Devoon:"419-359 miljoen jaar geleden",Carboon:"359-299 miljoen jaar geleden",Perm:"299-252 miljoen jaar geleden",Trias:"252-201 miljoen jaar geleden",Jura:"201-145 miljoen jaar geleden",Krijt:"145-66 miljoen jaar geleden",Paleogeen:"66-23 miljoen jaar geleden",Neogeen:"23-2,6 miljoen jaar geleden",Kwartair:"2,6 miljoen jaar - nu",Pleistoceen:"2,6 miljoen - 11.700 jaar geleden",Holoceen:"11.700 jaar geleden - nu"};for(const[et,Mt]of Object.entries(nt))if(Ge.toLowerCase().includes(et.toLowerCase()))return Mt;return""},je=Ge=>{const nt={limestone:"kalksteen",sandstone:"zandsteen",shale:"schalie",clay:"klei",sand:"zand",gravel:"grind",marl:"mergel",chalk:"krijt",mudstone:"moddersteen",siltstone:"siltsteen"};let et=Ge;for(const[Mt,Gt]of Object.entries(nt))et=et.replace(new RegExp(Mt,"gi"),Gt);return et},Je=Ge=>{const nt={marine:"zee",coastal:"kust",terrestrial:"land",fluvial:"rivier",lacustrine:"meer",reef:"rif",deltaic:"delta",shallow:"ondiep water",deep:"diep water"};let et=Ge;for(const[Mt,Gt]of Object.entries(nt))et=et.replace(new RegExp(Mt,"gi"),Gt);return et};if(z.vindplaats&&(X+=`<br/><span class="text-xs text-gray-600">${z.vindplaats}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',z.taxonomie&&z.taxonomie!=="Onbekend"){const Ge=ee(z.taxonomie);Ge?(X+=`<div class="text-sm text-gray-700 mt-1">${Ge}</div>`,X+=`<div class="text-xs text-gray-500 italic">(${z.taxonomie})</div>`):X+=`<div class="text-sm text-gray-700 mt-1">${z.taxonomie}</div>`}if(z.aantal_fossielen){const Ge=parseInt(z.aantal_fossielen),nt=Ge>100?"Veel fossielen gevonden op deze locatie.":Ge>10?"Meerdere fossielen gevonden op deze locatie.":`${z.aantal_fossielen} fossiel${Ge>1?"en":""} gevonden op deze locatie.`;X+=`<div class="text-sm text-gray-600 mt-1">${nt}</div>`}if(z.periode&&z.periode!=="Onbekend"){X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wanneer leefden deze dieren?</span></div>';const Ge=ye(z.periode);X+=`<div class="text-sm text-gray-700 mt-1">${z.periode}</div>`,Ge&&(X+=`<div class="text-sm text-gray-600">${Ge}</div>`),z.ouderdom&&z.ouderdom!=="Onbekend"&&(X+=`<div class="text-sm text-gray-600">Ouderdom: ${z.ouderdom}</div>`)}(z.gesteente||z.formatie||z.milieu)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">In wat voor gesteente?</span></div>',z.gesteente&&(X+=`<div class="text-sm text-gray-700 mt-1">${je(z.gesteente)}</div>`),z.formatie&&(X+=`<div class="text-sm text-gray-600">Formatie: ${z.formatie}</div>`,z.lid&&(X+=`<div class="text-sm text-gray-600 ml-3">Lid: ${z.lid}</div>`)),z.milieu&&(X+=`<div class="text-sm text-gray-600">Leefomgeving: ${Je(z.milieu)}</div>`))}if(z.layerType==="fossielHotspot"){const ee=[];if(z.type&&ee.push(z.type),z.region&&ee.push(z.region),z.country){const ye={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};ee.push(ye[z.country]||z.country)}if(ee.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${ee.join("  ")}</span>`),(z.finds||z.period)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',z.finds&&(X+=`<div class="text-sm text-gray-700 mt-1">${z.finds}</div>`),z.period&&(X+=`<div class="text-sm text-gray-600 mt-1">Periode: ${z.period}</div>`),z.geology&&(X+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${z.geology}</div>`)),z.access||z.tips){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',z.access){const je=z.access.toLowerCase().includes("verboden")||z.access.toLowerCase().includes("niet toegankelijk")?"text-red-600":"text-gray-700";X+=`<div class="text-sm ${je} mt-1">${z.access}</div>`}z.tips&&(X+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${z.tips}</div>`)}}if(z.layerType==="mineralenHotspot"){const ee=[];if(z.region&&ee.push(z.region),z.country){const ye={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};ee.push(ye[z.country]||z.country)}if(ee.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${ee.join("  ")}</span>`),z.minerals&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.minerals}</div>`,z.geology&&(X+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${z.geology}</div>`)),z.access||z.tips){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',z.access){const je=z.access.toLowerCase().includes("verboden")||z.access.toLowerCase().includes("niet toegankelijk")||z.access.toLowerCase().includes("gesloten")?"text-red-600":"text-gray-700";X+=`<div class="text-sm ${je} mt-1">${z.access}</div>`}z.tips&&(X+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${z.tips}</div>`)}}if(z.layerType==="goudrivier"){const ee=[];if(z.river&&ee.push(z.river),z.region&&ee.push(z.region),z.country){const ye={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};ee.push(ye[z.country]||z.country)}if(ee.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${ee.join("  ")}</span>`),(z.goldType||z.origin)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',z.goldType&&(X+=`<div class="text-sm text-gray-700 mt-1">${z.goldType}</div>`),z.origin&&(X+=`<div class="text-sm text-gray-600 mt-1">Herkomst: ${z.origin}</div>`)),z.legal||z.tips){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Mag ik hier zoeken?</span></div>',z.legal){const je=z.legal.includes("VERBODEN")?"text-red-600 font-semibold":"text-gray-700";X+=`<div class="text-sm ${je} mt-1">${z.legal}</div>`}z.tips&&(X+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${z.tips}</div>`)}}if(z.layerType==="wandelroute"){const ee=[];if(z.region&&ee.push(z.region),z.country){const ye={NL:"Nederland",BE:"Belgi"};ee.push(ye[z.country]||z.country)}if(ee.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${ee.join("  ")}</span>`),z.distance||z.duration){const ye=z.distance?`${z.distance} km`:"",je=z.duration?`${z.duration}`:"",Je=[ye,je].filter(Boolean).join("  ");Je&&(X+=`<br/><span class="text-sm text-green-700 font-medium">${Je}</span>`)}(z.description||z.highlights)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat ga je zien?</span></div>',z.description&&(X+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`),z.highlights&&(X+=`<div class="text-sm text-gray-600 mt-1">Hoogtepunten: ${z.highlights}</div>`)),z.startAddress&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Waar begin ik?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.startAddress}</div>`),z.url&&(X+=`<div class="mt-3"><a href="${z.url}" target="_blank" class="text-sm text-blue-600 hover:underline">Bekijk route en download GPX</a></div>`)}if(z.layerType==="hunebed"){z.period&&(X+=`<br/><span class="text-sm text-purple-700">Periode: ${z.period}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',z.description&&(X+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`);const ee=[];if(z.stones){const ye=z.stones.toLowerCase(),je=ye.match(/(\d+)\s*dekst[^\s,]*/i),Je=ye.match(/(\d+)\s*draagst[^\s,]*/i),Ge=ye.match(/(\d+)\s*sluitst[^\s,]*/i),nt=ye.match(/(\d+)\s*poortst[^\s,]*/i),et=ye.match(/(\d+)\s*gangdekst[^\s,]*/i),Mt=ye.match(/(\d+)\s*gangzijst[^\s,]*/i);je&&ee.push(`${je[1]} deksteen${parseInt(je[1])>1?"en":""} (de grote steen${parseInt(je[1])>1?"en":""} bovenop)`),Je&&ee.push(`${Je[1]} draagstenen (de stenen die de dekstenen dragen)`),Ge&&ee.push(`${Ge[1]} sluitsteen${parseInt(Ge[1])>1?"en":""} (afsluiting aan de korte zijden)`),nt&&ee.push(`${nt[1]} poortsteen${parseInt(nt[1])>1?"en":""} (bij de ingang)`),et&&ee.push(`${et[1]} gangdeksteen${parseInt(et[1])>1?"en":""} (boven de toegangsgang)`),Mt&&ee.push(`${Mt[1]} gangzijstenen (langs de toegangsgang)`)}if(z.length&&ee.push(`Een grafkamer van ${z.length} lang`),z.width&&ee.push(`${z.width}`),ee.length>0&&(X+='<div class="text-sm text-gray-700 mt-1">Het hunebed heeft:</div>',X+='<ul class="list-disc list-inside text-sm text-gray-700 mt-1 space-y-0.5">',ee.forEach(ye=>{X+=`<li>${ye}</li>`}),X+="</ul>"),z.notable){const ye=z.notable.toLowerCase();let je="Wat is hier bijzonder?";ye.includes("grootste")?je="Waarom is dit het grootste hunebed?":ye.includes("klein")||ye.includes("kindhunebed")?je="Waarom is dit hunebed zo klein?":ye.includes("cluster")||ye.includes("naast elkaar")?je="Waarom liggen hier meerdere hunebedden?":(ye.includes("enige")||ye.includes("westelijk")||ye.includes("noordelijk"))&&(je="Wat maakt deze locatie bijzonder?"),X+=`<div class="mt-3"><span class="text-sm font-semibold text-gray-800">${je}</span></div>`,X+=`<div class="text-sm text-gray-700 mt-1">${z.notable}</div>`}X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de Trechterbeker cultuur?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">De Trechterbeker cultuur is de naam voor de mensen die 5.000 jaar geleden in Nederland woonden. Ze maakten potten met een trechter-vorm. Daarom heten ze zo. Deze mensen bouwden de hunebedden als graven voor hun doden.</div>',z.finds&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.finds}</div>`),z.museum&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Museum in de buurt</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.museum}</div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',z.access?X+=`<div class="text-sm text-gray-700 mt-1">${z.access}</div>`:X+='<div class="text-sm text-gray-700 mt-1">Je kunt dit hunebed gratis bezoeken.</div>',z.wikipedia&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${z.wikipedia}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`)}if((z.inventarisnummer||z.locatie_naam)&&(z.locatie_naam&&(X+=`<br/><span class="text-sm font-semibold">${z.locatie_naam}</span>`),z.inventarisnummer&&(X+=`<br/><span class="text-xs text-gray-500">CAI: ${z.inventarisnummer}</span>`),z.datering_tekst&&(X+=`<br/><span class="text-sm text-purple-700">${z.datering_tekst}</span>`)),(z.veensoort||z.dikte)&&(z.veensoort&&(X+=`<br/><span class="text-sm text-amber-700">${z.veensoort}</span>`),z.dikte&&(X+=`<br/><span class="text-xs text-gray-600">Dikte: ${z.dikte}</span>`)),z.nature&&z.debut){X+=`<br/><span class="text-sm text-purple-700">${z.nature}</span>`;const ee=z.debut===z.fin?z.debut:`${z.debut} - ${z.fin}`;ee&&(X+=`<br/><span class="text-sm text-gray-700">Periode: ${ee}</span>`),z.structure&&(X+=`<br/><span class="text-xs text-gray-600">${z.structure}</span>`),z.commune&&(X+=`<br/><span class="text-xs text-gray-500">${z.commune}</span>`),z.decouvert&&(X+=`<br/><span class="text-xs text-gray-400">Ontdekt: ${z.decouvert}</span>`),z.numero&&(X+=`<br/><span class="text-xs text-gray-400">${z.numero}</span>`)}if((z.NATURE_OPE||z.CODE_OPERA)&&(z.TITRE&&(X+=`<br/><span class="text-sm font-semibold">${z.TITRE}</span>`),z.NATURE_OPE&&(X+=`<br/><span class="text-sm text-amber-700">${z.NATURE_OPE}</span>`),z.AUTEUR&&(X+=`<br/><span class="text-xs text-gray-600">Auteur: ${z.AUTEUR}</span>`),z.DATE&&(X+=`<br/><span class="text-xs text-gray-500">Datum: ${z.DATE}</span>`),z.COMMUNE&&(X+=`<br/><span class="text-xs text-gray-500">${z.COMMUNE}</span>`)),z.type_protection&&(z.n_site||z.t_site)){const ee=z.type_protection==="Classe"?"text-red-700":"text-amber-700";X+=`<br/><span class="text-sm ${ee}">${z.type_protection}</span>`,z.n_site&&(X+=`<br/><span class="text-sm font-semibold">${z.n_site}</span>`),z.t_site&&(X+=`<br/><span class="text-xs text-gray-600">${z.t_site}</span>`),z.c_site&&(X+=`<br/><span class="text-xs text-gray-500">Code: ${z.c_site}</span>`),z.d_creation&&(X+=`<br/><span class="text-xs text-gray-400">Beschermd sinds: ${z.d_creation}</span>`)}if(z.type_protection&&z.cod_diren){const ee=z.type_protection==="Classe"?"text-red-700":"text-amber-700";if(X+=`<br/><span class="text-sm ${ee}">${z.type_protection}</span>`,z.proced&&(X+=`<br/><span class="text-xs text-gray-600">${z.proced}</span>`),z.d_proced&&(X+=`<br/><span class="text-xs text-gray-500">Date: ${z.d_proced}</span>`),z.comment){const ye=String(z.comment).slice(0,150);X+=`<br/><span class="text-xs text-gray-600 italic">${ye}${String(z.comment).length>150?"...":""}</span>`}}if(z.type_protection&&z.nomsite){const ee=z.type_protection==="Classe"?"text-red-700":"text-amber-700";if(X+=`<br/><span class="text-sm ${ee}">${z.type_protection}</span>`,z.caractere&&(X+=`<br/><span class="text-xs text-gray-600">${z.caractere}</span>`),z.datedecis&&(X+=`<br/><span class="text-xs text-gray-500">Date: ${z.datedecis}</span>`),z.descriptio){const ye=String(z.descriptio).slice(0,150);X+=`<br/><span class="text-xs text-gray-600 italic">${ye}${String(z.descriptio).length>150?"...":""}</span>`}}if(z.secteur&&z.style){if(X+=`<br/><span class="text-sm text-gray-700">${z.secteur}</span>`,z["sous-secteur"]&&(X+=`<br/><span class="text-xs text-gray-600">${z["sous-secteur"]}</span>`),z.description){const ee=String(z.description).slice(0,150);X+=`<br/><span class="text-xs text-gray-600 italic">${ee}${String(z.description).length>150?"...":""}</span>`}z.url&&(X+=`<br/><a href="${z.url}" target="_blank" class="text-xs text-blue-600 hover:underline">Meer info</a>`)}if(z.nature_operation||z.synthese){z.nature_operation&&(X+=`<br/><span class="text-sm text-red-700">${z.nature_operation}</span>`),z.responsable_operation&&(X+=`<br/><span class="text-xs text-gray-600">Responsable: ${z.responsable_operation}</span>`),z.date_operation&&(X+=`<br/><span class="text-xs text-gray-500">Datum: ${z.date_operation}</span>`);const ee=[];if(z.prehistoire==="Oui"&&ee.push("Prehistorie"),z.protohistoire==="Oui"&&ee.push("Protohistorie"),z.antiquite==="Oui"&&ee.push("Romeins"),z.moyen_age==="Oui"&&ee.push("Middeleeuwen"),z.temps_modernes==="Oui"&&ee.push("Moderne tijd"),ee.length>0&&(X+=`<br/><span class="text-sm text-purple-700">${ee.join(", ")}</span>`),z.adresse&&(X+=`<br/><span class="text-xs text-gray-500">${z.adresse}</span>`),z.synthese){const ye=String(z.synthese).slice(0,200);X+=`<br/><span class="text-xs text-gray-600 italic">${ye}${String(z.synthese).length>200?"...":""}</span>`}}if(z.operator&&(X+=`<br/><span class="text-sm text-gray-600">${z.operator}</span>`),!ae){if(z.opening_hours){const ee=Fae(String(z.opening_hours));X+=`<br/><span class="text-xs text-green-600">Open: ${ee}</span>`}z.website&&(X+=`<br/><a href="${z.website}" target="_blank" class="text-xs text-blue-600 underline">Website</a>`)}if(z.addr_street){const ee=[z.addr_street,z.addr_housenumber,z.addr_postcode].filter(Boolean).join(" ");X+=`<br/><span class="text-xs text-gray-500">${ee}</span>`}const Ve=z.description||z.omschrijving||z.descr||z.info;Ve&&Ve!==Tt&&(X+=`<br/><span class="text-sm text-gray-600">${Ve}</span>`),jn.push(X),nn.push({geometry:Fo(on),properties:z,popupHtml:X})}const Nn=t.getView().getResolution()||1,Ii=await Qn(Vt.coordinate,Nn);jn.push(...Ii);for(const Pe of Ii)nn.push(null);const He=await Gi;if(jn.length===0&&He!==null){const Pe=`<strong class="text-blue-800">Terrein</strong>
          <br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
            <span class="text-xs text-gray-400">Hoogte:</span>
            <span class="text-sm font-medium text-blue-600">${He.toFixed(2)} m NAP</span>
          </div>`;jn.push(Pe),nn.push(null)}if(jn.length>0&&He!==null&&(jn[0]+=`<br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
          <span class="text-xs text-gray-400">Hoogte:</span>
          <span class="text-sm font-medium text-blue-600">${He.toFixed(2)} m NAP</span>
        </div>`),jn.length>0){l(jn),ie(nn),u(0),console.log(` KLIK OPGESLAGEN: [${Vt.coordinate[0].toFixed(0)}, ${Vt.coordinate[1].toFixed(0)}]`),y(Vt.coordinate),b(!1),G(!1),Se(!1),W(""),he(null);const Pe=Fn(Vt.coordinate);ze(Pe),N(`https://www.google.com/maps/dir/?api=1&destination=${Pe[1]},${Pe[0]}`),L(`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${Pe[1]},${Pe[0]}`),f(!0)}};return t.on("click",dr),()=>{t.un("click",dr)}},[t]);const Ai=()=>{f(!1),ke("half"),t&&_&&(rG(t),b(!1))},js=(wt,Qn)=>{const dr=Qn.velocity.y,Vt=Qn.offset.y;Ke==="half"?Vt<-50||dr<-500?ke("full"):(Vt>100||dr>500)&&Ai():(Vt>50||dr>300)&&ke("half")};return p.jsx(Wn,{children:h&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1500]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:Ai}),p.jsxs(yt.div,{className:"fixed bottom-0 left-0 right-0 z-[1501] bg-white rounded-t-2xl shadow-2xl overflow-hidden flex flex-col",style:{fontSize:`${14*xe/100}px`,height:Ke==="full"?"90vh":"auto",maxHeight:Ke==="full"?"90vh":"35vh"},initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.3,onDragEnd:js,children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white cursor-grab active:cursor-grabbing rounded-t-xl select-none",onClick:()=>ke(Ke==="half"?"full":"half"),children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[Ye&&p.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[p.jsx("button",{onClick:wt=>{wt.stopPropagation(),Hn()},className:"p-1 text-white/80 hover:text-white transition-colors border-0 outline-none bg-transparent","aria-label":"Vorige laag",children:p.jsx(z2e,{size:18})}),p.jsxs("span",{className:"text-white/80 font-medium min-w-[32px] text-center",style:{fontSize:"0.75em"},children:[c+1,"/",a.length]}),p.jsx("button",{onClick:wt=>{wt.stopPropagation(),ei()},className:"p-1 text-white/80 hover:text-white transition-colors border-0 outline-none bg-transparent","aria-label":"Volgende laag",children:p.jsx(nh,{size:18})})]}),p.jsx("span",{className:"font-medium text-white truncate",style:{fontSize:"0.9em"},children:gn||"Info"})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[Ie&&p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:wt=>{wt.stopPropagation(),G(!F)},className:`p-1 transition-colors flex-shrink-0 border-0 outline-none bg-transparent rounded hover:bg-white/20 ${U?"text-green-300":"text-white/80 hover:text-white"}`,title:"Toevoegen aan mijn laag","aria-label":"Toevoegen aan mijn laag",children:U?p.jsx(Ip,{size:16}):p.jsx(Tc,{size:16})}),F&&p.jsxs("div",{className:"absolute right-0 top-full mt-1 z-50 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[180px] max-w-[220px]",children:[p.jsx("div",{className:"px-3 py-1 text-xs text-gray-400 font-medium",children:"Toevoegen aan:"}),p.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:i.filter(wt=>!wt.archived).map(wt=>p.jsxs("button",{onClick:()=>{const Qn=le;s(wt.id,{name:gn||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[Ie[0],Ie[1]],sourceLayer:gn,geometry:Qn?.geometry,sourceProperties:Qn?.properties,popupContent:Qn?.popupHtml}),G(!1),he(wt.name),setTimeout(()=>he(null),2e3)},className:"w-full px-3 py-1.5 text-left text-sm text-gray-700 hover:bg-blue-50 border-0 outline-none bg-transparent flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:wt.color}}),p.jsx("span",{className:"truncate",children:wt.name})]},wt.id))}),p.jsx("div",{className:"border-t border-gray-100 mt-1 pt-1",children:ge?p.jsxs("div",{className:"px-2 py-1",children:[p.jsx("input",{type:"text",value:Z,onChange:wt=>W(wt.target.value),placeholder:"Naam nieuwe laag...",className:"w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:border-orange-400",autoFocus:!0,onKeyDown:wt=>{if(wt.key==="Enter"&&Z.trim()){const Qn=o(Z.trim()),dr=le;s(Qn,{name:gn||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[Ie[0],Ie[1]],sourceLayer:gn,geometry:dr?.geometry,sourceProperties:dr?.properties,popupContent:dr?.popupHtml}),G(!1),Se(!1),W(""),he(Z.trim()),setTimeout(()=>he(null),2e3)}else wt.key==="Escape"&&(Se(!1),W(""))}}),p.jsxs("div",{className:"flex gap-1 mt-1",children:[p.jsx("button",{onClick:()=>{if(Z.trim()){const wt=o(Z.trim()),Qn=le;s(wt,{name:gn||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[Ie[0],Ie[1]],sourceLayer:gn,geometry:Qn?.geometry,sourceProperties:Qn?.properties,popupContent:Qn?.popupHtml}),G(!1),Se(!1),W(""),he(Z.trim()),setTimeout(()=>he(null),2e3)}},disabled:!Z.trim(),className:"flex-1 px-2 py-1 text-xs bg-orange-500 text-white rounded disabled:opacity-50",children:"Toevoegen"}),p.jsx("button",{onClick:()=>{Se(!1),W("")},className:"px-2 py-1 text-xs text-gray-500 hover:text-gray-700",children:"Annuleer"})]})]}):p.jsxs("button",{onClick:()=>Se(!0),className:"w-full px-3 py-1.5 text-left text-sm text-orange-600 hover:bg-orange-50 border-0 outline-none bg-transparent flex items-center gap-2",children:[p.jsx(Tc,{size:14}),p.jsx("span",{children:"Nieuwe laag maken..."})]})})]})]}),O&&p.jsx("a",{href:O,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 text-amber-500 hover:text-amber-600 transition-colors flex-shrink-0",title:"Open Street View","aria-label":"Open Street View",children:p.jsx(Y2e,{size:18})}),C&&p.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",onClick:wt=>wt.stopPropagation(),className:"p-1 text-white/80 hover:text-white transition-colors flex-shrink-0 rounded hover:bg-white/20",title:"Navigeer naar locatie","aria-label":"Open in Google Maps",children:p.jsx(Og,{size:16})}),p.jsx(B2e,{size:18,className:"text-white/60 mx-1"}),p.jsx("button",{onClick:wt=>{wt.stopPropagation(),Ai()},className:"p-1 text-white/80 hover:text-white transition-colors flex-shrink-0 border-0 outline-none bg-transparent rounded hover:bg-white/20","aria-label":"Sluiten",children:p.jsx(Qr,{size:16})})]})]}),p.jsx("div",{className:`px-4 py-3 overflow-y-auto select-text min-h-0 ${Ke==="full"?"flex-1":""}`,style:{userSelect:"text",WebkitUserSelect:"text"},dangerouslySetInnerHTML:{__html:pt}}),p.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 flex items-center gap-2 flex-shrink-0",children:[p.jsx(bq,{size:14,className:"text-gray-400 flex-shrink-0"}),p.jsx("input",{type:"range",min:"80",max:"150",value:xe,onChange:wt=>be(parseInt(wt.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),p.jsxs("span",{className:"text-gray-400 w-8 text-right",style:{fontSize:"0.857em"},children:[xe,"%"]})]}),zn&&I&&!M&&p.jsxs("div",{className:"px-4 pb-4 flex gap-2 flex-shrink-0",children:[p.jsxs("button",{onClick:()=>{const wt=r.find(Qn=>Qn.id===I);wt&&V(wt)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(Wd,{size:16}),p.jsx("span",{children:"Bewerken"})]}),p.jsxs("button",{onClick:()=>{e(I),f(!1),P(null)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(Ah,{size:16}),p.jsx("span",{children:"Verwijderen"})]})]}),M&&p.jsxs("div",{className:"px-4 pb-4 space-y-3 border-t border-gray-100 pt-3 flex-shrink-0 overflow-y-auto max-h-[40vh]",children:[p.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Vondst bewerken"}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Objecttype"}),p.jsx("input",{type:"text",value:M.objectType,onChange:wt=>V({...M,objectType:wt.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Materiaal"}),p.jsx("input",{type:"text",value:M.material,onChange:wt=>V({...M,material:wt.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Periode"}),p.jsx("input",{type:"text",value:M.period,onChange:wt=>V({...M,period:wt.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Notities"}),p.jsx("textarea",{value:M.notes,onChange:wt=>V({...M,notes:wt.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50 resize-none h-16"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>V(null),className:"flex-1 px-3 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none text-sm",children:"Annuleren"}),p.jsx("button",{onClick:()=>{n(M.id,{objectType:M.objectType,material:M.material,period:M.period,notes:M.notes}),V(null),f(!1)},className:"flex-1 px-3 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors border-0 outline-none text-sm",children:"Opslaan"})]})]}),hr&&g&&p.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:_?p.jsxs("button",{onClick:Rr,className:"w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(J2,{size:16}),p.jsx("span",{children:"Hoogtekaart verbergen"})]}):p.jsx("button",{onClick:xo,disabled:T,className:`w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-white rounded-lg transition-colors border-0 outline-none ${T?"bg-blue-400 cursor-wait":"bg-blue-500 hover:bg-blue-600"}`,children:T?p.jsxs(p.Fragment,{children:[p.jsx(rP,{size:16,className:"animate-spin"}),p.jsx("span",{children:"Laden..."})]}):p.jsxs(p.Fragment,{children:[p.jsx(J2,{size:16}),p.jsx("span",{children:"Hoogtekaart tonen"})]})})})]})]})})}const zae=1e-4;function vTt(t,e){return t.points.some(n=>{const r=Math.abs(n.coordinates[0]-e[0]),i=Math.abs(n.coordinates[1]-e[1]);return r<zae&&i<zae})}function _Tt(){const t=li(L=>L.map),e=gr(L=>L.openVondstForm),{openAddPointModal:n,openCreateLayerModal:r,openLayerManagerModal:i}=gr(),s=ms(L=>L.layers),[o,a]=Y.useState(null),[l,c]=Y.useState(!1),[u,h]=Y.useState(!1),[f,g]=Y.useState(!1),y=Y.useRef(null),_=Y.useRef(null);Y.useEffect(()=>{if(!t){console.log(" LongPressMenu: map not ready");return}const L=t.getViewport();if(!L){console.log(" LongPressMenu: viewport not ready");return}console.log(" LongPressMenu: attached to viewport",L);const F=600,G=15,U=Se=>{if(console.log(" Touch start, touches:",Se.touches.length),Se.touches.length!==1)return;const Z=Se.touches[0];_.current={x:Z.clientX,y:Z.clientY},console.log(" Starting long press timer at:",_.current),y.current&&clearTimeout(y.current),y.current=window.setTimeout(()=>{if(console.log(" Timer fired! startPos:",_.current),!_.current)return;const W=window.__olMap;if(!W){console.log(" Map not available (global)");return}const ne=L.getBoundingClientRect(),ie=[_.current.x-ne.left,_.current.y-ne.top],le=W.getCoordinateFromPixel(ie);if(le){const xe=Fn(le);Se.preventDefault(),a({pixel:[_.current.x,_.current.y],coordinate:xe}),c(!0),h(!1),setTimeout(()=>h(!0),300),"vibrate"in navigator&&navigator.vibrate(50),console.log(" Long press detected at:",xe)}},F)},he=Se=>{if(!y.current||!_.current)return;const Z=Se.touches[0],W=Z.clientX-_.current.x,ne=Z.clientY-_.current.y,ie=Math.sqrt(W*W+ne*ne);ie>G&&(console.log(" Touch moved too much, cancelling. Distance:",ie),clearTimeout(y.current),y.current=null)},Ie=()=>{console.log(" Touch end, timer active:",!!y.current),y.current&&(console.log(" Cancelling timer on touch end"),clearTimeout(y.current),y.current=null),_.current=null},ze=Se=>{l&&Se.preventDefault()},Oe=Se=>{Se.button===0&&(console.log(" Mouse down"),_.current={x:Se.clientX,y:Se.clientY},y.current&&clearTimeout(y.current),y.current=window.setTimeout(()=>{if(console.log(" Mouse timer fired!"),!_.current)return;const Z=window.__olMap;if(console.log(" __olMap:",Z),console.log(" __olMap constructor:",Z?.constructor?.name),console.log(" has getCoordinateAtPixel:",typeof Z?.getCoordinateAtPixel),!Z){console.log(" Map not available (global)");return}const W=L.getBoundingClientRect(),ne=[_.current.x-W.left,_.current.y-W.top];console.log(" Pixel:",ne);const ie=Z.getCoordinateFromPixel(ne);if(console.log(" Coordinate:",ie),ie){const le=Fn(ie);a({pixel:[_.current.x,_.current.y],coordinate:le}),c(!0),h(!1),setTimeout(()=>h(!0),300),console.log(" Long press (mouse) detected at:",le)}},F))},fe=Se=>{if(!y.current||!_.current)return;const Z=Se.clientX-_.current.x,W=Se.clientY-_.current.y;Math.sqrt(Z*Z+W*W)>G&&(console.log(" Mouse moved, cancelling"),clearTimeout(y.current),y.current=null)},ge=()=>{console.log(" Mouse up"),y.current&&(clearTimeout(y.current),y.current=null),_.current=null};return L.addEventListener("touchstart",U,{passive:!1}),L.addEventListener("touchmove",he,{passive:!0}),L.addEventListener("touchend",Ie),L.addEventListener("touchcancel",Ie),L.addEventListener("contextmenu",ze),L.addEventListener("mousedown",Oe),L.addEventListener("mousemove",fe),L.addEventListener("mouseup",ge),L.addEventListener("mouseleave",ge),()=>{L.removeEventListener("touchstart",U),L.removeEventListener("touchmove",he),L.removeEventListener("touchend",Ie),L.removeEventListener("touchcancel",Ie),L.removeEventListener("contextmenu",ze),L.removeEventListener("mousedown",Oe),L.removeEventListener("mousemove",fe),L.removeEventListener("mouseup",ge),L.removeEventListener("mouseleave",ge),y.current&&clearTimeout(y.current)}},[t,l]);const b=()=>{u&&(c(!1),a(null),h(!1),g(!1))},T=()=>{c(!1),a(null),h(!1),g(!1)},A=L=>{if(!o)return;const[F,G]=o.coordinate;n(L,{lat:G,lng:F}),T()},I=()=>{r(),T()},P=()=>{if(!o)return;const[L,F]=o.coordinate;e({lat:F,lng:L}),c(!1),a(null),h(!1)},M=()=>{if(!o)return;const[L,F]=o.coordinate,G=`https://www.google.com/maps?q=${F},${L}`;window.open(G,"_blank"),c(!1),a(null),h(!1)},V=()=>{if(!o)return;const[L,F]=o.coordinate,G=`https://www.google.com/maps?layer=c&cbll=${F},${L}`;window.open(G,"_blank"),T()},C=()=>{if(!o)return;const L=document.createElement("input");L.type="file",L.accept="image/*",L.capture="environment",L.onchange=async F=>{const G=F.target.files?.[0];if(!G)return;const[U,he]=o.coordinate;e({lat:he,lng:U},G)},L.click(),T()},N=()=>{i(),T()},O=L=>{const[F,G]=L;return`${G.toFixed(5)}N, ${F.toFixed(5)}E`};return p.jsx(Wn,{children:l&&o&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1600]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:b}),p.jsxs(yt.div,{className:"fixed z-[1601] bg-white rounded-xl shadow-md overflow-hidden min-w-[200px] border-0 outline-none",style:{left:Math.min(o.pixel[0],window.innerWidth-220),top:(()=>{const L=f?480:380;return window.innerHeight-o.pixel[1]<L&&o.pixel[1]>L?o.pixel[1]-L+40:Math.min(o.pixel[1],window.innerHeight-L)})()},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[p.jsx("div",{className:"px-4 py-3 bg-white border-b border-gray-100",children:p.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[p.jsx(jo,{size:16}),p.jsx("span",{className:"text-xs font-mono",children:O(o.coordinate)})]})}),p.jsxs("div",{className:"bg-white",children:[p.jsxs("button",{onClick:P,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-orange-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(t5,{size:20,className:"text-orange-500"}),p.jsx("span",{className:"font-medium",children:"Vondst toevoegen"})]}),p.jsxs("button",{onClick:C,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-green-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(zL,{size:20,className:"text-green-500"}),p.jsx("span",{className:"font-medium",children:"Foto maken"})]}),p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>g(!f),className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(_c,{size:20,className:"text-purple-500"}),p.jsx("span",{className:"font-medium flex-1 text-left",children:"Voeg toe aan laag..."}),p.jsx(nh,{size:16,className:`text-gray-400 transition-transform ${f?"rotate-90":""}`})]}),p.jsx(Wn,{children:f&&p.jsx(yt.div,{className:"bg-gray-50 border-t border-gray-100",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:s.length===0?p.jsxs("button",{onClick:I,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none",children:[p.jsx(Tc,{size:14}),p.jsx("span",{children:"Maak eerst een laag aan"})]}):p.jsxs(p.Fragment,{children:[s.map(L=>{const F=o?vTt(L,o.coordinate):!1;return p.jsxs("button",{onClick:()=>!F&&A(L.id),className:`w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm bg-transparent border-0 outline-none ${F?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,title:F?"Al toegevoegd aan deze laag":void 0,disabled:F,children:[F&&p.jsx(Ip,{size:14,className:"text-green-500 flex-shrink-0"}),p.jsx("span",{className:"truncate",children:L.name}),p.jsx("span",{className:"text-xs text-gray-400 ml-auto",children:F?"al toegevoegd":`(${L.points.length})`})]},L.id)}),p.jsxs("button",{onClick:I,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none border-t border-gray-200",children:[p.jsx(Tc,{size:14}),p.jsx("span",{children:"Nieuwe laag..."})]})]})})})]}),p.jsxs("button",{onClick:N,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-purple-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(yht,{size:20,className:"text-purple-500"}),p.jsx("span",{className:"font-medium",children:"Lagen beheren"})]}),p.jsxs("button",{onClick:M,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(Og,{size:20,className:"text-blue-600"}),p.jsx("span",{className:"font-medium",children:"Open in Google Maps"})]}),p.jsxs("button",{onClick:V,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-yellow-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(Y2e,{size:20,className:"text-yellow-600"}),p.jsx("span",{className:"font-medium",children:"Street View"})]})]}),p.jsx("div",{className:"bg-white",children:p.jsxs("button",{onClick:T,className:"w-full px-4 py-3 flex items-center justify-center gap-2 text-gray-500 hover:bg-blue-50 transition-colors bg-white border-0 outline-none",children:[p.jsx(Qr,{size:18}),p.jsx("span",{children:"Annuleren"})]})})]})]})})}function xTt(t){return t}function wTt(t){if(t==null)return xTt;var e,n,r=t.scale[0],i=t.scale[1],s=t.translate[0],o=t.translate[1];return function(a,l){l||(e=n=0);var c=2,u=a.length,h=new Array(u);for(h[0]=(e+=a[0])*r+s,h[1]=(n+=a[1])*i+o;c<u;)h[c]=a[c],++c;return h}}function bTt(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}function ETt(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return Gae(t,n)})}:Gae(t,e)}function Gae(t,e){var n=e.id,r=e.bbox,i=e.properties==null?{}:e.properties,s=STt(t,e);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function STt(t,e){var n=wTt(t.transform),r=t.arcs;function i(u,h){h.length&&h.pop();for(var f=r[u<0?~u:u],g=0,y=f.length;g<y;++g)h.push(n(f[g],g));u<0&&bTt(h,y)}function s(u){return n(u)}function o(u){for(var h=[],f=0,g=u.length;f<g;++f)i(u[f],h);return h.length<2&&h.push(h[0]),h}function a(u){for(var h=o(u);h.length<4;)h.push(h[0]);return h}function l(u){return u.map(a)}function c(u){var h=u.type,f;switch(h){case"GeometryCollection":return{type:h,geometries:u.geometries.map(c)};case"Point":f=s(u.coordinates);break;case"MultiPoint":f=u.coordinates.map(s);break;case"LineString":f=o(u.arcs);break;case"MultiLineString":f=u.arcs.map(o);break;case"Polygon":f=l(u.arcs);break;case"MultiPolygon":f=u.arcs.map(l);break;default:return null}return{type:h,coordinates:f}}return c(e)}async function EDt(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`Failed to load ${t}: ${e.statusText}`);const n=await e.json();return console.log(` Loaded GeoJSON from ${t}`),n}catch(e){throw console.error(`Error loading GeoJSON from ${t}:`,e),e}}async function TTt(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`Failed to load ${t}: ${e.statusText}`);const n=await e.json(),r=Object.keys(n.objects)[0],i=ETt(n,n.objects[r]);return console.log(` Loaded and converted TopoJSON from ${t}`),i}catch(e){throw console.error(`Error loading TopoJSON from ${t}:`,e),e}}function kTt(t){return new BL({featureProjection:"EPSG:3857"}).readFeatures(t)}const hK={all:{name:"Alle provincies",bounds:[3.37,50.75,7.21,53.47]},groningen:{name:"Groningen",bounds:[6.2,53.1,7.21,53.47]},friesland:{name:"Friesland",bounds:[5.05,52.85,6.25,53.45]},drenthe:{name:"Drenthe",bounds:[6.1,52.65,7.1,53.15]},overijssel:{name:"Overijssel",bounds:[5.85,52.15,6.9,52.7]},flevoland:{name:"Flevoland",bounds:[5.15,52.25,6,52.65]},gelderland:{name:"Gelderland",bounds:[5,51.75,6.4,52.45]},utrecht:{name:"Utrecht",bounds:[4.85,51.9,5.65,52.25]},"noord-holland":{name:"Noord-Holland",bounds:[4.5,52.2,5.25,52.95]},"zuid-holland":{name:"Zuid-Holland",bounds:[3.85,51.8,4.9,52.35]},zeeland:{name:"Zeeland",bounds:[3.37,51.2,4.3,51.75]},"noord-brabant":{name:"Noord-Brabant",bounds:[4.35,51.25,6,51.85]},limburg:{name:"Limburg",bounds:[5.55,50.75,6.25,51.8]}};function ATt(t,e,n){if(n==="all")return!0;const r=hK[n];if(!r)return!0;const[i,s,o,a]=r.bounds;return t>=i&&t<=o&&e>=s&&e<=a}let YR=null;async function dK(){if(YR)return YR;const t=await TTt("/detect/data/amk_monumenten_full.topojson");return YR=kTt(t),YR}function ITt(t,e,n=50){const r=t.toLowerCase(),i=e.toLowerCase(),s=r.indexOf(i);if(s===-1)return t.substring(0,100)+"...";const o=Math.max(0,s-n),a=Math.min(t.length,s+e.length+n);let l="";return o>0&&(l+="..."),l+=t.substring(o,a),a<t.length&&(l+="..."),l}async function PTt(t,e=50,n="all"){if(!t||t.length<2)return[];const r=await dK(),i=[],o=t.toLowerCase().split(/\s+/).filter(a=>a.length>=2);for(const a of r){const l=(a.get("omschrijving")||"").toLowerCase(),c=(a.get("toponiem")||"").toLowerCase(),u=(a.get("txt_label")||"").toLowerCase();if(o.every(f=>l.includes(f)||c.includes(f)||u.includes(f))){const f=a.getGeometry();if(!f)continue;const g=f.getExtent(),y=vh(g),[_,b]=ob(y,"EPSG:3857","EPSG:4326");if(!ATt(_,b,n))continue;const T=a.get("omschrijving")||"";if(i.push({id:a.get("ID")||a.get("monumentnummer"),monumentnummer:a.get("monumentnummer"),toponiem:a.get("toponiem")||"Onbekend",kwaliteitswaarde:a.get("kwaliteitswaarde")||"",periode:a.get("txt_label")||"",omschrijving:T,matchedText:ITt(T,o[0]),coordinates:[_,b],extent:g}),i.length>=e)break}}return i.sort((a,l)=>{const c={"zeer hoge archeologische waarde":3,"hoge archeologische waarde":2,"archeologische waarde":1};return(c[l.kwaliteitswaarde]||0)-(c[a.kwaliteitswaarde]||0)}),i}async function CTt(t){return(await dK()).find(n=>n.get("monumentnummer")===t)||null}async function RTt(t){const e=await dK(),n=new Set(t);return e.filter(r=>n.has(r.get("monumentnummer")))}const DSe=vo((t,e)=>({keyword:"",province:"all",isActive:!1,totalCount:0,filteredCount:0,setKeyword:n=>t({keyword:n}),setProvince:n=>t({province:n}),setActive:n=>t({isActive:n}),toggleActive:()=>t(n=>({isActive:!n.isActive})),clearFilter:()=>t({keyword:"",province:"all",isActive:!1}),updateCounts:(n,r)=>t({totalCount:n,filteredCount:r})}));function SDt(t,e,n,r,i,s,o){if(s.length>=2){const l=s.toLowerCase().split(/\s+/).filter(g=>g.length>=2),c=t.toLowerCase(),u=e.toLowerCase(),h=n.toLowerCase();if(!l.every(g=>c.includes(g)||u.includes(g)||h.includes(g)))return!1}if(o!=="all"){const a=hK[o]?.bounds;if(a){const[l,c,u,h]=a;if(r<l||r>u||i<c||i>h)return!1}}return!0}const MTt={Compass:gq,TreePalm:Ght,Mountain:J2,Waves:Qht,Search:nv,Target:jht,Layers:_c,Grid:U2e},NTt={Compass:"text-purple-600",Waves:"text-cyan-600",TreePalm:"text-green-600",Mountain:"text-stone-600",Search:"text-amber-600",Target:"text-red-600",Layers:"text-blue-600",Grid:"text-lime-600"},OTt={Compass:"hover:bg-purple-50",Waves:"hover:bg-cyan-50",TreePalm:"hover:bg-green-50",Mountain:"hover:bg-stone-50",Search:"hover:bg-amber-50",Target:"hover:bg-red-50",Layers:"hover:bg-blue-50",Grid:"hover:bg-lime-50"},Uae=["Mijn Vondsten","Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","FAMKE IJzertijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten","Kastelen","IKAW","Archeo Onderzoeken","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","Runes","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","Hoogtekaart (WebGL)","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossiel Hotspots","Mineralen Hotspots","Goudrivieren","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Ruiterpaden","Laarzenpaden","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],LTt=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"],DTt=[5.2913,52.1326],jTt=8;function $Tt(){const t=Ws(G=>G.setLayerVisibility),e=Ps(G=>G.stopTracking),n=DSe(G=>G.clearFilter),r=li(G=>G.map),{presetsPanelOpen:i,togglePresetsPanel:s,closeAllPanels:o}=gr(),{presets:a,applyPreset:l,updatePreset:c,createPreset:u,resetToDefaults:h}=Afe(),f=Ws(G=>G.visible),g=an(G=>G.presetPanelFontScale),y=an(G=>G.setPresetPanelFontScale),_=an(G=>G.showFontSliders),b=12*g/100,[T,A]=Y.useState(null),[I,P]=Y.useState(!1),[M,V]=Y.useState(""),C=()=>{o(),Uae.forEach(G=>t(G,!1)),LTt.forEach(G=>{t(G,G==="CartoDB (licht)")}),e(),n(),r&&r.getView().animate({center:Ni(DTt),zoom:jTt,duration:500}),console.log(" Reset: CartoDB, alle lagen uit, GPS uit, zoom naar Nederland")},N=G=>{l(G),o()},O=(G,U,he)=>{if(G.stopPropagation(),!confirm(`Preset "${he}" overschrijven met huidige lagen?`))return;const Ie=Object.entries(f).filter(([ze,Oe])=>Oe&&Uae.includes(ze)).map(([ze])=>ze);c(U,{layers:Ie}),A(U),setTimeout(()=>A(null),2e3),console.log(" Lagen opgeslagen naar preset")},L=()=>{M.trim()&&(u(M.trim(),"Layers"),V(""),P(!1))},F=()=>{confirm("Presets terugzetten naar standaard?")&&h()};return p.jsxs(p.Fragment,{children:[p.jsx(yt.button,{onClick:C,className:"fixed bottom-2 left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Reset - CartoDB, alle lagen uit, GPS uit",children:p.jsx(Z2e,{size:20,className:"text-gray-600 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})}),p.jsx(yt.button,{onClick:s,className:"fixed bottom-[60px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Presets",children:i?p.jsx(GL,{size:20,className:"text-gray-600 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"}):p.jsx(kct,{size:20,className:"text-gray-600 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})}),p.jsx(Wn,{children:i&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[800]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s}),p.jsxs(yt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed bottom-[60px] left-[56px] bg-white/95 rounded-xl shadow-lg overflow-hidden w-[240px] backdrop-blur-sm z-[801]",children:[p.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-blue-500",style:{fontSize:`${b}px`},children:[p.jsx("span",{className:"font-medium text-white",children:"Presets"}),_&&p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-[9px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:g,onInput:G=>{y(parseInt(G.target.value))},onChange:G=>y(parseInt(G.target.value)),className:"w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${g}%`}),p.jsx("span",{className:"text-[11px] text-blue-200",children:"T"})]})]}),p.jsx("div",{className:"p-2 max-h-[300px] overflow-y-auto",children:a.map(G=>{const U=MTt[G.icon]||_c,he=NTt[G.icon]||"text-blue-600",Ie=OTt[G.icon]||"hover:bg-blue-50",ze=T===G.id;return p.jsxs("button",{onClick:()=>N(G.id),className:`w-full h-8 flex items-center gap-1.5 px-2 ${Ie} rounded text-left transition-colors border-0 outline-none bg-transparent overflow-hidden ${ze?"bg-green-50":""}`,style:{fontSize:`${b}px`},children:[p.jsx(U,{size:14,className:`${he} flex-shrink-0`}),p.jsx("span",{className:"text-gray-700 truncate flex-1",children:G.name}),ze?p.jsx("span",{className:"p-1 flex-shrink-0",children:p.jsx(Ip,{size:14,className:"text-green-500"})}):p.jsx("span",{onClick:Oe=>O(Oe,G.id,G.name),className:"p-1 hover:bg-gray-200 rounded transition-colors flex-shrink-0",title:"Huidige lagen opslaan naar deze preset",children:p.jsx(wq,{size:12,className:"text-gray-400 hover:text-blue-500"})})]},G.id)})}),p.jsx("div",{className:"border-t border-gray-200 px-2 py-1.5",children:I?p.jsxs("div",{className:"flex gap-1",children:[p.jsx("input",{type:"text",value:M,onChange:G=>V(G.target.value),onKeyDown:G=>{G.key==="Enter"&&L(),G.key==="Escape"&&P(!1)},placeholder:"Naam preset...",autoFocus:!0,className:"flex-1 px-2 py-1 text-sm rounded bg-gray-50 border-0 outline-none focus:ring-1 focus:ring-blue-400",style:{fontSize:`${b}px`}}),p.jsx("button",{onClick:L,disabled:!M.trim(),className:"px-2 py-1 bg-blue-500 text-white rounded text-sm disabled:opacity-50 border-0 outline-none",children:p.jsx(Ip,{size:14})})]}):p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("button",{onClick:()=>P(!0),className:"h-8 flex items-center gap-1.5 px-2 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",style:{fontSize:`${b}px`},children:[p.jsx(Tc,{size:14}),p.jsx("span",{className:"text-gray-600",children:"Voeg preset toe"})]}),p.jsx("button",{onClick:F,className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors border-0 outline-none",title:"Herstel standaard",children:p.jsx(lht,{size:14})})]})})]})]})})]})}function FTt(){const t=li(o=>o.map),[e,n]=Y.useState(0),[r,i]=Y.useState(!1);Y.useEffect(()=>{if(!t)return;const o=t.getView(),a=()=>{const l=o.getRotation(),c=l*180/Math.PI;n(c),i(Math.abs(l)>.087)};return a(),o.on("change:rotation",a),()=>{o.un("change:rotation",a)}},[t]);const s=()=>{t&&t.getView().animate({rotation:0,duration:300})};return p.jsx(Wn,{children:r&&p.jsx(yt.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},onClick:s,className:"fixed top-[60px] right-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Klik om noorden te herstellen",children:p.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",style:{transform:`rotate(${-e}deg)`},children:[p.jsx("path",{d:"M12 2 L14.5 12 L12 10 L9.5 12 Z",fill:"#EA4335"}),p.jsx("path",{d:"M12 22 L9.5 12 L12 14 L14.5 12 Z",fill:"white",stroke:"#9CA3AF",strokeWidth:"0.5"}),p.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#374151"})]})})})}const VTt=[{name:"AHN4 Hoogtekaart Kleur",color:"blue",default:.85},{name:"AHN4 Hillshade NL",color:"blue",default:.7},{name:"AHN4 Multi-Hillshade NL",color:"blue",default:.7},{name:"AHN 0.5m",color:"blue",default:.7},{name:"TMK 1850",color:"amber",default:.8},{name:"Bonnebladen 1900",color:"amber",default:.8},{name:"Geomorfologie",color:"green",default:.5},{name:"Bodemkaart",color:"amber",default:.6},{name:"Veengebieden",color:"amber",default:.6},{name:"IKAW",color:"orange",default:.5},{name:"Archeo Landschappen",color:"green",default:.5},{name:"Terpen",color:"orange",default:.7},{name:"Essen",color:"amber",default:.6},{name:"AMK Monumenten",color:"purple",default:.45},{name:"AMK Romeins",color:"red",default:.6},{name:"AMK Steentijd",color:"amber",default:.6},{name:"AMK Vroege ME",color:"green",default:.6},{name:"AMK Late ME",color:"blue",default:.6},{name:"AMK Overig",color:"purple",default:.6},{name:"Paleokaart 9000 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 5500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 2750 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 1500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 100 n.Chr.",color:"indigo",default:.7},{name:"Paleokaart 800 n.Chr.",color:"indigo",default:.7},{name:"Verdedigingslinies",color:"red",default:.7},{name:"Inundatiegebieden",color:"red",default:.5},{name:"Gewaspercelen",color:"green",default:.6},{name:"Erfgoedlijnen",color:"purple",default:.7},{name:"Oude Kernen",color:"orange",default:.6},{name:"Relictenkaart Vlakken",color:"green",default:.5}],zTt={blue:"accent-blue-500",amber:"accent-amber-500",red:"accent-red-500",indigo:"accent-indigo-500",green:"accent-green-500",orange:"accent-orange-500",purple:"accent-purple-500"};function GTt(){const[t,e]=Y.useState(!1),[n,r]=Y.useState(!1),i=Ws(u=>u.visible),s=Ws(u=>u.opacity),o=Ws(u=>u.setLayerOpacity),a=VTt.filter(u=>i[u.name]);if(a.length===0)return null;const l=n?a:a.slice(0,3),c=a.length>3;return p.jsxs("div",{className:"fixed bottom-[56px] right-2 z-[900]",children:[p.jsxs(yt.button,{onClick:()=>e(!t),className:"w-11 h-11 bg-white/80 rounded-xl backdrop-blur-sm shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none hover:bg-white/90 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Opacity sliders",title:t?"Sluit opacity sliders":"Open opacity sliders",children:[p.jsx(J2e,{size:22,strokeWidth:2,className:"text-gray-500 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"}),a.length>0&&p.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white text-[10px] rounded-full flex items-center justify-center",children:a.length})]}),p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(!1)}),p.jsxs(yt.div,{initial:{opacity:0,x:20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.9},transition:{duration:.2},className:"absolute bottom-0 right-14 bg-white/95 rounded-xl shadow-lg overflow-hidden min-w-[220px] max-h-[60vh] flex flex-col",children:[p.jsx("div",{className:"px-3 py-1.5 bg-blue-500",children:p.jsx("span",{className:"font-medium text-white text-xs",children:"Transparantie"})}),p.jsxs("div",{className:"p-3 overflow-y-auto flex-1",children:[p.jsx("div",{className:"space-y-3",children:l.map(u=>{const h=s[u.name]??u.default;return p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block truncate",title:u.name,children:u.name}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"range",min:"0",max:"100",value:h*100,onChange:f=>o(u.name,parseInt(f.target.value)/100),className:`flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer ${zTt[u.color]}`}),p.jsxs("span",{className:"text-xs text-gray-500 w-8 text-right select-none pointer-events-none",children:[Math.round(h*100),"%"]})]})]},u.name)})}),c&&p.jsx("button",{onClick:()=>r(!n),className:"w-full mt-3 pt-2 border-t border-gray-200 flex items-center justify-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:n?p.jsxs(p.Fragment,{children:[p.jsx(GL,{size:14}),"Minder tonen"]}):p.jsxs(p.Fragment,{children:[p.jsx(jb,{size:14}),a.length-3," meer..."]})})]})]})]})})]})}function UTt(){const t=li(M=>M.map),e=an(M=>M.showWeatherButton),[n,r]=Y.useState(!1),[i,s]=Y.useState(""),[o,a]=Y.useState([]),[l,c]=Y.useState(!1),[u,h]=Y.useState(!1),f=Y.useRef(null),g=Y.useRef(null),y=Y.useRef();Y.useEffect(()=>{n&&f.current&&f.current.focus()},[n]),Y.useEffect(()=>{if(!n)return;const M=V=>{g.current&&!g.current.contains(V.target)&&_()};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[n]),Y.useEffect(()=>{if(!n)return;const M=V=>{V.key==="Escape"&&_()};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[n]),Y.useEffect(()=>{if(y.current&&clearTimeout(y.current),i.length<2){a([]);return}return y.current=window.setTimeout(async()=>{h(!0);try{const V=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/suggest?q=${encodeURIComponent(i)}&rows=7`)).json();V.response?.docs&&a(V.response.docs)}catch(M){console.error("Search error:",M),a([])}finally{h(!1)}},300),()=>{y.current&&clearTimeout(y.current)}},[i]);const _=()=>{r(!1),s(""),a([]),c(!1)},b=async M=>{try{const C=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/lookup?id=${encodeURIComponent(M)}`)).json();if(C.response?.docs?.[0]?.centroide_ll){const O=C.response.docs[0].centroide_ll.match(/POINT\(([^ ]+) ([^)]+)\)/);if(O)return{lng:parseFloat(O[1]),lat:parseFloat(O[2])}}}catch(V){console.error("Lookup error:",V)}return null},T=async M=>{if(!t)return;const V=await b(M.id);V&&t.getView().animate({center:Ni([V.lng,V.lat]),zoom:16,duration:1e3}),_()},A=async(M,V)=>{V.stopPropagation();const C=await b(M.id);if(C){const N=`https://www.google.com/maps?q=${C.lat},${C.lng}`;window.open(N,"_blank")}_()},I={top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))"};if(!n)return p.jsx(yt.button,{className:"fixed right-14 z-[800] w-11 h-11 flex items-center justify-center bg-white/90 hover:bg-white rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",style:I,onClick:()=>r(!0),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Zoeken",children:p.jsx(nv,{size:22,className:"text-gray-600 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})});const P=e?"220px":"52px";return p.jsxs("div",{ref:g,className:"fixed right-14 z-[850]",style:{...I,left:P},children:[p.jsxs(yt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"search-input-wrapper",children:[p.jsx(nv,{size:18,className:"search-icon"}),p.jsx("input",{ref:f,type:"text",value:i,onChange:M=>{s(M.target.value),c(!0)},onFocus:()=>c(!0),placeholder:"Zoek adres of plaats...",className:"search-input"}),p.jsx("button",{onClick:_,className:"search-clear",title:"Sluiten",children:p.jsx(Qr,{size:18})})]}),p.jsx(Wn,{children:l&&o.length>0&&p.jsx(yt.ul,{className:"search-results",initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},children:o.map(M=>p.jsxs("li",{className:"search-result-item",children:[p.jsx("div",{className:"search-result-content",onClick:()=>T(M),children:p.jsx("span",{className:"search-result-text",children:M.weergavenaam})}),p.jsx("button",{className:"search-navigate-btn",onClick:V=>A(M,V),title:"Open in Google Maps",children:p.jsx(Og,{size:20})})]},M.id))})}),l&&u&&p.jsx("div",{className:"search-loading",children:"Zoeken..."})]})}function BTt(){const t=li(r=>r.map),e=()=>{if(!t)return;const r=t.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i+1,duration:200})},n=()=>{if(!t)return;const r=t.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i-1,duration:200})};return p.jsxs(yt.div,{className:"fixed bottom-2 right-2 z-[800] flex flex-row-reverse gap-1",children:[p.jsx(yt.button,{className:"w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Uitzoomen",children:p.jsx(q2e,{size:22,className:"text-gray-600 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})}),p.jsx(yt.button,{className:"w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Inzoomen",children:p.jsx(Tc,{size:22,className:"text-gray-600 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})})]})}const WTt="detector2024",lG="detectorapp-auth";function HTt({children:t}){const[e,n]=Y.useState(!1),[r,i]=Y.useState(""),[s,o]=Y.useState(!1),[a,l]=Y.useState(""),[c,u]=Y.useState(!0);Y.useEffect(()=>{localStorage.getItem(lG)==="authenticated"&&n(!0),u(!1)},[]);const h=f=>{f.preventDefault(),l(""),r===WTt?(localStorage.setItem(lG,"authenticated"),n(!0)):(l("Onjuist wachtwoord"),i(""))};return c?p.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center",children:p.jsx("div",{className:"text-white text-lg",children:"Laden..."})}):e?p.jsx(p.Fragment,{children:t}):p.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",children:p.jsxs(yt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(Gz,{size:32,className:"text-blue-600"})}),p.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"DetectorApp"}),p.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Test versie - Toegang beveiligd"})]}),p.jsxs("form",{onSubmit:h,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wachtwoord"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:s?"text":"password",value:r,onChange:f=>i(f.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none pr-12",placeholder:"Voer wachtwoord in",autoFocus:!0}),p.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?p.jsx(n5,{size:20}):p.jsx(NA,{size:20})})]})]}),a&&p.jsx(yt.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm text-center",children:a}),p.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Inloggen"})]}),p.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"Alleen voor testers"})]})})}function qTt(){localStorage.removeItem(lG),window.location.reload()}function KTt({isOpen:t,onClose:e}){const n=yh(l=>l.vondsten),r={total:n.length,byType:{},byMaterial:{},byPeriod:{},byCondition:{},avgDepth:0,totalWeight:0,recent:n.slice(-5).reverse()};let i=0,s=0;n.forEach(l=>{r.byType[l.objectType]=(r.byType[l.objectType]||0)+1,r.byMaterial[l.material]=(r.byMaterial[l.material]||0)+1,r.byPeriod[l.period]=(r.byPeriod[l.period]||0)+1,l.condition&&(r.byCondition[l.condition]=(r.byCondition[l.condition]||0)+1),l.depth&&(i+=l.depth,s++),l.weight&&(r.totalWeight+=l.weight)}),r.avgDepth=s>0?Math.round(i/s):0;const o=l=>Object.entries(l).sort((c,u)=>u[1]-c[1]),a=l=>Math.max(...Object.values(l),1);return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(V2e,{size:18}),p.jsx("span",{className:"font-medium",children:"Mijn Vondsten Dashboard"})]}),p.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:18})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:n.length===0?p.jsxs("div",{className:"text-center py-8 text-gray-500",children:[p.jsx(jo,{size:48,className:"mx-auto mb-3 opacity-30"}),p.jsx("p",{className:"font-medium",children:"Nog geen vondsten"}),p.jsx("p",{className:"text-sm mt-1",children:"Voeg je eerste vondst toe via de oranje knop of long-press op de kaart"})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[p.jsx(CF,{icon:p.jsx(jo,{size:20}),value:r.total,label:"Totaal",color:"bg-orange-100 text-orange-700"}),p.jsx(CF,{icon:p.jsx(Ld,{size:20}),value:r.avgDepth>0?`${r.avgDepth}cm`:"-",label:"Gem. diepte",color:"bg-blue-100 text-blue-700"}),p.jsx(CF,{icon:p.jsx(fht,{size:20}),value:r.totalWeight>0?`${r.totalWeight.toFixed(1)}g`:"-",label:"Tot. gewicht",color:"bg-green-100 text-green-700"})]}),p.jsx(XR,{title:"Per Type",data:o(r.byType),max:a(r.byType),color:"bg-orange-500"}),p.jsx(XR,{title:"Per Periode",data:o(r.byPeriod),max:a(r.byPeriod),color:"bg-amber-500"}),p.jsx(XR,{title:"Per Materiaal",data:o(r.byMaterial),max:a(r.byMaterial),color:"bg-blue-500"}),Object.keys(r.byCondition).length>0&&p.jsx(XR,{title:"Per Conditie",data:o(r.byCondition),max:a(r.byCondition),color:"bg-green-500"}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[p.jsx(pq,{size:14}),"Recente Vondsten"]}),p.jsx("div",{className:"space-y-2",children:r.recent.map(l=>p.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-medium text-sm text-gray-800",children:l.objectType}),p.jsx("span",{className:"text-gray-400 mx-1",children:"-"}),p.jsx("span",{className:"text-sm text-gray-600",children:l.material})]}),p.jsx("span",{className:"text-xs text-gray-400",children:new Date(l.timestamp).toLocaleDateString("nl-NL")})]},l.id))})]})]})})]})]})})}function CF({icon:t,value:e,label:n,color:r}){return p.jsxs("div",{className:`rounded-lg p-3 ${r}`,children:[p.jsx("div",{className:"flex items-center gap-2 mb-1 opacity-70",children:t}),p.jsx("div",{className:"text-xl font-bold",children:e}),p.jsx("div",{className:"text-xs opacity-70",children:n})]})}function XR({title:t,data:e,max:n,color:r}){return e.length===0?null:p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:t}),p.jsx("div",{className:"space-y-1.5",children:e.slice(0,6).map(([i,s])=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-24 text-xs text-gray-600 truncate",title:i,children:i}),p.jsx("div",{className:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden",children:p.jsx(yt.div,{className:`h-full ${r} rounded-full`,initial:{width:0},animate:{width:`${s/n*100}%`},transition:{duration:.5,ease:"easeOut"}})}),p.jsx("div",{className:"w-6 text-xs text-gray-600 text-right font-medium",children:s})]},i))})]})}function YTt(t){const{type:e,coordinates:n}=t,r=a=>Ni(a),i=a=>a.map(r),s=a=>a.map(i),o=a=>a.map(s);switch(e){case"Point":return new ki(r(n));case"LineString":return new ts(i(n));case"Polygon":return new Pl(s(n));case"MultiPoint":return new u0(i(n));case"MultiLineString":return new _h(s(n));case"MultiPolygon":return new xp(o(n));default:return console.warn(`Unsupported geometry type: ${e}`),null}}function XTt(t,e,n){const r=t.color,i=10,s=5,o=14;let a=i;if(n>50?a=s:n>10?a=Math.max(s,i-(n-10)/10):n<2&&(a=o),e==="Point"||e==="MultiPoint")return new xn({image:new gs({radius:a,fill:new Dn({color:r}),stroke:new Mn({color:"#ffffff",width:2})})});if(e==="LineString"||e==="MultiLineString")return new xn({stroke:new Mn({color:r,width:3})});if(e==="Polygon"||e==="MultiPolygon"){const l=ZTt(r,.3);return new xn({fill:new Dn({color:l}),stroke:new Mn({color:r,width:2})})}return new xn({image:new gs({radius:a,fill:new Dn({color:r}),stroke:new Mn({color:"#ffffff",width:2})})})}function ZTt(t,e){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(n){const r=parseInt(n[1],16),i=parseInt(n[2],16),s=parseInt(n[3],16);return`rgba(${r}, ${i}, ${s}, ${e})`}return t}function JTt(){const t=li(r=>r.map),e=EI(r=>r.layers),n=Y.useRef(new Map);return Y.useEffect(()=>{if(!t)return;const r=new Set;e.forEach(i=>{r.add(i.id);const s=new Ol;i.features.features.forEach((a,l)=>{if(!a.geometry)return;const c=YTt(a.geometry);if(!c)return;const u=new yr({geometry:c,...a.properties,layerType:"importedLayer",layerId:i.id,layerName:i.name,layerColor:i.color,featureIndex:l});u.setStyle((h,f)=>XTt(i,a.geometry.type,f)),s.addFeature(u)});const o=n.current.get(i.id);if(o)o.setSource(s),o.setVisible(i.visible),o.setOpacity(i.opacity);else{const a=new Ll({source:s,zIndex:900,visible:i.visible,opacity:i.opacity,properties:{title:i.name,customLayerId:i.id}});t.addLayer(a),n.current.set(i.id,a)}}),n.current.forEach((i,s)=>{r.has(s)||(t.removeLayer(i),n.current.delete(s))})},[t,e]),Y.useEffect(()=>()=>{t&&(n.current.forEach(r=>{t.removeLayer(r)}),n.current.clear())},[t]),null}lr.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");tEe(lr);function QTt(t){if(!t||t.length<2)return"unknown";const[e,n]=t;return e>=7e3&&e<=3e5&&n>=289e3&&n<=629e3?"RD":Math.abs(e)<=180&&Math.abs(n)<=90?"WGS84":"unknown"}function ekt(t){const[e,n]=t;return lr("EPSG:28992","EPSG:4326",[e,n])}function jSe(t,e){return typeof t[0]=="number"?e(t):t.map(n=>jSe(n,e))}function tkt(t){const e=t.coordinates;return!e||Array.isArray(e)&&e.length===0?null:t.type==="Point"?e:t.type==="LineString"||t.type==="MultiPoint"?e[0]:t.type==="Polygon"||t.type==="MultiLineString"?e[0]?.[0]:t.type==="MultiPolygon"?e[0]?.[0]?.[0]:null}async function nkt(t){const e=[],n=[];try{const r=await t.text(),i=JSON.parse(r);if(!i.type)return e.push('Ongeldig GeoJSON: geen "type" veld gevonden'),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}};let s=[];i.type==="FeatureCollection"?s=i.features||[]:i.type==="Feature"?s=[i]:i.type==="GeometryCollection"?s=(i.geometries||[]).map((c,u)=>({type:"Feature",geometry:c,properties:{id:u}})):s=[{type:"Feature",geometry:i,properties:{}}],s.length===0&&n.push("Geen features gevonden in bestand");let o="unknown",a=!1;if(s.length>0&&s[0].geometry){const c=tkt(s[0].geometry);c&&(o=QTt(c))}o==="RD"&&(n.push("Rijksdriehoek coordinaten gedetecteerd, worden omgezet naar WGS84"),a=!0,s=s.map(c=>{if(!c.geometry)return c;const u=jSe(c.geometry.coordinates,ekt);return{...c,geometry:{...c.geometry,coordinates:u}}}),o="WGS84");const l=[...new Set(s.filter(c=>c.geometry).map(c=>c.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:s},errors:e,warnings:n,metadata:{featureCount:s.length,geometryTypes:l,coordinateSystem:o,transformed:a}}}catch(r){return e.push(`Fout bij parsen: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function rkt(t){const e=[],n=[];try{const r=await t.text(),s=new Hyt({extractStyles:!1}).readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&n.push("Geen features gevonden in KML bestand");const l=new BL().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((u,h)=>{const f={...u.properties},g=f.name||f.Name||`Feature ${h+1}`,y=f.description||f.Description||"";return{type:"Feature",geometry:u.geometry,properties:{...f,name:g,description:y}}}),c=[...new Set(l.filter(u=>u.geometry).map(u=>u.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:n,metadata:{featureCount:l.length,geometryTypes:c,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen KML: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function ikt(t){const e=[],n=[];try{const r=await t.text(),s=new oyt().readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&n.push("Geen features gevonden in GPX bestand");const l=new BL().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((u,h)=>{const f={...u.properties},g=f.name||f.Name||`Waypoint ${h+1}`,y=f.desc||f.description||"",_=f.time||null,b=f.ele||null;return{type:"Feature",geometry:u.geometry,properties:{...f,name:g,description:y,time:_,elevation:b}}}),c=[...new Set(l.filter(u=>u.geometry).map(u=>u.geometry.type))];return c.includes("LineString")&&n.push("GPX track routes worden als lijnen weergegeven"),{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:n,metadata:{featureCount:l.length,geometryTypes:c,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen GPX: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function fK(t){switch(t.split(".").pop()?.toLowerCase()){case"geojson":case"json":return"geojson";case"kml":case"kmz":return"kml";case"gpx":return"gpx";default:return"unsupported"}}function skt(){return".geojson,.json,.kml,.gpx"}function pK(){return"GeoJSON, KML (Google My Maps), GPX"}async function okt(t){switch(fK(t.name)){case"geojson":return nkt(t);case"kml":return rkt(t);case"gpx":return ikt(t);case"unsupported":default:return{success:!1,features:{type:"FeatureCollection",features:[]},errors:[`Niet-ondersteund bestandsformaat: ${t.name}. Ondersteunde formaten: ${pK()}`],warnings:[],metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function akt(t){return t.size>10485760?{valid:!1,error:`Bestand te groot (${(t.size/1024/1024).toFixed(1)} MB). Maximum is 10 MB.`}:fK(t.name)==="unsupported"?{valid:!1,error:`Niet-ondersteund bestandsformaat. Ondersteunde formaten: ${pK()}`}:t.name.toLowerCase().endsWith(".kmz")?{valid:!1,error:"KMZ bestanden worden nog niet ondersteund. Pak het bestand uit en importeer het .kml bestand."}:{valid:!0}}function lkt({isOpen:t,onClose:e}){const n=EI(N=>N.addLayer),r=Y.useRef(null),[i,s]=Y.useState("idle"),[o,a]=Y.useState(null),[l,c]=Y.useState(null),[u,h]=Y.useState(""),[f,g]=Y.useState(null),[y,_]=Y.useState(!1),b=Y.useCallback(()=>{s("idle"),a(null),c(null),h(""),g(null),r.current&&(r.current.value="")},[]),T=Y.useCallback(()=>{b(),e()},[b,e]),A=Y.useCallback(async N=>{const O=akt(N);if(!O.valid){g(O.error||"Ongeldig bestand"),s("error");return}a(N),s("parsing"),g(null);const L=N.name.replace(/\.[^/.]+$/,"");h(L);try{const F=await okt(N);if(!F.success){g(F.errors.join(`
`)),s("error");return}if(F.features.features.length===0){g("Geen features gevonden in het bestand"),s("error");return}c(F),s("preview")}catch(F){g(F instanceof Error?F.message:"Onbekende fout bij parsen"),s("error")}},[]),I=Y.useCallback(N=>{const O=N.target.files?.[0];O&&A(O)},[A]),P=Y.useCallback(N=>{N.preventDefault(),_(!0)},[]),M=Y.useCallback(N=>{N.preventDefault(),_(!1)},[]),V=Y.useCallback(N=>{N.preventDefault(),_(!1);const O=N.dataTransfer.files?.[0];O&&A(O)},[A]),C=Y.useCallback(()=>{if(!l||!u.trim())return;const N=o?fK(o.name):"geojson";n({name:u.trim(),type:N==="unsupported"?"geojson":N,features:l.features,visible:!0,opacity:1,color:"",sourceFileName:o?.name||"unknown"}),T()},[l,u,o,n,T]);return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:T}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[80vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(iP,{size:18}),p.jsx("span",{className:"font-medium",children:"Laag Importeren"})]}),p.jsx("button",{onClick:T,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:18})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i==="idle"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${y?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:P,onDragLeave:M,onDrop:V,children:[p.jsx(yq,{size:40,className:"mx-auto text-gray-400 mb-3"}),p.jsx("p",{className:"text-gray-600 mb-2",children:"Sleep een bestand hierheen"}),p.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"of"}),p.jsx("button",{onClick:()=>r.current?.click(),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none",children:"Bestand kiezen"}),p.jsx("input",{ref:r,type:"file",accept:skt(),onChange:I,className:"hidden"})]}),p.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[p.jsx("p",{className:"font-medium",children:"Ondersteunde formaten:"}),p.jsx("p",{children:pK()})]})]}),i==="parsing"&&p.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[p.jsx(rP,{size:40,className:"text-purple-500 animate-spin mb-4"}),p.jsx("p",{className:"text-gray-600",children:"Bestand verwerken..."}),p.jsx("p",{className:"text-gray-400 text-sm",children:o?.name})]}),i==="error"&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[p.jsx(G2e,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-red-700",children:"Import mislukt"}),p.jsx("p",{className:"text-sm text-red-600 mt-1 whitespace-pre-wrap",children:f})]})]}),p.jsx("button",{onClick:b,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Opnieuw proberen"})]}),i==="preview"&&l&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[p.jsx($ct,{size:20,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-green-700",children:"Bestand geladen"}),p.jsx("p",{className:"text-sm text-green-600",children:o?.name})]})]}),l.warnings.length>0&&p.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg",children:[p.jsx("p",{className:"font-medium text-amber-700 text-sm",children:"Let op:"}),p.jsx("ul",{className:"text-sm text-amber-600 mt-1 list-disc list-inside",children:l.warnings.map((N,O)=>p.jsx("li",{children:N},O))})]}),p.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-500",children:"Features:"}),p.jsx("span",{className:"ml-2 font-medium",children:l.metadata.featureCount})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-500",children:"Types:"}),p.jsx("span",{className:"ml-2 font-medium",children:l.metadata.geometryTypes.join(", ")||"-"})]})]})}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam van de laag"}),p.jsx("input",{type:"text",value:u,onChange:N=>h(N.target.value),placeholder:"Bijv. Mijn locaties",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),i==="preview"&&p.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex gap-2",children:[p.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Annuleren"}),p.jsx("button",{onClick:C,disabled:!u.trim(),className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:"Importeren"})]})]})]})})}function ckt(){const{user:t,loading:e,error:n,signInWithGoogle:r,logout:i,initAuth:s}=DO();return Y.useEffect(()=>{s()},[s]),e?p.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg text-gray-500",children:[p.jsx(Th,{size:16,className:"animate-pulse"}),p.jsx("span",{className:"text-sm",children:"Laden..."})]}):t?p.jsxs("div",{className:"flex items-center gap-3 px-3 py-2.5 bg-green-50 rounded-lg",children:[t.photoURL?p.jsx("img",{src:t.photoURL,alt:t.displayName||"User",className:"w-8 h-8 rounded-full border-2 border-green-200",referrerPolicy:"no-referrer"}):p.jsx("div",{className:"w-8 h-8 rounded-full bg-green-200 flex items-center justify-center",children:p.jsx(Eq,{size:16,className:"text-green-600"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"text-sm font-medium text-green-800 truncate",children:t.displayName||t.email}),p.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1",children:[p.jsx(Th,{size:12}),"Cloud sync actief"]})]}),p.jsx("button",{onClick:i,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none bg-transparent",title:"Uitloggen",children:p.jsx(xq,{size:16})})]}):p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg text-gray-500",children:[p.jsx(Wct,{size:16}),p.jsx("span",{className:"text-sm",children:"Alleen lokale opslag"})]}),p.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none",children:[p.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),p.jsx("span",{className:"text-sm text-gray-700",children:"Inloggen met Google"})]}),n&&p.jsx("div",{className:"px-3 py-2 bg-red-50 text-red-700 text-xs rounded-lg",children:n})]})}const ukt="https://forms.gle/R5LCk11Bzu5XrkBj8";function hkt(){const{settingsPanelOpen:t,toggleSettingsPanel:e,vondstDashboardOpen:n,toggleVondstDashboard:r,openLayerManagerModal:i}=gr(),s=an(),{presets:o,createPreset:a,deletePreset:l,updatePreset:c}=Afe(),u=yh(ne=>ne.vondsten),h=EI(ne=>ne.layers),{layers:f,updateLayer:g}=ms(),{devMode:y,setDevMode:_,tier:b}=EB(),[T,A]=Y.useState(""),[I,P]=Y.useState(!1),[M,V]=Y.useState(!1),[C,N]=Y.useState(null),[O,L]=Y.useState(""),[F,G]=Y.useState(null),[U,he]=Y.useState(""),[Ie,ze]=Y.useState("algemeen"),Oe=14*s.fontScale/100,fe=()=>{T.trim()&&(a(T.trim(),"Layers"),A(""),P(!1))},ge=(ne,ie)=>{N(ne),L(ie)},Se=ne=>{O.trim()&&(c(ne,{name:O.trim()}),console.log(` Preset hernoemd naar "${O.trim()}"`)),N(null),L("")},Z=()=>{N(null),L("")},W=[{id:"algemeen",label:"Algemeen",icon:p.jsx(Sht,{size:14})},{id:"lagen",label:"Lagen",icon:p.jsx(_c,{size:14})},{id:"vondsten",label:"Vondsten",icon:p.jsx(jo,{size:14})}];return p.jsxs(p.Fragment,{children:[p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-500",style:{fontSize:`${Oe}px`},children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(s5,{size:18,className:"text-white"}),p.jsx("span",{className:"font-medium text-white",children:"Instellingen"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[s.showFontSliders&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-[10px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:s.fontScale,onInput:ne=>{s.setFontScale(parseInt(ne.target.value))},onChange:ne=>s.setFontScale(parseInt(ne.target.value)),className:"w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${s.fontScale}%`}),p.jsx("span",{className:"text-xs text-blue-200",children:"T"})]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-blue-400/50 hover:bg-blue-400 transition-colors border-0 outline-none ml-1",children:p.jsx(Qr,{size:18,className:"text-white",strokeWidth:2.5})})]})]}),p.jsx("div",{className:"flex border-b border-gray-200",children:W.map(ne=>p.jsxs("button",{onClick:()=>ze(ne.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${Ie===ne.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[ne.icon,ne.label]},ne.id))}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",style:{fontSize:`${Oe}px`},children:[Ie==="algemeen"&&p.jsxs(p.Fragment,{children:[p.jsx(Xh,{title:"Account",icon:p.jsx(Eq,{size:16}),children:p.jsx(ckt,{})}),p.jsxs(Xh,{title:"Kaart",icon:p.jsx(kw,{size:16}),children:[p.jsx(dkt,{label:"Standaard achtergrond",children:p.jsxs("select",{value:s.defaultBackground,onChange:ne=>s.setDefaultBackground(ne.target.value),className:"px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},children:[p.jsx("option",{value:"CartoDB (licht)",children:"Licht"}),p.jsx("option",{value:"OpenStreetMap",children:"OSM"}),p.jsx("option",{value:"Luchtfoto",children:"Luchtfoto"})]})}),p.jsx(ty,{label:"Schaalbalk tonen",checked:s.showScaleBar,onChange:s.setShowScaleBar})]}),p.jsxs(Xh,{title:"GPS",icon:p.jsx(rh,{size:16}),children:[p.jsx(ty,{label:"GPS aan bij start",checked:s.gpsAutoStart,onChange:s.setGpsAutoStart}),p.jsx(ty,{label:"Nauwkeurigheidscirkel",checked:s.showAccuracyCircle,onChange:s.setShowAccuracyCircle})]}),p.jsxs(Xh,{title:"Feedback",icon:p.jsx(kht,{size:16}),children:[p.jsx(ty,{label:"Trillen bij acties",checked:s.hapticFeedback,onChange:s.setHapticFeedback}),p.jsx(ty,{label:"Spraakfeedback vondsten",checked:s.voiceFeedbackEnabled,onChange:s.setVoiceFeedbackEnabled}),s.voiceFeedbackEnabled&&p.jsxs("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:[p.jsx(Zht,{size:12,className:"inline mr-1"}),"Spreekt vondst info uit bij toevoegen"]})]}),p.jsxs(Xh,{title:"Weer",icon:p.jsx(Th,{size:16}),children:[p.jsx(ty,{label:"Weerwidget tonen",checked:s.showWeatherButton,onChange:s.setShowWeatherButton}),p.jsx("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:"Actueel weer, voorspelling en buienradar"})]}),p.jsxs(Xh,{title:"Development",icon:p.jsx(Zct,{size:16}),children:[p.jsx(ty,{label:"Dev Mode (alles ontgrendeld)",checked:y,onChange:_}),p.jsxs("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:["Huidige tier: ",p.jsx("span",{className:"font-medium text-blue-600",children:b}),y&&p.jsx("span",{className:"text-green-600",children:" (alle lagen ontgrendeld)"})]})]})]}),Ie==="lagen"&&p.jsxs(p.Fragment,{children:[p.jsx(Xh,{title:"Mijn lagen",icon:p.jsx(_c,{size:16}),isOwn:!0,children:p.jsxs("div",{className:"space-y-1",children:[f.filter(ne=>!ne.archived).length===0?p.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Nog geen eigen lagen aangemaakt."}):f.filter(ne=>!ne.archived).map(ne=>p.jsx("div",{className:"flex items-center gap-2 py-1.5 px-2 hover:bg-gray-50 rounded",children:F===ne.id?p.jsx("input",{type:"text",value:U,onChange:ie=>he(ie.target.value),onKeyDown:ie=>{ie.key==="Enter"?(U.trim()&&g(ne.id,{name:U.trim()}),G(null)):ie.key==="Escape"&&G(null)},onBlur:()=>{U.trim()&&g(ne.id,{name:U.trim()}),G(null)},autoFocus:!0,className:"flex-1 px-1.5 py-0.5 text-sm bg-orange-50 rounded outline-none focus:ring-1 focus:ring-orange-400"}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"flex-1 text-sm text-gray-700 truncate",children:ne.name}),p.jsxs("span",{className:"text-xs text-gray-400",children:[ne.points.length," punten"]}),p.jsx("button",{onClick:()=>{G(ne.id),he(ne.name)},className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none bg-transparent",title:"Naam bewerken",children:p.jsx(Wd,{size:12})})]})},ne.id)),p.jsxs("button",{onClick:()=>{i(),e()},className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(s5,{size:14}),p.jsx("span",{children:"Lagen beheren"})]})]})}),p.jsx(Xh,{title:"Lagen importeren",icon:p.jsx(iP,{size:16}),children:p.jsxs("div",{className:"space-y-1",children:[h.length>0&&p.jsxs(p.Fragment,{children:[h.map(ne=>p.jsx(Q2e,{layer:ne},ne.id)),p.jsx("div",{className:"border-t border-gray-100 my-2"})]}),p.jsxs("button",{onClick:()=>V(!0),className:"flex items-center gap-2 px-2 py-1.5 text-cyan-600 hover:bg-cyan-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(Tc,{size:14}),p.jsx("span",{children:"Nieuwe laag importeren"})]}),p.jsx("p",{className:"text-gray-400 mt-1",style:{fontSize:"0.7em"},children:"GeoJSON, KML (Google My Maps), GPX"})]})}),p.jsx(Xh,{title:"Presets",icon:p.jsx(_c,{size:16}),children:p.jsxs("div",{className:"space-y-2",children:[o.map(ne=>p.jsx("div",{className:"flex items-center justify-between py-1",children:C===ne.id?p.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[p.jsx("input",{type:"text",value:O,onChange:ie=>L(ie.target.value),onKeyDown:ie=>{ie.key==="Enter"&&Se(ne.id),ie.key==="Escape"&&Z()},className:"flex-1 px-2 py-0.5 bg-blue-50 rounded border border-blue-300 outline-none",style:{fontSize:"0.9em"},autoFocus:!0}),p.jsx("button",{onClick:()=>Se(ne.id),className:"px-2 py-0.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:"OK"}),p.jsx("button",{onClick:Z,className:"px-2 py-0.5 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:""})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:[ne.name,ne.isBuiltIn&&p.jsx("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:"(standaard)"})]}),p.jsxs("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:["(",ne.layers.length," lagen)"]})]}),!ne.isBuiltIn&&p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:()=>ge(ne.id,ne.name),className:"p-1 text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam wijzigen",children:p.jsx(Wd,{size:14})}),p.jsx("button",{onClick:()=>l(ne.id),className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:p.jsx(Ah,{size:14})})]})]})},ne.id)),I?p.jsxs("div",{className:"flex gap-2 mt-2",children:[p.jsx("input",{type:"text",value:T,onChange:ne=>A(ne.target.value),placeholder:"Naam nieuwe preset",className:"flex-1 px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},onKeyDown:ne=>ne.key==="Enter"&&fe(),autoFocus:!0}),p.jsx("button",{onClick:fe,className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Opslaan"}),p.jsx("button",{onClick:()=>P(!1),className:"px-2 py-1 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Annuleren"})]}):p.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(Tc,{size:14}),p.jsx("span",{children:"Huidige lagen als preset opslaan"})]})]})})]}),Ie==="vondsten"&&p.jsx(p.Fragment,{children:p.jsxs(Xh,{title:"Vondsten",icon:p.jsx(jo,{size:16}),isOwn:!0,children:[p.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Vondsten worden altijd lokaal op dit apparaat opgeslagen."}),p.jsxs("button",{onClick:r,className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(V2e,{size:14}),p.jsxs("span",{children:["Dashboard (",u.length," vondsten)"]})]}),p.jsx(fkt,{})]})})]}),p.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",style:{fontSize:`${Oe}px`},children:[p.jsxs("a",{href:ukt,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[p.jsx(F2e,{size:16}),p.jsx("span",{children:"Meld een bug"})]}),p.jsxs("button",{onClick:qTt,className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[p.jsx(xq,{size:16}),p.jsx("span",{children:"Uitloggen"})]}),p.jsx("p",{className:"text-gray-400 text-center",style:{fontSize:"0.75em"},children:"Instellingen worden lokaal opgeslagen"})]})]})]})}),p.jsx(KTt,{isOpen:n,onClose:r}),p.jsx(lkt,{isOpen:M,onClose:()=>V(!1)})]})}function Xh({title:t,icon:e,children:n,isOwn:r}){return p.jsxs("section",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-1 border-b border-gray-100",children:[p.jsx("span",{className:r?"text-orange-600":"text-blue-600",children:e}),p.jsx("span",{className:`font-medium ${r?"text-orange-600":"text-gray-800"}`,style:{fontSize:"1em"},children:t})]}),p.jsx("div",{className:"space-y-2",children:n})]})}function dkt({label:t,children:e}){return p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:t}),e]})}function ty({label:t,checked:e,onChange:n}){return p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:t}),p.jsx("button",{onClick:()=>n(!e),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${e?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${e?"left-[22px]":"left-0.5"}`})})]})}function fkt(){const[t,e]=Y.useState(!1),{vondsten:n,exportAsGeoJSON:r,exportAsCSV:i,exportAsExcel:s,exportAsGPX:o,exportAsKML:a}=yh(),l=[{label:"Excel (.xlsx)",action:s,desc:"Spreadsheet"},{label:"CSV",action:i,desc:"Comma-separated"},{label:"GeoJSON",action:r,desc:"GIS software"},{label:"GPX",action:o,desc:"GPS apparaten"},{label:"KML",action:a,desc:"Google Earth"}],c=u=>{u(),e(!1)};return n.length===0?p.jsxs("div",{className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-gray-400 bg-gray-100 rounded w-full cursor-not-allowed",style:{fontSize:"0.9em"},children:[p.jsx(MA,{size:14}),p.jsx("span",{children:"Geen vondsten om te exporteren"})]}):p.jsxs("div",{className:"relative mt-2",children:[p.jsxs("button",{onClick:()=>e(!t),className:"flex items-center justify-between gap-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(MA,{size:14}),p.jsxs("span",{children:["Exporteer vondsten (",n.length,")"]})]}),p.jsx("span",{style:{fontSize:"0.8em"},children:""})]}),t&&p.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 overflow-hidden",children:l.map((u,h)=>p.jsxs("button",{onClick:()=>c(u.action),className:"w-full px-3 py-2 text-left hover:bg-blue-50 transition-colors border-0 outline-none flex justify-between items-center",style:{fontSize:"0.9em"},children:[p.jsx("span",{className:"text-gray-700",children:u.label}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:u.desc})]},h))})]})}const N5="2.32.54";function pkt({size:t=18}){return p.jsxs("svg",{viewBox:"0 0 24 24",width:t,height:t,children:[p.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}function mkt(){const[t,e]=Y.useState(!1),{user:n,loading:r,signInWithGoogle:i,logout:s}=DO(),{toggleInfoPanel:o,toggleSettingsPanel:a,toggleMonumentSearch:l}=gr(),c=an(ge=>ge.menuFontScale),u=an(ge=>ge.setMenuFontScale),h=an(ge=>ge.showFontSliders),f=an(ge=>ge.setShowFontSliders),g=an(ge=>ge.showVondstButton),y=an(ge=>ge.setShowVondstButton),_=an(ge=>ge.showRouteRecordButton),b=an(ge=>ge.setShowRouteRecordButton),T=an(ge=>ge.showCustomPointLayers),A=an(ge=>ge.setShowCustomPointLayers),I=an(ge=>ge.showWeatherButton),P=an(ge=>ge.setShowWeatherButton),M=an(ge=>ge.showMeasureTool),V=an(ge=>ge.setShowMeasureTool),C=an(ge=>ge.showDrawTool),N=an(ge=>ge.setShowDrawTool),O=an(ge=>ge.showPrintTool),L=an(ge=>ge.setShowPrintTool),F={top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))"},G=()=>e(!1),U=()=>{G(),o()},he=()=>{G(),a()},Ie=()=>{G(),l()},ze=()=>{G(),i()},Oe=()=>{G(),s()},fe=13*c/100;return p.jsxs(p.Fragment,{children:[p.jsx(yt.button,{className:`fixed right-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${t?"bg-blue-500 hover:bg-blue-600":"bg-white/90 hover:bg-white"}`,style:F,onClick:()=>e(!t),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Menu",children:t?p.jsx(Qr,{size:22,className:"text-white"}):p.jsx(r5,{size:22,className:"text-gray-600 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})}),p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[799]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:G}),p.jsxs(yt.div,{initial:{opacity:0,x:50,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:50,scale:.95},transition:{duration:.15},className:"fixed right-[56px] z-[801] w-64 bg-white rounded-xl shadow-lg overflow-hidden flex flex-col max-h-[80vh]",style:{top:"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)))",fontSize:`${fe}px`},children:[p.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-blue-500",children:[p.jsx("span",{className:"font-medium text-white",style:{fontSize:`${fe}px`},children:"Menu"}),h&&p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-[9px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:c,onInput:ge=>u(parseInt(ge.target.value)),onChange:ge=>u(parseInt(ge.target.value)),className:"w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${c}%`}),p.jsx("span",{className:"text-[11px] text-blue-200",children:"T"})]})]}),r?p.jsx("div",{className:"px-3 py-4 flex items-center justify-center",children:p.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})}):n?p.jsx("div",{className:"px-3 py-3 border-b border-gray-100",children:p.jsxs("div",{className:"flex items-center gap-3",children:[n.photoURL?p.jsx("img",{src:n.photoURL,alt:n.displayName||"User",className:"w-8 h-8 rounded-full",referrerPolicy:"no-referrer"}):p.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center",children:p.jsx(Eq,{size:16,className:"text-white"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"font-medium text-gray-800 truncate",style:{fontSize:"0.85em"},children:n.displayName||"Gebruiker"}),p.jsx("div",{className:"text-green-600",style:{fontSize:"0.7em"},children:"Cloud sync actief"})]}),p.jsx("button",{onClick:Oe,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none bg-transparent",title:"Uitloggen",children:p.jsx(xq,{size:16})})]})}):p.jsxs("button",{onClick:ze,className:"w-full px-3 py-3 flex items-center gap-3 hover:bg-blue-50 transition-colors border-0 outline-none bg-transparent",children:[p.jsx(pkt,{size:18}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Inloggen met Google"})]}),p.jsxs("div",{className:"py-1",children:[p.jsxs("button",{onClick:U,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-blue-50",style:{fontSize:"0.95em"},children:[p.jsx(_q,{size:18,className:"text-blue-500"}),p.jsx("span",{children:"Info & handleiding"})]}),p.jsxs("button",{onClick:Ie,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-purple-50",style:{fontSize:"0.95em"},children:[p.jsx(W2e,{size:18,className:"text-purple-500"}),p.jsx("span",{children:"Zoek in monumenten"})]})]}),p.jsxs("div",{className:"py-1 border-t border-gray-100",children:[p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(jo,{size:18,className:"text-orange-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Vondst knop"})]}),p.jsx("button",{onClick:()=>y(!g),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${g?"bg-gradient-to-r from-orange-500 to-orange-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${g?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(i5,{size:18,className:"text-green-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Route knop"})]}),p.jsx("button",{onClick:()=>b(!_),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${_?"bg-gradient-to-r from-green-500 to-green-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${_?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Th,{size:18,className:"text-cyan-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Weerwidget"})]}),p.jsx("button",{onClick:()=>P(!I),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${I?"bg-gradient-to-r from-cyan-500 to-cyan-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${I?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(_c,{size:18,className:"text-amber-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Mijn lagen"})]}),p.jsx("button",{onClick:()=>A(!T),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${T?"bg-gradient-to-r from-amber-500 to-amber-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${T?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Ld,{size:18,className:"text-blue-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Meten"})]}),p.jsx("button",{onClick:()=>V(!M),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${M?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${M?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Wd,{size:18,className:"text-orange-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Tekenen"})]}),p.jsx("button",{onClick:()=>N(!C),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${C?"bg-gradient-to-r from-orange-500 to-orange-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${C?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(OA,{size:18,className:"text-indigo-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Exporteren"})]}),p.jsx("button",{onClick:()=>L(!O),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${O?"bg-gradient-to-r from-indigo-500 to-indigo-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${O?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(bq,{size:18,className:"text-purple-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Tekstgrootte"})]}),p.jsx("button",{onClick:()=>f(!h),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${h?"bg-gradient-to-r from-purple-500 to-purple-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${h?"left-[22px]":"left-0.5"}`})})]})]}),p.jsx("div",{className:"mt-auto border-t border-gray-100",children:p.jsxs("button",{onClick:he,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-gray-50",style:{fontSize:"0.95em"},children:[p.jsx(s5,{size:18,className:"text-gray-500"}),p.jsx("span",{children:"Instellingen"})]})}),p.jsxs("div",{className:"px-3 py-1.5 bg-gray-50 text-center text-gray-400",style:{fontSize:"0.65em"},children:["DetectorApp NL v",N5]})]})]})})]})}const gkt="https://forms.gle/R5LCk11Bzu5XrkBj8";function ykt(){const{infoPanelOpen:t,toggleInfoPanel:e}=gr(),[n,r]=Y.useState("info"),i=[{id:"info",label:"Info",icon:p.jsx(_q,{size:14})},{id:"functies",label:"Functies",icon:p.jsx(yq,{size:14})},{id:"handleiding",label:"Handleiding",icon:p.jsx($2e,{size:14})}];return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-500",children:[p.jsxs("span",{className:"font-medium text-white",children:["DetectorApp NL v",N5]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-blue-400/50 hover:bg-blue-400 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:18,className:"text-white",strokeWidth:2.5})})]}),p.jsx("div",{className:"flex border-b border-gray-200",children:i.map(s=>p.jsxs("button",{onClick:()=>r(s.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${n===s.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[s.icon,s.label]},s.id))}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 text-sm",children:[n==="info"&&p.jsx(vkt,{}),n==="functies"&&p.jsx(_kt,{}),n==="handleiding"&&p.jsx(xkt,{}),p.jsxs("section",{className:"pt-2 border-t border-gray-200 space-y-2",children:[p.jsxs("a",{href:gkt,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",children:[p.jsx(F2e,{size:14}),p.jsx("span",{className:"text-sm",children:"Meld een bug of geef feedback"})]}),p.jsxs("p",{className:"text-xs text-gray-400 text-center",children:["DetectorApp NL v",N5," - Gratis en zonder tracking"]})]})]})]})]})})}function vkt(){return p.jsxs(p.Fragment,{children:[p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Over deze app"}),p.jsx("p",{className:"text-gray-600",children:"DetectorApp NL is d gratis kaartapplicatie voor metaaldetectie, fossielen zoeken en archeologische verkenning in Nederland. Met 70+ kaartlagen, GPS tracking met richtingspijl, eigen lagen, cloud sync en uitgebreid vondstenbeheer."})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Databronnen & Licenties"}),p.jsxs("ul",{className:"space-y-2 text-gray-600",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"RCE / Cultureelerfgoed.nl"})," (CC0/CC-BY)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"AMK Monumenten, Rijksmonumenten, Werelderfgoed, Paleokaarten, Religieus Erfgoed, Essen, Archeo Onderzoeken"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"PDOK / Kadaster"})," (CC0/CC-BY)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Luchtfoto, AHN Hoogtekaarten, IKAW, Bodemkaart, Geomorfologie, Kadastrale Grenzen, Gewaspercelen"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"OpenStreetMap"})," (ODbL)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Hunebedden, Grafheuvels, Bunkers, Kastelen, Terpen, Parken, Kringloopwinkels, Musea, Speeltuinen, Strandjes"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Itiner-E / Wetenschappelijk"})," (CC BY 4.0)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Romeinse wegen - Brughmans, Paout, de Soto & Bjerregaard Vahlstrup"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Mindat.org"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Mineralen hotspots en vindplaatsen"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Paleontica / Fossielen data"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Fossiel hotspots en vindplaatsen"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Map5.nl / Kadaster"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Historische kaarten (TMK 1850, Bonnebladen 1900)"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Provinciale data"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Relictenkaart (Gelderland), Scheepswrakken (Zuid-Holland), Verdronken Dorpen (Zeeland)"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"UIKAV / Rijkswaterstaat"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Uiterwaarden archeologische data, Expert advies, Bufferlagen"})]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Privacy & Opslag"}),p.jsxs("div",{className:"text-gray-600 space-y-2",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Volledig anoniem mogelijk:"})," Je kunt deze app gebruiken zonder enige registratie of login. Al je data blijft dan 100% op je eigen apparaat."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Geen tracking:"})," Deze app verzamelt geen analytics, cookies, gebruiksstatistieken of persoonlijke gegevens. Er is geen server die je gedrag registreert."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Locatiegegevens:"})," Je GPS-positie wordt alleen gebruikt om je locatie op de kaart te tonen. Deze wordt niet opgeslagen of gedeeld met derden."]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Google Login - Wat betekent het?"}),p.jsxs("div",{className:"text-gray-600 space-y-2",children:[p.jsx("p",{className:"font-medium text-green-700",children:" Google login is volledig optioneel"}),p.jsx("p",{children:p.jsx("strong",{children:"Wat wordt gesynchroniseerd:"})}),p.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[p.jsx("li",{children:"Je eigen aangemaakte lagen (Mijn Lagen)"}),p.jsx("li",{children:"Je vondsten registraties"}),p.jsx("li",{children:"Je preset-instellingen"})]}),p.jsx("p",{children:p.jsx("strong",{children:"Wat NIET wordt gedeeld:"})}),p.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[p.jsx("li",{children:"Je GPS-locatie wordt niet opgeslagen in de cloud"}),p.jsx("li",{children:"Je zoekgeschiedenis wordt niet bewaard"}),p.jsx("li",{children:"Welke kaartlagen je bekijkt wordt niet geregistreerd"}),p.jsx("li",{children:"Niemand anders kan je data zien - alleen jij"})]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Waarom inloggen?"})," Alleen voor synchronisatie tussen apparaten (telefoon/tablet/PC) en als backup voor je vondsten."]}),p.jsx("p",{className:"text-xs text-gray-500 italic",children:"Tip: Gebruik de app gerust zonder login als je privacy belangrijker vindt dan synchronisatie. Alle functies werken ook offline."})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Zonder login (anoniem)"}),p.jsxs("div",{className:"text-gray-600 space-y-2",children:[p.jsx("p",{className:"font-medium text-blue-700",children:" 95% van de functies werkt zonder login"}),p.jsx("p",{children:p.jsx("strong",{children:"Beschikbaar zonder login:"})}),p.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[p.jsx("li",{children:"Alle 70+ kaartlagen bekijken"}),p.jsx("li",{children:"GPS tracking en navigatie"}),p.jsx("li",{children:"Vondsten registreren (lokaal opgeslagen)"}),p.jsx("li",{children:"Eigen lagen aanmaken (lokaal opgeslagen)"}),p.jsx("li",{children:"Export naar Excel/CSV/GeoJSON/GPX/KML"}),p.jsx("li",{children:"Lagen importeren"}),p.jsx("li",{children:"Alle presets en instellingen"})]}),p.jsx("p",{children:p.jsx("strong",{children:"Alleen met login:"})}),p.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[p.jsx("li",{children:"Synchronisatie tussen apparaten"}),p.jsx("li",{children:"Cloud backup van je vondsten"})]})]})]})]})}function _kt(){return p.jsxs(p.Fragment,{children:[p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(kw,{size:16,className:"text-blue-600"}),"Kaartlagen (70+)"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Basis:"})," CartoDB, OpenStreetMap, PDOK Luchtfoto"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Historisch:"})," TMK 1850, Bonnebladen 1900"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Hoogtekaarten:"})," AHN4 Hillshade, Multi-Hillshade, Hoogtekaart Kleur, AHN 0.5m"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Archeologie:"})," AMK Monumenten (per periode), Archeo Onderzoeken, IKAW, Essen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Romeins:"})," Romeinse wegen, Romeinse Forten met historische info, Limesweg"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Prehistorie:"})," Hunebedden, Grafheuvels, Terpen, Paleokaarten (7 periodes)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Militair:"})," WWII Bunkers, Slagvelden, Vliegvelden, Verdedigingslinies"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Erfgoed:"})," Rijksmonumenten, Kastelen, Runes, Religieus Erfgoed"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Terrein:"})," Veengebieden, Geomorfologie, Bodemkaart"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Percelen:"})," Gewaspercelen (met bouwplantoelichting), Kadastrale Grenzen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Recreatie:"})," Parken, Musea, Kringloopwinkels, Strandjes, Wandelroutes"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Provinciaal:"})," Relictenkaart, Scheepswrakken, Verdronken Dorpen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"UIKAV:"})," Uiterwaard data, Expert advies, Vlakken, Punten, Bufferlagen"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(wut,{size:16,className:"text-purple-600"}),"Mineralen & Fossielen"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Mineralen hotspots:"})," Vindplaatsen uit Mindat.org met mineralenlijst"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Goudrivieren:"})," Bekende locaties voor goud zoeken"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Fossiel hotspots:"})," Vindplaatsen met fossieltypen en periodes"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Premium lagen:"})," Gedetailleerde data (beschikbaar met account)"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(put,{size:16,className:"text-orange-600"}),"Mijn Lagen"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Eigen lagen:"})," Maak lagen voor vakantie, projecten, etc."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Toevoegen:"})," Tik op + in popup om monument/locatie aan laag toe te voegen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Polygonen:"})," Hele monumentgebieden worden opgeslagen, niet alleen een punt"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Originele info:"})," Popup content blijft behouden"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Kleuren:"})," Elke laag krijgt eigen kleur (aanpasbaar)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Import:"})," Laad GeoJSON, KML of GPX bestanden"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Export:"})," Exporteer lagen als GeoJSON"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Th,{size:16,className:"text-green-600"}),"Google Cloud Sync"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Inloggen:"})," Via hamburger menu rechtsboven"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Synchronisatie:"})," Lagen en vondsten automatisch naar cloud"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Meerdere apparaten:"})," Altijd toegang tot je data"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Veilig:"})," Alleen jij hebt toegang tot je gegevens"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(rh,{size:16,className:"text-green-600"}),"GPS & Navigatie"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsx("li",{children:"Live GPS tracking met nauwkeurigheidscirkel"}),p.jsx("li",{children:"Richtingspijl draait mee met je telefoon"}),p.jsx("li",{children:"Kaart handmatig draaien + kompasknop naar noorden"}),p.jsx("li",{children:"Schaalbalk onderaan (aan/uit in Instellingen)"}),p.jsx("li",{children:"Open locatie in Google Maps vanuit popup"}),p.jsx("li",{children:"Zoekbalk voor adressen en plaatsen"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(jo,{size:16,className:"text-orange-600"}),"Vondsten"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsx("li",{children:"Toevoegen via GPS locatie, long-press of handmatig"}),p.jsx("li",{children:"Velden: type, materiaal, periode, diepte, conditie, gewicht"}),p.jsx("li",{children:"Foto's toevoegen (link of upload)"}),p.jsx("li",{children:"Export: Excel, CSV, GeoJSON, GPX, KML"}),p.jsx("li",{children:"Dashboard met statistieken"}),p.jsx("li",{children:"Cloud sync met Google account"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(_c,{size:16,className:"text-purple-600"}),"Presets"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Standaard:"})," Detectie, Steentijd, Romeins, Middeleeuwen, WOII, Analyse, Fossielen, Mineralen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Aanpasbaar:"})," Overschrijf preset met huidige lagen (diskette-icoon)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Eigen presets:"})," Maak nieuwe via Instellingen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Tekstgrootte:"})," Aanpasbaar per panel via slider"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Uut,{size:16,className:"text-cyan-600"}),"Perceelinformatie"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsx("li",{children:"Kadastrale aanduiding (gemeente, sectie, nummer)"}),p.jsx("li",{children:"Oppervlakte in m en hectare"}),p.jsx("li",{children:"Gewas en bouwplan met uitleg"}),p.jsx("li",{children:"Bodemtype met beschrijving"}),p.jsx("li",{children:"AHN hoogte in meters NAP"}),p.jsx("li",{children:"Hoogtekaart per perceel (bergje-icoon)"}),p.jsx("li",{children:"Link naar eigenaar opzoeken (Kadaster)"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(wht,{size:16,className:"text-red-600"}),"Monumenten & Erfgoed"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"AMK:"})," Archeologische Monumenten per periode"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Romeinse Forten:"})," Uitgebreide historische info per fort"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Rijksmonumenten:"})," Met bescherming en historie"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Verdedigingswerken:"})," Linies, forten, schansen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Popup info:"})," Directe uitleg over archeologische waarde"]})]})]})]})}function xkt(){return p.jsxs(p.Fragment,{children:[p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Eerste stappen"}),p.jsxs("ol",{className:"text-gray-600 space-y-2 text-xs list-decimal list-inside",children:[p.jsxs("li",{children:["Tik op de ",p.jsx("strong",{children:"GPS knop"})," (rechtsonder, oranje) om je locatie te zien"]}),p.jsxs("li",{children:["Kies een ",p.jsx("strong",{children:"preset"})," (linksonder, laagjes-icoon) voor een snelle start"]}),p.jsxs("li",{children:["Of open ",p.jsx("strong",{children:"Kaartlagen"})," om individuele lagen aan te zetten"]}),p.jsx("li",{children:"Tik op objecten op de kaart voor gedetailleerde informatie"})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Hamburger Menu"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsx("p",{children:"Rechtsboven vind je het menu met:"}),p.jsxs("ul",{className:"list-disc list-inside ml-2 space-y-1",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Google Login:"})," Synchroniseer je data naar de cloud"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Vondst toevoegen:"})," Registreer een nieuwe vondst"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Info & Handleiding:"})," Dit scherm"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Instellingen:"})," Presets, export, weergave"]})]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"GPS & Navigatie"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"GPS knop (oranje):"})," Aan/uit toggle voor locatie tracking."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Richtingspijl:"})," Blauwe pijl toont de richting van je telefoon."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Kaart draaien:"})," Met twee vingers of via kompas."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Kompasknop:"})," Verschijnt rechtsboven als kaart gedraaid is. Tik om naar noorden te draaien."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Google Maps:"})," Vanuit elke popup kun je direct navigeren."]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Locaties opslaan in Mijn Lagen"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 1:"})," Tik op een object op de kaart (monument, bunker, etc.)"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 2:"})," Tik op de ",p.jsx("strong",{children:"oranje +"})," knop in de popup header"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 3:"})," Kies een bestaande laag of maak een nieuwe aan"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Resultaat:"})," De locatie inclusief vorm (polygoon) en info wordt opgeslagen!"]}),p.jsx("p",{className:"text-gray-500 italic",children:"Tip: Maak lagen voor vakantiebestemmingen, projecten of interessante locaties."})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Vondst registreren"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Via GPS:"})," Open menu  Vondst toevoegen. Je locatie wordt automatisch ingevuld."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Via long-press:"}),' Houd je vinger op de kaart  kies "Vondst toevoegen".']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Handmatig:"}),' In het formulier  "Kies op kaart" voor exacte locatie.']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Foto's:"})," Voeg foto-links toe of upload direct."]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Presets gebruiken"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Toepassen:"})," Linksonder  preset kiezen."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Aanpassen:"})," Zet gewenste lagen aan  tik diskette-icoon naast preset."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Nieuw maken:"}),' Instellingen  Presets  "Huidige lagen opslaan".']})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Cloud Sync instellen"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 1:"})," Open hamburger menu rechtsboven"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 2:"}),' Tik op "Inloggen met Google"']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 3:"})," Kies je Google account"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Klaar!"})," Je lagen en vondsten worden automatisch gesynchroniseerd."]}),p.jsx("p",{className:"text-gray-500 italic",children:"Je data is veilig en alleen voor jou toegankelijk."})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Lagen importeren"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 1:"})," Ga naar Instellingen (hamburger menu)"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 2:"}),' Scroll naar "Lagen importeren"']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 3:"})," Kies een GeoJSON, KML of GPX bestand"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Resultaat:"})," Nieuwe laag met je geimporteerde data!"]}),p.jsx("p",{className:"text-gray-500 italic",children:"Handig voor routes, waypoints of eigen datasets."})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor detectie"}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[p.jsxs("li",{children:["Gebruik ",p.jsx("strong",{children:"AHN Hillshade"})," om relif te zien (grafheuvels, wallen)"]}),p.jsxs("li",{children:["Combineer ",p.jsx("strong",{children:"AMK"})," met ",p.jsx("strong",{children:"Gewaspercelen"})," voor slimme zoeklocaties"]}),p.jsxs("li",{children:["Check ",p.jsx("strong",{children:"IKAW"})," voor archeologische verwachting"]}),p.jsxs("li",{children:["Gebruik ",p.jsx("strong",{children:"historische kaarten"})," (TMK 1850) om oude structuren te vinden"]}),p.jsxs("li",{children:["Bekijk ",p.jsx("strong",{children:"Archeo Onderzoeken"})," voor eerdere vondsten in het gebied"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Bodemkaart"})," toont of grond geschikt is (popup legt uit)"]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor fossielen"}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[p.jsxs("li",{children:["Zet ",p.jsx("strong",{children:"Fossiel hotspots"})," aan voor bekende vindplaatsen"]}),p.jsxs("li",{children:["Bekijk ",p.jsx("strong",{children:"Paleokaarten"})," voor historische kustlijnen"]}),p.jsxs("li",{children:["Check ",p.jsx("strong",{children:"Geomorfologie"})," voor oude zeebodems en rivieren"]}),p.jsx("li",{children:"Popup toont welke fossielen op elke locatie gevonden zijn"})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor mineralen"}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[p.jsxs("li",{children:["Zet ",p.jsx("strong",{children:"Mineralen hotspots"})," aan voor vindplaatsen"]}),p.jsxs("li",{children:["Bekijk ",p.jsx("strong",{children:"Goudrivieren"})," voor goudzoekmogelijkheden"]}),p.jsx("li",{children:"Popup toont welke mineralen op elke locatie voorkomen"}),p.jsx("li",{children:"Links naar Mindat.org voor gedetailleerde info"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Og,{size:16,className:"text-blue-600"}),"Handige links"]}),p.jsxs("ul",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("li",{children:[p.jsx("a",{href:"https://legendageomorfologie.wur.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Geomorfologie legenda (WUR)"}),p.jsx("br",{}),p.jsx("span",{className:"text-gray-500",children:"Uitgebreide uitleg over landvormen"})]}),p.jsxs("li",{children:[p.jsx("a",{href:"https://legenda-bodemkaart.bodemdata.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Bodemkaart legenda (BRO)"}),p.jsx("br",{}),p.jsx("span",{className:"text-gray-500",children:"Volledige bodemclassificatie"})]}),p.jsxs("li",{children:[p.jsx("a",{href:"https://www.mindat.org/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Mindat.org - Mineralen database"}),p.jsx("br",{}),p.jsx("span",{className:"text-gray-500",children:"Wereldwijde mineralen informatie"})]}),p.jsxs("li",{children:[p.jsx("a",{href:"https://www.cultureelerfgoed.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Rijksdienst voor Cultureel Erfgoed"}),p.jsx("br",{}),p.jsx("span",{className:"text-gray-500",children:"Officile monumenten informatie"})]})]})]})]})}function $Se(t,e,n,r){const s=(r-e)*Math.PI/180,o=(n-t)*Math.PI/180,a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function RF(t){let e=0;for(let n=1;n<t.length;n++)e+=$Se(t[n-1].coordinates[0],t[n-1].coordinates[1],t[n].coordinates[0],t[n].coordinates[1]);return e}const Ba=vo()(kh((t,e)=>({state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0,savedRoutes:[],visibleRouteIds:new Set,heatmapEnabled:!1,gridEnabled:!1,gridCenter:null,gridSize:20,gridCount:10,gridColor:"rgba(139, 92, 246, 0.6)",autoPauseEnabled:!1,autoPauseSeconds:120,startRecording:()=>{t({state:"recording",currentPoints:[],startTime:Date.now(),pauseStartTime:null,totalPausedTime:0})},pauseRecording:()=>{const{state:n}=e();n==="recording"&&t({state:"paused",pauseStartTime:Date.now()})},resumeRecording:()=>{const{state:n,pauseStartTime:r,totalPausedTime:i}=e();if(n!=="paused"||!r)return;const s=Date.now()-r;t({state:"recording",pauseStartTime:null,totalPausedTime:i+s})},stopRecording:n=>{const{state:r,currentPoints:i,startTime:s,totalPausedTime:o,pauseStartTime:a}=e();if(r==="idle"||!s||i.length<2)return t({state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0}),null;const l=Date.now();let c=o;a&&(c+=l-a);const u=l-s-c,h=RF(i),f={id:crypto.randomUUID(),name:n||`Route ${new Date().toLocaleDateString("nl-NL")} ${new Date().toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})}`,points:i,startTime:s,endTime:l,totalDistance:h,totalDuration:u,pausedDuration:c,createdAt:new Date().toISOString()};return t(g=>{const y=new Set(g.visibleRouteIds);return y.add(f.id),{state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0,savedRoutes:[f,...g.savedRoutes],visibleRouteIds:y}}),f},cancelRecording:()=>{t({state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0})},addPoint:(n,r,i)=>{const{state:s,currentPoints:o}=e();if(s!=="recording")return;if(o.length>0){const l=o[o.length-1];if($Se(l.coordinates[0],l.coordinates[1],n,r)<2)return}const a={coordinates:[n,r],timestamp:Date.now(),accuracy:i};t({currentPoints:[...o,a]})},deleteRoute:n=>{t(r=>({savedRoutes:r.savedRoutes.filter(i=>i.id!==n)}))},renameRoute:(n,r)=>{t(i=>({savedRoutes:i.savedRoutes.map(s=>s.id===n?{...s,name:r}:s)}))},clearAllRoutes:()=>{t({savedRoutes:[],visibleRouteIds:new Set})},toggleRouteVisibility:n=>{t(r=>{const i=new Set(r.visibleRouteIds);return i.has(n)?i.delete(n):i.add(n),{visibleRouteIds:i}})},showRoute:n=>{t(r=>{const i=new Set(r.visibleRouteIds);return i.add(n),{visibleRouteIds:i}})},hideRoute:n=>{t(r=>{const i=new Set(r.visibleRouteIds);return i.delete(n),{visibleRouteIds:i}})},showAllRoutes:()=>{t(n=>({visibleRouteIds:new Set(n.savedRoutes.map(r=>r.id))}))},hideAllRoutes:()=>{t({visibleRouteIds:new Set})},toggleHeatmap:()=>{t(n=>({heatmapEnabled:!n.heatmapEnabled}))},setHeatmapEnabled:n=>{t({heatmapEnabled:n})},toggleGrid:()=>{t(n=>({gridEnabled:!n.gridEnabled}))},setGridEnabled:n=>{t({gridEnabled:n})},setGridCenter:n=>{t({gridCenter:n})},setGridSize:n=>{t({gridSize:n})},setGridCount:n=>{t({gridCount:n})},setGridColor:n=>{t({gridColor:n})},centerGridOnCurrentLocation:()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(n=>{t({gridCenter:[n.coords.longitude,n.coords.latitude],gridEnabled:!0})},n=>{console.error("Could not get location:",n)})},setAutoPauseEnabled:n=>{t({autoPauseEnabled:n})},setAutoPauseSeconds:n=>{t({autoPauseSeconds:n})},importRouteFromGPX:(n,r)=>{try{const s=new DOMParser().parseFromString(n,"application/xml");if(s.querySelector("parsererror"))return{success:!1,error:"Ongeldig XML formaat"};const a=s.querySelectorAll("trkpt");if(a.length<2&&s.querySelectorAll("wpt").length<2)return{success:!1,error:"Geen route punten gevonden in GPX bestand"};const l=[];if((a.length>0?a:s.querySelectorAll("wpt")).forEach(b=>{const T=parseFloat(b.getAttribute("lat")||"0"),A=parseFloat(b.getAttribute("lon")||"0"),I=b.querySelector("time"),P=I?new Date(I.textContent||"").getTime():Date.now();!isNaN(T)&&!isNaN(A)&&l.push({coordinates:[A,T],timestamp:isNaN(P)?Date.now():P})}),l.length<2)return{success:!1,error:"Niet genoeg geldige punten in GPX bestand"};const u=s.querySelector("trk > name")?.textContent||s.querySelector("metadata > name")?.textContent||r||`Import ${new Date().toLocaleDateString("nl-NL")}`,h=RF(l),f=l[0].timestamp,g=l[l.length-1].timestamp,y=g-f,_={id:crypto.randomUUID(),name:u,points:l,startTime:f,endTime:g,totalDistance:h,totalDuration:y>0?y:0,pausedDuration:0,createdAt:new Date().toISOString()};return t(b=>{const T=new Set(b.visibleRouteIds);return T.add(_.id),{savedRoutes:[_,...b.savedRoutes],visibleRouteIds:T}}),{success:!0,routeId:_.id}}catch(i){return console.error("GPX import error:",i),{success:!1,error:"Fout bij importeren van GPX bestand"}}},updateRouteNotes:(n,r)=>{t(i=>({savedRoutes:i.savedRoutes.map(s=>s.id===n?{...s,notes:r}:s)}))},addPhotoToRoute:(n,r)=>{const i={...r,id:crypto.randomUUID(),timestamp:new Date().toISOString()};t(s=>({savedRoutes:s.savedRoutes.map(o=>o.id===n?{...o,photos:[...o.photos||[],i]}:o)}))},removePhotoFromRoute:(n,r)=>{t(i=>({savedRoutes:i.savedRoutes.map(s=>s.id===n?{...s,photos:(s.photos||[]).filter(o=>o.id!==r)}:s)}))},getCurrentDistance:()=>{const{currentPoints:n}=e();return RF(n)},getCurrentDuration:()=>{const{state:n,startTime:r,totalPausedTime:i,pauseStartTime:s}=e();if(!r)return 0;const o=Date.now();let a=i;return n==="paused"&&s&&(a+=o-s),o-r-a},getAverageSpeed:()=>{const n=e().getCurrentDistance(),r=e().getCurrentDuration();return r===0?0:n/1e3/(r/36e5)}}),{name:"detectorapp-route-recording",version:2,partialize:t=>({savedRoutes:t.savedRoutes,visibleRouteIds:Array.from(t.visibleRouteIds),heatmapEnabled:t.heatmapEnabled,gridEnabled:t.gridEnabled,gridCenter:t.gridCenter,gridSize:t.gridSize,gridCount:t.gridCount,gridColor:t.gridColor,autoPauseEnabled:t.autoPauseEnabled,autoPauseSeconds:t.autoPauseSeconds}),merge:(t,e)=>({...e,...t,visibleRouteIds:new Set(t?.visibleRouteIds||[])})}));function FSe(t){const e=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL"
  xmlns="http://www.topografix.com/GPX/1/1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">
  <metadata>
    <name>${t.name}</name>
    <time>${new Date(t.startTime).toISOString()}</time>
  </metadata>
  <trk>
    <name>${t.name}</name>
    <trkseg>
${t.points.map(s=>`      <trkpt lat="${s.coordinates[1]}" lon="${s.coordinates[0]}">
        <time>${new Date(s.timestamp).toISOString()}</time>
      </trkpt>`).join(`
`)}
    </trkseg>
  </trk>
</gpx>`,n=new Blob([e],{type:"application/gpx+xml"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${t.name.replace(/[^a-zA-Z0-9]/g,"-")}.gpx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}let wg=null,vk=null;function VSe(){if(typeof window>"u"||!("speechSynthesis"in window))return!1;wg=window.speechSynthesis;const t=()=>{const e=wg?.getVoices()||[];vk=e.find(n=>n.lang.startsWith("nl")||n.name.toLowerCase().includes("dutch")||n.name.toLowerCase().includes("nederland"))||null,!vk&&e.length>0&&(vk=e[0])};return t(),wg&&(wg.onvoiceschanged=t),!0}function wkt(t,e){if(!wg&&!VSe()||!wg)return;wg.cancel();const n=new SpeechSynthesisUtterance(t);vk&&(n.voice=vk),n.lang="nl-NL",n.rate=e?.rate,n.pitch=e?.pitch??1,n.volume=e?.volume??1,wg.speak(n)}function bkt(t){const e=[];e.push(`${t.type} toegevoegd`),t.material&&t.material!=="Onbekend"&&e.push(`Materiaal: ${t.material}`),t.period&&t.period!=="Onbekend"&&e.push(`Periode: ${t.period}`),t.layerName&&t.layerName!=="Vondsten"&&e.push(`Opgeslagen in ${t.layerName}`);const n=e.join(". ");wkt(n,{rate:1.1})}VSe();const Ekt="detectorapp-photos",Skt=1,O5="photos",Tkt=1024,kkt=200,Akt=.8,Ikt=.7;function Pkt(){return new Promise((t,e)=>{const n=indexedDB.open(Ekt,Skt);n.onerror=()=>e(n.error),n.onsuccess=()=>t(n.result),n.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(O5)||i.createObjectStore(O5,{keyPath:"id"}).createIndex("createdAt","createdAt",{unique:!1})}})}async function Bae(t,e,n){return new Promise((r,i)=>{const s=new Image,o=URL.createObjectURL(t);s.onload=()=>{URL.revokeObjectURL(o);let{width:a,height:l}=s;(a>e||l>e)&&(a>l?(l=Math.round(l*e/a),a=e):(a=Math.round(a*e/l),l=e));const c=document.createElement("canvas");c.width=a,c.height=l;const u=c.getContext("2d");if(!u){i(new Error("Could not get canvas context"));return}u.imageSmoothingEnabled=!0,u.imageSmoothingQuality="high",u.drawImage(s,0,0,a,l),c.toBlob(h=>{h?r({blob:h,width:a,height:l}):i(new Error("Could not create blob"))},"image/jpeg",n)},s.onerror=()=>{URL.revokeObjectURL(o),i(new Error("Could not load image"))},s.src=o})}async function Ckt(t,e){const{blob:n,width:r,height:i}=await Bae(e,Tkt,Akt),{blob:s}=await Bae(e,kkt,Ikt),o={id:t,fullImage:n,thumbnail:s,originalName:e.name,mimeType:"image/jpeg",width:r,height:i,size:n.size,createdAt:new Date().toISOString()},a=await Pkt();return new Promise((l,c)=>{const u=a.transaction(O5,"readwrite"),f=u.objectStore(O5).put(o);f.onsuccess=()=>l(o),f.onerror=()=>c(f.error),u.oncomplete=()=>a.close()})}function MF({label:t,value:e,onChange:n,options:r,required:i=!1,placeholder:s="Typ hier..."}){const[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),[u,h]=Y.useState(""),f=e&&!r.includes(e),g=()=>{c(!0),h(f?e:""),a(!1)},y=()=>{u.trim()&&n(u.trim()),c(!1)};return l?p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[t,i&&p.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),p.jsx("input",{type:"text",value:u,onChange:_=>h(_.target.value),onKeyDown:_=>{_.key==="Enter"&&(_.preventDefault(),y()),_.key==="Escape"&&c(!1)},onBlur:y,placeholder:s,autoFocus:!0,className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"}})]}):p.jsxs("div",{className:"relative",children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[t,i&&p.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),p.jsxs("button",{type:"button",onClick:()=>a(!o),className:"w-full flex items-center justify-between px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors text-left",style:{border:"none",outline:"none"},children:[p.jsxs("span",{className:e?"":"text-gray-400",children:[e||"Selecteer...",f&&p.jsx(woe,{size:12,className:"inline ml-1 text-orange-500"})]}),p.jsx(jb,{size:16,className:`text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&p.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[p.jsxs("button",{type:"button",onClick:g,className:"w-full px-3 py-2 text-left text-sm text-orange-600 hover:bg-orange-50 transition-colors flex items-center gap-2",style:{border:"none",outline:"none"},children:[p.jsx(woe,{size:12}),"Eigen invoer..."]}),p.jsx("div",{className:"border-t border-gray-100"}),r.map(_=>p.jsx("button",{type:"button",onClick:()=>{n(_),a(!1)},className:`w-full px-3 py-2 text-left text-sm transition-colors ${_===e?"bg-orange-50 text-orange-600":"text-gray-600 hover:bg-gray-50"}`,style:{border:"none",outline:"none"},children:_},_))]})]})}function zSe({onClose:t,initialLocation:e}){const n=Ps(Ye=>Ye.position),r=li(Ye=>Ye.map),i=gr(Ye=>Ye.vondstFormPhoto),s=ms(Ye=>Ye.layers),o=ms(Ye=>Ye.addPoint);ms(Ye=>Ye.addPhotoToPoint);const a=an(Ye=>Ye.voiceFeedbackEnabled),l=Ba(Ye=>Ye.state),c=Ba(Ye=>Ye.startTime);Ba(Ye=>Ye.savedRoutes);const u=()=>l==="idle"||!c?null:`Route ${new Date(c).toLocaleDateString("nl-NL")} ${new Date(c).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})}`,h=l==="recording"||l==="paused",f=u(),[g,y]=Y.useState(""),[_,b]=Y.useState(""),[T,A]=Y.useState(""),[I,P]=Y.useState(""),[M,V]=Y.useState(!1),[C,N]=Y.useState(void 0),[O,L]=Y.useState(void 0),[F,G]=Y.useState(tu),[U,he]=Y.useState(i),[Ie,ze]=Y.useState(null);Y.useEffect(()=>{if(U){const Ye=URL.createObjectURL(U);return ze(Ye),()=>URL.revokeObjectURL(Ye)}else ze(null)},[U]);const[Oe,fe]=Y.useState(e?"map-pick":n?"gps":"map-center"),[ge,Se]=Y.useState(e||null),[Z,W]=Y.useState(!1),ne=()=>{if(Oe==="gps"&&n)return{lat:n.lat,lng:n.lng};if(Oe==="map-pick"&&ge)return ge;if(r){const Ye=r.getView().getCenter();if(Ye){const[cn,jt]=Fn(Ye);return{lat:jt,lng:cn}}}return null},ie=ne();Y.useEffect(()=>{if(!Z||!r)return;const Ye=cn=>{const[jt,gn]=Fn(cn.coordinate);Se({lat:gn,lng:jt}),fe("map-pick"),W(!1)};return r.on("click",Ye),()=>r.un("click",Ye)},[Z,r]);const le=()=>W(!0),xe=()=>{n&&(fe("gps"),Se(null))},qe=()=>{const Ye=document.createElement("input");Ye.type="file",Ye.accept="image/*",Ye.capture="environment",Ye.onchange=cn=>{const jt=cn.target.files?.[0];jt&&he(jt)},Ye.click()},Ke=()=>he(null),ke=async Ye=>{Ye.preventDefault();const cn=ne();if(!cn){alert("Geen locatie beschikbaar");return}if(!_){alert("Vul een naam/type in");return}V(!0);try{let jt=g||"";if(F===tu){const pt=[];T&&pt.push(`Materiaal: ${T}`),I&&pt.push(`Periode: ${I}`),C&&pt.push(`Gewicht: ${C}g`),O&&pt.push(`Lengte: ${O}mm`),pt.length>0&&(jt=pt.join(" | ")+(g?` | ${g}`:""))}let gn;if(U){const pt=crypto.randomUUID();try{const hr=await Ckt(pt,U),zn=await be(hr.thumbnail);gn={id:pt,thumbnailBase64:zn,createdAt:hr.createdAt}}catch(hr){console.error("Failed to save photo:",hr)}}o(F,{coordinates:[cn.lng,cn.lat],name:_,category:F===tu?_:"Overig",notes:jt||"",...gn?{photos:[gn]}:{},...h&&c?{routeId:`recording-${c}`,routeName:f||void 0}:{}});const wn=s.find(pt=>pt.id===F)?.name||"Vondsten";a&&bkt({type:_,material:T||void 0,period:I||void 0,layerName:wn}),alert(`Toegevoegd aan ${wn}! ${gn?" (met foto)":""}`),t()}catch(jt){alert("Fout bij opslaan: "+jt.message)}finally{V(!1)}},be=Ye=>new Promise((cn,jt)=>{const gn=new FileReader;gn.onloadend=()=>cn(gn.result),gn.onerror=jt,gn.readAsDataURL(Ye)}),Dt=Y.useMemo(()=>s.map(Ye=>({id:Ye.id,name:Ye.name,color:Ye.color})),[s]);return Z?p.jsx(yt.div,{className:"fixed bottom-0 left-0 right-0 z-[2000] p-4",initial:{y:100},animate:{y:0},exit:{y:100},children:p.jsxs("div",{className:"bg-orange-500 text-white rounded-xl shadow-xl p-4 flex items-center justify-between max-w-md mx-auto",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(t5,{size:24,className:"animate-pulse"}),p.jsxs("div",{children:[p.jsx("div",{className:"font-medium",children:"Tik op de kaart"}),p.jsx("div",{className:"text-sm opacity-90",children:"om locatie te kiezen"})]})]}),p.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors border-0 outline-none",children:"Annuleren"})]})}):p.jsx(yt.div,{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:p.jsxs(yt.div,{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-hidden flex flex-col",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[p.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-5 py-4 flex justify-between items-center flex-shrink-0",children:[p.jsx("h2",{className:"text-lg font-semibold",children:"Nieuwe Vondst"}),p.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:20})})]}),p.jsxs("form",{onSubmit:ke,className:"flex-1 overflow-y-auto",children:[p.jsxs("div",{className:"p-5 space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foto"}),Ie?p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:Ie,alt:"Vondst",className:"w-full h-40 object-cover rounded-xl"}),p.jsx("button",{type:"button",onClick:Ke,className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors border-0 outline-none shadow-lg",children:p.jsx(Ah,{size:16})})]}):p.jsxs("button",{type:"button",onClick:qe,className:"w-full h-32 bg-gray-50 rounded-xl flex flex-col items-center justify-center gap-2 hover:bg-gray-100 transition-colors text-gray-500 border-2 border-dashed border-gray-200",style:{outline:"none"},children:[p.jsx(zL,{size:32}),p.jsx("span",{className:"text-sm",children:"Maak een foto"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Locatie"}),ie&&p.jsxs("div",{className:"bg-orange-50 rounded-xl px-4 py-3 mb-2",children:[p.jsxs("div",{className:"text-sm text-orange-800 font-mono",children:[ie.lat.toFixed(6),"N, ",ie.lng.toFixed(6),"E"]}),p.jsx("div",{className:"text-xs text-orange-600 mt-1",children:Oe==="gps"?" GPS locatie":Oe==="map-pick"?" Gekozen op kaart":" Kaart midden"})]}),!ie&&p.jsx("div",{className:"bg-red-50 rounded-xl px-4 py-3 mb-2",children:p.jsx("div",{className:"text-sm text-red-600",children:"Geen locatie beschikbaar"})}),p.jsxs("div",{className:"flex gap-2",children:[n&&Oe!=="gps"&&p.jsxs("button",{type:"button",onClick:xe,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors border-0 outline-none",children:[p.jsx(rh,{size:16}),"GPS"]}),p.jsxs("button",{type:"button",onClick:le,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors border-0 outline-none",children:[p.jsx(t5,{size:16}),"Kies op kaart"]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opslaan naar"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Dt.map(Ye=>p.jsx("button",{type:"button",onClick:()=>G(Ye.id),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-0 outline-none ${F===Ye.id?"bg-gray-800 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Ye.name},Ye.id))})]}),F===tu&&p.jsx(MF,{label:"Type vondst",value:_,onChange:b,options:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"],required:!0,placeholder:"Typ type vondst..."}),F!==tu&&p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Naam",p.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),p.jsx("input",{type:"text",value:_,onChange:Ye=>b(Ye.target.value),placeholder:"Naam van het punt...",className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"}})]}),F===tu&&p.jsxs(p.Fragment,{children:[p.jsx(MF,{label:"Materiaal",value:T,onChange:A,options:["Brons","IJzer","Zilver","Goud","Koper","Lood","Tin","Keramiek","Steen","Glas","Bot","Hout","Leer","Onbekend"],placeholder:"Typ materiaal..."}),p.jsx(MF,{label:"Periode",value:I,onChange:P,options:["Steentijd","Bronstijd","IJzertijd","Romeins","Middeleeuws","Nieuwetijd","Modern","Onbekend"],placeholder:"Typ periode..."}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Gewicht (g)"}),p.jsx("input",{type:"number",value:C??"",onChange:Ye=>N(Ye.target.value?parseFloat(Ye.target.value):void 0),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"},min:"0",step:"0.1"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Lengte (mm)"}),p.jsx("input",{type:"number",value:O??"",onChange:Ye=>L(Ye.target.value?parseFloat(Ye.target.value):void 0),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"},min:"0",step:"0.1"})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Notities"}),p.jsx("textarea",{value:g,onChange:Ye=>y(Ye.target.value),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all resize-none h-20",style:{border:"none",outline:"none"},placeholder:"Beschrijving, context, vindplaats details..."})]}),p.jsx("div",{className:"rounded-xl px-4 py-3 bg-orange-50",children:p.jsx("p",{className:"text-sm text-orange-700",children:' Opgeslagen in "Mijn Lagen" op dit apparaat'})})]}),p.jsxs("div",{className:"p-5 pt-0 flex gap-3",children:[p.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors font-medium border-0 outline-none",children:"Annuleren"}),p.jsx("button",{type:"submit",disabled:M||!ie||Z||!_,className:"flex-1 px-4 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium border-0 outline-none",children:M?"Opslaan...":"Opslaan"})]})]})]})})}function Rkt(){const{user:t,setUser:e,setLoading:n}=DO();return Y.useEffect(()=>{const s=$ue(qf,o=>{e(o),n(!1)});return()=>s()},[e,n]),{user:t,loginAnonymous:async()=>{try{await z4e(qf)}catch(s){console.error("Login failed:",s)}},logout:async()=>{try{await Fue(qf)}catch(s){console.error("Logout failed:",s)}},isAuthenticated:!!t}}function Mkt(){const{isAuthenticated:t,loginAnonymous:e}=Rkt(),n=an(c=>c.vondstenLocalOnly),r=an(c=>c.showVondstButton),i=gr(c=>c.vondstFormOpen),s=gr(c=>c.vondstFormLocation),o=gr(c=>c.openVondstForm),a=gr(c=>c.closeVondstForm);if(!r)return null;const l=()=>{if(n){o();return}if(!t){confirm("Je moet ingelogd zijn om vondsten in de cloud op te slaan. Anoniem inloggen?")&&e();return}o()};return p.jsxs(p.Fragment,{children:[p.jsx(yt.button,{className:"fixed bottom-2 right-[152px] z-[1000] w-11 h-11 bg-orange-500 hover:bg-orange-600 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,title:"Vondst toevoegen",children:p.jsx(jo,{size:22,strokeWidth:2})}),p.jsx(Wn,{children:i&&p.jsx(zSe,{onClose:a,initialLocation:s||void 0})})]})}function Nkt(){const t=an(be=>be.showRouteRecordButton),e=an(be=>be.showVondstButton),n=gr(be=>be.toggleRouteDashboard),{state:r,startRecording:i,pauseRecording:s,resumeRecording:o,stopRecording:a,cancelRecording:l,addPoint:c,getCurrentDistance:u,getCurrentDuration:h,getAverageSpeed:f,currentPoints:g,savedRoutes:y,autoPauseEnabled:_,autoPauseSeconds:b}=Ba(),[T,A]=Y.useState(!1),[I,P]=Y.useState(""),[M,V]=Y.useState(!1),[C,N]=Y.useState(!1),O=Y.useRef(null),L=Y.useRef(null),F=Y.useRef(null),G=be=>{const Dt=Math.floor(be/1e3),Ye=Math.floor(Dt/3600),cn=Math.floor(Dt%3600/60),jt=Dt%60;return Ye>0?`${Ye}:${cn.toString().padStart(2,"0")}:${jt.toString().padStart(2,"0")}`:`${cn}:${jt.toString().padStart(2,"0")}`},U=be=>be<1e3?`${Math.round(be)} m`:`${(be/1e3).toFixed(2)} km`,he=be=>`${be.toFixed(1)} km/h`,Ie=(be,Dt,Ye,cn)=>{const gn=(cn-Dt)*Math.PI/180,wn=(Ye-be)*Math.PI/180,pt=Math.sin(gn/2)*Math.sin(gn/2)+Math.cos(Dt*Math.PI/180)*Math.cos(cn*Math.PI/180)*Math.sin(wn/2)*Math.sin(wn/2);return 6371e3*(2*Math.atan2(Math.sqrt(pt),Math.sqrt(1-pt)))};if(Y.useEffect(()=>(r==="recording"?(N(!1),"geolocation"in navigator&&O.current===null&&(O.current=navigator.geolocation.watchPosition(be=>{const Dt=be.coords.longitude,Ye=be.coords.latitude,cn=Date.now();c(Dt,Ye,be.coords.accuracy),_&&L.current?Ie(L.current.lon,L.current.lat,Dt,Ye)>3?(L.current={lon:Dt,lat:Ye,time:cn},F.current&&(clearTimeout(F.current),F.current=null)):cn-L.current.time>=b*1e3&&(s(),N(!0),L.current=null):L.current={lon:Dt,lat:Ye,time:cn}},be=>{console.error("GPS error:",be)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:1e3}))):(O.current!==null&&(navigator.geolocation.clearWatch(O.current),O.current=null),F.current&&(clearTimeout(F.current),F.current=null)),()=>{O.current!==null&&(navigator.geolocation.clearWatch(O.current),O.current=null),F.current&&(clearTimeout(F.current),F.current=null)}),[r,c,_,b,s]),!t)return null;const ze=e?"right-[200px]":"right-[152px]",Oe=e?"right-[248px]":"right-[200px]",fe=()=>{i(),V(!0)},ge=()=>{s()},Se=()=>{o()},Z=()=>{P(`Route ${new Date().toLocaleDateString("nl-NL")}`),A(!0)},W=()=>{const be=a(I);A(!1),V(!1),P(""),be&&confirm(`Route "${be.name}" opgeslagen! (${U(be.totalDistance)})

Direct exporteren als GPX?`)&&FSe(be)},ne=()=>{g.length>2&&!confirm("Weet je zeker dat je de opname wilt annuleren? De route wordt niet opgeslagen.")||(l(),A(!1),V(!1))},ie=u(),le=h(),xe=f(),qe=be=>{switch(be){case"recording":return"bg-red-500 hover:bg-red-600";case"paused":return"bg-yellow-500 hover:bg-yellow-600";default:return"bg-green-500 hover:bg-green-600"}},Ke=be=>{switch(be){case"recording":return p.jsx(K2e,{size:22,strokeWidth:2});case"paused":return p.jsx(X2e,{size:22,strokeWidth:2});default:return p.jsx(i5,{size:22,strokeWidth:2})}},ke=()=>{switch(r){case"idle":fe();break;case"recording":ge();break;case"paused":Se();break}};return p.jsxs(p.Fragment,{children:[p.jsxs(yt.button,{className:`fixed bottom-2 ${ze} z-[1000] w-11 h-11 ${qe(r)} text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none backdrop-blur-sm`,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ke,title:r==="idle"?"Route opnemen":r==="recording"?"Pauzeren":"Hervatten",children:[Ke(r),r==="recording"&&p.jsx(yt.div,{className:"absolute inset-0 rounded-xl bg-red-400",animate:{opacity:[.5,0,.5]},transition:{duration:1.5,repeat:1/0}})]}),p.jsx(Wn,{children:r==="idle"&&y.length>0&&p.jsxs(yt.button,{className:`fixed bottom-2 ${Oe} z-[1000] w-11 h-11 bg-green-400 hover:bg-green-500 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none`,initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,title:`Mijn routes (${y.length})`,children:[p.jsx(H2e,{size:18,strokeWidth:2}),p.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-white text-green-600 text-xs font-bold rounded-full flex items-center justify-center shadow-sm",children:y.length})]})}),p.jsx(Wn,{children:(r==="recording"||r==="paused")&&p.jsx(yt.button,{className:`fixed bottom-2 ${Oe} z-[1000] w-11 h-11 bg-gray-700 hover:bg-gray-800 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none`,initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Z,title:"Stoppen en opslaan",children:p.jsx(Cht,{size:18,strokeWidth:2,fill:"currentColor"})})}),p.jsx(Wn,{children:M&&r!=="idle"&&p.jsxs(yt.div,{className:"fixed bottom-16 right-2 z-[999] bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-3 min-w-[180px]",initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:r==="recording"?" Opname":C?" Auto-pauze":" Gepauzeerd"}),p.jsx("button",{onClick:()=>V(!1),className:"p-0.5 text-gray-400 hover:text-gray-600 border-0 outline-none bg-transparent",children:p.jsx(Qr,{size:14})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ld,{size:16,className:"text-green-500"}),p.jsx("span",{className:"text-lg font-semibold text-gray-800",children:U(ie)})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(e5,{size:16,className:"text-blue-500"}),p.jsx(Okt,{duration:le,recordingState:r,formatTime:G})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(_ut,{size:16,className:"text-green-500"}),p.jsx("span",{className:"text-sm text-gray-600",children:he(xe)})]}),p.jsxs("div",{className:"text-xs text-gray-400 pt-1 border-t border-gray-100",children:[g.length," punten opgenomen"]})]})]})}),p.jsx(Wn,{children:T&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1500] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>A(!1)}),p.jsxs(yt.div,{className:"fixed left-4 right-4 top-1/2 z-[1501] bg-white rounded-xl shadow-2xl p-4 max-w-sm mx-auto",initial:{opacity:0,scale:.9,y:"-40%"},animate:{opacity:1,scale:1,y:"-50%"},exit:{opacity:0,scale:.9,y:"-40%"},children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Route opslaan"}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 space-y-1",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500",children:"Afstand:"}),p.jsx("span",{className:"font-medium",children:U(ie)})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500",children:"Duur:"}),p.jsx("span",{className:"font-medium",children:G(le)})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500",children:"Gem. snelheid:"}),p.jsx("span",{className:"font-medium",children:he(xe)})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500",children:"Punten:"}),p.jsx("span",{className:"font-medium",children:g.length})]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam van de route"}),p.jsx("input",{type:"text",value:I,onChange:be=>P(be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Route naam...",autoFocus:!0})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:ne,className:"flex-1 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",children:"Annuleren"}),p.jsxs("button",{onClick:W,disabled:g.length<2,className:"flex-1 px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",children:[p.jsx(wq,{size:16}),"Opslaan"]})]}),g.length<2&&p.jsx("p",{className:"text-xs text-red-500 text-center mt-2",children:"Minimaal 2 punten nodig om op te slaan"})]})]})})]})}function Okt({duration:t,recordingState:e,formatTime:n}){const[r,i]=Y.useState(t);return Y.useEffect(()=>{if(e!=="recording"){i(t);return}const s=setInterval(()=>{i(o=>o+1e3)},1e3);return()=>clearInterval(s)},[e,t]),Y.useEffect(()=>{i(t)},[t]),p.jsx("span",{className:"text-lg font-semibold text-gray-800",children:n(r)})}function Lkt(){const t=li(s=>s.map),{currentPoints:e,state:n}=Ba(),r=Y.useRef(null),i=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const s=new Ol;i.current=s;const o=new Ll({source:s,zIndex:999,properties:{name:"route-recording-layer"}});return r.current=o,t.addLayer(o),()=>{r.current&&t&&t.removeLayer(r.current)}},[t]),Y.useEffect(()=>{if(!i.current||(i.current.clear(),n==="idle"||e.length===0))return;const s=e.map(o=>Ni(o.coordinates));if(s.length>=2){const o=new yr({geometry:new ts(s)});o.setStyle(new xn({stroke:new Mn({color:n==="paused"?"rgba(234, 179, 8, 0.8)":"rgba(168, 85, 247, 0.8)",width:4,lineCap:"round",lineJoin:"round"})})),i.current.addFeature(o)}if(s.length>=1){const o=new yr({geometry:new ki(s[0])});o.setStyle(new xn({image:new gs({radius:8,fill:new Dn({color:"rgba(34, 197, 94, 1)"}),stroke:new Mn({color:"white",width:2})})})),i.current.addFeature(o)}if(s.length>=1){const o=new yr({geometry:new ki(s[s.length-1])});o.setStyle(new xn({image:new gs({radius:6,fill:new Dn({color:n==="paused"?"rgba(234, 179, 8, 1)":"rgba(168, 85, 247, 1)"}),stroke:new Mn({color:"white",width:2})})})),i.current.addFeature(o)}},[e,n]),null}const Wae=["#a855f7","#3b82f6","#22c55e","#f97316","#ec4899","#14b8a6","#eab308","#8b5cf6"];function Dkt(){const t=li(s=>s.map),{savedRoutes:e,visibleRouteIds:n}=Ba(),r=Y.useRef(null),i=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const s=new Ol;i.current=s;const o=new Ll({source:s,zIndex:998,properties:{name:"saved-routes-layer"}});return r.current=o,t.addLayer(o),()=>{r.current&&t&&t.removeLayer(r.current)}},[t]),Y.useEffect(()=>{if(!i.current)return;i.current.clear(),e.filter(o=>n.has(o.id)).forEach((o,a)=>{const l=Wae[a%Wae.length],c=o.points.map(_=>Ni(_.coordinates));if(c.length<2)return;const u=new yr({geometry:new ts(c),routeId:o.id,routeName:o.name});u.setStyle(new xn({stroke:new Mn({color:l,width:4,lineCap:"round",lineJoin:"round"})})),i.current.addFeature(u);const h=new yr({geometry:new ki(c[0]),routeId:o.id,type:"start"});h.setStyle(new xn({image:new gs({radius:8,fill:new Dn({color:"#22c55e"}),stroke:new Mn({color:"white",width:2})}),text:new pc({text:"S",font:"bold 10px sans-serif",fill:new Dn({color:"white"}),offsetY:1})})),i.current.addFeature(h);const f=new yr({geometry:new ki(c[c.length-1]),routeId:o.id,type:"end"});f.setStyle(new xn({image:new gs({radius:8,fill:new Dn({color:"#ef4444"}),stroke:new Mn({color:"white",width:2})}),text:new pc({text:"E",font:"bold 10px sans-serif",fill:new Dn({color:"white"}),offsetY:1})})),i.current.addFeature(f);const g=Math.floor(c.length/2),y=new yr({geometry:new ki(c[g]),routeId:o.id,type:"label"});y.setStyle(new xn({text:new pc({text:o.name,font:"12px sans-serif",fill:new Dn({color:"#1f2937"}),stroke:new Mn({color:"white",width:3}),offsetY:-15})})),i.current.addFeature(y)})},[e,n]),null}function jkt(){const t=li(o=>o.map),{savedRoutes:e,visibleRouteIds:n,heatmapEnabled:r}=Ba(),i=Y.useRef(null),s=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const o=new Ol;s.current=o;const a=new jCe({source:o,blur:15,radius:10,weight:()=>1,gradient:["#00f","#0ff","#0f0","#ff0","#f00"],opacity:.6,zIndex:90});return i.current=a,t.addLayer(a),()=>{t&&i.current&&t.removeLayer(i.current)}},[t]),Y.useEffect(()=>{if(!s.current||!i.current)return;if(s.current.clear(),!r){i.current.setVisible(!1);return}const o=e.filter(l=>n.has(l.id)),a=[];for(const l of o)for(const c of l.points){const u=new yr({geometry:new ki(Ni(c.coordinates))});a.push(u)}s.current.addFeatures(a),i.current.setVisible(a.length>0)},[e,n,r]),null}function $kt(t,e,n,r){const i=[],s=e/111e3,o=e/(111e3*Math.cos(t[1]*Math.PI/180)),a=Math.floor(n/2),l=t[0]-a*o,c=t[0]+a*o,u=t[1]-a*s,h=t[1]+a*s;for(let _=-a;_<=a;_++){const b=t[0]+_*o,T=[Ni([b,u]),Ni([b,h])],A=new yr({geometry:new ts(T),type:"grid-line"});A.setStyle(new xn({stroke:new Mn({color:r,width:_===0?2:1,lineDash:_===0?void 0:[5,5]})})),i.push(A)}for(let _=-a;_<=a;_++){const b=t[1]+_*s,T=[Ni([l,b]),Ni([c,b])],A=new yr({geometry:new ts(T),type:"grid-line"});A.setStyle(new xn({stroke:new Mn({color:r,width:_===0?2:1,lineDash:_===0?void 0:[5,5]})})),i.push(A)}const f="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=-a;_<a;_++)for(let b=-a;b<a;b++){const T=t[0]+(b+.5)*o,A=t[1]+(_+.5)*s,I=_+a,P=b+a;if(I>=0&&I<f.length){const M=`${f[I]}${P+1}`,V=new yr({geometry:new ts([Ni([T,A]),Ni([T,A])]),type:"grid-label"});V.setStyle(new xn({text:new pc({text:M,font:"12px sans-serif",fill:new Dn({color:r}),stroke:new Mn({color:"rgba(255,255,255,0.8)",width:3})})})),i.push(V)}}const g=new yr({geometry:new ts([Ni([t[0]-o*.2,t[1]]),Ni([t[0]+o*.2,t[1]])]),type:"grid-center"});g.setStyle(new xn({stroke:new Mn({color:"#ef4444",width:3})})),i.push(g);const y=new yr({geometry:new ts([Ni([t[0],t[1]-s*.2]),Ni([t[0],t[1]+s*.2])]),type:"grid-center"});return y.setStyle(new xn({stroke:new Mn({color:"#ef4444",width:3})})),i.push(y),i}function Fkt(){const t=li(l=>l.map),{gridEnabled:e,gridCenter:n,gridSize:r,gridCount:i,gridColor:s}=Ba(),o=Y.useRef(null),a=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const l=new Ol;a.current=l;const c=new Ll({source:l,zIndex:85,properties:{name:"grid-overlay-layer"}});return o.current=c,t.addLayer(c),()=>{o.current&&t&&t.removeLayer(o.current)}},[t]),Y.useEffect(()=>{if(!a.current||!o.current)return;if(a.current.clear(),!e||!n){o.current.setVisible(!1);return}const l=$kt(n,r,i,s);a.current.addFeatures(l),o.current.setVisible(!0)},[e,n,r,i,s]),null}function Vkt(t){const e=[];let n=0;return t.points.forEach((r,i)=>{if(i>0){const a=t.points[i-1],l=6371e3,c=(r.coordinates[1]-a.coordinates[1])*Math.PI/180,u=(r.coordinates[0]-a.coordinates[0])*Math.PI/180,h=Math.sin(c/2)*Math.sin(c/2)+Math.cos(a.coordinates[1]*Math.PI/180)*Math.cos(r.coordinates[1]*Math.PI/180)*Math.sin(u/2)*Math.sin(u/2),f=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));n+=l*f}const s=5,o=Math.sin(n/50)*2+Math.sin(n/120)*1.5+Math.sin(n/30+r.coordinates[0]*1e3)*.5;e.push({distance:n,elevation:Math.max(0,s+o)})}),e}function zkt({route:t,onClose:e}){const n=Y.useRef(null),[r,i]=Y.useState([]),[s,o]=Y.useState({min:0,max:0,gain:0,loss:0});Y.useEffect(()=>{const l=Vkt(t);if(i(l),l.length>0){const c=l.map(y=>y.elevation),u=Math.min(...c),h=Math.max(...c);let f=0,g=0;for(let y=1;y<l.length;y++){const _=l[y].elevation-l[y-1].elevation;_>0?f+=_:g+=Math.abs(_)}o({min:u,max:h,gain:f,loss:g})}},[t]),Y.useEffect(()=>{const l=n.current;if(!l||r.length<2)return;const c=l.getContext("2d");if(!c)return;const u=l.width,h=l.height,f={top:20,right:20,bottom:30,left:40};c.fillStyle="#f9fafb",c.fillRect(0,0,u,h);const g=Math.max(...r.map(M=>M.distance)),y=Math.min(...r.map(M=>M.elevation))-1,_=Math.max(...r.map(M=>M.elevation))+1,b=M=>f.left+M/g*(u-f.left-f.right),T=M=>h-f.bottom-(M-y)/(_-y)*(h-f.top-f.bottom);c.strokeStyle="#e5e7eb",c.lineWidth=1;const A=5;for(let M=0;M<=A;M++){const V=y+(_-y)*(M/A),C=T(V);c.beginPath(),c.moveTo(f.left,C),c.lineTo(u-f.right,C),c.stroke(),c.fillStyle="#9ca3af",c.font="10px sans-serif",c.textAlign="right",c.fillText(`${V.toFixed(1)}m`,f.left-5,C+3)}const I=5;for(let M=0;M<=I;M++){const V=g/I*M,C=b(V);c.fillStyle="#9ca3af",c.font="10px sans-serif",c.textAlign="center",c.fillText(V<1e3?`${Math.round(V)}m`:`${(V/1e3).toFixed(1)}km`,C,h-10)}c.beginPath(),c.moveTo(b(r[0].distance),h-f.bottom),r.forEach(M=>{c.lineTo(b(M.distance),T(M.elevation))}),c.lineTo(b(r[r.length-1].distance),h-f.bottom),c.closePath();const P=c.createLinearGradient(0,f.top,0,h-f.bottom);P.addColorStop(0,"rgba(139, 92, 246, 0.3)"),P.addColorStop(1,"rgba(139, 92, 246, 0.05)"),c.fillStyle=P,c.fill(),c.strokeStyle="#8b5cf6",c.lineWidth=2,c.lineJoin="round",c.lineCap="round",c.beginPath(),r.forEach((M,V)=>{const C=b(M.distance),N=T(M.elevation);V===0?c.moveTo(C,N):c.lineTo(C,N)}),c.stroke()},[r]);const a=l=>l<1e3?`${Math.round(l)} m`:`${(l/1e3).toFixed(2)} km`;return p.jsxs(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed inset-4 z-[1700] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[70vh]",children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-purple-500 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(J2,{size:20}),p.jsx("span",{className:"font-medium",children:"Hoogteprofiel"})]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-purple-400/50 hover:bg-purple-400 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:18})})]}),p.jsxs("div",{className:"px-4 py-2 bg-purple-50 border-b border-purple-100",children:[p.jsx("h3",{className:"font-medium text-gray-800 truncate",children:t.name}),p.jsx("p",{className:"text-xs text-gray-500",children:a(t.totalDistance)})]}),p.jsxs("div",{className:"grid grid-cols-4 gap-2 p-3 border-b border-gray-100",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"flex items-center justify-center text-blue-500 mb-1",children:p.jsx(q2e,{size:14})}),p.jsx("div",{className:"text-xs text-gray-500",children:"Min"}),p.jsxs("div",{className:"text-sm font-medium",children:[s.min.toFixed(1),"m"]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"flex items-center justify-center text-purple-500 mb-1",children:p.jsx(J2,{size:14})}),p.jsx("div",{className:"text-xs text-gray-500",children:"Max"}),p.jsxs("div",{className:"text-sm font-medium",children:[s.max.toFixed(1),"m"]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"flex items-center justify-center text-green-500 mb-1",children:p.jsx(Hht,{size:14})}),p.jsx("div",{className:"text-xs text-gray-500",children:"Stijging"}),p.jsxs("div",{className:"text-sm font-medium",children:[s.gain.toFixed(1),"m"]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"flex items-center justify-center text-red-500 mb-1",children:p.jsx(Bht,{size:14})}),p.jsx("div",{className:"text-xs text-gray-500",children:"Daling"}),p.jsxs("div",{className:"text-sm font-medium",children:[s.loss.toFixed(1),"m"]})]})]}),p.jsx("div",{className:"flex-1 p-3",children:p.jsx("canvas",{ref:n,width:350,height:200,className:"w-full h-full"})}),p.jsx("div",{className:"px-4 py-2 bg-yellow-50 border-t border-yellow-100",children:p.jsxs("p",{className:"text-xs text-yellow-700",children:[p.jsx("strong",{children:"Let op:"})," Dit zijn gesimuleerde hoogtewaarden. Koppeling met AHN-data komt binnenkort."]})})]})}const Gkt=t=>t<1e3?`${Math.round(t)} m`:`${(t/1e3).toFixed(2)} km`,Ukt=t=>{const e=Math.floor(t/1e3),n=Math.floor(e/3600),r=Math.floor(e%3600/60);return n>0?`${n}u ${r}m`:`${r} min`},Hae=t=>new Date(t).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});function Bkt({route:t,onClose:e}){const{updateRouteNotes:n,addPhotoToRoute:r,removePhotoFromRoute:i}=Ba(),[s,o]=Y.useState(t.notes||""),[a,l]=Y.useState("info"),c=Y.useRef(null),u=()=>{n(t.id,s)},h=async y=>{const _=y.target.files?.[0];if(!_)return;const b=URL.createObjectURL(_);r(t.id,{url:b,caption:_.name}),c.current&&(c.current.value="")},f=y=>{confirm("Foto verwijderen?")&&i(t.id,y)},g=Ba(y=>y.savedRoutes.find(_=>_.id===t.id))||t;return p.jsxs(yt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[1700] flex items-center justify-center p-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),p.jsxs(yt.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},className:"relative bg-white rounded-xl shadow-2xl overflow-hidden w-full max-w-md max-h-[85vh] flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-purple-500 text-white",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"font-medium truncate",children:g.name}),p.jsx("p",{className:"text-xs text-purple-200",children:Hae(g.createdAt)})]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-purple-400/50 hover:bg-purple-400 transition-colors border-0 outline-none ml-2",children:p.jsx(Qr,{size:18})})]}),p.jsxs("div",{className:"flex border-b border-gray-200",children:[p.jsxs("button",{onClick:()=>l("info"),className:`flex-1 py-2 text-sm font-medium border-0 outline-none transition-colors ${a==="info"?"text-purple-600 border-b-2 border-purple-500":"text-gray-500 hover:text-gray-700"}`,children:[p.jsx(jo,{size:16,className:"inline mr-1"}),"Info"]}),p.jsxs("button",{onClick:()=>l("photos"),className:`flex-1 py-2 text-sm font-medium border-0 outline-none transition-colors ${a==="photos"?"text-purple-600 border-b-2 border-purple-500":"text-gray-500 hover:text-gray-700"}`,children:[p.jsx(zL,{size:16,className:"inline mr-1"}),"Foto's (",g.photos?.length||0,")"]}),p.jsxs("button",{onClick:()=>l("notes"),className:`flex-1 py-2 text-sm font-medium border-0 outline-none transition-colors ${a==="notes"?"text-purple-600 border-b-2 border-purple-500":"text-gray-500 hover:text-gray-700"}`,children:[p.jsx(yq,{size:16,className:"inline mr-1"}),"Notities"]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a==="info"&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-purple-600 mb-1",children:[p.jsx(Ld,{size:16}),p.jsx("span",{className:"text-xs text-gray-500",children:"Afstand"})]}),p.jsx("p",{className:"text-lg font-semibold",children:Gkt(g.totalDistance)})]}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[p.jsx(e5,{size:16}),p.jsx("span",{className:"text-xs text-gray-500",children:"Duur"})]}),p.jsx("p",{className:"text-lg font-semibold",children:Ukt(g.totalDuration)})]})]}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[p.jsx(jo,{size:16}),p.jsx("span",{className:"text-xs text-gray-500",children:"Punten"})]}),p.jsxs("p",{className:"text-lg font-semibold",children:[g.points.length," GPS punten"]})]}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-orange-600 mb-1",children:[p.jsx(pq,{size:16}),p.jsx("span",{className:"text-xs text-gray-500",children:"Aangemaakt"})]}),p.jsx("p",{className:"text-sm",children:Hae(g.createdAt)})]})]}),a==="photos"&&p.jsxs("div",{className:"space-y-4",children:[p.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:h,className:"hidden"}),p.jsxs("button",{onClick:()=>c.current?.click(),className:"w-full py-8 border-2 border-dashed border-purple-300 rounded-lg text-purple-500 hover:bg-purple-50 transition-colors flex flex-col items-center gap-2",children:[p.jsx(Tc,{size:24}),p.jsx("span",{className:"text-sm",children:"Foto toevoegen"})]}),g.photos&&g.photos.length>0?p.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.photos.map(y=>p.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden bg-gray-100",children:[p.jsx("img",{src:y.url,alt:y.caption||"Route foto",className:"w-full h-full object-cover"}),p.jsx("button",{onClick:()=>f(y.id),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors border-0 outline-none",children:p.jsx(Ah,{size:12})}),y.caption&&p.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-2 py-1 bg-black/50 text-white text-xs truncate",children:y.caption})]},y.id))}):p.jsx("p",{className:"text-center text-gray-400 text-sm py-4",children:"Nog geen foto's toegevoegd"})]}),a==="notes"&&p.jsxs("div",{className:"space-y-4",children:[p.jsx("textarea",{value:s,onChange:y=>o(y.target.value),placeholder:"Voeg notities toe over deze route...",className:"w-full h-48 p-3 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"}),p.jsx("button",{onClick:u,className:"w-full px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-colors border-0 outline-none",children:"Notities opslaan"})]})]})]})]})}function Wkt({route:t,size:e=80}){const n=Y.useRef(null);return Y.useEffect(()=>{const r=n.current;if(!r||t.points.length<2)return;const i=r.getContext("2d");if(!i)return;i.fillStyle="#f3f4f6",i.fillRect(0,0,e,e);const s=t.points.map(P=>P.coordinates[0]),o=t.points.map(P=>P.coordinates[1]),a=Math.min(...s),l=Math.max(...s),c=Math.min(...o),u=Math.max(...o),h=8,f=e-h*2,g=e-h*2,y=P=>l===a?e/2:h+(P-a)/(l-a)*f,_=P=>u===c?e/2:h+g-(P-c)/(u-c)*g;i.strokeStyle="#a855f7",i.lineWidth=2,i.lineCap="round",i.lineJoin="round",i.beginPath(),t.points.forEach((P,M)=>{const V=y(P.coordinates[0]),C=_(P.coordinates[1]);M===0?i.moveTo(V,C):i.lineTo(V,C)}),i.stroke();const b=y(t.points[0].coordinates[0]),T=_(t.points[0].coordinates[1]);i.fillStyle="#22c55e",i.beginPath(),i.arc(b,T,4,0,Math.PI*2),i.fill();const A=y(t.points[t.points.length-1].coordinates[0]),I=_(t.points[t.points.length-1].coordinates[1]);i.fillStyle="#ef4444",i.beginPath(),i.arc(A,I,4,0,Math.PI*2),i.fill()},[t,e]),t.points.length<2?p.jsx("div",{className:"bg-gray-100 rounded flex items-center justify-center text-gray-400",style:{width:e,height:e},children:p.jsx(jo,{size:20})}):p.jsx("canvas",{ref:n,width:e,height:e,className:"rounded"})}const NF=t=>t<1e3?`${Math.round(t)} m`:`${(t/1e3).toFixed(2)} km`,OF=t=>{const e=Math.floor(t/1e3),n=Math.floor(e/3600),r=Math.floor(e%3600/60);return n>0?`${n}u ${r}m`:`${r} min`},qae=t=>new Date(t).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric"});function Hkt({isOpen:t,onClose:e,onViewRoute:n}){const{savedRoutes:r,deleteRoute:i,renameRoute:s,clearAllRoutes:o,visibleRouteIds:a,toggleRouteVisibility:l,showAllRoutes:c,hideAllRoutes:u,heatmapEnabled:h,toggleHeatmap:f,gridEnabled:g,toggleGrid:y,centerGridOnCurrentLocation:_,gridSize:b,setGridSize:T,autoPauseEnabled:A,setAutoPauseEnabled:I,autoPauseSeconds:P,setAutoPauseSeconds:M,importRouteFromGPX:V}=Ba(),[C,N]=Y.useState(null),[O,L]=Y.useState(""),[F,G]=Y.useState(!1),[U,he]=Y.useState(!1),[Ie,ze]=Y.useState(null),[Oe,fe]=Y.useState(null),ge=Y.useRef(null),Se=async ke=>{const be=` ${ke.name}

 Afstand: ${NF(ke.totalDistance)}
 Duur: ${OF(ke.totalDuration)}
 ${ke.points.length} GPS punten
 ${qae(ke.createdAt)}

Opgenomen met DetectorApp NL`;if(navigator.share)try{await navigator.share({title:ke.name,text:be});return}catch(Dt){Dt.name!=="AbortError"&&console.error("Share failed:",Dt)}try{await navigator.clipboard.writeText(be),alert("Route info gekopieerd naar klembord!")}catch{prompt("Kopieer de route info:",be)}},Z=async ke=>{const be=ke.target.files?.[0];if(be){try{const Dt=await be.text(),Ye=V(Dt,be.name.replace(".gpx",""));Ye.success?alert(`Route gemporteerd: ${be.name}`):alert(`Import mislukt: ${Ye.error}`)}catch{alert("Fout bij lezen van bestand")}ge.current&&(ge.current.value="")}},W=ke=>{N(ke.id),L(ke.name)},ne=ke=>{O.trim()&&s(ke,O.trim()),N(null),L("")},ie=ke=>{confirm(`Weet je zeker dat je "${ke.name}" wilt verwijderen?`)&&i(ke.id)},le=()=>{r.length!==0&&confirm(`Weet je zeker dat je alle ${r.length} routes wilt verwijderen? Dit kan niet ongedaan worden gemaakt.`)&&o()},xe=ke=>{l(ke);const be=r.find(Dt=>Dt.id===ke);be&&n&&n(be)},qe=r.reduce((ke,be)=>ke+be.totalDistance,0),Ke=r.reduce((ke,be)=>ke+be.totalDuration,0);return p.jsxs(p.Fragment,{children:[p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-purple-500 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(i5,{size:20}),p.jsx("span",{className:"font-medium",children:"Mijn Routes"}),p.jsxs("span",{className:"text-purple-200 text-sm",children:["(",r.length,")"]})]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-purple-400/50 hover:bg-purple-400 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:18})})]}),r.length>0&&p.jsxs("div",{className:"px-4 py-2 bg-purple-50 border-b border-purple-100 flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex gap-4",children:[p.jsxs("div",{className:"flex items-center gap-1.5 text-purple-700",children:[p.jsx(Ld,{size:14}),p.jsxs("span",{children:["Totaal: ",NF(qe)]})]}),p.jsxs("div",{className:"flex items-center gap-1.5 text-purple-700",children:[p.jsx(e5,{size:14}),p.jsx("span",{children:OF(Ke)})]})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:()=>he(!U),className:`px-2 py-1 text-xs rounded transition-colors border-0 outline-none ${A?"bg-green-100 text-green-600":"text-purple-600 hover:bg-purple-100"}`,title:A?"Auto-pauze uit":"Auto-pauze aan",children:p.jsx(Fht,{size:14})}),p.jsx("button",{onClick:()=>G(!F),className:`px-2 py-1 text-xs rounded transition-colors border-0 outline-none ${g?"bg-blue-100 text-blue-600":"text-purple-600 hover:bg-purple-100"}`,title:g?"Grid verbergen":"Grid tonen",children:p.jsx(U2e,{size:14})}),p.jsx("button",{onClick:f,className:`px-2 py-1 text-xs rounded transition-colors border-0 outline-none ${h?"bg-orange-100 text-orange-600":"text-purple-600 hover:bg-purple-100"}`,title:h?"Heatmap verbergen":"Heatmap tonen",children:p.jsx(cut,{size:14})}),p.jsx("button",{onClick:c,className:"px-2 py-1 text-xs text-purple-600 hover:bg-purple-100 rounded transition-colors border-0 outline-none",title:"Alle tonen",children:p.jsx(NA,{size:14})}),p.jsx("button",{onClick:u,className:"px-2 py-1 text-xs text-purple-600 hover:bg-purple-100 rounded transition-colors border-0 outline-none",title:"Alle verbergen",children:p.jsx(n5,{size:14})})]})]}),p.jsx(Wn,{children:F&&p.jsx(yt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden border-b border-purple-100",children:p.jsxs("div",{className:"px-4 py-3 bg-blue-50 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Grid Assistent"}),p.jsx("button",{onClick:y,className:`px-3 py-1 text-xs rounded-full transition-colors border-0 outline-none ${g?"bg-blue-500 text-white":"bg-blue-200 text-blue-700"}`,children:g?"Aan":"Uit"})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsxs("button",{onClick:_,className:"flex-1 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",children:[p.jsx(t5,{size:14}),"Centreer op mijn locatie"]})}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("label",{className:"text-xs text-blue-700",children:["Celgrootte: ",b,"m"]}),p.jsx("input",{type:"range",min:"5",max:"50",step:"5",value:b,onChange:ke=>T(Number(ke.target.value)),className:"w-full h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer"}),p.jsxs("div",{className:"flex justify-between text-xs text-blue-600",children:[p.jsx("span",{children:"5m"}),p.jsx("span",{children:"50m"})]})]}),p.jsx("p",{className:"text-xs text-blue-600",children:"Gebruik het grid om systematisch een veld af te zoeken. Elk vak heeft een label (A1, B2, etc.) voor referentie."})]})})}),p.jsx(Wn,{children:U&&p.jsx(yt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden border-b border-purple-100",children:p.jsxs("div",{className:"px-4 py-3 bg-green-50 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm font-medium text-green-800",children:"Auto-pauze"}),p.jsx("button",{onClick:()=>I(!A),className:`px-3 py-1 text-xs rounded-full transition-colors border-0 outline-none ${A?"bg-green-500 text-white":"bg-green-200 text-green-700"}`,children:A?"Aan":"Uit"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("label",{className:"text-xs text-green-700",children:["Pauze na: ",P<60?`${P}s`:`${Math.floor(P/60)}m ${P%60}s`]}),p.jsx("input",{type:"range",min:"30",max:"300",step:"30",value:P,onChange:ke=>M(Number(ke.target.value)),className:"w-full h-2 bg-green-200 rounded-lg appearance-none cursor-pointer"}),p.jsxs("div",{className:"flex justify-between text-xs text-green-600",children:[p.jsx("span",{children:"30s"}),p.jsx("span",{children:"5min"})]})]}),p.jsxs("p",{className:"text-xs text-green-600",children:["De opname pauzeert automatisch als je langer dan ",P<60?`${P} seconden`:`${Math.floor(P/60)} minuten`," stilstaat. Ideaal voor pauzes tijdens het detecteren."]})]})})}),p.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:r.length===0?p.jsxs("div",{className:"text-center py-12 text-gray-500",children:[p.jsx(i5,{size:48,className:"mx-auto mb-3 text-gray-300"}),p.jsx("p",{className:"font-medium",children:"Nog geen routes"}),p.jsx("p",{className:"text-sm mt-1",children:"Start een opname om je eerste route vast te leggen"})]}):r.map(ke=>p.jsxs(yt.div,{layout:!0,className:"bg-gray-50 rounded-lg p-3 flex gap-3",children:[p.jsx(Wkt,{route:ke,size:70}),p.jsxs("div",{className:"flex-1 min-w-0",children:[C===ke.id?p.jsx("input",{type:"text",value:O,onChange:be=>L(be.target.value),onKeyDown:be=>{be.key==="Enter"&&ne(ke.id),be.key==="Escape"&&N(null)},onBlur:()=>ne(ke.id),className:"w-full px-2 py-1 text-sm bg-white border border-purple-300 rounded outline-none focus:ring-2 focus:ring-purple-400",autoFocus:!0}):p.jsx("h3",{className:"font-medium text-gray-800 truncate",children:ke.name}),p.jsx("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(pq,{size:12}),qae(ke.createdAt)]})}),p.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-600",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(Ld,{size:12}),NF(ke.totalDistance)]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(e5,{size:12}),OF(ke.totalDuration)]}),p.jsxs("span",{children:[ke.points.length," punten"]})]})]}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("button",{onClick:()=>xe(ke.id),className:`p-1.5 rounded transition-colors border-0 outline-none ${a.has(ke.id)?"bg-purple-100 text-purple-600":"text-gray-400 hover:text-purple-600 hover:bg-purple-50"}`,title:a.has(ke.id)?"Verbergen op kaart":"Tonen op kaart",children:a.has(ke.id)?p.jsx(NA,{size:16}):p.jsx(n5,{size:16})}),p.jsx("button",{onClick:()=>W(ke),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam wijzigen",children:p.jsx(Wd,{size:16})}),p.jsx("button",{onClick:()=>fe(ke),className:"p-1.5 text-gray-400 hover:text-cyan-600 hover:bg-cyan-50 rounded transition-colors border-0 outline-none",title:"Details & foto's",children:p.jsx(_q,{size:16})}),p.jsx("button",{onClick:()=>ze(ke),className:"p-1.5 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none",title:"Hoogteprofiel",children:p.jsx(J2,{size:16})}),p.jsx("button",{onClick:()=>Se(ke),className:"p-1.5 text-gray-400 hover:text-pink-600 hover:bg-pink-50 rounded transition-colors border-0 outline-none",title:"Delen",children:p.jsx(_ht,{size:16})}),p.jsx("button",{onClick:()=>FSe(ke),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Exporteer als GPX",children:p.jsx(MA,{size:16})}),p.jsx("button",{onClick:()=>ie(ke),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:p.jsx(Ah,{size:16})})]})]},ke.id))}),p.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",children:[p.jsx("input",{ref:ge,type:"file",accept:".gpx",onChange:Z,className:"hidden"}),p.jsxs("button",{onClick:()=>ge.current?.click(),className:"w-full px-3 py-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors border-0 outline-none text-sm flex items-center justify-center gap-2",children:[p.jsx(iP,{size:16}),"GPX bestand importeren"]}),r.length>0&&p.jsx("button",{onClick:le,className:"w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none text-sm",children:"Alle routes verwijderen"})]})]})]})}),p.jsx(Wn,{children:Ie&&p.jsx(zkt,{route:Ie,onClose:()=>ze(null)})}),p.jsx(Wn,{children:Oe&&p.jsx(Bkt,{route:Oe,onClose:()=>fe(null)})})]})}const LF={lat:52.1326,lon:5.2913};function GSe({code:t,size:e=18}){return t===0?p.jsx(Nht,{size:e,className:"text-yellow-500"}):t>=1&&t<=3?p.jsx(Th,{size:e,className:"text-gray-400"}):t===45||t===48?p.jsx(zct,{size:e,className:"text-gray-400"}):t>=51&&t<=67||t>=80&&t<=82?p.jsx(mq,{size:e,className:"text-blue-500"}):t>=71&&t<=77||t>=85&&t<=86?p.jsx(Kct,{size:e,className:"text-cyan-500"}):t>=95?p.jsx(Uct,{size:e,className:"text-purple-500"}):p.jsx(Th,{size:e,className:"text-gray-400"})}function qkt({degrees:t,size:e=14}){return p.jsx("div",{style:{transform:`rotate(${t+180}deg)`},className:"inline-flex",children:p.jsx(rh,{size:e,className:"text-blue-500"})})}function Kkt({data:t}){if(!t||t.length===0)return null;const e=Math.max(...t.map(r=>r.precipitation),.5),n=t.some(r=>r.precipitation>0);return p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{style:{fontSize:"0.83em"},className:"text-gray-500",children:"Neerslag 2 uur"}),!n&&p.jsx("span",{style:{fontSize:"0.83em"},className:"text-green-600 font-medium",children:"Droog"})]}),p.jsxs("div",{className:"relative h-8 bg-gray-100 rounded-lg overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 flex items-end px-0.5",children:t.map((r,i)=>{const s=r.precipitation/e*100,o=r.precipitation>2?"bg-blue-600":r.precipitation>.5?"bg-blue-500":r.precipitation>0?"bg-blue-400":"bg-transparent";return p.jsx("div",{className:"flex-1 mx-px",children:p.jsx("div",{className:`w-full rounded-t transition-all ${o}`,style:{height:`${Math.max(s,r.precipitation>0?8:0)}%`}})},i)})}),p.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between px-1 text-gray-400",style:{fontSize:"0.67em"},children:[p.jsx("span",{children:"Nu"}),p.jsx("span",{children:"+1u"}),p.jsx("span",{children:"+2u"})]})]})]})}function Ykt({pollen:t}){const e=[{name:"Gras",value:t.grass},{name:"Berk",value:t.birch},{name:"Els",value:t.alder},{name:"Bijvoet",value:t.mugwort}].filter(i=>i.value>0).sort((i,s)=>s.value-i.value);if(e.length===0)return p.jsxs("div",{className:"flex items-center gap-1.5 text-green-600",style:{fontSize:"0.83em"},children:[p.jsx(xoe,{size:12}),p.jsx("span",{children:"Lage pollenconcentratie"})]});const n=e[0],r=n.value>=4?"text-red-500":n.value>=3?"text-orange-500":n.value>=2?"text-amber-500":"text-green-600";return p.jsxs("div",{className:`flex items-center gap-1.5 ${r}`,style:{fontSize:"0.83em"},children:[p.jsx(xoe,{size:12}),p.jsxs("span",{children:[n.name,": ",n.value>=4?"Zeer hoog":n.value>=3?"Hoog":n.value>=2?"Matig":"Laag"]})]})}function Xkt({hourly:t}){const e=t.slice(0,6);return e.length===0?null:p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"text-gray-500",style:{fontSize:"0.83em"},children:"Komende uren"}),p.jsx("div",{className:"flex gap-1",children:e.map((n,r)=>{const i=new Date(n.time),s=r===0;return p.jsxs("div",{className:`flex flex-col items-center p-1.5 rounded-lg flex-1 ${s?"bg-blue-100":"bg-gray-50"}`,children:[p.jsx("span",{className:"text-gray-500",style:{fontSize:"0.75em"},children:s?"Nu":`${i.getHours()}u`}),p.jsx(GSe,{code:n.weatherCode,size:14}),p.jsxs("span",{className:"font-medium",style:{fontSize:"0.83em"},children:[Math.round(n.temperature),""]})]},n.time)})})]})}function Zkt(){const t=an(_=>_.showWeatherButton),e=an(_=>_.showFontSliders),n=an(_=>_.weatherFontScale),r=an(_=>_.setWeatherFontScale),i=Ps(),s=ST(),[o,a]=Y.useState(!1),l=12*n/100,c=ST(_=>_.showBuienradar),u=ST(_=>_.setShowBuienradar);if(Y.useEffect(()=>{c&&a(!1)},[c]),Y.useEffect(()=>{if(!t)return;const _=i.position||LF;(!s.weatherData||Date.now()-s.weatherData.lastUpdated>600*1e3)&&s.fetchWeather(_.lat,_.lon)},[t,i.position?.lat]),Y.useEffect(()=>{if(!t)return;const _=setInterval(()=>{const b=i.position||LF;s.fetchWeather(b.lat,b.lon)},600*1e3);return()=>clearInterval(_)},[t,i.position?.lat]),!t)return null;const h=s.weatherData?.current,f=s.weatherData?.hourly||[],g=s.weatherData?.precipitation15min||[],y=s.weatherData?.pollen;return p.jsxs(p.Fragment,{children:[o&&p.jsx("div",{className:"fixed inset-0 z-[1099]",onClick:()=>a(!1)}),p.jsx(yt.div,{className:"fixed left-2 z-[1100] bg-white shadow-lg border border-gray-200 select-none rounded-xl",style:{top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))",width:o?"200px":"auto",maxWidth:"200px"},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},layout:!0,children:s.isLoading&&!h?p.jsxs("div",{className:"p-3 flex items-center gap-2",style:{fontSize:`${l}px`},children:[p.jsx(sht,{size:16,className:"animate-spin text-blue-500"}),p.jsx("span",{className:"text-gray-500",style:{fontSize:"1.17em"},children:"Laden..."})]}):h?p.jsxs("div",{className:"p-2.5",style:{fontSize:`${l}px`},children:[p.jsxs("button",{onClick:()=>a(!o),className:"w-full border-0 outline-none bg-transparent p-0",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(GSe,{code:h.weatherCode,size:24}),p.jsx("div",{className:"flex flex-col leading-tight",children:p.jsxs("span",{className:"font-bold text-gray-800",style:{fontSize:"1.5em"},children:[Math.round(h.temperature),""]})})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(Eoe,{size:14,className:"text-gray-400"}),p.jsx("span",{className:"text-gray-600",style:{fontSize:"1.17em"},children:Math.round(h.windSpeed)}),p.jsx(qkt,{degrees:h.windDirection,size:12})]}),p.jsx("div",{className:"ml-auto",children:o?p.jsx(GL,{size:16,className:"text-gray-400"}):p.jsx(jb,{size:16,className:"text-gray-400"})})]}),p.jsxs("div",{className:"text-gray-500 text-left mt-1",style:{fontSize:"0.92em"},children:[P6e[h.weatherCode]||"Onbekend",p.jsxs("span",{className:"text-gray-400 ml-1",children:[" ",Math.round(h.apparentTemperature),""]})]})]}),p.jsx(Wn,{children:o&&p.jsx(yt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:p.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-200/50 space-y-3",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[p.jsx(nut,{size:12,className:"text-blue-500"}),p.jsx("span",{children:"Vocht"})]}),p.jsxs("div",{className:"font-bold text-blue-600",style:{fontSize:"1.17em"},children:[h.humidity,"%"]})]}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[p.jsx(Eoe,{size:12,className:"text-gray-500"}),p.jsx("span",{children:"Windstoten"})]}),p.jsxs("div",{className:"font-bold text-gray-600",style:{fontSize:"1.17em"},children:[Math.round(h.windGusts)," km/u"]})]}),p.jsxs("div",{className:"bg-cyan-50 rounded-lg p-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[p.jsx(rh,{size:12,className:"text-cyan-500"}),p.jsx("span",{children:"Wind"})]}),p.jsx("div",{className:"font-bold text-cyan-600",style:{fontSize:"1.17em"},children:C6e(h.windDirection)})]}),p.jsxs("div",{className:"bg-purple-50 rounded-lg p-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[p.jsx(Th,{size:12,className:"text-purple-500"}),p.jsx("span",{children:"Bewolking"})]}),p.jsxs("div",{className:"font-bold text-purple-600",style:{fontSize:"1.17em"},children:[h.cloudCover,"%"]})]})]}),p.jsxs("button",{onClick:()=>u(!c),className:`w-full flex items-center gap-2 p-2 rounded-lg transition-colors border-0 cursor-pointer ${c?"bg-blue-500 hover:bg-blue-600":"bg-blue-50 hover:bg-blue-100"}`,children:[p.jsx(mq,{size:16,className:c?"text-white":"text-blue-500"}),p.jsx("span",{className:`font-medium ${c?"text-white":"text-blue-700"}`,style:{fontSize:"1.17em"},children:"Buienradar"}),p.jsx("span",{className:`ml-auto ${c?"text-blue-100":"text-blue-500"}`,style:{fontSize:"1em"},children:c?"Aan":"Uit"})]}),g.length>0&&p.jsx(Kkt,{data:g}),f.length>0&&p.jsx(Xkt,{hourly:f}),y&&p.jsx(Ykt,{pollen:y}),p.jsxs("div",{className:"text-gray-400 text-center pt-1",style:{fontSize:"0.75em"},children:["Bijgewerkt: ",new Date(s.weatherData.lastUpdated).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})]}),e&&p.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-200/50",children:[p.jsx(bq,{size:12,className:"text-gray-400"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:n,onChange:_=>r(parseInt(_.target.value)),className:"flex-1 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),p.jsxs("span",{className:"text-gray-400 w-8",style:{fontSize:"0.83em"},children:[n,"%"]})]})]})})})]}):p.jsxs("button",{onClick:()=>{const _=i.position||LF;s.fetchWeather(_.lat,_.lon)},className:"p-3 flex items-center gap-2 border-0 outline-none bg-transparent",style:{fontSize:`${l}px`},children:[p.jsx(Th,{size:18,className:"text-gray-400"}),p.jsx("span",{className:"text-gray-500",style:{fontSize:"1.17em"},children:"Weer laden"})]})})]})}function Jkt({isVisible:t,onClose:e}){const n=li(M=>M.map),r=Y.useRef(null),i=Y.useRef(null),[s,o]=Y.useState([]),[a,l]=Y.useState(0),[c,u]=Y.useState(!0),[h,f]=Y.useState(!0),[g,y]=Y.useState("normal"),[_,b]=Y.useState(70),T=g==="slow"?800:g==="normal"?500:250,A=Y.useCallback(async()=>{f(!0);try{const V=await(await fetch("https://api.rainviewer.com/public/weather-maps.json")).json(),C=[];V.radar?.past&&V.radar.past.forEach(O=>{C.push({path:O.path,time:O.time*1e3})}),V.radar?.nowcast&&V.radar.nowcast.forEach(O=>{C.push({path:O.path,time:O.time*1e3})}),o(C);const N=V.radar?.past?.length?V.radar.past.length-1:0;l(N)}catch(M){console.error("Failed to fetch radar data:",M)}finally{f(!1)}},[]);Y.useEffect(()=>{if(t){A();const M=setInterval(A,300*1e3);return()=>clearInterval(M)}},[t,A]),Y.useEffect(()=>{if(!n||!t||s.length===0)return;const M=s[a];if(!M)return;const V=`https://tilecache.rainviewer.com${M.path}/256/{z}/{x}/{y}/2/1_1.png`;if(r.current){const C=r.current.getSource();C&&(C.setUrl(V),C.refresh())}else{const C=new Gm({url:V,crossOrigin:"anonymous"}),N=new $f({source:C,opacity:_/100,zIndex:1500,properties:{name:"rain-radar-layer",title:"Buienradar"}});r.current=N,n.addLayer(N)}return()=>{}},[n,t,s,a]),Y.useEffect(()=>{r.current&&r.current.setOpacity(_/100)},[_]),Y.useEffect(()=>{!t&&r.current&&n&&(n.removeLayer(r.current),r.current=null)},[t,n]),Y.useEffect(()=>()=>{r.current&&n&&(n.removeLayer(r.current),r.current=null),i.current&&clearInterval(i.current)},[n]),Y.useEffect(()=>{if(!c||s.length===0||!t){i.current&&(clearInterval(i.current),i.current=null);return}return i.current=setInterval(()=>{l(M=>(M+1)%s.length)},T),()=>{i.current&&(clearInterval(i.current),i.current=null)}},[c,s.length,T,t]);const I=Y.useCallback(()=>{if(s.length===0||!s[a])return"--:--";const M=s[a].time,V=Date.now(),C=Math.round((M-V)/6e4),O=new Date(M).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"});return Math.abs(C)<3?`${O} (nu)`:C<0?`${O} (${C}m)`:`${O} (+${C}m)`},[s,a]),P=M=>{u(!1),l(V=>M==="prev"?V>0?V-1:s.length-1:(V+1)%s.length)};return t?p.jsx(Wn,{children:p.jsxs(yt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-4 left-2 right-2 z-[1600] bg-white/95 backdrop-blur-sm rounded-xl shadow-xl border border-gray-200",style:{maxWidth:"400px",margin:"0 auto"},children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 border-b border-gray-100",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(mq,{size:14,className:"text-blue-500"}),p.jsx("span",{className:"text-xs font-medium text-gray-700",children:h?"Laden...":I()})]}),p.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded transition-colors border-0 outline-none bg-transparent",children:p.jsx(Qr,{size:14,className:"text-gray-500"})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center gap-2",children:[p.jsxs("div",{className:"flex items-center gap-0.5",children:[p.jsx("button",{onClick:()=>P("prev"),className:"p-1.5 hover:bg-gray-100 rounded transition-colors border-0 outline-none bg-transparent",children:p.jsx(z2e,{size:14,className:"text-gray-600"})}),p.jsx("button",{onClick:()=>u(!c),className:`p-1.5 rounded transition-colors border-0 outline-none ${c?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:c?p.jsx(K2e,{size:14}):p.jsx(X2e,{size:14})}),p.jsx("button",{onClick:()=>P("next"),className:"p-1.5 hover:bg-gray-100 rounded transition-colors border-0 outline-none bg-transparent",children:p.jsx(nh,{size:14,className:"text-gray-600"})})]}),p.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[p.jsx("span",{className:"text-[9px] text-gray-400 w-6",children:"-2u"}),p.jsx("input",{type:"range",min:"0",max:Math.max(0,s.length-1),value:a,onChange:M=>{u(!1),l(parseInt(M.target.value))},className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),p.jsx("span",{className:"text-[9px] text-gray-400 w-8 text-right",children:"+30m"})]}),p.jsx("div",{className:"flex items-center gap-0.5 bg-gray-100 rounded p-0.5",children:["slow","normal","fast"].map(M=>p.jsxs("button",{onClick:()=>y(M),className:`px-1.5 py-0.5 text-[9px] rounded transition-colors border-0 outline-none ${g===M?"bg-white text-blue-600 shadow-sm":"text-gray-500 bg-transparent"}`,children:[M==="slow"?"":M==="normal"?"1":"2",""]},M))})]}),p.jsxs("div",{className:"px-3 py-1.5 flex items-center gap-2 border-t border-gray-100",children:[p.jsx("span",{className:"text-[10px] text-gray-500 w-14",children:"Dekking"}),p.jsx("input",{type:"range",min:"10",max:"100",value:_,onChange:M=>b(parseInt(M.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),p.jsxs("span",{className:"text-[10px] text-gray-500 w-8 text-right",children:[_,"%"]})]}),p.jsxs("div",{className:"px-3 pb-1.5 flex items-center justify-center gap-1.5",children:[p.jsx("span",{className:"text-[8px] text-gray-400",children:"Licht"}),p.jsxs("div",{className:"flex h-1.5 rounded overflow-hidden",children:[p.jsx("div",{className:"w-3",style:{backgroundColor:"#88D0F3"}}),p.jsx("div",{className:"w-3",style:{backgroundColor:"#32B8A4"}}),p.jsx("div",{className:"w-3",style:{backgroundColor:"#F4E61F"}}),p.jsx("div",{className:"w-3",style:{backgroundColor:"#F09D1C"}}),p.jsx("div",{className:"w-3",style:{backgroundColor:"#E12E18"}})]}),p.jsx("span",{className:"text-[8px] text-gray-400",children:"Zwaar"})]})]})}):null}const Kae={Munt:"#f59e0b",Aardewerk:"#a16207",Gesp:"#6b7280",Fibula:"#8b5cf6",Ring:"#ec4899",Speld:"#6366f1",Sieraad:"#f43f5e",Gereedschap:"#64748b",Wapen:"#ef4444",Anders:"#3b82f6"},Qkt={Munt:"M",Aardewerk:"A",Gesp:"G",Fibula:"F",Ring:"R",Speld:"S",Sieraad:"Si",Gereedschap:"Gr",Wapen:"W",Anders:"?"};function eAt(){const t=li(i=>i.map),e=yh(i=>i.vondsten),n=an(i=>i.showLocalVondsten),r=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const i=new Ol;return e.forEach(s=>{const o=new yr({geometry:new ki(Ni([s.location.lng,s.location.lat])),vondst:s}),a=Kae[s.objectType]||Kae.Anders,l=Qkt[s.objectType]||"?";o.setStyle((c,u)=>{let y=12;u>50?y=6:u>10?y=Math.max(6,12-(u-10)/10):u<2&&(y=14);const _=Math.max(8,Math.min(12,y-2));return new xn({image:new gs({radius:y,fill:new Dn({color:a}),stroke:new Mn({color:"#ffffff",width:y>8?2:1})}),text:y>=8?new pc({text:l,font:`bold ${_}px sans-serif`,fill:new Dn({color:"#ffffff"}),offsetY:1}):void 0})}),i.addFeature(o)}),r.current?r.current.setSource(i):(r.current=new Ll({source:i,zIndex:1e3,properties:{title:"Mijn Vondsten"}}),r.current.setVisible(n),t.addLayer(r.current)),()=>{r.current&&t&&(t.removeLayer(r.current),r.current=null)}},[t,e]),Y.useEffect(()=>{r.current&&r.current.setVisible(n)},[n]),null}const tAt={Mineraal:"M",Fossiel:"F",Erfgoed:"E",Monument:"Mo",Overig:""};function nAt(t){const{type:e,coordinates:n}=t,r=s=>typeof s[0]=="number"?Ni(s):s.map(r),i=r(n);switch(e){case"Point":return new ki(i);case"LineString":return new ts(i);case"Polygon":return new Pl(i);case"MultiPoint":return new u0(i);case"MultiLineString":return new _h(i);case"MultiPolygon":return new xp(i);default:return new ki(Ni(n))}}function rAt(){const t=li(i=>i.map),e=ms(i=>i.layers),n=an(i=>i.showCustomPointLayers),r=Y.useRef(new Map);return Y.useEffect(()=>{if(!t)return;const i=new Set(e.map(s=>s.id));return r.current.forEach((s,o)=>{i.has(o)||(t.removeLayer(s),r.current.delete(o))}),e.forEach(s=>{const o=new Ol;s.points.forEach(l=>{let c;const u=l.geometry&&l.geometry.type!=="Point";l.geometry?c=nAt(l.geometry):c=new ki(Ni(l.coordinates));const h=new yr({geometry:c,layerType:"customPoint",customPoint:l,customLayerId:s.id,customLayerName:s.name,customLayerColor:s.color}),f=tAt[l.category]||l.category.charAt(0).toUpperCase();if(u){const g=l.geometry.type;h.setStyle(()=>g==="Polygon"||g==="MultiPolygon"?new xn({fill:new Dn({color:s.color+"40"}),stroke:new Mn({color:s.color,width:2})}):g==="LineString"||g==="MultiLineString"?new xn({stroke:new Mn({color:s.color,width:3})}):new xn({image:new gs({radius:8,fill:new Dn({color:s.color}),stroke:new Mn({color:"#ffffff",width:2})})}))}else h.setStyle((g,y)=>{let A=12;y>50?A=6:y>10?A=Math.max(6,12-(y-10)/10):y<2&&(A=14);const I=Math.max(8,Math.min(12,A-2));return new xn({image:new gs({radius:A,fill:new Dn({color:s.color}),stroke:new Mn({color:"#ffffff",width:A>8?2:1})}),text:A>=8?new pc({text:f,font:`bold ${I}px sans-serif`,fill:new Dn({color:"#ffffff"}),offsetY:1}):void 0})});o.addFeature(h)});const a=r.current.get(s.id);if(a)a.setSource(o),a.setVisible(n&&s.visible);else{const l=new Ll({source:o,zIndex:950,properties:{title:s.name,customPointLayerId:s.id},visible:n&&s.visible});t.addLayer(l),r.current.set(s.id,l)}}),()=>{r.current.forEach(s=>{t&&t.removeLayer(s)}),r.current.clear()}},[t,e,n]),null}function iAt(){const{createLayerModalOpen:t,closeCreateLayerModal:e}=gr(),{addLayer:n}=ms(),r=an(),[i,s]=Y.useState(""),[o,a]=Y.useState([...Km]),[l,c]=Y.useState(""),u=14*r.fontScale/100,h=()=>{const b=l.trim();b&&!o.includes(b)&&(a([...o,b]),c(""))},f=b=>{a(o.filter(T=>T!==b))},g=b=>{o.includes(b)?a(o.filter(T=>T!==b)):a([...o,b])},y=()=>{i.trim()&&(n(i.trim(),o),s(""),a([...Km]),c(""),e())},_=()=>{s(""),a([...Km]),c(""),e()};return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:_}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(_c,{size:18}),p.jsx("span",{className:"font-medium",children:"Nieuwe laag"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:r.fontScale,onChange:b=>r.setFontScale(parseInt(b.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${r.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:_,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(Qr,{size:18})})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{fontSize:`${u}px`},children:[p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam van de laag"}),p.jsx("input",{type:"text",value:i,onChange:b=>s(b.target.value),placeholder:"bijv. Vakantie Frankrijk 2026",className:"w-full px-3 py-2 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},autoFocus:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Categorien"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Km.map(b=>p.jsx("button",{onClick:()=>g(b),className:`px-3 py-1 rounded-full transition-colors border-0 outline-none ${o.includes(b)?"bg-orange-500 text-white":"bg-white text-gray-600 hover:bg-blue-50"}`,style:{fontSize:"0.9em"},children:b},b))})]}),o.filter(b=>!Km.includes(b)).length>0&&p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Eigen categorien"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:o.filter(b=>!Km.includes(b)).map(b=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("button",{onClick:()=>g(b),className:"px-3 py-1 rounded-l-full bg-orange-500 text-white hover:bg-orange-600 transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:b}),p.jsx("button",{onClick:()=>f(b),className:"px-2 py-1 rounded-r-full bg-orange-600 text-white hover:bg-orange-700 transition-colors border-0 outline-none",title:"Verwijder categorie",children:p.jsx(Ah,{size:12})})]},b))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Eigen categorie toevoegen"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"bijv. Grot, Bron, ...",className:"flex-1 px-3 py-2 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},onKeyDown:b=>b.key==="Enter"&&h()}),p.jsx("button",{onClick:h,disabled:!l.trim(),className:"px-3 py-2 bg-white hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors border-0 outline-none text-gray-600",children:p.jsx(Tc,{size:20})})]})]})]}),p.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${u}px`},children:[p.jsx("button",{onClick:_,className:"flex-1 px-4 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none text-gray-600",style:{fontSize:"1em"},children:"Annuleren"}),p.jsx("button",{onClick:y,disabled:!i.trim(),className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Aanmaken"})]})]})]})})}const USe=200,sAt=.7;async function oAt(t,e=USe){return new Promise((n,r)=>{const i=new Image,s=document.createElement("canvas"),o=s.getContext("2d");i.onload=()=>{let a=i.width,l=i.height;a>l?a>e&&(l=Math.round(l*e/a),a=e):l>e&&(a=Math.round(a*e/l),l=e),s.width=a,s.height=l,o?.drawImage(i,0,0,a,l),s.toBlob(c=>{c?n(c):r(new Error("Failed to create blob from canvas"))},"image/jpeg",sAt)},i.onerror=()=>r(new Error("Failed to load image")),i.src=URL.createObjectURL(t)})}function aAt(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{typeof r.result=="string"?e(r.result):n(new Error("Failed to convert blob to base64"))},r.onerror=()=>n(new Error("Failed to read blob")),r.readAsDataURL(t)})}async function lAt(t){const e=await oAt(t,USe),n=await aAt(e);return{thumbnailBlob:e,thumbnailBase64:n}}function cAt(){return`photo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}const DF=5;function uAt({photos:t,onAddPhoto:e,onRemovePhoto:n,disabled:r}){const i=Y.useRef(null),s=Y.useRef(null),o=async l=>{const c=l.target.files;if(!c||c.length===0)return;const u=DF-t.length,h=Array.from(c).slice(0,u);for(const f of h)try{const{thumbnailBase64:g}=await lAt(f),y={id:cAt(),thumbnailBase64:g,createdAt:new Date().toISOString(),pendingUpload:!0};e(y)}catch(g){console.error("Failed to process image:",g)}l.target.value=""},a=t.length<DF;return p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"block font-medium text-gray-700",style:{fontSize:"0.9em"},children:["Foto's (",t.length,"/",DF,")"]}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.map(l=>p.jsxs("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden bg-gray-100 border border-gray-200",children:[p.jsx("img",{src:l.thumbnailUrl||l.thumbnailBase64,alt:"Foto",className:"w-full h-full object-cover"}),!r&&p.jsx("button",{type:"button",onClick:()=>n(l.id),className:"absolute top-0.5 right-0.5 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-0 outline-none",children:p.jsx(Qr,{size:12,className:"text-white"})}),l.pendingUpload&&p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-orange-500/80 text-white text-center py-0.5",style:{fontSize:"0.6em"},children:"Wacht..."})]},l.id)),a&&!r&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{type:"button",onClick:()=>s.current?.click(),className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 hover:border-orange-400 hover:bg-orange-50 flex flex-col items-center justify-center gap-1 transition-colors bg-transparent outline-none",title:"Maak foto",children:[p.jsx(zL,{size:20,className:"text-gray-400"}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.6em"},children:"Camera"})]}),p.jsxs("button",{type:"button",onClick:()=>i.current?.click(),className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 hover:border-orange-400 hover:bg-orange-50 flex flex-col items-center justify-center gap-1 transition-colors bg-transparent outline-none",title:"Kies foto",children:[p.jsx(Aut,{size:20,className:"text-gray-400"}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.6em"},children:"Gallerij"})]})]})]}),p.jsx("input",{ref:s,type:"file",accept:"image/*",capture:"environment",onChange:o,className:"hidden"}),p.jsx("input",{ref:i,type:"file",accept:"image/*",multiple:!0,onChange:o,className:"hidden"})]})}function hAt(){const{addPointModalOpen:t,addPointModalLayerId:e,addPointModalLocation:n,closeAddPointModal:r}=gr(),{addPoint:i,getLayer:s}=ms(),o=an(),[a,l]=Y.useState(""),[c,u]=Y.useState(""),[h,f]=Y.useState(""),[g,y]=Y.useState([]),_=e?s(e):null,b=14*o.fontScale/100,T=()=>{!a.trim()||!e||!n||(i(e,{name:a.trim(),category:"Overig",notes:c.trim(),url:h.trim()||void 0,coordinates:[n.lng,n.lat],photos:g.length>0?g:void 0}),l(""),u(""),f(""),y([]),r())},A=()=>{l(""),u(""),f(""),y([]),r()};return _?p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:A}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(jo,{size:18}),p.jsx("span",{className:"font-medium",children:"Punt toevoegen"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:o.fontScale,onChange:I=>o.setFontScale(parseInt(I.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${o.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:A,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(Qr,{size:18})})]})]}),p.jsx("div",{className:"px-4 py-1.5",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:_.color}}),p.jsx("span",{className:"text-sm text-gray-600",children:_.name})]})}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",style:{fontSize:`${b}px`},children:[p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam *"}),p.jsx("input",{type:"text",value:a,onChange:I=>l(I.target.value),className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},autoFocus:!0})]}),p.jsx(uAt,{photos:g,onAddPhoto:I=>y([...g,I]),onRemovePhoto:I=>y(g.filter(P=>P.id!==I))}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Notities"}),p.jsx("textarea",{value:c,onChange:I=>u(I.target.value),placeholder:"Beschrijving, tips, opmerkingen...",rows:2,className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors resize-none",style:{fontSize:"1em"}})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Link"}),p.jsx("input",{type:"url",value:h,onChange:I=>f(I.target.value),placeholder:"https://...",className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"}})]})]}),p.jsxs("div",{className:"p-3 flex gap-3",style:{fontSize:`${b}px`},children:[p.jsx("button",{onClick:A,className:"flex-1 px-4 py-1.5 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none text-gray-600",style:{fontSize:"1em"},children:"Annuleren"}),p.jsx("button",{onClick:T,disabled:!a.trim(),className:"flex-1 px-4 py-1.5 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Toevoegen"})]})]})]})}):null}function dAt(){const{layerManagerModalOpen:t,closeLayerManagerModal:e,openCreateLayerModal:n,openLayerDashboard:r}=gr(),{layers:i,removeLayer:s,toggleVisibility:o,toggleArchived:a,exportLayerAsGeoJSON:l,importLayerFromGeoJSON:c}=ms(),u=an(),h=14*u.fontScale/100,[f,g]=Y.useState(null),[y,_]=Y.useState(null),[b,T]=Y.useState(null),[A,I]=Y.useState(!1),P=i.filter(U=>!U.archived),M=i.filter(U=>U.archived),V=A?M:P,C=U=>{y===U?(s(U),_(null)):(_(U),setTimeout(()=>_(null),3e3))},N=U=>{l(U)},O=async U=>{const he=U.target.files?.[0];if(he){try{const Ie=await he.text(),ze=c(Ie);ze.success||(T(ze.error||"Import mislukt"),setTimeout(()=>T(null),3e3))}catch{T("Kon bestand niet lezen"),setTimeout(()=>T(null),3e3)}U.target.value=""}},L=()=>{g(null),_(null),T(null),I(!1),e()},F=U=>{r(U)},G=()=>{L(),n()};return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:L}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(_c,{size:18}),p.jsx("span",{className:"font-medium",children:"Mijn Lagen beheren"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:u.fontScale,onChange:U=>u.setFontScale(parseInt(U.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${u.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:L,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(Qr,{size:18})})]})]}),p.jsxs("div",{className:"flex border-b border-gray-100",children:[p.jsxs("button",{onClick:()=>I(!1),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none ${A?"text-gray-500 hover:text-gray-700 hover:bg-gray-50":"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50"}`,children:["Actief (",P.length,")"]}),p.jsxs("button",{onClick:()=>I(!0),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none flex items-center justify-center gap-1 ${A?"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[p.jsx(j2e,{size:14}),"Archief (",M.length,")"]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${h}px`},children:[V.length===0?p.jsx("div",{className:"p-8 text-center text-gray-500",children:A?p.jsx("p",{style:{fontSize:"1em"},children:"Geen gearchiveerde lagen."}):p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"mb-4",style:{fontSize:"1em"},children:"Je hebt nog geen eigen lagen."}),p.jsxs("button",{onClick:G,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:[p.jsx(Tc,{size:16,className:"inline mr-2"}),"Nieuwe laag aanmaken"]})]})}):p.jsx("div",{className:"divide-y divide-gray-100",children:V.map(U=>p.jsx(pAt,{layer:U,isExpanded:f===U.id,onToggleExpand:()=>g(f===U.id?null:U.id),onToggleVisibility:()=>o(U.id),onToggleArchived:()=>a(U.id),onOpenDashboard:()=>F(U.id),onExport:()=>N(U.id),onDelete:()=>C(U.id),confirmDelete:y===U.id,onRename:he=>ms.getState().updateLayer(U.id,{name:he}),onChangeColor:he=>ms.getState().updateLayer(U.id,{color:he})},U.id))}),b&&p.jsx("div",{className:"mx-4 my-2 p-3 bg-red-50 text-red-700 text-sm rounded-lg",children:b})]}),p.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${h}px`},children:[p.jsxs("label",{className:"flex-1 px-4 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors cursor-pointer flex items-center justify-center gap-2 border-0 outline-none text-gray-600",children:[p.jsx(iP,{size:16}),p.jsx("span",{style:{fontSize:"1em"},children:"Importeren"}),p.jsx("input",{type:"file",accept:".geojson,.json",onChange:O,className:"hidden"})]}),p.jsxs("button",{onClick:G,className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",style:{fontSize:"1em"},children:[p.jsx(Tc,{size:16}),p.jsx("span",{children:"Nieuwe laag"})]})]})]})]})})}const fAt=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"];function pAt({layer:t,isExpanded:e,onToggleExpand:n,onToggleVisibility:r,onToggleArchived:i,onOpenDashboard:s,onExport:o,onDelete:a,confirmDelete:l,onRename:c,onChangeColor:u}){const[h,f]=Y.useState(!1),[g,y]=Y.useState(t.name),[_,b]=Y.useState(!1),T=Y.useRef(null);Y.useEffect(()=>{h&&T.current&&(T.current.focus(),T.current.select())},[h]);const A=()=>{y(t.name),f(!0)},I=()=>{const N=g.trim();N&&N!==t.name&&c(N),f(!1)},P=()=>{y(t.name),f(!1)},M=N=>{N.key==="Enter"?I():N.key==="Escape"&&P()},V=t.points.filter(N=>N.status==="completed").length,C=t.points.length;return p.jsxs("div",{className:"bg-white",children:[p.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[p.jsx("button",{onClick:n,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors border-0 outline-none bg-transparent",children:e?p.jsx(jb,{size:16}):p.jsx(nh,{size:16})}),p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>b(!_),className:"w-5 h-5 rounded-full flex-shrink-0 border-2 border-white shadow-sm hover:scale-110 transition-transform cursor-pointer",style:{backgroundColor:t.color},title:"Kleur wijzigen"}),_&&p.jsx("div",{className:"absolute top-7 left-0 z-50 bg-white rounded-lg shadow-lg p-2 flex flex-wrap gap-1 w-24",children:fAt.map(N=>p.jsx("button",{onClick:()=>{u(N),b(!1)},className:`w-5 h-5 rounded-full border-2 hover:scale-110 transition-transform ${N===t.color?"border-gray-800":"border-white"}`,style:{backgroundColor:N}},N))})]}),h?p.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[p.jsx("input",{ref:T,type:"text",value:g,onChange:N=>y(N.target.value),onKeyDown:M,onBlur:I,className:"flex-1 px-2 py-1 text-gray-800 font-medium bg-orange-50 rounded outline-none focus:ring-2 focus:ring-orange-400"}),p.jsx("button",{onClick:I,className:"p-1 text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Opslaan",children:p.jsx(Ip,{size:16})})]}):p.jsxs("button",{onClick:s,className:"flex-1 min-w-0 text-left border-0 outline-none bg-transparent hover:bg-orange-50 rounded px-2 py-1 -ml-2 transition-colors",title:"Bekijk dashboard",children:[p.jsx("div",{className:"font-medium text-gray-800 truncate hover:text-orange-600",children:t.name}),p.jsx("div",{className:"text-xs text-gray-500",children:C>0?p.jsxs("span",{className:V===C?"text-green-600":"",children:[V,"/",C," voltooid"]}):"Geen punten"})]}),!h&&p.jsx("button",{onClick:A,className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam bewerken",children:p.jsx(Wd,{size:16})}),p.jsx("button",{onClick:s,className:"p-2 text-orange-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none",title:"Open dashboard",children:p.jsx(H2e,{size:18})}),!t.archived&&p.jsx("button",{onClick:r,className:`p-2 rounded transition-colors border-0 outline-none ${t.visible?"text-blue-500 hover:bg-blue-50":"text-gray-400 hover:bg-gray-100"}`,title:t.visible?"Verbergen":"Tonen",children:t.visible?p.jsx(NA,{size:18}):p.jsx(n5,{size:18})}),p.jsx("button",{onClick:i,className:`p-2 rounded transition-colors border-0 outline-none ${t.archived?"text-green-500 hover:text-green-600 hover:bg-green-50":"text-gray-400 hover:text-amber-600 hover:bg-amber-50"}`,title:t.archived?"Herstellen":"Archiveren",children:t.archived?p.jsx(xct,{size:18}):p.jsx(j2e,{size:18})}),p.jsx("button",{onClick:o,className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Exporteren als GeoJSON",children:p.jsx(MA,{size:18})}),p.jsx("button",{onClick:a,className:`p-2 rounded transition-colors border-0 outline-none ${l?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:l?"Klik nogmaals om te verwijderen":"Verwijderen",children:p.jsx(Ah,{size:18})})]}),p.jsx(Wn,{children:e&&p.jsx(yt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:p.jsxs("div",{className:"px-4 pb-3 pl-12 space-y-2",children:[t.categories.length>0&&p.jsx("div",{className:"flex flex-wrap gap-1",children:t.categories.map(N=>p.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:N},N))}),t.points.length>0&&p.jsxs("div",{className:"text-xs text-gray-500 space-y-1 max-h-32 overflow-y-auto",children:[t.points.slice(0,5).map(N=>p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("span",{className:`font-medium ${N.status==="completed"?"text-green-600 line-through":N.status==="skipped"?"text-gray-400 line-through":"text-gray-700"}`,children:N.name})},N.id)),t.points.length>5&&p.jsxs("div",{className:"text-gray-400",children:["...en ",t.points.length-5," meer"]})]}),p.jsxs("div",{className:"text-xs text-gray-400",children:["Aangemaakt: ",new Date(t.createdAt).toLocaleDateString("nl-NL")]})]})})})]})}function mAt(){const{layerDashboardOpen:t,layerDashboardLayerId:e,closeLayerDashboard:n}=gr(),{getLayer:r,setPointStatus:i,updatePoint:s,removePoint:o}=ms(),a=an(),[l,c]=Y.useState("all"),[u,h]=Y.useState(null),[f,g]=Y.useState(""),[y,_]=Y.useState(null),b=e?r(e):null,T=14*a.fontScale/100;if(!b)return null;const A=b.points.filter(F=>l==="all"?!0:F.status===l),I=b.points.length,P=b.points.filter(F=>F.status==="completed").length,M=b.points.filter(F=>F.status==="todo").length,V=b.points.filter(F=>F.status==="skipped").length,C=(F,G)=>{i(b.id,F,G)},N=F=>{s(b.id,F,{notes:f}),h(null),g("")},O=F=>{y===F?(o(b.id,F),_(null)):(_(F),setTimeout(()=>_(null),3e3))},L=()=>{h(null),_(null),n()};return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:L}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white/50",style:{backgroundColor:b.color}}),p.jsx("span",{className:"font-medium truncate",children:b.name})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:a.fontScale,onChange:F=>a.setFontScale(parseInt(F.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${a.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:L,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(Qr,{size:18})})]})]}),p.jsxs("div",{className:"px-4 py-2 bg-orange-50 flex items-center justify-between text-sm",children:[p.jsxs("span",{className:"text-orange-800 font-medium",children:[P,"/",I," voltooid"]}),p.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[p.jsxs("span",{className:"text-orange-600",children:[M," te doen"]}),V>0&&p.jsxs("span",{className:"text-gray-500",children:[V," overgeslagen"]})]})]}),p.jsx("div",{className:"flex border-b border-gray-100",children:["all","todo","completed","skipped"].map(F=>p.jsxs("button",{onClick:()=>c(F),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none ${l===F?"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[F==="all"&&"Alles",F==="todo"&&"Te doen",F==="completed"&&"Voltooid",F==="skipped"&&"Overgeslagen"]},F))}),p.jsx("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${T}px`},children:A.length===0?p.jsx("div",{className:"p-8 text-center text-gray-500",children:p.jsx("p",{children:"Geen punten gevonden"})}):p.jsx("div",{className:"divide-y divide-gray-100",children:A.map(F=>p.jsx("div",{className:"p-3",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsxs("div",{className:"flex flex-col gap-1 pt-0.5",children:[p.jsx("button",{onClick:()=>C(F.id,F.status==="completed"?"todo":"completed"),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none transition-colors ${F.status==="completed"?"bg-green-100 hover:bg-green-200":"bg-gray-100 hover:bg-green-100"}`,title:F.status==="completed"?"Markeer als te doen":"Markeer als voltooid",children:p.jsx(Ip,{size:14,className:F.status==="completed"?"text-green-600":"text-gray-400"})}),p.jsx("button",{onClick:()=>C(F.id,F.status==="skipped"?"todo":"skipped"),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none transition-colors ${F.status==="skipped"?"bg-gray-200 hover:bg-gray-300":"bg-gray-100 hover:bg-gray-200"}`,title:F.status==="skipped"?"Markeer als te doen":"Overslaan",children:p.jsx(Ect,{size:14,className:F.status==="skipped"?"text-gray-600":"text-gray-400"})})]}),F.photos&&F.photos.length>0&&p.jsxs("div",{className:"relative flex-shrink-0",children:[p.jsx("img",{src:F.photos[0].thumbnailUrl||F.photos[0].thumbnailBase64,alt:"Foto",className:"w-12 h-12 object-cover rounded border border-gray-200"}),F.photos.length>1&&p.jsxs("span",{className:"absolute -bottom-1 -right-1 bg-orange-500 text-white text-[9px] px-1 rounded-full",children:["+",F.photos.length-1]})]}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`font-medium truncate ${F.status==="completed"?"text-green-700 line-through":F.status==="skipped"?"text-gray-400 line-through":"text-gray-800"}`,children:F.name}),F.sourceLayer&&p.jsxs("span",{className:"text-xs text-gray-400 truncate",children:["via ",F.sourceLayer]})]}),u===F.id?p.jsxs("div",{className:"mt-2",children:[p.jsx("textarea",{value:f,onChange:G=>g(G.target.value),placeholder:"Notities...",rows:2,className:"w-full px-2 py-1 bg-white rounded border-0 outline-none hover:bg-blue-50 transition-colors resize-none text-sm",autoFocus:!0}),p.jsxs("div",{className:"flex gap-2 mt-1",children:[p.jsx("button",{onClick:()=>N(F.id),className:"px-2 py-1 text-xs bg-orange-500 text-white rounded hover:bg-orange-600 border-0 outline-none",children:"Opslaan"}),p.jsx("button",{onClick:()=>{h(null),g("")},className:"px-2 py-1 text-xs bg-white text-gray-600 rounded hover:bg-blue-50 border-0 outline-none",children:"Annuleren"})]})]}):F.notes?p.jsx("p",{className:"text-sm text-gray-600 mt-1",children:F.notes}):null,F.url&&p.jsxs("a",{href:F.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 mt-1",children:[p.jsx(Og,{size:12}),"Link"]})]}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("button",{onClick:()=>{h(F.id),g(F.notes)},className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded border-0 outline-none",title:"Notities bewerken",children:p.jsx(Xut,{size:14})}),p.jsx("button",{onClick:()=>{window.open(`https://www.google.com/maps/dir/?api=1&destination=${F.coordinates[1]},${F.coordinates[0]}`,"_blank")},className:"w-6 h-6 flex items-center justify-center text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded border-0 outline-none",title:"Navigeer naar",children:p.jsx(jo,{size:14})}),p.jsx("button",{onClick:()=>O(F.id),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none ${y===F.id?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:y===F.id?"Klik nogmaals":"Verwijderen",children:p.jsx(Ah,{size:14})})]})]})},F.id))})})]})]})})}function gAt(){const[t,e]=Y.useState(navigator.onLine),[n,r]=Y.useState(!1);return Y.useEffect(()=>{const i=()=>{e(!0),r(!1)},s=()=>{e(!1),r(!1)};return window.addEventListener("online",i),window.addEventListener("offline",s),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",s)}},[]),t||n?null:p.jsx(Wn,{children:p.jsx(yt.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"fixed top-0 left-0 right-0 z-[2000] bg-amber-500 text-white px-4 py-2 shadow-lg",children:p.jsxs("div",{className:"flex items-center justify-between max-w-lg mx-auto",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(tdt,{size:18}),p.jsx("span",{className:"text-sm font-medium",children:"Offline modus - Kaart werkt met gecachede data"})]}),p.jsx("button",{onClick:()=>r(!0),className:"p-1 hover:bg-white/20 rounded transition-colors border-0 outline-none bg-transparent",children:p.jsx(Qr,{size:16})})]})})})}const yAt={"zeer hoge archeologische waarde":"bg-purple-600","hoge archeologische waarde":"bg-purple-500","archeologische waarde":"bg-purple-400"},vAt={"zeer hoge archeologische waarde":"Zeer hoog","hoge archeologische waarde":"Hoog","archeologische waarde":"Waarde"};let Jx=null;function BSe(t){return Jx||(Jx=new Ll({source:new Ol,style:new xn({fill:new Dn({color:"rgba(147, 51, 234, 0.5)"}),stroke:new Mn({color:"#9333ea",width:3})}),zIndex:9999}),t.addLayer(Jx)),Jx}function _At(){Jx&&Jx.getSource()?.clear()}async function xAt(t,e){const n=await CTt(e);if(!n)return;const i=BSe(t).getSource();i?.clear();const s=n.clone();i?.addFeature(s)}function wAt({isOpen:t,onClose:e}){const n=li(Z=>Z.map),r=an(),[i,s]=Y.useState(""),[o,a]=Y.useState("all"),[l,c]=Y.useState([]),[u,h]=Y.useState(!1),[f,g]=Y.useState(!1),[y,_]=Y.useState(null),[b,T]=Y.useState(null),[A,I]=Y.useState(50),[P,M]=Y.useState(!1),[V,C]=Y.useState(!1),[N,O]=Y.useState(!1),L=Y.useRef(null),F=Y.useRef(),G=Y.useRef(null),U=13*r.fontScale/100;Y.useEffect(()=>{t&&L.current&&setTimeout(()=>L.current?.focus(),100)},[t]),Y.useEffect(()=>{if(!t)return;const Z=ne=>{G.current&&!G.current.contains(ne.target)&&e()},W=setTimeout(()=>{document.addEventListener("mousedown",Z)},100);return()=>{clearTimeout(W),document.removeEventListener("mousedown",Z)}},[t,e]),Y.useEffect(()=>{t||M(!1)},[t]),Y.useEffect(()=>{if(F.current&&clearTimeout(F.current),i.length<2){c([]),g(!1);return}return F.current=window.setTimeout(async()=>{h(!0),g(!0);try{const Z=await PTt(i,A,o);c(Z)}catch(Z){console.error("Monument search error:",Z),c([])}finally{h(!1)}},400),()=>{F.current&&clearTimeout(F.current)}},[i,o,A]);const he=async Z=>{if(!n)return;const W=n.getView();if(y===Z.id){const ne=oh(Z.extent,50);W.fit(ne,{duration:500,maxZoom:18})}else{const ne=oh(Z.extent,200);W.fit(ne,{duration:500,maxZoom:16}),await xAt(n,Z.monumentnummer),_(Z.id),T(Z.id)}},Ie=(Z,W)=>{if(W.stopPropagation(),!n)return;const ne=n.getView(),ie=oh(Z.extent,20);ne.fit(ie,{duration:500,maxZoom:18})},ze=(Z,W)=>{W.stopPropagation(),T(b===Z?null:Z)},Oe=async()=>{if(!(!n||l.length===0)){O(!0);try{const Z=l.map(Ke=>Ke.monumentnummer),W=await RTt(Z);if(W.length===0)return;const ie=BSe(n).getSource();ie?.clear();let le=Wa();W.forEach(Ke=>{const ke=Ke.clone();ie?.addFeature(ke);const be=ke.getGeometry();be&&(le=dG(le,be.getExtent()))});const xe=n.getView(),qe=oh(le,500);xe.fit(qe,{duration:500,maxZoom:14}),C(!0),_(null),console.log(` ${W.length} monumenten getoond op kaart`)}catch(Z){console.error("Error showing all monuments:",Z)}finally{O(!1)}}},fe=()=>{e()},ge=()=>{_At(),s(""),a("all"),c([]),g(!1),_(null),T(null),I(50),C(!1),e()},Se=Z=>{if(!i||i.length<2)return Z;const W=i.toLowerCase().split(/\s+/).filter(ie=>ie.length>=2);let ne=Z;return W.forEach(ie=>{const le=ie.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),xe=new RegExp(`(${le})`,"gi");ne=ne.replace(xe,'<mark class="bg-yellow-200 px-0.5">$1</mark>')}),ne};return t?p.jsx(Wn,{children:p.jsxs(yt.div,{ref:G,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-[1701] bg-white rounded-t-2xl shadow-2xl overflow-hidden flex flex-col",style:{height:P?"85vh":"38vh"},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white cursor-pointer select-none",onClick:()=>M(!P),children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(W2e,{size:16}),p.jsx("span",{className:"font-medium text-sm",children:"Zoek monumenten"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(B2e,{size:20,className:"opacity-70"}),p.jsx("button",{onClick:Z=>{Z.stopPropagation(),fe()},className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-2",children:p.jsx(Qr,{size:16})})]})]}),p.jsx("div",{className:"p-2 border-b border-gray-100 space-y-2",children:p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx(nv,{size:16,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),p.jsx("input",{ref:L,type:"text",value:i,onChange:Z=>{s(Z.target.value),_(null),T(null),C(!1)},placeholder:"bouwvoor, scherven...",className:"w-full pl-8 pr-8 py-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-purple-500 text-sm"}),i&&p.jsx("button",{onClick:()=>{s(""),_(null),T(null),C(!1)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 border-0 outline-none bg-transparent",children:p.jsx(Qr,{size:14})})]}),p.jsx("select",{value:o,onChange:Z=>{a(Z.target.value),_(null),T(null),C(!1)},className:"py-1.5 px-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-purple-500 text-sm text-gray-700 w-28",children:Object.entries(hK).map(([Z,{name:W}])=>p.jsx("option",{value:Z,children:W},Z))})]})}),p.jsxs("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${U}px`},children:[u&&p.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Zoeken..."}),!u&&f&&l.length===0&&p.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Geen resultaten"}),!u&&l.length>0&&p.jsxs("div",{className:"divide-y divide-gray-100",children:[p.jsxs("div",{className:"px-3 py-1.5 bg-gray-50 text-xs text-gray-500 flex justify-between items-center gap-2",children:[p.jsxs("span",{children:[l.length,l.length>=A?"+":""," gevonden"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[l.length>=A&&p.jsx("button",{onClick:()=>I(A+50),className:"text-purple-600 hover:text-purple-700 border-0 outline-none bg-transparent",children:"Meer laden"}),p.jsxs("button",{onClick:Oe,disabled:N,className:`flex items-center gap-1 px-2 py-1 rounded text-white border-0 outline-none transition-colors ${V?"bg-green-500 hover:bg-green-600":"bg-purple-500 hover:bg-purple-600"} ${N?"opacity-50 cursor-wait":""}`,children:[N?p.jsx(rP,{size:12,className:"animate-spin"}):p.jsx(kw,{size:12}),p.jsx("span",{children:V?"Getoond":"Toon alle"})]})]})]}),l.map(Z=>p.jsxs("div",{className:`transition-colors ${y===Z.id?"bg-purple-50":"bg-transparent"}`,children:[p.jsx("button",{onClick:()=>he(Z),className:"w-full text-left px-3 py-2 hover:bg-purple-50 transition-colors border-0 outline-none bg-transparent",children:p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Z.toponiem}),p.jsx("p",{className:"text-xs text-purple-600 mt-0.5",children:Z.periode})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx("span",{className:`px-1.5 py-0.5 rounded text-white text-[9px] ${yAt[Z.kwaliteitswaarde]||"bg-gray-500"}`,children:vAt[Z.kwaliteitswaarde]||"AMK"}),y===Z.id&&p.jsx("button",{onClick:W=>Ie(Z,W),className:"p-1 bg-purple-500 hover:bg-purple-600 text-white rounded transition-colors border-0 outline-none",title:"Zoom in",children:p.jsx(sdt,{size:12})})]})]})}),y===Z.id&&p.jsxs("div",{className:"px-3 pb-2",children:[p.jsxs("button",{onClick:W=>ze(Z.id,W),className:"flex items-center gap-1 text-xs text-purple-600 hover:text-purple-700 border-0 outline-none bg-transparent mb-1",children:[b===Z.id?p.jsx(GL,{size:14}):p.jsx(jb,{size:14}),b===Z.id?"Minder":"Omschrijving"]}),b===Z.id&&p.jsx("div",{className:"text-xs text-gray-700 bg-gray-50 rounded p-2 max-h-32 overflow-y-auto whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:Se(Z.omschrijving)}})]})]},Z.id))]}),!u&&!f&&p.jsx("div",{className:"p-3 text-xs text-gray-500",children:"Zoek op trefwoorden in 13.000+ AMK monumenten"})]}),(y||i)&&p.jsx("div",{className:"p-2 border-t border-gray-100",children:p.jsx("button",{onClick:ge,className:"w-full py-2 text-sm text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:"Wis zoekopdracht en highlight"})})]})}):null}const bAt=["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"];function EAt(){const t=Y.useRef(null),{keyword:e,isActive:n,totalCount:r,filteredCount:i,setKeyword:s,setActive:o,clearFilter:a}=DSe(),l=gr(_=>_.monumentFilterOpen),c=gr(_=>_.toggleMonumentFilter),u=gr(_=>_.closeMonumentFilter),h=Ws(_=>_.visible),f=bAt.some(_=>h[_]);Y.useEffect(()=>{l&&t.current&&setTimeout(()=>t.current?.focus(),100)},[l]);const g=()=>{e.length>=2&&o(!n)},y=e.length>=2;return f?p.jsxs("div",{children:[p.jsx(yt.button,{onClick:c,className:`fixed bottom-[116px] left-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${n?"bg-purple-500 text-white":"bg-white/80 hover:bg-white/90 text-purple-600"}`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Monument filter",children:p.jsx(vq,{size:20})}),p.jsx(Wn,{children:l&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 z-[800]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:u}),p.jsxs(yt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed bottom-[116px] left-[56px] z-[801] bg-white/95 rounded-xl shadow-lg backdrop-blur-sm overflow-hidden",children:[p.jsx("div",{className:"px-3 py-1.5 bg-purple-500",children:p.jsx("span",{className:"font-medium text-white text-xs",children:"Monument Filter"})}),p.jsxs("div",{className:"p-2 space-y-1.5",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{ref:t,type:"text",value:e,onChange:_=>s(_.target.value),placeholder:"Filter...",className:"w-24 px-2 py-1.5 text-sm bg-gray-100 rounded border-0 outline-none focus:ring-2 focus:ring-purple-400"}),p.jsx("button",{onClick:g,disabled:!y,className:`relative w-10 h-5 rounded-full transition-colors border-0 outline-none ${n?"bg-purple-500":y?"bg-gray-300":"bg-gray-200 cursor-not-allowed"}`,title:n?"Filter uit":"Filter aan",children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform ${n?"translate-x-5":"translate-x-0.5"}`})})]}),r>0&&p.jsx("div",{className:"text-xs text-gray-500 text-center",children:n?p.jsxs("span",{className:"text-purple-600 font-medium",children:[i," van ",r]}):p.jsxs("span",{children:[r," monumenten"]})})]})]})]})})]}):null}function SAt({isOpen:t,onClose:e}){return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 bg-black/40 z-[2002]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsx(yt.div,{className:"fixed inset-x-4 top-4 bottom-4 z-[2003] flex items-center justify-center pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:p.jsxs(yt.div,{className:"bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col w-full max-w-lg max-h-full pointer-events-auto",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.2},onClick:n=>n.stopPropagation(),children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 flex-shrink-0",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(kw,{size:18,className:"text-white"}),p.jsx("span",{className:"font-medium text-white",children:"Handleiding"})]}),p.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:18,className:"text-white"})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[p.jsx("section",{children:p.jsxs("p",{className:"text-sm text-gray-600",children:["DetectorApp.nl is d gratis kaartapplicatie voor metaaldetectoristen, fossielen- en mineralenzoekers en amateur-archeologen. Met ",p.jsx("strong",{children:"70+ kaartlagen"}),", GPS tracking, cloud sync en uitgebreid vondstenbeheer."]})}),p.jsxs(Gu,{title:"Schermindeling",icon:p.jsx(kw,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"De knoppen zijn verdeeld over het scherm voor optimaal gebruik:"}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(ZR,{title:"Linksboven",items:[{icon:p.jsx(Th,{size:14}),name:"Weerwidget",desc:"Actueel weer en buienradar"},{icon:p.jsx(Ld,{size:14}),name:"Meten",desc:"Afstanden meten op de kaart"},{icon:p.jsx(Wd,{size:14}),name:"Tekenen",desc:"Punten, lijnen en vlakken tekenen"},{icon:p.jsx(OA,{size:14}),name:"Exporteren",desc:"Kaart opslaan als afbeelding"}]}),p.jsx(ZR,{title:"Rechtsboven",items:[{icon:p.jsx(r5,{size:14}),name:"Menu",desc:"Instellingen en opties"},{icon:p.jsx(gq,{size:14}),name:"Kompas",desc:"Verschijnt bij gedraaide kaart"},{icon:p.jsx(kw,{size:14}),name:"Kaartlagen",desc:"Lagen aan/uit zetten"}]}),p.jsx(ZR,{title:"Rechtsonder",items:[{icon:p.jsx(rh,{size:14}),name:"GPS",desc:"Je locatie volgen"},{icon:p.jsx(Tc,{size:14}),name:"Zoom",desc:"In- en uitzoomen"}]}),p.jsx(ZR,{title:"Onderkant",items:[{icon:p.jsx(nv,{size:14}),name:"Zoekbalk",desc:"Zoek locaties en adressen"},{icon:p.jsx(_c,{size:14}),name:"Legenda",desc:"Actieve lagen bekijken"}]})]})]}),p.jsxs(Gu,{title:"Menu opties",icon:p.jsx(r5,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Het hamburger menu (rechtsboven) bevat belangrijke functies:"}),p.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 space-y-2",children:[p.jsx(jF,{icon:p.jsx(s5,{size:14}),name:"Instellingen",desc:"App configuratie aanpassen"}),p.jsx(jF,{icon:p.jsx(nv,{size:14}),name:"Monument zoeken",desc:"Zoek specifieke monumenten"}),p.jsx(jF,{icon:p.jsx(boe,{size:14}),name:"Info",desc:"Over de app"})]}),p.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-xl",children:[p.jsxs("h4",{className:"text-xs font-semibold text-blue-800 mb-2 flex items-center gap-1",children:[p.jsx(NA,{size:12}),"Knoppen aan/uit zetten"]}),p.jsx("p",{className:"text-xs text-blue-700 mb-2",children:"In het menu kun je knoppen tonen of verbergen om je scherm overzichtelijk te houden:"}),p.jsxs("ul",{className:"text-xs text-blue-700 space-y-1 ml-4 list-disc",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Vondst registreren"})," - Knop voor vondsten vastleggen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Route opnemen"})," - Knop voor routes vastleggen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Eigen lagen"})," - Knop voor aangepaste puntenlagen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Weer"})," - Weerwidget linksboven"]})]})]})]}),p.jsxs(Gu,{title:"GPS Locatie",icon:p.jsx(rh,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"De GPS-knop heeft drie standen (Google Maps stijl):"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[p.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm",children:p.jsx(rh,{size:16,className:"text-gray-400"})}),p.jsxs("div",{children:[p.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Uit"}),p.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"- GPS niet actief"})]})]}),p.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded-lg",children:[p.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-500 rounded-lg shadow-sm",children:p.jsx(rh,{size:16,className:"text-white"})}),p.jsxs("div",{children:[p.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Volgen"}),p.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"- Kaart gecentreerd op je locatie"})]})]}),p.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded-lg",children:[p.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-green-500 rounded-lg shadow-sm",children:p.jsx(rh,{size:16,className:"text-white"})}),p.jsxs("div",{children:[p.jsx("span",{className:"text-xs font-medium text-green-700",children:"Rijmodus"}),p.jsx("span",{className:"text-xs text-green-600 ml-1",children:"- Kaart draait met je mee"})]})]})]})]}),p.jsxs(Gu,{title:"Kaartlagen (70+)",children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"De app bevat uitgebreide informatielagen:"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(km,{name:"Archeologie",items:["AMK per periode","IKAW","Archeo Onderzoeken","Essen"]}),p.jsx(km,{name:"Prehistorie",items:["Hunebedden","Grafheuvels","Terpen","Paleokaarten"]}),p.jsx(km,{name:"Romeins",items:["Romeinse wegen","Forten","Limesweg"]}),p.jsx(km,{name:"WOII & Militair",items:["Bunkers","Slagvelden","Vliegvelden","Linies"]}),p.jsx(km,{name:"Hoogtekaarten",items:["AHN Hillshade","Multi-Hillshade","Hoogtekaart Kleur"]}),p.jsx(km,{name:"Bodem & Terrein",items:["Bodemkaart","Geomorfologie","Veengebieden"]}),p.jsx(km,{name:"Fossielen",items:["Fossiel hotspots","Mineralen","Goudrivieren"]}),p.jsx(km,{name:"Erfgoed",items:["Rijksmonumenten","Kastelen","Runes","Kerken"]})]}),p.jsx("p",{className:"text-xs text-gray-500 mt-2 italic",children:"Tip: Klik op de kaart om popup-informatie te zien over lagen op die locatie."})]}),p.jsx(Gu,{title:"Meten en Tekenen",icon:p.jsx(Ld,{size:16}),children:p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"p-3 bg-blue-50 rounded-xl",children:[p.jsxs("h4",{className:"text-xs font-semibold text-blue-800 mb-1 flex items-center gap-1",children:[p.jsx(Ld,{size:12}),"Meetgereedschap"]}),p.jsx("p",{className:"text-xs text-blue-700",children:"Klik om te meten, dubbelklik om te stoppen. De afstand wordt automatisch berekend in meters of kilometers."})]}),p.jsxs("div",{className:"p-3 bg-orange-50 rounded-xl",children:[p.jsxs("h4",{className:"text-xs font-semibold text-orange-800 mb-1 flex items-center gap-1",children:[p.jsx(Wd,{size:12}),"Tekengereedschap"]}),p.jsx("p",{className:"text-xs text-orange-700 mb-2",children:"Teken punten, lijnen en vlakken op de kaart. Kies uit:"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("span",{className:"text-xs bg-orange-100 px-2 py-1 rounded",children:"Punt"}),p.jsx("span",{className:"text-xs bg-orange-100 px-2 py-1 rounded",children:"Lijn"}),p.jsx("span",{className:"text-xs bg-orange-100 px-2 py-1 rounded",children:"Vlak"})]}),p.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"Tekeningen kunnen opgeslagen worden naar je eigen lagen."})]})]})}),p.jsxs(Gu,{title:"Presets",icon:p.jsx(boe,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Presets zijn vooraf ingestelde combinaties van kaartlagen. Ideaal om snel te wisselen tussen:"}),p.jsxs("ul",{className:"text-xs text-gray-600 space-y-1 ml-4 list-disc",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Detectie"})," - AMK, IKAW, Archeo Onderzoeken, Gewaspercelen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Steentijd"})," - Hunebedden, Grafheuvels, Paleokaarten"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Romeins"})," - Romeinse wegen, Forten, AMK Romeins"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"WOII"})," - Bunkers, Slagvelden, Vliegvelden"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Fossielen"})," - Fossiel hotspots, PBDB data"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Mineralen"})," - Mineralen hotspots, Goudrivieren"]})]}),p.jsx("p",{className:"text-xs text-gray-500 mt-2 italic",children:"Tip: Overschrijf een preset met je eigen lagen via het diskette-icoon."})]}),p.jsxs(Gu,{title:"Mijn Lagen",icon:p.jsx(jo,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Sla interessante locaties op in eigen lagen:"}),p.jsxs("ol",{className:"text-xs text-gray-600 space-y-1 ml-4 list-decimal",children:[p.jsx("li",{children:"Tik op een object op de kaart (monument, bunker, etc.)"}),p.jsxs("li",{children:["Tik op de ",p.jsx("strong",{children:"oranje +"})," knop in de popup"]}),p.jsx("li",{children:"Kies een bestaande laag of maak een nieuwe aan"})]}),p.jsx("div",{className:"mt-2 p-2 bg-orange-50 rounded-lg",children:p.jsxs("p",{className:"text-xs text-orange-700",children:[p.jsx("strong",{children:"Tip:"})," De volledige vorm (polygoon) en popup-info worden mee opgeslagen!"]})})]}),p.jsxs(Gu,{title:"Vondsten Registreren",icon:p.jsx(jo,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Registreer je vondsten met locatie, foto's en details:"}),p.jsxs("ul",{className:"text-xs text-gray-600 space-y-1 ml-4 list-disc",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Via GPS:"})," Menu  Vondst toevoegen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Long-press:"}),' Houd vinger op kaart  "Vondst toevoegen"']}),p.jsxs("li",{children:[p.jsx("strong",{children:"Velden:"})," Type, materiaal, periode, diepte, conditie, gewicht"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Export:"})," Excel, CSV, GeoJSON, GPX, KML"]})]})]}),p.jsxs(Gu,{title:"Cloud Sync",icon:p.jsx(Th,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Synchroniseer je data tussen apparaten met Google login:"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:p.jsxs("p",{className:"text-xs text-green-700",children:[p.jsx("strong",{children:"Wat wordt gesynchroniseerd:"}),p.jsx("br",{})," Mijn Lagen (eigen punten)",p.jsx("br",{})," Vondsten registraties",p.jsx("br",{})," Preset instellingen"]})}),p.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:p.jsxs("p",{className:"text-xs text-blue-700",children:[p.jsx("strong",{children:"Privacy:"})," Je data is alleen voor jou toegankelijk. GPS wordt niet opgeslagen."]})})]})]}),p.jsx(Gu,{title:"Monument Filter",icon:p.jsx(vq,{size:16}),children:p.jsx("p",{className:"text-xs text-gray-600",children:"Filter AMK monumenten op tijdsperiode. Handig om specifieke periodes te onderzoeken zoals de Romeinse tijd, Middeleeuwen of Bronstijd."})}),p.jsx(Gu,{title:"Kaart Exporteren",icon:p.jsx(OA,{size:16}),children:p.jsx("p",{className:"text-xs text-gray-600",children:"Exporteer je huidige kaartweergave als afbeelding (PNG/JPEG) of print direct via PDF. Je kunt een titel toevoegen en de datum wordt automatisch toegevoegd."})}),p.jsxs("section",{className:"p-4 bg-gradient-to-br from-green-50 to-blue-50 rounded-xl",children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Tips voor gebruik"}),p.jsxs("ul",{className:"text-xs text-gray-700 space-y-2",children:[p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx(nh,{size:12,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsxs("span",{children:[p.jsx("strong",{children:"Detectie:"})," Combineer AMK + Gewaspercelen + IKAW voor kansrijke locaties"]})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx(nh,{size:12,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsxs("span",{children:[p.jsx("strong",{children:"Terrein:"})," AHN Hillshade toont grafheuvels, wallen en greppels"]})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx(nh,{size:12,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsxs("span",{children:[p.jsx("strong",{children:"Fossielen:"})," Check Fossiel Hotspots + Geomorfologie voor oude zeebodems"]})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx(nh,{size:12,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsxs("span",{children:[p.jsx("strong",{children:"Historisch:"})," TMK 1850 toont verdwenen structuren en oude wegen"]})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx(nh,{size:12,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsxs("span",{children:[p.jsx("strong",{children:"Privacy:"})," Alle functies werken ook zonder login (lokale opslag)"]})]})]})]})]}),p.jsx("div",{className:"flex items-center justify-center px-4 py-3 border-t border-gray-100 bg-gray-50 flex-shrink-0",children:p.jsx("button",{onClick:e,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors border-0 outline-none",children:"Sluiten"})})]})})]})})}function Gu({title:t,icon:e,children:n}){return p.jsxs("section",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[e&&p.jsx("span",{className:"text-blue-500",children:e}),t]}),n]})}function ZR({title:t,items:e}){return p.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg",children:[p.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-1.5",children:t}),p.jsx("div",{className:"space-y-1",children:e.map((n,r)=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-blue-500",children:n.icon}),p.jsx("span",{className:"text-xs text-gray-700 font-medium",children:n.name}),p.jsxs("span",{className:"text-xs text-gray-400",children:["- ",n.desc]})]},r))})]})}function jF({icon:t,name:e,desc:n}){return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-gray-500",children:t}),p.jsx("span",{className:"text-xs text-gray-700 font-medium",children:e}),p.jsxs("span",{className:"text-xs text-gray-400",children:["- ",n]})]})}function km({name:t,items:e}){return p.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg",children:[p.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-1",children:t}),p.jsx("div",{className:"text-xs text-gray-500 space-y-0.5",children:e.map((n,r)=>p.jsx("div",{children:n},r))})]})}function TAt({isOpen:t,onClose:e}){const n=an(l=>l.setHideWelcomeModal),[r,i]=Y.useState(!1),s=()=>{e()},o=()=>{n(!0),e()},a=()=>{e(),i(!0)};return p.jsxs(p.Fragment,{children:[p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 bg-black/40 z-[2000]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s}),p.jsx(yt.div,{className:"fixed inset-x-4 top-4 bottom-4 z-[2001] flex items-center justify-center pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:p.jsxs(yt.div,{className:"bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col w-full max-w-md max-h-full pointer-events-auto",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.2},onClick:l=>l.stopPropagation(),children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100 flex-shrink-0",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Hoe werkt de app?"}),p.jsx("button",{onClick:s,className:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:20,className:"text-gray-500"})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[p.jsxs("section",{children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Knoppen op de kaart"}),p.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Aan de linker- en rechterkant vind je tools:"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Am,{icon:p.jsx(_c,{size:16}),title:"Kaartlagen",description:"Selecteer welke lagen je wilt zien"}),p.jsx(Am,{icon:p.jsx(nv,{size:16}),title:"Zoeken",description:"Zoek naar een adres of plaatsnaam"}),p.jsx(Am,{icon:p.jsx(jo,{size:16}),title:"GPS Locatie",description:"Volg je positie op de kaart"}),p.jsx(Am,{icon:p.jsx(gq,{size:16}),title:"Presets",description:"Snel wisselen tussen kaartlagen"}),p.jsx(Am,{icon:p.jsx(vq,{size:16}),title:"Monument Filter",description:"Filter monumenten op periode"}),p.jsx(Am,{icon:p.jsx(J2e,{size:16}),title:"Transparantie",description:"Pas doorzichtigheid aan"}),p.jsx(Am,{icon:p.jsx(r5,{size:16}),title:"Menu",description:"Instellingen en meer"}),p.jsx(Am,{icon:p.jsx(Z2e,{size:16}),title:"Reset",description:"Kaart naar beginstand"})]})]}),p.jsxs("section",{className:"bg-blue-50 rounded-xl p-3",children:[p.jsx("h3",{className:"text-sm font-semibold text-blue-800 mb-1",children:"Kaartlagen gebruiken"}),p.jsx("p",{className:"text-xs text-blue-700",children:"Klik op een locatie om informatie te zien over monumenten en archeologische gegevens."})]}),p.jsxs("button",{onClick:a,className:"w-full flex items-start gap-2 p-3 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors border-0 outline-none text-left",children:[p.jsx($2e,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-0.5",children:"Handleiding"}),p.jsx("span",{className:"text-xs text-blue-600",children:"Bekijk volledige handleiding "})]})]})]}),p.jsxs("div",{className:"flex items-center justify-end gap-2 px-4 py-3 border-t border-gray-100 bg-gray-50 flex-shrink-0",children:[p.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:"Toon niet meer"}),p.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors border-0 outline-none",children:"Begrepen"})]})]})})]})}),p.jsx(SAt,{isOpen:r,onClose:()=>i(!1)})]})}function Am({icon:t,title:e,description:n}){return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-7 h-7 flex items-center justify-center bg-blue-100 text-blue-600 rounded-lg flex-shrink-0",children:t}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("span",{className:"text-xs font-medium text-gray-700",children:e}),p.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["- ",n]})]})]})}function bg(t,e){const n=t.length;return e<0?t[e+n]:e>=n?t[e-n]:t[e]}function Qx(t,e){const n=t.length;let r=Math.floor(e);const i=e-r;r>=n?r-=n:r<0&&(r+=n);let s=r+1;s>=n&&(s-=n);const o=t[r],a=o[0],l=o[1],c=t[s],u=c[0]-a,h=c[1]-l;return[a+u*i,l+h*i]}const JR={index:-1,endIndex:NaN,closestTargetDistance:1/0};function WSe(t,e,n,r){const i=t[0],s=t[1];let o=1/0,a=-1,l=NaN;for(let h=0;h<e.targets.length;++h){const f=e.targets[h],g=f.coordinates;let y=1/0,_;for(let b=0;b<g.length-1;++b){const T=g[b],A=g[b+1],I=KSe(i,s,T,A);I.squaredDistance<y&&(y=I.squaredDistance,_=b+I.along)}y<o&&(o=y,f.ring&&e.targetIndex===h&&(f.endIndex>f.startIndex?_<f.startIndex&&(_+=g.length):f.endIndex<f.startIndex&&_>f.startIndex&&(_-=g.length)),l=_,a=h)}const c=e.targets[a];let u=c.ring;if(e.targetIndex===a&&u){const h=Qx(c.coordinates,l),f=n.getPixelFromCoordinate(h),g=n.getPixelFromCoordinate(e.startCoord);Ix(f,g)>r&&(u=!1)}if(u){const h=c.coordinates,f=h.length,g=c.startIndex,y=l;if(g<y){const _=tM(h,g,y);tM(h,g,y-f)<_&&(l-=f)}else{const _=tM(h,g,y);tM(h,g,y+f)<_&&(l+=f)}}return JR.index=a,JR.endIndex=l,JR.closestTargetDistance=o,JR}function HSe(t,e){const n=[];for(let r=0;r<e.length;++r){const s=e[r].getGeometry();qSe(t,s,n)}return n}function qSe(t,e,n){if(e instanceof ts){QR(t,e.getCoordinates(),!1,n);return}if(e instanceof _h){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i)QR(t,r[i],!1,n);return}if(e instanceof Pl){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i)QR(t,r[i],!0,n);return}if(e instanceof xp){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i];for(let a=0,l=o.length;a<l;++a)QR(t,o[a],!0,n)}return}if(e instanceof hu){const r=e.getGeometries();for(let i=0;i<r.length;++i)qSe(t,r[i],n);return}}function QR(t,e,n,r){const i=t[0],s=t[1];for(let o=0,a=e.length-1;o<a;++o){const l=e[o],c=e[o+1],u=KSe(i,s,l,c);if(u.squaredDistance===0){const h=o+u.along;r.push({coordinates:e,ring:n,startIndex:h,endIndex:h});return}}}function eM(t,e){return ap(t[0],t[1],e[0],e[1])}function tM(t,e,n){let r,i;e<n?(r=e,i=n):(r=n,i=e);const s=Math.ceil(r),o=Math.floor(i);if(s>o){const l=Qx(t,r),c=Qx(t,i);return eM(l,c)}let a=0;if(r<s){const l=Qx(t,r),c=bg(t,s);a+=eM(l,c)}if(o<i){const l=bg(t,o),c=Qx(t,i);a+=eM(l,c)}for(let l=s;l<o-1;++l){const c=bg(t,l),u=bg(t,l+1);a+=eM(c,u)}return a}const $F={along:0,squaredDistance:0};function KSe(t,e,n,r){const i=n[0],s=n[1],o=r[0],a=r[1],l=o-i,c=a-s;let u=0,h=i,f=s;return(l!==0||c!==0)&&(u=ri(((t-i)*l+(e-s)*c)/(l*l+c*c),0,1),h+=l*u,f+=c*u),$F.along=u,$F.squaredDistance=sb(ap(t,e,h,f),10),$F}const nM={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class rM extends Ac{constructor(e,n){super(e),this.feature=n}}class YSe extends fv{constructor(e){const n=e;n.stopDown||(n.stopDown=rb),super(n),this.on,this.once,this.un,this.options_=e,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=AAt(this.type_),this.stopClick_=!!e.stopClick,this.ignoreNextUpEvent_=!1,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Fg,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let r=e.geometryFunction;if(!r){const i=this.mode_;if(i==="Circle")r=(s,o,a)=>{const l=o||new H5([NaN,NaN]),c=Li(s[0]),u=r2(c,Li(s[s.length-1]));return l.setCenterAndRadius(c,Math.sqrt(u),this.geometryLayout_),l};else{let s;i==="Point"?s=ki:i==="LineString"?s=ts:i==="Polygon"&&(s=Pl),r=(o,a,l)=>(a?i==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a)}}this.geometryFunction_=r,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Ll({source:new Ol({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:kAt(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:fU,this.freehandCondition_,e.freehand?this.freehandCondition_=rw:this.freehandCondition_=e.freehandCondition?e.freehandCondition:d4,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(v8.ACTIVE,this.updateState_)}setTrace(e){let n;e?e===!0?n=rw:n=e:n=h4,this.traceCondition_=n}setMap(e){super.setMap(e),this.updateState_()}setFreehand(e){this.freehand_=e,this.freehand_?this.freehandCondition_=rw:this.freehandCondition_=this.options_&&this.options_.freehandCondition?this.options_.freehandCondition:d4}getOverlay(){return this.overlay_}getFreehand(){return this.freehand_}handleEvent(e){e.originalEvent.type===En.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let n=e.type===or.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===or.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===or.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===or.POINTERDOWN?r=!1:n&&this.getPointerCount()<2?(r=e.type===or.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===or.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===or.DBLCLICK&&(r=!1),super.handleEvent(e)&&r}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Ff(or.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const n=this.getMap(),r=n.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),i=n.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=Ia([r,i]),o=this.traceSource_.getFeaturesInExtent(s);if(o.length===0)return;const a=HSe(e.coordinate,o);a.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,n){const r=e.startIndex<=e.endIndex,i=e.startIndex<=n;r===i?r&&n>e.endIndex||!r&&n<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,n):(r&&n<e.endIndex||!r&&n>e.endIndex)&&this.removeTracedCoordinates_(n,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,n))}removeTracedCoordinates_(e,n){if(e===n)return;let r=0;if(e<n){const i=Math.ceil(e);let s=Math.floor(n);s===n&&(s-=1),r=s-i+1}else{const i=Math.floor(e);let s=Math.ceil(n);s===n&&(s+=1),r=i-s+1}r>0&&this.removeLastPoints_(r)}addTracedCoordinates_(e,n,r){if(n===r)return;const i=[];if(n<r){const s=Math.ceil(n);let o=Math.floor(r);o===r&&(o-=1);for(let a=s;a<=o;++a)i.push(bg(e.coordinates,a))}else{const s=Math.floor(n);let o=Math.ceil(r);o===r&&(o+=1);for(let a=s;a>=o;--a)i.push(bg(e.coordinates,a))}i.length&&this.appendCoordinates(i)}updateTrace_(e){const n=this.traceState_;if(!n.active)return;if(n.targetIndex===-1){const a=e.map.getPixelFromCoordinate(n.startCoord);if(Ix(a,e.pixel)<this.snapTolerance_)return}const r=WSe(e.coordinate,n,this.getMap(),this.snapTolerance_);if(n.targetIndex!==r.index){if(n.targetIndex!==-1){const l=n.targets[n.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=n.targets[r.index];this.addTracedCoordinates_(a,a.startIndex,r.endIndex)}else{const a=n.targets[n.targetIndex];this.addOrRemoveTracedCoordinates_(a,r.endIndex)}n.targetIndex=r.index;const i=n.targets[n.targetIndex];i.endIndex=r.endIndex;const s=Qx(i.coordinates,i.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleDragEvent(e){this.ignoreNextUpEvent_=!0,super.handleDragEvent(e)}handleUpEvent(e){let n=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const r=this.traceState_.active;if(this.ignoreNextUpEvent_||this.toggleTraceState_(e),this.shouldHandle_){const i=!this.finishCoordinate_;i&&this.startDrawing_(e.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_==="Point")&&(this.atFinish_(e.pixel,r)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),n=!1}else this.freehand_&&this.abortDrawing()}return this.ignoreNextUpEvent_=!1,!n&&this.stopClick_&&e.preventDefault(),n}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const n=this.downPx_,r=e.pixel,i=n[0]-r[0],s=n[1]-r[1],o=i*i+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,n){let r=!1;if(this.sketchFeature_){let i=!1,s=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")r=!0;else if(o==="Circle")r=this.sketchCoords_.length===2;else if(o==="LineString")i=!n&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;i=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],n?s=[a[0][0]]:s=[a[0][0],a[0][a[0].length-2]]}if(i){const a=this.getMap();for(let l=0,c=s.length;l<c;l++){const u=s[l],h=a.getPixelFromCoordinate(u),f=e[0]-h[0],g=e[1]-h[1],y=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(f*f+g*g)<=y,r){this.finishCoordinate_=u;break}}}}return r}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new yr(new ki(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new yr);const n=e.getLinearRing(0);let r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),r.changed()):(r=new ts(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(r))}startDrawing_(e){const n=this.getMap().getView().getProjection(),r=Y3(this.geometryLayout_);for(;e.length<r;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new yr(new ts(this.sketchLineCoords_)));const i=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new yr,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new rM(nM.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const n=this.getMap(),r=this.sketchFeature_.getGeometry(),i=n.getView().getProjection(),s=Y3(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(n.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),r.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();let i,s;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():i=!0),s.push(e.slice()),this.geometryFunction_(s,n,r)):o==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():i=!0),s.push(e.slice()),i&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),i=this.mode_;for(let s=0;s<e;++s){let o;if(i==="LineString"||i==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,n,r),n.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(n)}else if(i==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,n,r)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let n=this.sketchCoords_;const r=e.getGeometry(),i=this.getMap().getView().getProjection();return this.mode_==="LineString"?(n.pop(),this.geometryFunction_(n,r,i)):this.mode_==="Polygon"&&(n[0].pop(),this.geometryFunction_(n,r,i),n=r.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new u0([n])):this.type_==="MultiLineString"?e.setGeometry(new _h([n])):this.type_==="MultiPolygon"&&e.setGeometry(new xp([n])),this.dispatchEvent(new rM(nM.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new rM(nM.DRAWABORT,e))}appendCoordinates(e){const n=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(e[0]);let i;if(n==="LineString"||n==="Circle")i=this.sketchCoords_;else if(n==="Polygon")i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&i.shift(),i.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const r=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=r.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new yr(new ki(i)),this.updateSketchFeatures_(),this.dispatchEvent(new rM(nM.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const n=this.overlay_.getSource();n.clear(!0),n.addFeatures(e)}updateState_(){const e=this.getMap(),n=this.getActive();(!e||!n)&&this.abortDrawing(),this.overlay_.setMap(n?e:null)}}function kAt(){const t=VG();return function(e,n){return t[e.getGeometry().getType()]}}function AAt(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}const Yae=0,_k=1,Xae=[0,0,0,0],Lw=[],FF={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};function VF(t,e,n){let r;switch(e){case"LineString":r=t;break;case"MultiLineString":case"Polygon":r=t[n[0]];break;case"MultiPolygon":r=t[n[1]][n[0]];break}return r}class zF extends Ac{constructor(e,n,r){super(e),this.features=n,this.mapBrowserEvent=r}}class IAt extends fv{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:Uce,this.defaultDeleteCondition_=function(r){return RRe(r)&&zce(r)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:rw,this.vertexFeature_=null,this.vertexSegments_=null,this.lastCoordinate_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new l8,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Ll({source:new Ol({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:CAt(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.traceSource_=e.traceSource||e.source||null,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSegments_=null,this.hitDetection_=null;let n;if(e.features?n=e.features:e.source&&(this.source_=e.source,n=new ja(this.source_.getFeatures()),this.source_.addEventListener(so.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(so.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!n)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=n,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(Cs.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(Cs.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}setTrace(e){let n;e?e===!0?n=rw:n=e:n=h4,this.traceCondition_=n}addFeature_(e){const n=e.getGeometry();if(n){const i=this.SEGMENT_WRITERS_[n.getType()];i&&i(e,n)}const r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastCoordinate_),e.addEventListener(En.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,n){if(!this.featuresBeingModified_){this.featuresBeingModified_=new ja;const r=this.featuresBeingModified_.getArray();for(let i=0,s=n.length;i<s;++i){const o=n[i].feature;o&&!r.includes(o)&&this.featuresBeingModified_.push(o)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new zF(FF.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(En.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const n=this.rBush_,r=[];n.forEach(function(i){e===i.feature&&r.push(i)});for(let i=r.length-1;i>=0;--i){const s=r[i];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===s&&this.dragSegments_.splice(o,1);n.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const n=e.target;this.removeFeature_(n),this.addFeature_(n)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,n){const r=n.getCoordinates(),i={feature:e,geometry:n,segment:[r,r]};this.rBush_.insert(n.getExtent(),i)}writeMultiPointGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i],a={feature:e,geometry:n,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(n.getExtent(),a)}}writeLineStringGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length-1;i<s;++i){const o=r.slice(i,i+2),a={feature:e,geometry:n,index:i,segment:o};this.rBush_.insert(Ia(o),a)}}writeMultiLineStringGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),u={feature:e,geometry:n,depth:[i],index:a,segment:c};this.rBush_.insert(Ia(c),u)}}}writePolygonGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),u={feature:e,geometry:n,depth:[i],index:a,segment:c};this.rBush_.insert(Ia(c),u)}}}writeMultiPolygonGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i];for(let a=0,l=o.length;a<l;++a){const c=o[a];for(let u=0,h=c.length-1;u<h;++u){const f=c.slice(u,u+2),g={feature:e,geometry:n,depth:[a,i],index:u,segment:f};this.rBush_.insert(Ia(f),g)}}}}writeCircleGeometry_(e,n){const r=n.getCenter(),i={feature:e,geometry:n,index:Yae,segment:[r,r]},s={feature:e,geometry:n,index:_k,segment:[r,r]},o=[i,s];i.featureSegments=o,s.featureSegments=o,this.rBush_.insert(cT(r),i);let a=n;this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(e,n){const r=n.getGeometriesArray();for(let i=0;i<r.length;++i){const s=r[i],o=this.SEGMENT_WRITERS_[s.getType()];o(e,s)}}createOrUpdateVertexFeature_(e,n,r,i){let s=this.vertexFeature_;return s?s.getGeometry().setCoordinates(e):(s=new yr(new ki(e)),this.vertexFeature_=s,this.overlay_.getSource().addFeature(s)),s.set("features",n),s.set("geometries",r),s.set("existing",i),s}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let n;return!e.map.getView().getInteracting()&&e.type==or.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=or.SINGLECLICK||!this.ignoreNextSingleClick_?n=this.removePoint():n=!0),e.type==or.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!n}findInsertVerticesAndUpdateDragSegments_(e){if(this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null,!this.vertexFeature_)return;this.getMap().getView().getProjection();const r=[],i=this.vertexFeature_.getGeometry().getCoordinates(),s=Ia([i]),o=this.rBush_.getInExtent(s),a={};o.sort(PAt);for(let l=0,c=o.length;l<c;++l){const u=o[l],h=u.segment;let f=en(u.geometry);const g=u.depth;if(g&&(f+="-"+g.join("-")),a[f]||(a[f]=new Array(2)),u.geometry.getType()==="Circle"&&u.index===_k){const y=Jae(e,u);Ca(y,i)&&!a[f][0]&&(this.dragSegments_.push([u,0]),a[f][0]=u);continue}if(Ca(h[0],i)&&!a[f][0]){this.dragSegments_.push([u,0]),a[f][0]=u;continue}if(Ca(h[1],i)&&!a[f][1]){if(a[f][0]&&a[f][0].index===0){let y=u.geometry.getCoordinates();switch(u.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":y=y[g[1]];case"Polygon":if(u.index!==y[g[0]].length-2)continue;break}}this.dragSegments_.push([u,1]),a[f][1]=u;continue}en(h)in this.vertexSegments_&&!a[f][0]&&!a[f][1]&&r.push(u)}return r}deactivateTrace_(){this.traceState_={active:!1}}updateTrace_(e){const n=this.traceState_;if(!n.active)return;if(n.targetIndex===-1){const s=e.map.getPixelFromCoordinate(n.startCoord);if(Ix(s,e.pixel)<this.pixelTolerance_)return}const r=WSe(e.coordinate,n,e.map,this.pixelTolerance_);if(n.targetIndex===-1&&Math.sqrt(r.closestTargetDistance)/e.map.getView().getResolution()>this.pixelTolerance_)return;if(n.targetIndex!==r.index){if(n.targetIndex!==-1){const o=n.targets[n.targetIndex];this.removeTracedCoordinates_(o.startIndex,o.endIndex)}else for(const o of this.traceSegments_){const a=o[0],l=a.geometry,c=o[1],u=l.getCoordinates();VF(u,l.getType(),a.depth).splice(a.index+c,1),l.setCoordinates(u),c===0&&(a.index-=1)}const s=n.targets[r.index];this.addTracedCoordinates_(s,s.startIndex,r.endIndex)}else{const s=n.targets[n.targetIndex];this.addOrRemoveTracedCoordinates_(s,r.endIndex)}n.targetIndex=r.index;const i=n.targets[n.targetIndex];i.endIndex=r.endIndex}getTraceCandidates_(e){const n=this.getMap(),r=this.pixelTolerance_,i=n.getCoordinateFromPixel([e.pixel[0]-r,e.pixel[1]+r]),s=n.getCoordinateFromPixel([e.pixel[0]+r,e.pixel[1]-r]),o=Ia([i,s]);return this.traceSource_.getFeaturesInExtent(o)}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_(),this.traceSegments_=null;return}const n=this.getTraceCandidates_(e);if(n.length===0)return;const r=HSe(e.coordinate,n);r.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:r,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,n){const r=e.startIndex<=e.endIndex,i=e.startIndex<=n;r===i?r&&n>e.endIndex||!r&&n<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,n):(r&&n<e.endIndex||!r&&n>e.endIndex)&&this.removeTracedCoordinates_(n,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,n))}removeTracedCoordinates_(e,n){if(e===n)return;let r=0;if(e<n){const i=Math.ceil(e);let s=Math.floor(n);s===n&&(s-=1),r=s-i+1}else{const i=Math.floor(e);let s=Math.ceil(n);s===n&&(s+=1),r=i-s+1}if(r>0)for(const i of this.traceSegments_){const s=i[0],o=s.geometry,a=i[1];let l=i[0].index+1;a===1&&(l-=r);const c=o.getCoordinates();VF(c,o.getType(),s.depth).splice(l,r),o.setCoordinates(c),a===1&&(s.index-=r)}}addTracedCoordinates_(e,n,r){if(n===r)return;const i=[];if(n<r){const s=Math.ceil(n);let o=Math.floor(r);o===r&&(o-=1);for(let a=s;a<=o;++a)i.push(bg(e.coordinates,a))}else{const s=Math.floor(n);let o=Math.ceil(r);o===r&&(o+=1);for(let a=s;a>=o;--a)i.push(bg(e.coordinates,a))}if(i.length)for(const s of this.traceSegments_){const o=s[0],a=o.geometry,l=s[1],c=o.index+1;l===0&&i.reverse();const u=a.getCoordinates();VF(u,a.getType(),o.depth).splice(c,0,...i),a.setCoordinates(u),l===1&&(o.index+=i.length)}}updateGeometry_(e,n){const r=n[0],i=r.depth;let s;const o=r.segment,a=r.geometry,l=n[1];for(;e.length<a.getStride();)e.push(o[l][e.length]);switch(a.getType()){case"Point":s=e,o[0]=e,o[1]=e;break;case"MultiPoint":s=a.getCoordinates(),s[r.index]=e,o[0]=e,o[1]=e;break;case"LineString":s=a.getCoordinates(),s[r.index+l]=e,o[l]=e;break;case"MultiLineString":s=a.getCoordinates(),s[i[0]][r.index+l]=e,o[l]=e;break;case"Polygon":s=a.getCoordinates(),s[i[0]][r.index+l]=e,o[l]=e;break;case"MultiPolygon":s=a.getCoordinates(),s[i[1]][i[0]][r.index+l]=e,o[l]=e;break;case"Circle":const c=a;if(o[0]=e,o[1]=e,r.index===Yae)this.changingFeature_=!0,c.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0,this.getMap().getView().getProjection();let u=Ix(Li(c.getCenter()),Li(e));c.setRadius(u),this.changingFeature_=!1}break}s&&this.setGeometryCoordinates_(a,s)}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([o])=>o));const n=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],i=[],s=this.traceState_.active&&!this.traceSegments_?this.traceState_.startCoord:null;if(s){this.traceSegments_=[];for(const o of this.dragSegments_){const a=o[0];Ix(pG(s,a.segment),s)/e.map.getView().getResolution()<1&&this.traceSegments_.push(o)}}for(let o=0,a=this.dragSegments_.length;o<a;++o){const l=this.dragSegments_[o],c=l[0],u=c.feature;r.includes(u)||r.push(u);const h=c.geometry;i.includes(h)||i.push(h),this.updateGeometry_(n,l)}this.updateTrace_(e),this.createOrUpdateVertexFeature_(n,r,i,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const n=e.coordinate,r=this.findInsertVerticesAndUpdateDragSegments_(n);if(r?.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,r),this.vertexFeature_)){const i=this.vertexFeature_.getGeometry().getCoordinates();for(let s=r.length-1;s>=0;--s)this.insertVertex_(r[s],i);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let n=this.dragSegments_.length-1;n>=0;--n){const r=this.dragSegments_[n][0],i=r.geometry;if(i.getType()==="Circle"){const s=i,o=s.getCenter(),a=r.featureSegments[0],l=r.featureSegments[1];a.segment[0]=o,a.segment[1]=o,l.segment[0]=o,l.segment[1]=o,this.rBush_.update(cT(o),a);let c=s;this.rBush_.update(c.getExtent(),l)}else this.rBush_.update(Ia(r.segment),r)}return this.featuresBeingModified_&&(this.toggleTraceState_(e),this.dispatchEvent(new zF(FF.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastCoordinate_=e.coordinate,this.handlePointerAtPixel_(this.lastCoordinate_)}handlePointerAtPixel_(e){const n=this.getMap(),r=n.getPixelFromCoordinate(e);n.getView().getProjection();const i=function(a,l){return Zae(e,a)-Zae(e,l)};let s,o;if(this.hitDetection_){const a=typeof this.hitDetection_=="object"?l=>l===this.hitDetection_:void 0;n.forEachFeatureAtPixel(r,(l,c,u)=>{u&&u.getType()==="Point"&&(u=new ki(P1(u.getCoordinates())));const h=u||l.getGeometry();if(h&&h.getType()==="Point"&&l instanceof yr&&this.features_.getArray().includes(l)){o=h;const f=l.getGeometry().getFlatCoordinates().slice(0,2);s=[{feature:l,geometry:o,segment:[f,f]}]}return!0},{layerFilter:a})}if(!s){const a=ah(cT(e,Xae)),l=n.getView().getResolution()*this.pixelTolerance_,c=bG(oh(a,l,Xae));s=this.rBush_.getInExtent(c)}if(s&&s.length>0){const a=s.sort(i)[0],l=a.segment;let c=Jae(e,a);const u=n.getPixelFromCoordinate(c);let h=Ix(r,u);if(o||h<=this.pixelTolerance_){const f={};if(f[en(l)]=!0,this.snapToPointer_||(this.delta_[0]=c[0]-e[0],this.delta_[1]=c[1]-e[1]),a.geometry.getType()==="Circle"&&a.index===_k)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(c,[a.feature],[a.geometry],this.snappedToVertex_);else{const g=n.getPixelFromCoordinate(l[0]),y=n.getPixelFromCoordinate(l[1]),_=r2(u,g),b=r2(u,y);if(h=Math.sqrt(Math.min(_,b)),this.snappedToVertex_=h<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(c=_>b?l[1]:l[0]),this.createOrUpdateVertexFeature_(c,[a.feature],[a.geometry],this.snappedToVertex_);const T={};T[en(a.geometry)]=!0;for(let A=1,I=s.length;A<I;++A){const P=s[A].segment;if(Ca(l[0],P[0])&&Ca(l[1],P[1])||Ca(l[0],P[1])&&Ca(l[1],P[0])){const M=en(s[A].geometry);M in T||(T[M]=!0,f[en(P)]=!0)}else break}}this.vertexSegments_=f;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,n){const r=e.segment,i=e.feature,s=e.geometry,o=e.depth,a=e.index;let l;for(;n.length<s.getStride();)n.push(0);switch(s.getType()){case"MultiLineString":l=s.getCoordinates(),l[o[0]].splice(a+1,0,n);break;case"Polygon":l=s.getCoordinates(),l[o[0]].splice(a+1,0,n);break;case"MultiPolygon":l=s.getCoordinates(),l[o[1]][o[0]].splice(a+1,0,n);break;case"LineString":l=s.getCoordinates(),l.splice(a+1,0,n);break;default:return!1}this.setGeometryCoordinates_(s,l);const c=this.rBush_;c.remove(e),this.updateSegmentIndices_(s,a,o,1);const u={segment:[r[0],n],feature:i,geometry:s,depth:o,index:a};c.insert(Ia(u.segment),u),this.dragSegments_.push([u,1]);const h={segment:[n,r[1]],feature:i,geometry:s,depth:o,index:a+1};return c.insert(Ia(h.segment),h),this.dragSegments_.push([h,0]),!0}updatePointer_(e){return e&&this.findInsertVerticesAndUpdateDragSegments_(e),this.vertexFeature_?.getGeometry().getCoordinates()}getPoint(){const e=this.vertexFeature_?.getGeometry().getCoordinates();return e?P1(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(r=>r.getType()==="Circle"||r.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(Ia([e])).some(({segment:r})=>Ca(r[0],e)||Ca(r[1],e))}removePoint(e){if(e&&(e=Li(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=or.POINTERDRAG){const n=this.lastPointerEvent_;this.willModifyFeatures_(n,this.dragSegments_.map(([i])=>i));const r=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new zF(FF.MODIFYEND,this.featuresBeingModified_,n)),this.featuresBeingModified_=null,r}return!1}removeVertex_(){const e=this.dragSegments_,n={};let r=!1,i,s,o,a,l,c,u,h,f,g,y;for(l=e.length-1;l>=0;--l)o=e[l],g=o[0],y=en(g.feature),g.depth&&(y+="-"+g.depth.join("-")),y in n||(n[y]={}),o[1]===0?(n[y].right=g,n[y].index=g.index):o[1]==1&&(n[y].left=g,n[y].index=g.index+1);for(y in n){switch(f=n[y].right,u=n[y].left,c=n[y].index,h=c-1,u!==void 0?g=u:g=f,h<0&&(h=0),a=g.geometry,s=a.getCoordinates(),i=s,r=!1,a.getType()){case"MultiLineString":s[g.depth[0]].length>2&&(s[g.depth[0]].splice(c,1),r=!0);break;case"LineString":s.length>2&&(s.splice(c,1),r=!0);break;case"MultiPolygon":i=i[g.depth[1]];case"Polygon":i=i[g.depth[0]],i.length>4&&(c==i.length-1&&(c=0),i.splice(c,1),r=!0,c===0&&(i.pop(),i.push(i[0]),h=i.length-1));break}if(r){this.setGeometryCoordinates_(a,s);const _=[];if(u!==void 0&&(this.rBush_.remove(u),_.push(u.segment[0])),f!==void 0&&(this.rBush_.remove(f),_.push(f.segment[1])),u!==void 0&&f!==void 0){const b={depth:g.depth,feature:g.feature,geometry:g.geometry,index:h,segment:_};this.rBush_.insert(Ia(b.segment),b)}this.updateSegmentIndices_(a,c,g.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return r}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(r=>r.getType()==="Circle"||r.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(Ia([e])).some(({segment:r})=>!(Ca(r[0],e)||Ca(r[1],e)))}insertPoint(e){const n=e?Li(e,this.getMap().getView().getProjection()):this.vertexFeature_?.getGeometry().getCoordinates();return n?this.findInsertVerticesAndUpdateDragSegments_(n).reduce((i,s)=>i||this.insertVertex_(s,n),!1):!1}setGeometryCoordinates_(e,n){this.changingFeature_=!0,e.setCoordinates(n),this.changingFeature_=!1}updateSegmentIndices_(e,n,r,i){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(r===void 0||s.depth===void 0||Kd(s.depth,r))&&s.index>n&&(s.index+=i)})}}function PAt(t,e){return t.index-e.index}function Zae(t,e,n){const r=e.geometry;if(r.getType()==="Circle"){let s=r;if(e.index===_k){const o=r2(s.getCenter(),Li(t)),a=Math.sqrt(o)-s.getRadius();return a*a}}const i=Li(t);return Lw[0]=Li(e.segment[0]),Lw[1]=Li(e.segment[1]),Pke(i,Lw)}function Jae(t,e,n){const r=e.geometry;if(r.getType()==="Circle"&&e.index===_k)return P1(r.getClosestPoint(Li(t)));const i=Li(t);return Lw[0]=Li(e.segment[0]),Lw[1]=Li(e.segment[1]),P1(pG(i,Lw))}function CAt(){const t=VG();return function(e,n){return t.Point}}const iM={SELECT:"select"};class sM extends Ac{constructor(e,n,r,i){super(e),this.selected=n,this.deselected=r,this.mapBrowserEvent=i}}const oM={};class mK extends lb{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:zce,this.addCondition_=e.addCondition?e.addCondition:h4,this.removeCondition_=e.removeCondition?e.removeCondition:h4,this.toggleCondition_=e.toggleCondition?e.toggleCondition:d4,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Fg,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:RAt(),this.features_=e.features||new ja;let n;if(e.layers)if(typeof e.layers=="function")n=e.layers;else{const r=e.layers;n=function(i){return r.includes(i)}}else n=Fg;this.layerFilter_=n,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,n){this.featureLayerAssociation_[en(e)]=n}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[en(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(Cs.ADD,this.boundAddFeature_),this.features_.addEventListener(Cs.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Cs.ADD,this.boundAddFeature_),this.features_.removeEventListener(Cs.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const n=e.element;if(this.style_&&this.applySelectedStyle_(n),!this.getLayer(n)){const r=this.findLayerOfFeature_(n);r&&this.addFeatureLayerAssociation_(n,r)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}findLayerOfFeature_(e){return this.getMap().getAllLayers().find(function(r){if(r instanceof Ll&&r.getSource()&&r.getSource().hasFeature(e))return r})}getStyle(){return this.style_}applySelectedStyle_(e){const n=en(e);n in oM||(oM[n]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const n=this.getMap().getInteractions().getArray();for(let i=n.length-1;i>=0;--i){const s=n[i];if(s!==this&&s instanceof mK&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(s.getStyle());return}}const r=en(e);e.setStyle(oM[r]),delete oM[r]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[en(e)]}selectFeatureInternal_(e,n,r){if(!(e instanceof yr)||!this.filter_(e,n))return;const i=this.getFeatures();return i.getArray().includes(e)||(this.addFeatureLayerAssociation_(e,n),i.push(e),r?.push(e)),e}selectFeature(e){const n=this.findLayerOfFeature_(e);if(!this.layerFilter_(n))return!1;const r=this.selectFeatureInternal_(e,n);return r&&this.dispatchEvent(new sM(iM.SELECT,[r],[],void 0)),!!r}removeFeatureInternal_(e,n){const r=this.getFeatures();if(!(!(e instanceof yr)||!r.getArray().includes(e)))return r.remove(e),this.removeFeatureLayerAssociation_(e),n?.push(e),e}deselectFeature(e){const n=this.removeFeatureInternal_(e);return n&&this.dispatchEvent(new sM(iM.SELECT,[],[n],void 0)),!!n}toggleFeature(e){this.deselectFeature(e)||this.selectFeature(e)}clearSelection(){lv(this.featureLayerAssociation_);const e=this.getFeatures(),n=e.getArray().slice();e.clear(),n.length!==0&&this.dispatchEvent(new sM(iM.SELECT,[],n,void 0))}handleEvent(e){if(!this.condition_(e))return!0;const n=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),s=!n&&!r&&!i,o=e.map,a=this.getFeatures(),l=[],c=[];if(s){let u=!1;o.forEachFeatureAtPixel(e.pixel,(h,f)=>{if(u=!0,!!this.selectFeatureInternal_(h,f,c))return!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let h=a.getLength()-1;h>=0;--h){const f=a.item(h);(c.length>0&&!c.includes(f)||!u)&&this.removeFeatureInternal_(f,l)}}else o.forEachFeatureAtPixel(e.pixel,(u,h)=>{let f;if((r||i)&&(f=this.removeFeatureInternal_(u,l)),(n||i)&&!f&&(f=this.selectFeatureInternal_(u,h,c)),!!f)return!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});return(c.length>0||l.length>0)&&this.dispatchEvent(new sM(iM.SELECT,c,l,e)),!0}}function RAt(){const t=VG();return xr(t.Polygon,t.LineString),xr(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}function MAt(){const t=li(_=>_.map),e=gr(_=>_.setDrawingMode),n=an(_=>_.showMeasureTool),[r,i]=Y.useState(!1),[s,o]=Y.useState(null),[a,l]=Y.useState(0),c=Y.useRef(null),u=Y.useRef(null),h=Y.useRef(null),f=Y.useRef(null);Y.useEffect(()=>{if(!t)return;const _=new Ol;u.current=_;const b=new Ll({source:_,style:NAt,zIndex:1e3,properties:{name:"measure-layer"}});return c.current=b,t.addLayer(b),()=>{c.current&&t.removeLayer(c.current)}},[t]),Y.useEffect(()=>(e(r),()=>{r&&e(!1)}),[r,e]),Y.useEffect(()=>{if(!(!t||!u.current)&&r){const _=new YSe({source:u.current,type:"LineString",style:OAt});h.current=_;let b=null;return _.on("drawstart",T=>{b=T.feature,o(null);const A=b.getGeometry();A&&(f.current=A.on("change",()=>{const P=bk(A,{projection:"EPSG:3857"});o(Qae(P))}))}),_.on("drawend",T=>{f.current&&(WF(f.current),f.current=null);const A=T.feature.getGeometry(),I=bk(A,{projection:"EPSG:3857"}),P=Qae(I);T.feature.set("distance",P),o(P),l(M=>M+1),b=null}),t.addInteraction(_),()=>{h.current&&(t.removeInteraction(h.current),h.current=null),f.current&&(WF(f.current),f.current=null)}}},[t,r]);const g=()=>{i(!r),r&&o(null)},y=()=>{u.current&&(u.current.clear(),l(0),o(null))};return n?p.jsxs(p.Fragment,{children:[p.jsx(yt.button,{onClick:g,className:`fixed top-[90px] left-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${r?"bg-blue-500":"bg-white/80 hover:bg-white/90"}`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Afstanden meten",children:p.jsx(Ld,{size:20,className:r?"text-white":"text-blue-500 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})}),p.jsx(Wn,{children:r&&p.jsxs(yt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed top-[90px] left-[56px] z-[801] bg-white/95 rounded-xl shadow-lg backdrop-blur-sm overflow-hidden min-w-[180px]",children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-blue-500",children:[p.jsx("span",{className:"font-medium text-white text-xs",children:"Meten"}),p.jsx("button",{onClick:g,className:"p-0.5 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:14,className:"text-white"})})]}),p.jsxs("div",{className:"p-3 space-y-2",children:[p.jsx("p",{className:"text-xs text-gray-500",children:"Klik om te meten. Dubbelklik om te stoppen."}),s&&p.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[p.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Afstand"}),p.jsx("div",{className:"text-lg font-bold text-blue-700",children:s})]}),a>0&&p.jsxs("button",{onClick:y,className:"w-full flex items-center justify-center gap-1.5 px-3 py-1.5 text-xs text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(Ah,{size:12}),"Wis metingen (",a,")"]})]})]})})]}):null}function Qae(t){return t>=1e3?`${(t/1e3).toFixed(2)} km`:`${Math.round(t)} m`}function NAt(t){const e=t.get("distance");return new xn({stroke:new Mn({color:"#3b82f6",width:3,lineDash:[10,10]}),image:new gs({radius:5,fill:new Dn({color:"#3b82f6"}),stroke:new Mn({color:"#ffffff",width:2})}),text:e?new pc({text:e,font:"bold 12px sans-serif",fill:new Dn({color:"#1e40af"}),stroke:new Mn({color:"#ffffff",width:3}),offsetY:-15,placement:"line",overflow:!0}):void 0})}function OAt(){return new xn({stroke:new Mn({color:"#ef4444",width:3,lineDash:[10,10]}),image:new gs({radius:5,fill:new Dn({color:"#ef4444"}),stroke:new Mn({color:"#ffffff",width:2})})})}const GF="Mijn Tekeningen";function LAt(){const t=li(O=>O.map),e=gr(O=>O.setDrawingMode),n=an(O=>O.showDrawTool),r=an(O=>O.showMeasureTool),[i,s]=Y.useState(!1),[o,a]=Y.useState("select"),[l,c]=Y.useState(0),[u,h]=Y.useState(null),{layers:f,addLayer:g,addPoint:y,getLayer:_}=ms(),b=Y.useRef(null),T=Y.useRef(null),A=Y.useRef(null),I=Y.useRef(null),P=Y.useRef(null);Y.useEffect(()=>{if(!t)return;const O=new Ol;T.current=O;const L=new Ll({source:O,style:DAt,zIndex:999,properties:{name:"draw-preview-layer"}});return b.current=L,t.addLayer(L),()=>{b.current&&t.removeLayer(b.current)}},[t]),Y.useEffect(()=>(e(i),()=>{i&&e(!1)}),[i,e]),Y.useEffect(()=>{if(!(!t||!T.current)&&(A.current&&(t.removeInteraction(A.current),A.current=null),I.current&&(t.removeInteraction(I.current),I.current=null),P.current&&(t.removeInteraction(P.current),P.current=null),!!i))if(o==="select"){const O=new mK({layers:[b.current],style:$At});I.current=O;const L=new IAt({features:O.getFeatures()});P.current=L,t.addInteraction(O),t.addInteraction(L);const F=G=>{if(G.key==="Delete"||G.key==="Backspace"){const U=O.getFeatures();U.forEach(he=>{T.current?.removeFeature(he)}),U.clear(),c(T.current?.getFeatures().length||0)}};return document.addEventListener("keydown",F),()=>{document.removeEventListener("keydown",F),I.current&&t.removeInteraction(I.current),P.current&&t.removeInteraction(P.current)}}else{const O=o==="point"?"Point":o==="line"?"LineString":"Polygon",L=new YSe({source:T.current,type:O,style:jAt});return A.current=L,L.on("drawstart",F=>{h(null);const G=F.feature.getGeometry();G&&G.on("change",()=>{if(o==="line"){const U=bk(G,{projection:"EPSG:3857"});h(ele(U))}else if(o==="polygon"){const U=ZF(G,{projection:"EPSG:3857"});h(tle(U))}})}),L.on("drawend",F=>{const G=F.feature.getGeometry();if(o==="line"&&G){const U=bk(G,{projection:"EPSG:3857"});F.feature.set("measurement",ele(U))}else if(o==="polygon"&&G){const U=ZF(G,{projection:"EPSG:3857"});F.feature.set("measurement",tle(U))}F.feature.set("drawType",o),c(U=>U+1),h(null)}),t.addInteraction(L),()=>{A.current&&t.removeInteraction(A.current)}}},[t,i,o]);const M=()=>{if(i){if(l>0&&!confirm("Tekeningen verwijderen? Klik eerst op Opslaan om te bewaren."))return;V()}s(!i),a("select"),h(null)},V=()=>{T.current&&(T.current.clear(),c(0),h(null))},C=()=>{if(!T.current||l===0)return;let O=f.find(G=>G.name===GF);if(!O){const G=ms.getState().addLayer(GF,["Punt","Lijn","Vlak"]);O=ms.getState().getLayer(G)}if(!O){alert("Kon tekeningen laag niet aanmaken");return}const L=T.current.getFeatures();let F=0;L.forEach((G,U)=>{const he=G.getGeometry();if(!he)return;const Ie=G.get("drawType")||"point",ze=G.get("measurement");let Oe,fe;if(he.getType()==="Point"){const Se=he.getCoordinates();Oe=Fn(Se)}else if(he.getType()==="LineString"){const Se=he.getCoordinates(),Z=Math.floor(Se.length/2);Oe=Fn(Se[Z]),fe={type:"LineString",coordinates:Se.map(W=>Fn(W))}}else if(he.getType()==="Polygon"){const Se=he.getCoordinates(),Z=he.getExtent(),W=[(Z[0]+Z[2])/2,(Z[1]+Z[3])/2];Oe=Fn(W),fe={type:"Polygon",coordinates:Se.map(ne=>ne.map(ie=>Fn(ie)))}}else return;const ge={point:"Punt",line:"Lijn",polygon:"Vlak",select:"Punt"};y(O.id,{name:`Tekening ${new Date().toLocaleDateString("nl-NL")} #${U+1}`,category:ge[Ie],notes:ze?`Afmeting: ${ze}`:"",coordinates:Oe,geometry:fe}),F++}),alert(`${F} tekening(en) opgeslagen naar "${GF}"`),V(),s(!1)};if(!n)return null;const N=90+(r?48:0);return p.jsxs(p.Fragment,{children:[p.jsx(yt.button,{onClick:M,className:`fixed left-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${i?"bg-orange-500":"bg-white/80 hover:bg-white/90"}`,style:{top:`${N}px`},whileHover:{scale:1.05},whileTap:{scale:.95},title:"Tekenen op de kaart",children:p.jsx(Wd,{size:20,className:i?"text-white":"text-orange-500 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})}),p.jsx(Wn,{children:i&&p.jsxs(yt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed left-[56px] z-[801] bg-white/95 rounded-xl shadow-lg backdrop-blur-sm overflow-hidden min-w-[200px]",style:{top:`${N}px`},children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-orange-500",children:[p.jsx("span",{className:"font-medium text-white text-xs",children:"Tekenen"}),p.jsx("button",{onClick:M,className:"p-0.5 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:14,className:"text-white"})})]}),p.jsxs("div",{className:"p-3 space-y-3",children:[p.jsxs("div",{className:"flex gap-1",children:[p.jsx(aM,{icon:p.jsx(Wut,{size:16}),active:o==="select",onClick:()=>a("select"),title:"Selecteren"}),p.jsx(aM,{icon:p.jsx(jo,{size:16}),active:o==="point",onClick:()=>a("point"),title:"Punt"}),p.jsx(aM,{icon:p.jsx(Iht,{size:16}),active:o==="line",onClick:()=>a("line"),title:"Lijn"}),p.jsx(aM,{icon:p.jsx(Qut,{size:16}),active:o==="polygon",onClick:()=>a("polygon"),title:"Vlak"})]}),p.jsx("p",{className:"text-xs text-gray-500",children:o==="select"?"Klik om te selecteren, Delete om te verwijderen":o==="point"?"Klik om een punt te plaatsen":"Klik om te tekenen, dubbelklik om te voltooien"}),u&&p.jsxs("div",{className:"bg-orange-50 rounded-lg p-2",children:[p.jsx("div",{className:"text-xs text-orange-600 font-medium",children:o==="polygon"?"Oppervlakte":"Afstand"}),p.jsx("div",{className:"text-lg font-bold text-orange-700",children:u})]}),l>0&&p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:C,className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-1.5 text-xs text-white bg-orange-500 hover:bg-orange-600 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(wq,{size:12}),"Opslaan (",l,")"]}),p.jsx("button",{onClick:()=>{confirm("Alle tekeningen verwijderen?")&&V()},className:"flex items-center justify-center gap-1.5 px-3 py-1.5 text-xs text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",children:p.jsx(Ah,{size:12})})]})]})]})})]})}function aM({icon:t,active:e,onClick:n,title:r}){return p.jsx("button",{onClick:n,className:`w-9 h-9 flex items-center justify-center rounded-lg transition-colors border-0 outline-none ${e?"bg-orange-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:r,children:t})}function ele(t){return t>=1e3?`${(t/1e3).toFixed(2)} km`:`${Math.round(t)} m`}function tle(t){return t>=1e4?`${(t/1e4).toFixed(2)} ha`:`${Math.round(t)} m`}function DAt(t){const e=t.get("measurement"),n=t.get("drawType"),r={stroke:new Mn({color:"#f97316",width:3}),fill:new Dn({color:"rgba(249, 115, 22, 0.2)"}),image:new gs({radius:6,fill:new Dn({color:"#f97316"}),stroke:new Mn({color:"#ffffff",width:2})})};return new xn({...r,text:e?new pc({text:e,font:"bold 11px sans-serif",fill:new Dn({color:"#c2410c"}),stroke:new Mn({color:"#ffffff",width:3}),offsetY:n==="polygon"?0:-15,placement:n==="line"?"line":"point",overflow:!0}):void 0})}function jAt(){return new xn({stroke:new Mn({color:"#ea580c",width:3,lineDash:[10,10]}),fill:new Dn({color:"rgba(234, 88, 12, 0.1)"}),image:new gs({radius:5,fill:new Dn({color:"#ea580c"}),stroke:new Mn({color:"#ffffff",width:2})})})}function $At(){return new xn({stroke:new Mn({color:"#2563eb",width:4}),fill:new Dn({color:"rgba(37, 99, 235, 0.2)"}),image:new gs({radius:8,fill:new Dn({color:"#2563eb"}),stroke:new Mn({color:"#ffffff",width:2})})})}function FAt(){const t=li(b=>b.map),e=an(b=>b.showPrintTool),n=an(b=>b.showMeasureTool),r=an(b=>b.showDrawTool),[i,s]=Y.useState(!1),[o,a]=Y.useState(!1),[l,c]=Y.useState("png"),[u,h]=Y.useState(!0),[f,g]=Y.useState("Kaart Export"),y=async()=>{if(t){a(!0);try{const b=t.getTargetElement();if(!b)throw new Error("Map target not found");const T=b.querySelector("canvas");if(!T)throw new Error("Canvas not found");const A=document.createElement("canvas"),I=A.getContext("2d");if(!I)throw new Error("Could not get canvas context");const P=u?50:0;A.width=T.width,A.height=T.height+P,I.fillStyle="#ffffff",I.fillRect(0,0,A.width,A.height),u&&(I.fillStyle="#1f2937",I.font="bold 24px system-ui, -apple-system, sans-serif",I.textAlign="center",I.fillText(f,A.width/2,35)),I.drawImage(T,0,P),I.fillStyle="#6b7280",I.font="12px system-ui, -apple-system, sans-serif",I.textAlign="right";const M=new Date().toLocaleDateString("nl-NL",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});I.fillText(M,A.width-10,A.height-10),I.textAlign="left",I.fillText("DetectorApp.nl",10,A.height-10);const V=`kaart-${new Date().toISOString().split("T")[0]}`;if(l==="pdf"){const C=window.open("","_blank");if(C){const N=A.toDataURL("image/png");C.document.write(`
            <!DOCTYPE html>
            <html>
              <head>
                <title>${f}</title>
                <style>
                  @media print {
                    body { margin: 0; padding: 0; }
                    img { max-width: 100%; height: auto; }
                  }
                  body {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    min-height: 100vh;
                    margin: 0;
                    background: white;
                  }
                  img { max-width: 100%; max-height: 100vh; }
                </style>
              </head>
              <body>
                <img src="${N}" />
                <script>
                  setTimeout(() => {
                    window.print();
                  }, 500);
                <\/script>
              </body>
            </html>
          `),C.document.close()}}else{const C=l==="jpeg"?"image/jpeg":"image/png",N=l==="jpeg"?.92:void 0;A.toBlob(O=>{if(O){const L=URL.createObjectURL(O),F=document.createElement("a");F.href=L,F.download=`${V}.${l}`,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(L)}},C,N)}s(!1)}catch(b){console.error("Export failed:",b),alert("Kon de kaart niet exporteren. Probeer het opnieuw.")}finally{a(!1)}}};if(!e)return null;let _=90;return n&&(_+=48),r&&(_+=48),p.jsxs(p.Fragment,{children:[p.jsx(yt.button,{onClick:()=>s(!0),className:"fixed left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",style:{top:`${_}px`},whileHover:{scale:1.05},whileTap:{scale:.95},title:"Kaart printen/exporteren",children:p.jsx(OA,{size:20,className:"text-indigo-500 drop-shadow-[1px_1px_1px_rgba(0,0,0,0.15)]"})}),p.jsx(Wn,{children:i&&p.jsxs(p.Fragment,{children:[p.jsx(yt.div,{className:"fixed inset-0 bg-black/40 z-[1700]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>s(!1)}),p.jsxs(yt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-green-500 to-green-600",children:[p.jsx("span",{className:"font-medium text-white",children:"Kaart Exporteren"}),p.jsx("button",{onClick:()=>s(!1),className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Qr,{size:18,className:"text-white"})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 mb-2",children:[p.jsx("input",{type:"checkbox",checked:u,onChange:b=>h(b.target.checked),className:"rounded border-gray-300"}),"Titel toevoegen"]}),u&&p.jsx("input",{type:"text",value:f,onChange:b=>g(b.target.value),className:"w-full px-3 py-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-green-500 text-sm",placeholder:"Titel..."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Formaat"}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsx(UF,{format:"png",selected:l==="png",onClick:()=>c("png"),icon:p.jsx(_oe,{size:16}),label:"PNG"}),p.jsx(UF,{format:"jpeg",selected:l==="jpeg",onClick:()=>c("jpeg"),icon:p.jsx(_oe,{size:16}),label:"JPEG"}),p.jsx(UF,{format:"pdf",selected:l==="pdf",onClick:()=>c("pdf"),icon:p.jsx(OA,{size:16}),label:"Print"})]})]}),p.jsx("button",{onClick:y,disabled:o,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors border-0 outline-none disabled:opacity-50",children:o?p.jsxs(p.Fragment,{children:[p.jsx(rP,{size:18,className:"animate-spin"}),p.jsx("span",{children:"Exporteren..."})]}):p.jsxs(p.Fragment,{children:[p.jsx(MA,{size:18}),p.jsx("span",{children:l==="pdf"?"Printen":"Downloaden"})]})})]})]})]})})]})}function UF({format:t,selected:e,onClick:n,icon:r,label:i}){return p.jsxs("button",{onClick:n,className:`flex flex-col items-center justify-center gap-1 p-3 rounded-lg transition-colors border-0 outline-none ${e?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[r,p.jsx("span",{className:"text-xs font-medium",children:i})]})}class nle{buffer=[];size;weights;constructor(e=8){this.size=e,this.weights=Array.from({length:e},(r,i)=>Math.pow(2,i));const n=this.weights.reduce((r,i)=>r+i,0);this.weights=this.weights.map(r=>r/n)}add(e){if(this.buffer.length>0){const n=this.buffer[this.buffer.length-1];let r=e-n;r>180&&(e-=360),r<-180&&(e+=360)}this.buffer.push(e),this.buffer.length>this.size&&this.buffer.shift()}getSmoothed(){if(this.buffer.length===0)return null;if(this.buffer.length===1)return this.normalize(this.buffer[0]);let e=0,n=0;const r=this.size-this.buffer.length;for(let i=0;i<this.buffer.length;i++){const s=this.weights[r+i];e+=this.buffer[i]*s,n+=s}return this.normalize(e/n)}normalize(e){return(e%360+360)%360}clear(){this.buffer=[]}}function VAt(){const t=Ps(c=>c.tracking),e=Ps(c=>c.headingSource),n=Ps(c=>c.rawGPSHeading),r=Ps(c=>c.setSmoothedHeading),i=Y.useRef(new nle(6)),s=Y.useRef(new nle(10)),o=Y.useRef(0),a=Y.useRef(null),l=33;Y.useEffect(()=>{if(!t||e!=="gps"||n===null||n===a.current)return;a.current=n;const c=performance.now();if(c-o.current<l)return;i.current.add(n);const u=i.current.getSmoothed();u!==null&&(o.current=c,r(u))},[t,e,n,r]),Y.useEffect(()=>{if(!t||e!=="compass")return;let c=0;const u=80,h=f=>{const g=performance.now();if(g-c<u||g-o.current<l)return;c=g;let y=null;if(f.webkitCompassHeading!==void 0?y=f.webkitCompassHeading:f.alpha!==null&&(y=(360-f.alpha)%360),y!==null){s.current.add(y);const _=s.current.getSmoothed();_!==null&&(o.current=g,r(_))}};return window.addEventListener("deviceorientationabsolute",h),window.addEventListener("deviceorientation",h),()=>{window.removeEventListener("deviceorientationabsolute",h),window.removeEventListener("deviceorientation",h)}},[t,e,r]),Y.useEffect(()=>{t||(i.current.clear(),s.current.clear(),a.current=null)},[t])}function zAt(){const t=li(i=>i.map),e=Ws(i=>i.setLayerOpacity),n=Ws(i=>i.visible),r=Y.useRef(null);Y.useEffect(()=>{if(!t)return;const i=()=>{const s=t.getView().getZoom();if(!s||r.current!==null&&Math.abs(s-r.current)<.5)return;r.current=s;const o=n["AHN 0.5m"],a=n["AHN4 Multi-Hillshade NL"];!o&&!a||(o&&(s>=18?e("AHN 0.5m",.85):s>=16?e("AHN 0.5m",.75):s>=14?e("AHN 0.5m",.65):e("AHN 0.5m",.55)),a&&(s>=18?e("AHN4 Multi-Hillshade NL",.8):s>=16?e("AHN4 Multi-Hillshade NL",.7):s>=14?e("AHN4 Multi-Hillshade NL",.6):e("AHN4 Multi-Hillshade NL",.5)))};return t.on("moveend",i),i(),()=>{t.un("moveend",i)}},[t,n,e])}const BF=2e3;async function GAt(){const t=[ms,yh,Ba];await Promise.all(t.map(e=>e.persist.hasHydrated()?Promise.resolve():new Promise(n=>{const r=e.persist.onFinishHydration(()=>{r(),n()})})))}function UAt(){const t=DO(T=>T.user),{layers:e,clearAll:n}=ms(),{vondsten:r,clearAll:i}=yh(),{savedRoutes:s}=Ba(),o=Y.useRef(null),a=Y.useRef(!0),l=Y.useRef(""),c=Y.useRef(""),u=Y.useRef(""),[h,f]=Y.useState(!1);Y.useEffect(()=>{GAt().then(()=>{f(!0),console.log(" Stores gehydrateerd uit localStorage")})},[]);const g=Y.useCallback(async T=>{if(t)try{const A=Wy(cg,"users",t.uid);await Oj(A,{layers:T,layersUpdatedAt:Lj()},{merge:!0}),console.log(" Lagen gesynchroniseerd naar cloud")}catch(A){console.error(" Fout bij synchroniseren lagen:",A)}},[t]),y=Y.useCallback(async T=>{if(t)try{const A=Wy(cg,"users",t.uid);await Oj(A,{vondsten:T,vondstenUpdatedAt:Lj()},{merge:!0}),console.log(" Vondsten gesynchroniseerd naar cloud")}catch(A){console.error(" Fout bij synchroniseren vondsten:",A)}},[t]),_=Y.useCallback(async T=>{if(t)try{const A=Wy(cg,"users",t.uid);await Oj(A,{routes:T,routesUpdatedAt:Lj()},{merge:!0}),console.log(" Routes gesynchroniseerd naar cloud")}catch(A){console.error(" Fout bij synchroniseren routes:",A)}},[t]),b=Y.useCallback(async()=>{if(t)try{const T=Wy(cg,"users",t.uid),A=await ODe(T);if(A.exists()){const I=A.data();if(I.layers&&Array.isArray(I.layers)){const P=I.layers,M=ms.getState().layers,V=[...P],C=new Set(P.map(N=>N.id));M.forEach(N=>{C.has(N.id)||V.push(N)}),ms.setState({layers:V}),l.current=JSON.stringify(V),console.log(` ${P.length} lagen geladen uit cloud`)}if(I.vondsten&&Array.isArray(I.vondsten)){const P=I.vondsten,M=yh.getState().vondsten,V=[...P],C=new Set(P.map(N=>N.id));M.forEach(N=>{C.has(N.id)||V.push(N)}),yh.setState({vondsten:V}),c.current=JSON.stringify(V),console.log(` ${P.length} vondsten geladen uit cloud`)}if(I.routes&&Array.isArray(I.routes)){const P=I.routes,M=Ba.getState().savedRoutes,V=[...P],C=new Set(P.map(O=>O.id));M.forEach(O=>{C.has(O.id)||V.push(O)});const N=new Set(V.map(O=>O.id));Ba.setState({savedRoutes:V,visibleRouteIds:N}),u.current=JSON.stringify(V),console.log(` ${P.length} routes geladen uit cloud`)}}else console.log(" Geen cloud data gevonden, lokale data wordt gesynchroniseerd..."),await g(e),await y(r),await _(s);a.current=!1}catch(T){console.error(" Fout bij laden uit cloud:",T),a.current=!1}},[t,e,r,s,g,y,_]);return Y.useEffect(()=>{h&&(t?(a.current=!0,b()):(a.current=!0,l.current="",c.current="",u.current=""))},[t?.uid,h]),Y.useEffect(()=>{if(!t||!h||a.current)return;const T=JSON.stringify(e);if(T!==l.current)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{l.current=T,g(e)},BF),()=>{o.current&&clearTimeout(o.current)}},[t,e,g]),Y.useEffect(()=>{if(!t||!h||a.current)return;const T=JSON.stringify(r);if(T!==c.current)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{c.current=T,y(r)},BF),()=>{o.current&&clearTimeout(o.current)}},[t,r,y]),Y.useEffect(()=>{if(!t||!h||a.current)return;const T=JSON.stringify(s);if(T!==u.current)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{u.current=T,_(s)},BF),()=>{o.current&&clearTimeout(o.current)}},[t,s,_]),{isLoggedIn:!!t,syncLayersToCloud:g,syncVondstenToCloud:y,syncRoutesToCloud:_}}function BAt(){VAt(),zAt(),UAt();const t=Ps(_=>_.fetchPassivePosition);Y.useEffect(()=>{t()},[t]);const n=14*an(_=>_.fontScale)/100,r=gr(_=>_.vondstFormOpen),i=gr(_=>_.vondstFormLocation),s=gr(_=>_.closeVondstForm),o=gr(_=>_.routeDashboardOpen),a=gr(_=>_.toggleRouteDashboard),l=gr(_=>_.monumentSearchOpen),c=gr(_=>_.closeMonumentSearch),u=ST(_=>_.showBuienradar),h=ST(_=>_.setShowBuienradar),f=an(_=>_.hideWelcomeModal),[g,y]=Y.useState(!f);return p.jsx(HTt,{children:p.jsxs("div",{style:{fontSize:`${n}px`},children:[p.jsx(gAt,{}),p.jsx(zit,{}),p.jsx(udt,{}),p.jsx(eAt,{}),p.jsx(JTt,{}),p.jsx(rAt,{}),p.jsx(Lkt,{}),p.jsx(Dkt,{}),p.jsx(jkt,{}),p.jsx(Fkt,{}),p.jsx(yTt,{}),p.jsx(_Tt,{}),p.jsx(UTt,{}),p.jsx(ldt,{}),p.jsx(Mkt,{}),p.jsx(Nkt,{}),p.jsx(BTt,{}),p.jsx(ddt,{}),p.jsx(xdt,{}),p.jsx(GTt,{}),p.jsx(mkt,{}),p.jsx($Tt,{}),p.jsx(MAt,{}),p.jsx(LAt,{}),p.jsx(FAt,{}),p.jsx(ykt,{}),p.jsx(FTt,{}),p.jsx(Zkt,{}),p.jsx(Jkt,{isVisible:u,onClose:()=>h(!1)}),p.jsx(hkt,{}),p.jsx(iAt,{}),p.jsx(hAt,{}),p.jsx(dAt,{}),p.jsx(mAt,{}),p.jsx(Hkt,{isOpen:o,onClose:a}),p.jsx(Wn,{children:r&&p.jsx(zSe,{onClose:s,initialLocation:i||void 0})}),p.jsx(wAt,{isOpen:l,onClose:c}),p.jsx(EAt,{}),p.jsx(TAt,{isOpen:g,onClose:()=>y(!1)})]})})}const WAt="fef02a7628814a519d5f0eeb2d82656e";function HAt(){nr.apiKey=WAt}HAt();console.log(`%c DetectorApp v${N5}`,"background: #4CAF50; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold;");fke.createRoot(document.getElementById("root")).render(p.jsx(BAt,{}));export{Nfe as $,ns as A,Zr as B,gs as C,ES as D,Wt as E,yr as F,BL as G,jCe as H,zCe as I,Sv as J,Ju as K,J5 as L,st as M,Cye as N,As as O,ki as P,eRt as Q,Qt as R,xn as S,$f as T,_ie as U,Ol as V,tRt as W,Z0 as X,J0 as Y,kt as Z,ve as _,bRe as a,kb as a$,Lfe as a0,Dfe as a1,_e as a2,dIt as a3,oIt as a4,JIt as a5,pLt as a6,z6e as a7,TLt as a8,VKe as a9,Ttt as aA,LI as aB,gKe as aC,G2 as aD,Ud as aE,qg as aF,Ot as aG,Kt as aH,Xye as aI,WW as aJ,Zye as aK,Yye as aL,lre as aM,q4t as aN,kGe as aO,m4t as aP,dpe as aQ,Sw as aR,W2 as aS,fA as aT,ii as aU,yu as aV,jB as aW,bc as aX,Cr as aY,Tb as aZ,va as a_,z1e as aa,H3t as ab,q3t as ac,U3t as ad,iA as ae,fW as af,fa as ag,kI as ah,Eh as ai,UKe as aj,W4 as ak,XVe as al,A3t as am,Ze as an,Jn as ao,Ql as ap,Ma as aq,Zf as ar,Yr as as,Jd as at,tCt as au,Mg as av,gIt as aw,Rfe as ax,Kye as ay,LOt as az,pRe as b,fd as b$,wh as b0,wMt as b1,_Mt as b2,xMt as b3,Gd as b4,KO as b5,bi as b6,Al as b7,NW as b8,ALt as b9,ue as bA,oPt as bB,er as bC,Di as bD,Ea as bE,nr as bF,QCt as bG,OIt as bH,uje as bI,Cg as bJ,Vr as bK,yee as bL,JMt as bM,Zn as bN,Mfe as bO,SI as bP,spe as bQ,Tze as bR,Bje as bS,Ha as bT,$It as bU,RT as bV,ix as bW,MI as bX,sn as bY,gg as bZ,mg as b_,q2 as ba,w_e as bb,Wfe as bc,A8e as bd,JPt as be,xme as bf,uCt as bg,is as bh,Bfe as bi,Ga as bj,xR as bk,mMt as bl,a_e as bm,El as bn,Zy as bo,fGe as bp,bb as bq,TPt as br,X_e as bs,VO as bt,jCt as bu,bW as bv,x as bw,E as bx,cr as by,ka as bz,Ll as c,yn as c$,Xy as c0,tc as c1,Q1 as c2,ul as c3,PYe as c4,PCt as c5,CCt as c6,JCt as c7,J3t as c8,DCt as c9,jr as cA,yb as cB,Ra as cC,P3t as cD,_o as cE,yXe as cF,QW as cG,ZO as cH,n3t as cI,A2 as cJ,JKe as cK,vee as cL,ZB as cM,wYe as cN,sve as cO,z3t as cP,V3t as cQ,M3t as cR,vA as cS,yA as cT,Mb as cU,L9 as cV,nte as cW,yo as cX,PBe as cY,lPt as cZ,aPt as c_,LCt as ca,o4t as cb,bze as cc,Z3t as cd,Xo as ce,pn as cf,RCt as cg,OCt as ch,NCt as ci,MCt as cj,zKe as ck,GKe as cl,HZe as cm,rn as cn,qt as co,ea as cp,Xs as cq,qW as cr,YWe as cs,r9e as ct,s9e as cu,i9e as cv,o9e as cw,lCt as cx,cCt as cy,vu as cz,Mn as d,K4 as d$,Dl as d0,fRt as d1,pRt as d2,y3t as d3,mRt as d4,AMt as d5,Lit as d6,WT as d7,att as d8,tOt as d9,P8e as dA,Bt as dB,exe as dC,yz as dD,$tt as dE,jj as dF,WI as dG,hV as dH,yMt as dI,P4t as dJ,Y4t as dK,Id as dL,fme as dM,g3t as dN,mn as dO,_a as dP,th as dQ,sa as dR,zpe as dS,l9 as dT,ptt as dU,Pfe as dV,wi as dW,k7 as dX,IW as dY,XIt as dZ,ya as d_,Ln as da,rOt as db,Ob as dc,kW as dd,yme as de,RI as df,p1 as dg,J1 as dh,Bve as di,$3t as dj,EXe as dk,eze as dl,Hu as dm,SXe as dn,qa as dp,Ec as dq,O6e as dr,_Rt as ds,Vn as dt,FI as du,Q_ as dv,$i as dw,Tme as dx,XM as dy,NM as dz,lr as e,fPt as e$,YIt as e0,mCt as e1,N_e as e2,g0 as e3,M_e as e4,yQe as e5,eBe as e6,rIt as e7,iIt as e8,V_e as e9,V8e as eA,Kte as eB,ZFe as eC,H4t as eD,YRt as eE,du as eF,kIt as eG,aRt as eH,jfe as eI,RQe as eJ,w0e as eK,Mme as eL,vXe as eM,B3t as eN,HW as eO,q1 as eP,BKe as eQ,X3t as eR,dc as eS,Y3t as eT,FKe as eU,yRt as eV,ru as eW,tL as eX,_Qe as eY,_3t as eZ,v$e as e_,Rb as ea,FQe as eb,hz as ec,Ev as ed,Sh as ee,UI as ef,dA as eg,rQe as eh,F_e as ei,sQe as ej,D_e as ek,$_e as el,U8e as em,oW as en,aW as eo,G8e as ep,QO as eq,eL as er,Wie as es,iDt as et,eDt as eu,HLt as ev,es as ew,BLt as ex,uDt as ey,hDt as ez,sI as f,JLt as f$,mje as f0,U1 as f1,LB as f2,iPt as f3,QWe as f4,Gye as f5,oH as f6,eWe as f7,EQe as f8,dWe as f9,PQe as fA,uQe as fB,hQe as fC,OQe as fD,al as fE,fs as fF,ll as fG,wb as fH,zCt as fI,Jg as fJ,nGe as fK,b9 as fL,UB as fM,P2 as fN,kl as fO,Fje as fP,Pme as fQ,_me as fR,ICt as fS,Ro as fT,Qk as fU,Ks as fV,rCt as fW,nCt as fX,Lxe as fY,Dxe as fZ,qLt as f_,iQe as fa,j_e as fb,NQe as fc,dRt as fd,$O as fe,FO as ff,hpe as fg,rPt as fh,Jze as fi,VI as fj,tPt as fk,$B as fl,jO as fm,nBe as fn,wWe as fo,LWe as fp,iJe as fq,Sze as fr,ERt as fs,I2 as ft,K3t as fu,b0e as fv,xWe as fw,sBe as fx,oBe as fy,aBe as fz,vh as g,VRt as g$,kze as g0,D4t as g1,Z4t as g2,Hg as g3,oee as g4,ZCt as g5,t5t as g6,qZe as g7,fp as g8,Cje as g9,Qg as gA,S3t as gB,h1 as gC,NIt as gD,UIt as gE,rDt as gF,Dje as gG,jje as gH,c9 as gI,nJe as gJ,PRt as gK,ARt as gL,gMt as gM,WUe as gN,DRt as gO,dGe as gP,j9 as gQ,Hi as gR,AOt as gS,LM as gT,v7 as gU,Rx as gV,nL as gW,vMt as gX,wv as gY,B4t as gZ,M4t as g_,oA as ga,Vi as gb,W0e as gc,pl as gd,IRt as ge,j2 as gf,URt as gg,d$ as gh,oMt as gi,pL as gj,DW as gk,jW as gl,sMt as gm,pMt as gn,gL as go,YGe as gp,CZe as gq,kye as gr,mH as gs,IQe as gt,E3t as gu,w3t as gv,BI as gw,Us as gx,b3t as gy,Op as gz,SDt as h,sPt as h$,dNt as h0,hNt as h1,fc as h2,qPt as h3,iBe as h4,SRt as h5,sFe as h6,cd as h7,cl as h8,yNt as h9,Cme as hA,Rme as hB,gRt as hC,sWe as hD,zye as hE,$Ye as hF,mQe as hG,Uye as hH,hCt as hI,$8e as hJ,pBe as hK,uWe as hL,fBe as hM,mL as hN,RM as hO,vIt as hP,TQe as hQ,pQe as hR,yve as hS,C4t as hT,eH as hU,ZZe as hV,BT as hW,Xf as hX,ac as hY,EHe as hZ,dPt as h_,YCt as ha,_Fe as hb,bNt as hc,ev as hd,gA as he,sIt as hf,jIt as hg,us as hh,c$ as hi,AGe as hj,xv as hk,nne as hl,Eb as hm,xb as hn,qs as ho,uH as hp,fCt as hq,a9e as hr,K8e as hs,Vme as ht,SQe as hu,xCt as hv,EUe as hw,vRt as hx,dUe as hy,ete as hz,Dn as i,co as i$,bpe as i0,VBe as i1,zIt as i2,NI as i3,ppe as i4,m0 as i5,KWe as i6,HWe as i7,BWe as i8,u$ as i9,rLt as iA,r5t as iB,Z0e as iC,lA as iD,d7 as iE,mUe as iF,eye as iG,cRt as iH,FOt as iI,QIt as iJ,_Pt as iK,s8e as iL,u8e as iM,f8e as iN,wd as iO,K$e as iP,ePt as iQ,Une as iR,pze as iS,TI as iT,$Pt as iU,Oit as iV,B1 as iW,CB as iX,Aje as iY,$Rt as iZ,jBe as i_,Oye as ia,vGe as ib,cw as ic,xje as id,Vd as ie,oDt as ig,E4t as ih,b4t as ii,FYe as ij,L0e as ik,KGe as il,Zte as im,yze as io,aA as ip,O2 as iq,Ctt as ir,aLt as is,Q_e as it,fLt as iu,GN as iv,hLt as iw,YT as ix,dLt as iy,E3 as iz,EDt as j,vOt as j$,J0e as j0,pUe as j1,yw as j2,tIt as j3,m_e as j4,OW as j5,H as j6,H8e as j7,Rd as j8,UZe as j9,T4t as jA,S4t as jB,Jo as jC,RW as jD,l7 as jE,CW as jF,FRt as jG,XRt as jH,sne as jI,Aye as jJ,cPt as jK,w1e as jL,WPt as jM,aDt as jN,qm as jO,NUe as jP,OMt as jQ,PMt as jR,nd as jS,xIt as jT,wIt as jU,_It as jV,dje as jW,_v as jX,ume as jY,xOt as jZ,_Ot as j_,fH as ja,mGe as jb,NRt as jc,nN as jd,Oxe as je,Qnt as jf,ert as jg,zLt as jh,Prt as ji,GLt as jj,LLt as jk,OLt as jl,Rrt as jm,tT as jn,VLt as jo,DUe as jp,rBe as jq,tBe as jr,lQe as js,$Qe as jt,VQe as ju,wUe as jv,Eye as jw,F8e as jx,cQe as jy,O_e as jz,pc as k,Q$e as k$,yOt as k0,bOt as k1,wOt as k2,gOt as k3,mOt as k4,QBe as k5,m0e as k6,Vye as k7,rRt as k8,jze as k9,aH as kA,R4t as kB,I4t as kC,zMt as kD,z$e as kE,kPt as kF,PJe as kG,CJe as kH,L_e as kI,oRt as kJ,IZe as kK,nLt as kL,A9e as kM,O9e as kN,OI as kO,wCt as kP,gCt as kQ,yCt as kR,FIt as kS,Sje as kT,H6e as kU,KPt as kV,WB as kW,NPt as kX,MPt as kY,TRt as kZ,eFe as k_,nRt as ka,$ze as kb,pve as kc,gUe as kd,gee as ke,pOt as kf,uW as kg,C9e as kh,Vze as ki,TB as kj,bIt as kk,kB as kl,EIt as km,XI as kn,gw as ko,AZe as kp,qje as kq,mLt as kr,fve as ks,C2 as kt,BO as ku,Bf as kv,I3t as kw,XO as kx,TW as ky,AIt as kz,TTt as l,w9 as l$,HRt as l0,GRt as l1,Ije as l2,Yfe as l3,Ti as l4,eCt as l5,NL as l6,NH as l7,Sl as l8,OL as l9,d1 as lA,kLt as lB,uIt as lC,CGe as lD,vie as lE,_Ge as lF,yGe as lG,zN as lH,$0e as lI,COt as lJ,IOt as lK,POt as lL,Stt as lM,Ont as lN,Gnt as lO,G6e as lP,LIt as lQ,Kfe as lR,GO as lS,GIt as lT,mA as lU,XXe as lV,gye as lW,LRt as lX,L$ as lY,AI as lZ,uPt as l_,dDt as la,Md as lb,RPt as lc,tx as ld,qCt as le,rye as lf,nye as lg,zUe as lh,qM as li,O0e as lj,JRt as lk,$W as ll,rx as lm,UMt as ln,BMt as lo,WMt as lp,hMt as lq,cMt as lr,iMt as ls,cUe as lt,lMt as lu,FUe as lv,GCt as lw,MRt as lx,GMt as ly,NNt as lz,Ni as m,DIt as m$,dL as m0,FMt as m1,$Mt as m2,B0e as m3,G0e as m4,GGe as m5,BGe as m6,WS as m7,Fx as m8,tKe as m9,Gf as mA,eg as mB,Ts as mC,oXe as mD,LJe as mE,TIt as mF,fWe as mG,DYe as mH,iWe as mI,oWe as mJ,hOt as mK,LT as mL,C3t as mM,Pye as mN,I0e as mO,Ofe as mP,MIt as mQ,rpe as mR,Nme as mS,fee as mT,ype as mU,bnt as mV,xRt as mW,Q0e as mX,uRt as mY,AW as mZ,mpe as m_,W3t as ma,vNt as mb,wze as mc,wNt as md,_Nt as me,Ng as mf,Xtt as mg,Jtt as mh,Qtt as mi,Ape as mj,x3t as mk,qB as ml,ux as mm,kJe as mn,kOt as mo,_8e as mp,hme as mq,nYe as mr,xL as ms,i3 as mt,sYe as mu,A0e as mv,gNt as mw,Zze as mx,lDt as my,IS as mz,ts as n,ONt as n$,s7 as n0,pYe as n1,nIt as n2,I1e as n3,u7 as n4,jNt as n5,DNt as n6,PZe as n7,A4t as n8,k4t as n9,VOt as nA,k3t as nB,xNt as nC,E8e as nD,mve as nE,U2 as nF,fNt as nG,pNt as nH,mNt as nI,EW as nJ,nPt as nK,mIt as nL,p_e as nM,ZOt as nN,XOt as nO,cOt as nP,uOt as nQ,HIt as nR,i_e as nS,__e as nT,H2 as nU,dd as nV,LW as nW,F0e as nX,zI as nY,n_e as nZ,ZI as n_,NB as na,bWe as nb,_We as nc,gQe as nd,vWe as ne,UYe as nf,KB as ng,BPt as nh,hW as ni,QPt as nj,C_ as nk,j6e as nl,N9 as nm,sLt as nn,wnt as no,oLt as np,iLt as nq,Z_e as nr,SH as ns,La as nt,yUe as nu,tS as nv,iRt as nw,_tt as nx,T3t as ny,YOt as nz,bn as o,gXe as o$,Q$ as o0,BCt as o1,bN as o2,MQe as o3,ZGe as o4,fN as o5,dCt as o6,LGe as o7,UCt as o8,oo as o9,HCt as oA,pCt as oB,XCt as oC,qIt as oD,ctt as oE,gGe as oF,fIt as oG,cIt as oH,zfe as oI,aCt as oJ,oCt as oK,bRt as oL,cpe as oM,qXe as oN,MZe as oO,r_e as oP,axe as oQ,SIt as oR,WOt as oS,HOt as oT,qOt as oU,KOt as oV,MOt as oW,OOt as oX,NOt as oY,Ztt as oZ,Kg as o_,io as oa,J4t as ob,tNt as oc,X4t as od,Y$e as oe,ZIt as of,Gme as og,kZe as oh,JGe as oi,QGe as oj,HM as ok,ORt as ol,FGe as om,VGe as on,Sit as oo,fu as op,kL as oq,QJe as or,APt as os,f_e as ot,g_e as ou,cJe as ov,s5t as ow,vJe as ox,o5t as oy,qBe as oz,kTt as p,KRt as p$,hve as p0,hYe as p1,Oee as p2,M8e as p3,$Ct as p4,LNt as p5,sCt as p6,iCt as p7,n9e as p8,Fnt as p9,Xc as pA,zOt as pB,vCt as pC,wFe as pD,$Ot as pE,jOt as pF,Dtt as pG,DOt as pH,dOt as pI,fOt as pJ,GOt as pK,UOt as pL,JOt as pM,QOt as pN,EOt as pO,eLt as pP,tLt as pQ,Ett as pR,Att as pS,_xe as pT,M2 as pU,BOt as pV,ftt as pW,VIt as pX,vUe as pY,yBe as pZ,rUe as p_,X$e as pa,Vnt as pb,Lnt as pc,IMt as pd,lOt as pe,v3t as pf,SYe as pg,G3t as ph,N3t as pi,D3t as pj,O3t as pk,j3t as pl,L3t as pm,F3t as pn,ELt as po,cee as pp,R3t as pq,uGe as pr,CRt as ps,wGe as pt,jRt as pu,nNt as pv,TJe as pw,iu as px,BRt as py,ROt as pz,vme as q,DWe as q$,zNt as q0,IWe as q1,U0e as q2,_ye as q3,Wpe as q4,KT as q5,BIt as q6,AWe as q7,qMt as q8,qRt as q9,xLt as qA,_Lt as qB,Ktt as qC,oxe as qD,TOt as qE,SOt as qF,Wtt as qG,aOt as qH,aMt as qI,Kf as qJ,h7 as qK,ZRt as qL,Fa as qM,V6e as qN,jQe as qO,hIt as qP,G4t as qQ,U4t as qR,bUe as qS,$We as qT,jWe as qU,vye as qV,iKe as qW,cWe as qX,aWe as qY,lWe as qZ,SWe as q_,cHe as qa,yie as qb,L6e as qc,lIt as qd,aIt as qe,jUe as qf,QKe as qg,jLt as qh,$Lt as qi,lYe as qj,DLt as qk,_A as ql,wA as qm,tYe as qn,IIt as qo,gYe as qp,yYe as qq,iH as qr,Ait as qs,cLt as qt,uLt as qu,lRt as qv,lLt as qw,SLt as qx,wLt as qy,bLt as qz,tEe as r,hWe as r$,CMt as r0,SZe as r1,mWe as r2,i5t as r3,cDt as r4,n5t as r5,e0 as r6,tDt as r7,sDt as r8,nDt as r9,qqe as rA,DJe as rB,k_e as rC,WIt as rD,xne as rE,p4t as rF,YNt as rG,$4t as rH,tWe as rI,Lx as rJ,zYe as rK,sRt as rL,v4t as rM,O4t as rN,hRt as rO,HGe as rP,VYe as rQ,Yme as rR,Jme as rS,NMt as rT,V4t as rU,MMt as rV,RMt as rW,WRt as rX,UW as rY,KIt as rZ,z4t as r_,hUe as ra,QRt as rb,nMt as rc,dMt as rd,eMt as re,rMt as rf,fMt as rg,VUe as rh,zBe as ri,RRt as rj,HI as rk,qI as rl,KI as rm,hZe as rn,KNt as ro,K4t as rp,L4t as rq,F4t as rr,j4t as rs,PIt as rt,aNt as ru,oNt as rv,yIt as rw,N4t as rx,zRt as ry,W4t as rz,Xe as s,jYe as s0,EWe as s1,bMt as s2,SMt as s3,ILt as s4,ob as t,DSe as u,gi as v,KCt as w,zd as x,II as y,fpe as z};
//# sourceMappingURL=index-D_n1PKbT.js.map
