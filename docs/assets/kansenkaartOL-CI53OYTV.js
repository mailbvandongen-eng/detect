import{V as y,H as _,l as P,p as v,G as F,F as K,P as b}from"./index-ZdJK4O_C.js";const s={amk_zeer_hoog:1,amk_hoog:.8,amk_basis:.6,grafheuvel:.8,hunebed:.8,steentijd:.6,uikav:.6,kasteel:.4,ruine:.4};let d=null,g=!1,i=null;async function c(e){try{const o=await fetch(e);if(!o.ok)return console.warn(`Kansenkaart: Could not load ${e}`),[];const a=await o.json();return new F().readFeatures(a,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"})}catch(o){return console.warn(`Kansenkaart: Error loading ${e}:`,o),[]}}function r(e){const o=e.getGeometry();if(!o)return null;if(o.getType()==="Point")return o.getCoordinates();const a=o.getExtent();return[(a[0]+a[2])/2,(a[1]+a[3])/2]}function l(e,o){return new K({geometry:new b(e),weight:o})}async function G(){return d||(g&&i||(g=!0,i=(async()=>{const e=[];console.log("ðŸ—ºï¸ Kansenkaart: Loading archaeological data sources...");const[o,a,u,h,p,k,m]=await Promise.all([P("/detectorapp-nl/data/amk_monumenten_full.topojson").catch(()=>null),c("/detectorapp-nl/data/grafheuvels.geojson"),c("/detectorapp-nl/data/steentijd/hunebedden.geojson"),c("/detectorapp-nl/data/steentijd/euroevol_nl_be.geojson"),c("/detectorapp-nl/data/uikav/uikav_archeo_punten.geojson"),c("/detectorapp-nl/data/kastelen.geojson"),c("/detectorapp-nl/data/ruines_osm.geojson")]);if(o){const n=v(o);for(const t of n){const w=r(t);if(!w)continue;const j=(t.get("kwaliteitswaarde")||"").toLowerCase();let f=s.amk_basis;j.includes("zeer hoge")?f=s.amk_zeer_hoog:j.includes("hoge")&&(f=s.amk_hoog),e.push(l(w,f))}console.log(`  âœ“ AMK: ${n.length} monumenten`)}for(const n of a){const t=r(n);t&&e.push(l(t,s.grafheuvel))}console.log(`  âœ“ Grafheuvels: ${a.length}`);for(const n of u){const t=r(n);t&&e.push(l(t,s.hunebed))}console.log(`  âœ“ Hunebedden: ${u.length}`);for(const n of h){const t=r(n);t&&e.push(l(t,s.steentijd))}console.log(`  âœ“ Steentijd sites: ${h.length}`);for(const n of p){const t=r(n);t&&e.push(l(t,s.uikav))}console.log(`  âœ“ UIKAV punten: ${p.length}`);for(const n of k){const t=r(n);t&&e.push(l(t,s.kasteel))}console.log(`  âœ“ Kastelen: ${k.length}`);for(const n of m){const t=r(n);t&&e.push(l(t,s.ruine))}return console.log(`  âœ“ RuÃ¯nes: ${m.length}`),console.log(`ðŸ—ºï¸ Kansenkaart: ${e.length} total weighted points loaded`),d=e,g=!1,e})()),i)}async function S(){try{const e=await G(),o=new y({features:e}),a=new _({source:o,properties:{title:"Kansenkaart",type:"heatmap"},visible:!1,opacity:.7,zIndex:5,blur:25,radius:15,weight:u=>u.get("weight")||.5,gradient:["#0000ff","#00ffff","#00ff00","#ffff00","#ff8800","#ff0000"]});return console.log("âœ“ Kansenkaart heatmap layer created"),a}catch(e){return console.error("Failed to create Kansenkaart layer:",e),null}}export{S as createKansenkaartLayerOL};
//# sourceMappingURL=kansenkaartOL-CI53OYTV.js.map
