import{gQ as g,a$ as b,J as y,b7 as S,a_ as w,b6 as C,fG as $,b8 as I,b0 as M,aZ as h,b9 as k,gV as x,gW as d,gX as D,aw as L,gY as c}from"./index-B5eMh3ws.js";import{D as v,L as F}from"./defaults3D-BRI6AkWs.js";const p="#useCIMFallbackSymbology()",a={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function T(e,l=a){if(!e)return{symbol:null};const{retainId:r=a.retainId,ignoreDrivers:n=a.ignoreDrivers,hasLabelingContext:s=a.hasLabelingContext,retainCIM:i=a.retainCIM,cimFallbackEnabled:t=a.cimFallbackEnabled}=l;let o=null;if(g(e))o=e.clone();else if(e.type==="web-style")o=e.clone();else if(e.type==="cim"){const m=e.data?.symbol?.type;switch(m){case"CIMPointSymbol":o=i?e.clone():b.fromCIMSymbol(e);break;case"CIMLineSymbol":t&&(o=F.clone(),l?.logWarning?.(p,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":t&&(o=v.clone(),l?.logWarning?.(p,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!o)return{error:new y("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${m||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof S)o=w.fromSimpleLineSymbol(e);else if(e instanceof C)o=b.fromSimpleMarkerSymbol(e);else if(e instanceof $)o=b.fromPictureMarkerSymbol(e);else if(e instanceof I)o=l.geometryType&&l.geometryType==="mesh"?M.fromSimpleFillSymbol(e):h.fromSimpleFillSymbol(e);else{if(!(e instanceof k))return{error:new y("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};o=s?x.fromTextSymbol(e):b.fromTextSymbol(e)}return r&&o&&o.type!=="cim"&&(o.id=e.id),!n||o.type==="cim"||o instanceof d||o.symbolLayers.forEach(m=>m.ignoreDrivers=!0),{symbol:o}}function P(e,l,r,n){const s=u(e,{},{context:n,isLabelSymbol:!1});s!=null&&L(r,s,l)}function V(e,l,r,n){const s=u(e,{},{context:n,isLabelSymbol:!0});s!=null&&(l[r]=s)}function f(e){return g(e)||e instanceof d}function U(e){return e?.type==="polygon-3d"||e?.type==="line-3d"}function u(e,l,r){if(e==null)return null;const{context:n,isLabelSymbol:s}=r,i=n?.origin,t=n?.messages;if(i==="web-scene"&&!f(e)){const o=T(e,{retainCIM:!0,hasLabelingContext:s});return o.symbol!=null?o.symbol.write(l,n):(t?.push(new y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:n,error:o.error})),null)}return c(n?.layer)&&U(e)?(t?.push(new y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported on layers of type '${n?.layer?.declaredClass}'.`,{symbol:e,context:n})),null):(i==="web-map"||i==="portal-item"&&!c(n?.layer))&&f(e)?(t?.push(new y("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:n})),null):e.write(l,n)}function j(e,l){return D(e,null,l)}export{T as a,a as g,P as i,V as p,j as u};
//# sourceMappingURL=jsonUtils-CSQjDltU.js.map
