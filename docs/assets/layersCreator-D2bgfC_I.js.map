{"version":3,"file":"layersCreator-D2bgfC_I.js","sources":["../../node_modules/@arcgis/core/portal/support/featureCollectionUtils.js","../../node_modules/@arcgis/core/layers/support/layersCreator.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nfunction e(e){return t(e,\"notes\")}function r(e){return t(e,\"markup\")}function n(e){return t(e,\"route\")}function t(e,r){return!(!e.layerType||\"ArcGISFeatureLayer\"!==e.layerType)&&e.featureCollectionType===r}export{e as isMapNotesLayer,r as isMarkupLayer,n as isRouteLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Collection.js\";import has from\"../../core/has.js\";import{LayerLoadContext as r}from\"./LayerLoadContext.js\";import{layerLookupMap as a}from\"./lazyLayerLoader.js\";import y from\"../../portal/PortalItem.js\";import{isMapNotesLayer as t,isMarkupLayer as i,isRouteLayer as L}from\"../../portal/support/featureCollectionUtils.js\";import{selectLayerClassPath as n}from\"../../portal/support/portalLayers.js\";import{loadStyleRenderer as o}from\"../../renderers/support/styleUtils.js\";async function l(e,r,a){if(!r)return;const y=r.map(e=>f(e,a)),t=await Promise.allSettled(y);for(const i of t)\"rejected\"===i.status||i.value&&e.add(i.value)}const s={ArcGISDimensionLayer:\"DimensionLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",ArcGISTiledElevationServiceLayer:\"ElevationLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BuildingSceneLayer:\"BuildingSceneLayer\",CatalogLayer:\"CatalogLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GaussianSplatLayer:\"GaussianSplatLayer\",GeoJSON:\"GeoJSONLayer\",GroupLayer:\"GroupLayer\",IntegratedMesh3DTilesLayer:\"IntegratedMesh3DTilesLayer\",Object3DTilesLayer:\"UnsupportedLayer\",IntegratedMeshLayer:\"IntegratedMeshLayer\",KML:\"KMLLayer\",LineOfSightLayer:\"LineOfSightLayer\",MediaLayer:\"MediaLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",OrientedImageryLayer:\"OrientedImageryLayer\",PointCloudLayer:\"PointCloudLayer\",RasterDataLayer:\"UnsupportedLayer\",VectorTileLayer:\"VectorTileLayer\",ViewshedLayer:\"ViewshedLayer\",Voxel:\"VoxelLayer\",WCS:\"WCSLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},c={ArcGISTiledElevationServiceLayer:\"ElevationLayer\",DefaultTileLayer:\"ElevationLayer\",RasterDataElevationLayer:\"UnsupportedLayer\"},p={ArcGISFeatureLayer:\"FeatureLayer\"},S={ArcGISImageServiceLayer:\"UnsupportedLayer\",ArcGISMapServiceLayer:\"UnsupportedLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",DefaultTileLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WCS:\"UnsupportedLayer\",WMS:\"UnsupportedLayer\",WebTiledLayer:\"WebTileLayer\"},u={IntegratedMesh3DTilesLayer:\"IntegratedMesh3DTilesLayer\"},d={ArcGISAnnotationLayer:\"UnsupportedLayer\",ArcGISDimensionLayer:\"UnsupportedLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISStreamLayer:\"StreamLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",ArcGISVideoLayer:\"VideoLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",CatalogLayer:\"CatalogLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GeoJSON:\"GeoJSONLayer\",GeoRSS:\"GeoRSSLayer\",GroupLayer:\"GroupLayer\",KML:\"KMLLayer\",KnowledgeGraphLayer:\"KnowledgeGraphLayer\",MediaLayer:\"MediaLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",OrientedImageryLayer:\"OrientedImageryLayer\",get ParquetLayer(){return has(\"parquetlayer-persistence-enabled\")?\"ParquetLayer\":\"UnsupportedLayer\"},SubtypeGroupLayer:\"SubtypeGroupLayer\",VectorTileLayer:\"VectorTileLayer\",WCS:\"WCSLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},I={ArcGISFeatureLayer:\"FeatureLayer\",SubtypeGroupTable:\"SubtypeGroupLayer\"},g={ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",DefaultTileLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WCS:\"WCSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},m={...d,LinkChartLayer:\"LinkChartLayer\"},T={...I},G={...g};async function f(e,r){return M(await b(e,r),e,r)}async function M(e,r,a){const y=new e;return y.read(r,a.context),\"group\"===y.type&&(\"GroupLayer\"===r.layerType?await C(y,r,a):w(r)?h(y,r,a.context):A(r)&&await W(y,r,a.context)),await o(y,a.context),y}async function b(e,o){const l=o.context,s=v(l);let c=e.layerType||e.type;!c&&o?.defaultLayerType&&(c=o.defaultLayerType);const p=s[c];let S=p?a[p]:a.UnknownLayer;if(w(e)){const t=l?.portal;if(e.itemId){const i=new y({id:e.itemId,portal:t});await i.load();const L=(await n(i,new r)).className||\"UnknownLayer\";S=a[L]}}else\"ArcGISFeatureLayer\"===c?t(e)||i(e)?S=a.MapNotesLayer:L(e)?S=a.RouteLayer:A(e)&&(S=a.GroupLayer):e.wmtsInfo?.url&&e.wmtsInfo.layerIdentifier?S=a.WMTSLayer:\"WFS\"===c&&\"2.0.0\"!==e.wfsInfo?.version&&(S=a.UnsupportedLayer);return S()}function A(e){if(\"ArcGISFeatureLayer\"!==e.layerType||w(e))return!1;return(e.featureCollection?.layers?.length??0)>1}function w(e){return\"Feature Collection\"===e.type}function v(e){let r;switch(e.origin){case\"web-scene\":switch(e.layerContainerType){case\"basemap-base-layers\":r=S;break;case\"basemap-ground-layers\":r=u;break;case\"ground\":r=c;break;case\"tables\":r=p;break;default:r=s}break;case\"link-chart\":switch(e.layerContainerType){case\"basemap-base-layers\":r=G;break;case\"tables\":r=T;break;default:r=m}break;default:switch(e.layerContainerType){case\"basemap-base-layers\":r=g;break;case\"tables\":r=I;break;default:r=d}}return r}async function C(r,a,y){const t=new e,i=l(t,Array.isArray(a.layers)?a.layers:[],y);try{try{if(await i,\"group\"===r.type)return r.layers.addMany(t),r}catch(L){r.destroy();for(const e of t)e.destroy();throw L}}catch(L){throw L}}function h(e,r,a){r.itemId&&(e.portalItem=new y({id:r.itemId,portal:a?.portal}),e.when(()=>{const y=y=>{const t=y.layerId;F(y,e,r,t,a);const i=r.featureCollection?.layers?.[t];i&&y.read(i,a)};e.layers?.forEach(y),e.tables?.forEach(y)}))}async function W(e,r,y){const t=a.FeatureLayer,i=await t(),L=r.featureCollection,n=L?.showLegend,o=L?.layers?.map((a,t)=>{const L=new i;L.read(a,y);const o={...y,ignoreDefaults:!0};return F(L,e,r,t,o),null!=n&&L.read({showLegend:n},o),L});e.layers.addMany(o??[])}function F(e,r,a,y,t){e.read({id:`${r.id}-sublayer-${y}`,visibility:a.visibleLayers?.includes(y)??!0},t)}export{C as populateGroupLayer,l as populateOperationalLayers};\n"],"names":["e","t","r","n","l","a","y","f","i","s","c","p","S","u","d","has","I","g","m","T","G","M","b","C","w","h","A","W","o","v","L","F"],"mappings":"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","x_google_ignoreList":[0,1]}