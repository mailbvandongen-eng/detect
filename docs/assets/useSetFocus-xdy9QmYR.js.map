{"version":3,"file":"useSetFocus-xdy9QmYR.js","sources":["../../node_modules/@esri/calcite-components/dist/chunks/component.js","../../node_modules/@esri/calcite-components/dist/chunks/useSetFocus.js"],"sourcesContent":["/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.3 */\nimport { l as logger } from \"./logger.js\";\nfunction getIconScale(componentScale) {\n  return componentScale === \"l\" ? \"m\" : \"s\";\n}\nfunction warnIfMissingRequiredProp(component, newProp, deprecatedProp) {\n  if (!component[newProp] && !component[deprecatedProp]) {\n    logger.warn(`[${component.el.localName}] \"${newProp.toString()}\" or \"${deprecatedProp.toString()}\" is required.`);\n  }\n}\nfunction isHidden(el) {\n  return el.hidden || el.itemHidden;\n}\nasync function componentFocusable(component) {\n  await component.componentOnReady();\n  await component.updateComplete;\n}\nexport {\n  componentFocusable as c,\n  getIconScale as g,\n  isHidden as i,\n  warnIfMissingRequiredProp as w\n};\n","/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.3 */\nimport { makeGenericController } from \"@arcgis/lumina/controllers\";\nimport { c as componentFocusable } from \"./component.js\";\nimport { k as getRootNode, b as focusElement } from \"./dom.js\";\nconst useSetFocus = () => {\n  return makeGenericController((component, controller) => {\n    let abortController;\n    function handleFocusOut() {\n      abortController?.abort();\n    }\n    controller.onLoad(() => {\n      component.listen(\"focus\", () => {\n        abortController = new AbortController();\n        component.el.addEventListener(\"focusout\", handleFocusOut, { signal: abortController.signal });\n      });\n    });\n    controller.onDisconnected(() => {\n      component.el.removeEventListener(\"focusout\", handleFocusOut);\n    });\n    return async (getFocusTarget, options) => {\n      if (component.disabled) {\n        return;\n      }\n      const focusConfig = toFocusConfig(getFocusTarget());\n      if (!focusConfig) {\n        return;\n      }\n      const { target, includeContainer, strategy } = focusConfig;\n      const rootNode = getRootNode(component.el);\n      const currentActiveElement = rootNode.activeElement;\n      await componentFocusable(component);\n      const focusAlreadyChanged = currentActiveElement !== rootNode.activeElement;\n      if (focusAlreadyChanged || abortController && !abortController?.signal.aborted) {\n        return;\n      }\n      component.el.removeEventListener(\"focus\", handleFocusOut);\n      return focusElement(target, includeContainer, strategy, component.el, options);\n    };\n  });\n};\nfunction isFocusOverride(focusTarget) {\n  return \"target\" in focusTarget && (\"includeContainer\" in focusTarget || \"strategy\" in focusTarget);\n}\nfunction toFocusConfig(focusTarget) {\n  if (!focusTarget) {\n    return;\n  }\n  return isFocusOverride(focusTarget) ? focusTarget : { target: focusTarget };\n}\nexport {\n  useSetFocus as u\n};\n"],"names":["getIconScale","componentScale","componentFocusable","component","useSetFocus","makeGenericController","controller","abortController","handleFocusOut","getFocusTarget","options","focusConfig","toFocusConfig","target","includeContainer","strategy","rootNode","getRootNode","currentActiveElement","focusElement","isFocusOverride","focusTarget"],"mappings":"iHAIA,SAASA,EAAaC,EAAgB,CACpC,OAAOA,IAAmB,IAAM,IAAM,GACxC,CASA,eAAeC,EAAmBC,EAAW,CAC3C,MAAMA,EAAU,iBAAgB,EAChC,MAAMA,EAAU,cAClB,CCZK,MAACC,EAAc,IACXC,EAAsB,CAACF,EAAWG,IAAe,CACtD,IAAIC,EACJ,SAASC,GAAiB,CACxBD,GAAiB,MAAK,CACxB,CACA,OAAAD,EAAW,OAAO,IAAM,CACtBH,EAAU,OAAO,QAAS,IAAM,CAC9BI,EAAkB,IAAI,gBACtBJ,EAAU,GAAG,iBAAiB,WAAYK,EAAgB,CAAE,OAAQD,EAAgB,OAAQ,CAC9F,CAAC,CACH,CAAC,EACDD,EAAW,eAAe,IAAM,CAC9BH,EAAU,GAAG,oBAAoB,WAAYK,CAAc,CAC7D,CAAC,EACM,MAAOC,EAAgBC,IAAY,CACxC,GAAIP,EAAU,SACZ,OAEF,MAAMQ,EAAcC,EAAcH,GAAgB,EAClD,GAAI,CAACE,EACH,OAEF,KAAM,CAAE,OAAAE,EAAQ,iBAAAC,EAAkB,SAAAC,CAAQ,EAAKJ,EACzCK,EAAWC,EAAYd,EAAU,EAAE,EACnCe,EAAuBF,EAAS,cAGtC,GAFA,MAAMd,EAAmBC,CAAS,EAE9B,EADwBe,IAAyBF,EAAS,eACnCT,GAAmB,CAACA,GAAiB,OAAO,SAGvE,OAAAJ,EAAU,GAAG,oBAAoB,QAASK,CAAc,EACjDW,EAAaN,EAAQC,EAAkBC,EAAUZ,EAAU,GAAIO,CAAO,CAC/E,CACF,CAAC,EAEH,SAASU,EAAgBC,EAAa,CACpC,MAAO,WAAYA,IAAgB,qBAAsBA,GAAe,aAAcA,EACxF,CACA,SAAST,EAAcS,EAAa,CAClC,GAAKA,EAGL,OAAOD,EAAgBC,CAAW,EAAIA,EAAc,CAAE,OAAQA,CAAW,CAC3E","x_google_ignoreList":[0,1]}