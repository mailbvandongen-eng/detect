import{ak as h,e7 as S,ba as w,bU as u,i3 as J,ap as N,_ as o,m as p,fG as f,n as O,k as d,h_ as R,aP as v,cl as b,E as x}from"./index-7PLdAUjN.js";var c;let a=c=class extends h{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,r,s,t){if(t.layer?.spatialReference&&!t.layer.spatialReference.equals(this.geometry.spatialReference)){if(!S(e.spatialReference,t.layer.spatialReference))return void(t?.messages&&t.messages.push(new w("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})));const n=new u;J(e,n,t.layer.spatialReference),r[s]=n.toJSON(t)}else r[s]=e.toJSON(t)}clone(){return new c({geometry:N(this.geometry),type:this.type})}};o([p({type:u}),f()],a.prototype,"geometry",void 0),o([O(["web-scene","portal-item"],"geometry")],a.prototype,"writeGeometry",null),o([p({type:["clip","mask","replace"],nonNullable:!0}),f()],a.prototype,"type",void 0),a=c=o([d("esri.layers.support.SceneModification")],a);var i;let l=i=class extends R(v.ofType(a)){constructor(e){super(e),this.url=null}clone(){return new i({url:this.url,items:this.items.map(e=>e.clone())})}toJSON(e){return this.toArray().map(r=>r.toJSON(e)).filter(r=>!!r.geometry)}static fromJSON(e,r){const s=new i;for(const t of e)s.add(a.fromJSON(t,r));return s}static async fromUrl(e,r,s){const t={url:b(e),origin:"service"},n=await x(e,{responseType:"json",signal:s?.signal}),g=r.toJSON(),y=[];for(const m of n.data)y.push(a.fromJSON({...m,geometry:{spatialReference:g,...m.geometry}},t));return new i({url:e,items:y})}};o([p({type:String})],l.prototype,"url",void 0),l=i=o([d("esri.layers.support.SceneModifications")],l);export{l as n};
//# sourceMappingURL=SceneModifications-BBsuGMH0.js.map
