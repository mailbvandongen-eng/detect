import{fa as y,e5 as Y,ec as A,e3 as s,e4 as w,e9 as f,ej as _,ek as d,eY as K,eJ as J,e2 as m,cz as L}from"./index-DwgAJlzK.js";import"./vec42-CRRt1esC.js";import{r as N,c as i,f as P}from"./vectorStacks-BJZjjfMR.js";function rt(r){const t=r[0]*r[0]+r[4]*r[4]+r[8]*r[8],n=r[1]*r[1]+r[5]*r[5]+r[9]*r[9],e=r[2]*r[2]+r[6]*r[6]+r[10]*r[10];return Math.sqrt(Math.max(t,n,e))}function nt(r,t){const n=Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),e=Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),u=Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10]);return y(r,n,e,u),r}function O(r,t,n){Math.abs(r[0])>Math.abs(r[1])?y(t,0,1,0):y(t,1,0,0),Y(n,r,t),Y(t,n,r),A(n,n),A(t,t)}function et(r,t,n,e=s()){const u=w(r),a=w(t),o=f(r,t)/(u*a);if(o<.9999999999999999){const c=Math.acos(o),h=((1-n)*u+n*a)/Math.sin(c),$=h/u*Math.sin((1-n)*c),M=h/a*Math.sin(n*c);return d(C,r,$),d(D,t,M),_(e,C,D)}return K(e,r,t,n)}const C=s(),D=s();function E(r=b){return[r[0],r[1],r[2],r[3]]}function ut(r=b[0],t=b[1],n=b[2],e=b[3]){return F(r,t,n,e,N.get())}function Q(r,t){return F(t[0],t[1],t[2],t[3],r)}function ct(r){return r}function F(r,t,n,e,u=E()){return u[0]=r,u[1]=t,u[2]=n,u[3]=e,u}function R(r,t,n){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],u=Math.abs(e-1)>1e-5&&e>1e-12?1/Math.sqrt(e):1;return n[0]=t[0]*u,n[1]=t[1]*u,n[2]=t[2]*u,n[3]=-(n[0]*r[0]+n[1]*r[1]+n[2]*r[2]),n}function S(r,t,n,e=E()){const u=n[0]-t[0],a=n[1]-t[1],o=n[2]-t[2],c=r[0]-t[0],h=r[1]-t[1],$=r[2]-t[2],M=a*$-o*h,z=o*c-u*$,B=u*h-a*c,H=M*M+z*z+B*B,I=Math.abs(H-1)>1e-5&&H>1e-12?1/Math.sqrt(H):1;return e[0]=M*I,e[1]=z*I,e[2]=B*I,e[3]=-(e[0]*r[0]+e[1]*r[1]+e[2]*r[2]),e}function G(r,t,n,e=0,u=Math.floor(n*(1/3)),a=Math.floor(n*(2/3))){if(n<3)return!1;t(q,e);let o=u,c=!1;for(;o<n-1&&!c;)t(l,o),o++,c=!J(q,l);if(!c)return!1;for(o=Math.max(o,a),c=!1;o<n&&!c;)t(g,o),o++,m(j,q,l),A(j,j),m(x,l,g),A(x,x),c=!J(q,g)&&!J(l,g)&&Math.abs(f(j,x))<T;return c?(S(q,l,g,r),!0):(e!==0||u!==1||a!==2)&&G(r,t,n,0,1,2)}function ot(r,t,n=!0){const e=t.length/3;return G(r,(u,a)=>y(u,t[3*a+0],t[3*a+1],t[3*a+2]),n?e-1:e)}const T=.99619469809,q=s(),l=s(),g=s(),j=s(),x=s();function at(r,t,n){return t!==r&&Q(r,t),r[3]=-f(r,n),r}function it(r,t){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function st(r,t,n,e){return Y(g,t,r),R(n,g,e)}function ft(r,t,n,e){return k(v(r,t,m(i.get(),n,t),V,e))}function ht(r,t,n){return t!=null&&k(v(r,t.origin,t.direction,W,n))}function Mt(r,t,n){return k(v(r,t.origin,t.vector,0,n))}function gt(r,t,n){return k(v(r,t.origin,t.vector,1,n))}function $t(r,t){return p(r,t)>=0}function lt(r,t){const n=f(r,t.ray.direction),e=-p(r,t.ray.origin);if(e<0&&n>=0)return!1;if(n>-1e-6&&n<1e-6)return e>0;if((e<0||n<0)&&!(e<0&&n<0))return!0;const u=e/n;return n>0?u<t.c1&&(t.c1=u):u>t.c0&&(t.c0=u),t.c0<=t.c1}function mt(r,t){const n=f(r,t.ray.direction),e=-p(r,t.ray.origin);if(n>-1e-6&&n<1e-6)return e>0;const u=e/n;return n>0?u<t.c1&&(t.c1=u):u>t.c0&&(t.c0=u),t.c0<=t.c1}function qt(r,t,n){const e=d(i.get(),r,-r[3]),u=U(r,m(i.get(),t,e),i.get());return _(n,u,e),n}function bt(r,t,n,e){const u=r,a=i.get(),o=i.get();O(u,a,o);const c=m(i.get(),n,t),h=P(a,c),$=P(o,c),M=P(u,c);return y(e,h,$,M)}function U(r,t,n){const e=d(i.get(),r,f(r,t));return m(n,t,e),n}function yt(r,t){return Math.abs(p(r,t))}function p(r,t){return f(r,t)+r[3]}function k(r){return r===0||r===1}function v(r,t,n,e,u){const a=f(r,n),o=p(r,t);if(a===0)return o>=0?2:3;let c=-o/a;return 1&e&&(c=L(c,0,1)),!(4&e)&&c<0||!(8&e)&&c>1?o>=0?2:3:(_(u,t,d(u,n,c)),o>=0?0:1)}const b=[0,0,1,0],V=12,W=8;export{at as G,it as H,st as I,ft as J,ht as K,Mt as L,gt as N,$t as O,lt as P,mt as Q,qt as R,G as S,bt as T,R as U,yt as W,p as X,v as Z,O as a,et as b,ut as d,nt as g,E as j,ct as k,rt as m,F as q,S as w,Q as y,ot as z};
//# sourceMappingURL=plane-Cj9fNNm6.js.map
