{"version":3,"mappings":"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","names":["s","e","h","d","b","t","u","w","a","i","k","j","n","l","r","g","L","v","z","U","x","O","E","S","o","C","R","D","__vitePreload","c","J","M","N","A"],"ignoreList":[0,1],"sources":["../../node_modules/@arcgis/core/symbols/support/gfxUtils.js","../../node_modules/@arcgis/core/symbols/support/utils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as t}from\"../../assets.js\";import e from\"../../Color.js\";import o from\"../../request.js\";import{LRUCache as s}from\"../../core/LRUCache.js\";import{pt2px as r}from\"../../core/screenUtils.js\";import{getCIMSymbolColor as n}from\"./cimSymbolUtils.js\";const i=\"picture-fill\",l=\"simple-fill\",a=\"simple-line\",c=\"simple-marker\",h=\"text\",d=\"cim\",m=new Map([[\"dash\",[4,3]],[\"dashdot\",[4,3,1,3]],[\"dot\",[1,3]],[\"longdash\",[8,3]],[\"longdashdot\",[8,3,1,3]],[\"longdashdotdot\",[8,3,1,3,1,3]],[\"shortdash\",[4,1]],[\"shortdashdot\",[4,1,1,1]],[\"shortdashdotdot\",[4,1,1,1,1,1]],[\"shortdot\",[1,1]],[\"solid\",[]]]),p=new s(1e3);function u(e){const o=e.style;let s=null;if(e)switch(e.type){case c:\"cross\"!==o&&\"x\"!==o&&(s=e.color);break;case l:o&&\"solid\"!==o?\"none\"!==o&&(s={type:\"pattern\",x:0,y:0,src:t(`esri/symbols/patterns/${o}.png`),width:5,height:5}):s=e.color;break;case i:s={type:\"pattern\",src:e.url,width:r(e.width)*e.xscale,height:r(e.height)*e.yscale,x:r(e.xoffset),y:r(e.yoffset)};break;case h:s=e.color;break;case d:s=n(e)}return s}function f(t,e){const s=t+\"-\"+e,r=p.get(s);return null!=r?Promise.resolve(r):o(t,{responseType:\"image\"}).then(t=>{const o=t.data,r=o.naturalWidth,n=o.naturalHeight,i=document.createElement(\"canvas\");i.width=r,i.height=n;const l=i.getContext(\"2d\");l.fillStyle=e,l.fillRect(0,0,r,n),l.globalCompositeOperation=\"destination-in\",l.drawImage(o,0,0);const a=i.toDataURL();return p.put(s,a),a})}function y(t){if(!t)return null;let e=null;switch(t.type){case l:case i:case c:e=y(t.outline);break;case a:{const o=r(t.width);null!=t.style&&\"none\"!==t.style&&0!==o&&(e={color:t.color,style:w(t.style),width:o,cap:t.cap,join:\"miter\"===t.join?r(t.miterLimit):t.join},e.dashArray=g(e).join(\",\")||\"none\");break}default:e=null}return e}function g(t){if(!t?.style)return[];const{dashArray:e,style:o,width:s}=t;if(\"string\"==typeof e&&\"none\"!==e)return e.split(\",\").map(t=>Number(t));const r=s??0,n=m.has(o)?m.get(o).map(t=>t*r):[];if(\"butt\"!==t.cap)for(const[i,l]of n.entries())n[i]=i%2==1?l+r:Math.max(l-r,1);return n}const w=(()=>{const t={};return e=>{if(t[e])return t[e];const o=e.replaceAll(\"-\",\"\");return t[e]=o,o}})(),b=new e([128,128,128]);export{b as defaultThematicColor,w as dekebabifyLineStyle,g as getDashArray,u as getFill,f as getPatternUrlWithColor,y as getStroke};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import{forEach as t}from\"../../core/asyncUtils.js\";import\"../../core/has.js\";import{px2pt as r}from\"../../core/screenUtils.js\";import{ONES as o}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{effectFunctionsFromJSON as n}from\"../../layers/effects/jsonUtils.js\";import{applyCIMSymbolRotation as l,getCIMSymbolColor as i}from\"./cimSymbolUtils.js\";import{getStroke as c}from\"./gfxUtils.js\";import{Symbol3DMaterial as s}from\"./Symbol3DMaterial.js\";import{isSymbol3D as u,isSymbol2D as a}from\"./typeUtils.js\";function f(e){const t=e.symbolLayers?.at(-1);if(t&&\"outline\"in t)return t?.outline?.size}function m(e){if(!e)return 0;if(u(e)){const t=f(e);return null!=t?t:0}return r(c(e)?.width)}function y(e){const t=e.symbolLayers?.at(-1);if(t&&\"outline\"in t)return t?.outline?.color}function p(t){if(!t)return null;if(u(t))return y(t);const r=c(t)?.color;return r?new e(r):null}function h(e){if(null==e||!(\"symbolLayers\"in e)||null==e.symbolLayers)return!1;switch(e.type){case\"point-3d\":return e.symbolLayers.some(e=>\"object\"===e.type);case\"line-3d\":return e.symbolLayers.some(e=>\"path\"===e.type);case\"polygon-3d\":return e.symbolLayers.some(e=>\"object\"===e.type||\"extrude\"===e.type);default:return!1}}function d(e){return e.resource?.href??\"\"}function b(t,r){if(!t)return null;let o=null;return u(t)?o=w(t):a(t)&&(o=\"cim\"===t.type?i(t):t.color?new e(t.color):null),o?k(o,r):null}function w(t){const r=t.symbolLayers;if(!r)return null;let o=null;return r.forEach(e=>{\"object\"===e.type&&e.resource?.href||(o=\"water\"===e.type?e.color:e.material?e.material.color:null)}),o?new e(o):null}function k(t,r){if(null==r||null==t)return t;const o=t.toRgba();return o[3]=o[3]*r,new e(o)}function j(t,r,o){const n=t.symbolLayers;if(!n)return;const l=(t,n=!1)=>{let l=r??t??null;return null!=o?.override&&(!l&&n&&(l=new e([255,255,255])),l&&(l.a=o.override)),k(l,o?.add)};n.forEach(e=>{if(\"water\"===e.type)return void(e.color=k(e.color,o?.add));const t=null!=e.material?e.material.color:null,r=l(t,\"icon\"===e.type&&null!=e.resource?.href);null==e.material?e.material=new s({color:r}):e.material.color=r,\"outline\"in e&&e.outline?.color&&null!=o?.add&&(e.outline.color=k(e.outline.color,o.add)),\"marker\"in e&&null!=e.marker&&(e.marker.color=l(e.marker.color))})}function g(e,t,r){t=t??e.color,null!=r?.override&&t&&(t.a=r.override),t&&(e.color=k(t,r?.add)),\"outline\"in e&&e.outline?.color&&(e.outline.color=k(e.outline.color,r?.add))}function L(t,r,o){t&&(r||null!=o)&&(r&&(r=new e(r)),u(t)?j(t,r,o):a(t)&&g(t,r,o))}async function v(e,r){const o=e.symbolLayers;o&&await t(o,async e=>z(e,r))}async function z(e,t){switch(e.type){case\"extrude\":U(e,t);break;case\"icon\":case\"line\":case\"text\":x(e,t);break;case\"path\":O(e,t);break;case\"object\":await E(e,t)}}function x(e,t){const r=S(t);null!=r&&(e.size=r)}function S(e){for(const t of e)if(\"number\"==typeof t)return t;return null}function U(e,t){const r=t[2];\"number\"==typeof r&&(e.size=r)}async function E(e,t){const{resourceSize:r,symbolSize:o}=await C(e),n=R(t,r,o);null!=n&&(e.width=D(t[0],o[0],r[0],n),e.depth=D(t[1],o[1],r[1],n),e.height=D(t[2],o[2],r[2],n))}function O(e,t){const r=R(t,o,[e.width,void 0,e.height]);null!=r&&(e.width=D(t[0],e.width,1,r),e.height=D(t[2],e.height,1,r))}function R(e,t,r){for(let o=0;o<3;o++){const n=e[o];switch(n){case\"symbol-value\":{const e=r[o];return null!=e?e/t[o]:1}case\"proportional\":break;default:if(n&&t[o])return n/t[o]}}return null}async function C(e){const{computeObjectLayerResourceSize:t}=await import(\"./symbolLayerUtils.js\"),r=await t(e,10),{width:o,height:n,depth:l}=e,i=[o,l,n];let c=1;for(let s=0;s<3;s++){const e=i[s];if(null!=e){c=e/r[s];break}}for(let s=0;s<3;s++)null==i[s]&&(i[s]=r[s]*c);return{resourceSize:r,symbolSize:i}}function D(e,t,r,o){switch(e){case\"proportional\":return r*o;case\"symbol-value\":return null!=t?t:r;default:return e}}function J(e,t){const r=S(t);if(null!=r)switch(e.type){case\"simple-marker\":e.size=r;break;case\"picture-marker\":{const t=e.width/e.height;t>1?(e.width=r,e.height=r*t):(e.width=r*t,e.height=r);break}case\"simple-line\":e.width=r;break;case\"text\":e.font.size=r}}async function M(e,t){if(e&&t)return u(e)?v(e,t):void(a(e)&&J(e,t))}function N(e,t,r){if(e&&null!=t)if(u(e)){const o=e.symbolLayers;o&&o.forEach(e=>{if(\"object\"===e.type)switch(r){case\"tilt\":e.tilt=(e.tilt??0)+t;break;case\"roll\":e.roll=(e.roll??0)+t;break;default:e.heading=(e.heading??0)+t}\"icon\"===e.type&&(e.angle+=t)})}else if(a(e))switch(e.type){case\"simple-marker\":case\"picture-marker\":case\"text\":e.angle+=t;break;case\"cim\":l(e,t,!0)}}function q(e,t){if(!e)return null;const r=(t?e.effects:e.effects.filter(e=>\"bloom\"!==e.type)).map(e=>e.toJSON());return n(r)}function A(e){return null!=e&&\"polygon-3d\"===e.type&&e.symbolLayers.some(e=>\"extrude\"===e.type)}export{L as applyColorToSymbol,k as applyOpacityToColor,N as applyRotationToSymbol,M as applySizesToSymbol,q as getCSSFilterFromEffectList,b as getColorFromSymbol,d as getIconHref,p as getSymbolOutlineColor,m as getSymbolOutlineSize,h as isVolumetricSymbol,A as symbolHasExtrudeSymbolLayer};\n"],"file":"utils-Dvxi1fes.js"}