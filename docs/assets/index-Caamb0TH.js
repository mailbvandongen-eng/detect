const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/romeinseFortenOL-f1bOqJgs.js","assets/iconStyles-y1g_zpjB.js","assets/kastelenOL-B4dUBUlf.js","assets/ruinesOL-BiRYNgZs.js","assets/hunebeddenOL-Cjq8oM7_.js","assets/uikavArcheoPuntenOL-ByX2MUCp.js","assets/speeltuinenOL-WEmnMoPH.js","assets/museaOL-BMHvoy5u.js","assets/kringloopwinkelsOL-Ct7xecHT.js","assets/fossielenOL-PKPcT68l.js","assets/fossielUtils-DFMGg8Pt.js","assets/fossielenBelgieOL-BTFjh9Dr.js","assets/fossielenDuitslandOL-BrY6wsuF.js","assets/fossielenFrankrijkOL-DSoYz1TX.js","assets/bunkersOL-BURGcfbU.js","assets/grafheuvelsOL-CRDa5lYV.js","assets/slagveldenOL-DP2E5TBP.js","assets/IdentityManager-mYLCqHfx.js","assets/substitute-AK3nnTad.js","assets/ElevationLayer-B4dKtGIm.js","assets/MultiOriginJSONSupport-CZYxzcRa.js","assets/ArcGISCachedService-CKtnEyB3.js","assets/TileInfoTilemapCache-DkmFNB-4.js","assets/TilemapCache-hJDbyGBs.js","assets/LRUCache-DaGKhADG.js","assets/MemCache-DBUlAn-D.js","assets/memoryEstimations-CQU38H5N.js","assets/ArcGISService-58l1VqKO.js","assets/OperationalLayer-CFLwKzOV.js","assets/layerContainerType-CSXZNpHb.js","assets/ElevationInfo-ruW-eJxE.js","assets/lengthUtils-DRkNYXoS.js","assets/PortalLayer-CwJi6Abk.js","assets/portalItemUtils-D8a9nLLX.js","assets/WorkerHandle-t0YACPa7.js","assets/portalLayers-DM13Rc-1.js","assets/associatedFeatureServiceUtils-Cbo9k_jD.js","assets/fetchService-DzHLMwj1.js","assets/loadUtils-DUU-nLcQ.js","assets/lazyLayerLoader-D53stXMT.js","assets/arcgisLayers-kOp7pEs2.js","assets/layersCreator-KVTATrrb.js","assets/styleUtils-DLzUBQwE.js","assets/ElevationQuery-BODJyq0-.js","assets/GeometryDescriptor-rHlwEsHr.js","assets/projectOperator-CL3w8Jc8.js","assets/operatorProject-CyRFTe0X.js","assets/SimpleGeometryCursor-B92kdZ15.js","assets/projectOperator-B47amSgJ.js","assets/statsWorker-CJq25JtV.js","assets/utils-BlUDc35m.js","assets/quantizationUtils-DYGl4Vjv.js","assets/heatmapUtils-BaJvc9aQ.js","assets/vec42-bMBM6s1S.js","assets/vec4f64-DPb6J-GU.js","assets/utils-CqZfZDRJ.js","assets/utils-D4-lYhI1.js","assets/ClassBreaksDefinition-CmoQKNDh.js","assets/geometryEngineWorker-BkMQzpX8.js","assets/geometryEngineJSON-B_JiqPb-.js","assets/geometryEngineBase-BQTefT4Y.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/CSVSourceWorker-CEEUPc5x.js","assets/date-DCujAECq.js","assets/OptimizedFeature-DBwxa99K.js","assets/FeatureStore-DutVcjkR.js","assets/featureConversionUtils-BYJ-sRFM.js","assets/OptimizedFeatureSet-BR8EEvDc.js","assets/BoundsStore-DEDdasjD.js","assets/PooledRBush-B0nqu60i.js","assets/timeSupport-BSui_BAJ.js","assets/queryUtils-HYAeECC8.js","assets/optimizedFeatureQueryEngineAdapter-D12YKIFr.js","assets/QueryEngine-DfCHOSzG.js","assets/WhereClauseCache-Cp_Y2cGq.js","assets/WhereClause-C23CHi9q.js","assets/TimeOnly-VauNHbms.js","assets/enum-Dt2zdXu_.js","assets/UnknownTimeZone-BP2jN6OH.js","assets/QueryEngineCapabilities-DJC_YILC.js","assets/SnappingCandidate-DGkpYqI6.js","assets/FixedIntervalBinParameters-CQen4hkd.js","assets/NormalizationBinParametersMixin-es9j-wRJ.js","assets/FieldsIndex-BGm3KbMB.js","assets/number-BnOL-YFf.js","assets/locationUtils-C2PU_5fJ.js","assets/clientSideDefaults-D52z9MZu.js","assets/defaultsJSON-GKolV7NZ.js","assets/EdgeProcessingWorker-CIbvLLff.js","assets/workerHelper-BU4YB4MX.js","assets/InterleavedLayout-DoKF9Bjk.js","assets/BufferView-BqprJsEf.js","assets/types-BKo2foNY.js","assets/VertexElementDescriptor-BLyltQyJ.js","assets/VertexAttributeLocations-BfZbt_DV.js","assets/edgeProcessing-BYPXA0tr.js","assets/deduplicate-BXgmYRCA.js","assets/Indices-Bf5-AHWZ.js","assets/Normals-qgSs42Mu.js","assets/ElevationSamplerWorker-ZfnflnM6.js","assets/MeshLocalVertexSpace-v4PQ46ve.js","assets/vertexSpaceConversion-CuvQeCwh.js","assets/spatialReferenceEllipsoidUtils-sPdYRIla.js","assets/computeTranslationToOriginAndRotation-BLMWeU4o.js","assets/projectPointToVector-mcMLsAi5.js","assets/meshVertexSpaceUtils-sMxHXvnh.js","assets/vec3-uqTOFWqr.js","assets/vec4-DIfeLF_i.js","assets/FeatureServiceSnappingSourceWorker-HtqfA8SV.js","assets/symbologySnappingCandidates-qS9PrkGJ.js","assets/pbfQueryUtils-B9tzEA7x.js","assets/pbf-DFbREv2c.js","assets/query-BAZk2X-k.js","assets/queryZScale-BIggMh5D.js","assets/GeoJSONSourceWorker-YUP8CO9i.js","assets/geojson-DX8nuinc.js","assets/sourceUtils-Di_s_hgN.js","assets/MemorySourceWorker-D1g3UiHq.js","assets/objectIdUtils-BmFjqQA3.js","assets/PBFDecoderWorker-D6K_aE-Q.js","assets/dehydratedFeatures-CorEamWh.js","assets/FeaturePipelineWorker-3jQOYgVL.js","assets/diffUtils-DDWtYCM1.js","assets/AttributeStore-C1l2Les3.js","assets/Utils-BIM2xK1y.js","assets/BoundingBox-BSfu-Lmt.js","assets/UpdateTracking2D-BV6yH4M9.js","assets/ArcadeExpression-C4zgA4IK.js","assets/FeatureStoreQueryAdapter-BJBC3kvI.js","assets/labelPoint-Co44gydT.js","assets/labelUtils-B2zHhB5M.js","assets/utils-DQaLv0i_.js","assets/defaultCIMValues-XI-Li77m.js","assets/constants-BBnGEY1d.js","assets/streamLayerUtils-DFlbJ4P1.js","assets/DictionaryScriptEvaluator-Dy3WhMwJ.js","assets/MeshWriterRegistry-BsmVSTzy.js","assets/rasterizingUtils-BI6YpxXW.js","assets/CIMSymbolHelper-Dbh7_f0r.js","assets/BidiEngine-BvER9tXK.js","assets/GeometryUtils-CuvS0kBs.js","assets/Rect-CUzevAry.js","assets/defaults-aG1BlLwL.js","assets/TexturedLineMeshWriter-sx4EHo8G.js","assets/TurboLine-C4IfAJdh.js","assets/grouping-BdTSyZW7.js","assets/QueueProcessor-OavMPir9.js","assets/FeatureMetadata-BKirvrn3.js","assets/SourceChunkStore-DGK3qYNG.js","assets/parquet-ppF8bMDT.js","assets/operatorGeodeticDensify-CpDGiN0B.js","assets/geodeticCurveType-CirnHLSB.js","assets/normalizeUtilsSync-Du6n8j4c.js","assets/FeatureIdInfo-DhwXQflo.js","assets/displayFilterUtils-CWbWPAsC.js","assets/ogcFeatureUtils-X2SHv8TD.js","assets/CircularArray-CujHzHWW.js","assets/createConnection-CrF1bYCn.js","assets/PointCloudWorker-DqYMzqWg.js","assets/quat-Bd9bo_IB.js","assets/quatf64-aQ5IuZRd.js","assets/vec3f32-WCVSSNPR.js","assets/PointCloudUniqueValueRenderer-BjemaUJB.js","assets/RendererLegendOptions-CNvIXI-0.js","assets/ColorStop-CSDZ3Jg8.js","assets/I3SBinaryReader-G5rR8a3s.js","assets/orientedBoundingBox-D8lhUxZU.js","assets/plane-BO6rDOJQ.js","assets/vectorStacks-DLVgWk4n.js","assets/RasterWorker-DFps2ie3.js","assets/PixelBlock-CZ1FwMKL.js","assets/RasterSymbolizer-F0I_HBWA.js","assets/vectorFieldUtils-BHmL89Cr.js","assets/colorUtils-BkIn1tuE.js","assets/rasterFunctionHelper-DLLSGeHU.js","assets/clipUtils-BlGC-RMn.js","assets/rasterProjectionHelper-BkNfBnRw.js","assets/colorRamps--weRF5R0.js","assets/PolynomialTransform-BF3o1Knn.js","assets/dataUtils-DnyH9HEB.js","assets/SceneLayerSnappingSourceWorker-DnLQY7M8.js","assets/lineSegment-0NB71lbe.js","assets/sphere-DxRCU6Lz.js","assets/Octree-C755Vwry.js","assets/frustum-DjJrkrpA.js","assets/SceneLayerWorker-C7lUORGX.js","assets/projectVectorToVector-J121ncSj.js","assets/WFSSourceWorker-CsNvdVkQ.js","assets/wfsUtils-owieH7Rq.js","assets/xmlUtils-CtUoQO7q.js","assets/WorkerTileHandler-CRU5Qp7y.js","assets/constants-BHYAGdRm.js","assets/config-BOD8--da.js","assets/SourceLayerData-BWgzy68J.js","assets/StyleRepository-DkAkxnh1.js","assets/earcut-D9gy186-.js","assets/Feature3DPipelineWorker-DHtVJvwN.js","assets/jsonUtils-BDg2Aq3p.js","assets/typeUtils-CqF0HIb8.js","assets/ClassBreaksRenderer-H7kzuH3E.js","assets/commonProperties-DNCwEpag.js","assets/visualVariableUtils-CkJkfyiV.js","assets/jsonUtils-BWDhunqd.js","assets/defaults3D-DgX5Wk1q.js","assets/SimpleRenderer-DMZ9OdAA.js","assets/UniqueValueRenderer-DTCQS4MR.js","assets/styleUtils-CPp6RURX.js","assets/HUDMaterial.glsl-DDuXkmQu.js","assets/hydratedFeatures-BcrL-2Hw.js","assets/OutputColorHighlightOID.glsl-G00QFaOv.js","assets/triangle-CI9d_pvT.js","assets/renderState-CKc66y4x.js","assets/glsl-B5bJgrnA.js","assets/ShaderBuilder-vbOLmEps.js","assets/placementUtils-Dq7HbKKj.js","assets/sdfPrimitives-D_7uN03l.js","assets/Texture-Bni_nvAy.js","assets/videoUtils-6Kw0tVBS.js","assets/requestImageUtils-iBuuQkKV.js","assets/RealisticTree.glsl-CxmJPAUj.js","assets/DefaultMaterial-Cpc7r7d3.js","assets/VertexBuffer-D7CzA6SK.js","assets/BufferObject-DgonjraZ.js","assets/boundedPlane-BVE629oB.js","assets/FlowWorker-iRFD_SG_.js","assets/ParquetSourceWorker-CeMszAHR.js","assets/parquetUtils-Obh_TlGn.js","assets/PanoramicMeshWorker-CAR-vdqm.js","assets/Popup-rUAANVEg.js","assets/throttle-5ADkB4nw.js","assets/unitFormatUtils-BL6o--kM.js","assets/quantityUtils-D2gusM15.js","assets/AttachmentInfo-C4botGXo.js","assets/labelingInfo-B-v0yZhG.js","assets/featureUtils-ByMkb5CZ.js","assets/utils-hjO-dv0x.js","assets/cimSymbolUtils-DhZhq743.js","assets/executeQueryJSON-DDaxWC9V.js","assets/FeatureSet-v_zk8aJd.js","assets/shared-CKXWm7r0.js","assets/isImageryGraphicOrigin-Ccuhb4eK.js","assets/isImageryTileGraphicOrigin-ZR-gBf9D.js","assets/FeatureLayer-CurYxPvx.js","assets/FormTemplate-BrQB8F6F.js","assets/GraphicOrigin-B75KI5mL.js","assets/editsZScale-DAVrckhu.js","assets/APIKeyMixin-MhzkJ1MV.js","assets/BlendLayer-xRITZpmq.js","assets/jsonUtils-WUPbyN--.js","assets/parser-BepjlZDv.js","assets/CustomParametersMixin-BH7WR-_0.js","assets/DisplayFilteredLayer-c5-aEvTe.js","assets/scaleUtils-C76HyYP_.js","assets/EditBusLayer-Yrvbb9RA.js","assets/FeatureEffectLayer-rSadT4ay.js","assets/FeatureEffect-B7OdDIwd.js","assets/FeatureFilter-vd6Kdd1F.js","assets/FeatureLayerBase-CXlKWPB6.js","assets/LayerFloorInfo-CtSqpqOr.js","assets/multiLayerServiceUtils-C1Tq8A4G.js","assets/Relationship-CiOhZIcH.js","assets/serviceCapabilitiesUtils-D057FwqU.js","assets/infoFor3D-DhzudQro.js","assets/FeatureReductionLayer-CJGwSPO1.js","assets/FeatureReductionSelection-CW2Quk_Y.js","assets/OrderedLayer-DMta4aBi.js","assets/OrderByInfo-DZFbyzlV.js","assets/RefreshableLayer-BsdRZLQR.js","assets/ScaleRangeLayer-DrzeXRtq.js","assets/TemporalLayer-xIxXinOA.js","assets/TimeInfo-CmHZF9QU.js","assets/TrackableLayer-CjdC-L_a.js","assets/FeatureTemplate-S7vmnQvI.js","assets/FeatureType-BRcS83vB.js","assets/fieldProperties-bzHJlJxc.js","assets/TitleCreator-Dvty-5av.js","assets/versionUtils-Cv34G1qO.js","assets/popupUtils-DzLQ6KyT.js","assets/NetworkElement-S7lMtDxL.js","assets/ReactiveSet-DxhADebZ.js","assets/symbolUtils-691x0jcG.js","assets/layerViewUtils-CKrnKTul.js","assets/arcadeUtils-Cc4Fj6o6.js","assets/arcade-BPGuCBTn.js","assets/arcadeEnvironment-D282UoWb.js","assets/Dictionary-DTNHJkwY.js","assets/ImmutableArray-BPVd6ESQ.js","assets/Feature-BUo8Cz-f.js","assets/aiServices-rPVhFEqd.js","assets/commonProperties-DHiB1uzW.js","assets/unitConversion-BWt9e-q-.js","assets/rasterFieldUtils-JdYMAiKT.js","assets/batchExec-BDKZedoD.js","assets/webStyleSymbolUtils-Bmt767L4.js","assets/devEnvironmentUtils-8WtPGj6h.js","assets/geometryServiceUtils-B3-3Tkzk.js","assets/project-1p3N2nf0.js","assets/webglDeps-CMJrRIrr.js","assets/FramebufferObject-Dbt93hjM.js","assets/ProgramTemplate-wQvOmnpC.js","assets/VertexArrayObject-CiauitIl.js","assets/mapViewDeps-CqKx9DjQ.js","assets/FeatureCommandQueue-CeNrnf0Y.js","assets/GraphShaderModule-CZllVUtX.js","assets/utils-BM7-z_oZ.js","assets/WGLContainer-CsByI7c8.js","assets/Container-AyqLzdIm.js","assets/SDFHelper-BDpRTU4O.js","assets/OverrideHelper-CDCVywZH.js","assets/callExpressionWithFeature-Bx615csB.js","assets/GridShader-CrCCzFtK.js","assets/testSVGPremultipliedAlpha-C7JVjtJb.js","assets/SymbolFader-C5rdT9J_.js","assets/RenderingContext-BK5PhUFe.js","assets/CIMResourceManager-C5I8mYkc.js","assets/utils-Cb5ido8T.js","assets/utils-DDjZAYSk.js","assets/GraphicsView2D-Dxb55lMo.js","assets/GraphicContainer-Ci-M3TD2.js","assets/AGraphicContainer-B_tdS--a.js","assets/TechniqueInstance-CeKjxeeC.js","assets/TileContainer-CSo3ewJz.js","assets/gridUtils-DH3zBMBZ.js","assets/geodesicUtils-DToK6jxR.js","assets/TileLayerView2D-CwOX3wbV.js","assets/imageUtils-B1WaO6jI.js","assets/BitmapTechnique-CjiSKAwN.js","assets/bitmapUtils-DF6MOyDh.js","assets/LayerView2D-BrZnP1_P.js","assets/HighlightGraphicContainer-By7zPqAE.js","assets/LayerView-CGxp6Om3.js","assets/RefreshableLayerView-spV-3q9e.js","assets/MapServiceLayerViewHelper-Dzlu_QBY.js","assets/floorFilterUtils-DKzVzLpH.js","assets/drapedUtils-DW9jZcyV.js","assets/sublayerUtils-BEQnBRaB.js","assets/popupUtils-BYJXC3S5.js","assets/highlightOptionsUtils-CK7N_Fko.js","assets/FeatureLayerView2D-C02sRs34.js","assets/timeSupport-Bft7cmFH.js","assets/AttributeBinsFeatureSet-BsZfnQoW.js","assets/AttributeBinsQuery-DemIEe10.js","assets/constants-SxxbBSOD.js","assets/BaseDynamicLayerView2D-C150qbB8.js","assets/BitmapContainer-CLAj0ZgP.js","assets/ExportStrategy-iQLooCaK.js","assets/CatalogLayerView2D-Cam974_w.js","assets/CatalogDynamicGroupLayerView2D-CbjDtuvi.js","assets/CatalogFootprintLayerView2D-BmfDU9oo.js","assets/GeoRSSLayerView2D-fOXNMN8I.js","assets/GraphicsLayerView2D-DRPQa1NZ.js","assets/GroupLayerView2D-CmS5ub3W.js","assets/ImageryLayerView2D-fuCLoPmv.js","assets/RasterVFDisplayObject-ddbXTU4r.js","assets/ImageryTileLayerView2D-nOvggNnT.js","assets/datasetUtils-DNBwVPDP.js","assets/rasterUtils-BqSnBzjj.js","assets/RawBlockCache-CzeQncez.js","assets/KMLLayerView2D-BPk4yvW_.js","assets/kmlUtils-DDlxuI7U.js","assets/KnowledgeGraphLayerView2D-d1hqIxlZ.js","assets/MapImageLayerView2D-CtxHBfE8.js","assets/ExportImageParameters-BJrfta6M.js","assets/MapNotesLayerView2D-0E-eRrG1.js","assets/MediaLayerView2D-Dpb41bE-.js","assets/mediaLayerUtils-D5CQNaOE.js","assets/OverlayContainer-C5sfuApK.js","assets/OGCFeatureLayerView2D-lj90yhal.js","assets/RouteLayerView2D-C-D9UXHh.js","assets/Stop-60mCQtbe.js","assets/networkEnums-UKuJhQCu.js","assets/StreamLayerView2D-CW8T629j.js","assets/SubtypeGroupLayerView2D-cN_lEmA7.js","assets/VectorTileLayerView2D-fgij2Q5L.js","assets/VideoLayerView2D-EDIkU2hN.js","assets/GraphicsLayer-BHRp3xLB.js","assets/videoUtils-C43LD3MI.js","assets/ControlPoint-mtwuarR-.js","assets/WMSLayerView2D-DoOprLWJ.js","assets/ExportWMSImageParameters-DXvbd95w.js","assets/WMTSLayerView2D-BKwxQIaa.js","assets/ElevationProfileAnalysisView2D-FINY51q6.js","assets/createUtils-BmpAI7C4.js","assets/distanceOperator-577fEyhW.js","assets/Point2D-ByVU2sJE.js","assets/Distance2DCalculator-CXhBP-8I-iAQEi1VT.js","assets/ProjectionTransformation-DF2X_PVJ.js","assets/Envelope2D-PYZ6irrd.js","assets/Transformation2D-HOoFpL6n.js","assets/OperatorDefinitions-DP7_WWTp.js","assets/apiConverter-MHo75Rs8.js","assets/jsonConverter-LKHf7W-m.js","assets/simplifyOperator-CSkjqIOU.js","assets/operatorSimplify-Dd_92T7U.js","assets/mapCollectionUtils-DAym6h5Y.js","assets/elevationInfoUtils-DOtpbNVM.js","assets/getDefaultUnitForView-CPPkFhLc.js","assets/SketchViewModel-XajUvHlb.js","assets/hitTestSelectUtils-CrEpK7-1.js","assets/geodeticLengthOperator-DaTTIYmI.js","assets/apng-0wVih5Jj.js","assets/index-gC1ix6X5.js","assets/index-B43CCZHj.js","assets/guid-LcV_DAvu.js","assets/useT9n-BZvGJMik.js","assets/index-BBDybQx_.js","assets/index-BNOZJt9U.js","assets/dom-DwLwKecR.js","assets/observers-CE7qmkY9.js","assets/ref-CRJKXrwH.js","assets/static-CADmGpFt.js","assets/form-ChgZiEhB.js","assets/interactive-CMKxZm3D.js","assets/label-DAvAbED1.js","assets/useSetFocus-B2-9aQA9.js"])))=>i.map(i=>d[i]);
var ITe=Object.getPrototypeOf;var PTe=Reflect.get;var aX=t=>{throw TypeError(t)};var m6=(t,e,n)=>e.has(t)||aX("Cannot "+n);var Nr=(t,e,n)=>(m6(t,e,"read from private field"),n?n.call(t):e.get(t)),Ru=(t,e,n)=>e.has(t)?aX("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Mu=(t,e,n,r)=>(m6(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),yE=(t,e,n)=>(m6(t,e,"access private method"),n);var lX=(t,e,n)=>PTe(ITe(t),n,e);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Kz(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var g6={exports:{}},vE={},y6={exports:{}},Kn={};var cX;function CTe(){if(cX)return Kn;cX=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function f(Q){return Q===null||typeof Q!="object"?null:(Q=h&&Q[h]||Q["@@iterator"],typeof Q=="function"?Q:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,_={};function b(Q,W,ne){this.props=Q,this.context=W,this.refs=_,this.updater=ne||g}b.prototype.isReactComponent={},b.prototype.setState=function(Q,W){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,W,"setState")},b.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function T(){}T.prototype=b.prototype;function A(Q,W,ne){this.props=Q,this.context=W,this.refs=_,this.updater=ne||g}var I=A.prototype=new T;I.constructor=A,y(I,b.prototype),I.isPureReactComponent=!0;var P=Array.isArray,N=Object.prototype.hasOwnProperty,L={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function M(Q,W,ne){var ie,le={},ve=null,qe=null;if(W!=null)for(ie in W.ref!==void 0&&(qe=W.ref),W.key!==void 0&&(ve=""+W.key),W)N.call(W,ie)&&!C.hasOwnProperty(ie)&&(le[ie]=W[ie]);var Ke=arguments.length-2;if(Ke===1)le.children=ne;else if(1<Ke){for(var Se=Array(Ke),we=0;we<Ke;we++)Se[we]=arguments[we+2];le.children=Se}if(Q&&Q.defaultProps)for(ie in Ke=Q.defaultProps,Ke)le[ie]===void 0&&(le[ie]=Ke[ie]);return{$$typeof:t,type:Q,key:ve,ref:qe,props:le,_owner:L.current}}function O(Q,W){return{$$typeof:t,type:Q.type,key:W,ref:Q.ref,props:Q.props,_owner:Q._owner}}function D(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===t}function V(Q){var W={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(ne){return W[ne]})}var U=/\/+/g;function G(Q,W){return typeof Q=="object"&&Q!==null&&Q.key!=null?V(""+Q.key):W.toString(36)}function de(Q,W,ne,ie,le){var ve=typeof Q;(ve==="undefined"||ve==="boolean")&&(Q=null);var qe=!1;if(Q===null)qe=!0;else switch(ve){case"string":case"number":qe=!0;break;case"object":switch(Q.$$typeof){case t:case e:qe=!0}}if(qe)return qe=Q,le=le(qe),Q=ie===""?"."+G(qe,0):ie,P(le)?(ne="",Q!=null&&(ne=Q.replace(U,"$&/")+"/"),de(le,W,ne,"",function(we){return we})):le!=null&&(D(le)&&(le=O(le,ne+(!le.key||qe&&qe.key===le.key?"":(""+le.key).replace(U,"$&/")+"/")+Q)),W.push(le)),1;if(qe=0,ie=ie===""?".":ie+":",P(Q))for(var Ke=0;Ke<Q.length;Ke++){ve=Q[Ke];var Se=ie+G(ve,Ke);qe+=de(ve,W,ne,Se,le)}else if(Se=f(Q),typeof Se=="function")for(Q=Se.call(Q),Ke=0;!(ve=Q.next()).done;)ve=ve.value,Se=ie+G(ve,Ke++),qe+=de(ve,W,ne,Se,le);else if(ve==="object")throw W=String(Q),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return qe}function ke(Q,W,ne){if(Q==null)return Q;var ie=[],le=0;return de(Q,ie,"","",function(ve){return W.call(ne,ve,le++)}),ie}function Ue(Q){if(Q._status===-1){var W=Q._result;W=W(),W.then(function(ne){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=ne)},function(ne){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=ne)}),Q._status===-1&&(Q._status=0,Q._result=W)}if(Q._status===1)return Q._result.default;throw Q._result}var Ne={current:null},fe={transition:null},De={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:fe,ReactCurrentOwner:L};function Ce(){throw Error("act(...) is not supported in production builds of React.")}return Kn.Children={map:ke,forEach:function(Q,W,ne){ke(Q,function(){W.apply(this,arguments)},ne)},count:function(Q){var W=0;return ke(Q,function(){W++}),W},toArray:function(Q){return ke(Q,function(W){return W})||[]},only:function(Q){if(!D(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},Kn.Component=b,Kn.Fragment=n,Kn.Profiler=i,Kn.PureComponent=A,Kn.StrictMode=r,Kn.Suspense=l,Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=De,Kn.act=Ce,Kn.cloneElement=function(Q,W,ne){if(Q==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Q+".");var ie=y({},Q.props),le=Q.key,ve=Q.ref,qe=Q._owner;if(W!=null){if(W.ref!==void 0&&(ve=W.ref,qe=L.current),W.key!==void 0&&(le=""+W.key),Q.type&&Q.type.defaultProps)var Ke=Q.type.defaultProps;for(Se in W)N.call(W,Se)&&!C.hasOwnProperty(Se)&&(ie[Se]=W[Se]===void 0&&Ke!==void 0?Ke[Se]:W[Se])}var Se=arguments.length-2;if(Se===1)ie.children=ne;else if(1<Se){Ke=Array(Se);for(var we=0;we<Se;we++)Ke[we]=arguments[we+2];ie.children=Ke}return{$$typeof:t,type:Q.type,key:le,ref:ve,props:ie,_owner:qe}},Kn.createContext=function(Q){return Q={$$typeof:o,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Q.Provider={$$typeof:s,_context:Q},Q.Consumer=Q},Kn.createElement=M,Kn.createFactory=function(Q){var W=M.bind(null,Q);return W.type=Q,W},Kn.createRef=function(){return{current:null}},Kn.forwardRef=function(Q){return{$$typeof:a,render:Q}},Kn.isValidElement=D,Kn.lazy=function(Q){return{$$typeof:u,_payload:{_status:-1,_result:Q},_init:Ue}},Kn.memo=function(Q,W){return{$$typeof:c,type:Q,compare:W===void 0?null:W}},Kn.startTransition=function(Q){var W=fe.transition;fe.transition={};try{Q()}finally{fe.transition=W}},Kn.unstable_act=Ce,Kn.useCallback=function(Q,W){return Ne.current.useCallback(Q,W)},Kn.useContext=function(Q){return Ne.current.useContext(Q)},Kn.useDebugValue=function(){},Kn.useDeferredValue=function(Q){return Ne.current.useDeferredValue(Q)},Kn.useEffect=function(Q,W){return Ne.current.useEffect(Q,W)},Kn.useId=function(){return Ne.current.useId()},Kn.useImperativeHandle=function(Q,W,ne){return Ne.current.useImperativeHandle(Q,W,ne)},Kn.useInsertionEffect=function(Q,W){return Ne.current.useInsertionEffect(Q,W)},Kn.useLayoutEffect=function(Q,W){return Ne.current.useLayoutEffect(Q,W)},Kn.useMemo=function(Q,W){return Ne.current.useMemo(Q,W)},Kn.useReducer=function(Q,W,ne){return Ne.current.useReducer(Q,W,ne)},Kn.useRef=function(Q){return Ne.current.useRef(Q)},Kn.useState=function(Q){return Ne.current.useState(Q)},Kn.useSyncExternalStore=function(Q,W,ne){return Ne.current.useSyncExternalStore(Q,W,ne)},Kn.useTransition=function(){return Ne.current.useTransition()},Kn.version="18.3.1",Kn}var uX;function $A(){return uX||(uX=1,y6.exports=CTe()),y6.exports}var hX;function RTe(){if(hX)return vE;hX=1;var t=$A(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,h={},f=null,g=null;c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(g=l.ref);for(u in l)r.call(l,u)&&!s.hasOwnProperty(u)&&(h[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)h[u]===void 0&&(h[u]=l[u]);return{$$typeof:e,type:a,key:f,ref:g,props:h,_owner:i.current}}return vE.Fragment=n,vE.jsx=o,vE.jsxs=o,vE}var dX;function MTe(){return dX||(dX=1,g6.exports=RTe()),g6.exports}var p=MTe(),lC={},v6={exports:{}},el={},_6={exports:{}},x6={};var fX;function NTe(){return fX||(fX=1,(function(t){function e(fe,De){var Ce=fe.length;fe.push(De);e:for(;0<Ce;){var Q=Ce-1>>>1,W=fe[Q];if(0<i(W,De))fe[Q]=De,fe[Ce]=W,Ce=Q;else break e}}function n(fe){return fe.length===0?null:fe[0]}function r(fe){if(fe.length===0)return null;var De=fe[0],Ce=fe.pop();if(Ce!==De){fe[0]=Ce;e:for(var Q=0,W=fe.length,ne=W>>>1;Q<ne;){var ie=2*(Q+1)-1,le=fe[ie],ve=ie+1,qe=fe[ve];if(0>i(le,Ce))ve<W&&0>i(qe,le)?(fe[Q]=qe,fe[ve]=Ce,Q=ve):(fe[Q]=le,fe[ie]=Ce,Q=ie);else if(ve<W&&0>i(qe,Ce))fe[Q]=qe,fe[ve]=Ce,Q=ve;else break e}}return De}function i(fe,De){var Ce=fe.sortIndex-De.sortIndex;return Ce!==0?Ce:fe.id-De.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,g=!1,y=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(fe){for(var De=n(c);De!==null;){if(De.callback===null)r(c);else if(De.startTime<=fe)r(c),De.sortIndex=De.expirationTime,e(l,De);else break;De=n(c)}}function P(fe){if(_=!1,I(fe),!y)if(n(l)!==null)y=!0,Ue(N);else{var De=n(c);De!==null&&Ne(P,De.startTime-fe)}}function N(fe,De){y=!1,_&&(_=!1,T(M),M=-1),g=!0;var Ce=f;try{for(I(De),h=n(l);h!==null&&(!(h.expirationTime>De)||fe&&!V());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,f=h.priorityLevel;var W=Q(h.expirationTime<=De);De=t.unstable_now(),typeof W=="function"?h.callback=W:h===n(l)&&r(l),I(De)}else r(l);h=n(l)}if(h!==null)var ne=!0;else{var ie=n(c);ie!==null&&Ne(P,ie.startTime-De),ne=!1}return ne}finally{h=null,f=Ce,g=!1}}var L=!1,C=null,M=-1,O=5,D=-1;function V(){return!(t.unstable_now()-D<O)}function U(){if(C!==null){var fe=t.unstable_now();D=fe;var De=!0;try{De=C(!0,fe)}finally{De?G():(L=!1,C=null)}}else L=!1}var G;if(typeof A=="function")G=function(){A(U)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,ke=de.port2;de.port1.onmessage=U,G=function(){ke.postMessage(null)}}else G=function(){b(U,0)};function Ue(fe){C=fe,L||(L=!0,G())}function Ne(fe,De){M=b(function(){fe(t.unstable_now())},De)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(fe){fe.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,Ue(N))},t.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<fe?Math.floor(1e3/fe):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(fe){switch(f){case 1:case 2:case 3:var De=3;break;default:De=f}var Ce=f;f=De;try{return fe()}finally{f=Ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(fe,De){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var Ce=f;f=fe;try{return De()}finally{f=Ce}},t.unstable_scheduleCallback=function(fe,De,Ce){var Q=t.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?Q+Ce:Q):Ce=Q,fe){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Ce+W,fe={id:u++,callback:De,priorityLevel:fe,startTime:Ce,expirationTime:W,sortIndex:-1},Ce>Q?(fe.sortIndex=Ce,e(c,fe),n(l)===null&&fe===n(c)&&(_?(T(M),M=-1):_=!0,Ne(P,Ce-Q))):(fe.sortIndex=W,e(l,fe),y||g||(y=!0,Ue(N))),fe},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(fe){var De=f;return function(){var Ce=f;f=De;try{return fe.apply(this,arguments)}finally{f=Ce}}}})(x6)),x6}var pX;function OTe(){return pX||(pX=1,_6.exports=NTe()),_6.exports}var mX;function LTe(){if(mX)return el;mX=1;var t=$A(),e=OTe();function n(d){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+d,w=1;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+d+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(d,m){o(d,m),o(d+"Capture",m)}function o(d,m){for(i[d]=m,d=0;d<m.length;d++)r.add(m[d])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},h={};function f(d){return l.call(h,d)?!0:l.call(u,d)?!1:c.test(d)?h[d]=!0:(u[d]=!0,!1)}function g(d,m,w,k){if(w!==null&&w.type===0)return!1;switch(typeof m){case"function":case"symbol":return!0;case"boolean":return k?!1:w!==null?!w.acceptsBooleans:(d=d.toLowerCase().slice(0,5),d!=="data-"&&d!=="aria-");default:return!1}}function y(d,m,w,k){if(m===null||typeof m>"u"||g(d,m,w,k))return!0;if(k)return!1;if(w!==null)switch(w.type){case 3:return!m;case 4:return m===!1;case 5:return isNaN(m);case 6:return isNaN(m)||1>m}return!1}function _(d,m,w,k,R,j,K){this.acceptsBooleans=m===2||m===3||m===4,this.attributeName=k,this.attributeNamespace=R,this.mustUseProperty=w,this.propertyName=d,this.type=m,this.sanitizeURL=j,this.removeEmptyString=K}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(d){b[d]=new _(d,0,!1,d,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(d){var m=d[0];b[m]=new _(m,1,!1,d[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(d){b[d]=new _(d,2,!1,d.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(d){b[d]=new _(d,2,!1,d,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(d){b[d]=new _(d,3,!1,d.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(d){b[d]=new _(d,3,!0,d,null,!1,!1)}),["capture","download"].forEach(function(d){b[d]=new _(d,4,!1,d,null,!1,!1)}),["cols","rows","size","span"].forEach(function(d){b[d]=new _(d,6,!1,d,null,!1,!1)}),["rowSpan","start"].forEach(function(d){b[d]=new _(d,5,!1,d.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function A(d){return d[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(d){var m=d.replace(T,A);b[m]=new _(m,1,!1,d,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(d){var m=d.replace(T,A);b[m]=new _(m,1,!1,d,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(d){var m=d.replace(T,A);b[m]=new _(m,1,!1,d,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(d){b[d]=new _(d,1,!1,d.toLowerCase(),null,!1,!1)}),b.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(d){b[d]=new _(d,1,!1,d.toLowerCase(),null,!0,!0)});function I(d,m,w,k){var R=b.hasOwnProperty(m)?b[m]:null;(R!==null?R.type!==0:k||!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(y(m,w,R,k)&&(w=null),k||R===null?f(m)&&(w===null?d.removeAttribute(m):d.setAttribute(m,""+w)):R.mustUseProperty?d[R.propertyName]=w===null?R.type===3?!1:"":w:(m=R.attributeName,k=R.attributeNamespace,w===null?d.removeAttribute(m):(R=R.type,w=R===3||R===4&&w===!0?"":""+w,k?d.setAttributeNS(k,m,w):d.setAttribute(m,w))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),L=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),V=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),ke=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),fe=Symbol.iterator;function De(d){return d===null||typeof d!="object"?null:(d=fe&&d[fe]||d["@@iterator"],typeof d=="function"?d:null)}var Ce=Object.assign,Q;function W(d){if(Q===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);Q=m&&m[1]||""}return`
`+Q+d}var ne=!1;function ie(d,m){if(!d||ne)return"";ne=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch($e){var k=$e}Reflect.construct(d,[],m)}else{try{m.call()}catch($e){k=$e}d.call(m.prototype)}else{try{throw Error()}catch($e){k=$e}d()}}catch($e){if($e&&k&&typeof $e.stack=="string"){for(var R=$e.stack.split(`
`),j=k.stack.split(`
`),K=R.length-1,ce=j.length-1;1<=K&&0<=ce&&R[K]!==j[ce];)ce--;for(;1<=K&&0<=ce;K--,ce--)if(R[K]!==j[ce]){if(K!==1||ce!==1)do if(K--,ce--,0>ce||R[K]!==j[ce]){var he=`
`+R[K].replace(" at new "," at ");return d.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",d.displayName)),he}while(1<=K&&0<=ce);break}}}finally{ne=!1,Error.prepareStackTrace=w}return(d=d?d.displayName||d.name:"")?W(d):""}function le(d){switch(d.tag){case 5:return W(d.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return d=ie(d.type,!1),d;case 11:return d=ie(d.type.render,!1),d;case 1:return d=ie(d.type,!0),d;default:return""}}function ve(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case C:return"Fragment";case L:return"Portal";case O:return"Profiler";case M:return"StrictMode";case G:return"Suspense";case de:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case V:return(d.displayName||"Context")+".Consumer";case D:return(d._context.displayName||"Context")+".Provider";case U:var m=d.render;return d=d.displayName,d||(d=m.displayName||m.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case ke:return m=d.displayName||null,m!==null?m:ve(d.type)||"Memo";case Ue:m=d._payload,d=d._init;try{return ve(d(m))}catch{}}return null}function qe(d){var m=d.type;switch(d.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=m.render,d=d.displayName||d.name||"",m.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(m);case 8:return m===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function Ke(d){switch(typeof d){case"boolean":case"number":case"string":case"undefined":return d;case"object":return d;default:return""}}function Se(d){var m=d.type;return(d=d.nodeName)&&d.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function we(d){var m=Se(d)?"checked":"value",w=Object.getOwnPropertyDescriptor(d.constructor.prototype,m),k=""+d[m];if(!d.hasOwnProperty(m)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var R=w.get,j=w.set;return Object.defineProperty(d,m,{configurable:!0,get:function(){return R.call(this)},set:function(K){k=""+K,j.call(this,K)}}),Object.defineProperty(d,m,{enumerable:w.enumerable}),{getValue:function(){return k},setValue:function(K){k=""+K},stopTracking:function(){d._valueTracker=null,delete d[m]}}}}function Dt(d){d._valueTracker||(d._valueTracker=we(d))}function Ye(d){if(!d)return!1;var m=d._valueTracker;if(!m)return!0;var w=m.getValue(),k="";return d&&(k=Se(d)?d.checked?"true":"false":d.value),d=k,d!==w?(m.setValue(d),!0):!1}function on(d){if(d=d||(typeof document<"u"?document:void 0),typeof d>"u")return null;try{return d.activeElement||d.body}catch{return d.body}}function jt(d,m){var w=m.checked;return Ce({},m,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??d._wrapperState.initialChecked})}function pn(d,m){var w=m.defaultValue==null?"":m.defaultValue,k=m.checked!=null?m.checked:m.defaultChecked;w=Ke(m.value!=null?m.value:w),d._wrapperState={initialChecked:k,initialValue:w,controlled:m.type==="checkbox"||m.type==="radio"?m.checked!=null:m.value!=null}}function _n(d,m){m=m.checked,m!=null&&I(d,"checked",m,!1)}function dt(d,m){_n(d,m);var w=Ke(m.value),k=m.type;if(w!=null)k==="number"?(w===0&&d.value===""||d.value!=w)&&(d.value=""+w):d.value!==""+w&&(d.value=""+w);else if(k==="submit"||k==="reset"){d.removeAttribute("value");return}m.hasOwnProperty("value")?zn(d,m.type,w):m.hasOwnProperty("defaultValue")&&zn(d,m.type,Ke(m.defaultValue)),m.checked==null&&m.defaultChecked!=null&&(d.defaultChecked=!!m.defaultChecked)}function hr(d,m,w){if(m.hasOwnProperty("value")||m.hasOwnProperty("defaultValue")){var k=m.type;if(!(k!=="submit"&&k!=="reset"||m.value!==void 0&&m.value!==null))return;m=""+d._wrapperState.initialValue,w||m===d.value||(d.value=m),d.defaultValue=m}w=d.name,w!==""&&(d.name=""),d.defaultChecked=!!d._wrapperState.initialChecked,w!==""&&(d.name=w)}function zn(d,m,w){(m!=="number"||on(d.ownerDocument)!==d)&&(w==null?d.defaultValue=""+d._wrapperState.initialValue:d.defaultValue!==""+w&&(d.defaultValue=""+w))}var Hn=Array.isArray;function ei(d,m,w,k){if(d=d.options,m){m={};for(var R=0;R<w.length;R++)m["$"+w[R]]=!0;for(w=0;w<d.length;w++)R=m.hasOwnProperty("$"+d[w].value),d[w].selected!==R&&(d[w].selected=R),R&&k&&(d[w].defaultSelected=!0)}else{for(w=""+Ke(w),m=null,R=0;R<d.length;R++){if(d[R].value===w){d[R].selected=!0,k&&(d[R].defaultSelected=!0);return}m!==null||d[R].disabled||(m=d[R])}m!==null&&(m.selected=!0)}}function _o(d,m){if(m.dangerouslySetInnerHTML!=null)throw Error(n(91));return Ce({},m,{value:void 0,defaultValue:void 0,children:""+d._wrapperState.initialValue})}function Rr(d,m){var w=m.value;if(w==null){if(w=m.children,m=m.defaultValue,w!=null){if(m!=null)throw Error(n(92));if(Hn(w)){if(1<w.length)throw Error(n(93));w=w[0]}m=w}m==null&&(m=""),w=m}d._wrapperState={initialValue:Ke(w)}}function Ai(d,m){var w=Ke(m.value),k=Ke(m.defaultValue);w!=null&&(w=""+w,w!==d.value&&(d.value=w),m.defaultValue==null&&d.defaultValue!==w&&(d.defaultValue=w)),k!=null&&(d.defaultValue=""+k)}function Ls(d){var m=d.textContent;m===d._wrapperState.initialValue&&m!==""&&m!==null&&(d.value=m)}function _t(d){switch(d){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qn(d,m){return d==null||d==="http://www.w3.org/1999/xhtml"?_t(m):d==="http://www.w3.org/2000/svg"&&m==="foreignObject"?"http://www.w3.org/1999/xhtml":d}var dr,Ft=(function(d){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(m,w,k,R){MSApp.execUnsafeLocalFunction(function(){return d(m,w,k,R)})}:d})(function(d,m){if(d.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in d)d.innerHTML=m;else{for(dr=dr||document.createElement("div"),dr.innerHTML="<svg>"+m.valueOf().toString()+"</svg>",m=dr.firstChild;d.firstChild;)d.removeChild(d.firstChild);for(;m.firstChild;)d.appendChild(m.firstChild)}});function jn(d,m){if(m){var w=d.firstChild;if(w&&w===d.lastChild&&w.nodeType===3){w.nodeValue=m;return}}d.textContent=m}var en={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$o=["Webkit","ms","Moz","O"];Object.keys(en).forEach(function(d){$o.forEach(function(m){m=m+d.charAt(0).toUpperCase()+d.substring(1),en[m]=en[d]})});function Gi(d,m,w){return m==null||typeof m=="boolean"||m===""?"":w||typeof m!="number"||m===0||en.hasOwnProperty(d)&&en[d]?(""+m).trim():m+"px"}function Ds(d,m){d=d.style;for(var w in m)if(m.hasOwnProperty(w)){var k=w.indexOf("--")===0,R=Gi(w,m[w],k);w==="float"&&(w="cssFloat"),k?d.setProperty(w,R):d[w]=R}}var Nn=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ii(d,m){if(m){if(Nn[d]&&(m.children!=null||m.dangerouslySetInnerHTML!=null))throw Error(n(137,d));if(m.dangerouslySetInnerHTML!=null){if(m.children!=null)throw Error(n(60));if(typeof m.dangerouslySetInnerHTML!="object"||!("__html"in m.dangerouslySetInnerHTML))throw Error(n(61))}if(m.style!=null&&typeof m.style!="object")throw Error(n(62))}}function He(d,m){if(d.indexOf("-")===-1)return typeof m.is=="string";switch(d){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ae=null;function Ie(d){return d=d.target||d.srcElement||window,d.correspondingUseElement&&(d=d.correspondingUseElement),d.nodeType===3?d.parentNode:d}var sn=null,z=null,Et=null;function X(d){if(d=nE(d)){if(typeof sn!="function")throw Error(n(280));var m=d.stateNode;m&&(m=EP(m),sn(d.stateNode,d.type,m))}}function ae(d){z?Et?Et.push(d):Et=[d]:z=d}function Ve(){if(z){var d=z,m=Et;if(Et=z=null,X(d),m)for(d=0;d<m.length;d++)X(m[d])}}function ee(d,m){return d(m)}function ge(){}var je=!1;function Je(d,m,w){if(je)return d(m,w);je=!0;try{return ee(d,m,w)}finally{je=!1,(z!==null||Et!==null)&&(ge(),Ve())}}function ze(d,m){var w=d.stateNode;if(w===null)return null;var k=EP(w);if(k===null)return null;w=k[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(d=d.type,k=!(d==="button"||d==="input"||d==="select"||d==="textarea")),d=!k;break e;default:d=!1}if(d)return null;if(w&&typeof w!="function")throw Error(n(231,m,typeof w));return w}var nt=!1;if(a)try{var et={};Object.defineProperty(et,"passive",{get:function(){nt=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{nt=!1}function Mt(d,m,w,k,R,j,K,ce,he){var $e=Array.prototype.slice.call(arguments,3);try{m.apply(w,$e)}catch(at){this.onError(at)}}var zt=!1,yn=null,q=!1,re=null,J={onError:function(d){zt=!0,yn=d}};function te(d,m,w,k,R,j,K,ce,he){zt=!1,yn=null,Mt.apply(J,arguments)}function se(d,m,w,k,R,j,K,ce,he){if(te.apply(this,arguments),zt){if(zt){var $e=yn;zt=!1,yn=null}else throw Error(n(198));q||(q=!0,re=$e)}}function oe(d){var m=d,w=d;if(d.alternate)for(;m.return;)m=m.return;else{d=m;do m=d,(m.flags&4098)!==0&&(w=m.return),d=m.return;while(d)}return m.tag===3?w:null}function Re(d){if(d.tag===13){var m=d.memoizedState;if(m===null&&(d=d.alternate,d!==null&&(m=d.memoizedState)),m!==null)return m.dehydrated}return null}function Be(d){if(oe(d)!==d)throw Error(n(188))}function Pe(d){var m=d.alternate;if(!m){if(m=oe(d),m===null)throw Error(n(188));return m!==d?null:d}for(var w=d,k=m;;){var R=w.return;if(R===null)break;var j=R.alternate;if(j===null){if(k=R.return,k!==null){w=k;continue}break}if(R.child===j.child){for(j=R.child;j;){if(j===w)return Be(R),d;if(j===k)return Be(R),m;j=j.sibling}throw Error(n(188))}if(w.return!==k.return)w=R,k=j;else{for(var K=!1,ce=R.child;ce;){if(ce===w){K=!0,w=R,k=j;break}if(ce===k){K=!0,k=R,w=j;break}ce=ce.sibling}if(!K){for(ce=j.child;ce;){if(ce===w){K=!0,w=j,k=R;break}if(ce===k){K=!0,k=j,w=R;break}ce=ce.sibling}if(!K)throw Error(n(189))}}if(w.alternate!==k)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?d:m}function Oe(d){return d=Pe(d),d!==null?Le(d):null}function Le(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var m=Le(d);if(m!==null)return m;d=d.sibling}return null}var lt=e.unstable_scheduleCallback,yt=e.unstable_cancelCallback,Ct=e.unstable_shouldYield,ct=e.unstable_requestPaint,ut=e.unstable_now,En=e.unstable_getCurrentPriorityLevel,Mr=e.unstable_ImmediatePriority,$r=e.unstable_UserBlockingPriority,vi=e.unstable_NormalPriority,Eu=e.unstable_LowPriority,kc=e.unstable_IdlePriority,jl=null,ss=null;function Lp(d){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(jl,d,void 0,(d.current.flags&128)===128)}catch{}}var Pi=Math.clz32?Math.clz32:y0,Ph=Math.log,Ac=Math.LN2;function y0(d){return d>>>=0,d===0?32:31-(Ph(d)/Ac|0)|0}var Ch=64,Dp=4194304;function Er(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function Yd(d,m){var w=d.pendingLanes;if(w===0)return 0;var k=0,R=d.suspendedLanes,j=d.pingedLanes,K=w&268435455;if(K!==0){var ce=K&~R;ce!==0?k=Er(ce):(j&=K,j!==0&&(k=Er(j)))}else K=w&~R,K!==0?k=Er(K):j!==0&&(k=Er(j));if(k===0)return 0;if(m!==0&&m!==k&&(m&R)===0&&(R=k&-k,j=m&-m,R>=j||R===16&&(j&4194240)!==0))return m;if((k&4)!==0&&(k|=w&16),m=d.entangledLanes,m!==0)for(d=d.entanglements,m&=k;0<m;)w=31-Pi(m),R=1<<w,k|=d[w],m&=~R;return k}function v0(d,m){switch(d){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _0(d,m){for(var w=d.suspendedLanes,k=d.pingedLanes,R=d.expirationTimes,j=d.pendingLanes;0<j;){var K=31-Pi(j),ce=1<<K,he=R[K];he===-1?((ce&w)===0||(ce&k)!==0)&&(R[K]=v0(ce,m)):he<=m&&(d.expiredLanes|=ce),j&=~ce}}function Lb(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Db(){var d=Ch;return Ch<<=1,(Ch&4194240)===0&&(Ch=64),d}function jb(d){for(var m=[],w=0;31>w;w++)m.push(d);return m}function x0(d,m,w){d.pendingLanes|=m,m!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,m=31-Pi(m),d[m]=w}function qL(d,m){var w=d.pendingLanes&~m;d.pendingLanes=m,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=m,d.mutableReadLanes&=m,d.entangledLanes&=m,m=d.entanglements;var k=d.eventTimes;for(d=d.expirationTimes;0<w;){var R=31-Pi(w),j=1<<R;m[R]=0,k[R]=-1,d[R]=-1,w&=~j}}function $b(d,m){var w=d.entangledLanes|=m;for(d=d.entanglements;w;){var k=31-Pi(w),R=1<<k;R&m|d[k]&m&&(d[k]|=m),w&=~R}}var sr=0;function Rh(d){return d&=-d,1<d?4<d?(d&268435455)!==0?16:536870912:4:1}var Fb,Cv,Vb,zb,Gb,Mh=!1,Rv=[],Nh=null,Oh=null,xo=null,w0=new Map,Xd=new Map,$l=[],aP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jp(d,m){switch(d){case"focusin":case"focusout":Nh=null;break;case"dragenter":case"dragleave":Oh=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":w0.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xd.delete(m.pointerId)}}function Su(d,m,w,k,R,j){return d===null||d.nativeEvent!==j?(d={blockedOn:m,domEventName:w,eventSystemFlags:k,nativeEvent:j,targetContainers:[R]},m!==null&&(m=nE(m),m!==null&&Cv(m)),d):(d.eventSystemFlags|=k,m=d.targetContainers,R!==null&&m.indexOf(R)===-1&&m.push(R),d)}function lP(d,m,w,k,R){switch(m){case"focusin":return Nh=Su(Nh,d,m,w,k,R),!0;case"dragenter":return Oh=Su(Oh,d,m,w,k,R),!0;case"mouseover":return xo=Su(xo,d,m,w,k,R),!0;case"pointerover":var j=R.pointerId;return w0.set(j,Su(w0.get(j)||null,d,m,w,k,R)),!0;case"gotpointercapture":return j=R.pointerId,Xd.set(j,Su(Xd.get(j)||null,d,m,w,k,R)),!0}return!1}function Mv(d){var m=T0(d.target);if(m!==null){var w=oe(m);if(w!==null){if(m=w.tag,m===13){if(m=Re(w),m!==null){d.blockedOn=m,Gb(d.priority,function(){Vb(w)});return}}else if(m===3&&w.stateNode.current.memoizedState.isDehydrated){d.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}d.blockedOn=null}function ti(d){if(d.blockedOn!==null)return!1;for(var m=d.targetContainers;0<m.length;){var w=Nv(d.domEventName,d.eventSystemFlags,m[0],d.nativeEvent);if(w===null){w=d.nativeEvent;var k=new w.constructor(w.type,w);Ae=k,w.target.dispatchEvent(k),Ae=null}else return m=nE(w),m!==null&&Cv(m),d.blockedOn=w,!1;m.shift()}return!0}function cP(d,m,w){ti(d)&&w.delete(m)}function KL(){Mh=!1,Nh!==null&&ti(Nh)&&(Nh=null),Oh!==null&&ti(Oh)&&(Oh=null),xo!==null&&ti(xo)&&(xo=null),w0.forEach(cP),Xd.forEach(cP)}function $p(d,m){d.blockedOn===m&&(d.blockedOn=null,Mh||(Mh=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,KL)))}function Fp(d){function m(R){return $p(R,d)}if(0<Rv.length){$p(Rv[0],d);for(var w=1;w<Rv.length;w++){var k=Rv[w];k.blockedOn===d&&(k.blockedOn=null)}}for(Nh!==null&&$p(Nh,d),Oh!==null&&$p(Oh,d),xo!==null&&$p(xo,d),w0.forEach(m),Xd.forEach(m),w=0;w<$l.length;w++)k=$l[w],k.blockedOn===d&&(k.blockedOn=null);for(;0<$l.length&&(w=$l[0],w.blockedOn===null);)Mv(w),w.blockedOn===null&&$l.shift()}var Zd=P.ReactCurrentBatchConfig,Jd=!0;function Lh(d,m,w,k){var R=sr,j=Zd.transition;Zd.transition=null;try{sr=1,Ub(d,m,w,k)}finally{sr=R,Zd.transition=j}}function uP(d,m,w,k){var R=sr,j=Zd.transition;Zd.transition=null;try{sr=4,Ub(d,m,w,k)}finally{sr=R,Zd.transition=j}}function Ub(d,m,w,k){if(Jd){var R=Nv(d,m,w,k);if(R===null)sD(d,m,k,Dh,w),jp(d,k);else if(lP(R,d,m,w,k))k.stopPropagation();else if(jp(d,k),m&4&&-1<aP.indexOf(d)){for(;R!==null;){var j=nE(R);if(j!==null&&Fb(j),j=Nv(d,m,w,k),j===null&&sD(d,m,k,Dh,w),j===R)break;R=j}R!==null&&k.stopPropagation()}else sD(d,m,k,null,w)}}var Dh=null;function Nv(d,m,w,k){if(Dh=null,d=Ie(k),d=T0(d),d!==null)if(m=oe(d),m===null)d=null;else if(w=m.tag,w===13){if(d=Re(m),d!==null)return d;d=null}else if(w===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;d=null}else m!==d&&(d=null);return Dh=d,null}function Ov(d){switch(d){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(En()){case Mr:return 1;case $r:return 4;case vi:case Eu:return 16;case kc:return 536870912;default:return 16}default:return 16}}var Fl=null,Lv=null,Qd=null;function hP(){if(Qd)return Qd;var d,m=Lv,w=m.length,k,R="value"in Fl?Fl.value:Fl.textContent,j=R.length;for(d=0;d<w&&m[d]===R[d];d++);var K=w-d;for(k=1;k<=K&&m[w-k]===R[j-k];k++);return Qd=R.slice(d,1<k?1-k:void 0)}function b0(d){var m=d.keyCode;return"charCode"in d?(d=d.charCode,d===0&&m===13&&(d=13)):d=m,d===10&&(d=13),32<=d||d===13?d:0}function jh(){return!0}function Bb(){return!1}function Fo(d){function m(w,k,R,j,K){this._reactName=w,this._targetInst=R,this.type=k,this.nativeEvent=j,this.target=K,this.currentTarget=null;for(var ce in d)d.hasOwnProperty(ce)&&(w=d[ce],this[ce]=w?w(j):j[ce]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?jh:Bb,this.isPropagationStopped=Bb,this}return Ce(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=jh)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=jh)},persist:function(){},isPersistent:jh}),m}var $h={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(d){return d.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},E0=Fo($h),Vp=Ce({},$h,{view:0,detail:0}),Dv=Fo(Vp),jv,$v,Vl,S0=Ce({},Vp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:On,button:0,buttons:0,relatedTarget:function(d){return d.relatedTarget===void 0?d.fromElement===d.srcElement?d.toElement:d.fromElement:d.relatedTarget},movementX:function(d){return"movementX"in d?d.movementX:(d!==Vl&&(Vl&&d.type==="mousemove"?(jv=d.screenX-Vl.screenX,$v=d.screenY-Vl.screenY):$v=jv=0,Vl=d),jv)},movementY:function(d){return"movementY"in d?d.movementY:$v}}),Wb=Fo(S0),dP=Ce({},S0,{dataTransfer:0}),fP=Fo(dP),Fv=Ce({},Vp,{relatedTarget:0}),wo=Fo(Fv),pP=Ce({},$h,{animationName:0,elapsedTime:0,pseudoElement:0}),mP=Fo(pP),zp=Ce({},$h,{clipboardData:function(d){return"clipboardData"in d?d.clipboardData:window.clipboardData}}),S=Fo(zp),F=Ce({},$h,{data:0}),B=Fo(F),Z={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wt(d){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(d):(d=Fe[d])?!!m[d]:!1}function On(){return wt}var os=Ce({},Vp,{key:function(d){if(d.key){var m=Z[d.key]||d.key;if(m!=="Unidentified")return m}return d.type==="keypress"?(d=b0(d),d===13?"Enter":String.fromCharCode(d)):d.type==="keydown"||d.type==="keyup"?Ee[d.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:On,charCode:function(d){return d.type==="keypress"?b0(d):0},keyCode:function(d){return d.type==="keydown"||d.type==="keyup"?d.keyCode:0},which:function(d){return d.type==="keypress"?b0(d):d.type==="keydown"||d.type==="keyup"?d.keyCode:0}}),Fr=Fo(os),gs=Ce({},S0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zl=Fo(gs),ef=Ce({},Vp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:On}),Fh=Fo(ef),Vh=Ce({},$h,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vv=Fo(Vh),Hb=Ce({},S0,{deltaX:function(d){return"deltaX"in d?d.deltaX:"wheelDeltaX"in d?-d.wheelDeltaX:0},deltaY:function(d){return"deltaY"in d?d.deltaY:"wheelDeltaY"in d?-d.wheelDeltaY:"wheelDelta"in d?-d.wheelDelta:0},deltaZ:0,deltaMode:0}),bSe=Fo(Hb),ESe=[9,13,27,32],YL=a&&"CompositionEvent"in window,qb=null;a&&"documentMode"in document&&(qb=document.documentMode);var SSe=a&&"TextEvent"in window&&!qb,Qq=a&&(!YL||qb&&8<qb&&11>=qb),eK=" ",tK=!1;function nK(d,m){switch(d){case"keyup":return ESe.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rK(d){return d=d.detail,typeof d=="object"&&"data"in d?d.data:null}var zv=!1;function TSe(d,m){switch(d){case"compositionend":return rK(m);case"keypress":return m.which!==32?null:(tK=!0,eK);case"textInput":return d=m.data,d===eK&&tK?null:d;default:return null}}function kSe(d,m){if(zv)return d==="compositionend"||!YL&&nK(d,m)?(d=hP(),Qd=Lv=Fl=null,zv=!1,d):null;switch(d){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Qq&&m.locale!=="ko"?null:m.data;default:return null}}var ASe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iK(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m==="input"?!!ASe[d.type]:m==="textarea"}function sK(d,m,w,k){ae(k),m=xP(m,"onChange"),0<m.length&&(w=new E0("onChange","change",null,w,k),d.push({event:w,listeners:m}))}var Kb=null,Yb=null;function ISe(d){EK(d,0)}function gP(d){var m=Hv(d);if(Ye(m))return d}function PSe(d,m){if(d==="change")return m}var oK=!1;if(a){var XL;if(a){var ZL="oninput"in document;if(!ZL){var aK=document.createElement("div");aK.setAttribute("oninput","return;"),ZL=typeof aK.oninput=="function"}XL=ZL}else XL=!1;oK=XL&&(!document.documentMode||9<document.documentMode)}function lK(){Kb&&(Kb.detachEvent("onpropertychange",cK),Yb=Kb=null)}function cK(d){if(d.propertyName==="value"&&gP(Yb)){var m=[];sK(m,Yb,d,Ie(d)),Je(ISe,m)}}function CSe(d,m,w){d==="focusin"?(lK(),Kb=m,Yb=w,Kb.attachEvent("onpropertychange",cK)):d==="focusout"&&lK()}function RSe(d){if(d==="selectionchange"||d==="keyup"||d==="keydown")return gP(Yb)}function MSe(d,m){if(d==="click")return gP(m)}function NSe(d,m){if(d==="input"||d==="change")return gP(m)}function OSe(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var Tu=typeof Object.is=="function"?Object.is:OSe;function Xb(d,m){if(Tu(d,m))return!0;if(typeof d!="object"||d===null||typeof m!="object"||m===null)return!1;var w=Object.keys(d),k=Object.keys(m);if(w.length!==k.length)return!1;for(k=0;k<w.length;k++){var R=w[k];if(!l.call(m,R)||!Tu(d[R],m[R]))return!1}return!0}function uK(d){for(;d&&d.firstChild;)d=d.firstChild;return d}function hK(d,m){var w=uK(d);d=0;for(var k;w;){if(w.nodeType===3){if(k=d+w.textContent.length,d<=m&&k>=m)return{node:w,offset:m-d};d=k}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=uK(w)}}function dK(d,m){return d&&m?d===m?!0:d&&d.nodeType===3?!1:m&&m.nodeType===3?dK(d,m.parentNode):"contains"in d?d.contains(m):d.compareDocumentPosition?!!(d.compareDocumentPosition(m)&16):!1:!1}function fK(){for(var d=window,m=on();m instanceof d.HTMLIFrameElement;){try{var w=typeof m.contentWindow.location.href=="string"}catch{w=!1}if(w)d=m.contentWindow;else break;m=on(d.document)}return m}function JL(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return m&&(m==="input"&&(d.type==="text"||d.type==="search"||d.type==="tel"||d.type==="url"||d.type==="password")||m==="textarea"||d.contentEditable==="true")}function LSe(d){var m=fK(),w=d.focusedElem,k=d.selectionRange;if(m!==w&&w&&w.ownerDocument&&dK(w.ownerDocument.documentElement,w)){if(k!==null&&JL(w)){if(m=k.start,d=k.end,d===void 0&&(d=m),"selectionStart"in w)w.selectionStart=m,w.selectionEnd=Math.min(d,w.value.length);else if(d=(m=w.ownerDocument||document)&&m.defaultView||window,d.getSelection){d=d.getSelection();var R=w.textContent.length,j=Math.min(k.start,R);k=k.end===void 0?j:Math.min(k.end,R),!d.extend&&j>k&&(R=k,k=j,j=R),R=hK(w,j);var K=hK(w,k);R&&K&&(d.rangeCount!==1||d.anchorNode!==R.node||d.anchorOffset!==R.offset||d.focusNode!==K.node||d.focusOffset!==K.offset)&&(m=m.createRange(),m.setStart(R.node,R.offset),d.removeAllRanges(),j>k?(d.addRange(m),d.extend(K.node,K.offset)):(m.setEnd(K.node,K.offset),d.addRange(m)))}}for(m=[],d=w;d=d.parentNode;)d.nodeType===1&&m.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<m.length;w++)d=m[w],d.element.scrollLeft=d.left,d.element.scrollTop=d.top}}var DSe=a&&"documentMode"in document&&11>=document.documentMode,Gv=null,QL=null,Zb=null,eD=!1;function pK(d,m,w){var k=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;eD||Gv==null||Gv!==on(k)||(k=Gv,"selectionStart"in k&&JL(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),Zb&&Xb(Zb,k)||(Zb=k,k=xP(QL,"onSelect"),0<k.length&&(m=new E0("onSelect","select",null,m,w),d.push({event:m,listeners:k}),m.target=Gv)))}function yP(d,m){var w={};return w[d.toLowerCase()]=m.toLowerCase(),w["Webkit"+d]="webkit"+m,w["Moz"+d]="moz"+m,w}var Uv={animationend:yP("Animation","AnimationEnd"),animationiteration:yP("Animation","AnimationIteration"),animationstart:yP("Animation","AnimationStart"),transitionend:yP("Transition","TransitionEnd")},tD={},mK={};a&&(mK=document.createElement("div").style,"AnimationEvent"in window||(delete Uv.animationend.animation,delete Uv.animationiteration.animation,delete Uv.animationstart.animation),"TransitionEvent"in window||delete Uv.transitionend.transition);function vP(d){if(tD[d])return tD[d];if(!Uv[d])return d;var m=Uv[d],w;for(w in m)if(m.hasOwnProperty(w)&&w in mK)return tD[d]=m[w];return d}var gK=vP("animationend"),yK=vP("animationiteration"),vK=vP("animationstart"),_K=vP("transitionend"),xK=new Map,wK="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gp(d,m){xK.set(d,m),s(m,[d])}for(var nD=0;nD<wK.length;nD++){var rD=wK[nD],jSe=rD.toLowerCase(),$Se=rD[0].toUpperCase()+rD.slice(1);Gp(jSe,"on"+$Se)}Gp(gK,"onAnimationEnd"),Gp(yK,"onAnimationIteration"),Gp(vK,"onAnimationStart"),Gp("dblclick","onDoubleClick"),Gp("focusin","onFocus"),Gp("focusout","onBlur"),Gp(_K,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FSe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jb));function bK(d,m,w){var k=d.type||"unknown-event";d.currentTarget=w,se(k,m,void 0,d),d.currentTarget=null}function EK(d,m){m=(m&4)!==0;for(var w=0;w<d.length;w++){var k=d[w],R=k.event;k=k.listeners;e:{var j=void 0;if(m)for(var K=k.length-1;0<=K;K--){var ce=k[K],he=ce.instance,$e=ce.currentTarget;if(ce=ce.listener,he!==j&&R.isPropagationStopped())break e;bK(R,ce,$e),j=he}else for(K=0;K<k.length;K++){if(ce=k[K],he=ce.instance,$e=ce.currentTarget,ce=ce.listener,he!==j&&R.isPropagationStopped())break e;bK(R,ce,$e),j=he}}}if(q)throw d=re,q=!1,re=null,d}function ci(d,m){var w=m[hD];w===void 0&&(w=m[hD]=new Set);var k=d+"__bubble";w.has(k)||(SK(m,d,2,!1),w.add(k))}function iD(d,m,w){var k=0;m&&(k|=4),SK(w,d,k,m)}var _P="_reactListening"+Math.random().toString(36).slice(2);function Qb(d){if(!d[_P]){d[_P]=!0,r.forEach(function(w){w!=="selectionchange"&&(FSe.has(w)||iD(w,!1,d),iD(w,!0,d))});var m=d.nodeType===9?d:d.ownerDocument;m===null||m[_P]||(m[_P]=!0,iD("selectionchange",!1,m))}}function SK(d,m,w,k){switch(Ov(m)){case 1:var R=Lh;break;case 4:R=uP;break;default:R=Ub}w=R.bind(null,m,w,d),R=void 0,!nt||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(R=!0),k?R!==void 0?d.addEventListener(m,w,{capture:!0,passive:R}):d.addEventListener(m,w,!0):R!==void 0?d.addEventListener(m,w,{passive:R}):d.addEventListener(m,w,!1)}function sD(d,m,w,k,R){var j=k;if((m&1)===0&&(m&2)===0&&k!==null)e:for(;;){if(k===null)return;var K=k.tag;if(K===3||K===4){var ce=k.stateNode.containerInfo;if(ce===R||ce.nodeType===8&&ce.parentNode===R)break;if(K===4)for(K=k.return;K!==null;){var he=K.tag;if((he===3||he===4)&&(he=K.stateNode.containerInfo,he===R||he.nodeType===8&&he.parentNode===R))return;K=K.return}for(;ce!==null;){if(K=T0(ce),K===null)return;if(he=K.tag,he===5||he===6){k=j=K;continue e}ce=ce.parentNode}}k=k.return}Je(function(){var $e=j,at=Ie(w),ht=[];e:{var it=xK.get(d);if(it!==void 0){var Nt=E0,Gt=d;switch(d){case"keypress":if(b0(w)===0)break e;case"keydown":case"keyup":Nt=Fr;break;case"focusin":Gt="focus",Nt=wo;break;case"focusout":Gt="blur",Nt=wo;break;case"beforeblur":case"afterblur":Nt=wo;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=Wb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=fP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=Fh;break;case gK:case yK:case vK:Nt=mP;break;case _K:Nt=Vv;break;case"scroll":Nt=Dv;break;case"wheel":Nt=bSe;break;case"copy":case"cut":case"paste":Nt=S;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=zl}var Yt=(m&4)!==0,as=!Yt&&d==="scroll",be=Yt?it!==null?it+"Capture":null:it;Yt=[];for(var me=$e,Me;me!==null;){Me=me;var mt=Me.stateNode;if(Me.tag===5&&mt!==null&&(Me=mt,be!==null&&(mt=ze(me,be),mt!=null&&Yt.push(eE(me,mt,Me)))),as)break;me=me.return}0<Yt.length&&(it=new Nt(it,Gt,null,w,at),ht.push({event:it,listeners:Yt}))}}if((m&7)===0){e:{if(it=d==="mouseover"||d==="pointerover",Nt=d==="mouseout"||d==="pointerout",it&&w!==Ae&&(Gt=w.relatedTarget||w.fromElement)&&(T0(Gt)||Gt[tf]))break e;if((Nt||it)&&(it=at.window===at?at:(it=at.ownerDocument)?it.defaultView||it.parentWindow:window,Nt?(Gt=w.relatedTarget||w.toElement,Nt=$e,Gt=Gt?T0(Gt):null,Gt!==null&&(as=oe(Gt),Gt!==as||Gt.tag!==5&&Gt.tag!==6)&&(Gt=null)):(Nt=null,Gt=$e),Nt!==Gt)){if(Yt=Wb,mt="onMouseLeave",be="onMouseEnter",me="mouse",(d==="pointerout"||d==="pointerover")&&(Yt=zl,mt="onPointerLeave",be="onPointerEnter",me="pointer"),as=Nt==null?it:Hv(Nt),Me=Gt==null?it:Hv(Gt),it=new Yt(mt,me+"leave",Nt,w,at),it.target=as,it.relatedTarget=Me,mt=null,T0(at)===$e&&(Yt=new Yt(be,me+"enter",Gt,w,at),Yt.target=Me,Yt.relatedTarget=as,mt=Yt),as=mt,Nt&&Gt)t:{for(Yt=Nt,be=Gt,me=0,Me=Yt;Me;Me=Bv(Me))me++;for(Me=0,mt=be;mt;mt=Bv(mt))Me++;for(;0<me-Me;)Yt=Bv(Yt),me--;for(;0<Me-me;)be=Bv(be),Me--;for(;me--;){if(Yt===be||be!==null&&Yt===be.alternate)break t;Yt=Bv(Yt),be=Bv(be)}Yt=null}else Yt=null;Nt!==null&&TK(ht,it,Nt,Yt,!1),Gt!==null&&as!==null&&TK(ht,as,Gt,Yt,!0)}}e:{if(it=$e?Hv($e):window,Nt=it.nodeName&&it.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&it.type==="file")var Zt=PSe;else if(iK(it))if(oK)Zt=NSe;else{Zt=RSe;var un=CSe}else(Nt=it.nodeName)&&Nt.toLowerCase()==="input"&&(it.type==="checkbox"||it.type==="radio")&&(Zt=MSe);if(Zt&&(Zt=Zt(d,$e))){sK(ht,Zt,w,at);break e}un&&un(d,it,$e),d==="focusout"&&(un=it._wrapperState)&&un.controlled&&it.type==="number"&&zn(it,"number",it.value)}switch(un=$e?Hv($e):window,d){case"focusin":(iK(un)||un.contentEditable==="true")&&(Gv=un,QL=$e,Zb=null);break;case"focusout":Zb=QL=Gv=null;break;case"mousedown":eD=!0;break;case"contextmenu":case"mouseup":case"dragend":eD=!1,pK(ht,w,at);break;case"selectionchange":if(DSe)break;case"keydown":case"keyup":pK(ht,w,at)}var hn;if(YL)e:{switch(d){case"compositionstart":var Sn="onCompositionStart";break e;case"compositionend":Sn="onCompositionEnd";break e;case"compositionupdate":Sn="onCompositionUpdate";break e}Sn=void 0}else zv?nK(d,w)&&(Sn="onCompositionEnd"):d==="keydown"&&w.keyCode===229&&(Sn="onCompositionStart");Sn&&(Qq&&w.locale!=="ko"&&(zv||Sn!=="onCompositionStart"?Sn==="onCompositionEnd"&&zv&&(hn=hP()):(Fl=at,Lv="value"in Fl?Fl.value:Fl.textContent,zv=!0)),un=xP($e,Sn),0<un.length&&(Sn=new B(Sn,d,null,w,at),ht.push({event:Sn,listeners:un}),hn?Sn.data=hn:(hn=rK(w),hn!==null&&(Sn.data=hn)))),(hn=SSe?TSe(d,w):kSe(d,w))&&($e=xP($e,"onBeforeInput"),0<$e.length&&(at=new B("onBeforeInput","beforeinput",null,w,at),ht.push({event:at,listeners:$e}),at.data=hn))}EK(ht,m)})}function eE(d,m,w){return{instance:d,listener:m,currentTarget:w}}function xP(d,m){for(var w=m+"Capture",k=[];d!==null;){var R=d,j=R.stateNode;R.tag===5&&j!==null&&(R=j,j=ze(d,w),j!=null&&k.unshift(eE(d,j,R)),j=ze(d,m),j!=null&&k.push(eE(d,j,R))),d=d.return}return k}function Bv(d){if(d===null)return null;do d=d.return;while(d&&d.tag!==5);return d||null}function TK(d,m,w,k,R){for(var j=m._reactName,K=[];w!==null&&w!==k;){var ce=w,he=ce.alternate,$e=ce.stateNode;if(he!==null&&he===k)break;ce.tag===5&&$e!==null&&(ce=$e,R?(he=ze(w,j),he!=null&&K.unshift(eE(w,he,ce))):R||(he=ze(w,j),he!=null&&K.push(eE(w,he,ce)))),w=w.return}K.length!==0&&d.push({event:m,listeners:K})}var VSe=/\r\n?/g,zSe=/\u0000|\uFFFD/g;function kK(d){return(typeof d=="string"?d:""+d).replace(VSe,`
`).replace(zSe,"")}function wP(d,m,w){if(m=kK(m),kK(d)!==m&&w)throw Error(n(425))}function bP(){}var oD=null,aD=null;function lD(d,m){return d==="textarea"||d==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var cD=typeof setTimeout=="function"?setTimeout:void 0,GSe=typeof clearTimeout=="function"?clearTimeout:void 0,AK=typeof Promise=="function"?Promise:void 0,USe=typeof queueMicrotask=="function"?queueMicrotask:typeof AK<"u"?function(d){return AK.resolve(null).then(d).catch(BSe)}:cD;function BSe(d){setTimeout(function(){throw d})}function uD(d,m){var w=m,k=0;do{var R=w.nextSibling;if(d.removeChild(w),R&&R.nodeType===8)if(w=R.data,w==="/$"){if(k===0){d.removeChild(R),Fp(m);return}k--}else w!=="$"&&w!=="$?"&&w!=="$!"||k++;w=R}while(w);Fp(m)}function Up(d){for(;d!=null;d=d.nextSibling){var m=d.nodeType;if(m===1||m===3)break;if(m===8){if(m=d.data,m==="$"||m==="$!"||m==="$?")break;if(m==="/$")return null}}return d}function IK(d){d=d.previousSibling;for(var m=0;d;){if(d.nodeType===8){var w=d.data;if(w==="$"||w==="$!"||w==="$?"){if(m===0)return d;m--}else w==="/$"&&m++}d=d.previousSibling}return null}var Wv=Math.random().toString(36).slice(2),zh="__reactFiber$"+Wv,tE="__reactProps$"+Wv,tf="__reactContainer$"+Wv,hD="__reactEvents$"+Wv,WSe="__reactListeners$"+Wv,HSe="__reactHandles$"+Wv;function T0(d){var m=d[zh];if(m)return m;for(var w=d.parentNode;w;){if(m=w[tf]||w[zh]){if(w=m.alternate,m.child!==null||w!==null&&w.child!==null)for(d=IK(d);d!==null;){if(w=d[zh])return w;d=IK(d)}return m}d=w,w=d.parentNode}return null}function nE(d){return d=d[zh]||d[tf],!d||d.tag!==5&&d.tag!==6&&d.tag!==13&&d.tag!==3?null:d}function Hv(d){if(d.tag===5||d.tag===6)return d.stateNode;throw Error(n(33))}function EP(d){return d[tE]||null}var dD=[],qv=-1;function Bp(d){return{current:d}}function ui(d){0>qv||(d.current=dD[qv],dD[qv]=null,qv--)}function oi(d,m){qv++,dD[qv]=d.current,d.current=m}var Wp={},Vo=Bp(Wp),Ya=Bp(!1),k0=Wp;function Kv(d,m){var w=d.type.contextTypes;if(!w)return Wp;var k=d.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===m)return k.__reactInternalMemoizedMaskedChildContext;var R={},j;for(j in w)R[j]=m[j];return k&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=m,d.__reactInternalMemoizedMaskedChildContext=R),R}function Xa(d){return d=d.childContextTypes,d!=null}function SP(){ui(Ya),ui(Vo)}function PK(d,m,w){if(Vo.current!==Wp)throw Error(n(168));oi(Vo,m),oi(Ya,w)}function CK(d,m,w){var k=d.stateNode;if(m=m.childContextTypes,typeof k.getChildContext!="function")return w;k=k.getChildContext();for(var R in k)if(!(R in m))throw Error(n(108,qe(d)||"Unknown",R));return Ce({},w,k)}function TP(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Wp,k0=Vo.current,oi(Vo,d),oi(Ya,Ya.current),!0}function RK(d,m,w){var k=d.stateNode;if(!k)throw Error(n(169));w?(d=CK(d,m,k0),k.__reactInternalMemoizedMergedChildContext=d,ui(Ya),ui(Vo),oi(Vo,d)):ui(Ya),oi(Ya,w)}var nf=null,kP=!1,fD=!1;function MK(d){nf===null?nf=[d]:nf.push(d)}function qSe(d){kP=!0,MK(d)}function Hp(){if(!fD&&nf!==null){fD=!0;var d=0,m=sr;try{var w=nf;for(sr=1;d<w.length;d++){var k=w[d];do k=k(!0);while(k!==null)}nf=null,kP=!1}catch(R){throw nf!==null&&(nf=nf.slice(d+1)),lt(Mr,Hp),R}finally{sr=m,fD=!1}}return null}var Yv=[],Xv=0,AP=null,IP=0,Ic=[],Pc=0,A0=null,rf=1,sf="";function I0(d,m){Yv[Xv++]=IP,Yv[Xv++]=AP,AP=d,IP=m}function NK(d,m,w){Ic[Pc++]=rf,Ic[Pc++]=sf,Ic[Pc++]=A0,A0=d;var k=rf;d=sf;var R=32-Pi(k)-1;k&=~(1<<R),w+=1;var j=32-Pi(m)+R;if(30<j){var K=R-R%5;j=(k&(1<<K)-1).toString(32),k>>=K,R-=K,rf=1<<32-Pi(m)+R|w<<R|k,sf=j+d}else rf=1<<j|w<<R|k,sf=d}function pD(d){d.return!==null&&(I0(d,1),NK(d,1,0))}function mD(d){for(;d===AP;)AP=Yv[--Xv],Yv[Xv]=null,IP=Yv[--Xv],Yv[Xv]=null;for(;d===A0;)A0=Ic[--Pc],Ic[Pc]=null,sf=Ic[--Pc],Ic[Pc]=null,rf=Ic[--Pc],Ic[Pc]=null}var Gl=null,Ul=null,_i=!1,ku=null;function OK(d,m){var w=Nc(5,null,null,0);w.elementType="DELETED",w.stateNode=m,w.return=d,m=d.deletions,m===null?(d.deletions=[w],d.flags|=16):m.push(w)}function LK(d,m){switch(d.tag){case 5:var w=d.type;return m=m.nodeType!==1||w.toLowerCase()!==m.nodeName.toLowerCase()?null:m,m!==null?(d.stateNode=m,Gl=d,Ul=Up(m.firstChild),!0):!1;case 6:return m=d.pendingProps===""||m.nodeType!==3?null:m,m!==null?(d.stateNode=m,Gl=d,Ul=null,!0):!1;case 13:return m=m.nodeType!==8?null:m,m!==null?(w=A0!==null?{id:rf,overflow:sf}:null,d.memoizedState={dehydrated:m,treeContext:w,retryLane:1073741824},w=Nc(18,null,null,0),w.stateNode=m,w.return=d,d.child=w,Gl=d,Ul=null,!0):!1;default:return!1}}function gD(d){return(d.mode&1)!==0&&(d.flags&128)===0}function yD(d){if(_i){var m=Ul;if(m){var w=m;if(!LK(d,m)){if(gD(d))throw Error(n(418));m=Up(w.nextSibling);var k=Gl;m&&LK(d,m)?OK(k,w):(d.flags=d.flags&-4097|2,_i=!1,Gl=d)}}else{if(gD(d))throw Error(n(418));d.flags=d.flags&-4097|2,_i=!1,Gl=d}}}function DK(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Gl=d}function PP(d){if(d!==Gl)return!1;if(!_i)return DK(d),_i=!0,!1;var m;if((m=d.tag!==3)&&!(m=d.tag!==5)&&(m=d.type,m=m!=="head"&&m!=="body"&&!lD(d.type,d.memoizedProps)),m&&(m=Ul)){if(gD(d))throw jK(),Error(n(418));for(;m;)OK(d,m),m=Up(m.nextSibling)}if(DK(d),d.tag===13){if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));e:{for(d=d.nextSibling,m=0;d;){if(d.nodeType===8){var w=d.data;if(w==="/$"){if(m===0){Ul=Up(d.nextSibling);break e}m--}else w!=="$"&&w!=="$!"&&w!=="$?"||m++}d=d.nextSibling}Ul=null}}else Ul=Gl?Up(d.stateNode.nextSibling):null;return!0}function jK(){for(var d=Ul;d;)d=Up(d.nextSibling)}function Zv(){Ul=Gl=null,_i=!1}function vD(d){ku===null?ku=[d]:ku.push(d)}var KSe=P.ReactCurrentBatchConfig;function rE(d,m,w){if(d=w.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var k=w.stateNode}if(!k)throw Error(n(147,d));var R=k,j=""+d;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===j?m.ref:(m=function(K){var ce=R.refs;K===null?delete ce[j]:ce[j]=K},m._stringRef=j,m)}if(typeof d!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,d))}return d}function CP(d,m){throw d=Object.prototype.toString.call(m),Error(n(31,d==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":d))}function $K(d){var m=d._init;return m(d._payload)}function FK(d){function m(be,me){if(d){var Me=be.deletions;Me===null?(be.deletions=[me],be.flags|=16):Me.push(me)}}function w(be,me){if(!d)return null;for(;me!==null;)m(be,me),me=me.sibling;return null}function k(be,me){for(be=new Map;me!==null;)me.key!==null?be.set(me.key,me):be.set(me.index,me),me=me.sibling;return be}function R(be,me){return be=em(be,me),be.index=0,be.sibling=null,be}function j(be,me,Me){return be.index=Me,d?(Me=be.alternate,Me!==null?(Me=Me.index,Me<me?(be.flags|=2,me):Me):(be.flags|=2,me)):(be.flags|=1048576,me)}function K(be){return d&&be.alternate===null&&(be.flags|=2),be}function ce(be,me,Me,mt){return me===null||me.tag!==6?(me=c6(Me,be.mode,mt),me.return=be,me):(me=R(me,Me),me.return=be,me)}function he(be,me,Me,mt){var Zt=Me.type;return Zt===C?at(be,me,Me.props.children,mt,Me.key):me!==null&&(me.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===Ue&&$K(Zt)===me.type)?(mt=R(me,Me.props),mt.ref=rE(be,me,Me),mt.return=be,mt):(mt=eC(Me.type,Me.key,Me.props,null,be.mode,mt),mt.ref=rE(be,me,Me),mt.return=be,mt)}function $e(be,me,Me,mt){return me===null||me.tag!==4||me.stateNode.containerInfo!==Me.containerInfo||me.stateNode.implementation!==Me.implementation?(me=u6(Me,be.mode,mt),me.return=be,me):(me=R(me,Me.children||[]),me.return=be,me)}function at(be,me,Me,mt,Zt){return me===null||me.tag!==7?(me=D0(Me,be.mode,mt,Zt),me.return=be,me):(me=R(me,Me),me.return=be,me)}function ht(be,me,Me){if(typeof me=="string"&&me!==""||typeof me=="number")return me=c6(""+me,be.mode,Me),me.return=be,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case N:return Me=eC(me.type,me.key,me.props,null,be.mode,Me),Me.ref=rE(be,null,me),Me.return=be,Me;case L:return me=u6(me,be.mode,Me),me.return=be,me;case Ue:var mt=me._init;return ht(be,mt(me._payload),Me)}if(Hn(me)||De(me))return me=D0(me,be.mode,Me,null),me.return=be,me;CP(be,me)}return null}function it(be,me,Me,mt){var Zt=me!==null?me.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return Zt!==null?null:ce(be,me,""+Me,mt);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case N:return Me.key===Zt?he(be,me,Me,mt):null;case L:return Me.key===Zt?$e(be,me,Me,mt):null;case Ue:return Zt=Me._init,it(be,me,Zt(Me._payload),mt)}if(Hn(Me)||De(Me))return Zt!==null?null:at(be,me,Me,mt,null);CP(be,Me)}return null}function Nt(be,me,Me,mt,Zt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return be=be.get(Me)||null,ce(me,be,""+mt,Zt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case N:return be=be.get(mt.key===null?Me:mt.key)||null,he(me,be,mt,Zt);case L:return be=be.get(mt.key===null?Me:mt.key)||null,$e(me,be,mt,Zt);case Ue:var un=mt._init;return Nt(be,me,Me,un(mt._payload),Zt)}if(Hn(mt)||De(mt))return be=be.get(Me)||null,at(me,be,mt,Zt,null);CP(me,mt)}return null}function Gt(be,me,Me,mt){for(var Zt=null,un=null,hn=me,Sn=me=0,eo=null;hn!==null&&Sn<Me.length;Sn++){hn.index>Sn?(eo=hn,hn=null):eo=hn.sibling;var vr=it(be,hn,Me[Sn],mt);if(vr===null){hn===null&&(hn=eo);break}d&&hn&&vr.alternate===null&&m(be,hn),me=j(vr,me,Sn),un===null?Zt=vr:un.sibling=vr,un=vr,hn=eo}if(Sn===Me.length)return w(be,hn),_i&&I0(be,Sn),Zt;if(hn===null){for(;Sn<Me.length;Sn++)hn=ht(be,Me[Sn],mt),hn!==null&&(me=j(hn,me,Sn),un===null?Zt=hn:un.sibling=hn,un=hn);return _i&&I0(be,Sn),Zt}for(hn=k(be,hn);Sn<Me.length;Sn++)eo=Nt(hn,be,Sn,Me[Sn],mt),eo!==null&&(d&&eo.alternate!==null&&hn.delete(eo.key===null?Sn:eo.key),me=j(eo,me,Sn),un===null?Zt=eo:un.sibling=eo,un=eo);return d&&hn.forEach(function(tm){return m(be,tm)}),_i&&I0(be,Sn),Zt}function Yt(be,me,Me,mt){var Zt=De(Me);if(typeof Zt!="function")throw Error(n(150));if(Me=Zt.call(Me),Me==null)throw Error(n(151));for(var un=Zt=null,hn=me,Sn=me=0,eo=null,vr=Me.next();hn!==null&&!vr.done;Sn++,vr=Me.next()){hn.index>Sn?(eo=hn,hn=null):eo=hn.sibling;var tm=it(be,hn,vr.value,mt);if(tm===null){hn===null&&(hn=eo);break}d&&hn&&tm.alternate===null&&m(be,hn),me=j(tm,me,Sn),un===null?Zt=tm:un.sibling=tm,un=tm,hn=eo}if(vr.done)return w(be,hn),_i&&I0(be,Sn),Zt;if(hn===null){for(;!vr.done;Sn++,vr=Me.next())vr=ht(be,vr.value,mt),vr!==null&&(me=j(vr,me,Sn),un===null?Zt=vr:un.sibling=vr,un=vr);return _i&&I0(be,Sn),Zt}for(hn=k(be,hn);!vr.done;Sn++,vr=Me.next())vr=Nt(hn,be,Sn,vr.value,mt),vr!==null&&(d&&vr.alternate!==null&&hn.delete(vr.key===null?Sn:vr.key),me=j(vr,me,Sn),un===null?Zt=vr:un.sibling=vr,un=vr);return d&&hn.forEach(function(ATe){return m(be,ATe)}),_i&&I0(be,Sn),Zt}function as(be,me,Me,mt){if(typeof Me=="object"&&Me!==null&&Me.type===C&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case N:e:{for(var Zt=Me.key,un=me;un!==null;){if(un.key===Zt){if(Zt=Me.type,Zt===C){if(un.tag===7){w(be,un.sibling),me=R(un,Me.props.children),me.return=be,be=me;break e}}else if(un.elementType===Zt||typeof Zt=="object"&&Zt!==null&&Zt.$$typeof===Ue&&$K(Zt)===un.type){w(be,un.sibling),me=R(un,Me.props),me.ref=rE(be,un,Me),me.return=be,be=me;break e}w(be,un);break}else m(be,un);un=un.sibling}Me.type===C?(me=D0(Me.props.children,be.mode,mt,Me.key),me.return=be,be=me):(mt=eC(Me.type,Me.key,Me.props,null,be.mode,mt),mt.ref=rE(be,me,Me),mt.return=be,be=mt)}return K(be);case L:e:{for(un=Me.key;me!==null;){if(me.key===un)if(me.tag===4&&me.stateNode.containerInfo===Me.containerInfo&&me.stateNode.implementation===Me.implementation){w(be,me.sibling),me=R(me,Me.children||[]),me.return=be,be=me;break e}else{w(be,me);break}else m(be,me);me=me.sibling}me=u6(Me,be.mode,mt),me.return=be,be=me}return K(be);case Ue:return un=Me._init,as(be,me,un(Me._payload),mt)}if(Hn(Me))return Gt(be,me,Me,mt);if(De(Me))return Yt(be,me,Me,mt);CP(be,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,me!==null&&me.tag===6?(w(be,me.sibling),me=R(me,Me),me.return=be,be=me):(w(be,me),me=c6(Me,be.mode,mt),me.return=be,be=me),K(be)):w(be,me)}return as}var Jv=FK(!0),VK=FK(!1),RP=Bp(null),MP=null,Qv=null,_D=null;function xD(){_D=Qv=MP=null}function wD(d){var m=RP.current;ui(RP),d._currentValue=m}function bD(d,m,w){for(;d!==null;){var k=d.alternate;if((d.childLanes&m)!==m?(d.childLanes|=m,k!==null&&(k.childLanes|=m)):k!==null&&(k.childLanes&m)!==m&&(k.childLanes|=m),d===w)break;d=d.return}}function e_(d,m){MP=d,_D=Qv=null,d=d.dependencies,d!==null&&d.firstContext!==null&&((d.lanes&m)!==0&&(Za=!0),d.firstContext=null)}function Cc(d){var m=d._currentValue;if(_D!==d)if(d={context:d,memoizedValue:m,next:null},Qv===null){if(MP===null)throw Error(n(308));Qv=d,MP.dependencies={lanes:0,firstContext:d}}else Qv=Qv.next=d;return m}var P0=null;function ED(d){P0===null?P0=[d]:P0.push(d)}function zK(d,m,w,k){var R=m.interleaved;return R===null?(w.next=w,ED(m)):(w.next=R.next,R.next=w),m.interleaved=w,of(d,k)}function of(d,m){d.lanes|=m;var w=d.alternate;for(w!==null&&(w.lanes|=m),w=d,d=d.return;d!==null;)d.childLanes|=m,w=d.alternate,w!==null&&(w.childLanes|=m),w=d,d=d.return;return w.tag===3?w.stateNode:null}var qp=!1;function SD(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GK(d,m){d=d.updateQueue,m.updateQueue===d&&(m.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function af(d,m){return{eventTime:d,lane:m,tag:0,payload:null,callback:null,next:null}}function Kp(d,m,w){var k=d.updateQueue;if(k===null)return null;if(k=k.shared,(fr&2)!==0){var R=k.pending;return R===null?m.next=m:(m.next=R.next,R.next=m),k.pending=m,of(d,w)}return R=k.interleaved,R===null?(m.next=m,ED(k)):(m.next=R.next,R.next=m),k.interleaved=m,of(d,w)}function NP(d,m,w){if(m=m.updateQueue,m!==null&&(m=m.shared,(w&4194240)!==0)){var k=m.lanes;k&=d.pendingLanes,w|=k,m.lanes=w,$b(d,w)}}function UK(d,m){var w=d.updateQueue,k=d.alternate;if(k!==null&&(k=k.updateQueue,w===k)){var R=null,j=null;if(w=w.firstBaseUpdate,w!==null){do{var K={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};j===null?R=j=K:j=j.next=K,w=w.next}while(w!==null);j===null?R=j=m:j=j.next=m}else R=j=m;w={baseState:k.baseState,firstBaseUpdate:R,lastBaseUpdate:j,shared:k.shared,effects:k.effects},d.updateQueue=w;return}d=w.lastBaseUpdate,d===null?w.firstBaseUpdate=m:d.next=m,w.lastBaseUpdate=m}function OP(d,m,w,k){var R=d.updateQueue;qp=!1;var j=R.firstBaseUpdate,K=R.lastBaseUpdate,ce=R.shared.pending;if(ce!==null){R.shared.pending=null;var he=ce,$e=he.next;he.next=null,K===null?j=$e:K.next=$e,K=he;var at=d.alternate;at!==null&&(at=at.updateQueue,ce=at.lastBaseUpdate,ce!==K&&(ce===null?at.firstBaseUpdate=$e:ce.next=$e,at.lastBaseUpdate=he))}if(j!==null){var ht=R.baseState;K=0,at=$e=he=null,ce=j;do{var it=ce.lane,Nt=ce.eventTime;if((k&it)===it){at!==null&&(at=at.next={eventTime:Nt,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var Gt=d,Yt=ce;switch(it=m,Nt=w,Yt.tag){case 1:if(Gt=Yt.payload,typeof Gt=="function"){ht=Gt.call(Nt,ht,it);break e}ht=Gt;break e;case 3:Gt.flags=Gt.flags&-65537|128;case 0:if(Gt=Yt.payload,it=typeof Gt=="function"?Gt.call(Nt,ht,it):Gt,it==null)break e;ht=Ce({},ht,it);break e;case 2:qp=!0}}ce.callback!==null&&ce.lane!==0&&(d.flags|=64,it=R.effects,it===null?R.effects=[ce]:it.push(ce))}else Nt={eventTime:Nt,lane:it,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},at===null?($e=at=Nt,he=ht):at=at.next=Nt,K|=it;if(ce=ce.next,ce===null){if(ce=R.shared.pending,ce===null)break;it=ce,ce=it.next,it.next=null,R.lastBaseUpdate=it,R.shared.pending=null}}while(!0);if(at===null&&(he=ht),R.baseState=he,R.firstBaseUpdate=$e,R.lastBaseUpdate=at,m=R.shared.interleaved,m!==null){R=m;do K|=R.lane,R=R.next;while(R!==m)}else j===null&&(R.shared.lanes=0);M0|=K,d.lanes=K,d.memoizedState=ht}}function BK(d,m,w){if(d=m.effects,m.effects=null,d!==null)for(m=0;m<d.length;m++){var k=d[m],R=k.callback;if(R!==null){if(k.callback=null,k=w,typeof R!="function")throw Error(n(191,R));R.call(k)}}}var iE={},Gh=Bp(iE),sE=Bp(iE),oE=Bp(iE);function C0(d){if(d===iE)throw Error(n(174));return d}function TD(d,m){switch(oi(oE,m),oi(sE,d),oi(Gh,iE),d=m.nodeType,d){case 9:case 11:m=(m=m.documentElement)?m.namespaceURI:Qn(null,"");break;default:d=d===8?m.parentNode:m,m=d.namespaceURI||null,d=d.tagName,m=Qn(m,d)}ui(Gh),oi(Gh,m)}function t_(){ui(Gh),ui(sE),ui(oE)}function WK(d){C0(oE.current);var m=C0(Gh.current),w=Qn(m,d.type);m!==w&&(oi(sE,d),oi(Gh,w))}function kD(d){sE.current===d&&(ui(Gh),ui(sE))}var Ci=Bp(0);function LP(d){for(var m=d;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var AD=[];function ID(){for(var d=0;d<AD.length;d++)AD[d]._workInProgressVersionPrimary=null;AD.length=0}var DP=P.ReactCurrentDispatcher,PD=P.ReactCurrentBatchConfig,R0=0,Ri=null,js=null,Js=null,jP=!1,aE=!1,lE=0,YSe=0;function zo(){throw Error(n(321))}function CD(d,m){if(m===null)return!1;for(var w=0;w<m.length&&w<d.length;w++)if(!Tu(d[w],m[w]))return!1;return!0}function RD(d,m,w,k,R,j){if(R0=j,Ri=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,DP.current=d===null||d.memoizedState===null?QSe:eTe,d=w(k,R),aE){j=0;do{if(aE=!1,lE=0,25<=j)throw Error(n(301));j+=1,Js=js=null,m.updateQueue=null,DP.current=tTe,d=w(k,R)}while(aE)}if(DP.current=VP,m=js!==null&&js.next!==null,R0=0,Js=js=Ri=null,jP=!1,m)throw Error(n(300));return d}function MD(){var d=lE!==0;return lE=0,d}function Uh(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Js===null?Ri.memoizedState=Js=d:Js=Js.next=d,Js}function Rc(){if(js===null){var d=Ri.alternate;d=d!==null?d.memoizedState:null}else d=js.next;var m=Js===null?Ri.memoizedState:Js.next;if(m!==null)Js=m,js=d;else{if(d===null)throw Error(n(310));js=d,d={memoizedState:js.memoizedState,baseState:js.baseState,baseQueue:js.baseQueue,queue:js.queue,next:null},Js===null?Ri.memoizedState=Js=d:Js=Js.next=d}return Js}function cE(d,m){return typeof m=="function"?m(d):m}function ND(d){var m=Rc(),w=m.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=d;var k=js,R=k.baseQueue,j=w.pending;if(j!==null){if(R!==null){var K=R.next;R.next=j.next,j.next=K}k.baseQueue=R=j,w.pending=null}if(R!==null){j=R.next,k=k.baseState;var ce=K=null,he=null,$e=j;do{var at=$e.lane;if((R0&at)===at)he!==null&&(he=he.next={lane:0,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null}),k=$e.hasEagerState?$e.eagerState:d(k,$e.action);else{var ht={lane:at,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null};he===null?(ce=he=ht,K=k):he=he.next=ht,Ri.lanes|=at,M0|=at}$e=$e.next}while($e!==null&&$e!==j);he===null?K=k:he.next=ce,Tu(k,m.memoizedState)||(Za=!0),m.memoizedState=k,m.baseState=K,m.baseQueue=he,w.lastRenderedState=k}if(d=w.interleaved,d!==null){R=d;do j=R.lane,Ri.lanes|=j,M0|=j,R=R.next;while(R!==d)}else R===null&&(w.lanes=0);return[m.memoizedState,w.dispatch]}function OD(d){var m=Rc(),w=m.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=d;var k=w.dispatch,R=w.pending,j=m.memoizedState;if(R!==null){w.pending=null;var K=R=R.next;do j=d(j,K.action),K=K.next;while(K!==R);Tu(j,m.memoizedState)||(Za=!0),m.memoizedState=j,m.baseQueue===null&&(m.baseState=j),w.lastRenderedState=j}return[j,k]}function HK(){}function qK(d,m){var w=Ri,k=Rc(),R=m(),j=!Tu(k.memoizedState,R);if(j&&(k.memoizedState=R,Za=!0),k=k.queue,LD(XK.bind(null,w,k,d),[d]),k.getSnapshot!==m||j||Js!==null&&Js.memoizedState.tag&1){if(w.flags|=2048,uE(9,YK.bind(null,w,k,R,m),void 0,null),Qs===null)throw Error(n(349));(R0&30)!==0||KK(w,m,R)}return R}function KK(d,m,w){d.flags|=16384,d={getSnapshot:m,value:w},m=Ri.updateQueue,m===null?(m={lastEffect:null,stores:null},Ri.updateQueue=m,m.stores=[d]):(w=m.stores,w===null?m.stores=[d]:w.push(d))}function YK(d,m,w,k){m.value=w,m.getSnapshot=k,ZK(m)&&JK(d)}function XK(d,m,w){return w(function(){ZK(m)&&JK(d)})}function ZK(d){var m=d.getSnapshot;d=d.value;try{var w=m();return!Tu(d,w)}catch{return!0}}function JK(d){var m=of(d,1);m!==null&&Cu(m,d,1,-1)}function QK(d){var m=Uh();return typeof d=="function"&&(d=d()),m.memoizedState=m.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cE,lastRenderedState:d},m.queue=d,d=d.dispatch=JSe.bind(null,Ri,d),[m.memoizedState,d]}function uE(d,m,w,k){return d={tag:d,create:m,destroy:w,deps:k,next:null},m=Ri.updateQueue,m===null?(m={lastEffect:null,stores:null},Ri.updateQueue=m,m.lastEffect=d.next=d):(w=m.lastEffect,w===null?m.lastEffect=d.next=d:(k=w.next,w.next=d,d.next=k,m.lastEffect=d)),d}function eY(){return Rc().memoizedState}function $P(d,m,w,k){var R=Uh();Ri.flags|=d,R.memoizedState=uE(1|m,w,void 0,k===void 0?null:k)}function FP(d,m,w,k){var R=Rc();k=k===void 0?null:k;var j=void 0;if(js!==null){var K=js.memoizedState;if(j=K.destroy,k!==null&&CD(k,K.deps)){R.memoizedState=uE(m,w,j,k);return}}Ri.flags|=d,R.memoizedState=uE(1|m,w,j,k)}function tY(d,m){return $P(8390656,8,d,m)}function LD(d,m){return FP(2048,8,d,m)}function nY(d,m){return FP(4,2,d,m)}function rY(d,m){return FP(4,4,d,m)}function iY(d,m){if(typeof m=="function")return d=d(),m(d),function(){m(null)};if(m!=null)return d=d(),m.current=d,function(){m.current=null}}function sY(d,m,w){return w=w!=null?w.concat([d]):null,FP(4,4,iY.bind(null,m,d),w)}function DD(){}function oY(d,m){var w=Rc();m=m===void 0?null:m;var k=w.memoizedState;return k!==null&&m!==null&&CD(m,k[1])?k[0]:(w.memoizedState=[d,m],d)}function aY(d,m){var w=Rc();m=m===void 0?null:m;var k=w.memoizedState;return k!==null&&m!==null&&CD(m,k[1])?k[0]:(d=d(),w.memoizedState=[d,m],d)}function lY(d,m,w){return(R0&21)===0?(d.baseState&&(d.baseState=!1,Za=!0),d.memoizedState=w):(Tu(w,m)||(w=Db(),Ri.lanes|=w,M0|=w,d.baseState=!0),m)}function XSe(d,m){var w=sr;sr=w!==0&&4>w?w:4,d(!0);var k=PD.transition;PD.transition={};try{d(!1),m()}finally{sr=w,PD.transition=k}}function cY(){return Rc().memoizedState}function ZSe(d,m,w){var k=Jp(d);if(w={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null},uY(d))hY(m,w);else if(w=zK(d,m,w,k),w!==null){var R=Ea();Cu(w,d,k,R),dY(w,m,k)}}function JSe(d,m,w){var k=Jp(d),R={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null};if(uY(d))hY(m,R);else{var j=d.alternate;if(d.lanes===0&&(j===null||j.lanes===0)&&(j=m.lastRenderedReducer,j!==null))try{var K=m.lastRenderedState,ce=j(K,w);if(R.hasEagerState=!0,R.eagerState=ce,Tu(ce,K)){var he=m.interleaved;he===null?(R.next=R,ED(m)):(R.next=he.next,he.next=R),m.interleaved=R;return}}catch{}w=zK(d,m,R,k),w!==null&&(R=Ea(),Cu(w,d,k,R),dY(w,m,k))}}function uY(d){var m=d.alternate;return d===Ri||m!==null&&m===Ri}function hY(d,m){aE=jP=!0;var w=d.pending;w===null?m.next=m:(m.next=w.next,w.next=m),d.pending=m}function dY(d,m,w){if((w&4194240)!==0){var k=m.lanes;k&=d.pendingLanes,w|=k,m.lanes=w,$b(d,w)}}var VP={readContext:Cc,useCallback:zo,useContext:zo,useEffect:zo,useImperativeHandle:zo,useInsertionEffect:zo,useLayoutEffect:zo,useMemo:zo,useReducer:zo,useRef:zo,useState:zo,useDebugValue:zo,useDeferredValue:zo,useTransition:zo,useMutableSource:zo,useSyncExternalStore:zo,useId:zo,unstable_isNewReconciler:!1},QSe={readContext:Cc,useCallback:function(d,m){return Uh().memoizedState=[d,m===void 0?null:m],d},useContext:Cc,useEffect:tY,useImperativeHandle:function(d,m,w){return w=w!=null?w.concat([d]):null,$P(4194308,4,iY.bind(null,m,d),w)},useLayoutEffect:function(d,m){return $P(4194308,4,d,m)},useInsertionEffect:function(d,m){return $P(4,2,d,m)},useMemo:function(d,m){var w=Uh();return m=m===void 0?null:m,d=d(),w.memoizedState=[d,m],d},useReducer:function(d,m,w){var k=Uh();return m=w!==void 0?w(m):m,k.memoizedState=k.baseState=m,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:m},k.queue=d,d=d.dispatch=ZSe.bind(null,Ri,d),[k.memoizedState,d]},useRef:function(d){var m=Uh();return d={current:d},m.memoizedState=d},useState:QK,useDebugValue:DD,useDeferredValue:function(d){return Uh().memoizedState=d},useTransition:function(){var d=QK(!1),m=d[0];return d=XSe.bind(null,d[1]),Uh().memoizedState=d,[m,d]},useMutableSource:function(){},useSyncExternalStore:function(d,m,w){var k=Ri,R=Uh();if(_i){if(w===void 0)throw Error(n(407));w=w()}else{if(w=m(),Qs===null)throw Error(n(349));(R0&30)!==0||KK(k,m,w)}R.memoizedState=w;var j={value:w,getSnapshot:m};return R.queue=j,tY(XK.bind(null,k,j,d),[d]),k.flags|=2048,uE(9,YK.bind(null,k,j,w,m),void 0,null),w},useId:function(){var d=Uh(),m=Qs.identifierPrefix;if(_i){var w=sf,k=rf;w=(k&~(1<<32-Pi(k)-1)).toString(32)+w,m=":"+m+"R"+w,w=lE++,0<w&&(m+="H"+w.toString(32)),m+=":"}else w=YSe++,m=":"+m+"r"+w.toString(32)+":";return d.memoizedState=m},unstable_isNewReconciler:!1},eTe={readContext:Cc,useCallback:oY,useContext:Cc,useEffect:LD,useImperativeHandle:sY,useInsertionEffect:nY,useLayoutEffect:rY,useMemo:aY,useReducer:ND,useRef:eY,useState:function(){return ND(cE)},useDebugValue:DD,useDeferredValue:function(d){var m=Rc();return lY(m,js.memoizedState,d)},useTransition:function(){var d=ND(cE)[0],m=Rc().memoizedState;return[d,m]},useMutableSource:HK,useSyncExternalStore:qK,useId:cY,unstable_isNewReconciler:!1},tTe={readContext:Cc,useCallback:oY,useContext:Cc,useEffect:LD,useImperativeHandle:sY,useInsertionEffect:nY,useLayoutEffect:rY,useMemo:aY,useReducer:OD,useRef:eY,useState:function(){return OD(cE)},useDebugValue:DD,useDeferredValue:function(d){var m=Rc();return js===null?m.memoizedState=d:lY(m,js.memoizedState,d)},useTransition:function(){var d=OD(cE)[0],m=Rc().memoizedState;return[d,m]},useMutableSource:HK,useSyncExternalStore:qK,useId:cY,unstable_isNewReconciler:!1};function Au(d,m){if(d&&d.defaultProps){m=Ce({},m),d=d.defaultProps;for(var w in d)m[w]===void 0&&(m[w]=d[w]);return m}return m}function jD(d,m,w,k){m=d.memoizedState,w=w(k,m),w=w==null?m:Ce({},m,w),d.memoizedState=w,d.lanes===0&&(d.updateQueue.baseState=w)}var zP={isMounted:function(d){return(d=d._reactInternals)?oe(d)===d:!1},enqueueSetState:function(d,m,w){d=d._reactInternals;var k=Ea(),R=Jp(d),j=af(k,R);j.payload=m,w!=null&&(j.callback=w),m=Kp(d,j,R),m!==null&&(Cu(m,d,R,k),NP(m,d,R))},enqueueReplaceState:function(d,m,w){d=d._reactInternals;var k=Ea(),R=Jp(d),j=af(k,R);j.tag=1,j.payload=m,w!=null&&(j.callback=w),m=Kp(d,j,R),m!==null&&(Cu(m,d,R,k),NP(m,d,R))},enqueueForceUpdate:function(d,m){d=d._reactInternals;var w=Ea(),k=Jp(d),R=af(w,k);R.tag=2,m!=null&&(R.callback=m),m=Kp(d,R,k),m!==null&&(Cu(m,d,k,w),NP(m,d,k))}};function fY(d,m,w,k,R,j,K){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(k,j,K):m.prototype&&m.prototype.isPureReactComponent?!Xb(w,k)||!Xb(R,j):!0}function pY(d,m,w){var k=!1,R=Wp,j=m.contextType;return typeof j=="object"&&j!==null?j=Cc(j):(R=Xa(m)?k0:Vo.current,k=m.contextTypes,j=(k=k!=null)?Kv(d,R):Wp),m=new m(w,j),d.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=zP,d.stateNode=m,m._reactInternals=d,k&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=R,d.__reactInternalMemoizedMaskedChildContext=j),m}function mY(d,m,w,k){d=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,k),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,k),m.state!==d&&zP.enqueueReplaceState(m,m.state,null)}function $D(d,m,w,k){var R=d.stateNode;R.props=w,R.state=d.memoizedState,R.refs={},SD(d);var j=m.contextType;typeof j=="object"&&j!==null?R.context=Cc(j):(j=Xa(m)?k0:Vo.current,R.context=Kv(d,j)),R.state=d.memoizedState,j=m.getDerivedStateFromProps,typeof j=="function"&&(jD(d,m,j,w),R.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(m=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),m!==R.state&&zP.enqueueReplaceState(R,R.state,null),OP(d,w,R,k),R.state=d.memoizedState),typeof R.componentDidMount=="function"&&(d.flags|=4194308)}function n_(d,m){try{var w="",k=m;do w+=le(k),k=k.return;while(k);var R=w}catch(j){R=`
Error generating stack: `+j.message+`
`+j.stack}return{value:d,source:m,stack:R,digest:null}}function FD(d,m,w){return{value:d,source:null,stack:w??null,digest:m??null}}function VD(d,m){try{console.error(m.value)}catch(w){setTimeout(function(){throw w})}}var nTe=typeof WeakMap=="function"?WeakMap:Map;function gY(d,m,w){w=af(-1,w),w.tag=3,w.payload={element:null};var k=m.value;return w.callback=function(){KP||(KP=!0,t6=k),VD(d,m)},w}function yY(d,m,w){w=af(-1,w),w.tag=3;var k=d.type.getDerivedStateFromError;if(typeof k=="function"){var R=m.value;w.payload=function(){return k(R)},w.callback=function(){VD(d,m)}}var j=d.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(w.callback=function(){VD(d,m),typeof k!="function"&&(Xp===null?Xp=new Set([this]):Xp.add(this));var K=m.stack;this.componentDidCatch(m.value,{componentStack:K!==null?K:""})}),w}function vY(d,m,w){var k=d.pingCache;if(k===null){k=d.pingCache=new nTe;var R=new Set;k.set(m,R)}else R=k.get(m),R===void 0&&(R=new Set,k.set(m,R));R.has(w)||(R.add(w),d=gTe.bind(null,d,m,w),m.then(d,d))}function _Y(d){do{var m;if((m=d.tag===13)&&(m=d.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return d;d=d.return}while(d!==null);return null}function xY(d,m,w,k,R){return(d.mode&1)===0?(d===m?d.flags|=65536:(d.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(m=af(-1,1),m.tag=2,Kp(w,m,1))),w.lanes|=1),d):(d.flags|=65536,d.lanes=R,d)}var rTe=P.ReactCurrentOwner,Za=!1;function ba(d,m,w,k){m.child=d===null?VK(m,null,w,k):Jv(m,d.child,w,k)}function wY(d,m,w,k,R){w=w.render;var j=m.ref;return e_(m,R),k=RD(d,m,w,k,j,R),w=MD(),d!==null&&!Za?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~R,lf(d,m,R)):(_i&&w&&pD(m),m.flags|=1,ba(d,m,k,R),m.child)}function bY(d,m,w,k,R){if(d===null){var j=w.type;return typeof j=="function"&&!l6(j)&&j.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(m.tag=15,m.type=j,EY(d,m,j,k,R)):(d=eC(w.type,null,k,m,m.mode,R),d.ref=m.ref,d.return=m,m.child=d)}if(j=d.child,(d.lanes&R)===0){var K=j.memoizedProps;if(w=w.compare,w=w!==null?w:Xb,w(K,k)&&d.ref===m.ref)return lf(d,m,R)}return m.flags|=1,d=em(j,k),d.ref=m.ref,d.return=m,m.child=d}function EY(d,m,w,k,R){if(d!==null){var j=d.memoizedProps;if(Xb(j,k)&&d.ref===m.ref)if(Za=!1,m.pendingProps=k=j,(d.lanes&R)!==0)(d.flags&131072)!==0&&(Za=!0);else return m.lanes=d.lanes,lf(d,m,R)}return zD(d,m,w,k,R)}function SY(d,m,w){var k=m.pendingProps,R=k.children,j=d!==null?d.memoizedState:null;if(k.mode==="hidden")if((m.mode&1)===0)m.memoizedState={baseLanes:0,cachePool:null,transitions:null},oi(i_,Bl),Bl|=w;else{if((w&1073741824)===0)return d=j!==null?j.baseLanes|w:w,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:d,cachePool:null,transitions:null},m.updateQueue=null,oi(i_,Bl),Bl|=d,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=j!==null?j.baseLanes:w,oi(i_,Bl),Bl|=k}else j!==null?(k=j.baseLanes|w,m.memoizedState=null):k=w,oi(i_,Bl),Bl|=k;return ba(d,m,R,w),m.child}function TY(d,m){var w=m.ref;(d===null&&w!==null||d!==null&&d.ref!==w)&&(m.flags|=512,m.flags|=2097152)}function zD(d,m,w,k,R){var j=Xa(w)?k0:Vo.current;return j=Kv(m,j),e_(m,R),w=RD(d,m,w,k,j,R),k=MD(),d!==null&&!Za?(m.updateQueue=d.updateQueue,m.flags&=-2053,d.lanes&=~R,lf(d,m,R)):(_i&&k&&pD(m),m.flags|=1,ba(d,m,w,R),m.child)}function kY(d,m,w,k,R){if(Xa(w)){var j=!0;TP(m)}else j=!1;if(e_(m,R),m.stateNode===null)UP(d,m),pY(m,w,k),$D(m,w,k,R),k=!0;else if(d===null){var K=m.stateNode,ce=m.memoizedProps;K.props=ce;var he=K.context,$e=w.contextType;typeof $e=="object"&&$e!==null?$e=Cc($e):($e=Xa(w)?k0:Vo.current,$e=Kv(m,$e));var at=w.getDerivedStateFromProps,ht=typeof at=="function"||typeof K.getSnapshotBeforeUpdate=="function";ht||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ce!==k||he!==$e)&&mY(m,K,k,$e),qp=!1;var it=m.memoizedState;K.state=it,OP(m,k,K,R),he=m.memoizedState,ce!==k||it!==he||Ya.current||qp?(typeof at=="function"&&(jD(m,w,at,k),he=m.memoizedState),(ce=qp||fY(m,w,ce,k,it,he,$e))?(ht||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(m.flags|=4194308)):(typeof K.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=k,m.memoizedState=he),K.props=k,K.state=he,K.context=$e,k=ce):(typeof K.componentDidMount=="function"&&(m.flags|=4194308),k=!1)}else{K=m.stateNode,GK(d,m),ce=m.memoizedProps,$e=m.type===m.elementType?ce:Au(m.type,ce),K.props=$e,ht=m.pendingProps,it=K.context,he=w.contextType,typeof he=="object"&&he!==null?he=Cc(he):(he=Xa(w)?k0:Vo.current,he=Kv(m,he));var Nt=w.getDerivedStateFromProps;(at=typeof Nt=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(ce!==ht||it!==he)&&mY(m,K,k,he),qp=!1,it=m.memoizedState,K.state=it,OP(m,k,K,R);var Gt=m.memoizedState;ce!==ht||it!==Gt||Ya.current||qp?(typeof Nt=="function"&&(jD(m,w,Nt,k),Gt=m.memoizedState),($e=qp||fY(m,w,$e,k,it,Gt,he)||!1)?(at||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(k,Gt,he),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(k,Gt,he)),typeof K.componentDidUpdate=="function"&&(m.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof K.componentDidUpdate!="function"||ce===d.memoizedProps&&it===d.memoizedState||(m.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ce===d.memoizedProps&&it===d.memoizedState||(m.flags|=1024),m.memoizedProps=k,m.memoizedState=Gt),K.props=k,K.state=Gt,K.context=he,k=$e):(typeof K.componentDidUpdate!="function"||ce===d.memoizedProps&&it===d.memoizedState||(m.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||ce===d.memoizedProps&&it===d.memoizedState||(m.flags|=1024),k=!1)}return GD(d,m,w,k,j,R)}function GD(d,m,w,k,R,j){TY(d,m);var K=(m.flags&128)!==0;if(!k&&!K)return R&&RK(m,w,!1),lf(d,m,j);k=m.stateNode,rTe.current=m;var ce=K&&typeof w.getDerivedStateFromError!="function"?null:k.render();return m.flags|=1,d!==null&&K?(m.child=Jv(m,d.child,null,j),m.child=Jv(m,null,ce,j)):ba(d,m,ce,j),m.memoizedState=k.state,R&&RK(m,w,!0),m.child}function AY(d){var m=d.stateNode;m.pendingContext?PK(d,m.pendingContext,m.pendingContext!==m.context):m.context&&PK(d,m.context,!1),TD(d,m.containerInfo)}function IY(d,m,w,k,R){return Zv(),vD(R),m.flags|=256,ba(d,m,w,k),m.child}var UD={dehydrated:null,treeContext:null,retryLane:0};function BD(d){return{baseLanes:d,cachePool:null,transitions:null}}function PY(d,m,w){var k=m.pendingProps,R=Ci.current,j=!1,K=(m.flags&128)!==0,ce;if((ce=K)||(ce=d!==null&&d.memoizedState===null?!1:(R&2)!==0),ce?(j=!0,m.flags&=-129):(d===null||d.memoizedState!==null)&&(R|=1),oi(Ci,R&1),d===null)return yD(m),d=m.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?((m.mode&1)===0?m.lanes=1:d.data==="$!"?m.lanes=8:m.lanes=1073741824,null):(K=k.children,d=k.fallback,j?(k=m.mode,j=m.child,K={mode:"hidden",children:K},(k&1)===0&&j!==null?(j.childLanes=0,j.pendingProps=K):j=tC(K,k,0,null),d=D0(d,k,w,null),j.return=m,d.return=m,j.sibling=d,m.child=j,m.child.memoizedState=BD(w),m.memoizedState=UD,d):WD(m,K));if(R=d.memoizedState,R!==null&&(ce=R.dehydrated,ce!==null))return iTe(d,m,K,k,ce,R,w);if(j){j=k.fallback,K=m.mode,R=d.child,ce=R.sibling;var he={mode:"hidden",children:k.children};return(K&1)===0&&m.child!==R?(k=m.child,k.childLanes=0,k.pendingProps=he,m.deletions=null):(k=em(R,he),k.subtreeFlags=R.subtreeFlags&14680064),ce!==null?j=em(ce,j):(j=D0(j,K,w,null),j.flags|=2),j.return=m,k.return=m,k.sibling=j,m.child=k,k=j,j=m.child,K=d.child.memoizedState,K=K===null?BD(w):{baseLanes:K.baseLanes|w,cachePool:null,transitions:K.transitions},j.memoizedState=K,j.childLanes=d.childLanes&~w,m.memoizedState=UD,k}return j=d.child,d=j.sibling,k=em(j,{mode:"visible",children:k.children}),(m.mode&1)===0&&(k.lanes=w),k.return=m,k.sibling=null,d!==null&&(w=m.deletions,w===null?(m.deletions=[d],m.flags|=16):w.push(d)),m.child=k,m.memoizedState=null,k}function WD(d,m){return m=tC({mode:"visible",children:m},d.mode,0,null),m.return=d,d.child=m}function GP(d,m,w,k){return k!==null&&vD(k),Jv(m,d.child,null,w),d=WD(m,m.pendingProps.children),d.flags|=2,m.memoizedState=null,d}function iTe(d,m,w,k,R,j,K){if(w)return m.flags&256?(m.flags&=-257,k=FD(Error(n(422))),GP(d,m,K,k)):m.memoizedState!==null?(m.child=d.child,m.flags|=128,null):(j=k.fallback,R=m.mode,k=tC({mode:"visible",children:k.children},R,0,null),j=D0(j,R,K,null),j.flags|=2,k.return=m,j.return=m,k.sibling=j,m.child=k,(m.mode&1)!==0&&Jv(m,d.child,null,K),m.child.memoizedState=BD(K),m.memoizedState=UD,j);if((m.mode&1)===0)return GP(d,m,K,null);if(R.data==="$!"){if(k=R.nextSibling&&R.nextSibling.dataset,k)var ce=k.dgst;return k=ce,j=Error(n(419)),k=FD(j,k,void 0),GP(d,m,K,k)}if(ce=(K&d.childLanes)!==0,Za||ce){if(k=Qs,k!==null){switch(K&-K){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}R=(R&(k.suspendedLanes|K))!==0?0:R,R!==0&&R!==j.retryLane&&(j.retryLane=R,of(d,R),Cu(k,d,R,-1))}return a6(),k=FD(Error(n(421))),GP(d,m,K,k)}return R.data==="$?"?(m.flags|=128,m.child=d.child,m=yTe.bind(null,d),R._reactRetry=m,null):(d=j.treeContext,Ul=Up(R.nextSibling),Gl=m,_i=!0,ku=null,d!==null&&(Ic[Pc++]=rf,Ic[Pc++]=sf,Ic[Pc++]=A0,rf=d.id,sf=d.overflow,A0=m),m=WD(m,k.children),m.flags|=4096,m)}function CY(d,m,w){d.lanes|=m;var k=d.alternate;k!==null&&(k.lanes|=m),bD(d.return,m,w)}function HD(d,m,w,k,R){var j=d.memoizedState;j===null?d.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:k,tail:w,tailMode:R}:(j.isBackwards=m,j.rendering=null,j.renderingStartTime=0,j.last=k,j.tail=w,j.tailMode=R)}function RY(d,m,w){var k=m.pendingProps,R=k.revealOrder,j=k.tail;if(ba(d,m,k.children,w),k=Ci.current,(k&2)!==0)k=k&1|2,m.flags|=128;else{if(d!==null&&(d.flags&128)!==0)e:for(d=m.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&CY(d,w,m);else if(d.tag===19)CY(d,w,m);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===m)break e;for(;d.sibling===null;){if(d.return===null||d.return===m)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}k&=1}if(oi(Ci,k),(m.mode&1)===0)m.memoizedState=null;else switch(R){case"forwards":for(w=m.child,R=null;w!==null;)d=w.alternate,d!==null&&LP(d)===null&&(R=w),w=w.sibling;w=R,w===null?(R=m.child,m.child=null):(R=w.sibling,w.sibling=null),HD(m,!1,R,w,j);break;case"backwards":for(w=null,R=m.child,m.child=null;R!==null;){if(d=R.alternate,d!==null&&LP(d)===null){m.child=R;break}d=R.sibling,R.sibling=w,w=R,R=d}HD(m,!0,w,null,j);break;case"together":HD(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function UP(d,m){(m.mode&1)===0&&d!==null&&(d.alternate=null,m.alternate=null,m.flags|=2)}function lf(d,m,w){if(d!==null&&(m.dependencies=d.dependencies),M0|=m.lanes,(w&m.childLanes)===0)return null;if(d!==null&&m.child!==d.child)throw Error(n(153));if(m.child!==null){for(d=m.child,w=em(d,d.pendingProps),m.child=w,w.return=m;d.sibling!==null;)d=d.sibling,w=w.sibling=em(d,d.pendingProps),w.return=m;w.sibling=null}return m.child}function sTe(d,m,w){switch(m.tag){case 3:AY(m),Zv();break;case 5:WK(m);break;case 1:Xa(m.type)&&TP(m);break;case 4:TD(m,m.stateNode.containerInfo);break;case 10:var k=m.type._context,R=m.memoizedProps.value;oi(RP,k._currentValue),k._currentValue=R;break;case 13:if(k=m.memoizedState,k!==null)return k.dehydrated!==null?(oi(Ci,Ci.current&1),m.flags|=128,null):(w&m.child.childLanes)!==0?PY(d,m,w):(oi(Ci,Ci.current&1),d=lf(d,m,w),d!==null?d.sibling:null);oi(Ci,Ci.current&1);break;case 19:if(k=(w&m.childLanes)!==0,(d.flags&128)!==0){if(k)return RY(d,m,w);m.flags|=128}if(R=m.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),oi(Ci,Ci.current),k)break;return null;case 22:case 23:return m.lanes=0,SY(d,m,w)}return lf(d,m,w)}var MY,qD,NY,OY;MY=function(d,m){for(var w=m.child;w!==null;){if(w.tag===5||w.tag===6)d.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===m)break;for(;w.sibling===null;){if(w.return===null||w.return===m)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},qD=function(){},NY=function(d,m,w,k){var R=d.memoizedProps;if(R!==k){d=m.stateNode,C0(Gh.current);var j=null;switch(w){case"input":R=jt(d,R),k=jt(d,k),j=[];break;case"select":R=Ce({},R,{value:void 0}),k=Ce({},k,{value:void 0}),j=[];break;case"textarea":R=_o(d,R),k=_o(d,k),j=[];break;default:typeof R.onClick!="function"&&typeof k.onClick=="function"&&(d.onclick=bP)}Ii(w,k);var K;w=null;for($e in R)if(!k.hasOwnProperty($e)&&R.hasOwnProperty($e)&&R[$e]!=null)if($e==="style"){var ce=R[$e];for(K in ce)ce.hasOwnProperty(K)&&(w||(w={}),w[K]="")}else $e!=="dangerouslySetInnerHTML"&&$e!=="children"&&$e!=="suppressContentEditableWarning"&&$e!=="suppressHydrationWarning"&&$e!=="autoFocus"&&(i.hasOwnProperty($e)?j||(j=[]):(j=j||[]).push($e,null));for($e in k){var he=k[$e];if(ce=R?.[$e],k.hasOwnProperty($e)&&he!==ce&&(he!=null||ce!=null))if($e==="style")if(ce){for(K in ce)!ce.hasOwnProperty(K)||he&&he.hasOwnProperty(K)||(w||(w={}),w[K]="");for(K in he)he.hasOwnProperty(K)&&ce[K]!==he[K]&&(w||(w={}),w[K]=he[K])}else w||(j||(j=[]),j.push($e,w)),w=he;else $e==="dangerouslySetInnerHTML"?(he=he?he.__html:void 0,ce=ce?ce.__html:void 0,he!=null&&ce!==he&&(j=j||[]).push($e,he)):$e==="children"?typeof he!="string"&&typeof he!="number"||(j=j||[]).push($e,""+he):$e!=="suppressContentEditableWarning"&&$e!=="suppressHydrationWarning"&&(i.hasOwnProperty($e)?(he!=null&&$e==="onScroll"&&ci("scroll",d),j||ce===he||(j=[])):(j=j||[]).push($e,he))}w&&(j=j||[]).push("style",w);var $e=j;(m.updateQueue=$e)&&(m.flags|=4)}},OY=function(d,m,w,k){w!==k&&(m.flags|=4)};function hE(d,m){if(!_i)switch(d.tailMode){case"hidden":m=d.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?d.tail=null:w.sibling=null;break;case"collapsed":w=d.tail;for(var k=null;w!==null;)w.alternate!==null&&(k=w),w=w.sibling;k===null?m||d.tail===null?d.tail=null:d.tail.sibling=null:k.sibling=null}}function Go(d){var m=d.alternate!==null&&d.alternate.child===d.child,w=0,k=0;if(m)for(var R=d.child;R!==null;)w|=R.lanes|R.childLanes,k|=R.subtreeFlags&14680064,k|=R.flags&14680064,R.return=d,R=R.sibling;else for(R=d.child;R!==null;)w|=R.lanes|R.childLanes,k|=R.subtreeFlags,k|=R.flags,R.return=d,R=R.sibling;return d.subtreeFlags|=k,d.childLanes=w,m}function oTe(d,m,w){var k=m.pendingProps;switch(mD(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(m),null;case 1:return Xa(m.type)&&SP(),Go(m),null;case 3:return k=m.stateNode,t_(),ui(Ya),ui(Vo),ID(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(d===null||d.child===null)&&(PP(m)?m.flags|=4:d===null||d.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,ku!==null&&(i6(ku),ku=null))),qD(d,m),Go(m),null;case 5:kD(m);var R=C0(oE.current);if(w=m.type,d!==null&&m.stateNode!=null)NY(d,m,w,k,R),d.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!k){if(m.stateNode===null)throw Error(n(166));return Go(m),null}if(d=C0(Gh.current),PP(m)){k=m.stateNode,w=m.type;var j=m.memoizedProps;switch(k[zh]=m,k[tE]=j,d=(m.mode&1)!==0,w){case"dialog":ci("cancel",k),ci("close",k);break;case"iframe":case"object":case"embed":ci("load",k);break;case"video":case"audio":for(R=0;R<Jb.length;R++)ci(Jb[R],k);break;case"source":ci("error",k);break;case"img":case"image":case"link":ci("error",k),ci("load",k);break;case"details":ci("toggle",k);break;case"input":pn(k,j),ci("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!j.multiple},ci("invalid",k);break;case"textarea":Rr(k,j),ci("invalid",k)}Ii(w,j),R=null;for(var K in j)if(j.hasOwnProperty(K)){var ce=j[K];K==="children"?typeof ce=="string"?k.textContent!==ce&&(j.suppressHydrationWarning!==!0&&wP(k.textContent,ce,d),R=["children",ce]):typeof ce=="number"&&k.textContent!==""+ce&&(j.suppressHydrationWarning!==!0&&wP(k.textContent,ce,d),R=["children",""+ce]):i.hasOwnProperty(K)&&ce!=null&&K==="onScroll"&&ci("scroll",k)}switch(w){case"input":Dt(k),hr(k,j,!0);break;case"textarea":Dt(k),Ls(k);break;case"select":case"option":break;default:typeof j.onClick=="function"&&(k.onclick=bP)}k=R,m.updateQueue=k,k!==null&&(m.flags|=4)}else{K=R.nodeType===9?R:R.ownerDocument,d==="http://www.w3.org/1999/xhtml"&&(d=_t(w)),d==="http://www.w3.org/1999/xhtml"?w==="script"?(d=K.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild)):typeof k.is=="string"?d=K.createElement(w,{is:k.is}):(d=K.createElement(w),w==="select"&&(K=d,k.multiple?K.multiple=!0:k.size&&(K.size=k.size))):d=K.createElementNS(d,w),d[zh]=m,d[tE]=k,MY(d,m,!1,!1),m.stateNode=d;e:{switch(K=He(w,k),w){case"dialog":ci("cancel",d),ci("close",d),R=k;break;case"iframe":case"object":case"embed":ci("load",d),R=k;break;case"video":case"audio":for(R=0;R<Jb.length;R++)ci(Jb[R],d);R=k;break;case"source":ci("error",d),R=k;break;case"img":case"image":case"link":ci("error",d),ci("load",d),R=k;break;case"details":ci("toggle",d),R=k;break;case"input":pn(d,k),R=jt(d,k),ci("invalid",d);break;case"option":R=k;break;case"select":d._wrapperState={wasMultiple:!!k.multiple},R=Ce({},k,{value:void 0}),ci("invalid",d);break;case"textarea":Rr(d,k),R=_o(d,k),ci("invalid",d);break;default:R=k}Ii(w,R),ce=R;for(j in ce)if(ce.hasOwnProperty(j)){var he=ce[j];j==="style"?Ds(d,he):j==="dangerouslySetInnerHTML"?(he=he?he.__html:void 0,he!=null&&Ft(d,he)):j==="children"?typeof he=="string"?(w!=="textarea"||he!=="")&&jn(d,he):typeof he=="number"&&jn(d,""+he):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(i.hasOwnProperty(j)?he!=null&&j==="onScroll"&&ci("scroll",d):he!=null&&I(d,j,he,K))}switch(w){case"input":Dt(d),hr(d,k,!1);break;case"textarea":Dt(d),Ls(d);break;case"option":k.value!=null&&d.setAttribute("value",""+Ke(k.value));break;case"select":d.multiple=!!k.multiple,j=k.value,j!=null?ei(d,!!k.multiple,j,!1):k.defaultValue!=null&&ei(d,!!k.multiple,k.defaultValue,!0);break;default:typeof R.onClick=="function"&&(d.onclick=bP)}switch(w){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(m.flags|=4)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Go(m),null;case 6:if(d&&m.stateNode!=null)OY(d,m,d.memoizedProps,k);else{if(typeof k!="string"&&m.stateNode===null)throw Error(n(166));if(w=C0(oE.current),C0(Gh.current),PP(m)){if(k=m.stateNode,w=m.memoizedProps,k[zh]=m,(j=k.nodeValue!==w)&&(d=Gl,d!==null))switch(d.tag){case 3:wP(k.nodeValue,w,(d.mode&1)!==0);break;case 5:d.memoizedProps.suppressHydrationWarning!==!0&&wP(k.nodeValue,w,(d.mode&1)!==0)}j&&(m.flags|=4)}else k=(w.nodeType===9?w:w.ownerDocument).createTextNode(k),k[zh]=m,m.stateNode=k}return Go(m),null;case 13:if(ui(Ci),k=m.memoizedState,d===null||d.memoizedState!==null&&d.memoizedState.dehydrated!==null){if(_i&&Ul!==null&&(m.mode&1)!==0&&(m.flags&128)===0)jK(),Zv(),m.flags|=98560,j=!1;else if(j=PP(m),k!==null&&k.dehydrated!==null){if(d===null){if(!j)throw Error(n(318));if(j=m.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(n(317));j[zh]=m}else Zv(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Go(m),j=!1}else ku!==null&&(i6(ku),ku=null),j=!0;if(!j)return m.flags&65536?m:null}return(m.flags&128)!==0?(m.lanes=w,m):(k=k!==null,k!==(d!==null&&d.memoizedState!==null)&&k&&(m.child.flags|=8192,(m.mode&1)!==0&&(d===null||(Ci.current&1)!==0?$s===0&&($s=3):a6())),m.updateQueue!==null&&(m.flags|=4),Go(m),null);case 4:return t_(),qD(d,m),d===null&&Qb(m.stateNode.containerInfo),Go(m),null;case 10:return wD(m.type._context),Go(m),null;case 17:return Xa(m.type)&&SP(),Go(m),null;case 19:if(ui(Ci),j=m.memoizedState,j===null)return Go(m),null;if(k=(m.flags&128)!==0,K=j.rendering,K===null)if(k)hE(j,!1);else{if($s!==0||d!==null&&(d.flags&128)!==0)for(d=m.child;d!==null;){if(K=LP(d),K!==null){for(m.flags|=128,hE(j,!1),k=K.updateQueue,k!==null&&(m.updateQueue=k,m.flags|=4),m.subtreeFlags=0,k=w,w=m.child;w!==null;)j=w,d=k,j.flags&=14680066,K=j.alternate,K===null?(j.childLanes=0,j.lanes=d,j.child=null,j.subtreeFlags=0,j.memoizedProps=null,j.memoizedState=null,j.updateQueue=null,j.dependencies=null,j.stateNode=null):(j.childLanes=K.childLanes,j.lanes=K.lanes,j.child=K.child,j.subtreeFlags=0,j.deletions=null,j.memoizedProps=K.memoizedProps,j.memoizedState=K.memoizedState,j.updateQueue=K.updateQueue,j.type=K.type,d=K.dependencies,j.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),w=w.sibling;return oi(Ci,Ci.current&1|2),m.child}d=d.sibling}j.tail!==null&&ut()>s_&&(m.flags|=128,k=!0,hE(j,!1),m.lanes=4194304)}else{if(!k)if(d=LP(K),d!==null){if(m.flags|=128,k=!0,w=d.updateQueue,w!==null&&(m.updateQueue=w,m.flags|=4),hE(j,!0),j.tail===null&&j.tailMode==="hidden"&&!K.alternate&&!_i)return Go(m),null}else 2*ut()-j.renderingStartTime>s_&&w!==1073741824&&(m.flags|=128,k=!0,hE(j,!1),m.lanes=4194304);j.isBackwards?(K.sibling=m.child,m.child=K):(w=j.last,w!==null?w.sibling=K:m.child=K,j.last=K)}return j.tail!==null?(m=j.tail,j.rendering=m,j.tail=m.sibling,j.renderingStartTime=ut(),m.sibling=null,w=Ci.current,oi(Ci,k?w&1|2:w&1),m):(Go(m),null);case 22:case 23:return o6(),k=m.memoizedState!==null,d!==null&&d.memoizedState!==null!==k&&(m.flags|=8192),k&&(m.mode&1)!==0?(Bl&1073741824)!==0&&(Go(m),m.subtreeFlags&6&&(m.flags|=8192)):Go(m),null;case 24:return null;case 25:return null}throw Error(n(156,m.tag))}function aTe(d,m){switch(mD(m),m.tag){case 1:return Xa(m.type)&&SP(),d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 3:return t_(),ui(Ya),ui(Vo),ID(),d=m.flags,(d&65536)!==0&&(d&128)===0?(m.flags=d&-65537|128,m):null;case 5:return kD(m),null;case 13:if(ui(Ci),d=m.memoizedState,d!==null&&d.dehydrated!==null){if(m.alternate===null)throw Error(n(340));Zv()}return d=m.flags,d&65536?(m.flags=d&-65537|128,m):null;case 19:return ui(Ci),null;case 4:return t_(),null;case 10:return wD(m.type._context),null;case 22:case 23:return o6(),null;case 24:return null;default:return null}}var BP=!1,Uo=!1,lTe=typeof WeakSet=="function"?WeakSet:Set,$t=null;function r_(d,m){var w=d.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(k){Ui(d,m,k)}else w.current=null}function KD(d,m,w){try{w()}catch(k){Ui(d,m,k)}}var LY=!1;function cTe(d,m){if(oD=Jd,d=fK(),JL(d)){if("selectionStart"in d)var w={start:d.selectionStart,end:d.selectionEnd};else e:{w=(w=d.ownerDocument)&&w.defaultView||window;var k=w.getSelection&&w.getSelection();if(k&&k.rangeCount!==0){w=k.anchorNode;var R=k.anchorOffset,j=k.focusNode;k=k.focusOffset;try{w.nodeType,j.nodeType}catch{w=null;break e}var K=0,ce=-1,he=-1,$e=0,at=0,ht=d,it=null;t:for(;;){for(var Nt;ht!==w||R!==0&&ht.nodeType!==3||(ce=K+R),ht!==j||k!==0&&ht.nodeType!==3||(he=K+k),ht.nodeType===3&&(K+=ht.nodeValue.length),(Nt=ht.firstChild)!==null;)it=ht,ht=Nt;for(;;){if(ht===d)break t;if(it===w&&++$e===R&&(ce=K),it===j&&++at===k&&(he=K),(Nt=ht.nextSibling)!==null)break;ht=it,it=ht.parentNode}ht=Nt}w=ce===-1||he===-1?null:{start:ce,end:he}}else w=null}w=w||{start:0,end:0}}else w=null;for(aD={focusedElem:d,selectionRange:w},Jd=!1,$t=m;$t!==null;)if(m=$t,d=m.child,(m.subtreeFlags&1028)!==0&&d!==null)d.return=m,$t=d;else for(;$t!==null;){m=$t;try{var Gt=m.alternate;if((m.flags&1024)!==0)switch(m.tag){case 0:case 11:case 15:break;case 1:if(Gt!==null){var Yt=Gt.memoizedProps,as=Gt.memoizedState,be=m.stateNode,me=be.getSnapshotBeforeUpdate(m.elementType===m.type?Yt:Au(m.type,Yt),as);be.__reactInternalSnapshotBeforeUpdate=me}break;case 3:var Me=m.stateNode.containerInfo;Me.nodeType===1?Me.textContent="":Me.nodeType===9&&Me.documentElement&&Me.removeChild(Me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(mt){Ui(m,m.return,mt)}if(d=m.sibling,d!==null){d.return=m.return,$t=d;break}$t=m.return}return Gt=LY,LY=!1,Gt}function dE(d,m,w){var k=m.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var R=k=k.next;do{if((R.tag&d)===d){var j=R.destroy;R.destroy=void 0,j!==void 0&&KD(m,w,j)}R=R.next}while(R!==k)}}function WP(d,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var w=m=m.next;do{if((w.tag&d)===d){var k=w.create;w.destroy=k()}w=w.next}while(w!==m)}}function YD(d){var m=d.ref;if(m!==null){var w=d.stateNode;switch(d.tag){case 5:d=w;break;default:d=w}typeof m=="function"?m(d):m.current=d}}function DY(d){var m=d.alternate;m!==null&&(d.alternate=null,DY(m)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(m=d.stateNode,m!==null&&(delete m[zh],delete m[tE],delete m[hD],delete m[WSe],delete m[HSe])),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function jY(d){return d.tag===5||d.tag===3||d.tag===4}function $Y(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||jY(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function XD(d,m,w){var k=d.tag;if(k===5||k===6)d=d.stateNode,m?w.nodeType===8?w.parentNode.insertBefore(d,m):w.insertBefore(d,m):(w.nodeType===8?(m=w.parentNode,m.insertBefore(d,w)):(m=w,m.appendChild(d)),w=w._reactRootContainer,w!=null||m.onclick!==null||(m.onclick=bP));else if(k!==4&&(d=d.child,d!==null))for(XD(d,m,w),d=d.sibling;d!==null;)XD(d,m,w),d=d.sibling}function ZD(d,m,w){var k=d.tag;if(k===5||k===6)d=d.stateNode,m?w.insertBefore(d,m):w.appendChild(d);else if(k!==4&&(d=d.child,d!==null))for(ZD(d,m,w),d=d.sibling;d!==null;)ZD(d,m,w),d=d.sibling}var bo=null,Iu=!1;function Yp(d,m,w){for(w=w.child;w!==null;)FY(d,m,w),w=w.sibling}function FY(d,m,w){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(jl,w)}catch{}switch(w.tag){case 5:Uo||r_(w,m);case 6:var k=bo,R=Iu;bo=null,Yp(d,m,w),bo=k,Iu=R,bo!==null&&(Iu?(d=bo,w=w.stateNode,d.nodeType===8?d.parentNode.removeChild(w):d.removeChild(w)):bo.removeChild(w.stateNode));break;case 18:bo!==null&&(Iu?(d=bo,w=w.stateNode,d.nodeType===8?uD(d.parentNode,w):d.nodeType===1&&uD(d,w),Fp(d)):uD(bo,w.stateNode));break;case 4:k=bo,R=Iu,bo=w.stateNode.containerInfo,Iu=!0,Yp(d,m,w),bo=k,Iu=R;break;case 0:case 11:case 14:case 15:if(!Uo&&(k=w.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){R=k=k.next;do{var j=R,K=j.destroy;j=j.tag,K!==void 0&&((j&2)!==0||(j&4)!==0)&&KD(w,m,K),R=R.next}while(R!==k)}Yp(d,m,w);break;case 1:if(!Uo&&(r_(w,m),k=w.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=w.memoizedProps,k.state=w.memoizedState,k.componentWillUnmount()}catch(ce){Ui(w,m,ce)}Yp(d,m,w);break;case 21:Yp(d,m,w);break;case 22:w.mode&1?(Uo=(k=Uo)||w.memoizedState!==null,Yp(d,m,w),Uo=k):Yp(d,m,w);break;default:Yp(d,m,w)}}function VY(d){var m=d.updateQueue;if(m!==null){d.updateQueue=null;var w=d.stateNode;w===null&&(w=d.stateNode=new lTe),m.forEach(function(k){var R=vTe.bind(null,d,k);w.has(k)||(w.add(k),k.then(R,R))})}}function Pu(d,m){var w=m.deletions;if(w!==null)for(var k=0;k<w.length;k++){var R=w[k];try{var j=d,K=m,ce=K;e:for(;ce!==null;){switch(ce.tag){case 5:bo=ce.stateNode,Iu=!1;break e;case 3:bo=ce.stateNode.containerInfo,Iu=!0;break e;case 4:bo=ce.stateNode.containerInfo,Iu=!0;break e}ce=ce.return}if(bo===null)throw Error(n(160));FY(j,K,R),bo=null,Iu=!1;var he=R.alternate;he!==null&&(he.return=null),R.return=null}catch($e){Ui(R,m,$e)}}if(m.subtreeFlags&12854)for(m=m.child;m!==null;)zY(m,d),m=m.sibling}function zY(d,m){var w=d.alternate,k=d.flags;switch(d.tag){case 0:case 11:case 14:case 15:if(Pu(m,d),Bh(d),k&4){try{dE(3,d,d.return),WP(3,d)}catch(Yt){Ui(d,d.return,Yt)}try{dE(5,d,d.return)}catch(Yt){Ui(d,d.return,Yt)}}break;case 1:Pu(m,d),Bh(d),k&512&&w!==null&&r_(w,w.return);break;case 5:if(Pu(m,d),Bh(d),k&512&&w!==null&&r_(w,w.return),d.flags&32){var R=d.stateNode;try{jn(R,"")}catch(Yt){Ui(d,d.return,Yt)}}if(k&4&&(R=d.stateNode,R!=null)){var j=d.memoizedProps,K=w!==null?w.memoizedProps:j,ce=d.type,he=d.updateQueue;if(d.updateQueue=null,he!==null)try{ce==="input"&&j.type==="radio"&&j.name!=null&&_n(R,j),He(ce,K);var $e=He(ce,j);for(K=0;K<he.length;K+=2){var at=he[K],ht=he[K+1];at==="style"?Ds(R,ht):at==="dangerouslySetInnerHTML"?Ft(R,ht):at==="children"?jn(R,ht):I(R,at,ht,$e)}switch(ce){case"input":dt(R,j);break;case"textarea":Ai(R,j);break;case"select":var it=R._wrapperState.wasMultiple;R._wrapperState.wasMultiple=!!j.multiple;var Nt=j.value;Nt!=null?ei(R,!!j.multiple,Nt,!1):it!==!!j.multiple&&(j.defaultValue!=null?ei(R,!!j.multiple,j.defaultValue,!0):ei(R,!!j.multiple,j.multiple?[]:"",!1))}R[tE]=j}catch(Yt){Ui(d,d.return,Yt)}}break;case 6:if(Pu(m,d),Bh(d),k&4){if(d.stateNode===null)throw Error(n(162));R=d.stateNode,j=d.memoizedProps;try{R.nodeValue=j}catch(Yt){Ui(d,d.return,Yt)}}break;case 3:if(Pu(m,d),Bh(d),k&4&&w!==null&&w.memoizedState.isDehydrated)try{Fp(m.containerInfo)}catch(Yt){Ui(d,d.return,Yt)}break;case 4:Pu(m,d),Bh(d);break;case 13:Pu(m,d),Bh(d),R=d.child,R.flags&8192&&(j=R.memoizedState!==null,R.stateNode.isHidden=j,!j||R.alternate!==null&&R.alternate.memoizedState!==null||(e6=ut())),k&4&&VY(d);break;case 22:if(at=w!==null&&w.memoizedState!==null,d.mode&1?(Uo=($e=Uo)||at,Pu(m,d),Uo=$e):Pu(m,d),Bh(d),k&8192){if($e=d.memoizedState!==null,(d.stateNode.isHidden=$e)&&!at&&(d.mode&1)!==0)for($t=d,at=d.child;at!==null;){for(ht=$t=at;$t!==null;){switch(it=$t,Nt=it.child,it.tag){case 0:case 11:case 14:case 15:dE(4,it,it.return);break;case 1:r_(it,it.return);var Gt=it.stateNode;if(typeof Gt.componentWillUnmount=="function"){k=it,w=it.return;try{m=k,Gt.props=m.memoizedProps,Gt.state=m.memoizedState,Gt.componentWillUnmount()}catch(Yt){Ui(k,w,Yt)}}break;case 5:r_(it,it.return);break;case 22:if(it.memoizedState!==null){BY(ht);continue}}Nt!==null?(Nt.return=it,$t=Nt):BY(ht)}at=at.sibling}e:for(at=null,ht=d;;){if(ht.tag===5){if(at===null){at=ht;try{R=ht.stateNode,$e?(j=R.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none"):(ce=ht.stateNode,he=ht.memoizedProps.style,K=he!=null&&he.hasOwnProperty("display")?he.display:null,ce.style.display=Gi("display",K))}catch(Yt){Ui(d,d.return,Yt)}}}else if(ht.tag===6){if(at===null)try{ht.stateNode.nodeValue=$e?"":ht.memoizedProps}catch(Yt){Ui(d,d.return,Yt)}}else if((ht.tag!==22&&ht.tag!==23||ht.memoizedState===null||ht===d)&&ht.child!==null){ht.child.return=ht,ht=ht.child;continue}if(ht===d)break e;for(;ht.sibling===null;){if(ht.return===null||ht.return===d)break e;at===ht&&(at=null),ht=ht.return}at===ht&&(at=null),ht.sibling.return=ht.return,ht=ht.sibling}}break;case 19:Pu(m,d),Bh(d),k&4&&VY(d);break;case 21:break;default:Pu(m,d),Bh(d)}}function Bh(d){var m=d.flags;if(m&2){try{e:{for(var w=d.return;w!==null;){if(jY(w)){var k=w;break e}w=w.return}throw Error(n(160))}switch(k.tag){case 5:var R=k.stateNode;k.flags&32&&(jn(R,""),k.flags&=-33);var j=$Y(d);ZD(d,j,R);break;case 3:case 4:var K=k.stateNode.containerInfo,ce=$Y(d);XD(d,ce,K);break;default:throw Error(n(161))}}catch(he){Ui(d,d.return,he)}d.flags&=-3}m&4096&&(d.flags&=-4097)}function uTe(d,m,w){$t=d,GY(d)}function GY(d,m,w){for(var k=(d.mode&1)!==0;$t!==null;){var R=$t,j=R.child;if(R.tag===22&&k){var K=R.memoizedState!==null||BP;if(!K){var ce=R.alternate,he=ce!==null&&ce.memoizedState!==null||Uo;ce=BP;var $e=Uo;if(BP=K,(Uo=he)&&!$e)for($t=R;$t!==null;)K=$t,he=K.child,K.tag===22&&K.memoizedState!==null?WY(R):he!==null?(he.return=K,$t=he):WY(R);for(;j!==null;)$t=j,GY(j),j=j.sibling;$t=R,BP=ce,Uo=$e}UY(d)}else(R.subtreeFlags&8772)!==0&&j!==null?(j.return=R,$t=j):UY(d)}}function UY(d){for(;$t!==null;){var m=$t;if((m.flags&8772)!==0){var w=m.alternate;try{if((m.flags&8772)!==0)switch(m.tag){case 0:case 11:case 15:Uo||WP(5,m);break;case 1:var k=m.stateNode;if(m.flags&4&&!Uo)if(w===null)k.componentDidMount();else{var R=m.elementType===m.type?w.memoizedProps:Au(m.type,w.memoizedProps);k.componentDidUpdate(R,w.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var j=m.updateQueue;j!==null&&BK(m,j,k);break;case 3:var K=m.updateQueue;if(K!==null){if(w=null,m.child!==null)switch(m.child.tag){case 5:w=m.child.stateNode;break;case 1:w=m.child.stateNode}BK(m,K,w)}break;case 5:var ce=m.stateNode;if(w===null&&m.flags&4){w=ce;var he=m.memoizedProps;switch(m.type){case"button":case"input":case"select":case"textarea":he.autoFocus&&w.focus();break;case"img":he.src&&(w.src=he.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(m.memoizedState===null){var $e=m.alternate;if($e!==null){var at=$e.memoizedState;if(at!==null){var ht=at.dehydrated;ht!==null&&Fp(ht)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Uo||m.flags&512&&YD(m)}catch(it){Ui(m,m.return,it)}}if(m===d){$t=null;break}if(w=m.sibling,w!==null){w.return=m.return,$t=w;break}$t=m.return}}function BY(d){for(;$t!==null;){var m=$t;if(m===d){$t=null;break}var w=m.sibling;if(w!==null){w.return=m.return,$t=w;break}$t=m.return}}function WY(d){for(;$t!==null;){var m=$t;try{switch(m.tag){case 0:case 11:case 15:var w=m.return;try{WP(4,m)}catch(he){Ui(m,w,he)}break;case 1:var k=m.stateNode;if(typeof k.componentDidMount=="function"){var R=m.return;try{k.componentDidMount()}catch(he){Ui(m,R,he)}}var j=m.return;try{YD(m)}catch(he){Ui(m,j,he)}break;case 5:var K=m.return;try{YD(m)}catch(he){Ui(m,K,he)}}}catch(he){Ui(m,m.return,he)}if(m===d){$t=null;break}var ce=m.sibling;if(ce!==null){ce.return=m.return,$t=ce;break}$t=m.return}}var hTe=Math.ceil,HP=P.ReactCurrentDispatcher,JD=P.ReactCurrentOwner,Mc=P.ReactCurrentBatchConfig,fr=0,Qs=null,ys=null,Eo=0,Bl=0,i_=Bp(0),$s=0,fE=null,M0=0,qP=0,QD=0,pE=null,Ja=null,e6=0,s_=1/0,cf=null,KP=!1,t6=null,Xp=null,YP=!1,Zp=null,XP=0,mE=0,n6=null,ZP=-1,JP=0;function Ea(){return(fr&6)!==0?ut():ZP!==-1?ZP:ZP=ut()}function Jp(d){return(d.mode&1)===0?1:(fr&2)!==0&&Eo!==0?Eo&-Eo:KSe.transition!==null?(JP===0&&(JP=Db()),JP):(d=sr,d!==0||(d=window.event,d=d===void 0?16:Ov(d.type)),d)}function Cu(d,m,w,k){if(50<mE)throw mE=0,n6=null,Error(n(185));x0(d,w,k),((fr&2)===0||d!==Qs)&&(d===Qs&&((fr&2)===0&&(qP|=w),$s===4&&Qp(d,Eo)),Qa(d,k),w===1&&fr===0&&(m.mode&1)===0&&(s_=ut()+500,kP&&Hp()))}function Qa(d,m){var w=d.callbackNode;_0(d,m);var k=Yd(d,d===Qs?Eo:0);if(k===0)w!==null&&yt(w),d.callbackNode=null,d.callbackPriority=0;else if(m=k&-k,d.callbackPriority!==m){if(w!=null&&yt(w),m===1)d.tag===0?qSe(qY.bind(null,d)):MK(qY.bind(null,d)),USe(function(){(fr&6)===0&&Hp()}),w=null;else{switch(Rh(k)){case 1:w=Mr;break;case 4:w=$r;break;case 16:w=vi;break;case 536870912:w=kc;break;default:w=vi}w=tX(w,HY.bind(null,d))}d.callbackPriority=m,d.callbackNode=w}}function HY(d,m){if(ZP=-1,JP=0,(fr&6)!==0)throw Error(n(327));var w=d.callbackNode;if(o_()&&d.callbackNode!==w)return null;var k=Yd(d,d===Qs?Eo:0);if(k===0)return null;if((k&30)!==0||(k&d.expiredLanes)!==0||m)m=QP(d,k);else{m=k;var R=fr;fr|=2;var j=YY();(Qs!==d||Eo!==m)&&(cf=null,s_=ut()+500,O0(d,m));do try{pTe();break}catch(ce){KY(d,ce)}while(!0);xD(),HP.current=j,fr=R,ys!==null?m=0:(Qs=null,Eo=0,m=$s)}if(m!==0){if(m===2&&(R=Lb(d),R!==0&&(k=R,m=r6(d,R))),m===1)throw w=fE,O0(d,0),Qp(d,k),Qa(d,ut()),w;if(m===6)Qp(d,k);else{if(R=d.current.alternate,(k&30)===0&&!dTe(R)&&(m=QP(d,k),m===2&&(j=Lb(d),j!==0&&(k=j,m=r6(d,j))),m===1))throw w=fE,O0(d,0),Qp(d,k),Qa(d,ut()),w;switch(d.finishedWork=R,d.finishedLanes=k,m){case 0:case 1:throw Error(n(345));case 2:L0(d,Ja,cf);break;case 3:if(Qp(d,k),(k&130023424)===k&&(m=e6+500-ut(),10<m)){if(Yd(d,0)!==0)break;if(R=d.suspendedLanes,(R&k)!==k){Ea(),d.pingedLanes|=d.suspendedLanes&R;break}d.timeoutHandle=cD(L0.bind(null,d,Ja,cf),m);break}L0(d,Ja,cf);break;case 4:if(Qp(d,k),(k&4194240)===k)break;for(m=d.eventTimes,R=-1;0<k;){var K=31-Pi(k);j=1<<K,K=m[K],K>R&&(R=K),k&=~j}if(k=R,k=ut()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*hTe(k/1960))-k,10<k){d.timeoutHandle=cD(L0.bind(null,d,Ja,cf),k);break}L0(d,Ja,cf);break;case 5:L0(d,Ja,cf);break;default:throw Error(n(329))}}}return Qa(d,ut()),d.callbackNode===w?HY.bind(null,d):null}function r6(d,m){var w=pE;return d.current.memoizedState.isDehydrated&&(O0(d,m).flags|=256),d=QP(d,m),d!==2&&(m=Ja,Ja=w,m!==null&&i6(m)),d}function i6(d){Ja===null?Ja=d:Ja.push.apply(Ja,d)}function dTe(d){for(var m=d;;){if(m.flags&16384){var w=m.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var k=0;k<w.length;k++){var R=w[k],j=R.getSnapshot;R=R.value;try{if(!Tu(j(),R))return!1}catch{return!1}}}if(w=m.child,m.subtreeFlags&16384&&w!==null)w.return=m,m=w;else{if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Qp(d,m){for(m&=~QD,m&=~qP,d.suspendedLanes|=m,d.pingedLanes&=~m,d=d.expirationTimes;0<m;){var w=31-Pi(m),k=1<<w;d[w]=-1,m&=~k}}function qY(d){if((fr&6)!==0)throw Error(n(327));o_();var m=Yd(d,0);if((m&1)===0)return Qa(d,ut()),null;var w=QP(d,m);if(d.tag!==0&&w===2){var k=Lb(d);k!==0&&(m=k,w=r6(d,k))}if(w===1)throw w=fE,O0(d,0),Qp(d,m),Qa(d,ut()),w;if(w===6)throw Error(n(345));return d.finishedWork=d.current.alternate,d.finishedLanes=m,L0(d,Ja,cf),Qa(d,ut()),null}function s6(d,m){var w=fr;fr|=1;try{return d(m)}finally{fr=w,fr===0&&(s_=ut()+500,kP&&Hp())}}function N0(d){Zp!==null&&Zp.tag===0&&(fr&6)===0&&o_();var m=fr;fr|=1;var w=Mc.transition,k=sr;try{if(Mc.transition=null,sr=1,d)return d()}finally{sr=k,Mc.transition=w,fr=m,(fr&6)===0&&Hp()}}function o6(){Bl=i_.current,ui(i_)}function O0(d,m){d.finishedWork=null,d.finishedLanes=0;var w=d.timeoutHandle;if(w!==-1&&(d.timeoutHandle=-1,GSe(w)),ys!==null)for(w=ys.return;w!==null;){var k=w;switch(mD(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&SP();break;case 3:t_(),ui(Ya),ui(Vo),ID();break;case 5:kD(k);break;case 4:t_();break;case 13:ui(Ci);break;case 19:ui(Ci);break;case 10:wD(k.type._context);break;case 22:case 23:o6()}w=w.return}if(Qs=d,ys=d=em(d.current,null),Eo=Bl=m,$s=0,fE=null,QD=qP=M0=0,Ja=pE=null,P0!==null){for(m=0;m<P0.length;m++)if(w=P0[m],k=w.interleaved,k!==null){w.interleaved=null;var R=k.next,j=w.pending;if(j!==null){var K=j.next;j.next=R,k.next=K}w.pending=k}P0=null}return d}function KY(d,m){do{var w=ys;try{if(xD(),DP.current=VP,jP){for(var k=Ri.memoizedState;k!==null;){var R=k.queue;R!==null&&(R.pending=null),k=k.next}jP=!1}if(R0=0,Js=js=Ri=null,aE=!1,lE=0,JD.current=null,w===null||w.return===null){$s=1,fE=m,ys=null;break}e:{var j=d,K=w.return,ce=w,he=m;if(m=Eo,ce.flags|=32768,he!==null&&typeof he=="object"&&typeof he.then=="function"){var $e=he,at=ce,ht=at.tag;if((at.mode&1)===0&&(ht===0||ht===11||ht===15)){var it=at.alternate;it?(at.updateQueue=it.updateQueue,at.memoizedState=it.memoizedState,at.lanes=it.lanes):(at.updateQueue=null,at.memoizedState=null)}var Nt=_Y(K);if(Nt!==null){Nt.flags&=-257,xY(Nt,K,ce,j,m),Nt.mode&1&&vY(j,$e,m),m=Nt,he=$e;var Gt=m.updateQueue;if(Gt===null){var Yt=new Set;Yt.add(he),m.updateQueue=Yt}else Gt.add(he);break e}else{if((m&1)===0){vY(j,$e,m),a6();break e}he=Error(n(426))}}else if(_i&&ce.mode&1){var as=_Y(K);if(as!==null){(as.flags&65536)===0&&(as.flags|=256),xY(as,K,ce,j,m),vD(n_(he,ce));break e}}j=he=n_(he,ce),$s!==4&&($s=2),pE===null?pE=[j]:pE.push(j),j=K;do{switch(j.tag){case 3:j.flags|=65536,m&=-m,j.lanes|=m;var be=gY(j,he,m);UK(j,be);break e;case 1:ce=he;var me=j.type,Me=j.stateNode;if((j.flags&128)===0&&(typeof me.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(Xp===null||!Xp.has(Me)))){j.flags|=65536,m&=-m,j.lanes|=m;var mt=yY(j,ce,m);UK(j,mt);break e}}j=j.return}while(j!==null)}ZY(w)}catch(Zt){m=Zt,ys===w&&w!==null&&(ys=w=w.return);continue}break}while(!0)}function YY(){var d=HP.current;return HP.current=VP,d===null?VP:d}function a6(){($s===0||$s===3||$s===2)&&($s=4),Qs===null||(M0&268435455)===0&&(qP&268435455)===0||Qp(Qs,Eo)}function QP(d,m){var w=fr;fr|=2;var k=YY();(Qs!==d||Eo!==m)&&(cf=null,O0(d,m));do try{fTe();break}catch(R){KY(d,R)}while(!0);if(xD(),fr=w,HP.current=k,ys!==null)throw Error(n(261));return Qs=null,Eo=0,$s}function fTe(){for(;ys!==null;)XY(ys)}function pTe(){for(;ys!==null&&!Ct();)XY(ys)}function XY(d){var m=eX(d.alternate,d,Bl);d.memoizedProps=d.pendingProps,m===null?ZY(d):ys=m,JD.current=null}function ZY(d){var m=d;do{var w=m.alternate;if(d=m.return,(m.flags&32768)===0){if(w=oTe(w,m,Bl),w!==null){ys=w;return}}else{if(w=aTe(w,m),w!==null){w.flags&=32767,ys=w;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{$s=6,ys=null;return}}if(m=m.sibling,m!==null){ys=m;return}ys=m=d}while(m!==null);$s===0&&($s=5)}function L0(d,m,w){var k=sr,R=Mc.transition;try{Mc.transition=null,sr=1,mTe(d,m,w,k)}finally{Mc.transition=R,sr=k}return null}function mTe(d,m,w,k){do o_();while(Zp!==null);if((fr&6)!==0)throw Error(n(327));w=d.finishedWork;var R=d.finishedLanes;if(w===null)return null;if(d.finishedWork=null,d.finishedLanes=0,w===d.current)throw Error(n(177));d.callbackNode=null,d.callbackPriority=0;var j=w.lanes|w.childLanes;if(qL(d,j),d===Qs&&(ys=Qs=null,Eo=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||YP||(YP=!0,tX(vi,function(){return o_(),null})),j=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||j){j=Mc.transition,Mc.transition=null;var K=sr;sr=1;var ce=fr;fr|=4,JD.current=null,cTe(d,w),zY(w,d),LSe(aD),Jd=!!oD,aD=oD=null,d.current=w,uTe(w),ct(),fr=ce,sr=K,Mc.transition=j}else d.current=w;if(YP&&(YP=!1,Zp=d,XP=R),j=d.pendingLanes,j===0&&(Xp=null),Lp(w.stateNode),Qa(d,ut()),m!==null)for(k=d.onRecoverableError,w=0;w<m.length;w++)R=m[w],k(R.value,{componentStack:R.stack,digest:R.digest});if(KP)throw KP=!1,d=t6,t6=null,d;return(XP&1)!==0&&d.tag!==0&&o_(),j=d.pendingLanes,(j&1)!==0?d===n6?mE++:(mE=0,n6=d):mE=0,Hp(),null}function o_(){if(Zp!==null){var d=Rh(XP),m=Mc.transition,w=sr;try{if(Mc.transition=null,sr=16>d?16:d,Zp===null)var k=!1;else{if(d=Zp,Zp=null,XP=0,(fr&6)!==0)throw Error(n(331));var R=fr;for(fr|=4,$t=d.current;$t!==null;){var j=$t,K=j.child;if(($t.flags&16)!==0){var ce=j.deletions;if(ce!==null){for(var he=0;he<ce.length;he++){var $e=ce[he];for($t=$e;$t!==null;){var at=$t;switch(at.tag){case 0:case 11:case 15:dE(8,at,j)}var ht=at.child;if(ht!==null)ht.return=at,$t=ht;else for(;$t!==null;){at=$t;var it=at.sibling,Nt=at.return;if(DY(at),at===$e){$t=null;break}if(it!==null){it.return=Nt,$t=it;break}$t=Nt}}}var Gt=j.alternate;if(Gt!==null){var Yt=Gt.child;if(Yt!==null){Gt.child=null;do{var as=Yt.sibling;Yt.sibling=null,Yt=as}while(Yt!==null)}}$t=j}}if((j.subtreeFlags&2064)!==0&&K!==null)K.return=j,$t=K;else e:for(;$t!==null;){if(j=$t,(j.flags&2048)!==0)switch(j.tag){case 0:case 11:case 15:dE(9,j,j.return)}var be=j.sibling;if(be!==null){be.return=j.return,$t=be;break e}$t=j.return}}var me=d.current;for($t=me;$t!==null;){K=$t;var Me=K.child;if((K.subtreeFlags&2064)!==0&&Me!==null)Me.return=K,$t=Me;else e:for(K=me;$t!==null;){if(ce=$t,(ce.flags&2048)!==0)try{switch(ce.tag){case 0:case 11:case 15:WP(9,ce)}}catch(Zt){Ui(ce,ce.return,Zt)}if(ce===K){$t=null;break e}var mt=ce.sibling;if(mt!==null){mt.return=ce.return,$t=mt;break e}$t=ce.return}}if(fr=R,Hp(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(jl,d)}catch{}k=!0}return k}finally{sr=w,Mc.transition=m}}return!1}function JY(d,m,w){m=n_(w,m),m=gY(d,m,1),d=Kp(d,m,1),m=Ea(),d!==null&&(x0(d,1,m),Qa(d,m))}function Ui(d,m,w){if(d.tag===3)JY(d,d,w);else for(;m!==null;){if(m.tag===3){JY(m,d,w);break}else if(m.tag===1){var k=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(Xp===null||!Xp.has(k))){d=n_(w,d),d=yY(m,d,1),m=Kp(m,d,1),d=Ea(),m!==null&&(x0(m,1,d),Qa(m,d));break}}m=m.return}}function gTe(d,m,w){var k=d.pingCache;k!==null&&k.delete(m),m=Ea(),d.pingedLanes|=d.suspendedLanes&w,Qs===d&&(Eo&w)===w&&($s===4||$s===3&&(Eo&130023424)===Eo&&500>ut()-e6?O0(d,0):QD|=w),Qa(d,m)}function QY(d,m){m===0&&((d.mode&1)===0?m=1:(m=Dp,Dp<<=1,(Dp&130023424)===0&&(Dp=4194304)));var w=Ea();d=of(d,m),d!==null&&(x0(d,m,w),Qa(d,w))}function yTe(d){var m=d.memoizedState,w=0;m!==null&&(w=m.retryLane),QY(d,w)}function vTe(d,m){var w=0;switch(d.tag){case 13:var k=d.stateNode,R=d.memoizedState;R!==null&&(w=R.retryLane);break;case 19:k=d.stateNode;break;default:throw Error(n(314))}k!==null&&k.delete(m),QY(d,w)}var eX;eX=function(d,m,w){if(d!==null)if(d.memoizedProps!==m.pendingProps||Ya.current)Za=!0;else{if((d.lanes&w)===0&&(m.flags&128)===0)return Za=!1,sTe(d,m,w);Za=(d.flags&131072)!==0}else Za=!1,_i&&(m.flags&1048576)!==0&&NK(m,IP,m.index);switch(m.lanes=0,m.tag){case 2:var k=m.type;UP(d,m),d=m.pendingProps;var R=Kv(m,Vo.current);e_(m,w),R=RD(null,m,k,d,R,w);var j=MD();return m.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Xa(k)?(j=!0,TP(m)):j=!1,m.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,SD(m),R.updater=zP,m.stateNode=R,R._reactInternals=m,$D(m,k,d,w),m=GD(null,m,k,!0,j,w)):(m.tag=0,_i&&j&&pD(m),ba(null,m,R,w),m=m.child),m;case 16:k=m.elementType;e:{switch(UP(d,m),d=m.pendingProps,R=k._init,k=R(k._payload),m.type=k,R=m.tag=xTe(k),d=Au(k,d),R){case 0:m=zD(null,m,k,d,w);break e;case 1:m=kY(null,m,k,d,w);break e;case 11:m=wY(null,m,k,d,w);break e;case 14:m=bY(null,m,k,Au(k.type,d),w);break e}throw Error(n(306,k,""))}return m;case 0:return k=m.type,R=m.pendingProps,R=m.elementType===k?R:Au(k,R),zD(d,m,k,R,w);case 1:return k=m.type,R=m.pendingProps,R=m.elementType===k?R:Au(k,R),kY(d,m,k,R,w);case 3:e:{if(AY(m),d===null)throw Error(n(387));k=m.pendingProps,j=m.memoizedState,R=j.element,GK(d,m),OP(m,k,null,w);var K=m.memoizedState;if(k=K.element,j.isDehydrated)if(j={element:k,isDehydrated:!1,cache:K.cache,pendingSuspenseBoundaries:K.pendingSuspenseBoundaries,transitions:K.transitions},m.updateQueue.baseState=j,m.memoizedState=j,m.flags&256){R=n_(Error(n(423)),m),m=IY(d,m,k,w,R);break e}else if(k!==R){R=n_(Error(n(424)),m),m=IY(d,m,k,w,R);break e}else for(Ul=Up(m.stateNode.containerInfo.firstChild),Gl=m,_i=!0,ku=null,w=VK(m,null,k,w),m.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(Zv(),k===R){m=lf(d,m,w);break e}ba(d,m,k,w)}m=m.child}return m;case 5:return WK(m),d===null&&yD(m),k=m.type,R=m.pendingProps,j=d!==null?d.memoizedProps:null,K=R.children,lD(k,R)?K=null:j!==null&&lD(k,j)&&(m.flags|=32),TY(d,m),ba(d,m,K,w),m.child;case 6:return d===null&&yD(m),null;case 13:return PY(d,m,w);case 4:return TD(m,m.stateNode.containerInfo),k=m.pendingProps,d===null?m.child=Jv(m,null,k,w):ba(d,m,k,w),m.child;case 11:return k=m.type,R=m.pendingProps,R=m.elementType===k?R:Au(k,R),wY(d,m,k,R,w);case 7:return ba(d,m,m.pendingProps,w),m.child;case 8:return ba(d,m,m.pendingProps.children,w),m.child;case 12:return ba(d,m,m.pendingProps.children,w),m.child;case 10:e:{if(k=m.type._context,R=m.pendingProps,j=m.memoizedProps,K=R.value,oi(RP,k._currentValue),k._currentValue=K,j!==null)if(Tu(j.value,K)){if(j.children===R.children&&!Ya.current){m=lf(d,m,w);break e}}else for(j=m.child,j!==null&&(j.return=m);j!==null;){var ce=j.dependencies;if(ce!==null){K=j.child;for(var he=ce.firstContext;he!==null;){if(he.context===k){if(j.tag===1){he=af(-1,w&-w),he.tag=2;var $e=j.updateQueue;if($e!==null){$e=$e.shared;var at=$e.pending;at===null?he.next=he:(he.next=at.next,at.next=he),$e.pending=he}}j.lanes|=w,he=j.alternate,he!==null&&(he.lanes|=w),bD(j.return,w,m),ce.lanes|=w;break}he=he.next}}else if(j.tag===10)K=j.type===m.type?null:j.child;else if(j.tag===18){if(K=j.return,K===null)throw Error(n(341));K.lanes|=w,ce=K.alternate,ce!==null&&(ce.lanes|=w),bD(K,w,m),K=j.sibling}else K=j.child;if(K!==null)K.return=j;else for(K=j;K!==null;){if(K===m){K=null;break}if(j=K.sibling,j!==null){j.return=K.return,K=j;break}K=K.return}j=K}ba(d,m,R.children,w),m=m.child}return m;case 9:return R=m.type,k=m.pendingProps.children,e_(m,w),R=Cc(R),k=k(R),m.flags|=1,ba(d,m,k,w),m.child;case 14:return k=m.type,R=Au(k,m.pendingProps),R=Au(k.type,R),bY(d,m,k,R,w);case 15:return EY(d,m,m.type,m.pendingProps,w);case 17:return k=m.type,R=m.pendingProps,R=m.elementType===k?R:Au(k,R),UP(d,m),m.tag=1,Xa(k)?(d=!0,TP(m)):d=!1,e_(m,w),pY(m,k,R),$D(m,k,R,w),GD(null,m,k,!0,d,w);case 19:return RY(d,m,w);case 22:return SY(d,m,w)}throw Error(n(156,m.tag))};function tX(d,m){return lt(d,m)}function _Te(d,m,w,k){this.tag=d,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(d,m,w,k){return new _Te(d,m,w,k)}function l6(d){return d=d.prototype,!(!d||!d.isReactComponent)}function xTe(d){if(typeof d=="function")return l6(d)?1:0;if(d!=null){if(d=d.$$typeof,d===U)return 11;if(d===ke)return 14}return 2}function em(d,m){var w=d.alternate;return w===null?(w=Nc(d.tag,m,d.key,d.mode),w.elementType=d.elementType,w.type=d.type,w.stateNode=d.stateNode,w.alternate=d,d.alternate=w):(w.pendingProps=m,w.type=d.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=d.flags&14680064,w.childLanes=d.childLanes,w.lanes=d.lanes,w.child=d.child,w.memoizedProps=d.memoizedProps,w.memoizedState=d.memoizedState,w.updateQueue=d.updateQueue,m=d.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=d.sibling,w.index=d.index,w.ref=d.ref,w}function eC(d,m,w,k,R,j){var K=2;if(k=d,typeof d=="function")l6(d)&&(K=1);else if(typeof d=="string")K=5;else e:switch(d){case C:return D0(w.children,R,j,m);case M:K=8,R|=8;break;case O:return d=Nc(12,w,m,R|2),d.elementType=O,d.lanes=j,d;case G:return d=Nc(13,w,m,R),d.elementType=G,d.lanes=j,d;case de:return d=Nc(19,w,m,R),d.elementType=de,d.lanes=j,d;case Ne:return tC(w,R,j,m);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case D:K=10;break e;case V:K=9;break e;case U:K=11;break e;case ke:K=14;break e;case Ue:K=16,k=null;break e}throw Error(n(130,d==null?d:typeof d,""))}return m=Nc(K,w,m,R),m.elementType=d,m.type=k,m.lanes=j,m}function D0(d,m,w,k){return d=Nc(7,d,k,m),d.lanes=w,d}function tC(d,m,w,k){return d=Nc(22,d,k,m),d.elementType=Ne,d.lanes=w,d.stateNode={isHidden:!1},d}function c6(d,m,w){return d=Nc(6,d,null,m),d.lanes=w,d}function u6(d,m,w){return m=Nc(4,d.children!==null?d.children:[],d.key,m),m.lanes=w,m.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},m}function wTe(d,m,w,k,R){this.tag=m,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jb(0),this.expirationTimes=jb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jb(0),this.identifierPrefix=k,this.onRecoverableError=R,this.mutableSourceEagerHydrationData=null}function h6(d,m,w,k,R,j,K,ce,he){return d=new wTe(d,m,w,ce,he),m===1?(m=1,j===!0&&(m|=8)):m=0,j=Nc(3,null,null,m),d.current=j,j.stateNode=d,j.memoizedState={element:k,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},SD(j),d}function bTe(d,m,w){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:k==null?null:""+k,children:d,containerInfo:m,implementation:w}}function nX(d){if(!d)return Wp;d=d._reactInternals;e:{if(oe(d)!==d||d.tag!==1)throw Error(n(170));var m=d;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Xa(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(n(171))}if(d.tag===1){var w=d.type;if(Xa(w))return CK(d,w,m)}return m}function rX(d,m,w,k,R,j,K,ce,he){return d=h6(w,k,!0,d,R,j,K,ce,he),d.context=nX(null),w=d.current,k=Ea(),R=Jp(w),j=af(k,R),j.callback=m??null,Kp(w,j,R),d.current.lanes=R,x0(d,R,k),Qa(d,k),d}function nC(d,m,w,k){var R=m.current,j=Ea(),K=Jp(R);return w=nX(w),m.context===null?m.context=w:m.pendingContext=w,m=af(j,K),m.payload={element:d},k=k===void 0?null:k,k!==null&&(m.callback=k),d=Kp(R,m,K),d!==null&&(Cu(d,R,K,j),NP(d,R,K)),K}function rC(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return d.child.stateNode;default:return d.child.stateNode}}function iX(d,m){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var w=d.retryLane;d.retryLane=w!==0&&w<m?w:m}}function d6(d,m){iX(d,m),(d=d.alternate)&&iX(d,m)}function ETe(){return null}var sX=typeof reportError=="function"?reportError:function(d){console.error(d)};function f6(d){this._internalRoot=d}iC.prototype.render=f6.prototype.render=function(d){var m=this._internalRoot;if(m===null)throw Error(n(409));nC(d,m,null,null)},iC.prototype.unmount=f6.prototype.unmount=function(){var d=this._internalRoot;if(d!==null){this._internalRoot=null;var m=d.containerInfo;N0(function(){nC(null,d,null,null)}),m[tf]=null}};function iC(d){this._internalRoot=d}iC.prototype.unstable_scheduleHydration=function(d){if(d){var m=zb();d={blockedOn:null,target:d,priority:m};for(var w=0;w<$l.length&&m!==0&&m<$l[w].priority;w++);$l.splice(w,0,d),w===0&&Mv(d)}};function p6(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)}function sC(d){return!(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11&&(d.nodeType!==8||d.nodeValue!==" react-mount-point-unstable "))}function oX(){}function STe(d,m,w,k,R){if(R){if(typeof k=="function"){var j=k;k=function(){var $e=rC(K);j.call($e)}}var K=rX(m,k,d,0,null,!1,!1,"",oX);return d._reactRootContainer=K,d[tf]=K.current,Qb(d.nodeType===8?d.parentNode:d),N0(),K}for(;R=d.lastChild;)d.removeChild(R);if(typeof k=="function"){var ce=k;k=function(){var $e=rC(he);ce.call($e)}}var he=h6(d,0,!1,null,null,!1,!1,"",oX);return d._reactRootContainer=he,d[tf]=he.current,Qb(d.nodeType===8?d.parentNode:d),N0(function(){nC(m,he,w,k)}),he}function oC(d,m,w,k,R){var j=w._reactRootContainer;if(j){var K=j;if(typeof R=="function"){var ce=R;R=function(){var he=rC(K);ce.call(he)}}nC(m,K,d,R)}else K=STe(w,m,d,R,k);return rC(K)}Fb=function(d){switch(d.tag){case 3:var m=d.stateNode;if(m.current.memoizedState.isDehydrated){var w=Er(m.pendingLanes);w!==0&&($b(m,w|1),Qa(m,ut()),(fr&6)===0&&(s_=ut()+500,Hp()))}break;case 13:N0(function(){var k=of(d,1);if(k!==null){var R=Ea();Cu(k,d,1,R)}}),d6(d,1)}},Cv=function(d){if(d.tag===13){var m=of(d,134217728);if(m!==null){var w=Ea();Cu(m,d,134217728,w)}d6(d,134217728)}},Vb=function(d){if(d.tag===13){var m=Jp(d),w=of(d,m);if(w!==null){var k=Ea();Cu(w,d,m,k)}d6(d,m)}},zb=function(){return sr},Gb=function(d,m){var w=sr;try{return sr=d,m()}finally{sr=w}},sn=function(d,m,w){switch(m){case"input":if(dt(d,w),m=w.name,w.type==="radio"&&m!=null){for(w=d;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+m)+'][type="radio"]'),m=0;m<w.length;m++){var k=w[m];if(k!==d&&k.form===d.form){var R=EP(k);if(!R)throw Error(n(90));Ye(k),dt(k,R)}}}break;case"textarea":Ai(d,w);break;case"select":m=w.value,m!=null&&ei(d,!!w.multiple,m,!1)}},ee=s6,ge=N0;var TTe={usingClientEntryPoint:!1,Events:[nE,Hv,EP,ae,Ve,s6]},gE={findFiberByHostInstance:T0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kTe={bundleType:gE.bundleType,version:gE.version,rendererPackageName:gE.rendererPackageName,rendererConfig:gE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(d){return d=Oe(d),d===null?null:d.stateNode},findFiberByHostInstance:gE.findFiberByHostInstance||ETe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aC.isDisabled&&aC.supportsFiber)try{jl=aC.inject(kTe),ss=aC}catch{}}return el.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TTe,el.createPortal=function(d,m){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p6(m))throw Error(n(200));return bTe(d,m,null,w)},el.createRoot=function(d,m){if(!p6(d))throw Error(n(299));var w=!1,k="",R=sX;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(k=m.identifierPrefix),m.onRecoverableError!==void 0&&(R=m.onRecoverableError)),m=h6(d,1,!1,null,null,w,!1,k,R),d[tf]=m.current,Qb(d.nodeType===8?d.parentNode:d),new f6(m)},el.findDOMNode=function(d){if(d==null)return null;if(d.nodeType===1)return d;var m=d._reactInternals;if(m===void 0)throw typeof d.render=="function"?Error(n(188)):(d=Object.keys(d).join(","),Error(n(268,d)));return d=Oe(m),d=d===null?null:d.stateNode,d},el.flushSync=function(d){return N0(d)},el.hydrate=function(d,m,w){if(!sC(m))throw Error(n(200));return oC(null,d,m,!0,w)},el.hydrateRoot=function(d,m,w){if(!p6(d))throw Error(n(405));var k=w!=null&&w.hydratedSources||null,R=!1,j="",K=sX;if(w!=null&&(w.unstable_strictMode===!0&&(R=!0),w.identifierPrefix!==void 0&&(j=w.identifierPrefix),w.onRecoverableError!==void 0&&(K=w.onRecoverableError)),m=rX(m,null,d,1,w??null,R,!1,j,K),d[tf]=m.current,Qb(d),k)for(d=0;d<k.length;d++)w=k[d],R=w._getVersion,R=R(w._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[w,R]:m.mutableSourceEagerHydrationData.push(w,R);return new iC(m)},el.render=function(d,m,w){if(!sC(m))throw Error(n(200));return oC(null,d,m,!1,w)},el.unmountComponentAtNode=function(d){if(!sC(d))throw Error(n(40));return d._reactRootContainer?(N0(function(){oC(null,null,d,!1,function(){d._reactRootContainer=null,d[tf]=null})}),!0):!1},el.unstable_batchedUpdates=s6,el.unstable_renderSubtreeIntoContainer=function(d,m,w,k){if(!sC(w))throw Error(n(200));if(d==null||d._reactInternals===void 0)throw Error(n(38));return oC(d,m,w,!1,k)},el.version="18.3.1-next-f1338f8080-20240426",el}var gX;function DTe(){if(gX)return v6.exports;gX=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),v6.exports=LTe(),v6.exports}var yX;function jTe(){if(yX)return lC;yX=1;var t=DTe();return lC.createRoot=t.createRoot,lC.hydrateRoot=t.hydrateRoot,lC}var $Te=jTe();const FTe=Kz($Te);var Y=$A();const VTe=Kz(Y),As={ADD:"add",REMOVE:"remove"},Jw={PROPERTYCHANGE:"propertychange"},wn={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class FA{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function zTe(t,e,n){let r,i;n=n||ep;let s=0,o=t.length,a=!1;for(;s<o;)r=s+(o-s>>1),i=+n(t[r],e),i<0?s=r+1:(o=r,a=!i);return a?s:~s}function ep(t,e){return t>e?1:t<e?-1:0}function GTe(t,e){return t<e?1:t>e?-1:0}function T5(t,e,n){if(t[0]<=e)return 0;const r=t.length;if(e<=t[r-1])return r-1;if(typeof n=="function"){for(let i=1;i<r;++i){const s=t[i];if(s===e)return i;if(s<e)return n(e,t[i-1],s)>0?i-1:i}return r-1}if(n>0){for(let i=1;i<r;++i)if(t[i]<e)return i-1;return r-1}if(n<0){for(let i=1;i<r;++i)if(t[i]<=e)return i;return r-1}for(let i=1;i<r;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return r-1}function UTe(t,e,n){for(;e<n;){const r=t[e];t[e]=t[n],t[n]=r,++e,--n}}function xr(t,e){const n=Array.isArray(e)?e:[e],r=n.length;for(let i=0;i<r;i++)t[t.length]=n[i]}function Bd(t,e){const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function BTe(t,e,n){const r=e||ep;return t.every(function(i,s){if(s===0)return!0;const o=r(t[s-1],i);return!(o>0||o===0)})}function Lg(){return!0}function X2(){return!1}function hk(){}function Vae(t){let e,n,r;return function(){const i=Array.prototype.slice.call(arguments);return(!n||this!==r||!Bd(i,n))&&(r=this,n=i,e=t.apply(this,arguments)),e}}function zae(t){function e(){let n;try{n=t()}catch(r){return Promise.reject(r)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function ov(t){for(const e in t)delete t[e]}function b1(t){let e;for(e in t)return!1;return!e}class Tc{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}let VA=class extends FA{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const r=this.listeners_||(this.listeners_={}),i=r[e]||(r[e]=[]);i.includes(n)||i.push(n)}dispatchEvent(e){const n=typeof e=="string",r=n?e:e.type,i=this.listeners_&&this.listeners_[r];if(!i)return;const s=n?new Tc(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});r in o||(o[r]=0,a[r]=0),++o[r];let l;for(let c=0,u=i.length;c<u;++c)if("handleEvent"in i[c]?l=i[c].handleEvent(s):l=i[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[r]===0){let c=a[r];for(delete a[r];c--;)this.removeEventListener(r,hk);delete o[r]}return l}disposeInternal(){this.listeners_&&ov(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;const r=this.listeners_[e];if(!r)return;const i=r.indexOf(n);i!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(r[i]=hk,++this.pendingRemovals_[e]):(r.splice(i,1),r.length===0&&delete this.listeners_[e]))}};function Yn(t,e,n,r,i){if(i){const o=n;n=function(a){return t.removeEventListener(e,n),o.call(r??this,a)}}else r&&r!==t&&(n=n.bind(r));const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function N3(t,e,n,r){return Yn(t,e,n,r,!0)}function ni(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),ov(t))}class zA extends VA{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(wn.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=Yn(this,e[s],n);return i}return Yn(this,e,n)}onceInternal(e,n){let r;if(Array.isArray(e)){const i=e.length;r=new Array(i);for(let s=0;s<i;++s)r[s]=N3(this,e[s],n)}else r=N3(this,e,n);return n.ol_key=r,r}unInternal(e,n){const r=n.ol_key;if(r)MF(r);else if(Array.isArray(e))for(let i=0,s=e.length;i<s;++i)this.removeEventListener(e[i],n);else this.removeEventListener(e,n)}}zA.prototype.on;zA.prototype.once;zA.prototype.un;function MF(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)ni(t[e]);else ni(t)}function bn(){throw new Error("Unimplemented abstract method.")}let WTe=0;function Qt(t){return t.ol_uid||(t.ol_uid=String(++WTe))}class vX extends Tc{constructor(e,n,r){super(e),this.key=n,this.oldValue=r}}class Wd extends zA{constructor(e){super(),this.on,this.once,this.un,Qt(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let r;r=`change:${e}`,this.hasListener(r)&&this.dispatchEvent(new vX(r,e,n)),r=Jw.PROPERTYCHANGE,this.hasListener(r)&&this.dispatchEvent(new vX(r,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,r){const i=this.values_||(this.values_={});if(r)i[e]=n;else{const s=i[e];i[e]=n,s!==n&&this.notify(e,s)}}setProperties(e,n){for(const r in e)this.set(r,e[r],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const r=this.values_[e];delete this.values_[e],b1(this.values_)&&(this.values_=null),n||this.notify(e,r)}}}const _X={LENGTH:"length"};class cC extends Tc{constructor(e,n,r){super(e),this.element=n,this.index=r}}class Da extends Wd{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e??[],this.unique_)for(let r=1,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,r=e.length;n<r;++n)this.push(e[n]);return this}forEach(e){const n=this.array_;for(let r=0,i=n.length;r<i;++r)e(n[r],r,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(_X.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new cC(As.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){const n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){const n=this.array_;for(let r=0,i=n.length;r<i;++r)if(n[r]===e)return this.removeAt(r)}removeAt(e){if(e<0||e>=this.getLength())return;const n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new cC(As.REMOVE,n,e)),n}setAt(e,n){const r=this.getLength();if(e>=r){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);const i=this.array_[e];this.array_[e]=n,this.dispatchEvent(new cC(As.REMOVE,i,e)),this.dispatchEvent(new cC(As.ADD,n,e))}updateLength_(){this.set(_X.LENGTH,this.array_.length)}assertUnique_(e,n){const r=this.array_;for(let i=0,s=r.length;i<s;++i)if(r[i]===e&&i!==n)throw new Error("Duplicate item added to a unique collection")}}function ur(t,e){if(!t)throw new Error(e)}let yr=class Gae extends Wd{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const n=e;this.setGeometry(n)}else{const n=e;this.setProperties(n)}}clone(){const e=new Gae(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&e.setGeometry(n.clone());const r=this.getStyle();return r&&e.setStyle(r),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(ni(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Yn(e,wn.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?HTe(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function HTe(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(ur(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}const oo={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ka(t){const e=Wa();for(let n=0,r=t.length;n<r;++n)tT(e,t[n]);return e}function sh(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Uae(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function av(t,e,n){let r,i;return e<t[0]?r=t[0]-e:t[2]<e?r=e-t[2]:r=0,n<t[1]?i=t[1]-n:t[3]<n?i=n-t[3]:i=0,r*r+i*i}function E1(t,e){return Yz(t,e[0],e[1])}function Jm(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Yz(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function NF(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=e[0],a=e[1];let l=oo.UNKNOWN;return o<n?l=l|oo.LEFT:o>i&&(l=l|oo.RIGHT),a<r?l=l|oo.BELOW:a>s&&(l=l|oo.ABOVE),l===oo.UNKNOWN&&(l=oo.INTERSECTING),l}function Wa(){return[1/0,1/0,-1/0,-1/0]}function pp(t,e,n,r,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=r,i):[t,e,n,r]}function GA(t){return pp(1/0,1/0,-1/0,-1/0,t)}function eT(t,e){const n=t[0],r=t[1];return pp(n,r,n,r,e)}function Xz(t,e,n,r,i){const s=GA(i);return Bae(s,t,e,n,r)}function S1(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Zz(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function tT(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Bae(t,e,n,r,i){for(;n<r;n+=i)qTe(t,e[n],e[n+1]);return t}function qTe(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Jz(t,e){let n;return n=e(k5(t)),n||(n=e(A5(t)),n)||(n=e(I5(t)),n)||(n=e(lv(t)),n)?n:!1}function OF(t){let e=0;return Z2(t)||(e=Xn(t)*Ps(t)),e}function k5(t){return[t[0],t[1]]}function A5(t){return[t[2],t[1]]}function yh(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function KTe(t,e){let n;if(e==="bottom-left")n=k5(t);else if(e==="bottom-right")n=A5(t);else if(e==="top-left")n=lv(t);else if(e==="top-right")n=I5(t);else throw new Error("Invalid corner");return n}function O3(t,e,n,r,i){const[s,o,a,l,c,u,h,f]=Wae(t,e,n,r);return pp(Math.min(s,a,c,h),Math.min(o,l,u,f),Math.max(s,a,c,h),Math.max(o,l,u,f),i)}function Wae(t,e,n,r){const i=e*r[0]/2,s=e*r[1]/2,o=Math.cos(n),a=Math.sin(n),l=i*o,c=i*a,u=s*o,h=s*a,f=t[0],g=t[1];return[f-l+h,g-c-u,f-l-h,g-c+u,f+l-h,g+c+u,f+l+h,g+c-u,f-l+h,g-c-u]}function Ps(t){return t[3]-t[1]}function tp(t,e,n){const r=n||Wa();return oa(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):GA(r),r}function lv(t){return[t[0],t[3]]}function I5(t){return[t[2],t[3]]}function Xn(t){return t[2]-t[0]}function oa(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Z2(t){return t[2]<t[0]||t[3]<t[1]}function YTe(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function XTe(t,e,n){let r=!1;const i=NF(t,e),s=NF(t,n);if(i===oo.INTERSECTING||s===oo.INTERSECTING)r=!0;else{const o=t[0],a=t[1],l=t[2],c=t[3],u=e[0],h=e[1],f=n[0],g=n[1],y=(g-h)/(f-u);let _,b;s&oo.ABOVE&&!(i&oo.ABOVE)&&(_=f-(g-c)/y,r=_>=o&&_<=l),!r&&s&oo.RIGHT&&!(i&oo.RIGHT)&&(b=g-(f-l)*y,r=b>=a&&b<=c),!r&&s&oo.BELOW&&!(i&oo.BELOW)&&(_=f-(g-a)/y,r=_>=o&&_<=l),!r&&s&oo.LEFT&&!(i&oo.LEFT)&&(b=g-(f-o)*y,r=b>=a&&b<=c)}return r}function Hae(t,e){const n=e.getExtent(),r=yh(t);if(e.canWrapX()&&(r[0]<n[0]||r[0]>=n[2])){const i=Xn(n),o=Math.floor((r[0]-n[0])/i)*i;t[0]-=o,t[2]-=o}return t}function qae(t,e,n){if(e.canWrapX()){const r=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[r[0],t[1],r[2],t[3]]];Hae(t,e);const i=Xn(r);if(Xn(t)>i&&!n)return[[r[0],t[1],r[2],t[3]]];if(t[0]<r[0])return[[t[0]+i,t[1],r[2],t[3]],[r[0],t[1],t[2],t[3]]];if(t[2]>r[2])return[[t[0],t[1],r[2],t[3]],[r[0],t[1],t[2]-i,t[3]]]}return[t]}function ri(t,e,n){return Math.min(Math.max(t,e),n)}function ZTe(t,e,n,r,i,s){const o=i-n,a=s-r;if(o!==0||a!==0){const l=((t-n)*o+(e-r)*a)/(o*o+a*a);l>1?(n=i,r=s):l>0&&(n+=o*l,r+=a*l)}return np(t,e,n,r)}function np(t,e,n,r){const i=n-t,s=r-e;return i*i+s*s}function JTe(t){const e=t.length;for(let r=0;r<e;r++){let i=r,s=Math.abs(t[r][r]);for(let a=r+1;a<e;a++){const l=Math.abs(t[a][r]);l>s&&(s=l,i=a)}if(s===0)return null;const o=t[i];t[i]=t[r],t[r]=o;for(let a=r+1;a<e;a++){const l=-t[a][r]/t[r][r];for(let c=r;c<e+1;c++)r==c?t[a][c]=0:t[a][c]+=l*t[r][c]}}const n=new Array(e);for(let r=e-1;r>=0;r--){n[r]=t[r][e]/t[r][r];for(let i=r-1;i>=0;i--)t[i][e]-=t[i][r]*n[r]}return n}function xX(t){return t*180/Math.PI}function lu(t){return t*Math.PI/180}function vg(t,e){const n=t%e;return n*e<0?n+e:n}function ic(t,e,n){return t+n*(e-t)}function J2(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function L3(t,e){return Math.round(J2(t,e))}function uC(t,e){return Math.floor(J2(t,e))}function Qm(t,e){return Math.ceil(J2(t,e))}function LF(t,e,n){if(t>=e&&t<n)return t;const r=n-e;return((t-e)%r+r)%r+e}function _E(t,e,n){const r=""+t;let i=r.indexOf(".");return i=i===-1?r.length:i,i>e?r:new Array(1+e-i).join("0")+r}function Kae(t,e){const n=(""+t).split("."),r=(""+e).split(".");for(let i=0;i<Math.max(n.length,r.length);i++){const s=parseInt(n[i]||"0",10),o=parseInt(r[i]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}function QTe(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function Qz(t,e){const n=t[0],r=t[1],i=e[0],s=e[1],o=i[0],a=i[1],l=s[0],c=s[1],u=l-o,h=c-a,f=u===0&&h===0?0:(u*(n-o)+h*(r-a))/(u*u+h*h||0);let g,y;return f<=0?(g=o,y=a):f>=1?(g=l,y=c):(g=o+f*u,y=a+f*h),[g,y]}function Ia(t,e){let n=!0;for(let r=t.length-1;r>=0;--r)if(t[r]!=e[r]){n=!1;break}return n}function eG(t,e){const n=Math.cos(e),r=Math.sin(e),i=t[0]*n-t[1]*r,s=t[1]*n+t[0]*r;return t[0]=i,t[1]=s,t}function eke(t,e){return t[0]*=e,t[1]*=e,t}function Qw(t,e){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Tx(t,e){return Math.sqrt(Qw(t,e))}function tke(t,e){return Qw(t,Qz(t,e))}function Yae(t,e){if(e.canWrapX()){const n=Xn(e.getExtent()),r=Xae(t,e,n);r&&(t[0]-=r*n)}return t}function Xae(t,e,n){const r=e.getExtent();let i=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||Xn(r),i=Math.floor((t[0]-r[0])/n)),i}function Zae(...t){console.warn(...t)}const e2={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let P5=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||e2[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const UA=6378137,kx=Math.PI*UA,nke=[-kx,-kx,kx,kx],rke=[-180,-85,180,85],hC=UA*Math.log(Math.tan(Math.PI/2));class a_ extends P5{constructor(e){super({code:e,units:"m",extent:nke,global:!0,worldExtent:rke,getPointResolution:function(n,r){return n/Math.cosh(r[1]/UA)}})}}const wX=[new a_("EPSG:3857"),new a_("EPSG:102100"),new a_("EPSG:102113"),new a_("EPSG:900913"),new a_("http://www.opengis.net/def/crs/EPSG/0/3857"),new a_("http://www.opengis.net/gml/srs/epsg.xml#3857")];function ike(t,e,n,r){const i=t.length;n=n>1?n:2,r=r??n,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let s=0;s<i;s+=r){e[s]=kx*t[s]/180;let o=UA*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));o>hC?o=hC:o<-hC&&(o=-hC),e[s+1]=o}return e}function ske(t,e,n,r){const i=t.length;n=n>1?n:2,r=r??n,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let s=0;s<i;s+=r)e[s]=180*t[s]/kx,e[s+1]=360*Math.atan(Math.exp(t[s+1]/UA))/Math.PI-90;return e}const oke=6378137,bX=[-180,-90,180,90],ake=Math.PI*oke/180;class j0 extends P5{constructor(e,n){super({code:e,units:"degrees",extent:bX,axisOrientation:n,global:!0,metersPerUnit:ake,worldExtent:bX})}}const EX=[new j0("CRS:84"),new j0("EPSG:4326","neu"),new j0("urn:ogc:def:crs:OGC:1.3:CRS84"),new j0("urn:ogc:def:crs:OGC:2:84"),new j0("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new j0("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new j0("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let DF={};function QR(t){return DF[t]||DF[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function lke(t,e){DF[t]=e}let Zx={};function T1(t,e,n){const r=t.getCode(),i=e.getCode();r in Zx||(Zx[r]={}),Zx[r][i]=n}function eM(t,e){return t in Zx&&e in Zx[t]?Zx[t][e]:null}const D3=.9996,cu=.00669438,C5=cu*cu,R5=C5*cu,Oy=cu/(1-cu),SX=Math.sqrt(1-cu),t2=(1-SX)/(1+SX),Jae=t2*t2,tG=Jae*t2,nG=tG*t2,Qae=nG*t2,ele=1-cu/4-3*C5/64-5*R5/256,cke=3*cu/8+3*C5/32+45*R5/1024,uke=15*C5/256+45*R5/1024,hke=35*R5/3072,dke=3/2*t2-27/32*tG+269/512*Qae,fke=21/16*Jae-55/32*nG,pke=151/96*tG-417/128*Qae,mke=1097/512*nG,j3=6378137;function gke(t,e,n){const r=t-5e5,o=(n.north?e:e-1e7)/D3/(j3*ele),a=o+dke*Math.sin(2*o)+fke*Math.sin(4*o)+pke*Math.sin(6*o)+mke*Math.sin(8*o),l=Math.sin(a),c=l*l,u=Math.cos(a),h=l/u,f=h*h,g=f*f,y=1-cu*c,_=Math.sqrt(1-cu*c),b=j3/_,T=(1-cu)/y,A=Oy*u**2,I=A*A,P=r/(b*D3),N=P*P,L=N*P,C=L*P,M=C*P,O=M*P,D=a-h/T*(N/2-C/24*(5+3*f+10*A-4*I-9*Oy))+O/720*(61+90*f+298*A+45*g-252*Oy-3*I);let V=(P-L/6*(1+2*f+A)+M/120*(5-2*A+28*f-3*I+8*Oy+24*g))/u;return V=LF(V+lu(tle(n.number)),-Math.PI,Math.PI),[xX(V),xX(D)]}const TX=-80,kX=84,yke=-180,vke=180;function _ke(t,e,n){t=LF(t,yke,vke),e<TX?e=TX:e>kX&&(e=kX);const r=lu(e),i=Math.sin(r),s=Math.cos(r),o=i/s,a=o*o,l=a*a,c=lu(t),u=tle(n.number),h=lu(u),f=j3/Math.sqrt(1-cu*i**2),g=Oy*s**2,y=s*LF(c-h,-Math.PI,Math.PI),_=y*y,b=_*y,T=b*y,A=T*y,I=A*y,P=j3*(ele*r-cke*Math.sin(2*r)+uke*Math.sin(4*r)-hke*Math.sin(6*r)),N=D3*f*(y+b/6*(1-a+g)+A/120*(5-18*a+l+72*g-58*Oy))+5e5;let L=D3*(P+f*o*(_/2+T/24*(5-a+9*g+4*g**2)+I/720*(61-58*a+l+600*g-330*Oy)));return n.north||(L+=1e7),[N,L]}function tle(t){return(t-1)*6-180+3}const xke=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function nle(t){let e=0;for(const i of xke){const s=t.match(i);if(s){e=parseInt(s[1]);break}}if(!e)return null;let n=0,r=!1;return e>32700&&e<32761?n=e-32700:e>32600&&e<32661&&(r=!0,n=e-32600),n?{number:n,north:r}:null}function AX(t,e){return function(n,r,i,s){const o=n.length;i=i>1?i:2,s=s??i,r||(i>2?r=n.slice():r=new Array(o));for(let a=0;a<o;a+=s){const l=n[a],c=n[a+1],u=t(l,c,e);r[a]=u[0],r[a+1]=u[1]}return r}}function wke(t){return nle(t)?new P5({code:t,units:"m"}):null}function bke(t){const e=nle(t.getCode());return e?{forward:AX(_ke,e),inverse:AX(gke,e)}:null}const rG=63710088e-1;function jF(t,e,n){n=n||rG;const r=lu(t[1]),i=lu(e[1]),s=(i-r)/2,o=lu(e[0]-t[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(r)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function w6(t,e){let n=0;for(let r=0,i=t.length;r<i-1;++r)n+=jF(t[r],t[r+1],e);return n}function dk(t,e){e=e||{};const n=e.radius||rG,r=e.projection||"EPSG:3857",i=t.getType();i!=="GeometryCollection"&&(t=t.clone().transform(r,"EPSG:4326"));let s=0,o,a,l,c,u,h;switch(i){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{o=t.getCoordinates(),s=w6(o,n);break}case"MultiLineString":case"Polygon":{for(o=t.getCoordinates(),l=0,c=o.length;l<c;++l)s+=w6(o[l],n);break}case"MultiPolygon":{for(o=t.getCoordinates(),l=0,c=o.length;l<c;++l)for(a=o[l],u=0,h=a.length;u<h;++u)s+=w6(a[u],n);break}case"GeometryCollection":{const f=t.getGeometries();for(l=0,c=f.length;l<c;++l)s+=dk(f[l],e);break}default:throw new Error("Unsupported geometry type: "+i)}return s}function dC(t,e){let n=0;const r=t.length;let i=t[r-1][0],s=t[r-1][1];for(let o=0;o<r;o++){const a=t[o][0],l=t[o][1];n+=lu(a-i)*(2+Math.sin(lu(s))+Math.sin(lu(l))),i=a,s=l}return n*e*e/2}function $F(t,e){e=e||{};const n=e.radius||rG,r=e.projection||"EPSG:3857",i=t.getType();i!=="GeometryCollection"&&(t=t.clone().transform(r,"EPSG:4326"));let s=0,o,a,l,c,u,h;switch(i){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=t.getCoordinates(),s=Math.abs(dC(o[0],n)),l=1,c=o.length;l<c;++l)s-=Math.abs(dC(o[l],n));break}case"MultiPolygon":{for(o=t.getCoordinates(),l=0,c=o.length;l<c;++l)for(a=o[l],s+=Math.abs(dC(a[0],n)),u=1,h=a.length;u<h;++u)s-=Math.abs(dC(a[u],n));break}case"GeometryCollection":{const f=t.getGeometries();for(l=0,c=f.length;l<c;++l)s+=$F(f[l],e);break}default:throw new Error("Unsupported geometry type: "+i)}return s}const Eke=[bke],Ske=[wke];let FF=!0;function rle(t){FF=!1}function iG(t,e){if(e!==void 0){for(let n=0,r=t.length;n<r;++n)e[n]=t[n];e=e}else e=t.slice();return e}function $3(t){lke(t.getCode(),t),T1(t,t,iG)}function Tke(t){t.forEach($3)}function Qr(t){if(typeof t!="string")return t;const e=QR(t);if(e)return e;for(const n of Ske){const r=n(t);if(r)return r}return null}function F3(t,e,n,r){t=Qr(t);let i;const s=t.getPointResolutionFunc();if(s){if(i=s(e,n),r&&r!==t.getUnits()){const o=t.getMetersPerUnit();o&&(i=i*o/e2[r])}}else{const o=t.getUnits();if(o=="degrees"&&!r||r=="degrees")i=e;else{const a=oG(t,Qr("EPSG:4326"));if(!a&&o!=="degrees")i=e*t.getMetersPerUnit();else{let c=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];c=a(c,c,2);const u=jF(c.slice(0,2),c.slice(2,4)),h=jF(c.slice(4,6),c.slice(6,8));i=(u+h)/2}const l=r?e2[r]:t.getMetersPerUnit();l!==void 0&&(i/=l)}}return i}function VF(t){Tke(t),t.forEach(function(e){t.forEach(function(n){e!==n&&T1(e,n,iG)})})}function kke(t,e,n,r){t.forEach(function(i){e.forEach(function(s){T1(i,s,n),T1(s,i,r)})})}function sG(t,e){return t?typeof t=="string"?Qr(t):t:Qr(e)}function zF(t){return(function(e,n,r,i){const s=e.length;r=r!==void 0?r:2,i=i??r,n=n!==void 0?n:new Array(s);for(let o=0;o<s;o+=i){const a=t(e.slice(o,o+r)),l=a.length;for(let c=0,u=i;c<u;++c)n[o+c]=c>=l?e[o+c]:a[c]}return n})}function Ake(t,e,n,r){const i=Qr(t),s=Qr(e);T1(i,s,zF(n)),T1(s,i,zF(r))}function Ni(t,e){return rle(),Q2(t,"EPSG:4326","EPSG:3857")}function Fn(t,e){const n=Q2(t,"EPSG:3857","EPSG:4326"),r=n[0];return(r<-180||r>180)&&(n[0]=vg(r+180,360)-180),n}function t1(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||oG(t,e)===iG)&&n}function oG(t,e){const n=t.getCode(),r=e.getCode();let i=eM(n,r);if(i)return i;let s=null,o=null;for(const l of Eke)s||(s=l(t)),o||(o=l(e));if(!s&&!o)return null;const a="EPSG:4326";if(o)if(s)i=b6(s.inverse,o.forward);else{const l=eM(n,a);l&&(i=b6(l,o.forward))}else{const l=eM(a,r);l&&(i=b6(s.inverse,l))}return i&&($3(t),$3(e),T1(t,e,i)),i}function b6(t,e){return function(n,r,i,s){return r=t(n,r,i,s),e(r,r,i,s)}}function fk(t,e){const n=Qr(t),r=Qr(e);return oG(n,r)}function Q2(t,e,n){const r=fk(e,n);if(!r){const i=Qr(e).getCode(),s=Qr(n).getCode();throw new Error(`No transform available between ${i} and ${s}`)}return r(t,void 0,t.length)}function k1(t,e){return t}function Li(t,e){return FF&&!Ia(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(FF=!1,Zae("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function aG(t,e){return t}function oh(t,e){return t}function IX(t,e,n){return function(r){let i,s;if(t.canWrapX()){const o=t.getExtent(),a=Xn(o);r=r.slice(0),s=Xae(r,t,a),s&&(r[0]=r[0]-s*a),r[0]=ri(r[0],o[0],o[2]),r[1]=ri(r[1],o[1],o[3]),i=n(r)}else i=n(r);return s&&e.canWrapX()&&(i[0]+=s*Xn(e.getExtent())),i}}function Ike(){VF(wX),VF(EX),kke(EX,wX,ike,ske)}Ike();const Pke=new Array(6);function Ws(){return[1,0,0,1,0,0]}function ile(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],u=e[2],h=e[3],f=e[4],g=e[5];return t[0]=n*l+i*c,t[1]=r*l+s*c,t[2]=n*u+i*h,t[3]=r*u+s*h,t[4]=n*f+i*g+o,t[5]=r*f+s*g+a,t}function Cke(t,e,n,r,i,s,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t}function sle(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Zi(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function Rke(t,e,n){return ile(t,Cke(Pke,1,0,0,1,e,n))}function mu(t,e,n,r,i,s,o,a){const l=Math.sin(s),c=Math.cos(s);return t[0]=r*c,t[1]=i*l,t[2]=-r*l,t[3]=i*c,t[4]=o*r*c-a*r*l+e,t[5]=o*i*l+a*i*c+n,t}function pk(t,e){const n=Mke(e);ur(n!==0,"Transformation matrix cannot be inverted");const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return t[0]=o/n,t[1]=-i/n,t[2]=-s/n,t[3]=r/n,t[4]=(s*l-o*a)/n,t[5]=-(r*l-i*a)/n,t}function Mke(t){return t[0]*t[3]-t[1]*t[2]}const Nke=[1e5,1e5,1e5,1e5,2,2];function Oke(t){return"matrix("+t.join(", ")+")"}function GF(t){return t.substring(7,t.length-1).split(",").map(parseFloat)}function Lke(t,e){const n=GF(t),r=GF(e);for(let i=0;i<6;++i)if(Math.round((n[i]-r[i])*Nke[i])!==0)return!1;return!0}function xd(t,e,n,r,i,s,o){s=s||[],o=o||2;let a=0;for(let l=e;l<n;l+=r){const c=t[l],u=t[l+1];s[a++]=i[0]*c+i[2]*u+i[4],s[a++]=i[1]*c+i[3]*u+i[5];for(let h=2;h<o;h++)s[a++]=t[l+h]}return s&&s.length!=a&&(s.length=a),s}function lG(t,e,n,r,i,s,o){o=o||[];const a=Math.cos(i),l=Math.sin(i),c=s[0],u=s[1];let h=0;for(let f=e;f<n;f+=r){const g=t[f]-c,y=t[f+1]-u;o[h++]=c+g*a-y*l,o[h++]=u+g*l+y*a;for(let _=f+2;_<f+r;++_)o[h++]=t[_]}return o&&o.length!=h&&(o.length=h),o}function Dke(t,e,n,r,i,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=e;h<n;h+=r){const f=t[h]-l,g=t[h+1]-c;a[u++]=l+i*f,a[u++]=c+s*g;for(let y=h+2;y<h+r;++y)a[u++]=t[y]}return a&&a.length!=u&&(a.length=u),a}function jke(t,e,n,r,i,s,o){o=o||[];let a=0;for(let l=e;l<n;l+=r){o[a++]=t[l]+i,o[a++]=t[l+1]+s;for(let c=l+2;c<l+r;++c)o[a++]=t[c]}return o&&o.length!=a&&(o.length=a),o}const PX=Ws(),$ke=[NaN,NaN];class ole extends Wd{constructor(){super(),this.extent_=Wa(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Vae((e,n,r)=>{if(!r)return this.getSimplifiedGeometry(n);const i=this.clone();return i.applyTransform(r),i.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return bn()}closestPointXY(e,n,r,i){return bn()}containsXY(e,n){return this.closestPointXY(e,n,$ke,Number.MIN_VALUE)===0}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return bn()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&GA(n),this.extentRevision_=this.getRevision()}return YTe(this.extent_,e)}rotate(e,n){bn()}scale(e,n,r){bn()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return bn()}getType(){return bn()}applyTransform(e){bn()}intersectsExtent(e){return bn()}translate(e,n){bn()}transform(e,n){const r=Qr(e),i=r.getUnits()=="tile-pixels"?function(s,o,a){const l=r.getExtent(),c=r.getWorldExtent(),u=Ps(c)/Ps(l);mu(PX,c[0],c[3],u,-u,0,0,0);const h=xd(s,0,s.length,a,PX,o),f=fk(r,n);return f?f(h,h,a):h}:fk(r,n);return this.applyTransform(i),this}}class s0 extends ole{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Xz(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return bn()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=V3(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){bn()}setLayout(e,n,r){let i;if(e)i=V3(e);else{for(let s=0;s<r;++s){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}i=n.length,e=cv(i)}this.layout=e,this.stride=i}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,n){const r=this.getFlatCoordinates();if(r){const i=this.getStride();lG(r,0,r.length,i,e,n,r),this.changed()}}scale(e,n,r){n===void 0&&(n=e),r||(r=yh(this.getExtent()));const i=this.getFlatCoordinates();if(i){const s=this.getStride();Dke(i,0,i.length,s,e,n,r,i),this.changed()}}translate(e,n){const r=this.getFlatCoordinates();if(r){const i=this.getStride();jke(r,0,r.length,i,e,n,r),this.changed()}}}function cv(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function V3(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function Fke(t,e,n){const r=t.getFlatCoordinates();if(!r)return null;const i=t.getStride();return xd(r,0,r.length,i,e,n)}function CX(t,e,n,r,i,s,o){const a=t[e],l=t[e+1],c=t[n]-a,u=t[n+1]-l;let h;if(c===0&&u===0)h=e;else{const f=((i-a)*c+(s-l)*u)/(c*c+u*u);if(f>1)h=n;else if(f>0){for(let g=0;g<r;++g)o[g]=ic(t[e+g],t[n+g],f);o.length=r;return}else h=e}for(let f=0;f<r;++f)o[f]=t[h+f];o.length=r}function cG(t,e,n,r,i){let s=t[e],o=t[e+1];for(e+=r;e<n;e+=r){const a=t[e],l=t[e+1],c=np(s,o,a,l);c>i&&(i=c),s=a,o=l}return i}function uG(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];i=cG(t,e,a,r,i),e=a}return i}function Vke(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];i=uG(t,e,a,r,i),e=a[a.length-1]}return i}function hG(t,e,n,r,i,s,o,a,l,c,u){if(e==n)return c;let h,f;if(i===0){if(f=np(o,a,t[e],t[e+1]),f<c){for(h=0;h<r;++h)l[h]=t[e+h];return l.length=r,f}return c}u=u||[NaN,NaN];let g=e+r;for(;g<n;)if(CX(t,g-r,g,r,o,a,u),f=np(o,a,u[0],u[1]),f<c){for(c=f,h=0;h<r;++h)l[h]=u[h];l.length=r,g+=r}else g+=r*Math.max((Math.sqrt(f)-Math.sqrt(c))/i|0,1);if(s&&(CX(t,n-r,e,r,o,a,u),f=np(o,a,u[0],u[1]),f<c)){for(c=f,h=0;h<r;++h)l[h]=u[h];l.length=r}return c}function dG(t,e,n,r,i,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const g=n[h];c=hG(t,e,g,r,i,s,o,a,l,c,u),e=g}return c}function zke(t,e,n,r,i,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,f=n.length;h<f;++h){const g=n[h];c=dG(t,e,g,r,i,s,o,a,l,c,u),e=g[g.length-1]}return c}function ale(t,e,n,r){for(let i=0,s=n.length;i<s;++i)t[e++]=n[i];return e}function M5(t,e,n,r){for(let i=0,s=n.length;i<s;++i){const o=n[i];for(let a=0;a<r;++a)t[e++]=o[a]}return e}function BA(t,e,n,r,i){i=i||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=M5(t,e,n[o],r);i[s++]=l,e=l}return i.length=s,i}function lle(t,e,n,r,i){i=i||[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=BA(t,e,n[o],r,i[s]);l.length===0&&(l[0]=e),i[s++]=l,e=l[l.length-1]}return i.length=s,i}function eg(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let o=e;o<n;o+=r)i[s++]=t.slice(o,o+r);return i.length=s,i}function mk(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];i[s++]=eg(t,e,l,r,i[s]),e=l}return i.length=s,i}function UF(t,e,n,r,i){i=i!==void 0?i:[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o];i[s++]=l.length===1&&l[0]===e?[]:mk(t,e,l,r,i[s]),e=l[l.length-1]}return i.length=s,i}function z3(t,e,n,r,i,s,o){let a,l;const c=(n-e)/r;if(c===1)a=e;else if(c===2)a=e,l=i;else if(c!==0){let u=t[e],h=t[e+1],f=0;const g=[0];for(let b=e+r;b<n;b+=r){const T=t[b],A=t[b+1];f+=Math.sqrt((T-u)*(T-u)+(A-h)*(A-h)),g.push(f),u=T,h=A}const y=i*f,_=zTe(g,y);_<0?(l=(y-g[-_-2])/(g[-_-1]-g[-_-2]),a=e+(-_-2)*r):a=e+_*r}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?t[a+u]:ic(t[a+u],t[a+r+u],l);return s}function BF(t,e,n,r,i,s){if(n==e)return null;let o;if(i<t[e+r-1])return s?(o=t.slice(e,e+r),o[r-1]=i,o):null;if(t[n-1]<i)return s?(o=t.slice(n-r,n),o[r-1]=i,o):null;if(i==t[e+r-1])return t.slice(e,e+r);let a=e/r,l=n/r;for(;a<l;){const f=a+l>>1;i<t[(f+1)*r-1]?l=f:a=f+1}const c=t[a*r-1];if(i==c)return t.slice((a-1)*r,(a-1)*r+r);const u=t[(a+1)*r-1],h=(i-c)/(u-c);o=[];for(let f=0;f<r-1;++f)o.push(ic(t[(a-1)*r+f],t[a*r+f],h));return o.push(i),o}function Gke(t,e,n,r,i,s,o){if(o)return BF(t,e,n[n.length-1],r,i,s);let a;if(i<t[r-1])return s?(a=t.slice(0,r),a[r-1]=i,a):null;if(t[t.length-1]<i)return s?(a=t.slice(t.length-r),a[r-1]=i,a):null;for(let l=0,c=n.length;l<c;++l){const u=n[l];if(e!=u){if(i<t[e+r-1])return null;if(i<=t[u-1])return BF(t,e,u,r,i,!1);e=u}}return null}function Uke(t,e,n,r,i){return!Jz(i,function(o){return!Ly(t,e,n,r,o[0],o[1])})}function Ly(t,e,n,r,i,s){let o=0,a=t[n-r],l=t[n-r+1];for(;e<n;e+=r){const c=t[e],u=t[e+1];l<=s?u>s&&(c-a)*(s-l)-(i-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(i-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function fG(t,e,n,r,i,s){if(n.length===0||!Ly(t,e,n[0],r,i,s))return!1;for(let o=1,a=n.length;o<a;++o)if(Ly(t,n[o-1],n[o],r,i,s))return!1;return!0}function Bke(t,e,n,r,i,s){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(fG(t,e,l,r,i,s))return!0;e=l[l.length-1]}return!1}function cle(t,e,n,r,i){let s;for(e+=r;e<n;e+=r)if(s=i(t.slice(e-r,e),t.slice(e,e+r)),s)return s;return!1}function N5(t,e,n,r,i,s){return s=s??Bae(Wa(),t,e,n,r),oa(i,s)?s[0]>=i[0]&&s[2]<=i[2]||s[1]>=i[1]&&s[3]<=i[3]?!0:cle(t,e,n,r,function(o,a){return XTe(i,o,a)}):!1}function Wke(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){if(N5(t,e,n[s],r,i))return!0;e=n[s]}return!1}function ule(t,e,n,r,i){return!!(N5(t,e,n,r,i)||Ly(t,e,n,r,i[0],i[1])||Ly(t,e,n,r,i[0],i[3])||Ly(t,e,n,r,i[2],i[1])||Ly(t,e,n,r,i[2],i[3]))}function hle(t,e,n,r,i){if(!ule(t,e,n[0],r,i))return!1;if(n.length===1)return!0;for(let s=1,o=n.length;s<o;++s)if(Uke(t,n[s-1],n[s],r,i)&&!N5(t,n[s-1],n[s],r,i))return!1;return!0}function Hke(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(hle(t,e,a,r,i))return!0;e=a[a.length-1]}return!1}function pG(t,e,n,r){let i=t[e],s=t[e+1],o=0;for(let a=e+r;a<n;a+=r){const l=t[a],c=t[a+1];o+=Math.sqrt((l-i)*(l-i)+(c-s)*(c-s)),i=l,s=c}return o}function O5(t,e,n,r,i,s,o){const a=(n-e)/r;if(a<3){for(;e<n;e+=r)s[o++]=t[e],s[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,n-r];let u=0;for(;c.length>0;){const h=c.pop(),f=c.pop();let g=0;const y=t[f],_=t[f+1],b=t[h],T=t[h+1];for(let A=f+r;A<h;A+=r){const I=t[A],P=t[A+1],N=ZTe(I,P,y,_,b,T);N>g&&(u=A,g=N)}g>i&&(l[(u-e)/r]=1,f+r<u&&c.push(f,u),u+r<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=t[e+h*r],s[o++]=t[e+h*r+1]);return o}function dle(t,e,n,r,i,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=O5(t,e,u,r,i,s,o),a.push(o),e=u}return o}function Z0(t,e){return e*Math.round(t/e)}function qke(t,e,n,r,i,s,o){if(e==n)return o;let a=Z0(t[e],i),l=Z0(t[e+1],i);e+=r,s[o++]=a,s[o++]=l;let c,u;do if(c=Z0(t[e],i),u=Z0(t[e+1],i),e+=r,e==n)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;e<n;){const h=Z0(t[e],i),f=Z0(t[e+1],i);if(e+=r,h==c&&f==u)continue;const g=c-a,y=u-l,_=h-a,b=f-l;if(g*b==y*_&&(g<0&&_<g||g==_||g>0&&_>g)&&(y<0&&b<y||y==b||y>0&&b>y)){c=h,u=f;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=h,u=f}return s[o++]=c,s[o++]=u,o}function mG(t,e,n,r,i,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l];o=qke(t,e,u,r,i,s,o),a.push(o),e=u}return o}function Kke(t,e,n,r,i,s,o,a){for(let l=0,c=n.length;l<c;++l){const u=n[l],h=[];o=mG(t,e,u,r,i,s,o,h),a.push(h),e=u[u.length-1]}return o}class ts extends s0{constructor(e,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendCoordinate(e){xr(this.flatCoordinates,e),this.changed()}clone(){const e=new ts(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<av(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(cG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),hG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,r,i))}forEachSegment(e){return cle(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,BF(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n))}getCoordinates(){return eg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,n){return z3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,this.stride)}getLength(){return pG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const n=[];return n.length=O5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new ts(n,"XY")}getType(){return"LineString"}intersectsExtent(e){return N5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=M5(this.flatCoordinates,0,e,this.stride),this.changed()}}let Ti=class fle extends s0{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new fle(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){const s=this.flatCoordinates,o=np(e,n,s[0],s[1]);if(o<i){const a=this.stride;for(let l=0;l<a;++l)r[l]=s[l];return r.length=a,o}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return eT(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Yz(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ale(this.flatCoordinates,0,e,this.stride),this.changed()}};const co={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},A1=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Yke=A1.includes("safari")&&!A1.includes("chrom"),Xke=Yke&&(A1.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(A1)),Zke=A1.includes("webkit")&&!A1.includes("edge"),ple=A1.includes("macintosh"),Jke=typeof devicePixelRatio<"u"?devicePixelRatio:1,uc=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,gG=typeof Image<"u"&&Image.prototype.decode,mle=typeof createImageBitmap=="function",gle=(function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t})(),Vt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Rs(t,e,n,r){let i;return n&&n.length?i=n.shift():uc?i=new class extends OffscreenCanvas{style={}}(t??300,e??150):i=document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",r)}let E6;function G3(){return E6||(E6=Rs(1,1)),E6}function L5(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function RX(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function Qke(t){for(;t.lastChild;)t.lastChild.remove()}function eAe(t,e){const n=t.childNodes;for(let r=0;;++r){const i=n[r],s=e[r];if(!i&&!s)break;if(i!==s){if(!i){t.appendChild(s);continue}if(!s){t.removeChild(i),--r;continue}t.insertBefore(s,i)}}}function yle(){return new Proxy({childNodes:[],appendChild:function(e){return this.childNodes.push(e),e},remove:function(){},removeChild:function(e){const n=this.childNodes.indexOf(e);if(n===-1)throw new Error("Node to remove was not found");return this.childNodes.splice(n,1),e},insertBefore:function(e,n){const r=this.childNodes.indexOf(n);if(r===-1)throw new Error("Reference node not found");return this.childNodes.splice(r,0,e),e},style:{}},{get(e,n,r){return n==="firstElementChild"?e.childNodes.length>0?e.childNodes[0]:null:Reflect.get(e,n,r)}})}function tg(t){return typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas}const yG=[NaN,NaN,NaN,0];let S6;function tAe(){return S6||(S6=Rs(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),S6}const nAe=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,rAe=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,iAe=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,sAe=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function fC(t,e){return t.endsWith("%")?Number(t.substring(0,t.length-1))/e:Number(t)}function nT(t){throw new Error('failed to parse "'+t+'" as color')}function vle(t){if(t.toLowerCase().startsWith("rgb")){const s=t.match(rAe)||t.match(nAe)||t.match(iAe);if(s){const o=s[4],a=100/255;return[ri(fC(s[1],a)+.5|0,0,255),ri(fC(s[2],a)+.5|0,0,255),ri(fC(s[3],a)+.5|0,0,255),o!==void 0?ri(fC(o,100),0,1):1]}nT(t)}if(t.startsWith("#")){if(sAe.test(t)){const s=t.substring(1),o=s.length<=4?1:2,a=[0,0,0,255];for(let l=0,c=s.length;l<c;l+=o){let u=parseInt(s.substring(l,l+o),16);o===1&&(u+=u<<4),a[l/o]=u}return a[3]=a[3]/255,a}nT(t)}const e=tAe();e.fillStyle="#abcdef";let n=e.fillStyle;e.fillStyle=t,e.fillStyle===n&&(e.fillStyle="#fedcba",n=e.fillStyle,e.fillStyle=t,e.fillStyle===n&&nT(t));const r=e.fillStyle;if(r.startsWith("#")||r.startsWith("rgba"))return vle(r);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const i=Array.from(e.getImageData(0,0,1,1).data);return i[3]=J2(i[3]/255,3),i}function oAe(t){return typeof t=="string"?t:_G(t)}const aAe=1024,xE={};let T6=0;function lAe(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function k6(t){return t>.0031308?Math.pow(t,1/2.4)*269.025-14.025:t*3294.6}function A6(t){return t>.2068965?Math.pow(t,3):(t-4/29)*(108/841)}function I6(t){return t>10.314724?Math.pow((t+14.025)/269.025,2.4):t/3294.6}function P6(t){return t>.0088564?Math.pow(t,1/3):t/(108/841)+4/29}function MX(t){const e=I6(t[0]),n=I6(t[1]),r=I6(t[2]),i=P6(e*.222488403+n*.716873169+r*.06060791),s=500*(P6(e*.452247074+n*.399439023+r*.148375274)-i),o=200*(i-P6(e*.016863605+n*.117638439+r*.865350722)),a=Math.atan2(o,s)*(180/Math.PI);return[116*i-16,Math.sqrt(s*s+o*o),a<0?a+360:a,t[3]]}function cAe(t){const e=(t[0]+16)/116,n=t[1],r=t[2]*Math.PI/180,i=A6(e),s=A6(e+n/500*Math.cos(r)),o=A6(e-n/200*Math.sin(r)),a=k6(s*3.021973625-i*1.617392459-o*.404875592),l=k6(s*-.943766287+i*1.916279586+o*.027607165),c=k6(s*.069407491-i*.22898585+o*1.159737864);return[ri(a+.5|0,0,255),ri(l+.5|0,0,255),ri(c+.5|0,0,255),t[3]]}function vG(t){if(t==="none")return yG;if(xE.hasOwnProperty(t))return xE[t];if(T6>=aAe){let n=0;for(const r in xE)(n++&3)===0&&(delete xE[r],--T6)}const e=vle(t);e.length!==4&&nT(t);for(const n of e)isNaN(n)&&nT(t);return xE[t]=e,++T6,e}function gu(t){return Array.isArray(t)?t:vG(t)}function _G(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let r=t[2];r!=(r|0)&&(r=r+.5|0);const i=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+n+","+r+","+i+")"}class _le extends VA{constructor(e,n,r,i){super(),this.extent=e,this.pixelRatio_=r,this.resolution=n,this.state=typeof i=="function"?Vt.IDLE:i,this.image_=null,this.loader=typeof i=="function"?i:null}changed(){this.dispatchEvent(wn.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Vt.IDLE&&this.loader){this.state=Vt.LOADING,this.changed();const e=this.getResolution(),n=Array.isArray(e)?e[0]:e;zae(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(r=>{"image"in r&&(this.image_=r.image),"extent"in r&&(this.extent=r.extent),"resolution"in r&&(this.resolution=r.resolution),"pixelRatio"in r&&(this.pixelRatio_=r.pixelRatio),(r instanceof HTMLImageElement||mle&&r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement)&&(this.image_=r),this.state=Vt.LOADED}).catch(r=>{this.state=Vt.ERROR,console.error(r)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function uAe(t,e,n){const r=t;let i=!0,s=!1,o=!1;const a=[N3(r,wn.LOAD,function(){o=!0,s||e()})];return r.src&&gG?(s=!0,r.decode().then(function(){i&&e()}).catch(function(l){i&&(o?e():n())})):a.push(N3(r,wn.ERROR,n)),function(){i=!1,a.forEach(ni)}}function hAe(t,e){return new Promise((n,r)=>{function i(){o(),n(t)}function s(){o(),r(new Error("Image load error"))}function o(){t.removeEventListener("load",i),t.removeEventListener("error",s)}t.addEventListener("load",i),t.addEventListener("error",s)})}function xle(t,e){return e&&(t.src=e),t.src&&gG?new Promise((n,r)=>t.decode().then(()=>n(t)).catch(i=>t.complete&&t.width?n(t):r(i))):hAe(t)}function wle(t,e){return e&&(t.src=e),t.src&&gG&&mle?t.decode().then(()=>createImageBitmap(t)).catch(n=>{if(t.complete&&t.width)return t;throw n}):xle(t)}class dAe{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const n in this.cache_){const r=this.cache_[n];(e++&3)===0&&!r.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(e,n,r){const i=C6(e,n,r);return i in this.cache_?this.cache_[i]:null}getPattern(e,n,r){const i=C6(e,n,r);return i in this.patternCache_?this.patternCache_[i]:null}set(e,n,r,i,s){const o=C6(e,n,r),a=o in this.cache_;this.cache_[o]=i,s&&(i.getImageState()===Vt.IDLE&&i.load(),i.getImageState()===Vt.LOADING?i.ready().then(()=>{this.patternCache_[o]=G3().createPattern(i.getImage(1),"repeat")}):this.patternCache_[o]=G3().createPattern(i.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function C6(t,e,n){const r=n?gu(n):"null";return e+":"+t+":"+r}const ru=new dAe;let wE=null;class ble extends VA{constructor(e,n,r,i,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=r,this.canvas_={},this.color_=s,this.imageState_=i===void 0?Vt.IDLE:i,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Vt.LOADED){wE||(wE=Rs(1,1,void 0,{willReadFrequently:!0})),wE.drawImage(this.image_,0,0);try{wE.getImageData(0,0,1,1),this.tainted_=!1}catch{wE=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(wn.CHANGE)}handleImageError_(){this.imageState_=Vt.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Vt.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],n=this.size_[1],r=Rs(e,n);r.fillRect(0,0,e,n),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Vt.IDLE){this.image_||this.initializeImage_(),this.imageState_=Vt.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&xle(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Vt.LOADED)return;const n=this.image_,r=Rs(Math.ceil(n.width*e),Math.ceil(n.height*e)),i=r.canvas;r.scale(e,e),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=oAe(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Vt.LOADED||this.imageState_===Vt.ERROR)e();else{const n=()=>{(this.imageState_===Vt.LOADED||this.imageState_===Vt.ERROR)&&(this.removeEventListener(wn.CHANGE,n),e())};this.addEventListener(wn.CHANGE,n)}})),this.ready_}}function U3(t,e,n,r,i,s){let o=e===void 0?void 0:ru.get(e,n,i);return o||(o=new ble(t,t&&"src"in t?t.src||void 0:e,n,r,i),ru.set(e,n,i,o,s)),s&&o&&!ru.getPattern(e,n,i)&&ru.set(e,n,i,o,s),o}function md(t){return t?Array.isArray(t)?_G(t):typeof t=="object"&&"src"in t?fAe(t):t:null}function fAe(t){if(!t.offset||!t.size)return ru.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,n=ru.getPattern(e,void 0,t.color);if(n)return n;const r=ru.get(t.src,"anonymous",null);if(r.getImageState()!==Vt.LOADED)return null;const i=Rs(t.size[0],t.size[1]);return i.drawImage(r.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),U3(i.canvas,e,void 0,Vt.LOADED,t.color,!0),ru.getPattern(e,void 0,t.color)}class Ele{drawCustom(e,n,r,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,n,r){}drawFeature(e,n,r){}drawGeometryCollection(e,n,r){}drawLineString(e,n,r){}drawMultiLineString(e,n,r){}drawMultiPoint(e,n,r){}drawMultiPolygon(e,n,r){}drawPoint(e,n,r){}drawPolygon(e,n,r){}drawText(e,n,r){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}}const pC="ol-hidden",WA="ol-unselectable",xG="ol-control",NX="ol-collapsed",pAe=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),OX=["style","variant","weight","size","lineHeight","family"],WF={normal:400,bold:700},HF=function(t){const e=t.match(pAe);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"400",variant:"normal"};for(let r=0,i=OX.length;r<i;++r){const s=e[r+1];s!==void 0&&(n[OX[r]]=typeof s=="string"?s.trim():s)}return isNaN(Number(n.weight))&&n.weight in WF&&(n.weight=WF[n.weight]),n.families=n.family.split(/,\s?/).map(r=>r.trim().replace(/^['"]|['"]$/g,"")),n},Sle="10px sans-serif",yl="#000",n2="round",rp=[],ip=0,r2="round",gk=10,yk="#000",vk="center",B3="middle",Dy=[0,0,0,0],_k=1,z_=new Wd;let bE=null,LX;const qF={},mAe=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","emoji","math","fangsong"]);function gAe(t,e,n){return`${t} ${e} 16px "${n}"`}const yAe=(function(){let e,n;async function r(s){await n.ready;const o=await n.load(s);if(o.length===0)return!1;const a=HF(s),l=a.families[0].toLowerCase(),c=a.weight;return o.some(u=>{const h=u.family.replace(/^['"]|['"]$/g,"").toLowerCase(),f=WF[u.weight]||u.weight;return h===l&&u.style===a.style&&f==c})}async function i(){await n.ready;let s=!0;const o=z_.getProperties(),a=Object.keys(o).filter(l=>o[l]<100);for(let l=a.length-1;l>=0;--l){const c=a[l];let u=o[c];u<100&&(await r(c)?(ov(qF),z_.set(c,100)):(u+=10,z_.set(c,u,!0),u<100&&(s=!1)))}e=void 0,s||(e=setTimeout(i,100))}return async function(s){n||(n=uc?self.fonts:document.fonts);const o=HF(s);if(!o)return;const a=o.families;let l=!1;for(const c of a){if(mAe.has(c))continue;const u=gAe(o.style,o.weight,c);z_.get(u)===void 0&&(z_.set(u,0,!0),l=!0)}l&&(clearTimeout(e),e=setTimeout(i,100))}})(),vAe=(function(){let t;return function(e){let n=qF[e];if(n==null){if(uc){const r=HF(e),i=Tle(e,"g");n=(isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);qF[e]=n}return n}})();function Tle(t,e){return bE||(bE=Rs(1,1)),t!=LX&&(bE.font=t,LX=bE.font),bE.measureText(e)}function kle(t,e){return Tle(t,e).width}function DX(t,e,n){if(e in n)return n[e];const r=e.split(`
`).reduce((i,s)=>Math.max(i,kle(t,s)),0);return n[e]=r,r}function _Ae(t,e){const n=[],r=[],i=[];let s=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const h=e[c];if(h===`
`||c===u){s=Math.max(s,o),i.push(o),o=0,a+=l,l=0;continue}const f=e[c+1]||t.font,g=kle(f,h);n.push(g),o+=g;const y=vAe(f);r.push(y),l=Math.max(l,y)}return{width:s,height:a,widths:n,heights:r,lineWidths:i}}function xAe(t,e,n,r,i,s,o,a,l,c,u){t.save(),n!==1&&(t.globalAlpha===void 0?t.globalAlpha=h=>h.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),r.contextInstructions?(t.translate(l,c),t.scale(u[0],u[1]),wAe(r,t)):u[0]<0||u[1]<0?(t.translate(l,c),t.scale(u[0],u[1]),t.drawImage(r,i,s,o,a,0,0,o,a)):t.drawImage(r,i,s,o,a,l,c,o*u[0],a*u[1]),t.restore()}function wAe(t,e){const n=t.contextInstructions;for(let r=0,i=n.length;r<i;r+=2)Array.isArray(n[r+1])?e[n[r]].apply(e,n[r+1]):e[n[r]]=n[r+1]}class bAe extends Ele{constructor(e,n,r,i,s,o,a){super(),this.context_=e,this.pixelRatio_=n,this.extent_=r,this.transform_=i,this.transformRotation_=i?J2(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ws()}drawImages_(e,n,r,i){if(!this.image_)return;const s=xd(e,n,r,i,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,h=s.length;u<h;u+=2){const f=s[u]-this.imageAnchorX_,g=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const y=f+this.imageAnchorX_,_=g+this.imageAnchorY_;mu(a,y,_,1,1,c,-y,-_),o.save(),o.transform.apply(o,a),o.translate(y,_),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,g,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,n,r,i){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=xd(e,n,r,i,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<r;n+=i){const l=s[n]+this.textOffsetX_,c=s[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,n,r,i,s){const o=this.context_,a=xd(e,n,r,i,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),r}drawRings_(e,n,r,i){for(let s=0,o=r.length;s<o;++s)n=this.moveToLineTo_(e,n,r[s],i,!0);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!oa(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=Fke(e,this.transform_,this.pixelCoordinates_),r=n[2]-n[0],i=n[3]-n[1],s=Math.sqrt(r*r+i*i),o=this.context_;o.beginPath(),o.arc(n[0],n[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,n){const r=n.getGeometryFunction()(e);r&&(this.setStyle(n),this.drawGeometry(r))}drawGeometryCollection(e){const n=e.getGeometriesArray();for(let r=0,i=n.length;r<i;++r)this.drawGeometry(n[r])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),r=e.getStride();this.image_&&this.drawImages_(n,0,n.length,r),this.text_!==""&&this.drawText_(n,0,n.length,r)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!oa(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(r,0,r.length,e.getStride(),!1),n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getExtent();if(oa(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const r=this.context_,i=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();r.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(i,s,o[l],a,!1);r.stroke()}if(this.text_!==""){const r=e.getFlatMidpoints();this.drawText_(r,0,r.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!oa(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!oa(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getOrientedFlatCoordinates();let i=0;const s=e.getEndss(),o=e.getStride();n.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];i=this.drawRings_(r,i,c,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(e){const n=this.context_,r=this.contextFillState_;r?r.fillStyle!=e.fillStyle&&(r.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const n=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=e.lineCap&&(r.lineCap=e.lineCap,n.lineCap=e.lineCap),Bd(r.lineDash,e.lineDash)||n.setLineDash(r.lineDash=e.lineDash),r.lineDashOffset!=e.lineDashOffset&&(r.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),r.lineJoin!=e.lineJoin&&(r.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),r.lineWidth!=e.lineWidth&&(r.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),r.miterLimit!=e.miterLimit&&(r.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),r.strokeStyle!=e.strokeStyle&&(r.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const n=this.context_,r=this.contextTextState_,i=e.textAlign?e.textAlign:vk;r?(r.font!=e.font&&(r.font=e.font,n.font=e.font),r.textAlign!=i&&(r.textAlign=i,n.textAlign=i),r.textBaseline!=e.textBaseline&&(r.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=i,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:i,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{const r=e.getColor();this.fillState_={fillStyle:md(r||yl)}}if(!n)this.strokeState_=null;else{const r=n.getColor(),i=n.getLineCap(),s=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit(),u=s||rp;this.strokeState_={lineCap:i!==void 0?i:n2,lineDash:this.pixelRatio_===1?u:u.map(h=>h*this.pixelRatio_),lineDashOffset:(o||ip)*this.pixelRatio_,lineJoin:a!==void 0?a:r2,lineWidth:(l!==void 0?l:_k)*this.pixelRatio_,miterLimit:c!==void 0?c:gk,strokeStyle:md(r||yk)}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}const r=e.getPixelRatio(this.pixelRatio_),i=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*r,this.imageAnchorY_=i[1]*r,this.imageHeight_=n[1]*r,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/r,o[1]*this.pixelRatio_/r],this.imageWidth_=n[0]*r}setTextStyle(e){if(!e)this.text_="";else{const n=e.getFill();if(!n)this.textFillState_=null;else{const g=n.getColor();this.textFillState_={fillStyle:md(g||yl)}}const r=e.getStroke();if(!r)this.textStrokeState_=null;else{const g=r.getColor(),y=r.getLineCap(),_=r.getLineDash(),b=r.getLineDashOffset(),T=r.getLineJoin(),A=r.getWidth(),I=r.getMiterLimit();this.textStrokeState_={lineCap:y!==void 0?y:n2,lineDash:_||rp,lineDashOffset:b||ip,lineJoin:T!==void 0?T:r2,lineWidth:A!==void 0?A:_k,miterLimit:I!==void 0?I:gk,strokeStyle:md(g||yk)}}const i=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),h=e.getTextAlign(),f=e.getTextBaseline();this.textState_={font:i!==void 0?i:Sle,textAlign:h!==void 0?h:vk,textBaseline:f!==void 0?f:B3},this.text_=u!==void 0?Array.isArray(u)?u.reduce((g,y,_)=>g+=_%2?" ":y,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const EAe=.5,Ale={Point:RAe,LineString:IAe,Polygon:NAe,MultiPoint:MAe,MultiLineString:PAe,MultiPolygon:CAe,GeometryCollection:AAe,Circle:TAe};function SAe(t,e){return parseInt(Qt(t),10)-parseInt(Qt(e),10)}function jX(t,e){const n=Ile(t,e);return n*n}function Ile(t,e){return EAe*t/e}function TAe(t,e,n,r,i){const s=n.getFill(),o=n.getStroke();if(s||o){const l=t.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,r,i)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r)}}function $X(t,e,n,r,i,s,o,a){const l=[],c=n.getImage();if(c){let f=!0;const g=c.getImageState();g==Vt.LOADED||g==Vt.ERROR?f=!1:g==Vt.IDLE&&c.load(),f&&l.push(c.ready())}const u=n.getFill();u&&u.loading()&&l.push(u.ready());const h=l.length>0;return h&&Promise.all(l).then(()=>i(null)),kAe(t,e,n,r,s,o,a),h}function kAe(t,e,n,r,i,s,o){const a=n.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(r,i);if(n.getRenderer())Ple(t,l,n,e,o);else{const u=Ale[l.getType()];u(t,l,n,e,o,s)}}function Ple(t,e,n,r,i){if(e.getType()=="GeometryCollection"){const o=e.getGeometries();for(let a=0,l=o.length;a<l;++a)Ple(t,o[a],n,r,i);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,r,n.getRenderer(),n.getHitDetectionRenderer(),i)}function AAe(t,e,n,r,i,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const c=Ale[o[a].getType()];c(t,o[a],n,r,i,s)}}function IAe(t,e,n,r,i){const s=n.getStroke();if(s){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,r,i)}const o=n.getText();if(o&&o.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,i)}}function PAe(t,e,n,r,i){const s=n.getStroke();if(s){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,r,i)}const o=n.getText();if(o&&o.getText()){const a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,r,i)}}function CAe(t,e,n,r,i){const s=n.getFill(),o=n.getStroke();if(o||s){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,r,i)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}function RAe(t,e,n,r,i,s){const o=n.getImage(),a=n.getText(),l=a&&a.getText(),c=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=Vt.LOADED)return;const u=t.getBuilder(n.getZIndex(),"Image");u.setImageStyle(o,c),u.drawPoint(e,r,i)}if(l){const u=t.getBuilder(n.getZIndex(),"Text");u.setTextStyle(a,c),u.drawText(e,r,i)}}function MAe(t,e,n,r,i,s){const o=n.getImage(),a=o&&o.getOpacity()!==0,l=n.getText(),c=l&&l.getText(),u=s&&a&&c?{}:void 0;if(a){if(o.getImageState()!=Vt.LOADED)return;const h=t.getBuilder(n.getZIndex(),"Image");h.setImageStyle(o,u),h.drawMultiPoint(e,r,i)}if(c){const h=t.getBuilder(n.getZIndex(),"Text");h.setTextStyle(l,u),h.drawText(e,r,i)}}function NAe(t,e,n,r,i){const s=n.getFill(),o=n.getStroke();if(s||o){const l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,r,i)}const a=n.getText();if(a&&a.getText()){const l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,r,i)}}let OAe=!1;function LAe(t,e,n,r,i,s,o){const a=new XMLHttpRequest;a.open("GET",typeof t=="function"?t(n,r,i):t,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=OAe,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();try{let u;c=="text"||c=="json"?u=a.responseText:c=="xml"?u=a.responseXML||a.responseText:c=="arraybuffer"&&(u=a.response),u?s(e.readFeatures(u,{extent:n,featureProjection:i}),e.readProjection(u)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function FX(t,e){return function(n,r,i,s,o){LAe(t,e,n,r,i,(a,l)=>{this.addFeatures(a),s!==void 0&&s(a)},()=>{this.changed(),o!==void 0&&o()})}}function DAe(t,e){return[[-1/0,-1/0,1/0,1/0]]}function Cle(t,e,n,r){const i=[];let s=Wa();for(let o=0,a=n.length;o<a;++o){const l=n[o];s=Xz(t,e,l[0],r),i.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return i}function wG(t,e,n,r,i,s,o){let a,l,c,u,h,f,g;const y=i[s+1],_=[];for(let A=0,I=n.length;A<I;++A){const P=n[A];for(u=t[P-r],f=t[P-r+1],a=e;a<P;a+=r)h=t[a],g=t[a+1],(y<=f&&g<=y||f<=y&&y<=g)&&(c=(y-f)/(g-f)*(h-u)+u,_.push(c)),u=h,f=g}let b=NaN,T=-1/0;for(_.sort(ep),u=_[0],a=1,l=_.length;a<l;++a){h=_[a];const A=Math.abs(h-u);A>T&&(c=(u+h)/2,fG(t,e,n,r,c,y)&&(b=c,T=A)),u=h}return isNaN(b)&&(b=i[s]),o?(o.push(b,y,T),o):[b,y,T]}function Rle(t,e,n,r,i){let s=[];for(let o=0,a=n.length;o<a;++o){const l=n[o];s=wG(t,e,l,r,i,2*o,s),e=l[l.length-1]}return s}function jAe(t,e,n,r){for(;e<n-r;){for(let i=0;i<r;++i){const s=t[e+i];t[e+i]=t[n-r+i],t[n-r+i]=s}e+=r,n-=r}}function bG(t,e,n,r){let i=0,s=t[n-r],o=t[n-r+1];for(;e<n;e+=r){const a=t[e],l=t[e+1];i+=(a-s)*(l+o),s=a,o=l}return i===0?void 0:i>0}function EG(t,e,n,r,i){i=i!==void 0?i:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=bG(t,e,a,r);if(s===0){if(i&&l||!i&&!l)return!1}else if(i&&!l||!i&&l)return!1;e=a}return!0}function Mle(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!EG(t,e,a,r,i))return!1;a.length&&(e=a[a.length-1])}return!0}function W3(t,e,n,r,i){i=i!==void 0?i:!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=bG(t,e,a,r);(s===0?i&&l||!i&&!l:i&&!l||!i&&l)&&jAe(t,e,a,r),e=a}return e}function KF(t,e,n,r,i){for(let s=0,o=n.length;s<o;++s)e=W3(t,e,n[s],r,i);return e}function Nle(t,e){const n=[];let r=0,i=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=bG(t,r,l,2);if(s===void 0&&(s=c),c===s)n.push(e.slice(i,o+1));else{if(n.length===0)continue;n[n.length-1].push(e[i])}i=o+1,r=l}return n}class D5 extends s0{constructor(e,n,r){super(),r!==void 0&&n===void 0?this.setFlatCoordinates(r,e):(n=n||0,this.setCenterAndRadius(e,n,r))}clone(){const e=new D5(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){const s=this.flatCoordinates,o=e-s[0],a=n-s[1],l=o*o+a*a;if(l<i){if(l===0)for(let c=0;c<this.stride;++c)r[c]=s[c];else{const c=this.getRadius()/Math.sqrt(l);r[0]=s[0]+c*o,r[1]=s[1]+c*a;for(let u=2;u<this.stride;++u)r[u]=s[u]}return r.length=this.stride,l}return i}containsXY(e,n){const r=this.flatCoordinates,i=e-r[0],s=n-r[1];return i*i+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const n=this.flatCoordinates,r=n[this.stride]-n[0];return pp(n[0]-r,n[1]-r,n[0]+r,n[1]+r,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+n*n}getType(){return"Circle"}intersectsExtent(e){const n=this.getExtent();if(oa(e,n)){const r=this.getCenter();return e[0]<=r[0]&&e[2]>=r[0]||e[1]<=r[1]&&e[3]>=r[1]?!0:Jz(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const n=this.stride,r=this.flatCoordinates[n]-this.flatCoordinates[0],i=e.slice();i[n]=i[0]+r;for(let s=1;s<n;++s)i[n+s]=e[s];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(e,n,r){this.setLayout(r,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let s=ale(i,0,e,this.stride);i[s++]=i[0]+n;for(let o=1,a=this.stride;o<a;++o)i[s++]=i[o];i.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,n){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,n){const r=this.getCenter(),i=this.getStride();this.setCenter(lG(r,0,r.length,i,e,n,r)),this.changed()}}D5.prototype.transform;class uu extends ole{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(ni),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let n=0,r=e.length;n<r;++n)this.changeEventsKeys_.push(Yn(e[n],wn.CHANGE,this.changed,this))}clone(){const e=new uu(R6(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,n,r,i){if(i<av(this.getExtent(),e,n))return i;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)i=s[o].closestPointXY(e,n,r,i);return i}containsXY(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)if(r[i].containsXY(e,n))return!0;return!1}computeExtent(e){GA(e);const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)Zz(e,n[r].getExtent());return e}getGeometries(){return R6(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].getType()===this.getType()?e=e.concat(n[r].getGeometriesArrayRecursive()):e.push(n[r]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],r=this.geometries_;let i=!1;for(let s=0,o=r.length;s<o;++s){const a=r[s],l=a.getSimplifiedGeometry(e);n.push(l),l!==a&&(i=!0)}return i?new uu(n):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)if(n[r].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].rotate(e,n);this.changed()}scale(e,n,r){r||(r=yh(this.getExtent()));const i=this.geometries_;for(let s=0,o=i.length;s<o;++s)i[s].scale(e,n,r);this.changed()}setGeometries(e){this.setGeometriesArray(R6(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const n=this.geometries_;for(let r=0,i=n.length;r<i;++r)n[r].applyTransform(e);this.changed()}translate(e,n){const r=this.geometries_;for(let i=0,s=r.length;i<s;++i)r[i].translate(e,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function R6(t){return t.map(e=>e.clone())}function Ole(t,e,n,r){let i=0;const s=t[n-r],o=t[n-r+1];let a=0,l=0;for(;e<n;e+=r){const c=t[e]-s,u=t[e+1]-o;i+=l*c-a*u,a=c,l=u}return i/2}function Lle(t,e,n,r){let i=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];i+=Ole(t,e,a,r),e=a}return i}function $Ae(t,e,n,r){let i=0;for(let s=0,o=n.length;s<o;++s){const a=n[s];i+=Lle(t,e,a,r),e=a[a.length-1]}return i}class xk extends s0{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new xk(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,r,i){return i<av(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(cG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),hG(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,r,i))}getArea(){return Ole(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return eg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=O5(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new xk(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=M5(this.flatCoordinates,0,e,this.stride),this.changed()}}class vh extends s0{constructor(e,n,r){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(n!==void 0&&r)this.setFlatCoordinates(n,e),this.ends_=r;else{const i=e,s=[],o=[];for(let l=0,c=i.length;l<c;++l){const u=i[l];xr(s,u.getFlatCoordinates()),o.push(s.length)}const a=i.length===0?this.getLayout():i[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){xr(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new vh(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<av(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(uG(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),dG(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,n,r,i))}getCoordinateAtM(e,n,r){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,r=r!==void 0?r:!1,Gke(this.flatCoordinates,0,this.ends_,this.stride,e,n,r))}getCoordinates(){return mk(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new ts(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,n=this.ends_,r=this.layout,i=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new ts(e.slice(s,l),r);i.push(c),s=l}return i}getLength(){const e=this.ends_;let n=0,r=0;for(let i=0,s=e.length;i<s;++i)r+=pG(this.flatCoordinates,n,e[i],this.stride),n=e[i];return r}getFlatMidpoints(){const e=[],n=this.flatCoordinates;let r=0;const i=this.ends_,s=this.stride;for(let o=0,a=i.length;o<a;++o){const l=i[o],c=z3(n,r,l,s,.5);xr(e,c),r=l}return e}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=dle(this.flatCoordinates,0,this.ends_,this.stride,e,n,0,r),new vh(n,"XY",r)}getType(){return"MultiLineString"}intersectsExtent(e){return Wke(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=BA(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}class o0 extends s0{constructor(e,n){super(),n&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendPoint(e){xr(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new o0(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,r,i){if(i<av(this.getExtent(),e,n))return i;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=np(e,n,s[a],s[a+1]);if(c<i){i=c;for(let u=0;u<o;++u)r[u]=s[a+u];r.length=o}}return i}getCoordinates(){return eg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const n=this.flatCoordinates.length/this.stride;return e<0||n<=e?null:new Ti(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,n=this.layout,r=this.stride,i=[];for(let s=0,o=e.length;s<o;s+=r){const a=new Ti(e.slice(s,s+r),n);i.push(a)}return i}getType(){return"MultiPoint"}intersectsExtent(e){const n=this.flatCoordinates,r=this.stride;for(let i=0,s=n.length;i<s;i+=r){const o=n[i],a=n[i+1];if(Yz(e,o,a))return!0}return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=M5(this.flatCoordinates,0,e,this.stride),this.changed()}}class Il extends s0{constructor(e,n,r){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&r?(this.setFlatCoordinates(n,e),this.ends_=r):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?xr(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Il(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,r,i){return i<av(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(uG(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),dG(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,n){return fG(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return Lle(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),W3(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,mk(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=yh(this.getExtent());this.flatInteriorPoint_=wG(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ti(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new xk(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,r=this.ends_,i=[];let s=0;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=new xk(n.slice(s,l),e);i.push(c),s=l}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;EG(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=W3(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=mG(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,r),new Il(n,"XY",r)}getType(){return"Polygon"}intersectsExtent(e){return hle(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const r=BA(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=r.length===0?0:r[r.length-1],this.changed()}}function VX(t){if(Z2(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],r=t[2],i=t[3],s=[e,n,e,i,r,i,r,n,e,n];return new Il(s,"XY",[s.length])}class mp extends s0{constructor(e,n,r){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!r&&!Array.isArray(e[0])){const i=e,s=[],o=[];for(let a=0,l=i.length;a<l;++a){const c=i[a],u=s.length,h=c.getEnds();for(let f=0,g=h.length;f<g;++f)h[f]+=u;xr(s,c.getFlatCoordinates()),o.push(h)}n=i.length===0?this.getLayout():i[0].getLayout(),e=s,r=o}n!==void 0&&r?(this.setFlatCoordinates(n,e),this.endss_=r):this.setCoordinates(e,n)}appendPolygon(e){let n;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();else{const r=this.flatCoordinates.length;xr(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(let i=0,s=n.length;i<s;++i)n[i]+=r}this.endss_.push(n),this.changed()}clone(){const e=this.endss_.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=this.endss_[i].slice();const r=new mp(this.flatCoordinates.slice(),this.layout,n);return r.applyProperties(this),r}closestPointXY(e,n,r,i){return i<av(this.getExtent(),e,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Vke(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),zke(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,n,r,i))}containsXY(e,n){return Bke(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,n)}getArea(){return $Ae(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),KF(n,0,this.endss_,this.stride,e)):n=this.flatCoordinates,UF(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Cle(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Rle(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new o0(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;Mle(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=KF(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],r=[];return n.length=Kke(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),n,0,r),new mp(n,"XY",r)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let n;if(e===0)n=0;else{const s=this.endss_[e-1];n=s[s.length-1]}const r=this.endss_[e].slice(),i=r[r.length-1];if(n!==0)for(let s=0,o=r.length;s<o;++s)r[s]-=n;return new Il(this.flatCoordinates.slice(n,i),this.layout,r)}getPolygons(){const e=this.layout,n=this.flatCoordinates,r=this.endss_,i=[];let s=0;for(let o=0,a=r.length;o<a;++o){const l=r[o].slice(),c=l[l.length-1];if(s!==0)for(let h=0,f=l.length;h<f;++h)l[h]-=s;const u=new Il(n.slice(s,c),e,l);i.push(u),s=c}return i}getType(){return"MultiPolygon"}intersectsExtent(e){return Hke(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const r=lle(this.flatCoordinates,0,e,this.stride,this.endss_);if(r.length===0)this.flatCoordinates.length=0;else{const i=r[r.length-1];this.flatCoordinates.length=i.length===0?0:i[i.length-1]}this.changed()}}const zX=Ws();class vl{constructor(e,n,r,i,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r||null,this.properties_=s,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?eT(this.flatCoordinates_):Xz(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=yh(this.getExtent());this.flatInteriorPoints_=wG(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Nle(this.flatCoordinates_,this.ends_),n=Cle(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=Rle(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=z3(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let n=0;const r=this.ends_;for(let i=0,s=r.length;i<s;++i){const o=r[i],a=z3(e,n,o,2,.5);xr(this.flatMidpoints_,a),n=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Qr(e);const n=e.getExtent(),r=e.getWorldExtent();if(n&&r){const i=Ps(r)/Ps(n);mu(zX,r[0],r[3],i,-i,0,0,0),xd(this.flatCoordinates_,0,this.flatCoordinates_.length,2,zX,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new vl(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Vae((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const r=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":r.length=O5(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=dle(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,r,0,i);break;case"Polygon":i=[],r.length=mG(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),r,0,i);break}return i&&(this.simplifiedGeometry_=new vl(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}vl.prototype.getFlatCoordinates=vl.prototype.getOrientedFlatCoordinates;function Dle(t,e,n=0,r=t.length-1,i=FAe){for(;r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(l-h)/l)*(c-l/2<0?-1:1),g=Math.max(n,Math.floor(e-c*h/l+f)),y=Math.min(r,Math.floor(e+(l-c)*h/l+f));Dle(t,e,g,y,i)}const s=t[e];let o=n,a=r;for(EE(t,n,e),i(t[r],s)>0&&EE(t,n,r);o<a;){for(EE(t,o,a),o++,a--;i(t[o],s)<0;)o++;for(;i(t[a],s)>0;)a--}i(t[n],s)===0?EE(t,n,a):(a++,EE(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}}function EE(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function FAe(t,e){return t<e?-1:t>e?1:0}let jle=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const r=[];if(!gC(e,n))return r;const i=this.toBBox,s=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],l=n.leaf?i(a):a;gC(e,l)&&(n.leaf?r.push(a):N6(e,l)?this._all(a,r):s.push(a))}n=s.pop()}return r}collides(e){let n=this.data;if(!gC(e,n))return!1;const r=[];for(;n;){for(let i=0;i<n.children.length;i++){const s=n.children[i],o=n.leaf?this.toBBox(s):s;if(gC(e,o)){if(n.leaf||N6(e,o))return!0;r.push(s)}}n=r.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let r=0;r<e.length;r++)this.insert(e[r]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=G_([]),this}remove(e,n){if(!e)return this;let r=this.data;const i=this.toBBox(e),s=[],o=[];let a,l,c;for(;r||s.length;){if(r||(r=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),r.leaf){const u=VAe(e,r.children,n);if(u!==-1)return r.children.splice(u,1),s.push(r),this._condense(s),this}!c&&!r.leaf&&N6(r,i)?(s.push(r),o.push(a),a=0,l=r,r=r.children[0]):l?(a++,r=l.children[a],c=!1):r=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const r=[];for(;e;)e.leaf?n.push(...e.children):r.push(...e.children),e=r.pop();return n}_build(e,n,r,i){const s=r-n+1;let o=this._maxEntries,a;if(s<=o)return a=G_(e.slice(n,r+1)),l_(a,this.toBBox),a;i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,i-1))),a=G_([]),a.leaf=!1,a.height=i;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));GX(e,n,r,c,this.compareMinX);for(let u=n;u<=r;u+=c){const h=Math.min(u+c-1,r);GX(e,u,h,l,this.compareMinY);for(let f=u;f<=h;f+=l){const g=Math.min(f+l-1,h);a.children.push(this._build(e,f,g,i-1))}}return l_(a,this.toBBox),a}_chooseSubtree(e,n,r,i){for(;i.push(n),!(n.leaf||i.length-1===r);){let s=1/0,o=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=M6(c),h=UAe(e,c)-u;h<o?(o=h,s=u<s?u:s,a=c):h===o&&u<s&&(s=u,a=c)}n=a||n.children[0]}return n}_insert(e,n,r){const i=r?e:this.toBBox(e),s=[],o=this._chooseSubtree(i,this.data,n,s);for(o.children.push(e),sS(o,i);n>=0&&s[n].children.length>this._maxEntries;)this._split(s,n),n--;this._adjustParentBBoxes(i,s,n)}_split(e,n){const r=e[n],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);const o=this._chooseSplitIndex(r,s,i),a=G_(r.children.splice(o,r.children.length-o));a.height=r.height,a.leaf=r.leaf,l_(r,this.toBBox),l_(a,this.toBBox),n?e[n-1].children.push(a):this._splitRoot(r,a)}_splitRoot(e,n){this.data=G_([e,n]),this.data.height=e.height+1,this.data.leaf=!1,l_(this.data,this.toBBox)}_chooseSplitIndex(e,n,r){let i,s=1/0,o=1/0;for(let a=n;a<=r-n;a++){const l=iS(e,0,a,this.toBBox),c=iS(e,a,r,this.toBBox),u=BAe(l,c),h=M6(l)+M6(c);u<s?(s=u,i=a,o=h<o?h:o):u===s&&h<o&&(o=h,i=a)}return i||r-n}_chooseSplitAxis(e,n,r){const i=e.leaf?this.compareMinX:zAe,s=e.leaf?this.compareMinY:GAe,o=this._allDistMargin(e,n,r,i),a=this._allDistMargin(e,n,r,s);o<a&&e.children.sort(i)}_allDistMargin(e,n,r,i){e.children.sort(i);const s=this.toBBox,o=iS(e,0,n,s),a=iS(e,r-n,r,s);let l=mC(o)+mC(a);for(let c=n;c<r-n;c++){const u=e.children[c];sS(o,e.leaf?s(u):u),l+=mC(o)}for(let c=r-n-1;c>=n;c--){const u=e.children[c];sS(a,e.leaf?s(u):u),l+=mC(a)}return l}_adjustParentBBoxes(e,n,r){for(let i=r;i>=0;i--)sS(n[i],e)}_condense(e){for(let n=e.length-1,r;n>=0;n--)e[n].children.length===0?n>0?(r=e[n-1].children,r.splice(r.indexOf(e[n]),1)):this.clear():l_(e[n],this.toBBox)}};function VAe(t,e,n){if(!n)return e.indexOf(t);for(let r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function l_(t,e){iS(t,0,t.children.length,e,t)}function iS(t,e,n,r,i){i||(i=G_(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s=e;s<n;s++){const o=t.children[s];sS(i,t.leaf?r(o):o)}return i}function sS(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function zAe(t,e){return t.minX-e.minX}function GAe(t,e){return t.minY-e.minY}function M6(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function mC(t){return t.maxX-t.minX+(t.maxY-t.minY)}function UAe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function BAe(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function N6(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function gC(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function G_(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function GX(t,e,n,r,i){const s=[e,n];for(;s.length;){if(n=s.pop(),e=s.pop(),n-e<=r)continue;const o=e+Math.ceil((n-e)/r/2)*r;Dle(t,o,e,n,i),s.push(e,o,o,n)}}class YF{constructor(e){this.rbush_=new jle(e),this.items_={}}insert(e,n){const r={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(r),this.items_[Qt(n)]=r}load(e,n){const r=new Array(n.length);for(let i=0,s=n.length;i<s;i++){const o=e[i],a=n[i],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};r[i]=l,this.items_[Qt(a)]=l}this.rbush_.load(r)}remove(e){const n=Qt(e),r=this.items_[n];return delete this.items_[n],this.rbush_.remove(r)!==null}update(e,n){const r=this.items_[Qt(n)],i=[r.minX,r.minY,r.maxX,r.maxY];S1(i,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(i){return i.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let r;for(let i=0,s=e.length;i<s;i++)if(r=n(e[i]),r)return r;return r}isEmpty(){return b1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const n=this.rbush_.toJSON();return pp(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const n in e.items_)this.items_[n]=e.items_[n]}}class SG extends Wd{constructor(e){super(),this.projection=Qr(e.projection),this.attributions_=UX(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(r,i){n.viewResolver=r,n.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=UX(e),this.changed()}setState(e){this.state_=e,this.changed()}}function UX(t){return t?typeof t=="function"?t:(Array.isArray(t)||(t=[t]),e=>t):null}const io={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class nm extends Tc{constructor(e,n,r){super(e),this.feature=n,this.features=r}}class Nl extends SG{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=hk,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ur(this.format_,"`format` must be set when `url` is set"),this.loader_=FX(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:DAe;const n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new YF:null,this.loadedExtentsRtree_=new YF,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let r,i;Array.isArray(e.features)?i=e.features:e.features&&(r=e.features,i=r.getArray()),!n&&r===void 0&&(r=new Da(i)),i!==void 0&&this.addFeaturesInternal(i),r!==void 0&&this.bindFeaturesCollection_(r)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const n=Qt(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);const r=e.getGeometry();if(r){const i=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new nm(io.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof vl||(this.featureChangeKeys_[e]=[Yn(n,wn.CHANGE,this.handleFeatureChange_,this),Yn(n,Jw.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let r=!0;if(n.getId()!==void 0){const i=String(n.getId());if(!(i in this.idIndex_))this.idIndex_[i]=n;else if(n instanceof vl){const s=this.idIndex_[i];s instanceof vl?Array.isArray(s)?s.push(n):this.idIndex_[i]=[s,n]:r=!1}else r=!1}return r&&(ur(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),r}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const n=[],r=[],i=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=Qt(a);this.addToIndex_(l,a)&&r.push(a)}for(let s=0,o=r.length;s<o;s++){const a=r[s],l=Qt(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();n.push(u),i.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,i),this.hasListener(io.ADDFEATURE))for(let s=0,o=r.length;s<o;s++)this.dispatchEvent(new nm(io.ADDFEATURE,r[s]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(io.ADDFEATURE,function(r){n||(n=!0,e.push(r.feature),n=!1)}),this.addEventListener(io.REMOVEFEATURE,function(r){n||(n=!0,e.remove(r.feature),n=!1)}),e.addEventListener(As.ADD,r=>{n||(n=!0,this.addFeature(r.element),n=!1)}),e.addEventListener(As.REMOVE,r=>{n||(n=!0,this.removeFeature(r.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const r in this.featureChangeKeys_)this.featureChangeKeys_[r].forEach(ni);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(r=>{this.removeFeatureInternal(r)});for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new nm(io.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){const r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(i){const s=i.getGeometry();if(s instanceof vl||s.intersectsCoordinate(e))return n(i)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(r){const i=r.getGeometry();if(i instanceof vl||i.intersectsExtent(e)){const s=n(r);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),b1(this.nullGeometryFeatures_)||xr(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const n=[];return this.forEachFeatureAtCoordinateDirect(e,function(r){n.push(r)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const i=qae(e,n);return[].concat(...i.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){const r=e[0],i=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return n=n||Lg,this.featuresRtree_.forEachInExtent(l,function(c){if(n(c)){const u=c.getGeometry(),h=a;if(a=u instanceof vl?0:u.closestPointXY(r,i,o,a),a<h){s=c;const f=Math.sqrt(a);l[0]=r-f,l[1]=i-f,l[2]=r+f,l[3]=i+f}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){const n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const n=e.target,r=Qt(n),i=n.getGeometry();if(!i)r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[r]=n);else{const o=i.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const s=n.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[r]=n;this.changed(),this.dispatchEvent(new nm(io.CHANGEFEATURE,n))}hasFeature(e){const n=e.getId();return n!==void 0?n in this.idIndex_:Qt(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&b1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,r){const i=this.loadedExtentsRtree_,s=this.strategy_(e,n,r);for(let o=0,a=s.length;o<a;++o){const l=s[o];i.forEachInExtent(l,function(u){return Jm(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new nm(io.FEATURESLOADSTART)),this.loader_.call(this,l,n,r,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new nm(io.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new nm(io.FEATURESLOADERROR))}),i.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const n=this.loadedExtentsRtree_,r=n.forEachInExtent(e,function(i){if(S1(i.extent,e))return i});r&&n.remove(r)}removeFeatures(e){let n=!1;for(let r=0,i=e.length;r<i;++r)n=this.removeFeatureInternal(e[r])||n;n&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const n=Qt(e);if(!(n in this.uidIndex_))return!1;n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[n]?.forEach(ni),delete this.featureChangeKeys_[n];const i=e.getId();if(i!==void 0){const s=i.toString(),o=this.idIndex_[s];o===e?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(e),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[n],this.hasListener(io.REMOVEFEATURE)&&this.dispatchEvent(new nm(io.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const n in this.idIndex_)if(this.idIndex_[n]===e){delete this.idIndex_[n];break}}setLoader(e){this.loader_=e}setUrl(e){ur(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(FX(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}class Dn{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Dn({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const n=U3(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===Vt.IDLE&&n.load(),n.getImageState()===Vt.LOADING&&(this.patternImage_=n)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Qt(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:gu(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Pn{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Pn({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function BX(t){return t[0]>0&&t[1]>0}function WAe(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function ja(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}class j5{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=ja(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new j5({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return bn()}getImage(e){return bn()}getHitDetectionImage(){return bn()}getPixelRatio(e){return 1}getImageState(){return bn()}getImageSize(){return bn()}getOrigin(){return bn()}getSize(){return bn()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ja(e)}listenImageChange(e){bn()}load(){bn()}unlistenImageChange(e){bn()}ready(){return Promise.resolve()}}class $5 extends j5{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Vt.LOADING:Vt.LOADED,this.imageState_===Vt.LOADING&&this.ready().then(()=>this.imageState_=Vt.LOADED),this.render()}clone(){const e=this.getScale(),n=new $5({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const e=this.size_,n=this.getDisplacement(),r=this.getScaleArray();return[e[0]/2-n[0]/r[0],e[1]/2+n[1]/r[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){const n=this.fill_?.getKey(),r=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${n}`+Object.values(this.renderOptions_).join(",");let i=ru.get(r,null,null)?.getImage(1);if(!i){const s=this.renderOptions_,o=Math.ceil(s.size*e),a=Rs(o,o);this.draw_(s,a,e),i=a.canvas,ru.set(r,null,null,new ble(i,void 0,null,Vt.LOADED,null))}return i}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,r){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let i=this.radius,s=this.radius2_===void 0?i:this.radius2_;if(i<s){const L=i;i=s,s=L}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=i-c,h=Math.sqrt(l*l+u*u),f=h/l;if(e==="miter"&&f<=r)return f*n;const g=n/2/f,y=n/2*(u/h),b=Math.sqrt((i+g)*(i+g)+y*y)-i;if(this.radius2_===void 0||e==="bevel")return b*2;const T=i*Math.sin(a),A=Math.sqrt(i*i-T*T),I=s-A,N=Math.sqrt(T*T+I*I)/T;if(N<=r){const L=N*n/2-s-i;return 2*Math.max(b,L)}return b*2}createRenderOptions(){let e=n2,n=r2,r=0,i=null,s=0,o,a=0;this.stroke_&&(o=md(this.stroke_.getColor()??yk),a=this.stroke_.getWidth()??_k,i=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??r2,e=this.stroke_.getLineCap()??n2,r=this.stroke_.getMiterLimit()??gk);const l=this.calculateLineJoinSize_(n,a,r),c=Math.max(this.radius,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:e,lineDash:i,lineDashOffset:s,lineJoin:n,miterLimit:r}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,r){if(n.scale(r,r),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let i=this.fill_.getColor();i===null&&(i=yl),n.fillStyle=md(i),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let r=this.fill_.getColor(),i=0;typeof r=="string"&&(r=gu(r)),r===null?i=1:Array.isArray(r)&&(i=r.length===4?r[3]:1),i===0&&(n=Rs(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_;const r=this.radius;if(n===1/0)e.arc(0,0,r,0,2*Math.PI);else{const i=this.radius2_===void 0?r:this.radius2_;this.radius2_!==void 0&&(n*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const l=s+a*o,c=a%2===0?r:i;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=yl,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class ms extends $5{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),n=new ms({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius=e,this.render()}}class vn{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=WX,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new vn({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=WX,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function HAe(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(ur(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let O6=null;function $le(t,e){if(!O6){const n=new Dn({color:"rgba(255,255,255,0.4)"}),r=new Pn({color:"#3399CC",width:1.25});O6=[new vn({image:new ms({fill:n,stroke:r,radius:5}),fill:n,stroke:r})]}return O6}function TG(){const t={},e=[255,255,255,1],n=[0,153,255,1],r=3;return t.Polygon=[new vn({fill:new Dn({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new vn({stroke:new Pn({color:e,width:r+2})}),new vn({stroke:new Pn({color:n,width:r})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new vn({image:new ms({radius:r*2,fill:new Dn({color:n}),stroke:new Pn({color:e,width:r/2})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function WX(t){return t.getGeometry()}const qAe="#333";class pc{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=ja(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Dn({color:qAe}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new pc({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()instanceof Dn?this.getFill().clone():this.getFill(),stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=ja(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Ts={ANIMATING:0,INTERACTING:1},ln={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},yC=[ln.FILL],ng=[ln.STROKE],jy=[ln.BEGIN_PATH],HX=[ln.CLOSE_PATH];class HA extends Ele{constructor(e,n,r,i){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=r,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const n=this.pixelRatio;return n==1?e:e.map(function(r){return r*n})}appendFlatPointCoordinates(e,n){const r=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=n)i[0]=e[a],i[1]=e[a+1],E1(r,i)&&(s[o++]=i[0],s[o++]=i[1]);return o}appendFlatLineCoordinates(e,n,r,i,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(n+=i);let u=e[n],h=e[n+1];const f=this.tmpCoordinate_;let g=!0,y,_,b;for(y=n+i;y<r;y+=i)f[0]=e[y],f[1]=e[y+1],b=NF(c,f),b!==_?(g&&(a[l++]=u,a[l++]=h,g=!1),a[l++]=f[0],a[l++]=f[1]):b===oo.INTERSECTING?(a[l++]=f[0],a[l++]=f[1],g=!1):g=!0,u=f[0],h=f[1],_=b;return(s&&g||y===n+i)&&(a[l++]=u,a[l++]=h),l}drawCustomCoordinates_(e,n,r,i,s){for(let o=0,a=r.length;o<a;++o){const l=r[o],c=this.appendFlatLineCoordinates(e,n,l,i,!1,!1);s.push(c),n=l}return n}drawCustom(e,n,r,i,s){this.beginGeometry(e,n,s);const o=e.getType(),a=e.getStride(),l=this.coordinates.length;let c,u,h,f,g;switch(o){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),f=[];const y=e.getEndss();g=0;for(let _=0,b=y.length;_<b;++_){const T=[];g=this.drawCustomCoordinates_(c,g,y[_],a,T),f.push(T)}this.instructions.push([ln.CUSTOM,l,f,e,r,UF,s]),this.hitDetectionInstructions.push([ln.CUSTOM,l,f,e,i||r,UF,s]);break;case"Polygon":case"MultiLineString":h=[],c=o=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),g=this.drawCustomCoordinates_(c,0,e.getEnds(),a,h),this.instructions.push([ln.CUSTOM,l,h,e,r,mk,s]),this.hitDetectionInstructions.push([ln.CUSTOM,l,h,e,i||r,mk,s]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),u=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([ln.CUSTOM,l,u,e,r,eg,s]),this.hitDetectionInstructions.push([ln.CUSTOM,l,u,e,i||r,eg,s]);break;case"MultiPoint":c=e.getFlatCoordinates(),u=this.appendFlatPointCoordinates(c,a),u>l&&(this.instructions.push([ln.CUSTOM,l,u,e,r,eg,s]),this.hitDetectionInstructions.push([ln.CUSTOM,l,u,e,i||r,eg,s]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),u=this.coordinates.length,this.instructions.push([ln.CUSTOM,l,u,e,r,void 0,s]),this.hitDetectionInstructions.push([ln.CUSTOM,l,u,e,i||r,void 0,s]);break}this.endGeometry(n)}beginGeometry(e,n,r){this.beginGeometryInstruction1_=[ln.BEGIN_GEOMETRY,n,0,e,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ln.BEGIN_GEOMETRY,n,0,e,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let n;const r=e.length;let i,s,o=-1;for(n=0;n<r;++n)i=e[n],s=i[0],s==ln.END_GEOMETRY?o=n:s==ln.BEGIN_GEOMETRY&&(i[2]=n,UTe(this.hitDetectionInstructions,o,n),o=-1)}fillStyleToState(e,n={}){if(e){const r=e.getColor();n.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,n.fillStyle=md(r||yl)}else n.fillStyle=void 0;return n}strokeStyleToState(e,n={}){if(e){const r=e.getColor();n.strokeStyle=md(r||yk);const i=e.getLineCap();n.lineCap=i!==void 0?i:n2;const s=e.getLineDash();n.lineDash=s?s.slice():rp;const o=e.getLineDashOffset();n.lineDashOffset=o||ip;const a=e.getLineJoin();n.lineJoin=a!==void 0?a:r2;const l=e.getWidth();n.lineWidth=l!==void 0?l:_k;const c=e.getMiterLimit();n.miterLimit=c!==void 0?c:gk,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0;return n}setFillStrokeStyle(e,n){const r=this.state;this.fillStyleToState(e,r),this.strokeStyleToState(n,r)}createFill(e){const n=e.fillStyle,r=[ln.SET_FILL_STYLE,n];return typeof n!="string"&&r.push(e.fillPatternScale),r}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[ln.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){const r=e.fillStyle;(typeof r!="string"||e.currentFillStyle!=r)&&(this.instructions.push(n.call(this,e)),e.currentFillStyle=r)}updateStrokeStyle(e,n){const r=e.strokeStyle,i=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=r||e.currentLineCap!=i||s!=e.currentLineDash&&!Bd(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(n.call(this,e),e.currentStrokeStyle=r,e.currentLineCap=i,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[ln.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Uae(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;sh(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class KAe extends HA{constructor(e,n,r,i){super(e,n,r,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n,r){if(!this.image_||this.maxExtent&&!E1(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,n,r);const i=e.getFlatCoordinates(),s=e.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(i,s);this.instructions.push([ln.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ln.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n,r){if(!this.image_)return;this.beginGeometry(e,n,r);const i=e.getFlatCoordinates(),s=[];for(let l=0,c=i.length;l<c;l+=e.getStride())(!this.maxExtent||E1(this.maxExtent,i.slice(l,l+2)))&&s.push(i[l],i[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([ln.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([ln.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){const r=e.getAnchor(),i=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=r[0],this.anchorY_=r[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=i[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}class YAe extends HA{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinates_(e,n,r,i){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,n,r,i,!1,!1),a=[ln.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r}drawLineString(e,n,r){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([ln.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,rp,ip],jy);const a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(ng),this.endGeometry(n)}drawMultiLineString(e,n,r){const i=this.state,s=i.strokeStyle,o=i.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n,r),this.hitDetectionInstructions.push([ln.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,rp,ip],jy);const a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride();let u=0;for(let h=0,f=a.length;h<f;++h)u=this.drawFlatCoordinates_(l,u,a[h],c);this.hitDetectionInstructions.push(ng),this.endGeometry(n)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(ng),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(ng),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(jy)}}class qX extends HA{constructor(e,n,r,i){super(e,n,r,i)}drawFlatCoordinatess_(e,n,r,i){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=r.length;this.instructions.push(jy),this.hitDetectionInstructions.push(jy);for(let c=0;c<l;++c){const u=r[c],h=this.coordinates.length,f=this.appendFlatLineCoordinates(e,n,u,i,!0,!a),g=[ln.MOVE_TO_LINE_TO,h,f];this.instructions.push(g),this.hitDetectionInstructions.push(g),a&&(this.instructions.push(HX),this.hitDetectionInstructions.push(HX)),n=u}return o&&(this.instructions.push(yC),this.hitDetectionInstructions.push(yC)),a&&(this.instructions.push(ng),this.hitDetectionInstructions.push(ng)),n}drawCircle(e,n,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([ln.SET_FILL_STYLE,yl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ln.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,rp,ip]);const a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const u=[ln.CIRCLE,c];this.instructions.push(jy,u),this.hitDetectionInstructions.push(jy,u),i.fillStyle!==void 0&&(this.instructions.push(yC),this.hitDetectionInstructions.push(yC)),i.strokeStyle!==void 0&&(this.instructions.push(ng),this.hitDetectionInstructions.push(ng)),this.endGeometry(n)}drawPolygon(e,n,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([ln.SET_FILL_STYLE,yl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ln.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,rp,ip]);const a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(n)}drawMultiPolygon(e,n,r){const i=this.state,s=i.fillStyle,o=i.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,r),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([ln.SET_FILL_STYLE,yl]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([ln.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,rp,ip]);const a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride();let u=0;for(let h=0,f=a.length;h<f;++h)u=this.drawFlatCoordinatess_(l,u,a[h],c);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const n=this.coordinates;for(let r=0,i=n.length;r<i;++r)n[r]=Z0(n[r],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;this.updateFillStyle(e,this.createFill),this.updateStrokeStyle(e,this.applyStroke)}}function XAe(t,e,n,r,i){const s=[];let o=n,a=0,l=e.slice(n,2);for(;a<t&&o+i<r;){const[c,u]=l.slice(-2),h=e[o+i],f=e[o+i+1],g=Math.sqrt((h-c)*(h-c)+(f-u)*(f-u));if(a+=g,a>=t){const y=(t-a+g)/g,_=ic(c,h,y),b=ic(u,f,y);l.push(_,b),s.push(l),l=[_,b],a==t&&(o+=i),a=0}else if(a<t)l.push(e[o+i],e[o+i+1]),o+=i;else{const y=g-a,_=ic(c,h,y/g),b=ic(u,f,y/g);l.push(_,b),s.push(l),l=[_,b],a=0,o+=i}}return a>0&&s.push(l),s}function ZAe(t,e,n,r,i){let s=n,o=n,a=0,l=0,c=n,u,h,f,g,y,_,b,T,A,I;for(h=n;h<r;h+=i){const P=e[h],N=e[h+1];y!==void 0&&(A=P-y,I=N-_,g=Math.sqrt(A*A+I*I),b!==void 0&&(l+=f,u=Math.acos((b*A+T*I)/(f*g)),u>t&&(l>a&&(a=l,s=c,o=h),l=0,c=h-i)),f=g,b=A,T=I),y=P,_=N}return l+=g,l>a?[c,h]:[s,o]}const H3={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class JAe extends HA{constructor(e,n,r,i){super(e,n,r,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[yl]={fillStyle:yl},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n,r){const i=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!i&&!s)return;const a=this.coordinates;let l=a.length;const c=e.getType();let u=null,h=e.getStride();if(o.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!oa(this.maxExtent,e.getExtent()))return;let f;if(u=e.getFlatCoordinates(),c=="LineString")f=[u.length];else if(c=="MultiLineString")f=e.getEnds();else if(c=="Polygon")f=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){const b=e.getEndss();f=[];for(let T=0,A=b.length;T<A;++T)f.push(b[T][0])}this.beginGeometry(e,n,r);const g=o.repeat,y=g?void 0:o.textAlign;let _=0;for(let b=0,T=f.length;b<T;++b){let A;g?A=XAe(g*this.resolution,u,_,f[b],h):A=[u.slice(_,f[b])];for(let I=0,P=A.length;I<P;++I){const N=A[I];let L=0,C=N.length;if(y==null){const O=ZAe(o.maxAngle,N,0,N.length,2);L=O[0],C=O[1]}for(let O=L;O<C;O+=h)a.push(N[O],N[O+1]);const M=a.length;_=f[b],this.drawChars_(l,M),l=M}}this.endGeometry(n)}else{let f=o.overflow?null:[];switch(c){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),h=2;break;case"Polygon":u=e.getFlatInteriorPoint(),o.overflow||f.push(u[2]/this.resolution),h=3;break;case"MultiPolygon":const P=e.getFlatInteriorPoints();u=[];for(let N=0,L=P.length;N<L;N+=3)o.overflow||f.push(P[N+2]/this.resolution),u.push(P[N],P[N+1]);if(u.length===0)return;h=2;break}const g=this.appendFlatPointCoordinates(u,h);if(g===l)return;if(f&&(g-l)/2!==u.length/h){let P=l/2;f=f.filter((N,L)=>{const C=a[(P+L)*2]===u[L*h]&&a[(P+L)*2+1]===u[L*h+1];return C||--P,C})}this.saveTextStates_();const y=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,_=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(e,n,r);let b=o.padding;if(b!=Dy&&(o.scale[0]<0||o.scale[1]<0)){let P=o.padding[0],N=o.padding[1],L=o.padding[2],C=o.padding[3];o.scale[0]<0&&(N=-N,C=-C),o.scale[1]<0&&(P=-P,L=-L),b=[P,N,L,C]}const T=this.pixelRatio;this.instructions.push([ln.DRAW_IMAGE,l,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,b==Dy?Dy:b.map(function(P){return P*T}),y,_,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const A=1/T,I=y?y.slice(0):null;I&&(I[1]=yl),this.hitDetectionInstructions.push([ln.DRAW_IMAGE,l,g,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[A,A],NaN,this.declutterMode_,this.declutterImageWithText_,b,I,_,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?yl:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),this.endGeometry(n)}}saveTextStates_(){const e=this.textStrokeState_,n=this.textState_,r=this.textFillState_,i=this.strokeKey_;e&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:n.font,textAlign:n.textAlign||vk,justify:n.justify,textBaseline:n.textBaseline||B3,scale:n.scale});const o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))}drawChars_(e,n){const r=this.textStrokeState_,i=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=H3[i.textBaseline],u=this.textOffsetY_*l,h=this.text_,f=r?r.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([ln.DRAW_CHARS,e,n,c,i.overflow,a,i.maxAngle,l,u,s,f*l,h,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([ln.DRAW_CHARS,e,n,c,i.overflow,a&&yl,i.maxAngle,l,u,s,f*l,h,o,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,n){let r,i,s;if(!e)this.text_="";else{const o=e.getFill();o?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=md(o.getColor()||yl)):(i=null,this.textFillState_=i);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const _=a.getLineDash(),b=a.getLineDashOffset(),T=a.getWidth(),A=a.getMiterLimit();s.lineCap=a.getLineCap()||n2,s.lineDash=_?_.slice():rp,s.lineDashOffset=b===void 0?ip:b,s.lineJoin=a.getLineJoin()||r2,s.lineWidth=T===void 0?_k:T,s.miterLimit=A===void 0?gk:A,s.strokeStyle=md(a.getColor()||yk)}r=this.textState_;const l=e.getFont()||Sle;yAe(l);const c=e.getScaleArray();r.overflow=e.getOverflow(),r.font=l,r.maxAngle=e.getMaxAngle(),r.placement=e.getPlacement(),r.textAlign=e.getTextAlign(),r.repeat=e.getRepeat(),r.justify=e.getJustify(),r.textBaseline=e.getTextBaseline()||B3,r.backgroundFill=e.getBackgroundFill(),r.backgroundStroke=e.getBackgroundStroke(),r.padding=e.getPadding()||Dy,r.scale=c===void 0?[1,1]:c;const u=e.getOffsetX(),h=e.getOffsetY(),f=e.getRotateWithView(),g=e.getKeepUpright(),y=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=f===void 0?!1:f,this.textKeepUpright_=g===void 0?!0:g,this.textRotation_=y===void 0?0:y,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Qt(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.repeat||"?")+(r.justify||"?")+(r.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?typeof i.fillStyle=="string"?i.fillStyle:"|"+Qt(i.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}const QAe={Circle:qX,Default:HA,Image:KAe,LineString:YAe,Polygon:qX,Text:JAe};class eIe{constructor(e,n,r,i){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=i,this.resolution_=r,this.buildersByZIndex_={}}finish(){const e={};for(const n in this.buildersByZIndex_){e[n]=e[n]||{};const r=this.buildersByZIndex_[n];for(const i in r){const s=r[i].finish();e[n][i]=s}}return e}getBuilder(e,n){const r=e!==void 0?e.toString():"0";let i=this.buildersByZIndex_[r];i===void 0&&(i={},this.buildersByZIndex_[r]=i);let s=i[n];if(s===void 0){const o=QAe[n];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[n]=s}return s}}function tIe(t,e,n,r,i,s,o,a,l,c,u,h,f=!0){let g=t[e],y=t[e+1],_=0,b=0,T=0,A=0;function I(){_=g,b=y,e+=r,g=t[e],y=t[e+1],A+=T,T=Math.sqrt((g-_)*(g-_)+(y-b)*(y-b))}do I();while(e<n-r&&A+T<s);let P=T===0?0:(s-A)/T;const N=ic(_,g,P),L=ic(b,y,P),C=e-r,M=A,O=s+a*l(c,i,u);for(;e<n-r&&A+T<O;)I();P=T===0?0:(O-A)/T;const D=ic(_,g,P),V=ic(b,y,P);let U=!1;if(f)if(h){const Ne=[N,L,D,V];lG(Ne,0,4,2,h,Ne,Ne),U=Ne[0]>Ne[2]}else U=N>D;const G=Math.PI,de=[],ke=C+r===e;e=C,T=0,A=M,g=t[e],y=t[e+1];let Ue;if(ke){I(),Ue=Math.atan2(y-b,g-_),U&&(Ue+=Ue>0?-G:G);const Ne=(D+N)/2,fe=(V+L)/2;return de[0]=[Ne,fe,(O-s)/2,Ue,i],de}i=i.replace(/\n/g," ");for(let Ne=0,fe=i.length;Ne<fe;){I();let De=Math.atan2(y-b,g-_);if(U&&(De+=De>0?-G:G),Ue!==void 0){let le=De-Ue;if(le+=le>G?-2*G:le<-G?2*G:0,Math.abs(le)>o)return null}Ue=De;const Ce=Ne;let Q=0;for(;Ne<fe;++Ne){const le=U?fe-Ne-1:Ne,ve=a*l(c,i[le],u);if(e+r<n&&A+T<s+Q+ve/2)break;Q+=ve}if(Ne===Ce)continue;const W=U?i.substring(fe-Ce,fe-Ne):i.substring(Ce,Ne);P=T===0?0:(s+Q/2-A)/T;const ne=ic(_,g,P),ie=ic(b,y,P);de.push([ne,ie,Q/2,De,W]),s+=Q}return de}class Fle{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(G3(),{get:(e,n)=>{if(typeof G3()[n]=="function")return this.push_(n),this.pushMethodArgs_},set:(e,n,r)=>(this.push_(n,r),!0)})}push_(...e){const n=this.instructions_,r=this.zIndex+this.offset_;n[r]||(n[r]=[]),n[r].push(...e)}pushMethodArgs_=(...e)=>(this.push_(e),this);pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(n=>{for(let r=0,i=n.length;r<i;++r){const s=n[r];if(typeof s=="function"){s(e);continue}const o=n[++r];if(typeof e[s]=="function")e[s](...o);else{if(typeof o=="function"){e[s]=o(e);continue}e[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const c_=Wa(),rm=[],uf=[],hf=[],im=[];function KX(t){return t[3].declutterBox}const YX=new RegExp("[-----]");function L6(t,e){return e==="start"?e=YX.test(t)?"right":"left":e==="end"&&(e=YX.test(t)?"left":"right"),H3[e]}function nIe(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}function rIe(t,e,n){return n%2===0&&(t+=e),t}class iIe{constructor(e,n,r,i,s){this.overlaps=r,this.pixelRatio=n,this.resolution=e,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Ws(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new Fle:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,n,r,i){const s=e+n+r+i;if(this.labels_[s])return this.labels_[s];const o=i?this.strokeStates[i]:null,a=r?this.fillStates[r]:null,l=this.textStates[n],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],h=l.justify?H3[l.justify]:L6(Array.isArray(e)?e[0]:e,l.textAlign||vk),f=i&&o.lineWidth?o.lineWidth:0,g=Array.isArray(e)?e:String(e).split(`
`).reduce(nIe,[]),{width:y,height:_,widths:b,heights:T,lineWidths:A}=_Ae(l,g),I=y+f,P=[],N=(I+2)*u[0],L=(_+f)*u[1],C={width:N<0?Math.floor(N):Math.ceil(N),height:L<0?Math.floor(L):Math.ceil(L),contextInstructions:P};(u[0]!=1||u[1]!=1)&&P.push("scale",u),i&&(P.push("strokeStyle",o.strokeStyle),P.push("lineWidth",f),P.push("lineCap",o.lineCap),P.push("lineJoin",o.lineJoin),P.push("miterLimit",o.miterLimit),P.push("setLineDash",[o.lineDash]),P.push("lineDashOffset",o.lineDashOffset)),r&&P.push("fillStyle",a.fillStyle),P.push("textBaseline","middle"),P.push("textAlign","center");const M=.5-h;let O=h*I+M*f;const D=[],V=[];let U=0,G=0,de=0,ke=0,Ue;for(let Ne=0,fe=g.length;Ne<fe;Ne+=2){const De=g[Ne];if(De===`
`){G+=U,U=0,O=h*I+M*f,++ke;continue}const Ce=g[Ne+1]||l.font;Ce!==Ue&&(i&&D.push("font",Ce),r&&V.push("font",Ce),Ue=Ce),U=Math.max(U,T[de]);const Q=[De,O+M*b[de]+h*(b[de]-A[ke]),.5*(f+U)+G];O+=b[de],i&&D.push("strokeText",Q),r&&V.push("fillText",Q),++de}return Array.prototype.push.apply(P,D),Array.prototype.push.apply(P,V),this.labels_[s]=C,C}replayTextBackground_(e,n,r,i,s,o,a){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,n),o&&(this.alignAndScaleFill_=o[2],e.fillStyle=o[1],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,n,r,i,s,o,a,l,c,u,h,f,g,y,_,b){a*=f[0],l*=f[1];let T=r-a,A=i-l;const I=s+c>e?e-c:s,P=o+u>n?n-u:o,N=y[3]+I*f[0]+y[1],L=y[0]+P*f[1]+y[2],C=T-y[3],M=A-y[0];(_||h!==0)&&(rm[0]=C,im[0]=C,rm[1]=M,uf[1]=M,uf[0]=C+N,hf[0]=uf[0],hf[1]=M+L,im[1]=hf[1]);let O;return h!==0?(O=mu(Ws(),r,i,1,1,h,-r,-i),Zi(O,rm),Zi(O,uf),Zi(O,hf),Zi(O,im),pp(Math.min(rm[0],uf[0],hf[0],im[0]),Math.min(rm[1],uf[1],hf[1],im[1]),Math.max(rm[0],uf[0],hf[0],im[0]),Math.max(rm[1],uf[1],hf[1],im[1]),c_)):pp(Math.min(C,C+N),Math.min(M,M+L),Math.max(C,C+N),Math.max(M,M+L),c_),g&&(T=Math.round(T),A=Math.round(A)),{drawImageX:T,drawImageY:A,drawImageW:I,drawImageH:P,originX:c,originY:u,declutterBox:{minX:c_[0],minY:c_[1],maxX:c_[2],maxY:c_[3],value:b},canvasTransform:O,scale:f}}replayImageOrLabel_(e,n,r,i,s,o,a){const l=!!(o||a),c=i.declutterBox,u=a?a[2]*i.scale[0]/2:0;return c.minX-u<=n[0]&&c.maxX+u>=0&&c.minY-u<=n[1]&&c.maxY+u>=0&&(l&&this.replayTextBackground_(e,rm,uf,hf,im,o,a),xAe(e,i.canvasTransform,s,r,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(e){const n=this.alignAndScaleFill_;if(n){const r=Zi(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(r[0]%i,r[1]%i),n!==1&&e.scale(n,n),e.rotate(this.viewRotation_)}e.fill(),n&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],n[1]&&(e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6]))}drawLabelWithPointPlacement_(e,n,r,i){const s=this.textStates[n],o=this.createLabel(e,n,i,r),a=this.strokeStates[r],l=this.pixelRatio,c=L6(Array.isArray(e)?e[0]:e,s.textAlign||vk),u=H3[s.textBaseline||B3],h=a&&a.lineWidth?a.lineWidth:0,f=o.width/l-2*s.scale[0],g=c*f+2*(.5-c)*h,y=u*o.height/l+2*(.5-u)*h;return{label:o,anchorX:g,anchorY:y}}execute_(e,n,r,i,s,o,a,l){const c=this.zIndexContext_;let u;this.pixelCoordinates_&&Bd(r,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=xd(this.coordinates,0,this.coordinates.length,2,r,this.pixelCoordinates_),sle(this.renderedTransform_,r));let h=0;const f=i.length;let g=0,y,_,b,T,A,I,P,N,L,C,M,O,D,V=0,U=0;const G=this.coordinateCache_,de=this.viewRotation_,ke=Math.round(Math.atan2(-r[1],r[0])*1e12)/1e12,Ue={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:de},Ne=this.instructions!=i||this.overlaps?0:200;let fe,De,Ce,Q;for(;h<f;){const W=i[h];switch(W[0]){case ln.BEGIN_GEOMETRY:fe=W[1],Q=W[3],fe.getGeometry()?a!==void 0&&!oa(a,Q.getExtent())?h=W[2]+1:++h:h=W[2],c&&(c.zIndex=W[4]);break;case ln.BEGIN_PATH:V>Ne&&(this.fill_(e),V=0),U>Ne&&(e.stroke(),U=0),!V&&!U&&(e.beginPath(),A=NaN,I=NaN),++h;break;case ln.CIRCLE:g=W[1];const ie=u[g],le=u[g+1],ve=u[g+2],qe=u[g+3],Ke=ve-ie,Se=qe-le,we=Math.sqrt(Ke*Ke+Se*Se);e.moveTo(ie+we,le),e.arc(ie,le,we,0,2*Math.PI,!0),++h;break;case ln.CLOSE_PATH:e.closePath(),++h;break;case ln.CUSTOM:g=W[1],y=W[2];const Dt=W[3],Ye=W[4],on=W[5];Ue.geometry=Dt,Ue.feature=fe,h in G||(G[h]=[]);const jt=G[h];on?on(u,g,y,2,jt):(jt[0]=u[g],jt[1]=u[g+1],jt.length=2),c&&(c.zIndex=W[6]),Ye(jt,Ue),++h;break;case ln.DRAW_IMAGE:g=W[1],y=W[2],L=W[3],_=W[4],b=W[5];let pn=W[6];const _n=W[7],dt=W[8],hr=W[9],zn=W[10];let Hn=W[11];const ei=W[12];let _o=W[13];T=W[14]||"declutter";const Rr=W[15];if(!L&&W.length>=20){C=W[19],M=W[20],O=W[21],D=W[22];const Ve=this.drawLabelWithPointPlacement_(C,M,O,D);L=Ve.label,W[3]=L;const ee=W[23];_=(Ve.anchorX-ee)*this.pixelRatio,W[4]=_;const ge=W[24];b=(Ve.anchorY-ge)*this.pixelRatio,W[5]=b,pn=L.height,W[6]=pn,_o=L.width,W[13]=_o}let Ai;W.length>25&&(Ai=W[25]);let Ls,_t,Qn;W.length>17?(Ls=W[16],_t=W[17],Qn=W[18]):(Ls=Dy,_t=null,Qn=null),zn&&ke?Hn+=de:!zn&&!ke&&(Hn-=de);let dr=0;for(;g<y;g+=2){if(Ai&&Ai[dr++]<_o/this.pixelRatio)continue;const Ve=this.calculateImageOrLabelDimensions_(L.width,L.height,u[g],u[g+1],_o,pn,_,b,dt,hr,Hn,ei,s,Ls,!!_t||!!Qn,fe),ee=[e,n,L,Ve,_n,_t,Qn];if(l){let ge,je,Je;if(Rr){const et=y-g;if(!Rr[et]){Rr[et]={args:ee,declutterMode:T};continue}const Mt=Rr[et];ge=Mt.args,je=Mt.declutterMode,delete Rr[et],Je=KX(ge)}let ze,nt;if(ge&&(je!=="declutter"||!l.collides(Je))&&(ze=!0),(T!=="declutter"||!l.collides(Ve.declutterBox))&&(nt=!0),je==="declutter"&&T==="declutter"){const et=ze&&nt;ze=et,nt=et}ze&&(je!=="none"&&l.insert(Je),this.replayImageOrLabel_.apply(this,ge)),nt&&(T!=="none"&&l.insert(Ve.declutterBox),this.replayImageOrLabel_.apply(this,ee))}else this.replayImageOrLabel_.apply(this,ee)}++h;break;case ln.DRAW_CHARS:const Ft=W[1],jn=W[2],en=W[3],$o=W[4];D=W[5];const Gi=W[6],Ds=W[7],Nn=W[8];O=W[9];const Ii=W[10];C=W[11],Array.isArray(C)&&(C=C.reduce(rIe,"")),M=W[12];const He=[W[13],W[13]];T=W[14]||"declutter";const Ae=W[15],Ie=this.textStates[M],sn=Ie.font,z=[Ie.scale[0]*Ds,Ie.scale[1]*Ds];let Et;sn in this.widths_?Et=this.widths_[sn]:(Et={},this.widths_[sn]=Et);const X=pG(u,Ft,jn,2),ae=Math.abs(z[0])*DX(sn,C,Et);if($o||ae<=X){const Ve=this.textStates[M].textAlign,ee=(X-ae)*L6(C,Ve),ge=tIe(u,Ft,jn,2,C,ee,Gi,Math.abs(z[0]),DX,sn,Et,ke?0:this.viewRotation_,Ae);e:if(ge){const je=[];let Je,ze,nt,et,Mt;if(O)for(Je=0,ze=ge.length;Je<ze;++Je){Mt=ge[Je],nt=Mt[4],et=this.createLabel(nt,M,"",O),_=Mt[2]+(z[0]<0?-Ii:Ii),b=en*et.height+(.5-en)*2*Ii*z[1]/z[0]-Nn;const zt=this.calculateImageOrLabelDimensions_(et.width,et.height,Mt[0],Mt[1],et.width,et.height,_,b,0,0,Mt[3],He,!1,Dy,!1,fe);if(l&&T==="declutter"&&l.collides(zt.declutterBox))break e;je.push([e,n,et,zt,1,null,null])}if(D)for(Je=0,ze=ge.length;Je<ze;++Je){Mt=ge[Je],nt=Mt[4],et=this.createLabel(nt,M,D,""),_=Mt[2],b=en*et.height-Nn;const zt=this.calculateImageOrLabelDimensions_(et.width,et.height,Mt[0],Mt[1],et.width,et.height,_,b,0,0,Mt[3],He,!1,Dy,!1,fe);if(l&&T==="declutter"&&l.collides(zt.declutterBox))break e;je.push([e,n,et,zt,1,null,null])}l&&T!=="none"&&l.load(je.map(KX));for(let zt=0,yn=je.length;zt<yn;++zt)this.replayImageOrLabel_.apply(this,je[zt])}}++h;break;case ln.END_GEOMETRY:if(o!==void 0){fe=W[1];const Ve=o(fe,Q,T);if(Ve)return Ve}++h;break;case ln.FILL:Ne?V++:this.fill_(e),++h;break;case ln.MOVE_TO_LINE_TO:for(g=W[1],y=W[2],De=u[g],Ce=u[g+1],e.moveTo(De,Ce),A=De+.5|0,I=Ce+.5|0,g+=2;g<y;g+=2)De=u[g],Ce=u[g+1],P=De+.5|0,N=Ce+.5|0,(g==y-2||P!==A||N!==I)&&(e.lineTo(De,Ce),A=P,I=N);++h;break;case ln.SET_FILL_STYLE:this.alignAndScaleFill_=W[2],V&&(this.fill_(e),V=0,U&&(e.stroke(),U=0)),e.fillStyle=W[1],++h;break;case ln.SET_STROKE_STYLE:U&&(e.stroke(),U=0),this.setStrokeStyle_(e,W),++h;break;case ln.STROKE:Ne?U++:e.stroke(),++h;break;default:++h;break}}V&&this.fill_(e),U&&e.stroke()}execute(e,n,r,i,s,o){this.viewRotation_=i,this.execute_(e,n,r,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,n,r,i,s){return this.viewRotation_=r,this.execute_(e,[e.canvas.width,e.canvas.height],n,this.hitDetectionInstructions,!0,i,s)}}const Sy=["Polygon","Circle","LineString","Image","Text","Default"],Vle=["Image","Text"],sIe=Sy.filter(t=>!Vle.includes(t));class oIe{constructor(e,n,r,i,s,o,a){this.maxExtent_=e,this.overlaps_=i,this.pixelRatio_=r,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ws(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(e,n){const r=this.getClipCoords(n);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}createExecutors_(e,n){for(const r in e){let i=this.executorsByZIndex_[r];i===void 0&&(i={},this.executorsByZIndex_[r]=i);const s=e[r];for(const o in s){const a=s[o];i[o]=new iIe(this.resolution_,this.pixelRatio_,this.overlaps_,a,n)}}}hasExecutors(e){for(const n in this.executorsByZIndex_){const r=this.executorsByZIndex_[n];for(let i=0,s=e.length;i<s;++i)if(e[i]in r)return!0}return!1}forEachFeatureAtCoordinate(e,n,r,i,s,o){i=Math.round(i);const a=i*2+1,l=mu(this.hitDetectionTransform_,i+.5,i+.5,1/n,-1/n,-r,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Rs(a,a));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=Wa(),tT(h,e),sh(h,n*(this.renderBuffer_+i),h));const f=aIe(i);let g;function y(N,L,C){const M=u.getImageData(0,0,a,a).data;for(let O=0,D=f.length;O<D;O++)if(M[f[O]]>0){if(!o||C==="none"||g!=="Image"&&g!=="Text"||o.includes(N)){const V=(f[O]-3)/4,U=i-V%a,G=i-(V/a|0),de=s(N,L,U*U+G*G);if(de)return de}u.clearRect(0,0,a,a);break}}const _=Object.keys(this.executorsByZIndex_).map(Number);_.sort(ep);let b,T,A,I,P;for(b=_.length-1;b>=0;--b){const N=_[b].toString();for(A=this.executorsByZIndex_[N],T=Sy.length-1;T>=0;--T)if(g=Sy[T],I=A[g],I!==void 0&&(P=I.executeHitDetection(u,l,r,y,h),P))return P}}getClipCoords(e){const n=this.maxExtent_;if(!n)return null;const r=n[0],i=n[1],s=n[2],o=n[3],a=[r,i,r,o,s,o,s,i];return xd(a,0,8,2,e,a),a}isEmpty(){return b1(this.executorsByZIndex_)}execute(e,n,r,i,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?GTe:ep),o=o||Sy;const c=Sy.length;for(let u=0,h=l.length;u<h;++u){const f=l[u].toString(),g=this.executorsByZIndex_[f];for(let y=0,_=o.length;y<_;++y){const b=o[y],T=g[b];if(T!==void 0){const A=a===null?void 0:T.getZIndexContext(),I=A?A.getContext():e,P=this.maxExtent_&&b!=="Image"&&b!=="Text";if(P&&(I.save(),this.clip(I,r)),!A||b==="Text"||b==="Image"?T.execute(I,n,r,i,s,a):A.pushFunction(N=>T.execute(N,n,r,i,s,a)),P&&I.restore(),A){A.offset();const N=l[u]*c+Sy.indexOf(b);this.deferredZIndexContexts_[N]||(this.deferredZIndexContexts_[N]=[]),this.deferredZIndexContexts_[N].push(A)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,n=Object.keys(e).map(Number).sort(ep);for(let r=0,i=n.length;r<i;++r)e[n[r]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[n[r]].length=0}}const D6={};function aIe(t){if(D6[t]!==void 0)return D6[t];const e=t*2+1,n=t*t,r=new Array(n+1);for(let s=0;s<=t;++s)for(let o=0;o<=t;++o){const a=s*s+o*o;if(a>n)break;let l=r[a];l||(l=[],r[a]=l),l.push(((t+s)*e+(t+o))*4+3),s>0&&l.push(((t-s)*e+(t+o))*4+3),o>0&&(l.push(((t+s)*e+(t-o))*4+3),s>0&&l.push(((t-s)*e+(t-o))*4+3))}const i=[];for(let s=0,o=r.length;s<o;++s)r[s]&&i.push(...r[s]);return D6[t]=i,i}function XX(t,e,n,r){return n!==void 0&&r!==void 0?[n/t,r/e]:n!==void 0?n/t:r!==void 0?r/e:1}let qA=class zle extends j5{constructor(e){e=e||{};const n=e.opacity!==void 0?e.opacity:1,r=e.rotation!==void 0?e.rotation:0,i=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:r,scale:i,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;ur(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||Qt(o)),ur(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),ur(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=Vt.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?Vt.LOADED:Vt.IDLE:l=Vt.LOADING:l=Vt.LOADED),this.color_=e.color!==void 0?gu(e.color):null,this.iconImage_=U3(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let c,u;if(e.size)[c,u]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)c=h.width,u=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const g=this.iconImage_.getSize();this.setScale(XX(g[0],g[1],e.width,e.height))};this.listenImageChange(f);return}}c!==void 0&&this.setScale(XX(c,u,e.width,e.height))}}clone(){let e,n,r;return this.initialOptions_?(n=this.initialOptions_.width,r=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new zle({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:r,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const i=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!i)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=i[0]),this.anchorYUnits_=="fraction"&&(e[1]*=i[1])}if(this.anchorOrigin_!="top-left"){if(!i)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+i[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+i[1])}this.normalizedAnchor_=e}const n=this.getDisplacement(),r=this.getScaleArray();return[e[0]-n[0]/r[0],e[1]+n[1]/r[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),r=this.iconImage_.getSize();if(!n||!r)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=r[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=r[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}setSrc(e){this.iconImage_=U3(null,e,this.crossOrigin_,Vt.IDLE,this.color_)}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Vt.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Vt.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(wn.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(wn.CHANGE,e)}ready(){return this.iconImage_.ready()}};const hd=.5;function lIe(t,e,n,r,i,s,o,a,l){const c=i,u=t[0]*hd,h=t[1]*hd,f=Rs(u,h);f.imageSmoothingEnabled=!1;const g=f.canvas,y=new bAe(f,hd,i,null,o,a,null),_=n.length,b=Math.floor((256*256*256-1)/_),T={};for(let I=1;I<=_;++I){const P=n[I-1],N=P.getStyleFunction()||r;if(!N)continue;let L=N(P,s);if(!L)continue;Array.isArray(L)||(L=[L]);const M=(I*b).toString(16).padStart(7,"#00000");for(let O=0,D=L.length;O<D;++O){const V=L[O],U=V.getGeometryFunction()(P);if(!U||!oa(c,U.getExtent()))continue;const G=V.clone(),de=G.getFill();de&&de.setColor(M);const ke=G.getStroke();ke&&(ke.setColor(M),ke.setLineDash(null)),G.setText(void 0);const Ue=V.getImage();if(Ue){const Ce=Ue.getImageSize();if(!Ce)continue;const Q=Rs(Ce[0],Ce[1],void 0,{alpha:!1}),W=Q.canvas;Q.fillStyle=M,Q.fillRect(0,0,W.width,W.height),G.setImage(new qA({img:W,anchor:Ue.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Ue.getOrigin(),opacity:1,size:Ue.getSize(),scale:Ue.getScale(),rotation:Ue.getRotation(),rotateWithView:Ue.getRotateWithView()}))}const Ne=G.getZIndex()||0;let fe=T[Ne];fe||(fe={},T[Ne]=fe,fe.Polygon=[],fe.Circle=[],fe.LineString=[],fe.Point=[]);const De=U.getType();if(De==="GeometryCollection"){const Ce=U.getGeometriesArrayRecursive();for(let Q=0,W=Ce.length;Q<W;++Q){const ne=Ce[Q];fe[ne.getType().replace("Multi","")].push(ne,G)}}else fe[De.replace("Multi","")].push(U,G)}}const A=Object.keys(T).map(Number).sort(ep);for(let I=0,P=A.length;I<P;++I){const N=T[A[I]];for(const L in N){const C=N[L];for(let M=0,O=C.length;M<O;M+=2){y.setStyle(C[M+1]);for(let D=0,V=e.length;D<V;++D)y.setTransform(e[D]),y.drawGeometry(C[M])}}}return f.getImageData(0,0,g.width,g.height)}function cIe(t,e,n){const r=[];if(n){const i=Math.floor(Math.round(t[0])*hd),s=Math.floor(Math.round(t[1])*hd),o=(ri(i,0,n.width-1)+ri(s,0,n.height-1)*n.width)*4,a=n.data[o],l=n.data[o+1],u=n.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);u&&u%h===0&&r.push(e[u/h-1])}return r}class rT extends Tc{constructor(e,n,r,i){super(e),this.inversePixelTransform=n,this.frameState=r,this.context=i}}const uIe=5;class Gle extends zA{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=uIe}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return bn()}getData(e){return null}prepareFrame(e){return bn()}renderFrame(e,n){return bn()}forEachFeatureAtCoordinate(e,n,r,i,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const n=e.target;(n.getState()===Vt.LOADED||n.getState()===Vt.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=Vt.LOADED&&n!=Vt.ERROR&&e.addEventListener(wn.CHANGE,this.boundHandleImageChange_),n==Vt.IDLE&&(e.load(),n=e.getState()),n==Vt.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const ZX=[];let U_=null;function hIe(){U_=Rs(1,1,void 0,{willReadFrequently:!0})}class kG extends Gle{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Ws(),this.pixelTransform=Ws(),this.inversePixelTransform=Ws(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,n,r){U_||hIe(),U_.clearRect(0,0,1,1);let i;try{U_.drawImage(e,n,r,1,1,0,0,1,1),i=U_.getImageData(0,0,1,1).data}catch{return U_=null,null}return i}getBackground(e){let r=this.getLayer().getBackground();return typeof r=="function"&&(r=r(e.viewState.resolution)),r||void 0}useContainer(e,n,r){const i=this.getLayer().getClassName();let s,o;if(e&&e.className===i&&(!r||e&&e.style.backgroundColor&&Bd(gu(e.style.backgroundColor),gu(r)))){const a=e.firstElementChild;tg(a)&&(o=a.getContext("2d"))}if(o&&Lke(o.canvas.style.transform,n)?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=uc?yle():document.createElement("div"),s.className=i;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=Rs();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(e,n,r){const i=lv(r),s=I5(r),o=A5(r),a=k5(r);Zi(n.coordinateToPixelTransform,i),Zi(n.coordinateToPixelTransform,s),Zi(n.coordinateToPixelTransform,o),Zi(n.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Zi(l,i),Zi(l,s),Zi(l,o),Zi(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(i[0]),Math.round(i[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,n){const r=e.extent,i=e.viewState.resolution,s=e.viewState.rotation,o=e.pixelRatio,a=Math.round(Xn(r)/i*o),l=Math.round(Ps(r)/i*o);mu(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/o,1/o,s,-a/2,-l/2),pk(this.inversePixelTransform,this.pixelTransform);const c=Oke(this.pixelTransform);if(this.useContainer(n,c,this.getBackground(e)),!this.containerReused){const u=this.context.canvas;u.width!=a||u.height!=l?(u.width=a,u.height=l):this.context.clearRect(0,0,a,l),c!==u.style.transform&&(u.style.transform=c)}}dispatchRenderEvent_(e,n,r){const i=this.getLayer();if(i.hasListener(e)){const s=new rT(e,this.inversePixelTransform,r,n);i.dispatchEvent(s)}}preRender(e,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(co.PRERENDER,e,n)}postRender(e,n){n.declutter||this.dispatchRenderEvent_(co.POSTRENDER,e,n)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Fle),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(co.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(co.POSTRENDER,this.context,e))}getRenderTransform(e,n,r,i,s,o,a){const l=s/2,c=o/2,u=i/n,h=-u,f=-e[0]+a,g=-e[1];return mu(this.tempTransform,l,c,u,h,-r,f,g)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class dIe extends kG{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Wa(),this.wrappedRenderedExtent_=Wa(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,n,r){const i=n.extent,s=n.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),h=this.getLayer().getSource(),f=this.getLayer().getDeclutter(),g=n.pixelRatio,y=n.viewHints,_=!(y[Ts.ANIMATING]||y[Ts.INTERACTING]),b=this.context,T=Math.round(Xn(i)/a*g),A=Math.round(Ps(i)/a*g),I=h.getWrapX()&&l.canWrapX(),P=I?Xn(u):null,N=I?Math.ceil((i[2]-u[2])/P)+1:1;let L=I?Math.floor((i[0]-u[0])/P):0;do{let C=this.getRenderTransform(o,a,0,g,T,A,L*P);n.declutter&&(C=C.slice(0)),e.execute(b,[b.canvas.width,b.canvas.height],C,c,_,r===void 0?Sy:r?Vle:sIe,r?f&&n.declutter[f]:void 0)}while(++L<N)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Rs(this.context.canvas.width,this.context.canvas.height,ZX))}resetDrawContext_(){if(this.opacity_!==1&&this.targetContext_){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,L5(this.context),ZX.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,n){const r=e.layerStatesArray[e.layerIndex];this.opacity_=r.opacity;const i=e.viewState;this.prepareContainer(e,n);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(co.PRERENDER)||this.getLayer().hasListener(co.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),i.projection,this.clipped_=!1,a&&r.extent&&this.clipping){const l=oh(r.extent);a=oa(l,e.extent),this.clipped_=a&&!Jm(l,e.extent),this.clipped_&&this.clipUnrotated(s,e,l)}return a&&this.renderWorlds(o,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(n=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const r=this.frameState.size.slice(),i=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],h=r[0]*hd,f=r[1]*hd;u.push(this.getRenderTransform(i,s,o,hd,h,f,0).slice());const g=c.getSource(),y=a.getExtent();if(g.getWrapX()&&a.canWrapX()&&!Jm(y,l)){let _=l[0];const b=Xn(y);let T=0,A;for(;_<y[0];)--T,A=b*T,u.push(this.getRenderTransform(i,s,o,hd,h,f,A).slice()),_+=b;for(T=0,_=l[2];_>y[2];)++T,A=b*T,u.push(this.getRenderTransform(i,s,o,hd,h,f,A).slice()),_-=b}this.hitDetectionImageData_=lIe(r,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o,jX(s,this.renderedPixelRatio_))}n(cIe(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,r,i,s){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),c={},u=function(f,g,y){const _=Qt(f),b=c[_];if(b){if(b!==!0&&y<b.distanceSq){if(y===0)return c[_]=!0,s.splice(s.lastIndexOf(b),1),i(f,l,g);b.geometry=g,b.distanceSq=y}}else{if(y===0)return c[_]=!0,i(f,l,g);s.push(c[_]={feature:f,layer:l,geometry:g,distanceSq:y,callback:i})}},h=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,o,a,r,u,h?n.declutter?.[h]?.all().map(f=>f.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const n=this.getLayer(),r=n.getSource();if(!r)return!1;const i=e.viewHints[Ts.ANIMATING],s=e.viewHints[Ts.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&i||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,u=c.projection,h=c.resolution,f=e.pixelRatio,g=n.getRevision(),y=n.getRenderBuffer();let _=n.getRenderOrder();_===void 0&&(_=SAe);const b=c.center.slice(),T=sh(l,y*h),A=T.slice(),I=[T.slice()],P=u.getExtent();if(r.getWrapX()&&u.canWrapX()&&!Jm(P,e.extent)){const de=Xn(P),ke=Math.max(Xn(T)/2,de);T[0]=P[0]-ke,T[2]=P[2]+ke,Yae(b,u);const Ue=Hae(I[0],u);Ue[0]<P[0]&&Ue[2]<P[2]?I.push([Ue[0]+de,Ue[1],Ue[2]+de,Ue[3]]):Ue[0]>P[0]&&Ue[2]>P[2]&&I.push([Ue[0]-de,Ue[1],Ue[2]-de,Ue[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==g&&this.renderedRenderOrder_==_&&this.renderedFrameDeclutter_===!!e.declutter&&Jm(this.wrappedRenderedExtent_,T))return Bd(this.renderedExtent_,A)||(this.hitDetectionImageData_=null,this.renderedExtent_=A),this.renderedCenter_=b,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const N=new eIe(Ile(h,f),T,h,f);let L;for(let de=0,ke=I.length;de<ke;++de)r.loadFeatures(I[de],h,u);const C=jX(h,f);let M=!0;const O=(de,ke)=>{let Ue;const Ne=de.getStyleFunction()||n.getStyleFunction();if(Ne&&(Ue=Ne(de,h)),Ue){const fe=this.renderFeature(de,C,Ue,N,L,this.getLayer().getDeclutter(),ke);M=M&&!fe}},D=aG(T),V=r.getFeaturesInExtent(D);_&&V.sort(_);for(let de=0,ke=V.length;de<ke;++de)O(V[de],de);this.renderedFeatures_=V,this.ready=M;const U=N.finish(),G=new oIe(T,h,f,r.getOverlaps(),U,n.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=h,this.renderedRevision_=g,this.renderedRenderOrder_=_,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=A,this.wrappedRenderedExtent_=T,this.renderedCenter_=b,this.renderedProjection_=u,this.renderedPixelRatio_=f,this.replayGroup_=G,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,r,i,s,o,a){if(!r)return!1;let l=!1;if(Array.isArray(r))for(let c=0,u=r.length;c<u;++c)l=$X(i,e,r[c],n,this.boundHandleStyleImageChange_,s,o,a)||l;else l=$X(i,e,r,n,this.boundHandleStyleImageChange_,s,o,a);return l}}let uv=0;const Is=1<<uv++,Wt=1<<uv++,Us=1<<uv++,Ei=1<<uv++,Pl=1<<uv++,iu=1<<uv++,vC=Math.pow(2,uv)-1,AG={[Is]:"boolean",[Wt]:"number",[Us]:"string",[Ei]:"color",[Pl]:"number[]",[iu]:"size"},fIe=Object.keys(AG).map(Number).sort(ep);function pIe(t){return t in AG}function Ax(t){const e=[];for(const n of fIe)oS(t,n)&&e.push(AG[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function oS(t,e){return(t&e)===e}function sd(t,e){return t===e}class zs{constructor(e,n){if(!pIe(e))throw new Error(`literal expressions must have a specific type, got ${Ax(e)}`);this.type=e,this.value=n}}class Ule{constructor(e,n,...r){this.type=e,this.operator=n,this.args=r}}function IG(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function ho(t,e,n){switch(typeof t){case"boolean":{if(sd(e,Us))return new zs(Us,t?"true":"false");if(!oS(e,Is))throw new Error(`got a boolean, but expected ${Ax(e)}`);return new zs(Is,t)}case"number":{if(sd(e,iu))return new zs(iu,ja(t));if(sd(e,Is))return new zs(Is,!!t);if(sd(e,Us))return new zs(Us,t.toString());if(!oS(e,Wt))throw new Error(`got a number, but expected ${Ax(e)}`);return new zs(Wt,t)}case"string":{if(sd(e,Ei))return new zs(Ei,vG(t));if(sd(e,Is))return new zs(Is,!!t);if(!oS(e,Us))throw new Error(`got a string, but expected ${Ax(e)}`);return new zs(Us,t)}}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(t.length===0)throw new Error("empty expression");if(typeof t[0]=="string")return TIe(t,e,n);for(const r of t)if(typeof r!="number")throw new Error("expected an array of numbers");if(sd(e,iu)){if(t.length!==2)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new zs(iu,t)}if(sd(e,Ei)){if(t.length===3)return new zs(Ei,[...t,1]);if(t.length===4)return new zs(Ei,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!oS(e,Pl))throw new Error(`got an array of numbers, but expected ${Ax(e)}`);return new zs(Pl,t)}const Te={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},mIe={[Te.Get]:Tn($n(1,1/0),JX),[Te.Var]:Tn($n(1,1),gIe),[Te.Has]:Tn($n(1,1/0),JX),[Te.Id]:Tn(yIe,u_),[Te.Concat]:Tn($n(2,1/0),Sr(Us)),[Te.GeometryType]:Tn(vIe,u_),[Te.LineMetric]:Tn(u_),[Te.Resolution]:Tn(j6,u_),[Te.Zoom]:Tn(j6,u_),[Te.Time]:Tn(j6,u_),[Te.Any]:Tn($n(2,1/0),Sr(Is)),[Te.All]:Tn($n(2,1/0),Sr(Is)),[Te.Not]:Tn($n(1,1),Sr(Is)),[Te.Equal]:Tn($n(2,2),Sr(vC)),[Te.NotEqual]:Tn($n(2,2),Sr(vC)),[Te.GreaterThan]:Tn($n(2,2),Sr(Wt)),[Te.GreaterThanOrEqualTo]:Tn($n(2,2),Sr(Wt)),[Te.LessThan]:Tn($n(2,2),Sr(Wt)),[Te.LessThanOrEqualTo]:Tn($n(2,2),Sr(Wt)),[Te.Multiply]:Tn($n(2,1/0),QX),[Te.Coalesce]:Tn($n(2,1/0),QX),[Te.Divide]:Tn($n(2,2),Sr(Wt)),[Te.Add]:Tn($n(2,1/0),Sr(Wt)),[Te.Subtract]:Tn($n(2,2),Sr(Wt)),[Te.Clamp]:Tn($n(3,3),Sr(Wt)),[Te.Mod]:Tn($n(2,2),Sr(Wt)),[Te.Pow]:Tn($n(2,2),Sr(Wt)),[Te.Abs]:Tn($n(1,1),Sr(Wt)),[Te.Floor]:Tn($n(1,1),Sr(Wt)),[Te.Ceil]:Tn($n(1,1),Sr(Wt)),[Te.Round]:Tn($n(1,1),Sr(Wt)),[Te.Sin]:Tn($n(1,1),Sr(Wt)),[Te.Cos]:Tn($n(1,1),Sr(Wt)),[Te.Atan]:Tn($n(1,2),Sr(Wt)),[Te.Sqrt]:Tn($n(1,1),Sr(Wt)),[Te.Match]:Tn($n(4,1/0),eZ,xIe),[Te.Between]:Tn($n(3,3),Sr(Wt)),[Te.Interpolate]:Tn($n(6,1/0),eZ,wIe),[Te.Case]:Tn($n(3,1/0),_Ie,bIe),[Te.In]:Tn($n(2,2),EIe),[Te.Number]:Tn($n(1,1/0),Sr(vC)),[Te.String]:Tn($n(1,1/0),Sr(vC)),[Te.Array]:Tn($n(1,1/0),Sr(Wt)),[Te.Color]:Tn($n(1,4),Sr(Wt)),[Te.Band]:Tn($n(1,3),Sr(Wt)),[Te.Palette]:Tn($n(2,2),SIe),[Te.ToString]:Tn($n(1,1),Sr(Is|Wt|Us|Ei))};function JX(t,e,n){const r=t.length-1,i=new Array(r);for(let s=0;s<r;++s){const o=t[s+1];switch(typeof o){case"number":{i[s]=new zs(Wt,o);break}case"string":{i[s]=new zs(Us,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&n.properties.add(String(o))}return i}function gIe(t,e,n){const r=t[1];if(typeof r!="string")throw new Error("expected a string argument for var operation");return n.variables.add(r),[new zs(Us,r)]}function yIe(t,e,n){n.featureId=!0}function vIe(t,e,n){n.geometryType=!0}function j6(t,e,n){n.mapState=!0}function u_(t,e,n){const r=t[0];if(t.length!==1)throw new Error(`expected no arguments for ${r} operation`);return[]}function $n(t,e){return function(n,r,i){const s=n[0],o=n.length-1;if(t===e){if(o!==t){const a=t===1?"":"s";throw new Error(`expected ${t} argument${a} for ${s}, got ${o}`)}}else if(o<t||o>e){const a=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`expected ${a} arguments for ${s}, got ${o}`)}}}function QX(t,e,n){const r=t.length-1,i=new Array(r);for(let s=0;s<r;++s){const o=ho(t[s+1],e,n);i[s]=o}return i}function Sr(t){return function(e,n,r){const i=e.length-1,s=new Array(i);for(let o=0;o<i;++o){const a=ho(e[o+1],t,r);s[o]=a}return s}}function _Ie(t,e,n){const r=t[0],i=t.length-1;if(i%2===0)throw new Error(`expected an odd number of arguments for ${r}, got ${i} instead`)}function eZ(t,e,n){const r=t[0],i=t.length-1;if(i%2===1)throw new Error(`expected an even number of arguments for operation ${r}, got ${i} instead`)}function xIe(t,e,n){const r=t.length-1,i=Us|Wt|Is,s=ho(t[1],i,n),o=ho(t[t.length-1],e,n),a=new Array(r-2);for(let l=0;l<r-2;l+=2){try{const c=ho(t[l+2],s.type,n);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+1} of match expression: ${c.message}`)}try{const c=ho(t[l+3],o.type,n);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+2} of match expression: ${c.message}`)}}return[s,...a,o]}function wIe(t,e,n){const r=t[1];let i;switch(r[0]){case"linear":i=1;break;case"exponential":const l=r[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);i=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(r)}`)}const s=new zs(Wt,i);let o;try{o=ho(t[2],Wt,n)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(t.length-3);for(let l=0;l<a.length;l+=2){try{const c=ho(t[l+3],Wt,n);a[l]=c}catch(c){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${c.message}`)}try{const c=ho(t[l+4],e,n);a[l+1]=c}catch(c){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${c.message}`)}}return[s,o,...a]}function bIe(t,e,n){const r=ho(t[t.length-1],e,n),i=new Array(t.length-1);for(let s=0;s<i.length-1;s+=2){try{const o=ho(t[s+1],Is,n);i[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{const o=ho(t[s+2],r.type,n);i[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return i[i.length-1]=r,i}function EIe(t,e,n){let r=t[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');let i;if(typeof r[0]=="string"){if(r[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=Us}else i=Wt;const s=new Array(r.length);for(let a=0;a<s.length;a++)try{const l=ho(r[a],i,n);s[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[ho(t[1],i,n),...s]}function SIe(t,e,n){let r;try{r=ho(t[1],Wt,n)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const i=t[2];if(!Array.isArray(i))throw new Error("the second argument of palette must be an array");const s=new Array(i.length);for(let o=0;o<s.length;o++){let a;try{a=ho(i[o],Ei,n)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof zs))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=a}return[r,...s]}function Tn(...t){return function(e,n,r){const i=e[0];let s;for(let o=0;o<t.length;o++){const a=t[o](e,n,r);if(o==t.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");s=a}}return new Ule(n,i,...s)}}function TIe(t,e,n){const r=t[0],i=mIe[r];if(!i)throw new Error(`unknown operator: ${r}`);return i(t,e,n)}function PG(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return PG(t.getGeometries()[0]);default:return""}}function Ble(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Ap(t,e,n){const r=ho(t,e,n);return _h(r)}function _h(t,e){if(t instanceof zs){if(t.type===Ei&&typeof t.value=="string"){const r=vG(t.value);return function(){return r}}return function(){return t.value}}const n=t.operator;switch(n){case Te.Number:case Te.String:case Te.Coalesce:return kIe(t);case Te.Get:case Te.Var:case Te.Has:return AIe(t);case Te.Id:return r=>r.featureId;case Te.GeometryType:return r=>r.geometryType;case Te.Concat:{const r=t.args.map(i=>_h(i));return i=>"".concat(...r.map(s=>s(i).toString()))}case Te.Resolution:return r=>r.resolution;case Te.Any:case Te.All:case Te.Between:case Te.In:case Te.Not:return PIe(t);case Te.Equal:case Te.NotEqual:case Te.LessThan:case Te.LessThanOrEqualTo:case Te.GreaterThan:case Te.GreaterThanOrEqualTo:return IIe(t);case Te.Multiply:case Te.Divide:case Te.Add:case Te.Subtract:case Te.Clamp:case Te.Mod:case Te.Pow:case Te.Abs:case Te.Floor:case Te.Ceil:case Te.Round:case Te.Sin:case Te.Cos:case Te.Atan:case Te.Sqrt:return CIe(t);case Te.Case:return RIe(t);case Te.Match:return MIe(t);case Te.Interpolate:return NIe(t);case Te.ToString:return OIe(t);default:throw new Error(`Unsupported operator ${n}`)}}function kIe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=_h(t.args[s]);switch(n){case Te.Coalesce:return s=>{for(let o=0;o<r;++o){const a=i[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case Te.Number:case Te.String:return s=>{for(let o=0;o<r;++o){const a=i[o](s);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function AIe(t,e){const r=t.args[0].value;switch(t.operator){case Te.Get:return i=>{const s=t.args;let o=i.properties[r];for(let a=1,l=s.length;a<l;++a){const u=s[a].value;o=o[u]}return o};case Te.Var:return i=>i.variables[r];case Te.Has:return i=>{const s=t.args;if(!(r in i.properties))return!1;let o=i.properties[r];for(let a=1,l=s.length;a<l;++a){const u=s[a].value;if(!o||!Object.hasOwn(o,u))return!1;o=o[u]}return!0};default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function IIe(t,e){const n=t.operator,r=_h(t.args[0]),i=_h(t.args[1]);switch(n){case Te.Equal:return s=>r(s)===i(s);case Te.NotEqual:return s=>r(s)!==i(s);case Te.LessThan:return s=>r(s)<i(s);case Te.LessThanOrEqualTo:return s=>r(s)<=i(s);case Te.GreaterThan:return s=>r(s)>i(s);case Te.GreaterThanOrEqualTo:return s=>r(s)>=i(s);default:throw new Error(`Unsupported comparison operator ${n}`)}}function PIe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=_h(t.args[s]);switch(n){case Te.Any:return s=>{for(let o=0;o<r;++o)if(i[o](s))return!0;return!1};case Te.All:return s=>{for(let o=0;o<r;++o)if(!i[o](s))return!1;return!0};case Te.Between:return s=>{const o=i[0](s),a=i[1](s),l=i[2](s);return o>=a&&o<=l};case Te.In:return s=>{const o=i[0](s);for(let a=1;a<r;++a)if(o===i[a](s))return!0;return!1};case Te.Not:return s=>!i[0](s);default:throw new Error(`Unsupported logical operator ${n}`)}}function CIe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=_h(t.args[s]);switch(n){case Te.Multiply:return s=>{let o=1;for(let a=0;a<r;++a)o*=i[a](s);return o};case Te.Divide:return s=>i[0](s)/i[1](s);case Te.Add:return s=>{let o=0;for(let a=0;a<r;++a)o+=i[a](s);return o};case Te.Subtract:return s=>i[0](s)-i[1](s);case Te.Clamp:return s=>{const o=i[0](s),a=i[1](s);if(o<a)return a;const l=i[2](s);return o>l?l:o};case Te.Mod:return s=>i[0](s)%i[1](s);case Te.Pow:return s=>Math.pow(i[0](s),i[1](s));case Te.Abs:return s=>Math.abs(i[0](s));case Te.Floor:return s=>Math.floor(i[0](s));case Te.Ceil:return s=>Math.ceil(i[0](s));case Te.Round:return s=>Math.round(i[0](s));case Te.Sin:return s=>Math.sin(i[0](s));case Te.Cos:return s=>Math.cos(i[0](s));case Te.Atan:return r===2?s=>Math.atan2(i[0](s),i[1](s)):s=>Math.atan(i[0](s));case Te.Sqrt:return s=>Math.sqrt(i[0](s));default:throw new Error(`Unsupported numeric operator ${n}`)}}function RIe(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=_h(t.args[i]);return i=>{for(let s=0;s<n-1;s+=2)if(r[s](i))return r[s+1](i);return r[n-1](i)}}function MIe(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=_h(t.args[i]);return i=>{const s=r[0](i);for(let o=1;o<n-1;o+=2)if(s===r[o](i))return r[o+1](i);return r[n-1](i)}}function NIe(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=_h(t.args[i]);return i=>{const s=r[0](i),o=r[1](i);let a,l;for(let c=2;c<n;c+=2){const u=r[c](i);let h=r[c+1](i);const f=Array.isArray(h);if(f&&(h=lAe(h)),u>=o)return c===2?h:f?LIe(s,o,a,l,u,h):aS(s,o,a,l,u,h);a=u,l=h}return l}}function OIe(t,e){const n=t.operator,r=t.args.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=_h(t.args[s]);switch(n){case Te.ToString:return s=>{const o=i[0](s);return t.args[0].type===Ei?_G(o):o.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function aS(t,e,n,r,i,s){const o=i-n;if(o===0)return r;const a=e-n,l=t===1?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1);return r+l*(s-r)}function LIe(t,e,n,r,i,s){if(i-n===0)return r;const a=MX(r),l=MX(s);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const u=[aS(t,e,n,a[0],i,l[0]),aS(t,e,n,a[1],i,l[1]),a[2]+aS(t,e,n,0,i,c),aS(t,e,n,r[3],i,s[3])];return cAe(u)}function DIe(t){return!0}function jIe(t){const e=IG(),n=$Ie(t,e),r=Ble();return function(i,s){if(r.properties=i.getPropertiesInternal(),r.resolution=s,e.featureId){const o=i.getId();o!==void 0?r.featureId=o:r.featureId=null}return e.geometryType&&(r.geometryType=PG(i.getGeometry())),n(r)}}function tZ(t){const e=IG(),n=t.length,r=new Array(n);for(let o=0;o<n;++o)r[o]=XF(t[o],e);const i=Ble(),s=new Array(n);return function(o,a){if(i.properties=o.getPropertiesInternal(),i.resolution=a,e.featureId){const c=o.getId();c!==void 0?i.featureId=c:i.featureId=null}let l=0;for(let c=0;c<n;++c){const u=r[c](i);u&&(s[l]=u,l+=1)}return s.length=l,s}}function $Ie(t,e){const n=t.length,r=new Array(n);for(let i=0;i<n;++i){const s=t[i],o="filter"in s?Ap(s.filter,Is,e):DIe;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=XF(s.style[c],e)}else a=[XF(s.style,e)];r[i]={filter:o,styles:a}}return function(i){const s=[];let o=!1;for(let a=0;a<n;++a){const l=r[a].filter;if(l(i)&&!(t[a].else&&o)){o=!0;for(const c of r[a].styles){const u=c(i);u&&s.push(u)}}}return s}}function XF(t,e){const n=wk(t,"",e),r=bk(t,"",e),i=FIe(t,e),s=VIe(t,e),o=_l(t,"z-index",e);if(!n&&!r&&!i&&!s&&!b1(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new vn;return function(l){let c=!0;if(n){const u=n(l);u&&(c=!1),a.setFill(u)}if(r){const u=r(l);u&&(c=!1),a.setStroke(u)}if(i){const u=i(l);u&&(c=!1),a.setText(u)}if(s){const u=s(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function wk(t,e,n){let r;if(e+"fill-pattern-src"in t)r=BIe(t,e+"fill-",n);else{if(t[e+"fill-color"]==="none")return s=>null;r=CG(t,e+"fill-color",n)}if(!r)return null;const i=new Dn;return function(s){const o=r(s);return o===yG?null:(i.setColor(o),i)}}function bk(t,e,n){const r=_l(t,e+"stroke-width",n),i=CG(t,e+"stroke-color",n);if(!r&&!i)return null;const s=Vf(t,e+"stroke-line-cap",n),o=Vf(t,e+"stroke-line-join",n),a=Wle(t,e+"stroke-line-dash",n),l=_l(t,e+"stroke-line-dash-offset",n),c=_l(t,e+"stroke-miter-limit",n),u=new Pn;return function(h){if(i){const f=i(h);if(f===yG)return null;u.setColor(f)}if(r&&u.setWidth(r(h)),s){const f=s(h);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(f)}if(o){const f=o(h);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(f)}return a&&u.setLineDash(a(h)),l&&u.setLineDashOffset(l(h)),c&&u.setMiterLimit(c(h)),u}}function FIe(t,e){const n="text-",r=Vf(t,n+"value",e);if(!r)return null;const i=wk(t,n,e),s=wk(t,n+"background-",e),o=bk(t,n,e),a=bk(t,n+"background-",e),l=Vf(t,n+"font",e),c=_l(t,n+"max-angle",e),u=_l(t,n+"offset-x",e),h=_l(t,n+"offset-y",e),f=Jx(t,n+"overflow",e),g=Vf(t,n+"placement",e),y=_l(t,n+"repeat",e),_=F5(t,n+"scale",e),b=Jx(t,n+"rotate-with-view",e),T=_l(t,n+"rotation",e),A=Vf(t,n+"align",e),I=Vf(t,n+"justify",e),P=Vf(t,n+"baseline",e),N=Jx(t,n+"keep-upright",e),L=Wle(t,n+"padding",e),C=V5(t,n+"declutter-mode"),M=new pc({declutterMode:C});return function(O){if(M.setText(r(O)),i&&M.setFill(i(O)),s&&M.setBackgroundFill(s(O)),o&&M.setStroke(o(O)),a&&M.setBackgroundStroke(a(O)),l&&M.setFont(l(O)),c&&M.setMaxAngle(c(O)),u&&M.setOffsetX(u(O)),h&&M.setOffsetY(h(O)),f&&M.setOverflow(f(O)),g){const D=g(O);if(D!=="point"&&D!=="line")throw new Error("Expected point or line for text-placement");M.setPlacement(D)}if(y&&M.setRepeat(y(O)),_&&M.setScale(_(O)),b&&M.setRotateWithView(b(O)),T&&M.setRotation(T(O)),A){const D=A(O);if(D!=="left"&&D!=="center"&&D!=="right"&&D!=="end"&&D!=="start")throw new Error("Expected left, right, center, start, or end for text-align");M.setTextAlign(D)}if(I){const D=I(O);if(D!=="left"&&D!=="right"&&D!=="center")throw new Error("Expected left, right, or center for text-justify");M.setJustify(D)}if(P){const D=P(O);if(D!=="bottom"&&D!=="top"&&D!=="middle"&&D!=="alphabetic"&&D!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");M.setTextBaseline(D)}return L&&M.setPadding(L(O)),N&&M.setKeepUpright(N(O)),M}}function VIe(t,e){return"icon-src"in t?zIe(t,e):"shape-points"in t?GIe(t,e):"circle-radius"in t?UIe(t,e):null}function zIe(t,e){const n="icon-",r=n+"src",i=Hle(t[r],r),s=q3(t,n+"anchor",e),o=F5(t,n+"scale",e),a=_l(t,n+"opacity",e),l=q3(t,n+"displacement",e),c=_l(t,n+"rotation",e),u=Jx(t,n+"rotate-with-view",e),h=rZ(t,n+"anchor-origin"),f=iZ(t,n+"anchor-x-units"),g=iZ(t,n+"anchor-y-units"),y=KIe(t,n+"color"),_=HIe(t,n+"cross-origin"),b=qIe(t,n+"offset"),T=rZ(t,n+"offset-origin"),A=K3(t,n+"width"),I=K3(t,n+"height"),P=WIe(t,n+"size"),N=V5(t,n+"declutter-mode"),L=new qA({src:i,anchorOrigin:h,anchorXUnits:f,anchorYUnits:g,color:y,crossOrigin:_,offset:b,offsetOrigin:T,height:I,width:A,size:P,declutterMode:N});return function(C){return a&&L.setOpacity(a(C)),l&&L.setDisplacement(l(C)),c&&L.setRotation(c(C)),u&&L.setRotateWithView(u(C)),o&&L.setScale(o(C)),s&&L.setAnchor(s(C)),L}}function GIe(t,e){const n="shape-",r=n+"points",i=n+"radius",s=ZF(t[r],r),o=ZF(t[i],i),a=wk(t,n,e),l=bk(t,n,e),c=F5(t,n+"scale",e),u=q3(t,n+"displacement",e),h=_l(t,n+"rotation",e),f=Jx(t,n+"rotate-with-view",e),g=K3(t,n+"radius2"),y=K3(t,n+"angle"),_=V5(t,n+"declutter-mode"),b=new $5({points:s,radius:o,radius2:g,angle:y,declutterMode:_});return function(T){return a&&b.setFill(a(T)),l&&b.setStroke(l(T)),u&&b.setDisplacement(u(T)),h&&b.setRotation(h(T)),f&&b.setRotateWithView(f(T)),c&&b.setScale(c(T)),b}}function UIe(t,e){const n="circle-",r=wk(t,n,e),i=bk(t,n,e),s=_l(t,n+"radius",e),o=F5(t,n+"scale",e),a=q3(t,n+"displacement",e),l=_l(t,n+"rotation",e),c=Jx(t,n+"rotate-with-view",e),u=V5(t,n+"declutter-mode"),h=new ms({radius:5,declutterMode:u});return function(f){return s&&h.setRadius(s(f)),r&&h.setFill(r(f)),i&&h.setStroke(i(f)),a&&h.setDisplacement(a(f)),l&&h.setRotation(l(f)),c&&h.setRotateWithView(c(f)),o&&h.setScale(o(f)),h}}function _l(t,e,n){if(!(e in t))return;const r=Ap(t[e],Wt,n);return function(i){return ZF(r(i),e)}}function Vf(t,e,n){if(!(e in t))return null;const r=Ap(t[e],Us,n);return function(i){return Hle(r(i),e)}}function BIe(t,e,n){const r=Vf(t,e+"pattern-src",n),i=nZ(t,e+"pattern-offset",n),s=nZ(t,e+"pattern-size",n),o=CG(t,e+"color",n);return function(a){return{src:r(a),offset:i&&i(a),size:s&&s(a),color:o&&o(a)}}}function Jx(t,e,n){if(!(e in t))return null;const r=Ap(t[e],Is,n);return function(i){const s=r(i);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function CG(t,e,n){if(!(e in t))return null;const r=Ap(t[e],Ei,n);return function(i){return qle(r(i),e)}}function Wle(t,e,n){if(!(e in t))return null;const r=Ap(t[e],Pl,n);return function(i){return KA(r(i),e)}}function q3(t,e,n){if(!(e in t))return null;const r=Ap(t[e],Pl,n);return function(i){const s=KA(r(i),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function nZ(t,e,n){if(!(e in t))return null;const r=Ap(t[e],Pl,n);return function(i){return Kle(r(i),e)}}function F5(t,e,n){if(!(e in t))return null;const r=Ap(t[e],Pl|Wt,n);return function(i){return YIe(r(i),e)}}function K3(t,e){const n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function WIe(t,e){const n=t[e];if(n!==void 0){if(typeof n=="number")return ja(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function HIe(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function rZ(t,e){const n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function iZ(t,e){const n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function qIe(t,e){const n=t[e];if(n!==void 0)return KA(n,e)}function V5(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function KIe(t,e){const n=t[e];if(n!==void 0)return qle(n,e)}function KA(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let r=0;r<n;++r)if(typeof t[r]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function Hle(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function ZF(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function qle(t,e){if(typeof t=="string")return t;const n=KA(t,e),r=n.length;if(r<3||r>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function Kle(t,e){const n=KA(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}function YIe(t,e){return typeof t=="number"?t:Kle(t,e)}const Nu={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function sZ(t,e,n){return(function(r,i,s,o,a){if(!r)return;if(!i&&!e)return r;const l=e?0:s[0]*i,c=e?0:s[1]*i,u=a?a[0]:0,h=a?a[1]:0;let f=t[0]+l/2+u,g=t[2]-l/2+u,y=t[1]+c/2+h,_=t[3]-c/2+h;f>g&&(f=(g+f)/2,g=f),y>_&&(y=(_+y)/2,_=y);let b=ri(r[0],f,g),T=ri(r[1],y,_);if(o&&n&&i){const A=30*i;b+=-A*Math.log(1+Math.max(0,f-r[0])/A)+A*Math.log(1+Math.max(0,r[0]-g)/A),T+=-A*Math.log(1+Math.max(0,y-r[1])/A)+A*Math.log(1+Math.max(0,r[1]-_)/A)}return[b,T]})}function XIe(t){return t}function Yle(t){return Math.pow(t,3)}function eb(t){return 1-Yle(1-t)}function ZIe(t){return 3*t*t-2*t*t*t}function JIe(t){return t}function RG(t,e,n,r){const i=Xn(e)/n[0],s=Ps(e)/n[1];return r?Math.min(t,Math.max(i,s)):Math.min(t,Math.min(i,s))}function MG(t,e,n){let r=Math.min(t,e);const i=50;return r*=Math.log(1+i*Math.max(0,t/e-1))/i+1,n&&(r=Math.max(r,n),r/=Math.log(1+i*Math.max(0,n/t-1))/i+1),ri(r,n/2,e*2)}function QIe(t,e,n,r){return e=e!==void 0?e:!0,(function(i,s,o,a){if(i!==void 0){const l=t[0],c=t[t.length-1],u=n?RG(l,n,o,r):l;if(a)return e?MG(i,u,c):ri(i,c,u);const h=Math.min(u,i),f=Math.floor(T5(t,h,s));return t[f]>u&&f<t.length-1?t[f+1]:t[f]}})}function ePe(t,e,n,r,i,s){return r=r!==void 0?r:!0,n=n!==void 0?n:0,(function(o,a,l,c){if(o!==void 0){const u=i?RG(e,i,l,s):e;if(c)return r?MG(o,u,n):ri(o,n,u);const h=1e-9,f=Math.ceil(Math.log(e/u)/Math.log(t)-h),g=-a*(.5-h)+.5,y=Math.min(u,o),_=Math.floor(Math.log(e/y)/Math.log(t)+g),b=Math.max(f,_),T=e/Math.pow(t,b);return ri(T,n,u)}})}function oZ(t,e,n,r,i){return n=n!==void 0?n:!0,(function(s,o,a,l){if(s!==void 0){const c=r?RG(t,r,a,i):t;return!n||!l?ri(s,e,c):MG(s,c,e)}})}function NG(t){if(t!==void 0)return 0}function aZ(t){if(t!==void 0)return t}function tPe(t){const e=2*Math.PI/t;return(function(n,r){if(r)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n})}function nPe(t){const e=lu(5);return(function(n,r){return r||n===void 0?n:Math.abs(n)<=e?0:n})}const rPe=42,OG=256,$6=0;class dd extends Wd{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=sG(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&rle(),e.center&&(e.center=Li(e.center,this.projection_)),e.extent&&(e.extent=oh(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const n=Object.assign({},e);for(const a in Nu)delete n[a];this.setProperties(n,!0);const r=sPe(e);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=r.minZoom;const i=iPe(e),s=r.constraint,o=oPe(e);this.constraints_={center:i,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;const r=this.getCenterInternal();if(r){const i=e||[0,0,0,0];n=n||[0,0,0,0];const s=this.getResolution(),o=s/2*(i[3]-n[3]+n[1]-i[1]),a=s/2*(i[0]-n[0]+n[2]-i[2]);this.setCenterInternal([r[0]+o,r[1]-a])}}getUpdatedOptions_(e){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let r=0;r<n.length;++r){let i=arguments[r];i.center&&(i=Object.assign({},i),i.center=Li(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=Li(i.anchor,this.getProjection())),n[r]=i}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,r;n>1&&typeof arguments[n-1]=="function"&&(r=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const u=arguments[i];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(i===n){r&&_C(r,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;i<n;++i){const u=arguments[i],h={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||ZIe,callback:r};if(u.center&&(h.sourceCenter=o,h.targetCenter=u.center.slice(),o=h.targetCenter),u.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(u.zoom),a=h.targetResolution):u.resolution&&(h.sourceResolution=a,h.targetResolution=u.resolution,a=h.targetResolution),u.rotation!==void 0){h.sourceRotation=l;const f=vg(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+f,l=h.targetRotation}aPe(h)?h.complete=!0:s+=h.duration,c.push(h)}this.animations_.push(c),this.setHint(Ts.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Ts.ANIMATING]>0}getInteracting(){return this.hints_[Ts.INTERACTING]>0}cancelAnimations(){this.setHint(Ts.ANIMATING,-this.hints_[Ts.ANIMATING]);let e;for(let n=0,r=this.animations_.length;n<r;++n){const i=this.animations_[n];if(i[0].callback&&_C(i[0].callback,!1),!e)for(let s=0,o=i.length;s<o;++s){const a=i[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let n=!1;for(let r=this.animations_.length-1;r>=0;--r){const i=this.animations_[r];let s=!0;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l.complete)continue;const c=e-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const h=l.easing(u);if(l.sourceCenter){const f=l.sourceCenter[0],g=l.sourceCenter[1],y=l.targetCenter[0],_=l.targetCenter[1];this.nextCenter_=l.targetCenter;const b=f+h*(y-f),T=g+h*(_-g);this.targetCenter_=[b,T]}if(l.sourceResolution&&l.targetResolution){const f=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const g=this.getViewportSize_(this.getRotation()),y=this.constraints_.resolution(f,0,g,!0);this.targetCenter_=this.calculateCenterZoom(y,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=h===1?vg(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const g=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(g,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(s){this.animations_[r]=null,this.setHint(Ts.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=i[0].callback;o&&_C(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let r;const i=this.getCenterInternal();return i!==void 0&&(r=[i[0]-n[0],i[1]-n[1]],eG(r,e-this.getRotation()),QTe(r,n)),r}calculateCenterZoom(e,n){let r;const i=this.getCenterInternal(),s=this.getResolution();if(i!==void 0&&s!==void 0){const o=n[0]-e*(n[0]-i[0])/s,a=n[1]-e*(n[1]-i[1])/s;r=[o,a]}return r}getViewportSize_(e){const n=this.viewportSize_;if(e){const r=n[0],i=n[1];return[Math.abs(r*Math.cos(e))+Math.abs(i*Math.sin(e)),Math.abs(r*Math.sin(e))+Math.abs(i*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&k1(e,this.getProjection())}getCenterInternal(){return this.get(Nu.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const n=this.calculateExtentInternal(e);return aG(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();ur(n,"The view center is not defined");const r=this.getResolution();ur(r!==void 0,"The view resolution is not defined");const i=this.getRotation();return ur(i!==void 0,"The view rotation is not defined"),O3(n,r,i,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Nu.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(oh(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();const r=Xn(e)/n[0],i=Ps(e)/n[1];return Math.max(r,i)}getResolutionForValueFunction(e){e=e||2;const n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,i=Math.log(n/r)/Math.log(e);return(function(s){return n/Math.pow(e,s*i)})}getRotation(){return this.get(Nu.ROTATION)}getValueForResolutionFunction(e){const n=Math.log(e||2),r=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(r/i)/n;return(function(o){return Math.log(r/o)/n/s})}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e);const r=this.padding_;return r&&(n=[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]),n}getState(){const e=this.getProjection(),n=this.getResolution(),r=this.getRotation();let i=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();i=F6(i,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],n,r)}return{center:i.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:r,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,r,i;if(this.resolutions_){const s=T5(this.resolutions_,e,1);n=s,r=this.resolutions_[s],s==this.resolutions_.length-1?i=2:i=r/this.resolutions_[s+1]}else r=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(r/e)/Math.log(i)}getResolutionForZoom(e){if(this.resolutions_?.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=ri(Math.floor(e),0,this.resolutions_.length-2),r=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(r,ri(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let r;if(ur(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ur(!Z2(e),"Cannot fit empty extent provided as `geometry`");const i=oh(e,this.getProjection());r=VX(i)}else if(e.getType()==="Circle"){const i=oh(e.getExtent(),this.getProjection());r=VX(i),r.rotate(this.getRotation(),yh(i))}else r=e;this.fitInternal(r,n)}rotatedExtentForGeometry(e){const n=this.getRotation(),r=Math.cos(n),i=Math.sin(-n),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let h=0,f=s.length;h<f;h+=o){const g=s[h]*r-s[h+1]*i,y=s[h]*i+s[h+1]*r;a=Math.min(a,g),l=Math.min(l,y),c=Math.max(c,g),u=Math.max(u,y)}return[a,l,c,u]}fitInternal(e,n){n=n||{};let r=n.size;r||(r=this.getViewportSizeMinusPadding_());const i=n.padding!==void 0?n.padding:[0,0,0,0],s=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[r[0]-i[1]-i[3],r[1]-i[0]-i[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),h=Math.cos(c),f=yh(a);f[0]+=(i[1]-i[3])/2*l,f[1]+=(i[0]-i[2])/2*l;const g=f[0]*h-f[1]*u,y=f[1]*h+f[0]*u,_=this.getConstrainedCenter([g,y],l),b=n.callback?n.callback:hk;n.duration!==void 0?this.animateInternal({resolution:l,center:_,duration:n.duration,easing:n.easing},b):(this.targetResolution_=l,this.targetCenter_=_,this.applyTargetState_(!1,!0),_C(b,!0))}centerOn(e,n,r){this.centerOnInternal(Li(e,this.getProjection()),n,r)}centerOnInternal(e,n,r){this.setCenterInternal(F6(e,n,r,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,r,i){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-r),l=F6(e,i,[a[0]/2+o[3],a[1]/2+o[0]],n,r);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const n=k1(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){const n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&Li(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){const r=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,i,r);n&&(this.targetCenter_=this.calculateCenterZoom(s,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=Li(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){const r=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+e,r);n&&(this.targetCenter_=this.calculateCenterRotate(i,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&Li(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){const r=this.getAnimating()||this.getInteracting()||n,i=this.constraints_.rotation(this.targetRotation_,r),s=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,s,r),a=this.constraints_.center(this.targetCenter_,o,s,r,this.calculateCenterShift(this.targetCenter_,o,i,s));this.get(Nu.ROTATION)!==i&&this.set(Nu.ROTATION,i),this.get(Nu.RESOLUTION)!==o&&(this.set(Nu.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Nu.CENTER)||!Ia(this.get(Nu.CENTER),a))&&this.set(Nu.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,r){e=e!==void 0?e:200;const i=n||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,i,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}r=r||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Ia(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:eb,anchor:r}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Ts.INTERACTING,1)}endInteraction(e,n,r){r=r&&Li(r,this.getProjection()),this.endInteractionInternal(e,n,r)}endInteractionInternal(e,n,r){this.getInteracting()&&(this.setHint(Ts.INTERACTING,-1),this.resolveConstraints(e,n,r))}getConstrainedCenter(e,n){const r=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),r)}getConstrainedZoom(e,n){const r=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(r,n))}getConstrainedResolution(e,n){n=n||0;const r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,r)}}function _C(t,e){setTimeout(function(){t(e)},0)}function iPe(t){if(t.extent!==void 0){const n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return sZ(t.extent,t.constrainOnlyCenter,n)}const e=sG(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,sZ(n,!1,!1)}return XIe}function sPe(t){let e,n,r,o=t.minZoom!==void 0?t.minZoom:$6,a=t.maxZoom!==void 0?t.maxZoom:28;const l=t.zoomFactor!==void 0?t.zoomFactor:2,c=t.multiWorld!==void 0?t.multiWorld:!1,u=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,h=t.showFullExtent!==void 0?t.showFullExtent:!1,f=sG(t.projection,"EPSG:3857"),g=f.getExtent();let y=t.constrainOnlyCenter,_=t.extent;if(!c&&!_&&f.isGlobal()&&(y=!1,_=g),t.resolutions!==void 0){const b=t.resolutions;n=b[o],r=b[a]!==void 0?b[a]:b[b.length-1],t.constrainResolution?e=QIe(b,u,!y&&_,h):e=oZ(n,r,u,!y&&_,h)}else{const T=(g?Math.max(Xn(g),Ps(g)):360*e2.degrees/f.getMetersPerUnit())/OG/Math.pow(2,$6),A=T/Math.pow(2,28-$6);n=t.maxResolution,n!==void 0?o=0:n=T/Math.pow(l,o),r=t.minResolution,r===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?r=n/Math.pow(l,a):r=T/Math.pow(l,a):r=A),a=o+Math.floor(Math.log(n/r)/Math.log(l)),r=n/Math.pow(l,a-o),t.constrainResolution?e=ePe(l,n,r,u,!y&&_,h):e=oZ(n,r,u,!y&&_,h)}return{constraint:e,maxResolution:n,minResolution:r,minZoom:o,zoomFactor:l}}function oPe(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const n=t.constrainRotation;return n===void 0||n===!0?nPe():n===!1?aZ:typeof n=="number"?tPe(n):aZ}return NG}function aPe(t){return!(t.sourceCenter&&t.targetCenter&&!Ia(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function F6(t,e,n,r,i){const s=Math.cos(-i);let o=Math.sin(-i),a=t[0]*s-t[1]*o,l=t[1]*s+t[0]*o;a+=(e[0]/2-n[0])*r,l+=(n[1]-e[1]/2)*r,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}const kr={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class Xle extends Wd{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[kr.OPACITY]=e.opacity!==void 0?e.opacity:1,ur(typeof n[kr.OPACITY]=="number","Layer opacity must be a number"),n[kr.VISIBLE]=e.visible!==void 0?e.visible:!0,n[kr.Z_INDEX]=e.zIndex,n[kr.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[kr.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[kr.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[kr.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const n=this.state_||{layer:this,managed:e===void 0?!0:e},r=this.getZIndex();return n.opacity=ri(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=r===void 0&&!n.managed?1/0:r,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return bn()}getLayerStatesArray(e){return bn()}getExtent(){return this.get(kr.EXTENT)}getMaxResolution(){return this.get(kr.MAX_RESOLUTION)}getMinResolution(){return this.get(kr.MIN_RESOLUTION)}getMinZoom(){return this.get(kr.MIN_ZOOM)}getMaxZoom(){return this.get(kr.MAX_ZOOM)}getOpacity(){return this.get(kr.OPACITY)}getSourceState(){return bn()}getVisible(){return this.get(kr.VISIBLE)}getZIndex(){return this.get(kr.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(kr.EXTENT,e)}setMaxResolution(e){this.set(kr.MAX_RESOLUTION,e)}setMinResolution(e){this.set(kr.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(kr.MAX_ZOOM,e)}setMinZoom(e){this.set(kr.MIN_ZOOM,e)}setOpacity(e){ur(typeof e=="number","Layer opacity must be a number"),this.set(kr.OPACITY,e)}setVisible(e){this.set(kr.VISIBLE,e)}setZIndex(e){this.set(kr.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class YA extends Xle{constructor(e){const n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(kr.SOURCE,this.handleSourcePropertyChange_);const r=e.source?e.source:null;this.setSource(r)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(kr.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(ni(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Yn(e,wn.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n;const r=this.getMapInternal();!e&&r&&(e=r.getView()),e instanceof dd?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&r&&(n.layerStatesArray=r.getLayerGroup().getLayerStatesArray());let i;if(n.layerStatesArray){if(i=n.layerStatesArray.find(o=>o.layer===this),!i)return!1}else i=this.getLayerState();const s=this.getExtent();return LG(i,n.viewState)&&(!s||oa(s,n.extent))}getAttributions(e){if(!this.isVisible(e))return[];const n=this.getSource()?.getAttributions();if(!n)return[];const r=e instanceof dd?e.getViewStateAndExtent():e;let i=n(r);return Array.isArray(i)||(i=[i]),i}render(e,n){const r=this.getRenderer();return r.prepareFrame(e)?(this.rendered=!0,r.renderFrame(e,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,n){}renderDeferred(e){const n=this.getRenderer();n&&n.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(kr.MAP,e)}getMapInternal(){return this.get(kr.MAP)}setMap(e){this.mapPrecomposeKey_&&(ni(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ni(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Yn(e,co.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Yn(this,wn.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const n=e.frameState.layerStatesArray,r=this.getLayerState(!1);ur(!n.some(i=>i.layer===r.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(r)}setSource(e){this.set(kr.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function LG(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const r=e.zoom;return r>t.minZoom&&r<=t.maxZoom}const lZ={RENDER_ORDER:"renderOrder"};class z5 extends YA{constructor(e){e=e||{};const n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(lZ.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,n){const r=this.getDeclutter();r in e.declutter||(e.declutter[r]=new jle(9)),this.getRenderer().renderDeclutter(e,n)}setRenderOrder(e){this.set(lZ.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?$le:e;const n=lPe(e);this.styleFunction_=e===null?void 0:HAe(n),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function lPe(t){if(t===void 0)return $le;if(!t)return null;if(typeof t=="function"||t instanceof vn)return t;if(!Array.isArray(t))return tZ([t]);if(t.length===0)return[];const e=t.length,n=t[0];if(n instanceof vn){const i=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!(o instanceof vn))throw new Error("Expected a list of style instances");i[s]=o}return i}if("style"in n){const i=new Array(e);for(let s=0;s<e;++s){const o=t[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");i[s]=o}return jIe(i)}return tZ(t)}class Ol extends z5{constructor(e){super(e)}createRenderer(){return new dIe(this)}}const sm={ADDLAYER:"addlayer",REMOVELAYER:"removelayer"};class jm extends Tc{constructor(e,n){super(e),this.layer=n}}const V6={LAYERS:"layers"};let G5=class Zle extends Xle{constructor(e){e=e||{};const n=Object.assign({},e);delete n.layers;let r=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(V6.LAYERS,this.handleLayersChanged_),r?Array.isArray(r)?r=new Da(r.slice(),{unique:!0}):ur(typeof r.getArray=="function","Expected `layers` to be an array or a `Collection`"):r=new Da(void 0,{unique:!0}),this.setLayers(r)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(ni),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Yn(e,As.ADD,this.handleLayersAdd_,this),Yn(e,As.REMOVE,this.handleLayersRemove_,this));for(const r in this.listenerKeys_)this.listenerKeys_[r].forEach(ni);ov(this.listenerKeys_);const n=e.getArray();for(let r=0,i=n.length;r<i;r++){const s=n[r];this.registerLayerListeners_(s),this.dispatchEvent(new jm(sm.ADDLAYER,s))}this.changed()}registerLayerListeners_(e){const n=[Yn(e,Jw.PROPERTYCHANGE,this.handleLayerChange_,this),Yn(e,wn.CHANGE,this.handleLayerChange_,this)];e instanceof Zle&&n.push(Yn(e,sm.ADDLAYER,this.handleLayerGroupAdd_,this),Yn(e,sm.REMOVELAYER,this.handleLayerGroupRemove_,this)),this.listenerKeys_[Qt(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new jm(sm.ADDLAYER,e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new jm(sm.REMOVELAYER,e.layer))}handleLayersAdd_(e){const n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new jm(sm.ADDLAYER,n)),this.changed()}handleLayersRemove_(e){const n=e.element,r=Qt(n);this.listenerKeys_[r].forEach(ni),delete this.listenerKeys_[r],this.dispatchEvent(new jm(sm.REMOVELAYER,n)),this.changed()}getLayers(){return this.get(V6.LAYERS)}setLayers(e){const n=this.getLayers();if(n){const r=n.getArray();for(let i=0,s=r.length;i<s;++i)this.dispatchEvent(new jm(sm.REMOVELAYER,r[i]))}this.set(V6.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){const n=e!==void 0?e:[],r=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const i=this.getLayerState();let s=i.zIndex;!e&&i.zIndex===void 0&&(s=0);for(let o=r,a=n.length;o<a;o++){const l=n[o];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=tp(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=s)}return n}getSourceState(){return"ready"}};const cn={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Jle(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function JF(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}const Y3=34962,DG=34963,cPe=35044,z6=35048,uPe=5121,hPe=5123,dPe=5125,Qle=5126,cZ=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function fPe(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!Xke},e);const n=cZ.length;for(let r=0;r<n;++r)try{const i=t.getContext(cZ[r],e);if(i)return i}catch{}return null}const pPe={STATIC_DRAW:cPe};class G6{constructor(e,n){this.array_=null,this.type_=e,ur(e===Y3||e===DG,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=n!==void 0?n:pPe.STATIC_DRAW}ofSize(e){return this.array_=new(xC(this.type_))(e),this}fromArray(e){return this.array_=xC(this.type_).from(e),this}fromArrayBuffer(e){return this.array_=new(xC(this.type_))(e),this}getType(){return this.type_}getArray(){return this.array_}setArray(e){const n=xC(this.type_);if(!(e instanceof n))throw new Error(`Expected ${n}`);this.array_=e}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function xC(t){switch(t){case Y3:return Float32Array;case DG:return Uint32Array;default:return Float32Array}}const wC={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},mPe=`
  precision mediump float;

  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;

  uniform vec2 u_screenSize;

  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,gPe=`
  precision mediump float;

  uniform sampler2D u_image;
  uniform float u_opacity;

  varying vec2 v_texCoord;

  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;class uZ{constructor(e){this.gl_=e.webGlContext;const n=this.gl_;this.scaleRatio_=e.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer(),this.depthBuffer_=n.createRenderbuffer();const r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,e.vertexShader||mPe),n.compileShader(r);const i=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(i,e.fragmentShader||gPe),n.compileShader(i),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,r),n.attachShader(this.renderTargetProgram_,i),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer();const s=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array(s),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],e.uniforms&&Object.keys(e.uniforms).forEach(o=>{this.uniforms_.push({value:e.uniforms[o],location:n.getUniformLocation(this.renderTargetProgram_,o)})})}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(e){const n=this.getGL(),r=[n.drawingBufferWidth*this.scaleRatio_,n.drawingBufferHeight*this.scaleRatio_];if(n.bindFramebuffer(n.FRAMEBUFFER,this.getFrameBuffer()),n.bindRenderbuffer(n.RENDERBUFFER,this.getDepthBuffer()),n.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;const i=0,s=n.RGBA,o=0,a=n.RGBA,l=n.UNSIGNED_BYTE,c=null;n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),n.texImage2D(n.TEXTURE_2D,i,s,r[0],r[1],o,a,l,c),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.renderTargetTexture_,0),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,r[0],r[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthBuffer_)}}apply(e,n,r,i){const s=this.getGL(),o=e.size;if(s.bindFramebuffer(s.FRAMEBUFFER,n?n.getFrameBuffer():null),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,this.renderTargetTexture_),!n){const l=Qt(s.canvas);if(!e.renderTargets[l]){const c=s.getContextAttributes();c&&c.preserveDrawingBuffer&&(s.clearColor(0,0,0,0),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)),e.renderTargets[l]=!0}}s.disable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA),s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight),s.bindBuffer(s.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),s.useProgram(this.renderTargetProgram_),s.enableVertexAttribArray(this.renderTargetAttribLocation_),s.vertexAttribPointer(this.renderTargetAttribLocation_,2,s.FLOAT,!1,0,0),s.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),s.uniform1i(this.renderTargetTextureLocation_,0);const a=e.layerStatesArray[e.layerIndex].opacity;s.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(e),r&&r(s,e),s.drawArrays(s.TRIANGLES,0,6),i&&i(s,e)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(e){const n=this.getGL();let r,i=1;this.uniforms_.forEach(function(s){if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof ImageData)s.texture||(s.texture=n.createTexture()),n.activeTexture(n[`TEXTURE${i}`]),n.bindTexture(n.TEXTURE_2D,s.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),r instanceof ImageData?n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,r.width,r.height,0,n.UNSIGNED_BYTE,new Uint8Array(r.data)):n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),n.uniform1i(s.location,i++);else if(Array.isArray(r))switch(r.length){case 2:n.uniform2f(s.location,r[0],r[1]);return;case 3:n.uniform3f(s.location,r[0],r[1],r[2]);return;case 4:n.uniform4f(s.location,r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(s.location,r)})}}const _f={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Ao={UNSIGNED_BYTE:uPe,UNSIGNED_SHORT:hPe,UNSIGNED_INT:dPe,FLOAT:Qle},X3={};function hZ(t){return"shared/"+t}let dZ=0;function yPe(){const t="unique/"+dZ;return dZ+=1,t}function vPe(t){let e=X3[t];if(!e){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0",e={users:0,context:fPe(n)},X3[t]=e}return e.users+=1,e.context}function _Pe(t){const e=X3[t];if(!e||(e.users-=1,e.users>0))return;const n=e.context,r=n.getExtension("WEBGL_lose_context");r&&r.loseContext();const i=n.canvas;i.width=1,i.height=1,delete X3[t]}class xPe extends FA{constructor(e){super(),e=e||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=e.canvasCacheKey?hZ(e.canvasCacheKey):yPe(),this.gl_=vPe(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const n=this.gl_.canvas;n.addEventListener(wC.LOST,this.boundHandleWebGLContextLost_),n.addEventListener(wC.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Ws(),this.offsetScaleMatrix_=Ws(),this.tmpMat4_=Jle(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],e.uniforms&&this.setUniforms(e.uniforms),this.postProcessPasses_=e.postProcesses?e.postProcesses.map(r=>new uZ({webGlContext:this.gl_,scaleRatio:r.scaleRatio,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms})):[new uZ({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now(),this.maxAttributeCount_=this.gl_.getParameter(this.gl_.MAX_VERTEX_ATTRIBS)}setUniforms(e){this.uniforms_=[],this.addUniforms(e)}addUniforms(e){for(const n in e)this.uniforms_.push({name:n,value:e[n]})}canvasCacheKeyMatches(e){return this.canvasCacheKey_===hZ(e)}getExtension(e){if(e in this.extensionCache_)return this.extensionCache_[e];const n=this.gl_.getExtension(e);return this.extensionCache_[e]=n,n}getInstancedRenderingExtension_(){const e=this.getExtension("ANGLE_instanced_arrays");return ur(!!e,"WebGL extension 'ANGLE_instanced_arrays' is required for vector rendering"),e}bindBuffer(e){const n=this.gl_,r=Qt(e);let i=this.bufferCache_[r];if(!i){const s=n.createBuffer();i={buffer:e,webGlBuffer:s},this.bufferCache_[r]=i}n.bindBuffer(e.getType(),i.webGlBuffer)}flushBufferData(e){const n=this.gl_;this.bindBuffer(e),n.bufferData(e.getType(),e.getArray(),e.getUsage())}deleteBuffer(e){const n=Qt(e);delete this.bufferCache_[n]}disposeInternal(){const e=this.gl_.canvas;e.removeEventListener(wC.LOST,this.boundHandleWebGLContextLost_),e.removeEventListener(wC.RESTORED,this.boundHandleWebGLContextRestored_),_Pe(this.canvasCacheKey_),delete this.gl_}prepareDraw(e,n,r){const i=this.gl_,s=this.getCanvas(),o=e.size,a=e.pixelRatio;(s.width!==o[0]*a||s.height!==o[1]*a)&&(s.width=o[0]*a,s.height=o[1]*a,s.style.width=o[0]+"px",s.style.height=o[1]+"px");for(let l=this.postProcessPasses_.length-1;l>=0;l--)this.postProcessPasses_[l].init(e);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,n?i.ZERO:i.ONE_MINUS_SRC_ALPHA),r?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindFrameBuffer(e,n){const r=this.getGL();r.bindFramebuffer(r.FRAMEBUFFER,e),n&&r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,n,0)}bindInitialFrameBuffer(){const e=this.getGL(),n=this.postProcessPasses_[0].getFrameBuffer();e.bindFramebuffer(e.FRAMEBUFFER,n);const r=this.postProcessPasses_[0].getRenderTargetTexture();e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)}bindTexture(e,n,r){const i=this.gl_;i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,e),i.uniform1i(this.getUniformLocation(r),n)}bindAttribute(e,n,r){const i=this.getGL();this.bindBuffer(e);const s=this.getAttributeLocation(n);i.enableVertexAttribArray(s),i.vertexAttribPointer(s,r,i.FLOAT,!1,0,0)}prepareDrawToRenderTarget(e,n,r,i){const s=this.gl_,o=n.getSize();s.bindFramebuffer(s.FRAMEBUFFER,n.getFramebuffer()),s.bindRenderbuffer(s.RENDERBUFFER,n.getDepthbuffer()),s.viewport(0,0,o[0],o[1]),s.bindTexture(s.TEXTURE_2D,n.getTexture()),s.clearColor(0,0,0,0),s.depthRange(0,1),s.clearDepth(1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.enable(s.BLEND),s.blendFunc(s.ONE,r?s.ZERO:s.ONE_MINUS_SRC_ALPHA),i?(s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL)):s.disable(s.DEPTH_TEST)}drawElements(e,n){const r=this.gl_;this.getExtension("OES_element_index_uint");const i=r.UNSIGNED_INT,s=4,o=n-e,a=e*s;r.drawElements(r.TRIANGLES,o,i,a)}drawElementsInstanced(e,n,r){const i=this.gl_;this.getExtension("OES_element_index_uint");const s=this.getInstancedRenderingExtension_(),o=i.UNSIGNED_INT,a=4,l=n-e,c=e*a;s.drawElementsInstancedANGLE(i.TRIANGLES,l,o,c,r);for(let u=0;u<this.maxAttributeCount_;u++)s.vertexAttribDivisorANGLE(u,0)}finalizeDraw(e,n,r){for(let i=0,s=this.postProcessPasses_.length;i<s;i++)i===s-1?this.postProcessPasses_[i].apply(e,null,n,r):this.postProcessPasses_[i].apply(e,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(e){const n=e.size,r=e.viewState.rotation,i=e.pixelRatio;this.setUniformFloatValue(_f.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(_f.ZOOM,e.viewState.zoom),this.setUniformFloatValue(_f.RESOLUTION,e.viewState.resolution),this.setUniformFloatValue(_f.PIXEL_RATIO,i),this.setUniformFloatVec2(_f.VIEWPORT_SIZE_PX,[n[0],n[1]]),this.setUniformFloatValue(_f.ROTATION,r)}applyHitDetectionUniform(e){const n=this.getUniformLocation(_f.HIT_DETECTION);this.getGL().uniform1i(n,e?1:0),e&&this.setUniformFloatValue(_f.PIXEL_RATIO,.5)}applyUniforms(e){const n=this.gl_;let r,i=0;this.uniforms_.forEach(s=>{if(r=typeof s.value=="function"?s.value(e):s.value,r instanceof HTMLCanvasElement||r instanceof HTMLImageElement||r instanceof ImageData||r instanceof WebGLTexture){r instanceof WebGLTexture&&!s.texture?(s.prevValue=void 0,s.texture=r):s.texture||(s.prevValue=void 0,s.texture=n.createTexture()),this.bindTexture(s.texture,i,s.name),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);const o=!(r instanceof HTMLImageElement)||r.complete;!(r instanceof WebGLTexture)&&o&&s.prevValue!==r&&(s.prevValue=r,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)),i++}else if(Array.isArray(r)&&r.length===6)this.setUniformMatrixValue(s.name,JF(this.tmpMat4_,r));else if(Array.isArray(r)&&r.length<=4)switch(r.length){case 2:n.uniform2f(this.getUniformLocation(s.name),r[0],r[1]);return;case 3:n.uniform3f(this.getUniformLocation(s.name),r[0],r[1],r[2]);return;case 4:n.uniform4f(this.getUniformLocation(s.name),r[0],r[1],r[2],r[3]);return;default:return}else typeof r=="number"&&n.uniform1f(this.getUniformLocation(s.name),r)})}useProgram(e,n){this.disableAllAttributes_(),this.gl_.useProgram(e),this.currentProgram_=e,n&&(this.applyFrameState(n),this.applyUniforms(n))}compileShader(e,n){const r=this.gl_,i=r.createShader(n);return r.shaderSource(i,e),r.compileShader(i),i}getProgram(e,n){const r=this.gl_,i=this.compileShader(e,r.FRAGMENT_SHADER),s=this.compileShader(n,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,i),r.attachShader(o,s),r.linkProgram(o),!r.getShaderParameter(i,r.COMPILE_STATUS)){const a=`Fragment shader compilation failed: ${r.getShaderInfoLog(i)}`;throw new Error(a)}if(r.deleteShader(i),!r.getShaderParameter(s,r.COMPILE_STATUS)){const a=`Vertex shader compilation failed: ${r.getShaderInfoLog(s)}`;throw new Error(a)}if(r.deleteShader(s),!r.getProgramParameter(o,r.LINK_STATUS)){const a=`GL program linking failed: ${r.getProgramInfoLog(o)}`;throw new Error(a)}return o}getUniformLocation(e){const n=Qt(this.currentProgram_);return this.uniformLocationsByProgram_[n]===void 0&&(this.uniformLocationsByProgram_[n]={}),this.uniformLocationsByProgram_[n][e]===void 0&&(this.uniformLocationsByProgram_[n][e]=this.gl_.getUniformLocation(this.currentProgram_,e)),this.uniformLocationsByProgram_[n][e]}getAttributeLocation(e){const n=Qt(this.currentProgram_);return this.attribLocationsByProgram_[n]===void 0&&(this.attribLocationsByProgram_[n]={}),this.attribLocationsByProgram_[n][e]===void 0&&(this.attribLocationsByProgram_[n][e]=this.gl_.getAttribLocation(this.currentProgram_,e)),this.attribLocationsByProgram_[n][e]}makeProjectionTransform(e,n){const r=e.size,i=e.viewState.rotation,s=e.viewState.resolution,o=e.viewState.center;return mu(n,0,0,2/(s*r[0]),2/(s*r[1]),-i,-o[0],-o[1]),n}setUniformFloatValue(e,n){this.gl_.uniform1f(this.getUniformLocation(e),n)}setUniformFloatVec2(e,n){this.gl_.uniform2fv(this.getUniformLocation(e),n)}setUniformFloatVec4(e,n){this.gl_.uniform4fv(this.getUniformLocation(e),n)}setUniformMatrixValue(e,n){this.gl_.uniformMatrix4fv(this.getUniformLocation(e),!1,n)}disableAllAttributes_(){for(let e=0;e<this.maxAttributeCount_;e++)this.gl_.disableVertexAttribArray(e)}enableAttributeArray_(e,n,r,i,s,o){const a=this.getAttributeLocation(e);a<0||(this.gl_.enableVertexAttribArray(a),this.gl_.vertexAttribPointer(a,n,r,!1,i,s),o&&this.getInstancedRenderingExtension_().vertexAttribDivisorANGLE(a,1))}enableAttributes_(e,n){const r=wPe(e);let i=0;for(let s=0;s<e.length;s++){const o=e[s];o.name&&this.enableAttributeArray_(o.name,o.size,o.type||Qle,r,i,n),i+=o.size*ece(o.type)}}enableAttributes(e){this.enableAttributes_(e,!1)}enableAttributesInstanced(e){this.enableAttributes_(e,!0)}handleWebGLContextLost(e){ov(this.bufferCache_),this.currentProgram_=null,e.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(e,n,r,i){const s=this.gl_;r=r||s.createTexture();const o=i?s.NEAREST:s.LINEAR;s.bindTexture(s.TEXTURE_2D,r),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,o),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE);const a=0,l=s.RGBA,c=0,u=s.RGBA,h=s.UNSIGNED_BYTE;return n instanceof Uint8Array?s.texImage2D(s.TEXTURE_2D,a,l,e[0],e[1],c,u,h,n):n?s.texImage2D(s.TEXTURE_2D,a,l,u,h,n):s.texImage2D(s.TEXTURE_2D,a,l,e[0],e[1],c,u,h,null),r}}function wPe(t){let e=0;for(let n=0;n<t.length;n++){const r=t[n];e+=r.size*ece(r.type)}return e}function ece(t){switch(t){case Ao.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Ao.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Ao.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Ao.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}class jG extends VA{constructor(e,n,r){super(),r=r||{},this.tileCoord=e,this.state=n,this.key="",this.transition_=r.transition===void 0?250:r.transition,this.transitionStarts_={},this.interpolate=!!r.interpolate}changed(){this.dispatchEvent(wn.CHANGE)}release(){this.setState(cn.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==cn.EMPTY){if(this.state!==cn.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){bn()}getAlpha(e,n){if(!this.transition_)return 1;let r=this.transitionStarts_[e];if(!r)r=n,this.transitionStarts_[e]=r;else if(r===-1)return 1;const i=n-r+1e3/60;return i>=this.transition_?1:Yle(i/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function QF(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}const bPe=new Error("disposed"),EPe=[256,256];class fZ extends jG{constructor(e){const n=cn.IDLE;super(e.tileCoord,n,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=QF(this.data_);return e?[e.width,e.height]:EPe}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==cn.IDLE&&this.state!==cn.ERROR)return;this.state=cn.LOADING,this.changed();const e=this;this.loader_().then(function(n){e.data_=n,e.state=cn.LOADED,e.changed()}).catch(function(n){e.error_=n,e.state=cn.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(bPe),this.controller_=null),super.disposeInternal()}}class tce extends jG{constructor(e,n,r,i,s,o){super(e,n,o),this.crossOrigin_=i,this.src_=r,this.key=r,this.image_,uc?this.image_=new OffscreenCanvas(1,1):(this.image_=new Image,i!==null&&(this.image_.crossOrigin=i)),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=cn.LOADED,this.unlistenImage_(),this.changed()}getCrossOrigin(){return this.crossOrigin_}handleImageError_(){this.state=cn.ERROR,this.unlistenImage_(),this.image_=SPe(),this.changed()}handleImageLoad_(){if(uc)this.state=cn.LOADED;else{const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=cn.LOADED:this.state=cn.EMPTY}this.unlistenImage_(),this.changed()}load(){this.state==cn.ERROR&&(this.state=cn.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==cn.IDLE&&(this.state=cn.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=uAe(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function SPe(){const t=Rs(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}let U6;const Qx=[];function pZ(t,e,n,r,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(r,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(n,i)),t.restore()}function B6(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function TPe(){if(U6===void 0){const t=Rs(6,6,Qx);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",pZ(t,4,5,4,0),pZ(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;U6=B6(e,0)||B6(e,4)||B6(e,8),L5(t),Qx.push(t.canvas)}return U6}function Z3(t,e,n,r){const i=Q2(n,e,t);let s=F3(e,r,n);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=t.getMetersPerUnit();a!==void 0&&(s/=a);const l=t.getExtent();if(!l||E1(l,i)){const c=F3(t,s,i)/s;isFinite(c)&&c>0&&(s/=c)}return s}function kPe(t,e,n,r){const i=yh(n);let s=Z3(t,e,i,r);return(!isFinite(s)||s<=0)&&Jz(n,function(o){return s=Z3(t,e,o,r),isFinite(s)&&s>0}),s}function nce(t,e,n,r,i,s,o,a,l,c,u,h,f,g){const y=Rs(Math.round(n*t),Math.round(n*e),Qx);if(h||(y.imageSmoothingEnabled=!1),l.length===0)return y.canvas;y.scale(n,n);function _(N){return Math.round(N*n)/n}y.globalCompositeOperation="lighter";const b=Wa();l.forEach(function(N,L,C){Zz(b,N.extent)});let T;const A=n/r,I=(h?1:1+Math.pow(2,-24))/A;(!f||l.length!==1||c!==0)&&(T=Rs(Math.round(Xn(b)*A),Math.round(Ps(b)*A),Qx),h||(T.imageSmoothingEnabled=!1),l.forEach(function(N,L,C){if(N.image.width>0&&N.image.height>0){if(N.clipExtent){T.save();const U=(N.clipExtent[0]-b[0])*A,G=-(N.clipExtent[3]-b[3])*A,de=Xn(N.clipExtent)*A,ke=Ps(N.clipExtent)*A;T.rect(h?U:Math.round(U),h?G:Math.round(G),h?de:Math.round(U+de)-Math.round(U),h?ke:Math.round(G+ke)-Math.round(G)),T.clip()}const M=(N.extent[0]-b[0])*A,O=-(N.extent[3]-b[3])*A,D=Xn(N.extent)*A,V=Ps(N.extent)*A;T.drawImage(N.image,c,c,N.image.width-2*c,N.image.height-2*c,h?M:Math.round(M),h?O:Math.round(O),h?D:Math.round(M+D)-Math.round(M),h?V:Math.round(O+V)-Math.round(O)),N.clipExtent&&T.restore()}}));const P=lv(o);return a.getTriangles().forEach(function(N,L,C){const M=N.source,O=N.target;let D=M[0][0],V=M[0][1],U=M[1][0],G=M[1][1],de=M[2][0],ke=M[2][1];const Ue=_((O[0][0]-P[0])/s),Ne=_(-(O[0][1]-P[1])/s),fe=_((O[1][0]-P[0])/s),De=_(-(O[1][1]-P[1])/s),Ce=_((O[2][0]-P[0])/s),Q=_(-(O[2][1]-P[1])/s),W=D,ne=V;D=0,V=0,U-=W,G-=ne,de-=W,ke-=ne;const ie=[[U,G,0,0,fe-Ue],[de,ke,0,0,Ce-Ue],[0,0,U,G,De-Ne],[0,0,de,ke,Q-Ne]],le=JTe(ie);if(!le)return;if(y.save(),y.beginPath(),TPe()||!h){y.moveTo(fe,De);const qe=4,Ke=Ue-fe,Se=Ne-De;for(let we=0;we<qe;we++)y.lineTo(fe+_((we+1)*Ke/qe),De+_(we*Se/(qe-1))),we!=qe-1&&y.lineTo(fe+_((we+1)*Ke/qe),De+_((we+1)*Se/(qe-1)));y.lineTo(Ce,Q)}else y.moveTo(fe,De),y.lineTo(Ue,Ne),y.lineTo(Ce,Q);y.clip(),y.transform(le[0],le[2],le[1],le[3],Ue,Ne),y.translate(b[0]-W,b[3]-ne);let ve;if(T)ve=T.canvas,y.scale(I,-I);else{const qe=l[0],Ke=qe.extent;ve=qe.image,y.scale(Xn(Ke)/ve.width,-Ps(Ke)/ve.height)}y.drawImage(ve,0,0),y.restore()}),T&&(L5(T),Qx.push(T.canvas)),u&&(y.save(),y.globalCompositeOperation="source-over",y.strokeStyle="black",y.lineWidth=1,a.getTriangles().forEach(function(N,L,C){const M=N.target,O=(M[0][0]-P[0])/s,D=-(M[0][1]-P[1])/s,V=(M[1][0]-P[0])/s,U=-(M[1][1]-P[1])/s,G=(M[2][0]-P[0])/s,de=-(M[2][1]-P[1])/s;y.beginPath(),y.moveTo(V,U),y.lineTo(O,D),y.lineTo(G,de),y.closePath(),y.stroke()}),y.restore()),y.canvas}const APe=10,mZ=.25;class rce{constructor(e,n,r,i,s,o,a){this.sourceProj_=e,this.targetProj_=n;let l={};const c=a?zF(I=>Zi(a,Q2(I,this.targetProj_,this.sourceProj_))):fk(this.targetProj_,this.sourceProj_);this.transformInv_=function(I){const P=I[0]+"/"+I[1];return l[P]||(l[P]=c(I)),l[P]},this.maxSourceExtent_=i,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Xn(i)>=Xn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Xn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Xn(this.targetProj_.getExtent()):null;const u=lv(r),h=I5(r),f=A5(r),g=k5(r),y=this.transformInv_(u),_=this.transformInv_(h),b=this.transformInv_(f),T=this.transformInv_(g),A=APe+(o?Math.max(0,Math.ceil(Math.log2(OF(r)/(o*o*256*256)))):0);if(this.addQuad_(u,h,f,g,y,_,b,T,A),this.wrapsXInSource_){let I=1/0;this.triangles_.forEach(function(P,N,L){I=Math.min(I,P.source[0][0],P.source[1][0],P.source[2][0])}),this.triangles_.forEach(P=>{if(Math.max(P.source[0][0],P.source[1][0],P.source[2][0])-I>this.sourceWorldWidth_/2){const N=[[P.source[0][0],P.source[0][1]],[P.source[1][0],P.source[1][1]],[P.source[2][0],P.source[2][1]]];N[0][0]-I>this.sourceWorldWidth_/2&&(N[0][0]-=this.sourceWorldWidth_),N[1][0]-I>this.sourceWorldWidth_/2&&(N[1][0]-=this.sourceWorldWidth_),N[2][0]-I>this.sourceWorldWidth_/2&&(N[2][0]-=this.sourceWorldWidth_);const L=Math.min(N[0][0],N[1][0],N[2][0]);Math.max(N[0][0],N[1][0],N[2][0])-L<this.sourceWorldWidth_/2&&(P.source=N)}})}l={}}addTriangle_(e,n,r,i,s,o){this.triangles_.push({source:[i,s,o],target:[e,n,r]})}addQuad_(e,n,r,i,s,o,a,l,c){const u=ka([s,o,a,l]),h=this.sourceWorldWidth_?Xn(u)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&h>.5&&h<1;let y=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const b=ka([e,n,r,i]);y=Xn(b)/this.targetWorldWidth_>mZ||y}!g&&this.sourceProj_.isGlobal()&&h&&(y=h>mZ||y)}if(!y&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!oa(u,this.maxSourceExtent_))return;let _=0;if(!y&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)y=!0;else if(_=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),_!=1&&_!=2&&_!=4&&_!=8)return}if(c>0){if(!y){const b=[(e[0]+r[0])/2,(e[1]+r[1])/2],T=this.transformInv_(b);let A;g?A=(vg(s[0],f)+vg(a[0],f))/2-vg(T[0],f):A=(s[0]+a[0])/2-T[0];const I=(s[1]+a[1])/2-T[1];y=A*A+I*I>this.errorThresholdSquared_}if(y){if(Math.abs(e[0]-r[0])<=Math.abs(e[1]-r[1])){const b=[(n[0]+r[0])/2,(n[1]+r[1])/2],T=this.transformInv_(b),A=[(i[0]+e[0])/2,(i[1]+e[1])/2],I=this.transformInv_(A);this.addQuad_(e,n,b,A,s,o,T,I,c-1),this.addQuad_(A,b,r,i,I,T,a,l,c-1)}else{const b=[(e[0]+n[0])/2,(e[1]+n[1])/2],T=this.transformInv_(b),A=[(r[0]+i[0])/2,(r[1]+i[1])/2],I=this.transformInv_(A);this.addQuad_(e,b,A,i,s,T,I,l,c-1),this.addQuad_(b,n,r,A,T,o,a,I,c-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(_&11)==0&&this.addTriangle_(e,r,i,s,a,l),(_&14)==0&&this.addTriangle_(e,r,n,s,a,o),_&&((_&13)==0&&this.addTriangle_(n,i,e,o,l,s),(_&7)==0&&this.addTriangle_(n,i,r,o,l,a))}calculateSourceExtent(){const e=Wa();return this.triangles_.forEach(function(n,r,i){const s=n.source;tT(e,s[0]),tT(e,s[1]),tT(e,s[2])}),e}getTriangles(){return this.triangles_}}const ice=.5;class sce extends jG{constructor(e,n,r,i,s,o,a,l,c,u,h,f){super(s,cn.IDLE,f),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=i,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const g=i.getTileCoordExtent(this.wrappedTileCoord_),y=this.targetTileGrid_.getExtent();let _=this.sourceTileGrid_.getExtent();const b=y?tp(g,y):g;if(OF(b)===0){this.state=cn.EMPTY;return}const T=e.getExtent();T&&(_?_=tp(_,T):_=T);const A=i.getResolution(this.wrappedTileCoord_[0]),I=kPe(e,r,b,A);if(!isFinite(I)||I<=0){this.state=cn.EMPTY;return}const P=u!==void 0?u:ice;if(this.triangulation_=new rce(e,r,b,_,I*P,A),this.triangulation_.getTriangles().length===0){this.state=cn.EMPTY;return}this.sourceZ_=n.getZForResolution(I);let N=this.triangulation_.calculateSourceExtent();if(_&&(e.canWrapX()?(N[1]=ri(N[1],_[1],_[3]),N[3]=ri(N[3],_[1],_[3])):N=tp(N,_)),!OF(N))this.state=cn.EMPTY;else{let L=0,C=0;e.canWrapX()&&(L=Xn(T),C=Math.floor((N[0]-T[0])/L)),qae(N.slice(),e,!0).forEach(O=>{const D=n.getTileRangeForExtentAndZ(O,this.sourceZ_);for(let V=D.minX;V<=D.maxX;V++)for(let U=D.minY;U<=D.maxY;U++){const G=c(this.sourceZ_,V,U,a);if(G){const de=C*L;this.sourceTiles_.push({tile:G,offset:de})}}++C}),this.sourceTiles_.length===0&&(this.state=cn.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{const r=n.tile;if(r&&r.getState()==cn.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(r.tileCoord);i[0]+=n.offset,i[2]+=n.offset;const s=this.clipExtent_?.slice();s&&(s[0]+=n.offset,s[2]+=n.offset),e.push({extent:i,clipExtent:s,image:r.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=cn.ERROR;else{const n=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(n),i=typeof r=="number"?r:r[0],s=typeof r=="number"?r:r[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=nce(i,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=cn.LOADED}this.changed()}load(){if(this.state==cn.IDLE){this.state=cn.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const r=n.getState();if(r==cn.IDLE||r==cn.LOADING){e++;const i=Yn(n,wn.CHANGE,s=>{const o=n.getState();(o==cn.LOADED||o==cn.ERROR||o==cn.EMPTY)&&(ni(i),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(i)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},r,i){n.getState()==cn.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(ni),this.sourcesListenerKeys_=null}release(){this.canvas_&&(L5(this.canvas_.getContext("2d")),Qx.push(this.canvas_),this.canvas_=null),super.release()}}class $G{constructor(e,n,r,i){this.minX=e,this.maxX=n,this.minY=r,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function h_(t,e,n,r,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=r,i):new $G(t,e,n,r)}class gZ{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof FA&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const r=this.entries_[e];return ur(r!==void 0,"Tried to get a value for a key that does not exist in the cache"),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_}remove(e){const n=this.entries_[e];return ur(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.key_;return e}getValues(){const e=new Array(this.count_);let n=0,r;for(r=this.newest_;r;r=r.older)e[n++]=r.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){ur(!(e in this.entries_),"Tried to set a value for a key that is used already");const r={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[e]=r,++this.count_}setSize(e){this.highWaterMark=e}}function J3(t,e,n,r){return r!==void 0?(r[0]=t,r[1]=e,r[2]=n,r):[t,e,n]}function IPe(t,e,n){return t+"/"+e+"/"+n}function tM(t,e,n,r,i){return`${Qt(t)},${e},${IPe(n,r,i)}`}function oce(t){return PPe(t[0],t[1],t[2])}function PPe(t,e,n){return(e<<t)+n}function CPe(t,e){const n=t[0],r=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return s?s.containsXY(r,i):!0}class FG extends Gle{constructor(e,n){super(e),n=n||{},this.inversePixelTransform_=Ws(),this.postProcesses_=n.postProcesses,this.uniforms_=n.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},e.addChangeListener(kr.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(e,n){const r=this.getLayer();if(r.hasListener(co.PRECOMPOSE)){const i=new rT(co.PRECOMPOSE,void 0,n,e);r.dispatchEvent(i)}}dispatchPostComposeEvent(e,n){const r=this.getLayer();if(r.hasListener(co.POSTCOMPOSE)){const i=new rT(co.POSTCOMPOSE,void 0,n,e);r.dispatchEvent(i)}}reset(e){this.uniforms_=e.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(e){if(this.getLayer().getRenderSource()){let n=!0,r=-1,i;for(let o=0,a=e.layerStatesArray.length;o<a;o++){const l=e.layerStatesArray[o].layer,c=l.getRenderer();if(!(c instanceof FG)){n=!0;continue}const u=l.getClassName();if((n||u!==i)&&(r+=1,n=!1),i=u,c===this)break}const s="map/"+e.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(s)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new xPe({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:s}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(e)}afterHelperCreated(){}prepareFrameInternal(e){return!0}clearCache(){}disposeInternal(){this.clearCache(),this.removeHelper(),this.getLayer()?.removeChangeListener(kr.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(e,n,r){const i=this.getLayer();if(i.hasListener(e)){mu(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);const s=new rT(e,this.inversePixelTransform_,r,n);i.dispatchEvent(s)}}preRender(e,n){this.dispatchRenderEvent_(co.PRERENDER,e,n)}postRender(e,n){this.dispatchRenderEvent_(co.POSTRENDER,e,n)}}const W6={TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight"};class RPe{constructor(e,n){this.name=e,this.data=n,this.texture_=null}getTexture(e){if(!this.texture_){const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.data.length/4,1,0,e.RGBA,e.UNSIGNED_BYTE,this.data),this.texture_=n}return this.texture_}delete(e){this.texture_&&e.deleteTexture(this.texture_),this.texture_=null}}function MPe(t,e){return`operator_${t}_${Object.keys(e.functions).length}`}function _g(t){const e=t.toString();return e.includes(".")?e:e+".0"}function VG(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${t.length}(${t.map(_g).join(", ")})`}function nM(t){const e=gu(t),n=e.length>3?e[3]:1;return VG([e[0]/255,e[1]/255,e[2]/255,n])}function NPe(t){const e=ja(t);return VG(e)}const H6={};let OPe=0;function Ek(t){return t in H6||(H6[t]=OPe++),H6[t]}function zf(t){return _g(Ek(t))}function zG(t){return"u_var_"+t}function ace(){return{variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const q6="getBandValue",LPe="u_paletteTextures",lce="featureId",cce="geometryType",e8=-9999999;function DPe(t,e,n,r){const i=ho(t,e,n);return GG(i,e,r)}function _r(t){return(e,n,r)=>{const i=n.args.length,s=new Array(i);for(let o=0;o<i;++o)s[o]=GG(n.args[o],r,e);return t(s,e)}}const jPe={[Te.Get]:(t,e)=>{const r=e.args[0].value;r in t.properties||(t.properties[r]={name:r,type:e.type});let s="a_prop_"+r;return sd(e.type,Is)&&(s=`(${s} > 0.0)`),s},[Te.Id]:t=>(t.featureId=!0,"a_"+lce),[Te.GeometryType]:t=>(t.geometryType=!0,"a_"+cce),[Te.LineMetric]:()=>"currentLineMetric",[Te.Var]:(t,e)=>{const r=e.args[0].value;r in t.variables||(t.variables[r]={name:r,type:e.type});let s=zG(r);return sd(e.type,Is)&&(s=`(${s} > 0.0)`),s},[Te.Has]:(t,e)=>{const r=e.args[0].value;return r in t.properties||(t.properties[r]={name:r,type:e.type}),`(a_prop_${r} != ${_g(e8)})`},[Te.Resolution]:()=>"u_resolution",[Te.Zoom]:()=>"u_zoom",[Te.Time]:()=>"u_time",[Te.Any]:_r(t=>`(${t.join(" || ")})`),[Te.All]:_r(t=>`(${t.join(" && ")})`),[Te.Not]:_r(([t])=>`(!${t})`),[Te.Equal]:_r(([t,e])=>`(${t} == ${e})`),[Te.NotEqual]:_r(([t,e])=>`(${t} != ${e})`),[Te.GreaterThan]:_r(([t,e])=>`(${t} > ${e})`),[Te.GreaterThanOrEqualTo]:_r(([t,e])=>`(${t} >= ${e})`),[Te.LessThan]:_r(([t,e])=>`(${t} < ${e})`),[Te.LessThanOrEqualTo]:_r(([t,e])=>`(${t} <= ${e})`),[Te.Multiply]:_r(t=>`(${t.join(" * ")})`),[Te.Divide]:_r(([t,e])=>`(${t} / ${e})`),[Te.Add]:_r(t=>`(${t.join(" + ")})`),[Te.Subtract]:_r(([t,e])=>`(${t} - ${e})`),[Te.Clamp]:_r(([t,e,n])=>`clamp(${t}, ${e}, ${n})`),[Te.Mod]:_r(([t,e])=>`mod(${t}, ${e})`),[Te.Pow]:_r(([t,e])=>`pow(${t}, ${e})`),[Te.Abs]:_r(([t])=>`abs(${t})`),[Te.Floor]:_r(([t])=>`floor(${t})`),[Te.Ceil]:_r(([t])=>`ceil(${t})`),[Te.Round]:_r(([t])=>`floor(${t} + 0.5)`),[Te.Sin]:_r(([t])=>`sin(${t})`),[Te.Cos]:_r(([t])=>`cos(${t})`),[Te.Atan]:_r(([t,e])=>e!==void 0?`atan(${t}, ${e})`:`atan(${t})`),[Te.Sqrt]:_r(([t])=>`sqrt(${t})`),[Te.Match]:_r(t=>{const e=t[0],n=t[t.length-1];let r=null;for(let i=t.length-3;i>=1;i-=2){const s=t[i],o=t[i+1];r=`(${e} == ${s} ? ${o} : ${r||n})`}return r}),[Te.Between]:_r(([t,e,n])=>`(${t} >= ${e} && ${t} <= ${n})`),[Te.Interpolate]:_r(([t,e,...n])=>{let r="";for(let i=0;i<n.length-2;i+=2){const s=n[i],o=r||n[i+1],a=n[i+2],l=n[i+3];let c;t===_g(1)?c=`(${e} - ${s}) / (${a} - ${s})`:c=`(pow(${t}, (${e} - ${s})) - 1.0) / (pow(${t}, (${a} - ${s})) - 1.0)`,r=`mix(${o}, ${l}, clamp(${c}, 0.0, 1.0))`}return r}),[Te.Case]:_r(t=>{const e=t[t.length-1];let n=null;for(let r=t.length-3;r>=0;r-=2){const i=t[r],s=t[r+1];n=`(${i} ? ${s} : ${n||e})`}return n}),[Te.In]:_r(([t,...e],n)=>{const r=MPe("in",n),i=[];for(let s=0;s<e.length;s+=1)i.push(`  if (inputValue == ${e[s]}) { return true; }`);return n.functions[r]=`bool ${r}(float inputValue) {
${i.join(`
`)}
  return false;
}`,`${r}(${t})`}),[Te.Array]:_r(t=>`vec${t.length}(${t.join(", ")})`),[Te.Color]:_r(t=>{if(t.length===1)return`vec4(vec3(${t[0]} / 255.0), 1.0)`;if(t.length===2)return`vec4(vec3(${t[0]} / 255.0), ${t[1]})`;const e=t.slice(0,3).map(r=>`${r} / 255.0`);if(t.length===3)return`vec4(${e.join(", ")}, 1.0)`;const n=t[3];return`vec4(${e.join(", ")}, ${n})`}),[Te.Band]:_r(([t,e,n],r)=>{if(!(q6 in r.functions)){let i="";const s=r.bandCount||1;for(let o=0;o<s;o++){const a=Math.floor(o/4);let l=o%4;o===s-1&&l===1&&(l=3);const c=`${W6.TILE_TEXTURE_ARRAY}[${a}]`;i+=`  if (band == ${o+1}.0) {
    return texture2D(${c}, v_textureCoord + vec2(dx, dy))[${l}];
  }
`}r.functions[q6]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${W6.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${W6.TEXTURE_PIXEL_HEIGHT};
${i}
}`}return`${q6}(${t}, ${e??"0.0"}, ${n??"0.0"})`}),[Te.Palette]:(t,e)=>{const[n,...r]=e.args,i=r.length,s=new Uint8Array(i*4);for(let c=0;c<r.length;c++){const u=r[c].value,h=gu(u),f=c*4;s[f]=h[0],s[f+1]=h[1],s[f+2]=h[2],s[f+3]=h[3]*255}t.paletteTextures||(t.paletteTextures=[]);const o=`${LPe}[${t.paletteTextures.length}]`,a=new RPe(o,s);t.paletteTextures.push(a);const l=GG(n,Wt,t);return`texture2D(${o}, vec2((${l} + 0.5) / ${i}.0, 0.5))`}};function GG(t,e,n){if(t instanceof Ule){const r=jPe[t.operator];if(r===void 0)throw new Error(`No compiler defined for this operator: ${JSON.stringify(t.operator)}`);return r(n,t,e)}if((t.type&Wt)>0)return _g(t.value);if((t.type&Is)>0)return t.value.toString();if((t.type&Us)>0)return zf(t.value.toString());if((t.type&Ei)>0)return nM(t.value);if((t.type&Pl)>0)return VG(t.value);if((t.type&iu)>0)return NPe(t.value);throw new Error(`Unexpected expression ${t.value} (expected type ${Ax(e)})`)}function $Pe(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const yZ=.985;function An(t,e,n){const r=IG();return DPe(e,n,r,t)}function FPe(t){const e=gu(t),n=e[0]*256,r=e[1],i=e[2]*256,s=Math.round(e[3]*255);return[n+r,i+s]}const VPe=`vec4 unpackColor(vec2 packedColor) {
  return vec4(
    min(floor(packedColor[0] / 256.0) / 255.0, 1.0),
    min(mod(packedColor[0], 256.0) / 255.0, 1.0),
    min(floor(packedColor[1] / 256.0) / 255.0, 1.0),
    min(mod(packedColor[1], 256.0) / 255.0, 1.0)
  );
}`;function UG(t){return t===Ei||t===iu?2:t===Pl?4:1}function t8(t){const e=UG(t);return e>1?`vec${e}`:"float"}function uce(t,e){for(const n in e.variables){const r=e.variables[n],i=zG(r.name);let s=t8(r.type);r.type===Ei&&(s="vec4"),t.addUniform(i,s)}for(const n in e.properties){const r=e.properties[n],i=t8(r.type),s=`a_prop_${r.name}`;r.type===Ei?t.addAttribute(s,i,`unpackColor(${s})`,"vec4"):t.addAttribute(s,i)}for(const n in e.functions)t.addVertexShaderFunction(e.functions[n]),t.addFragmentShaderFunction(e.functions[n])}function hce(t,e){const n={};for(const r in t.variables){const i=t.variables[r],s=zG(i.name);n[s]=()=>{const o=e[i.name];if(typeof o=="number")return o;if(typeof o=="boolean")return o?1:0;if(i.type===Ei){const a=[...gu(o||"#eee")];return a[0]/=255,a[1]/=255,a[2]/=255,a[3]??=1,a}return typeof o=="string"?Ek(o):o}}return n}function dce(t){const e={};for(const n in t.properties){const r=t.properties[n],i=s=>{const o=s.get(r.name);return r.type===Ei?FPe([...gu(o||"#eee")]):typeof o=="string"?Ek(o):typeof o=="boolean"?o?1:0:o};e[`prop_${r.name}`]={size:UG(r.type),callback:i}}return e}const d_=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;
float currentLineMetric = 0.; // an actual value will be used in the stroke shaders

${VPe}
`,f_=$Pe();class fce{constructor(){this.uniforms_=[],this.attributes_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${_g(f_["circle-radius"])} + ${_g(f_["circle-stroke-width"]*.5)})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=nM(f_["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=_g(f_["stroke-width"]),this.strokeColorExpression_=nM(f_["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=zf("round"),this.strokeJoinExpression_=zf("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.strokePatternLengthExpression_=null,this.hasFill_=!1,this.fillColorExpression_=nM(f_["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(e,n){return this.uniforms_.push({name:e,type:n}),this}addAttribute(e,n,r,i){return this.attributes_.push({name:e,type:n,varyingName:e.replace(/^a_/,"v_"),varyingType:i??n,varyingExpression:r??e}),this}setSymbolSizeExpression(e){return this.hasSymbol_=!0,this.symbolSizeExpression_=e,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(e){return this.symbolRotationExpression_=e,this}setSymbolOffsetExpression(e){return this.symbolOffsetExpression_=e,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(e){return this.hasSymbol_=!0,this.symbolColorExpression_=e,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(e){return this.texCoordExpression_=e,this}setFragmentDiscardExpression(e){return this.discardExpression_=e,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(e){return this.symbolRotateWithView_=e,this}setStrokeWidthExpression(e){return this.hasStroke_=!0,this.strokeWidthExpression_=e,this}setStrokeColorExpression(e){return this.hasStroke_=!0,this.strokeColorExpression_=e,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(e){return this.strokeOffsetExpression_=e,this}setStrokeCapExpression(e){return this.strokeCapExpression_=e,this}setStrokeJoinExpression(e){return this.strokeJoinExpression_=e,this}setStrokeMiterLimitExpression(e){return this.strokeMiterLimitExpression_=e,this}setStrokeDistanceFieldExpression(e){return this.strokeDistanceFieldExpression_=e,this}setStrokePatternLengthExpression(e){return this.strokePatternLengthExpression_=e,this}getStrokePatternLengthExpression(){return this.strokePatternLengthExpression_}setFillColorExpression(e){return this.hasFill_=!0,this.fillColorExpression_=e,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(e){return this.vertexShaderFunctions_.includes(e)?this:(this.vertexShaderFunctions_.push(e),this)}addFragmentShaderFunction(e){return this.fragmentShaderFunctions_.includes(e)?this:(this.fragmentShaderFunctions_.push(e),this)}getSymbolVertexShader(){return this.hasSymbol_?`${d_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_position;
attribute vec2 a_localPosition;
attribute vec2 a_hitColor;

varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx + a_localPosition * halfSizePx * vec2(1., -1.);
  float angle = ${this.symbolRotationExpression_}${this.symbolRotateWithView_?" + u_rotation":""};
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = mix(texCoord.s, texCoord.p, a_localPosition.x * 0.5 + 0.5);
  float v = mix(texCoord.t, texCoord.q, a_localPosition.y * 0.5 + 0.5);
  v_texCoord = vec2(u, v);
  v_hitColor = unpackColor(a_hitColor);
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y);
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${d_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec2 v_texCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${d_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute vec2 a_localPosition;
attribute float a_measureStart;
attribute float a_measureEnd;
attribute float a_angleTangentSum;
attribute float a_distanceLow;
attribute float a_distanceHigh;
attribute vec2 a_joinAngles;
attribute vec2 a_hitColor;

varying vec2 v_segmentStartPx;
varying vec2 v_segmentEndPx;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distancePx;
varying float v_measureStart;
varying float v_measureEnd;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float startEndRatio = a_localPosition.x * 0.5 + 0.5;
  currentLineMetric = mix(a_measureStart, a_measureEnd, startEndRatio);
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);

  // compute current vertex position
  float normalDir = -1. * a_localPosition.y;
  float tangentDir = -1. * a_localPosition.x;
  float angle = mix(v_angleStart, v_angleEnd, startEndRatio);
  vec2 joinDirection;
  vec2 positionPx = mix(segmentStartPx, segmentEndPx, startEndRatio);
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${yZ} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing
  gl_Position = pxToScreen(positionPx);

  v_segmentStartPx = segmentStartPx;
  v_segmentEndPx = segmentEndPx;
  v_width = lineWidth;
  v_hitColor = unpackColor(a_hitColor);

  v_distancePx = a_distanceLow / u_resolution - (lineOffsetPx * a_angleTangentSum);
  float distanceHighPx = a_distanceHigh / u_resolution;
  ${this.strokePatternLengthExpression_!==null?`v_distancePx = mod(v_distancePx, ${this.strokePatternLengthExpression_});
  distanceHighPx = mod(distanceHighPx, ${this.strokePatternLengthExpression_});
  `:""}v_distancePx += distanceHighPx;

  v_measureStart = a_measureStart;
  v_measureEnd = a_measureEnd;
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${d_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec2 v_segmentStartPx;
varying vec2 v_segmentEndPx;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distancePx;
varying float v_measureStart;
varying float v_measureEnd;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${yZ}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${zf("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${zf("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${zf("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${zf("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

float distanceFromSegment(vec2 point, vec2 start, vec2 end) {
  vec2 tangent = end - start;
  vec2 startToPoint = point - start;
  // inspire by capsule fn in https://iquilezles.org/articles/distfunctions/
  float h = clamp(dot(startToPoint, tangent) / dot(tangent, tangent), 0.0, 1.0);
  return length(startToPoint - tangent * h);
}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}

  vec2 currentPointPx = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPointPx);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif

  float segmentLengthPx = length(v_segmentEndPx - v_segmentStartPx);
  segmentLengthPx = max(segmentLengthPx, 1.17549429e-38); // avoid divide by zero
  vec2 segmentTangent = (v_segmentEndPx - v_segmentStartPx) / segmentLengthPx;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPointPx = currentPointPx - v_segmentStartPx;
  float lengthToPointPx = max(0., min(dot(segmentTangent, startToPointPx), segmentLengthPx));
  float currentLengthPx = lengthToPointPx + v_distancePx;
  float currentRadiusPx = distanceFromSegment(currentPointPx, v_segmentStartPx, v_segmentEndPx);
  float currentRadiusRatio = dot(segmentNormal, startToPointPx) * 2. / v_width;
  currentLineMetric = mix(v_measureStart, v_measureEnd, lengthToPointPx / segmentLengthPx);

  if (${this.discardExpression_}) { discard; }

  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPointPx, v_segmentStartPx, v_segmentEndPx, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPointPx, v_segmentEndPx, v_segmentStartPx, v_width, v_angleEnd, capType, joinType);
  float distanceField = max(
    segmentDistanceField(currentPointPx, v_segmentStartPx, v_segmentEndPx, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distanceField = max(distanceField, ${this.strokeDistanceFieldExpression_});

  vec4 color = ${this.strokeColorExpression_};
  color.a *= smoothstep(0.5, -0.5, distanceField);
  gl_FragColor = color;
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${d_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
attribute vec2 a_position;
attribute vec2 a_hitColor;

varying vec4 v_hitColor;

${this.attributes_.map(e=>`attribute ${e.type} ${e.name};
varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.vertexShaderFunctions_.join(`
`)}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_hitColor = unpackColor(a_hitColor);
${this.attributes_.map(e=>`  ${e.varyingName} = ${e.varyingExpression};`).join(`
`)}
}`:null}getFillFragmentShader(){return this.hasFill_?`${d_}
${this.uniforms_.map(e=>`uniform ${e.type} ${e.name};`).join(`
`)}
varying vec4 v_hitColor;
${this.attributes_.map(e=>`varying ${e.varyingType} ${e.varyingName};`).join(`
`)}
${this.fragmentShaderFunctions_.join(`
`)}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
${this.attributes_.map(e=>`  ${e.varyingType} ${e.name} = ${e.varyingName}; // assign to original attribute name`).join(`
`)}
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_};
  gl_FragColor.a *= u_globalAlpha;
  gl_FragColor.rgb *= gl_FragColor.a;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}}class Q3{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(e,n){for(let r=0;r<e.length;r++)this.addFeature(e[r],n)}addFeature(e,n){let r=e.getGeometry();r&&(n&&(r=r.clone(),r.applyTransform(n)),this.addGeometry_(r,e))}clearFeatureEntryInPointBatch_(e){const n=Qt(e),r=this.pointBatch.entries[n];if(r)return this.pointBatch.geometriesCount-=r.flatCoordss.length,delete this.pointBatch.entries[n],r}clearFeatureEntryInLineStringBatch_(e){const n=Qt(e),r=this.lineStringBatch.entries[n];if(r)return this.lineStringBatch.verticesCount-=r.verticesCount,this.lineStringBatch.geometriesCount-=r.flatCoordss.length,delete this.lineStringBatch.entries[n],r}clearFeatureEntryInPolygonBatch_(e){const n=Qt(e),r=this.polygonBatch.entries[n];if(r)return this.polygonBatch.verticesCount-=r.verticesCount,this.polygonBatch.ringsCount-=r.ringsCount,this.polygonBatch.geometriesCount-=r.flatCoordss.length,delete this.polygonBatch.entries[n],r}addGeometry_(e,n){const r=e.getType();switch(r){case"GeometryCollection":{const i=e.getGeometriesArray();for(const s of i)this.addGeometry_(s,n);break}case"MultiPolygon":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEndss(),n,Qt(n),i.getStride());break}case"MultiLineString":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEnds(),n,Qt(n),i.getStride());break}case"MultiPoint":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),null,n,Qt(n),i.getStride());break}case"Polygon":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),i.getEnds(),n,Qt(n),i.getStride());break}case"Point":{const i=e;this.addCoordinates_(r,i.getFlatCoordinates(),null,n,Qt(n),i.getStride());break}case"LineString":case"LinearRing":{const i=e,s=i.getStride();this.addCoordinates_(r,i.getFlatCoordinates(),null,n,Qt(n),s,i.getLayout?.());break}}}addCoordinates_(e,n,r,i,s,o,a){let l;switch(e){case"MultiPolygon":{const c=r;for(let u=0,h=c.length;u<h;u++){let f=c[u];const g=u>0?c[u-1]:null,y=g?g[g.length-1]:0,_=f[f.length-1];f=y>0?f.map(b=>b-y):f,this.addCoordinates_("Polygon",n.slice(y,_),f,i,s,o,a)}break}case"MultiLineString":{const c=r;for(let u=0,h=c.length;u<h;u++){const f=u>0?c[u-1]:0;this.addCoordinates_("LineString",n.slice(f,c[u]),null,i,s,o,a)}break}case"MultiPoint":for(let c=0,u=n.length;c<u;c+=o)this.addCoordinates_("Point",n.slice(c,c+2),null,i,s,null,null);break;case"Polygon":{const c=r;if(i instanceof vl){const f=Nle(n,c);if(f.length>1){this.addCoordinates_("MultiPolygon",n,f,i,s,o,a);return}}this.polygonBatch.entries[s]||(this.polygonBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),l=n.length/o;const u=r.length,h=r.map((f,g,y)=>g>0?(f-y[g-1])/o:f/o);this.polygonBatch.verticesCount+=l,this.polygonBatch.ringsCount+=u,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[s].flatCoordss.push(zPe(n,o)),this.polygonBatch.entries[s].ringsVerticesCounts.push(h),this.polygonBatch.entries[s].verticesCount+=l,this.polygonBatch.entries[s].ringsCount+=u;for(let f=0,g=c.length;f<g;f++){const y=f>0?c[f-1]:0;this.addCoordinates_("LinearRing",n.slice(y,c[f]),null,i,s,o,a)}break}case"Point":this.pointBatch.entries[s]||(this.pointBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[s].flatCoordss.push(n);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[s]||(this.lineStringBatch.entries[s]=this.addRefToEntry_(s,{feature:i,flatCoordss:[],verticesCount:0})),l=n.length/o,this.lineStringBatch.verticesCount+=l,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[s].flatCoordss.push(GPe(n,o,a)),this.lineStringBatch.entries[s].verticesCount+=l;break}}addRefToEntry_(e,n){const r=this.uidToRef_.get(e),i=r||this.freeGlobalRef_.pop()||++this.globalCounter_;return n.ref=i,r||(this.refToFeature_.set(i,n.feature),this.uidToRef_.set(e,i)),n}removeRef_(e,n){if(!e)throw new Error("This feature has no ref: "+n);this.refToFeature_.delete(e),this.uidToRef_.delete(n),this.freeGlobalRef_.push(e)}changeFeature(e,n){if(!this.uidToRef_.get(Qt(e)))return;this.removeFeature(e);let r=e.getGeometry();r&&(n&&(r=r.clone(),r.applyTransform(n)),this.addGeometry_(r,e))}removeFeature(e){let n=this.clearFeatureEntryInPointBatch_(e);n=this.clearFeatureEntryInPolygonBatch_(e)||n,n=this.clearFeatureEntryInLineStringBatch_(e)||n,n&&this.removeRef_(n.ref,Qt(n.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(e){return this.refToFeature_.get(e)}isEmpty(){return this.globalCounter_===0}filter(e){const n=new Q3;n.globalCounter_=this.globalCounter_,n.uidToRef_=this.uidToRef_,n.refToFeature_=this.refToFeature_;let r=!0;for(const i of this.refToFeature_.values())e(i)&&(n.addFeature(i),r=!1);return r?new Q3:n}}function zPe(t,e){return e===2?t:t.filter((n,r)=>r%e<2)}function GPe(t,e,n){return e===3&&n==="XYM"?t:e===4?t.filter((r,i)=>i%e!==2):e===3?t.map((r,i)=>i%e!==2?r:0):new Array(t.length*1.5).fill(0).map((r,i)=>i%3===2?0:t[Math.round(i/1.5)])}function UPe(){const t='function t(t,n,x=2){const o=n&&n.length,i=o?n[0]*x:t.length;let f=e(t,0,i,x,!0);const l=[];if(!f||f.next===f.prev)return l;let c,y,h;if(o&&(f=function(t,n,r,x){const o=[];for(let r=0,i=n.length;r<i;r++){const f=e(t,n[r]*x,r<i-1?n[r+1]*x:t.length,x,!1);f===f.next&&(f.steiner=!0),o.push(a(f))}o.sort(u);for(let t=0;t<o.length;t++)r=s(o[t],r);return r}(t,n,f,x)),t.length>80*x){c=t[0],y=t[1];let e=c,n=y;for(let r=x;r<i;r+=x){const x=t[r],o=t[r+1];x<c&&(c=x),o<y&&(y=o),x>e&&(e=x),o>n&&(n=o)}h=Math.max(e-c,n-y),h=0!==h?32767/h:0}return r(f,l,x,c,y,h,0),l}function e(t,e,n,r,x){let o;if(x===function(t,e,n,r){let x=0;for(let o=e,i=n-r;o<n;o+=r)x+=(t[i]-t[o])*(t[o+1]+t[i+1]),i=o;return x}(t,e,n,r)>0)for(let x=e;x<n;x+=r)o=d(x/r|0,t[x],t[x+1],o);else for(let x=n-r;x>=e;x-=r)o=d(x/r|0,t[x],t[x+1],o);return o&&b(o,o.next)&&(w(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!b(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(w(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function r(t,e,u,s,l,a,y){if(!t)return;!y&&a&&function(t,e,n,r){let x=t;do{0===x.z&&(x.z=c(x.x,x.y,e,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==t);x.prevZ.nextZ=null,x.prevZ=null,function(t){let e,n=1;do{let r,x=t;t=null;let o=null;for(e=0;x;){e++;let i=x,f=0;for(let t=0;t<n&&(f++,i=i.nextZ,i);t++);let u=n;for(;f>0||u>0&&i;)0!==f&&(0===u||!i||x.z<=i.z)?(r=x,x=x.nextZ,f--):(r=i,i=i.nextZ,u--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;x=i}o.nextZ=null,n*=2}while(e>1)}(x)}(t,s,l,a);let h=t;for(;t.prev!==t.next;){const c=t.prev,p=t.next;if(a?o(t,s,l,a):x(t))e.push(c.i,t.i,p.i),w(t),t=p.next,h=p.next;else if((t=p)===h){y?1===y?r(t=i(n(t),e),e,u,s,l,a,2):2===y&&f(t,e,u,s,l,a):r(n(t),e,u,s,l,a,1);break}}}function x(t){const e=t.prev,n=t,r=t.next;if(v(e,n,r)>=0)return!1;const x=e.x,o=n.x,i=r.x,f=e.y,u=n.y,s=r.y,l=Math.min(x,o,i),c=Math.min(f,u,s),a=Math.max(x,o,i),y=Math.max(f,u,s);let p=r.next;for(;p!==e;){if(p.x>=l&&p.x<=a&&p.y>=c&&p.y<=y&&h(x,f,o,u,i,s,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function o(t,e,n,r){const x=t.prev,o=t,i=t.next;if(v(x,o,i)>=0)return!1;const f=x.x,u=o.x,s=i.x,l=x.y,a=o.y,y=i.y,p=Math.min(f,u,s),b=Math.min(l,a,y),M=Math.max(f,u,s),m=Math.max(l,a,y),A=c(p,b,e,n,r),g=c(M,m,e,n,r);let Z=t.prevZ,d=t.nextZ;for(;Z&&Z.z>=A&&d&&d.z<=g;){if(Z.x>=p&&Z.x<=M&&Z.y>=b&&Z.y<=m&&Z!==x&&Z!==i&&h(f,l,u,a,s,y,Z.x,Z.y)&&v(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,d.x>=p&&d.x<=M&&d.y>=b&&d.y<=m&&d!==x&&d!==i&&h(f,l,u,a,s,y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;Z&&Z.z>=A;){if(Z.x>=p&&Z.x<=M&&Z.y>=b&&Z.y<=m&&Z!==x&&Z!==i&&h(f,l,u,a,s,y,Z.x,Z.y)&&v(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;d&&d.z<=g;){if(d.x>=p&&d.x<=M&&d.y>=b&&d.y<=m&&d!==x&&d!==i&&h(f,l,u,a,s,y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function i(t,e){let r=t;do{const n=r.prev,x=r.next.next;!b(n,x)&&M(n,r,r.next,x)&&g(n,x)&&g(x,n)&&(e.push(n.i,r.i,x.i),w(r),w(r.next),r=t=x),r=r.next}while(r!==t);return n(r)}function f(t,e,x,o,i,f){let u=t;do{let t=u.next.next;for(;t!==u.prev;){if(u.i!==t.i&&p(u,t)){let s=Z(u,t);return u=n(u,u.next),s=n(s,s.next),r(u,e,x,o,i,f,0),void r(s,e,x,o,i,f,0)}t=t.next}u=u.next}while(u!==t)}function u(t,e){let n=t.x-e.x;if(0===n&&(n=t.y-e.y,0===n)){n=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)}return n}function s(t,e){const r=function(t,e){let n=e;const r=t.x,x=t.y;let o,i=-1/0;if(b(t,n))return n;do{if(b(t,n.next))return n.next;if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>i&&(i=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const f=o,u=o.x,s=o.y;let c=1/0;n=o;do{if(r>=n.x&&n.x>=u&&r!==n.x&&y(x<s?r:i,x,u,s,x<s?i:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);g(n,t)&&(e<c||e===c&&(n.x>o.x||n.x===o.x&&l(o,n)))&&(o=n,c=e)}n=n.next}while(n!==f);return o}(t,e);if(!r)return e;const x=Z(r,t);return n(x,x.next),n(r,r.next)}function l(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function c(t,e,n,r,x){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function a(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function y(t,e,n,r,x,o,i,f){return(x-i)*(e-f)>=(t-i)*(o-f)&&(t-i)*(r-f)>=(n-i)*(e-f)&&(n-i)*(o-f)>=(x-i)*(r-f)}function h(t,e,n,r,x,o,i,f){return!(t===i&&e===f)&&y(t,e,n,r,x,o,i,f)}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&M(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(g(t,e)&&g(e,t)&&function(t,e){let n=t,r=!1;const x=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&x<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||b(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function M(t,e,n,r){const x=A(v(t,e,n)),o=A(v(t,e,r)),i=A(v(n,r,t)),f=A(v(n,r,e));return x!==o&&i!==f||(!(0!==x||!m(t,n,e))||(!(0!==o||!m(t,r,e))||(!(0!==i||!m(n,t,r))||!(0!==f||!m(n,e,r)))))}function m(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function A(t){return t>0?1:t<0?-1:0}function g(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function Z(t,e){const n=F(t.i,t.x,t.y),r=F(e.i,e.x,e.y),x=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=x,x.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function d(t,e,n,r){const x=F(t,e,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function F(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function E(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function I(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;!function(t,e){if(!t)throw new Error(e)}(0!==n,"Transformation matrix cannot be inverted");const x=e[0],o=e[1],i=e[2],f=e[3],u=e[4],s=e[5];return t[0]=f/n,t[1]=-o/n,t[2]=-i/n,t[3]=x/n,t[4]=(i*s-f*u)/n,t[5]=-(x*s-o*u)/n,t}new Array(6);const z=[],B={vertexAttributesPosition:0,instanceAttributesPosition:0,indicesPosition:0};function P(t,e,n,r,x){const o=t[e++],i=t[e++],f=z;f.length=r;for(let n=0;n<f.length;n++)f[n]=t[e+n];let u=x?x.instanceAttributesPosition:0;return n[u++]=o,n[u++]=i,f.length&&(n.set(f,u),u+=f.length),B.instanceAttributesPosition=u,B}function N(t,e,n,r,x,o,i,f,u,s){const l=[t[e],t[e+1]],c=[t[n],t[n+1]],a=t[e+2],y=t[n+2],h=E(f,[...l]),p=E(f,[...c]);function v(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),x=[(e[0]-t[0])/r,(e[1]-t[1])/r],o=[-x[1],x[0]],i=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),f=[(n[0]-t[0])/i,(n[1]-t[1])/i];let u=0===r||0===i?0:Math.acos((s=f[0]*x[0]+f[1]*x[1],l=-1,c=1,Math.min(Math.max(s,l),c)));var s,l,c;u=Math.max(u,1e-5);return f[0]*o[0]+f[1]*o[1]>0?u:2*Math.PI-u}let b=-1,M=-1,m=s;const A=null!==x;if(null!==r){b=v(h,p,E(f,[...[t[r],t[r+1]]])),Math.cos(b)<=.985&&(m+=Math.tan((b-Math.PI)/2))}if(A){M=v(p,h,E(f,[...[t[x],t[x+1]]])),Math.cos(M)<=.985&&(m+=Math.tan((Math.PI-M)/2))}const g=Math.pow(2,24),Z=u%g,d=Math.floor(u/g)*g;return o.push(l[0],l[1],a,c[0],c[1],y,b,M,Z,d,s),o.push(...i),{length:u+Math.sqrt((p[0]-h[0])*(p[0]-h[0])+(p[1]-h[1])*(p[1]-h[1])),angle:m}}function R(e,n,r,x,o){const i=2+o;let f=n;const u=e.slice(f,f+o);f+=o;const s=e[f++];let l=0;const c=new Array(s-1);for(let t=0;t<s;t++)l+=e[f++],t<s-1&&(c[t]=l);const a=e.slice(f,f+2*l),y=t(a,c,2);for(let t=0;t<y.length;t++)x.push(y[t]+r.length/i);for(let t=0;t<a.length;t+=2)r.push(a[t],a[t+1],...u);return f+2*l}const S="GENERATE_POLYGON_BUFFERS",T="GENERATE_POINT_BUFFERS",_="GENERATE_LINE_STRING_BUFFERS",O=self;O.onmessage=t=>{const e=t.data;switch(e.type){case T:{const t=2,n=2,r=e.customAttributesSize,x=n+r,o=new Float32Array(e.renderInstructions),i=o.length/x*(t+r),f=Uint32Array.from([0,1,3,1,2,3]),u=Float32Array.from([-1,-1,1,-1,1,1,-1,1]),s=new Float32Array(i);let l;for(let t=0;t<o.length;t+=x)l=P(o,t,s,r,l);const c=Object.assign({indicesBuffer:f.buffer,vertexAttributesBuffer:u.buffer,instanceAttributesBuffer:s.buffer,renderInstructions:o.buffer},e);O.postMessage(c,[u.buffer,s.buffer,f.buffer,o.buffer]);break}case _:{const t=[],n=e.customAttributesSize,r=3,x=new Float32Array(e.renderInstructions);let o=0;const i=[1,0,0,1,0,0];let f,u;for(I(i,e.renderInstructionsTransform);o<x.length;){u=Array.from(x.slice(o,o+n)),o+=n,f=x[o++];const e=o,s=o+(f-1)*r,l=x[e]===x[s]&&x[e+1]===x[s+1];let c=0,a=0;for(let n=0;n<f-1;n++){let y=null;n>0?y=o+(n-1)*r:l&&(y=s-r);let h=null;n<f-2?h=o+(n+2)*r:l&&(h=e+r);const p=N(x,o+n*r,o+(n+1)*r,y,h,t,u,i,c,a);c=p.length,a=p.angle}o+=f*r}const s=Uint32Array.from([0,1,3,1,2,3]),l=Float32Array.from([-1,-1,1,-1,1,1,-1,1]),c=Float32Array.from(t),a=Object.assign({indicesBuffer:s.buffer,vertexAttributesBuffer:l.buffer,instanceAttributesBuffer:c.buffer,renderInstructions:x.buffer},e);O.postMessage(a,[l.buffer,c.buffer,s.buffer,x.buffer]);break}case S:{const t=[],n=[],r=e.customAttributesSize,x=new Float32Array(e.renderInstructions);let o=0;for(;o<x.length;)o=R(x,o,t,n,r);const i=Uint32Array.from(n),f=Float32Array.from(t),u=Float32Array.from([]),s=Object.assign({indicesBuffer:i.buffer,vertexAttributesBuffer:f.buffer,instanceAttributesBuffer:u.buffer,renderInstructions:x.buffer},e);O.postMessage(s,[f.buffer,u.buffer,i.buffer,x.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}const K6={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};function BPe(t,e){e=e||[];const n=256,r=n-1,i=Math.floor(t/n/n/n)/r,s=Math.floor(t/n/n)%n/r,o=Math.floor(t/n)%n/r,a=t%n/r;return e[0]=i*256*255+s*255,e[1]=o*256*255+a*255,e}function WPe(t){let e=0;const n=256,r=n-1;return e+=Math.round(t[0]*n*n*n*r),e+=Math.round(t[1]*n*n*r),e+=Math.round(t[2]*n*r),e+=Math.round(t[3]*r),e}function BG(t,e,n,r){let i=0;for(const s in e){const o=e[s],a=o.callback.call(n,n.feature);let l=a?.[0]??a;l===e8&&console.warn('The "has" operator might return false positives.'),l===void 0?l=e8:l===null&&(l=0),t[r+i++]=l,!(!o.size||o.size===1)&&(t[r+i++]=a[1],!(o.size<3)&&(t[r+i++]=a[2],!(o.size<4)&&(t[r+i++]=a[3])))}return i}function U5(t){return Object.keys(t).reduce((e,n)=>e+(t[n].size||1),0)}function HPe(t,e,n,r){const i=(2+U5(n))*t.geometriesCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let c=0,u=l.flatCoordss.length;c<u;c++)s[0]=l.flatCoordss[c][0],s[1]=l.flatCoordss[c][1],Zi(r,s),e[o++]=s[0],e[o++]=s[1],o+=BG(e,n,l,o)}return e}function qPe(t,e,n,r){const i=3*t.verticesCount+(1+U5(n))*t.geometriesCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let c=0,u=l.flatCoordss.length;c<u;c++){s.length=l.flatCoordss[c].length,xd(l.flatCoordss[c],0,s.length,3,r,s,3),o+=BG(e,n,l,o),e[o++]=s.length/3;for(let h=0,f=s.length;h<f;h+=3)e[o++]=s[h],e[o++]=s[h+1],e[o++]=s[h+2]}}return e}function KPe(t,e,n,r){const i=2*t.verticesCount+(1+U5(n))*t.geometriesCount+t.ringsCount;(!e||e.length!==i)&&(e=new Float32Array(i));const s=[];let o=0;for(const a in t.entries){const l=t.entries[a];for(let c=0,u=l.flatCoordss.length;c<u;c++){s.length=l.flatCoordss[c].length,xd(l.flatCoordss[c],0,s.length,2,r,s),o+=BG(e,n,l,o),e[o++]=l.ringsVerticesCounts[c].length;for(let h=0,f=l.ringsVerticesCounts[c].length;h<f;h++)e[o++]=l.ringsVerticesCounts[c][h];for(let h=0,f=s.length;h<f;h+=2)e[o++]=s[h],e[o++]=s[h+1]}}return e}function e4(t){return(JSON.stringify(t).split("").reduce((n,r)=>(n<<5)-n+r.charCodeAt(0),0)>>>0).toString()}function WG(t,e,n,r){if(`${r}radius`in t&&r!=="icon-"){let i=An(n,t[`${r}radius`],Wt);if(`${r}radius2`in t){const s=An(n,t[`${r}radius2`],Wt);i=`max(${i}, ${s})`}`${r}stroke-width`in t&&(i=`(${i} + ${An(n,t[`${r}stroke-width`],Wt)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${i} * 2. + 0.5)`)}if(`${r}scale`in t){const i=An(n,t[`${r}scale`],iu);e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${i}`)}`${r}displacement`in t&&e.setSymbolOffsetExpression(An(n,t[`${r}displacement`],Pl)),`${r}rotation`in t&&e.setSymbolRotationExpression(An(n,t[`${r}rotation`],Wt)),`${r}rotate-with-view`in t&&e.setSymbolRotateWithView(!!t[`${r}rotate-with-view`])}function pce(t,e,n,r,i){let s="vec4(0.)";if(e!==null&&(s=e),n!==null&&r!==null){const l=`smoothstep(-${r} + 0.63, -${r} - 0.58, ${t})`;s=`mix(${n}, ${s}, ${l})`}const o=`(1.0 - smoothstep(-0.63, 0.58, ${t}))`;let a=`${s} * vec4(1.0, 1.0, 1.0, ${o})`;return i!==null&&(a=`${a} * vec4(1.0, 1.0, 1.0, ${i})`),a}function HG(t,e,n,r,i){const s=new Image;s.crossOrigin=t[`${r}cross-origin`]===void 0?"anonymous":t[`${r}cross-origin`],ur(typeof t[`${r}src`]=="string",`WebGL layers do not support expressions for the ${r}src style property`),s.src=t[`${r}src`],n[`u_texture${i}_size`]=()=>s.complete?[s.width,s.height]:[0,0],e.addUniform(`u_texture${i}_size`,"vec2");const o=`u_texture${i}_size`;return n[`u_texture${i}`]=s,e.addUniform(`u_texture${i}`,"sampler2D"),o}function qG(t,e,n,r,i){let s=An(n,t[`${e}offset`],iu);if(`${e}offset-origin`in t)switch(t[`${e}offset-origin`]){case"top-right":s=`vec2(${r}.x, 0.) + ${i} * vec2(-1., 0.) + ${s} * vec2(-1., 1.)`;break;case"bottom-left":s=`vec2(0., ${r}.y) + ${i} * vec2(0., -1.) + ${s} * vec2(1., -1.)`;break;case"bottom-right":s=`${r} - ${i} - ${s}`;break}return s}function YPe(t,e,n,r){r.functions.circleDistanceField=`float circleDistanceField(vec2 point, float radius) {
  return length(point) - radius;
}`,WG(t,e,r,"circle-");let i=null;"circle-opacity"in t&&(i=An(r,t["circle-opacity"],Wt));let s="coordsPx";"circle-scale"in t&&(s=`coordsPx / ${An(r,t["circle-scale"],iu)}`);let o=null;"circle-fill-color"in t&&(o=An(r,t["circle-fill-color"],Ei));let a=null;"circle-stroke-color"in t&&(a=An(r,t["circle-stroke-color"],Ei));let l=An(r,t["circle-radius"],Wt),c=null;"circle-stroke-width"in t&&(c=An(r,t["circle-stroke-width"],Wt),l=`(${l} + ${c} * 0.5)`);const u=`circleDistanceField(${s}, ${l})`,h=pce(u,o,a,c,i);e.setSymbolColorExpression(h)}function XPe(t,e,n,r){r.functions.round=`float round(float v) {
  return sign(v) * floor(abs(v) + 0.5);
}`,r.functions.starDistanceField=`float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round(beta / alpha) * alpha; // angle in sector
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  vec2 tipToPoint = inSector + vec2(-radius, 0.);
  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);
  return dot(normalize(edgeNormal), tipToPoint);
}`,r.functions.regularDistanceField=`float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {
  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle
  float c = cos(startAngle);
  float s = sin(startAngle);
  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);
  float alpha = TWO_PI / numPoints; // the angle of one sector
  float radiusIn = radius * cos(PI / numPoints);
  float beta = atan(pointRotated.y, pointRotated.x);
  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid
  c = cos(-gamma);
  s = sin(-gamma);
  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));
  return inSector.x - radiusIn;
}`,WG(t,e,r,"shape-");let i=null;"shape-opacity"in t&&(i=An(r,t["shape-opacity"],Wt));let s="coordsPx";"shape-scale"in t&&(s=`coordsPx / ${An(r,t["shape-scale"],iu)}`);let o=null;"shape-fill-color"in t&&(o=An(r,t["shape-fill-color"],Ei));let a=null;"shape-stroke-color"in t&&(a=An(r,t["shape-stroke-color"],Ei));let l=null;"shape-stroke-width"in t&&(l=An(r,t["shape-stroke-width"],Wt));const c=An(r,t["shape-points"],Wt);let u="0.";"shape-angle"in t&&(u=An(r,t["shape-angle"],Wt));let h,f=An(r,t["shape-radius"],Wt);if(l!==null&&(f=`${f} + ${l} * 0.5`),"shape-radius2"in t){let y=An(r,t["shape-radius2"],Wt);l!==null&&(y=`${y} + ${l} * 0.5`),h=`starDistanceField(${s}, ${c}, ${f}, ${y}, ${u})`}else h=`regularDistanceField(${s}, ${c}, ${f}, ${u})`;const g=pce(h,o,a,l,i);e.setSymbolColorExpression(g)}function ZPe(t,e,n,r){let i="vec4(1.0)";"icon-color"in t&&(i=An(r,t["icon-color"],Ei)),"icon-opacity"in t&&(i=`${i} * vec4(1.0, 1.0, 1.0, ${An(r,t["icon-opacity"],Wt)})`);const s=e4(t["icon-src"]),o=HG(t,e,n,"icon-",s);if(e.setSymbolColorExpression(`${i} * texture2D(u_texture${s}, v_texCoord)`).setSymbolSizeExpression(o),"icon-width"in t&&"icon-height"in t&&e.setSymbolSizeExpression(`vec2(${An(r,t["icon-width"],Wt)}, ${An(r,t["icon-height"],Wt)})`),"icon-offset"in t&&"icon-size"in t){const a=An(r,t["icon-size"],Pl),l=e.getSymbolSizeExpression();e.setSymbolSizeExpression(a);const c=qG(t,"icon-",r,"v_quadSizePx",a);e.setTextureCoordinateExpression(`(vec4((${c}).xyxy) + vec4(0., 0., ${a})) / (${l}).xyxy`)}if(WG(t,e,r,"icon-"),"icon-anchor"in t){const a=An(r,t["icon-anchor"],Pl);let l="1.0";"icon-scale"in t&&(l=An(r,t["icon-scale"],iu));let c;t["icon-anchor-x-units"]==="pixels"&&t["icon-anchor-y-units"]==="pixels"?c=`${a} * ${l}`:t["icon-anchor-x-units"]==="pixels"?c=`${a} * vec2(vec2(${l}).x, v_quadSizePx.y)`:t["icon-anchor-y-units"]==="pixels"?c=`${a} * vec2(v_quadSizePx.x, vec2(${l}).x)`:c=`${a} * v_quadSizePx`;let u=`v_quadSizePx * vec2(0.5, -0.5) + ${c} * vec2(-1., 1.)`;if("icon-anchor-origin"in t)switch(t["icon-anchor-origin"]){case"top-right":u=`v_quadSizePx * -0.5 + ${c}`;break;case"bottom-left":u=`v_quadSizePx * 0.5 - ${c}`;break;case"bottom-right":u=`v_quadSizePx * vec2(-0.5, 0.5) + ${c} * vec2(1., -1.)`;break}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${u}`)}}function JPe(t,e,n,r){if("stroke-color"in t&&e.setStrokeColorExpression(An(r,t["stroke-color"],Ei)),"stroke-pattern-src"in t){const i=e4(t["stroke-pattern-src"]),s=HG(t,e,n,"stroke-pattern-",i);let o=s,a="vec2(0.)";"stroke-pattern-offset"in t&&"stroke-pattern-size"in t&&(o=An(r,t["stroke-pattern-size"],Pl),a=qG(t,"stroke-pattern-",r,s,o));let l="0.";"stroke-pattern-spacing"in t&&(l=An(r,t["stroke-pattern-spacing"],Wt));let c="0.";"stroke-pattern-start-offset"in t&&(c=An(r,t["stroke-pattern-start-offset"],Wt)),r.functions.sampleStrokePattern=`vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float startOffsetPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {
  float currentLengthScaled = (currentLengthPx - startOffsetPx) * sampleSize.y / lineWidth;
  float spacingScaled = spacingPx * sampleSize.y / lineWidth;
  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));
  float isInsideOfPattern = step(uCoordPx, sampleSize.x);
  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;
  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);
  vCoordPx = clamp(vCoordPx, 0.5, sampleSize.y - 0.5);
  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;
  return texture2D(texture, texCoord) * vec4(1.0, 1.0, 1.0, isInsideOfPattern);
}`;const u=`u_texture${i}`;let h="1.";"stroke-color"in t&&(h=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${h} * sampleStrokePattern(${u}, ${s}, ${a}, ${o}, ${l}, ${c}, currentLengthPx, currentRadiusRatio, v_width)`),r.functions.computeStrokePatternLength=`float computeStrokePatternLength(vec2 sampleSize, float spacingPx, float lineWidth) {
  float patternLengthPx = sampleSize.x / sampleSize.y * lineWidth;
  return patternLengthPx + spacingPx;
}`,e.setStrokePatternLengthExpression(`computeStrokePatternLength(${o}, ${l}, v_width)`)}if("stroke-width"in t&&e.setStrokeWidthExpression(An(r,t["stroke-width"],Wt)),"stroke-offset"in t&&e.setStrokeOffsetExpression(An(r,t["stroke-offset"],Wt)),"stroke-line-cap"in t&&e.setStrokeCapExpression(An(r,t["stroke-line-cap"],Us)),"stroke-line-join"in t&&e.setStrokeJoinExpression(An(r,t["stroke-line-join"],Us)),"stroke-miter-limit"in t&&e.setStrokeMiterLimitExpression(An(r,t["stroke-miter-limit"],Wt)),"stroke-line-dash"in t){r.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType, float lineWidth) {
  float localDistance = mod(distance, dashLengthTotal);
  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;
  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);
  if (capType == ${zf("square")}) {
    distanceSegment -= lineWidth * 0.5;
  } else if (capType == ${zf("round")}) {
    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - lineWidth * 0.5);
  }
  return distanceSegment;
}`;let i=t["stroke-line-dash"].map(y=>An(r,y,Wt));i.length%2===1&&(i=[...i,...i]);let s="0.";"stroke-line-dash-offset"in t&&(s=An(r,t["stroke-line-dash-offset"],Wt));const a=`dashDistanceField_${e4(t["stroke-line-dash"])}`,l=i.map((y,_)=>`float dashLength${_}`).join(", "),c=i.map((y,_)=>`dashLength${_}`).join(" + ");let u="0.",h=`getSingleDashDistance(distance, radius, ${u}, dashLength0, totalDashLength, capType, lineWidth)`;for(let y=2;y<i.length;y+=2)u=`${u} + dashLength${y-2} + dashLength${y-1}`,h=`min(${h}, getSingleDashDistance(distance, radius, ${u}, dashLength${y}, totalDashLength, capType, lineWidth))`;r.functions[a]=`float ${a}(float distance, float radius, float capType, float lineWidth, ${l}) {
  float totalDashLength = ${c};
  return ${h};
}`;const f=i.map((y,_)=>`${y}`).join(", ");e.setStrokeDistanceFieldExpression(`${a}(currentLengthPx + ${s}, currentRadiusPx, capType, v_width, ${f})`);let g=i.join(" + ");e.getStrokePatternLengthExpression()&&(r.functions.combinePatternLengths=`float combinePatternLengths(float patternLength1, float patternLength2) {
  return patternLength1 * patternLength2;
}`,g=`combinePatternLengths(${e.getStrokePatternLengthExpression()}, ${g})`),e.setStrokePatternLengthExpression(g)}}function QPe(t,e,n,r){if("fill-color"in t&&e.setFillColorExpression(An(r,t["fill-color"],Ei)),"fill-pattern-src"in t){const i=e4(t["fill-pattern-src"]),s=HG(t,e,n,"fill-pattern-",i);let o=s,a="vec2(0.)";"fill-pattern-offset"in t&&"fill-pattern-size"in t&&(o=An(r,t["fill-pattern-size"],Pl),a=qG(t,"fill-pattern-",r,s,o)),r.functions.sampleFillPattern=`vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {
  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);
  vec2 pxRelativePos = pxPosition - pxOrigin;
  // rotate the relative position from origin by the current view rotation
  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));
  // sample position is computed according to the sample offset & size
  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);
  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels
  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));
  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright
  return texture2D(texture, (samplePos + textureOffset) / textureSize);
}`;const l=`u_texture${i}`;let c="1.";"fill-color"in t&&(c=e.getFillColorExpression()),e.setFillColorExpression(`${c} * sampleFillPattern(${l}, ${s}, ${a}, ${o}, pxOrigin, pxPos)`)}}function vZ(t,e,n){const r=ace(),i=new fce,s={};if("icon-src"in t?ZPe(t,i,s,r):"shape-points"in t?XPe(t,i,s,r):"circle-radius"in t&&YPe(t,i,s,r),JPe(t,i,s,r),QPe(t,i,s,r),n){const l=An(r,n,Is);i.setFragmentDiscardExpression(`!${l}`)}const o={};function a(l,c,u,h){if(!r[l])return;const f=t8(u),g=UG(u);i.addAttribute(`a_${c}`,f),o[c]={size:g,callback:h}}return a("geometryType",cce,Us,l=>Ek(PG(l.getGeometry()))),a("featureId",lce,Us|Wt,l=>{const c=l.getId()??null;return typeof c=="string"?Ek(c):c}),uce(i,r),{builder:i,attributes:{...o,...dce(r)},uniforms:{...s,...hce(r,e)}}}const eCe=[];let Y6;function tCe(){return Y6||(Y6=UPe()),Y6}let nCe=0;const Oc={POSITION:"a_position",LOCAL_POSITION:"a_localPosition",SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",MEASURE_START:"a_measureStart",MEASURE_END:"a_measureEnd",ANGLE_TANGENT_SUM:"a_angleTangentSum",JOIN_ANGLES:"a_joinAngles",DISTANCE_LOW:"a_distanceLow",DISTANCE_HIGH:"a_distanceHigh"};class rCe{constructor(e,n,r,i){this.helper_,this.hitDetectionEnabled_=!!i,this.styleShaders=iCe(e,n),this.customAttributes_={},this.uniforms_={},this.hitDetectionEnabled_&&(this.customAttributes_.hitColor={callback(){return BPe(this.ref,eCe)},size:2});for(const s of this.styleShaders){for(const o in s.attributes)o in this.customAttributes_||(this.customAttributes_[o]=s.attributes[o]);for(const o in s.uniforms)o in this.uniforms_||(this.uniforms_[o]=s.uniforms[o])}this.renderPasses_=this.styleShaders.map(s=>{const o={},a=Object.entries(this.customAttributes_).map(([l,c])=>({name:l in s.attributes||l==="hitColor"?`a_${l}`:null,size:c.size||1,type:Ao.FLOAT}));return s.builder.getFillVertexShader()&&(o.fillRenderPass={vertexShader:s.builder.getFillVertexShader(),fragmentShader:s.builder.getFillFragmentShader(),attributesDesc:[{name:Oc.POSITION,size:2,type:Ao.FLOAT},...a],instancedAttributesDesc:[],instancePrimitiveVertexCount:3}),s.builder.getStrokeVertexShader()&&(o.strokeRenderPass={vertexShader:s.builder.getStrokeVertexShader(),fragmentShader:s.builder.getStrokeFragmentShader(),attributesDesc:[{name:Oc.LOCAL_POSITION,size:2,type:Ao.FLOAT}],instancedAttributesDesc:[{name:Oc.SEGMENT_START,size:2,type:Ao.FLOAT},{name:Oc.MEASURE_START,size:1,type:Ao.FLOAT},{name:Oc.SEGMENT_END,size:2,type:Ao.FLOAT},{name:Oc.MEASURE_END,size:1,type:Ao.FLOAT},{name:Oc.JOIN_ANGLES,size:2,type:Ao.FLOAT},{name:Oc.DISTANCE_LOW,size:1,type:Ao.FLOAT},{name:Oc.DISTANCE_HIGH,size:1,type:Ao.FLOAT},{name:Oc.ANGLE_TANGENT_SUM,size:1,type:Ao.FLOAT},...a],instancePrimitiveVertexCount:6}),s.builder.getSymbolVertexShader()&&(o.symbolRenderPass={vertexShader:s.builder.getSymbolVertexShader(),fragmentShader:s.builder.getSymbolFragmentShader(),attributesDesc:[{name:Oc.LOCAL_POSITION,size:2,type:Ao.FLOAT}],instancedAttributesDesc:[{name:Oc.POSITION,size:2,type:Ao.FLOAT},...a],instancePrimitiveVertexCount:6}),o}),this.hasFill_=this.renderPasses_.some(s=>s.fillRenderPass),this.hasStroke_=this.renderPasses_.some(s=>s.strokeRenderPass),this.hasSymbol_=this.renderPasses_.some(s=>s.symbolRenderPass),this.setHelper(r)}async generateBuffers(e,n){if(e.isEmpty())return null;const r=this.generateRenderInstructions_(e,n),[i,s,o]=await Promise.all([this.generateBuffersForType_(r.polygonInstructions,"Polygon",n),this.generateBuffersForType_(r.lineStringInstructions,"LineString",n),this.generateBuffersForType_(r.pointInstructions,"Point",n)]),a=pk(Ws(),n);return{polygonBuffers:i,lineStringBuffers:s,pointBuffers:o,invertVerticesTransform:a}}generateRenderInstructions_(e,n){const r=this.hasFill_?KPe(e.polygonBatch,new Float32Array(0),this.customAttributes_,n):null,i=this.hasStroke_?qPe(e.lineStringBatch,new Float32Array(0),this.customAttributes_,n):null,s=this.hasSymbol_?HPe(e.pointBatch,new Float32Array(0),this.customAttributes_,n):null;return{polygonInstructions:r,lineStringInstructions:i,pointInstructions:s}}generateBuffersForType_(e,n,r){if(e===null)return null;const i=nCe++;let s;switch(n){case"Polygon":s=K6.GENERATE_POLYGON_BUFFERS;break;case"LineString":s=K6.GENERATE_LINE_STRING_BUFFERS;break;case"Point":s=K6.GENERATE_POINT_BUFFERS;break}const o={id:i,type:s,renderInstructions:e.buffer,renderInstructionsTransform:r,customAttributesSize:U5(this.customAttributes_)},a=tCe();return a.postMessage(o,[e.buffer]),e=null,new Promise(l=>{const c=u=>{const h=u.data;if(h.id!==i||(a.removeEventListener("message",c),!this.helper_.getGL()))return;const f=new G6(DG,z6).fromArrayBuffer(h.indicesBuffer),g=new G6(Y3,z6).fromArrayBuffer(h.vertexAttributesBuffer),y=new G6(Y3,z6).fromArrayBuffer(h.instanceAttributesBuffer);this.helper_.flushBufferData(f),this.helper_.flushBufferData(g),this.helper_.flushBufferData(y),l([f,g,y])};a.addEventListener("message",c)})}render(e,n,r){for(const i of this.renderPasses_)i.fillRenderPass&&this.renderInternal_(e.polygonBuffers[0],e.polygonBuffers[1],e.polygonBuffers[2],i.fillRenderPass,n,r),i.strokeRenderPass&&this.renderInternal_(e.lineStringBuffers[0],e.lineStringBuffers[1],e.lineStringBuffers[2],i.strokeRenderPass,n,r),i.symbolRenderPass&&this.renderInternal_(e.pointBuffers[0],e.pointBuffers[1],e.pointBuffers[2],i.symbolRenderPass,n,r)}renderInternal_(e,n,r,i,s,o){const a=e.getSize();if(a===0)return;const l=i.instancedAttributesDesc.length;if(this.helper_.useProgram(i.program,s),this.helper_.bindBuffer(n),this.helper_.bindBuffer(e),this.helper_.enableAttributes(i.attributesDesc),this.helper_.bindBuffer(r),this.helper_.enableAttributesInstanced(i.instancedAttributesDesc),o(),l){const c=i.instancedAttributesDesc.reduce((h,f)=>h+(f.size||1),0),u=r.getSize()/c;this.helper_.drawElementsInstanced(0,a,u)}else this.helper_.drawElements(0,a)}setHelper(e,n=null){this.helper_=e;for(const r of this.renderPasses_)r.fillRenderPass&&(r.fillRenderPass.program=this.helper_.getProgram(r.fillRenderPass.fragmentShader,r.fillRenderPass.vertexShader)),r.strokeRenderPass&&(r.strokeRenderPass.program=this.helper_.getProgram(r.strokeRenderPass.fragmentShader,r.strokeRenderPass.vertexShader)),r.symbolRenderPass&&(r.symbolRenderPass.program=this.helper_.getProgram(r.symbolRenderPass.fragmentShader,r.symbolRenderPass.vertexShader));this.helper_.addUniforms(this.uniforms_),n&&(n.polygonBuffers&&(this.helper_.flushBufferData(n.polygonBuffers[0]),this.helper_.flushBufferData(n.polygonBuffers[1]),this.helper_.flushBufferData(n.polygonBuffers[2])),n.lineStringBuffers&&(this.helper_.flushBufferData(n.lineStringBuffers[0]),this.helper_.flushBufferData(n.lineStringBuffers[1]),this.helper_.flushBufferData(n.lineStringBuffers[2])),n.pointBuffers&&(this.helper_.flushBufferData(n.pointBuffers[0]),this.helper_.flushBufferData(n.pointBuffers[1]),this.helper_.flushBufferData(n.pointBuffers[2])))}}function iCe(t,e){const n=Array.isArray(t)?t:[t];if("style"in n[0]){const r=[],i=n,s=[];for(const o of i){const a=Array.isArray(o.style)?o.style:[o.style];let l=o.filter;o.else&&s.length&&(l=["all",...s.map(u=>["!",u])],o.filter&&l.push(o.filter),l.length<3&&(l=l[1])),o.filter&&s.push(o.filter);const c=a.map(u=>vZ(u,e,l));r.push(...c)}return r}return"builder"in n[0]?n:n.map(r=>vZ(r,e,null))}const Wh=new Uint8Array(4);class sCe{constructor(e,n){this.helper_=e;const r=e.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.depthbuffer_=r.createRenderbuffer(),this.size_=n||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(e){Bd(e,this.size_)||(this.size_[0]=e[0],this.size_[1]=e[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const e=this.size_,n=this.helper_.getGL();n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.readPixels(0,0,e[0],e[1],n.RGBA,n.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(e,n){if(e<0||n<0||e>this.size_[0]||n>=this.size_[1])return Wh[0]=0,Wh[1]=0,Wh[2]=0,Wh[3]=0,Wh;this.readAll();const r=Math.floor(e)+(this.size_[1]-Math.floor(n)-1)*this.size_[0];return Wh[0]=this.data_[r*4],Wh[1]=this.data_[r*4+1],Wh[2]=this.data_[r*4+2],Wh[3]=this.data_[r*4+3],Wh}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const e=this.size_,n=this.helper_.getGL();this.texture_=this.helper_.createTexture(e,null,this.texture_),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer_),n.viewport(0,0,e[0],e[1]),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,this.texture_,0),n.bindRenderbuffer(n.RENDERBUFFER,this.depthbuffer_),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,e[0],e[1]),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(e[0]*e[1]*4)}}function oCe(t,e){const n=t.viewState.projection,i=e.getSource().getWrapX()&&n.canWrapX(),s=n.getExtent(),o=t.extent,a=i?Xn(s):null,l=i?Math.ceil((o[2]-s[2])/a)+1:1;return[i?Math.floor((o[0]-s[0])/a):0,l,a]}const p_={..._f,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class aCe extends FG{constructor(e,n){const r={[p_.RENDER_EXTENT]:[0,0,0,0],[p_.PATTERN_ORIGIN]:[0,0],[p_.GLOBAL_ALPHA]:1};super(e,{uniforms:r,postProcesses:n.postProcesses}),this.hitDetectionEnabled_=!n.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=Wa(),this.currentTransform_=Ws(),this.tmpCoords_=[0,0],this.tmpTransform_=Ws(),this.tmpMat4_=Jle(),this.currentFrameStateTransform_=Ws(),this.styleVariables_={},this.style_=[],this.styleRenderer_=null,this.buffers_=null,this.applyOptions_(n),this.batch_=new Q3,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(e){const n=this.getLayer().getSource();let r;this.batch_.addFeatures(n.getFeatures(),r),this.sourceListenKeys_=[Yn(n,io.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,r)),Yn(n,io.CHANGEFEATURE,this.handleSourceFeatureChanged_.bind(this,r),this),Yn(n,io.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),Yn(n,io.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(e){this.styleVariables_=e.variables,this.style_=e.style}createRenderers_(){this.buffers_=null,this.styleRenderer_=new rCe(this.style_,this.styleVariables_,this.helper,this.hitDetectionEnabled_)}reset(e){this.applyOptions_(e),this.helper&&this.createRenderers_(),super.reset(e)}afterHelperCreated(){this.styleRenderer_?this.styleRenderer_.setHelper(this.helper,this.buffers_):this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new sCe(this.helper))}handleSourceFeatureAdded_(e,n){const r=n.feature;this.batch_.addFeature(r,e)}handleSourceFeatureChanged_(e,n){const r=n.feature;this.batch_.changeFeature(r,e)}handleSourceFeatureDelete_(e){const n=e.feature;this.batch_.removeFeature(n)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(e){sle(this.tmpTransform_,this.currentFrameStateTransform_),ile(this.tmpTransform_,e),this.helper.setUniformMatrixValue(p_.PROJECTION_MATRIX,JF(this.tmpMat4_,this.tmpTransform_)),pk(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(p_.SCREEN_TO_WORLD_MATRIX,JF(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,pk(this.tmpTransform_,e),Zi(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(p_.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(e){const n=this.helper.getGL();this.preRender(n,e);const[r,i,s]=oCe(e,this.getLayer());this.helper.prepareDraw(e),this.renderWorlds(e,!1,r,i,s),this.helper.finalizeDraw(e,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const o=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(e,!0,r,i,s),this.hitRenderTarget_.clearCachedData()),this.postRender(n,e),o}prepareFrameInternal(e){this.initialFeaturesAdded_||(this.addInitialFeatures_(e),this.initialFeaturesAdded_=!0);const n=this.getLayer(),r=n.getSource(),i=e.viewState,s=!e.viewHints[Ts.ANIMATING]&&!e.viewHints[Ts.INTERACTING],o=!S1(this.previousExtent_,e.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),s&&(o||a)){const l=i.projection,c=i.resolution,u=n instanceof z5?n.getRenderBuffer():0,h=sh(e.extent,u*c);r.loadFeatures(h,c,l),this.ready=!1;const f=this.helper.makeProjectionTransform(e,Ws());this.styleRenderer_.generateBuffers(this.batch_,f).then(g=>{this.buffers_&&this.disposeBuffers(this.buffers_),this.buffers_=g,this.ready=!0,this.getLayer().changed()}),this.previousExtent_=e.extent.slice()}return!0}renderWorlds(e,n,r,i,s){let o=r;n&&(this.hitRenderTarget_.setSize([Math.floor(e.size[0]/2),Math.floor(e.size[1]/2)]),this.helper.prepareDrawToRenderTarget(e,this.hitRenderTarget_,!0));do this.helper.makeProjectionTransform(e,this.currentFrameStateTransform_),Rke(this.currentFrameStateTransform_,o*s,0),this.buffers_&&this.styleRenderer_.render(this.buffers_,e,()=>{this.applyUniforms_(this.buffers_.invertVerticesTransform),this.helper.applyHitDetectionUniform(n)});while(++o<i)}forEachFeatureAtCoordinate(e,n,r,i,s){if(ur(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderer_||!this.hitDetectionEnabled_)return;const o=Zi(n.coordinateToPixelTransform,e.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],c=WPe(l),u=this.batch_.getFeatureFromRef(c);if(u)return i(u,this.getLayer(),null)}disposeBuffers(e){const n=r=>{for(const i of r)i&&this.helper.deleteBuffer(i)};e.pointBuffers&&n(e.pointBuffers),e.lineStringBuffers&&n(e.lineStringBuffers),e.polygonBuffers&&n(e.polygonBuffers)}disposeInternal(){this.buffers_&&this.disposeBuffers(this.buffers_),this.sourceListenKeys_&&(this.sourceListenKeys_.forEach(function(e){ni(e)}),this.sourceListenKeys_=null),super.disposeInternal()}renderDeclutter(){}}const df={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},lCe=["#00f","#0ff","#0f0","#ff0","#f00"];class cCe extends z5{constructor(e){e=e||{};const n=Object.assign({},e);delete n.gradient,delete n.radius,delete n.blur,delete n.weight,super(n),this.filter_=e.filter??!0,this.styleVariables_=e.variables||{},this.gradient_=null,this.addChangeListener(df.GRADIENT,this.handleGradientChanged_),this.setGradient(e.gradient?e.gradient:lCe),this.setBlur(e.blur!==void 0?e.blur:15),this.setRadius(e.radius!==void 0?e.radius:8);const r=e.weight?e.weight:"weight";this.weight_=r,this.setRenderOrder(null)}getBlur(){return this.get(df.BLUR)}getGradient(){return this.get(df.GRADIENT)}getRadius(){return this.get(df.RADIUS)}handleGradientChanged_(){this.gradient_=uCe(this.getGradient())}setBlur(e){const n=this.get(df.BLUR);if(this.set(df.BLUR,e),typeof e=="number"&&typeof n=="number"){this.changed();return}this.clearRenderer()}setGradient(e){this.set(df.GRADIENT,e)}setRadius(e){const n=this.get(df.RADIUS);if(this.set(df.RADIUS,e),typeof e=="number"&&typeof n=="number"){this.changed();return}this.clearRenderer()}setFilter(e){this.filter_=e,this.changed(),this.clearRenderer()}setWeight(e){this.weight_=e,this.changed(),this.clearRenderer()}createRenderer(){const e=new fce,n=ace(),r=An(n,this.filter_,Is);let i=An(n,this.getRadius(),Wt),s=An(n,this.getBlur(),Wt);const o={};typeof this.getBlur()=="number"&&(s="a_blur",o.a_blur=()=>this.getBlur(),e.addUniform("a_blur","float")),typeof this.getRadius()=="number"&&(i="a_radius",o.a_radius=()=>this.getRadius(),e.addUniform("a_radius","float"));const a={};let l=null;if(typeof this.weight_=="string"||typeof this.weight_=="function"){const h=typeof this.weight_=="string"?f=>f.get(this.weight_):this.weight_;a.prop_weight={size:1,callback:f=>{const g=h(f);return g!==void 0?ri(g,0,1):1}},l="a_prop_weight",e.addAttribute("a_prop_weight","float")}else{const h=["clamp",this.weight_,0,1];l=An(n,h,Wt)}e.addFragmentShaderFunction(`float getBlurSlope() {
  float blur = max(1., ${s});
  float radius = ${i};
  return radius / blur;
}`).setSymbolSizeExpression(`vec2(${i} + ${s}) * 2.`).setSymbolColorExpression(`vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * getBlurSlope()) * ${l})`).setStrokeColorExpression(`vec4(smoothstep(0., 1., (1. - length(currentRadiusPx * 2. / v_width)) * getBlurSlope()) * ${l})`).setStrokeWidthExpression(`(${i} + ${s}) * 2.`).setFillColorExpression(`vec4(${l})`).setFragmentDiscardExpression(`!${r}`),uce(e,n);const c=dce(n),u=hce(n,this.styleVariables_);return new aCe(this,{className:this.getClassName(),variables:this.styleVariables_,style:{builder:e,attributes:{...c,...a},uniforms:{...u,...o}},disableHitDetection:!1,postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}updateStyleVariables(e){Object.assign(this.styleVariables_,e),this.changed()}renderDeclutter(){}}function uCe(t){const r=Rs(1,256),i=r.createLinearGradient(0,0,1,256),s=1/(t.length-1);for(let o=0,a=t.length;o<a;++o)i.addColorStop(o*s,t[o]);return r.fillStyle=i,r.fillRect(0,0,1,256),r.canvas}class hCe extends kG{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const n=e.layerStatesArray[e.layerIndex],r=e.pixelRatio,i=e.viewState,s=i.resolution,o=this.getLayer().getSource(),a=e.viewHints;let l=e.extent;if(n.extent!==void 0&&(l=tp(l,oh(n.extent,i.projection))),!a[Ts.ANIMATING]&&!a[Ts.INTERACTING]&&!Z2(l))if(o){const c=i.projection,u=o.getImage(l,s,r,c);u&&(this.loadImage(u)?this.image=u:u.getState()===Vt.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const n=this.frameState;if(!n)return null;const r=this.getLayer(),i=Zi(n.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!E1(s,i))return null;const o=this.image.getExtent(),a=this.image.getImage(),l=Xn(o),c=Math.floor(a.width*((i[0]-o[0])/l));if(c<0||c>=a.width)return null;const u=Ps(o),h=Math.floor(a.height*((o[3]-i[1])/u));return h<0||h>=a.height?null:this.getImageData(a,c,h)}renderFrame(e,n){const r=this.image,i=r.getExtent(),s=r.getResolution(),[o,a]=Array.isArray(s)?s:[s,s],l=r.getPixelRatio(),c=e.layerStatesArray[e.layerIndex],u=e.pixelRatio,h=e.viewState,f=h.center,g=h.resolution,y=u*o/(g*l),_=u*a/(g*l);this.prepareContainer(e,n);const b=this.context.canvas.width,T=this.context.canvas.height,A=this.getRenderContext(e);let I=!1,P=!0;if(c.extent){const O=oh(c.extent,h.projection);P=oa(O,e.extent),I=P&&!Jm(O,e.extent),I&&this.clipUnrotated(A,e,O)}const N=r.getImage(),L=mu(this.tempTransform,b/2,T/2,y,_,0,l*(i[0]-f[0])/o,l*(f[1]-i[3])/a);this.renderedResolution=a*u/l;const C=N.width*L[0],M=N.height*L[3];if(this.getLayer().getSource().getInterpolate()||(A.imageSmoothingEnabled=!1),this.preRender(A,e),P&&C>=.5&&M>=.5){const O=L[4],D=L[5],V=c.opacity;V!==1&&(A.save(),A.globalAlpha=V),A.drawImage(N,0,0,+N.width,+N.height,O,D,C,M),V!==1&&A.restore()}return this.postRender(this.context,e),I&&A.restore(),A.imageSmoothingEnabled=!0,this.container}}class dCe extends YA{constructor(e){e=e||{},super(e)}}class fCe extends dCe{constructor(e){super(e)}createRenderer(){return new hCe(this)}getData(e){return super.getData(e)}}function X6(t,e,n){if(!(n in t))return t[n]=new Set([e]),!0;const r=t[n],i=r.has(e);return i||r.add(e),!i}function pCe(t,e,n){const r=t[n];return r?r.delete(e):!1}function _Z(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=tp(e,oh(n.extent,t.viewState.projection)));const r=n.layer.getRenderSource();if(!r.getWrapX()){const i=r.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=tp(e,i))}return e}class mCe extends kG{constructor(e,n){super(e),n=n||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Wa(),this.tempTileRange_=new $G(0,0,0,0),this.tempTileCoord_=J3(0,0,0);const r=n.cacheSize!==void 0?n.cacheSize:512;this.tileCache_=new gZ(r),this.sourceTileCache_=null,this.maxStaleKeys=r*.5}getTileCache(){return this.tileCache_}getSourceTileCache(){return this.sourceTileCache_||(this.sourceTileCache_=new gZ(512)),this.sourceTileCache_}getOrCreateTile(e,n,r,i){const s=this.tileCache_,a=this.getLayer().getSource(),l=tM(a,a.getKey(),e,n,r);let c;if(s.containsKey(l))c=s.get(l);else{const u=i.viewState.projection,h=a.getProjection();if(c=a.getTile(e,n,r,i.pixelRatio,u,!h||t1(h,u)?void 0:this.getSourceTileCache()),!c)return null;s.set(l,c)}return c}getTile(e,n,r,i){const s=this.getOrCreateTile(e,n,r,i);return s||null}getData(e){const n=this.frameState;if(!n)return null;const r=this.getLayer(),i=Zi(n.pixelToCoordinateTransform,e.slice()),s=r.getExtent();if(s&&!E1(s,i))return null;const o=n.viewState,a=r.getRenderSource(),l=a.getTileGridForProjection(o.projection),c=a.getTilePixelRatio(n.pixelRatio);for(let u=l.getZForResolution(o.resolution);u>=l.getMinZoom();--u){const h=l.getTileCoordForCoordAndZ(i,u),f=this.getTile(u,h[1],h[2],n);if(!f||f.getState()!==cn.LOADED)continue;const g=l.getOrigin(u),y=ja(l.getTileSize(u)),_=l.getResolution(u);let b;if(f instanceof tce||f instanceof sce)b=f.getImage();else if(f instanceof fZ){if(b=QF(f.getData()),!b)continue}else continue;const T=Math.floor(c*((i[0]-g[0])/_-h[1]*y[0])),A=Math.floor(c*((g[1]-i[1])/_-h[2]*y[1])),I=Math.round(c*a.getGutterForProjection(o.projection));return this.getImageData(b,T+I,A+I)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const n=this.getLayer().getSource();if(!n)return!1;const r=n.getRevision();return this.renderedSourceRevision_?this.renderedSourceRevision_!==r&&(this.renderedSourceRevision_=r,this.renderedSourceKey_===n.getKey()&&(this.tileCache_.clear(),this.sourceTileCache_?.clear())):this.renderedSourceRevision_=r,!0}enqueueTilesForNextExtent(){return!0}enqueueTiles(e,n,r,i,s){const o=e.viewState,a=this.getLayer(),l=a.getRenderSource(),c=l.getTileGridForProjection(o.projection),u=Qt(l);u in e.wantedTiles||(e.wantedTiles[u]={});const h=e.wantedTiles[u],f=a.getMapInternal(),g=Math.max(r-s,c.getMinZoom(),c.getZForResolution(Math.min(a.getMaxResolution(),f?f.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):c.getResolution(0)),l.zDirection)),y=o.rotation,_=y?Wae(o.center,o.resolution,y,e.size):void 0;for(let b=r;b>=g;--b){const T=c.getTileRangeForExtentAndZ(n,b,this.tempTileRange_),A=c.getResolution(b);for(let I=T.minX;I<=T.maxX;++I)for(let P=T.minY;P<=T.maxY;++P){if(y&&!c.tileCoordIntersectsViewport([b,I,P],_))continue;const N=this.getTile(b,I,P,e);if(!N||!X6(i,N,b))continue;const C=N.getKey();if(h[C]=!0,N.getState()===cn.IDLE&&!e.tileQueue.isKeyQueued(C)){const M=J3(b,I,P,this.tempTileCoord_);e.tileQueue.enqueue([N,u,c.getTileCoordCenter(M),A])}}}}findStaleTile_(e,n){const r=this.tileCache_,i=e[0],s=e[1],o=e[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const c=tM(this.getLayer().getSource(),a[l],i,s,o);if(r.containsKey(c)){const u=r.peek(c);if(u.getState()===cn.LOADED)return u.endTransition(Qt(this)),X6(n,u,i),!0}}return!1}findAltTiles_(e,n,r,i){const s=e.getTileRangeForTileCoordAndZ(n,r,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileCache_,l=this.getLayer().getRenderSource(),c=l.getKey();for(let u=s.minX;u<=s.maxX;++u)for(let h=s.minY;h<=s.maxY;++h){const f=tM(l,c,r,u,h);let g=!1;if(a.containsKey(f)){const y=a.peek(f);y.getState()===cn.LOADED&&(X6(i,y,r),g=!0)}g||(o=!1)}return o}renderFrame(e,n){this.renderComplete=!0;const r=e.layerStatesArray[e.layerIndex],i=e.viewState,s=i.projection,o=i.resolution,a=i.center,l=e.pixelRatio,c=this.getLayer(),u=c.getSource(),h=u.getTileGridForProjection(s),f=h.getZForResolution(o,u.zDirection),g=h.getResolution(f),y=u.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==y&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=y):this.renderedSourceKey_=y;let _=e.extent;const b=u.getTilePixelRatio(l);this.prepareContainer(e,n);const T=this.context.canvas.width,A=this.context.canvas.height,I=r.extent&&oh(r.extent);I&&(_=tp(_,oh(r.extent)));const P=g*T/2/b,N=g*A/2/b,L=[a[0]-P,a[1]-N,a[0]+P,a[1]+N],C={};this.renderedTiles.length=0;const M=c.getPreload();if(e.nextExtent&&this.enqueueTilesForNextExtent()){const fe=h.getZForResolution(i.nextResolution,u.zDirection),De=_Z(e,e.nextExtent);this.enqueueTiles(e,De,fe,C,M)}const O=_Z(e,_);if(this.enqueueTiles(e,O,f,C,0),M>0&&setTimeout(()=>{this.enqueueTiles(e,O,f-1,C,M-1)},0),!(f in C))return this.container;const D=Qt(this),V=e.time;for(const fe of C[f]){const De=fe.getState();if(De===cn.EMPTY)continue;const Ce=fe.tileCoord;if(De===cn.LOADED&&fe.getAlpha(D,V)===1){fe.endTransition(D);continue}if(De!==cn.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Ce,C)){pCe(C,fe,f),e.animate=!0;continue}if(this.findAltTiles_(h,Ce,f+1,C))continue;const ne=h.getMinZoom();for(let ie=f-1;ie>=ne&&!this.findAltTiles_(h,Ce,ie,C);--ie);}const U=g/o*l/b,G=this.getRenderContext(e);mu(this.tempTransform,T/2,A/2,U,U,0,-T/2,-A/2),r.extent&&this.clipUnrotated(G,e,I),u.getInterpolate()||(G.imageSmoothingEnabled=!1),this.preRender(G,e);const de=Object.keys(C).map(Number);de.sort(ep);let ke;const Ue=[],Ne=[];for(let fe=de.length-1;fe>=0;--fe){const De=de[fe],Ce=u.getTilePixelSize(De,l,s),W=h.getResolution(De)/g,ne=Ce[0]*W*U,ie=Ce[1]*W*U,le=h.getTileCoordForCoordAndZ(lv(L),De),ve=h.getTileCoordExtent(le),qe=Zi(this.tempTransform,[b*(ve[0]-L[0])/g,b*(L[3]-ve[3])/g]),Ke=b*u.getGutterForProjection(s);for(const Se of C[De]){if(Se.getState()!==cn.LOADED)continue;const we=Se.tileCoord,Dt=le[1]-we[1],Ye=Math.round(qe[0]-(Dt-1)*ne),on=le[2]-we[2],jt=Math.round(qe[1]-(on-1)*ie),pn=Math.round(qe[0]-Dt*ne),_n=Math.round(qe[1]-on*ie),dt=Ye-pn,hr=jt-_n,zn=de.length===1;let Hn=!1;ke=[pn,_n,pn+dt,_n,pn+dt,_n+hr,pn,_n+hr];for(let ei=0,_o=Ue.length;ei<_o;++ei)if(!zn&&De<Ne[ei]){const Rr=Ue[ei];oa([pn,_n,pn+dt,_n+hr],[Rr[0],Rr[3],Rr[4],Rr[7]])&&(Hn||(G.save(),Hn=!0),G.beginPath(),G.moveTo(ke[0],ke[1]),G.lineTo(ke[2],ke[3]),G.lineTo(ke[4],ke[5]),G.lineTo(ke[6],ke[7]),G.moveTo(Rr[6],Rr[7]),G.lineTo(Rr[4],Rr[5]),G.lineTo(Rr[2],Rr[3]),G.lineTo(Rr[0],Rr[1]),G.clip())}Ue.push(ke),Ne.push(De),this.drawTile(Se,e,pn,_n,dt,hr,Ke,zn),Hn&&G.restore(),this.renderedTiles.unshift(Se),this.updateUsedTiles(e.usedTiles,u,Se)}}if(this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!S1(this.renderedExtent_,L),this.renderedExtent_=L,this.renderedPixelRatio=l,this.postRender(this.context,e),r.extent&&G.restore(),G.imageSmoothingEnabled=!0,this.renderComplete){const fe=(De,Ce)=>{const Q=Qt(u),W=Ce.wantedTiles[Q],ne=W?Object.keys(W).length:0;this.updateCacheSize(ne),this.tileCache_.expireCache(),this.sourceTileCache_?.expireCache()};e.postRenderFunctions.push(fe)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,n,r,i,s,o,a,l){let c;if(e instanceof fZ){if(c=QF(e.getData()),!c)throw new Error("Rendering array data is not yet supported")}else c=this.getTileImage(e);if(!c)return;const u=this.getRenderContext(n),h=Qt(this),f=n.layerStatesArray[n.layerIndex],g=f.opacity*(l?e.getAlpha(h,n.time):1),y=g!==u.globalAlpha;y&&(u.save(),u.globalAlpha=g),u.drawImage(c,a,a,c.width-2*a,c.height-2*a,r,i,s,o),y&&u.restore(),g!==f.opacity?n.animate=!0:l&&e.endTransition(h)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,n,r){const i=Qt(n);i in e||(e[i]={}),e[i][r.getKey()]=!0}}const bC={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class gCe extends YA{constructor(e){e=e||{};const n=Object.assign({},e),r=e.cacheSize;delete e.cacheSize,delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.cacheSize_=r,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(bC.PRELOAD)}setPreload(e){this.set(bC.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(bC.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(bC.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class $m extends gCe{constructor(e){super(e)}createRenderer(){return new mCe(this,{cacheSize:this.getCacheSize()})}}function n8(t){return Array.isArray(t)?Math.min(...t):t}const m_=[0,0,0],om=5;class mce{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ur(BTe(this.resolutions_,(i,s)=>s-i),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let i=0,s=this.resolutions_.length-1;i<s;++i)if(!n)n=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ur(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const r=e.extent;r!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=lv(r)),ur(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ur(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:OG,ur(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=r!==void 0?r:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,s)=>{const o=new $G(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(r){const a=this.getTileRangeForExtentAndZ(r,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):r&&this.calculateTileRanges_(r)}forEachTileCoord(e,n,r){const i=this.getTileRangeForExtentAndZ(e,n);for(let s=i.minX,o=i.maxX;s<=o;++s)for(let a=i.minY,l=i.maxY;a<=l;++a)r([n,s,a])}forEachTileCoordParentTileRange(e,n,r,i){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,i);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=h_(o,o,a,a,r)):s=this.getTileRangeForExtentAndZ(l,c,r),n(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,r){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return h_(s,s+1,o,o+1,n)}const i=this.getTileCoordExtent(e,r||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,r){if(n>this.maxZoom||n<this.minZoom)return null;const i=e[0],s=e[1],o=e[2];if(n===i)return h_(s,o,s,o,r);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,n-i),c=Math.floor(s*l),u=Math.floor(o*l);if(n<i)return h_(c,c,u,u,r);const h=Math.floor(l*(s+1))-1,f=Math.floor(l*(o+1))-1;return h_(c,h,u,f,r)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,r)}getTileRangeForExtentAndZ(e,n,r){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,m_);const i=m_[1],s=m_[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,m_);const o=m_[1],a=m_[2];return h_(i,o,s,a,r)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=ja(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*i[0]*r,n[1]-(e[2]+.5)*i[1]*r]}getTileCoordExtent(e,n){const r=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=ja(this.getTileSize(e[0]),this.tmpSize_),o=r[0]+e[1]*s[0]*i,a=r[1]-(e[2]+1)*s[1]*i,l=o+s[0]*i,c=a+s[1]*i;return pp(o,a,l,c,n)}getTileCoordForCoordAndResolution(e,n,r){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,r)}getTileCoordForXYAndResolution_(e,n,r,i,s){const o=this.getZForResolution(r),a=r/this.getResolution(o),l=this.getOrigin(o),c=ja(this.getTileSize(o),this.tmpSize_);let u=a*(e-l[0])/r/c[0],h=a*(l[1]-n)/r/c[1];return i?(u=Qm(u,om)-1,h=Qm(h,om)-1):(u=uC(u,om),h=uC(h,om)),J3(o,u,h,s)}getTileCoordForXYAndZ_(e,n,r,i,s){const o=this.getOrigin(r),a=this.getResolution(r),l=ja(this.getTileSize(r),this.tmpSize_);let c=(e-o[0])/a/l[0],u=(o[1]-n)/a/l[1];return i?(c=Qm(c,om)-1,u=Qm(u,om)-1):(c=uC(c,om),u=uC(u,om)),J3(r,c,u,s)}getTileCoordForCoordAndZ(e,n,r){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,r)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const r=T5(this.resolutions_,e,n||0);return ri(r,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return ule(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,r=new Array(n);for(let i=this.minZoom;i<n;++i)r[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=r}}function gce(t){let e=t.getDefaultTileGrid();return e||(e=xCe(t),t.setDefaultTileGrid(e)),e}function yCe(t,e,n){const r=e[0],i=t.getTileCoordCenter(e),s=KG(n);if(!E1(s,i)){const o=Xn(s),a=Math.ceil((s[0]-i[0])/o);return i[0]+=o*a,t.getTileCoordForCoordAndZ(i,r)}return e}function vCe(t,e,n,r){r=r!==void 0?r:"top-left";const i=yce(t,e,n);return new mce({extent:t,origin:KTe(t,r),resolutions:i,tileSize:n})}function _Ce(t){const e=t||{},n=e.extent||Qr("EPSG:3857").getExtent(),r={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:yce(n,e.maxZoom,e.tileSize,e.maxResolution)};return new mce(r)}function yce(t,e,n,r){e=e!==void 0?e:rPe,n=ja(n!==void 0?n:OG);const i=Ps(t),s=Xn(t);r=r>0?r:Math.max(s/n[0],i/n[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=r/Math.pow(2,l);return a}function xCe(t,e,n,r){const i=KG(t);return vCe(i,e,n,r)}function KG(t){t=Qr(t);let e=t.getExtent();if(!e){const n=180*e2.degrees/t.getMetersPerUnit();e=pp(-n,-n,n,n)}return e}function YG(t,e){const n=[];Object.keys(e).forEach(function(i){e[i]!==null&&e[i]!==void 0&&n.push(i+"="+encodeURIComponent(e[i]))});const r=n.join("&");return t=t.replace(/[?&]$/,""),t+=t.includes("?")?"&":"?",t+r}const wCe=/\{z\}/g,bCe=/\{x\}/g,ECe=/\{y\}/g,SCe=/\{-y\}/g;function TCe(t,e,n,r,i){return t.replace(wCe,e.toString()).replace(bCe,n.toString()).replace(ECe,r.toString()).replace(SCe,function(){if(i===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(i-r).toString()})}function kCe(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const r=n[1].charCodeAt(0),i=n[2].charCodeAt(0);let s;for(s=r;s<=i;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const r=parseInt(n[2],10);for(let i=parseInt(n[1],10);i<=r;i++)e.push(t.replace(n[0],i.toString()));return e}return e.push(t),e}function ACe(t,e){return(function(n,r,i){if(!n)return;let s;const o=n[0];if(e){const a=e.getFullTileRange(o);a&&(s=a.getHeight()-1)}return TCe(t,o,n[1],n[2],s)})}function ICe(t,e){const n=t.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=ACe(t[i],e);return PCe(r)}function PCe(t){return t.length===1?t[0]:(function(e,n,r){if(!e)return;const i=oce(e),s=vg(i,t.length);return t[s](e,n,r)})}class CCe extends SG{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&ja(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tmpSize=[0,0],this.key_=e.key||Qt(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,r,i,s,o){return bn()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:gce(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,r){const i=this.getTileGridForProjection(r),s=this.getTilePixelRatio(n),o=ja(i.getTileSize(e),this.tmpSize);return s==1?o:WAe(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){const r=n!==void 0?n:this.getProjection(),i=n!==void 0?this.getTileGridForProjection(r):this.tileGrid||this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(e=yCe(i,e,r)),CPe(e,i)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class RCe extends Tc{constructor(e,n){super(e),this.tile=n}}const Z6={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class XG extends CCe{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===XG.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,r=Qt(n),i=n.getState();let s;i==cn.LOADING?(this.tileLoadingKeys_[r]=!0,s=Z6.TILELOADSTART):r in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[r],s=i==cn.ERROR?Z6.TILELOADERROR:i==cn.LOADED?Z6.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new RCe(s,n))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=kCe(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(ICe(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,r){}}class vce extends XG{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:_ce,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:tce,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!t1(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||t1(n,e)))return this.tileGrid;const r=Qt(e);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=gce(e)),this.tileGridForProjection[r]}createTile_(e,n,r,i,s,o){const a=[e,n,r],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,i,s):void 0,u=new this.tileClass(a,c!==void 0?cn.IDLE:cn.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(wn.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,n,r,i,s,o){const a=this.getProjection();if(!a||!s||t1(a,s))return this.getTileInternal(e,n,r,i,a||s);const l=[e,n,r],c=this.getKey(),u=this.getTileGridForProjection(a),h=this.getTileGridForProjection(s),f=this.getTileCoordForTileUrlFunction(l,s),g=new sce(a,u,s,h,l,f,this.getTilePixelRatio(i),this.getGutter(),(y,_,b,T)=>this.getTileInternal(y,_,b,T,a,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return g.key=c,g}getTileInternal(e,n,r,i,s,o){const a=this.getKey(),l=tM(this,a,e,n,r);if(o&&o.containsKey(l))return o.get(l);const c=this.createTile_(e,n,r,i,s,a);return o?.set(l,c),c}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,n){const r=Qr(e);if(r){const i=Qt(r);i in this.tileGridForProjection||(this.tileGridForProjection[i]=n)}}}function _ce(t,e){if(uc){const n=t.getCrossOrigin();let r="same-origin",i="same-origin";n==="anonymous"||n===""?(r="cors",i="omit"):n==="use-credentials"&&(r="cors",i="include"),fetch(e,{mode:r,credentials:i}).then(s=>{if(!s.ok)throw new Error(`HTTP ${s.status}`);return s.blob()}).then(s=>createImageBitmap(s)).then(s=>{const o=t.getImage();o.width=s.width,o.height=s.height,o.getContext("2d").drawImage(s,0,0),s.close?.(),o.dispatchEvent(new Event("load"))}).catch(()=>{t.getImage().dispatchEvent(new Event("error"))});return}t.getImage().src=e}class Ty extends vce{constructor(e){e=e||{};const n=e.projection!==void 0?e.projection:"EPSG:3857",r=e.tileGrid!==void 0?e.tileGrid:_Ce({extent:KG(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const MCe="modulepreload",NCe=function(t){return"/detectorapp-nl/"+t},xZ={},_e=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");i=l(n.map(c=>{if(c=NCe(c),c in xZ)return;xZ[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":MCe,u||(f.as="script"),f.crossOrigin="",f.href=c,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((g,y)=>{f.addEventListener("load",g),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};class OCe extends _le{constructor(e,n,r,i,s,o,a){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let c=n.getExtent();c&&n.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const u=c?tp(r,c):r,h=yh(u),f=Z3(e,n,h,i),g=ice,y=new rce(e,n,u,l,f*g,i),_=y.calculateSourceExtent(),b=Z2(_)?null:o(_,f,s),T=b?Vt.IDLE:Vt.EMPTY,A=b?b.getPixelRatio():1;super(r,i,A,T),this.targetProj_=n,this.maxSourceExtent_=l,this.triangulation_=y,this.targetResolution_=i,this.targetExtent_=r,this.sourceImage_=b,this.sourcePixelRatio_=A,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Vt.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==Vt.LOADED){const n=Xn(this.targetExtent_)/this.targetResolution_,r=Ps(this.targetExtent_)/this.targetResolution_;this.canvas_=nce(n,r,this.sourcePixelRatio_,n8(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Vt.IDLE){this.state=Vt.LOADING,this.changed();const e=this.sourceImage_.getState();e==Vt.LOADED||e==Vt.ERROR?this.reproject_():(this.sourceListenerKey_=Yn(this.sourceImage_,wn.CHANGE,n=>{const r=this.sourceImage_.getState();(r==Vt.LOADED||r==Vt.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){ni(this.sourceListenerKey_),this.sourceListenerKey_=null}}const rg=4,J6={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class LCe extends Tc{constructor(e,n){super(e),this.image=n}}class DCe extends SG{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const n=this.getResolutions();if(n){const r=T5(n,e,0);e=n[r]}return e}getImage(e,n,r,i){const s=this.getProjection();if(!s||!i||t1(s,i))return s&&(i=s),this.getImageInternal(e,n,r,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&t1(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==n&&S1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new OCe(s,i,e,n,r,(o,a,l)=>this.getImageInternal(o,a,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,n,r,i){if(this.loader){const s=xce(e,n,r,1),o=this.findNearestResolution(n);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&Jm(this.wantedExtent_,s)||Jm(this.image.getExtent(),s))&&(this.wantedResolution_&&n8(this.wantedResolution_)===o||n8(this.image.getResolution())===o)))return this.image;this.wantedProjection_=i,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new _le(s,o,r,this.loader),this.image.addEventListener(wn.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const n=e.target;let r;switch(n.getState()){case Vt.LOADING:this.loading=!0,r=J6.IMAGELOADSTART;break;case Vt.LOADED:this.loading=!1,r=J6.IMAGELOADEND;break;case Vt.ERROR:this.loading=!1,r=J6.IMAGELOADERROR;break;default:return}this.hasListener(r)&&this.dispatchEvent(new LCe(r,n))}}function jCe(t,e){t.getImage().src=e}function xce(t,e,n,r){const i=e/n,s=yh(t),o=Qm(Xn(t)/i,rg),a=Qm(Ps(t)/i,rg),l=Qm((r-1)*o/2,rg),c=o+2*l,u=Qm((r-1)*a/2,rg),h=a+2*u;return O3(s,i,0,[c,h])}function $Ce(t,e,n,r,i,s){const o=i.getCode().split(/:(?=\d+$)/).pop(),a=n/r,l=[L3(Xn(e)/a,rg),L3(Ps(e)/a,rg)];s.SIZE=l[0]+","+l[1],s.BBOX=e.join(","),s.BBOXSR=o,s.IMAGESR=o,s.DPI=Math.round(s.DPI?s.DPI*r:90*r);const c=t.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return YG(c,s)}function FCe(t){const e=t.load?t.load:wle,n=Qr(t.projection||"EPSG:3857"),r=t.ratio??1.5,i=t.crossOrigin??null;return function(s,o,a){a=t.hidpi?a:1;const l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(l,t.params),s=xce(s,o,a,r);const c=$Ce(t.url,s,o,a,n,l),u=new Image;return u.crossOrigin=i,e(u,c).then(h=>{const f=Xn(s)/h.width*a;return{image:h,extent:s,resolution:f,pixelRatio:a}})}}class VCe extends DCe{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:jCe,this.params_=Object.assign({},e.params),this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getParams(){return this.params_}getImageInternal(e,n,r,i){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==i)&&(this.loaderProjection_=i,this.loader=FCe({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),wle(s))})),super.getImageInternal(e,n,r,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const r8="1.3.0";function zCe(t,e,n,r,i){i.WIDTH=n[0],i.HEIGHT=n[1];const s=r.getAxisOrientation(),o=Kae(i.VERSION,"1.3")>=0;i[o?"CRS":"SRS"]=r.getCode();const a=o&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return i.BBOX=a.join(","),YG(t,i)}function GCe(t,e,n,r,i,s,o){s=Object.assign({REQUEST:"GetMap"},s);const a=e/n,l=[L3(Xn(t)/a,rg),L3(Ps(t)/a,rg)];if(n!=1)switch(o){case"geoserver":const u=90*n+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+u:s.FORMAT_OPTIONS="dpi:"+u;break;case"mapserver":s.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":s.DPI=90*n;break;default:throw new Error("Unknown `serverType` configured")}return zCe(i,t,l,r,s)}function wZ(t,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:r8,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},t)}const UCe='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class BCe extends Ty{constructor(e){e=e||{};let n;e.attributions!==void 0?n=e.attributions:n=[UCe];const r=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",i=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:r,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:(s,o)=>{const a=s.getImage();!uc&&a instanceof HTMLImageElement&&(a.referrerPolicy="origin-when-cross-origin"),(e.tileLoadFunction||_ce)(s,o)},transition:e.transition,url:i,wrapX:e.wrapX,zDirection:e.zDirection})}}const t4=1/0;class WCe{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,ov(this.queuedElements_)}dequeue(){const e=this.elements_,n=this.priorities_,r=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));const i=this.keyFunction_(r);return delete this.queuedElements_[i],r}enqueue(e){ur(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(e);return n!=t4?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const n=this.elements_,r=this.priorities_,i=n.length,s=n[e],o=r[e],a=e;for(;e<i>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<i&&r[c]<r[l]?c:l;n[e]=n[u],r[e]=r[u],e=u}n[e]=s,r[e]=o,this.siftDown_(a,e)}siftDown_(e,n){const r=this.elements_,i=this.priorities_,s=r[n],o=i[n];for(;n>e;){const a=this.getParentIndex_(n);if(i[a]>o)r[n]=r[a],i[n]=i[a],n=a;else break}r[n]=s,i[n]=o}reprioritize(){const e=this.priorityFunction_,n=this.elements_,r=this.priorities_;let i=0;const s=n.length;let o,a,l;for(a=0;a<s;++a)o=n[a],l=e(o),l==t4?delete this.queuedElements_[this.keyFunction_(o)]:(r[i]=l,n[i++]=o);n.length=i,r.length=i,this.heapify_()}}class HCe extends WCe{constructor(e,n){super(r=>e.apply(null,r),r=>r[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const n=super.enqueue(e);return n&&e[0].addEventListener(wn.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const n=e.target,r=n.getState();if(r===cn.LOADED||r===cn.ERROR||r===cn.EMPTY){r!==cn.ERROR&&n.removeEventListener(wn.CHANGE,this.boundHandleTileChange_);const i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let r=0;for(;this.tilesLoading_<e&&r<n&&this.getCount()>0;){const i=this.dequeue()[0],s=i.getKey();i.getState()===cn.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++r,i.load())}}}function qCe(t,e,n,r,i){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][e.getKey()])return t4;const s=t.viewState.center,o=r[0]-s[0],a=r[1]-s[1];return 65536*Math.log(i)+Math.sqrt(o*o+a*a)/i}class KCe extends vce{constructor(e){e=e||{};const n=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=n,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Wa(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,n,r,i){const s=Qr(r),o=this.getProjection()||s;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const l=Q2(e,s,o),c=Z3(o,s,e,n),u=a.getZForResolution(c,this.zDirection),h=a.getResolution(u),f=a.getTileCoordForCoordAndZ(l,u);if(a.getResolutions().length<=f[0])return;let g=a.getTileCoordExtent(f,this.tmpExtent_);const y=this.gutter_;y!==0&&(g=sh(g,h*y,g));const _={QUERY_LAYERS:this.params_.LAYERS};Object.assign(_,wZ(this.params_,"GetFeatureInfo"),i);const b=Math.floor((l[0]-g[0])/h),T=Math.floor((g[3]-l[1])/h);return _[this.v13_?"I":"X"]=b,_[this.v13_?"J":"Y"]=T,this.getRequestUrl_(f,g,1,o||s,_)}getLegendUrl(e,n){if(this.urls[0]===void 0)return;const r={SERVICE:"WMS",VERSION:r8,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(n===void 0||n.LAYER===void 0){const i=this.params_.LAYERS;if(!(!Array.isArray(i)||i.length===1))return;r.LAYER=i}if(e!==void 0){const i=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;r.SCALE=e*i/s}return Object.assign(r,n),YG(this.urls[0],r)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,n,r,i,s){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const l=vg(oce(e),o.length);a=o[l]}return GCe(n,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(e[0]),r,i,a,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const n=[];for(const r in this.params_)n[e++]=r+"-"+this.params_[r];return n.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||r8;this.v13_=Kae(e,"1.3")>=0}tileUrlFunction(e,n,r){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),i.getResolutions().length<=e[0])return;n!=1&&(!this.hidpi_||this.serverType_===void 0)&&(n=1);const s=i.getResolution(e[0]);let o=i.getTileCoordExtent(e,this.tmpExtent_);const a=this.gutter_;a!==0&&(o=sh(o,s*a,o));const l=Object.assign({},wZ(this.params_,"GetMap"));return this.getRequestUrl_(e,o,n,r,l)}}class B_ extends Tc{constructor(e,n,r){super(e),this.map=n,this.frameState=r!==void 0?r:null}}class Of extends B_{constructor(e,n,r,i,s,o){super(e,n,s),this.originalEvent=r,this.pixel_=null,this.coordinate_=null,this.dragging=i!==void 0?i:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const or={SINGLECLICK:"singleclick",CLICK:wn.CLICK,DBLCLICK:wn.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},i8={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class YCe extends VA{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const r=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=r,this.pointerdownListenerKey_=Yn(r,i8.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Yn(r,i8.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(wn.TOUCHMOVE,this.boundHandleTouchMove_,gle?{passive:!1}:!1)}emulateClick_(e){let n=new Of(or.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Of(or.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const r=new Of(or.SINGLECLICK,this.map_,e);this.dispatchEvent(r)},250)}updateActivePointers_(e){const n=e,r=n.pointerId;if(n.type==or.POINTERUP||n.type==or.POINTERCANCEL){delete this.trackedTouches_[r];for(const i in this.trackedTouches_)if(this.trackedTouches_[i].target!==n.target){delete this.trackedTouches_[i];break}}else(n.type==or.POINTERDOWN||n.type==or.POINTERMOVE)&&(this.trackedTouches_[r]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const n=new Of(or.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ni),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const n=new Of(or.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const r=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Yn(r,or.POINTERMOVE,this.handlePointerMove_,this),Yn(r,or.POINTERUP,this.handlePointerUp_,this),Yn(this.element_,or.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==r&&this.dragListenerKeys_.push(Yn(this.element_.getRootNode(),or.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const n=new Of(or.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Of(or.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(ni(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(wn.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ni(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ni),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Sm={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Jo={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};class B5 extends Wd{constructor(e){super();const n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&this.element?.remove();for(let n=0,r=this.listenerKeys.length;n<r;++n)ni(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=e,e){const n=this.target_??e.getOverlayContainerStopEvent();this.element&&n.appendChild(this.element),this.render!==hk&&this.listenerKeys.push(Yn(e,Sm.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class XCe extends B5{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const n=e.className!==void 0?e.className:"ol-attribution",r=e.tipLabel!==void 0?e.tipLabel:"Attributions",i=e.expandClassName!==void 0?e.expandClassName:n+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=i):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=r,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(wn.CLICK,this.handleClick_.bind(this),!1);const c=n+" "+WA+" "+xG+(this.collapsed_&&this.collapsible_?" "+NX:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const n=this.getMap().getAllLayers(),r=new Set(n.flatMap(i=>i.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(i=>r.add(i)):r.add(this.attributions_)),!this.overrideCollapsible_){const i=!n.some(s=>s.getSource()?.getAttributionsCollapsible()===!1);this.setCollapsible(i)}return Array.from(r)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=await Promise.all(this.collectSourceAttributions_(e).map(i=>zae(()=>i))),r=n.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!Bd(n,this.renderedAttributions_)){Qke(this.ulElement_);for(let i=0,s=n.length;i<s;++i){const o=document.createElement("li");o.innerHTML=n[i],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(NX),this.collapsed_?RX(this.collapseLabel_,this.label_):RX(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class ZCe extends B5{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const n=e.className!==void 0?e.className:"ol-rotate",r=e.label!==void 0?e.label:"",i=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof r=="string"?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=r):(this.label_=r,this.label_.classList.add(i));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(wn.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+WA+" "+xG,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(pC)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const r=n.getRotation();r!==void 0&&(this.duration_>0&&r%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:eb}):n.setRotation(0))}render(e){const n=e.frameState;if(!n)return;const r=n.viewState.rotation;if(r!=this.rotation_){const i="rotate("+r+"rad)";if(this.autoHide_){const s=this.element.classList.contains(pC);!s&&r===0?this.element.classList.add(pC):s&&r!==0&&this.element.classList.remove(pC)}this.label_.style.transform=i}this.rotation_=r}}class JCe extends B5{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const n=e.className!==void 0?e.className:"ol-zoom",r=e.delta!==void 0?e.delta:1,i=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=i,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(wn.CLICK,this.handleClick_.bind(this,r),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(wn.CLICK,this.handleClick_.bind(this,-r),!1);const f=n+" "+WA+" "+xG,g=this.element;g.className=f,g.appendChild(u),g.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const r=this.getMap().getView();if(!r)return;const i=r.getZoom();if(i!==void 0){const s=r.getConstrainedZoom(i+e);this.duration_>0?(r.getAnimating()&&r.cancelAnimations(),r.animate({zoom:s,duration:this.duration_,easing:eb})):r.setZoom(s)}}}function QCe(t){t=t||{};const e=new Da;return(t.zoom===void 0||t.zoom)&&e.push(new JCe(t.zoomOptions)),(t.rotate===void 0||t.rotate)&&e.push(new ZCe(t.rotateOptions)),(t.attribution===void 0||t.attribution)&&e.push(new XCe(t.attributionOptions)),e}class eRe{constructor(e,n,r){this.decay_=e,this.minVelocity_=n,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let r=n-3;for(;r>0&&this.points_[r+2]>e;)r-=3;const i=this.points_[n+2]-this.points_[r+2];if(i<1e3/60)return!1;const s=this.points_[n]-this.points_[r],o=this.points_[n+1]-this.points_[r+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const s8={ACTIVE:"active"};class tb extends Wd{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(s8.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(s8.ACTIVE,e)}setMap(e){this.map_=e}}function tRe(t,e,n){const r=t.getCenterInternal();if(r){const i=[r[0]+e[0],r[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:JIe,center:t.getConstrainedCenter(i)})}}function ZG(t,e,n,r){const i=t.getZoom();if(i===void 0)return;const s=t.getConstrainedZoom(i+e),o=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:r!==void 0?r:250,easing:eb})}class nRe extends tb{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==or.DBLCLICK){const r=e.originalEvent,i=e.map,s=e.coordinate,o=r.shiftKey?-this.delta_:this.delta_,a=i.getView();ZG(a,o,s,this.duration_),r.preventDefault(),n=!0}return!n}}function o8(t){const e=arguments;return function(n){let r=!0;for(let i=0,s=e.length;i<s&&(r=r&&e[i](n),!!r);++i);return r}}const rRe=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},iRe=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},sRe=function(t){const e=t.map.getTargetElement(),n=e.getRootNode(),r=t.map.getOwnerDocument().activeElement;return n instanceof ShadowRoot?n.host.contains(r):e.contains(r)},wce=function(t){const e=t.map.getTargetElement(),n=e.getRootNode();return(n instanceof ShadowRoot?n.host:e).hasAttribute("tabindex")?sRe(t):!0},ew=Lg,bce=function(t){const e=t.originalEvent;return"pointerId"in e&&e.button==0&&!(Zke&&ple&&e.ctrlKey)},n4=X2,Ece=function(t){return t.type==or.SINGLECLICK},JG=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},oRe=function(t){const e=t.originalEvent;return ple?e.metaKey:e.ctrlKey},r4=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Sce=function(t){const e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},Q6=function(t){const e=t.originalEvent;return"pointerId"in e&&e.pointerType=="mouse"},Tce=function(t){const e=t.originalEvent;return"pointerId"in e&&e.isPrimary&&e.button===0};class hv extends tb{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==or.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==or.POINTERUP){const r=this.handleUpEvent(e);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(e.type==or.POINTERDOWN){const r=this.handleDownEvent(e);this.handlingDownUpSequence=r,n=this.stopDown(r)}else e.type==or.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function QG(t){const e=t.length;let n=0,r=0;for(let i=0;i<e;i++)n+=t[i].clientX,r+=t[i].clientY;return{clientX:n/e,clientY:r/e}}class aRe extends hv{constructor(e){super({stopDown:X2}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=e.condition?e.condition:o8(JG,Tce);this.condition_=e.onFocusOnly?o8(wce,n):n,this.noKinetic_=!1}handleDragEvent(e){const n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const r=this.targetPointers,i=n.getEventPixel(QG(r));if(r.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const s=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=e.map.getView();eke(s,a.getResolution()),eG(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=r.length,e.originalEvent.preventDefault()}handleUpEvent(e){const n=e.map,r=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const i=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=r.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),l=n.getCoordinateFromPixelInternal([a[0]-i*Math.cos(s),a[1]-i*Math.sin(s)]);r.animateInternal({center:r.getConstrainedCenter(l),duration:500,easing:eb})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const r=e.map.getView();return this.lastCentroid=null,r.getAnimating()&&r.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class lRe extends hv{constructor(e){e=e||{},super({stopDown:X2}),this.condition_=e.condition?e.condition:iRe,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Q6(e))return;const n=e.map,r=n.getView();if(r.getConstraints().rotation===NG)return;const i=n.getSize(),s=e.pixel,o=Math.atan2(i[1]/2-s[1],s[0]-i[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return Q6(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Q6(e)&&bce(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class cRe extends FA{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,n=this.endPixel_,r="px",i=this.element_.style;i.left=Math.min(e[0],n[0])+r,i.top=Math.min(e[1],n[1])+r,i.width=Math.abs(n[0]-e[0])+r,i.height=Math.abs(n[1]-e[1])+r}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,n=this.endPixel_,i=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Il([i])}getGeometry(){return this.geometry_}}const g_={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class SE extends Tc{constructor(e,n,r){super(e),this.coordinate=n,this.mapBrowserEvent=r}}class uRe extends hv{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new cRe(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??bce,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,r){const i=r[0]-n[0],s=r[1]-n[1];return i*i+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new SE(g_.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new SE(n?g_.BOXEND:g_.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new SE(g_.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new SE(g_.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new SE(g_.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class hRe extends uRe{constructor(e){e=e||{};const n=e.condition?e.condition:r4;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const r=this.getMap().getView();let i=this.getGeometry();if(this.out_){const s=r.rotatedExtentForGeometry(i),o=r.getResolutionForExtentInternal(s),a=r.getResolution()/o;i=i.clone(),i.scale(a*a)}r.fitInternal(i,{duration:this.duration_,easing:eb})}}const $0={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class dRe extends tb{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return JG(n)&&Sce(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==wn.KEYDOWN){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==$0.DOWN||i==$0.LEFT||i==$0.RIGHT||i==$0.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;i==$0.DOWN?c=-a:i==$0.LEFT?l=-a:i==$0.RIGHT?l=a:c=a;const u=[l,c];eG(u,o.getRotation()),tRe(o,u,this.duration_),r.preventDefault(),n=!0}}return!n}}class fRe extends tb{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!oRe(n)&&Sce(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==wn.KEYDOWN||e.type==wn.KEYPRESS){const r=e.originalEvent,i=r.key;if(this.condition_(e)&&(i==="+"||i==="-")){const s=e.map,o=i==="+"?this.delta_:-this.delta_,a=s.getView();ZG(a,o,void 0,this.duration_),r.preventDefault(),n=!0}}return!n}}const pRe=40,mRe=300;class gRe extends tb{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const n=e.condition?e.condition:ew;this.condition_=e.onFocusOnly?o8(wce,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==wn.WHEEL)return!0;const r=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s=i.deltaY;switch(i.deltaMode){case WheelEvent.DOM_DELTA_LINE:s*=pRe;break;case WheelEvent.DOM_DELTA_PAGE:s*=mRe;break}if(s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=r.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?r.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),l),!1}handleWheelZoom_(e){const n=e.getView();n.getAnimating()&&n.cancelAnimations();let r=-ri(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(r=r?r>0?1:-1:0),ZG(n,r,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class yRe extends hv{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=X2),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0;const r=this.targetPointers[0],i=this.targetPointers[1],s=Math.atan2(i.clientY-r.clientY,i.clientX-r.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==NG&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(QG(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class vRe extends hv{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=X2),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1;const r=this.targetPointers[0],i=this.targetPointers[1],s=r.clientX-i.clientX,o=r.clientY-i.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(QG(this.targetPointers))),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const r=e.map.getView(),i=this.lastScaleDelta_>1?1:-1;return r.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function _Re(t){t=t||{};const e=new Da,n=new eRe(-.005,.05,100);return(t.altShiftDragRotate===void 0||t.altShiftDragRotate)&&e.push(new lRe),(t.doubleClickZoom===void 0||t.doubleClickZoom)&&e.push(new nRe({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan===void 0||t.dragPan)&&e.push(new aRe({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate===void 0||t.pinchRotate)&&e.push(new yRe),(t.pinchZoom===void 0||t.pinchZoom)&&e.push(new vRe({duration:t.zoomDuration})),(t.keyboard===void 0||t.keyboard)&&(e.push(new dRe),e.push(new fRe({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom===void 0||t.mouseWheelZoom)&&e.push(new gRe({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom===void 0||t.shiftDragZoom)&&e.push(new hRe({duration:t.zoomDuration})),e}class xRe extends FA{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){bn()}calculateMatrices2D(e){const n=e.viewState,r=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;mu(r,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),pk(i,r)}forEachFeatureAtCoordinate(e,n,r,i,s,o,a,l){let c;const u=n.viewState;function h(P,N,L,C){return s.call(o,N,P?L:null,C)}const f=u.projection,g=Yae(e.slice(),f),y=[[0,0]];if(f.canWrapX()&&i){const P=f.getExtent(),N=Xn(P);y.push([-N,0],[N,0])}const _=n.layerStatesArray,b=_.length,T=[],A=[];for(let P=0;P<y.length;P++)for(let N=b-1;N>=0;--N){const L=_[N],C=L.layer;if(C.hasRenderer()&&LG(L,u)&&a.call(l,C)){const M=C.getRenderer(),O=C.getSource();if(M&&O){const D=O.getWrapX()?g:e,V=h.bind(null,L.managed);A[0]=D[0]+y[P][0],A[1]=D[1]+y[P][1],c=M.forEachFeatureAtCoordinate(A,n,r,V,T)}if(c)return c}}if(T.length===0)return;const I=1/T.length;return T.forEach((P,N)=>P.distanceSq+=N*I),T.sort((P,N)=>P.distanceSq-N.distanceSq),T.some(P=>c=P.callback(P.feature,P.layer,P.geometry)),c}hasFeatureAtCoordinate(e,n,r,i,s,o){return this.forEachFeatureAtCoordinate(e,n,r,i,Lg,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){bn()}scheduleExpireIconCache(e){ru.canExpireCache()&&e.postRenderFunctions.push(wRe)}}function wRe(t,e){ru.expire()}class bRe extends xRe{constructor(e){super(e),this.fontChangeListenerKey_=Yn(z_,Jw.PROPERTYCHANGE,e.redrawText,e),this.element_=uc?yle():document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=WA+" ol-layers";const r=e.getViewport();r&&r.insertBefore(this.element_,r.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,n){const r=this.getMap();if(r.hasListener(e)){const i=new rT(e,void 0,n);r.dispatchEvent(i)}}disposeInternal(){ni(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(co.PRECOMPOSE,e);const n=e.layerStatesArray.sort((c,u)=>c.zIndex-u.zIndex);n.some(c=>c.layer instanceof z5&&c.layer.getDeclutter())&&(e.declutter={});const i=e.viewState;this.children_.length=0;const s=[];let o=null;for(let c=0,u=n.length;c<u;++c){const h=n[c];e.layerIndex=c;const f=h.layer,g=f.getSourceState();if(!LG(h,i)||g!="ready"&&g!="undefined"){f.unrender();continue}const y=f.render(e,o);y&&(y!==o&&(this.children_.push(y),o=y),s.push(h))}this.declutter(e,s),eAe(this.element_,this.children_);const l=this.getMap().getTargetElement();if(tg(l)){const c=l.getContext("2d");for(const u of this.children_){const h=u.firstElementChild||u,f=u.style.backgroundColor;if(f&&(!tg(h)||h.width>0)&&(c.fillStyle=f,c.fillRect(0,0,l.width,l.height)),tg(h)&&h.width>0){const g=u.style.opacity||h.style.opacity;c.globalAlpha=g===""?1:Number(g);const y=h.style.transform;if(y)c.setTransform(...GF(y));else{const _=parseFloat(h.style.width)/h.width,b=parseFloat(h.style.height)/h.height;c.setTransform(_,0,0,b,0,0)}c.drawImage(h,0,0)}}c.globalAlpha=1,c.setTransform(1,0,0,1,0,0)}this.dispatchRenderEvent(co.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,n){if(e.declutter){for(let r=n.length-1;r>=0;--r){const i=n[r],s=i.layer;s.getDeclutter()&&s.renderDeclutter(e,i)}n.forEach(r=>r.layer.renderDeferred(e))}}}function kce(t){if(t instanceof YA){t.setMapInternal(null);return}t instanceof G5&&t.getLayers().forEach(kce)}function Ace(t,e){if(t instanceof YA){t.setMapInternal(e);return}if(t instanceof G5){const n=t.getLayers().getArray();for(let r=0,i=n.length;r<i;++r)Ace(n[r],e)}}let ERe=class extends Wd{constructor(e){super(),e=e||{},this.on,this.once,this.un;const n=SRe(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Jke,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ws(),this.pixelToCoordinateTransform_=Ws(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,uc||(this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_)),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,uc||(this.resizeObserver_=new ResizeObserver(()=>this.updateSize())),this.controls=n.controls||(uc?new Da:QCe()),this.interactions=n.interactions||(uc?new Da:_Re({onFocusOnly:!0})),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new HCe(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Jo.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Jo.VIEW,this.handleViewChanged_),this.addChangeListener(Jo.SIZE,this.handleSizeChanged_),this.addChangeListener(Jo.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const r=this;e.view&&!(e.view instanceof dd)&&e.view.then(function(i){r.setView(new dd(i))}),this.controls.addEventListener(As.ADD,i=>{i.element.setMap(this)}),this.controls.addEventListener(As.REMOVE,i=>{i.element.setMap(null)}),this.interactions.addEventListener(As.ADD,i=>{i.element.setMap(this)}),this.interactions.addEventListener(As.REMOVE,i=>{i.element.setMap(null)}),this.overlays_.addEventListener(As.ADD,i=>{this.addOverlayInternal_(i.element)}),this.overlays_.addEventListener(As.REMOVE,i=>{const s=i.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],i.element.setMap(null)}),this.controls.forEach(i=>{i.setMap(this)}),this.interactions.forEach(i=>{i.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){Ace(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_?.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,r){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(e);r=r!==void 0?r:{};const s=r.hitTolerance!==void 0?r.hitTolerance:0,o=r.layerFilter!==void 0?r.layerFilter:Lg,a=r.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,s,a,n,null,o,null)}getFeaturesAtPixel(e,n){const r=[];return this.forEachFeatureAtPixel(e,function(i){r.push(i)},n),r}getAllLayers(){const e=[];function n(r){r.forEach(function(i){i instanceof G5?n(i.getLayers()):e.push(i)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;const r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const i=n.layerFilter!==void 0?n.layerFilter:Lg,s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,s,o,i,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const r=this.viewport_.getBoundingClientRect(),i=this.getSize(),s=r.width/i[0],o=r.height/i[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-r.left)/s,(a.clientY-r.top)/o]}getTarget(){return this.get(Jo.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return k1(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const n=this.frameState_;return n?Zi(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Jo.LAYERGROUP)}setLayers(e){const n=this.getLayerGroup();if(e instanceof Da){n.setLayers(e);return}const r=n.getLayers();r.clear(),r.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,r=e.length;n<r;++n){const i=e[n];if(!i.visible)continue;const s=i.layer.getRenderer();if(s&&!s.ready)return!0;const o=i.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const n=Li(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){const n=this.frameState_;return n?Zi(n.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Jo.SIZE)}getView(){return this.get(Jo.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,r,i){return qCe(this.frameState_,e,n,r,i)}handleBrowserEvent(e,n){n=n||e.type;const r=new Of(n,this,e);this.handleMapBrowserEvent(r)}handleMapBrowserEvent(e){if(!this.frameState_)return;const n=e.originalEvent,r=n.type;if(r===i8.POINTERDOWN||r===wn.WHEEL||r===wn.KEYDOWN){const i=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():i,o=n.target,a=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===i?i.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const i=this.getInteractions().getArray().slice();for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let i=this.maxTilesLoading_,s=i;if(e){const o=e.viewHints;if(o[Ts.ANIMATING]||o[Ts.INTERACTING]){const a=Date.now()-e.time>8;i=a?0:8,s=a?0:2}}n.getTilesLoading()<i&&(n.reprioritize(),n.loadMoreTiles(i,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(co.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(co.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new B_(Sm.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new B_(Sm.LOADSTART,this,e))));const r=this.postRenderFunctions_;if(e)for(let i=0,s=r.length;i<s;++i)r[i](this,e);r.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let r=0,i=this.targetChangeHandlerKeys_.length;r<i;++r)ni(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(wn.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(wn.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_&&!tg(this.targetElement_)){this.resizeObserver_?.unobserve(this.targetElement_);const r=this.targetElement_.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.unobserve(r.host),this.setSize(void 0)}const e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{if(tg(n)||n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new bRe(this)),!tg(n)){this.mapBrowserEventHandler_=new YCe(this,this.moveTolerance_);for(const i in or)this.mapBrowserEventHandler_.addEventListener(or[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(wn.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(wn.WHEEL,this.boundHandleBrowserEvent_,gle?{passive:!1}:!1);let r;if(this.keyboardEventTarget_)r=this.keyboardEventTarget_;else{const i=n.getRootNode();r=i instanceof ShadowRoot?i.host:n}if(this.targetChangeHandlerKeys_=[Yn(r,wn.KEYDOWN,this.handleBrowserEvent,this),Yn(r,wn.KEYPRESS,this.handleBrowserEvent,this)],n instanceof HTMLElement){const i=n.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_?.observe(n)}}this.updateSize()}}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(ni(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ni(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Yn(e,Jw.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Yn(e,wn.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ni),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new jm("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Yn(e,Jw.PROPERTYCHANGE,this.render,this),Yn(e,wn.CHANGE,this.render,this),Yn(e,"addlayer",this.handleLayerAdd_,this),Yn(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){if(!this.frameState_)return;const e=this.frameState_.layerStatesArray;for(let n=0,r=e.length;n<r;++n){const i=e[n].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){kce(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const n=this.getSize(),r=this.getView(),i=this.frameState_;let s=null;if(n!==void 0&&BX(n)&&r&&r.isDef()){const o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:O3(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:Qt(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=O3(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),i&&(!this.previousExtent_||!Z2(this.previousExtent_)&&!S1(s.extent,this.previousExtent_))&&(this.dispatchEvent(new B_(Sm.MOVESTART,this,i)),this.previousExtent_=GA(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Ts.ANIMATING]&&!s.viewHints[Ts.INTERACTING]&&!S1(s.extent,this.previousExtent_)&&(this.dispatchEvent(new B_(Sm.MOVEEND,this,s)),Uae(s.extent,this.previousExtent_))),this.dispatchEvent(new B_(Sm.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Sm.LOADSTART)||this.hasListener(Sm.LOADEND)||this.hasListener(co.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new jm("removelayer",n)),this.set(Jo.LAYERGROUP,e)}setSize(e){this.set(Jo.SIZE,e)}setTarget(e){this.set(Jo.TARGET,e)}setView(e){if(!e||e instanceof dd){this.set(Jo.VIEW,e);return}this.set(Jo.VIEW,new dd);const n=this;e.then(function(r){n.setView(new dd(r))})}updateSize(){const e=this.getTargetElement();let n;if(e){let i,s;if(tg(e))i=e.width,s=e.height;else{const o=getComputedStyle(e);i=e.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),s=e.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth)}!isNaN(i)&&!isNaN(s)&&(n=[Math.max(0,i),Math.max(0,s)],!BX(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Zae("No map visible because the map container's width or height are 0."))}const r=this.getSize();n&&(!r||!Bd(n,r))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){const n=this.getView();n&&n.setViewportSize(e)}};function SRe(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},r=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new G5({layers:t.layers});n[Jo.LAYERGROUP]=r,n[Jo.TARGET]=t.target,n[Jo.VIEW]=t.view instanceof dd?t.view:new dd;let i;t.controls!==void 0&&(Array.isArray(t.controls)?i=new Da(t.controls.slice()):(ur(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),i=t.controls));let s;t.interactions!==void 0&&(Array.isArray(t.interactions)?s=new Da(t.interactions.slice()):(ur(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions));let o;return t.overlays!==void 0?Array.isArray(t.overlays)?o=new Da(t.overlays.slice()):(ur(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new Da,{controls:i,interactions:s,keyboardEventTarget:e,overlays:o,values:n}}const ej="units",TRe=[1,2,5],TE=25.4/.28;class kRe extends B5{constructor(e){e=e||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:e.render,target:e.target}),this.on,this.once,this.un;const r=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=r+"-inner",this.element.className=r+" "+WA,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(ej,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(ej)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(ej,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=e.center,r=e.projection,i=this.getUnits(),s=i=="degrees"?"degrees":"m";let o=F3(r,e.resolution,n,s);const a=this.minWidth_*(this.dpi_||TE)/TE,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||TE)/TE:void 0;let c=a*o,u="";if(i=="degrees"){const I=e2.degrees;c*=I,c<I/60?(u="",o*=3600):c<I?(u="",o*=60):u=""}else if(i=="imperial")c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(i=="nautical")o/=1852,u="NM";else if(i=="metric")c<1e-6?(u="nm",o*=1e9):c<.001?(u="m",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3);else if(i=="us")c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(a*o)/Math.log(10)),f,g,y,_=0,b,T;for(;;){y=Math.floor(h/3);const I=Math.pow(10,y);if(f=TRe[(h%3+3)%3]*I,g=Math.round(f/o),isNaN(g)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&g>=l){f=_,g=b,y=T;break}else if(g>=a)break;_=f,b=g,T=y,++h}const A=this.scaleBar_?this.createScaleBar(g,f,u):f.toFixed(y<0?-y:0)+" "+u;this.renderedHTML_!=A&&(this.innerElement_.innerHTML=A,this.renderedHTML_=A),this.renderedWidth_!=g&&(this.innerElement_.style.width=g+"px",this.renderedWidth_=g),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,n,r){const i=this.getScaleForResolution(),s=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const h=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,e,!1,n,r):"")+"</div>")}return l.push(this.createStepText(o,e,!0,n,r)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,n,r,i,s){const a=(e===0?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:n/this.scaleBarSteps_*-1,c=e===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${c}px;left: ${r?n+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=F3(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||TE,r=1e3/25.4;return e*r*n}render(e){const n=e.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const ARe={},bZ=t=>{let e;const n=new Set,r=(u,h)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const g=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(y=>y(e,g))}},i=()=>e,l={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(ARe?"commercial":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,l);return l},IRe=t=>t?bZ(t):bZ;var tj={exports:{}},nj={},rj={exports:{}},ij={};var EZ;function PRe(){if(EZ)return ij;EZ=1;var t=$A();function e(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(h,f){var g=f(),y=r({inst:{value:g,getSnapshot:f}}),_=y[0].inst,b=y[1];return s(function(){_.value=g,_.getSnapshot=f,l(_)&&b({inst:_})},[h,g,f]),i(function(){return l(_)&&b({inst:_}),h(function(){l(_)&&b({inst:_})})},[h]),o(g),g}function l(h){var f=h.getSnapshot;h=h.value;try{var g=f();return!n(h,g)}catch{return!0}}function c(h,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return ij.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,ij}var SZ;function CRe(){return SZ||(SZ=1,rj.exports=PRe()),rj.exports}var TZ;function RRe(){if(TZ)return nj;TZ=1;var t=$A(),e=CRe();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return nj.useSyncExternalStoreWithSelector=function(c,u,h,f,g){var y=s(null);if(y.current===null){var _={hasValue:!1,value:null};y.current=_}else _=y.current;y=a(function(){function T(L){if(!A){if(A=!0,I=L,L=f(L),g!==void 0&&_.hasValue){var C=_.value;if(g(C,L))return P=C}return P=L}if(C=P,r(I,L))return C;var M=f(L);return g!==void 0&&g(C,M)?(I=L,C):(I=L,P=M)}var A=!1,I,P,N=h===void 0?null:h;return[function(){return T(u())},N===null?void 0:function(){return T(N())}]},[u,h,f,g]);var b=i(c,y[0],y[1]);return o(function(){_.hasValue=!0,_.value=b},[b]),l(b),b},nj}var kZ;function MRe(){return kZ||(kZ=1,tj.exports=RRe()),tj.exports}var NRe=MRe();const ORe=Kz(NRe),Ice={},{useDebugValue:LRe}=VTe,{useSyncExternalStoreWithSelector:DRe}=ORe;let AZ=!1;const jRe=t=>t;function $Re(t,e=jRe,n){(Ice?"commercial":void 0)!=="production"&&n&&!AZ&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),AZ=!0);const r=DRe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return LRe(r),r}const IZ=t=>{(Ice?"commercial":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?IRe(t):t,n=(r,i)=>$Re(e,r,i);return Object.assign(n,e),n},yo=t=>t?IZ(t):IZ;var Pce=Symbol.for("immer-nothing"),PZ=Symbol.for("immer-draftable"),vc=Symbol.for("immer-state");function Qu(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Sk=Object.getPrototypeOf;function i2(t){return!!t&&!!t[vc]}function I1(t){return t?Cce(t)||Array.isArray(t)||!!t[PZ]||!!t.constructor?.[PZ]||XA(t)||H5(t):!1}var FRe=Object.prototype.constructor.toString(),CZ=new WeakMap;function Cce(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=CZ.get(n);return r===void 0&&(r=Function.toString.call(n),CZ.set(n,r)),r===FRe}function i4(t,e,n=!0){W5(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function W5(t){const e=t[vc];return e?e.type_:Array.isArray(t)?1:XA(t)?2:H5(t)?3:0}function a8(t,e){return W5(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Rce(t,e,n){const r=W5(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function VRe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function XA(t){return t instanceof Map}function H5(t){return t instanceof Set}function J0(t){return t.copy_||t.base_}function l8(t,e){if(XA(t))return new Map(t);if(H5(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=Cce(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[vc];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(Sk(t),r)}else{const r=Sk(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function eU(t,e=!1){return q5(t)||i2(t)||!I1(t)||(W5(t)>1&&Object.defineProperties(t,{set:EC,add:EC,clear:EC,delete:EC}),Object.freeze(t),e&&Object.values(t).forEach(n=>eU(n,!0))),t}function zRe(){Qu(2)}var EC={value:zRe};function q5(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var GRe={};function P1(t){const e=GRe[t];return e||Qu(0,t),e}var Tk;function Mce(){return Tk}function URe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function RZ(t,e){e&&(P1("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function c8(t){u8(t),t.drafts_.forEach(BRe),t.drafts_=null}function u8(t){t===Tk&&(Tk=t.parent_)}function MZ(t){return Tk=URe(Tk,t)}function BRe(t){const e=t[vc];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function NZ(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[vc].modified_&&(c8(e),Qu(4)),I1(t)&&(t=s4(e,t),e.parent_||o4(e,t)),e.patches_&&P1("Patches").generateReplacementPatches_(n[vc].base_,t,e.patches_,e.inversePatches_)):t=s4(e,n,[]),c8(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Pce?t:void 0}function s4(t,e,n){if(q5(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[vc];if(!i)return i4(e,(s,o)=>OZ(t,i,e,s,o,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return o4(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let o=s,a=!1;i.type_===3&&(o=new Set(s),s.clear(),a=!0),i4(o,(l,c)=>OZ(t,i,s,l,c,n,a),r),o4(t,s,!1),n&&t.patches_&&P1("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function OZ(t,e,n,r,i,s,o){if(i==null||typeof i!="object"&&!o)return;const a=q5(i);if(!(a&&!o)){if(i2(i)){const l=s&&e&&e.type_!==3&&!a8(e.assigned_,r)?s.concat(r):void 0,c=s4(t,i,l);if(Rce(n,r,c),i2(c))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(I1(i)&&!a){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&a)return;s4(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(XA(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&o4(t,i)}}}function o4(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&eU(e,n)}function WRe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:Mce(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=tU;n&&(i=[r],s=kk);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var tU={get(t,e){if(e===vc)return t;const n=J0(t);if(!a8(n,e))return HRe(t,n,e);const r=n[e];return t.finalized_||!I1(r)?r:r===sj(t.base_,e)?(oj(t),t.copy_[e]=d8(r,t)):r},has(t,e){return e in J0(t)},ownKeys(t){return Reflect.ownKeys(J0(t))},set(t,e,n){const r=Nce(J0(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=sj(J0(t),e),s=i?.[vc];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(VRe(n,i)&&(n!==void 0||a8(t.base_,e)))return!0;oj(t),h8(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return sj(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,oj(t),h8(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=J0(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Qu(11)},getPrototypeOf(t){return Sk(t.base_)},setPrototypeOf(){Qu(12)}},kk={};i4(tU,(t,e)=>{kk[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});kk.deleteProperty=function(t,e){return kk.set.call(this,t,e,void 0)};kk.set=function(t,e,n){return tU.set.call(this,t[0],e,n,t[0])};function sj(t,e){const n=t[vc];return(n?J0(n):t)[e]}function HRe(t,e,n){const r=Nce(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function Nce(t,e){if(!(e in t))return;let n=Sk(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Sk(n)}}function h8(t){t.modified_||(t.modified_=!0,t.parent_&&h8(t.parent_))}function oj(t){t.copy_||(t.copy_=l8(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var qRe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&Qu(6),r!==void 0&&typeof r!="function"&&Qu(7);let i;if(I1(e)){const s=MZ(this),o=d8(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?c8(s):u8(s)}return RZ(s,r),NZ(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Pce&&(i=void 0),this.autoFreeze_&&eU(i,!0),r){const s=[],o=[];P1("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else Qu(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){I1(t)||Qu(8),i2(t)&&(t=KRe(t));const e=MZ(this),n=d8(t,void 0);return n[vc].isManual_=!0,u8(e),n}finishDraft(t,e){const n=t&&t[vc];(!n||!n.isManual_)&&Qu(9);const{scope_:r}=n;return RZ(r,e),NZ(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=P1("Patches").applyPatches_;return i2(t)?r(t,e):this.produce(t,i=>r(i,e))}};function d8(t,e){const n=XA(t)?P1("MapSet").proxyMap_(t,e):H5(t)?P1("MapSet").proxySet_(t,e):WRe(t,e);return(e?e.scope_:Mce()).drafts_.push(n),n}function KRe(t){return i2(t)||Qu(10,t),Oce(t)}function Oce(t){if(!I1(t)||q5(t))return t;const e=t[vc];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=l8(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=l8(t,!0);return i4(n,(i,s)=>{Rce(n,i,Oce(s))},r),e&&(e.finalized_=!1),n}var YRe=new qRe,XRe=YRe.produce;const ZRe=t=>(e,n,r)=>(r.setState=(i,s,...o)=>{const a=typeof i=="function"?XRe(i):i;return e(a,s,...o)},t(r.setState,n,r)),nb=ZRe,ks=yo()(nb((t,e)=>({tracking:!1,position:null,heading:null,smoothHeading:null,rawGPSHeading:null,accuracy:null,speed:null,headingSource:null,watchId:null,firstFix:!0,navigationMode:"free",config:{centerOnUser:!0},fetchPassivePosition:()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(n=>{t(r=>{r.tracking||(r.position={lat:n.coords.latitude,lng:n.coords.longitude},r.accuracy=n.coords.accuracy)})},()=>{},{enableHighAccuracy:!1,maximumAge:6e4,timeout:1e4})},startTracking:()=>{t(n=>{n.tracking=!0})},stopTracking:()=>{t(n=>{const{watchId:r}=e();r!==null&&navigator.geolocation.clearWatch(r),n.tracking=!1,n.speed=null,n.headingSource=null,n.heading=null,n.smoothHeading=null,n.rawGPSHeading=null,n.watchId=null,n.navigationMode="free"})},updatePosition:n=>{t(r=>{r.position={lat:n.coords.latitude,lng:n.coords.longitude},r.accuracy=n.coords.accuracy,r.speed=n.coords.speed,r.rawGPSHeading=n.coords.heading,n.coords.accuracy!==null&&n.coords.accuracy<20?n.coords.heading!==null&&n.coords.speed!==null&&n.coords.speed>.5?r.headingSource="gps":r.headingSource="compass":r.headingSource=null})},setSmoothedHeading:n=>{t(r=>{r.smoothHeading=n,r.heading=n})},setWatchId:n=>{t(r=>{r.watchId=n})},resetFirstFix:()=>{t(n=>{n.firstFix=!1})},setNavigationMode:n=>{t(r=>{r.navigationMode=n})},toggleNavigationMode:()=>{t(n=>{n.navigationMode=n.navigationMode==="free"?"headingUp":"free"})}}))),$y={Kansenkaart:{name:"Kansenkaart",factory:async()=>{const{createKansenkaartLayerOL:t}=await _e(async()=>{const{createKansenkaartLayerOL:e}=await import("./kansenkaartOL-BzMnu59e.js");return{createKansenkaartLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"TMK 1850":{name:"TMK 1850",factory:async()=>null,immediateLoad:!0,tier:"premium"},"Bonnebladen 1900":{name:"Bonnebladen 1900",factory:async()=>null,immediateLoad:!0,tier:"premium"},"AHN 0.5m":{name:"AHN 0.5m",factory:async()=>{const{createAHNLayerOL:t}=await _e(async()=>{const{createAHNLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createAHNLayerOL:e}},[]);return t()},immediateLoad:!0},Geomorfologie:{name:"Geomorfologie",factory:async()=>{const{createGeomorfologieLayerOL:t}=await _e(async()=>{const{createGeomorfologieLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createGeomorfologieLayerOL:e}},[]);return t()},immediateLoad:!0},Bodemkaart:{name:"Bodemkaart",factory:async()=>{const{createBodemkaartLayerOL:t}=await _e(async()=>{const{createBodemkaartLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createBodemkaartLayerOL:e}},[]);return t()},immediateLoad:!0},IKAW:{name:"IKAW",factory:async()=>{const{createIKAWLayerOL:t}=await _e(async()=>{const{createIKAWLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createIKAWLayerOL:e}},[]);return t()},immediateLoad:!0},"FAMKE Steentijd":{name:"FAMKE Steentijd",factory:async()=>{const{createFAMKESteentijdLayerOL:t}=await _e(async()=>{const{createFAMKESteentijdLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createFAMKESteentijdLayerOL:e}},[]);return t()},immediateLoad:!0},"FAMKE IJzertijd":{name:"FAMKE IJzertijd",factory:async()=>{const{createFAMKEIJzertijdLayerOL:t}=await _e(async()=>{const{createFAMKEIJzertijdLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createFAMKEIJzertijdLayerOL:e}},[]);return t()},immediateLoad:!0},Essen:{name:"Essen",factory:async()=>{const{createEssenLayerOL:t}=await _e(async()=>{const{createEssenLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createEssenLayerOL:e}},[]);return t()},immediateLoad:!0},Rijksmonumenten:{name:"Rijksmonumenten",factory:async()=>{const{createRijksmonumentenLayerOL:t}=await _e(async()=>{const{createRijksmonumentenLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createRijksmonumentenLayerOL:e}},[]);return t()},immediateLoad:!0},"Archeo Onderzoeken":{name:"Archeo Onderzoeken",factory:async()=>{const{createArcheoOnderzoekenLayerOL:t}=await _e(async()=>{const{createArcheoOnderzoekenLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createArcheoOnderzoekenLayerOL:e}},[]);return t()},immediateLoad:!0},Werelderfgoed:{name:"Werelderfgoed",factory:async()=>{const{createWerelderfgoedLayerOL:t}=await _e(async()=>{const{createWerelderfgoedLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createWerelderfgoedLayerOL:e}},[]);return t()},immediateLoad:!0},Terpen:{name:"Terpen",factory:async()=>{const{createTerpenLayerOL:t}=await _e(async()=>{const{createTerpenLayerOL:e}=await import("./terpenOL-B1PxN7QM.js");return{createTerpenLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},Verdedigingslinies:{name:"Verdedigingslinies",factory:async()=>{const{createLiniesLayerOL:t}=await _e(async()=>{const{createLiniesLayerOL:e}=await import("./verdedigingswerkenOL-BJ0AmxTs.js");return{createLiniesLayerOL:e}},[]);return t()},immediateLoad:!0},Inundatiegebieden:{name:"Inundatiegebieden",factory:async()=>{const{createInundatiesLayerOL:t}=await _e(async()=>{const{createInundatiesLayerOL:e}=await import("./verdedigingswerkenOL-BJ0AmxTs.js");return{createInundatiesLayerOL:e}},[]);return t()},immediateLoad:!0},"Militaire Objecten":{name:"Militaire Objecten",factory:async()=>{const{createMilitaireObjectenLayerOL:t}=await _e(async()=>{const{createMilitaireObjectenLayerOL:e}=await import("./verdedigingswerkenOL-BJ0AmxTs.js");return{createMilitaireObjectenLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 800 n.Chr.":{name:"Paleokaart 800 n.Chr.",factory:async()=>{const{createPaleo800ncLayerOL:t}=await _e(async()=>{const{createPaleo800ncLayerOL:e}=await import("./paleokaartOL-CcR_-YYZ.js");return{createPaleo800ncLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 100 n.Chr.":{name:"Paleokaart 100 n.Chr.",factory:async()=>{const{createPaleo100ncLayerOL:t}=await _e(async()=>{const{createPaleo100ncLayerOL:e}=await import("./paleokaartOL-CcR_-YYZ.js");return{createPaleo100ncLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 500 v.Chr.":{name:"Paleokaart 500 v.Chr.",factory:async()=>{const{createPaleo500vcLayerOL:t}=await _e(async()=>{const{createPaleo500vcLayerOL:e}=await import("./paleokaartOL-CcR_-YYZ.js");return{createPaleo500vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 1500 v.Chr.":{name:"Paleokaart 1500 v.Chr.",factory:async()=>{const{createPaleo1500vcLayerOL:t}=await _e(async()=>{const{createPaleo1500vcLayerOL:e}=await import("./paleokaartOL-CcR_-YYZ.js");return{createPaleo1500vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 2750 v.Chr.":{name:"Paleokaart 2750 v.Chr.",factory:async()=>{const{createPaleo2750vcLayerOL:t}=await _e(async()=>{const{createPaleo2750vcLayerOL:e}=await import("./paleokaartOL-CcR_-YYZ.js");return{createPaleo2750vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 5500 v.Chr.":{name:"Paleokaart 5500 v.Chr.",factory:async()=>{const{createPaleo5500vcLayerOL:t}=await _e(async()=>{const{createPaleo5500vcLayerOL:e}=await import("./paleokaartOL-CcR_-YYZ.js");return{createPaleo5500vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Paleokaart 9000 v.Chr.":{name:"Paleokaart 9000 v.Chr.",factory:async()=>{const{createPaleo9000vcLayerOL:t}=await _e(async()=>{const{createPaleo9000vcLayerOL:e}=await import("./paleokaartOL-CcR_-YYZ.js");return{createPaleo9000vcLayerOL:e}},[]);return t()},immediateLoad:!0},"Religieus Erfgoed":{name:"Religieus Erfgoed",factory:async()=>{const{createReligieusErfgoedLayerOL:t}=await _e(async()=>{const{createReligieusErfgoedLayerOL:e}=await import("./religieusErfgoedOL-C5Hi14RL.js");return{createReligieusErfgoedLayerOL:e}},[]);return t()},immediateLoad:!0},"AHN4 Hoogtekaart Kleur":{name:"AHN4 Hoogtekaart Kleur",factory:async()=>{const{createAHN4ColorElevationLayerOL:t}=await _e(async()=>{const{createAHN4ColorElevationLayerOL:e}=await import("./hillshadeLayers-CbIFCEoP.js");return{createAHN4ColorElevationLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"AHN4 Hillshade NL":{name:"AHN4 Hillshade NL",factory:async()=>{const{createAHN4HillshadeLayerOL:t}=await _e(async()=>{const{createAHN4HillshadeLayerOL:e}=await import("./hillshadeLayers-CbIFCEoP.js");return{createAHN4HillshadeLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"AHN4 Multi-Hillshade NL":{name:"AHN4 Multi-Hillshade NL",factory:async()=>{const{createAHN4MultiHillshadeLayerOL:t}=await _e(async()=>{const{createAHN4MultiHillshadeLayerOL:e}=await import("./hillshadeLayers-CbIFCEoP.js");return{createAHN4MultiHillshadeLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"AHN4 Hillshade Kleur":{name:"AHN4 Hillshade Kleur",factory:async()=>{const{createAHN4ShadedReliefLayerOL:t}=await _e(async()=>{const{createAHN4ShadedReliefLayerOL:e}=await import("./hillshadeLayers-CbIFCEoP.js");return{createAHN4ShadedReliefLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},Gewaspercelen:{name:"Gewaspercelen",factory:async()=>{const{createGewaspercelenLayerOL:t}=await _e(async()=>{const{createGewaspercelenLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createGewaspercelenLayerOL:e}},[]);return t()},immediateLoad:!0,tier:"premium"},"Kadastrale Grenzen":{name:"Kadastrale Grenzen",factory:async()=>{const{createKadastraleKaartLayerOL:t}=await _e(async()=>{const{createKadastraleKaartLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createKadastraleKaartLayerOL:e}},[]);return t()},immediateLoad:!0},Scheepswrakken:{name:"Scheepswrakken",factory:async()=>{const{createScheepswrakkenLayerOL:t}=await _e(async()=>{const{createScheepswrakkenLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createScheepswrakkenLayerOL:e}},[]);return t()},immediateLoad:!0},"Woonheuvels ZH":{name:"Woonheuvels ZH",factory:async()=>{const{createWoonheuvelsLayerOL:t}=await _e(async()=>{const{createWoonheuvelsLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createWoonheuvelsLayerOL:e}},[]);return t()},immediateLoad:!0},"Romeinse Forten":{name:"Romeinse Forten",factory:async()=>{const{createRomeinseFortenLayerOL:t}=await _e(async()=>{const{createRomeinseFortenLayerOL:e}=await import("./romeinseFortenOL-f1bOqJgs.js");return{createRomeinseFortenLayerOL:e}},__vite__mapDeps([0,1]));return t()},immediateLoad:!1},Windmolens:{name:"Windmolens",factory:async()=>{const{createWindmolensLayerOL:t}=await _e(async()=>{const{createWindmolensLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createWindmolensLayerOL:e}},[]);return t()},immediateLoad:!0},Erfgoedlijnen:{name:"Erfgoedlijnen",factory:async()=>{const{createErfgoedlijnenLayerOL:t}=await _e(async()=>{const{createErfgoedlijnenLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createErfgoedlijnenLayerOL:e}},[]);return t()},immediateLoad:!0},"Oude Kernen":{name:"Oude Kernen",factory:async()=>{const{createOudeKernenLayerOL:t}=await _e(async()=>{const{createOudeKernenLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createOudeKernenLayerOL:e}},[]);return t()},immediateLoad:!0},"Relictenkaart Punten":{name:"Relictenkaart Punten",factory:async()=>{const{createRelictenPuntenLayerOL:t}=await _e(async()=>{const{createRelictenPuntenLayerOL:e}=await import("./relictenGelderlandOL-DC1FQWKM.js");return{createRelictenPuntenLayerOL:e}},[]);return t()},immediateLoad:!1},"Relictenkaart Lijnen":{name:"Relictenkaart Lijnen",factory:async()=>{const{createRelictenkaartLijnenLayerOL:t}=await _e(async()=>{const{createRelictenkaartLijnenLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createRelictenkaartLijnenLayerOL:e}},[]);return t()},immediateLoad:!0},"Relictenkaart Vlakken":{name:"Relictenkaart Vlakken",factory:async()=>{const{createRelictenkaartVlakkenLayerOL:t}=await _e(async()=>{const{createRelictenkaartVlakkenLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createRelictenkaartVlakkenLayerOL:e}},[]);return t()},immediateLoad:!0},"Verdronken Dorpen":{name:"Verdronken Dorpen",factory:async()=>{const{createVerdronkenDorpenLayerOL:t}=await _e(async()=>{const{createVerdronkenDorpenLayerOL:e}=await import("./pdokWMSLayers-EQH5yAdL.js");return{createVerdronkenDorpenLayerOL:e}},[]);return t()},immediateLoad:!0},"AMK Monumenten":{name:"AMK Monumenten",factory:async()=>{const{createAMKLayerOL:t}=await _e(async()=>{const{createAMKLayerOL:e}=await import("./amkOL-DY_w2ltY.js");return{createAMKLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Romeins":{name:"AMK Romeins",factory:async()=>{const{createAMKRomeinsLayerOL:t}=await _e(async()=>{const{createAMKRomeinsLayerOL:e}=await import("./amkOL-DY_w2ltY.js");return{createAMKRomeinsLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Steentijd":{name:"AMK Steentijd",factory:async()=>{const{createAMKSteentijdLayerOL:t}=await _e(async()=>{const{createAMKSteentijdLayerOL:e}=await import("./amkOL-DY_w2ltY.js");return{createAMKSteentijdLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Vroege ME":{name:"AMK Vroege ME",factory:async()=>{const{createAMKVroegeMELayerOL:t}=await _e(async()=>{const{createAMKVroegeMELayerOL:e}=await import("./amkOL-DY_w2ltY.js");return{createAMKVroegeMELayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Late ME":{name:"AMK Late ME",factory:async()=>{const{createAMKLateMELayerOL:t}=await _e(async()=>{const{createAMKLateMELayerOL:e}=await import("./amkOL-DY_w2ltY.js");return{createAMKLateMELayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"AMK Overig":{name:"AMK Overig",factory:async()=>{const{createAMKOverigLayerOL:t}=await _e(async()=>{const{createAMKOverigLayerOL:e}=await import("./amkOL-DY_w2ltY.js");return{createAMKOverigLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium"},"Romeinse wegen (regio)":{name:"Romeinse wegen (regio)",factory:async()=>{const{createRomeinseWegenLayerOL:t}=await _e(async()=>{const{createRomeinseWegenLayerOL:e}=await import("./romeinsOL-D2jyKENM.js");return{createRomeinseWegenLayerOL:e}},[]);return t()},immediateLoad:!1},"Romeinse wegen (Wereld)":{name:"Romeinse wegen (Wereld)",factory:async()=>{const{createRomeinseWegenWereldLayerOL:t}=await _e(async()=>{const{createRomeinseWegenWereldLayerOL:e}=await import("./romeinsOL-D2jyKENM.js");return{createRomeinseWegenWereldLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Kastelen:{name:"Kastelen",factory:async()=>{const{createKastelenLayerOL:t}=await _e(async()=>{const{createKastelenLayerOL:e}=await import("./kastelenOL-B4dUBUlf.js");return{createKastelenLayerOL:e}},__vite__mapDeps([2,1]));return t()},immediateLoad:!1},Runes:{name:"Runes",factory:async()=>{const{createRuinesLayerOL:t}=await _e(async()=>{const{createRuinesLayerOL:e}=await import("./ruinesOL-BiRYNgZs.js");return{createRuinesLayerOL:e}},__vite__mapDeps([3,1]));return t()},immediateLoad:!1},Veengebieden:{name:"Veengebieden",factory:async()=>{const{createVeengebiedenLayerOL:t}=await _e(async()=>{const{createVeengebiedenLayerOL:e}=await import("./veengebiedenOL-MqWpM9yz.js");return{createVeengebiedenLayerOL:e}},[]);return t()},immediateLoad:!1},Hunebedden:{name:"Hunebedden",factory:async()=>{const{createHunebeddenLayerOL:t}=await _e(async()=>{const{createHunebeddenLayerOL:e}=await import("./hunebeddenOL-Cjq8oM7_.js");return{createHunebeddenLayerOL:e}},__vite__mapDeps([4,1]));return t()},immediateLoad:!1},"UIKAV Punten":{name:"UIKAV Punten",factory:async()=>{const{createUIKAVArcheoPuntenLayerOL:t}=await _e(async()=>{const{createUIKAVArcheoPuntenLayerOL:e}=await import("./uikavArcheoPuntenOL-ByX2MUCp.js");return{createUIKAVArcheoPuntenLayerOL:e}},__vite__mapDeps([5,1]));return t()},immediateLoad:!1,tier:"premium"},"UIKAV Vlakken":{name:"UIKAV Vlakken",factory:async()=>{const{createUIKAVVlakkenLayerOL:t}=await _e(async()=>{const{createUIKAVVlakkenLayerOL:e}=await import("./uikavVlakkenOL-C9r1x0cY.js");return{createUIKAVVlakkenLayerOL:e}},[]);return t()},immediateLoad:!1},"UIKAV Buffer":{name:"UIKAV Buffer",factory:async()=>{const{createUIKAVBufferlaagLayerOL:t}=await _e(async()=>{const{createUIKAVBufferlaagLayerOL:e}=await import("./uikavBufferlaagOL-LIr3p6NN.js");return{createUIKAVBufferlaagLayerOL:e}},[]);return t()},immediateLoad:!1},"UIKAV Expert":{name:"UIKAV Expert",factory:async()=>{const{createUIKAVExpertLayerOL:t}=await _e(async()=>{const{createUIKAVExpertLayerOL:e}=await import("./uikavExpertOL-CRxdCkfW.js");return{createUIKAVExpertLayerOL:e}},[]);return t()},immediateLoad:!1},"UIKAV Indeling":{name:"UIKAV Indeling",factory:async()=>{const{createUIKAVUiterwaardenLayerOL:t}=await _e(async()=>{const{createUIKAVUiterwaardenLayerOL:e}=await import("./uikavUiterwaardenOL-DxQc8Htj.js");return{createUIKAVUiterwaardenLayerOL:e}},[]);return t()},immediateLoad:!1},Speeltuinen:{name:"Speeltuinen",factory:async()=>{const{createSpeeltuinenLayerOL:t}=await _e(async()=>{const{createSpeeltuinenLayerOL:e}=await import("./speeltuinenOL-WEmnMoPH.js");return{createSpeeltuinenLayerOL:e}},__vite__mapDeps([6,1]));return t()},immediateLoad:!1},Musea:{name:"Musea",factory:async()=>{const{createMuseaLayerOL:t}=await _e(async()=>{const{createMuseaLayerOL:e}=await import("./museaOL-BMHvoy5u.js");return{createMuseaLayerOL:e}},__vite__mapDeps([7,1]));return t()},immediateLoad:!1},Strandjes:{name:"Strandjes",factory:async()=>{const{createStrandjesLayerOL:t}=await _e(async()=>{const{createStrandjesLayerOL:e}=await import("./strandjesOL-pvl7EBjX.js");return{createStrandjesLayerOL:e}},[]);return t()},immediateLoad:!1},Parken:{name:"Parken",factory:async()=>{const{createParkenLayerOL:t}=await _e(async()=>{const{createParkenLayerOL:e}=await import("./parkenOL-B1QS6DDe.js");return{createParkenLayerOL:e}},[]);return t()},immediateLoad:!1},Kringloopwinkels:{name:"Kringloopwinkels",factory:async()=>{const{createKringloopwinkelsLayerOL:t}=await _e(async()=>{const{createKringloopwinkelsLayerOL:e}=await import("./kringloopwinkelsOL-Ct7xecHT.js");return{createKringloopwinkelsLayerOL:e}},__vite__mapDeps([8,1]));return t()},immediateLoad:!1},Ruiterpaden:{name:"Ruiterpaden",factory:async()=>{const{createRuiterpadenLayerOL:t}=await _e(async()=>{const{createRuiterpadenLayerOL:e}=await import("./ruiterpadenOL-B_GLk0jf.js");return{createRuiterpadenLayerOL:e}},[]);return t()},immediateLoad:!1},Laarzenpaden:{name:"Laarzenpaden",factory:async()=>{const{createLaarzenpadenLayerOL:t}=await _e(async()=>{const{createLaarzenpadenLayerOL:e}=await import("./laarzenpadenOL-BDpzGiGl.js");return{createLaarzenpadenLayerOL:e}},[]);return t()},immediateLoad:!1},"Fossielen Nederland":{name:"Fossielen Nederland",factory:async()=>{const{createFossielenLayerOL:t}=await _e(async()=>{const{createFossielenLayerOL:e}=await import("./fossielenOL-PKPcT68l.js");return{createFossielenLayerOL:e}},__vite__mapDeps([9,10,1]));return t()},immediateLoad:!1,tier:"premium"},"Fossielen Belgi":{name:"Fossielen Belgi",factory:async()=>{const{createFossielenBelgieLayerOL:t}=await _e(async()=>{const{createFossielenBelgieLayerOL:e}=await import("./fossielenBelgieOL-BTFjh9Dr.js");return{createFossielenBelgieLayerOL:e}},__vite__mapDeps([11,10,1]));return t()},immediateLoad:!1,tier:"premium",regions:["be"]},"Fossielen Duitsland":{name:"Fossielen Duitsland",factory:async()=>{const{createFossielenDuitslandLayerOL:t}=await _e(async()=>{const{createFossielenDuitslandLayerOL:e}=await import("./fossielenDuitslandOL-BrY6wsuF.js");return{createFossielenDuitslandLayerOL:e}},__vite__mapDeps([12,10,1]));return t()},immediateLoad:!1,tier:"premium",regions:["de"]},"Fossielen Frankrijk":{name:"Fossielen Frankrijk",factory:async()=>{const{createFossielenFrankrijkLayerOL:t}=await _e(async()=>{const{createFossielenFrankrijkLayerOL:e}=await import("./fossielenFrankrijkOL-DSoYz1TX.js");return{createFossielenFrankrijkLayerOL:e}},__vite__mapDeps([13,10,1]));return t()},immediateLoad:!1,tier:"premium",regions:["fr"]},"Fossiel Hotspots":{name:"Fossiel Hotspots",factory:async()=>{const{createFossielHotspotsLayerOL:t}=await _e(async()=>{const{createFossielHotspotsLayerOL:e}=await import("./fossielHotspotsOL-BDQaHvBj.js");return{createFossielHotspotsLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},"Mineralen Hotspots":{name:"Mineralen Hotspots",factory:async()=>{const{createMineralenHotspotsLayerOL:t}=await _e(async()=>{const{createMineralenHotspotsLayerOL:e}=await import("./mineralenHotspotsOL-BTBcN7VW.js");return{createMineralenHotspotsLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},Goudrivieren:{name:"Goudrivieren",factory:async()=>{const{createGoudrivierenLayerOL:t}=await _e(async()=>{const{createGoudrivierenLayerOL:e}=await import("./goudrivierenOL-D53MQ3zF.js");return{createGoudrivierenLayerOL:e}},[]);return t()},immediateLoad:!1,tier:"premium",regions:["nl","be","de","fr"]},"WWII Bunkers":{name:"WWII Bunkers",factory:async()=>{const{createBunkersLayerOL:t}=await _e(async()=>{const{createBunkersLayerOL:e}=await import("./bunkersOL-BURGcfbU.js");return{createBunkersLayerOL:e}},__vite__mapDeps([14,1]));return t()},immediateLoad:!1},Grafheuvels:{name:"Grafheuvels",factory:async()=>{const{createGrafheuvelsLayerOL:t}=await _e(async()=>{const{createGrafheuvelsLayerOL:e}=await import("./grafheuvelsOL-CRDa5lYV.js");return{createGrafheuvelsLayerOL:e}},__vite__mapDeps([15,1]));return t()},immediateLoad:!1},Slagvelden:{name:"Slagvelden",factory:async()=>{const{createSlagveldenLayerOL:t}=await _e(async()=>{const{createSlagveldenLayerOL:e}=await import("./slagveldenOL-DP2E5TBP.js");return{createSlagveldenLayerOL:e}},__vite__mapDeps([16,1]));return t()},immediateLoad:!1},"Militaire Vliegvelden":{name:"Militaire Vliegvelden",factory:async()=>{const{createVliegveldenLayerOL:t}=await _e(async()=>{const{createVliegveldenLayerOL:e}=await import("./vliegveldenOL-Cv2RXsyr.js");return{createVliegveldenLayerOL:e}},[]);return t()},immediateLoad:!1}};function JRe(){return Object.values($y).filter(t=>t.immediateLoad&&t.platform!=="arcgis")}const li=yo()(nb((t,e)=>({map:null,arcgisMap:null,arcgisView:null,arcgisInitialized:!1,rotation:0,rotationEnabled:!0,setMap:n=>{t(r=>{r.map=n})},setArcGISMap:(n,r)=>{t(i=>{i.arcgisMap=n,i.arcgisView=r,i.arcgisInitialized=!0})},setRotation:n=>{t(r=>{if(r.rotation=n,r.map&&r.rotationEnabled){const i=n*Math.PI/180;r.map.getView().setRotation(i)}})},enableRotation:()=>{t(n=>{n.rotationEnabled=!0})},disableRotation:()=>{t(n=>{n.rotationEnabled=!1,n.rotation=0,n.map&&n.map.getView().animate({rotation:0,duration:500})})}}))),Bs=yo()(nb((t,e)=>({visible:{"CartoDB (licht)":!0,OpenStreetMap:!1,Luchtfoto:!1,"Labels Overlay":!1,"TMK 1850":!1,"Bonnebladen 1900":!1,Hunebedden:!1,"FAMKE Steentijd":!1,"FAMKE IJzertijd":!1,Grafheuvels:!1,Terpen:!1,"AMK Monumenten":!1,"AMK Romeins":!1,"AMK Steentijd":!1,"AMK Vroege ME":!1,"AMK Late ME":!1,"AMK Overig":!1,"Archeo Onderzoeken":!1,"Romeinse wegen (regio)":!1,"Romeinse wegen (Wereld)":!1,Kastelen:!1,IKAW:!1,Essen:!1,Rijksmonumenten:!1,Werelderfgoed:!1,"WWII Bunkers":!1,Slagvelden:!1,"Militaire Vliegvelden":!1,Verdedigingslinies:!1,Inundatiegebieden:!1,"Militaire Objecten":!1,"Paleokaart 800 n.Chr.":!1,"Paleokaart 100 n.Chr.":!1,"Paleokaart 500 v.Chr.":!1,"Paleokaart 1500 v.Chr.":!1,"Paleokaart 2750 v.Chr.":!1,"Paleokaart 5500 v.Chr.":!1,"Paleokaart 9000 v.Chr.":!1,"Religieus Erfgoed":!1,"UIKAV Punten":!1,"UIKAV Vlakken":!1,"UIKAV Buffer":!1,"UIKAV Expert":!1,"UIKAV Indeling":!1,"AHN4 Hoogtekaart Kleur":!1,"AHN4 Hillshade NL":!1,"AHN4 Multi-Hillshade NL":!1,"AHN4 Hillshade Kleur":!1,"AHN 0.5m":!1,Veengebieden:!1,Geomorfologie:!1,Bodemkaart:!1,"Fossielen Nederland":!1,"Fossielen Belgi":!1,"Fossielen Duitsland":!1,"Fossielen Frankrijk":!1,Parken:!1,Speeltuinen:!1,Musea:!1,Strandjes:!1,Ruiterpaden:!1,Laarzenpaden:!1,Gewaspercelen:!1,"Kadastrale Grenzen":!1,Scheepswrakken:!1,"Woonheuvels ZH":!1,"Romeinse Forten":!1,Windmolens:!1,Erfgoedlijnen:!1,"Oude Kernen":!1,"Relictenkaart Punten":!1,"Relictenkaart Lijnen":!1,"Relictenkaart Vlakken":!1,"Verdronken Dorpen":!1,"Mijn Vondsten":!0},opacity:{"AHN4 Hoogtekaart Kleur":.85,"AHN4 Hillshade NL":.7,"AHN4 Multi-Hillshade NL":.7,"AHN4 Hillshade Kleur":.8,"AHN 0.5m":.7,"TMK 1850":.8,"Bonnebladen 1900":.8,Geomorfologie:.5,Bodemkaart:.6,Veengebieden:.6,IKAW:.5,"FAMKE Steentijd":.6,"FAMKE IJzertijd":.6,Essen:.6,Terpen:.7,"AMK Monumenten":.45,"AMK Romeins":.6,"AMK Steentijd":.6,"AMK Vroege ME":.6,"AMK Late ME":.6,"AMK Overig":.6,"Paleokaart 9000 v.Chr.":.7,"Paleokaart 5500 v.Chr.":.7,"Paleokaart 2750 v.Chr.":.7,"Paleokaart 1500 v.Chr.":.7,"Paleokaart 500 v.Chr.":.7,"Paleokaart 100 n.Chr.":.7,"Paleokaart 800 n.Chr.":.7,Verdedigingslinies:.7,Inundatiegebieden:.5,"Militaire Objecten":.8,"Religieus Erfgoed":.8,Gewaspercelen:.6,"Kadastrale Grenzen":.7,Erfgoedlijnen:.7,"Oude Kernen":.6,"Relictenkaart Vlakken":.5},loadingState:{},layers:{},arcgisLayers:{},toggleLayer:n=>{const r=e(),i=!r.visible[n];t(a=>{a.visible[n]=i}),$y[n]?.platform==="arcgis"?i&&!r.arcgisLayers[n]?e().loadLayer(n):r.arcgisLayers[n]&&(r.arcgisLayers[n].visible=i):i&&!r.layers[n]?e().loadLayer(n):r.layers[n]&&r.layers[n].setVisible(i)},setLayerVisibility:(n,r)=>{const i=e(),o=$y[n]?.platform==="arcgis";t(l=>{if(l.visible[n]=r,o){const c=l.arcgisLayers[n];c&&(c.visible=r)}else{const c=l.layers[n];c&&c.setVisible(r)}});const a=o?i.arcgisLayers[n]:i.layers[n];r&&!a&&e().loadLayer(n)},setLayerOpacity:(n,r)=>{const s=$y[n]?.platform==="arcgis";t(o=>{if(o.opacity[n]=r,s){const a=o.arcgisLayers[n];a&&(a.opacity=r)}else{const a=o.layers[n];a&&a.setOpacity(r)}})},registerLayer:(n,r)=>{t(i=>{i.layers[n]=r,i.loadingState[n]="loaded",i.visible[n]!==void 0&&r.setVisible(i.visible[n]),i.opacity[n]!==void 0&&r.setOpacity(i.opacity[n])})},registerArcGISLayer:(n,r)=>{t(i=>{i.arcgisLayers[n]=r,i.loadingState[n]="loaded",i.visible[n]!==void 0&&(r.visible=i.visible[n]),i.opacity[n]!==void 0&&(r.opacity=i.opacity[n])})},unregisterLayer:n=>{t(r=>{delete r.layers[n],delete r.arcgisLayers[n],delete r.loadingState[n]})},loadLayer:async n=>{const r=e(),i=$y[n];if(!i){console.warn(` Layer "${n}" not found in registry`);return}const s=i.platform==="arcgis";if(r.loadingState[n]==="loading"||s&&r.arcgisLayers[n]||!s&&r.layers[n])return;const o=li.getState();if(s){if(!o.arcgisMap||!o.arcgisInitialized){console.warn(` Cannot load ArcGIS layer "${n}": ArcGIS map not initialized`);return}}else if(!o.map){console.warn(` Cannot load layer "${n}": map not initialized`);return}t(a=>{a.loadingState[n]="loading"}),console.log(` Loading ${s?"ArcGIS":"OL"} layer: ${n}...`);try{const a=await i.factory();if(!a)throw new Error("Factory returned null");const l=e();if(s){const c=a;c.visible=l.visible[n]??!1,l.opacity[n]!==void 0&&(c.opacity=l.opacity[n]),o.arcgisMap.add(c),t(u=>{u.arcgisLayers[n]=c,u.loadingState[n]="loaded"})}else{const c=a;c.setVisible(l.visible[n]??!1),l.opacity[n]!==void 0&&c.setOpacity(l.opacity[n]),o.map.addLayer(c),t(u=>{u.layers[n]=c,u.loadingState[n]="loaded"})}console.log(` Layer loaded: ${n}`)}catch(a){console.error(` Failed to load layer "${n}":`,a),t(l=>{l.loadingState[n]="error"})}}}))),gr=yo()(nb((t,e)=>({layerControlOpen:!1,legendOpen:!1,backgroundsPanelOpen:!1,themesPanelOpen:!1,settingsPanelOpen:!1,infoPanelOpen:!1,presetsPanelOpen:!1,monumentSearchOpen:!1,monumentFilterOpen:!1,vondstFormOpen:!1,vondstFormLocation:null,vondstFormPhoto:null,vondstDashboardOpen:!1,createLayerModalOpen:!1,addPointModalOpen:!1,addPointModalLayerId:null,addPointModalLocation:null,layerManagerModalOpen:!1,layerDashboardOpen:!1,layerDashboardLayerId:null,routeDashboardOpen:!1,isDrawingMode:!1,collapsedCategories:new Set,closeAllPanels:()=>{t(n=>{n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1})},toggleLayerControl:()=>{t(n=>{n.layerControlOpen=!n.layerControlOpen})},toggleLegend:()=>{t(n=>{n.legendOpen=!n.legendOpen})},toggleBackgroundsPanel:()=>{t(n=>{const r=n.backgroundsPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.backgroundsPanelOpen=!0)})},toggleThemesPanel:()=>{t(n=>{const r=n.themesPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.themesPanelOpen=!0)})},toggleSettingsPanel:()=>{t(n=>{const r=n.settingsPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.settingsPanelOpen=!0)})},toggleInfoPanel:()=>{t(n=>{const r=n.infoPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.infoPanelOpen=!0)})},togglePresetsPanel:()=>{t(n=>{const r=n.presetsPanelOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.presetsPanelOpen=!0)})},toggleCategory:n=>{t(r=>{r.collapsedCategories.has(n)?r.collapsedCategories.delete(n):r.collapsedCategories.add(n)})},setLayerControlOpen:n=>{t(r=>{r.layerControlOpen=n})},setLegendOpen:n=>{t(r=>{r.legendOpen=n})},openVondstForm:(n,r)=>{t(i=>{i.backgroundsPanelOpen=!1,i.themesPanelOpen=!1,i.settingsPanelOpen=!1,i.infoPanelOpen=!1,i.presetsPanelOpen=!1,i.vondstFormOpen=!0,i.vondstFormLocation=n||null,i.vondstFormPhoto=r||null})},closeVondstForm:()=>{t(n=>{n.vondstFormOpen=!1,n.vondstFormLocation=null,n.vondstFormPhoto=null})},toggleVondstDashboard:()=>{t(n=>{const r=n.vondstDashboardOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.vondstDashboardOpen=!r})},openCreateLayerModal:()=>{t(n=>{n.createLayerModalOpen=!0})},closeCreateLayerModal:()=>{t(n=>{n.createLayerModalOpen=!1})},openAddPointModal:(n,r)=>{t(i=>{i.addPointModalOpen=!0,i.addPointModalLayerId=n,i.addPointModalLocation=r})},closeAddPointModal:()=>{t(n=>{n.addPointModalOpen=!1,n.addPointModalLayerId=null,n.addPointModalLocation=null})},openLayerManagerModal:()=>{t(n=>{n.layerManagerModalOpen=!0})},closeLayerManagerModal:()=>{t(n=>{n.layerManagerModalOpen=!1})},openLayerDashboard:n=>{t(r=>{r.layerDashboardOpen=!0,r.layerDashboardLayerId=n,r.layerManagerModalOpen=!1})},closeLayerDashboard:()=>{t(n=>{n.layerDashboardOpen=!1,n.layerDashboardLayerId=null})},toggleRouteDashboard:()=>{t(n=>{n.routeDashboardOpen=!n.routeDashboardOpen})},toggleMonumentSearch:()=>{t(n=>{const r=n.monumentSearchOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentSearchOpen=!r})},closeMonumentSearch:()=>{t(n=>{n.monumentSearchOpen=!1})},toggleMonumentFilter:()=>{t(n=>{const r=n.monumentFilterOpen;n.backgroundsPanelOpen=!1,n.themesPanelOpen=!1,n.settingsPanelOpen=!1,n.infoPanelOpen=!1,n.presetsPanelOpen=!1,n.monumentFilterOpen=!1,r||(n.monumentFilterOpen=!0)})},closeMonumentFilter:()=>{t(n=>{n.monumentFilterOpen=!1})},setDrawingMode:n=>{t(r=>{r.isDrawingMode=n})}}))),QRe=()=>{};var LZ={};const Lce=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},eMe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Dce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(f=64)),r.push(n[u],n[h],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Lce(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eMe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new tMe;const f=s<<2|a>>4;if(r.push(f),c!==64){const g=a<<4&240|c>>2;if(r.push(g),h!==64){const y=c<<6&192|h;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tMe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nMe=function(t){const e=Lce(t);return Dce.encodeByteArray(e,!0)},a4=function(t){return nMe(t).replace(/\./g,"")},jce=function(t){try{return Dce.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $ce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const rMe=()=>$ce().__FIREBASE_DEFAULTS__,iMe=()=>{if(typeof process>"u"||typeof LZ>"u")return;const t=LZ.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sMe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jce(t[1]);return e&&JSON.parse(e)},K5=()=>{try{return QRe()||rMe()||iMe()||sMe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Fce=t=>K5()?.emulatorHosts?.[t],Vce=t=>{const e=Fce(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zce=()=>K5()?.config,Gce=t=>K5()?.[`_${t}`];let oMe=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function dv(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nU(t){return(await fetch(t,{credentials:"include"})).ok}function Uce(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[a4(JSON.stringify(n)),a4(JSON.stringify(o)),""].join(".")}const iT={};function aMe(){const t={prod:[],emulator:[]};for(const e of Object.keys(iT))iT[e]?t.emulator.push(e):t.prod.push(e);return t}function lMe(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let DZ=!1;function rU(t,e){if(typeof window>"u"||typeof document>"u"||!dv(window.location.host)||iT[t]===e||iT[t]||DZ)return;iT[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=aMe().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,g){f.setAttribute("width","24"),f.setAttribute("id",g),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function c(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{DZ=!0,o()},f}function u(f,g){f.setAttribute("id",g),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=lMe(r),g=n("text"),y=document.getElementById(g)||document.createElement("span"),_=n("learnmore"),b=document.getElementById(_)||document.createElement("a"),T=n("preprendIcon"),A=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const I=f.element;a(I),u(b,_);const P=c();l(A,T),I.append(A,y,b,P),document.body.appendChild(I)}s?(y.innerText="Preview backend disconnected.",A.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(A.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}function Ks(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cMe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ks())}function Bce(){const t=K5()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uMe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hMe(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dMe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fMe(){const t=Ks();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Wce(){return!Bce()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hce(){return!Bce()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function qce(){try{return typeof indexedDB=="object"}catch{return!1}}function pMe(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}const mMe="FirebaseError";class Hd extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mMe,Object.setPrototypeOf(this,Hd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ZA.prototype.create)}}class ZA{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?gMe(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Hd(i,a,r)}}function gMe(t,e){return t.replace(yMe,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const yMe=/\{\$([^}]+)}/g;function vMe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function C1(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(jZ(s)&&jZ(o)){if(!C1(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function jZ(t){return t!==null&&typeof t=="object"}function JA(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _Me(t,e){const n=new xMe(t,e);return n.subscribe.bind(n)}class xMe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wMe(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=aj),i.error===void 0&&(i.error=aj),i.complete===void 0&&(i.complete=aj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wMe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function aj(){}function mo(t){return t&&t._delegate?t._delegate:t}class Dg{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Q0="[DEFAULT]";class bMe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oMe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SMe(e))try{this.getOrInitializeService({instanceIdentifier:Q0})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Q0){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Q0){return this.instances.has(e)}getOptions(e=Q0){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EMe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Q0){return this.component?this.component.multipleInstances?e:Q0:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EMe(t){return t===Q0?void 0:t}function SMe(t){return t.instantiationMode==="EAGER"}class TMe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bMe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var tr;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(tr||(tr={}));const kMe={debug:tr.DEBUG,verbose:tr.VERBOSE,info:tr.INFO,warn:tr.WARN,error:tr.ERROR,silent:tr.SILENT},AMe=tr.INFO,IMe={[tr.DEBUG]:"log",[tr.VERBOSE]:"log",[tr.INFO]:"info",[tr.WARN]:"warn",[tr.ERROR]:"error"},PMe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=IMe[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class iU{constructor(e){this.name=e,this._logLevel=AMe,this._logHandler=PMe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kMe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tr.DEBUG,...e),this._logHandler(this,tr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tr.VERBOSE,...e),this._logHandler(this,tr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tr.INFO,...e),this._logHandler(this,tr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tr.WARN,...e),this._logHandler(this,tr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tr.ERROR,...e),this._logHandler(this,tr.ERROR,...e)}}const CMe=(t,e)=>e.some(n=>t instanceof n);let $Z,FZ;function RMe(){return $Z||($Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MMe(){return FZ||(FZ=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kce=new WeakMap,f8=new WeakMap,Yce=new WeakMap,lj=new WeakMap,sU=new WeakMap;function NMe(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(xg(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Kce.set(n,t)}).catch(()=>{}),sU.set(e,t),e}function OMe(t){if(f8.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});f8.set(t,e)}let p8={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return f8.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Yce.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xg(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LMe(t){p8=t(p8)}function DMe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cj(this),e,...n);return Yce.set(r,e.sort?e.sort():[e]),xg(r)}:MMe().includes(t)?function(...e){return t.apply(cj(this),e),xg(Kce.get(this))}:function(...e){return xg(t.apply(cj(this),e))}}function jMe(t){return typeof t=="function"?DMe(t):(t instanceof IDBTransaction&&OMe(t),CMe(t,RMe())?new Proxy(t,p8):t)}function xg(t){if(t instanceof IDBRequest)return NMe(t);if(lj.has(t))return lj.get(t);const e=jMe(t);return e!==t&&(lj.set(t,e),sU.set(e,t)),e}const cj=t=>sU.get(t);function $Me(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=xg(o);return r&&o.addEventListener("upgradeneeded",l=>{r(xg(o.result),l.oldVersion,l.newVersion,xg(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const FMe=["get","getKey","getAll","getAllKeys","count"],VMe=["put","add","delete","clear"],uj=new Map;function VZ(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uj.get(e))return uj.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=VMe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||FMe.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return uj.set(e,s),s}LMe(t=>({...t,get:(e,n,r)=>VZ(e,n)||t.get(e,n,r),has:(e,n)=>!!VZ(e,n)||t.has(e,n)}));class zMe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GMe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GMe(t){return t.getComponent()?.type==="VERSION"}const m8="@firebase/app",zZ="0.14.6";const gp=new iU("@firebase/app"),UMe="@firebase/app-compat",BMe="@firebase/analytics-compat",WMe="@firebase/analytics",HMe="@firebase/app-check-compat",qMe="@firebase/app-check",KMe="@firebase/auth",YMe="@firebase/auth-compat",XMe="@firebase/database",ZMe="@firebase/data-connect",JMe="@firebase/database-compat",QMe="@firebase/functions",e3e="@firebase/functions-compat",t3e="@firebase/installations",n3e="@firebase/installations-compat",r3e="@firebase/messaging",i3e="@firebase/messaging-compat",s3e="@firebase/performance",o3e="@firebase/performance-compat",a3e="@firebase/remote-config",l3e="@firebase/remote-config-compat",c3e="@firebase/storage",u3e="@firebase/storage-compat",h3e="@firebase/firestore",d3e="@firebase/ai",f3e="@firebase/firestore-compat",p3e="firebase",m3e="12.6.0";const g8="[DEFAULT]",g3e={[m8]:"fire-core",[UMe]:"fire-core-compat",[WMe]:"fire-analytics",[BMe]:"fire-analytics-compat",[qMe]:"fire-app-check",[HMe]:"fire-app-check-compat",[KMe]:"fire-auth",[YMe]:"fire-auth-compat",[XMe]:"fire-rtdb",[ZMe]:"fire-data-connect",[JMe]:"fire-rtdb-compat",[QMe]:"fire-fn",[e3e]:"fire-fn-compat",[t3e]:"fire-iid",[n3e]:"fire-iid-compat",[r3e]:"fire-fcm",[i3e]:"fire-fcm-compat",[s3e]:"fire-perf",[o3e]:"fire-perf-compat",[a3e]:"fire-rc",[l3e]:"fire-rc-compat",[c3e]:"fire-gcs",[u3e]:"fire-gcs-compat",[h3e]:"fire-fst",[f3e]:"fire-fst-compat",[d3e]:"fire-vertex","fire-js":"fire-js",[p3e]:"fire-js-all"};const l4=new Map,y3e=new Map,y8=new Map;function GZ(t,e){try{t.container.addComponent(e)}catch(n){gp.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function R1(t){const e=t.name;if(y8.has(e))return gp.debug(`There were multiple attempts to register component ${e}.`),!1;y8.set(e,t);for(const n of l4.values())GZ(n,t);for(const n of y3e.values())GZ(n,t);return!0}function Y5(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cc(t){return t==null?!1:t.settings!==void 0}const v3e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wg=new ZA("app","Firebase",v3e);class _3e{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dg("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wg.create("app-deleted",{appName:this._name})}}const fv=m3e;function Xce(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:g8,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw wg.create("bad-app-name",{appName:String(i)});if(n||(n=zce()),!n)throw wg.create("no-options");const s=l4.get(i);if(s){if(C1(n,s.options)&&C1(r,s.config))return s;throw wg.create("duplicate-app",{appName:i})}const o=new TMe(i);for(const l of y8.values())o.addComponent(l);const a=new _3e(n,r,o);return l4.set(i,a),a}function oU(t=g8){const e=l4.get(t);if(!e&&t===g8&&zce())return Xce();if(!e)throw wg.create("no-app",{appName:t});return e}function wd(t,e,n){let r=g3e[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gp.warn(o.join(" "));return}R1(new Dg(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const x3e="firebase-heartbeat-database",w3e=1,Ak="firebase-heartbeat-store";let hj=null;function Zce(){return hj||(hj=$Me(x3e,w3e,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ak)}catch(n){console.warn(n)}}}}).catch(t=>{throw wg.create("idb-open",{originalErrorMessage:t.message})})),hj}async function b3e(t){try{const n=(await Zce()).transaction(Ak),r=await n.objectStore(Ak).get(Jce(t));return await n.done,r}catch(e){if(e instanceof Hd)gp.warn(e.message);else{const n=wg.create("idb-get",{originalErrorMessage:e?.message});gp.warn(n.message)}}}async function UZ(t,e){try{const r=(await Zce()).transaction(Ak,"readwrite");await r.objectStore(Ak).put(e,Jce(t)),await r.done}catch(n){if(n instanceof Hd)gp.warn(n.message);else{const r=wg.create("idb-set",{originalErrorMessage:n?.message});gp.warn(r.message)}}}function Jce(t){return`${t.name}!${t.options.appId}`}const E3e=1024,S3e=30;class T3e{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new A3e(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=BZ();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>S3e){const i=I3e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){gp.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=BZ(),{heartbeatsToSend:n,unsentEntries:r}=k3e(this._heartbeatsCache.heartbeats),i=a4(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return gp.warn(e),""}}}function BZ(){return new Date().toISOString().substring(0,10)}function k3e(t,e=E3e){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),WZ(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),WZ(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class A3e{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qce()?pMe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await b3e(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return UZ(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return UZ(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function WZ(t){return a4(JSON.stringify({version:2,heartbeats:t})).length}function I3e(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function P3e(t){R1(new Dg("platform-logger",e=>new zMe(e),"PRIVATE")),R1(new Dg("heartbeat",e=>new T3e(e),"PRIVATE")),wd(m8,zZ,t),wd(m8,zZ,"esm2020"),wd("fire-js","")}P3e("");function Qce(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const C3e=Qce,eue=new ZA("auth","Firebase",Qce());const c4=new iU("@firebase/auth");function R3e(t,...e){c4.logLevel<=tr.WARN&&c4.warn(`Auth (${fv}): ${t}`,...e)}function rM(t,...e){c4.logLevel<=tr.ERROR&&c4.error(`Auth (${fv}): ${t}`,...e)}function Nd(t,...e){throw lU(t,...e)}function dh(t,...e){return lU(t,...e)}function aU(t,e,n){const r={...C3e(),[e]:n};return new ZA("auth","Firebase",r).create(e,{appName:t.name})}function bg(t){return aU(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function M3e(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Nd(t,"argument-error"),aU(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lU(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return eue.create(t,...e)}function In(t,e,...n){if(!t)throw lU(e,...n)}function Kf(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rM(e),new Error(e)}function yp(t,e){t||Kf(e)}function v8(){return typeof self<"u"&&self.location?.href||""}function N3e(){return HZ()==="http:"||HZ()==="https:"}function HZ(){return typeof self<"u"&&self.location?.protocol||null}function O3e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(N3e()||hMe()||"connection"in navigator)?navigator.onLine:!0}function L3e(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class QA{constructor(e,n){this.shortDelay=e,this.longDelay=n,yp(n>e,"Short delay should be less than long delay!"),this.isMobile=cMe()||dMe()}get(){return O3e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function cU(t,e){yp(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class tue{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const D3e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const j3e=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$3e=new QA(3e4,6e4);function X5(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function rb(t,e,n,r,i={}){return nue(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=JA({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:l,...s};return uMe()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&dv(t.emulatorConfig.host)&&(c.credentials="include"),tue.fetch()(await iue(t,t.config.apiHost,n,a),c)})}async function nue(t,e,n){t._canInitEmulator=!1;const r={...D3e,...e};try{const i=new F3e(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw SC(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw SC(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw SC(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw SC(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw aU(t,u,c);Nd(t,u)}}catch(i){if(i instanceof Hd)throw i;Nd(t,"network-request-failed",{message:String(i)})}}async function rue(t,e,n,r,i={}){const s=await rb(t,e,n,r,i);return"mfaPendingCredential"in s&&Nd(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function iue(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?cU(t.config,i):`${t.config.apiScheme}://${i}`;return j3e.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class F3e{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dh(this.auth,"network-request-failed")),$3e.get())})}}function SC(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=dh(t,e,r);return i.customData._tokenResponse=n,i}async function V3e(t,e){return rb(t,"POST","/v1/accounts:delete",e)}async function u4(t,e){return rb(t,"POST","/v1/accounts:lookup",e)}function sT(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function z3e(t,e=!1){const n=mo(t),r=await n.getIdToken(e),i=uU(r);In(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:sT(dj(i.auth_time)),issuedAtTime:sT(dj(i.iat)),expirationTime:sT(dj(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function dj(t){return Number(t)*1e3}function uU(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rM("JWT malformed, contained fewer than 3 sections"),null;try{const i=jce(n);return i?JSON.parse(i):(rM("Failed to decode base64 JWT payload"),null)}catch(i){return rM("Caught error parsing JWT payload as JSON",i?.toString()),null}}function qZ(t){const e=uU(t);return In(e,"internal-error"),In(typeof e.exp<"u","internal-error"),In(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ik(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hd&&G3e(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function G3e({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class U3e{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class _8{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sT(this.lastLoginAt),this.creationTime=sT(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function h4(t){const e=t.auth,n=await t.getIdToken(),r=await Ik(t,u4(e,{idToken:n}));In(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=i.providerUserInfo?.length?sue(i.providerUserInfo):[],o=W3e(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!o?.length,c=a?l:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new _8(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,u)}async function B3e(t){const e=mo(t);await h4(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function W3e(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function sue(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function H3e(t,e){const n=await nue(t,{},async()=>{const r=JA({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await iue(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&dv(t.emulatorConfig.host)&&(l.credentials="include"),tue.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function q3e(t,e){return rb(t,"POST","/v2/accounts:revokeToken",X5(t,e))}class tw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){In(e.idToken,"internal-error"),In(typeof e.idToken<"u","internal-error"),In(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qZ(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){In(e.length!==0,"internal-error");const n=qZ(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(In(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await H3e(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new tw;return r&&(In(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(In(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(In(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tw,this.toJSON())}_performRefresh(){return Kf("not implemented")}}function am(t,e){In(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ah{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new U3e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new _8(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ik(this,this.stsTokenManager.getToken(this.auth,e));return In(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return z3e(this,e)}reload(){return B3e(this)}_assign(e){this!==e&&(In(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ah({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){In(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await h4(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cc(this.auth.app))return Promise.reject(bg(this.auth));const e=await this.getIdToken();return await Ik(this,V3e(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,c=n.createdAt??void 0,u=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:g,providerData:y,stsTokenManager:_}=n;In(h&&_,e,"internal-error");const b=tw.fromJSON(this.name,_);In(typeof h=="string",e,"internal-error"),am(r,e.name),am(i,e.name),In(typeof f=="boolean",e,"internal-error"),In(typeof g=="boolean",e,"internal-error"),am(s,e.name),am(o,e.name),am(a,e.name),am(l,e.name),am(c,e.name),am(u,e.name);const T=new ah({uid:h,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:b,createdAt:c,lastLoginAt:u});return y&&Array.isArray(y)&&(T.providerData=y.map(A=>({...A}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new tw;i.updateFromServerResponse(n);const s=new ah({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await h4(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];In(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?sue(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new tw;a.updateFromIdToken(r);const l=new ah({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _8(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,c),l}}const KZ=new Map;function Yf(t){yp(t instanceof Function,"Expected a class definition");let e=KZ.get(t);return e?(yp(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,KZ.set(t,e),e)}class oue{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oue.type="NONE";const YZ=oue;function iM(t,e,n){return`firebase:${t}:${e}:${n}`}class nw{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=iM(this.userKey,i.apiKey,s),this.fullPersistenceKey=iM("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await u4(this.auth,{idToken:e}).catch(()=>{});return n?ah._fromGetAccountInfoResponse(this.auth,n,e):null}return ah._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new nw(Yf(YZ),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Yf(YZ);const o=iM(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){let h;if(typeof u=="string"){const f=await u4(e,{idToken:u}).catch(()=>{});if(!f)break;h=await ah._fromGetAccountInfoResponse(e,f,u)}else h=ah._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new nw(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new nw(s,e,r))}}function XZ(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uue(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aue(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(due(e))return"Blackberry";if(fue(e))return"Webos";if(lue(e))return"Safari";if((e.includes("chrome/")||cue(e))&&!e.includes("edge/"))return"Chrome";if(hue(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function aue(t=Ks()){return/firefox\//i.test(t)}function lue(t=Ks()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cue(t=Ks()){return/crios\//i.test(t)}function uue(t=Ks()){return/iemobile/i.test(t)}function hue(t=Ks()){return/android/i.test(t)}function due(t=Ks()){return/blackberry/i.test(t)}function fue(t=Ks()){return/webos/i.test(t)}function hU(t=Ks()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function K3e(t=Ks()){return hU(t)&&!!window.navigator?.standalone}function Y3e(){return fMe()&&document.documentMode===10}function pue(t=Ks()){return hU(t)||hue(t)||fue(t)||due(t)||/windows phone/i.test(t)||uue(t)}function mue(t,e=[]){let n;switch(t){case"Browser":n=XZ(Ks());break;case"Worker":n=`${XZ(Ks())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fv}/${r}`}class X3e{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function Z3e(t,e={}){return rb(t,"GET","/v2/passwordPolicy",X5(t,e))}const J3e=6;class Q3e{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??J3e,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class e4e{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ZZ(this),this.idTokenSubscription=new ZZ(this),this.beforeStateQueue=new X3e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eue,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yf(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await nw.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await u4(this,{idToken:e}),r=await ah._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(cc(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return In(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await h4(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L3e()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cc(this.app))return Promise.reject(bg(this));const n=e?mo(e):null;return n&&In(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&In(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cc(this.app)?Promise.reject(bg(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cc(this.app)?Promise.reject(bg(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yf(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Z3e(this),n=new Q3e(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ZA("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await q3e(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yf(e)||this._popupRedirectResolver;In(n,this,"argument-error"),this.redirectPersistenceManager=await nw.create(this,[Yf(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(In(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return In(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mue(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(cc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&R3e(`Error while retrieving App Check token: ${e.error}`),e?.token}}function eI(t){return mo(t)}class ZZ{constructor(e){this.auth=e,this.observer=null,this.addObserver=_Me(n=>this.observer=n)}get next(){return In(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let dU={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t4e(t){dU=t}function n4e(t){return dU.loadJS(t)}function r4e(){return dU.gapiScript}function i4e(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function s4e(t,e){const n=Y5(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(C1(s,e??{}))return i;Nd(i,"already-initialized")}return n.initialize({options:e})}function o4e(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Yf);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function a4e(t,e,n){const r=eI(t);In(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=gue(e),{host:o,port:a}=l4e(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){In(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),In(C1(c,r.config.emulator)&&C1(u,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,dv(o)?(nU(`${s}//${o}${l}`),rU("Auth",!0)):c4e()}function gue(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function l4e(t){const e=gue(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:JZ(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:JZ(o)}}}function JZ(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function c4e(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class yue{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kf("not implemented")}_getIdTokenResponse(e){return Kf("not implemented")}_linkToIdToken(e,n){return Kf("not implemented")}_getReauthenticationResolver(e){return Kf("not implemented")}}async function rw(t,e){return rue(t,"POST","/v1/accounts:signInWithIdp",X5(t,e))}const u4e="http://localhost";class M1 extends yue{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new M1(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Nd("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new M1(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return rw(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,rw(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,rw(e,n)}buildRequest(){const e={requestUri:u4e,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=JA(n)}return e}}class fU{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class tI extends fU{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Wm extends tI{constructor(){super("facebook.com")}static credential(e){return M1._fromParams({providerId:Wm.PROVIDER_ID,signInMethod:Wm.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wm.credentialFromTaggedObject(e)}static credentialFromError(e){return Wm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wm.credential(e.oauthAccessToken)}catch{return null}}}Wm.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wm.PROVIDER_ID="facebook.com";class eh extends tI{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return M1._fromParams({providerId:eh.PROVIDER_ID,signInMethod:eh.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return eh.credentialFromTaggedObject(e)}static credentialFromError(e){return eh.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return eh.credential(n,r)}catch{return null}}}eh.GOOGLE_SIGN_IN_METHOD="google.com";eh.PROVIDER_ID="google.com";class Hm extends tI{constructor(){super("github.com")}static credential(e){return M1._fromParams({providerId:Hm.PROVIDER_ID,signInMethod:Hm.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hm.credentialFromTaggedObject(e)}static credentialFromError(e){return Hm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hm.credential(e.oauthAccessToken)}catch{return null}}}Hm.GITHUB_SIGN_IN_METHOD="github.com";Hm.PROVIDER_ID="github.com";class qm extends tI{constructor(){super("twitter.com")}static credential(e,n){return M1._fromParams({providerId:qm.PROVIDER_ID,signInMethod:qm.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qm.credentialFromTaggedObject(e)}static credentialFromError(e){return qm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return qm.credential(n,r)}catch{return null}}}qm.TWITTER_SIGN_IN_METHOD="twitter.com";qm.PROVIDER_ID="twitter.com";async function h4e(t,e){return rue(t,"POST","/v1/accounts:signUp",X5(t,e))}class jg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ah._fromIdTokenResponse(e,r,i),o=QZ(r);return new jg({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=QZ(r);return new jg({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function QZ(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function d4e(t){if(cc(t.app))return Promise.reject(bg(t));const e=eI(t);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new jg({user:e.currentUser,providerId:null,operationType:"signIn"});const n=await h4e(e,{returnSecureToken:!0}),r=await jg._fromIdTokenResponse(e,"signIn",n,!0);return await e._updateCurrentUser(r.user),r}class d4 extends Hd{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,d4.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new d4(e,n,r,i)}}function vue(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?d4._fromErrorAndOperation(t,s,e,r):s})}async function f4e(t,e,n=!1){const r=await Ik(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return jg._forOperation(t,"link",r)}async function p4e(t,e,n=!1){const{auth:r}=t;if(cc(r.app))return Promise.reject(bg(r));const i="reauthenticate";try{const s=await Ik(t,vue(r,i,e,t),n);In(s.idToken,r,"internal-error");const o=uU(s.idToken);In(o,r,"internal-error");const{sub:a}=o;return In(t.uid===a,r,"user-mismatch"),jg._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Nd(r,"user-mismatch"),s}}async function m4e(t,e,n=!1){if(cc(t.app))return Promise.reject(bg(t));const r="signIn",i=await vue(t,r,e),s=await jg._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function g4e(t,e,n,r){return mo(t).onIdTokenChanged(e,n,r)}function y4e(t,e,n){return mo(t).beforeAuthStateChanged(e,n)}function _ue(t,e,n,r){return mo(t).onAuthStateChanged(e,n,r)}function xue(t){return mo(t).signOut()}const f4="__sak";class wue{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(f4,"1"),this.storage.removeItem(f4),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const v4e=1e3,_4e=10;class bue extends wue{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pue(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Y3e()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_4e):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},v4e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}bue.type="LOCAL";const x4e=bue;class Eue extends wue{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Eue.type="SESSION";const Sue=Eue;function w4e(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Z5{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Z5(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await w4e(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Z5.receivers=[];function pU(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class b4e{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=pU("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function bd(){return window}function E4e(t){bd().location.href=t}function Tue(){return typeof bd().WorkerGlobalScope<"u"&&typeof bd().importScripts=="function"}async function S4e(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function T4e(){return navigator?.serviceWorker?.controller||null}function k4e(){return Tue()?self:null}const kue="firebaseLocalStorageDb",A4e=1,p4="firebaseLocalStorage",Aue="fbase_key";class nI{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function J5(t,e){return t.transaction([p4],e?"readwrite":"readonly").objectStore(p4)}function I4e(){const t=indexedDB.deleteDatabase(kue);return new nI(t).toPromise()}function x8(){const t=indexedDB.open(kue,A4e);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(p4,{keyPath:Aue})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(p4)?e(r):(r.close(),await I4e(),e(await x8()))})})}async function eJ(t,e,n){const r=J5(t,!0).put({[Aue]:e,value:n});return new nI(r).toPromise()}async function P4e(t,e){const n=J5(t,!1).get(e),r=await new nI(n).toPromise();return r===void 0?null:r.value}function tJ(t,e){const n=J5(t,!0).delete(e);return new nI(n).toPromise()}const C4e=800,R4e=3;class Iue{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await x8(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>R4e)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tue()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Z5._getInstance(k4e()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await S4e(),!this.activeServiceWorker)return;this.sender=new b4e(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||T4e()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await x8();return await eJ(e,f4,"1"),await tJ(e,f4),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>eJ(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>P4e(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>tJ(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=J5(i,!1).getAll();return new nI(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),C4e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Iue.type="LOCAL";const M4e=Iue;new QA(3e4,6e4);function Pue(t,e){return e?Yf(e):(In(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class mU extends yue{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rw(e,this._buildIdpRequest())}_linkToIdToken(e,n){return rw(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return rw(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function N4e(t){return m4e(t.auth,new mU(t),t.bypassAuthState)}function O4e(t){const{auth:e,user:n}=t;return In(n,e,"internal-error"),p4e(n,new mU(t),t.bypassAuthState)}async function L4e(t){const{auth:e,user:n}=t;return In(n,e,"internal-error"),f4e(n,new mU(t),t.bypassAuthState)}class Cue{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return N4e;case"linkViaPopup":case"linkViaRedirect":return L4e;case"reauthViaPopup":case"reauthViaRedirect":return O4e;default:Nd(this.auth,"internal-error")}}resolve(e){yp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const D4e=new QA(2e3,1e4);async function nJ(t,e,n){if(cc(t.app))return Promise.reject(dh(t,"operation-not-supported-in-this-environment"));const r=eI(t);M3e(t,e,fU);const i=Pue(r,n);return new Fy(r,"signInViaPopup",e,i).executeNotNull()}class Fy extends Cue{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Fy.currentPopupAction&&Fy.currentPopupAction.cancel(),Fy.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return In(e,this.auth,"internal-error"),e}async onExecution(){yp(this.filter.length===1,"Popup operations only handle one event");const e=pU();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dh(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(dh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fy.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dh(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,D4e.get())};e()}}Fy.currentPopupAction=null;const j4e="pendingRedirect",sM=new Map;class $4e extends Cue{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sM.get(this.auth._key());if(!e){try{const r=await F4e(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sM.set(this.auth._key(),e)}return this.bypassAuthState||sM.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function F4e(t,e){const n=G4e(e),r=z4e(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function V4e(t,e){sM.set(t._key(),e)}function z4e(t){return Yf(t._redirectPersistence)}function G4e(t){return iM(j4e,t.config.apiKey,t.name)}async function U4e(t,e,n=!1){if(cc(t.app))return Promise.reject(bg(t));const r=eI(t),i=Pue(r,e),o=await new $4e(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const B4e=600*1e3;class W4e{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!H4e(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Rue(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(dh(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=B4e&&this.cachedEventUids.clear(),this.cachedEventUids.has(rJ(e))}saveEventToCache(e){this.cachedEventUids.add(rJ(e)),this.lastProcessedEventTime=Date.now()}}function rJ(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Rue({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function H4e(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rue(t);default:return!1}}async function q4e(t,e={}){return rb(t,"GET","/v1/projects",e)}const K4e=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Y4e=/^https?/;async function X4e(t){if(t.config.emulator)return;const{authorizedDomains:e}=await q4e(t);for(const n of e)try{if(Z4e(n))return}catch{}Nd(t,"unauthorized-domain")}function Z4e(t){const e=v8(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Y4e.test(n))return!1;if(K4e.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const J4e=new QA(3e4,6e4);function iJ(){const t=bd().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Q4e(t){return new Promise((e,n)=>{function r(){iJ(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iJ(),n(dh(t,"network-request-failed"))},timeout:J4e.get()})}if(bd().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(bd().gapi?.load)r();else{const i=i4e("iframefcb");return bd()[i]=()=>{gapi.load?r():n(dh(t,"network-request-failed"))},n4e(`${r4e()}?onload=${i}`).catch(s=>n(s))}}).catch(e=>{throw oM=null,e})}let oM=null;function eNe(t){return oM=oM||Q4e(t),oM}const tNe=new QA(5e3,15e3),nNe="__/auth/iframe",rNe="emulator/auth/iframe",iNe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sNe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oNe(t){const e=t.config;In(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cU(e,rNe):`https://${t.config.authDomain}/${nNe}`,r={apiKey:e.apiKey,appName:t.name,v:fv},i=sNe.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${JA(r).slice(1)}`}async function aNe(t){const e=await eNe(t),n=bd().gapi;return In(n,t,"internal-error"),e.open({where:document.body,url:oNe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iNe,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=dh(t,"network-request-failed"),a=bd().setTimeout(()=>{s(o)},tNe.get());function l(){bd().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}const lNe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cNe=500,uNe=600,hNe="_blank",dNe="http://localhost";class sJ{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fNe(t,e,n,r=cNe,i=uNe){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...lNe,width:r.toString(),height:i.toString(),top:s,left:o},c=Ks().toLowerCase();n&&(a=cue(c)?hNe:n),aue(c)&&(e=e||dNe,l.scrollbars="yes");const u=Object.entries(l).reduce((f,[g,y])=>`${f}${g}=${y},`,"");if(K3e(c)&&a!=="_self")return pNe(e||"",a),new sJ(null);const h=window.open(e||"",a,u);In(h,t,"popup-blocked");try{h.focus()}catch{}return new sJ(h)}function pNe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const mNe="__/auth/handler",gNe="emulator/auth/handler",yNe=encodeURIComponent("fac");async function oJ(t,e,n,r,i,s){In(t.config.authDomain,t,"auth-domain-config-required"),In(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:fv,eventId:i};if(e instanceof fU){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",vMe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries({}))o[u]=h}if(e instanceof tI){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${yNe}=${encodeURIComponent(l)}`:"";return`${vNe(t)}?${JA(a).slice(1)}${c}`}function vNe({config:t}){return t.emulator?cU(t,gNe):`https://${t.authDomain}/${mNe}`}const fj="webStorageSupport";class _Ne{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sue,this._completeRedirectFn=U4e,this._overrideRedirectResult=V4e}async _openPopup(e,n,r,i){yp(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await oJ(e,n,r,v8(),i);return fNe(e,s,pU())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await oJ(e,n,r,v8(),i);return E4e(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(yp(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await aNe(e),r=new W4e(e);return n.register("authEvent",i=>(In(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fj,{type:fj},i=>{const s=i?.[0]?.[fj];s!==void 0&&n(!!s),Nd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=X4e(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pue()||lue()||hU()}}const xNe=_Ne;var aJ="@firebase/auth",lJ="1.12.0";class wNe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){In(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bNe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ENe(t){R1(new Dg("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;In(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mue(t)},c=new e4e(r,i,s,l);return o4e(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),R1(new Dg("auth-internal",e=>{const n=eI(e.getProvider("auth").getImmediate());return(r=>new wNe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wd(aJ,lJ,bNe(t)),wd(aJ,lJ,"esm2020")}const SNe=300,TNe=Gce("authIdTokenMaxAge")||SNe;let cJ=null;const kNe=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>TNe)return;const i=n?.token;cJ!==i&&(cJ=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ANe(t=oU()){const e=Y5(t,"auth");if(e.isInitialized())return e.getImmediate();const n=s4e(t,{popupRedirectResolver:xNe,persistence:[M4e,x4e,Sue]}),r=Gce("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=kNe(s.toString());y4e(n,o,()=>o(n.currentUser)),g4e(n,a=>o(a))}}const i=Fce("auth");return i&&a4e(n,`http://${i}`),n}function INe(){return document.getElementsByTagName("head")?.[0]??document}t4e({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=dh("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",INe().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ENe("Browser");var PNe="firebase",CNe="12.7.0";wd(PNe,CNe,"app");var uJ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Eg,Mue;(function(){var t;function e(C,M){function O(){}O.prototype=M.prototype,C.F=M.prototype,C.prototype=new O,C.prototype.constructor=C,C.D=function(D,V,U){for(var G=Array(arguments.length-2),de=2;de<arguments.length;de++)G[de-2]=arguments[de];return M.prototype[V].apply(D,G)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,M,O){O||(O=0);const D=Array(16);if(typeof M=="string")for(var V=0;V<16;++V)D[V]=M.charCodeAt(O++)|M.charCodeAt(O++)<<8|M.charCodeAt(O++)<<16|M.charCodeAt(O++)<<24;else for(V=0;V<16;++V)D[V]=M[O++]|M[O++]<<8|M[O++]<<16|M[O++]<<24;M=C.g[0],O=C.g[1],V=C.g[2];let U=C.g[3],G;G=M+(U^O&(V^U))+D[0]+3614090360&4294967295,M=O+(G<<7&4294967295|G>>>25),G=U+(V^M&(O^V))+D[1]+3905402710&4294967295,U=M+(G<<12&4294967295|G>>>20),G=V+(O^U&(M^O))+D[2]+606105819&4294967295,V=U+(G<<17&4294967295|G>>>15),G=O+(M^V&(U^M))+D[3]+3250441966&4294967295,O=V+(G<<22&4294967295|G>>>10),G=M+(U^O&(V^U))+D[4]+4118548399&4294967295,M=O+(G<<7&4294967295|G>>>25),G=U+(V^M&(O^V))+D[5]+1200080426&4294967295,U=M+(G<<12&4294967295|G>>>20),G=V+(O^U&(M^O))+D[6]+2821735955&4294967295,V=U+(G<<17&4294967295|G>>>15),G=O+(M^V&(U^M))+D[7]+4249261313&4294967295,O=V+(G<<22&4294967295|G>>>10),G=M+(U^O&(V^U))+D[8]+1770035416&4294967295,M=O+(G<<7&4294967295|G>>>25),G=U+(V^M&(O^V))+D[9]+2336552879&4294967295,U=M+(G<<12&4294967295|G>>>20),G=V+(O^U&(M^O))+D[10]+4294925233&4294967295,V=U+(G<<17&4294967295|G>>>15),G=O+(M^V&(U^M))+D[11]+2304563134&4294967295,O=V+(G<<22&4294967295|G>>>10),G=M+(U^O&(V^U))+D[12]+1804603682&4294967295,M=O+(G<<7&4294967295|G>>>25),G=U+(V^M&(O^V))+D[13]+4254626195&4294967295,U=M+(G<<12&4294967295|G>>>20),G=V+(O^U&(M^O))+D[14]+2792965006&4294967295,V=U+(G<<17&4294967295|G>>>15),G=O+(M^V&(U^M))+D[15]+1236535329&4294967295,O=V+(G<<22&4294967295|G>>>10),G=M+(V^U&(O^V))+D[1]+4129170786&4294967295,M=O+(G<<5&4294967295|G>>>27),G=U+(O^V&(M^O))+D[6]+3225465664&4294967295,U=M+(G<<9&4294967295|G>>>23),G=V+(M^O&(U^M))+D[11]+643717713&4294967295,V=U+(G<<14&4294967295|G>>>18),G=O+(U^M&(V^U))+D[0]+3921069994&4294967295,O=V+(G<<20&4294967295|G>>>12),G=M+(V^U&(O^V))+D[5]+3593408605&4294967295,M=O+(G<<5&4294967295|G>>>27),G=U+(O^V&(M^O))+D[10]+38016083&4294967295,U=M+(G<<9&4294967295|G>>>23),G=V+(M^O&(U^M))+D[15]+3634488961&4294967295,V=U+(G<<14&4294967295|G>>>18),G=O+(U^M&(V^U))+D[4]+3889429448&4294967295,O=V+(G<<20&4294967295|G>>>12),G=M+(V^U&(O^V))+D[9]+568446438&4294967295,M=O+(G<<5&4294967295|G>>>27),G=U+(O^V&(M^O))+D[14]+3275163606&4294967295,U=M+(G<<9&4294967295|G>>>23),G=V+(M^O&(U^M))+D[3]+4107603335&4294967295,V=U+(G<<14&4294967295|G>>>18),G=O+(U^M&(V^U))+D[8]+1163531501&4294967295,O=V+(G<<20&4294967295|G>>>12),G=M+(V^U&(O^V))+D[13]+2850285829&4294967295,M=O+(G<<5&4294967295|G>>>27),G=U+(O^V&(M^O))+D[2]+4243563512&4294967295,U=M+(G<<9&4294967295|G>>>23),G=V+(M^O&(U^M))+D[7]+1735328473&4294967295,V=U+(G<<14&4294967295|G>>>18),G=O+(U^M&(V^U))+D[12]+2368359562&4294967295,O=V+(G<<20&4294967295|G>>>12),G=M+(O^V^U)+D[5]+4294588738&4294967295,M=O+(G<<4&4294967295|G>>>28),G=U+(M^O^V)+D[8]+2272392833&4294967295,U=M+(G<<11&4294967295|G>>>21),G=V+(U^M^O)+D[11]+1839030562&4294967295,V=U+(G<<16&4294967295|G>>>16),G=O+(V^U^M)+D[14]+4259657740&4294967295,O=V+(G<<23&4294967295|G>>>9),G=M+(O^V^U)+D[1]+2763975236&4294967295,M=O+(G<<4&4294967295|G>>>28),G=U+(M^O^V)+D[4]+1272893353&4294967295,U=M+(G<<11&4294967295|G>>>21),G=V+(U^M^O)+D[7]+4139469664&4294967295,V=U+(G<<16&4294967295|G>>>16),G=O+(V^U^M)+D[10]+3200236656&4294967295,O=V+(G<<23&4294967295|G>>>9),G=M+(O^V^U)+D[13]+681279174&4294967295,M=O+(G<<4&4294967295|G>>>28),G=U+(M^O^V)+D[0]+3936430074&4294967295,U=M+(G<<11&4294967295|G>>>21),G=V+(U^M^O)+D[3]+3572445317&4294967295,V=U+(G<<16&4294967295|G>>>16),G=O+(V^U^M)+D[6]+76029189&4294967295,O=V+(G<<23&4294967295|G>>>9),G=M+(O^V^U)+D[9]+3654602809&4294967295,M=O+(G<<4&4294967295|G>>>28),G=U+(M^O^V)+D[12]+3873151461&4294967295,U=M+(G<<11&4294967295|G>>>21),G=V+(U^M^O)+D[15]+530742520&4294967295,V=U+(G<<16&4294967295|G>>>16),G=O+(V^U^M)+D[2]+3299628645&4294967295,O=V+(G<<23&4294967295|G>>>9),G=M+(V^(O|~U))+D[0]+4096336452&4294967295,M=O+(G<<6&4294967295|G>>>26),G=U+(O^(M|~V))+D[7]+1126891415&4294967295,U=M+(G<<10&4294967295|G>>>22),G=V+(M^(U|~O))+D[14]+2878612391&4294967295,V=U+(G<<15&4294967295|G>>>17),G=O+(U^(V|~M))+D[5]+4237533241&4294967295,O=V+(G<<21&4294967295|G>>>11),G=M+(V^(O|~U))+D[12]+1700485571&4294967295,M=O+(G<<6&4294967295|G>>>26),G=U+(O^(M|~V))+D[3]+2399980690&4294967295,U=M+(G<<10&4294967295|G>>>22),G=V+(M^(U|~O))+D[10]+4293915773&4294967295,V=U+(G<<15&4294967295|G>>>17),G=O+(U^(V|~M))+D[1]+2240044497&4294967295,O=V+(G<<21&4294967295|G>>>11),G=M+(V^(O|~U))+D[8]+1873313359&4294967295,M=O+(G<<6&4294967295|G>>>26),G=U+(O^(M|~V))+D[15]+4264355552&4294967295,U=M+(G<<10&4294967295|G>>>22),G=V+(M^(U|~O))+D[6]+2734768916&4294967295,V=U+(G<<15&4294967295|G>>>17),G=O+(U^(V|~M))+D[13]+1309151649&4294967295,O=V+(G<<21&4294967295|G>>>11),G=M+(V^(O|~U))+D[4]+4149444226&4294967295,M=O+(G<<6&4294967295|G>>>26),G=U+(O^(M|~V))+D[11]+3174756917&4294967295,U=M+(G<<10&4294967295|G>>>22),G=V+(M^(U|~O))+D[2]+718787259&4294967295,V=U+(G<<15&4294967295|G>>>17),G=O+(U^(V|~M))+D[9]+3951481745&4294967295,C.g[0]=C.g[0]+M&4294967295,C.g[1]=C.g[1]+(V+(G<<21&4294967295|G>>>11))&4294967295,C.g[2]=C.g[2]+V&4294967295,C.g[3]=C.g[3]+U&4294967295}r.prototype.v=function(C,M){M===void 0&&(M=C.length);const O=M-this.blockSize,D=this.C;let V=this.h,U=0;for(;U<M;){if(V==0)for(;U<=O;)i(this,C,U),U+=this.blockSize;if(typeof C=="string"){for(;U<M;)if(D[V++]=C.charCodeAt(U++),V==this.blockSize){i(this,D),V=0;break}}else for(;U<M;)if(D[V++]=C[U++],V==this.blockSize){i(this,D),V=0;break}}this.h=V,this.o+=M},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var M=1;M<C.length-8;++M)C[M]=0;M=this.o*8;for(var O=C.length-8;O<C.length;++O)C[O]=M&255,M/=256;for(this.v(C),C=Array(16),M=0,O=0;O<4;++O)for(let D=0;D<32;D+=8)C[M++]=this.g[O]>>>D&255;return C};function s(C,M){var O=a;return Object.prototype.hasOwnProperty.call(O,C)?O[C]:O[C]=M(C)}function o(C,M){this.h=M;const O=[];let D=!0;for(let V=C.length-1;V>=0;V--){const U=C[V]|0;D&&U==M||(O[V]=U,D=!1)}this.g=O}var a={};function l(C){return-128<=C&&C<128?s(C,function(M){return new o([M|0],M<0?-1:0)}):new o([C|0],C<0?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return h;if(C<0)return b(c(-C));const M=[];let O=1;for(let D=0;C>=O;D++)M[D]=C/O|0,O*=4294967296;return new o(M,0)}function u(C,M){if(C.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(C.charAt(0)=="-")return b(u(C.substring(1),M));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=c(Math.pow(M,8));let D=h;for(let U=0;U<C.length;U+=8){var V=Math.min(8,C.length-U);const G=parseInt(C.substring(U,U+V),M);V<8?(V=c(Math.pow(M,V)),D=D.j(V).add(c(G))):(D=D.j(O),D=D.add(c(G)))}return D}var h=l(0),f=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-b(this).m();let C=0,M=1;for(let O=0;O<this.g.length;O++){const D=this.i(O);C+=(D>=0?D:4294967296+D)*M,M*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(y(this))return"0";if(_(this))return"-"+b(this).toString(C);const M=c(Math.pow(C,6));var O=this;let D="";for(;;){const V=P(O,M).g;O=T(O,V.j(M));let U=((O.g.length>0?O.g[0]:O.h)>>>0).toString(C);if(O=V,y(O))return U+D;for(;U.length<6;)U="0"+U;D=U+D}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function y(C){if(C.h!=0)return!1;for(let M=0;M<C.g.length;M++)if(C.g[M]!=0)return!1;return!0}function _(C){return C.h==-1}t.l=function(C){return C=T(this,C),_(C)?-1:y(C)?0:1};function b(C){const M=C.g.length,O=[];for(let D=0;D<M;D++)O[D]=~C.g[D];return new o(O,~C.h).add(f)}t.abs=function(){return _(this)?b(this):this},t.add=function(C){const M=Math.max(this.g.length,C.g.length),O=[];let D=0;for(let V=0;V<=M;V++){let U=D+(this.i(V)&65535)+(C.i(V)&65535),G=(U>>>16)+(this.i(V)>>>16)+(C.i(V)>>>16);D=G>>>16,U&=65535,G&=65535,O[V]=G<<16|U}return new o(O,O[O.length-1]&-2147483648?-1:0)};function T(C,M){return C.add(b(M))}t.j=function(C){if(y(this)||y(C))return h;if(_(this))return _(C)?b(this).j(b(C)):b(b(this).j(C));if(_(C))return b(this.j(b(C)));if(this.l(g)<0&&C.l(g)<0)return c(this.m()*C.m());const M=this.g.length+C.g.length,O=[];for(var D=0;D<2*M;D++)O[D]=0;for(D=0;D<this.g.length;D++)for(let V=0;V<C.g.length;V++){const U=this.i(D)>>>16,G=this.i(D)&65535,de=C.i(V)>>>16,ke=C.i(V)&65535;O[2*D+2*V]+=G*ke,A(O,2*D+2*V),O[2*D+2*V+1]+=U*ke,A(O,2*D+2*V+1),O[2*D+2*V+1]+=G*de,A(O,2*D+2*V+1),O[2*D+2*V+2]+=U*de,A(O,2*D+2*V+2)}for(C=0;C<M;C++)O[C]=O[2*C+1]<<16|O[2*C];for(C=M;C<2*M;C++)O[C]=0;return new o(O,0)};function A(C,M){for(;(C[M]&65535)!=C[M];)C[M+1]+=C[M]>>>16,C[M]&=65535,M++}function I(C,M){this.g=C,this.h=M}function P(C,M){if(y(M))throw Error("division by zero");if(y(C))return new I(h,h);if(_(C))return M=P(b(C),M),new I(b(M.g),b(M.h));if(_(M))return M=P(C,b(M)),new I(b(M.g),M.h);if(C.g.length>30){if(_(C)||_(M))throw Error("slowDivide_ only works with positive integers.");for(var O=f,D=M;D.l(C)<=0;)O=N(O),D=N(D);var V=L(O,1),U=L(D,1);for(D=L(D,2),O=L(O,2);!y(D);){var G=U.add(D);G.l(C)<=0&&(V=V.add(O),U=G),D=L(D,1),O=L(O,1)}return M=T(C,V.j(M)),new I(V,M)}for(V=h;C.l(M)>=0;){for(O=Math.max(1,Math.floor(C.m()/M.m())),D=Math.ceil(Math.log(O)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),U=c(O),G=U.j(M);_(G)||G.l(C)>0;)O-=D,U=c(O),G=U.j(M);y(U)&&(U=f),V=V.add(U),C=T(C,G)}return new I(V,C)}t.B=function(C){return P(this,C).h},t.and=function(C){const M=Math.max(this.g.length,C.g.length),O=[];for(let D=0;D<M;D++)O[D]=this.i(D)&C.i(D);return new o(O,this.h&C.h)},t.or=function(C){const M=Math.max(this.g.length,C.g.length),O=[];for(let D=0;D<M;D++)O[D]=this.i(D)|C.i(D);return new o(O,this.h|C.h)},t.xor=function(C){const M=Math.max(this.g.length,C.g.length),O=[];for(let D=0;D<M;D++)O[D]=this.i(D)^C.i(D);return new o(O,this.h^C.h)};function N(C){const M=C.g.length+1,O=[];for(let D=0;D<M;D++)O[D]=C.i(D)<<1|C.i(D-1)>>>31;return new o(O,C.h)}function L(C,M){const O=M>>5;M%=32;const D=C.g.length-O,V=[];for(let U=0;U<D;U++)V[U]=M>0?C.i(U+O)>>>M|C.i(U+O+1)<<32-M:C.i(U+O);return new o(V,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Mue=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Eg=o}).apply(typeof uJ<"u"?uJ:typeof self<"u"?self:typeof window<"u"?window:{});var TC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Nue,lS,Oue,aM,w8,Lue,Due,jue;(function(){var t,e=Object.defineProperty;function n(S){S=[typeof globalThis=="object"&&globalThis,S,typeof window=="object"&&window,typeof self=="object"&&self,typeof TC=="object"&&TC];for(var F=0;F<S.length;++F){var B=S[F];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var r=n(this);function i(S,F){if(F)e:{var B=r;S=S.split(".");for(var Z=0;Z<S.length-1;Z++){var Ee=S[Z];if(!(Ee in B))break e;B=B[Ee]}S=S[S.length-1],Z=B[S],F=F(Z),F!=Z&&F!=null&&e(B,S,{configurable:!0,writable:!0,value:F})}}i("Symbol.dispose",function(S){return S||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(S){return S||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(S){return S||function(F){var B=[],Z;for(Z in F)Object.prototype.hasOwnProperty.call(F,Z)&&B.push([Z,F[Z]]);return B}});var s=s||{},o=this||self;function a(S){var F=typeof S;return F=="object"&&S!=null||F=="function"}function l(S,F,B){return S.call.apply(S.bind,arguments)}function c(S,F,B){return c=l,c.apply(null,arguments)}function u(S,F){var B=Array.prototype.slice.call(arguments,1);return function(){var Z=B.slice();return Z.push.apply(Z,arguments),S.apply(this,Z)}}function h(S,F){function B(){}B.prototype=F.prototype,S.Z=F.prototype,S.prototype=new B,S.prototype.constructor=S,S.Ob=function(Z,Ee,Fe){for(var wt=Array(arguments.length-2),On=2;On<arguments.length;On++)wt[On-2]=arguments[On];return F.prototype[Ee].apply(Z,wt)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?S=>S&&AsyncContext.Snapshot.wrap(S):S=>S;function g(S){const F=S.length;if(F>0){const B=Array(F);for(let Z=0;Z<F;Z++)B[Z]=S[Z];return B}return[]}function y(S,F){for(let Z=1;Z<arguments.length;Z++){const Ee=arguments[Z];var B=typeof Ee;if(B=B!="object"?B:Ee?Array.isArray(Ee)?"array":B:"null",B=="array"||B=="object"&&typeof Ee.length=="number"){B=S.length||0;const Fe=Ee.length||0;S.length=B+Fe;for(let wt=0;wt<Fe;wt++)S[B+wt]=Ee[wt]}else S.push(Ee)}}class _{constructor(F,B){this.i=F,this.j=B,this.h=0,this.g=null}get(){let F;return this.h>0?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function b(S){o.setTimeout(()=>{throw S},0)}function T(){var S=C;let F=null;return S.g&&(F=S.g,S.g=S.g.next,S.g||(S.h=null),F.next=null),F}class A{constructor(){this.h=this.g=null}add(F,B){const Z=I.get();Z.set(F,B),this.h?this.h.next=Z:this.g=Z,this.h=Z}}var I=new _(()=>new P,S=>S.reset());class P{constructor(){this.next=this.g=this.h=null}set(F,B){this.h=F,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let N,L=!1,C=new A,M=()=>{const S=Promise.resolve(void 0);N=()=>{S.then(O)}};function O(){for(var S;S=T();){try{S.h.call(S.g)}catch(B){b(B)}var F=I;F.j(S),F.h<100&&(F.h++,S.next=F.g,F.g=S)}L=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(S,F){this.type=S,this.g=this.target=F,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var S=!1,F=Object.defineProperty({},"passive",{get:function(){S=!0}});try{const B=()=>{};o.addEventListener("test",B,F),o.removeEventListener("test",B,F)}catch{}return S})();function G(S){return/^[\s\xa0]*$/.test(S)}function de(S,F){V.call(this,S?S.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,S&&this.init(S,F)}h(de,V),de.prototype.init=function(S,F){const B=this.type=S.type,Z=S.changedTouches&&S.changedTouches.length?S.changedTouches[0]:null;this.target=S.target||S.srcElement,this.g=F,F=S.relatedTarget,F||(B=="mouseover"?F=S.fromElement:B=="mouseout"&&(F=S.toElement)),this.relatedTarget=F,Z?(this.clientX=Z.clientX!==void 0?Z.clientX:Z.pageX,this.clientY=Z.clientY!==void 0?Z.clientY:Z.pageY,this.screenX=Z.screenX||0,this.screenY=Z.screenY||0):(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0),this.button=S.button,this.key=S.key||"",this.ctrlKey=S.ctrlKey,this.altKey=S.altKey,this.shiftKey=S.shiftKey,this.metaKey=S.metaKey,this.pointerId=S.pointerId||0,this.pointerType=S.pointerType,this.state=S.state,this.i=S,S.defaultPrevented&&de.Z.h.call(this)},de.prototype.h=function(){de.Z.h.call(this);const S=this.i;S.preventDefault?S.preventDefault():S.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),Ue=0;function Ne(S,F,B,Z,Ee){this.listener=S,this.proxy=null,this.src=F,this.type=B,this.capture=!!Z,this.ha=Ee,this.key=++Ue,this.da=this.fa=!1}function fe(S){S.da=!0,S.listener=null,S.proxy=null,S.src=null,S.ha=null}function De(S,F,B){for(const Z in S)F.call(B,S[Z],Z,S)}function Ce(S,F){for(const B in S)F.call(void 0,S[B],B,S)}function Q(S){const F={};for(const B in S)F[B]=S[B];return F}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(S,F){let B,Z;for(let Ee=1;Ee<arguments.length;Ee++){Z=arguments[Ee];for(B in Z)S[B]=Z[B];for(let Fe=0;Fe<W.length;Fe++)B=W[Fe],Object.prototype.hasOwnProperty.call(Z,B)&&(S[B]=Z[B])}}function ie(S){this.src=S,this.g={},this.h=0}ie.prototype.add=function(S,F,B,Z,Ee){const Fe=S.toString();S=this.g[Fe],S||(S=this.g[Fe]=[],this.h++);const wt=ve(S,F,Z,Ee);return wt>-1?(F=S[wt],B||(F.fa=!1)):(F=new Ne(F,this.src,Fe,!!Z,Ee),F.fa=B,S.push(F)),F};function le(S,F){const B=F.type;if(B in S.g){var Z=S.g[B],Ee=Array.prototype.indexOf.call(Z,F,void 0),Fe;(Fe=Ee>=0)&&Array.prototype.splice.call(Z,Ee,1),Fe&&(fe(F),S.g[B].length==0&&(delete S.g[B],S.h--))}}function ve(S,F,B,Z){for(let Ee=0;Ee<S.length;++Ee){const Fe=S[Ee];if(!Fe.da&&Fe.listener==F&&Fe.capture==!!B&&Fe.ha==Z)return Ee}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),Ke={};function Se(S,F,B,Z,Ee){if(Array.isArray(F)){for(let Fe=0;Fe<F.length;Fe++)Se(S,F[Fe],B,Z,Ee);return null}return B=hr(B),S&&S[ke]?S.J(F,B,a(Z)?!!Z.capture:!1,Ee):we(S,F,B,!1,Z,Ee)}function we(S,F,B,Z,Ee,Fe){if(!F)throw Error("Invalid event type");const wt=a(Ee)?!!Ee.capture:!!Ee;let On=_n(S);if(On||(S[qe]=On=new ie(S)),B=On.add(F,B,Z,wt,Fe),B.proxy)return B;if(Z=Dt(),B.proxy=Z,Z.src=S,Z.listener=B,S.addEventListener)U||(Ee=wt),Ee===void 0&&(Ee=!1),S.addEventListener(F.toString(),Z,Ee);else if(S.attachEvent)S.attachEvent(jt(F.toString()),Z);else if(S.addListener&&S.removeListener)S.addListener(Z);else throw Error("addEventListener and attachEvent are unavailable.");return B}function Dt(){function S(B){return F.call(S.src,S.listener,B)}const F=pn;return S}function Ye(S,F,B,Z,Ee){if(Array.isArray(F))for(var Fe=0;Fe<F.length;Fe++)Ye(S,F[Fe],B,Z,Ee);else Z=a(Z)?!!Z.capture:!!Z,B=hr(B),S&&S[ke]?(S=S.i,Fe=String(F).toString(),Fe in S.g&&(F=S.g[Fe],B=ve(F,B,Z,Ee),B>-1&&(fe(F[B]),Array.prototype.splice.call(F,B,1),F.length==0&&(delete S.g[Fe],S.h--)))):S&&(S=_n(S))&&(F=S.g[F.toString()],S=-1,F&&(S=ve(F,B,Z,Ee)),(B=S>-1?F[S]:null)&&on(B))}function on(S){if(typeof S!="number"&&S&&!S.da){var F=S.src;if(F&&F[ke])le(F.i,S);else{var B=S.type,Z=S.proxy;F.removeEventListener?F.removeEventListener(B,Z,S.capture):F.detachEvent?F.detachEvent(jt(B),Z):F.addListener&&F.removeListener&&F.removeListener(Z),(B=_n(F))?(le(B,S),B.h==0&&(B.src=null,F[qe]=null)):fe(S)}}}function jt(S){return S in Ke?Ke[S]:Ke[S]="on"+S}function pn(S,F){if(S.da)S=!0;else{F=new de(F,this);const B=S.listener,Z=S.ha||S.src;S.fa&&on(S),S=B.call(Z,F)}return S}function _n(S){return S=S[qe],S instanceof ie?S:null}var dt="__closure_events_fn_"+(Math.random()*1e9>>>0);function hr(S){return typeof S=="function"?S:(S[dt]||(S[dt]=function(F){return S.handleEvent(F)}),S[dt])}function zn(){D.call(this),this.i=new ie(this),this.M=this,this.G=null}h(zn,D),zn.prototype[ke]=!0,zn.prototype.removeEventListener=function(S,F,B,Z){Ye(this,S,F,B,Z)};function Hn(S,F){var B,Z=S.G;if(Z)for(B=[];Z;Z=Z.G)B.push(Z);if(S=S.M,Z=F.type||F,typeof F=="string")F=new V(F,S);else if(F instanceof V)F.target=F.target||S;else{var Ee=F;F=new V(Z,S),ne(F,Ee)}Ee=!0;let Fe,wt;if(B)for(wt=B.length-1;wt>=0;wt--)Fe=F.g=B[wt],Ee=ei(Fe,Z,!0,F)&&Ee;if(Fe=F.g=S,Ee=ei(Fe,Z,!0,F)&&Ee,Ee=ei(Fe,Z,!1,F)&&Ee,B)for(wt=0;wt<B.length;wt++)Fe=F.g=B[wt],Ee=ei(Fe,Z,!1,F)&&Ee}zn.prototype.N=function(){if(zn.Z.N.call(this),this.i){var S=this.i;for(const F in S.g){const B=S.g[F];for(let Z=0;Z<B.length;Z++)fe(B[Z]);delete S.g[F],S.h--}}this.G=null},zn.prototype.J=function(S,F,B,Z){return this.i.add(String(S),F,!1,B,Z)},zn.prototype.K=function(S,F,B,Z){return this.i.add(String(S),F,!0,B,Z)};function ei(S,F,B,Z){if(F=S.i.g[String(F)],!F)return!0;F=F.concat();let Ee=!0;for(let Fe=0;Fe<F.length;++Fe){const wt=F[Fe];if(wt&&!wt.da&&wt.capture==B){const On=wt.listener,os=wt.ha||wt.src;wt.fa&&le(S.i,wt),Ee=On.call(os,Z)!==!1&&Ee}}return Ee&&!Z.defaultPrevented}function _o(S,F){if(typeof S!="function")if(S&&typeof S.handleEvent=="function")S=c(S.handleEvent,S);else throw Error("Invalid listener argument");return Number(F)>2147483647?-1:o.setTimeout(S,F||0)}function Rr(S){S.g=_o(()=>{S.g=null,S.i&&(S.i=!1,Rr(S))},S.l);const F=S.h;S.h=null,S.m.apply(null,F)}class Ai extends D{constructor(F,B){super(),this.m=F,this.l=B,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:Rr(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ls(S){D.call(this),this.h=S,this.g={}}h(Ls,D);var _t=[];function Qn(S){De(S.g,function(F,B){this.g.hasOwnProperty(B)&&on(F)},S),S.g={}}Ls.prototype.N=function(){Ls.Z.N.call(this),Qn(this)},Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dr=o.JSON.stringify,Ft=o.JSON.parse,jn=class{stringify(S){return o.JSON.stringify(S,void 0)}parse(S){return o.JSON.parse(S,void 0)}};function en(){}function $o(){}var Gi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ds(){V.call(this,"d")}h(Ds,V);function Nn(){V.call(this,"c")}h(Nn,V);var Ii={},He=null;function Ae(){return He=He||new zn}Ii.Ia="serverreachability";function Ie(S){V.call(this,Ii.Ia,S)}h(Ie,V);function sn(S){const F=Ae();Hn(F,new Ie(F))}Ii.STAT_EVENT="statevent";function z(S,F){V.call(this,Ii.STAT_EVENT,S),this.stat=F}h(z,V);function Et(S){const F=Ae();Hn(F,new z(F,S))}Ii.Ja="timingevent";function X(S,F){V.call(this,Ii.Ja,S),this.size=F}h(X,V);function ae(S,F){if(typeof S!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){S()},F)}function Ve(){this.g=!0}Ve.prototype.ua=function(){this.g=!1};function ee(S,F,B,Z,Ee,Fe){S.info(function(){if(S.g)if(Fe){var wt="",On=Fe.split("&");for(let Fr=0;Fr<On.length;Fr++){var os=On[Fr].split("=");if(os.length>1){const gs=os[0];os=os[1];const zl=gs.split("_");wt=zl.length>=2&&zl[1]=="type"?wt+(gs+"="+os+"&"):wt+(gs+"=redacted&")}}}else wt=null;else wt=Fe;return"XMLHTTP REQ ("+Z+") [attempt "+Ee+"]: "+F+`
`+B+`
`+wt})}function ge(S,F,B,Z,Ee,Fe,wt){S.info(function(){return"XMLHTTP RESP ("+Z+") [ attempt "+Ee+"]: "+F+`
`+B+`
`+Fe+" "+wt})}function je(S,F,B,Z){S.info(function(){return"XMLHTTP TEXT ("+F+"): "+ze(S,B)+(Z?" "+Z:"")})}function Je(S,F){S.info(function(){return"TIMEOUT: "+F})}Ve.prototype.info=function(){};function ze(S,F){if(!S.g)return F;if(!F)return null;try{const Fe=JSON.parse(F);if(Fe){for(S=0;S<Fe.length;S++)if(Array.isArray(Fe[S])){var B=Fe[S];if(!(B.length<2)){var Z=B[1];if(Array.isArray(Z)&&!(Z.length<1)){var Ee=Z[0];if(Ee!="noop"&&Ee!="stop"&&Ee!="close")for(let wt=1;wt<Z.length;wt++)Z[wt]=""}}}}return dr(Fe)}catch{return F}}var nt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},et={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mt;function zt(){}h(zt,en),zt.prototype.g=function(){return new XMLHttpRequest},Mt=new zt;function yn(S){return encodeURIComponent(String(S))}function q(S){var F=1;S=S.split(":");const B=[];for(;F>0&&S.length;)B.push(S.shift()),F--;return S.length&&B.push(S.join(":")),B}function re(S,F,B,Z){this.j=S,this.i=F,this.l=B,this.S=Z||1,this.V=new Ls(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new J}function J(){this.i=null,this.g="",this.h=!1}var te={},se={};function oe(S,F,B){S.M=1,S.A=Yd(Ac(F)),S.u=B,S.R=!0,Re(S,null)}function Re(S,F){S.F=Date.now(),Le(S),S.B=Ac(S.A);var B=S.B,Z=S.S;Array.isArray(Z)||(Z=[String(Z)]),zb(B.i,"t",Z),S.C=0,B=S.j.L,S.h=new J,S.g=dP(S.j,B?F:null,!S.u),S.P>0&&(S.O=new Ai(c(S.Y,S,S.g),S.P)),F=S.V,B=S.g,Z=S.ba;var Ee="readystatechange";Array.isArray(Ee)||(Ee&&(_t[0]=Ee.toString()),Ee=_t);for(let Fe=0;Fe<Ee.length;Fe++){const wt=Se(B,Ee[Fe],Z||F.handleEvent,!1,F.h||F);if(!wt)break;F.g[wt.key]=wt}F=S.J?Q(S.J):{},S.u?(S.v||(S.v="POST"),F["Content-Type"]="application/x-www-form-urlencoded",S.g.ea(S.B,S.v,S.u,F)):(S.v="GET",S.g.ea(S.B,S.v,null,F)),sn(),ee(S.i,S.v,S.B,S.l,S.S,S.u)}re.prototype.ba=function(S){S=S.target;const F=this.O;F&&Lh(S)==3?F.j():this.Y(S)},re.prototype.Y=function(S){try{if(S==this.g)e:{const On=Lh(this.g),os=this.g.ya(),Fr=this.g.ca();if(!(On<3)&&(On!=3||this.g&&(this.h.h||this.g.la()||uP(this.g)))){this.K||On!=4||os==7||(os==8||Fr<=0?sn(3):sn(2)),yt(this);var F=this.g.ca();this.X=F;var B=Be(this);if(this.o=F==200,ge(this.i,this.v,this.B,this.l,this.S,On,F),this.o){if(this.U&&!this.L){t:{if(this.g){var Z,Ee=this.g;if((Z=Ee.g?Ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Z)){var Fe=Z;break t}}Fe=null}if(S=Fe)je(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ut(this,S);else{this.o=!1,this.m=3,Et(12),ct(this),Ct(this);break e}}if(this.R){S=!0;let gs;for(;!this.K&&this.C<B.length;)if(gs=Oe(this,B),gs==se){On==4&&(this.m=4,Et(14),S=!1),je(this.i,this.l,null,"[Incomplete Response]");break}else if(gs==te){this.m=4,Et(15),je(this.i,this.l,B,"[Invalid Chunk]"),S=!1;break}else je(this.i,this.l,gs,null),ut(this,gs);if(Pe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),On!=4||B.length!=0||this.h.h||(this.m=1,Et(16),S=!1),this.o=this.o&&S,!S)je(this.i,this.l,B,"[Invalid Chunked Response]"),ct(this),Ct(this);else if(B.length>0&&!this.W){this.W=!0;var wt=this.j;wt.g==this&&wt.aa&&!wt.P&&(wt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),E0(wt),wt.P=!0,Et(11))}}else je(this.i,this.l,B,null),ut(this,B);On==4&&ct(this),this.o&&!this.K&&(On==4?jv(this.j,this):(this.o=!1,Le(this)))}else Ub(this.g),F==400&&B.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),ct(this),Ct(this)}}}catch{}};function Be(S){if(!Pe(S))return S.g.la();const F=uP(S.g);if(F==="")return"";let B="";const Z=F.length,Ee=Lh(S.g)==4;if(!S.h.i){if(typeof TextDecoder>"u")return ct(S),Ct(S),"";S.h.i=new o.TextDecoder}for(let Fe=0;Fe<Z;Fe++)S.h.h=!0,B+=S.h.i.decode(F[Fe],{stream:!(Ee&&Fe==Z-1)});return F.length=0,S.h.g+=B,S.C=0,S.h.g}function Pe(S){return S.g?S.v=="GET"&&S.M!=2&&S.j.Aa:!1}function Oe(S,F){var B=S.C,Z=F.indexOf(`
`,B);return Z==-1?se:(B=Number(F.substring(B,Z)),isNaN(B)?te:(Z+=1,Z+B>F.length?se:(F=F.slice(Z,Z+B),S.C=Z+B,F)))}re.prototype.cancel=function(){this.K=!0,ct(this)};function Le(S){S.T=Date.now()+S.H,lt(S,S.H)}function lt(S,F){if(S.D!=null)throw Error("WatchDog timer not null");S.D=ae(c(S.aa,S),F)}function yt(S){S.D&&(o.clearTimeout(S.D),S.D=null)}re.prototype.aa=function(){this.D=null;const S=Date.now();S-this.T>=0?(Je(this.i,this.B),this.M!=2&&(sn(),Et(17)),ct(this),this.m=2,Ct(this)):lt(this,this.T-S)};function Ct(S){S.j.I==0||S.K||jv(S.j,S)}function ct(S){yt(S);var F=S.O;F&&typeof F.dispose=="function"&&F.dispose(),S.O=null,Qn(S.V),S.g&&(F=S.g,S.g=null,F.abort(),F.dispose())}function ut(S,F){try{var B=S.j;if(B.I!=0&&(B.g==S||Eu(B.h,S))){if(!S.L&&Eu(B.h,S)&&B.I==3){try{var Z=B.Ba.g.parse(F)}catch{Z=null}if(Array.isArray(Z)&&Z.length==3){var Ee=Z;if(Ee[0]==0){e:if(!B.v){if(B.g)if(B.g.F+3e3<S.F)Dv(B),Fl(B);else break e;$h(B),Et(18)}}else B.xa=Ee[1],0<B.xa-B.K&&Ee[2]<37500&&B.F&&B.A==0&&!B.C&&(B.C=ae(c(B.Va,B),6e3));vi(B.h)<=1&&B.ta&&(B.ta=void 0)}else Vl(B,11)}else if((S.L||B.g==S)&&Dv(B),!G(F))for(Ee=B.Ba.g.parse(F),F=0;F<Ee.length;F++){let Fr=Ee[F];const gs=Fr[0];if(!(gs<=B.K))if(B.K=gs,Fr=Fr[1],B.I==2)if(Fr[0]=="c"){B.M=Fr[1],B.ba=Fr[2];const zl=Fr[3];zl!=null&&(B.ka=zl,B.j.info("VER="+B.ka));const ef=Fr[4];ef!=null&&(B.za=ef,B.j.info("SVER="+B.za));const Fh=Fr[5];Fh!=null&&typeof Fh=="number"&&Fh>0&&(Z=1.5*Fh,B.O=Z,B.j.info("backChannelRequestTimeoutMs_="+Z)),Z=B;const Vh=S.g;if(Vh){const Vv=Vh.g?Vh.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vv){var Fe=Z.h;Fe.g||Vv.indexOf("spdy")==-1&&Vv.indexOf("quic")==-1&&Vv.indexOf("h2")==-1||(Fe.j=Fe.l,Fe.g=new Set,Fe.h&&(kc(Fe,Fe.h),Fe.h=null))}if(Z.G){const Hb=Vh.g?Vh.g.getResponseHeader("X-HTTP-Session-Id"):null;Hb&&(Z.wa=Hb,Er(Z.J,Z.G,Hb))}}B.I=3,B.l&&B.l.ra(),B.aa&&(B.T=Date.now()-S.F,B.j.info("Handshake RTT: "+B.T+"ms")),Z=B;var wt=S;if(Z.na=Wb(Z,Z.L?Z.ba:null,Z.W),wt.L){jl(Z.h,wt);var On=wt,os=Z.O;os&&(On.H=os),On.D&&(yt(On),Le(On)),Z.g=wt}else Fo(Z);B.i.length>0&&Qd(B)}else Fr[0]!="stop"&&Fr[0]!="close"||Vl(B,7);else B.I==3&&(Fr[0]=="stop"||Fr[0]=="close"?Fr[0]=="stop"?Vl(B,7):Ov(B):Fr[0]!="noop"&&B.l&&B.l.qa(Fr),B.A=0)}}sn(4)}catch{}}var En=class{constructor(S,F){this.g=S,this.map=F}};function Mr(S){this.l=S||10,o.PerformanceNavigationTiming?(S=o.performance.getEntriesByType("navigation"),S=S.length>0&&(S[0].nextHopProtocol=="hq"||S[0].nextHopProtocol=="h2")):S=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=S?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $r(S){return S.h?!0:S.g?S.g.size>=S.j:!1}function vi(S){return S.h?1:S.g?S.g.size:0}function Eu(S,F){return S.h?S.h==F:S.g?S.g.has(F):!1}function kc(S,F){S.g?S.g.add(F):S.h=F}function jl(S,F){S.h&&S.h==F?S.h=null:S.g&&S.g.has(F)&&S.g.delete(F)}Mr.prototype.cancel=function(){if(this.i=ss(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const S of this.g.values())S.cancel();this.g.clear()}};function ss(S){if(S.h!=null)return S.i.concat(S.h.G);if(S.g!=null&&S.g.size!==0){let F=S.i;for(const B of S.g.values())F=F.concat(B.G);return F}return g(S.i)}var Lp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pi(S,F){if(S){S=S.split("&");for(let B=0;B<S.length;B++){const Z=S[B].indexOf("=");let Ee,Fe=null;Z>=0?(Ee=S[B].substring(0,Z),Fe=S[B].substring(Z+1)):Ee=S[B],F(Ee,Fe?decodeURIComponent(Fe.replace(/\+/g," ")):"")}}}function Ph(S){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let F;S instanceof Ph?(this.l=S.l,y0(this,S.j),this.o=S.o,this.g=S.g,Ch(this,S.u),this.h=S.h,Dp(this,Gb(S.i)),this.m=S.m):S&&(F=String(S).match(Lp))?(this.l=!1,y0(this,F[1]||"",!0),this.o=v0(F[2]||""),this.g=v0(F[3]||"",!0),Ch(this,F[4]),this.h=v0(F[5]||"",!0),Dp(this,F[6]||"",!0),this.m=v0(F[7]||"")):(this.l=!1,this.i=new sr(null,this.l))}Ph.prototype.toString=function(){const S=[];var F=this.j;F&&S.push(_0(F,Db,!0),":");var B=this.g;return(B||F=="file")&&(S.push("//"),(F=this.o)&&S.push(_0(F,Db,!0),"@"),S.push(yn(B).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.u,B!=null&&S.push(":",String(B))),(B=this.h)&&(this.g&&B.charAt(0)!="/"&&S.push("/"),S.push(_0(B,B.charAt(0)=="/"?x0:jb,!0))),(B=this.i.toString())&&S.push("?",B),(B=this.m)&&S.push("#",_0(B,$b)),S.join("")},Ph.prototype.resolve=function(S){const F=Ac(this);let B=!!S.j;B?y0(F,S.j):B=!!S.o,B?F.o=S.o:B=!!S.g,B?F.g=S.g:B=S.u!=null;var Z=S.h;if(B)Ch(F,S.u);else if(B=!!S.h){if(Z.charAt(0)!="/")if(this.g&&!this.h)Z="/"+Z;else{var Ee=F.h.lastIndexOf("/");Ee!=-1&&(Z=F.h.slice(0,Ee+1)+Z)}if(Ee=Z,Ee==".."||Ee==".")Z="";else if(Ee.indexOf("./")!=-1||Ee.indexOf("/.")!=-1){Z=Ee.lastIndexOf("/",0)==0,Ee=Ee.split("/");const Fe=[];for(let wt=0;wt<Ee.length;){const On=Ee[wt++];On=="."?Z&&wt==Ee.length&&Fe.push(""):On==".."?((Fe.length>1||Fe.length==1&&Fe[0]!="")&&Fe.pop(),Z&&wt==Ee.length&&Fe.push("")):(Fe.push(On),Z=!0)}Z=Fe.join("/")}else Z=Ee}return B?F.h=Z:B=S.i.toString()!=="",B?Dp(F,Gb(S.i)):B=!!S.m,B&&(F.m=S.m),F};function Ac(S){return new Ph(S)}function y0(S,F,B){S.j=B?v0(F,!0):F,S.j&&(S.j=S.j.replace(/:$/,""))}function Ch(S,F){if(F){if(F=Number(F),isNaN(F)||F<0)throw Error("Bad port number "+F);S.u=F}else S.u=null}function Dp(S,F,B){F instanceof sr?(S.i=F,Rv(S.i,S.l)):(B||(F=_0(F,qL)),S.i=new sr(F,S.l))}function Er(S,F,B){S.i.set(F,B)}function Yd(S){return Er(S,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),S}function v0(S,F){return S?F?decodeURI(S.replace(/%25/g,"%2525")):decodeURIComponent(S):""}function _0(S,F,B){return typeof S=="string"?(S=encodeURI(S).replace(F,Lb),B&&(S=S.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S):null}function Lb(S){return S=S.charCodeAt(0),"%"+(S>>4&15).toString(16)+(S&15).toString(16)}var Db=/[#\/\?@]/g,jb=/[#\?:]/g,x0=/[#\?]/g,qL=/[#\?@]/g,$b=/#/g;function sr(S,F){this.h=this.g=null,this.i=S||null,this.j=!!F}function Rh(S){S.g||(S.g=new Map,S.h=0,S.i&&Pi(S.i,function(F,B){S.add(decodeURIComponent(F.replace(/\+/g," ")),B)}))}t=sr.prototype,t.add=function(S,F){Rh(this),this.i=null,S=Mh(this,S);let B=this.g.get(S);return B||this.g.set(S,B=[]),B.push(F),this.h+=1,this};function Fb(S,F){Rh(S),F=Mh(S,F),S.g.has(F)&&(S.i=null,S.h-=S.g.get(F).length,S.g.delete(F))}function Cv(S,F){return Rh(S),F=Mh(S,F),S.g.has(F)}t.forEach=function(S,F){Rh(this),this.g.forEach(function(B,Z){B.forEach(function(Ee){S.call(F,Ee,Z,this)},this)},this)};function Vb(S,F){Rh(S);let B=[];if(typeof F=="string")Cv(S,F)&&(B=B.concat(S.g.get(Mh(S,F))));else for(S=Array.from(S.g.values()),F=0;F<S.length;F++)B=B.concat(S[F]);return B}t.set=function(S,F){return Rh(this),this.i=null,S=Mh(this,S),Cv(this,S)&&(this.h-=this.g.get(S).length),this.g.set(S,[F]),this.h+=1,this},t.get=function(S,F){return S?(S=Vb(this,S),S.length>0?String(S[0]):F):F};function zb(S,F,B){Fb(S,F),B.length>0&&(S.i=null,S.g.set(Mh(S,F),g(B)),S.h+=B.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const S=[],F=Array.from(this.g.keys());for(let Z=0;Z<F.length;Z++){var B=F[Z];const Ee=yn(B);B=Vb(this,B);for(let Fe=0;Fe<B.length;Fe++){let wt=Ee;B[Fe]!==""&&(wt+="="+yn(B[Fe])),S.push(wt)}}return this.i=S.join("&")};function Gb(S){const F=new sr;return F.i=S.i,S.g&&(F.g=new Map(S.g),F.h=S.h),F}function Mh(S,F){return F=String(F),S.j&&(F=F.toLowerCase()),F}function Rv(S,F){F&&!S.j&&(Rh(S),S.i=null,S.g.forEach(function(B,Z){const Ee=Z.toLowerCase();Z!=Ee&&(Fb(this,Z),zb(this,Ee,B))},S)),S.j=F}function Nh(S,F){const B=new Ve;if(o.Image){const Z=new Image;Z.onload=u(xo,B,"TestLoadImage: loaded",!0,F,Z),Z.onerror=u(xo,B,"TestLoadImage: error",!1,F,Z),Z.onabort=u(xo,B,"TestLoadImage: abort",!1,F,Z),Z.ontimeout=u(xo,B,"TestLoadImage: timeout",!1,F,Z),o.setTimeout(function(){Z.ontimeout&&Z.ontimeout()},1e4),Z.src=S}else F(!1)}function Oh(S,F){const B=new Ve,Z=new AbortController,Ee=setTimeout(()=>{Z.abort(),xo(B,"TestPingServer: timeout",!1,F)},1e4);fetch(S,{signal:Z.signal}).then(Fe=>{clearTimeout(Ee),Fe.ok?xo(B,"TestPingServer: ok",!0,F):xo(B,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(Ee),xo(B,"TestPingServer: error",!1,F)})}function xo(S,F,B,Z,Ee){try{Ee&&(Ee.onload=null,Ee.onerror=null,Ee.onabort=null,Ee.ontimeout=null),Z(B)}catch{}}function w0(){this.g=new jn}function Xd(S){this.i=S.Sb||null,this.h=S.ab||!1}h(Xd,en),Xd.prototype.g=function(){return new $l(this.i,this.h)};function $l(S,F){zn.call(this),this.H=S,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h($l,zn),t=$l.prototype,t.open=function(S,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=S,this.D=F,this.readyState=1,Su(this)},t.send=function(S){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const F={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};S&&(F.body=S),(this.H||o).fetch(new Request(this.D,F)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,jp(this)),this.readyState=0},t.Pa=function(S){if(this.g&&(this.l=S,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=S.headers,this.readyState=2,Su(this)),this.g&&(this.readyState=3,Su(this),this.g)))if(this.responseType==="arraybuffer")S.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in S){if(this.j=S.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;aP(this)}else S.text().then(this.Oa.bind(this),this.ga.bind(this))};function aP(S){S.j.read().then(S.Ma.bind(S)).catch(S.ga.bind(S))}t.Ma=function(S){if(this.g){if(this.o&&S.value)this.response.push(S.value);else if(!this.o){var F=S.value?S.value:new Uint8Array(0);(F=this.B.decode(F,{stream:!S.done}))&&(this.response=this.responseText+=F)}S.done?jp(this):Su(this),this.readyState==3&&aP(this)}},t.Oa=function(S){this.g&&(this.response=this.responseText=S,jp(this))},t.Na=function(S){this.g&&(this.response=S,jp(this))},t.ga=function(){this.g&&jp(this)};function jp(S){S.readyState=4,S.l=null,S.j=null,S.B=null,Su(S)}t.setRequestHeader=function(S,F){this.A.append(S,F)},t.getResponseHeader=function(S){return this.h&&this.h.get(S.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const S=[],F=this.h.entries();for(var B=F.next();!B.done;)B=B.value,S.push(B[0]+": "+B[1]),B=F.next();return S.join(`\r
`)};function Su(S){S.onreadystatechange&&S.onreadystatechange.call(S)}Object.defineProperty($l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(S){this.m=S?"include":"same-origin"}});function lP(S){let F="";return De(S,function(B,Z){F+=Z,F+=":",F+=B,F+=`\r
`}),F}function Mv(S,F,B){e:{for(Z in B){var Z=!1;break e}Z=!0}Z||(B=lP(B),typeof S=="string"?B!=null&&yn(B):Er(S,F,B))}function ti(S){zn.call(this),this.headers=new Map,this.L=S||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(ti,zn);var cP=/^https?$/i,KL=["POST","PUT"];t=ti.prototype,t.Fa=function(S){this.H=S},t.ea=function(S,F,B,Z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+S);F=F?F.toUpperCase():"GET",this.D=S,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mt.g(),this.g.onreadystatechange=f(c(this.Ca,this));try{this.B=!0,this.g.open(F,String(S),!0),this.B=!1}catch(Fe){$p(this,Fe);return}if(S=B||"",B=new Map(this.headers),Z)if(Object.getPrototypeOf(Z)===Object.prototype)for(var Ee in Z)B.set(Ee,Z[Ee]);else if(typeof Z.keys=="function"&&typeof Z.get=="function")for(const Fe of Z.keys())B.set(Fe,Z.get(Fe));else throw Error("Unknown input type for opt_headers: "+String(Z));Z=Array.from(B.keys()).find(Fe=>Fe.toLowerCase()=="content-type"),Ee=o.FormData&&S instanceof o.FormData,!(Array.prototype.indexOf.call(KL,F,void 0)>=0)||Z||Ee||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Fe,wt]of B)this.g.setRequestHeader(Fe,wt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(S),this.v=!1}catch(Fe){$p(this,Fe)}};function $p(S,F){S.h=!1,S.g&&(S.j=!0,S.g.abort(),S.j=!1),S.l=F,S.o=5,Fp(S),Jd(S)}function Fp(S){S.A||(S.A=!0,Hn(S,"complete"),Hn(S,"error"))}t.abort=function(S){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=S||7,Hn(this,"complete"),Hn(this,"abort"),Jd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jd(this,!0)),ti.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Zd(this):this.Xa())},t.Xa=function(){Zd(this)};function Zd(S){if(S.h&&typeof s<"u"){if(S.v&&Lh(S)==4)setTimeout(S.Ca.bind(S),0);else if(Hn(S,"readystatechange"),Lh(S)==4){S.h=!1;try{const Fe=S.ca();e:switch(Fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var B;if(!(B=F)){var Z;if(Z=Fe===0){let wt=String(S.D).match(Lp)[1]||null;!wt&&o.self&&o.self.location&&(wt=o.self.location.protocol.slice(0,-1)),Z=!cP.test(wt?wt.toLowerCase():"")}B=Z}if(B)Hn(S,"complete"),Hn(S,"success");else{S.o=6;try{var Ee=Lh(S)>2?S.g.statusText:""}catch{Ee=""}S.l=Ee+" ["+S.ca()+"]",Fp(S)}}finally{Jd(S)}}}}function Jd(S,F){if(S.g){S.m&&(clearTimeout(S.m),S.m=null);const B=S.g;S.g=null,F||Hn(S,"ready");try{B.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Lh(S){return S.g?S.g.readyState:0}t.ca=function(){try{return Lh(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(S){if(this.g){var F=this.g.responseText;return S&&F.indexOf(S)==0&&(F=F.substring(S.length)),Ft(F)}};function uP(S){try{if(!S.g)return null;if("response"in S.g)return S.g.response;switch(S.F){case"":case"text":return S.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in S.g)return S.g.mozResponseArrayBuffer}return null}catch{return null}}function Ub(S){const F={};S=(S.g&&Lh(S)>=2&&S.g.getAllResponseHeaders()||"").split(`\r
`);for(let Z=0;Z<S.length;Z++){if(G(S[Z]))continue;var B=q(S[Z]);const Ee=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const Fe=F[Ee]||[];F[Ee]=Fe,Fe.push(B)}Ce(F,function(Z){return Z.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dh(S,F,B){return B&&B.internalChannelParams&&B.internalChannelParams[S]||F}function Nv(S){this.za=0,this.i=[],this.j=new Ve,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Dh("failFast",!1,S),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Dh("baseRetryDelayMs",5e3,S),this.Za=Dh("retryDelaySeedMs",1e4,S),this.Ta=Dh("forwardChannelMaxRetries",2,S),this.va=Dh("forwardChannelRequestTimeoutMs",2e4,S),this.ma=S&&S.xmlHttpFactory||void 0,this.Ua=S&&S.Rb||void 0,this.Aa=S&&S.useFetchStreams||!1,this.O=void 0,this.L=S&&S.supportsCrossDomainXhr||!1,this.M="",this.h=new Mr(S&&S.concurrentRequestLimit),this.Ba=new w0,this.S=S&&S.fastHandshake||!1,this.R=S&&S.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=S&&S.Pb||!1,S&&S.ua&&this.j.ua(),S&&S.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&S&&S.detectBufferingProxy||!1,this.ia=void 0,S&&S.longPollingTimeout&&S.longPollingTimeout>0&&(this.ia=S.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Nv.prototype,t.ka=8,t.I=1,t.connect=function(S,F,B,Z){Et(0),this.W=S,this.H=F||{},B&&Z!==void 0&&(this.H.OSID=B,this.H.OAID=Z),this.F=this.X,this.J=Wb(this,null,this.W),Qd(this)};function Ov(S){if(Lv(S),S.I==3){var F=S.V++,B=Ac(S.J);if(Er(B,"SID",S.M),Er(B,"RID",F),Er(B,"TYPE","terminate"),jh(S,B),F=new re(S,S.j,F),F.M=2,F.A=Yd(Ac(B)),B=!1,o.navigator&&o.navigator.sendBeacon)try{B=o.navigator.sendBeacon(F.A.toString(),"")}catch{}!B&&o.Image&&(new Image().src=F.A,B=!0),B||(F.g=dP(F.j,null),F.g.ea(F.A)),F.F=Date.now(),Le(F)}S0(S)}function Fl(S){S.g&&(E0(S),S.g.cancel(),S.g=null)}function Lv(S){Fl(S),S.v&&(o.clearTimeout(S.v),S.v=null),Dv(S),S.h.cancel(),S.m&&(typeof S.m=="number"&&o.clearTimeout(S.m),S.m=null)}function Qd(S){if(!$r(S.h)&&!S.m){S.m=!0;var F=S.Ea;N||M(),L||(N(),L=!0),C.add(F,S),S.D=0}}function hP(S,F){return vi(S.h)>=S.h.j-(S.m?1:0)?!1:S.m?(S.i=F.G.concat(S.i),!0):S.I==1||S.I==2||S.D>=(S.Sa?0:S.Ta)?!1:(S.m=ae(c(S.Ea,S,F),$v(S,S.D)),S.D++,!0)}t.Ea=function(S){if(this.m)if(this.m=null,this.I==1){if(!S){this.V=Math.floor(Math.random()*1e5),S=this.V++;const Ee=new re(this,this.j,S);let Fe=this.o;if(this.U&&(Fe?(Fe=Q(Fe),ne(Fe,this.U)):Fe=this.U),this.u!==null||this.R||(Ee.J=Fe,Fe=null),this.S)e:{for(var F=0,B=0;B<this.i.length;B++){t:{var Z=this.i[B];if("__data__"in Z.map&&(Z=Z.map.__data__,typeof Z=="string")){Z=Z.length;break t}Z=void 0}if(Z===void 0)break;if(F+=Z,F>4096){F=B;break e}if(F===4096||B===this.i.length-1){F=B+1;break e}}F=1e3}else F=1e3;F=Bb(this,Ee,F),B=Ac(this.J),Er(B,"RID",S),Er(B,"CVER",22),this.G&&Er(B,"X-HTTP-Session-Id",this.G),jh(this,B),Fe&&(this.R?F="headers="+yn(lP(Fe))+"&"+F:this.u&&Mv(B,this.u,Fe)),kc(this.h,Ee),this.Ra&&Er(B,"TYPE","init"),this.S?(Er(B,"$req",F),Er(B,"SID","null"),Ee.U=!0,oe(Ee,B,null)):oe(Ee,B,F),this.I=2}}else this.I==3&&(S?b0(this,S):this.i.length==0||$r(this.h)||b0(this))};function b0(S,F){var B;F?B=F.l:B=S.V++;const Z=Ac(S.J);Er(Z,"SID",S.M),Er(Z,"RID",B),Er(Z,"AID",S.K),jh(S,Z),S.u&&S.o&&Mv(Z,S.u,S.o),B=new re(S,S.j,B,S.D+1),S.u===null&&(B.J=S.o),F&&(S.i=F.G.concat(S.i)),F=Bb(S,B,1e3),B.H=Math.round(S.va*.5)+Math.round(S.va*.5*Math.random()),kc(S.h,B),oe(B,Z,F)}function jh(S,F){S.H&&De(S.H,function(B,Z){Er(F,Z,B)}),S.l&&De({},function(B,Z){Er(F,Z,B)})}function Bb(S,F,B){B=Math.min(S.i.length,B);const Z=S.l?c(S.l.Ka,S.l,S):null;e:{var Ee=S.i;let On=-1;for(;;){const os=["count="+B];On==-1?B>0?(On=Ee[0].g,os.push("ofs="+On)):On=0:os.push("ofs="+On);let Fr=!0;for(let gs=0;gs<B;gs++){var Fe=Ee[gs].g;const zl=Ee[gs].map;if(Fe-=On,Fe<0)On=Math.max(0,Ee[gs].g-100),Fr=!1;else try{Fe="req"+Fe+"_"||"";try{var wt=zl instanceof Map?zl:Object.entries(zl);for(const[ef,Fh]of wt){let Vh=Fh;a(Fh)&&(Vh=dr(Fh)),os.push(Fe+ef+"="+encodeURIComponent(Vh))}}catch(ef){throw os.push(Fe+"type="+encodeURIComponent("_badmap")),ef}}catch{Z&&Z(zl)}}if(Fr){wt=os.join("&");break e}}wt=void 0}return S=S.i.splice(0,B),F.G=S,wt}function Fo(S){if(!S.g&&!S.v){S.Y=1;var F=S.Da;N||M(),L||(N(),L=!0),C.add(F,S),S.A=0}}function $h(S){return S.g||S.v||S.A>=3?!1:(S.Y++,S.v=ae(c(S.Da,S),$v(S,S.A)),S.A++,!0)}t.Da=function(){if(this.v=null,Vp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var S=4*this.T;this.j.info("BP detection timer enabled: "+S),this.B=ae(c(this.Wa,this),S)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),Fl(this),Vp(this))};function E0(S){S.B!=null&&(o.clearTimeout(S.B),S.B=null)}function Vp(S){S.g=new re(S,S.j,"rpc",S.Y),S.u===null&&(S.g.J=S.o),S.g.P=0;var F=Ac(S.na);Er(F,"RID","rpc"),Er(F,"SID",S.M),Er(F,"AID",S.K),Er(F,"CI",S.F?"0":"1"),!S.F&&S.ia&&Er(F,"TO",S.ia),Er(F,"TYPE","xmlhttp"),jh(S,F),S.u&&S.o&&Mv(F,S.u,S.o),S.O&&(S.g.H=S.O);var B=S.g;S=S.ba,B.M=1,B.A=Yd(Ac(F)),B.u=null,B.R=!0,Re(B,S)}t.Va=function(){this.C!=null&&(this.C=null,Fl(this),$h(this),Et(19))};function Dv(S){S.C!=null&&(o.clearTimeout(S.C),S.C=null)}function jv(S,F){var B=null;if(S.g==F){Dv(S),E0(S),S.g=null;var Z=2}else if(Eu(S.h,F))B=F.G,jl(S.h,F),Z=1;else return;if(S.I!=0){if(F.o)if(Z==1){B=F.u?F.u.length:0,F=Date.now()-F.F;var Ee=S.D;Z=Ae(),Hn(Z,new X(Z,B)),Qd(S)}else Fo(S);else if(Ee=F.m,Ee==3||Ee==0&&F.X>0||!(Z==1&&hP(S,F)||Z==2&&$h(S)))switch(B&&B.length>0&&(F=S.h,F.i=F.i.concat(B)),Ee){case 1:Vl(S,5);break;case 4:Vl(S,10);break;case 3:Vl(S,6);break;default:Vl(S,2)}}}function $v(S,F){let B=S.Qa+Math.floor(Math.random()*S.Za);return S.isActive()||(B*=2),B*F}function Vl(S,F){if(S.j.info("Error code "+F),F==2){var B=c(S.bb,S),Z=S.Ua;const Ee=!Z;Z=new Ph(Z||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||y0(Z,"https"),Yd(Z),Ee?Nh(Z.toString(),B):Oh(Z.toString(),B)}else Et(2);S.I=0,S.l&&S.l.pa(F),S0(S),Lv(S)}t.bb=function(S){S?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function S0(S){if(S.I=0,S.ja=[],S.l){const F=ss(S.h);(F.length!=0||S.i.length!=0)&&(y(S.ja,F),y(S.ja,S.i),S.h.i.length=0,g(S.i),S.i.length=0),S.l.oa()}}function Wb(S,F,B){var Z=B instanceof Ph?Ac(B):new Ph(B);if(Z.g!="")F&&(Z.g=F+"."+Z.g),Ch(Z,Z.u);else{var Ee=o.location;Z=Ee.protocol,F=F?F+"."+Ee.hostname:Ee.hostname,Ee=+Ee.port;const Fe=new Ph(null);Z&&y0(Fe,Z),F&&(Fe.g=F),Ee&&Ch(Fe,Ee),B&&(Fe.h=B),Z=Fe}return B=S.G,F=S.wa,B&&F&&Er(Z,B,F),Er(Z,"VER",S.ka),jh(S,Z),Z}function dP(S,F,B){if(F&&!S.L)throw Error("Can't create secondary domain capable XhrIo object.");return F=S.Aa&&!S.ma?new ti(new Xd({ab:B})):new ti(S.ma),F.Fa(S.L),F}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fP(){}t=fP.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Fv(){}Fv.prototype.g=function(S,F){return new wo(S,F)};function wo(S,F){zn.call(this),this.g=new Nv(F),this.l=S,this.h=F&&F.messageUrlParams||null,S=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(S?S["X-Client-Protocol"]="webchannel":S={"X-Client-Protocol":"webchannel"}),this.g.o=S,S=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(S?S["X-WebChannel-Content-Type"]=F.messageContentType:S={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.sa&&(S?S["X-WebChannel-Client-Profile"]=F.sa:S={"X-WebChannel-Client-Profile":F.sa}),this.g.U=S,(S=F&&F.Qb)&&!G(S)&&(this.g.u=S),this.A=F&&F.supportsCrossDomainXhr||!1,this.v=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!G(F)&&(this.g.G=F,S=this.h,S!==null&&F in S&&(S=this.h,F in S&&delete S[F])),this.j=new zp(this)}h(wo,zn),wo.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wo.prototype.close=function(){Ov(this.g)},wo.prototype.o=function(S){var F=this.g;if(typeof S=="string"){var B={};B.__data__=S,S=B}else this.v&&(B={},B.__data__=dr(S),S=B);F.i.push(new En(F.Ya++,S)),F.I==3&&Qd(F)},wo.prototype.N=function(){this.g.l=null,delete this.j,Ov(this.g),delete this.g,wo.Z.N.call(this)};function pP(S){Ds.call(this),S.__headers__&&(this.headers=S.__headers__,this.statusCode=S.__status__,delete S.__headers__,delete S.__status__);var F=S.__sm__;if(F){e:{for(const B in F){S=B;break e}S=void 0}(this.i=S)&&(S=this.i,F=F!==null&&S in F?F[S]:void 0),this.data=F}else this.data=S}h(pP,Ds);function mP(){Nn.call(this),this.status=1}h(mP,Nn);function zp(S){this.g=S}h(zp,fP),zp.prototype.ra=function(){Hn(this.g,"a")},zp.prototype.qa=function(S){Hn(this.g,new pP(S))},zp.prototype.pa=function(S){Hn(this.g,new mP)},zp.prototype.oa=function(){Hn(this.g,"b")},Fv.prototype.createWebChannel=Fv.prototype.g,wo.prototype.send=wo.prototype.o,wo.prototype.open=wo.prototype.m,wo.prototype.close=wo.prototype.close,jue=function(){return new Fv},Due=function(){return Ae()},Lue=Ii,w8={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,aM=nt,et.COMPLETE="complete",Oue=et,$o.EventType=Gi,Gi.OPEN="a",Gi.CLOSE="b",Gi.ERROR="c",Gi.MESSAGE="d",zn.prototype.listen=zn.prototype.J,lS=$o,ti.prototype.listenOnce=ti.prototype.K,ti.prototype.getLastError=ti.prototype.Ha,ti.prototype.getLastErrorCode=ti.prototype.ya,ti.prototype.getStatus=ti.prototype.ca,ti.prototype.getResponseJson=ti.prototype.La,ti.prototype.getResponseText=ti.prototype.la,ti.prototype.send=ti.prototype.ea,ti.prototype.setWithCredentials=ti.prototype.Fa,Nue=ti}).apply(typeof TC<"u"?TC:typeof self<"u"?self:typeof window<"u"?window:{});const hJ="@firebase/firestore",dJ="4.9.3";let Mo=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Mo.UNAUTHENTICATED=new Mo(null),Mo.GOOGLE_CREDENTIALS=new Mo("google-credentials-uid"),Mo.FIRST_PARTY=new Mo("first-party-uid"),Mo.MOCK_USER=new Mo("mock-user");let ib="12.7.0";const N1=new iU("@firebase/firestore");function W_(){return N1.logLevel}function ft(t,...e){if(N1.logLevel<=tr.DEBUG){const n=e.map(gU);N1.debug(`Firestore (${ib}): ${t}`,...n)}}function Oa(t,...e){if(N1.logLevel<=tr.ERROR){const n=e.map(gU);N1.error(`Firestore (${ib}): ${t}`,...n)}}function O1(t,...e){if(N1.logLevel<=tr.WARN){const n=e.map(gU);N1.warn(`Firestore (${ib}): ${t}`,...n)}}function gU(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function Ht(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,$ue(t,r,n)}function $ue(t,e,n){let r=`FIRESTORE (${ib}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Oa(r),new Error(r)}function rn(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||$ue(e,i,r)}function Mn(t,e){return t}const We={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tt extends Hd{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ed{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class Fue{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RNe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Mo.UNAUTHENTICATED)))}shutdown(){}}class MNe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class NNe{constructor(e){this.t=e,this.currentUser=Mo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){rn(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ed;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ed,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=s;e.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ed)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(rn(typeof r.accessToken=="string",31837,{l:r}),new Fue(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rn(e===null||typeof e=="string",2055,{h:e}),new Mo(e)}}class ONe{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Mo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LNe{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ONe(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Mo.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fJ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DNe{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cc(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){rn(this.o===void 0,3512);const r=s=>{s.error!=null&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,ft("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new fJ(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(rn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fJ(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function jNe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class yU{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=jNe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Rn(t,e){return t<e?-1:t>e?1:0}function b8(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return pj(i)===pj(s)?Rn(i,s):pj(i)?1:-1}return Rn(t.length,e.length)}const $Ne=55296,FNe=57343;function pj(t){const e=t.charCodeAt(0);return e>=$Ne&&e<=FNe}function s2(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function Vue(t){return t+"\0"}const pJ="__name__";class od{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ht(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ht(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return od.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof od?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=od.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Rn(e.length,n.length)}static compareSegments(e,n){const r=od.isNumericId(e),i=od.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?od.extractNumericId(e).compare(od.extractNumericId(n)):b8(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Eg.fromString(e.substring(4,e.length-2))}}class Pr extends od{construct(e,n,r){return new Pr(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Tt(We.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Pr(n)}static emptyPath(){return new Pr([])}}const VNe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ji extends od{construct(e,n,r){return new ji(e,n,r)}static isValidIdentifier(e){return VNe.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ji.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===pJ}static keyField(){return new ji([pJ])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Tt(We.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Tt(We.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Tt(We.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Tt(We.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ji(n)}static emptyPath(){return new ji([])}}class At{constructor(e){this.path=e}static fromPath(e){return new At(Pr.fromString(e))}static fromName(e){return new At(Pr.fromString(e).popFirst(5))}static empty(){return new At(Pr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new At(new Pr(e.slice()))}}function zue(t,e,n){if(!n)throw new Tt(We.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zNe(t,e,n,r){if(e===!0&&r===!0)throw new Tt(We.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function mJ(t){if(!At.isDocumentKey(t))throw new Tt(We.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gJ(t){if(At.isDocumentKey(t))throw new Tt(We.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gue(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Q5(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ht(12329,{type:typeof t})}function yu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Tt(We.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Q5(t);throw new Tt(We.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Cs(t,e){const n={typeString:t};return e&&(n.value=e),n}function rI(t,e){if(!Gue(t))throw new Tt(We.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Tt(We.INVALID_ARGUMENT,n);return!0}const yJ=-62135596800,vJ=1e6;class Ur{static now(){return Ur.fromMillis(Date.now())}static fromDate(e){return Ur.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*vJ);return new Ur(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Tt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Tt(We.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yJ)throw new Tt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Tt(We.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vJ}_compareTo(e){return this.seconds===e.seconds?Rn(this.nanoseconds,e.nanoseconds):Rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ur._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(rI(e,Ur._jsonSchema))return new Ur(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yJ;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ur._jsonSchemaVersion="firestore/timestamp/1.0",Ur._jsonSchema={type:Cs("string",Ur._jsonSchemaVersion),seconds:Cs("number"),nanoseconds:Cs("number")};class an{static fromTimestamp(e){return new an(e)}static min(){return new an(new Ur(0,0))}static max(){return new an(new Ur(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Pk=-1;class m4{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function E8(t){return t.fields.find((e=>e.kind===2))}function ey(t){return t.fields.filter((e=>e.kind!==2))}m4.UNKNOWN_ID=-1;class lM{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ck{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ck(0,_c.min())}}function GNe(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=an.fromTimestamp(r===1e9?new Ur(n+1,0):new Ur(n,r));return new _c(i,At.empty(),e)}function Uue(t){return new _c(t.readTime,t.key,Pk)}class _c{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _c(an.min(),At.empty(),Pk)}static max(){return new _c(an.max(),At.empty(),Pk)}}function vU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=At.comparator(t.documentKey,e.documentKey),n!==0?n:Rn(t.largestBatchId,e.largestBatchId))}const Bue="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wue{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function pv(t){if(t.code!==We.FAILED_PRECONDITION||t.message!==Bue)throw t;ft("LocalStore","Unexpectedly lost primary lease")}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ht(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new xe(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof xe?n:xe.resolve(n)}catch(n){return xe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):xe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):xe.reject(n)}static resolve(e){return new xe(((n,r)=>{n(e)}))}static reject(e){return new xe(((n,r)=>{r(e)}))}static waitFor(e){return new xe(((n,r)=>{let i=0,s=0,o=!1;e.forEach((a=>{++i,a.next((()=>{++s,o&&s===i&&n()}),(l=>r(l)))})),o=!0,s===i&&n()}))}static or(e){let n=xe.resolve(!1);for(const r of e)n=n.next((i=>i?xe.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new xe(((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next((u=>{o[c]=u,++a,a===s&&r(o)}),(u=>i(u)))}}))}static doWhile(e,n){return new xe(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}const nc="SimpleDb";class eO{static open(e,n,r,i){try{return new eO(n,e.transaction(i,r))}catch(s){throw new oT(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Ed,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new oT(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=_U(r.target.error);this.S.reject(new oT(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ft(nc,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new BNe(n)}}class Sg{static delete(e){return ft(nc,"Removing database:",e),ky($ce().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!qce())return!1;if(Sg.F())return!0;const e=Ks(),n=Sg.M(e),r=0<n&&n<10,i=Hue(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Sg.M(Ks())===12.2&&Oa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ft(nc,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new oT(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new Tt(We.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new Tt(We.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new oT(e,o))},i.onupgradeneeded=s=>{ft(nc,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.N.k(o,i.transaction,s.oldVersion,this.version).next((()=>{ft(nc,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=eO.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next((c=>(a.C(),c))).catch((c=>(a.abort(c),xe.reject(c)))).toPromise();return l.catch((()=>{})),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(ft(nc,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Hue(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class UNe{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ky(this.U.delete())}}class oT extends Tt{constructor(e,n){super(We.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function a0(t){return t.name==="IndexedDbTransactionError"}class BNe{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ft(nc,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(ft(nc,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ky(r)}add(e){return ft(nc,"ADD",this.store.name,e,e),ky(this.store.add(e))}get(e){return ky(this.store.get(e)).next((n=>(n===void 0&&(n=null),ft(nc,"GET",this.store.name,e,n),n)))}delete(e){return ft(nc,"DELETE",this.store.name,e),ky(this.store.delete(e))}count(){return ft(nc,"COUNT",this.store.name),ky(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new xe(((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}}))}{const s=this.cursor(r),o=[];return this.H(s,((a,l)=>{o.push(l)})).next((()=>o))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new xe(((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}}))}Z(e,n){ft(nc,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((s,o,a)=>a.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new xe(((r,i)=>{n.onerror=s=>{const o=_U(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():r()})):r()}}))}H(e,n){const r=[];return new xe(((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new UNe(a),c=n(a.primaryKey,a.value,l);if(c instanceof xe){const u=c.catch((h=>(l.done(),xe.reject(h))));r.push(u)}l.isDone?i():l.G===null?a.continue():a.continue(l.G)}})).next((()=>xe.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ky(t){return new xe(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=_U(r.target.error);n(i)}}))}let _J=!1;function _U(t){const e=Sg.M(Ks());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Tt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _J||(_J=!0,setTimeout((()=>{throw r}),0)),r}}return t}const aT="IndexBackfiller";class WNe{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ft(aT,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();ft(aT,`Documents written: ${n}`)}catch(n){a0(n)?ft(aT,"Ignoring IndexedDB error during index backfill: ",n):await pv(n)}await this.re(6e4)}))}}class HNe{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,s=!0;return xe.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return ft(aT,`Processing collection: ${o}`),this.oe(e,o,i).next((a=>{i-=a,r.add(o)}));s=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(i,s))).next((a=>(ft(aT,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a)))).next((()=>o.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,s)=>{const o=Uue(s);vU(o,r)>0&&(r=o)})),new _c(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class su{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}su.ce=-1;const n1=-1;function tO(t){return t==null}function Rk(t){return t===0&&1/t==-1/0}function qNe(t){return typeof t=="number"&&Number.isInteger(t)&&!Rk(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const g4="";function pa(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xJ(e)),e=KNe(t.get(n),e);return xJ(e)}function KNe(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case g4:n+="";break;default:n+=s}}return n}function xJ(t){return t+g4+""}function gd(t){const e=t.length;if(rn(e>=2,64408,{path:t}),e===2)return rn(t.charAt(0)===g4&&t.charAt(1)==="",56145,{path:t}),Pr.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf(g4,s);switch((o<0||o>n)&&Ht(50515,{path:t}),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Ht(61167,{path:t})}s=o+2}return new Pr(r)}const ty="remoteDocuments",iI="owner",y_="owner",Mk="mutationQueues",YNe="userId",Zu="mutations",wJ="batchId",Vy="userMutationsIndex",bJ=["userId","batchId"];function cM(t,e){return[t,pa(e)]}function que(t,e,n){return[t,pa(e),n]}const XNe={},o2="documentMutations",y4="remoteDocumentsV14",ZNe=["prefixPath","collectionGroup","readTime","documentId"],uM="documentKeyIndex",JNe=["prefixPath","collectionGroup","documentId"],Kue="collectionGroupIndex",QNe=["collectionGroup","readTime","prefixPath","documentId"],Nk="remoteDocumentGlobal",S8="remoteDocumentGlobalKey",a2="targets",Yue="queryTargetsIndex",e5e=["canonicalId","targetId"],l2="targetDocuments",t5e=["targetId","path"],xU="documentTargetsIndex",n5e=["path","targetId"],v4="targetGlobalKey",r1="targetGlobal",Ok="collectionParents",r5e=["collectionId","parent"],c2="clientMetadata",i5e="clientId",nO="bundles",s5e="bundleId",rO="namedQueries",o5e="name",wU="indexConfiguration",a5e="indexId",T8="collectionGroupIndex",l5e="collectionGroup",lT="indexState",c5e=["indexId","uid"],Xue="sequenceNumberIndex",u5e=["uid","sequenceNumber"],cT="indexEntries",h5e=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Zue="documentKeyIndex",d5e=["indexId","uid","orderedDocumentKey"],iO="documentOverlays",f5e=["userId","collectionPath","documentId"],k8="collectionPathOverlayIndex",p5e=["userId","collectionPath","largestBatchId"],Jue="collectionGroupOverlayIndex",m5e=["userId","collectionGroup","largestBatchId"],bU="globals",g5e="name",Que=[Mk,Zu,o2,ty,a2,iI,r1,l2,c2,Nk,Ok,nO,rO],y5e=[...Que,iO],ehe=[Mk,Zu,o2,y4,a2,iI,r1,l2,c2,Nk,Ok,nO,rO,iO],the=ehe,EU=[...the,wU,lT,cT],v5e=EU,nhe=[...EU,bU],_5e=nhe;class A8 extends Wue{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Xs(t,e){const n=Mn(t);return Sg.O(n.le,e)}function EJ(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function l0(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rhe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class ki{constructor(e,n){this.comparator=e,this.root=n||No.EMPTY}insert(e,n){return new ki(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,No.BLACK,null,null))}remove(e){return new ki(this.comparator,this.root.remove(e,this.comparator).copy(null,null,No.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kC(this.root,e,this.comparator,!1)}getReverseIterator(){return new kC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kC(this.root,e,this.comparator,!0)}}class kC{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class No{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??No.RED,this.left=i??No.EMPTY,this.right=s??No.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new No(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return No.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return No.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,No.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,No.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ht(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ht(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ht(27949);return e+(this.isRed()?0:1)}}No.EMPTY=null,No.RED=!0,No.BLACK=!1;No.EMPTY=new class{constructor(){this.size=0}get key(){throw Ht(57766)}get value(){throw Ht(16141)}get color(){throw Ht(16727)}get left(){throw Ht(29726)}get right(){throw Ht(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new No(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Hr{constructor(e){this.comparator=e,this.data=new ki(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new SJ(this.data.getIterator())}getIteratorFrom(e){return new SJ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Hr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Hr(this.comparator);return n.data=e,n}}class SJ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function v_(t){return t.hasNext()?t.getNext():void 0}class wl{constructor(e){this.fields=e,e.sort(ji.comparator)}static empty(){return new wl([])}unionWith(e){let n=new Hr(ji.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wl(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return s2(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class ihe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ns{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ihe("Invalid base64 string: "+s):s}})(e);return new Ns(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new Ns(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ns.EMPTY_BYTE_STRING=new Ns("");const x5e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vp(t){if(rn(!!t,39018),typeof t=="string"){let e=0;const n=x5e.exec(t);if(rn(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bi(t.seconds),nanos:bi(t.nanos)}}function bi(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _p(t){return typeof t=="string"?Ns.fromBase64String(t):Ns.fromUint8Array(t)}const she="server_timestamp",ohe="__type__",ahe="__previous_value__",lhe="__local_write_time__";function SU(t){return(t?.mapValue?.fields||{})[ohe]?.stringValue===she}function sO(t){const e=t.mapValue.fields[ahe];return SU(e)?sO(e):e}function Lk(t){const e=vp(t.mapValue.fields[lhe].timestampValue);return new Ur(e.seconds,e.nanos)}class w5e{constructor(e,n,r,i,s,o,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=u}}const _4="(default)";class L1{constructor(e,n){this.projectId=e,this.database=n||_4}static empty(){return new L1("","")}get isDefaultDatabase(){return this.database===_4}isEqual(e){return e instanceof L1&&e.projectId===this.projectId&&e.database===this.database}}const TU="__type__",che="__max__",ig={mapValue:{fields:{__type__:{stringValue:che}}}},kU="__vector__",u2="value",hM={nullValue:"NULL_VALUE"};function $g(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?SU(t)?4:uhe(t)?9007199254740991:oO(t)?10:11:Ht(28295,{value:t})}function Od(t,e){if(t===e)return!0;const n=$g(t);if(n!==$g(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lk(t).isEqual(Lk(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=vp(i.timestampValue),a=vp(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return _p(i.bytesValue).isEqual(_p(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return bi(i.geoPointValue.latitude)===bi(s.geoPointValue.latitude)&&bi(i.geoPointValue.longitude)===bi(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return bi(i.integerValue)===bi(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=bi(i.doubleValue),a=bi(s.doubleValue);return o===a?Rk(o)===Rk(a):isNaN(o)&&isNaN(a)}return!1})(t,e);case 9:return s2(t.arrayValue.values||[],e.arrayValue.values||[],Od);case 10:case 11:return(function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(EJ(o)!==EJ(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Od(o[l],a[l])))return!1;return!0})(t,e);default:return Ht(52216,{left:t})}}function Dk(t,e){return(t.values||[]).find((n=>Od(n,e)))!==void 0}function Fg(t,e){if(t===e)return 0;const n=$g(t),r=$g(e);if(n!==r)return Rn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rn(t.booleanValue,e.booleanValue);case 2:return(function(s,o){const a=bi(s.integerValue||s.doubleValue),l=bi(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return TJ(t.timestampValue,e.timestampValue);case 4:return TJ(Lk(t),Lk(e));case 5:return b8(t.stringValue,e.stringValue);case 6:return(function(s,o){const a=_p(s),l=_p(o);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Rn(a[c],l[c]);if(u!==0)return u}return Rn(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,o){const a=Rn(bi(s.latitude),bi(o.latitude));return a!==0?a:Rn(bi(s.longitude),bi(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return kJ(t.arrayValue,e.arrayValue);case 10:return(function(s,o){const a=s.fields||{},l=o.fields||{},c=a[u2]?.arrayValue,u=l[u2]?.arrayValue,h=Rn(c?.values?.length||0,u?.values?.length||0);return h!==0?h:kJ(c,u)})(t.mapValue,e.mapValue);case 11:return(function(s,o){if(s===ig.mapValue&&o===ig.mapValue)return 0;if(s===ig.mapValue)return 1;if(o===ig.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const f=b8(l[h],u[h]);if(f!==0)return f;const g=Fg(a[l[h]],c[u[h]]);if(g!==0)return g}return Rn(l.length,u.length)})(t.mapValue,e.mapValue);default:throw Ht(23264,{he:n})}}function TJ(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Rn(t,e);const n=vp(t),r=vp(e),i=Rn(n.seconds,r.seconds);return i!==0?i:Rn(n.nanos,r.nanos)}function kJ(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Fg(n[i],r[i]);if(s)return s}return Rn(n.length,r.length)}function h2(t){return I8(t)}function I8(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=vp(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return _p(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return At.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=I8(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${I8(n.fields[o])}`;return i+"}"})(t.mapValue):Ht(61005,{value:t})}function dM(t){switch($g(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sO(t);return e?16+dM(e):16;case 5:return 2*t.stringValue.length;case 6:return _p(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+dM(s)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return l0(r.fields,((s,o)=>{i+=s.length+dM(o)})),i})(t.mapValue);default:throw Ht(13486,{value:t})}}function jk(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function P8(t){return!!t&&"integerValue"in t}function $k(t){return!!t&&"arrayValue"in t}function AJ(t){return!!t&&"nullValue"in t}function IJ(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fM(t){return!!t&&"mapValue"in t}function oO(t){return(t?.mapValue?.fields||{})[TU]?.stringValue===kU}function uT(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return l0(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=uT(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uT(t.arrayValue.values[n]);return e}return{...t}}function uhe(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===che}const hhe={mapValue:{fields:{[TU]:{stringValue:kU},[u2]:{arrayValue:{}}}}};function b5e(t){return"nullValue"in t?hM:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?jk(L1.empty(),At.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?oO(t)?hhe:{mapValue:{}}:Ht(35942,{value:t})}function E5e(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?jk(L1.empty(),At.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?hhe:"mapValue"in t?oO(t)?{mapValue:{}}:ig:Ht(61959,{value:t})}function PJ(t,e){const n=Fg(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function CJ(t,e){const n=Fg(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class aa{constructor(e){this.value=e}static empty(){return new aa({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fM(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uT(n)}setAll(e){let n=ji.emptyPath(),r={},i=[];e.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=uT(o):i.push(a.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());fM(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Od(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fM(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){l0(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new aa(uT(this.value))}}function dhe(t){const e=[];return l0(t.fields,((n,r)=>{const i=new ji([n]);if(fM(r)){const s=dhe(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)})),new wl(e)}class Qi{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Qi(e,0,an.min(),an.min(),an.min(),aa.empty(),0)}static newFoundDocument(e,n,r,i){return new Qi(e,1,n,an.min(),r,i,0)}static newNoDocument(e,n){return new Qi(e,2,n,an.min(),an.min(),aa.empty(),0)}static newUnknownDocument(e,n){return new Qi(e,3,n,an.min(),an.min(),aa.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(an.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=aa.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=aa.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=an.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class d2{constructor(e,n){this.position=e,this.inclusive=n}}function RJ(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=At.comparator(At.fromName(o.referenceValue),n.key):r=Fg(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function MJ(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Od(t.position[n],e.position[n]))return!1;return!0}class x4{constructor(e,n="asc"){this.field=e,this.dir=n}}function S5e(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class fhe{}class rr extends fhe{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new T5e(e,n,r):n==="array-contains"?new I5e(e,r):n==="in"?new _he(e,r):n==="not-in"?new P5e(e,r):n==="array-contains-any"?new C5e(e,r):new rr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new k5e(e,r):new A5e(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fg(n,this.value)):n!==null&&$g(this.value)===$g(n)&&this.matchesComparison(Fg(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ht(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Br extends fhe{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Br(e,n)}matches(e){return f2(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function f2(t){return t.op==="and"}function C8(t){return t.op==="or"}function AU(t){return phe(t)&&f2(t)}function phe(t){for(const e of t.filters)if(e instanceof Br)return!1;return!0}function R8(t){if(t instanceof rr)return t.field.canonicalString()+t.op.toString()+h2(t.value);if(AU(t))return t.filters.map((e=>R8(e))).join(",");{const e=t.filters.map((n=>R8(n))).join(",");return`${t.op}(${e})`}}function mhe(t,e){return t instanceof rr?(function(r,i){return i instanceof rr&&r.op===i.op&&r.field.isEqual(i.field)&&Od(r.value,i.value)})(t,e):t instanceof Br?(function(r,i){return i instanceof Br&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,o,a)=>s&&mhe(o,i.filters[a])),!0):!1})(t,e):void Ht(19439)}function ghe(t,e){const n=t.filters.concat(e);return Br.create(n,t.op)}function yhe(t){return t instanceof rr?(function(n){return`${n.field.canonicalString()} ${n.op} ${h2(n.value)}`})(t):t instanceof Br?(function(n){return n.op.toString()+" {"+n.getFilters().map(yhe).join(" ,")+"}"})(t):"Filter"}class T5e extends rr{constructor(e,n,r){super(e,n,r),this.key=At.fromName(r.referenceValue)}matches(e){const n=At.comparator(e.key,this.key);return this.matchesComparison(n)}}class k5e extends rr{constructor(e,n){super(e,"in",n),this.keys=vhe("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class A5e extends rr{constructor(e,n){super(e,"not-in",n),this.keys=vhe("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function vhe(t,e){return(e.arrayValue?.values||[]).map((n=>At.fromName(n.referenceValue)))}class I5e extends rr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $k(n)&&Dk(n.arrayValue,this.value)}}class _he extends rr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dk(this.value.arrayValue,n)}}class P5e extends rr{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dk(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dk(this.value.arrayValue,n)}}class C5e extends rr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$k(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Dk(this.value.arrayValue,r)))}}class R5e{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function M8(t,e=null,n=[],r=[],i=null,s=null,o=null){return new R5e(t,e,n,r,i,s,o)}function D1(t){const e=Mn(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>R8(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),tO(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>h2(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>h2(r))).join(",")),e.Te=n}return e.Te}function sI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!S5e(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mhe(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!MJ(t.startAt,e.startAt)&&MJ(t.endAt,e.endAt)}function w4(t){return At.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function b4(t,e){return t.filters.filter((n=>n instanceof rr&&n.field.isEqual(e)))}function NJ(t,e,n){let r=hM,i=!0;for(const s of b4(t,e)){let o=hM,a=!0;switch(s.op){case"<":case"<=":o=b5e(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=hM}PJ({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];PJ({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function OJ(t,e,n){let r=ig,i=!0;for(const s of b4(t,e)){let o=ig,a=!0;switch(s.op){case">=":case">":o=E5e(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ig}CJ({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];CJ({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}class oI{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function M5e(t,e,n,r,i,s,o,a){return new oI(t,e,n,r,i,s,o,a)}function aO(t){return new oI(t)}function LJ(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xhe(t){return t.collectionGroup!==null}function hT(t){const e=Mn(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Hr(ji.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(a=a.add(c.field))}))})),a})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new x4(s,r))})),n.has(ji.keyField().canonicalString())||e.Ie.push(new x4(ji.keyField(),r))}return e.Ie}function hu(t){const e=Mn(t);return e.Ee||(e.Ee=N5e(e,hT(t))),e.Ee}function N5e(t,e){if(t.limitType==="F")return M8(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new x4(i.field,s)}));const n=t.endAt?new d2(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new d2(t.startAt.position,t.startAt.inclusive):null;return M8(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function N8(t,e){const n=t.filters.concat([e]);return new oI(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function O8(t,e,n){return new oI(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lO(t,e){return sI(hu(t),hu(e))&&t.limitType===e.limitType}function whe(t){return`${D1(hu(t))}|lt:${t.limitType}`}function H_(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>yhe(i))).join(", ")}]`),tO(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>h2(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>h2(i))).join(",")),`Target(${r})`})(hu(t))}; limitType=${t.limitType})`}function aI(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):At.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of hT(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,l){const c=RJ(o,a,l);return o.inclusive?c<=0:c<0})(r.startAt,hT(r),i)||r.endAt&&!(function(o,a,l){const c=RJ(o,a,l);return o.inclusive?c>=0:c>0})(r.endAt,hT(r),i))})(t,e)}function O5e(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bhe(t){return(e,n)=>{let r=!1;for(const i of hT(t)){const s=L5e(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function L5e(t,e,n){const r=t.field.isKeyField()?At.comparator(e.key,n.key):(function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Fg(l,c):Ht(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ht(19790,{direction:t.dir})}}class Ip{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){l0(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return rhe(this.inner)}size(){return this.innerSize}}const D5e=new ki(At.comparator);function hc(){return D5e}const Ehe=new ki(At.comparator);function cS(...t){let e=Ehe;for(const n of t)e=e.insert(n.key,n);return e}function She(t){let e=Ehe;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function yd(){return dT()}function The(){return dT()}function dT(){return new Ip((t=>t.toString()),((t,e)=>t.isEqual(e)))}const j5e=new ki(At.comparator),$5e=new Hr(At.comparator);function qn(...t){let e=$5e;for(const n of t)e=e.add(n);return e}const F5e=new Hr(Rn);function V5e(){return F5e}function IU(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rk(e)?"-0":e}}function khe(t){return{integerValue:""+t}}function z5e(t,e){return qNe(e)?khe(e):IU(t,e)}class cO{constructor(){this._=void 0}}function G5e(t,e,n){return t instanceof p2?(function(i,s){const o={fields:{[ohe]:{stringValue:she},[lhe]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&SU(s)&&(s=sO(s)),s&&(o.fields[ahe]=s),{mapValue:o}})(n,e):t instanceof m2?Ihe(t,e):t instanceof g2?Phe(t,e):(function(i,s){const o=Ahe(i,s),a=DJ(o)+DJ(i.Ae);return P8(o)&&P8(i.Ae)?khe(a):IU(i.serializer,a)})(t,e)}function U5e(t,e,n){return t instanceof m2?Ihe(t,e):t instanceof g2?Phe(t,e):n}function Ahe(t,e){return t instanceof Fk?(function(r){return P8(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class p2 extends cO{}class m2 extends cO{constructor(e){super(),this.elements=e}}function Ihe(t,e){const n=Che(e);for(const r of t.elements)n.some((i=>Od(i,r)))||n.push(r);return{arrayValue:{values:n}}}class g2 extends cO{constructor(e){super(),this.elements=e}}function Phe(t,e){let n=Che(e);for(const r of t.elements)n=n.filter((i=>!Od(i,r)));return{arrayValue:{values:n}}}class Fk extends cO{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function DJ(t){return bi(t.integerValue||t.doubleValue)}function Che(t){return $k(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Rhe{constructor(e,n){this.field=e,this.transform=n}}function B5e(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof m2&&i instanceof m2||r instanceof g2&&i instanceof g2?s2(r.elements,i.elements,Od):r instanceof Fk&&i instanceof Fk?Od(r.Ae,i.Ae):r instanceof p2&&i instanceof p2})(t.transform,e.transform)}class W5e{constructor(e,n){this.version=e,this.transformResults=n}}class ua{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ua}static exists(e){return new ua(void 0,e)}static updateTime(e){return new ua(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pM(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class uO{}function Mhe(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hO(t.key,ua.none()):new sb(t.key,t.data,ua.none());{const n=t.data,r=aa.empty();let i=new Hr(ji.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Pp(t.key,r,new wl(i.toArray()),ua.none())}}function H5e(t,e,n){t instanceof sb?(function(i,s,o){const a=i.value.clone(),l=$J(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Pp?(function(i,s,o){if(!pM(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=$J(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Nhe(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function fT(t,e,n,r){return t instanceof sb?(function(s,o,a,l){if(!pM(s.precondition,o))return a;const c=s.value.clone(),u=FJ(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null})(t,e,n,r):t instanceof Pp?(function(s,o,a,l){if(!pM(s.precondition,o))return a;const c=FJ(s.fieldTransforms,l,o),u=o.data;return u.setAll(Nhe(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((h=>h.field)))})(t,e,n,r):(function(s,o,a){return pM(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(t,e,n)}function q5e(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Ahe(r.transform,i||null);s!=null&&(n===null&&(n=aa.empty()),n.set(r.field,s))}return n||null}function jJ(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&s2(r,i,((s,o)=>B5e(s,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sb extends uO{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Pp extends uO{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Nhe(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function $J(t,e,n){const r=new Map;rn(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,U5e(o,a,n[i]))}return r}function FJ(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,G5e(s,o,e))}return r}class hO extends uO{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ohe extends uO{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class PU{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&H5e(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fT(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fT(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=The();return this.mutations.forEach((i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Mhe(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(an.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),qn())}isEqual(e){return this.batchId===e.batchId&&s2(this.mutations,e.mutations,((n,r)=>jJ(n,r)))&&s2(this.baseMutations,e.baseMutations,((n,r)=>jJ(n,r)))}}class CU{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){rn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return j5e})();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new CU(e,n,r,i)}}class RU{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class K5e{constructor(e,n){this.count=e,this.unchangedNames=n}}var xs,ar;function Y5e(t){switch(t){case We.OK:return Ht(64938);case We.CANCELLED:case We.UNKNOWN:case We.DEADLINE_EXCEEDED:case We.RESOURCE_EXHAUSTED:case We.INTERNAL:case We.UNAVAILABLE:case We.UNAUTHENTICATED:return!1;case We.INVALID_ARGUMENT:case We.NOT_FOUND:case We.ALREADY_EXISTS:case We.PERMISSION_DENIED:case We.FAILED_PRECONDITION:case We.ABORTED:case We.OUT_OF_RANGE:case We.UNIMPLEMENTED:case We.DATA_LOSS:return!0;default:return Ht(15467,{code:t})}}function Lhe(t){if(t===void 0)return Oa("GRPC error has no .code"),We.UNKNOWN;switch(t){case xs.OK:return We.OK;case xs.CANCELLED:return We.CANCELLED;case xs.UNKNOWN:return We.UNKNOWN;case xs.DEADLINE_EXCEEDED:return We.DEADLINE_EXCEEDED;case xs.RESOURCE_EXHAUSTED:return We.RESOURCE_EXHAUSTED;case xs.INTERNAL:return We.INTERNAL;case xs.UNAVAILABLE:return We.UNAVAILABLE;case xs.UNAUTHENTICATED:return We.UNAUTHENTICATED;case xs.INVALID_ARGUMENT:return We.INVALID_ARGUMENT;case xs.NOT_FOUND:return We.NOT_FOUND;case xs.ALREADY_EXISTS:return We.ALREADY_EXISTS;case xs.PERMISSION_DENIED:return We.PERMISSION_DENIED;case xs.FAILED_PRECONDITION:return We.FAILED_PRECONDITION;case xs.ABORTED:return We.ABORTED;case xs.OUT_OF_RANGE:return We.OUT_OF_RANGE;case xs.UNIMPLEMENTED:return We.UNIMPLEMENTED;case xs.DATA_LOSS:return We.DATA_LOSS;default:return Ht(39323,{code:t})}}(ar=xs||(xs={}))[ar.OK=0]="OK",ar[ar.CANCELLED=1]="CANCELLED",ar[ar.UNKNOWN=2]="UNKNOWN",ar[ar.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ar[ar.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ar[ar.NOT_FOUND=5]="NOT_FOUND",ar[ar.ALREADY_EXISTS=6]="ALREADY_EXISTS",ar[ar.PERMISSION_DENIED=7]="PERMISSION_DENIED",ar[ar.UNAUTHENTICATED=16]="UNAUTHENTICATED",ar[ar.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ar[ar.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ar[ar.ABORTED=10]="ABORTED",ar[ar.OUT_OF_RANGE=11]="OUT_OF_RANGE",ar[ar.UNIMPLEMENTED=12]="UNIMPLEMENTED",ar[ar.INTERNAL=13]="INTERNAL",ar[ar.UNAVAILABLE=14]="UNAVAILABLE",ar[ar.DATA_LOSS=15]="DATA_LOSS";function X5e(){return new TextEncoder}const Z5e=new Eg([4294967295,4294967295],0);function VJ(t){const e=X5e().encode(t),n=new Mue;return n.update(e),new Uint8Array(n.digest())}function zJ(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Eg([n,r],0),new Eg([i,s],0)]}class MU{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new uS(`Invalid padding: ${n}`);if(r<0)throw new uS(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uS(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new uS(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Eg.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Eg.fromNumber(r)));return i.compare(Z5e)===1&&(i=new Eg([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=VJ(e),[r,i]=zJ(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new MU(s,i,n);return r.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const n=VJ(e),[r,i]=zJ(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class uS extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class dO{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,lI.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new dO(an.min(),i,new ki(Rn),hc(),qn())}}class lI{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new lI(r,n,qn(),qn(),qn())}}class mM{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Dhe{constructor(e,n){this.targetId=e,this.Ce=n}}class jhe{constructor(e,n,r=Ns.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class GJ{constructor(){this.ve=0,this.Fe=UJ(),this.Me=Ns.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qn(),n=qn(),r=qn();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ht(38017,{changeType:s})}})),new lI(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=UJ()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,rn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class J5e{constructor(e){this.Ge=e,this.ze=new Map,this.je=hc(),this.Je=AC(),this.He=AC(),this.Ye=new ki(Rn)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ht(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(w4(s))if(r===0){const o=new At(s.path);this.et(n,o,Qi.newNoDocument(o,an.min()))}else rn(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=_p(r).toUint8Array()}catch(l){if(l instanceof ihe)return O1("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new MU(o,i,s)}catch(l){return O1(l instanceof uS?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((s,o)=>{const a=this.ot(o);if(a){if(s.current&&w4(a.target)){const l=new At(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Qi.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}}));let r=qn();this.He.forEach(((s,o)=>{let a=!0;o.forEachWhile((l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(s))})),this.je.forEach(((s,o)=>o.setReadTime(e)));const i=new dO(e,n,this.Ye,this.je,r);return this.je=hc(),this.Je=AC(),this.He=AC(),this.Ye=new ki(Rn),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new GJ,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Hr(Rn),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Hr(Rn),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ft("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new GJ),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function AC(){return new ki(At.comparator)}function UJ(){return new ki(At.comparator)}const Q5e={asc:"ASCENDING",desc:"DESCENDING"},eOe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tOe={and:"AND",or:"OR"};class nOe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function L8(t,e){return t.useProto3Json||tO(e)?e:{value:e}}function y2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $he(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rOe(t,e){return y2(t,e.toTimestamp())}function Va(t){return rn(!!t,49232),an.fromTimestamp((function(n){const r=vp(n);return new Ur(r.seconds,r.nanos)})(t))}function NU(t,e){return D8(t,e).canonicalString()}function D8(t,e){const n=(function(i){return new Pr(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Fhe(t){const e=Pr.fromString(t);return rn(Khe(e),10190,{key:e.toString()}),e}function E4(t,e){return NU(t.databaseId,e.path)}function i1(t,e){const n=Fhe(e);if(n.get(1)!==t.databaseId.projectId)throw new Tt(We.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Tt(We.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new At(Ghe(n))}function Vhe(t,e){return NU(t.databaseId,e)}function zhe(t){const e=Fhe(t);return e.length===4?Pr.emptyPath():Ghe(e)}function j8(t){return new Pr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ghe(t){return rn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function BJ(t,e,n){return{name:E4(t,e),fields:n.value.mapValue.fields}}function iOe(t,e,n){const r=i1(t,e.name),i=Va(e.updateTime),s=e.createTime?Va(e.createTime):an.min(),o=new aa({mapValue:{fields:e.fields}}),a=Qi.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function sOe(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ht(39313,{state:c})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(c,u){return c.useProto3Json?(rn(u===void 0||typeof u=="string",58123),Ns.fromBase64String(u||"")):(rn(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),Ns.fromUint8Array(u||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(c){const u=c.code===void 0?We.UNKNOWN:Lhe(c.code);return new Tt(u,c.message||"")})(o);n=new jhe(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=i1(t,r.document.name),s=Va(r.document.updateTime),o=r.document.createTime?Va(r.document.createTime):an.min(),a=new aa({mapValue:{fields:r.document.fields}}),l=Qi.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new mM(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=i1(t,r.document),s=r.readTime?Va(r.readTime):an.min(),o=Qi.newNoDocument(i,s),a=r.removedTargetIds||[];n=new mM([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=i1(t,r.document),s=r.removedTargetIds||[];n=new mM([],s,i,null)}else{if(!("filter"in e))return Ht(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new K5e(i,s),a=r.targetId;n=new Dhe(a,o)}}return n}function S4(t,e){let n;if(e instanceof sb)n={update:BJ(t,e.key,e.value)};else if(e instanceof hO)n={delete:E4(t,e.key)};else if(e instanceof Pp)n={update:BJ(t,e.key,e.data),updateMask:hOe(e.fieldMask)};else{if(!(e instanceof Ohe))return Ht(16599,{Vt:e.type});n={verify:E4(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,o){const a=o.transform;if(a instanceof p2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof m2)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof g2)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fk)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Ht(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:rOe(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ht(27497)})(t,e.precondition)),n}function $8(t,e){const n=e.currentDocument?(function(s){return s.updateTime!==void 0?ua.updateTime(Va(s.updateTime)):s.exists!==void 0?ua.exists(s.exists):ua.none()})(e.currentDocument):ua.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(o,a){let l=null;if("setToServerValue"in a)rn(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new p2;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];l=new m2(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];l=new g2(u)}else"increment"in a?l=new Fk(o,a.increment):Ht(16584,{proto:a});const c=ji.fromServerFormat(a.fieldPath);return new Rhe(c,l)})(t,i))):[];if(e.update){e.update.name;const i=i1(t,e.update.name),s=new aa({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(l){const c=l.fieldPaths||[];return new wl(c.map((u=>ji.fromServerFormat(u))))})(e.updateMask);return new Pp(i,s,o,n,r)}return new sb(i,s,n,r)}if(e.delete){const i=i1(t,e.delete);return new hO(i,n)}if(e.verify){const i=i1(t,e.verify);return new Ohe(i,n)}return Ht(1463,{proto:e})}function oOe(t,e){return t&&t.length>0?(rn(e!==void 0,14353),t.map((n=>(function(i,s){let o=i.updateTime?Va(i.updateTime):Va(s);return o.isEqual(an.min())&&(o=Va(s)),new W5e(o,i.transformResults||[])})(n,e)))):[]}function Uhe(t,e){return{documents:[Vhe(t,e.path)]}}function Bhe(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Vhe(t,i);const s=(function(c){if(c.length!==0)return qhe(Br.create(c,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const o=(function(c){if(c.length!==0)return c.map((u=>(function(f){return{field:q_(f.field),direction:lOe(f.dir)}})(u)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=L8(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{ft:n,parent:i}}function Whe(t){let e=zhe(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){rn(r===1,65062);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=(function(h){const f=Hhe(h);return f instanceof Br&&AU(f)?f.getFilters():[f]})(n.where));let o=[];n.orderBy&&(o=(function(h){return h.map((f=>(function(y){return new x4(K_(y.field),(function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(y.direction))})(f)))})(n.orderBy));let a=null;n.limit&&(a=(function(h){let f;return f=typeof h=="object"?h.value:h,tO(f)?null:f})(n.limit));let l=null;n.startAt&&(l=(function(h){const f=!!h.before,g=h.values||[];return new d2(g,f)})(n.startAt));let c=null;return n.endAt&&(c=(function(h){const f=!h.before,g=h.values||[];return new d2(g,f)})(n.endAt)),M5e(e,i,o,s,a,"F",l,c)}function aOe(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ht(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Hhe(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=K_(n.unaryFilter.field);return rr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=K_(n.unaryFilter.field);return rr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=K_(n.unaryFilter.field);return rr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=K_(n.unaryFilter.field);return rr.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ht(61313);default:return Ht(60726)}})(t):t.fieldFilter!==void 0?(function(n){return rr.create(K_(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ht(58110);default:return Ht(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Br.create(n.compositeFilter.filters.map((r=>Hhe(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ht(1026)}})(n.compositeFilter.op))})(t):Ht(30097,{filter:t})}function lOe(t){return Q5e[t]}function cOe(t){return eOe[t]}function uOe(t){return tOe[t]}function q_(t){return{fieldPath:t.canonicalString()}}function K_(t){return ji.fromServerFormat(t.fieldPath)}function qhe(t){return t instanceof rr?(function(n){if(n.op==="=="){if(IJ(n.value))return{unaryFilter:{field:q_(n.field),op:"IS_NAN"}};if(AJ(n.value))return{unaryFilter:{field:q_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(IJ(n.value))return{unaryFilter:{field:q_(n.field),op:"IS_NOT_NAN"}};if(AJ(n.value))return{unaryFilter:{field:q_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:q_(n.field),op:cOe(n.op),value:n.value}}})(t):t instanceof Br?(function(n){const r=n.getFilters().map((i=>qhe(i)));return r.length===1?r[0]:{compositeFilter:{op:uOe(n.op),filters:r}}})(t):Ht(54877,{filter:t})}function hOe(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Khe(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class Xf{constructor(e,n,r,i,s=an.min(),o=an.min(),a=Ns.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Xf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xf(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Yhe{constructor(e){this.yt=e}}function dOe(t,e){let n;if(e.document)n=iOe(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=At.fromSegments(e.noDocument.path),i=$1(e.noDocument.readTime);n=Qi.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ht(56709);{const r=At.fromSegments(e.unknownDocument.path),i=$1(e.unknownDocument.version);n=Qi.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const s=new Ur(i[0],i[1]);return an.fromTimestamp(s)})(e.readTime)),n}function WJ(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:T4(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,o){return{name:E4(s,o.key),fields:o.data.value.mapValue.fields,updateTime:y2(s,o.version.toTimestamp()),createTime:y2(s,o.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:j1(e.version)};else{if(!e.isUnknownDocument())return Ht(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:j1(e.version)}}return r}function T4(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function j1(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $1(t){const e=new Ur(t.seconds,t.nanoseconds);return an.fromTimestamp(e)}function Ay(t,e){const n=(e.baseMutations||[]).map((s=>$8(t.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>$8(t.yt,s))),i=Ur.fromMillis(e.localWriteTimeMs);return new PU(e.batchId,i,n,r)}function hS(t){const e=$1(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?$1(t.lastLimboFreeSnapshotVersion):an.min();let r;return r=(function(s){return s.documents!==void 0})(t.query)?(function(s){const o=s.documents.length;return rn(o===1,1966,{count:o}),hu(aO(zhe(s.documents[0])))})(t.query):(function(s){return hu(Whe(s))})(t.query),new Xf(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Ns.fromBase64String(t.resumeToken))}function Xhe(t,e){const n=j1(e.snapshotVersion),r=j1(e.lastLimboFreeSnapshotVersion);let i;i=w4(e.target)?Uhe(t.yt,e.target):Bhe(t.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:D1(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Zhe(t){const e=Whe({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?O8(e,e.limit,"L"):e}function mj(t,e){return new RU(e.largestBatchId,$8(t.yt,e.overlayMutation))}function HJ(t,e){const n=e.path.lastSegment();return[t,pa(e.path.popLast()),n]}function qJ(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:j1(r.readTime),documentKey:pa(r.documentKey.path),largestBatchId:r.largestBatchId}}class fOe{getBundleMetadata(e,n){return KJ(e).get(n).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:$1(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,n){return KJ(e).put((function(i){return{bundleId:i.id,createTime:j1(Va(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return YJ(e).get(n).next((r=>{if(r)return(function(s){return{name:s.name,query:Zhe(s.bundledQuery),readTime:$1(s.readTime)}})(r)}))}saveNamedQuery(e,n){return YJ(e).put((function(i){return{name:i.name,readTime:j1(Va(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function KJ(t){return Xs(t,nO)}function YJ(t){return Xs(t,rO)}class fO{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new fO(e,r)}getOverlay(e,n){return kE(e).get(HJ(this.userId,n)).next((r=>r?mj(this.serializer,r):null))}getOverlays(e,n){const r=yd();return xe.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((s,o)=>{const a=new RU(n,o);i.push(this.St(e,a))})),xe.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((o=>i.add(pa(o.getCollectionPath()))));const s=[];return i.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(kE(e).Z(k8,a))})),xe.waitFor(s)}getOverlaysForCollection(e,n,r){const i=yd(),s=pa(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return kE(e).J(k8,o).next((a=>{for(const l of a){const c=mj(this.serializer,l);i.set(c.getKey(),c)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const s=yd();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return kE(e).ee({index:Jue,range:a},((l,c,u)=>{const h=mj(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):u.done()})).next((()=>s))}St(e,n){return kE(e).put((function(i,s,o){const[a,l,c]=HJ(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:S4(i.yt,o.mutation)}})(this.serializer,this.userId,n))}}function kE(t){return Xs(t,iO)}class pOe{bt(e){return Xs(e,bU)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n?.value;return r?Ns.fromUint8Array(r):Ns.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class Iy{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(bi(e.integerValue));else if("doubleValue"in e){const r=bi(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Rk(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=vp(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(_p(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?uhe(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):oO(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Ht(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){const r=e.fields||{};this.Ft(n,53);const i=u2,s=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(bi(s)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),At.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Iy.Kt=new Iy;const __=255;function mOe(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function XJ(t){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const o=mOe(255&r[s]);if(i+=o,o!==8)break}return i})(t);return Math.ceil(e/8)}class gOe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=XJ(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=XJ(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(__),this.sn(255)}_n(){this.an(__),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===__?(this.sn(__),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===__?(this.an(__),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class yOe{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class vOe{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class AE{constructor(){this.cn=new gOe,this.ln=new yOe(this.cn),this.hn=new vOe(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Py{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new Py(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:gM(this.En),directionalValue:gM(this.dn),orderedDocumentKey:gM(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function lm(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=ZJ(t.En,e.En),n!==0?n:(n=ZJ(t.dn,e.dn),n!==0?n:At.comparator(t.In,e.In)))}function ZJ(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function gM(t){return Hce()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function JJ(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class QJ{constructor(e){this.mn=new Hr(((n,r)=>ji.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(rn(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=E8(e);if(n!==void 0&&!this.wn(n))return!1;const r=ey(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Hr(ji.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new lM(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new lM(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new lM(r.field,r.dir==="asc"?0:1)));return new m4(m4.UNKNOWN_ID,this.collectionId,n,Ck.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function Jhe(t){if(rn(t instanceof rr||t instanceof Br,20012),t instanceof rr){if(t instanceof _he){const n=t.value.arrayValue?.values?.map((r=>rr.create(t.field,"==",r)))||[];return Br.create(n,"or")}return t}const e=t.filters.map((n=>Jhe(n)));return Br.create(e,t.op)}function _Oe(t){if(t.getFilters().length===0)return[];const e=z8(Jhe(t));return rn(Qhe(e),7391),F8(e)||V8(e)?[e]:e.getFilters()}function F8(t){return t instanceof rr}function V8(t){return t instanceof Br&&AU(t)}function Qhe(t){return F8(t)||V8(t)||(function(n){if(n instanceof Br&&C8(n)){for(const r of n.getFilters())if(!F8(r)&&!V8(r))return!1;return!0}return!1})(t)}function z8(t){if(rn(t instanceof rr||t instanceof Br,34018),t instanceof rr)return t;if(t.filters.length===1)return z8(t.filters[0]);const e=t.filters.map((r=>z8(r)));let n=Br.create(e,t.op);return n=k4(n),Qhe(n)?n:(rn(n instanceof Br,64498),rn(f2(n),40251),rn(n.filters.length>1,57927),n.filters.reduce(((r,i)=>OU(r,i))))}function OU(t,e){let n;return rn(t instanceof rr||t instanceof Br,38388),rn(e instanceof rr||e instanceof Br,25473),n=t instanceof rr?e instanceof rr?(function(i,s){return Br.create([i,s],"and")})(t,e):eQ(t,e):e instanceof rr?eQ(e,t):(function(i,s){if(rn(i.filters.length>0&&s.filters.length>0,48005),f2(i)&&f2(s))return ghe(i,s.getFilters());const o=C8(i)?i:s,a=C8(i)?s:i,l=o.filters.map((c=>OU(c,a)));return Br.create(l,"or")})(t,e),k4(n)}function eQ(t,e){if(f2(e))return ghe(e,t.getFilters());{const n=e.filters.map((r=>OU(t,r)));return Br.create(n,"or")}}function k4(t){if(rn(t instanceof rr||t instanceof Br,11850),t instanceof rr)return t;const e=t.getFilters();if(e.length===1)return k4(e[0]);if(phe(t))return t;const n=e.map((i=>k4(i))),r=[];return n.forEach((i=>{i instanceof rr?r.push(i):i instanceof Br&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Br.create(r,t.op)}class xOe{constructor(){this.Cn=new LU}addToCollectionParentIndex(e,n){return this.Cn.add(n),xe.resolve()}getCollectionParents(e,n){return xe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return xe.resolve()}deleteFieldIndex(e,n){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,n){return xe.resolve()}getDocumentsMatchingTarget(e,n){return xe.resolve(null)}getIndexType(e,n){return xe.resolve(0)}getFieldIndexes(e,n){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,n){return xe.resolve(_c.min())}getMinOffsetFromCollectionGroup(e,n){return xe.resolve(_c.min())}updateCollectionGroup(e,n,r){return xe.resolve()}updateIndexEntries(e,n){return xe.resolve()}}class LU{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Hr(Pr.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Hr(Pr.comparator)).toArray()}}const tQ="IndexedDbIndexManager",IC=new Uint8Array(0);class wOe{constructor(e,n){this.databaseId=n,this.vn=new LU,this.Fn=new Ip((r=>D1(r)),((r,i)=>sI(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const s={collectionId:r,parent:pa(i)};return nQ(e).put(s)}return xe.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Vue(n),""],!1,!0);return nQ(e).J(i).next((s=>{for(const o of s){if(o.collectionId!==n)break;r.push(gd(o.parent))}return r}))}addFieldIndex(e,n){const r=IE(e),i=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=w_(e);return s.next((a=>{o.put(qJ(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return s.next()}deleteFieldIndex(e,n){const r=IE(e),i=w_(e),s=x_(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=IE(e),r=x_(e),i=w_(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return xe.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new QJ(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,n){const r=x_(e);let i=!0;const s=new Map;return xe.forEach(this.Mn(n),(o=>this.xn(e,o).next((a=>{i&&(i=!!a),s.set(o,a)})))).next((()=>{if(i){let o=qn();const a=[];return xe.forEach(s,((l,c)=>{ft(tQ,`Using index ${(function(I){return`id=${I.indexId}|cg=${I.collectionGroup}|f=${I.fields.map((P=>`${P.fieldPath}:${P.kind}`)).join(",")}`})(l)} to execute ${D1(n)}`);const u=(function(I,P){const N=E8(P);if(N===void 0)return null;for(const L of b4(I,N.fieldPath))switch(L.op){case"array-contains-any":return L.value.arrayValue.values||[];case"array-contains":return[L.value]}return null})(c,l),h=(function(I,P){const N=new Map;for(const L of ey(P))for(const C of b4(I,L.fieldPath))switch(C.op){case"==":case"in":N.set(L.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return N.set(L.fieldPath.canonicalString(),C.value),Array.from(N.values())}return null})(c,l),f=(function(I,P){const N=[];let L=!0;for(const C of ey(P)){const M=C.kind===0?NJ(I,C.fieldPath,I.startAt):OJ(I,C.fieldPath,I.startAt);N.push(M.value),L&&(L=M.inclusive)}return new d2(N,L)})(c,l),g=(function(I,P){const N=[];let L=!0;for(const C of ey(P)){const M=C.kind===0?OJ(I,C.fieldPath,I.endAt):NJ(I,C.fieldPath,I.endAt);N.push(M.value),L&&(L=M.inclusive)}return new d2(N,L)})(c,l),y=this.On(l,c,f),_=this.On(l,c,g),b=this.Nn(l,c,h),T=this.Bn(l.indexId,u,y,f.inclusive,_,g.inclusive,b);return xe.forEach(T,(A=>r.Y(A,n.limit).next((I=>{I.forEach((P=>{const N=At.fromSegments(P.documentKey);o.has(N)||(o=o.add(N),a.push(N))}))}))))})).next((()=>a))}return xe.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=_Oe(Br.create(e.filters,"and")).map((r=>M8(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let h=0;h<l;++h){const f=n?this.Ln(n[h/c]):IC,g=this.kn(e,f,r[h%c],i),y=this.qn(e,f,s[h%c],o),_=a.map((b=>this.kn(e,f,b,!0)));u.push(...this.createRange(g,y,_))}return u}kn(e,n,r,i){const s=new Py(e,At.empty(),n,r);return i?s:s.An()}qn(e,n,r,i){const s=new Py(e,At.empty(),n,r);return i?s.An():s}xn(e,n){const r=new QJ(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let o=null;for(const a of s)r.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return xe.forEach(i,(s=>this.xn(e,s).next((o=>{o?r!==0&&o.fields.length<(function(l){let c=new Hr(ji.comparator),u=!1;for(const h of l.filters)for(const f of h.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?u=!0:c=c.add(f.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new AE;for(const i of ey(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Pn(i.kind);Iy.Kt.Dt(s,o)}return r.un()}Ln(e){const n=new AE;return Iy.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new AE;return Iy.Kt.Dt(jk(this.databaseId,n),r.Pn((function(s){const o=ey(s);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new AE);let s=0;for(const o of ey(e)){const a=r[s++];for(const l of i)if(this.Un(n,o.fieldPath)&&$k(a))i=this.Kn(i,o,a);else{const c=l.Pn(o.kind);Iy.Kt.Dt(a,c)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new AE;l.seed(a.un()),Iy.Kt.Dt(o,l.Pn(n.kind)),s.push(l)}return s}Un(e,n){return!!e.filters.find((r=>r instanceof rr&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=IE(e),i=w_(e);return(n?r.J(T8,IDBKeyRange.bound(n,n)):r.J()).next((s=>{const o=[];return xe.forEach(s,(a=>i.get([a.indexId,this.uid]).next((l=>{o.push((function(u,h){const f=h?new Ck(h.sequenceNumber,new _c($1(h.readTime),new At(gd(h.documentKey)),h.largestBatchId)):Ck.empty(),g=u.fields.map((([y,_])=>new lM(ji.fromServerFormat(y),_)));return new m4(u.indexId,u.collectionGroup,g,f)})(a,l))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:Rn(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=IE(e),s=w_(e);return this.Gn(e).next((o=>i.J(T8,IDBKeyRange.bound(n,n)).next((a=>xe.forEach(a,(l=>s.put(qJ(l.indexId,this.uid,o,r))))))))}updateIndexEntries(e,n){const r=new Map;return xe.forEach(n,((i,s)=>{const o=r.get(i.collectionGroup);return(o?xe.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next((a=>(r.set(i.collectionGroup,a),xe.forEach(a,(l=>this.zn(e,i,l).next((c=>{const u=this.jn(s,l);return c.isEqual(u)?xe.resolve():this.Jn(e,s,l,c,u)})))))))}))}Hn(e,n,r,i){return x_(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return x_(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=x_(e);let s=new Hr(lm);return i.ee({index:Zue,range:IDBKeyRange.only([r.indexId,this.uid,gM(this.$n(r,n))])},((o,a)=>{s=s.add(new Py(r.indexId,n,JJ(a.arrayValue),JJ(a.directionalValue)))})).next((()=>s))}jn(e,n){let r=new Hr(lm);const i=this.Qn(n,e);if(i==null)return r;const s=E8(n);if(s!=null){const o=e.data.field(s.fieldPath);if($k(o))for(const a of o.arrayValue.values||[])r=r.add(new Py(n.indexId,e.key,this.Ln(a),i))}else r=r.add(new Py(n.indexId,e.key,IC,i));return r}Jn(e,n,r,i,s){ft(tQ,"Updating index entries for document '%s'",n.key);const o=[];return(function(l,c,u,h,f){const g=l.getIterator(),y=c.getIterator();let _=v_(g),b=v_(y);for(;_||b;){let T=!1,A=!1;if(_&&b){const I=u(_,b);I<0?A=!0:I>0&&(T=!0)}else _!=null?A=!0:T=!0;T?(h(b),b=v_(y)):A?(f(_),_=v_(g)):(_=v_(g),b=v_(y))}})(i,s,lm,(a=>{o.push(this.Hn(e,n,r,a))}),(a=>{o.push(this.Yn(e,n,r,a))})),xe.waitFor(o)}Gn(e){let n=1;return w_(e).ee({index:Xue,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((o,a)=>lm(o,a))).filter(((o,a,l)=>!a||lm(o,l[a-1])!==0));const i=[];i.push(e);for(const o of r){const a=lm(o,e),l=lm(o,n);if(a===0)i[0]=e.An();else if(a>0&&l<0)i.push(o),i.push(o.An());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Zn(i[o],i[o+1]))return[];const a=i[o].Vn(this.uid,IC,At.empty()),l=i[o+1].Vn(this.uid,IC,At.empty());s.push(IDBKeyRange.bound(a,l))}return s}Zn(e,n){return lm(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(rQ)}getMinOffset(e,n){return xe.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Ht(44426))))).next(rQ)}}function nQ(t){return Xs(t,Ok)}function x_(t){return Xs(t,cT)}function IE(t){return Xs(t,wU)}function w_(t){return Xs(t,lT)}function rQ(t){rn(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;vU(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new _c(e.readTime,e.documentKey,n)}const iQ={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ede=41943040;class ta{static withCacheSize(e){return new ta(e,ta.DEFAULT_COLLECTION_PERCENTILE,ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}function tde(t,e,n){const r=t.store(Zu),i=t.store(o2),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.ee({range:o},((u,h,f)=>(a++,f.delete())));s.push(l.next((()=>{rn(a===1,47070,{batchId:n.batchId})})));const c=[];for(const u of n.mutations){const h=que(e,u.key.path,n.batchId);s.push(i.delete(h)),c.push(u.key)}return xe.waitFor(s).next((()=>c))}function A4(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ht(14731);e=t.noDocument}return JSON.stringify(e).length}ta.DEFAULT_COLLECTION_PERCENTILE=10,ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ta.DEFAULT=new ta(ede,ta.DEFAULT_COLLECTION_PERCENTILE,ta.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ta.DISABLED=new ta(-1,0,0);class pO{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){rn(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new pO(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cm(e).ee({index:Vy,range:r},((i,s,o)=>{n=!1,o.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const s=Y_(e),o=cm(e);return o.add({}).next((a=>{rn(typeof a=="number",49019);const l=new PU(a,n,r,i),c=(function(g,y,_){const b=_.baseMutations.map((A=>S4(g.yt,A))),T=_.mutations.map((A=>S4(g.yt,A)));return{userId:y,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:b,mutations:T}})(this.serializer,this.userId,l),u=[];let h=new Hr(((f,g)=>Rn(f.canonicalString(),g.canonicalString())));for(const f of i){const g=que(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),u.push(o.put(c)),u.push(s.put(g,XNe))}return h.forEach((f=>{u.push(this.indexManager.addToCollectionParentIndex(e,f))})),e.addOnCommittedListener((()=>{this.Xn[a]=l.keys()})),xe.waitFor(u).next((()=>l))}))}lookupMutationBatch(e,n){return cm(e).get(n).next((r=>r?(rn(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Ay(this.serializer,r)):null))}er(e,n){return this.Xn[n]?xe.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return cm(e).ee({index:Vy,range:i},((o,a,l)=>{a.userId===this.userId&&(rn(a.batchId>=r,47524,{tr:r}),s=Ay(this.serializer,a)),l.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=n1;return cm(e).ee({index:Vy,range:n,reverse:!0},((i,s,o)=>{r=s.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,n1],[this.userId,Number.POSITIVE_INFINITY]);return cm(e).J(Vy,n).next((r=>r.map((i=>Ay(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=cM(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Y_(e).ee({range:i},((o,a,l)=>{const[c,u,h]=o,f=gd(u);if(c===this.userId&&n.path.isEqual(f))return cm(e).get(h).next((g=>{if(!g)throw Ht(61480,{nr:o,batchId:h});rn(g.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:g.userId,batchId:h}),s.push(Ay(this.serializer,g))}));l.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Hr(Rn);const i=[];return n.forEach((s=>{const o=cM(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Y_(e).ee({range:a},((c,u,h)=>{const[f,g,y]=c,_=gd(g);f===this.userId&&s.path.isEqual(_)?r=r.add(y):h.done()}));i.push(l)})),xe.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=cM(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Hr(Rn);return Y_(e).ee({range:o},((l,c,u)=>{const[h,f,g]=l,y=gd(f);h===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(g)):u.done()})).next((()=>this.rr(e,a)))}rr(e,n){const r=[],i=[];return n.forEach((s=>{i.push(cm(e).get(s).next((o=>{if(o===null)throw Ht(35274,{batchId:s});rn(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:s}),r.push(Ay(this.serializer,o))})))})),xe.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return tde(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),xe.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return xe.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),i=[];return Y_(e).ee({range:r},((s,o,a)=>{if(s[0]===this.userId){const l=gd(s[1]);i.push(l)}else a.done()})).next((()=>{rn(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,n){return nde(e,this.userId,n)}_r(e){return rde(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:n1,lastStreamToken:""}))}}function nde(t,e,n){const r=cM(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Y_(t).ee({range:s,X:!0},((a,l,c)=>{const[u,h,f]=a;u===e&&h===i&&(o=!0),c.done()})).next((()=>o))}function cm(t){return Xs(t,Zu)}function Y_(t){return Xs(t,o2)}function rde(t){return Xs(t,Mk)}class F1{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new F1(0)}static cr(){return new F1(-1)}}class bOe{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new F1(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>an.fromTimestamp(new Ur(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>b_(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(rn(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const s=[];return b_(e).ee(((o,a)=>{const l=hS(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))})).next((()=>xe.waitFor(s))).next((()=>i))}forEachTarget(e,n){return b_(e).ee(((r,i)=>{const s=hS(i);n(s)}))}lr(e){return sQ(e).get(v4).next((n=>(rn(n!==null,2888),n)))}hr(e,n){return sQ(e).put(v4,n)}Pr(e,n){return b_(e).put(Xhe(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=D1(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return b_(e).ee({range:i,index:Yue},((o,a,l)=>{const c=hS(a);sI(n,c.target)&&(s=c,l.done())})).next((()=>s))}addMatchingKeys(e,n,r){const i=[],s=Km(e);return n.forEach((o=>{const a=pa(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))})),xe.waitFor(i)}removeMatchingKeys(e,n,r){const i=Km(e);return xe.forEach(n,(s=>{const o=pa(s.path);return xe.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,n){const r=Km(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Km(e);let s=qn();return i.ee({range:r,X:!0},((o,a,l)=>{const c=gd(o[1]),u=new At(c);s=s.add(u)})).next((()=>s))}containsKey(e,n){const r=pa(n.path),i=IDBKeyRange.bound([r],[Vue(r)],!1,!0);let s=0;return Km(e).ee({index:xU,X:!0,range:i},(([o,a],l,c)=>{o!==0&&(s++,c.done())})).next((()=>s>0))}At(e,n){return b_(e).get(n).next((r=>r?hS(r):null))}}function b_(t){return Xs(t,a2)}function sQ(t){return Xs(t,r1)}function Km(t){return Xs(t,l2)}const oQ="LruGarbageCollector",EOe=1048576;function aQ([t,e],[n,r]){const i=Rn(t,n);return i===0?Rn(e,r):i}class SOe{constructor(e){this.Ir=e,this.buffer=new Hr(aQ),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();aQ(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ide{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ft(oQ,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){a0(n)?ft(oQ,"Ignoring IndexedDB error during garbage collection: ",n):await pv(n)}await this.Vr(3e5)}))}}class TOe{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return xe.resolve(su.ce);const r=new SOe(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(iQ)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iQ):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((h=>(h>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i)))).next((h=>(r=h,a=Date.now(),this.removeTargets(e,r,n)))).next((h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((h=>(c=Date.now(),W_()<=tr.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h}))))}}function sde(t,e){return new TOe(t,e)}class kOe{constructor(e,n){this.db=e,this.garbageCollector=sde(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return PC(e,r)}removeReference(e,n,r){return PC(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return PC(e,n)}br(e,n){return(function(i,s){let o=!1;return rde(i).te((a=>nde(i,a,s).next((l=>(l&&(o=!0),xe.resolve(!l)))))).next((()=>o))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((o,a)=>{if(a<=n){const l=this.br(e,o).next((c=>{if(!c)return s++,r.getEntry(e,o).next((()=>(r.removeEntry(o,an.min()),Km(e).delete((function(h){return[0,pa(h.path)]})(o)))))}));i.push(l)}})).next((()=>xe.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return PC(e,n)}Sr(e,n){const r=Km(e);let i,s=su.ce;return r.ee({index:xU},(([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==su.ce&&n(new At(gd(i)),s),s=c,i=l):s=su.ce})).next((()=>{s!==su.ce&&n(new At(gd(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function PC(t,e){return Km(t).put((function(r,i){return{targetId:0,path:pa(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}class ode{constructor(){this.changes=new Ip((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?xe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class AOe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return F0(e).put(r)}removeEntry(e,n,r){return F0(e).delete((function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],T4(o),a[a.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=Qi.newInvalidDocument(n);return F0(e).ee({index:uM,range:IDBKeyRange.only(PE(n))},((i,s)=>{r=this.Cr(n,s)})).next((()=>r))}vr(e,n){let r={size:0,document:Qi.newInvalidDocument(n)};return F0(e).ee({index:uM,range:IDBKeyRange.only(PE(n))},((i,s)=>{r={document:this.Cr(n,s),size:A4(s)}})).next((()=>r))}getEntries(e,n){let r=hc();return this.Fr(e,n,((i,s)=>{const o=this.Cr(i,s);r=r.insert(i,o)})).next((()=>r))}Mr(e,n){let r=hc(),i=new ki(At.comparator);return this.Fr(e,n,((s,o)=>{const a=this.Cr(s,o);r=r.insert(s,a),i=i.insert(s,A4(o))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return xe.resolve();let i=new Hr(uQ);n.forEach((l=>i=i.add(l)));const s=IDBKeyRange.bound(PE(i.first()),PE(i.last())),o=i.getIterator();let a=o.getNext();return F0(e).ee({index:uM,range:s},((l,c,u)=>{const h=At.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&uQ(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.j(PE(a)):u.done()})).next((()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),T4(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return F0(e).J(IDBKeyRange.bound(a,l,!0)).next((c=>{s?.incrementDocumentReadCount(c.length);let u=hc();for(const h of c){const f=this.Cr(At.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);f.isFoundDocument()&&(aI(n,f)||i.has(f.key))&&(u=u.insert(f.key,f))}return u}))}getAllFromCollectionGroup(e,n,r,i){let s=hc();const o=cQ(n,r),a=cQ(n,_c.max());return F0(e).ee({index:Kue,range:IDBKeyRange.bound(o,a,!0)},((l,c,u)=>{const h=this.Cr(At.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&u.done()})).next((()=>s))}newChangeBuffer(e){return new IOe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return lQ(e).get(S8).next((n=>(rn(!!n,20021),n)))}Dr(e,n){return lQ(e).put(S8,n)}Cr(e,n){if(n){const r=dOe(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(an.min())))return r}return Qi.newInvalidDocument(e)}}function ade(t){return new AOe(t)}class IOe extends ode{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Ip((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new Hr(((s,o)=>Rn(s.canonicalString(),o.canonicalString())));return this.changes.forEach(((s,o)=>{const a=this.Br.get(s);if(n.push(this.Nr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=WJ(this.Nr.serializer,o);i=i.add(s.path.popLast());const c=A4(l);r+=c-a.size,n.push(this.Nr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=WJ(this.Nr.serializer,o.convertToNoDocument(an.min()));n.push(this.Nr.addEntry(e,s,l))}})),i.forEach((s=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),n.push(this.Nr.updateMetadata(e,r)),xe.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((s,o)=>{this.Br.set(s,{size:o,readTime:r.get(s).readTime})})),r)))}}function lQ(t){return Xs(t,Nk)}function F0(t){return Xs(t,y4)}function PE(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cQ(t,e){const n=e.documentKey.path.toArray();return[t,T4(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function uQ(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Rn(n[s],r[s]),i)return i;return i=Rn(n.length,r.length),i||(i=Rn(n[n.length-2],r[r.length-2]),i||Rn(n[n.length-1],r[r.length-1]))}class POe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class lde{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&fT(r.mutation,i,wl.empty(),Ur.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,qn()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=qn()){const i=yd();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let o=cS();return s.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=yd();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,qn())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(e,n,r,i){let s=hc();const o=dT(),a=(function(){return dT()})();return n.forEach(((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Pp)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),fT(u.mutation,c,u.mutation.getFieldMask(),Ur.now())):o.set(c.key,wl.empty())})),this.recalculateAndSaveOverlays(e,s).next((l=>(l.forEach(((c,u)=>o.set(c,u))),n.forEach(((c,u)=>a.set(c,new POe(u,o.get(c)??null)))),a)))}recalculateAndSaveOverlays(e,n){const r=dT();let i=new ki(((o,a)=>o-a)),s=qn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||wl.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||qn()).add(l);i=i.insert(a.batchId,h)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=The();u.forEach((f=>{if(!s.has(f)){const g=Mhe(n.get(f),r.get(f));g!==null&&h.set(f,g),s=s.add(f)}})),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return xe.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(o){return At.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xhe(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):xe.resolve(yd());let a=Pk,l=s;return o.next((c=>xe.forEach(c,((u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?xe.resolve():this.remoteDocumentCache.getEntry(e,u).next((f=>{l=l.insert(u,f)}))))).next((()=>this.populateOverlays(e,c,s))).next((()=>this.computeViews(e,l,c,qn()))).next((u=>({batchId:a,changes:She(u)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new At(n)).next((r=>{let i=cS();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=cS();return this.indexManager.getCollectionParents(e,s).next((a=>xe.forEach(a,(l=>{const c=(function(h,f){return new oI(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)})(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next((u=>{u.forEach(((h,f)=>{o=o.insert(h,f)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((o=>{s.forEach(((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Qi.newInvalidDocument(u)))}));let a=cS();return o.forEach(((l,c)=>{const u=s.get(l);u!==void 0&&fT(u.mutation,c,wl.empty(),Ur.now()),aI(n,c)&&(a=a.insert(l,c))})),a}))}}class COe{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return xe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Va(i.createTime)}})(n)),xe.resolve()}getNamedQuery(e,n){return xe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:Zhe(i.bundledQuery),readTime:Va(i.readTime)}})(n)),xe.resolve()}}class ROe{constructor(){this.overlays=new ki(At.comparator),this.qr=new Map}getOverlay(e,n){return xe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=yd();return xe.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.St(e,n,s)})),xe.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),xe.resolve()}getOverlaysForCollection(e,n,r){const i=yd(),s=n.length+1,o=new At(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return xe.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ki(((c,u)=>c-u));const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=yd(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=yd(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,u)=>a.set(c,u))),!(a.size()>=i)););return xe.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new RU(n,r));let s=this.qr.get(n);s===void 0&&(s=qn(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}class MOe{constructor(){this.sessionToken=Ns.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,xe.resolve()}}class DU{constructor(){this.Qr=new Hr(ao.$r),this.Ur=new Hr(ao.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ao(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new ao(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new At(new Pr([])),r=new ao(n,e),i=new ao(n,e+1),s=[];return this.Ur.forEachInRange([r,i],(o=>{this.Gr(o),s.push(o.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new At(new Pr([])),r=new ao(n,e),i=new ao(n,e+1);let s=qn();return this.Ur.forEachInRange([r,i],(o=>{s=s.add(o.key)})),s}containsKey(e){const n=new ao(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ao{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return At.comparator(e.key,n.key)||Rn(e.Yr,n.Yr)}static Kr(e,n){return Rn(e.Yr,n.Yr)||At.comparator(e.key,n.key)}}class NOe{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Hr(ao.$r)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new PU(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new ao(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return xe.resolve(o)}lookupMutationBatch(e,n){return xe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?n1:this.tr-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ao(n,0),i=new ao(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(o=>{const a=this.Xr(o.Yr);s.push(a)})),xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Hr(Rn);return n.forEach((i=>{const s=new ao(i,0),o=new ao(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],(a=>{r=r.add(a.Yr)}))})),xe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;At.isDocumentKey(s)||(s=s.child(""));const o=new ao(new At(s),0);let a=new Hr(Rn);return this.Zr.forEachWhile((l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Yr)),!0)}),o),xe.resolve(this.ti(a))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){rn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return xe.forEach(n.mutations,(i=>{const s=new ao(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new ao(n,0),i=this.Zr.firstAfterOrEqual(r);return xe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class OOe{constructor(e){this.ri=e,this.docs=(function(){return new ki(At.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return xe.resolve(r?r.document.mutableCopy():Qi.newInvalidDocument(n))}getEntries(e,n){let r=hc();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Qi.newInvalidDocument(i))})),xe.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=hc();const o=n.path,a=new At(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||vU(Uue(u),r)<=0||(i.has(u.key)||aI(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return xe.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ht(9500)}ii(e,n){return xe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new LOe(this)}getSize(e){return xe.resolve(this.size)}}class LOe extends ode{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),xe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class DOe{constructor(e){this.persistence=e,this.si=new Ip((n=>D1(n)),sI),this.lastRemoteSnapshotVersion=an.min(),this.highestTargetId=0,this.oi=0,this._i=new DU,this.targetCount=0,this.ai=F1.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),xe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new F1(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,xe.resolve()}updateTargetData(e,n){return this.Pr(n),xe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)})),xe.waitFor(s).next((()=>i))}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return xe.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),xe.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((o=>{s.push(i.markPotentiallyOrphaned(e,o))})),xe.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),xe.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return xe.resolve(r)}containsKey(e,n){return xe.resolve(this._i.containsKey(n))}}class jU{constructor(e,n){this.ui={},this.overlays={},this.ci=new su(0),this.li=!1,this.li=!0,this.hi=new MOe,this.referenceDelegate=e(this),this.Pi=new DOe(this),this.indexManager=new xOe,this.remoteDocumentCache=(function(i){return new OOe(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Yhe(n),this.Ii=new COe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ROe,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new NOe(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ft("MemoryPersistence","Starting transaction:",e);const i=new jOe(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,n){return xe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class jOe extends Wue{constructor(e){super(),this.currentSequenceNumber=e}}class mO{constructor(e){this.persistence=e,this.Ri=new DU,this.Vi=null}static mi(e){return new mO(e)}get fi(){if(this.Vi)return this.Vi;throw Ht(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),xe.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),xe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),xe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.fi,(r=>{const i=At.fromPath(r);return this.gi(e,i).next((s=>{s||n.removeEntry(i,an.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return xe.or([()=>xe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class I4{constructor(e,n){this.persistence=e,this.pi=new Ip((r=>pa(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=sde(this,n)}static mi(e,n){return new I4(e,n)}Ei(){}di(e){return xe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return xe.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?xe.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(o=>this.br(e,o,n).next((a=>{a||(r++,s.removeEntry(o,an.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),xe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),xe.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),xe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=dM(e.data.value)),n}br(e,n,r){return xe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return xe.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class $Oe{constructor(e){this.serializer=e}k(e,n,r,i){const s=new eO("createOrUpgrade",n);r<1&&i>=1&&((function(l){l.createObjectStore(iI)})(e),(function(l){l.createObjectStore(Mk,{keyPath:YNe}),l.createObjectStore(Zu,{keyPath:wJ,autoIncrement:!0}).createIndex(Vy,bJ,{unique:!0}),l.createObjectStore(o2)})(e),hQ(e),(function(l){l.createObjectStore(ty)})(e));let o=xe.resolve();return r<3&&i>=3&&(r!==0&&((function(l){l.deleteObjectStore(l2),l.deleteObjectStore(a2),l.deleteObjectStore(r1)})(e),hQ(e)),o=o.next((()=>(function(l){const c=l.store(r1),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:an.min().toTimestamp(),targetCount:0};return c.put(v4,u)})(s)))),r<4&&i>=4&&(r!==0&&(o=o.next((()=>(function(l,c){return c.store(Zu).J().next((h=>{l.deleteObjectStore(Zu),l.createObjectStore(Zu,{keyPath:wJ,autoIncrement:!0}).createIndex(Vy,bJ,{unique:!0});const f=c.store(Zu),g=h.map((y=>f.put(y)));return xe.waitFor(g)}))})(e,s)))),o=o.next((()=>{(function(l){l.createObjectStore(c2,{keyPath:i5e})})(e)}))),r<5&&i>=5&&(o=o.next((()=>this.yi(s)))),r<6&&i>=6&&(o=o.next((()=>((function(l){l.createObjectStore(Nk)})(e),this.wi(s))))),r<7&&i>=7&&(o=o.next((()=>this.Si(s)))),r<8&&i>=8&&(o=o.next((()=>this.bi(e,s)))),r<9&&i>=9&&(o=o.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(o=o.next((()=>this.Di(s)))),r<11&&i>=11&&(o=o.next((()=>{(function(l){l.createObjectStore(nO,{keyPath:s5e})})(e),(function(l){l.createObjectStore(rO,{keyPath:o5e})})(e)}))),r<12&&i>=12&&(o=o.next((()=>{(function(l){const c=l.createObjectStore(iO,{keyPath:f5e});c.createIndex(k8,p5e,{unique:!1}),c.createIndex(Jue,m5e,{unique:!1})})(e)}))),r<13&&i>=13&&(o=o.next((()=>(function(l){const c=l.createObjectStore(y4,{keyPath:ZNe});c.createIndex(uM,JNe),c.createIndex(Kue,QNe)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(ty)))),r<14&&i>=14&&(o=o.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(o=o.next((()=>(function(l){l.createObjectStore(wU,{keyPath:a5e,autoIncrement:!0}).createIndex(T8,l5e,{unique:!1}),l.createObjectStore(lT,{keyPath:c5e}).createIndex(Xue,u5e,{unique:!1}),l.createObjectStore(cT,{keyPath:h5e}).createIndex(Zue,d5e,{unique:!1})})(e)))),r<16&&i>=16&&(o=o.next((()=>{n.objectStore(lT).clear()})).next((()=>{n.objectStore(cT).clear()}))),r<17&&i>=17&&(o=o.next((()=>{(function(l){l.createObjectStore(bU,{keyPath:g5e})})(e)}))),r<18&&i>=18&&Hce()&&(o=o.next((()=>{n.objectStore(lT).clear()})).next((()=>{n.objectStore(cT).clear()}))),o}wi(e){let n=0;return e.store(ty).ee(((r,i)=>{n+=A4(i)})).next((()=>{const r={byteSize:n};return e.store(Nk).put(S8,r)}))}yi(e){const n=e.store(Mk),r=e.store(Zu);return n.J().next((i=>xe.forEach(i,(s=>{const o=IDBKeyRange.bound([s.userId,n1],[s.userId,s.lastAcknowledgedBatchId]);return r.J(Vy,o).next((a=>xe.forEach(a,(l=>{rn(l.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Ay(this.serializer,l);return tde(e,s.userId,c).next((()=>{}))}))))}))))}Si(e){const n=e.store(l2),r=e.store(ty);return e.store(r1).get(v4).next((i=>{const s=[];return r.ee(((o,a)=>{const l=new Pr(o),c=(function(h){return[0,pa(h)]})(l);s.push(n.get(c).next((u=>u?xe.resolve():(h=>n.put({targetId:0,path:pa(h),sequenceNumber:i.highestListenSequenceNumber}))(l))))})).next((()=>xe.waitFor(s)))}))}bi(e,n){e.createObjectStore(Ok,{keyPath:r5e});const r=n.store(Ok),i=new LU,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:pa(l)})}};return n.store(ty).ee({X:!0},((o,a)=>{const l=new Pr(o);return s(l.popLast())})).next((()=>n.store(o2).ee({X:!0},(([o,a,l],c)=>{const u=gd(a);return s(u.popLast())}))))}Di(e){const n=e.store(a2);return n.ee(((r,i)=>{const s=hS(i),o=Xhe(this.serializer,s);return n.put(o)}))}Ci(e,n){const r=n.store(ty),i=[];return r.ee(((s,o)=>{const a=n.store(y4),l=(function(h){return h.document?new At(Pr.fromString(h.document.name).popFirst(5)):h.noDocument?At.fromSegments(h.noDocument.path):h.unknownDocument?At.fromSegments(h.unknownDocument.path):Ht(36783)})(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))})).next((()=>xe.waitFor(i)))}Fi(e,n){const r=n.store(Zu),i=ade(this.serializer),s=new jU(mO.mi,this.serializer.yt);return r.J().next((o=>{const a=new Map;return o.forEach((l=>{let c=a.get(l.userId)??qn();Ay(this.serializer,l).keys().forEach((u=>c=c.add(u))),a.set(l.userId,c)})),xe.forEach(a,((l,c)=>{const u=new Mo(c),h=fO.wt(this.serializer,u),f=s.getIndexManager(u),g=pO.wt(u,this.serializer,f,s.referenceDelegate);return new lde(i,g,h,f).recalculateAndSaveOverlaysForDocumentKeys(new A8(n,su.ce),l).next()}))}))}}function hQ(t){t.createObjectStore(l2,{keyPath:t5e}).createIndex(xU,n5e,{unique:!0}),t.createObjectStore(a2,{keyPath:"targetId"}).createIndex(Yue,e5e,{unique:!0}),t.createObjectStore(r1)}const um="IndexedDbPersistence",gj=18e5,yj=5e3,vj="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",FOe="main";class $U{constructor(e,n,r,i,s,o,a,l,c,u,h=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=s,this.window=o,this.document=a,this.xi=c,this.Oi=u,this.Ni=h,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=f=>Promise.resolve(),!$U.v())throw new Tt(We.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new kOe(this,i),this.$i=n+FOe,this.serializer=new Yhe(l),this.Ui=new Sg(this.$i,this.Ni,new $Oe(this.serializer)),this.hi=new pOe,this.Pi=new bOe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ade(this.serializer),this.Ii=new fOe,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,u===!1&&Oa(um,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Tt(We.FAILED_PRECONDITION,vj);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new su(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>CC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(a0(e))return ft(um,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ft(um,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return CE(e).get(y_).next((n=>xe.resolve(this.es(n))))}ts(e){return CC(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,gj)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Xs(n,c2);return r.J().next((i=>{const s=this.ss(i,gj),o=i.filter((a=>s.indexOf(a)===-1));return xe.forEach(o,(a=>r.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?xe.resolve(!0):CE(e).get(y_).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,yj)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Tt(We.FAILED_PRECONDITION,vj);return!1}}return!(!this.networkEnabled||!this.inForeground)||CC(e).J().next((r=>this.ss(r,yj).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&ft(um,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[iI,c2],(e=>{const n=new A8(e,su.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>CC(e).J().next((n=>this.ss(n,gj).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return pO.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wOe(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return fO.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){ft(um,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=(function(l){return l===18?_5e:l===17?nhe:l===16?v5e:l===15?EU:l===14?the:l===13?ehe:l===12?y5e:l===11?Que:void Ht(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,i,s,(a=>(o=new A8(a,this.ci?this.ci.next():su.ce),n==="readwrite-primary"?this.Hi(o).next((l=>!!l||this.Yi(o))).next((l=>{if(!l)throw Oa(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Tt(We.FAILED_PRECONDITION,Bue);return r(o)})).next((l=>this.Xi(o).next((()=>l)))):this.Is(o).next((()=>r(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Is(e){return CE(e).get(y_).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,yj)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Tt(We.FAILED_PRECONDITION,vj)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return CE(e).put(y_,n)}static v(){return Sg.v()}Zi(e){const n=CE(e);return n.get(y_).next((r=>this.es(r)?(ft(um,"Releasing primary lease."),n.delete(y_)):xe.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Oa(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;Wce()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return ft(um,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Oa(um,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Oa("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function CE(t){return Xs(t,iI)}function CC(t){return Xs(t,c2)}function VOe(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class FU{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=qn(),i=qn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new FU(e,n.fromCache,r,i)}}class zOe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class cde{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Wce()?8:Hue(Ks())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.ws(e,n,i,r).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new zOe;return this.Ss(e,n,o).next((a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)}))})).next((()=>s.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(W_()<=tr.DEBUG&&ft("QueryEngine","SDK will not create cache indexes for query:",H_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),xe.resolve()):(W_()<=tr.DEBUG&&ft("QueryEngine","Query:",H_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(W_()<=tr.DEBUG&&ft("QueryEngine","The SDK decides to create cache indexes for query:",H_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hu(n))):xe.resolve())}ys(e,n){if(LJ(n))return xe.resolve(null);let r=hu(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=O8(n,null,"F"),r=hu(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const o=qn(...s);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,r).next((l=>{const c=this.Ds(n,a);return this.Cs(n,c,o,l.readTime)?this.ys(e,O8(n,null,"F")):this.vs(e,c,n,l)}))))})))))}ws(e,n,r,i){return LJ(n)||i.isEqual(an.min())?xe.resolve(null):this.ps.getDocuments(e,r).next((s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?xe.resolve(null):(W_()<=tr.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),H_(n)),this.vs(e,o,n,GNe(i,Pk)).next((a=>a)))}))}Ds(e,n){let r=new Hr(bhe(e));return n.forEach(((i,s)=>{aI(e,s)&&(r=r.add(s))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return W_()<=tr.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",H_(n)),this.ps.getDocumentsMatchingQuery(e,n,_c.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((o=>{s=s.insert(o.key,o)})),s)))}}const VU="LocalStore",GOe=3e8;class UOe{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ki(Rn),this.xs=new Ip((s=>D1(s)),sI),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lde(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function ude(t,e,n,r){return new UOe(t,e,n,r)}async function hde(t,e){const n=Mn(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const o=[],a=[];let l=qn();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next((c=>({Ls:c,removedBatchIds:o,addedBatchIds:a})))}))}))}function BOe(t,e){const n=Mn(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,c,u){const h=c.batch,f=h.keys();let g=xe.resolve();return f.forEach((y=>{g=g.next((()=>u.getEntry(l,y))).next((_=>{const b=c.docVersions.get(y);rn(b!==null,48541),_.version.compareTo(b)<0&&(h.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(l,h)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=qn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function dde(t){const e=Mn(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function WOe(t,e){const n=Mn(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach(((u,h)=>{const f=i.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,u.removedDocuments,h).next((()=>n.Pi.addMatchingKeys(s,u.addedDocuments,h))));let g=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(Ns.EMPTY_BYTE_STRING,an.min()).withLastLimboFreeSnapshotVersion(an.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(h,g),(function(_,b,T){return _.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=GOe?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(f,g,u)&&a.push(n.Pi.updateTargetData(s,g))}));let l=hc(),c=qn();if(e.documentUpdates.forEach((u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))})),a.push(HOe(s,o,e.documentUpdates).next((u=>{l=u.ks,c=u.qs}))),!r.isEqual(an.min())){const u=n.Pi.getLastRemoteSnapshotVersion(s).next((h=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));a.push(u)}return xe.waitFor(a).next((()=>o.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,l,c))).next((()=>l))})).then((s=>(n.Ms=i,s)))}function HOe(t,e,n){let r=qn(),i=qn();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let o=hc();return n.forEach(((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(an.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ft(VU,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)})),{ks:o,qs:i}}))}function qOe(t,e){const n=Mn(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=n1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function KOe(t,e){const n=Mn(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((s=>s?(i=s,xe.resolve(i)):n.Pi.allocateTargetId(r).next((o=>(i=new Xf(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function G8(t,e,n){const r=Mn(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!a0(o))throw o;ft(VU,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function dQ(t,e,n){const r=Mn(t);let i=an.min(),s=qn();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,c,u){const h=Mn(l),f=h.xs.get(u);return f!==void 0?xe.resolve(h.Ms.get(f)):h.Pi.getTargetData(c,u)})(r,o,hu(e)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{s=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:an.min(),n?s:qn()))).next((a=>(YOe(r,O5e(e),a),{documents:a,Qs:s})))))}function YOe(t,e,n){let r=t.Os.get(e)||an.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.Os.set(e,r)}class fQ{constructor(){this.activeTargetIds=V5e()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fde{constructor(){this.Mo=new fQ,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new fQ,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class XOe{Oo(e){}shutdown(){}}const pQ="ConnectivityMonitor";class mQ{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ft(pQ,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ft(pQ,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let RC=null;function U8(){return RC===null?RC=(function(){return 268435456+Math.round(2147483648*Math.random())})():RC++,"0x"+RC.toString(16)}const _j="RestConnection",ZOe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JOe{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===_4?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=U8(),a=this.zo(e,n.toUriEncodedString());ft(_j,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:c}=new URL(a),u=dv(c);return this.Jo(e,a,l,r,u).then((h=>(ft(_j,`Received RPC '${e}' ${o}: `,h),h)),(h=>{throw O1(_j,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h}))}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ib})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,n){const r=ZOe[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class QOe{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Bo="WebChannelConnection";class eLe extends JOe{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=U8();return new Promise(((a,l)=>{const c=new Nue;c.setWithCredentials(!0),c.listenOnce(Oue.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case aM.NO_ERROR:const h=c.getResponseJson();ft(Bo,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case aM.TIMEOUT:ft(Bo,`RPC '${e}' ${o} timed out`),l(new Tt(We.DEADLINE_EXCEEDED,"Request time out"));break;case aM.HTTP_ERROR:const f=c.getStatus();if(ft(Bo,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g?.error;if(y&&y.status&&y.message){const _=(function(T){const A=T.toLowerCase().replace(/_/g,"-");return Object.values(We).indexOf(A)>=0?A:We.UNKNOWN})(y.status);l(new Tt(_,y.message))}else l(new Tt(We.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Tt(We.UNAVAILABLE,"Connection failed."));break;default:Ht(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{ft(Bo,`RPC '${e}' ${o} completed.`)}}));const u=JSON.stringify(i);ft(Bo,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",u,r,15)}))}T_(e,n,r){const i=U8(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jue(),a=Due(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");ft(Bo,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);this.I_(h);let f=!1,g=!1;const y=new QOe({Yo:b=>{g?ft(Bo,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(f||(ft(Bo,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),ft(Bo,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},Zo:()=>h.close()}),_=(b,T,A)=>{b.listen(T,(I=>{try{A(I)}catch(P){setTimeout((()=>{throw P}),0)}}))};return _(h,lS.EventType.OPEN,(()=>{g||(ft(Bo,`RPC '${e}' stream ${i} transport opened.`),y.o_())})),_(h,lS.EventType.CLOSE,(()=>{g||(g=!0,ft(Bo,`RPC '${e}' stream ${i} transport closed`),y.a_(),this.E_(h))})),_(h,lS.EventType.ERROR,(b=>{g||(g=!0,O1(Bo,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),y.a_(new Tt(We.UNAVAILABLE,"The operation could not be completed")))})),_(h,lS.EventType.MESSAGE,(b=>{if(!g){const T=b.data[0];rn(!!T,16349);const A=T,I=A?.error||A[0]?.error;if(I){ft(Bo,`RPC '${e}' stream ${i} received error:`,I);const P=I.status;let N=(function(M){const O=xs[M];if(O!==void 0)return Lhe(O)})(P),L=I.message;N===void 0&&(N=We.INTERNAL,L="Unknown error status: "+P+" with message "+I.message),g=!0,y.a_(new Tt(N,L)),h.close()}else ft(Bo,`RPC '${e}' stream ${i} received:`,T),y.u_(T)}})),_(a,Lue.STAT_EVENT,(b=>{b.stat===w8.PROXY?ft(Bo,`RPC '${e}' stream ${i} detected buffering proxy`):b.stat===w8.NOPROXY&&ft(Bo,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{y.__()}),0),y}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function tLe(){return typeof window<"u"?window:null}function yM(){return typeof document<"u"?document:null}function gO(t){return new nOe(t,!0)}class pde{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ft("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const gQ="PersistentStream";class mde{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new pde(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===We.RESOURCE_EXHAUSTED?(Oa(n.toString()),Oa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===We.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Tt(We.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ft(gQ,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ft(gQ,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nLe extends mde{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sOe(this.serializer,e),r=(function(s){if(!("targetChange"in s))return an.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?an.min():o.readTime?Va(o.readTime):an.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=j8(this.serializer),n.addTarget=(function(s,o){let a;const l=o.target;if(a=w4(l)?{documents:Uhe(s,l)}:{query:Bhe(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$he(s,o.resumeToken);const c=L8(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(an.min())>0){a.readTime=y2(s,o.snapshotVersion.toTimestamp());const c=L8(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,e);const r=aOe(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=j8(this.serializer),n.removeTarget=e,this.q_(n)}}class rLe extends mde{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return rn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,rn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){rn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=oOe(e.writeResults,e.commitTime),r=Va(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=j8(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>S4(this.serializer,r)))};this.q_(n)}}class iLe{}class sLe extends iLe{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Tt(We.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Go(e,D8(n,r),i,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Tt(We.UNKNOWN,s.toString())}))}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,D8(n,r),i,o,a,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===We.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Tt(We.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class oLe{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Oa(n),this.aa=!1):ft("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const V1="RemoteStore";class aLe{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{mv(this)&&(ft(V1,"Restarting streams for network reachability change."),await(async function(l){const c=Mn(l);c.Ea.add(4),await cI(c),c.Ra.set("Unknown"),c.Ea.delete(4),await yO(c)})(this))}))})),this.Ra=new oLe(r,i)}}async function yO(t){if(mv(t))for(const e of t.da)await e(!0)}async function cI(t){for(const e of t.da)await e(!1)}function gde(t,e){const n=Mn(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),BU(n)?UU(n):ob(n).O_()&&GU(n,e))}function zU(t,e){const n=Mn(t),r=ob(n);n.Ia.delete(e),r.O_()&&yde(n,e),n.Ia.size===0&&(r.O_()?r.L_():mv(n)&&n.Ra.set("Unknown"))}function GU(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(an.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ob(t).Y_(e)}function yde(t,e){t.Va.Ue(e),ob(t).Z_(e)}function UU(t){t.Va=new J5e({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ob(t).start(),t.Ra.ua()}function BU(t){return mv(t)&&!ob(t).x_()&&t.Ia.size>0}function mv(t){return Mn(t).Ea.size===0}function vde(t){t.Va=void 0}async function lLe(t){t.Ra.set("Online")}async function cLe(t){t.Ia.forEach(((e,n)=>{GU(t,e)}))}async function uLe(t,e){vde(t),BU(t)?(t.Ra.ha(e),UU(t)):t.Ra.set("Unknown")}async function hLe(t,e,n){if(t.Ra.set("Online"),e instanceof jhe&&e.state===2&&e.cause)try{await(async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){ft(V1,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await P4(t,r)}else if(e instanceof mM?t.Va.Ze(e):e instanceof Dhe?t.Va.st(e):t.Va.tt(e),!n.isEqual(an.min()))try{const r=await dde(t.localStore);n.compareTo(r)>=0&&await(function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.Ia.get(c);u&&s.Ia.set(c,u.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,c)=>{const u=s.Ia.get(l);if(!u)return;s.Ia.set(l,u.withResumeToken(Ns.EMPTY_BYTE_STRING,u.snapshotVersion)),yde(s,l);const h=new Xf(u.target,l,c,u.sequenceNumber);GU(s,h)})),s.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){ft(V1,"Failed to raise snapshot:",r),await P4(t,r)}}async function P4(t,e,n){if(!a0(e))throw e;t.Ea.add(1),await cI(t),t.Ra.set("Offline"),n||(n=()=>dde(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ft(V1,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await yO(t)}))}function _de(t,e){return e().catch((n=>P4(t,n,e)))}async function uI(t){const e=Mn(t),n=Vg(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:n1;for(;dLe(e);)try{const i=await qOe(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,fLe(e,i)}catch(i){await P4(e,i)}xde(e)&&wde(e)}function dLe(t){return mv(t)&&t.Ta.length<10}function fLe(t,e){t.Ta.push(e);const n=Vg(t);n.O_()&&n.X_&&n.ea(e.mutations)}function xde(t){return mv(t)&&!Vg(t).x_()&&t.Ta.length>0}function wde(t){Vg(t).start()}async function pLe(t){Vg(t).ra()}async function mLe(t){const e=Vg(t);for(const n of t.Ta)e.ea(n.mutations)}async function gLe(t,e,n){const r=t.Ta.shift(),i=CU.from(r,e,n);await _de(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await uI(t)}async function yLe(t,e){e&&Vg(t).X_&&await(async function(r,i){if((function(o){return Y5e(o)&&o!==We.ABORTED})(i.code)){const s=r.Ta.shift();Vg(r).B_(),await _de(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await uI(r)}})(t,e),xde(t)&&wde(t)}async function yQ(t,e){const n=Mn(t);n.asyncQueue.verifyOperationInProgress(),ft(V1,"RemoteStore received new credentials");const r=mv(n);n.Ea.add(3),await cI(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await yO(n)}async function vLe(t,e){const n=Mn(t);e?(n.Ea.delete(2),await yO(n)):e||(n.Ea.add(2),await cI(n),n.Ra.set("Unknown"))}function ob(t){return t.ma||(t.ma=(function(n,r,i){const s=Mn(n);return s.sa(),new nLe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:lLe.bind(null,t),t_:cLe.bind(null,t),r_:uLe.bind(null,t),H_:hLe.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),BU(t)?UU(t):t.Ra.set("Unknown")):(await t.ma.stop(),vde(t))}))),t.ma}function Vg(t){return t.fa||(t.fa=(function(n,r,i){const s=Mn(n);return s.sa(),new rLe(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:pLe.bind(null,t),r_:yLe.bind(null,t),ta:mLe.bind(null,t),na:gLe.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await uI(t)):(await t.fa.stop(),t.Ta.length>0&&(ft(V1,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class WU{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ed,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new WU(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Tt(We.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function HU(t,e){if(Oa("AsyncQueue",`${e}: ${t}`),a0(t))return new Tt(We.UNAVAILABLE,`${e}: ${t}`);throw t}class iw{static emptySet(e){return new iw(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||At.comparator(n.key,r.key):(n,r)=>At.comparator(n.key,r.key),this.keyedMap=cS(),this.sortedSet=new ki(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof iw)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new iw;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class vQ{constructor(){this.ga=new ki(At.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ht(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class v2{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new v2(e,n,iw.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lO(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class _Le{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class xLe{constructor(){this.queries=_Q(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Mn(n),s=i.queries;i.queries=_Q(),s.forEach(((o,a)=>{for(const l of a.Sa)l.onError(r)}))})(this,new Tt(We.ABORTED,"Firestore shutting down"))}}function _Q(){return new Ip((t=>whe(t)),lO)}async function bde(t,e){const n=Mn(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new _Le,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=HU(o,`Initialization of query '${H_(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&qU(n)}async function Ede(t,e){const n=Mn(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wLe(t,e){const n=Mn(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&qU(n)}function bLe(t,e,n){const r=Mn(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function qU(t){t.Ca.forEach((e=>{e.next()}))}var B8,xQ;(xQ=B8||(B8={})).Ma="default",xQ.Cache="cache";class Sde{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new v2(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=v2.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==B8.Cache}}class Tde{constructor(e){this.key=e}}class kde{constructor(e){this.key=e}}class ELe{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qn(),this.mutatedKeys=qn(),this.eu=bhe(e),this.tu=new iw(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new vQ,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((u,h)=>{const f=i.get(u),g=aI(this.query,h)?h:null,y=!!f&&this.mutatedKeys.has(f.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;f&&g?f.data.isEqual(g.data)?y!==_&&(r.track({type:3,doc:g}),b=!0):this.su(f,g)||(r.track({type:2,doc:g}),b=!0,(l&&this.eu(g,l)>0||c&&this.eu(g,c)<0)&&(a=!0)):!f&&g?(r.track({type:0,doc:g}),b=!0):f&&!g&&(r.track({type:1,doc:f}),b=!0,(l||c)&&(a=!0)),b&&(g?(o=o.add(g),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((u,h)=>(function(g,y){const _=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ht(20277,{Rt:b})}};return _(g)-_(y)})(u.type,h.type)||this.eu(u.doc,h.doc))),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new v2(this.query,e.tu,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vQ,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new kde(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new Tde(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=qn();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return v2.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const KU="SyncEngine";class SLe{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class TLe{constructor(e){this.key=e,this.hu=!1}}class kLe{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ip((a=>whe(a)),lO),this.Iu=new Map,this.Eu=new Set,this.du=new ki(At.comparator),this.Au=new Map,this.Ru=new DU,this.Vu={},this.mu=new Map,this.fu=F1.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ALe(t,e,n=!0){const r=Mde(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Ade(r,e,n,!0),i}async function ILe(t,e){const n=Mde(t);await Ade(n,e,!0,!1)}async function Ade(t,e,n,r){const i=await KOe(t.localStore,hu(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await PLe(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&gde(t.remoteStore,i),a}async function PLe(t,e,n,r,i){t.pu=(h,f,g)=>(async function(_,b,T,A){let I=b.view.ru(T);I.Cs&&(I=await dQ(_.localStore,b.query,!1).then((({documents:C})=>b.view.ru(C,I))));const P=A&&A.targetChanges.get(b.targetId),N=A&&A.targetMismatches.get(b.targetId)!=null,L=b.view.applyChanges(I,_.isPrimaryClient,P,N);return bQ(_,b.targetId,L.au),L.snapshot})(t,h,f,g);const s=await dQ(t.localStore,e,!0),o=new ELe(e,s.Qs),a=o.ru(s.documents),l=lI.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);bQ(t,n,c.au);const u=new SLe(e,n,o);return t.Tu.set(e,u),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function CLe(t,e,n){const r=Mn(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((o=>!lO(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await G8(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&zU(r.remoteStore,i.targetId),W8(r,i.targetId)})).catch(pv)):(W8(r,i.targetId),await G8(r.localStore,i.targetId,!0))}async function RLe(t,e){const n=Mn(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zU(n.remoteStore,r.targetId))}async function MLe(t,e,n){const r=Nde(t);try{const i=await(function(o,a){const l=Mn(o),c=Ur.now(),u=a.reduce(((g,y)=>g.add(y.key)),qn());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let y=hc(),_=qn();return l.Ns.getEntries(g,u).next((b=>{y=b,y.forEach(((T,A)=>{A.isValidDocument()||(_=_.add(T))}))})).next((()=>l.localDocuments.getOverlayedDocuments(g,y))).next((b=>{h=b;const T=[];for(const A of a){const I=q5e(A,h.get(A.key).overlayedDocument);I!=null&&T.push(new Pp(A.key,I,dhe(I.value.mapValue),ua.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,T,a)})).next((b=>{f=b;const T=b.applyToLocalDocumentSet(h,_);return l.documentOverlayCache.saveOverlays(g,b.batchId,T)}))})).then((()=>({batchId:f.batchId,changes:She(h)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new ki(Rn)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c})(r,i.batchId,n),await hI(r,i.changes),await uI(r.remoteStore)}catch(i){const s=HU(i,"Failed to persist write");n.reject(s)}}async function Ide(t,e){const n=Mn(t);try{const r=await WOe(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const o=n.Au.get(s);o&&(rn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?rn(o.hu,14607):i.removedDocuments.size>0&&(rn(o.hu,42227),o.hu=!1))})),await hI(n,r,e)}catch(r){await pv(r)}}function wQ(t,e,n){const r=Mn(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=Mn(o);l.onlineState=a;let c=!1;l.queries.forEach(((u,h)=>{for(const f of h.Sa)f.va(a)&&(c=!0)})),c&&qU(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NLe(t,e,n){const r=Mn(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new ki(At.comparator);o=o.insert(s,Qi.newNoDocument(s,an.min()));const a=qn().add(s),l=new dO(an.min(),new Map,new ki(Rn),o,a);await Ide(r,l),r.du=r.du.remove(s),r.Au.delete(e),YU(r)}else await G8(r.localStore,e,!1).then((()=>W8(r,e,n))).catch(pv)}async function OLe(t,e){const n=Mn(t),r=e.batch.batchId;try{const i=await BOe(n.localStore,e);Cde(n,r,null),Pde(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hI(n,i)}catch(i){await pv(i)}}async function LLe(t,e,n){const r=Mn(t);try{const i=await(function(o,a){const l=Mn(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next((h=>(rn(h!==null,37113),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u))).next((()=>l.localDocuments.getDocuments(c,u)))}))})(r.localStore,e);Cde(r,e,n),Pde(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hI(r,i)}catch(i){await pv(i)}}function Pde(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Cde(t,e,n){const r=Mn(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function W8(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||Rde(t,r)}))}function Rde(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(zU(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),YU(t))}function bQ(t,e,n){for(const r of n)r instanceof Tde?(t.Ru.addReference(r.key,e),DLe(t,r)):r instanceof kde?(ft(KU,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Rde(t,r.key)):Ht(19791,{wu:r})}function DLe(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ft(KU,"New document in limbo: "+n),t.Eu.add(r),YU(t))}function YU(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new At(Pr.fromString(e)),r=t.fu.next();t.Au.set(r,new TLe(n)),t.du=t.du.insert(n,r),gde(t.remoteStore,new Xf(hu(aO(n.path)),r,"TargetPurposeLimboResolution",su.ce))}}async function hI(t,e,n){const r=Mn(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((a,l)=>{o.push(r.pu(l,e,n).then((c=>{if((c||n)&&r.isPrimaryClient){const u=c?!c.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,u?"current":"not-current")}if(c){i.push(c);const u=FU.As(l.targetId,c);s.push(u)}})))})),await Promise.all(o),r.Pu.H_(i),await(async function(l,c){const u=Mn(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",(h=>xe.forEach(c,(f=>xe.forEach(f.Es,(g=>u.persistence.referenceDelegate.addReference(h,f.targetId,g))).next((()=>xe.forEach(f.ds,(g=>u.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))))))}catch(h){if(!a0(h))throw h;ft(VU,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const g=u.Ms.get(f),y=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(y);u.Ms=u.Ms.insert(f,_)}}})(r.localStore,s))}async function jLe(t,e){const n=Mn(t);if(!n.currentUser.isEqual(e)){ft(KU,"User change. New user:",e.toKey());const r=await hde(n.localStore,e);n.currentUser=e,(function(s,o){s.mu.forEach((a=>{a.forEach((l=>{l.reject(new Tt(We.CANCELLED,o))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hI(n,r.Ls)}}function $Le(t,e){const n=Mn(t),r=n.Au.get(e);if(r&&r.hu)return qn().add(r.key);{let i=qn();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function Mde(t){const e=Mn(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ide.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$Le.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NLe.bind(null,e),e.Pu.H_=wLe.bind(null,e.eventManager),e.Pu.yu=bLe.bind(null,e.eventManager),e}function Nde(t){const e=Mn(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OLe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LLe.bind(null,e),e}class Vk{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gO(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ude(this.persistence,new cde,e.initialUser,this.serializer)}Cu(e){return new jU(mO.mi,this.serializer)}Du(e){return new fde}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vk.provider={build:()=>new Vk};class FLe extends Vk{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){rn(this.persistence.referenceDelegate instanceof I4,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ide(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ta.withCacheSize(this.cacheSizeBytes):ta.DEFAULT;return new jU((r=>I4.mi(r,n)),this.serializer)}}class VLe extends Vk{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Nde(this.xu.syncEngine),await uI(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return ude(this.persistence,new cde,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new ide(r,e.asyncQueue,n)}Mu(e,n){const r=new HNe(n,this.persistence);return new WNe(e.asyncQueue,r)}Cu(e){const n=VOe(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ta.withCacheSize(this.cacheSizeBytes):ta.DEFAULT;return new $U(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,tLe(),yM(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new fde}}class C4{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wQ(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jLe.bind(null,this.syncEngine),await vLe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xLe})()}createDatastore(e){const n=gO(e.databaseInfo.databaseId),r=(function(s){return new eLe(s)})(e.databaseInfo);return(function(s,o,a,l){return new sLe(s,o,a,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,o,a){return new aLe(r,i,s,o,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>wQ(this.syncEngine,n,0)),(function(){return mQ.v()?new mQ:new XOe})())}createSyncEngine(e,n){return(function(i,s,o,a,l,c,u){const h=new kLe(i,s,o,a,l,c);return u&&(h.gu=!0),h})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=Mn(n);ft(V1,"RemoteStore shutting down."),r.Ea.add(5),await cI(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}C4.provider={build:()=>new C4};class Ode{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Oa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const zg="FirestoreClient";class zLe{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mo.UNAUTHENTICATED,this.clientId=yU.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async o=>{ft(zg,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(ft(zg,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ed;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=HU(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function xj(t,e){t.asyncQueue.verifyOperationInProgress(),ft(zg,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await hde(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function EQ(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GLe(t);ft(zg,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>yQ(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>yQ(e.remoteStore,i))),t._onlineComponents=e}async function GLe(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ft(zg,"Using user provided OfflineComponentProvider");try{await xj(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===We.FAILED_PRECONDITION||i.code===We.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;O1("Error using user provided cache. Falling back to memory cache: "+n),await xj(t,new Vk)}}else ft(zg,"Using default OfflineComponentProvider"),await xj(t,new FLe(void 0));return t._offlineComponents}async function Lde(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ft(zg,"Using user provided OnlineComponentProvider"),await EQ(t,t._uninitializedComponentsProvider._online)):(ft(zg,"Using default OnlineComponentProvider"),await EQ(t,new C4))),t._onlineComponents}function ULe(t){return Lde(t).then((e=>e.syncEngine))}async function Dde(t){const e=await Lde(t),n=e.eventManager;return n.onListen=ALe.bind(null,e.syncEngine),n.onUnlisten=CLe.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ILe.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RLe.bind(null,e.syncEngine),n}function BLe(t,e,n={}){const r=new Ed;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,c){const u=new Ode({next:f=>{u.Nu(),o.enqueueAndForget((()=>Ede(s,h)));const g=f.docs.has(a);!g&&f.fromCache?c.reject(new Tt(We.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new Tt(We.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Sde(aO(a.path),u,{includeMetadataChanges:!0,qa:!0});return bde(s,h)})(await Dde(t),t.asyncQueue,e,n,r))),r.promise}function WLe(t,e,n={}){const r=new Ed;return t.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,c){const u=new Ode({next:f=>{u.Nu(),o.enqueueAndForget((()=>Ede(s,h))),f.fromCache&&l.source==="server"?c.reject(new Tt(We.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Sde(a,u,{includeMetadataChanges:!0,qa:!0});return bde(s,h)})(await Dde(t),t.asyncQueue,e,n,r))),r.promise}function jde(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const SQ=new Map;const $de="firestore.googleapis.com",TQ=!0;class kQ{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Tt(We.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$de,this.ssl=TQ}else this.host=e.host,this.ssl=e.ssl??TQ;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ede;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<EOe)throw new Tt(We.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zNe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jde(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Tt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Tt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Tt(We.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vO{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kQ({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Tt(We.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Tt(We.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kQ(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new RNe;switch(r.type){case"firstParty":return new LNe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Tt(We.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=SQ.get(n);r&&(ft("ComponentProvider","Removing Datastore"),SQ.delete(n),r.terminate())})(this),Promise.resolve()}}function HLe(t,e,n,r={}){t=yu(t,vO);const i=dv(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(nU(`https://${a}`),rU("Firestore",!0)),s.host!==$de&&s.host!==a&&O1("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!C1(l,o)&&(t._setSettings(l),r.mockUserToken)){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Mo.MOCK_USER;else{c=Uce(r.mockUserToken,t._app?.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Tt(We.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Mo(h)}t._authCredentials=new MNe(new Fue(c,u))}}class ab{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ab(this.firestore,e,this._query)}}class fs{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fs(this.firestore,e,this._key)}toJSON(){return{type:fs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(rI(n,fs._jsonSchema))return new fs(e,r||null,new At(Pr.fromString(n.referencePath)))}}fs._jsonSchemaVersion="firestore/documentReference/1.0",fs._jsonSchema={type:Cs("string",fs._jsonSchemaVersion),referencePath:Cs("string")};class Tg extends ab{constructor(e,n,r){super(e,n,aO(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fs(this.firestore,null,new At(e))}withConverter(e){return new Tg(this.firestore,e,this._path)}}function AQ(t,e,...n){if(t=mo(t),zue("collection","path",e),t instanceof vO){const r=Pr.fromString(e,...n);return gJ(r),new Tg(t,null,r)}{if(!(t instanceof fs||t instanceof Tg))throw new Tt(We.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pr.fromString(e,...n));return gJ(r),new Tg(t.firestore,null,r)}}function zy(t,e,...n){if(t=mo(t),arguments.length===1&&(e=yU.newId()),zue("doc","path",e),t instanceof vO){const r=Pr.fromString(e,...n);return mJ(r),new fs(t,null,new At(r))}{if(!(t instanceof fs||t instanceof Tg))throw new Tt(We.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pr.fromString(e,...n));return mJ(r),new fs(t.firestore,t instanceof Tg?t.converter:null,new At(r))}}const IQ="AsyncQueue";class PQ{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new pde(this,"async_queue_retry"),this._c=()=>{const r=yM();r&&ft(IQ,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=yM();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yM();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ed;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!a0(e))throw e;ft(IQ,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Oa("INTERNAL UNHANDLED ERROR: ",CQ(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=WU.createAndSchedule(this,e,n,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&Ht(47125,{Pc:CQ(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function CQ(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class c0 extends vO{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new PQ,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new PQ(e),this._firestoreClient=void 0,await e}}}function qLe(t,e){const n=typeof t=="object"?t:oU(),r=typeof t=="string"?t:_4,i=Y5(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Vce("firestore");s&&HLe(i,...s)}return i}function XU(t){if(t._terminated)throw new Tt(We.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Fde(t),t._firestoreClient}function Fde(t){const e=t._freezeSettings(),n=(function(i,s,o,a){return new w5e(i,s,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,jde(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new zLe(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(t._componentsProvider))}function KLe(t,e){O1("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return YLe(t,C4.provider,{build:r=>new VLe(r,n.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function YLe(t,e,n){if((t=yu(t,c0))._firestoreClient||t._terminated)throw new Tt(We.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new Tt(We.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},Fde(t)}class eu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new eu(Ns.fromBase64String(e))}catch(n){throw new Tt(We.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new eu(Ns.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:eu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(rI(e,eu._jsonSchema))return eu.fromBase64String(e.bytes)}}eu._jsonSchemaVersion="firestore/bytes/1.0",eu._jsonSchema={type:Cs("string",eu._jsonSchemaVersion),bytes:Cs("string")};class _O{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Tt(We.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ji(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xO{constructor(e){this._methodName=e}}class Sd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Tt(We.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Tt(We.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Rn(this._lat,e._lat)||Rn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sd._jsonSchemaVersion}}static fromJSON(e){if(rI(e,Sd._jsonSchema))return new Sd(e.latitude,e.longitude)}}Sd._jsonSchemaVersion="firestore/geoPoint/1.0",Sd._jsonSchema={type:Cs("string",Sd._jsonSchemaVersion),latitude:Cs("number"),longitude:Cs("number")};class Td{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Td._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(rI(e,Td._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Td(e.vectorValues);throw new Tt(We.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Td._jsonSchemaVersion="firestore/vectorValue/1.0",Td._jsonSchema={type:Cs("string",Td._jsonSchemaVersion),vectorValues:Cs("object")};const XLe=/^__.*__$/;class ZLe{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pp(e,this.data,this.fieldMask,n,this.fieldTransforms):new sb(e,this.data,n,this.fieldTransforms)}}class Vde{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Pp(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zde(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ht(40011,{Ac:t})}}class ZU{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ZU({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return R4(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(zde(this.Ac)&&XLe.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class JLe{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gO(e)}Cc(e,n,r,i=!1){return new ZU({Ac:e,methodName:n,Dc:r,path:ji.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wO(t){const e=t._freezeSettings(),n=gO(t._databaseId);return new JLe(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Gde(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);QU("Data must be an object, but it was:",o,r);const a=Ude(r,o);let l,c;if(s.merge)l=new wl(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const f=H8(e,h,n);if(!o.contains(f))throw new Tt(We.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Wde(u,f)||u.push(f)}l=new wl(u),c=o.fieldTransforms.filter((h=>l.covers(h.field)))}else l=null,c=o.fieldTransforms;return new ZLe(new aa(a),l,c)}class bO extends xO{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bO}}class JU extends xO{_toFieldTransform(e){return new Rhe(e.path,new p2)}isEqual(e){return e instanceof JU}}function QLe(t,e,n,r){const i=t.Cc(1,e,n);QU("Data must be an object, but it was:",i,r);const s=[],o=aa.empty();l0(r,((l,c)=>{const u=eB(e,l,n);c=mo(c);const h=i.yc(u);if(c instanceof bO)s.push(u);else{const f=dI(c,h);f!=null&&(s.push(u),o.set(u,f))}}));const a=new wl(s);return new Vde(o,a,i.fieldTransforms)}function eDe(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[H8(e,r,n)],l=[i];if(s.length%2!=0)throw new Tt(We.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(H8(e,s[f])),l.push(s[f+1]);const c=[],u=aa.empty();for(let f=a.length-1;f>=0;--f)if(!Wde(c,a[f])){const g=a[f];let y=l[f];y=mo(y);const _=o.yc(g);if(y instanceof bO)c.push(g);else{const b=dI(y,_);b!=null&&(c.push(g),u.set(g,b))}}const h=new wl(c);return new Vde(u,h,o.fieldTransforms)}function tDe(t,e,n,r=!1){return dI(n,t.Cc(r?4:3,e))}function dI(t,e){if(Bde(t=mo(t)))return QU("Unsupported field value:",e,t),Ude(t,e);if(t instanceof xO)return(function(r,i){if(!zde(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let o=0;for(const a of r){let l=dI(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=mo(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return z5e(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ur.fromDate(r);return{timestampValue:y2(i.serializer,s)}}if(r instanceof Ur){const s=new Ur(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:y2(i.serializer,s)}}if(r instanceof Sd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof eu)return{bytesValue:$he(i.serializer,r._byteString)};if(r instanceof fs){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:NU(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Td)return(function(o,a){return{mapValue:{fields:{[TU]:{stringValue:kU},[u2]:{arrayValue:{values:o.toArray().map((c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return IU(a.serializer,c)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Q5(r)}`)})(t,e)}function Ude(t,e){const n={};return rhe(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):l0(t,((r,i)=>{const s=dI(i,e.mc(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function Bde(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ur||t instanceof Sd||t instanceof eu||t instanceof fs||t instanceof xO||t instanceof Td)}function QU(t,e,n){if(!Bde(n)||!Gue(n)){const r=Q5(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function H8(t,e,n){if((e=mo(e))instanceof _O)return e._internalPath;if(typeof e=="string")return eB(t,e);throw R4("Field path arguments must be of type string or ",t,!1,void 0,n)}const nDe=new RegExp("[~\\*/\\[\\]]");function eB(t,e,n){if(e.search(nDe)>=0)throw R4(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _O(...e.split("."))._internalPath}catch{throw R4(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function R4(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Tt(We.INVALID_ARGUMENT,a+t+l)}function Wde(t,e){return t.some((n=>n.isEqual(e)))}class Hde{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new fs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rDe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tB("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rDe extends Hde{data(){return super.data()}}function tB(t,e){return typeof e=="string"?eB(t,e):e instanceof _O?e._internalPath:e._delegate._internalPath}function iDe(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Tt(We.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nB{}class sDe extends nB{}function oDe(t,e,...n){let r=[];e instanceof nB&&r.push(e),r=r.concat(n),(function(s){const o=s.filter((l=>l instanceof rB)).length,a=s.filter((l=>l instanceof EO)).length;if(o>1||o>0&&a>0)throw new Tt(We.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class EO extends sDe{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new EO(e,n,r)}_apply(e){const n=this._parse(e);return qde(e._query,n),new ab(e.firestore,e.converter,N8(e._query,n))}_parse(e){const n=wO(e.firestore);return(function(s,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Tt(We.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){MQ(h,u);const y=[];for(const _ of h)y.push(RQ(l,s,_));f={arrayValue:{values:y}}}else f=RQ(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||MQ(h,u),f=tDe(a,o,h,u==="in"||u==="not-in");return rr.create(c,u,f)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function aDe(t,e,n){const r=e,i=tB("where",t);return EO._create(i,r,n)}class rB extends nB{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new rB(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)qde(o,l),o=N8(o,l)})(e._query,n),new ab(e.firestore,e.converter,N8(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function RQ(t,e,n){if(typeof(n=mo(n))=="string"){if(n==="")throw new Tt(We.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xhe(e)&&n.indexOf("/")!==-1)throw new Tt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pr.fromString(n));if(!At.isDocumentKey(r))throw new Tt(We.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jk(t,new At(r))}if(n instanceof fs)return jk(t,n._key);throw new Tt(We.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Q5(n)}.`)}function MQ(t,e){if(!Array.isArray(t)||t.length===0)throw new Tt(We.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qde(t,e){const n=(function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Tt(We.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Tt(We.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lDe{convertValue(e,n="none"){switch($g(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_p(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ht(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return l0(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){const n=e.fields?.[u2].arrayValue?.values?.map((r=>bi(r.doubleValue)));return new Td(n)}convertGeoPoint(e){return new Sd(bi(e.latitude),bi(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sO(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Lk(e));default:return null}}convertTimestamp(e){const n=vp(e);return new Ur(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pr.fromString(e);rn(Khe(r),9688,{name:e});const i=new L1(r.get(1),r.get(3)),s=new At(r.popFirst(5));return i.isEqual(n)||Oa(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function Kde(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class dS{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class s1 extends Hde{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(tB("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Tt(We.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=s1._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}s1._jsonSchemaVersion="firestore/documentSnapshot/1.0",s1._jsonSchema={type:Cs("string",s1._jsonSchemaVersion),bundleSource:Cs("string","DocumentSnapshot"),bundleName:Cs("string"),bundle:Cs("string")};class vM extends s1{data(e={}){return super.data(e)}}class sw{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new dS(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new vM(this._firestore,this._userDataWriter,r.key,r,new dS(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Tt(We.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new vM(i._firestore,i._userDataWriter,a.doc.key,a.doc,new dS(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>s||a.type!==3)).map((a=>{const l=new vM(i._firestore,i._userDataWriter,a.doc.key,a.doc,new dS(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:cDe(a.type),doc:l,oldIndex:c,newIndex:u}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Tt(We.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=sw._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yU.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cDe(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ht(61501,{type:t})}}function uDe(t){t=yu(t,fs);const e=yu(t.firestore,c0);return BLe(XU(e),t._key).then((n=>mDe(e,t,n)))}sw._jsonSchemaVersion="firestore/querySnapshot/1.0",sw._jsonSchema={type:Cs("string",sw._jsonSchemaVersion),bundleSource:Cs("string","QuerySnapshot"),bundleName:Cs("string"),bundle:Cs("string")};class Yde extends lDe{constructor(e){super(),this.firestore=e}convertBytes(e){return new eu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new fs(this.firestore,null,n)}}function hDe(t){t=yu(t,ab);const e=yu(t.firestore,c0),n=XU(e),r=new Yde(e);return iDe(t._query),WLe(n,t._query).then((i=>new sw(e,r,t,i)))}function wj(t,e,n){t=yu(t,fs);const r=yu(t.firestore,c0),i=Kde(t.converter,e,n);return SO(r,[Gde(wO(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ua.none())])}function dDe(t,e,n,...r){t=yu(t,fs);const i=yu(t.firestore,c0),s=wO(i);let o;return o=typeof(e=mo(e))=="string"||e instanceof _O?eDe(s,"updateDoc",t._key,e,n,r):QLe(s,"updateDoc",t._key,e),SO(i,[o.toMutation(t._key,ua.exists(!0))])}function fDe(t){return SO(yu(t.firestore,c0),[new hO(t._key,ua.none())])}function pDe(t,e){const n=yu(t.firestore,c0),r=zy(t),i=Kde(t.converter,e);return SO(n,[Gde(wO(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ua.exists(!1))]).then((()=>r))}function SO(t,e){return(function(r,i){const s=new Ed;return r.asyncQueue.enqueueAndForget((async()=>MLe(await ULe(r),i,s))),s.promise})(XU(t),e)}function mDe(t,e,n){const r=n.docs.get(e._key),i=new Yde(t);return new s1(t,i,e._key,r,new dS(n.hasPendingWrites,n.fromCache),e.converter)}function bj(){return new JU("serverTimestamp")}(function(e,n=!0){(function(i){ib=i})(fv),R1(new Dg("firestore",((r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new c0(new NNe(r.getProvider("auth-internal")),new DNe(o,r.getProvider("app-check-internal")),(function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Tt(We.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new L1(c.options.projectId,u)})(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),wd(hJ,dJ,e),wd(hJ,dJ,"esm2020")})();const Xde="firebasestorage.googleapis.com",gDe="storageBucket",yDe=120*1e3,vDe=600*1e3;class qd extends Hd{constructor(e,n,r=0){super(Ej(e),`Firebase Storage: ${n} (${Ej(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qd.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ej(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ld;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ld||(Ld={}));function Ej(t){return"storage/"+t}function _De(){const t="An unknown error occurred, please check the error payload for server response.";return new qd(Ld.UNKNOWN,t)}function xDe(){return new qd(Ld.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wDe(){return new qd(Ld.CANCELED,"User canceled the upload/download.")}function bDe(t){return new qd(Ld.INVALID_URL,"Invalid URL '"+t+"'.")}function EDe(t){return new qd(Ld.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function NQ(t){return new qd(Ld.INVALID_ARGUMENT,t)}function Zde(){return new qd(Ld.APP_DELETED,"The Firebase app was deleted.")}function SDe(t){return new qd(Ld.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}class lh{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=lh.makeFromUrl(e,n)}catch{return new lh(e,"")}if(r.path==="")return r;throw EDe(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${u}/b/${i}/o${f}`,"i"),y={bucket:1,path:3},_=n===Xde?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",T=new RegExp(`^https?://${_}/${i}/${b}`,"i"),I=[{regex:a,indices:l,postModify:s},{regex:g,indices:y,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<I.length;P++){const N=I[P],L=N.regex.exec(e);if(L){const C=L[N.indices.bucket];let M=L[N.indices.path];M||(M=""),r=new lh(C,M),N.postModify(r);break}}if(r==null)throw bDe(e);return r}}class TDe{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function kDe(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...b){c||(c=!0,e.apply(null,b))}function h(b){i=setTimeout(()=>{i=null,t(g,l())},b)}function f(){s&&clearTimeout(s)}function g(b,...T){if(c){f();return}if(b){f(),u.call(null,b,...T);return}if(l()||o){f(),u.call(null,b,...T);return}r<64&&(r*=2);let I;a===1?(a=2,I=0):I=(r+Math.random())*1e3,h(I)}let y=!1;function _(b){y||(y=!0,f(),!c&&(i!==null?(b||(a=2),clearTimeout(i),h(0)):b||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function ADe(t){t(!1)}function IDe(t){return t!==void 0}function OQ(t,e,n,r){if(r<e)throw NQ(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw NQ(`Invalid value for '${t}'. Expected ${n} or less.`)}function PDe(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var M4;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(M4||(M4={}));function CDe(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}class RDe{constructor(e,n,r,i,s,o,a,l,c,u,h,f=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,_)=>{this.resolve_=y,this.reject_=_,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new MC(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===M4.NO_ERROR,l=s.getStatus();if(!a||CDe(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===M4.ABORT;r(!1,new MC(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new MC(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());IDe(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=_De();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?Zde():wDe();o(l)}else{const l=xDe();o(l)}};this.canceled_?n(!1,new MC(!1,null,!0)):this.backoffId_=kDe(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ADe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class MC{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function MDe(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function NDe(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ODe(t,e){e&&(t["X-Firebase-GMPID"]=e)}function LDe(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function DDe(t,e,n,r,i,s,o=!0,a=!1){const l=PDe(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return ODe(u,e),MDe(u,n),NDe(u,s),LDe(u,r),new RDe(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}function jDe(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function $De(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class N4{constructor(e,n){this._service=e,n instanceof lh?this._location=n:this._location=lh.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new N4(e,n)}get root(){const e=new lh(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $De(this._location.path)}get storage(){return this._service}get parent(){const e=jDe(this._location.path);if(e===null)return null;const n=new lh(this._location.bucket,e);return new N4(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw SDe(e)}}function LQ(t,e){const n=e?.[gDe];return n==null?null:lh.makeFromBucketSpec(n,t)}function FDe(t,e,n,r={}){t.host=`${e}:${n}`;const i=dv(e);i&&(nU(`https://${t.host}/b`),rU("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Uce(s,t.app.options.projectId))}class VDe{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=Xde,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yDe,this._maxUploadRetryTime=vDe,this._requests=new Set,i!=null?this._bucket=lh.makeFromBucketSpec(i,this._host):this._bucket=LQ(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=lh.makeFromBucketSpec(this._url,e):this._bucket=LQ(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){OQ("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){OQ("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(cc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new N4(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new TDe(Zde());{const o=DDe(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const DQ="@firebase/storage",jQ="0.14.0";const Jde="storage";function zDe(t=oU(),e){t=mo(t);const r=Y5(t,Jde).getImmediate({identifier:e}),i=Vce("storage");return i&&GDe(r,...i),r}function GDe(t,e,n,r={}){FDe(t,e,n,r)}function UDe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new VDe(n,r,i,e,fv)}function BDe(){R1(new Dg(Jde,UDe,"PUBLIC").setMultipleInstances(!0)),wd(DQ,jQ,""),wd(DQ,jQ,"esm2020")}BDe();const WDe={apiKey:"AIzaSyBcLuKvUr5XqEJTwOf9I0hqJ1o9g3kOZ-g",authDomain:"detectorapp-nl.firebaseapp.com",projectId:"detectorapp-nl",storageBucket:"detectorapp-nl.firebasestorage.app",messagingSenderId:"110954177210",appId:"1:110954177210:web:d77c9ed262ad92bc431883"},iB=Xce(WDe),Gy=ANe(iB),Zf=qLe(iB);zDe(iB);KLe(Zf).catch(t=>{t.code==="failed-precondition"?console.warn("Offline persistence failed: Multiple tabs open"):t.code==="unimplemented"&&console.warn("Offline persistence not available in this browser")});const HDe={};function qDe(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=l=>l===null?null:JSON.parse(l,void 0),a=(s=n.getItem(i))!=null?s:null;return a instanceof Promise?a.then(o):o(a)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const zk=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return zk(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return zk(r)(n)}}}},KDe=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,T)=>({...T,...b}),...e},o=!1;const a=new Set,l=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...b)},r,i);const u=zk(s.serialize),h=()=>{const b=s.partialize({...r()});let T;const A=u({state:b,version:s.version}).then(I=>c.setItem(s.name,I)).catch(I=>{T=I});if(T)throw T;return A},f=i.setState;i.setState=(b,T)=>{f(b,T),h()};const g=t((...b)=>{n(...b),h()},r,i);let y;const _=()=>{var b;if(!c)return;o=!1,a.forEach(A=>A(r()));const T=((b=s.onRehydrateStorage)==null?void 0:b.call(s,r()))||void 0;return zk(c.getItem.bind(c))(s.name).then(A=>{if(A)return s.deserialize(A)}).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==s.version){if(s.migrate)return s.migrate(A.state,A.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return A.state}).then(A=>{var I;return y=s.merge(A,(I=r())!=null?I:g),n(y,!0),h()}).then(()=>{T?.(y,void 0),o=!0,l.forEach(A=>A(y))}).catch(A=>{T?.(void 0,A)})};return i.persist={setOptions:b=>{s={...s,...b},b.getStorage&&(c=b.getStorage())},clearStorage:()=>{c?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>_(),hasHydrated:()=>o,onHydrate:b=>(a.add(b),()=>{a.delete(b)}),onFinishHydration:b=>(l.add(b),()=>{l.delete(b)})},_(),y||g},YDe=(t,e)=>(n,r,i)=>{let s={storage:qDe(()=>localStorage),partialize:_=>_,version:0,merge:(_,b)=>({...b,..._}),...e},o=!1;const a=new Set,l=new Set;let c=s.storage;if(!c)return t((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(..._)},r,i);const u=()=>{const _=s.partialize({...r()});return c.setItem(s.name,{state:_,version:s.version})},h=i.setState;i.setState=(_,b)=>{h(_,b),u()};const f=t((..._)=>{n(..._),u()},r,i);i.getInitialState=()=>f;let g;const y=()=>{var _,b;if(!c)return;o=!1,a.forEach(A=>{var I;return A((I=r())!=null?I:f)});const T=((b=s.onRehydrateStorage)==null?void 0:b.call(s,(_=r())!=null?_:f))||void 0;return zk(c.getItem.bind(c))(s.name).then(A=>{if(A)if(typeof A.version=="number"&&A.version!==s.version){if(s.migrate)return[!0,s.migrate(A.state,A.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,A.state];return[!1,void 0]}).then(A=>{var I;const[P,N]=A;if(g=s.merge(N,(I=r())!=null?I:f),n(g,!0),P)return u()}).then(()=>{T?.(g,void 0),g=r(),o=!0,l.forEach(A=>A(g))}).catch(A=>{T?.(void 0,A)})};return i.persist={setOptions:_=>{s={...s,..._},_.storage&&(c=_.storage)},clearStorage:()=>{c?.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:_=>(a.add(_),()=>{a.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},s.skipHydration||y(),g||f},XDe=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((HDe?"commercial":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),KDe(t,e)):YDe(t,e),Sh=XDe,Cn=yo()(Sh(t=>({defaultBackground:"CartoDB (licht)",showScaleBar:!0,gpsAutoStart:!1,showAccuracyCircle:!0,hapticFeedback:!0,vondstenLocalOnly:!0,showVondstButton:!1,showRouteRecordButton:!1,showLocalVondsten:!0,showCustomPointLayers:!0,fontScale:100,layerPanelFontScale:100,presetPanelFontScale:100,menuFontScale:100,weatherFontScale:100,voiceFeedbackEnabled:!1,showStepCounter:!1,showFontSliders:!1,showWeatherButton:!1,hideWelcomeModal:!1,setDefaultBackground:e=>t({defaultBackground:e}),setShowScaleBar:e=>t({showScaleBar:e}),setGpsAutoStart:e=>t({gpsAutoStart:e}),setShowAccuracyCircle:e=>t({showAccuracyCircle:e}),setHapticFeedback:e=>t({hapticFeedback:e}),setVondstenLocalOnly:e=>t({vondstenLocalOnly:e}),setShowVondstButton:e=>t({showVondstButton:e}),setShowRouteRecordButton:e=>t({showRouteRecordButton:e}),setShowLocalVondsten:e=>t({showLocalVondsten:e}),setShowCustomPointLayers:e=>t({showCustomPointLayers:e}),setFontScale:e=>t({fontScale:e}),setLayerPanelFontScale:e=>t({layerPanelFontScale:e}),setPresetPanelFontScale:e=>t({presetPanelFontScale:e}),setMenuFontScale:e=>t({menuFontScale:e}),setWeatherFontScale:e=>t({weatherFontScale:e}),setVoiceFeedbackEnabled:e=>t({voiceFeedbackEnabled:e}),setShowStepCounter:e=>t({showStepCounter:e}),setShowFontSliders:e=>t({showFontSliders:e}),setShowWeatherButton:e=>t({showWeatherButton:e}),setHideWelcomeModal:e=>t({hideWelcomeModal:e})}),{name:"detectorapp-settings",version:2,migrate:(t,e)=>e<2?{...t,showScaleBar:!0}:t})),TO=yo()(nb((t,e)=>({user:null,accessToken:null,loading:!1,error:null,initialized:!1,setUser:n=>{t(r=>{r.user=n,r.loading=!1})},setLoading:n=>{t(r=>{r.loading=n})},setError:n=>{t(r=>{r.error=n})},setAccessToken:n=>{t(r=>{r.accessToken=n})},signInWithGoogle:async()=>{t(n=>{n.loading=!0,n.error=null});try{const n=new eh;await nJ(Gy,n)}catch(n){console.error("Google sign-in error:",n),t(r=>{r.error=n.message,r.loading=!1})}},connectGoogleFit:async()=>{t(n=>{n.loading=!0,n.error=null});try{const n=new eh;n.addScope("https://www.googleapis.com/auth/fitness.activity.read");const r=await nJ(Gy,n),i=eh.credentialFromResult(r);return i?.accessToken?(t(s=>{s.accessToken=i.accessToken||null,s.loading=!1}),console.log(" Google Fit gekoppeld"),!0):(t(s=>{s.loading=!1}),!1)}catch(n){return console.error("Google Fit connect error:",n),t(r=>{r.error=n.message,r.loading=!1}),!1}},logout:async()=>{t(n=>{n.loading=!0});try{await xue(Gy),t(n=>{n.accessToken=null})}catch(n){console.error("Logout error:",n),t(r=>{r.error=n.message,r.loading=!1})}},initAuth:()=>{e().initialized||(t(n=>{n.initialized=!0}),_ue(Gy,n=>{t(r=>{r.user=n,r.loading=!1}),n&&Cn.getState().setVondstenLocalOnly(!1)}))}})));yo()(nb((t,e)=>({vondsten:[],loading:!1,error:null,loadVondsten:async n=>{t(r=>{r.loading=!0});try{const r=oDe(AQ(Zf,"vondsten"),aDe("userId","==",n)),s=(await hDe(r)).docs.map(o=>({id:o.id,...o.data()}));t(o=>{o.vondsten=s,o.loading=!1})}catch(r){t(i=>{i.error=r.message,i.loading=!1})}},addVondst:async n=>{const r=new Date().toISOString(),i={...n,createdAt:r,updatedAt:r},s=await pDe(AQ(Zf,"vondsten"),i);return t(o=>{o.vondsten.push({...i,id:s.id})}),s.id},updateVondst:async(n,r)=>{const i=zy(Zf,"vondsten",n);await dDe(i,{...r,updatedAt:new Date().toISOString()}),t(s=>{const o=s.vondsten.findIndex(a=>a.id===n);o!==-1&&(s.vondsten[o]={...s.vondsten[o],...r})})},deleteVondst:async n=>{await fDe(zy(Zf,"vondsten",n)),t(r=>{r.vondsten=r.vondsten.filter(i=>i.id!==n)})}})));const NC=[{id:"detectie",name:"Detectie",icon:"Compass",layers:["AMK Monumenten","Gewaspercelen","Geomorfologie","AHN4 Hoogtekaart Kleur"],baseLayer:"CartoDB (licht)",layerOpacities:{Geomorfologie:.25,"AHN4 Hoogtekaart Kleur":.25},isBuiltIn:!1},{id:"steentijd",name:"Steentijd",icon:"Mountain",layers:["Hunebedden","Grafheuvels","Terpen","FAMKE Steentijd","AMK Steentijd","AHN4 Multi-Hillshade NL","Labels Overlay"],baseLayer:"Luchtfoto",isBuiltIn:!1},{id:"romeins-midvroeg",name:"Romeins - Mid vroeg",icon:"Layers",layers:["Romeinse wegen (regio)","Romeinse Forten","AMK Romeins","AMK Vroege ME","Gewaspercelen","Kadastrale Grenzen"],isBuiltIn:!1},{id:"midlaat-nieuwetijd",name:"Mid laat - Nieuwe tijd",icon:"Grid",layers:["AMK Late ME","Kastelen","Essen","Rijksmonumenten","Gewaspercelen","Kadastrale Grenzen","Oude Kernen"],isBuiltIn:!1},{id:"woii-militair",name:"WOII & Militair",icon:"Target",layers:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten"],isBuiltIn:!1},{id:"analyse",name:"Terrein Analyse",icon:"Search",layers:["IKAW","Geomorfologie","Bodemkaart","AHN4 Multi-Hillshade NL","AHN4 Hoogtekaart Kleur"],isBuiltIn:!1}],$Q=["Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten","Kastelen","IKAW","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],Qde=yo()(Sh((t,e)=>({presets:[...NC],customDefaults:null,applyPreset:n=>{const r=e().presets.find(s=>s.id===n);if(!r)return;const i=Bs.getState();$Q.forEach(s=>i.setLayerVisibility(s,!1)),r.layers.forEach(s=>i.setLayerVisibility(s,!0)),r.layerOpacities&&Object.entries(r.layerOpacities).forEach(([s,o])=>{i.setLayerOpacity(s,o)}),r.baseLayer&&["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(o=>{i.setLayerVisibility(o,o===r.baseLayer)}),console.log(` Preset toegepast: ${r.name}${r.baseLayer?` (${r.baseLayer})`:""}`)},createPreset:(n,r)=>{const i=Bs.getState(),s=Object.entries(i.visible).filter(([a,l])=>l&&$Q.includes(a)).map(([a])=>a),o={id:`custom-${Date.now()}`,name:n,icon:r,layers:s,isBuiltIn:!1};t(a=>({presets:[...a.presets,o]})),console.log(` Preset aangemaakt: ${n} met ${s.length} lagen`)},updatePreset:(n,r)=>{t(i=>({presets:i.presets.map(s=>s.id===n?{...s,...r}:s)}))},deletePreset:n=>{t(r=>({presets:r.presets.filter(i=>i.id!==n||i.isBuiltIn)}))},saveAsDefaults:()=>{const n=e().presets;t({customDefaults:[...n]}),console.log(" Presets opgeslagen als standaard")},resetToDefaults:()=>{const{customDefaults:n}=e();n?(t({presets:[...n]}),console.log(" Presets hersteld naar eigen standaard")):(t({presets:[...NC]}),console.log(" Presets hersteld naar originele standaard"))},resetToBuiltIn:()=>{t({presets:[...NC],customDefaults:null}),console.log(" Presets gereset naar originele instellingen")}}),{name:"detectorapp-presets",version:11,migrate:(t,e)=>e<11?{presets:[...NC]}:t})),FQ=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],fI=yo()(Sh((t,e)=>({layers:[],addLayer:n=>{const r=crypto.randomUUID(),i=e().layers.length,s=FQ[i%FQ.length];return t(o=>({layers:[...o.layers,{...n,id:r,createdAt:new Date().toISOString(),color:n.color||s,visible:n.visible??!0,opacity:n.opacity??1}]})),r},removeLayer:n=>t(r=>({layers:r.layers.filter(i=>i.id!==n)})),updateLayer:(n,r)=>t(i=>({layers:i.layers.map(s=>s.id===n?{...s,...r}:s)})),toggleVisibility:n=>t(r=>({layers:r.layers.map(i=>i.id===n?{...i,visible:!i.visible}:i)})),setOpacity:(n,r)=>t(i=>({layers:i.layers.map(s=>s.id===n?{...s,opacity:r}:s)})),setColor:(n,r)=>t(i=>({layers:i.layers.map(s=>s.id===n?{...s,color:r}:s)})),clearAll:()=>t({layers:[]})}),{name:"detectorapp-custom-layers",version:1})),ZDe=["CartoDB (licht)","OpenStreetMap","Luchtfoto","Labels Overlay","Mijn Vondsten"],sB=yo()(Sh((t,e)=>({tier:"free",unlockedRegions:["nl"],devMode:!0,setTier:n=>t({tier:n}),unlockRegion:n=>t(r=>({unlockedRegions:r.unlockedRegions.includes(n)?r.unlockedRegions:[...r.unlockedRegions,n]})),lockRegion:n=>t(r=>({unlockedRegions:r.unlockedRegions.filter(i=>i!==n)})),setDevMode:n=>t({devMode:n}),isRegionUnlocked:n=>{const r=e();return r.devMode||r.tier==="pro"?!0:r.unlockedRegions.includes(n)},isLayerUnlocked:(n,r="free",i=["nl"])=>{const s=e();return s.devMode||ZDe.includes(n)||r==="free"||s.tier==="pro"?!0:s.tier==="premium"?i.some(o=>s.unlockedRegions.includes(o)):!1},canAccessPremiumFeatures:()=>{const n=e();return n.devMode||n.tier!=="free"}}),{name:"detectorapp-subscription",version:1}));yo()(Sh(t=>({parkingLocation:null,showParkingButton:!0,setParkingLocation:e=>t({parkingLocation:e}),clearParkingLocation:()=>t({parkingLocation:null}),setShowParkingButton:e=>t({showParkingButton:e})}),{name:"detectorapp-parking"}));function VQ(){return new Date().toISOString().split("T")[0]}yo()(Sh((t,e)=>({steps:0,distance:0,startTime:null,isActive:!1,todaySteps:0,todayDate:VQ(),stepLength:.75,incrementStep:()=>{const n=e(),r=VQ(),i=n.todayDate===r?n.todaySteps+1:1;t({steps:n.steps+1,distance:(n.steps+1)*n.stepLength,todaySteps:i,todayDate:r})},resetSession:()=>{t({steps:0,distance:0,startTime:null})},setActive:n=>{t({isActive:n,startTime:n?Date.now():e().startTime})},setStepLength:n=>{const r=e();t({stepLength:n,distance:r.steps*n})}}),{name:"step-counter-storage",partialize:t=>({todaySteps:t.todaySteps,todayDate:t.todayDate,stepLength:t.stepLength})}));const zQ={sunAzimuth:315,sunElevation:45,verticalExaggeration:2,colorRamp:"terrain",minElevation:-5,maxElevation:50,showControls:!1};yo()(Sh(t=>({...zQ,setSunAzimuth:e=>t({sunAzimuth:e}),setSunElevation:e=>t({sunElevation:e}),setVerticalExaggeration:e=>t({verticalExaggeration:e}),setColorRamp:e=>t({colorRamp:e}),setMinElevation:e=>t({minElevation:e}),setMaxElevation:e=>t({maxElevation:e}),setShowControls:e=>t({showControls:e}),resetToDefaults:()=>t(zQ)}),{name:"detectorapp-hillshade"}));const JDe=()=>Math.random().toString(36).substring(2,9),QDe={0:"Helder",1:"Overwegend helder",2:"Halfbewolkt",3:"Bewolkt",45:"Mist",48:"Rijp/mist",51:"Lichte motregen",53:"Motregen",55:"Dichte motregen",56:"Lichte ijzel",57:"Ijzel",61:"Lichte regen",63:"Regen",65:"Hevige regen",66:"Lichte ijsregen",67:"IJsregen",71:"Lichte sneeuw",73:"Sneeuw",75:"Hevige sneeuw",77:"Korrelsneeuw",80:"Lichte buien",81:"Buien",82:"Hevige buien",85:"Lichte sneeuwbuien",86:"Sneeuwbuien",95:"Onweer",96:"Onweer met hagel",99:"Zwaar onweer met hagel"};function e6e(t){const e=["N","NNO","NO","ONO","O","OZO","ZO","ZZO","Z","ZZW","ZW","WZW","W","WNW","NW","NNW"],n=Math.round(t/22.5)%16;return e[n]}const pT=yo()(Sh((t,e)=>({weatherData:null,isLoading:!1,error:null,savedLocations:[{id:"current",name:"Huidige locatie",lat:0,lon:0,isCurrentLocation:!0}],selectedLocationId:"current",weatherPanelOpen:!1,showBuienradar:!1,setWeatherData:n=>t({weatherData:n}),setIsLoading:n=>t({isLoading:n}),setError:n=>t({error:n}),addLocation:n=>t(r=>({savedLocations:[...r.savedLocations,{...n,id:JDe()}]})),removeLocation:n=>t(r=>({savedLocations:r.savedLocations.filter(i=>i.id!==n),selectedLocationId:r.selectedLocationId===n?"current":r.selectedLocationId})),setSelectedLocation:n=>t({selectedLocationId:n}),updateCurrentLocation:(n,r)=>t(i=>({savedLocations:i.savedLocations.map(s=>s.isCurrentLocation?{...s,lat:n,lon:r}:s)})),toggleWeatherPanel:()=>t(n=>({weatherPanelOpen:!n.weatherPanelOpen})),setWeatherPanelOpen:n=>t({weatherPanelOpen:n}),setShowBuienradar:n=>t({showBuienradar:n}),fetchWeather:async(n,r)=>{const{setIsLoading:i,setError:s,setWeatherData:o,savedLocations:a,selectedLocationId:l}=e();i(!0),s(null);try{const c=new URL("https://api.open-meteo.com/v1/forecast");c.searchParams.set("latitude",n.toString()),c.searchParams.set("longitude",r.toString()),c.searchParams.set("current","temperature_2m,relative_humidity_2m,apparent_temperature,precipitation,weather_code,wind_speed_10m,wind_direction_10m,wind_gusts_10m,cloud_cover,is_day,snow_depth"),c.searchParams.set("hourly","temperature_2m,precipitation,precipitation_probability,weather_code,wind_speed_10m,wind_direction_10m,relative_humidity_2m"),c.searchParams.set("daily","weather_code,temperature_2m_max,temperature_2m_min,precipitation_sum,precipitation_probability_max,wind_speed_10m_max,sunrise,sunset"),c.searchParams.set("minutely_15","precipitation"),c.searchParams.set("timezone","Europe/Amsterdam"),c.searchParams.set("forecast_days","7"),c.searchParams.set("past_days","7");const u=await fetch(c.toString());if(!u.ok)throw new Error("Kon weerdata niet ophalen");const h=await u.json();let f=0;const g=h.daily.temperature_2m_min||[],y=new Date().toISOString().split("T")[0],_=h.daily.time.indexOf(y);for(let O=_-1;O>=0&&g[O]<0;O--)f++;const b=a.find(O=>O.id===l)||a[0],T=new Date,A=[],I=[];if(h.minutely_15?.time&&h.minutely_15?.precipitation){const O=new Date(T.getTime()+72e5),D=new Date(T.getTime()+2880*60*1e3);for(let V=0;V<h.minutely_15.time.length;V++){const U=new Date(h.minutely_15.time[V]);U<T||(U<=O&&A.push({time:h.minutely_15.time[V],precipitation:h.minutely_15.precipitation[V]}),U<=D&&I.push({time:h.minutely_15.time[V],precipitation:h.minutely_15.precipitation[V]}))}}const P=T.getHours(),N=T.toISOString().split("T")[0],L=h.hourly.time.map((O,D)=>({time:O,temperature:h.hourly.temperature_2m[D],precipitation:h.hourly.precipitation[D],precipitationProbability:h.hourly.precipitation_probability[D],weatherCode:h.hourly.weather_code[D],windSpeed:h.hourly.wind_speed_10m[D],windDirection:h.hourly.wind_direction_10m[D],humidity:h.hourly.relative_humidity_2m[D]})).filter(O=>new Date(O.time)>=T).slice(0,24),C=h.daily.time.map((O,D)=>({date:O,temperatureMax:h.daily.temperature_2m_max[D],temperatureMin:h.daily.temperature_2m_min[D],precipitationSum:h.daily.precipitation_sum[D],precipitationProbability:h.daily.precipitation_probability_max[D],weatherCode:h.daily.weather_code[D],windSpeedMax:h.daily.wind_speed_10m_max[D],sunrise:h.daily.sunrise[D],sunset:h.daily.sunset[D]})).filter(O=>O.date>=N),M={location:{...b,lat:n,lon:r},current:{temperature:h.current.temperature_2m,apparentTemperature:h.current.apparent_temperature,humidity:h.current.relative_humidity_2m,precipitation:h.current.precipitation,weatherCode:h.current.weather_code,windSpeed:h.current.wind_speed_10m,windDirection:h.current.wind_direction_10m,windGusts:h.current.wind_gusts_10m,cloudCover:h.current.cloud_cover,isDay:h.current.is_day===1,snowDepth:h.current.snow_depth},hourly:L,daily:C,precipitation15min:A,precipitation48h:I,frostDays:f,lastUpdated:Date.now()};try{const O=new URL("https://air-quality-api.open-meteo.com/v1/air-quality");O.searchParams.set("latitude",n.toString()),O.searchParams.set("longitude",r.toString()),O.searchParams.set("current","grass_pollen,birch_pollen,alder_pollen,mugwort_pollen,ragweed_pollen,olive_pollen");const D=await fetch(O.toString());if(D.ok){const V=await D.json();if(V.current){const U=G=>Math.min(5,Math.round(G/20));M.pollen={grass:U(V.current.grass_pollen||0),birch:U(V.current.birch_pollen||0),alder:U(V.current.alder_pollen||0),mugwort:U(V.current.mugwort_pollen||0),ragweed:U(V.current.ragweed_pollen||0),olive:U(V.current.olive_pollen||0)}}}}catch{}o(M)}catch(c){s(c instanceof Error?c.message:"Onbekende fout")}finally{i(!1)}}}),{name:"detectorapp-weather",partialize:t=>({savedLocations:t.savedLocations,selectedLocationId:t.selectedLocationId,showBuienradar:t.showBuienradar})}));function t6e({target:t,viewOptions:e}){const n=Y.useRef(null),r=Y.useRef(null),i=li(o=>o.setMap),s=Cn(o=>o.showScaleBar);return Y.useEffect(()=>{if(!n.current){const o={center:[5.1214,52.0907],zoom:8,rotation:0,minZoom:3,maxZoom:19,...e},a=new ERe({target:t,controls:[],view:new dd({center:Ni(o.center),zoom:o.zoom,rotation:o.rotation,minZoom:o.minZoom,maxZoom:o.maxZoom})});n.current=a,i(a),window.__olMap=a}return()=>{n.current&&(n.current.setTarget(void 0),i(null),window.__olMap=null)}},[t,e,i]),Y.useEffect(()=>{const o=n.current;o&&(s?r.current||(r.current=new kRe({units:"metric",bar:!1,text:!0,minWidth:80}),o.addControl(r.current)):r.current&&(o.removeControl(r.current),r.current=null))},[s]),n.current}function x(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function EAt(t,e){return function(n,r){e(n,r,t)}}function SAt(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function TAt(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var n6e=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function kAt(t){function e(s){t.error=t.hasError?new n6e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}let sg;const So=globalThis;function ye(t){return typeof sg[t]=="function"?sg[t]=sg[t](So):sg[t]}sg=So.dojoConfig?.has||So.esriConfig?.has?{...So.dojoConfig?.has,...So.esriConfig?.has}:{},ye.add=(t,e,n,r)=>{(r||sg[t]===void 0)&&(sg[t]=e),n&&ye(t)},ye.cache=sg,ye.add("big-integer-warning-enabled",!0),ye.add("esri-deprecation-warnings",!0),ye.add("esri-tests-disable-screenshots",!1),ye.add("esri-tests-use-full-window",!1),ye.add("esri-tests-post-to-influx",!0),ye.add("esri-cim-animations-enable-status","enabled"),ye.add("esri-cim-animations-spotlight",!1),ye.add("esri-cim-animations-freeze-time",!1),(()=>{ye.add("host-webworker",So.WorkerGlobalScope!==void 0&&self instanceof So.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ye.add("host-browser",t),ye.add("host-node",!(typeof So.process!="object"||!So.process.versions?.node||!So.process.versions.v8)),ye.add("dom",t),ye("host-browser")){const e=navigator,n=e.userAgent,r=e.appVersion,i=parseFloat(r);if(ye.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),ye.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),ye.add("khtml",r.includes("Konqueror")?i:void 0),ye.add("edge",parseFloat(n.split("Edge/")[1])||void 0),ye.add("opr",parseFloat(n.split("OPR/")[1])||void 0),ye.add("webkit",!ye("wp")&&!ye("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),ye.add("chrome",!ye("edge")&&!ye("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),ye.add("android",!ye("wp")&&parseFloat(n.split("Android ")[1])||void 0),ye.add("safari",!r.includes("Safari")||ye("wp")||ye("chrome")||ye("android")||ye("edge")||ye("opr")?void 0:parseFloat(r.split("Version/")[1])),ye.add("mac",r.includes("Macintosh")),!ye("wp")&&/(iPhone|iPod|iPad)/.test(n)){const s=RegExp.$1.replace(/P/,"p"),o=/OS ([\d_]+)/.test(n)?RegExp.$1:"1",a=parseFloat(o.replace(/_/,".").replaceAll("_",""));ye.add(s,a),ye.add("ios",a)}ye("webkit")||(!n.includes("Gecko")||ye("wp")||ye("khtml")||ye("edge")||ye.add("mozilla",i),ye("mozilla")&&ye.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0))}})(),(()=>{if(So.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),n=/iPhone/i.test(t);e&&ye.add("esri-mobile",e),n&&ye.add("esri-iPhone",n),ye.add("esri-geolocation",!!navigator.geolocation)}ye.add("esri-wasm","WebAssembly"in So),ye.add("esri-performance-mode-frames-between-render",20),ye.add("esri-force-performance-mode",!1),ye.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in So,e=So.crossOriginIsolated===!1;return t&&!e}),ye.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),ye.add("esri-atomics","Atomics"in So),ye.add("esri-workers","Worker"in So),ye.add("web-feat:cache","caches"in So),ye.add("esri-workers-arraybuffer-transfer",!ye("safari")||Number(ye("safari"))>=12),ye.add("workers-pool-size",8),ye.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ye.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ye.add("featurelayer-fast-triangulation-enabled",!0),ye.add("featurelayer-animation-enabled",!0),ye.add("featurelayer-snapshot-enabled",!0),ye.add("featurelayer-snapshot-initial-tolerance",0),ye.add("featurelayer-snapshot-point-min-threshold",8e4),ye.add("featurelayer-snapshot-point-max-threshold",4e5),ye.add("featurelayer-snapshot-multipoint-min-threshold",2e4),ye.add("featurelayer-snapshot-multipoint-max-threshold",1e5),ye.add("featurelayer-snapshot-polygon-min-threshold",2e3),ye.add("featurelayer-snapshot-polygon-max-threshold",2e3),ye.add("featurelayer-snapshot-polyline-min-threshold",2e3),ye.add("featurelayer-snapshot-polyline-max-threshold",2e3),ye.add("featurelayer-snapshot-max-vertex-count",25e4),ye.add("featurelayer-snapshot-non-hosted-exceedslimit-enabled",!0),ye.add("featurelayer-snapshot-concurrency",4),ye.add("featurelayer-snapshot-coverage",.1),ye.add("featurelayer-query-max-depth",4),ye.add("featurelayer-query-pausing-enabled",!1),ye.add("featurelayer-query-tile-concurrency",4),ye.add("featurelayer-query-tile-max-features",6e5),ye.add("featurelayer-advanced-symbols",!1),ye.add("featurelayer-pbf",!0),ye.add("featurelayer-pbf-statistics",!1),ye.add("feature-layers-workers",!0),ye.add("feature-polyline-generalization-factor",1),ye.add("parquetlayer-full-query-feature-count",2e4),ye.add("parquetlayer-hittest-max-feature-count",1),ye.add("parquetlayer-persistence-enabled",!1),ye.add("mapview-transitions-duration",200),ye.add("mapview-essential-goto-duration",200),ye.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ye.add("mapserver-pbf-version-support",10.81),ye.add("mapservice-popup-identify-max-tolerance",20),ye.add("request-queue-concurrency-hosted",16),ye.add("request-queue-concurrency-non-hosted",4),ye.add("curve-densification-coarse-segments",128),ye.add("curve-densification-max-segments",2e3),ye.add("curve-densification-min-segments",3),ye.add("curve-densification-pixel-deviation",.5),ye.add("view-readyState-waiting-delay",1e3),ye.add("gradient-depth-bias",.01),ye.add("gradient-depth-epsilon",1e-8),ye.add("enable-feature:esri-compress-textures",!0),ye("host-webworker")||ye("host-browser")&&(ye.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ye.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();function AAt(t){}function r6e(t){return()=>t}function IAt(t){return t}var fl;let i6e=(fl=class{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*fl._m}getInt(){return this._seed=(fl._a*this._seed+fl._c)%fl._m,this._seed}getFloat(){return this.getInt()/(fl._m-1)}getIntRange(e,n){return Math.round(this.getFloatRange(e,n))}getFloatRange(e,n){const r=n-e;return e+this.getInt()/fl._m*r}},fl._m=2147483647,fl._a=48271,fl._c=0,fl);const s6e=1.5,PAt=1/s6e,CAt=.5;function efe(t){return t}function o6e(t,e=efe){if(!t||t.length===0)return;let n=t[0],r=e(n);for(let i=1;i<t.length;++i){const s=t[i],o=Number(e(s));o>r&&(r=o,n=s)}return n}function RAt(t,e=efe){return o6e(t,n=>-e(n))}function MAt(t,e){return e?t.filter((n,r,i)=>i.findIndex(e.bind(null,n))===r):Array.from(new Set(t))}function a6e(t,e,n,r,i,s,o){if(t==null&&r==null)return!0;e=Math.max(0,e),i=Math.max(0,i),n=Math.max(0,n<0?(t?.length??0)+n:n),s=Math.max(0,s<0?(r?.length??0)+s:s);const a=n-e;if(t==null||r==null||a!==s-i)return!1;if(o){for(let l=0;l<a;l++)if(!o(t[e+l],r[i+l]))return!1}else for(let l=0;l<a;l++)if(t[e+l]!==r[i+l])return!1;return!0}function kO(t,e,n){return a6e(t,0,t?.length??0,e,0,e?.length??0,n)}function NAt(){return(t,e)=>{if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}}function GQ(t,e,n){let r,i;return n?(r=e.filter(s=>!t.some(o=>n(o,s))),i=t.filter(s=>!e.some(o=>n(o,s)))):(r=e.filter(s=>!t.includes(s)),i=t.filter(s=>!e.includes(s))),{added:r,removed:i}}function OAt(t){return t&&typeof t.length=="number"}function LAt(t,e){const n=t.length;if(n===0)return[];const r=[];for(let i=0;i<n;i+=e)r.push(t.slice(i,i+e));return r}let tfe=class{constructor(){this.last=0}};const nfe=new tfe;function q8(t,e,n,r){r=r||nfe;const i=Math.max(0,r.last-10);for(let o=i;o<n;++o)if(t[o]===e)return r.last=o,o;const s=Math.min(i,n);for(let o=0;o<s;++o)if(t[o]===e)return r.last=o,o;return-1}function K8(t,e,n,r){const i=t.length,s=q8(t,e,i,r);if(s!==-1)return t[s]=t[i-1],t.pop(),e}const Ou=new Set;function l6e(t,e,n=t.length,r=e.length,i,s){if(r===0||n===0)return n;Ou.clear();for(let a=0;a<r;++a)Ou.add(e[a]);i=i||nfe;const o=Math.max(0,i.last-10);for(let a=o;a<n;++a)if(Ou.has(t[a])&&(s?.push(t[a]),Ou.delete(t[a]),t[a]=t[n-1],--n,--a,Ou.size===0||n===0))return Ou.clear(),n;for(let a=0;a<o;++a)if(Ou.has(t[a])&&(s?.push(t[a]),Ou.delete(t[a]),t[a]=t[n-1],--n,--a,Ou.size===0||n===0))return Ou.clear(),n;return Ou.clear(),n}function c6e(t,e){let n=0;for(let r=0;r<t.length;++r){const i=t[r];e(i,r)&&(t[n]=i,n++)}return t.length=n,t}function jAt(t,e,n){const r=t.length;if(e>=r)return t.slice();const i=rfe(n),s=new Set,o=[];for(;o.length<e;){const a=Math.floor(i()*r);s.has(a)||(s.add(a),o.push(t[a]))}return o}function rfe(t){return t?(UQ.seed=t,()=>UQ.getFloat()):Math.random}const UQ=new i6e;function $At(t,e){if(!t)return t;const n=rfe(e);for(let r=t.length-1;r>0;r--){const i=Math.floor(n()*(r+1)),s=t[r];t[r]=t[i],t[i]=s}return t}function ife(t,e){const n=t.indexOf(e);return n!==-1?(t.splice(n,1),e):null}function _2(t,e){return t!=null}const FAt=[];function VAt(t){return t instanceof ArrayBuffer}function oB(t){return t?.constructor?.name==="Int8Array"}function sfe(t){return t?.constructor?.name==="Uint8Array"}function ofe(t){return t?.constructor?.name==="Uint8ClampedArray"}function aB(t){return t?.constructor?.name==="Int16Array"}function afe(t){return t?.constructor?.name==="Uint16Array"}function lB(t){return t?.constructor?.name==="Int32Array"}function lfe(t){return t?.constructor?.name==="Uint32Array"}function u6e(t){return t?.constructor?.name==="Float16Array"}function AO(t){return t?.constructor?.name==="Float32Array"}function IO(t){return t?.constructor?.name==="Float64Array"}function h6e(t){return"buffer"in t}const cfe=1024;function zAt(t){return IO(t)||AO(t)||lB(t)||aB(t)||oB(t)}function GAt(t){return IO(t)||AO(t)}function UAt(t){return IO(t)?179769e303:u6e(t)?65504:AO(t)?3402823e32:lfe(t)?4294967295:afe(t)?65535:sfe(t)||ofe(t)?255:lB(t)?2147483647:aB(t)?32767:oB(t)?127:256}const BAt=-32768,WAt=-2147483648;function HAt(t){return t}function d6e(t,e){let n;for(n in t)t.hasOwnProperty(n)&&t[n]===void 0&&delete t[n];return t}function Ze(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=dfe(t);if(e!=null)return e;if(mT(t))return t.clone();if(ufe(t))return t.map(Ze);if(hfe(t))throw new Error("Trying to clone an unclonable Accessor instance");const n={};for(const r of Object.getOwnPropertyNames(t))n[r]=Ze(t[r]);return n}function Y8(t,e){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const n=dfe(t);if(n!=null)return n;if(ufe(t)){let i=!0;const s=t.map(o=>{const a=Y8(o,e);return o!=null&&a==null&&(i=!1),a});return i?s:null}if(mT(t))return t.clone(e);if(t instanceof File||t instanceof Blob)return t;if(hfe(t))return null;const r=new(Object.getPrototypeOf(t)).constructor;for(const i of Object.getOwnPropertyNames(t)){const s=t[i],o=Y8(s);if(s!=null&&o==null)return null;r[i]=o}return r}function mT(t){return typeof t.clone=="function"}function ufe(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function hfe(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function BQ(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function dfe(t){if(oB(t)||sfe(t)||ofe(t)||aB(t)||afe(t)||lB(t)||lfe(t)||AO(t)||IO(t))return t.slice();if(t instanceof Date)return new Date(t);if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[n,r]of t)e.set(n,Ze(r));return e}if(t instanceof Set){const e=new Set;for(const n of t)e.add(Ze(n));return e}return null}function cB(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof t?.getTime=="function"&&typeof e?.getTime=="function"&&t.getTime()===e.getTime()||!1}function ffe(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&kO(t,e):t instanceof Set?e instanceof Set&&p6e(t,e):t instanceof Map?e instanceof Map&&m6e(t,e):!!BQ(t)&&BQ(e)&&f6e(t,e))}function f6e(t,e){if(t===null||e===null)return!1;const n=Object.keys(t);if(e===null||Object.keys(e).length!==n.length)return!1;for(const r of n)if(t[r]!==e[r]||!Object.prototype.hasOwnProperty.call(e,r))return!1;return!0}function p6e(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function m6e(t,e){if(t.size!==e.size)return!1;for(const[n,r]of t){const i=e.get(n);if(i!==r||i===void 0&&!e.has(n))return!1}return!0}function g6e(t,e,n=!1){return mfe(t,e,n)}function PO(t,e){if(e!=null)return e[t]||pfe(t.split("."),!1,e)}function lb(t,e,n){const r=t.split("."),i=r.pop(),s=pfe(r,!0,n);s&&i&&(s[i]=e)}function WQ(t,e){if(t==null&&e==null)return!1;if(t==null||e==null)return!0;if(typeof t=="object"){if(Array.isArray(t)){const n=e;if(t.length!==n.length)return!0;for(let r=0;r<t.length;r++)if(WQ(t[r],n[r]))return!0;return!1}if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const n in t)if(WQ(t[n],e[n]))return!0;return!1}return t!==e}function pfe(t,e,n){let r=n;for(const i of t){if(r==null)return;if(!(i in r)){if(!e)return;r[i]={}}r=r[i]}return r}function mfe(t,e,n){return e?Object.keys(e).reduce((r,i)=>{if(i==="__proto__")return r;let s=r[i],o=e[i];return s===o?r:s===void 0?(r[i]=Ze(o),r):(Array.isArray(o)||Array.isArray(r)?(s=s?Array.isArray(s)?r[i]=s.slice():r[i]=[s]:r[i]=[],o&&(Array.isArray(o)||(o=[o]),n?o.forEach(a=>{s.includes(a)||s.push(a)}):r[i]=o.slice())):o&&typeof o=="object"?r[i]=mfe(s,o,n):r.hasOwnProperty(i)&&!e.hasOwnProperty(i)||(r[i]=o),r)},t||{}):t}function qAt(t,e){for(const n of Object.entries(t))if(e===n[1])return n[0]}function CO(t,e){return Object.values(t).includes(e)}const nr={apiKey:void 0,apiKeys:{scopes:[]},applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:62e3,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(g6e(nr,globalThis.esriConfig,!0),delete nr.has),!nr.assetsPath){{const t="4.34";nr.assetsPath=`https://js.arcgis.com/${t}/@arcgis/core/assets`}nr.defaultAssetsPath=nr.assetsPath}const y6e=/\{([^}]+)\}/g;function HQ(t){return t??""}function gfe(t,e){return e?t.replaceAll(y6e,typeof e=="object"?(n,r)=>HQ(PO(r,e)):(n,r)=>HQ(e(r))):t}function KAt(t,e){return t.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,n=>e?.includes(n)?n:`\\${n}`)}function yfe(t){let e=0;for(let n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}let qQ;function YAt(t){return qQ??=new DOMParser,qQ.parseFromString(t||"","text/html").body.innerText||""}function XAt(t,e){return new RegExp(`{${e}}`,"ig").test(t)}function ZAt(t,...e){let n=t[0];for(let r=0;r<e.length;++r)n+=e[r]+t[r+1];return n}const KQ={info:0,warn:1,error:2,none:3};var cs;let kt=(cs=class{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,cs._loggers.set(this.module,this);const n=this.module.lastIndexOf(".");n!==-1&&(this._parent=cs.getLogger(this.module.slice(0,n)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){}static get test(){}static getLogger(e){return e=typeof e!="string"?e.declaredClass:e,cs._loggers.get(e)||new cs({module:e})}_log(e,n,...r){if(this._matchLevel(e)){if(n!=="always"&&!cs._throttlingDisabled){const i=_6e(r),s=this._loggedMessages[e].get(i);if(n==="once"&&s!=null||n==="oncePerTick"&&s&&s>=cs._tickCounter)return;this._loggedMessages[e].set(i,cs._tickCounter),cs._scheduleTickCounterIncrement()}for(const i of nr.log.interceptors)if(i(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,n){let r=this;for(;r!=null;){const i=r[e];if(i!=null)return i;r=r.parent}return n}_inheritedWriter(){return this._parentWithMember("writer",v6e)}_matchLevel(e){const n=nr.log.level||"warn";return KQ[this._parentWithMember("level",n)]<=KQ[e]}static _scheduleTickCounterIncrement(){cs._tickCounterScheduled||(cs._tickCounterScheduled=!0,Promise.resolve().then(()=>{cs._tickCounter++,cs._tickCounterScheduled=!1}))}},cs._loggers=new Map,cs._tickCounter=0,cs._tickCounterScheduled=!1,cs._throttlingDisabled=!1,cs);function v6e(t,e,...n){console[t](`[${e}]`,...n)}function _6e(...t){return yfe(JSON.stringify(t,(n,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}function x6e(t,e){return t.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(n,r)=>r===""?"$":(PO(r,e)??"").toString())}let vfe=class{constructor(e,n,r=void 0){this.name=e,this.details=r,this.message=(n&&x6e(n,r))??""}toString(){return"["+this.name+"]: "+this.message}},Xe=class _fe extends vfe{constructor(e,n,r){super(e,n,r)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,n)=>{if(n&&typeof n=="object"&&typeof n.toJSON=="function")return n;try{return Ze(n)}catch{return"[object]"}}))}}catch(e){throw kt.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new _fe(e.name,e.message,e.details)}};Xe.prototype.type="error";function O4(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}const w6e=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,b6e={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function YQ(t){const e=t?.match(w6e);if(!e)return null;const[,n,r,i]=e;if(!n)return null;let s=null,o=null,a=null;const{devext:l,qaext:c,www:u}=b6e;if(r)if(s=n,i)switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}else({customBaseUrl:o,portalHostname:a}=u);else switch(n.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=c);break;case"www":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function xfe(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}function wfe(t){const e=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,n=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return e.test(t)?t=t.replace(e,"https://www.arcgis.com"):n.test(t)?t=t.replace(n,"https://devext.arcgis.com"):r.test(t)&&(t=t.replace(r,"https://qaext.arcgis.com")),t}function bfe(t){const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n.buffer}function E6e(t){const e=new Uint8Array(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}const S6e=()=>kt.getLogger("esri.core.urlUtils"),cb=nr.request,XQ="esri/config: esriConfig.request.proxyUrl is not set.",Efe=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Sfe=/^\s*http:/i,T6e=/^\s*https:/i,k6e=/^\s*file:/i,Tfe=/:\d+$/,A6e=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,I6e=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),P6e=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let ow=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let n=this.uri.match(I6e);this.scheme=n[2]||(n[1]?"":null),this.authority=n[4]||(n[3]?"":null),this.path=n[5],this.query=n[7]||(n[6]?"":null),this.fragment=n[9]||(n[8]?"":null),this.authority!=null&&(n=this.authority.match(P6e),this.user=n[3]||null,this.password=n[4]||null,this.host=n[6]||n[7],this.port=n[9]||null)}toString(){return this.uri}};const OC={},C6e=new ow(nr.applicationUrl);let la=C6e;const R6e=M6e();let uB=R6e;const hB=()=>la,eIt=()=>uB;function M6e(){const t=la.path,e=t.slice(0,t.lastIndexOf("/")+1);return`${`${la.scheme}://${la.host}${la.port!=null?`:${la.port}`:""}`}${e}`}function Ha(t){if(!t)return null;const e={path:null,query:null},n=new ow(t),r=t.indexOf("?");return n.query===null?e.path=t:(e.path=t.slice(0,r),e.query=dB(n.query)),n.fragment&&(e.hash=n.fragment,n.query===null&&(e.path=e.path.slice(0,e.path.length-(n.fragment.length+1)))),e}function dB(t){const e=t.split("&"),n={};for(const r of e){if(!r)continue;const i=r.indexOf("=");let s,o;i<0?(s=decodeURIComponent(r),o=""):(s=decodeURIComponent(r.slice(0,i)),o=decodeURIComponent(r.slice(i+1)));let a=n[s];typeof a=="string"&&(a=n[s]=[a]),Array.isArray(a)?a.push(o):n[s]=o}return n}function Gk(t,e){return t?Object.keys(t).map(n=>{const r=t[n];if(r==null)return"";const i=encodeURIComponent(n)+"=",s=e?.[n];return s?i+encodeURIComponent(s(r)):Array.isArray(r)?r.map(o=>O4(o)?i+encodeURIComponent(JSON.stringify(o)):i+encodeURIComponent(o)).join("&"):O4(r)?i+encodeURIComponent(JSON.stringify(r)):i+encodeURIComponent(r)}).filter(n=>n).join("&"):""}function kfe(t=!1){let e,n=cb.proxyUrl;if(typeof t=="string"){e=F6e(t);const r=RO(t);r&&(n=r.proxyUrl)}else e=!!t;if(!n)throw S6e().warn(XQ),new Xe("urlUtils:proxy-not-set",XQ);return e&&Z8()&&(n=yB(n)),Ha(n)}function tIt(t,e=!1){const n=RO(t);let r,i;if(n){const s=fB(n.proxyUrl);r=s.path,i=s.query?dB(s.query):null}else if(e){const s=kfe(t);r=s.path,i=s.query}if(r){const s=Ha(t);t=r+"?"+s.path;const o=Gk({...i,...s.query});o&&(t=`${t}?${o}`)}return t}const RE={path:"",query:""};function fB(t){const e=t.indexOf("?");return e!==-1?(RE.path=t.slice(0,e),RE.query=t.slice(e+1)):(RE.path=t,RE.query=null),RE}function Afe(t){return t=(t=D4(t=B6e(t=fB(t).path),!0)).toLowerCase()}function N6e(t){const e={proxyUrl:t.proxyUrl,urlPrefix:Afe(t.urlPrefix)},n=cb.proxyRules,r=e.urlPrefix;let i=n.length;for(let s=0;s<n.length;s++){const o=n[s].urlPrefix;if(r.startsWith(o)){if(r.length===o.length)return-1;i=s;break}o.startsWith(r)&&(i=s+1)}return n.splice(i,0,e),i}function RO(t){const e=cb.proxyRules,n=Afe(t);for(let r=0;r<e.length;r++)if(n.startsWith(e[r].urlPrefix))return e[r]}function nIt(t,e){if(!t||!e)return!1;t=L4(t),e=L4(e);const n=YQ(t),r=YQ(e);return n!=null&&r!=null?n.portalHostname===r.portalHostname:n==null&&r==null&&z1(t,e,!0)}function O6e(t,e){return t=L4(t),e=L4(e),D4(t)===D4(e)}function L4(t){const e=(t=kg(t)).indexOf("/sharing");return e>0?t.slice(0,e):t.replace(/\/+$/,"")}function X8(t,e=cb.interceptors){const n=r=>r instanceof RegExp?r.test(t):typeof r=="string"?t.startsWith(r):r==null;if(e){for(const r of e)if(Array.isArray(r.urls)){if(r.urls.some(n))return r}else if(n(r.urls))return r}return null}function z1(t,e,n=!1){if(!t||!e)return!1;const r=Q8(t),i=Q8(e);return!(!n&&r.scheme!==i.scheme)&&r.host!=null&&i.host!=null&&r.host.toLowerCase()===i.host.toLowerCase()&&r.port===i.port}function pB(t){if(typeof t=="string"){if(!Tl(t))return!0;t=Q8(t)}if(z1(t,la))return!0;const e=cb.trustedServers||[];for(let n=0;n<e.length;n++){const r=L6e(e[n]);for(let i=0;i<r.length;i++)if(z1(t,r[i]))return!0}return!1}function L6e(t){return OC[t]||(gB(t)||Dd(t)?OC[t]=[new ow(tu(t))]:OC[t]=[new ow(`http://${t}`),new ow(`https://${t}`)]),OC[t]}function tu(t,e=uB,n){return Dd(t)?n?.preserveProtocolRelative?t:la.scheme==="http"&&la.authority===mc(t).slice(2)?`http:${t}`:`https:${t}`:gB(t)?t:pI(t.startsWith("/")?U6e(e):e,t)}function mB(t,e=uB,n){if(t==null||!Tl(t))return t;const r=kg(t),i=r.toLowerCase(),s=kg(e).toLowerCase().replace(/\/+$/,""),o=n?kg(n).toLowerCase().replace(/\/+$/,""):null;if(o&&!s.startsWith(o))return t;const a=(h,f,g)=>(g=h.indexOf(f,g))===-1?h.length:g;let l=a(i,"/",i.indexOf("//")+2),c=-1;for(;i.slice(0,l+1)===s.slice(0,l)+"/"&&(c=l+1,l!==i.length);)l=a(i,"/",l+1);if(c===-1||o&&c<o.length)return t;t=r.slice(c);const u=s.slice(c-1).replaceAll(/[^/]+/g,"").length;if(u>0)for(let h=0;h<u;h++)t=`../${t}`;else t=`./${t}`;return t}function kg(t){return t=q6e(t=H6e(t=W6e(t=tu(t=t.trim()))))}function pI(...t){const e=t.filter(_2);if(!e?.length)return;const n=[];if(Tl(e[0])){const i=e[0],s=i.indexOf("//");s!==-1&&(n.push(i.slice(0,s+1)),z6e(e[0])&&(n[0]+="/"),e[0]=i.slice(s+2))}else e[0].startsWith("/")&&n.push("");const r=e.reduce((i,s)=>s?i.concat(s.split("/")):i,[]);for(let i=0;i<r.length;i++){const s=r[i];s===".."&&n.length>0&&n[n.length-1]!==".."?n.pop():(!s&&i===r.length-1||s&&(s!=="."||n.length===0))&&n.push(s)}return n.join("/")}function mc(t,e=!1){if(t==null||mI(t)||gv(t))return null;let n=t.indexOf("://");if(n===-1&&Dd(t))n=2;else{if(n===-1)return null;n+=3}const r=t.indexOf("/",n);return r!==-1&&(t=t.slice(0,r)),e&&(t=D4(t,!0)),t}function Tl(t){return Dd(t)||gB(t)}function mI(t){return t!=null&&t.startsWith("blob:")}function gv(t){return t!=null&&t.startsWith("data:")}function D6e(t){const e=x2(t);return e?.isBase64?bfe(e.data):null}function rIt(t){return E6e(t).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const j6e=/^data:(.*?)(;base64)?,(.*)$/;function x2(t){const e=t.match(j6e);if(!e)return null;const[,n,r,i]=e;return{mediaType:n,isBase64:!!r,data:i}}function Ife(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}async function $6e(t){return(await fetch(t)).blob()}function iIt(t){const e=D6e(t);if(!e)return null;const n=x2(t);return new Blob([e],{type:n.mediaType})}function Dd(t){return t!=null&&t.startsWith("/")&&t[1]==="/"}function gB(t){return t!=null&&Efe.test(t)}function F6e(t){return t!=null&&T6e.test(t)||la.scheme==="https"&&Dd(t)}function V6e(t){return t!=null&&Sfe.test(t)||la.scheme==="http"&&Dd(t)}function z6e(t){return t!=null&&k6e.test(t)}function yB(t){return Dd(t)?`https:${t}`:t.replace(Sfe,"https:")}function G6e(){return la.scheme==="http"}function Z8(){return la.scheme==="https"}function D4(t,e=!1){return Dd(t)?t.slice(2):(t=t.replace(Efe,""),e&&t.length>1&&t.startsWith("/")&&t[1]==="/"&&(t=t.slice(2)),t)}function U6e(t){const e=t.indexOf("//"),n=t.indexOf("/",e+2);return n===-1?t:t.slice(0,n)}function sIt(t){let e=0;if(Tl(t)){const r=t.indexOf("//");r!==-1&&(e=r+2)}const n=t.lastIndexOf("/");return n<e?t:t.slice(0,n+1)}function oIt(t,e){if(!t)return"";const n=Ha(t).path.replace(/\/+$/,""),r=n.slice(n.lastIndexOf("/")+1);if(!e?.length)return r;const i=new RegExp(`\\.(${e.join("|")})$`,"i");return r.replace(i,"")}function B6e(t){return t.endsWith("/")?t:`${t}/`}function Pfe(t){return t.replace(/\/+$/,"")}function W6e(t){if(/^https?:\/\//i.test(t)){const e=fB(t);t=(t=e.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function H6e(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function q6e(t){const e=cb.httpsDomains;if(!V6e(t))return t;const n=t.indexOf("/",7);let r;if(r=n===-1?t:t.slice(0,n),r=r.toLowerCase().slice(7),Tfe.test(r)){if(!r.endsWith(":80"))return t;r=r.slice(0,-3),t=t.replace(":80","")}return G6e()&&r===la.authority&&!A6e.test(t)||(Z8()&&r===la.authority||e&&e.some(i=>r===i||r.endsWith(`.${i}`))||Z8()&&!RO(t))&&(t=yB(t)),t}function J8(t,e,n){if(!(e&&n&&t&&Tl(t)))return t;const r=t.indexOf("//"),i=t.indexOf("/",r+2),s=t.indexOf(":",r+2),o=Math.min(i<0?t.length:i,s<0?t.length:s);return t.slice(r+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,r+2)}${n}${t.slice(o)}`}function K6e(t,e){const n=new URL(t);return n.host=e,n.port&&!Tfe.test(e)&&(n.port=""),n.toString()}function aIt(t){return new URL(t).host}function Q8(t){return typeof t=="string"?new ow(tu(t)):(t.scheme||(t.scheme=la.scheme),t)}function lIt(t){return X6e.test(t)}function Cfe(t,e){const n=Ha(t),r=Object.keys(n.query||{});return r.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${r.join(", ")}.`),n.path}function Y6e(t,e,n){const r=Ha(t),i=r.query||{};return i[e]=String(n),`${r.path}?${Gk(i)}`}function Sj(t,e){if(!e)return t;const n=Ha(t),r=n.query||{};for(const[s,o]of Object.entries(e))o!=null&&(r[s]=o);const i=Gk(r);return i?`${n.path}?${i}`:n.path}function Rfe(t){if(t==null)return null;const e=t.match(Mfe);return e?e[2]:null}function ZQ(t){if(t==null)return null;const e=t.match(Mfe);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}async function cIt(t){return typeof t=="string"?x2(t)??{data:t}:new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(x2(r.result)),r.onerror=i=>n(i)})}const Mfe=/([^.]*)\.([^/]*)$/,X6e=/(^data:image\/svg|\.svg$)/i,Nfe="20251114",Ofe="ec088c999de2dac6fb9478a47da1bad775545540";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const Z6e="4.34";let Jr,vB=Z6e;function uIt(t){Jr=t}function hIt(t){const e=Jr?.findCredential(t);return e?.token?Y6e(t,"token",e.token):t}vB="4.34.8",ye("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),ye("host-webworker");function J6e(t,e){for(const n of t.values())if(e(n))return!0;return!1}function dIt(t,e){for(const n of t.values())if(!e(n))return!1;return!0}function fIt(t,e){for(const n of t.values())if(e(n))return n;return null}function gI(t,e,n){const r=t.get(e);if(r!==void 0)return r;const i=n();return t.set(e,i),i}function pIt(t){const e=new Map;return n=>(e.has(n)||e.set(n,t(n)),e.get(n))}const Q6e={remove:()=>{}};function Zn(t){return t?{remove(){t&&(t(),t=void 0)}}:Q6e}function Lfe(t){t.forEach(e=>e?.remove())}function mIt(t){Lfe(t),t.length=0}function yv(t){return Zn(()=>Lfe(t))}function gIt(t){return Zn(()=>t()?.remove())}function eje(t){return Zn(()=>t?.abort())}function yIt(t){return Zn(t!=null?()=>t.destroy():void 0)}function tje(t){return typeof t=="object"&&!!t&&"remove"in t&&typeof t.remove=="function"}function vIt(t){tje(t)&&t.remove()}function _It(t){return{[Symbol.dispose](){t.remove()}}}function nje(t){return{setTimeout:(e,n)=>{const r=t.setTimeout(e,n);return Zn(()=>t.clearTimeout(r))}}}const ub=nje(globalThis);function MO(t){return rje(t)||Dfe(t)}function rje(t){return t!=null&&typeof t=="object"&&"on"in t&&typeof t.on=="function"}function Dfe(t){return t!=null&&typeof t=="object"&&"addEventListener"in t&&typeof t.addEventListener=="function"}function hb(t,e,n){if(!MO(t))throw new TypeError("target is not a Evented or EventTarget object");return Dfe(t)?ije(t,e,n):t.on(e,n)}function ije(t,e,n,r){if(Array.isArray(e)){const i=e.slice();for(const s of i)t.addEventListener(s,n,r);return Zn(()=>{for(const s of i)t.removeEventListener(s,n,r)})}return t.addEventListener(e,n,r),Zn(()=>t.removeEventListener(e,n,r))}function jfe(t,e,n){if(!MO(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,n);const r=hb(t,e,i=>{r.remove(),n.call(t,i)});return r}function $fe(t,e){if(t==null)throw new Error(e??"value is None")}function Di(t){return t?.destroy(),null}function xIt(t){return t?.dispose(),null}function ii(t){return t?.remove(),null}function G1(t){return t?.abort(),null}function wIt(t){return t?.release(),null}function bIt(t,e,n){return t!=null&&e!=null?n!=null?n(t,e):t.equals(e):t===e}function sje(t,e){let n;return t.some((r,i)=>(n=e(r,i),n!=null)),n??void 0}function Cr(t="Aborted"){return new Xe("AbortError",t)}function mi(t,e="Aborted"){if(ma(t))throw Cr(e)}function yI(t){return t instanceof AbortSignal?t:t?.signal??void 0}function ma(t){const e=yI(t);return e!=null&&e.aborted}function Ffe(t){if(wa(t))throw t}function JQ(t){if(!wa(t))throw t}function vu(t,e){const n=yI(t);if(n!=null){if(!n.aborted)return jfe(n,"abort",()=>e());e()}}function _B(t,e){const n=yI(t);if(n!=null)return mi(n),jfe(n,"abort",()=>e(Cr()))}function oje(t,e){return yI(e)==null?t:new Promise((n,r)=>{let i=vu(e,()=>r(Cr()));const s=()=>{i=ii(i)};t.then(s,s),t.then(n,r)})}function wa(t){return t?.name==="AbortError"}async function j4(t){try{return await t}catch(e){if(!wa(e))throw e;return}}async function xB(t){if(!t)return;if(typeof t.forEach!="function"){const n=Object.keys(t),r=n.map(o=>t[o]),i=await xB(r),s={};return n.map((o,a)=>s[o]=i[a]),s}const e=t;return Promise.allSettled(e).then(n=>Array.from(e,(r,i)=>{const s=n[i];return s.status==="fulfilled"?{promise:r,value:s.value}:{promise:r,error:s.reason}}))}async function aje(t){return(await Promise.allSettled(t)).filter(e=>e.status==="fulfilled").map(e=>e.value)}async function EIt(t){return(await Promise.allSettled(t)).filter(e=>e.status==="rejected").map(e=>e.reason)}function Vfe(t,e=void 0,n){const r=new AbortController;return vu(n,()=>r.abort()),new Promise((i,s)=>{let o=setTimeout(()=>{o=0,i(e)},t);vu(r,()=>{o&&(clearTimeout(o),s(Cr()))})})}function SIt(t,e,n,r){const i=n&&"abort"in n?n:null;r!=null||i||(r=n);let s=setTimeout(()=>{s=0,i?.abort()},e);const o=()=>r||new Xe("promiseUtils:timeout","The wrapped promise did not resolve within "+e+" ms");return t.then(a=>{if(s===0)throw o();return clearTimeout(s),a},a=>{throw clearTimeout(s),s===0?o():a})}function lje(t,e){const n=new AbortController,r=setTimeout(()=>n.abort(),e);return vu(t,()=>{n.abort(),clearTimeout(r)}),{...t,signal:n.signal}}function ga(t){return t&&typeof t.then=="function"}function e9(t){return ga(t)?t:Promise.resolve(t)}function cje(t,e=-1){let n,r,i,s,o=null;const a=(...l)=>{if(n){r=l,s&&s.reject(Cr()),s=xc();const f=s.promise;if(o){const g=o;o=null,g.abort()}return f}if(i=s||xc(),s=null,e>0){const f=new AbortController;n=e9(t(...l,f.signal));const g=n;Vfe(e).then(()=>{n===g&&(s?f.abort():o=f)})}else n=1,n=e9(t(...l));const c=()=>{const f=r;r=i=n=o=null,f!=null&&a(...f)},u=n,h=i;return u.then(c,c),u.then(h.resolve,h.reject),h.promise};return a}function xc(){let t,e;const n=new Promise((i,s)=>{t=i,e=s}),r=i=>{t(i)};return r.resolve=i=>t(i),r.reject=i=>e(i),r.timeout=(i,s)=>ub.setTimeout(()=>r.reject(s),i),r.promise=n,r}function TIt(t,e){e.then(t.resolve,t.reject)}async function QQ(t){await Promise.resolve(),mi(t)}function db(t,e){const n=e?.url?.path;if(t&&n&&(t=tu(t,n,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const r=mB(t,e.portalItem.itemUrl);r!=null&&r.startsWith(uje)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(r).path)}return(t=t9(t,e?.portal))&&OO.test(t)?wB(t):t}function w2(t,e,n=0){if((t=t&&OO.test(t)?Bfe(t):t)==null)return t;!Tl(t)&&e?.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let r=tu(t);if(e){const i=e.verifyItemRelativeUrls?.rootPath||e.url?.path;if(i){const s=t9(i,e.portal),o=t9(r,e.portal);r=mB(o,s,s),r!=null&&r!==o&&r!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(r)}}return r=Ufe(r,e?.portal),Tl(r)&&(r=kg(r)),e?.resources&&e?.portalItem&&!Tl(r)&&!gv(r)&&n===0&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(r),compress:!1}),r}function NO(t,e,n){return db(t,n)}function b2(t,e,n,r){const i=w2(t,r);i!==void 0&&(e[n]=i)}const OO=/\/items\/([^/]+)\/resources\/(.*)/,uje="./resources/";function zfe(t){return(t?.match(OO)??null)?.[1]??null}function Gfe(t){const e=t?.match(OO)??null;if(e==null)return null;const n=e[2],r=n.lastIndexOf("/");if(r===-1){const{path:o,extension:a}=ZQ(n);return{prefix:null,filename:o,extension:a}}const{path:i,extension:s}=ZQ(n.slice(r+1));return{prefix:n.slice(0,r),filename:i,extension:s}}function Ufe(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?J8(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function t9(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const n=`${e.urlKey}.${e.customBaseUrl}`,r=hB();return z1(r,`${r.scheme}://${n}`)?J8(t,e.portalHostname,n):J8(t,n,e.portalHostname)}function wB(t){if(!t)return t||null;let e=t;return e&&Jr&&!Jr.findCredential(e)&&(e=wfe(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function Bfe(t){if(!t)return t||null;let e=t;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&Jr&&!Jr.findCredential(e)&&(e=wfe(e)),e}const hje=Object.freeze(Object.defineProperty({__proto__:null,ensureMainOnlineDomain:Ufe,fromCDNUrl:Bfe,fromJSON:db,itemIdFromResourceUrl:zfe,prefixAndFilenameFromResourceUrl:Gfe,read:NO,toCDNUrl:wB,toJSON:w2,write:b2},Symbol.toStringTag,{value:"Module"})),Wfe={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},Hfe=Object.values(Wfe),qfe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Hfe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),dje=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${Hfe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),fje=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function kIt(t){return qfe.test(t)}function vI(t){if(t==null)return null;const e=Ha(t),n=e?.path.match(qfe)||e?.path.match(dje);if(!n)return null;const[,r,i,s,o]=n,a=i.indexOf("/");return{title:Kfe(a!==-1?i.slice(a+1):i),serverType:Wfe[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:r}}}function pje(t){const e=Ha(t).path.match(fje);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function Kfe(t){return(t=t.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function AIt(t,e){const n=[];if(t){const r=vI(t);r!=null&&r.title&&n.push(r.title)}if(e){const r=Kfe(e);n.push(r)}if(n.length===2){if(n[0].toLowerCase().includes(n[1].toLowerCase()))return n[0];if(n[1].toLowerCase().includes(n[0].toLowerCase()))return n[1]}return n.join(" - ")}function eee(t){let e=mc(t,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")||/^[a-z\d-]+\.svcs[a-z\d-]*\./.test(e)))}function IIt(t,e){return t&&Pfe(Cfe(t,e))}function PIt(t){let{url:e}=t;if(!e)return{url:e};e=Cfe(e,t.logger);const n=Ha(e),r=vI(n.path);let i;if(r!=null)r.sublayer!=null&&t.layer.layerId==null&&(i=r.sublayer),e=r.url.path;else if(t.nonStandardUrlAllowed){const s=pje(n.path);s!=null&&(e=s.serviceUrl,i=s.sublayerId)}return{url:Pfe(e),layerId:i}}function CIt(t,e,n,r,i){b2(e,r,"url",i),r.url&&t.layerId!=null&&(r.url=pI(r.url,n,t.layerId.toString()))}function RIt(t){if(!t)return!1;const e=t.toLowerCase(),n=e.includes("/services/"),r=e.includes("/mapserver/wmsserver"),i=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return n&&(r||i||s)}const mje=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function bB(t){if(!EB(t))return null;const e=r=>r instanceof RegExp?r.test(t):typeof r=="string"&&t.startsWith(r),n=nr.apiKeys;if(Array.isArray(n.scopes)){for(const r of n.scopes)if(Array.isArray(r.urls)){if(r.urls.some(e))return r.token}else if(e(r.urls))return r.token}return n.basemapStyles&&/^https?:\/\/(i?basemaps|basemapstyles)-api\.arcgis\.com\//i.test(t)?n.basemapStyles:nr.apiKey&&/^https?:\/\/.+\.arcgis\.com(\/|$)/i.test(t)?nr.apiKey:null}function n9(){return nr.apiKey!=null||nr.apiKeys.basemapStyles!=null}function gje(t,e){return e?EB(t):bB(t)!=null}function EB(t){const e=mc(t,!0);return!!e&&!mje.has(e)&&!t.endsWith("/sharing/rest/generateToken")}function yje(t,e,n=!1,r){return new Promise((i,s)=>{if(ma(r))return void s(tee());let o=()=>{c(),s(new Error(`Unable to load ${e}`))},a=async()=>{const u=t;try{await u.decode()}catch{}c(),i(u)},l=()=>{if(!t)return;const u=t;c(),u.src="",s(tee())};const c=()=>{t&&(t.removeEventListener("error",o),t.removeEventListener("load",a),o=null,a=null,t=null,r?.removeEventListener("abort",l),l=null,n&&URL.revokeObjectURL(e))};r?.addEventListener("abort",l),t.addEventListener("error",o),t.addEventListener("load",a)})}function tee(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}const Yfe="Timeout exceeded";function vje(){return new Error(Yfe)}function MIt(t){return typeof t=="object"&&!!t&&"message"in t&&t.message===Yfe}function _je(t){nr.request.crossOriginNoCorsDomains||(nr.request.crossOriginNoCorsDomains={});const e=nr.request.crossOriginNoCorsDomains;for(let n of t)n=n.toLowerCase(),/^https?:\/\//.test(n)?e[mc(n)??""]=0:(e[mc("http://"+n)??""]=0,e[mc("https://"+n)??""]=0)}function xje(t){const e=nr.request.crossOriginNoCorsDomains;if(e){let n=mc(t);if(n)return n=n.toLowerCase(),!z1(n,hB())&&e[n]<Date.now()-36e5}return!1}async function wje(t){const e=Ha(t);t=e.path,e.query?.f==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}const n=nr.request.crossOriginNoCorsDomains,r=mc(t);n&&r&&(n[r.toLowerCase()]=Date.now())}const r9=new Map;function bje(t,e){const n=e?.preferredHost;if(!n||z1(t,`https://${n}`,!0))return;const r=vI(t);if(!r||r.serverType!=="FeatureServer"||xfe(t))return;const i=r.url.path.toLowerCase();r9.has(i)||r9.set(i,n)}function nee(t){const e=vI(t)?.url.path.toLowerCase();if(!e)return t;const n=r9.get(e);return n?K6e(t,n):t}async function ns(t,e){t instanceof URL&&(t=t.toString()),e?.query instanceof URLSearchParams&&(e.query=dB(e.query.toString().replaceAll("+"," ")));const n=gv(t),r=mI(t);r||n||(t=kg(t));const i={url:t,requestOptions:{...e}},s=g=>({data:g,getAllHeaders:E2,getHeader:E2,httpStatus:200,requestOptions:i.requestOptions,url:i.url}),o=X8(t,Zc.internalInterceptors);if(o){const g=await iee(o,i);if(g!=null)return s(g)}let a=X8(t);if(a){const g=await iee(a,i);if(g!=null)return s(g);a.after||a.error||(a=null)}if(t=i.url,(e=i.requestOptions).responseType==="image"&&(ye("host-webworker")||ye("host-node")))throw fh("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),i);if(e.method==="head"){if(e.body)throw fh("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),i);if(n||r)throw fh("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),i)}if(await Aje(),$4)return $4.execute(t,e);const l=new AbortController,c=vu(e,()=>l.abort()),u={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:i,redoRequest:!1,useIdentity:Zc.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},h=e.useRequestQueue?Mje(u):s9(u),f=await h.finally(()=>c?.remove());return a?.after?.(f),f}let $4,Xfe=!1;const Zc=nr.request,Zfe="FormData"in globalThis,Eje=new Set([499,498,403,401]),Sje=new Set(["COM_0056","COM_0057","SB_0008"]),Tje=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],E2=()=>null,F4=Symbol();function kje(t){const e=mc(t);e&&!ns._corsServers.includes(e)&&ns._corsServers.push(e)}function ree(t){const e=mc(t);return!e||e.endsWith(".arcgis.com")||ns._corsServers.includes(e)||pB(e)}function fh(t,e,n,r){let i;const s={url:n.url,requestOptions:n.requestOptions,getAllHeaders:E2,getHeader:E2,ssl:!1};if(e instanceof Xe)return e.details?(e.details=Ze(e.details),e.details.url=n.url,e.details.requestOptions=n.requestOptions):e.details=s,e;if(e){const o=r&&(()=>Array.from(r.headers)),a=r&&(u=>r.headers.get(u)),l=r?.status,c=e.message;c&&(i=c),o&&a&&(s.getAllHeaders=o,s.getHeader=a),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||l||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?(s.messages=[e.details],i??=e.details):(s.messages=e.details,i??=s.messages?.[0]),s.raw=F4 in e?e[F4]:e}return i??="Error",wa(e)?Cr():new Xe(t,i,s)}async function Aje(){ye("host-webworker")&&(!$4&&globalThis.invokeStaticMessage?$4=await _e(()=>import("./request-vJkX0nDh.js"),[]):Xfe=!0)}async function i9(){Jr||await _e(()=>import("./IdentityManager-mYLCqHfx.js"),__vite__mapDeps([17,18]))}async function Ije(t){const e=t.params.url,n=t.params.requestOptions,r=t.controller.signal,i=n.body;let s=null,o=null;if(Zfe&&"HTMLFormElement"in globalThis&&(i instanceof FormData?s=i:i instanceof HTMLFormElement&&(s=new FormData(i))),typeof i=="string"&&(o=i),t.fetchOptions={cache:n.cacheBust?"no-cache":"default",credentials:"same-origin",headers:n.headers||{},keepalive:n.keepAlive??!1,method:n.method==="head"?"HEAD":"GET",mode:"cors",priority:Zc.priority,redirect:"follow",signal:r},(s||o)&&(t.fetchOptions.body=s||o),(Xfe||n.authMode==="anonymous")&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||n.query?.token||s?.get("token")),!t.hasToken){const a=bB(e);a&&(n.query??={},n.query.token=a,t.hasToken=!0)}if(t.useIdentity&&!t.hasToken&&!t.credential&&!t.credentialToken&&!Jfe(e)&&!ma(r)){let a;n.authMode==="immediate"?(await i9(),a=await Jr.getCredential(e,{signal:r})):n.authMode==="no-prompt"?(await i9(),a=await Jr.getCredential(e,{prompt:!1,signal:r}).catch(()=>{})):Jr&&(a=Jr.findCredential(e)),a&&(t.credential=a,t.credentialToken=a.token,t.useSSL=!!a.ssl)}}function Jfe(t){return Tje.some(e=>e.test(t))}async function Pje(t){let e=t.params.url,n=nee(e);const r=t.params.requestOptions,i=t.fetchOptions??{},s=mI(e)||gv(e),o=r.responseType||"json",a=s?0:r.timeout!=null?r.timeout:Zc.timeout;let l=!1;if(!s){t.useSSL&&(e=yB(e));let g={...r.query};t.credentialToken&&(g.token=t.credentialToken);let y=Gk(g);ye("esri-url-encodes-apostrophe")&&(y=y.replaceAll("'","%27"));const _=n.length+1+y.length;let b;l=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||_>Zc.maxUrlLength;const T=r.useProxy||!!RO(e);if(T){const A=kfe(e);b=A.path,!l&&b.length+1+_>Zc.maxUrlLength&&(l=!0),A.query&&(g={...A.query,...g})}if(i.method==="HEAD"&&(l||T)){if(l)throw _>Zc.maxUrlLength?fh("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):fh("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(T)throw fh("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}l?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?e=Sj(e,g):(i.body=Gk(g),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):e=Sj(e,g),T&&(t.useProxy=!0,e=`${b}?${e}`),g.token&&Zfe&&i.body instanceof FormData&&!xfe(e)&&i.body.set("token",g.token),r.hasOwnProperty("withCredentials")?t.withCredentials=r.withCredentials:z1(e,hB())||(pB(e)||Jr&&Jr.findServerInfo(e)?.webTierAuth)&&(t.withCredentials=!0),t.withCredentials&&(i.credentials="include",xje(e)&&await wje(l?Sj(e,g):e)),n=nee(e)}let c,u,h=0,f=!1;a>0&&(h=setTimeout(()=>{f=!0,t.controller.abort()},a));try{if(r.responseType==="native-request-init")u=i,u.url=n,r.signal?u.signal=r.signal:delete u.signal;else if(r.responseType!=="image"||i.cache!=="default"||i.keepalive||i.method!=="GET"||l||Cje(r.headers)||!s&&!t.useProxy&&Zc.proxyUrl&&!ree(e)){if(ns._beforeFetch&&await ns._beforeFetch(e,i),c=await fetch(n,i),ns._afterFetch&&await ns._afterFetch(c),t.useProxy||kje(e),r.responseType==="native")u=c;else if(i.method!=="HEAD")if(c.ok){switch(o){case"array-buffer":u=await c.arrayBuffer();break;case"blob":case"image":u=await c.blob();break;default:u=await c.text()}if(h&&(clearTimeout(h),h=0),o==="json"||o==="xml"||o==="document")if(u)switch(o){case"json":u=JSON.parse(u);break;case"xml":u=see(u,"application/xml");break;case"document":u=see(u,"text/html")}else u=null;if(u){if(o==="array-buffer"||o==="blob"){const g=c.headers.get("Content-Type");if(g&&/application\/json|text\/plain/i.test(g)&&u[o==="blob"?"size":"byteLength"]<=750)try{const y=await new Response(u).json();y.error&&(u=y)}catch{}}o==="image"&&u instanceof Blob&&(u=await oee(URL.createObjectURL(u),t,!0))}}else{u=await c.text();try{u=JSON.parse(u)}catch{}}}else u=await oee(n,t)}catch(g){if(g.name==="AbortError")throw f?vje():Cr("Request canceled");if(!(!c&&g instanceof TypeError&&Zc.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||t.useProxy||ree(e))throw g;t.redoRequest=!0,N6e({proxyUrl:Zc.proxyUrl,urlPrefix:mc(e)??""})}finally{h&&clearTimeout(h)}return[c,u]}async function iee(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let n,r;try{r=await t.before(e)}catch(i){n=fh("request:interceptor",i,e)}if((r instanceof Error||r instanceof Xe)&&(n=fh("request:interceptor",r,e)),n)throw t.error&&t.error(n),n;return r}}function Cje(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function see(t,e){let n;try{n=new DOMParser().parseFromString(t,e)}catch{}if(!n||n.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return n}ns._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],ns._beforeFetch=void 0,ns._afterFetch=void 0;const Rje=new Map;async function Mje(t){const e=Oje(t.params.url);if(!e)return s9(t);const{QueueProcessor:n}=await _e(()=>import("./QueueProcessor-OavMPir9.js"),[]);return gI(Rje,e.origin,()=>{const i=e.isHosted?ye("request-queue-concurrency-hosted"):ye("request-queue-concurrency-non-hosted");return new n({concurrency:i,process:s=>{if(ma(s.params.requestOptions))throw fh("",Cr("Request canceled"),s.params);return s9(s)}})}).push(t)}async function s9(t){let e,n;await Ije(t);try{do[e,n]=await Pje(t);while(!await Nje(t,e,n))}catch(s){const o=fh("request:server",s,t.params,e);throw o.details.ssl=t.useSSL,t.interceptor?.error&&t.interceptor.error(o),o}const r=t.params.url;if(n)if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(r)){if(!t.hasToken&&!t.credentialToken&&n.user?.username&&!pB(r)){const s=mc(r,!0);s&&Zc.trustedServers.push(s)}Array.isArray(n.authorizedCrossOriginNoCorsDomains)&&_je(n.authorizedCrossOriginNoCorsDomains)}else(t.params.requestOptions.responseType||"json")==="json"&&bje(r,n);const i=t.credential;if(i&&Jr){let o=Jr.findServerInfo(i.server)?.owningSystemUrl;if(o){o=o.replace(/\/?$/,"/sharing");const a=Jr.findCredential(o,i.userId);a&&Jr._getIdenticalSvcIdx(o,a)===-1&&a.resources.unshift(o)}}return{data:n,getAllHeaders:e?()=>Array.from(e.headers):E2,getHeader:e?s=>e.headers.get(s):E2,httpStatus:e?.status??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function Nje(t,e,n){if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||r.responseType==="native"||r.responseType==="native-request-init")return!0;let i,s;if(n&&(n.error&&typeof n.error=="object"?i=n.error:n.status==="error"&&Array.isArray(n.messages)&&(i={...n},i[F4]=n,i.details=n.messages)),!i&&!e.ok)throw i=new Error(`Unable to load ${e.url} status: ${e.status}`),i[F4]=n,i;let o,a=null;i&&(s=Number(i.code),a=i.hasOwnProperty("subcode")?Number(i.subcode):null,o=i.messageCode,o=o?.toUpperCase());const l=r.authMode;if(s===403&&(a===4||i.message?.toLowerCase().includes("ssl")&&!i.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&Eje.has(s)&&!Jfe(t.params.url)&&(s!==403||(!o||!Sje.has(o))&&(a==null||a===2&&t.credentialToken))){await i9();try{const c=await Jr.getCredential(t.params.url,{error:fh("request:server",i,t.params),credential:t.credential,prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=c,t.credentialToken=c.token,t.useSSL=t.useSSL||c.ssl,!1}catch(c){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;i=c}}if(i)throw i;return!0}function oee(t,e,n=!1){const r=e.controller.signal,i=new Image;return e.withCredentials?i.crossOrigin="use-credentials":i.crossOrigin="anonymous",i.alt="",i.fetchPriority=Zc.priority,i.src=t,yje(i,t,n,r)}function Oje(t){let e,n;return typeof t=="string"?(e=mc(t,!0),n=eee(t)):(e=t.origin,n=eee(t.toString())),e==null?null:{origin:e,isHosted:n}}function Lje(t){return t?.release&&typeof t.release=="function"}function Dje(t){return t?.acquire&&typeof t.acquire=="function"}var Mg;let fb=(Mg=class{constructor(e,n,r,i=1,s=0){this._creator=e,this._acquireFunction=n,this._releaseFunction=r,this.allocationSize=i,this._pool=new Array(s),this._initialSize=s;for(let o=0;o<s;o++)this._pool[o]=this._creator();this.allocationSize=Math.max(i,1)}destroy(){this.prune(0)}acquire(...e){let n;if(Mg.test.disabled)n=this._creator();else{if(this._pool.length===0){const r=this.allocationSize;for(let i=0;i<r;i++)this._pool[i]=this._creator()}n=this._pool.pop()}return this._acquireFunction?this._acquireFunction(n,...e):Dje(n)&&n.acquire(...e),n}release(e){e&&!Mg.test.disabled&&(this._releaseFunction?this._releaseFunction(e):Lje(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let n=e;n<this._pool.length;++n){const r=this._pool[n];this._dispose(r)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}},Mg.test={disabled:!!ye("esri-tests-disable-memory-pools")},Mg);function jje(t){t.length=0}let Na=class{constructor(e=50,n=50){this._pool=new fb(()=>[],void 0,jje,n,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return Tj.acquire()}static release(e){return Tj.release(e)}static prune(){Tj.prune()}};const Tj=new Na(100),aee=new WeakMap;function $je(t,e,n=!1){const r=` DEPRECATED - ${e}`;if(!n)return void t.warn(r);let i=aee.get(t);i||(i=new Set,aee.set(t,i)),i.has(e)||(i.add(e),t.warn(r))}const V4="https://www.esriurl.com/";function Fje(t,e,n,r={}){ye("esri-deprecation-warnings")&&Gg(t,`This widget is deprecated. Use the ${e} component instead.`,{see:[`${e} component reference: ${V4}${n}/`,`Esri's move to web components: ${V4}components-transition-plan/`],replacement:`<${n}></${n}>`,warnOnce:!0,...r})}function Vje(t,e,n,r={}){ye("esri-deprecation-warnings")&&Gg(t,`This view model is deprecated. Use the ${e} component directly instead.`,{see:[`${e} component reference: ${V4}${n}/`,`Esri's move to web components: ${V4}components-transition-plan/`],replacement:`<${n}></${n}>`,warnOnce:!0,...r})}function OIt(t,e,n={}){ye("esri-deprecation-warnings")&&Gg(t,`Module: ${e}`,n)}function Qfe(t,e,n={}){if(ye("esri-deprecation-warnings")){const{moduleName:r}=n;Gg(t,`Function: ${(r?r+"::":"")+e+"()"}`,n)}}function o9(t,e,n={}){if(ye("esri-deprecation-warnings")){const{moduleName:r}=n;Gg(t,`Property: ${(r?r+"::":"")+e}`,n)}}function zje(t,e,n={}){ye("esri-deprecation-warnings")&&Gg(t,`Multiple argument constructor: ${e}`,{warnOnce:!0,replacement:`new ${e}({ <your properties here> })`,...n})}function Gg(t,e,n={}){if(ye("esri-deprecation-warnings")){const{replacement:r,version:i,see:s,warnOnce:o}=n;let a=e;if(r&&(a+=`
	 Replacement: ${r}`),i&&(a+=`
	 Version: ${i}`),s)if(Array.isArray(s)){a+=`
	 See for more details:`;for(const l of s)a+=`
		${l}`}else a+=`
	 See ${s} for more details.`;$je(t,a,o)}}function LIt(t){const e=[];return function*(){yield*e;let n,r=e.length;for(;!(n=t.next()).done;)for(e.push(n.value),yield n.value;++r<e.length;)yield e[r]}}function Gje(t,e){for(const n of t)if(n!=null&&e(n))return n}function z4(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let pb=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(n=>{e+=n.length}),e}add(e,n){if(z4(e)){const r=this._getOrCreateGroup(n);for(const i of e)cee(i)&&r.push(i)}else cee(e)&&this._getOrCreateGroup(n).push(e);return this}forEach(e,n){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&n&&r.forEach(n)}}has(e){return this._groups.has(LC(e))}remove(e){if(typeof e!="string"&&z4(e)){for(const n of e)this.remove(n);return this}return this.has(e)?(lee(this._getGroup(e)),this._groups.delete(LC(e)),this):this}removeAll(){return this._groups.forEach(lee),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const n=[];return this._groups.set(LC(e),n),n}_getGroup(e){return this._groups.get(LC(e))}};function LC(t){return t||"_default_"}function lee(t){for(const e of t)e instanceof pb?e.removeAll():e.remove()}function cee(t){return t!=null&&(!!t.remove||t instanceof pb)}const epe=Symbol("Accessor-beforeDestroy");function Ug(t){return t.__accessor__??null}function Uje(t,e){return t?.metadata?.[e]!=null}function _M(t,e,n){return n?G4(t,e,{policy:n,path:""}):G4(t,e,null)}function G4(t,e,n){return e?Object.keys(e).reduce((r,i)=>{const s=i;if(s==="__proto__")return r;let o=null,a="merge";if(n&&(o=n.path?`${n.path}.${i}`:i,a=n.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(r[s]))return r[s]=e[s],r;if(r[s]===void 0)return r[s]=Ze(e[s]),r;let l=r[s],c=e[s];if(l===c)return r;if(Array.isArray(c)||Array.isArray(r))l=l?Array.isArray(l)?r[s]=l.slice():r[s]=[l]:r[s]=[],c&&(Array.isArray(c)||(c=[c]),c.forEach(u=>{l.includes(u)||l.push(u)}));else if(c&&typeof c=="object")if(n){const u=n.path;n.path=o,r[s]=G4(l,c,n),n.path=u}else r[s]=G4(l,c,null);else r.hasOwnProperty(i)&&!e.hasOwnProperty(i)||(r[s]=c);return r},t||{}):t}function tpe(t){return Array.isArray(t)?t:t.split(".")}function uee(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function Bje(t){if(Array.isArray(t)){const e=[];for(const n of t)e.push(...uee(n));return e}return uee(t)}function npe(t,e,n,r){const i=Bje(e);if(i.length!==1){const s=i.map(o=>r(t,o,n));return yv(s)}return r(t,i[0],n)}function rpe(t,e){const n=t.endsWith("?")?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const i=parseInt(n,10);if(!isNaN(i))return Array.isArray(e)?e[i]:e.at(i)}const r=Ug(e);return Uje(r,n)?r.get(n):e[n]}function ipe(t,e,n){if(t==null)return t;const r=rpe(e[n],t);return!r&&n<e.length-1?void 0:n===e.length-1?r:ipe(r,e,n+1)}function _I(t,e,n=0){return typeof e!="string"||e.includes(".")?ipe(t,tpe(e),n):rpe(e,t)}function vd(t,e){return _I(t,e)}function hee(t,e){return _I(e,t)!==void 0}const sc={INITIALIZING:0,CONSTRUCTING:1,CONSTRUCTED:2,DESTROYING:3,DESTROYED:4};function mb(t){let e=t.constructor.__accessorMetadata__;const n=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!n){e=Object.create(e);for(const r in e)e[r]=Ze(e[r]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function xI(t,e){const n=mb(t);let r=n[e];return r||(r=n[e]={}),r}function Wje(t,e){return _M(t,e,qje)}const Hje=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function qje(t){return Hje.test(t)?"replace":"merge"}let Kje=class{constructor(e,n){this._observers=e,this._observer=n}remove(){ife(this._observers,this._observer)}},spe=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return Yje;this._observers==null&&(this._observers=[]);const n=this._observers;let r=!1,i=!1;const s=n.length;for(let o=0;o<s;++o){const a=n[o];if(a.destroyed)i=!0;else if(a===e){r=!0;break}}return r||(n.push(e),i&&this._removeDestroyedObservers()),new Kje(n,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const n=e.length;let r=0;for(let i=0;i<n;++i){for(;i+r<n&&e[i+r].destroyed;)++r;if(r>0){if(!(i+r<n))break;e[i]=e[i+r]}}e.length=n-r}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const n of e)n.onCommitted();this._observers=null}}};const Yje=Zn(),fi={Dirty:1,Overridden:2,Computing:4,NonNullable:8,HasDefaultValue:16,DepTrackingInitialized:32,AutoTracked:64,ExplicitlyTracking:128};let LO=class{constructor(e){this.accessed=void 0,this._handles=void 0,this._observer=e}destroy(){this.accessed?.clear(),this.clear()}onAccessed(e){this._observer!=null&&e!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(e))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(e=>{this._handles.push(e.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let e=0;e<this._handles.length;++e)this._handles[e].remove();this._handles.length=0}}};const U4=new LO,fS=[];let gT=U4;function nn(t){gT.onAccessed(t)}let xM=!1,wM=!1;function xp(t,e,n){if(xM)return SB(t,e,n);let r=null;return ope(t),r=e.call(n),ape(),r}function Xje(t,e){return xp(U4,t,e)}function SB(t,e,n){const r=xM;xM=!0,ope(t);let i=null;try{i=e.call(n)}catch(s){wM&&kt.getLogger("esri.core.accessorSupport.tracking").error(s)}return ape(),xM=r,i}function ope(t){gT=t,fS.push(t)}function ape(){const t=fS.length;if(t>1){const e=fS.pop();gT=fS[t-2],e.onTrackingEnd()}else if(t===1){const e=fS.pop();gT=U4,e.onTrackingEnd()}else gT=U4}function lpe(t,e){if(e.flags&fi.DepTrackingInitialized)return;e.flags|=fi.DepTrackingInitialized;const n=wM;wM=!1,e.flags&fi.AutoTracked?SB(e.trackingTarget,e.metadata.get,t):cpe(t,e),wM=n}const Zje=[];function cpe(t,e){e.flags&fi.ExplicitlyTracking||(e.flags|=fi.ExplicitlyTracking,SB(e.trackingTarget,()=>{const n=e.metadata.dependsOn||Zje;for(const r of n)if(typeof r!="string"||r.includes(".")){const i=tpe(r);for(let s=0,o=t;s<i.length&&o!=null&&typeof o=="object";++s)o=dee(o,i[s],s!==i.length-1)}else dee(t,r,!1)}),e.flags&=-129)}function dee(t,e,n){const r=e.endsWith("?")?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const i=Ug(t);if(i){const s=i.propertiesByName.get(r);s&&(nn(s),lpe(t,s))}return n?t[r]:void 0}let fee=class extends spe{constructor(e,n){super(),this.propertyName=e,this.metadata=n,this.trackingTarget=new LO(this),this.flags=0,this.flags=fi.Dirty|(n.nonNullable?fi.NonNullable:0)|(n.hasOwnProperty("value")?fi.HasDefaultValue:0)|(n.get===void 0?fi.DepTrackingInitialized:0)|(n.dependsOn===void 0?fi.AutoTracked:0)}destroy(){this.flags&fi.Dirty&&this.onCommitted(),super.destroy(),this.trackingTarget.destroy()}getComputed(e){e.mutable&&nn(this);const n=e.store,r=this.propertyName,i=this.flags,s=n.get(r);if(i&fi.Computing||~i&fi.Dirty&&n.has(r))return s;this.flags|=fi.Computing;const o=e.host;let a;i&fi.AutoTracked?a=xp(this.trackingTarget,this.metadata.get,o):(cpe(o,this),a=this.metadata.get.call(o)),this.flags|=fi.DepTrackingInitialized,n.set(r,a,1);const l=n.get(r);return l===s?this.flags&=-2:Xje(this.commit,this),this.flags&=-5,l}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onInvalidated(){~this.flags&fi.Overridden&&(this.flags|=fi.Dirty);const e=this._observers;if(e&&e.length>0)for(const n of e)n.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const n=e.slice();for(const r of n)r.onCommitted()}}};const zIt=8;function TB(t){switch(t){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"link-chart":return 6;case"user":return 7;default:return null}}function a9(t){switch(t){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"link-chart";case 7:return"user"}}function Jje(t){return a9(t)}let Qje=class upe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const n=new upe;return this._values.forEach((r,i)=>{e&&e.has(i)||n.set(i,Ze(r))}),n}get(e){return this._values.get(e)}originOf(){return 7}keys(){return[...this._values.keys()]}set(e,n){this._values.set(e,n)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}isAtOrigin(e,n){return this.has(e)}isBelowOrigin(e,n){return!this.has(e)}forEach(e){this._values.forEach(e)}};function E_(t,e,n){return t!==void 0}function pee(t,e,n,r){return t!==void 0&&(!(n==null&&t.flags&fi.NonNullable)||(r.lifecycle,!1))}let e$e=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=sc.INITIALIZING,this.store=new Qje,this.mutable=!0,this._origin=7;const n=this.host.constructor.__accessorMetadata__;for(const r in n){const i=new fee(r,n[r]);this.propertiesByName.set(r,i)}this.metadata=n}initialize(){this.lifecycle=sc.CONSTRUCTING}constructed(){this.lifecycle=sc.CONSTRUCTED}destroy(){this.lifecycle=sc.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==sc.INITIALIZING}get(e){const n=this.propertiesByName.get(e);if(!E_(n))return;if(n.metadata.get)return n.getComputed(this);this.mutable&&nn(n);const r=this.store;return r.has(e)?r.get(e):n.metadata.value}originOf(e){const n=this.store.originOf(e);if(n===void 0){const r=this.propertiesByName.get(e);if(r!==void 0&&r.flags&fi.HasDefaultValue)return"defaults"}return a9(n)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){const n=this.propertiesByName.get(e);if(E_(n))return this.store.has(e)?this.store.get(e):n.metadata.value}internalSet(e,n){const r=this.propertiesByName.get(e);E_(r)&&this._internalSet(r,n)}getDependsInfo(e,n,r){const i=this.propertiesByName.get(n);if(!E_(i))return"";const s=new LO,o=xp(s,()=>i.metadata.get?.call(e));let a=`${r}${e.declaredClass.split(".").pop()}.${n}: ${o}
`;const l=s.accessed??new Set;if(l.size===0)return a;r+="  ";for(const c of l)c instanceof fee&&(a+=`${r}${c.propertyName}: undefined
`);return a}setAtOrigin(e,n,r){const i=this.propertiesByName.get(e);if(E_(i))return this._setAtOrigin(i,n,r)}isOverridden(e){const n=this.propertiesByName.get(e);return n!==void 0&&!!(n.flags&fi.Overridden)}clearOrigin(e,n){const r=this.store,i=this.propertiesByName.get(e);if(!E_(i))return;const s=r.isAtOrigin(e,n)&&!(i.flags&fi.Overridden);r.delete(e,n),s&&i.notifyChange()}clearOverride(e){const n=this.propertiesByName.get(e);n&&n.flags&fi.Overridden&&(n.flags&=-3,n.notifyChange())}override(e,n){const r=this.propertiesByName.get(e);if(!pee(r,e,n,this))return;const i=r.metadata.cast;if(i){const s=this._cast(i,n),{valid:o,value:a}=s;if(kj.release(s),!o)return;n=a}r.flags|=fi.Overridden,this._internalSet(r,n)}set(e,n){const r=this.propertiesByName.get(e);if(!pee(r,e,n,this))return;const i=r.metadata.cast;if(i){const o=this._cast(i,n),{valid:a,value:l}=o;if(kj.release(o),!a)return;n=l}const s=r.metadata.set;s?s.call(this.host,n):this._internalSet(r,n)}setDefaultOrigin(e){this._origin=TB(e)}getDefaultOrigin(){return a9(this._origin)}notifyChange(e){const n=this.propertiesByName.get(e);n!==void 0&&n.notifyChange()}invalidate(e){const n=this.propertiesByName.get(e);n!==void 0&&n.invalidate()}commit(e){const n=this.propertiesByName.get(e);n!==void 0&&n.commit()}_internalSet(e,n){const r=this.lifecycle!==sc.INITIALIZING?this._origin:0;this._setAtOrigin(e,n,r)}_setAtOrigin(e,n,r){const i=this.store,s=e.propertyName;if(i.isAtOrigin(s,r)&&cB(n,i.get(s))&&~e.flags&fi.Overridden)return;const o=i.isBelowOrigin(s,r)||i.isAtOrigin(s,r);o&&e.invalidate(),i.set(s,n,r),o&&e.commit(),lpe(this.host,e)}_cast(e,n){const r=kj.acquire();return r.valid=!0,r.value=n,e&&(r.value=e.call(this.host,n,r)),r}},t$e=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const kj=new fb(()=>new t$e);function B4(t,e,n){if(t&&e)if(typeof e=="object")for(const r of Object.getOwnPropertyNames(e))B4(t,r,e[r]);else{if(e.includes(".")){const i=e.split("."),s=i.splice(-1,1)[0];return void B4(vd(t,i),s,n)}const r=t.__accessor__;r!=null&&n$e(e,r),t[e]=n}}function n$e(t,e){if(ye("esri-unknown-property-errors")&&!r$e(t,e))throw new Xe("set:unknown-property",i$e(t,e))}function r$e(t,e){return e.metadata[t]!=null}function i$e(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}let s$e;function o$e(){return s$e}let hpe=class extends fb{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){const n=super.acquire(...e);return this._set.delete(n),n}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const DC=[];function W4(t){DC.push(t),DC.length===1&&queueMicrotask(()=>{const e=DC.slice();DC.length=0;for(const n of e)n()})}let yT=class{constructor(e,n=30){this.name=e,this._counter=0,this._samples=new Array(n)}push(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}set(e){e!=null&&(this._samples[this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,n)=>e-n)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,n)=>e+n,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};const H4=(t,e,n,r)=>{let i=e,s=e;const o=n>>>1,a=t[i-1];for(;s<=o;){s=i<<1,s<n&&r(t[s-1],t[s])<0&&++s;const l=t[s-1];if(r(l,a)<=0)break;t[i-1]=l,i=s}t[i-1]=a},dpe=(t,e)=>t<e?-1:t>e?1:0;function a$e(t,e,n,r){n===void 0&&(n=t.length),r===void 0&&(r=dpe);for(let s=n>>>1;s>e;s--)H4(t,s,n,r);const i=e+1;for(let s=n-1;s>e;s--){const o=t[e];t[e]=t[s],t[s]=o,H4(t,i,s,r)}}function*l$e(t,e,n,r){n===void 0&&(n=t.length),r===void 0&&(r=dpe);for(let s=n>>>1;s>e;s--)H4(t,s,n,r),yield;const i=e+1;for(let s=n-1;s>e;s--){const o=t[e];t[e]=t[s],t[s]=o,H4(t,i,s,r),yield}}const c$e=1.5,u$e=1.1;let fpe=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new tfe,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>mee(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const n=new Array;for(let r=0;r<this._length;r++){const i=this.data[r];e(i)&&n.push(i)}return n}at(e){if((e=Math.trunc(e)||0)<0&&(e+=this._length),!(e<0||e>=this._length))return this.data[e]}includes(e,n){const r=this.data.indexOf(e,n);return r!==-1&&r<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let n=e;n<this._length;++n)this.data[n]=this._deallocator(this.data[n]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,n=e.length){for(let r=0;r<n;r++)this.data[this._length++]=e[r]}fill(e,n){for(let r=0;r<n;r++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,mee(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const n=q8(this.data,e,this.length,this._hint);if(n!==-1)return this.data.splice(n,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(q8(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,n=e.length,r){this.length=l6e(this.data,e,this.length,n,this._hint,r),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,n){if(e>=this.length||n>=this.length||e===n)return;const r=this.data[e];this.data[e]=this.data[n],this.data[n]=r}sort(e){a$e(this.data,0,this.length,e)}iterableSort(e){return l$e(this.data,0,this.length,e)}some(e,n){for(let r=0;r<this.length;++r)if(e.call(n,this.data[r],r,this.data))return!0;return!1}find(e,n){const{data:r,length:i}=this;for(let s=0;s<i;++s)if(e.call(n,r[s]))return r[s]}filterInPlace(e,n){let r=0;for(let i=0;i<this._length;++i){const s=this.data[i];e.call(n,s,i,this.data)&&(this.data[i]=this.data[r],this.data[r]=s,r++)}if(this._deallocator)for(let i=r;i<this._length;i++)this.data[i]=this._deallocator(this.data[i]);return this._length=r,this._shrink(),this}forAll(e,n){const{data:r,length:i}=this;for(let s=0;s<i;++s)e.call(n,r[s],s,r)}forEach(e,n){this.data.slice(0,this.length).forEach(e,n)}map(e,n){const r=new Array(this.length);for(let i=0;i<this.length;++i)r[i]=e.call(n,this.data[i],i,this.data);return r}reduce(e,n){let r=n;for(let i=0;i<this.length;++i)r=e(r,this.data[i],i,this.data);return r}has(e){const n=this.length,r=this.data;for(let i=0;i<n;++i)if(r[i]===e)return!0;return!1}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.data[e]}};function mee(t){t.data.length>c$e*t.length&&(t.data.length=Math.floor(t.length*u$e))}function qIt(t){return t}function h$e(t){return 1e3*t}function KIt(t){return t}function YIt(t){return .001*t}let d$e=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},f$e=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},l9=0;const ME={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},c9=["prepare","preRender","render","postRender","update","finish"],u9=[],U1=new fpe;let p$e=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1,ppe()}};function m$e(){o1!=null&&(cancelAnimationFrame(o1),o1=requestAnimationFrame(kB))}function ppe(){o1==null&&(l9=performance.now(),o1=requestAnimationFrame(kB))}const q4={frameTasks:U1,willDispatch:!1,clearFrameTasks:g$e,dispatch:gpe,executeFrameTasks:y$e,reschedule:m$e};function gb(t){const e=new f$e(t);return u9.push(e),q4.willDispatch||(q4.willDispatch=!0,W4(gpe)),e}function S2(t){const e=new d$e(t);return U1.push(e),ppe(),new p$e(e)}let o1=null;function g$e(t=!1){U1.forAll(e=>{e.removed=!0}),t&&mpe()}function kB(){const t=performance.now();o1=null,o1=U1.some(n=>!n.paused&&!n.removed)?requestAnimationFrame(kB):null,q4.executeFrameTasks(t)}function y$e(t){const e=t-l9;l9=t;const n=1e3/60,r=Math.max(0,e-n);ME.time=t,ME.frameDuration=n-r;for(let i=0;i<c9.length;i++){const s=performance.now(),o=c9[i];U1.forAll(a=>{a.paused||a.removed||(i===0&&a.ticks++,a.phases[o]&&(ME.elapsedFrameTime=performance.now()-t,ME.deltaTime=a.ticks===0?0:e,a.phases[o]?.call(a,ME)))}),w$e[i].push(performance.now()-s)}mpe(),b$e.push(performance.now()-t)}const jC=new fpe;function mpe(){U1.forAll(t=>{t.removed&&jC.push(t)}),U1.removeUnorderedMany(jC.data,jC.length),jC.clear()}function gpe(){for(;u9.length;){const t=u9.shift();t.isActive&&t.callback()}q4.willDispatch=!1}function v$e(t=1,e){const n=xc(),r=()=>{ma(e)?n.reject(Cr()):t===0?n():(--t,W4(()=>r()))};return r(),n.promise}function _$e(t){return v$e(1,t)}async function x$e(t){await _$e(t),await new Promise(e=>requestAnimationFrame(()=>{t?.aborted||e()}))}const w$e=c9.map(t=>new yT(t)),b$e=new yT("total");function ype(t,e){for(const n of t.values())if(e(n))return!0;return!1}function gee(t,e){if(!e)return t;for(const n of e)n!=null&&t.add(n);return t}function QIt(t,e){return e!=null&&t.add(e),t}function AB(t,e){const n=new Set;return gee(n,t),gee(n,e),n}function E$e(t,e){const n=new Set;for(const r of e)t.has(r)&&n.add(r);return n}function ePt(t,e){if(!t||!e)return!1;if(t===e)return!0;for(const n of t)if(!e.has(n))return!1;return!0}function tPt(t,e){if(t==null&&e==null)return!0;if(t==null||e==null||t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function S$e(t,e){const n=new Set(t);for(const r of e)n.delete(r);return n}function T$e(t,e){return S$e(AB(t,e),E$e(t,e))}let k$e=0;function bM(){return++k$e}let DO=class extends LO{constructor(e){super(new A$e(e)),this._observer&&yee.register(this,new WeakRef(this._observer),this)}destroy(){this._observer&&yee.unregister(this._observer),this.accessed?.clear(),this.clear(),this._observer?.destroy()}},A$e=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=I$e}};const yee=new FinalizationRegistry(t=>{t.deref()?.destroy()});function I$e(){}let aw=!1;const K4=[];function vpe(t,e){let n=new DO(s),r=null,i=!1;function s(){if(!n||i)return;if(aw)return void xpe(s);const a=r;n.clear(),aw=!0,i=!0,r=xp(n,t),i=!1,aw=!1,e(r,a),wpe()}function o(){n&&(n.destroy(),n=null,r=null)}return i=!0,r=xp(n,t),i=!1,Zn(o)}function _pe(t,e){let n=new DO(i),r=null;function i(){e(r,o)}function s(){n&&(n.destroy(),n=null),r=null}function o(){return n?(n.clear(),r=xp(n,t),r):null}return o(),Zn(s)}function P$e(t,e){let n=!1,r=!1;const i=!!e?.sync;let s=new DO(()=>{n||r||(r=!0,i?o():queueMicrotask(o))});function o(){r=!1,s&&!n&&(aw?xpe(o):(s.clear(),aw=!0,n=!0,xp(s,t),n=!1,aw=!1,wpe()))}function a(){s&&(s.destroy(),s=null)}return n=!0,xp(s,t),n=!1,Zn(a)}function xpe(t){K4.includes(t)||K4.unshift(t)}function wpe(){for(;K4.length;)K4.pop()()}var g1;let IB=(g1=class{constructor(){this.uid=bM(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,n,r,i,s){return this.pool.acquire(0,e,n,r,i,s,cB)}static acquireTracked(e,n,r,i){return this.pool.acquire(1,e,n,r,null,null,i)}notify(e,n){this.type===0?this.callback.call(this.target,e,n,this.path,this.target):this.callback.call(null,e,n,void 0,void 0)}acquire(e,n,r,i,s,o,a){this.uid=bM(),this.removed=!1,this.type=e,this.oldValue=n,this.callback=r,this.getValue=i,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=bM(),this.removed=!0}},g1.pool=new hpe(()=>new g1),g1);const EM=new Na,sp=new Set;let Y4;function X4(t){sp.delete(t),sp.add(t),bpe()}function bpe(){Y4||(Y4=gb(M$e))}function C$e(t){if(t.removed)return;const e=t.oldValue,n=t.getValue();t.equals(e,n)||(t.oldValue=n,t.notify(n,e))}function R$e(t){for(const e of sp.values())e.target===t&&(e.removed=!0)}function M$e(){let t=10;for(;Y4&&t--;){Y4=null;const e=N$e(),n=EM.acquire();for(const r of e){const i=r.uid;C$e(r),i===r.uid&&r.removed&&n.push(r)}for(const r of sp)r.removed&&(n.push(r),sp.delete(r));for(const r of n)IB.pool.release(r);EM.release(n),EM.release(e),h9.forEach(r=>r())}}function N$e(){const t=EM.acquire();t.length=sp.size;let e=0;for(const n of sp)t[e]=n,++e;return sp.clear(),t}const h9=new Set;function O$e(t){return h9.add(t),Zn(()=>h9.delete(t))}function L$e(t,e,n){let r=npe(t,e,n,(i,s,o)=>{let a,l,c=_pe(()=>_I(i,s),(u,h)=>{i.__accessor__?.lifecycle===sc.DESTROYED||a&&a.uid!==l?r.remove():(a||(a=IB.acquireUntracked(u,o,h,i,s),l=a.uid),X4(a))});return Zn(()=>{c.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,X4(a)),a=null),r=c=null})});return r}function D$e(t,e,n){const r=npe(t,e,n,(i,s,o)=>{let a=!1;return vpe(()=>_I(i,s),(l,c)=>{i.__accessor__.lifecycle!==sc.DESTROYED?a||(a=!0,cB(c,l)||o.call(i,l,c,s,i),a=!1):r.remove()})});return r}function j$e(t,e,n,r=!1){return t.__accessor__&&t.__accessor__.lifecycle!==sc.DESTROYED?r?D$e(t,e,n):L$e(t,e,n):Zn()}function $$e(t,e,n){let r,i,s=_pe(t,(o,a)=>{r&&r.uid!==i?s.remove():(r||(r=IB.acquireTracked(o,e,a,n),i=r.uid),X4(r))});return Zn(()=>{s.remove(),r&&(r.uid!==i||r.removed||(r.removed=!0,X4(r)),r=null),s=null})}function F$e(t,e,n){let r=!1;return vpe(t,(i,s)=>{r||(r=!0,n(s,i)||e(i,s),r=!1)})}function V$e(t,e,n=!1,r=ffe){return n?F$e(t,e,r):$$e(t,e,r)}function vee(t){return ype(sp,e=>e.oldValue===t)}const a1=()=>kt.getLogger("esri.core.accessorSupport.ensureTypes");function z$e(t){if(t==null)return t;const e=new Date(t);return isNaN(e.getTime())?(a1().error("Accessor#set",`Invalid date value: '${t}', falling back to current date`),new Date):e}function G$e(t){return t==null?t:!!t}function U$e(t){return t==null?t:t.toString()}function oc(t,e=0){return t==null?t:(t=parseFloat(t),isNaN(t)?e:t)}function PB(t){return t==null?t:Math.round(parseFloat(t))}function B$e(t){return null}function W$e(t,e){return n=>{let r=t(n);return e.step!=null&&(r=Math.round(r/e.step)*e.step),e.min!=null&&(r=Math.max(e.min,r)),e.max!=null&&(r=Math.min(e.max,r)),r}}function Epe(t){return t?.constructor&&t.constructor.__accessorMetadata__!==void 0}function Z4(t,e){return e!=null&&t&&!(e instanceof t)}function Spe(t){return t&&"isCollection"in t}function _ee(t){return t?.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function H$e(t,e){if(!e?.constructor||!Spe(e.constructor))return d9(t,e)?e:new t(e);const n=_ee(t.prototype.itemType),r=_ee(e.constructor.prototype.itemType);return n?r?n===r?e:n.prototype.isPrototypeOf(r.prototype)?new t(e):(d9(t,e),e):new t(e):e}function d9(t,e){return!!Epe(e)&&(a1().error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+$O(t)+"'"),!0)}function jO(t,e){return e==null?e:Spe(t)?H$e(t,e):Z4(t,e)?d9(t,e)?e:new t(e):e}function $O(t){return t?.prototype?.declaredClass||"unknown"}const q$e=new WeakMap;function K$e(t){switch(t){case Number:return e=>oc(e);case jr:return PB;case Boolean:return G$e;case String:return U$e;case Date:return z$e;case CB:return B$e;default:return gI(q$e,t,()=>jO.bind(null,t))}}function qa(t,e){const n=K$e(t);return arguments.length===1?n:n(e)}function Uk(t,e,n){return arguments.length===1?Uk.bind(null,t):e&&(Array.isArray(e)?e.map(r=>t(r,n)):[t(e,n)])}function Y$e(t,e){return arguments.length===1?Uk(n=>qa(t,n)):Uk(n=>qa(t,n),e)}function Tpe(t,e,n){return e!==0&&Array.isArray(n)?n.map(r=>Tpe(t,e-1,r)):t(n)}function J4(t,e,n){if(arguments.length===2)return s=>J4(t,e,s);if(!n)return n;n=Tpe(t,e,n);let r=e,i=n;for(;r>0&&Array.isArray(i);)r--,i=i[0];if(i!==void 0)for(let s=0;s<r;s++)n=[n];return n}function X$e(t,e,n){return arguments.length===2?J4(r=>qa(t,r),e):J4(r=>qa(t,r),e,n)}function kpe(t){return!!Array.isArray(t)&&!t.some(e=>{const n=typeof e;return!(n==="string"||n==="number"||n==="function"&&t.length>1)})}function f9(t,e){if(arguments.length===2)return f9(t).call(null,e);const n=new Set,r=t.filter(a=>typeof a!="function"),i=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||n.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const c=typeof a,u=c==="string"||c==="number";return u&&(n.has(a)||i.some(h=>c==="string"&&h===String||c==="number"&&h===Number))||c==="object"&&i.some(h=>!Z4(h,a))?a:(u&&r.length?(s||(s=r.map(h=>typeof h=="string"?`'${h}'`:`${h}`).join(", ")),a1().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&i.length?(o||(o=i.map(h=>$O(h)).join(", ")),a1().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):a1().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Bg(t,e){if(arguments.length===2)return Bg(t).call(null,e);const n={},r=[],i=[];for(const l in t.typeMap){const c=t.typeMap[l];n[l]=qa(c),r.push($O(c)),i.push(l)}const s=()=>`'${r.join("', '")}'`,o=()=>`'${i.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!Z4(t.base,l)||l==null)return l;const c=a(l)||t.defaultKeyValue,u=n[c];if(!u)return a1().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!Z4(t.typeMap[c],l))return l;if(typeof t.key=="string"&&!Epe(l)){const h={};for(const f in l)f!==t.key&&(h[f]=l[f]);return u(h)}return u(l)}}let jr=class{},CB=class{};const oPt={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function Z$e(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function Ape(t){switch(t.type){case"native":return qa(t.value);case"array":return Uk(Ape(t.value));case"one-of":return J$e(t);default:return null}}function J$e(t){let e=null;return(n,r)=>m9(n,t)?n:(e==null&&(e=p9(t)),a1().error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),r&&(r.valid=!1),null)}function p9(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case jr:return"integer";case Date:return"date";case CB:return"null";default:return $O(t.value)}case"array":return`array of ${p9(t.value)}`;case"one-of":{const e=t.values.map(n=>p9(n));return`one of ${e.slice(0,-1)} or ${e[e.length-1]}`}}return"unknown"}function m9(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case jr:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string";case CB:return t===null}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(n=>!m9(n,e.value));case"one-of":return e.values.some(n=>m9(t,n))}}function E(t={}){return(e,n)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${n}. Accessor does not support static properties.`);const r=Object.getOwnPropertyDescriptor(e,n),i=xI(e,n);r&&(r.get||r.set?(i.get=r.get||i.get,i.set=r.set||i.set):"value"in r&&("value"in t&&kt.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${n}" on "${e.constructor.name}" already defined in the metadata`,t),i.value=t.value=r.value)),t.readOnly!=null&&(i.readOnly=t.readOnly);const s=t.aliasOf;if(s){const l=typeof s=="string"?s:s.source,c=typeof s=="string"?null:s.overridable===!0;let u;i.dependsOn=[l],i.get=function(){let h=vd(this,l);if(typeof h=="function"){u||(u=l.split(".").slice(0,-1).join("."));const f=vd(this,u);f&&(h=h.bind(f))}return h},i.readOnly||(i.set=c?function(h){this._override(n,h)}:function(h){B4(this,l,h)})}const o=t.type,a=t.types;if(!i.cast){let l;o?l=Q$e(o):a&&(l=Array.isArray(a)?Uk(Bg(a[0])):Bg(a)),t.cast=eFe(t.cast,l)}Wje(i,t),t.range&&(i.cast=W$e(i.cast,t.range))}}function RB(t,e,n){const r=xI(t,n);r.json||(r.json={});let i=r.json;return e!==void 0&&(i.origins||(i.origins={}),i.origins[e]||(i.origins[e]={}),i=i.origins[e]),i}function Q$e(t){let e=0,n=t;if(Z$e(t))return Ape(t);for(;Array.isArray(n)&&n.length===1&&typeof n[0]!="string"&&typeof n[0]!="number";)n=n[0],e++;const r=n;if(kpe(r))return e===0?f9(r):J4(f9(r),e);if(e===1)return Y$e(r);if(e>1)return X$e(r,e);const i=t;return i.from?i.from:qa(i)}function eFe(t,e){if(t||e)return t?e?(n,r)=>e(t(n,r),r):t:e}function tFe(t){if(t.json&&t.json.origins){const e=t.json.origins,n={"web-document":["web-scene","web-map"]};for(const r in n)if(e[r]){const i=e[r];n[r].forEach(s=>{e[s]=i}),delete e[r]}}}let jd=class extends vfe{constructor(e,n,r){super(e,n,r)}};jd.prototype.type="warning";function Ipe(t){return!!t&&t.prototype?.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}function nFe(t,e){return MB(t,"any",e?.origin)}function Q4(t,e){return MB(t,"read",e?.origin)}function Ppe(t,e){return MB(t,"write",e?.origin)}function MB(t,e,n){let r=t?.json;if(r?.origins&&n){let i;i=n==="link-chart"?r.origins[n]&&(e==="any"||e in r.origins[n])?r.origins[n]:r.origins["web-map"]:r.origins[n],i&&(e==="any"||e in i)&&(r=i)}return r}const g9=()=>kt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function xee(t,e,n){t&&(!n&&!e.read||e.read?.reader||e.read?.enabled===!1||sFe(t)&&lb("read.reader",NB(t),e))}function NB(t){const e=t.ndimArray??0;if(e>1)return iFe(t);if(e===1)return wee(t);if("type"in t&&Rpe(t.type)){const n=t.type.prototype?.itemType?.Type,r=wee(typeof n=="function"?{type:n}:{types:n});return(i,s,o)=>{const a=r(i,s,o);return a&&new t.type(a)}}return OB(t)}function OB(t){return"type"in t?rFe(t.type):oFe(t.types)}function rFe(t){return t.prototype.read?(e,n,r)=>{if(e==null)return e;const i=typeof e;if(i!=="object")return void g9().error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${i}'`);const s=new t;return s.read(e,r),s}:t.fromJSON}function Cpe(t,e,n,r){return r!==0&&Array.isArray(e)?e.map(i=>Cpe(t,i,n,r-1)):t(e,void 0,n)}function iFe(t){const e=OB(t),n=Cpe.bind(null,e),r=t.ndimArray??0;return(i,s,o)=>{if(i==null)return i;i=n(i,o,r);let a=r,l=i;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let c=0;c<a;c++)i=[i];return i}}function wee(t){const e=OB(t);return(n,r,i)=>{if(n==null)return n;if(Array.isArray(n)){const o=[];for(const a of n){const l=e(a,void 0,i);l!==void 0&&o.push(l)}return o}const s=e(n,void 0,i);return s!==void 0?[s]:void 0}}function Rpe(t){if(!Ipe(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?LB(e.Type):Mpe(e.Type))}function sFe(t){return"types"in t?Mpe(t.types):LB(t.type)}function LB(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||Rpe(t))}function Mpe(t){for(const e in t.typeMap)if(!LB(t.typeMap[e]))return!1;return!0}function oFe(t){let e=null;const n=t.errorContext??"type",r=t.validate;return(i,s,o)=>{if(i==null)return i;const a=typeof i;if(a!=="object")return void g9().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);e||(e=lFe(t));const l=t.key;if(typeof l!="string")return;const c=i[aFe(l,e,o)],u=c?e[c]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!u){const f=`Type '${c||"unknown"}' is not supported`;return o?.messages&&i&&o.messages.push(new jd(`${n}:unsupported`,f,{definition:i,context:o})),void g9().error(f)}const h=new u;return h.read(i,o),r?r(h):h}}function aFe(t,e,n){const r=Object.values(e)[0],i=mb(r.prototype)[t],s=Q4(i,n),o=s?.read?.source;return o&&typeof o=="string"?o:t}function lFe(t){const e={};for(const n in t.typeMap){const r=t.typeMap[n],i=mb(r.prototype);if(typeof t.key=="function")continue;const s=i[t.key];if(!s)continue;if(s.json?.type&&Array.isArray(s.json.type)&&s.json.type.length===1&&typeof s.json.type[0]=="string"){e[s.json.type[0]]=r;continue}const o=s.json?.write;if(!o?.writer){e[n]=r;continue}const a=o.target,l=typeof a=="string"?a:t.key,c={};o.writer(n,c,l),c[l]&&(e[c[l]]=r)}return e}function cFe(t){if(t.json||(t.json={}),Eee(t.json),See(t.json),bee(t.json),t.json.origins)for(const e in t.json.origins)Eee(t.json.origins[e]),See(t.json.origins[e]),bee(t.json.origins[e]);return!0}function bee(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function Eee(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function See(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function Tee(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const n=t?.ndimArray??0;t&&(n===1||"type"in t&&Ipe(t.type))?e.write.writer=dFe:n>1?e.write.writer=fFe(n):e.types?Array.isArray(e.types)?e.write.writer=hFe(e.types[0]):e.write.writer=uFe(e.types):e.write.writer=Bk}function uFe(t){return(e,n,r,i)=>e?Npe(e,t,i)?Bk(e,n,r,i):void 0:Bk(e,n,r,i)}function Npe(t,e,n){for(const r in e.typeMap)if(t instanceof e.typeMap[r])return!0;if(n?.messages){const r=e.errorContext??"type",i=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;n&&n.messages&&t&&n.messages.push(new Xe(`${r}:unsupported`,i,{definition:t,context:n})),kt.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(i)}return!1}function hFe(t){return(e,n,r,i)=>!e||!Array.isArray(e)?Bk(e,n,r,i):Bk(e.filter(s=>Npe(s,t,i)),n,r,i)}function Bk(t,e,n,r){lb(n,eN(t,r),e)}function eN(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?tN(t):t}function tN(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function dFe(t,e,n,r){let i;t===null?i=null:t&&typeof t.map=="function"?(i=t.map(s=>eN(s,r)),typeof i.toArray=="function"&&(i=i.toArray())):i=[eN(t,r)],lb(n,i,e)}function Ope(t,e,n){return n!==0&&Array.isArray(t)?t.map(r=>Ope(r,e,n-1)):eN(t,e)}function fFe(t){return(e,n,r,i)=>{let s;if(e===null)s=null;else{s=Ope(e,i,t);let o=t,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}lb(r,s,n)}}function pFe(t){const e=mFe(t);if(t.json.origins)for(const n in t.json.origins){const r=t.json.origins[n],i=r.types?gFe(r):e;xee(i,r,!1),r.types&&!r.write&&t.json.write?.enabled&&(r.write={...t.json.write}),Tee(i,r)}xee(e,t.json,!0),Tee(e,t.json)}function mFe(t){return t.json.types?y9(t.json):t.type?Lpe(t):y9(t)}function gFe(t){return t.type?Lpe(t):y9(t)}function Lpe(t){if(!t.type)return;let e=0,n=t.type;for(;Array.isArray(n)&&!kpe(n);)n=n[0],e++;return{type:n,ndimArray:e}}function y9(t){if(!t.types)return;let e=0,n=t.types;for(;Array.isArray(n);)n=n[0],e++;return{types:n,ndimArray:e}}function yFe(t){cFe(t)&&(tFe(t),pFe(t))}const Aj=new Set,Ij=new Set;function ue(t){return e=>{t??="esri.core.Accessor",e.prototype.declaredClass=t,_Fe(e);const n=[],r=[];let i=e.prototype;for(;i;)i.hasOwnProperty("initialize")&&!Aj.has(i.initialize)&&(Aj.add(i.initialize),n.push(i.initialize)),i.hasOwnProperty("destroy")&&!Ij.has(i.destroy)&&(Ij.add(i.destroy),r.push(i.destroy)),i=Object.getPrototypeOf(i);Aj.clear(),Ij.clear();const s=class extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(n.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=n.length-1;l>=0;l--)n[l].call(this)}}),r.length){let l=!1;const c=this[epe];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){this.__accessor__.lifecycle=sc.DESTROYING,l=!0,c.call(this);for(let u=0;u<r.length;u++)r[u].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=mb(e.prototype),s.prototype.declaredClass=t;const o=(t||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:o,configurable:!0}),s}}function vFe(t,e){return e.get==null?function(){const n=this.__accessor__,r=n.propertiesByName.get(t);if(r===void 0)return;n.mutable&&nn(r);const i=n.store;return i.has(t)?i.get(t):r.metadata.value}:function(){const n=this.__accessor__,r=n.propertiesByName.get(t);if(r!==void 0)return r.getComputed(n)}}function _Fe(t){const e=t.prototype,n=mb(e),r={};for(const i of Object.getOwnPropertyNames(n)){const s=n[i];yFe(s),r[i]={enumerable:!0,configurable:!0,get:vFe(i,s),set(o){const a=this.__accessor__;if(a!==void 0){if(a.mutable)return a.initialized&&s.readOnly?kee("read-only",i):a.lifecycle===sc.CONSTRUCTED&&s.constructOnly?kee("construct-only",i):void a.set(i,o)}else Object.defineProperty(this,i,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,r)}const kee=(t,e)=>{kt.getLogger("esri.core.Accessor").error(`cannot assign to ${t} property '${e}'`)};var Aee,Iee;function xFe(t){if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const hm=Symbol("Accessor-Handles"),Pj=Symbol("Accessor-Initialized");var Ng;let Kt=(Ng=class{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:n,declaredClass:r,constructor:i}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,i&&i.apply(this,l)}}mb(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...c){const u=this.inherited;let h;this.inherited=function(...f){if(s.prototype[a])return s.prototype[a].apply(this,f)};try{h=l.apply(this,c)}catch(f){throw this.inherited=u,f}return this.inherited=u,h}:e[a]}for(const a in n){const l=xFe(n[a]);E(l)(o.prototype,a)}return ue(r)(o)}static freeze(e){return e instanceof Ng?e.__accessor__.mutable=!1:Object.freeze(e),e}static isFrozen(e){return e instanceof Ng?!e.__accessor__.mutable:Object.isFrozen(e)}constructor(...e){if(this[Aee]=null,this[Iee]=!1,this.constructor===Ng)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const n=new e$e(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:n}),e.length>0&&(n.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0])}postscript(){const e=this.__accessor__,n=e.ctorArgs;e.initialize(),n&&(this.set(n),e.ctorArgs=null),e.constructed(),this.initialize(),this[Pj]=!0}initialize(){}[epe](){this[hm]=Di(this[hm])}destroy(){this.destroyed||(R$e(this),this.__accessor__.destroy(),o$e()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Pj]}get destroyed(){return this.__accessor__?.lifecycle===sc.DESTROYED||!1}get destroying(){return this.__accessor__?.lifecycle===sc.DESTROYING||!1}commitProperty(e){vd(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,n){return B4(this,e,n),this}watch(e,n,r){return Qfe(kt.getLogger(this),"`watch` is deprecated in favor of reactiveUtils.watch",{replacement:"reactiveUtils.watch",version:"4.32",see:"https://arcg.is/1vaqf42#watch",warnOnce:!0}),j$e(this,e,n,r)}addHandles(e,n){if(this.destroyed){const r=Array.isArray(e)?e:[e];for(const i of r)i.remove();return}(this[hm]??=new pb).add(e,n)}removeHandles(e){this[hm]?.remove(e)}removeAllHandles(){this[hm]?.removeAll()}removeHandlesReference(e){this[hm]?.removeReference(e)}hasHandles(e){return this[hm]?.has(e)===!0}_override(e,n){n===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,n)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,n){n==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,n)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,n){return this.__accessor__.internalSet(e,n),this}},Aee=hm,Iee=Pj,Ng);const FO=t=>{const e=t;class n extends e{constructor(){super(...arguments),this._listenersMap=null}clearEvents(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clearEvents()}emit(i,s){let o=this._listenersMap?.get(i);if(!o)return!1;let a=!1;for(const l of o.slice()){const c="deref"in l?l.deref():l;c?c?.call(this,s):a=!0}return a&&(o=o.filter(l=>!("deref"in l)||l.deref()!=null),this._listenersMap.set(i,o)),o.length>0}on(i,s){if(Array.isArray(i)){const a=i.map(l=>this.on(l,s));return yv(a)}if(i.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const o=this._listenersMap.get(i)||[];return o.push(s),this._listenersMap.set(i,o),Zn(()=>{const a=this._listenersMap?.get(i),l=a?.indexOf(s)??-1;l>=0&&a.splice(l,1)})}once(i,s){const o=this.on(i,a=>{o.remove(),("deref"in s?s.deref():s)?.call(null,a)});return o}hasEventListener(i){const s=this._listenersMap?.get(i);return s!=null&&s.length>0}}return n},Dpe=FO(class{}),wFe=Dpe,wI=FO(Kt);function jpe(t){return(e,n)=>{e[n]=t}}let bI=class extends spe{notify(){const e=this._observers;if(e&&e.length>0){const n=e.slice();for(const r of n)r.onInvalidated(),r.onCommitted()}}};var xf;let bFe=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},EFe=class{constructor(e,n,r,i,s){this.target=e,this.added=n,this.removed=r,this.start=i,this.deleteCount=s}};const Lc=new fb(()=>new bFe,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1});function Pee(t){t&&typeof t=="object"&&"destroy"in t&&typeof t.destroy=="function"&&t.destroy()}function Cj(t){return t?t instanceof Fm?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function Rj(t){if(t?.length)return t[0]}function SFe(t,e,n,r){const i=Math.min(t.length-n,e.length-r);let s=0;for(;s<i&&t[n+s]===e[r+s];)s++;return s}function $pe(t,e,n,r){e&&e.forEach((i,s,o)=>{t.push(i),$pe(t,n.call(r,i,s,o),n,r)})}const dm=new Set,fm=new Set,pm=new Set,Mj=new Map;let TFe=0,Fm=xf=class extends wI{static ofType(t){if(!t)return xf;if(Mj.has(t))return Mj.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const r in t.typeMap){const i=t.typeMap[r].prototype.declaredClass;e?e+=` | ${i}`:e=i}let n=class extends xf{};return x([jpe({Type:t,ensureType:typeof t=="function"?qa(t):Bg(t)})],n.prototype,"itemType",void 0),n=x([ue(`esri.core.Collection<${e}>`)],n),Mj.set(t,n),n}static isCollection(t){return t!=null&&t instanceof xf}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new bI,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:TFe++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof xf?{items:t}:t:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),super.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return nn(this._observable),this._items}set items(t){this._emitBeforeChanges(1)||(this._splice(0,this.length,Cj(t)),this._emitAfterChanges(1))}hasEventListener(t){return!this.destroyed&&(t==="change"?this._chgListeners.length>0:super.hasEventListener(t))}on(t,e){if(this.destroyed)return Zn();if(t==="change"){const n=this._chgListeners,r={removed:!1,callback:e};return n.push(r),this._notifications&&this._notifications.push({listeners:n.slice(),items:this._items.slice(),changes:[]}),Zn(()=>{r.removed=!0,n.splice(n.indexOf(r),1)})}return super.on(t,e)}once(t,e){const n="deref"in e?()=>e.deref():()=>e,r=this.on(t,i=>{n()?.call(null,i),r.remove()});return r}add(t,e){if(nn(this._observable),this._emitBeforeChanges(1))return this;const n=this.getNextIndex(e??null);return this._splice(n,0,[t]),this._emitAfterChanges(1),this}addMany(t,e=this._items.length){if(nn(this._observable),!t?.length)return this;if(this._emitBeforeChanges(1))return this;const n=this.getNextIndex(e);return this._splice(n,0,Cj(t)),this._emitAfterChanges(1),this}at(t){if(nn(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(nn(this._observable),!this.length||this._emitBeforeChanges(2))return[];const t=this._removeAllRaw();return this._emitAfterChanges(2),t}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return nn(this._observable),this._createNewInstance({items:this._items.map(Ze)})}concat(...t){nn(this._observable);const e=t.map(Cj);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(nn(this._observable),!this.length||this._emitBeforeChanges(2))return;const n=this._splice(0,this.length),r=n.length;for(let i=0;i<r;i++)t.call(e,n[i],i,n);this._emitAfterChanges(2)}destroyAll(){this.drain(Pee)}destroyMany(t){const e=this.removeMany(t);return e.forEach(Pee),e}every(t,e){return nn(this._observable),this._items.every(t,e)}filter(t,e){nn(this._observable);const n=arguments.length===2?this._items.filter(t,e):this._items.filter(t);return this._createNewInstance({items:n})}find(t,e){return nn(this._observable),this._items.find(t,e)}findIndex(t,e){return nn(this._observable),this._items.findIndex(t,e)}flatten(t,e){nn(this._observable);const n=[];return $pe(n,this,t,e),new xf(n)}forEach(t,e){return nn(this._observable),this._items.forEach(t,e)}getItemAt(t){return nn(this._observable),this._items[t]}getNextIndex(t){nn(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return nn(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return nn(this._observable),this._items.indexOf(t,e)}join(t=","){return nn(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return nn(this._observable),this._items.lastIndexOf(t,e)}map(t,e){nn(this._observable);const n=this._items.map(t,e);return new xf({items:n})}reorder(t,e=this.length-1){nn(this._observable);const n=this.indexOf(t);if(n!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),n!==e){if(this._emitBeforeChanges(4))return t;this._splice(n,1),this._splice(e,0,[t]),this._emitAfterChanges(4)}return t}}pop(){if(nn(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=Rj(this._splice(this.length-1,1));return this._emitAfterChanges(2),t}push(...t){return nn(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,t),this._emitAfterChanges(1)),this.length}reduce(t,e){nn(this._observable);const n=this._items;return arguments.length===2?n.reduce(t,e):n.reduce(t)}reduceRight(t,e){nn(this._observable);const n=this._items;return arguments.length===2?n.reduceRight(t,e):n.reduceRight(t)}remove(t){return nn(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(nn(this._observable),t<0||t>=this.length||this._emitBeforeChanges(2))return;const e=Rj(this._splice(t,1));return this._emitAfterChanges(2),e}removeMany(t){if(nn(this._observable),!t?.length||this._emitBeforeChanges(2))return[];const e=t instanceof xf?t.toArray():t,n=this._items,r=[],i=e.length;for(let s=0;s<i;s++){const o=e[s],a=n.indexOf(o);if(a>-1){const l=1+SFe(e,n,s+1,a+1),c=this._splice(a,l);c&&c.length>0&&r.push.apply(r,c),s+=l-1}}return this._emitAfterChanges(2),r}reverse(){if(nn(this._observable),this._emitBeforeChanges(4))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(4),this}shift(){if(nn(this._observable),!this.length||this._emitBeforeChanges(2))return;const t=Rj(this._splice(0,1));return this._emitAfterChanges(2),t}slice(t=0,e=this.length){return nn(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return nn(this._observable),this._items.some(t,e)}sort(t){if(nn(this._observable),!this.length||this._emitBeforeChanges(4)||!this._requiresSort(t))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(4),this}_requiresSort(t=(e,n)=>e===n?0:e<n?-1:1){const e=this.length-1;for(let n=0;n<e;n++)if(t(this.items[n],this.items[n+1])>0)return!0;return!1}splice(t,e,...n){nn(this._observable),arguments.length===1&&(e=this.length),e??=0;const r=(e?2:0)|(n.length?1:0);if(this._emitBeforeChanges(r))return[];const i=this._splice(t,e,n)||[];return this._emitAfterChanges(r),i}toArray(){return nn(this._observable),this._items.slice()}toJSON(t){return nn(this._observable),this.toArray().map(e=>O4(e)?e.toJSON(t):e)}toLocaleString(){return nn(this._observable),this._items.toLocaleString()}toString(){return nn(this._observable),this._items.toString()}unshift(...t){return nn(this._observable),!t.length||this._emitBeforeChanges(1)||(this._splice(0,0,t),this._emitAfterChanges(1)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,n){const r=this._items,i=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=gb(()=>this._dispatchChange())),t<0&&(t+=this.length),e){if(o=r.splice(t,e),this.hasEventListener("before-remove")){const a=Lc.acquire();a.target=this,a.cancellable=!0;for(let l=0,c=o.length;l<c;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),r.splice(t,0,s),t+=1,l-=1,c-=1);Lc.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=Lc.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let c=0;c<l;c++)a.reset(o[c]),this.emit("after-remove",a);Lc.release(a)}}if(n?.length){if(i){const u=[];for(const h of n){const f=i.ensureType(h);f==null&&h!=null||u.push(f)}n=u}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),c=t===this.length;if(a||l){const u=Lc.acquire();u.target=this,u.cancellable=!0;const h=Lc.acquire();h.target=this,h.cancellable=!1;for(const f of n)a?(u.reset(f),this.emit("before-add",u),u.defaultPrevented||(c?r.push(f):r.splice(t++,0,f),this._set("length",r.length),l&&(h.reset(f),this.emit("after-add",h)))):(c?r.push(f):r.splice(t++,0,f),this._set("length",r.length),h.reset(f),this.emit("after-add",h));Lc.release(h),Lc.release(u)}else{if(c)for(const u of n)r.push(u);else r.splice(t,0,...n);this._set("length",r.length)}}if((n?.length||o?.length)&&this._notifyChangeEvent(n,o),this.hasEventListener("after-splice")){const a=new EFe(this,n,o,t,e);this.emit("after-splice",a)}return o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const n=Lc.acquire();n.target=this,n.cancellable=!0,n.type=t,this.emit("before-changes",n),e=n.defaultPrevented,Lc.release(n)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=Lc.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),Lc.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const n=e.changes;dm.clear(),fm.clear(),pm.clear();for(const{added:l,removed:c}of n){if(l)if(pm.size===0&&fm.size===0)for(const u of l)dm.add(u);else for(const u of l)fm.has(u)?(pm.add(u),fm.delete(u)):pm.has(u)||dm.add(u);if(c)if(pm.size===0&&dm.size===0)for(const u of c)fm.add(u);else for(const u of c)dm.has(u)?dm.delete(u):(pm.delete(u),fm.add(u))}const r=Na.acquire();dm.forEach(l=>{r.push(l)});const i=Na.acquire();fm.forEach(l=>{i.push(l)});const s=this._items,o=e.items,a=Na.acquire();if(pm.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),e.listeners&&(r.length||i.length||a.length)){const l={target:this,added:r,removed:i,moved:a},c=e.listeners.length;for(let u=0;u<c;u++){const h=e.listeners[u];h.removed||h.callback.call(this,l)}}Na.release(r),Na.release(i),Na.release(a)}dm.clear(),fm.clear(),pm.clear()}};x([E()],Fm.prototype,"_updating",void 0),x([E()],Fm.prototype,"length",void 0),x([E()],Fm.prototype,"items",null),x([E({readOnly:!0})],Fm.prototype,"updating",null),Fm=xf=x([ue("esri.core.Collection")],Fm);const Ot=Fm;function kd(t,e,n=Ot){return e||(e=new n),e===t||e.destroyed||(e.removeAll(),kFe(t)?e.addMany(t):t&&e.add(t)),e}function Fpe(t){return t}function kFe(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}let AFe=class Vpe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const n=new Vpe;return this._values.forEach((r,i)=>{e&&e.has(i)||n.set(i,Ze(r.value),r.origin)}),n}get(e,n){n=this._normalizeOrigin(n);const r=this._values.get(e);return n==null||r?.origin===n?r?.value:void 0}originOf(e){return this._values.get(e)?.origin??7}keys(e){e=this._normalizeOrigin(e);const n=[...this._values.keys()];return e==null?n:n.filter(r=>this._values.get(r)?.origin===e)}set(e,n,r){if((r=this._normalizeOrigin(r))===0){const i=this._values.get(e);if(i?.origin!=null&&i.origin>r)return}this._values.set(e,new IFe(n,r))}delete(e,n){(n=this._normalizeOrigin(n))!=null&&this._values.get(e)?.origin!==n||this._values.delete(e)}has(e,n){return(n=this._normalizeOrigin(n))!=null?this._values.get(e)?.origin===n:this._values.has(e)}isAtOrigin(e,n){return n=this._normalizeOrigin(n),this.has(e,n)&&this.originOf(e)===n}isBelowOrigin(e,n){return n=this._normalizeOrigin(n),!this.has(e)||this.originOf(e)<n}forEach(e){this._values.forEach(({value:n},r)=>e(n,r))}_normalizeOrigin(e){if(e!=null)return e===0?e:7}},IFe=class{constructor(e,n){this.value=e,this.origin=n}};function PFe(t,e,n){e.keys().forEach(i=>{n.set(i,e.get(i),0)});const r=t.metadata;Object.keys(r).forEach(i=>{t.internalGet(i)&&n.set(i,t.internalGet(i),0)})}function CFe(t,e,n){if(!t?.read||t.read.enabled===!1||!t.read.source)return!1;const r=t.read.source;if(typeof r=="string"){if(r===e||r.includes(".")&&r.startsWith(e)&&hee(r,n))return!0}else for(const i of r)if(i===e||i.includes(".")&&i.startsWith(e)&&hee(i,n))return!0;return!1}function RFe(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function MFe(t,e,n,r,i){let s=Q4(e[n],i);RFe(s)&&(t[n]=!0);for(const o of Object.getOwnPropertyNames(e))s=Q4(e[o],i),CFe(s,n,r)&&(t[o]=!0)}function NFe(t,e,n,r){const i=n.metadata,s=nFe(i[e],r),o=s?.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,r):o;a!==void 0&&n.set(e,a)}const zpe={origin:"service"};function OFe(t,e,n=zpe){if(!e||typeof e!="object")return;const r=Ug(t),i=r.metadata,s={};for(const o of Object.getOwnPropertyNames(e))MFe(s,i,o,e,n);r.setDefaultOrigin(n.origin);for(const o of Object.getOwnPropertyNames(s)){const a=Q4(i[o],n).read,l=a?.source;let c;c=l&&typeof l=="string"?_I(e,l):e[o],a?.reader&&(c=a.reader.call(t,c,e,n)),c!==void 0&&r.set(o,c)}if(!n||!n.ignoreDefaults){r.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(i))s[o]||NFe(t,o,r,n)}r.setDefaultOrigin("user")}function dPt(t,e,n,r=zpe){const i={...r,messages:[]};n(i),i.messages?.forEach(s=>{s.type!=="warning"||t.loaded?r?.messages&&r.messages.push(s):t.loadWarnings.push(s)})}function LFe(t,e,n,r,i){const s={};return e.write?.writer?.call(t,r,s,n,i),s}function Gpe(t,e,n,r,i,s){if(!r?.write)return!1;const o=vd(t,n);if(!i&&r.write.overridePolicy){const a=r.write.overridePolicy.call(t,o,n,s??void 0);a!==void 0&&(i=a)}if(i||(i=r.write),!i||i.enabled===!1||i.layerContainerTypes&&s?.layerContainerType&&!i.layerContainerTypes.includes(s.layerContainerType))return!1;if((o===null&&!i.allowNull&&!i.writerEnsuresNonNull||o===void 0)&&i.isRequired){const a=new Xe("web-document-write:property-required",`Missing value for required property '${n}' on '${t.declaredClass}'`,{propertyName:n,target:t});return a&&s?.messages?s.messages.push(a):a&&!s&&kt.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!i.allowNull&&!i.writerEnsuresNonNull||!i.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(n)===0)&&DFe(t,n,s,r,o)||!i.ignoreOrigin&&s?.origin&&e.store.multipleOriginsSupported&&e.store.originOf(n)<TB(s.origin))}function DFe(t,e,n,r,i){const s=r.default;if(s===void 0)return!1;if(r.defaultEquals!=null)return r.defaultEquals(i);if(typeof s=="function"){if(Array.isArray(i)){const o=s.call(t,e,n??void 0);return kO(o,i)}return!1}return s===i}function fPt(t,e,n,r){const i=Ug(t),s=i.metadata,o=Ppe(s[e],r);return!!o&&Gpe(t,i,e,o,n,r)}function jFe(t,e,n){if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return _M(e,t.toJSON(n));const r=Ug(t),i=r.metadata;for(const s in i){const o=Ppe(i[s],n);if(!Gpe(t,r,s,o,void 0,n))continue;const a=vd(t,s),l=LFe(t,o,o.write&&typeof o.write.target=="string"?o.write.target:s,a,n);Object.keys(l).length>0&&(e=_M(e,l),n?.resources?.pendingOperations?.length&&n.resources.pendingOperations.push(Promise.all(n.resources.pendingOperations).then(()=>_M(e,l,()=>"replace-arrays"))),n?.writtenProperties&&n.writtenProperties.push({target:t,propName:s,oldOrigin:Jje(r.store.originOf(s)),newOrigin:n.origin}))}return e}const u0=t=>{const e=t;let n=class extends e{constructor(...r){super(...r);const i=Ug(this),s=i.store,o=new AFe;i.store=o,PFe(i,s,o)}read(r,i){OFe(this,r,i)}write(r,i){return jFe(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return $Fe.call(this,r,i)}};return n=x([ue("esri.core.JSONSupport")],n),n.prototype.toJSON.isDefaultToJSON=!0,n};function $Fe(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const n=new this;return n.read(t,e),n}const qt=u0(Kt);let FFe=class{constructor(){this._resolver=xc(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===1}isRejected(){return this._status===2}isFulfilled(){return this._status!==0}abort(){this._resolver.reject(Cr())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const e=xc(),n=[...this._resolvingPromises,e.promise],r=this._allPromise=Promise.all(n);r.then(()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve()},i=>{this.isFulfilled()||this._allPromise!==r||wa(i)||this._resolver.reject(i)}),e.resolve()}};const Upe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this._promiseProps=new FFe,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then(()=>this).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}addResolvingTask(r){r&&!this._promiseProps.isFulfilled()&&(this.addHandles(eje(r)),this._promiseProps.addResolvingPromise(r.promise))}};return n=x([ue("esri.core.Promise")],n),n},DB=Upe(Kt),VFe="not-loaded",zFe="loading",GFe="failed",Cee="loaded",UFe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const s=this.load.bind(this);this.load=o=>{const a=new Promise((l,c)=>{const u=_B(o,c);this.destroyed&&c(new Xe("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(l,c).finally(()=>{u&&u.remove()})});if(this.loadStatus===VFe){this._set("loadStatus",zFe);const l=this._loadController=new AbortController;s({signal:l.signal})}return i(),a}})),this.when(()=>{this._set("loadStatus",Cee),this._loadController=null},i=>{this.destroyed||(this._set("loadStatus",GFe),this._set("loadError",i),this._loadController=null)})}destroy(){this._loadController&&(this._loadController=G1(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===Cee}get loadWarnings(){return this._get("loadWarnings")}load(r){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new Xe("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return x([E({readOnly:!0})],n.prototype,"loaded",null),x([E({readOnly:!0})],n.prototype,"loadError",void 0),x([E({clonable:!1})],n.prototype,"loadStatus",void 0),x([E({type:[jd],readOnly:!0})],n.prototype,"loadWarnings",null),n=x([ue("esri.core.Loadable")],n),n},EI=UFe(DB);function v9(t){return!(!t||!t.load)}function mPt(t,e,n){return xB(t.map((r,i)=>e.apply(n,[r,i])))}async function BFe(t,e,n){return(await xB(t.map((r,i)=>e.apply(n,[r,i])))).map(r=>r.value)}function jB(t){return{ok:!0,value:t}}function $B(t){return{ok:!1,error:t}}function WFe(t){return t!=null&&t.ok===!0?t.value:null}function HFe(t){return t!=null&&t.ok===!1?t.error:null}async function Bpe(t){if(t==null)return{ok:!1,error:new Error("no promise provided")};try{return jB(await t)}catch(e){return $B(e)}}async function gPt(t){try{return jB(await t)}catch(e){return Ffe(e),$B(e)}}function VO(t,e){return new Tm(t,e)}let Tm=class extends Kt{get value(){return WFe(this._result)}get error(){return HFe(this._result)}get finished(){return this._result!=null}constructor(e,n){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=G1(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:r}=this._abortController;this.promise=e(r),this.promise.then(i=>{this._result=jB(i),this._cleanup()},i=>{this._result=$B(i),this._cleanup()}),this._abortHandle=vu(n,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=ii(this._abortHandle),this._abortController=null}};x([E()],Tm.prototype,"value",null),x([E()],Tm.prototype,"error",null),x([E()],Tm.prototype,"finished",null),x([E()],Tm.prototype,"promise",void 0),x([E()],Tm.prototype,"_result",void 0),Tm=x([ue("esri.core.asyncUtils.ReactiveTask")],Tm);async function Wpe(t,e){return await t.load(),qFe(t,e)}async function qFe(t,e){const n=[],r=(...s)=>{for(const o of s)o!=null&&(Array.isArray(o)?r(...o):Ot.isCollection(o)?o.forEach(a=>r(a)):v9(o)&&n.push(o))};e(r);let i=null;if(await BFe(n,async s=>{const o=await Bpe(KFe(s)?s.loadAll():s.load());o.ok!==!1||i||(i=o)}),i)throw i.error;return t}function KFe(t){return"loadAll"in t&&typeof t.loadAll=="function"}function er(t,e,n){let r,i;return e===void 0?(i=t,r=[void 0]):typeof e!="string"?(i=t,r=[void 0],n=e):(i=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;for(const l of r){const c=RB(s,l,i);c.write&&typeof c.write=="object"||(c.write={}),n&&(c.write.target=n),c.write.writer=a[o]}}}let Ys=class{constructor(e,n={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=n,this.apiValues=[],this.jsonValues=[],this._apiToJSON=YFe(e),this.apiValues=Ree(this._apiToJSON),this.jsonValues=Ree(this._jsonToAPI),this.read=r=>this.fromJSON(r),this.write=(r,i,s)=>{const o=this.toJSON(r);o!==void 0&&lb(s,o,i)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const n=this._apiToJSON[e];return this._options.useNumericKeys?+n:n}return this._options.ignoreUnknown?null:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}};function YFe(t){const e={};for(const n in t)e[t[n]]=n;return e}function Ree(t){const e=[];for(const n in t)e.push(n);return e.sort(),e}function Ll(){return function(t,e){return new Ys(t,{ignoreUnknown:!0,...e})}}let FB=class{constructor(e,n,r,i,s,o){this.semiMajorAxis=e,this.flattening=n,this.outerAtmosphereRimWidth=r,this.atmosphereHeight=i,this.scaleHeight=s;const a=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*a,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=o||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const is=new FB(6378137,1/298.257223563,3e5,1e5,.085,.006694379990137799),Ad=new FB(3396190,1/169.8944472236118,23e4,6e4,.111),Wg=new FB(1737400,0,0,0,0);function Hi(t){if(!nr.assetsPath)throw kt.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new Xe("assets:path-not-set","config.assetsPath is not set");return pI(nr.assetsPath,t)}let Nj,pe=null;function Hpe(){return!!pe}function XFe(){return!!ye("esri-wasm")}function ZFe(){return Nj||(Nj=_e(async()=>{const{default:t}=await import("./pe-wasm-B87Q3u4k.js");return{default:t}},[]).then(({default:t})=>t({locateFile:e=>Hi(`esri/geometry/support/${e}`)})).then(t=>{Jpe(t)}),Nj)}const SM={geogToProj(t,e,n){pe.ensureCache.prepare();const r=B1(n),i=n===r,s=pe.ensureFloat64(r),o=pe._pe_geog_to_proj(pe.getPointer(t),e,s);return o&&Hg(n,e,s,i),o},projGeog(t,e,n,r){switch(r){case $i.PE_TRANSFORM_P_TO_G:return SM.projToGeog(t,e,n);case $i.PE_TRANSFORM_G_TO_P:return SM.geogToProj(t,e,n)}return 0},projToGeog:(t,e,n)=>SM.projToGeogCenter(t,e,n,0),projToGeogCenter(t,e,n,r){pe.ensureCache.prepare();const i=B1(n),s=n===i,o=pe.ensureFloat64(i),a=pe._pe_proj_to_geog_center(pe.getPointer(t),e,o,r);return a&&Hg(n,e,o,s),a}};let $i=class pr{static init(){pr.PE_BUFFER_MAX=pe.PeDefs.prototype.PE_BUFFER_MAX,pr.PE_NAME_MAX=pe.PeDefs.prototype.PE_NAME_MAX,pr.PE_MGRS_MAX=pe.PeDefs.prototype.PE_MGRS_MAX,pr.PE_USNG_MAX=pe.PeDefs.prototype.PE_USNG_MAX,pr.PE_DD_MAX=pe.PeDefs.prototype.PE_DD_MAX,pr.PE_DDM_MAX=pe.PeDefs.prototype.PE_DDM_MAX,pr.PE_DMS_MAX=pe.PeDefs.prototype.PE_DMS_MAX,pr.PE_UTM_MAX=pe.PeDefs.prototype.PE_UTM_MAX,pr.PE_PARM_MAX=pe.PeDefs.prototype.PE_PARM_MAX,pr.PE_TYPE_NONE=pe.PeDefs.prototype.PE_TYPE_NONE,pr.PE_TYPE_GEOGCS=pe.PeDefs.prototype.PE_TYPE_GEOGCS,pr.PE_TYPE_PROJCS=pe.PeDefs.prototype.PE_TYPE_PROJCS,pr.PE_TYPE_GEOGTRAN=pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,pr.PE_TYPE_COORDSYS=pe.PeDefs.prototype.PE_TYPE_COORDSYS,pr.PE_TYPE_UNIT=pe.PeDefs.prototype.PE_TYPE_UNIT,pr.PE_TYPE_LINUNIT=pe.PeDefs.prototype.PE_TYPE_LINUNIT,pr.PE_STR_OPTS_NONE=pe.PeDefs.prototype.PE_STR_OPTS_NONE,pr.PE_STR_AUTH_NONE=pe.PeDefs.prototype.PE_STR_AUTH_NONE,pr.PE_STR_AUTH_TOP=pe.PeDefs.prototype.PE_STR_AUTH_TOP,pr.PE_STR_NAME_CANON=pe.PeDefs.prototype.PE_STR_NAME_CANON,pr.PE_STR_FMT_WKT=pe.PeDefs.prototype.PE_STR_FMT_WKT,pr.PE_STR_FMT_WKT2=pe.PeDefs.prototype.PE_STR_FMT_WKT2,pr.PE_PARM_X0=pe.PeDefs.prototype.PE_PARM_X0,pr.PE_PARM_ND=pe.PeDefs.prototype.PE_PARM_ND,pr.PE_TRANSFORM_1_TO_2=pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,pr.PE_TRANSFORM_2_TO_1=pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,pr.PE_TRANSFORM_P_TO_G=pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,pr.PE_TRANSFORM_G_TO_P=pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,pr.PE_HORIZON_RECT=pe.PeDefs.prototype.PE_HORIZON_RECT,pr.PE_HORIZON_POLY=pe.PeDefs.prototype.PE_HORIZON_POLY,pr.PE_HORIZON_LINE=pe.PeDefs.prototype.PE_HORIZON_LINE,pr.PE_HORIZON_DELTA=pe.PeDefs.prototype.PE_HORIZON_DELTA}},qpe=null;const Mee={},Nee={},Oee=t=>{const e=t.getType();switch(e){case $i.PE_TYPE_GEOGCS:t=pe.castObject(t,pe.PeGeogcs);break;case $i.PE_TYPE_PROJCS:t=pe.castObject(t,pe.PeProjcs);break;case $i.PE_TYPE_GEOGTRAN:t=pe.castObject(t,pe.PeGeogtran);break;default:e&$i.PE_TYPE_UNIT&&(t=pe.castObject(t,pe.PeUnit))}return t},X_={initialize(){pe.PeFactory.prototype.initialize(null)},coordsys:t=>X_.factoryByType($i.PE_TYPE_COORDSYS,t),factoryByType(t,e){let n=null,r=Mee[t];if(r||(r={},Mee[t]=r),r.hasOwnProperty(String(e))&&(n=r[e],pe.compare(n,pe.NULL)&&(n=null)),!n){const i=pe.PeFactory.prototype.factoryByType(t,e);pe.compare(i,pe.NULL)||(n=Oee(i),r[e]=n)}return n},fromString(t,e){let n=null,r=Nee[t];if(r||(r={},Nee[t]=r),r.hasOwnProperty(e)&&(n=r[e],pe.compare(n,pe.NULL)&&(n=null)),!n){const i=pe.PeFactory.prototype.fromString(t,e);pe.compare(i,pe.NULL)||(n=Oee(i),r[e]=n)}return n},geogcs:t=>X_.factoryByType($i.PE_TYPE_GEOGCS,t),geogtran:t=>X_.factoryByType($i.PE_TYPE_GEOGTRAN,t),getCode:t=>pe.PeFactory.prototype.getCode(t),projcs:t=>X_.factoryByType($i.PE_TYPE_PROJCS,t),unit:t=>X_.factoryByType($i.PE_TYPE_UNIT,t)};let Lee,Kpe=null;const VB={PE_GTLIST_OPTS_COMMON:0,init(){VB.PE_GTLIST_OPTS_COMMON=pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,Lee=pe._pe_getPeGTlistExtendedEntrySize()},getGTlist(t,e,n,r,i,s){let o=null;const a=new pe.PeInteger(s);try{const l=pe.PeGTlistExtended.prototype.getGTlist(t,e,n,r,i,a);if((s=a.val)&&(o=[l],s>1)){const c=pe.getPointer(l);for(let u=1;u<s;u++)o.push(pe.wrapPointer(c+Lee*u,pe.PeGTlistExtendedEntry))}}finally{pe.destroy(a)}return o}},JFe={destroy(t){if(t?.length){for(const e of t)qu(e),e.getEntries().forEach(n=>{qu(n);const r=n.getGeogtran();qu(r),r.getParameters().forEach(qu),[r.getGeogcs1(),r.getGeogcs2()].forEach(i=>{qu(i);const s=i.getDatum();qu(s),qu(s.getSpheroid()),qu(i.getPrimem()),qu(i.getUnit())})});pe.PeGTlistExtendedEntry.prototype.Delete(t[0])}}},QFe={geogToGeog(t,e,n,r,i){pe.ensureCache.prepare();const s=B1(n),o=n===s,a=pe.ensureFloat64(s);let l=0;r&&(l=pe.ensureFloat64(r));const c=pe._pe_geog_to_geog(pe.getPointer(t),e,a,l,i);return c&&Hg(n,e,a,o),c}},e8e={geodesicCoordinate(t,e,n,r,i,s,o,a){pe.PeLineType.prototype.geodesic_coordinate(t,e,n,r,i,s,o,a)},geodeticCoordinate(t,e,n,r,i,s,o,a,l){pe.PeLineType.prototype.geodetic_coordinate(t,e,n,r,i,s,o,a,l)},geodeticDistance(t,e,n,r,i,s,o,a,l,c){pe.PeLineType.prototype.geodetic_distance(t,e,n,r,i,s,o,a,l,c)},greatEllipticDistance(t,e,n,r,i,s,o,a,l){pe.PeLineType.prototype.great_elliptic_distance(t,e,n,r,i,s,o,a,l)}},t8e={phiToEta:(t,e)=>pe.PeMath.prototype.phi_to_eta(t,e),etaToPhi:(t,e)=>pe.PeMath.prototype.eta_to_phi(t,e),phiToPhig:(t,e)=>pe.PeMath.prototype.phi_to_phig(t,e),q:(t,e,n)=>pe.PeMath.prototype.q(t,e,n),q90:(t,e)=>pe.PeMath.prototype.q90(t,e)},Oj=(t,e,n,r,i,s)=>{let o,a;switch(pe.ensureCache.prepare(),t){case"dd":o=pe._pe_geog_to_dd,a=$i.PE_DD_MAX;break;case"ddm":o=pe._pe_geog_to_ddm,a=$i.PE_DDM_MAX;break;case"dms":o=pe._pe_geog_to_dms,a=$i.PE_DMS_MAX}let l=0;e&&(l=pe.getPointer(e));const c=B1(r),u=pe.ensureFloat64(c),h=zO(n,a),f=o(l,n,u,i,pe.ensureInt32(h));if(f)for(let g=0;g<n;g++)s[g]=pe.UTF8ToString(h[g]);return f},Lj=(t,e,n,r,i)=>{let s;switch(pe.ensureCache.prepare(),t){case"dd":s=pe._pe_dd_to_geog;break;case"ddm":s=pe._pe_ddm_to_geog;break;case"dms":s=pe._pe_dms_to_geog}let o=0;e&&(o=pe.getPointer(e));const a=r.map(h=>pe.ensureString(h)),l=pe.ensureInt32(a),c=pe.ensureFloat64(new Array(2*n)),u=s(o,n,l,c);return u&&Hg(i,n,c),u},n8e={geogToDms:(t,e,n,r,i)=>Oj("dms",t,e,n,r,i),dmsToGeog:(t,e,n,r)=>Lj("dms",t,e,n,r),geogToDdm:(t,e,n,r,i)=>Oj("ddm",t,e,n,r,i),ddmToGeog:(t,e,n,r)=>Lj("ddm",t,e,n,r),geogToDd:(t,e,n,r,i)=>Oj("dd",t,e,n,r,i),ddToGeog:(t,e,n,r)=>Lj("dd",t,e,n,r)};let Ype=class Z_{static init(){Z_.PE_MGRS_STYLE_NEW=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,Z_.PE_MGRS_STYLE_OLD=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,Z_.PE_MGRS_STYLE_AUTO=pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,Z_.PE_MGRS_180_ZONE_1_PLUS=pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,Z_.PE_MGRS_ADD_SPACES=pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}static geogToMgrsExtended(e,n,r,i,s,o,a){pe.ensureCache.prepare();let l=0;e&&(l=pe.getPointer(e));const c=B1(r),u=pe.ensureFloat64(c),h=zO(n,$i.PE_MGRS_MAX),f=pe.ensureInt32(h),g=pe._pe_geog_to_mgrs_extended(l,n,u,i,s,o,f);if(g)for(let y=0;y<n;y++)a[y]=pe.UTF8ToString(h[y]);return g}static mgrsToGeogExtended(e,n,r,i,s){pe.ensureCache.prepare();let o=0;e&&(o=pe.getPointer(e));const a=r.map(h=>pe.ensureString(h)),l=pe.ensureInt32(a),c=pe.ensureFloat64(new Array(2*n)),u=pe._pe_mgrs_to_geog_extended(o,n,l,i,c);return u&&Hg(s,n,c),u}};const r8e={geogToUsng(t,e,n,r,i,s,o){pe.ensureCache.prepare();let a=0;t&&(a=pe.getPointer(t));const l=B1(n),c=pe.ensureFloat64(l),u=zO(e,$i.PE_MGRS_MAX),h=pe.ensureInt32(u),f=pe._pe_geog_to_usng(a,e,c,r,i,s,h);if(f)for(let g=0;g<e;g++)o[g]=pe.UTF8ToString(u[g]);return f},usngToGeog(t,e,n,r){pe.ensureCache.prepare();let i=0;t&&(i=pe.getPointer(t));const s=n.map(c=>pe.ensureString(c)),o=pe.ensureInt32(s),a=pe.ensureFloat64(new Array(2*e)),l=pe._pe_usng_to_geog(i,e,o,a);return l&&Hg(r,e,a),l}};let Xpe=class TM{static init(){TM.PE_UTM_OPTS_NONE=pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,TM.PE_UTM_OPTS_ADD_SPACES=pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,TM.PE_UTM_OPTS_NS=pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS}static geogToUtm(e,n,r,i,s){pe.ensureCache.prepare();let o=0;e&&(o=pe.getPointer(e));const a=B1(r),l=pe.ensureFloat64(a),c=zO(n,$i.PE_UTM_MAX),u=pe.ensureInt32(c),h=pe._pe_geog_to_utm(o,n,l,i,u);if(h)for(let f=0;f<n;f++)s[f]=pe.UTF8ToString(c[f]);return h}static utmToGeog(e,n,r,i,s){pe.ensureCache.prepare();let o=0;e&&(o=pe.getPointer(e));const a=r.map(h=>pe.ensureString(h)),l=pe.ensureInt32(a),c=pe.ensureFloat64(new Array(2*n)),u=pe._pe_utm_to_geog(o,n,l,i,c);return u&&Hg(s,n,c),u}};var pl;let Zpe=(pl=class{static init(){pl.PE_PCSINFO_OPTION_NONE=pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,pl.PE_PCSINFO_OPTION_DOMAIN=pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,pl.PE_POLE_OUTSIDE_BOUNDARY=pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,pl.PE_POLE_POINT=pe.PePCSInfo.prototype.PE_POLE_POINT}static generate(e,n=pl.PE_PCSINFO_OPTION_DOMAIN){let r=null,i=null;return pl.cache.has(e)&&(i=pl.cache.get(e),i[n]&&(r=i[n])),r||(r=pe.PePCSInfo.prototype.generate(e,n),i||(i=[],pl.cache.set(e,i)),i[n]=r),r}},pl.cache=new Map,pl);const i8e={versionString:()=>pe.PeVersion.prototype.version_string()};function Jpe(t){function e(s,o,a){s[o]=a(s[o])}pe=t,$i.init(),VB.init(),Ype.init(),Xpe.init(),Zpe.init(),qpe=class extends pe.PeDouble{constructor(s=NaN){super(s)}destroy(){pe.destroy(this)}[Symbol.dispose](){this.destroy()}},Kpe=class extends pe.PeGCSExtent{destroy(){pe.destroy(this)}[Symbol.dispose](){this.destroy()}};const n=[pe.PeAngunit,pe.PeDatum,pe.PeGeogcs,pe.PeGeogtran,pe.PeObject,pe.PeParameter,pe.PePrimem,pe.PeProjcs,pe.PeSpheroid,pe.PeUnit];for(const s of n)e(s.prototype,"getName",o=>function(){return o.call(this,new Array($i.PE_NAME_MAX))});for(const s of[pe.PeGeogtran,pe.PeProjcs])e(s.prototype,"getParameters",o=>function(){const a=new Array($i.PE_PARM_MAX);let l=o.call(this);for(let c=0;c<a.length;c++){const u=pe.getValue(l,"*");a[c]=u?pe.wrapPointer(u,pe.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});e(pe.PeHorizon.prototype,"getCoord",s=>function(o=!1){const a=this.getSize();if(!a)return null;const l=[];return Hg(l,a,s.call(this),o),l}),e(pe.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=pe._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!pe.compare(l,pe.NULL)){a=[l];const c=this.getSteps();if(c>1){const u=pe.getPointer(l);for(let h=1;h<c;h++)a.push(pe.wrapPointer(u+o*h,pe.PeGTlistExtendedGTs))}}return a}});const r=pe._pe_getPeHorizonSize(),i=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!pe.compare(l,pe.NULL)){a=[l];const c=l.getNump();if(c>1){const u=pe.getPointer(l);for(let h=1;h<c;h++)a.push(pe.wrapPointer(u+r*h,pe.PeHorizon))}}return o.set(s,a),a};e(pe.PeProjcs.prototype,"horizonGcsGenerate",i),e(pe.PeProjcs.prototype,"horizonPcsGenerate",i),pe.PeObject.prototype.toString=function(s=$i.PE_STR_OPTS_NONE){pe.ensureCache.prepare();const o=pe.getPointer(this),a=pe.ensureInt8(new Array($i.PE_BUFFER_MAX));return pe.UTF8ToString(pe._pe_object_to_string_ext(o,s,a))},pe.PeGeogcs.prototype.destroy=function(){this.Delete(),qu(this),this.ptr=0},pe.PeGeogcs.prototype[Symbol.dispose]=function(){this.destroy()},pe.PeProjcs.prototype.destroy=function(){this.Delete(),qu(this),this.ptr=0},pe.PeProjcs.prototype[Symbol.dispose]=function(){this.destroy()}}function qu(t){if(!t)return;const e=pe.getClass(t);if(!e)return;const n=pe.getCache(e);if(!n)return;const r=pe.getPointer(t);r&&delete n[r]}function zO(t,e){const n=[],r=new Array(e);for(let i=0;i<t;i++)n.push(pe.ensureInt8(r));return n}function B1(t){return ArrayBuffer.isView(t)?t:Array.isArray(t[0])?t.flat():t}function Hg(t,e,n,r=!1){if(r)for(let i=0;i<2*e;i++)t[i]=pe.getValue(n+i*Float64Array.BYTES_PER_ELEMENT,"double");else{const i=t.length===0;for(let s=0;s<e;s++)i&&(t[s]=new Array(2)),t[s][0]=pe.getValue(n,"double"),t[s][1]=pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}const xPt=Object.freeze(Object.defineProperty({__proto__:null,PeCSTransformations:SM,PeDefs:$i,get PeDouble(){return qpe},PeFactory:X_,get PeGCSExtent(){return Kpe},PeGTTransformations:QFe,PeGTlistExtended:VB,PeGTlistExtendedEntry:JFe,PeLineType:e8e,PeMath:t8e,PeNotationDms:n8e,PeNotationMgrs:Ype,PeNotationUsng:r8e,PeNotationUtm:Xpe,PePCSInfo:Zpe,PeVersion:i8e,_init:Jpe,get _pe(){return pe},isLoaded:Hpe,isSupported:XFe,load:ZFe},Symbol.toStringTag,{value:"Module"}));let v;const H={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,10592:0,10594:0,10596:0,10598:0,10601:0,10603:0,10626:0,10632:0,10641:0,10665:0,10674:0,10744:0,10745:0,10759:0,10773:0,10802:0,10820:0,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,65061:2,65062:2,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1,103978:2,103979:0,103980:2,103981:0};for(v=2e3;v<=2045;v++)H[v]=0;for(v=2056;v<=2065;v++)H[v]=0;for(v=2067;v<=2135;v++)H[v]=0;for(v=2137;v<=2154;v++)H[v]=0;for(v=2161;v<=2170;v++)H[v]=0;for(v=2172;v<=2193;v++)H[v]=0;for(v=2195;v<=2198;v++)H[v]=0;for(v=2200;v<=2203;v++)H[v]=0;for(v=2205;v<=2217;v++)H[v]=0;for(v=2222;v<=2224;v++)H[v]=1;for(v=2225;v<=2250;v++)H[v]=2;for(v=2251;v<=2253;v++)H[v]=1;for(v=2257;v<=2264;v++)H[v]=2;for(v=2274;v<=2279;v++)H[v]=2;for(v=2280;v<=2282;v++)H[v]=1;for(v=2283;v<=2289;v++)H[v]=2;for(v=2290;v<=2292;v++)H[v]=0;for(v=2308;v<=2313;v++)H[v]=0;for(v=2315;v<=2491;v++)H[v]=0;for(v=2494;v<=2866;v++)H[v]=0;for(v=2867;v<=2869;v++)H[v]=1;for(v=2870;v<=2888;v++)H[v]=2;for(v=2891;v<=2895;v++)H[v]=2;for(v=2896;v<=2898;v++)H[v]=1;for(v=2902;v<=2908;v++)H[v]=2;for(v=2915;v<=2920;v++)H[v]=2;for(v=2921;v<=2923;v++)H[v]=1;for(v=2924;v<=2930;v++)H[v]=2;for(v=2931;v<=2962;v++)H[v]=0;for(v=2964;v<=2968;v++)H[v]=2;for(v=2969;v<=2973;v++)H[v]=0;for(v=2975;v<=2991;v++)H[v]=0;for(v=2995;v<=3051;v++)H[v]=0;for(v=3054;v<=3079;v++)H[v]=0;for(v=3081;v<=3088;v++)H[v]=0;for(v=3092;v<=3101;v++)H[v]=0;for(v=3106;v<=3138;v++)H[v]=0;for(v=3146;v<=3151;v++)H[v]=0;for(v=3153;v<=3166;v++)H[v]=0;for(v=3168;v<=3172;v++)H[v]=0;for(v=3174;v<=3203;v++)H[v]=0;for(v=3294;v<=3358;v++)H[v]=0;for(v=3367;v<=3403;v++)H[v]=0;for(v=3408;v<=3416;v++)H[v]=0;for(v=3417;v<=3438;v++)H[v]=2;for(v=3441;v<=3446;v++)H[v]=2;for(v=3447;v<=3450;v++)H[v]=0;for(v=3451;v<=3459;v++)H[v]=2;for(v=3460;v<=3478;v++)H[v]=0;for(v=3554;v<=3559;v++)H[v]=0;for(v=3560;v<=3570;v++)H[v]=2;for(v=3571;v<=3581;v++)H[v]=0;for(v=3594;v<=3597;v++)H[v]=0;for(v=3601;v<=3604;v++)H[v]=0;for(v=3637;v<=3639;v++)H[v]=0;for(v=3665;v<=3667;v++)H[v]=0;for(v=3693;v<=3695;v++)H[v]=0;for(v=3701;v<=3727;v++)H[v]=0;for(v=3728;v<=3739;v++)H[v]=2;for(v=3740;v<=3751;v++)H[v]=0;for(v=3753;v<=3760;v++)H[v]=2;for(v=3761;v<=3773;v++)H[v]=0;for(v=3775;v<=3777;v++)H[v]=0;for(v=3779;v<=3781;v++)H[v]=0;for(v=3783;v<=3785;v++)H[v]=0;for(v=3788;v<=3791;v++)H[v]=0;for(v=3797;v<=3802;v++)H[v]=0;for(v=3814;v<=3816;v++)H[v]=0;for(v=3825;v<=3829;v++)H[v]=0;for(v=3832;v<=3841;v++)H[v]=0;for(v=3844;v<=3852;v++)H[v]=0;for(v=3873;v<=3885;v++)H[v]=0;for(v=3890;v<=3893;v++)H[v]=0;for(v=3907;v<=3912;v++)H[v]=0;for(v=3942;v<=3950;v++)H[v]=0;for(v=3968;v<=3970;v++)H[v]=0;for(v=3973;v<=3976;v++)H[v]=0;for(v=3986;v<=3989;v++)H[v]=0;for(v=3994;v<=3997;v++)H[v]=0;for(v=4048;v<=4051;v++)H[v]=0;for(v=4056;v<=4063;v++)H[v]=0;for(v=4093;v<=4096;v++)H[v]=0;for(v=4390;v<=4398;v++)H[v]=0;for(v=4399;v<=4413;v++)H[v]=2;for(v=4418;v<=4433;v++)H[v]=2;for(v=4455;v<=4457;v++)H[v]=2;for(v=4484;v<=4489;v++)H[v]=0;for(v=4491;v<=4554;v++)H[v]=0;for(v=4568;v<=4589;v++)H[v]=0;for(v=4652;v<=4656;v++)H[v]=0;for(v=4766;v<=4800;v++)H[v]=0;for(v=5014;v<=5016;v++)H[v]=0;for(v=5069;v<=5072;v++)H[v]=0;for(v=5105;v<=5130;v++)H[v]=0;for(v=5167;v<=5188;v++)H[v]=0;for(v=5253;v<=5259;v++)H[v]=0;for(v=5269;v<=5275;v++)H[v]=0;for(v=5292;v<=5311;v++)H[v]=0;for(v=5329;v<=5331;v++)H[v]=0;for(v=5343;v<=5349;v++)H[v]=0;for(v=5355;v<=5357;v++)H[v]=0;for(v=5387;v<=5389;v++)H[v]=0;for(v=5459;v<=5463;v++)H[v]=0;for(v=5479;v<=5482;v++)H[v]=0;for(v=5518;v<=5520;v++)H[v]=0;for(v=5530;v<=5539;v++)H[v]=0;for(v=5550;v<=5552;v++)H[v]=0;for(v=5562;v<=5583;v++)H[v]=0;for(v=5623;v<=5625;v++)H[v]=2;for(v=5631;v<=5639;v++)H[v]=0;for(v=5649;v<=5653;v++)H[v]=0;for(v=5663;v<=5680;v++)H[v]=0;for(v=5682;v<=5685;v++)H[v]=0;for(v=5875;v<=5877;v++)H[v]=0;for(v=5896;v<=5899;v++)H[v]=0;for(v=5921;v<=5940;v++)H[v]=0;for(v=6050;v<=6125;v++)H[v]=0;for(v=6244;v<=6275;v++)H[v]=0;for(v=6328;v<=6348;v++)H[v]=0;for(v=6350;v<=6356;v++)H[v]=0;for(v=6366;v<=6372;v++)H[v]=0;for(v=6381;v<=6387;v++)H[v]=0;for(v=6393;v<=6404;v++)H[v]=0;for(v=6480;v<=6483;v++)H[v]=0;for(v=6511;v<=6514;v++)H[v]=0;for(v=6579;v<=6581;v++)H[v]=0;for(v=6619;v<=6624;v++)H[v]=0;for(v=6625;v<=6627;v++)H[v]=2;for(v=6628;v<=6632;v++)H[v]=0;for(v=6634;v<=6637;v++)H[v]=0;for(v=6669;v<=6692;v++)H[v]=0;for(v=6707;v<=6709;v++)H[v]=0;for(v=6720;v<=6723;v++)H[v]=0;for(v=6732;v<=6738;v++)H[v]=0;for(v=6931;v<=6933;v++)H[v]=0;for(v=6956;v<=6959;v++)H[v]=0;for(v=7005;v<=7007;v++)H[v]=0;for(v=7057;v<=7070;v++)H[v]=2;for(v=7074;v<=7082;v++)H[v]=0;for(v=7109;v<=7118;v++)H[v]=0;for(v=7119;v<=7127;v++)H[v]=1;for(v=7374;v<=7376;v++)H[v]=0;for(v=7528;v<=7586;v++)H[v]=0;for(v=7587;v<=7645;v++)H[v]=2;for(v=7692;v<=7696;v++)H[v]=0;for(v=7755;v<=7787;v++)H[v]=0;for(v=7791;v<=7795;v++)H[v]=0;for(v=7799;v<=7801;v++)H[v]=0;for(v=7803;v<=7805;v++)H[v]=0;for(v=7825;v<=7831;v++)H[v]=0;for(v=7845;v<=7859;v++)H[v]=0;for(v=8013;v<=8032;v++)H[v]=0;for(v=8065;v<=8068;v++)H[v]=1;for(v=8518;v<=8529;v++)H[v]=2;for(v=8533;v<=8536;v++)H[v]=2;for(v=8538;v<=8540;v++)H[v]=2;for(v=8677;v<=8679;v++)H[v]=0;for(v=8836;v<=8840;v++)H[v]=0;for(v=8857;v<=8859;v++)H[v]=0;for(v=8908;v<=8910;v++)H[v]=0;for(v=9154;v<=9159;v++)H[v]=0;for(v=9205;v<=9218;v++)H[v]=0;for(v=9271;v<=9273;v++)H[v]=0;for(v=9295;v<=9297;v++)H[v]=0;for(v=9356;v<=9360;v++)H[v]=0;for(v=9404;v<=9407;v++)H[v]=0;for(v=9476;v<=9482;v++)H[v]=0;for(v=9487;v<=9494;v++)H[v]=0;for(v=9697;v<=9699;v++)H[v]=0;for(v=9821;v<=9865;v++)H[v]=0;for(v=10285;v<=10291;v++)H[v]=0;for(v=10314;v<=10317;v++)H[v]=0;for(v=10448;v<=10465;v++)H[v]=0;for(v=10726;v<=10729;v++)H[v]=0;for(v=10731;v<=10733;v++)H[v]=0;for(v=11114;v<=11118;v++)H[v]=0;for(v=20004;v<=20032;v++)H[v]=0;for(v=20047;v<=20049;v++)H[v]=0;for(v=20062;v<=20092;v++)H[v]=0;for(v=20135;v<=20138;v++)H[v]=0;for(v=20248;v<=20258;v++)H[v]=0;for(v=20348;v<=20358;v++)H[v]=0;for(v=20436;v<=20440;v++)H[v]=0;for(v=20822;v<=20824;v++)H[v]=0;for(v=20904;v<=20932;v++)H[v]=0;for(v=20934;v<=20936;v++)H[v]=0;for(v=21004;v<=21032;v++)H[v]=0;for(v=21035;v<=21037;v++)H[v]=0;for(v=21095;v<=21097;v++)H[v]=0;for(v=21148;v<=21150;v++)H[v]=0;for(v=21207;v<=21264;v++)H[v]=0;for(v=21307;v<=21364;v++)H[v]=0;for(v=21413;v<=21423;v++)H[v]=0;for(v=21453;v<=21463;v++)H[v]=0;for(v=21473;v<=21483;v++)H[v]=0;for(v=21780;v<=21782;v++)H[v]=0;for(v=21891;v<=21894;v++)H[v]=0;for(v=21896;v<=21899;v++)H[v]=0;for(v=22171;v<=22177;v++)H[v]=0;for(v=22181;v<=22187;v++)H[v]=0;for(v=22191;v<=22197;v++)H[v]=0;for(v=22207;v<=22222;v++)H[v]=0;for(v=22229;v<=22232;v++)H[v]=0;for(v=22234;v<=22236;v++)H[v]=0;for(v=22243;v<=22250;v++)H[v]=0;for(v=22262;v<=22265;v++)H[v]=0;for(v=22307;v<=22322;v++)H[v]=0;for(v=22348;v<=22357;v++)H[v]=0;for(v=22407;v<=22422;v++)H[v]=0;for(v=22462;v<=22465;v++)H[v]=0;for(v=22521;v<=22525;v++)H[v]=0;for(v=22607;v<=22622;v++)H[v]=0;for(v=22641;v<=22646;v++)H[v]=0;for(v=22648;v<=22657;v++)H[v]=0;for(v=22707;v<=22722;v++)H[v]=0;for(v=22762;v<=22765;v++)H[v]=0;for(v=22807;v<=22822;v++)H[v]=0;for(v=22991;v<=22994;v++)H[v]=0;for(v=23028;v<=23038;v++)H[v]=0;for(v=23301;v<=23333;v++)H[v]=2;for(v=23830;v<=23853;v++)H[v]=0;for(v=23866;v<=23872;v++)H[v]=0;for(v=23877;v<=23884;v++)H[v]=0;for(v=23886;v<=23894;v++)H[v]=0;for(v=23946;v<=23948;v++)H[v]=0;for(v=24311;v<=24313;v++)H[v]=0;for(v=24342;v<=24347;v++)H[v]=0;for(v=24370;v<=24374;v++)H[v]=10;for(v=24375;v<=24381;v++)H[v]=0;for(v=24718;v<=24721;v++)H[v]=0;for(v=24817;v<=24821;v++)H[v]=0;for(v=24877;v<=24882;v++)H[v]=0;for(v=24891;v<=24893;v++)H[v]=0;for(v=25391;v<=25395;v++)H[v]=0;for(v=25828;v<=25838;v++)H[v]=0;for(v=26191;v<=26195;v++)H[v]=0;for(v=26391;v<=26393;v++)H[v]=0;for(v=26701;v<=26722;v++)H[v]=0;for(v=26729;v<=26799;v++)H[v]=2;for(v=26801;v<=26803;v++)H[v]=2;for(v=26811;v<=26813;v++)H[v]=2;for(v=26847;v<=26870;v++)H[v]=2;for(v=26891;v<=26899;v++)H[v]=0;for(v=26901;v<=26923;v++)H[v]=0;for(v=26929;v<=26946;v++)H[v]=0;for(v=26948;v<=26998;v++)H[v]=0;for(v=27037;v<=27040;v++)H[v]=0;for(v=27205;v<=27232;v++)H[v]=0;for(v=27258;v<=27260;v++)H[v]=0;for(v=27391;v<=27398;v++)H[v]=0;for(v=27561;v<=27564;v++)H[v]=0;for(v=27571;v<=27574;v++)H[v]=0;for(v=27581;v<=27584;v++)H[v]=0;for(v=27591;v<=27594;v++)H[v]=0;for(v=27700;v<=27707;v++)H[v]=0;for(v=28191;v<=28193;v++)H[v]=0;for(v=28348;v<=28358;v++)H[v]=0;for(v=28402;v<=28432;v++)H[v]=0;for(v=28462;v<=28492;v++)H[v]=0;for(v=29118;v<=29122;v++)H[v]=0;for(v=29168;v<=29172;v++)H[v]=0;for(v=29177;v<=29185;v++)H[v]=0;for(v=29187;v<=29195;v++)H[v]=0;for(v=29900;v<=29903;v++)H[v]=0;for(v=30161;v<=30179;v++)H[v]=0;for(v=30491;v<=30494;v++)H[v]=0;for(v=30729;v<=30732;v++)H[v]=0;for(v=31251;v<=31259;v++)H[v]=0;for(v=31265;v<=31268;v++)H[v]=0;for(v=31275;v<=31279;v++)H[v]=0;for(v=31281;v<=31297;v++)H[v]=0;for(v=31461;v<=31469;v++)H[v]=0;for(v=31491;v<=31495;v++)H[v]=0;for(v=31917;v<=31922;v++)H[v]=0;for(v=31965;v<=32e3;v++)H[v]=0;for(v=32001;v<=32003;v++)H[v]=2;for(v=32005;v<=32031;v++)H[v]=2;for(v=32033;v<=32060;v++)H[v]=2;for(v=32064;v<=32067;v++)H[v]=2;for(v=32074;v<=32077;v++)H[v]=2;for(v=32081;v<=32086;v++)H[v]=0;for(v=32107;v<=32130;v++)H[v]=0;for(v=32133;v<=32159;v++)H[v]=0;for(v=32164;v<=32167;v++)H[v]=2;for(v=32180;v<=32199;v++)H[v]=0;for(v=32201;v<=32260;v++)H[v]=0;for(v=32301;v<=32360;v++)H[v]=0;for(v=32401;v<=32460;v++)H[v]=0;for(v=32501;v<=32560;v++)H[v]=0;for(v=32601;v<=32662;v++)H[v]=0;for(v=32664;v<=32667;v++)H[v]=2;for(v=32701;v<=32761;v++)H[v]=0;for(v=53001;v<=53004;v++)H[v]=0;for(v=53008;v<=53019;v++)H[v]=0;for(v=53021;v<=53032;v++)H[v]=0;for(v=53034;v<=53037;v++)H[v]=0;for(v=53042;v<=53046;v++)H[v]=0;for(v=53074;v<=53080;v++)H[v]=0;for(v=54001;v<=54004;v++)H[v]=0;for(v=54008;v<=54019;v++)H[v]=0;for(v=54021;v<=54032;v++)H[v]=0;for(v=54034;v<=54037;v++)H[v]=0;for(v=54042;v<=54046;v++)H[v]=0;for(v=54048;v<=54053;v++)H[v]=0;for(v=54074;v<=54080;v++)H[v]=0;for(v=54090;v<=54096;v++)H[v]=0;for(v=54098;v<=54101;v++)H[v]=0;for(v=65161;v<=65163;v++)H[v]=0;for(v=102001;v<=102040;v++)H[v]=0;for(v=102042;v<=102063;v++)H[v]=0;for(v=102065;v<=102067;v++)H[v]=0;for(v=102070;v<=102117;v++)H[v]=0;for(v=102122;v<=102216;v++)H[v]=0;for(v=102221;v<=102377;v++)H[v]=0;for(v=102382;v<=102388;v++)H[v]=0;for(v=102389;v<=102398;v++)H[v]=2;for(v=102399;v<=102444;v++)H[v]=0;for(v=102445;v<=102447;v++)H[v]=2;for(v=102448;v<=102458;v++)H[v]=0;for(v=102459;v<=102468;v++)H[v]=2;for(v=102469;v<=102499;v++)H[v]=0;for(v=102500;v<=102519;v++)H[v]=1;for(v=102520;v<=102524;v++)H[v]=0;for(v=102525;v<=102529;v++)H[v]=2;for(v=102530;v<=102588;v++)H[v]=0;for(v=102590;v<=102598;v++)H[v]=0;for(v=102601;v<=102603;v++)H[v]=0;for(v=102605;v<=102628;v++)H[v]=0;for(v=102629;v<=102646;v++)H[v]=2;for(v=102648;v<=102700;v++)H[v]=2;for(v=102701;v<=102703;v++)H[v]=0;for(v=102707;v<=102730;v++)H[v]=2;for(v=102733;v<=102758;v++)H[v]=2;for(v=102767;v<=102900;v++)H[v]=0;for(v=102901;v<=102933;v++)H[v]=2;for(v=102934;v<=102950;v++)H[v]=13;for(v=102951;v<=102963;v++)H[v]=0;for(v=102965;v<=102969;v++)H[v]=0;for(v=102971;v<=102973;v++)H[v]=0;for(v=102975;v<=102989;v++)H[v]=0;for(v=102990;v<=102992;v++)H[v]=1;for(v=102997;v<=103002;v++)H[v]=0;for(v=103003;v<=103008;v++)H[v]=2;for(v=103009;v<=103011;v++)H[v]=0;for(v=103012;v<=103014;v++)H[v]=2;for(v=103019;v<=103021;v++)H[v]=0;for(v=103022;v<=103024;v++)H[v]=2;for(v=103029;v<=103031;v++)H[v]=0;for(v=103032;v<=103034;v++)H[v]=2;for(v=103065;v<=103068;v++)H[v]=0;for(v=103074;v<=103076;v++)H[v]=0;for(v=103077;v<=103079;v++)H[v]=1;for(v=103080;v<=103082;v++)H[v]=0;for(v=103083;v<=103085;v++)H[v]=2;for(v=103090;v<=103093;v++)H[v]=0;for(v=103097;v<=103099;v++)H[v]=0;for(v=103100;v<=103102;v++)H[v]=2;for(v=103107;v<=103109;v++)H[v]=0;for(v=103110;v<=103112;v++)H[v]=2;for(v=103113;v<=103116;v++)H[v]=0;for(v=103117;v<=103120;v++)H[v]=2;for(v=103153;v<=103157;v++)H[v]=0;for(v=103158;v<=103162;v++)H[v]=2;for(v=103163;v<=103165;v++)H[v]=0;for(v=103166;v<=103168;v++)H[v]=1;for(v=103169;v<=103171;v++)H[v]=2;for(v=103186;v<=103188;v++)H[v]=0;for(v=103189;v<=103191;v++)H[v]=2;for(v=103192;v<=103195;v++)H[v]=0;for(v=103196;v<=103199;v++)H[v]=2;for(v=103200;v<=103224;v++)H[v]=0;for(v=103225;v<=103227;v++)H[v]=1;for(v=103232;v<=103237;v++)H[v]=0;for(v=103238;v<=103243;v++)H[v]=2;for(v=103244;v<=103246;v++)H[v]=0;for(v=103247;v<=103249;v++)H[v]=2;for(v=103254;v<=103256;v++)H[v]=0;for(v=103257;v<=103259;v++)H[v]=2;for(v=103264;v<=103266;v++)H[v]=0;for(v=103267;v<=103269;v++)H[v]=2;for(v=103300;v<=103375;v++)H[v]=0;for(v=103381;v<=103383;v++)H[v]=0;for(v=103384;v<=103386;v++)H[v]=1;for(v=103387;v<=103389;v++)H[v]=0;for(v=103390;v<=103392;v++)H[v]=2;for(v=103397;v<=103399;v++)H[v]=0;for(v=103400;v<=103471;v++)H[v]=2;for(v=103476;v<=103478;v++)H[v]=0;for(v=103479;v<=103481;v++)H[v]=2;for(v=103486;v<=103488;v++)H[v]=0;for(v=103489;v<=103491;v++)H[v]=2;for(v=103492;v<=103495;v++)H[v]=0;for(v=103496;v<=103499;v++)H[v]=2;for(v=103528;v<=103543;v++)H[v]=0;for(v=103544;v<=103548;v++)H[v]=2;for(v=103549;v<=103551;v++)H[v]=0;for(v=103552;v<=103554;v++)H[v]=1;for(v=103555;v<=103557;v++)H[v]=2;for(v=103558;v<=103560;v++)H[v]=0;for(v=103571;v<=103573;v++)H[v]=0;for(v=103574;v<=103576;v++)H[v]=2;for(v=103577;v<=103580;v++)H[v]=0;for(v=103581;v<=103583;v++)H[v]=2;for(v=103595;v<=103694;v++)H[v]=0;for(v=103696;v<=103699;v++)H[v]=0;for(v=103700;v<=103793;v++)H[v]=2;for(v=103794;v<=103890;v++)H[v]=0;for(v=103891;v<=103896;v++)H[v]=2;for(v=103900;v<=103971;v++)H[v]=2;for(v=103972;v<=103977;v++)H[v]=0;for(v=112e3;v<=112101;v++)H[v]=0;const Qpe=[102100,102113,3857,3785,900913],s8e=[104905,104971],o8e=[104903],a8e=[4326,...Qpe,...s8e,...o8e],Wk=[-20037508342788905e-9,20037508342788905e-9],_9=[-20037508342787e-6,20037508342787e-6],Dj={wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:Wk,origin:_9,dx:1e-5},eme={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Wk,origin:_9,dx:1e-5},102100:Dj,3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:Wk,origin:_9,dx:1e-5},3857:Dj,4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},900913:Dj,104903:{wkTemplate:'GEOGCS["GCS_Moon_2000",DATUM["D_Moon_2000",SPHEROID["Moon_2000_IAU_IAG",1737400,0,AUTHORITY["ESRI","107903"]],AUTHORITY["ESRI","106903"]],PRIMEM["Reference_Meridian",0,AUTHORITY["ESRI","108900"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["ESRI","104903"]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function go(t,e){if(t===e)return!0;if(t==null||e==null)return!1;const n=t.wkid,r=e.wkid;if(n!=null||r!=null){if(n===r||$d(t)&&$d(e))return!0;const o=t.latestWkid;if(o!=null&&r===o)return!0;const a=e.latestWkid;return a!=null&&n===a}let i,s;return t.wkt2&&e.wkt2?(i=t.wkt2,s=e.wkt2):t.wkt&&e.wkt&&(i=t.wkt,s=e.wkt),!(!i||!s)&&i.toUpperCase()===s.toUpperCase()}function za(t){const e=t?.wkid;return e!=null&&e>=2e3&&eme[e]||null}function tme(t){if(!t)return;const{wkid:e,vcsWkid:n}=t;if(e)return n?JSON.stringify({wkid:e,vcsWkid:n}):String(e);const r=t.wkt||t.wkt2;return JSON.stringify(r?n?{wkt:r,vcsWkid:n}:{wkt:r}:{})}function yb(t){if(!dc(t))return!1;const{wkid:e}=t;if(e)return H[e]==null;const n=t.wkt2||t.wkt;return!!n&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(n)}function l8e(t){return!(nme(t)||rme(t))}function W1(t){return t?.wkid===4326}function wPt(t){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(t)}function Dee(t){return t?.wkid===4490}function $d(t){const e=t?.wkid;return e!=null&&e>=2e3&&Qpe.includes(e)}function c8e(t){return t?.wkid===32662}function GO(t){return t===104971||t===104905}function nme(t){return GO(t?.wkid)}function UO(t){return t===104903}function rme(t){return UO(t?.wkid)}function u8e(t){const e=t?.wkid;return e!=null&&e>=2e3&&a8e.includes(e)}function dc(t){if(t==null)return!1;const e=t.wkid;return e!=null&&e>=2e3||t.wkt2!=null||t.wkt!=null}const ime={wkid:4326,wkt:gfe(eme[4326].wkTemplate,{Central_Meridian:"0.0"})},sme={wkid:102100,latestWkid:3857},h8e={wkid:32662};function zB(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const d8e=zB(is),GB=zB(Ad),UB=zB(Wg),f8e={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${is.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},p8e=GB.wkt.toUpperCase(),m8e=UB.wkt.toUpperCase();function g8e(t){if(t!=null&&dc(t)){const e=t.wkid,n=t.wkt2??t.wkt;if(GO(e))return Ad;const r=n?.toUpperCase();if(n&&r===p8e)return Ad;if(UO(e)||r&&r===m8e)return Wg}return is}function bPt(t){return GO(t)?Ad:UO(t)?Wg:is}function nN(t){return go(t,d8e)}function qg(t){return nN(t)||go(t,GB)||go(t,UB)}const EPt=39.37,y8e=is.radius*Math.PI/200,ome=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,T2=H,ame=/UNIT\[([^\]]+)]/i,v8e=new Set([4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104025,104026,104139,104140]),_8e=Ll()({millimeter:"millimeters",centimeter:"centimeters",meter:"meters",meter_german:"german-meters",kilometer:"kilometers",decimeter:"decimeters",micrometer:"micrometers",nanometer:"nanometers","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",fathom:"fathoms",nautical_mile:"nautical-miles",chain_us:"us-chains",link_us:"us-links",mile_us:"us-miles",yard_clarke:"clarke-yards",chain_clarke:"clarke-chains",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",link_sears:"sears-links",yard_benoit_1895_a:"benoit-1895-a-yards",foot_benoit_1895_a:"benoit-1895-a-feet",chain_benoit_1895_a:"benoit-1895-a-chains",link_benoit_1895_a:"benoit-1895-a-links",yard_benoit_1895_b:"benoit-1895-b-yards",foot_benoit_1895_b:"benoit-1895-b-feet",chain_benoit_1895_b:"benoit-1895-b-chains",link_benoit_1895_b:"benoit-1895-b-links",foot_1865:"1865-feet",foot_indian:"indian-feet",foot_indian_1937:"indian-1937-feet",foot_indian_1962:"indian-1962-feet",foot_indian_1975:"indian-1975-feet",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",yard_indian_1962:"indian-1962-yards",yard_indian_1975:"indian-1975-yards",statute_mile:"statute-miles",foot_gold_coast:"gold-coast-feet",foot_british_1936:"british-1936-feet",yard:"yards",chain:"chains",link:"links",yard_sears_1922_truncated:"sears-1922-truncated-yards",foot_sears_1922_truncated:"sears-1922-truncated-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains",link_sears_1922_truncated:"sears-1922-truncated-links",yard_us:"us-yards",inch:"inches",inch_us:"us-inches",rod:"rods",rod_us:"us-rods",nautical_mile_us:"us-nautical-miles",nautical_mile_uk:"uk-nautical-miles",smoot:"smoots",vara_tx:"tx-vara",point:"points"}),Lu=t=>t*t,mm=t=>t*t*t,Hk={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},meters:{inBaseUnits:1},feet:{inBaseUnits:.3048},"us-feet":{inBaseUnits:.3048006096012192},"clarke-feet":{inBaseUnits:.3047972654},fathoms:{inBaseUnits:1.8288},"nautical-miles":{inBaseUnits:1852},"german-meters":{inBaseUnits:1.0000135965},"us-chains":{inBaseUnits:20.11684023368047},"us-links":{inBaseUnits:.2011684023368047},"us-miles":{inBaseUnits:1609.347218694438},kilometers:{inBaseUnits:1e3},"clarke-yards":{inBaseUnits:.9143917962},"clarke-chains":{inBaseUnits:20.1166195164},"clarke-links":{inBaseUnits:.201166195164},"sears-yards":{inBaseUnits:.9143984146160287},"sears-feet":{inBaseUnits:.3047994715386762},"sears-chains":{inBaseUnits:20.11676512155263},"sears-links":{inBaseUnits:.2011676512155263},"benoit-1895-a-yards":{inBaseUnits:.9143992},"benoit-1895-a-feet":{inBaseUnits:.3047997333333333},"benoit-1895-a-chains":{inBaseUnits:20.1167824},"benoit-1895-a-links":{inBaseUnits:.201167824},"benoit-1895-b-yards":{inBaseUnits:.9143992042898124},"benoit-1895-b-feet":{inBaseUnits:.3047997347632708},"benoit-1895-b-chains":{inBaseUnits:20.11678249437587},"benoit-1895-b-links":{inBaseUnits:.2011678249437587},"1865-feet":{inBaseUnits:.3048008333333334},"indian-feet":{inBaseUnits:.3047995102481469},"indian-1937-feet":{inBaseUnits:.30479841},"indian-1962-feet":{inBaseUnits:.3047996},"indian-1975-feet":{inBaseUnits:.3047995},"indian-yards":{inBaseUnits:.9143985307444408},"indian-1937-yards":{inBaseUnits:.91439523},"indian-1962-yards":{inBaseUnits:.9143988},"indian-1975-yards":{inBaseUnits:.9143985},miles:{inBaseUnits:1609.344},"statute-miles":{inBaseUnits:1609.344},"gold-coast-feet":{inBaseUnits:.3047997101815088},"british-1936-feet":{inBaseUnits:.3048007491},yards:{inBaseUnits:.9144},chains:{inBaseUnits:20.1168},links:{inBaseUnits:.201168},"sears-1922-truncated-yards":{inBaseUnits:.914398},"sears-1922-truncated-feet":{inBaseUnits:.3047993333333334},"sears-1922-truncated-chains":{inBaseUnits:20.116756},"sears-1922-truncated-links":{inBaseUnits:.20116756},"us-yards":{inBaseUnits:.9144018288036576},decimeters:{inBaseUnits:.1},inches:{inBaseUnits:.0254},"us-inches":{inBaseUnits:.0254000508001016},rods:{inBaseUnits:5.0292},"us-rods":{inBaseUnits:5.029210058420118},"us-nautical-miles":{inBaseUnits:1853.248},"uk-nautical-miles":{inBaseUnits:1853.184},smoots:{inBaseUnits:1.7018},"tx-vara":{inBaseUnits:.8466683600033867},points:{inBaseUnits:.0003527777777777778},micrometers:{inBaseUnits:1e-6},nanometers:{inBaseUnits:1e-9},"50-kilometers":{inBaseUnits:5e4},"150-kilometers":{inBaseUnits:15e4}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Lu(.001)},"square-centimeters":{inBaseUnits:Lu(.01)},"square-decimeters":{inBaseUnits:Lu(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Lu(1e3)},"square-inches":{inBaseUnits:Lu(.0254)},"square-feet":{inBaseUnits:Lu(.3048)},"square-yards":{inBaseUnits:Lu(.9144)},"square-miles":{inBaseUnits:Lu(1609.344)},"square-nautical-miles":{inBaseUnits:Lu(1852)},"square-us-feet":{inBaseUnits:Lu(1200/3937)},acres:{inBaseUnits:.0015625*Lu(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*mm(.001)},"cubic-centimeters":{inBaseUnits:1e3*mm(.01)},"cubic-decimeters":{inBaseUnits:1e3*mm(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*mm(1e3)},"cubic-inches":{inBaseUnits:1e3*mm(.0254)},"cubic-feet":{inBaseUnits:1e3*mm(.3048)},"cubic-yards":{inBaseUnits:1e3*mm(.9144)},"cubic-miles":{inBaseUnits:1e3*mm(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},x8e=(()=>{const t={};for(const e in Hk)for(const n in Hk[e].units)t[n]=e;return t})();function w8e(t,e,n){return t*Hk[n].units[e].inBaseUnits}function b8e(t,e,n){return t/Hk[n].units[e].inBaseUnits}const E8e=["inches","feet","yards","miles","nautical-miles","us-feet","millimeters","centimeters","decimeters","meters","kilometers"],S8e=["metric","imperial"],lme=[...S8e,...E8e],T8e=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function x9(t){const e=x8e[t];if(!e)throw new Error("unknown type");return e}function jee(t,e=null){return e=e||x9(t),Hk[e].baseUnit===t}function xh(t,e,n){if(e===n)return t;const r=x9(e);if(r!==x9(n))throw new Error("incompatible units");const i=jee(e,r)?t:w8e(t,e,r);return jee(n,r)?i:b8e(i,n,r)}function SPt(t,e,n,r=!1){if(!r&&yb(e))throw new Error("Unable to convert from an angular unit to a linear unit.");const i=vv(e);return i!==n&&(t=i?xh(t,i,n):xh(t*=Kd(e),"meters",n)),t}function TPt(t,e,n,r=!1){if(!r&&yb(n))throw new Error("Unable to convert from a linear unit to an angular unit.");const i=vv(n);return e!==i&&(t=i?xh(t,e,i):xh(t,e,"meters")/Kd(n)),t}function k8e(t){switch(t){case"metric":return"meters";case"imperial":return"feet";default:return t}}function kPt(t){return k8e(t)}function APt(t){switch(t){case"metric":return"square-meters";case"imperial":return"square-feet";default:return t}}function IPt(t,e,n){switch(n){case"metric":return A8e(t,e);case"imperial":return P8e(t,e);default:return n}}function PPt(t,e,n){switch(n){case"metric":return I8e(t,e);case"imperial":return C8e(t,e);default:return n}}function A8e(t,e){const n=xh(t,e,"meters");return Math.abs(n)<3e3?"meters":"kilometers"}function I8e(t,e){const n=xh(t,e,"meters");return Math.abs(n)<1e5?"meters":"kilometers"}function P8e(t,e){const n=xh(t,e,"feet");return Math.abs(n)<1e3?"feet":"miles"}function C8e(t,e){const n=xh(t,e,"feet");return Math.abs(n)<1e5?"feet":"miles"}function CPt(t,e){const n=xh(t,e,"square-meters");return Math.abs(n)<3e6?"square-meters":"square-kilometers"}function RPt(t,e){const n=xh(t,e,"square-feet");return Math.abs(n)<1e6?"square-feet":"square-miles"}function MPt(t,e,n){return xh(t,e,"meters")/(n*Math.PI/180)}function BB(t){return _8e.fromJSON(t.toLowerCase())||null}function $ee(t){if(t!=null&&!l8e(t))return 1;const e=Kd(t);return e>1e5?1:e}function cme(t){return Kd(t)>=g8e(t).metersPerDegree?"meters":vv(t)}function Kd(t,e=is.metersPerDegree){return R8e(t,!0)??e}function R8e(t,e=!1){const n=t?.wkid??null,r=t?.wkt2??t?.wkt??null;let i=null;if(n){if(GO(n))return Ad.metersPerDegree;if(UO(n))return Wg.metersPerDegree;i=T2.values[T2[n]],!i&&e&&v8e.has(n)&&(i=y8e)}else r&&(dme(r)?i=Fee(ome.exec(r),i):hme(r)&&(i=Fee(ame.exec(r),i)));return i}function NPt(t){return yb(t)?1:Kd(t)}function Fee(t,e){return t?.[1]?ume(t[1]):e}function ume(t){return parseFloat(t.split(",")[1])}function vv(t){const e=t?.wkid??null,n=t?.wkt2??t?.wkt??null;let r=null;if(e)r=T2.units[T2[e]];else if(n){const i=dme(n)?ome:hme(n)?ame:null;if(i){const s=i.exec(n);s?.[1]&&(r=N8e(s[1]))}}return r!=null?BB(r):null}function OPt(t){const e=vv(t);return e!=null&&lme.includes(e)?e:null}function LPt(t){const e=cme(t);return e!=null&&lme.includes(e)?e:null}function DPt(t){const e=vv(t);return e==null?null:T8e.get(e)}function hme(t){return/^GEOCCS/i.test(t)}function dme(t){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(t)}const M8e=1e-7;function N8e(t){let n=/[\\"']([^\\"']+)/.exec(t)?.[1];if(!n||!BB(n)){const r=ume(t);n=null;const i=T2.values;for(let s=0;s<i.length;++s)if(Math.abs(r-i[s])<M8e){n=T2.units[s];break}}return n}function jPt(t){const e=vv(t);if(e==null)return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"fathoms":case"nautical-miles":case"us-chains":case"us-links":case"us-miles":case"clarke-yards":case"clarke-chains":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"sears-links":case"benoit-1895-a-yards":case"benoit-1895-a-feet":case"benoit-1895-a-chains":case"benoit-1895-a-links":case"benoit-1895-b-yards":case"benoit-1895-b-feet":case"benoit-1895-b-chains":case"benoit-1895-b-links":case"1865-feet":case"indian-feet":case"indian-1937-feet":case"indian-1962-feet":case"indian-1975-feet":case"indian-yards":case"indian-1937-yards":case"indian-1962-yards":case"indian-1975-yards":case"statute-miles":case"gold-coast-feet":case"british-1936-feet":case"yards":case"chains":case"links":case"sears-1922-truncated-yards":case"sears-1922-truncated-feet":case"sears-1922-truncated-chains":case"sears-1922-truncated-links":case"us-yards":case"inches":case"us-inches":case"rods":case"us-rods":case"us-nautical-miles":case"uk-nautical-miles":case"smoots":case"tx-vara":case"points":return"imperial";case"millimeters":case"centimeters":case"meters":case"german-meters":case"kilometers":case"decimeters":case"micrometers":case"nanometers":case"50-kilometers":case"150-kilometers":return"metric"}return null}const O8e={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},L8e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},D8e={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},$Pt=Ll()(O8e),FPt=Ll()(L8e),VPt=Ll()(D8e);var Yh,fd;let Bt=(fd=class extends qt{static fromJSON(e){if(!e)return null;if(e?.wkid===102100)return Yh.WebMercator;if(e?.wkid===4326)return Yh.WGS84;const n=new Yh;return n.read(e),n}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return W1(this)}get isWebMercator(){return $d(this)}get isGeographic(){return yb(this)}get isWrappable(){return u8e(this)}get metersPerUnit(){return Kd(this)}get unit(){return vv(this)||(this.isGeographic?"degrees":null)}writeWkt(e,n){this.wkid||(n.wkt=e)}clone(){if(this===Yh.WGS84)return new Yh(ime);if(this===Yh.WebMercator)return new Yh(sme);const e=new Yh;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=Ze(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:n,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return n==null||i?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===n&&s.referenceServiceName===r:s.id===n}return go(this,e)}toJSON(e){return this.write(void 0,e)}},Yh=fd,fd.GCS_NAD_1927=null,fd.WGS84=null,fd.WebMercator=null,fd.PlateCarree=null,fd);x([E({readOnly:!0})],Bt.prototype,"isWGS84",null),x([E({readOnly:!0})],Bt.prototype,"isWebMercator",null),x([E({readOnly:!0})],Bt.prototype,"isGeographic",null),x([E({readOnly:!0})],Bt.prototype,"isWrappable",null),x([E({type:jr,json:{write:!0}})],Bt.prototype,"latestWkid",void 0),x([E({readOnly:!0})],Bt.prototype,"metersPerUnit",null),x([E({readOnly:!0})],Bt.prototype,"unit",null),x([E({type:jr,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Bt.prototype,"wkid",void 0),x([E({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Bt.prototype,"wkt",void 0),x([er("wkt"),er("web-scene","wkt")],Bt.prototype,"writeWkt",null),x([E({type:String,json:{write:!1}})],Bt.prototype,"wkt2",void 0),x([E({type:jr,json:{write:!0}})],Bt.prototype,"vcsWkid",void 0),x([E({type:jr,json:{write:!0}})],Bt.prototype,"latestVcsWkid",void 0),x([E()],Bt.prototype,"imageCoordinateSystem",void 0),Bt=Yh=x([ue("esri.geometry.SpatialReference")],Bt),Bt.prototype.toJSON.isDefaultToJSON=!0,Bt.GCS_NAD_1927=Kt.freeze(new Bt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'})),Bt.WGS84=Kt.freeze(new Bt(ime)),Bt.WebMercator=Kt.freeze(new Bt(sme)),Bt.PlateCarree=Kt.freeze(new Bt(h8e));function cr(t,e,n){let r,i;return e===void 0||Array.isArray(e)?(i=t,n=e,r=[void 0]):(i=e,r=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;r.forEach(l=>{const c=RB(s,l,i);c.read&&typeof c.read=="object"||(c.read={}),c.read.reader=a[o],n&&(c.read.source=(c.read.source||[]).concat(n))})}}let Gs=class extends qt{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Bt.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,n){if(e instanceof Bt)return e;if(e!=null){const r=new Bt;return r.read(e,n),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,n){this.cache[e]=n}};x([E()],Gs.prototype,"type",void 0),x([E({readOnly:!0})],Gs.prototype,"cache",null),x([E({readOnly:!0})],Gs.prototype,"extent",null),x([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Gs.prototype,"hasM",void 0),x([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Gs.prototype,"hasZ",void 0),x([E({type:Bt,json:{write:!0},value:Bt.WGS84})],Gs.prototype,"spatialReference",void 0),x([cr("spatialReference")],Gs.prototype,"readSpatialReference",null),Gs=x([ue("esri.geometry.Geometry")],Gs);const j8e=Object.prototype.toString;function $8e(t){const e="__accessorMetadata__"in t?qa(t):t;return function(...n){if(n.push(e),typeof n[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return F8e.apply(this,n)}}function F8e(t,e,n,r){xI(t,e).cast=r}function V8e(t){return(e,n)=>{xI(e,t).cast=e[n]}}function qs(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&j8e.call(t[0])==="[object Function]"?$8e(t[0]):t.length===1&&typeof t[0]=="string"?V8e(t[0]):void 0}function k2(t){if(t&&typeof t=="object"&&"type"in t&&t.type==="mesh")throw new Xe("internal:mesh","Mesh geometries are not supported for this operation")}function z8e(t){t.forEach(k2)}const G8e=57.29577951308232,U8e=.017453292519943;function Vee(t){return t*G8e}function zee(t){return t*U8e}function GPt(t){return Math.PI/2-2*Math.atan(Math.exp(-t/is.radius))}function w9(t){return t.wkid!=null||t.wkt!=null}const jj=[0,0];function rN(t,e,n,r,i){const s=t,o=i;if(o.spatialReference=n,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,jj,r);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,jj,r),[o.xmax,o.ymax]=e(s.xmax,s.ymax,jj,r);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let c;for(let u=0;u<a.length;u++){const h=a[u];c=[],l.push(c);for(let f=0;f<h.length;f++)c.push(e(h[f][0],h[f][1],[0,0],r)),h[f].length>2&&c[f].push(h[f][2]),h[f].length>3&&c[f].push(h[f][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let c=0;c<a.length;c++)l[c]=e(a[c][0],a[c][1],[0,0],r),a[c].length>2&&l[c].push(a[c][2]),a[c].length>3&&l[c].push(a[c][3]);o.points=l}return i}function kM(t,e){const n=t&&(w9(t)?t:t.spatialReference),r=e&&(w9(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!n||!r)&&(!!go(r,n)||$d(r)&&W1(n)||$d(n)&&W1(r))}function BO(t,e){if(t==null)return null;const n=t.spatialReference,r=e&&(w9(e)?e:e.spatialReference);return kM(n,r)?go(n,r)?Ze(t):$d(r)?rN(t,Ix,Bt.WebMercator,!1,Ze(t)):W1(r)?rN(t,WO,Bt.WGS84,!1,Ze(t)):null:null}function Ix(t,e,n=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=zee(e);return n[0]=zee(t)*is.radius,n[1]=is.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),n}function WO(t,e,n=[0,0],r=!1){if(t===Wk[0])n[0]=-180;else if(t===Wk[1])n[0]=180;else{const i=Vee(t/is.radius);n[0]=r?i:i-360*Math.floor((i+180)/360)}return n[1]=Vee(Math.PI/2-2*Math.atan(Math.exp(-e/is.radius))),n}function l1(t,e=!1,n=Ze(t)){return k2(t),k2(n),rN(t,Ix,Bt.WebMercator,e,n)}function pS(t,e=!1,n=Ze(t)){return k2(t),k2(n),rN(t,WO,Bt.WGS84,e,n)}function fme(t,e){const n=t.x-e.x,r=t.y-e.y,i=t.z!=null&&e.z!=null?t.z-e.z:0;return Math.sqrt(n*n+r*r+i*i)}function B8e(t){return pme(t,mme)?.[0]??null}function W8e(t){return pme(t,mme)?.[1]??null}function pme({x:t,y:e,spatialReference:n},r=[0,0]){if(n){if($d(n))return WO(t,e,r);if(yb(n))return r[0]=t,r[1]=e,r}return null}const mme=[0,0];var AM;const $j=[0,0];function Gee(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Jt=AM=class extends Gs{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const n=t._get("spatialReference");e._set("spatialReference",Kt.isFrozen(n)?n:n.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,n,r,i){let s;if(Array.isArray(t))s=t,i=e,t=s[0],e=s[1],n=s[2],r=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,n=s.z,r=s.m,(i=s.spatialReference)&&i.declaredClass!=="esri.geometry.SpatialReference"&&(i=new Bt(i)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)kt.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)kt.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&i?.isWebMercator){const a=Ix(s.longitude,s.latitude,$j);t=a[0],e=a[1]}}}else Gee(n)?(i=n,n=null):Gee(r)&&(i=r,r=null);const o={x:t,y:e};return o.x==null&&o.y!=null?kt.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&kt.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),i!=null&&(o.spatialReference=i),n!=null&&(o.z=n),r!=null&&(o.m=r),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){return W8e(this)}set latitude(t){const{spatialReference:e,x:n}=this;t!=null&&e&&(e.isWebMercator?this._set("y",Ix(n,t,$j)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){return B8e(this)}set longitude(t){const{y:e,spatialReference:n}=this;t!=null&&n&&(n.isWebMercator?this._set("x",Ix(t,e,$j)[0]):n.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,n){e[n]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new AM;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return AM.copy(t,this),this}equals(t){if(t==null)return!1;const{x:e,y:n,z:r,m:i,spatialReference:s}=this,{z:o,m:a}=t;let{x:l,y:c,spatialReference:u}=t;if(!s.equals(u))if(s.isWebMercator&&u.isWGS84)[l,c]=Ix(l,c),u=s;else{if(!s.isWGS84||!u.isWebMercator)return!1;[l,c]=WO(l,c),u=s}return e===l&&n===c&&r===o&&i===a&&s.wkid===u.wkid}offset(t,e,n){return this.x+=t,this.y+=e,n!=null&&(this.z=(this.z??0)+n),this}normalize(){if(!this.spatialReference)return this;const t=za(this.spatialReference);if(!t)return this;let e=this.x;const[n,r]=t.valid,i=2*r;let s;return e>r?(s=Math.ceil(Math.abs(e-r)/i),e-=s*i):e<n&&(s=Math.ceil(Math.abs(e-n)/i),e+=s*i),this._set("x",e),this}distance(t){return fme(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};x([E({readOnly:!0})],Jt.prototype,"cache",null),x([E({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Jt.prototype,"hasM",null),x([E({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Jt.prototype,"hasZ",null),x([E({type:Number})],Jt.prototype,"latitude",null),x([E({type:Number})],Jt.prototype,"longitude",null),x([E({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),qs(t=>isNaN(t)?t:oc(t))],Jt.prototype,"x",void 0),x([er("x")],Jt.prototype,"writeX",null),x([cr("x")],Jt.prototype,"readX",null),x([E({type:Number,json:{write:!0}})],Jt.prototype,"y",void 0),x([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Jt.prototype,"z",void 0),x([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Jt.prototype,"m",void 0),Jt=AM=x([ue("esri.geometry.Point")],Jt),Jt.prototype.toJSON.isDefaultToJSON=!0;const Fj=[0,0];function SI(t,e){return e!=null&&Aa(t,e.x,e.y,e.z)}function UPt(t,e){if(!e.points?.length)return!1;for(const n of e.points)if(!A2(t,n))return!1;return!0}function H8e(t,e){const{xmin:n,ymin:r,zmin:i,xmax:s,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?Aa(t,n,r,i)&&Aa(t,n,o,i)&&Aa(t,s,o,i)&&Aa(t,s,r,i)&&Aa(t,n,r,a)&&Aa(t,n,o,a)&&Aa(t,s,o,a)&&Aa(t,s,r,a):Aa(t,n,r)&&Aa(t,n,o)&&Aa(t,s,o)&&Aa(t,s,r)}function A2(t,e){return Aa(t,e[0],e[1])}function q8e(t,e){return Aa(t,e[0],e[1],e[2])}function Aa(t,e,n,r){return e>=t.xmin&&e<=t.xmax&&n>=t.ymin&&n<=t.ymax&&(r==null||!t.hasZ||r>=t.zmin&&r<=t.zmax)}function WB(t,e){return Fj[1]=e.y,Fj[0]=e.x,K8e(t,Fj)}function K8e(t,e){return HB(t.rings,e)}function HB(t,e){if(!t||t.length<1)return!1;if(Y8e(t))return Uee(!1,t,e);let n=!1;for(let r=0,i=t.length;r<i;r++)n=Uee(n,t[r],e);return n}function Y8e(t){return!Array.isArray(t[0][0])}function Uee(t,e,n){const[r,i]=n;let s=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[c,u]=e[a],[h,f]=e[o];(u<i&&f>=i||f<i&&u>=i)&&c+(i-u)/(f-u)*(h-c)<r&&(s=!s)}return s}function X8e(t,e){return SI(t,e)}function Z8e(t,e){const n=t.hasZ&&e.hasZ;let r,i,s;if(t.xmin<=e.xmin){if(r=e.xmin,t.xmax<r)return!1}else if(r=t.xmin,e.xmax<r)return!1;if(t.ymin<=e.ymin){if(i=e.ymin,t.ymax<i)return!1}else if(i=t.ymin,e.ymax<i)return!1;if(n&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function J8e(t,e){const{points:n,hasZ:r}=e,i=r?q8e:A2;for(const s of n)if(i(t,s))return!0;return!1}const H1=[0,0],q1=[0,0],K1=[0,0],Y1=[0,0],Q8e=[H1,q1,K1,Y1],gme=[[K1,H1],[H1,q1],[q1,Y1],[Y1,K1]];function e9e(t,e){return t9e(t,e.rings)}function t9e(t,e){H1[0]=t.xmin,H1[1]=t.ymax,q1[0]=t.xmax,q1[1]=t.ymax,K1[0]=t.xmin,K1[1]=t.ymin,Y1[0]=t.xmax,Y1[1]=t.ymin;for(const n of Q8e)if(HB(e,n))return!0;for(const n of e){if(!n.length)continue;let r=n[0];if(A2(t,r))return!0;for(let i=1;i<n.length;i++){const s=n[i];if(A2(t,s)||yme(r,s,gme))return!0;r=s}}return!1}function n9e(t,e){H1[0]=t.xmin,H1[1]=t.ymax,q1[0]=t.xmax,q1[1]=t.ymax,K1[0]=t.xmin,K1[1]=t.ymin,Y1[0]=t.xmax,Y1[1]=t.ymin;const n=e.paths;for(const r of n){if(!n.length)continue;let i=r[0];if(A2(t,i))return!0;for(let s=1;s<r.length;s++){const o=r[s];if(A2(t,o)||yme(i,o,gme))return!0;i=o}}return!1}const to=[0,0];function r9e(t){for(let e=0;e<t.length;e++){const n=t[e];for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const c=t[a][l],u=t[a][l+1];if(b9(s,o,c,u,to)&&!(to[0]===s[0]&&to[1]===s[1]||to[0]===c[0]&&to[1]===c[1]||to[0]===o[0]&&to[1]===o[1]||to[0]===u[0]&&to[1]===u[1]))return!0}}const r=n.length;if(!(r<=4))for(let i=0;i<r-3;i++){let s=r-1;i===0&&(s=r-2);const o=n[i],a=n[i+1];for(let l=i+2;l<s;l++){const c=n[l],u=n[l+1];if(b9(o,a,c,u,to)&&!(to[0]===o[0]&&to[1]===o[1]||to[0]===c[0]&&to[1]===c[1]||to[0]===a[0]&&to[1]===a[1]||to[0]===u[0]&&to[1]===u[1]))return!0}}}return!1}function yme(t,e,n){for(let r=0;r<n.length;r++)if(b9(t,e,n[r][0],n[r][1]))return!0;return!1}function b9(t,e,n,r,i){const[s,o]=t,[a,l]=e,[c,u]=n,[h,f]=r,g=h-c,y=s-c,_=a-s,b=f-u,T=o-u,A=l-o,I=b*_-g*A;if(I===0)return!1;const P=(g*T-b*y)/I,N=(_*T-A*y)/I;return P>=0&&P<=1&&N>=0&&N<=1&&(i&&(i[0]=s+P*(a-s),i[1]=o+P*(l-o)),!0)}function i9e(t){switch(t){case"esriGeometryEnvelope":case"extent":return Z8e;case"esriGeometryMultipoint":case"multipoint":return J8e;case"esriGeometryPoint":case"point":return X8e;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return e9e;case"esriGeometryPolyline":case"polyline":return n9e}}var Uu;function s9e(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function gm(t,e,n){return e==null?n:n==null?e:t(e,n)}let Vn=Uu=class extends Gs{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,n,r,i){return s9e(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Bt.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:n,ymax:r,spatialReference:i??Bt.WGS84}}static fromPoint(t){return new Uu({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Jt({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Uu;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,n=t.spatialReference;return e&&n&&!e.equals(n)&&kM(e,n)&&(t=e.isWebMercator?l1(t):pS(t,!0)),t.type==="point"?SI(this,t):t.type==="extent"&&H8e(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,n=t.spatialReference;return e&&n&&!e.equals(n)&&kM(e,n)&&(t=e.isWebMercator?l1(t):pS(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),n=this.width*e,r=this.height*e;if(this.xmin+=n,this.ymin+=r,this.xmax-=n,this.ymax-=r,this.hasZ){const i=(this.zmax-this.zmin)*e;this.zmin+=i,this.zmax-=i}if(this.hasM){const i=(this.mmax-this.mmin)*e;this.mmin+=i,this.mmax-=i}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,n=t.spatialReference;return e&&n&&!go(e,n)&&kM(e,n)&&(t=e.isWebMercator?l1(t):pS(t,!0)),i9e(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,n){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,n!=null&&(this.zmin+=n,this.zmax+=n),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=gm(Math.min,this.zmin,t.zmin),this.zmax=gm(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=gm(Math.min,this.mmin,t.mmin),this.mmax=gm(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=gm(Math.max,this.zmin,t.zmin),this.zmax=gm(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=gm(Math.max,this.mmin,t.mmin),this.mmax=gm(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=za(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,n=this._getCM(t);if(n){const r=e.isWebMercator?pS(n):n;this.xmin-=n.x,this.xmax-=n.x,e.isWebMercator||(r.x=Vj(r.x,t).x),this.spatialReference=new Bt(gfe((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:r.x}))}return this}_getCM(t){let e=null;const[n,r]=t.valid,i=this.xmin,s=this.xmax;return i>=n&&i<=r&&s>=n&&s<=r||(e=this.center),e}_normalize(t,e,n){const r=this.spatialReference;if(!r)return this;const i=n??za(r);if(i==null)return this;const s=this._getParts(i).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(i):this.set({xmin:i.valid[0],xmax:i.valid[1]});if(t)return this._shiftCM(i);if(e)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const c=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const u=(l.zmax-l.zmin)/2;for(let h=0;h<c.length;h++)c[h].push(u)}if(a){const u=(l.mmax-l.mmin)/2;for(let h=0;h<c.length;h++)c[h].push(u)}return c}),hasZ:o,hasM:a,spatialReference:r}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:i,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,c=this.xmax;let u;t=t||za(o);const[h,f]=t.valid;u=Vj(this.xmin,t);const g=u.x,y=u.frameId;u=Vj(this.xmax,t);const _=u.x,b=u.frameId,T=g===_&&a>0;if(a>2*f){const A=new Uu(l<c?g:_,i,f,s,o),I=new Uu(h,i,l<c?_:g,s,o),P=new Uu(0,i,f,s,o),N=new Uu(h,i,0,s,o),L=[],C=[];A.contains(P)&&L.push(y),A.contains(N)&&C.push(y),I.contains(P)&&L.push(b),I.contains(N)&&C.push(b);for(let M=y+1;M<b;M++)L.push(M),C.push(M);e.push({extent:A,frameIds:[y]},{extent:I,frameIds:[b]},{extent:P,frameIds:L},{extent:N,frameIds:C})}else g>_||T?e.push({extent:new Uu(g,i,f,s,o),frameIds:[y]},{extent:new Uu(h,i,_,s,o),frameIds:[b]}):e.push({extent:new Uu(g,i,_,s,o),frameIds:[y]});this.cache._parts=e}const n=this.hasZ,r=this.hasM;if(n||r){const i={};n&&(i.zmin=this.zmin,i.zmax=this.zmax),r&&(i.mmin=this.mmin,i.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(i)}return e}};function Vj(t,e){const[n,r]=e.valid,i=2*r;let s,o=0;return t>r?(s=Math.ceil(Math.abs(t-r)/i),t-=s*i,o=s):t<n&&(s=Math.ceil(Math.abs(t-n)/i),t+=s*i,o=-s),{x:t,frameId:o}}x([E({readOnly:!0})],Vn.prototype,"cache",null),x([E({readOnly:!0})],Vn.prototype,"center",null),x([E({readOnly:!0})],Vn.prototype,"extent",null),x([E({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Vn.prototype,"hasM",null),x([E({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Vn.prototype,"hasZ",null),x([E({readOnly:!0})],Vn.prototype,"height",null),x([E({readOnly:!0})],Vn.prototype,"width",null),x([E({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Vn.prototype,"xmin",void 0),x([E({type:Number,json:{write:!0}})],Vn.prototype,"ymin",void 0),x([E({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Vn.prototype,"mmin",void 0),x([E({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Vn.prototype,"zmin",void 0),x([E({type:Number,json:{write:!0}})],Vn.prototype,"xmax",void 0),x([E({type:Number,json:{write:!0}})],Vn.prototype,"ymax",void 0),x([E({type:Number,json:{origins:{"web-scene":{write:!1}},read:t=>t??void 0,write:{overridePolicy(){return{enabled:this.hasM}}}}})],Vn.prototype,"mmax",void 0),x([E({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Vn.prototype,"zmax",void 0),Vn=Uu=x([ue("esri.geometry.Extent")],Vn),Vn.prototype.toJSON.isDefaultToJSON=!0;let vT;const o9e=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale,E9=globalThis.document?.documentElement;function vme(){const t=E9?.getAttribute("lang"),e=globalThis.navigator?.language;return o9e??t??e??"en"}function du(){return vT===void 0&&(vT=vme()),vT}const a9e=/^(?<language>[a-z]{2,3})(?:-(?<extlang>[a-z]{3}))?(?:-[A-Z][a-z]{3})?(?:-(?<region>[A-Z]{2}|\d{3}))?(?:-.*)?$/;function qB(t=du()){return xme(t)?.language}function _me(t=du()){const e=xme(t);return e?.language&&e?.extlang?t.replace(`${e.language}-`,""):t}function xme(t=du()){return a9e.exec(t)?.groups}const IM=[];function wme(t){return IM.push(t),Zn(()=>{IM.splice(IM.indexOf(t),1)})}const PM=[];function KB(t){return PM.push(t),Zn(()=>PM.splice(PM.indexOf(t),1))}function Bee(){const t=vme();vT!==t&&([...PM].forEach(e=>e(t)),vT=t,[...IM].forEach(e=>e(t)))}globalThis.addEventListener?.("languagechange",Bee),E9&&new MutationObserver(()=>{Bee()}).observe(E9,{attributeFilter:["lang"]});let $C;function l9e(t){return $C&&!$C.destroyed||($C=t()),$C}var S9;const c9e=new Ys({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let us=S9=class extends Kt{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new S9({categories:this.categories?Ze(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let n=[];this.categories&&(n=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let r="";if(this.extent){const o=BO(this.extent,Bt.WGS84);o!=null&&(r=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let i=this.query;!this.disableExtraQuery&&t.extraQuery&&(i="("+i+")"+t.extraQuery);const s={categories:n,bbox:r,q:i,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>c9e.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};x([E()],us.prototype,"categories",void 0),x([E()],us.prototype,"disableExtraQuery",void 0),x([E({type:Vn})],us.prototype,"extent",void 0),x([E()],us.prototype,"filter",void 0),x([E()],us.prototype,"num",void 0),x([E()],us.prototype,"query",void 0),x([E()],us.prototype,"sortField",void 0),x([E()],us.prototype,"sortOrder",null),x([E()],us.prototype,"start",void 0),us=S9=x([ue("esri.portal.PortalQueryParams")],us);var T9;let Wi=T9=class extends qt{constructor(t){super(t),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e&&this.portal?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`):null}get url(){const t=this.portal?.restUrl;return t?t+"/community/groups/"+this.id:null}fetchCategorySchema(t){return this.portal.request(this.url+"/categorySchema",t).then(e=>{const n=e.categorySchema||[];return n.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",t):n})}fetchMembers(t){return this.portal.request(this.url+"/users",t)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}toJSON(){throw new Xe("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new T9({sourceJSON:t});return e.read(t),e}queryItems(t,e){let n=qa(us,t);const r=this.portal;return parseFloat(r.currentVersion)>5?(n=n||new us,r.queryPortal(`/content/groups/${this.id}/search`,n,"PortalItem",e)):(n=n?n.clone():new us,n.query="group:"+this.id+(n.query?" "+n.query:""),r.queryItems(n,e))}_fetchCategorySchemaSet(t,e){const n=this.portal;return n.fetchSelf(n.authMode,!0,e).then(r=>{const i=r.contentCategorySetsGroupQuery;if(i){const s=new us({disableExtraQuery:!0,num:1,query:i});return n.queryGroups(s,e)}throw new Xe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const i=r.results[0],s=new us({num:1,query:`typekeywords:"${t}"`});return i.queryItems(s,e)}throw new Xe("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",e).then(i=>{const s=i?.categorySchema;return s?.length?s:[]}):[])}};x([E()],Wi.prototype,"access",void 0),x([E({type:Date})],Wi.prototype,"created",void 0),x([E()],Wi.prototype,"description",void 0),x([E()],Wi.prototype,"id",void 0),x([E()],Wi.prototype,"isInvitationOnly",void 0),x([E({type:Date})],Wi.prototype,"modified",void 0),x([E()],Wi.prototype,"owner",void 0),x([E()],Wi.prototype,"portal",void 0),x([E()],Wi.prototype,"snippet",void 0),x([E()],Wi.prototype,"sortField",void 0),x([E()],Wi.prototype,"sortOrder",void 0),x([E()],Wi.prototype,"sourceJSON",void 0),x([E()],Wi.prototype,"tags",void 0),x([E()],Wi.prototype,"thumbnail",void 0),x([E({readOnly:!0})],Wi.prototype,"thumbnailUrl",null),x([E()],Wi.prototype,"title",void 0),x([E({readOnly:!0})],Wi.prototype,"url",null),Wi=T9=x([ue("esri.portal.PortalGroup")],Wi);let ny=class extends Kt{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};x([E()],ny.prototype,"nextQueryParams",void 0),x([E()],ny.prototype,"queryParams",void 0),x([E()],ny.prototype,"results",void 0),x([E()],ny.prototype,"total",void 0),ny=x([ue("esri.portal.PortalQueryResult")],ny);let wf=class extends qt{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new Xe("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};x([E({type:Date})],wf.prototype,"created",void 0),x([E()],wf.prototype,"id",void 0),x([E()],wf.prototype,"portal",void 0),x([E()],wf.prototype,"title",void 0),x([E({readOnly:!0})],wf.prototype,"url",null),x([E()],wf.prototype,"username",void 0),wf=x([ue("esri.portal.PortalFolder")],wf);var k9;let Vr=k9=class extends qt{constructor(t){super(t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.id=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.id}`:null}get url(){const t=this.portal?.restUrl;return t?`${t}/community/users/${this.id}`:null}addItem(t){const e=t&&t.item,n=t?.data,r=t?.folder,i={method:"post"};e&&(i.query=e.createPostQuery(),n!=null&&(typeof n=="string"?i.query.text=n:typeof n=="object"&&(i.query.text=JSON.stringify(n))));let s=this.userContentUrl;return r&&(s+="/"+(typeof r=="string"?r:r.id)),this.portal.request(s+"/addItem",i).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}async deleteItem(t,e=!1){let n=this.userContentUrl;t.ownerFolder&&(n+="/"+t.ownerFolder);const r=e?{permanentDelete:!0}:{};await this.portal.request(n+`/items/${t.id}/delete`,{method:"post",query:r}),t.id=null,t.portal=null}async deleteItems(t,e=!1){t=t.slice();const n=this.userContentUrl+"/deleteItems",r=[],i=t.map(s=>s.id);if(i.length){const s={method:"post",query:{items:i.join(","),permanentDelete:e}},o=await this.portal.request(n,s);for(const a of o.results){const l=t.find(h=>a.itemId===h.id),c=a.success;let u=null;c?(l.id=null,l.portal=null):a.error&&(u=new Xe("portal:delete-item-failed",a.error.message,a.error)),r.push({item:l,success:c,error:u})}}return r}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let n;return n=e&&e.folders?e.folders.map(r=>{const i=wf.fromJSON(r);return i.portal=this.portal,i}):[],n})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(n=>{const r=Wi.fromJSON(n);return r.portal=this.portal,r}):[],e})}async fetchItems(t){t??={};let e=this.userContentUrl??"";t.folder&&(e+="/"+t.folder.id);const{default:n}=await _e(()=>Promise.resolve().then(()=>bme),void 0),r={folders:!1,inRecycleBin:!!t.inRecycleBin||null,foldersContent:!(t.folder||!t.includeSubfolderItems)||null,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"},i=await this.portal.request(e,{query:r});let s;return i?.items?(s=i.items.map(o=>{const a=n.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(s.map(o=>o.load())),{items:s,nextStart:i.nextStart,total:i.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Wi({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new Xe("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(t,e){const n=this.userContentUrl,r=e?{folderID:typeof e=="string"?e:e.id}:null;await this.portal.request(n+`/items/${t.id}/restore`,{method:"post",query:r})}toJSON(){throw new Xe("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new k9({sourceJSON:t});return e.read(t),e}};x([E()],Vr.prototype,"access",void 0),x([E({type:Date})],Vr.prototype,"created",void 0),x([E()],Vr.prototype,"culture",void 0),x([E()],Vr.prototype,"description",void 0),x([E()],Vr.prototype,"email",void 0),x([E()],Vr.prototype,"favGroupId",void 0),x([E()],Vr.prototype,"fullName",void 0),x([E()],Vr.prototype,"id",void 0),x([E({type:Date})],Vr.prototype,"modified",void 0),x([E()],Vr.prototype,"orgId",void 0),x([E()],Vr.prototype,"portal",void 0),x([E()],Vr.prototype,"preferredView",void 0),x([E()],Vr.prototype,"privileges",void 0),x([E()],Vr.prototype,"region",void 0),x([E()],Vr.prototype,"role",void 0),x([E()],Vr.prototype,"roleId",void 0),x([E()],Vr.prototype,"sourceJSON",void 0),x([E()],Vr.prototype,"thumbnail",void 0),x([E({readOnly:!0})],Vr.prototype,"thumbnailUrl",null),x([E()],Vr.prototype,"units",void 0),x([E({readOnly:!0})],Vr.prototype,"userContentUrl",null),x([E({readOnly:!0})],Vr.prototype,"url",null),x([E()],Vr.prototype,"username",void 0),x([E()],Vr.prototype,"userLicenseTypeId",void 0),x([E()],Vr.prototype,"userType",void 0),Vr=k9=x([ue("esri.portal.PortalUser")],Vr);var ql;let NE;const Wee={PortalGroup:()=>Promise.resolve({default:Wi}),PortalItem:()=>_e(()=>Promise.resolve().then(()=>bme),void 0),PortalUser:()=>Promise.resolve({default:Vr})};var pd;let st=(pd=class extends u0(EI){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.g3DTilesGalleryGroupQuery=null,this.g3dTilesEnabled=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.default3DBasemapQuery=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.hasClassificationSchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=nr.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useDefault3dBasemap=!1,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){Hee.unregister(this),this.defaultBasemap=Di(this.defaultBasemap),this.defaultDevBasemap=Di(this.defaultDevBasemap),this.defaultVectorBasemap=Di(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=ii(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const n of e)nr.request.trustedServers.includes(n)||nr.request.trustedServers.push(n);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,n=!e||this.canSearchPublic;return this.id&&!n?` AND orgid:${this.id}`:null}get hasAPIKey(){return gje(this.restUrl)}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get loaded(){return super.loaded}get restUrl(){let e=this.url;if(e){const n=e.indexOf("/sharing");e=n>0?e.slice(0,n):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,n=this.thumbnail;return e&&n?this._normalizeSSL(e+"/portals/self/resources/"+n):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let n=null;return e&&(n=Vr.fromJSON(e),n.portal=this),n}load(e){const n=_e(async()=>{const{default:r}=await Promise.resolve().then(()=>oze);return{default:r}},void 0).then(({default:r})=>{mi(e),NE=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{if(!this.hasAPIKey&&Jr){const i=Jr;this.credential=i.findCredential(this.restUrl),this.credential||this.authMode!==ql.AUTH_MODE_AUTO&&this.authMode!==ql.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=i.on("credential-create",u9e(new WeakRef(this))),Hee.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(n),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),n=(await _e(async()=>{const{default:r}=await import("./ElevationLayer-B4dKtGIm.js");return{default:r}},__vite__mapDeps([19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]))).default;return e?e.map(r=>new n({id:r.id,url:r.url})):[]}async fetchBasemaps(e,n){const r=await this._fetchBasemaps(e,n);if(n?.include3d===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(e,n);r.unshift(...i)}return r}async fetchDefault3DBasemap(e){if(!this.useDefault3dBasemap||!this.default3DBasemapQuery||this.default3DBasemapQuery==="none")return null;const n=new us;n.query=this.default3DBasemapQuery,n.disableExtraQuery=!0;const r=(await this.queryItems(n,e)).results.find(i=>i.type==="Web Scene");return r?new NE({portalItem:r}):null}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(n=>n.categorySchema):ma(e)?Promise.reject(Cr()):Promise.resolve([])}async fetchClassificationSchema(e){return this.hasClassificationSchema?this.request(this.restUrl+"/portals/self/classification/classificationSchema",e).then(n=>n.classificationSchema):null}fetchFeaturedGroups(e){const n=this.featuredGroups,r=new us({num:100,sortField:"title"});if(n?.length){const i=[];for(const s of n)i.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(s=>s.results)}return ma(e)?Promise.reject(Cr()):Promise.resolve([])}fetchRegions(e){const n=this.user?.culture||this.culture||du();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:n}})}fetchSettings(e){const n=this.user?.culture||this.culture||du();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:n}})}static getDefault(){return l9e(()=>new ql)}queryGroups(e,n){return this.queryPortal("/community/groups",e,"PortalGroup",n)}queryItems(e,n){return this.queryPortal("/search",e,"PortalItem",n)}queryUsers(e,n){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",n)}fetchSelf(e=this.authMode,n=!1,r){const i=this.restUrl+"/portals/self",s={authMode:e,query:{culture:du().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),n&&(s.query.default=!0),this.request(i,s)}queryPortal(e,n,r,i){const s=qa(us,n),o=a=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...i}).then(l=>{const c=s.clone();return c.start=l.nextStart,new ny({nextQueryParams:c,queryParams:s,total:l.total,results:ql._resultsToTypedArray(a,{portal:this},l,i)})}).then(l=>Promise.all(l.results.map(c=>typeof c.when=="function"?c.when():l)).then(()=>l,c=>(Ffe(c),l)));return r&&Wee[r]?Wee[r]().then(({default:a})=>(mi(i),o(a))):o()}signIn(){if(this.hasAPIKey)return this.load().then(()=>{if(!this.user)throw new Xe("portal:not-authenticated","Unable to authenticate user. Portal.user is missing")});if(this.authMode===ql.AUTH_MODE_ANONYMOUS||this.authMode===ql.AUTH_MODE_NO_PROMPT&&!Jr)return Promise.reject(new Xe("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=n=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(n||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=n,this.fetchSelf("immediate"))):this.user&&this.credential===n?null:(this.credential=n,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return Jr?Jr.getCredential(this.restUrl,{prompt:this.authMode!==ql.AUTH_MODE_NO_PROMPT}).then(n=>e(n)):e(this.credential)}normalizeUrl(e){const n=this.credential?.token;return this._normalizeSSL(n?e+(e.includes("?")?"&":"?")+"token="+n:e)}requestToTypedArray(e,n,r){return this.request(e,n).then(i=>{const s=ql._resultsToTypedArray(r,{portal:this},i);return Promise.all(s.map(o=>typeof o.when=="function"?o.when():i)).then(()=>s,()=>s)})}request(e,n={}){const r={f:"json",...n.query},{authMode:i=this.authMode===ql.AUTH_MODE_ANONYMOUS||this.authMode===ql.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:o=!1,method:a="auto",responseType:l="json",signal:c}=n,u={authMode:i,body:s,cacheBust:o,method:a,query:r,responseType:l,timeout:0,signal:c};return n.withCredentials&&(u.withCredentials=!0),ns(this._normalizeSSL(e),u).then(h=>h.data)}toJSON(){throw new Xe("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new ql({sourceJSON:e})}_getHelperService(e){const n=this.helperServices?.[e];if(!n)throw new Xe("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return n}async _fetchBasemaps(e,n){const r=new us;r.query=e||(n9()?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const i=await this.queryGroups(r,n);if(!i.total)return[];const s=i.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const o=await s.queryItems(r,n);return o.total?o.results.filter(a=>a.type==="Web Map").map(a=>new NE({portalItem:a})):[]}async _fetchBasemaps3D(e,n){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];if(n9())return[];const i=new us({query:r,disableExtraQuery:!0}),s=await this.queryGroups(i,n);if(!s.total)return[];const o=s.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=o.sortField||"name",i.sortOrder=o.sortOrder||"desc";const a=await o.queryItems(i,n);return a.total?a.results.filter(l=>l.type==="Web Scene").map(l=>new NE({portalItem:l})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const n=NE.fromJSON(e);return n.portalItem={portal:this},n}return null}static _resultsToTypedArray(e,n,r,i){let s;if(r){const o=i!=null?i.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||n)&&(s=s.map(a=>{const l=Object.assign(e?e.fromJSON(a):a,n);return typeof l.load=="function"&&l.load(o),l}))}else s=[];return s}},ql=pd,pd.AUTH_MODE_ANONYMOUS="anonymous",pd.AUTH_MODE_AUTO="auto",pd.AUTH_MODE_IMMEDIATE="immediate",pd.AUTH_MODE_NO_PROMPT="no-prompt",pd);x([E()],st.prototype,"access",void 0),x([E()],st.prototype,"allSSL",void 0),x([E()],st.prototype,"authMode",void 0),x([E()],st.prototype,"authorizedCrossOriginDomains",void 0),x([cr("authorizedCrossOriginDomains")],st.prototype,"readAuthorizedCrossOriginDomains",null),x([E()],st.prototype,"basemapGalleryGroupQuery",void 0),x([E({json:{name:"3DBasemapGalleryGroupQuery"}})],st.prototype,"basemapGalleryGroupQuery3D",void 0),x([E({json:{name:"g3DTilesGalleryGroupQuery"}})],st.prototype,"g3DTilesGalleryGroupQuery",void 0),x([E({json:{name:"g3dTilesEnabled"}})],st.prototype,"g3dTilesEnabled",void 0),x([E()],st.prototype,"bingKey",void 0),x([E()],st.prototype,"canListApps",void 0),x([E()],st.prototype,"canListData",void 0),x([E()],st.prototype,"canListPreProvisionedItems",void 0),x([E()],st.prototype,"canProvisionDirectPurchase",void 0),x([E()],st.prototype,"canSearchPublic",void 0),x([E()],st.prototype,"canShareBingPublic",void 0),x([E()],st.prototype,"canSharePublic",void 0),x([E()],st.prototype,"canSignInArcGIS",void 0),x([E()],st.prototype,"canSignInIDP",void 0),x([E()],st.prototype,"colorSetsGroupQuery",void 0),x([E()],st.prototype,"commentsEnabled",void 0),x([E({type:Date})],st.prototype,"created",void 0),x([E()],st.prototype,"credential",void 0),x([E()],st.prototype,"culture",void 0),x([E()],st.prototype,"currentVersion",void 0),x([E()],st.prototype,"customBaseUrl",void 0),x([E()],st.prototype,"default3DBasemapQuery",void 0),x([E()],st.prototype,"defaultBasemap",void 0),x([cr("defaultBasemap")],st.prototype,"readDefaultBasemap",null),x([E()],st.prototype,"defaultDevBasemap",void 0),x([cr("defaultDevBasemap")],st.prototype,"readDefaultDevBasemap",null),x([E({type:Vn})],st.prototype,"defaultExtent",void 0),x([E()],st.prototype,"defaultVectorBasemap",void 0),x([cr("defaultVectorBasemap")],st.prototype,"readDefaultVectorBasemap",null),x([E()],st.prototype,"description",void 0),x([E()],st.prototype,"devBasemapGalleryGroupQuery",void 0),x([E()],st.prototype,"eueiEnabled",void 0),x([E({readOnly:!0})],st.prototype,"extraQuery",null),x([E()],st.prototype,"featuredGroups",void 0),x([E()],st.prototype,"featuredItemsGroupQuery",void 0),x([E()],st.prototype,"galleryTemplatesGroupQuery",void 0),x([E()],st.prototype,"layoutGroupQuery",void 0),x([E()],st.prototype,"livingAtlasGroupQuery",void 0),x([E({readOnly:!0})],st.prototype,"hasAPIKey",null),x([E()],st.prototype,"hasCategorySchema",void 0),x([E()],st.prototype,"hasClassificationSchema",void 0),x([E()],st.prototype,"helpBase",void 0),x([E()],st.prototype,"helperServices",void 0),x([E()],st.prototype,"helpMap",void 0),x([E()],st.prototype,"homePageFeaturedContent",void 0),x([E()],st.prototype,"homePageFeaturedContentCount",void 0),x([E()],st.prototype,"httpPort",void 0),x([E()],st.prototype,"httpsPort",void 0),x([E()],st.prototype,"id",void 0),x([E()],st.prototype,"ipCntryCode",void 0),x([E({readOnly:!0})],st.prototype,"isOrganization",null),x([E()],st.prototype,"isPortal",void 0),x([E()],st.prototype,"isReadOnly",void 0),x([E({readOnly:!0})],st.prototype,"itemPageUrl",null),x([E()],st.prototype,"layerTemplatesGroupQuery",void 0),x([E()],st.prototype,"maxTokenExpirationMinutes",void 0),x([E({type:Date})],st.prototype,"modified",void 0),x([E()],st.prototype,"name",void 0),x([E()],st.prototype,"portalHostname",void 0),x([E()],st.prototype,"portalMode",void 0),x([E()],st.prototype,"portalProperties",void 0),x([E()],st.prototype,"region",void 0),x([E()],st.prototype,"recycleBinEnabled",void 0),x([E({readOnly:!0})],st.prototype,"restUrl",null),x([E()],st.prototype,"rotatorPanels",void 0),x([E()],st.prototype,"showHomePageDescription",void 0),x([E()],st.prototype,"sourceJSON",void 0),x([E()],st.prototype,"staticImagesUrl",void 0),x([E({json:{name:"2DStylesGroupQuery"}})],st.prototype,"stylesGroupQuery2d",void 0),x([E({json:{name:"stylesGroupQuery"}})],st.prototype,"stylesGroupQuery3d",void 0),x([E()],st.prototype,"supportsHostedServices",void 0),x([E()],st.prototype,"symbolSetsGroupQuery",void 0),x([E()],st.prototype,"templatesGroupQuery",void 0),x([E()],st.prototype,"thumbnail",void 0),x([E({readOnly:!0})],st.prototype,"thumbnailUrl",null),x([E()],st.prototype,"units",void 0),x([E()],st.prototype,"url",void 0),x([E()],st.prototype,"urlKey",void 0),x([cr("urlKey")],st.prototype,"readUrlKey",null),x([E()],st.prototype,"user",void 0),x([cr("user")],st.prototype,"readUser",null),x([E()],st.prototype,"use3dBasemaps",void 0),x([E()],st.prototype,"useDefault3dBasemap",void 0),x([E()],st.prototype,"useStandardizedQuery",void 0),x([E()],st.prototype,"useVectorBasemaps",void 0),x([E()],st.prototype,"vectorBasemapGalleryGroupQuery",void 0),st=ql=x([ue("esri.portal.Portal")],st);const Hee=new FinalizationRegistry(t=>{t.remove()});function u9e(t){const e=Jr;return()=>{const n=t.deref();n&&e.findCredential(n.restUrl)&&n.signIn().catch(()=>{})}}let bf=class extends Kt{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e?.portalItem&&e.path?{...e,path:qee(e.path,e.portalItem)}:e}set path(e){e!=null&&Tl(e)?kt.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return qee(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",n){const r=this.cdnUrl;if(r==null)throw new Xe("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(r,{responseType:e,query:{token:this.portalItem.apiKey,_ts:n?.cacheBust?Date.now():null},signal:n?.signal})}async update(e,n){const{addOrUpdateResources:r}=await _e(()=>import("./resourceUtils-DHk1-Ej4.js"),[]);return await r(this.portalItem,[{resource:this,content:e,compress:n?.compress,access:n?.access}],"update",n),this}hasPath(){return this.path!=null}};function qee(t,e){return t==null?t:(t=t.replace(/^\/+/,""),e!=null&&Tl(t)&&(t=mB(t,e.itemUrl)),t?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}x([E()],bf.prototype,"portalItem",void 0),x([E({type:String,value:null})],bf.prototype,"path",null),x([qs("path")],bf.prototype,"_castPath",null),x([E({type:String,readOnly:!0})],bf.prototype,"url",null),x([E({type:String,readOnly:!0})],bf.prototype,"cdnUrl",null),x([E({type:String,readOnly:!0})],bf.prototype,"itemRelativeUrl",null),bf=x([ue("esri.portal.PortalItemResource")],bf);let Uy=class extends Kt{constructor(e){super(e),this.created=null,this.rating=null}};x([E({type:Date})],Uy.prototype,"created",void 0),x([E()],Uy.prototype,"rating",void 0),Uy=x([ue("esri.portal.PortalRating")],Uy);var ry;const h9e=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Knowledge Graph Layer","Map Service","Media Layer","Scene Service","Stream Service","Video Service","Vector Tile Service","WCS","WFS","WMS","WMTS"]),d9e=new Set(["KML","GeoJson","CSV"]);let xn=ry=class extends u0(EI){static from(t){return jO(ry,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.classification=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let n=t;return t==="Feature Service"||t==="Feature Collection"?n=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?n=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?n="Scene Layer":t==="Video Service"?n="Video Layer":t==="Scene Package"?n="Scene Layer Package":t==="Stream Service"?n="Feature Layer":t==="Geoprocessing Service"?n=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geoenrichment Service"?n="GeoEnrichment Service":t==="Geocoding Service"?n="Locator":t==="Microsoft Powerpoint"?n="Microsoft PowerPoint":t==="GeoJson"?n="GeoJSON":t==="Globe Service"?n="Globe Layer":t==="Vector Tile Service"?n="Tile Layer":t==="netCDF"?n="NetCDF":t==="Map Service"?n=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t?.toLowerCase().includes("add in")?n=t.replaceAll(/(add in)/gi,"Add-In"):t==="datastore catalog service"?n="Big Data File Share":t==="Compact Tile Package"?n="Tile Package (tpkx)":t==="Raster function template"?n="Raster Function Template":t==="OGCFeatureServer"?n="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?n="Instant App":t==="Insights Page"?n="Insights Report":t==="Excalibur Imagery Project"?n="Excalibur Project":t==="3DTiles Service"?n="3D tiles layer":t==="3DTiles Package"&&(n="3D tiles package"),n}readExtent(t){return t&&t.length?new Vn(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type?.toLowerCase()||"",e=this.typeKeywords||[],n="esri/images/portal/",r="16";let i,s=!1,o=!1,a=!1,l=!1,c=!1,u=!1,h=!1,f=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),c=e.includes("Spatiotemporal"),u=e.includes("UtilityNetwork"),i=c&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":c?"spatiotemporal":u?"utilitynetwork":s?"featureshosted":"features"):t==="map service"||t==="wms"||t==="wmts"?(c=e.includes("Spatiotemporal"),h=e.includes("Relational"),i=c||h?"mapimages":s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages"):i=t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="video service"?e.includes("Live Stream")?"livestreamvideolayer":"videolayer":t==="geoprocessing service"?e.includes("Web Tool")?"tool":"layers":t==="geodata service"?"geodataservice":t==="3dtiles service"?e.includes("3DObject")?"3dobjecttileslayer":e.includes("IntegratedMesh")?"integratedmeshtileslayer":e.includes("GaussianSplat")?"gaussiansplatlayer":"3dtileslayer":"layers"):t==="web map"||t==="cityengine web scene"?i="maps":t==="web scene"?i=e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?i="instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?i="apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?i="mapsgray":t==="service definition"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="netcdf"||t==="administrative report"?i="datafiles":t==="360 vr experience"?i="360vr":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?i="appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?i="addindesktop":t==="pdf"?i="pdf":t==="microsoft word"?i="word":t==="microsoft excel"?i="excel":t==="microsoft powerpoint"?i="ppt":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?i="datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?i="toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?i="layersgray":t==="analysis model"?i="analysismodel":t==="scene package"?i="scenepackage":t==="3dtiles package"?i="3dtileslayerpackage":t==="3dtiles service"?i="3dtileslayer":t==="mobile scene package"?i="mobilescenepackage":t==="tile package"||t==="compact tile package"?i="tilepackage":t==="task file"?i="taskfile":t==="report template"?i="report-template":t==="statistical data collection"?i="statisticaldatacollection":t==="insights workbook"?i="workbook":t==="insights model"?i="insightsmodel":t==="insights page"?i="insightspage":t==="insights theme"?i="insightstheme":t==="hub initiative"?i="hubinitiative":t==="hub page"?i="hubpage":t==="hub site application"?i="hubsite":t==="hub event"?i="hubevent":t==="hub project"?i="hubproject":t==="relational database connection"?i="relationaldatabaseconnection":t==="big data file share"?i="datastorecollection":t==="image collection"?i="imagecollection":t==="desktop style"?i="desktopstyle":t==="style"?i=e.includes("Dictionary")?"dictionarystyle":"style":t==="dashboard"?i="dashboard":t==="raster function template"?i="rasterprocessingtemplate":t==="vector tile package"?i="vectortilepackage":t==="ortho mapping project"?i="orthomappingproject":t==="ortho mapping template"?i="orthomappingtemplate":t==="solution"?i="solutions":t==="geopackage"?i="geopackage":t==="deep learning package"?i="deeplearningpackage":t==="real time analytic"?i="realtimeanalytics":t==="reality mapping project"?i="realitymappingproject":t==="big data analytic"?i="bigdataanalytics":t==="feed"?i="feed":t==="excalibur imagery project"?i="excaliburimageryproject":t==="notebook"?i="notebook":t==="storymap"?i="storymap":t==="survey123 add in"?i="survey123addin":t==="mission"?i="mission":t==="mission report"?i="missionreport":t==="mission template"?i="missiontemplate":t==="quickcapture project"?i="quickcaptureproject":t==="pro report"?i="proreport":t==="pro report template"?i="proreporttemplate":t==="urban model"?i="urbanmodel":t==="urban project"?i="urbanproject":t==="web experience"?i="experiencebuilder":t==="web experience template"?i="webexperiencetemplate":t==="experience builder widget"?i="experiencebuilderwidget":t==="experience builder widget package"?i="experiencebuilderwidgetpackage":t==="workflow"?i="workflow":t==="kernel gateway connection"?i="kernelgatewayconnection":t==="insights script"?i="insightsscript":t==="hub initiative template"?i="hubinitiativetemplate":t==="storymap theme"?i="storymaptheme":t==="knowledge graph"?i="knowledgegraph":t==="knowledge graph layer"?i="knowledgegraphlayer":t==="knowledge studio project"?i="knowledgestudio":t==="native application"?i="nativeapp":t==="native application installer"?i="nativeappinstaller":t==="web link chart"?i="linkchart":t==="knowledge graph web investigation"?i="investigation":t==="ogcfeatureserver"?i="features":t==="pro presentation"?i="propresentation":t==="pro project"?i="proproject":t==="insights workbook package"?i="insightsworkbookpackage":t==="apache parquet"?i="apacheparquet":t==="notebook code snippet library"?i="notebookcodesnippets":t==="suitability model"?i="suitabilitymodel":t==="esri classifier definition"?i="classifierdefinition":t==="esri classification schema"?i="classificationschema":t==="insights data engineering workbook"?i="dataengineeringworkbook":t==="insights data engineering model"?i="dataengineeringmodel":t==="deep learning studio project"?i="deeplearningproject":t==="discussion"?i="discussion":t==="allsource project"?i="allsourceproject":t==="api key"?i="apikey":t==="data pipeline"?i="datapipelines":t==="group layer"?(f=e.includes("Map"),i=f?"layergroup2d":"layergroup"):i=t==="media layer"?"onlinemedialayer":t==="form"?e.includes("Survey123")?"survey":"datafilesgray":t==="csv"?"csv":t==="image"?"image":t==="xr experience"?"xrexperience":"maps",i?Hi(n+i+r+".png"):null}get isLayer(){return this.type!=null&&h9e.has(this.type)}get itemCdnUrl(){return wB(this.itemUrl)}get itemPageUrl(){const t=this.portal?.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){const t=this.portal?.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get loaded(){return super.loaded}get thumbnailUrl(){const t=this.itemUrl,e=this.thumbnail;return t&&e?this.portal?.normalizeUrl(`${t}/info/${e}?f=json`)??null:null}get userItemUrl(){const t=this.portal?.restUrl;if(!t)return null;const e=this.owner||this.portal?.user?.id;return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=st.getDefault()),n=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:t!=null?t.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(n),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}},n=t instanceof Uy?t.rating:t;return n==null||isNaN(n)||typeof t!="number"||(e.query.rating=n),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new Uy({rating:n,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:Ze(this.applicationProxies),avgRating:this.avgRating,categories:Ze(this.categories),classification:Ze(this.classification),created:Ze(this.created),culture:this.culture,description:this.description,extent:Ze(this.extent),groupCategories:Ze(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Ze(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Ze(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Ze(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Ze(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new ry({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const e of["tags","typeKeywords","categories"])t[e]=t[e]?.join(", ");for(const e of["extent","classification"]){const n=t[e];n&&(t[e]=JSON.stringify(n))}return t}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return this.portal.request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new Uy(e)):null}fetchRelatedItems(t,e){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},ry)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.applicationProxies&&!Object.hasOwn(t,"appProxies")&&(this.applicationProxies=null),this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t?.data,n={method:"post"};n.query=this.createPostQuery();for(const r in n.query)n.query[r]===null&&(n.query[r]="");return n.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?n.query.text=e:typeof e=="object"&&(n.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,n).then(()=>this.reload())}):Promise.reject(new Xe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new Xe("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:n}=this;await e.signIn();const{copyResources:r,folder:i,tags:s,title:o}=t||{},a={method:"post",query:{copyPrivateResources:r==="all",folder:typeof i=="string"?i:i?.id,includeResources:!!r,tags:s?.join(","),title:o}},{itemId:l}=await e.request(`${n}/copy`,a);return new ry({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,n=t.filename,r={method:"post"};if(typeof e=="string")gv(e)?r.query={data:e}:r.query={url:tu(e)},n!=null&&(r.query.filename=n);else{const i=new FormData;n!=null?i.append("file",e,n):i.append("file",e),r.body=i}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,r).then(()=>this.reload())}):Promise.reject(new Xe("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){const{fetchResources:n}=await _e(()=>import("./resourceUtils-DHk1-Ej4.js"),[]);return n(this,t,e)}async addResource(t,e,n){const{addOrUpdateResources:r}=await _e(()=>import("./resourceUtils-DHk1-Ej4.js"),[]);return t.portalItem=this,await r(this,[{resource:t,content:e,compress:n?.compress,access:n?.access}],"add",n),t}async removeResource(t,e){const{removeResource:n}=await _e(()=>import("./resourceUtils-DHk1-Ej4.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new Xe("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return n(this,t,e)}async removeAllResources(t){const{removeAllResources:e}=await _e(()=>import("./resourceUtils-DHk1-Ej4.js"),[]);return e(this,t)}resourceFromPath(t){return new bf({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:Ze(this.categories),classification:Ze(this.classification),created:this.created?.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Ze(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Ze(this.typeKeywords),url:this.url};return d6e(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new ry({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};x([E({type:["private","shared","org","public"]})],xn.prototype,"access",void 0),x([E()],xn.prototype,"accessInformation",void 0),x([E({type:String})],xn.prototype,"apiKey",void 0),x([E({json:{read:{source:"appProxies"}}})],xn.prototype,"applicationProxies",void 0),x([E()],xn.prototype,"avgRating",void 0),x([E()],xn.prototype,"categories",void 0),x([E()],xn.prototype,"classification",void 0),x([E({type:Date})],xn.prototype,"created",void 0),x([E()],xn.prototype,"culture",void 0),x([E()],xn.prototype,"description",void 0),x([E({readOnly:!0})],xn.prototype,"displayName",null),x([E({type:Vn})],xn.prototype,"extent",void 0),x([cr("extent")],xn.prototype,"readExtent",null),x([E()],xn.prototype,"groupCategories",void 0),x([E({readOnly:!0})],xn.prototype,"iconUrl",null),x([E()],xn.prototype,"id",void 0),x([E({readOnly:!0})],xn.prototype,"isLayer",null),x([E({type:Boolean,readOnly:!0})],xn.prototype,"isOrgItem",void 0),x([E()],xn.prototype,"itemControl",void 0),x([E({readOnly:!0})],xn.prototype,"itemPageUrl",null),x([E({readOnly:!0})],xn.prototype,"itemUrl",null),x([E()],xn.prototype,"licenseInfo",void 0),x([E({type:Date})],xn.prototype,"modified",void 0),x([E()],xn.prototype,"name",void 0),x([E()],xn.prototype,"numComments",void 0),x([E()],xn.prototype,"numRatings",void 0),x([E()],xn.prototype,"numViews",void 0),x([E()],xn.prototype,"owner",void 0),x([E()],xn.prototype,"ownerFolder",void 0),x([E({type:st})],xn.prototype,"portal",void 0),x([E()],xn.prototype,"screenshots",void 0),x([E()],xn.prototype,"size",void 0),x([E()],xn.prototype,"snippet",void 0),x([E()],xn.prototype,"sourceJSON",void 0),x([E({type:String})],xn.prototype,"sourceUrl",void 0),x([E({type:String})],xn.prototype,"spatialReference",void 0),x([E()],xn.prototype,"tags",void 0),x([E()],xn.prototype,"thumbnail",void 0),x([E({readOnly:!0})],xn.prototype,"thumbnailUrl",null),x([E()],xn.prototype,"title",void 0),x([E()],xn.prototype,"type",void 0),x([E()],xn.prototype,"typeKeywords",void 0),x([E({type:String,json:{read(t,e){if(d9e.has(e.type)){const n=this.portal?.restUrl;t||=n&&this.id?`${n}/content/items/${this.id}/data`:null}return t}}})],xn.prototype,"url",void 0),x([E({readOnly:!0})],xn.prototype,"userItemUrl",null),xn=ry=x([ue("esri.portal.PortalItem")],xn);const bme=Object.freeze(Object.defineProperty({__proto__:null,get default(){return xn}},Symbol.toStringTag,{value:"Module"})),Eme={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:"no",nl:!0,no:!0,nn:"no",pl:!0,pt:"pt-BR","pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,zh:"zh-CN","zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function f9e(t){return t in Eme}function Kee(t){if(f9e(t)){const e=Eme[t];return e===!0?t:e}return null}const mS=[],lw=new Map;function Yee(t){for(const e of lw.keys())kme(t.pattern,e)&&lw.delete(e)}function p9e(t){return mS.includes(t)||(Yee(t),mS.unshift(t)),Zn(()=>{const e=mS.indexOf(t);e>-1&&(mS.splice(e,1),Yee(t))})}async function Sme(t){const e=du();lw.has(t)||lw.set(t,m9e(t,e));const n=lw.get(t);return n&&await g9e.add(n),n}function Tme(t){const e=qB(t);return e?Kee(t)??Kee(e):null}async function m9e(t,e){const n=[];for(const r of mS)if(kme(r.pattern,t))try{return await r.fetchMessageBundle(t,e)}catch(i){n.push(i)}throw n.length?new Xe("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:n}):new Xe("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function kme(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}KB(()=>{lw.clear()});const g9e=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=xc())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function y9e(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t.includes("-3d")?t.slice(0,t.indexOf("-3d")):t,n=await Sme("esri/t9n/basemaps");return n[t]||n[e]}const A9={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-hillshade",url:"https://services.arcgisonline.com/ArcGIS/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1},{id:"terrain-base",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/33064a20de0c48d2bb61efa8faca93a8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Terrain Base"},{id:"terrain-reference",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/14fbc125ccc9488888b014db09f35f67/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Reference Reference",isReference:!0}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/94329802cbfa44a18f423e6f1a0b875c/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Hi("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Hi("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Hi("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Hi("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Hi("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Trees_v1/SceneServer",itemId:"9d3d89d42cfe4e2c9d108a2f0d518406",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Open3D_Buildings_v1/SceneServer",itemId:"cd33b09dde0a419c986ca1a78a5fc06d",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Hi("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/Esri3D_Buildings_v1/SceneServer",itemId:"b8fec5af7dfe4866b1b8ac2d2800f282",layerType:"ArcGISSceneServiceLayer"}]}},Fd="system",YB="unknown",qk="UTC",v9e=Intl.DateTimeFormat().resolvedOptions().timeZone,Xee=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class _v extends Error{}class _9e extends _v{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class x9e extends _v{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class w9e extends _v{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Px extends _v{}class Ame extends _v{constructor(e){super(`Invalid unit ${e}`)}}class na extends _v{}class ym extends _v{constructor(){super("Zone is an abstract class")}}const Rt="numeric",wh="short",gc="long",iN={year:Rt,month:Rt,day:Rt},Ime={year:Rt,month:wh,day:Rt},b9e={year:Rt,month:wh,day:Rt,weekday:wh},Pme={year:Rt,month:gc,day:Rt},Cme={year:Rt,month:gc,day:Rt,weekday:gc},Rme={hour:Rt,minute:Rt},Mme={hour:Rt,minute:Rt,second:Rt},Nme={hour:Rt,minute:Rt,second:Rt,timeZoneName:wh},Ome={hour:Rt,minute:Rt,second:Rt,timeZoneName:gc},Lme={hour:Rt,minute:Rt,hourCycle:"h23"},Dme={hour:Rt,minute:Rt,second:Rt,hourCycle:"h23"},jme={hour:Rt,minute:Rt,second:Rt,hourCycle:"h23",timeZoneName:wh},$me={hour:Rt,minute:Rt,second:Rt,hourCycle:"h23",timeZoneName:gc},Fme={year:Rt,month:Rt,day:Rt,hour:Rt,minute:Rt},Vme={year:Rt,month:Rt,day:Rt,hour:Rt,minute:Rt,second:Rt},zme={year:Rt,month:wh,day:Rt,hour:Rt,minute:Rt},Gme={year:Rt,month:wh,day:Rt,hour:Rt,minute:Rt,second:Rt},E9e={year:Rt,month:wh,day:Rt,weekday:wh,hour:Rt,minute:Rt},Ume={year:Rt,month:gc,day:Rt,hour:Rt,minute:Rt,timeZoneName:wh},Bme={year:Rt,month:gc,day:Rt,hour:Rt,minute:Rt,second:Rt,timeZoneName:wh},Wme={year:Rt,month:gc,day:Rt,weekday:gc,hour:Rt,minute:Rt,timeZoneName:gc},Hme={year:Rt,month:gc,day:Rt,weekday:gc,hour:Rt,minute:Rt,second:Rt,timeZoneName:gc};class TI{get type(){throw new ym}get name(){throw new ym}get ianaName(){return this.name}get isUniversal(){throw new ym}offsetName(e,n){throw new ym}formatOffset(e,n){throw new ym}offset(e){throw new ym}equals(e){throw new ym}get isValid(){throw new ym}}let zj=null;class HO extends TI{static get instance(){return zj===null&&(zj=new HO),zj}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return rge(e,n,r)}formatOffset(e,n){return _T(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const I9=new Map;function S9e(t){let e=I9.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),I9.set(t,e)),e}const T9e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function k9e(t,e){const n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,a,l,c,u]=r;return[o,i,s,a,l,c,u]}function A9e(t,e){const n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){const{type:s,value:o}=n[i],a=T9e[s];s==="era"?r[a]=o:kn(a)||(r[a]=parseInt(o,10))}return r}const Gj=new Map;class bh extends TI{static create(e){let n=Gj.get(e);return n===void 0&&Gj.set(e,n=new bh(e)),n}static resetCache(){Gj.clear(),I9.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=bh.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return rge(e,n,r,this.name)}formatOffset(e,n){return _T(this.offset(e),n)}offset(e){if(!this.valid)return NaN;const n=new Date(e);if(isNaN(n))return NaN;const r=S9e(this.name);let[i,s,o,a,l,c,u]=r.formatToParts?A9e(r,n):k9e(r,n);a==="BC"&&(i=-Math.abs(i)+1);const f=KO({year:i,month:s,day:o,hour:l===24?0:l,minute:c,second:u,millisecond:0});let g=+n;const y=g%1e3;return g-=y>=0?y:1e3+y,(f-g)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let Zee={};function I9e(t,e={}){const n=JSON.stringify([t,e]);let r=Zee[n];return r||(r=new Intl.ListFormat(t,e),Zee[n]=r),r}const P9=new Map;function C9(t,e={}){const n=JSON.stringify([t,e]);let r=P9.get(n);return r===void 0&&(r=new Intl.DateTimeFormat(t,e),P9.set(n,r)),r}const R9=new Map;function P9e(t,e={}){const n=JSON.stringify([t,e]);let r=R9.get(n);return r===void 0&&(r=new Intl.NumberFormat(t,e),R9.set(n,r)),r}const M9=new Map;function C9e(t,e={}){const{base:n,...r}=e,i=JSON.stringify([t,r]);let s=M9.get(i);return s===void 0&&(s=new Intl.RelativeTimeFormat(t,e),M9.set(i,s)),s}let gS=null;function R9e(){return gS||(gS=new Intl.DateTimeFormat().resolvedOptions().locale,gS)}const N9=new Map;function qme(t){let e=N9.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),N9.set(t,e)),e}const O9=new Map;function M9e(t){let e=O9.get(t);if(!e){const n=new Intl.Locale(t);e="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,"minimalDays"in e||(e={...Kme,...e}),O9.set(t,e)}return e}function N9e(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=C9(t).resolvedOptions(),i=t}catch{const l=t.substring(0,n);r=C9(l).resolvedOptions(),i=l}const{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function O9e(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function L9e(t){const e=[];for(let n=1;n<=12;n++){const r=dn.utc(2009,n,1);e.push(t(r))}return e}function D9e(t){const e=[];for(let n=1;n<=7;n++){const r=dn.utc(2016,11,13+n);e.push(t(r))}return e}function FC(t,e,n,r){const i=t.listingMode();return i==="error"?null:i==="en"?n(e):r(e)}function j9e(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||qme(t.locale).numberingSystem==="latn"}class $9e{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;const{padTo:i,floor:s,...o}=r;if(!n||Object.keys(o).length>0){const a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=P9e(e,a)}}format(e){if(this.inf){const n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{const n=this.floor?Math.floor(e):eW(e,3);return Es(n,this.padTo)}}}class F9e{constructor(e,n,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&bh.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=C9(n,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(n=>{if(n.type==="timeZoneName"){const r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...n,value:r}}else return n}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class V9e{constructor(e,n,r){this.opts={style:"long",...r},!n&&tge()&&(this.rtf=C9e(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):l7e(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}}const Kme={firstDay:1,minimalDays:4,weekend:[6,7]};class Dr{static fromOpts(e){return Dr.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,n,r,i,s=!1){const o=e||Yi.defaultLocale,a=o||(s?"en-US":R9e()),l=n||Yi.defaultNumberingSystem,c=r||Yi.defaultOutputCalendar,u=D9(i)||Yi.defaultWeekSettings;return new Dr(a,l,c,u,o)}static resetCache(){gS=null,P9.clear(),R9.clear(),M9.clear(),N9.clear(),O9.clear()}static fromObject({locale:e,numberingSystem:n,outputCalendar:r,weekSettings:i}={}){return Dr.create(e,n,r,i)}constructor(e,n,r,i,s){const[o,a,l]=N9e(e);this.locale=o,this.numberingSystem=n||a||null,this.outputCalendar=r||l||null,this.weekSettings=i,this.intl=O9e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=j9e(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Dr.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,D9(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1){return FC(this,e,oge,()=>{const r=this.intl==="ja"||this.intl.startsWith("ja-");n&=!r;const i=n?{month:e,day:"numeric"}:{month:e},s=n?"format":"standalone";if(!this.monthsCache[s][e]){const o=r?a=>this.dtFormatter(a,i).format():a=>this.extract(a,i,"month");this.monthsCache[s][e]=L9e(o)}return this.monthsCache[s][e]})}weekdays(e,n=!1){return FC(this,e,cge,()=>{const r=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=n?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=D9e(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return FC(this,void 0,()=>uge,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[dn.utc(2016,11,13,9),dn.utc(2016,11,13,19)].map(n=>this.extract(n,e,"dayperiod"))}return this.meridiemCache})}eras(e){return FC(this,e,hge,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[dn.utc(-40,1,1),dn.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,n,r){const i=this.dtFormatter(e,n),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new $9e(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new F9e(e,this.intl,n)}relFormatter(e={}){return new V9e(this.intl,this.isEnglish(),e)}listFormatter(e={}){return I9e(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||qme(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:nge()?M9e(this.locale):Kme}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Uj=null;class ha extends TI{static get utcInstance(){return Uj===null&&(Uj=new ha(0)),Uj}static instance(e){return e===0?ha.utcInstance:new ha(e)}static parseSpecifier(e){if(e){const n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new ha(YO(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${_T(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${_T(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return _T(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class z9e extends TI{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Ym(t,e){if(kn(t)||t===null)return e;if(t instanceof TI)return t;if(q9e(t)){const n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?HO.instance:n==="utc"||n==="gmt"?ha.utcInstance:ha.parseSpecifier(n)||bh.create(t)}else return Ag(t)?ha.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new z9e(t)}const XB={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},Jee={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},G9e=XB.hanidec.replace(/[\[|\]]/g,"").split("");function U9e(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);if(t[n].search(XB.hanidec)!==-1)e+=G9e.indexOf(t[n]);else for(const i in Jee){const[s,o]=Jee[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}const L9=new Map;function B9e(){L9.clear()}function Du({numberingSystem:t},e=""){const n=t||"latn";let r=L9.get(n);r===void 0&&(r=new Map,L9.set(n,r));let i=r.get(e);return i===void 0&&(i=new RegExp(`${XB[n]}${e}`),r.set(e,i)),i}let Qee=()=>Date.now(),ete="system",tte=null,nte=null,rte=null,ite=60,ste,ote=null,Yi=class{static get now(){return Qee}static set now(e){Qee=e}static set defaultZone(e){ete=e}static get defaultZone(){return Ym(ete,HO.instance)}static get defaultLocale(){return tte}static set defaultLocale(e){tte=e}static get defaultNumberingSystem(){return nte}static set defaultNumberingSystem(e){nte=e}static get defaultOutputCalendar(){return rte}static set defaultOutputCalendar(e){rte=e}static get defaultWeekSettings(){return ote}static set defaultWeekSettings(e){ote=D9(e)}static get twoDigitCutoffYear(){return ite}static set twoDigitCutoffYear(e){ite=e%100}static get throwOnInvalid(){return ste}static set throwOnInvalid(e){ste=e}static resetCaches(){Dr.resetCache(),bh.resetCache(),dn.resetCache(),B9e()}};class ch{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Yme=[0,31,59,90,120,151,181,212,243,273,304,334],Xme=[0,31,60,91,121,152,182,213,244,274,305,335];function ou(t,e){return new ch("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function ZB(t,e,n){const r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return i===0?7:i}function Zme(t,e,n){return n+(kI(t)?Xme:Yme)[e-1]}function Jme(t,e){const n=kI(t)?Xme:Yme,r=n.findIndex(s=>s<e),i=e-n[r];return{month:r+1,day:i}}function JB(t,e){return(t-e+7)%7+1}function sN(t,e=4,n=1){const{year:r,month:i,day:s}=t,o=Zme(r,i,s),a=JB(ZB(r,i,s),n);let l=Math.floor((o-a+14-e)/7),c;return l<1?(c=r-1,l=Kk(c,e,n)):l>Kk(r,e,n)?(c=r+1,l=1):c=r,{weekYear:c,weekNumber:l,weekday:a,...XO(t)}}function ate(t,e=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=t,o=JB(ZB(r,1,e),n),a=cw(r);let l=i*7+s-o-7+e,c;l<1?(c=r-1,l+=cw(c)):l>a?(c=r+1,l-=cw(r)):c=r;const{month:u,day:h}=Jme(c,l);return{year:c,month:u,day:h,...XO(t)}}function Bj(t){const{year:e,month:n,day:r}=t,i=Zme(e,n,r);return{year:e,ordinal:i,...XO(t)}}function lte(t){const{year:e,ordinal:n}=t,{month:r,day:i}=Jme(e,n);return{year:e,month:r,day:i,...XO(t)}}function cte(t,e){if(!kn(t.localWeekday)||!kn(t.localWeekNumber)||!kn(t.localWeekYear)){if(!kn(t.weekday)||!kn(t.weekNumber)||!kn(t.weekYear))throw new Px("Cannot mix locale-based week fields with ISO-based week fields");return kn(t.localWeekday)||(t.weekday=t.localWeekday),kn(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),kn(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function W9e(t,e=4,n=1){const r=qO(t.weekYear),i=au(t.weekNumber,1,Kk(t.weekYear,e,n)),s=au(t.weekday,1,7);return r?i?s?!1:ou("weekday",t.weekday):ou("week",t.weekNumber):ou("weekYear",t.weekYear)}function H9e(t){const e=qO(t.year),n=au(t.ordinal,1,cw(t.year));return e?n?!1:ou("ordinal",t.ordinal):ou("year",t.year)}function Qme(t){const e=qO(t.year),n=au(t.month,1,12),r=au(t.day,1,oN(t.year,t.month));return e?n?r?!1:ou("day",t.day):ou("month",t.month):ou("year",t.year)}function ege(t){const{hour:e,minute:n,second:r,millisecond:i}=t,s=au(e,0,23)||e===24&&n===0&&r===0&&i===0,o=au(n,0,59),a=au(r,0,59),l=au(i,0,999);return s?o?a?l?!1:ou("millisecond",i):ou("second",r):ou("minute",n):ou("hour",e)}function kn(t){return typeof t>"u"}function Ag(t){return typeof t=="number"}function qO(t){return typeof t=="number"&&t%1===0}function q9e(t){return typeof t=="string"}function K9e(t){return Object.prototype.toString.call(t)==="[object Date]"}function tge(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function nge(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Y9e(t){return Array.isArray(t)?t:[t]}function ute(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{const s=[e(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function X9e(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function I2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function D9(t){if(t==null)return null;if(typeof t!="object")throw new na("Week settings must be an object");if(!au(t.firstDay,1,7)||!au(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!au(e,1,7)))throw new na("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function au(t,e,n){return qO(t)&&t>=e&&t<=n}function Z9e(t,e){return t-e*Math.floor(t/e)}function Es(t,e=2){const n=t<0;let r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function Vm(t){if(!(kn(t)||t===null||t===""))return parseInt(t,10)}function V0(t){if(!(kn(t)||t===null||t===""))return parseFloat(t)}function QB(t){if(!(kn(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function eW(t,e,n="round"){const r=10**e;switch(n){case"expand":return t>0?Math.ceil(t*r)/r:Math.floor(t*r)/r;case"trunc":return Math.trunc(t*r)/r;case"round":return Math.round(t*r)/r;case"floor":return Math.floor(t*r)/r;case"ceil":return Math.ceil(t*r)/r;default:throw new RangeError(`Value rounding ${n} is out of range`)}}function kI(t){return t%4===0&&(t%100!==0||t%400===0)}function cw(t){return kI(t)?366:365}function oN(t,e){const n=Z9e(e-1,12)+1,r=t+(e-n)/12;return n===2?kI(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function KO(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function hte(t,e,n){return-JB(ZB(t,1,e),n)+e-1}function Kk(t,e=4,n=1){const r=hte(t,e,n),i=hte(t+1,e,n);return(cw(t)-r+i)/7}function j9(t){return t>99?t:t>Yi.twoDigitCutoffYear?1900+t:2e3+t}function rge(t,e,n,r=null){const i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function YO(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);const r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function ige(t){const e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new na(`Invalid unit value ${t}`);return e}function aN(t,e){const n={};for(const r in t)if(I2(t,r)){const i=t[r];if(i==null)continue;n[e(r)]=ige(i)}return n}function _T(t,e){const n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Es(n,2)}:${Es(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Es(n,2)}${Es(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function XO(t){return X9e(t,["hour","minute","second","millisecond"])}const J9e=["January","February","March","April","May","June","July","August","September","October","November","December"],sge=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Q9e=["J","F","M","A","M","J","J","A","S","O","N","D"];function oge(t){switch(t){case"narrow":return[...Q9e];case"short":return[...sge];case"long":return[...J9e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const age=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],lge=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],e7e=["M","T","W","T","F","S","S"];function cge(t){switch(t){case"narrow":return[...e7e];case"short":return[...lge];case"long":return[...age];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const uge=["AM","PM"],t7e=["Before Christ","Anno Domini"],n7e=["BC","AD"],r7e=["B","A"];function hge(t){switch(t){case"narrow":return[...r7e];case"short":return[...n7e];case"long":return[...t7e];default:return null}}function i7e(t){return uge[t.hour<12?0:1]}function s7e(t,e){return cge(e)[t.weekday-1]}function o7e(t,e){return oge(e)[t.month-1]}function a7e(t,e){return hge(e)[t.year<0?0:1]}function l7e(t,e,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){const h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,c=i[t],u=r?l?c[1]:c[2]||c[1]:l?i[t][0]:t;return o?`${a} ${u} ago`:`in ${a} ${u}`}function dte(t,e){let n="";for(const r of t)r.literal?n+=r.val:n+=e(r.val);return n}const c7e={D:iN,DD:Ime,DDD:Pme,DDDD:Cme,t:Rme,tt:Mme,ttt:Nme,tttt:Ome,T:Lme,TT:Dme,TTT:jme,TTTT:$me,f:Fme,ff:zme,fff:Ume,ffff:Wme,F:Vme,FF:Gme,FFF:Bme,FFFF:Hme};class ca{static create(e,n={}){return new ca(e,n)}static parseFormat(e){let n=null,r="",i=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?((r.length>0||i)&&s.push({literal:i||/^\s+$/.test(r),val:r===""?"'":r}),n=null,r="",i=!i):i||a===n?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,n=a)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return c7e[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}dtFormatter(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n})}formatDateTime(e,n){return this.dtFormatter(e,n).format()}formatDateTimeParts(e,n){return this.dtFormatter(e,n).formatToParts()}formatInterval(e,n){return this.dtFormatter(e.start,n).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n){return this.dtFormatter(e,n).resolvedOptions()}num(e,n=0,r=void 0){if(this.opts.forceSimple)return Es(e,n);const i={...this.opts};return n>0&&(i.padTo=n),r&&(i.signDisplay=r),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,n){const r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(g,y)=>this.loc.extract(e,g,y),o=g=>e.isOffsetFixed&&e.offset===0&&g.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,g.format):"",a=()=>r?i7e(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(g,y)=>r?o7e(e,g):s(y?{month:g}:{month:g,day:"numeric"},"month"),c=(g,y)=>r?s7e(e,g):s(y?{weekday:g}:{weekday:g,month:"long",day:"numeric"},"weekday"),u=g=>{const y=ca.macroTokenToFormatOpts(g);return y?this.formatWithSystemDefault(e,y):g},h=g=>r?a7e(e,g):s({era:g},"era"),f=g=>{switch(g){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(g)}};return dte(ca.parseFormat(n),f)}formatDurationFromString(e,n){const r=this.opts.signMode==="negativeLargestOnly"?-1:1,i=u=>{switch(u[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},s=(u,h)=>f=>{const g=i(f);if(g){const y=h.isNegativeDuration&&g!==h.largestUnit?r:1;let _;return this.opts.signMode==="negativeLargestOnly"&&g!==h.largestUnit?_="never":this.opts.signMode==="all"?_="always":_="auto",this.num(u.get(g)*y,f.length,_)}else return f},o=ca.parseFormat(n),a=o.reduce((u,{literal:h,val:f})=>h?u:u.concat(f),[]),l=e.shiftTo(...a.map(i).filter(u=>u)),c={isNegativeDuration:l<0,largestUnit:Object.keys(l.values)[0]};return dte(o,s(l,c))}}const dge=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function vb(...t){const e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function _b(...t){return e=>t.reduce(([n,r,i],s)=>{const[o,a,l]=s(e,i);return[{...n,...o},a||r,l]},[{},null,1]).slice(0,2)}function xb(t,...e){if(t==null)return[null,null];for(const[n,r]of e){const i=n.exec(t);if(i)return r(i)}return[null,null]}function fge(...t){return(e,n)=>{const r={};let i;for(i=0;i<t.length;i++)r[t[i]]=Vm(e[n+i]);return[r,null,n+i]}}const pge=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,u7e=`(?:${pge.source}?(?:\\[(${dge.source})\\])?)?`,tW=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,mge=RegExp(`${tW.source}${u7e}`),nW=RegExp(`(?:[Tt]${mge.source})?`),h7e=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,d7e=/(\d{4})-?W(\d\d)(?:-?(\d))?/,f7e=/(\d{4})-?(\d{3})/,p7e=fge("weekYear","weekNumber","weekDay"),m7e=fge("year","ordinal"),g7e=/(\d{4})-(\d\d)-(\d\d)/,gge=RegExp(`${tW.source} ?(?:${pge.source}|(${dge.source}))?`),y7e=RegExp(`(?: ${gge.source})?`);function uw(t,e,n){const r=t[e];return kn(r)?n:Vm(r)}function v7e(t,e){return[{year:uw(t,e),month:uw(t,e+1,1),day:uw(t,e+2,1)},null,e+3]}function wb(t,e){return[{hours:uw(t,e,0),minutes:uw(t,e+1,0),seconds:uw(t,e+2,0),milliseconds:QB(t[e+3])},null,e+4]}function AI(t,e){const n=!t[e]&&!t[e+1],r=YO(t[e+1],t[e+2]),i=n?null:ha.instance(r);return[{},i,e+3]}function II(t,e){const n=t[e]?bh.create(t[e]):null;return[{},n,e+1]}const _7e=RegExp(`^T?${tW.source}$`),x7e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function w7e(t){const[e,n,r,i,s,o,a,l,c]=t,u=e[0]==="-",h=l&&l[0]==="-",f=(g,y=!1)=>g!==void 0&&(y||g&&u)?-g:g;return[{years:f(V0(n)),months:f(V0(r)),weeks:f(V0(i)),days:f(V0(s)),hours:f(V0(o)),minutes:f(V0(a)),seconds:f(V0(l),l==="-0"),milliseconds:f(QB(c),h)}]}const b7e={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function rW(t,e,n,r,i,s,o){const a={year:e.length===2?j9(Vm(e)):Vm(e),month:sge.indexOf(n)+1,day:Vm(r),hour:Vm(i),minute:Vm(s)};return o&&(a.second=Vm(o)),t&&(a.weekday=t.length>3?age.indexOf(t)+1:lge.indexOf(t)+1),a}const E7e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function S7e(t){const[,e,n,r,i,s,o,a,l,c,u,h]=t,f=rW(e,i,r,n,s,o,a);let g;return l?g=b7e[l]:c?g=0:g=YO(u,h),[f,new ha(g)]}function T7e(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const k7e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,A7e=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,I7e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function fte(t){const[,e,n,r,i,s,o,a]=t;return[rW(e,i,r,n,s,o,a),ha.utcInstance]}function P7e(t){const[,e,n,r,i,s,o,a]=t;return[rW(e,a,n,r,i,s,o),ha.utcInstance]}const C7e=vb(h7e,nW),R7e=vb(d7e,nW),M7e=vb(f7e,nW),N7e=vb(mge),yge=_b(v7e,wb,AI,II),O7e=_b(p7e,wb,AI,II),L7e=_b(m7e,wb,AI,II),D7e=_b(wb,AI,II);function j7e(t){return xb(t,[C7e,yge],[R7e,O7e],[M7e,L7e],[N7e,D7e])}function $7e(t){return xb(T7e(t),[E7e,S7e])}function F7e(t){return xb(t,[k7e,fte],[A7e,fte],[I7e,P7e])}function V7e(t){return xb(t,[x7e,w7e])}const z7e=_b(wb);function G7e(t){return xb(t,[_7e,z7e])}const U7e=vb(g7e,y7e),B7e=vb(gge),W7e=_b(wb,AI,II);function H7e(t){return xb(t,[U7e,yge],[B7e,W7e])}const pte="Invalid Duration",vge={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},q7e={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...vge},Dc=146097/400,S_=146097/4800,K7e={years:{quarters:4,months:12,weeks:Dc/7,days:Dc,hours:Dc*24,minutes:Dc*24*60,seconds:Dc*24*60*60,milliseconds:Dc*24*60*60*1e3},quarters:{months:3,weeks:Dc/28,days:Dc/4,hours:Dc*24/4,minutes:Dc*24*60/4,seconds:Dc*24*60*60/4,milliseconds:Dc*24*60*60*1e3/4},months:{weeks:S_/7,days:S_,hours:S_*24,minutes:S_*24*60,seconds:S_*24*60*60,milliseconds:S_*24*60*60*1e3},...vge},By=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Y7e=By.slice(0).reverse();function ff(t,e,n=!1){const r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new mr(r)}function _ge(t,e){let n=e.milliseconds??0;for(const r of Y7e.slice(1))e[r]&&(n+=e[r]*t[r].milliseconds);return n}function mte(t,e){const n=_ge(t,e)<0?-1:1;By.reduceRight((r,i)=>{if(kn(e[i]))return r;if(r){const s=e[r]*n,o=t[i][r],a=Math.floor(s/o);e[i]+=a*n,e[r]-=a*o*n}return i},null),By.reduce((r,i)=>{if(kn(e[i]))return r;if(r){const s=e[r]%1;e[r]-=s,e[i]+=s*t[r][i]}return i},null)}function gte(t){const e={};for(const[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}class mr{constructor(e){const n=e.conversionAccuracy==="longterm"||!1;let r=n?K7e:q7e;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Dr.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return mr.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new na(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new mr({values:aN(e,mr.normalizeUnit),loc:Dr.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(Ag(e))return mr.fromMillis(e);if(mr.isDuration(e))return e;if(typeof e=="object")return mr.fromObject(e);throw new na(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){const[r]=V7e(e);return r?mr.fromObject(r,n):mr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){const[r]=G7e(e);return r?mr.fromObject(r,n):mr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new na("need to specify a reason the Duration is invalid");const r=e instanceof ch?e:new ch(e,n);if(Yi.throwOnInvalid)throw new w9e(r);return new mr({invalid:r})}static normalizeUnit(e){const n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new Ame(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){const r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?ca.create(this.loc,r).formatDurationFromString(this,e):pte}toHuman(e={}){if(!this.isValid)return pte;const n=e.showZeros!==!1,r=By.map(i=>{const s=this.values[i];return kn(s)||s===0&&!n?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=eW(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const n=this.toMillis();return n<0||n>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},dn.fromMillis(n,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?_ge(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const n=mr.fromDurationLike(e),r={};for(const i of By)(I2(n.values,i)||I2(this.values,i))&&(r[i]=n.get(i)+this.get(i));return ff(this,{values:r},!0)}minus(e){if(!this.isValid)return this;const n=mr.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;const n={};for(const r of Object.keys(this.values))n[r]=ige(e(this.values[r],r));return ff(this,{values:n},!0)}get(e){return this[mr.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const n={...this.values,...aN(e,mr.normalizeUnit)};return ff(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return ff(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return mte(this.matrix,e),ff(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=gte(this.normalize().shiftToAll().toObject());return ff(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>mr.normalizeUnit(o));const n={},r={},i=this.toObject();let s;for(const o of By)if(e.indexOf(o)>=0){s=o;let a=0;for(const c in r)a+=this.matrix[c][o]*r[c],r[c]=0;Ag(i[o])&&(a+=i[o]);const l=Math.trunc(a);n[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else Ag(i[o])&&(r[o]=i[o]);for(const o in r)r[o]!==0&&(n[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return mte(this.matrix,n),ff(this,{values:n},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return ff(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=gte(this.values);return ff(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(const r of By)if(!n(this.values[r],e.values[r]))return!1;return!0}}const T_="Invalid Interval";function X7e(t,e){return!t||!t.isValid?qi.invalid("missing or invalid start"):!e||!e.isValid?qi.invalid("missing or invalid end"):e<t?qi.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class qi{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new na("need to specify a reason the Interval is invalid");const r=e instanceof ch?e:new ch(e,n);if(Yi.throwOnInvalid)throw new x9e(r);return new qi({invalid:r})}static fromDateTimes(e,n){const r=OE(e),i=OE(n),s=X7e(r,i);return s??new qi({start:r,end:i})}static after(e,n){const r=mr.fromDurationLike(n),i=OE(e);return qi.fromDateTimes(i,i.plus(r))}static before(e,n){const r=mr.fromDurationLike(n),i=OE(e);return qi.fromDateTimes(i.minus(r),i)}static fromISO(e,n){const[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=dn.fromISO(r,n),o=s.isValid}catch{o=!1}let a,l;try{a=dn.fromISO(i,n),l=a.isValid}catch{l=!1}if(o&&l)return qi.fromDateTimes(s,a);if(o){const c=mr.fromISO(i,n);if(c.isValid)return qi.after(s,c)}else if(l){const c=mr.fromISO(r,n);if(c.isValid)return qi.before(a,c)}}return qi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",n){if(!this.isValid)return NaN;const r=this.start.startOf(e,n);let i;return n?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,n),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?qi.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];const n=e.map(OE).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[];let{s:i}=this,s=0;for(;i<this.e;){const o=n[s]||this.e,a=+o>+this.e?this.e:o;r.push(qi.fromDateTimes(i,a)),i=a,s+=1}return r}splitBy(e){const n=mr.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s;const o=[];for(;r<this.e;){const a=this.start.plus(n.mapUnits(l=>l*i));s=+a>+this.e?this.e:a,o.push(qi.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:qi.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;const n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return qi.fromDateTimes(n,r)}static merge(e){const[n,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0;const i=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,c)=>l.time-c.time);for(const l of a)r+=l.type==="s"?1:-1,r===1?n=l.time:(n&&+n!=+l.time&&i.push(qi.fromDateTimes(n,l.time)),n=null);return qi.merge(i)}difference(...e){return qi.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:T_}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=iN,n={}){return this.isValid?ca.create(this.s.loc.clone(n),e).formatInterval(this):T_}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:T_}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:T_}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:T_}toFormat(e,{separator:n="  "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:T_}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):mr.invalid(this.invalidReason)}mapEndpoints(e){return qi.fromDateTimes(e(this.s),e(this.e))}}let VC=class{static hasDST(e=Yi.defaultZone){const n=dn.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return bh.isValidZone(e)}static normalizeZone(e){return Ym(e,Yi.defaultZone)}static getStartOfWeek({locale:e=null,locObj:n=null}={}){return(n||Dr.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:n=null}={}){return(n||Dr.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:n=null}={}){return(n||Dr.create(e)).getWeekendDays().slice()}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Dr.create(n,r,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Dr.create(n,r,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Dr.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Dr.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Dr.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return Dr.create(n,null,"gregory").eras(e)}static features(){return{relative:tge(),localeWeek:nge()}}};function yte(t,e){const n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(mr.fromMillis(r).as("days"))}function Z7e(t,e,n){const r=[["years",(l,c)=>c.year-l.year],["quarters",(l,c)=>c.quarter-l.quarter+(c.year-l.year)*4],["months",(l,c)=>c.month-l.month+(c.year-l.year)*12],["weeks",(l,c)=>{const u=yte(l,c);return(u-u%7)/7}],["days",yte]],i={},s=t;let o,a;for(const[l,c]of r)n.indexOf(l)>=0&&(o=l,i[l]=c(t,e),a=s.plus(i),a>e?(i[l]--,t=s.plus(i),t>e&&(a=t,i[l]--,t=s.plus(i))):t=a);return[t,i,a,o]}function J7e(t,e,n,r){let[i,s,o,a]=Z7e(t,e,n);const l=e-i,c=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);c.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+l/(o-i)));const u=mr.fromObject(s,r);return c.length>0?mr.fromMillis(l,r).shiftTo(...c).plus(u):u}const Q7e="missing Intl.DateTimeFormat.formatToParts support";function Tr(t,e=n=>n){return{regex:t,deser:([n])=>e(U9e(n))}}const eVe="",xge=`[ ${eVe}]`,wge=new RegExp(xge,"g");function tVe(t){return t.replace(/\./g,"\\.?").replace(wge,xge)}function vte(t){return t.replace(/\./g,"").replace(wge," ").toLowerCase()}function ju(t,e){return t===null?null:{regex:RegExp(t.map(tVe).join("|")),deser:([n])=>t.findIndex(r=>vte(n)===vte(r))+e}}function _te(t,e){return{regex:t,deser:([,n,r])=>YO(n,r),groups:e}}function zC(t){return{regex:t,deser:([e])=>e}}function nVe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function rVe(t,e){const n=Du(e),r=Du(e,"{2}"),i=Du(e,"{3}"),s=Du(e,"{4}"),o=Du(e,"{6}"),a=Du(e,"{1,2}"),l=Du(e,"{1,3}"),c=Du(e,"{1,6}"),u=Du(e,"{1,9}"),h=Du(e,"{2,4}"),f=Du(e,"{4,6}"),g=b=>({regex:RegExp(nVe(b.val)),deser:([T])=>T,literal:!0}),_=(b=>{if(t.literal)return g(b);switch(b.val){case"G":return ju(e.eras("short"),0);case"GG":return ju(e.eras("long"),0);case"y":return Tr(c);case"yy":return Tr(h,j9);case"yyyy":return Tr(s);case"yyyyy":return Tr(f);case"yyyyyy":return Tr(o);case"M":return Tr(a);case"MM":return Tr(r);case"MMM":return ju(e.months("short",!0),1);case"MMMM":return ju(e.months("long",!0),1);case"L":return Tr(a);case"LL":return Tr(r);case"LLL":return ju(e.months("short",!1),1);case"LLLL":return ju(e.months("long",!1),1);case"d":return Tr(a);case"dd":return Tr(r);case"o":return Tr(l);case"ooo":return Tr(i);case"HH":return Tr(r);case"H":return Tr(a);case"hh":return Tr(r);case"h":return Tr(a);case"mm":return Tr(r);case"m":return Tr(a);case"q":return Tr(a);case"qq":return Tr(r);case"s":return Tr(a);case"ss":return Tr(r);case"S":return Tr(l);case"SSS":return Tr(i);case"u":return zC(u);case"uu":return zC(a);case"uuu":return Tr(n);case"a":return ju(e.meridiems(),0);case"kkkk":return Tr(s);case"kk":return Tr(h,j9);case"W":return Tr(a);case"WW":return Tr(r);case"E":case"c":return Tr(n);case"EEE":return ju(e.weekdays("short",!1),1);case"EEEE":return ju(e.weekdays("long",!1),1);case"ccc":return ju(e.weekdays("short",!0),1);case"cccc":return ju(e.weekdays("long",!0),1);case"Z":case"ZZ":return _te(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return _te(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return zC(/[a-z_+-/]{1,256}?/i);case" ":return zC(/[^\S\n\r]/);default:return g(b)}})(t)||{invalidReason:Q7e};return _.token=t,_}const iVe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function sVe(t,e,n){const{type:r,value:i}=t;if(r==="literal"){const l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}const s=e[r];let o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=n.hour12?"hour12":"hour24");let a=iVe[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function oVe(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function aVe(t,e,n){const r=t.match(e);if(r){const i={};let s=1;for(const o in n)if(I2(n,o)){const a=n[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,i]}else return[r,{}]}function lVe(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n=null,r;return kn(t.z)||(n=bh.create(t.z)),kn(t.Z)||(n||(n=new ha(t.Z)),r=t.Z),kn(t.q)||(t.M=(t.q-1)*3+1),kn(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),kn(t.u)||(t.S=QB(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),n,r]}let Wj=null;function cVe(){return Wj||(Wj=dn.fromMillis(1555555555555)),Wj}function uVe(t,e){if(t.literal)return t;const n=ca.macroTokenToFormatOpts(t.val),r=Tge(n,e);return r==null||r.includes(void 0)?t:r}function bge(t,e){return Array.prototype.concat(...t.map(n=>uVe(n,e)))}class Ege{constructor(e,n){if(this.locale=e,this.format=n,this.tokens=bge(ca.parseFormat(n),e),this.units=this.tokens.map(r=>rVe(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){const[r,i]=oVe(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[n,r]=aVe(e,this.regex,this.handlers),[i,s,o]=r?lVe(r):[null,null,void 0];if(I2(r,"a")&&I2(r,"H"))throw new Px("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:n,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Sge(t,e,n){return new Ege(t,n).explainFromTokens(e)}function hVe(t,e,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=Sge(t,e,n);return[r,i,s,o]}function Tge(t,e){if(!t)return null;const r=ca.create(e,t).dtFormatter(cVe()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>sVe(o,t,s))}const Hj="Invalid DateTime",xte=864e13;function yS(t){return new ch("unsupported zone",`the zone "${t.name}" is not supported`)}function qj(t){return t.weekData===null&&(t.weekData=sN(t.c)),t.weekData}function Kj(t){return t.localWeekData===null&&(t.localWeekData=sN(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function z0(t,e){const n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new dn({...n,...e,old:n})}function kge(t,e,n){let r=t-e*60*1e3;const i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;const s=n.offset(r);return i===s?[r,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function GC(t,e){t+=e*60*1e3;const n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function CM(t,e,n){return kge(KO(t),e,n)}function wte(t,e){const n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:i,day:Math.min(t.c.day,oN(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=mr.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=KO(s);let[l,c]=kge(a,n,t.zone);return o!==0&&(l+=o,c=t.zone.offset(l)),{ts:l,o:c}}function k_(t,e,n,r,i,s){const{setZone:o,zone:a}=n;if(t&&Object.keys(t).length!==0||e){const l=e||a,c=dn.fromObject(t,{...n,zone:l,specificOffset:s});return o?c:c.setZone(a)}else return dn.invalid(new ch("unparsable",`the input "${i}" can't be parsed as ${r}`))}function UC(t,e,n=!0){return t.isValid?ca.create(Dr.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function Yj(t,e,n){const r=t.c.year>9999||t.c.year<0;let i="";if(r&&t.c.year>=0&&(i+="+"),i+=Es(t.c.year,r?6:4),n==="year")return i;if(e){if(i+="-",i+=Es(t.c.month),n==="month")return i;i+="-"}else if(i+=Es(t.c.month),n==="month")return i;return i+=Es(t.c.day),i}function bte(t,e,n,r,i,s,o){let a=!n||t.c.millisecond!==0||t.c.second!==0,l="";switch(o){case"day":case"month":case"year":break;default:if(l+=Es(t.c.hour),o==="hour")break;if(e){if(l+=":",l+=Es(t.c.minute),o==="minute")break;a&&(l+=":",l+=Es(t.c.second))}else{if(l+=Es(t.c.minute),o==="minute")break;a&&(l+=Es(t.c.second))}if(o==="second")break;a&&(!r||t.c.millisecond!==0)&&(l+=".",l+=Es(t.c.millisecond,3))}return i&&(t.isOffsetFixed&&t.offset===0&&!s?l+="Z":t.o<0?(l+="-",l+=Es(Math.trunc(-t.o/60)),l+=":",l+=Es(Math.trunc(-t.o%60))):(l+="+",l+=Es(Math.trunc(t.o/60)),l+=":",l+=Es(Math.trunc(t.o%60)))),s&&(l+="["+t.zone.ianaName+"]"),l}const Age={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},dVe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},fVe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},RM=["year","month","day","hour","minute","second","millisecond"],pVe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],mVe=["year","ordinal","hour","minute","second","millisecond"];function MM(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new Ame(t);return e}function Ete(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return MM(t)}}function gVe(t){if(vS===void 0&&(vS=Yi.now()),t.type!=="iana")return t.offset(vS);const e=t.name;let n=$9.get(e);return n===void 0&&(n=t.offset(vS),$9.set(e,n)),n}function Ste(t,e){const n=Ym(e.zone,Yi.defaultZone);if(!n.isValid)return dn.invalid(yS(n));const r=Dr.fromObject(e);let i,s;if(kn(t.year))i=Yi.now();else{for(const l of RM)kn(t[l])&&(t[l]=Age[l]);const o=Qme(t)||ege(t);if(o)return dn.invalid(o);const a=gVe(n);[i,s]=CM(t,a,n)}return new dn({ts:i,zone:n,loc:r,o:s})}function Tte(t,e,n){const r=kn(n.round)?!0:n.round,i=kn(n.rounding)?"trunc":n.rounding,s=(a,l)=>(a=eW(a,r||n.calendary?0:2,n.calendary?"round":i),e.loc.clone(n).relFormatter(n).format(a,l)),o=a=>n.calendary?e.hasSame(t,a)?0:e.startOf(a).diff(t.startOf(a),a).get(a):e.diff(t,a).get(a);if(n.unit)return s(o(n.unit),n.unit);for(const a of n.units){const l=o(a);if(Math.abs(l)>=1)return s(l,a)}return s(t>e?-0:0,n.units[n.units.length-1])}function kte(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}let vS;const $9=new Map;class dn{constructor(e){const n=e.zone||Yi.defaultZone;let r=e.invalid||(Number.isNaN(e.ts)?new ch("invalid input"):null)||(n.isValid?null:yS(n));this.ts=kn(e.ts)?Yi.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,s]=[e.old.c,e.old.o];else{const a=Ag(e.o)&&!e.old?e.o:n.offset(this.ts);i=GC(this.ts,a),r=Number.isNaN(i.year)?new ch("invalid input"):null,i=r?null:i,s=r?null:a}this._zone=n,this.loc=e.loc||Dr.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new dn({})}static local(){const[e,n]=kte(arguments),[r,i,s,o,a,l,c]=n;return Ste({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static utc(){const[e,n]=kte(arguments),[r,i,s,o,a,l,c]=n;return e.zone=ha.utcInstance,Ste({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:c},e)}static fromJSDate(e,n={}){const r=K9e(e)?e.valueOf():NaN;if(Number.isNaN(r))return dn.invalid("invalid input");const i=Ym(n.zone,Yi.defaultZone);return i.isValid?new dn({ts:r,zone:i,loc:Dr.fromObject(n)}):dn.invalid(yS(i))}static fromMillis(e,n={}){if(Ag(e))return e<-xte||e>xte?dn.invalid("Timestamp out of range"):new dn({ts:e,zone:Ym(n.zone,Yi.defaultZone),loc:Dr.fromObject(n)});throw new na(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(Ag(e))return new dn({ts:e*1e3,zone:Ym(n.zone,Yi.defaultZone),loc:Dr.fromObject(n)});throw new na("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};const r=Ym(n.zone,Yi.defaultZone);if(!r.isValid)return dn.invalid(yS(r));const i=Dr.fromObject(n),s=aN(e,Ete),{minDaysInFirstWeek:o,startOfWeek:a}=cte(s,i),l=Yi.now(),c=kn(n.specificOffset)?r.offset(l):n.specificOffset,u=!kn(s.ordinal),h=!kn(s.year),f=!kn(s.month)||!kn(s.day),g=h||f,y=s.weekYear||s.weekNumber;if((g||u)&&y)throw new Px("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&u)throw new Px("Can't mix ordinal dates with month/day");const _=y||s.weekday&&!g;let b,T,A=GC(l,c);_?(b=pVe,T=dVe,A=sN(A,o,a)):u?(b=mVe,T=fVe,A=Bj(A)):(b=RM,T=Age);let I=!1;for(const D of b){const V=s[D];kn(V)?I?s[D]=T[D]:s[D]=A[D]:I=!0}const P=_?W9e(s,o,a):u?H9e(s):Qme(s),N=P||ege(s);if(N)return dn.invalid(N);const L=_?ate(s,o,a):u?lte(s):s,[C,M]=CM(L,c,r),O=new dn({ts:C,zone:r,o:M,loc:i});return s.weekday&&g&&e.weekday!==O.weekday?dn.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${O.toISO()}`):O.isValid?O:dn.invalid(O.invalid)}static fromISO(e,n={}){const[r,i]=j7e(e);return k_(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){const[r,i]=$7e(e);return k_(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){const[r,i]=F7e(e);return k_(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(kn(e)||kn(n))throw new na("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:s=null}=r,o=Dr.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,l,c,u]=hVe(o,e,n);return u?dn.invalid(u):k_(a,l,r,`format ${n}`,e,c)}static fromString(e,n,r={}){return dn.fromFormat(e,n,r)}static fromSQL(e,n={}){const[r,i]=H7e(e);return k_(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new na("need to specify a reason the DateTime is invalid");const r=e instanceof ch?e:new ch(e,n);if(Yi.throwOnInvalid)throw new _9e(r);return new dn({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){const r=Tge(e,Dr.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return bge(ca.parseFormat(e),Dr.fromObject(n)).map(i=>i.val).join("")}static resetCache(){vS=void 0,$9.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?qj(this).weekYear:NaN}get weekNumber(){return this.isValid?qj(this).weekNumber:NaN}get weekday(){return this.isValid?qj(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Kj(this).weekday:NaN}get localWeekNumber(){return this.isValid?Kj(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Kj(this).weekYear:NaN}get ordinal(){return this.isValid?Bj(this.c).ordinal:NaN}get monthShort(){return this.isValid?VC.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?VC.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?VC.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?VC.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,n=6e4,r=KO(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*n),a=this.zone.offset(r-s*n);if(o===a)return[this];const l=r-o*n,c=r-a*n,u=GC(l,o),h=GC(c,a);return u.hour===h.hour&&u.minute===h.minute&&u.second===h.second&&u.millisecond===h.millisecond?[z0(this,{ts:l}),z0(this,{ts:c})]:[this]}get isInLeapYear(){return kI(this.year)}get daysInMonth(){return oN(this.year,this.month)}get daysInYear(){return this.isValid?cw(this.year):NaN}get weeksInWeekYear(){return this.isValid?Kk(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Kk(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:n,numberingSystem:r,calendar:i}=ca.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(ha.instance(e),n)}toLocal(){return this.setZone(Yi.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=Ym(e,Yi.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){const s=e.offset(this.ts),o=this.toObject();[i]=CM(o,s,e)}return z0(this,{ts:i,zone:e})}else return dn.invalid(yS(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){const i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return z0(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const n=aN(e,Ete),{minDaysInFirstWeek:r,startOfWeek:i}=cte(n,this.loc),s=!kn(n.weekYear)||!kn(n.weekNumber)||!kn(n.weekday),o=!kn(n.ordinal),a=!kn(n.year),l=!kn(n.month)||!kn(n.day),c=a||l,u=n.weekYear||n.weekNumber;if((c||o)&&u)throw new Px("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new Px("Can't mix ordinal dates with month/day");let h;s?h=ate({...sN(this.c,r,i),...n},r,i):kn(n.ordinal)?(h={...this.toObject(),...n},kn(n.day)&&(h.day=Math.min(oN(h.year,h.month),h.day))):h=lte({...Bj(this.c),...n});const[f,g]=CM(h,this.o,this.zone);return z0(this,{ts:f,o:g})}plus(e){if(!this.isValid)return this;const n=mr.fromDurationLike(e);return z0(this,wte(this,n))}minus(e){if(!this.isValid)return this;const n=mr.fromDurationLike(e).negate();return z0(this,wte(this,n))}startOf(e,{useLocaleWeeks:n=!1}={}){if(!this.isValid)return this;const r={},i=mr.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks")if(n){const s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){const s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,n){return this.isValid?this.plus({[e]:1}).startOf(e,n).minus(1):this}toFormat(e,n={}){return this.isValid?ca.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):Hj}toLocaleString(e=iN,n={}){return this.isValid?ca.create(this.loc.clone(n),e).formatDateTime(this):Hj}toLocaleParts(e={}){return this.isValid?ca.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1,precision:o="milliseconds"}={}){if(!this.isValid)return null;o=MM(o);const a=e==="extended";let l=Yj(this,a,o);return RM.indexOf(o)>=3&&(l+="T"),l+=bte(this,a,n,r,i,s,o),l}toISODate({format:e="extended",precision:n="day"}={}){return this.isValid?Yj(this,e==="extended",MM(n)):null}toISOWeekDate(){return UC(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended",precision:a="milliseconds"}={}){return this.isValid?(a=MM(a),(i&&RM.indexOf(a)>=3?"T":"")+bte(this,o==="extended",n,e,r,s,a)):null}toRFC2822(){return UC(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return UC(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Yj(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),UC(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Hj}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return mr.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=Y9e(n).map(mr.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,c=J7e(a,l,s,i);return o?c.negate():c}diffNow(e="milliseconds",n={}){return this.diff(dn.now(),e,n)}until(e){return this.isValid?qi.fromDateTimes(this,e):this}hasSame(e,n,r){if(!this.isValid)return!1;const i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(n,r)<=i&&i<=s.endOf(n,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const n=e.base||dn.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),Tte(n,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?Tte(e.base||dn.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(dn.isDateTime))throw new na("min requires all arguments be DateTimes");return ute(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(dn.isDateTime))throw new na("max requires all arguments be DateTimes");return ute(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){const{locale:i=null,numberingSystem:s=null}=r,o=Dr.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return Sge(o,e,n)}static fromStringExplain(e,n,r={}){return dn.fromFormatExplain(e,n,r)}static buildFormatParser(e,n={}){const{locale:r=null,numberingSystem:i=null}=n,s=Dr.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new Ege(s,e)}static fromFormatParser(e,n,r={}){if(kn(e)||kn(n))throw new na("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:s=null}=r,o=Dr.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(n.locale))throw new na(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${n.locale}`);const{result:a,zone:l,specificOffset:c,invalidReason:u}=n.explainFromTokens(e);return u?dn.invalid(u):k_(a,l,r,`format ${n.format}`,e,c)}static get DATE_SHORT(){return iN}static get DATE_MED(){return Ime}static get DATE_MED_WITH_WEEKDAY(){return b9e}static get DATE_FULL(){return Pme}static get DATE_HUGE(){return Cme}static get TIME_SIMPLE(){return Rme}static get TIME_WITH_SECONDS(){return Mme}static get TIME_WITH_SHORT_OFFSET(){return Nme}static get TIME_WITH_LONG_OFFSET(){return Ome}static get TIME_24_SIMPLE(){return Lme}static get TIME_24_WITH_SECONDS(){return Dme}static get TIME_24_WITH_SHORT_OFFSET(){return jme}static get TIME_24_WITH_LONG_OFFSET(){return $me}static get DATETIME_SHORT(){return Fme}static get DATETIME_SHORT_WITH_SECONDS(){return Vme}static get DATETIME_MED(){return zme}static get DATETIME_MED_WITH_SECONDS(){return Gme}static get DATETIME_MED_WITH_WEEKDAY(){return E9e}static get DATETIME_FULL(){return Ume}static get DATETIME_FULL_WITH_SECONDS(){return Bme}static get DATETIME_HUGE(){return Wme}static get DATETIME_HUGE_WITH_SECONDS(){return Hme}}function OE(t){if(dn.isDateTime(t))return t;if(t&&t.valueOf&&Ag(t.valueOf()))return dn.fromJSDate(t);if(t&&typeof t=="object")return dn.fromObject(t);throw new na(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const yVe="shortOffset";function vVe(t){return"timeZoneIANA"in t}function _Ve(t){return t.startsWith("UTC")}function XPt(t,e=!1){return{json:{read:{source:t,reader:(n,r)=>r[t]?xVe(r[t]):null},write:!!e&&{allowNull:!0,writer(n,r){r[t]=n?wVe(n):null}}}}}function xVe(t,e=Fd){return t?vVe(t)?t.timeZoneIANA:bVe(t,e):e}function wVe(t){return{timeZoneIANA:t}}function bVe(t,e=Fd){if(!t||!Xee.has(t.timeZone))return e;const n=Xee.get(t.timeZone);return _Ve(t.timeZone)||t.respectsDaylightSaving?n:EVe(n)}function EVe(t){const e=dn.local().setZone(t),n=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return n===0?"Etc/UTC":`Etc/GMT${ha.instance(-n).formatOffset(0,"narrow")}`}function ZPt(t,e,n,r,i){if(e&&i==="date")return{timeZone:qk,timeZoneName:void 0};const s=r.hour,o=n===YB;return{timeZone:o?i==="timestamp-offset"?void 0:t??qk:n,timeZoneName:o&&s?yVe:void 0}}function SVe(t){const e=new Set(["etc/utc","etc/gmt","gmt"]),n=new Set(Intl.supportedValuesOf("timeZone").map(r=>r.toLowerCase()));return t===Fd||t===YB||e.has(t.toLowerCase())||n.has(t.toLowerCase())}const TVe={dateStyle:void 0,year:void 0,month:void 0,day:void 0,weekday:void 0},kVe={timeStyle:void 0,hour12:void 0,hourCycle:void 0,hour:void 0,minute:void 0,second:void 0},Ige={timeZone:qk},Hh={year:"numeric",month:"numeric",day:"numeric"},LE={year:"numeric",month:"long",day:"numeric"},DE={year:"numeric",month:"short",day:"numeric"},jE={year:"numeric",month:"long",weekday:"long",day:"numeric"},zm={hour:"numeric",minute:"numeric"},iy={...zm,second:"numeric"},Pge={hourCycle:"h23"},$E={...zm,...Pge},FE={...iy,...Pge},Cge={"short-date":Hh,"short-date-short-time":{...Hh,...zm},"short-date-short-time-24":{...Hh,...$E},"short-date-long-time":{...Hh,...iy},"short-date-long-time-24":{...Hh,...FE},"short-date-le":Hh,"short-date-le-short-time":{...Hh,...zm},"short-date-le-short-time-24":{...Hh,...$E},"short-date-le-long-time":{...Hh,...iy},"short-date-le-long-time-24":{...Hh,...FE},"long-month-day-year":LE,"long-month-day-year-short-time":{...LE,...zm},"long-month-day-year-short-time-24":{...LE,...$E},"long-month-day-year-long-time":{...LE,...iy},"long-month-day-year-long-time-24":{...LE,...FE},"day-short-month-year":DE,"day-short-month-year-short-time":{...DE,...zm},"day-short-month-year-short-time-24":{...DE,...$E},"day-short-month-year-long-time":{...DE,...iy},"day-short-month-year-long-time-24":{...DE,...FE},"long-date":jE,"long-date-short-time":{...jE,...zm},"long-date-short-time-24":{...jE,...$E},"long-date-long-time":{...jE,...iy},"long-date-long-time-24":{...jE,...FE},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":zm,"long-time":iy},AVe=Ll()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),Rge={ar:"ar-u-nu-latn-ca-gregory",nn:"no-NN"},IVe=new Intl.DateTimeFormat("bs",{month:"long"}).formatToParts(new Date(2025,2)),PVe=IVe.find(({type:t})=>t==="month")?.value.toLowerCase();function Mge(){const t=qB();return(t&&Rge[t])??_me()}PVe!=="mart"&&(Rge.bs="sr-Latn-CS");let F9=new WeakMap;const ZO=Cge["short-date-short-time"];function CVe(t){let e=F9.get(t);if(!e){const n=Mge(),r=sW(t.timeZone??Fd),i={...t,timeZone:r};e=new Intl.DateTimeFormat(n,i),F9.set(t,e)}return e}function JPt(t){return Cge[t]}function QPt(t){const{dateStyle:e,timeStyle:n,hour12:r,year:i,month:s}=t,o={};return e?o.dateStyle=e:i&&(o.year=i,o.month=s||void 0),n&&!o.year&&(o.timeStyle=n,o.hour12=r==="auto"?void 0:r==="always"),o}function iW(t,e=ZO){return CVe(e).format(t)}function eCt(t,e=ZO){return iW(new Date(t),{...e,...Ige,...kVe})}function tCt(t,e=ZO){return iW(new Date(`1970-01-01T${t}Z`),{...e,...Ige,...TVe})}function nCt(t,e=ZO){if(e.timeZone)return iW(new Date(t),e);const n=dn.fromISO(t,{setZone:!0}),r=n.offset===0?qk:e.timeZone,i={...e,timeZone:r};return n.toLocaleString(i,{locale:Mge()})}function sW(t){switch(t){case Fd:return v9e;case YB:return qk;default:return t}}KB(()=>{F9=new WeakMap});const RVe={ar:"ar-u-nu-latn",bs:"sr-Latn-CS",nn:"no-NN"};let NM=new WeakMap,Nge={};function V9(t){const e=t||Nge;if(!NM.has(e)){const n=qB(),r=n&&RVe[n]||_me();NM.set(e,new Intl.NumberFormat(r,t))}return NM.get(e)}function rCt(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function iCt(t){const{minimumFractionDigits:e,maximumFractionDigits:n,useGrouping:r}=t;return{minimumFractionDigits:e,maximumFractionDigits:n,useGrouping:r==="auto"?"auto":r==="always"}}function sCt(t,e){return Object.is(t,-0)&&(t=0),V9(e).format(t)}function oCt(t,e=du()){if(!t)return null;let n=Ate.get(e);if(!n){const r=V9().formatToParts(12345.6),i=[...V9({useGrouping:!1}).format(9876543210)].reverse(),s=new Map(i.map((h,f)=>[h,f])),o=new RegExp(`[${r.find(h=>h.type==="group")?.value}]`,"g"),a=new RegExp(`[${r.find(h=>h.type==="decimal")?.value}]`),l=new RegExp(`[${i.join("")}]`,"g"),c=/[\u200E\u200F\u202A\u202B\u202C\u202D\u202E\u2066\u2067\u2068\u2069\u061C]/g,u=/[-\u2212\u2013\u2014\u2015]/g;n=h=>{if((h=h.trim().replaceAll(o,"").replace(a,".").replace(l,g=>String(s.get(g))).replaceAll(c,"").replaceAll(u,"-"))==="")return null;const f=Number(h);return isNaN(f)?null:f},Ate.set(e,n)}return n(t)}KB(()=>{NM=new WeakMap,Nge={}});const Ate=new Map;async function MVe(t,e,n,r){const i=e.exec(n);if(!i)throw new Xe("esri-intl:invalid-bundle",`Bundle id "${n}" is not compatible with the pattern "${e}"`);const s=i[1]?`${i[1]}/`:"",o=i[2],a=Tme(r),l=`${s}${o}.json`,c=a?`${s}${o}_${a}.json`:l;let u;try{u=await Ite(t(c))}catch(h){if(c===l)throw new Xe("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:h});try{u=await Ite(t(l))}catch(f){throw new Xe("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:f})}}return u}async function Ite(t){if(Pte.fetchBundleAsset!=null)return Pte.fetchBundleAsset(t);const e=await ns(t,{responseType:"text"});return JSON.parse(e.data)}let NVe=class{constructor({base:e="",pattern:n,location:r=new URL(window.location.href)}){let i;i=typeof r=="string"?s=>new URL(s,new URL(r,window.location.href)).href:r instanceof URL?s=>new URL(s,r).href:r,this.pattern=typeof n=="string"?new RegExp(`^${n}`):n,this.getAssetUrl=i,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(e,n){return MVe(this.getAssetUrl,this.matcher,e,n)}};function OVe(t){return new NVe(t)}const Pte={};p9e(OVe({pattern:"esri/",location:Hi}));let Ef=class extends Kt{constructor(e){super(e),this.apiKey=null,this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2",this.worldview=null}get languageParameter(){const e=this.language;let n=e==="local"||e==="global"?e:Tme(e??du())??"global";return n=n==="no"?"nb":n,n}};x([E()],Ef.prototype,"apiKey",void 0),x([E()],Ef.prototype,"id",void 0),x([E()],Ef.prototype,"language",void 0),x([E()],Ef.prototype,"places",void 0),x([E()],Ef.prototype,"serviceUrl",void 0),x([E()],Ef.prototype,"worldview",void 0),Ef=x([ue("esri.support.BasemapStyle")],Ef);const LVe=Ef,Oge=Symbol("BasemapInstance");function cCt(t){return t!=null&&typeof t=="object"&&Oge in t}function fn(t,e,n={}){return oW(t,e,n,Lge)}function wc(t,e,n={}){return oW(t,e,n,Dge)}function oW(t,e,n={},r){let i=null;const s=n.once?(o,a)=>{r(o)&&(ii(i),e(o,a))}:(o,a)=>{r(o)&&e(o,a)};if(i=V$e(t,s,n.sync,n.equals),n.initial){const o=t();s(o,o)}return i}function X1(t,e,n,r={}){let i=null,s=null,o=null;function a(){i&&s&&(s.remove(),r.onListenerRemove?.(i),i=null,s=null)}function l(u){r.once&&r.once&&ii(o),n(u)}const c=fn(t,(u,h)=>{a(),MO(u)&&(i=u,s=hb(u,e,l),r.onListenerAdd?.(u))},{sync:r.sync,initial:!0});return o=Zn(()=>{c.remove(),a()}),o}function aW(t,e){return DVe(t,Dge,e)}function DVe(t,e,n){if(ma(n))return Promise.reject(Cr());const r=t();if(e?.(r))return Promise.resolve(r);let i=null;function s(){i=ii(i)}return new Promise((o,a)=>{i=yv([vu(n,()=>{s(),a(Cr())}),oW(t,l=>{s(),o(l)},{sync:!1,once:!0},e??Lge)])})}function Lge(t){return!0}function Dge(t){return!!t}function uCt(t,e,n={}){let r=!1;const i=fn(t,(s,o)=>{r||e(s,o)},n);return{remove(){i.remove()},pause(){r=!0},resume(){r=!1}}}const Kg={sync:!0},ya={initial:!0},ra={sync:!0,initial:!0};let jge=0;const lW=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+jge++})}};return n=x([ue("esri.core.Identifiable")],n),n},cW=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:jge++})}};return n=x([ue("esri.core.Identifiable.NumericIdentifiable")],n),n};lW(class{});async function jVe(t){const e="portalItem"in t?t:{portalItem:t},{fromItem:n}=await _e(async()=>{const{fromItem:r}=await import("./portalLayers-DM13Rc-1.js");return{fromItem:r}},__vite__mapDeps([35,36,37,38,39,33]));try{return await n(e)}catch(r){const i=e?.portalItem,s=i?.id||"unset",o=i?.portal?.url||nr.portalUrl;throw kt.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",r),r}}const Cte={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function Xj(t,e,n,r=Fd){const i=new bh(sW(r)),s=dn.fromJSDate(t,{zone:i}),o=n==="decades"||n==="centuries"?"year":$ge(n);return n==="decades"&&(e*=10),n==="centuries"&&(e*=100),s.plus({[o]:e}).toJSDate()}function hCt(t,e,n="milliseconds"){const r=t.getTime(),i=$Ve(e,n,"milliseconds");return new Date(r+i)}function Rte(t,e,n=Fd){const r=new bh(sW(n)),i=dn.fromJSDate(t,{zone:r});if(e==="decades"||e==="centuries"){const o=i.startOf("year"),{year:a}=o,l=a-a%(e==="decades"?10:100);return o.set({year:l}).toJSDate()}const s=$ge(e);return i.startOf(s).toJSDate()}function $Ve(t,e,n){return t===0?0:t*Cte[e]/Cte[n]}function dCt(t,e){return t&&e?t.intersection(e):t||e}function $ge(t){switch(t){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var $c,Mw;let Pa=(Mw=class extends qt{static get allTime(){return Mte}static get empty(){return FVe}static fromArray(e){return new $c({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,n){return n.end!=null?new Date(n.end):null}writeEnd(e,n){n.end=e?.getTime()??null}get isAllTime(){return this.equals($c.allTime)}get isEmpty(){return this.equals($c.empty)}readStart(e,n){return n.start!=null?new Date(n.start):null}writeStart(e,n){n.start=e?.getTime()??null}clone(){return new $c({end:this.end,start:this.start})}equals(e){if(!e)return!1;const n=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,i=e.start?.getTime()??e.start,s=e.end?.getTime()??e.end;return n===i&&r===s}expandTo(e,n=Fd){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=Rte(r,e,n));let i=this.end;if(i){const s=Rte(i,e,n);i=i.getTime()===s.getTime()?s:Xj(s,1,e,n)}return new $c({start:r,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return $c.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const n=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,i=e.start?.getTime()??-1/0,s=e.end?.getTime()??1/0;let o,a;return i>=n&&i<=r?o=i:n>=i&&n<=s&&(o=n),r>=i&&r<=s?a=r:s>=n&&s<=r&&(a=s),o==null||a==null||isNaN(o)||isNaN(a)?$c.empty:new $c({start:o===-1/0?null:new Date(o),end:a===1/0?null:new Date(a)})}offset(e,n,r=Fd){if(this.isEmpty||this.isAllTime)return this.clone();const i=new $c,{start:s,end:o}=this;return s!=null&&(i.start=Xj(s,e,n,r)),o!=null&&(i.end=Xj(o,e,n,r)),i}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return Mte.clone();const n=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new $c({start:n,end:r})}},$c=Mw,Mw);x([E({type:Date,json:{write:{allowNull:!0}}})],Pa.prototype,"end",void 0),x([cr("end")],Pa.prototype,"readEnd",null),x([er("end")],Pa.prototype,"writeEnd",null),x([E({readOnly:!0,json:{read:!1}})],Pa.prototype,"isAllTime",null),x([E({readOnly:!0,json:{read:!1}})],Pa.prototype,"isEmpty",null),x([E({type:Date,json:{write:{allowNull:!0}}})],Pa.prototype,"start",void 0),x([cr("start")],Pa.prototype,"readStart",null),x([er("start")],Pa.prototype,"writeStart",null),Pa=$c=x([ue("esri.time.TimeExtent")],Pa);const Mte=new Pa,FVe=new Pa({start:void 0,end:void 0});let VVe=0,xi=class extends FO(lW(EI)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Vn(-180,-90,180,90,Bt.WGS84),this.id=Date.now().toString(16)+"-layer-"+VVe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Bt.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(e){const n=typeof e=="string"?{url:e}:e;return(await _e(async()=>{const{fromUrl:r}=await import("./arcgisLayers-kOp7pEs2.js");return{fromUrl:r}},__vite__mapDeps([40,36,37,39]))).fromUrl(n)}static fromPortalItem(e){return jVe(e)}initialize(){this.when().catch(e=>{wa(e)||kt.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){const{parent:e}=this;e&&(this.parent=null,e.removeChildLayer?.(this))}get effectiveVisible(){return this.visible&&(this.parent?.effectiveVisible??!0)}get hasAttributionData(){return this.attributionDataUrl!=null}get loaded(){return super.loaded}removeFromParent(){const{parent:e}=this;e&&(e.removeChildLayer?.(this),this.parent=null)}get parsedUrl(){return Ha(this.url)}createLayerView(e,n){return Promise.reject(new Xe("layer:create-layer-view","Layer does not support creating a layer view"))}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await ns(e,{query:{f:"json"},responseType:"json"})).data;throw new Xe("layer:no-attribution-data","Layer does not have attribution data")}};x([E({type:String})],xi.prototype,"attributionDataUrl",void 0),x([E({readOnly:!0})],xi.prototype,"effectiveVisible",null),x([E({type:Vn})],xi.prototype,"fullExtent",void 0),x([E({readOnly:!0})],xi.prototype,"hasAttributionData",null),x([E({type:String,clonable:!1})],xi.prototype,"id",void 0),x([E({type:Boolean,nonNullable:!0})],xi.prototype,"legendEnabled",void 0),x([E({type:["show","hide","hide-children"]})],xi.prototype,"listMode",void 0),x([E({type:Number,range:{min:0,max:1},nonNullable:!0})],xi.prototype,"opacity",void 0),x([E({clonable:!1})],xi.prototype,"parent",void 0),x([E({readOnly:!0})],xi.prototype,"parsedUrl",null),x([E({type:Boolean,readOnly:!0})],xi.prototype,"persistenceEnabled",void 0),x([E({type:Boolean})],xi.prototype,"popupEnabled",void 0),x([E({type:Boolean})],xi.prototype,"attributionVisible",void 0),x([E({type:Bt})],xi.prototype,"spatialReference",void 0),x([E({type:String})],xi.prototype,"title",void 0),x([E({readOnly:!0,json:{read:!1}})],xi.prototype,"type",void 0),x([E()],xi.prototype,"url",void 0),x([E({type:Pa})],xi.prototype,"visibilityTimeExtent",void 0),x([E({type:Boolean,nonNullable:!0})],xi.prototype,"visible",void 0),xi=x([ue("esri.layers.Layer")],xi);const BC=new WeakMap;function Fge(t){return!t.destroyed&&(BC.has(t)||t.addHandles([fn(()=>{const{parent:e}=t;return!!(e&&e instanceof xi)&&(e.type==="catalog-dynamic-group"||Fge(e))},e=>BC.set(t,e),ra),Zn(()=>BC.delete(t))]),BC.get(t))}function zVe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="feature"}function pCt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="graphics"}function GVe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="map-image"}function UVe(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph"&&"layers"in t}function mCt(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="knowledge-graph-sublayer"}function Nte(t){return t!=null&&typeof t=="object"&&"type"in t&&t.type==="subtype-group"&&"sublayers"in t}function J_(t){return t?.type==="subtype-sublayer"}const gCt={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function yCt(t){const e=t?.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function vCt(t){return t.type==="integrated-mesh"||t.type==="integrated-mesh-3dtiles"}function JO(t){return t?.type==="feature"&&!t.url&&t.source?.type==="memory"}function _Ct(t){const e=t?.type;return(e==="feature"||e==="subtype-group"||e==="oriented-imagery")&&t?.source?.type==="feature-layer"}function BVe(t){return t?.type==="feature"&&t.source?.type==="feature-layer"}function xCt(t){return zVe(t)&&BVe(t)}async function wCt(t,e){const n=Jr?.findServerInfo(t);if(n?.currentVersion!=null)return n.owningSystemUrl||null;const r=t.toLowerCase().indexOf("/rest/services");if(r===-1)return null;const i=`${t.slice(0,r)}/rest/info`,s=e!=null?e.signal:null,{data:o}=await ns(i,{query:{f:"json"},responseType:"json",signal:s});return o?.owningSystemUrl||null}function WVe(t){if(!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function HVe(t){return WVe(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function qVe(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"knowledge-graph-sublayer":return!0;default:return!1}}function KVe(t){return!!qVe(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}function YVe(t,e){return null}function bCt(t){return null}function XVe(t){return!t||t.type==="Feature Service"&&!t.sourceUrl}function ECt(t,e){!e||!XVe(t)||YVe(t.url)}const ZVe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wcs","wms","wmts"]),JVe=new Set(["integrated-mesh-3dtiles"]),Vge=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","parquet","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","video","web-tile","wcs","wfs","wms","wmts"]),QVe=new Set([...Vge,"link-chart"]);function eze(t){switch(t.layerContainerType){case"basemap-base-layers":return ZVe;case"basemap-ground-layers":return JVe;case"operational-layers":return t.origin==="link-chart"?QVe:Vge;default:return null}}function tze(t,e){if(e.restrictedWebMapWriting){const n=eze(e);return n==null||n.has(t.type)&&!JO(t)}return!0}function nze(t,e){if(e)if(JO(t)){const n=PO("featureCollection.layers",e),r=n?.[0]?.layerDefinition;r&&Ote(t,r)}else t.type!=="group"&&Ote(t,e)}function Ote(t,e){"maxScale"in t&&(e.maxScale=tN(t.maxScale)??void 0),"minScale"in t&&(e.minScale=tN(t.minScale)??void 0)}function rze(t,e){if(nze(t,e),e&&(e.id=t.id,"blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=tN(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(JO(t)){const n=e.featureCollection;n&&(n.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function Zj(t,e,n){if(!t.persistenceEnabled)return null;if(!("write"in t)||!t.write)return n?.messages&&n.messages.push(new Xe("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(JO(t)&&!t.isTable)e=t.resourceInfo;else if(tze(t,n)){const r={};return t.write(r,n)?r:null}return e!=null&&rze(t,e=Ze(e)),e}var Lte,Q_,y1;let nl=(y1=class extends u0(EI){constructor(e){super(e),this[Lte]=!0,this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.type="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Q_.idCounter++,this.baseLayers=new Ot,this.referenceLayers=new Ot,this.groundLayers=new Ot;const n=a=>{const{parent:l}=a;l&&l!==this&&"remove"in l&&l.remove?.(a),a.parent=this,a.type!=="elevation"&&a.type!=="integrated-mesh-3dtiles"||kt.getLogger(this).error(`Layer '${a.title}, id:${a.id}' of type '${a.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=a=>{const{parent:l}=a;l&&l!==this&&"remove"in l&&l.remove?.(a),a.parent=this},i=a=>{const l=a.item;return l.parent===this?(kt.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' already a ground layer, second add will be ignored.`),void a.preventDefault()):l.type!=="integrated-mesh-3dtiles"&&l.type!=="integrated-mesh"?(kt.getLogger(this).error(`Layer '${l.title}, id:${l.id}' of type '${l.type}' is not supported as a ground layer and will therefore be ignored.`),void a.preventDefault()):void 0},s=a=>{a.parent=null},o=a=>{a.parent===this&&(a.parent=null)};this.addHandles([this.baseLayers.on("after-add",a=>n(a.item)),this.baseLayers.on("after-remove",a=>s(a.item)),this.referenceLayers.on("after-add",a=>n(a.item)),this.referenceLayers.on("after-remove",a=>s(a.item)),this.groundLayers.on("before-add",i),this.groundLayers.on("after-add",a=>r(a.item)),this.groundLayers.on("after-remove",a=>o(a.item))])}initialize(){this.when().catch(e=>{kt.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const i of e)i.destroyed||i.destroy();const n=this.groundLayers.toArray();for(const i of n)i.destroyed||i.destroy();const r=this.referenceLayers.toArray();for(const i of r)i.destroyed||i.destroy();this.baseLayers.destroy(),this.groundLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=Di(this.portalItem)}removeChildLayer(e){for(const n of[this.baseLayers,this.referenceLayers,this.groundLayers])n.remove(e)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",kd(e,this._get("baseLayers")))}_writeBaseLayers(e,n,r){const i=[];e&&(r={...r,layerContainerType:"basemap-base-layers"},this.baseLayers.forEach(s=>{const o=Zj(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&i.push(o)}),this.referenceLayers.forEach(s=>{const o=Zj(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&(s.type!=="scene"&&(o.isReference=!0),i.push(o))})),n.baseMapLayers=i}set groundLayers(e){this._set("groundLayers",kd(e,this._get("groundLayers")))}_writeGroundLayers(e,n,r){const i=[];e&&(r={...r,layerContainerType:"basemap-ground-layers"},this.groundLayers.forEach(s=>{const o=Zj(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);o!=null&&i.push(o)}),i.length>0&&(n.groundLayers=i))}get loaded(){return super.loaded}set referenceLayers(e){this._set("referenceLayers",kd(e,this._get("referenceLayers")))}writeTitle(e,n){n.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return Wpe(this,e=>{e(this.baseLayers,this.groundLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(n=>mT(n)?n.clone():n),groundLayers:this.groundLayers.map(n=>mT(n)?n.clone():n),referenceLayers:this.referenceLayers.map(n=>mT(n)?n.clone():n)};return this.loaded&&(e.loadStatus="loaded"),new Q_({resourceInfo:this.resourceInfo}).set(e)}read(e,n){this.resourceInfo||this._set("resourceInfo",{data:e,context:n}),super.read(e,n)}write(e,n){return e=e||{},n?.origin||(n={origin:"web-map",...n}),super.write(e,n),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const i=Ze(r);return i.url&&Dd(i.url)&&(i.url=`https:${i.url}`),i.templateUrl&&Dd(i.templateUrl)&&(i.templateUrl=`https:${i.templateUrl}`),i})),e}async _loadFromSource(e){const{resourceInfo:n,portalItem:r,style:i}=this;mi(e);const s=[];if(n){const o=n.context?n.context.url:null;if(s.push(this._loadLayersFromJSON(n.data,o,e)),n.data.id&&!n.data.title){const a=n.data.id;s.push(y9e(a).then(l=>{l&&this.read({title:l},n.context)}))}}else r?s.push(this._loadFromItem(r,e)):i&&s.push(this._loadFromStylesService(i,e));await Promise.all(s)}async _loadLayersFromJSON(e,n,r){const i=this.resourceInfo?.context,s=this.portalItem?.portal||i?.portal||null,o=sze[i?.origin||""]??"web-map",{populateOperationalLayers:a}=await _e(async()=>{const{populateOperationalLayers:c}=await import("./layersCreator-KVTATrrb.js");return{populateOperationalLayers:c}},__vite__mapDeps([41,38,37,36,39,35,33,42])),l=[];if(mi(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const c={context:{...i,origin:o,url:n,portal:s,layerContainerType:"basemap-base-layers"},defaultLayerType:"DefaultTileLayer"},u=g=>o==="web-scene"&&g.layerType==="ArcGISSceneServiceLayer"||g.isReference,h=a(this.baseLayers,e.baseMapLayers.filter(g=>!u(g)),c);l.push(h);const f=a(this.referenceLayers,e.baseMapLayers.filter(u),c);l.push(f)}if(e.groundLayers&&Array.isArray(e.groundLayers)){const c={context:{...i,origin:o,url:n,portal:s,layerContainerType:"basemap-ground-layers"},defaultLayerType:"IntegratedMesh3DTilesLayer"},u=a(this.groundLayers,e.groundLayers,c);l.push(u)}await Promise.allSettled(l)}async _loadFromItem(e,n){const r=await e.load(n),i=await r.fetchData("json",n),s=Ha(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:ize[e.type||""]??"web-map",portal:e.portal||st.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||st.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,n)}async _loadFromStylesService(e,n){const r=e.serviceUrl.endsWith("/webmaps")?e.serviceUrl.slice(0,-8):e.serviceUrl,i=`${r}/styles/${e.id}/self`,s=`${r}/webmaps/${e.id}`,o=e.apiKey??nr.apiKeys.basemapStyles,[a,l]=await Promise.all([(await ns(i,{query:{token:o},signal:n?.signal})).data,(await ns(s,{query:{language:e.languageParameter,places:e.places,worldview:e.worldview,token:o},signal:n?.signal})).data]);this.thumbnailUrl??=a.thumbnailUrl;const c=Ha(s);if(this._set("resourceInfo",{data:l.baseMap??{},context:{origin:"web-map",url:c}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:l.spatialReference},this.resourceInfo.context),await this._loadLayersFromJSON(this.resourceInfo.data,c,n),o)for(const u of[...this.baseLayers,...this.groundLayers,...this.referenceLayers])"apiKey"in u&&(u.apiKey=o)}static fromId(e){const n=A9[e];return n?n.itemId?new Q_({portalItem:{id:n.itemId,portal:{url:"https://www.arcgis.com"}}}):Q_.fromJSON(n,n.is3d?{origin:"web-scene",portal:new st({url:"https://www.arcgis.com"})}:{origin:"web-map"}):null}},Lte=Oge,Q_=y1,y1.idCounter=0,y1);x([E({json:{read:!1,write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,n,r){this._writeBaseLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Ot}},writer(t,e,n,r){this._writeBaseLayers(t,e,r)}}}}}})],nl.prototype,"baseLayers",null),x([E({json:{read:!1,write:{ignoreOrigin:!0,target:"groundLayers",writer(t,e,n,r){this._writeGroundLayers(t,e,r)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{groundLayers:{type:Ot}},writer(t,e,n,r){this._writeGroundLayers(t,e,r)}}}}}})],nl.prototype,"groundLayers",null),x([E({type:String,json:{origins:{"web-scene":{write:!0}}}})],nl.prototype,"id",void 0),x([E({type:xn})],nl.prototype,"portalItem",void 0),x([E()],nl.prototype,"referenceLayers",null),x([E({readOnly:!0})],nl.prototype,"resourceInfo",void 0),x([E({type:Bt})],nl.prototype,"spatialReference",void 0),x([E({type:LVe})],nl.prototype,"style",void 0),x([E()],nl.prototype,"thumbnailUrl",void 0),x([E({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],nl.prototype,"title",void 0),x([er("title")],nl.prototype,"writeTitle",null),nl=Q_=x([ue("esri.Basemap")],nl);const ize={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},sze={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},xT=nl,oze=Object.freeze(Object.defineProperty({__proto__:null,default:xT},Symbol.toStringTag,{value:"Module"})),lN={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function aze(t){return!!lN[t]||!!lN[t.toLowerCase()]}function zge(t){return lN[t]??lN[t.toLowerCase()]}function SCt(t){return[...zge(t)]}function Jj(t,e,n){n<0&&++n,n>1&&--n;const r=6*n;return r<1?t+(e-t)*r:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function lze(t,e,n,r=1){const i=(t%360+360)%360/360,s=n<=.5?n*(e+1):n+e-n*e,o=2*n-s;return[Math.round(255*Jj(o,s,i+1/3)),Math.round(255*Jj(o,s,i)),Math.round(255*Jj(o,s,i-1/3)),r]}function TCt(t){const e=t.length>5,n=e?8:4,r=(1<<n)-1,i=e?1:17,s=e?t.length===9:t.length===5;let o=+("0x"+t.slice(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&r,o>>=n,a[3]=i*l/255),l=o&r,o>>=n,a[2]=i*l,l=o&r,o>>=n,a[1]=i*l,l=o&r,o>>=n,a[0]=i*l,a}function Gge(t){if(!t.startsWith("#")||isNaN(+`0x${t.slice(1)}`))return null;switch(t.length){case 4:case 5:{const e=parseInt(t.slice(1,2),16),n=parseInt(t.slice(2,3),16),r=parseInt(t.slice(3,4),16),i=t.length===4?15:parseInt(t.slice(4),16);return[e+16*e,n+16*n,r+16*r,(i+16*i)/255]}case 7:case 9:return[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16),(t.length===7?255:parseInt(t.slice(7),16))/255];default:return null}}function Uge(t){const e=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(e){const n=e[2].split(/\s*,\s*/),r=e[1];if(r==="rgb"&&n.length===3||r==="rgba"&&n.length===4){if(n[0].endsWith("%")){const i=n.map(s=>2.56*parseFloat(s));return n.length===4&&(i[3]=parseFloat(n[3])),Dte(i)}return Dte(n.map(i=>parseFloat(i)))}if(r==="hsl"&&n.length===3||r==="hsla"&&n.length===4)return lze(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3]??"1"))}return null}function Dte(t){return t[0]=hw(t[0]),t[1]=hw(t[1]),t[2]=hw(t[2]),t[3]=t.length===4?Wge(t[3]):1,t}function Bge(t){let e=aze(t)?zge(t):null;return e??=Uge(t),e??=Gge(t),e}function kCt(t){const e=Bge(t);return e!=null?[e[0]/255,e[1]/255,e[2]/255,e[3]]:null}function Wge(t){return Hge(t,0,1)}function hw(t){return Math.round(Hge(t,0,255))}function Hge(t,e,n){return t=Number(t),isNaN(t)?n:t<e?e:t>n?n:t}const qge=2.2,cze=1/qge;function ACt(t){return t**qge}function ICt(t){return t**cze}const jte=new Float32Array(1);function PCt(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function _u(t,e,n){return Math.min(Math.max(t,e),n)}function CCt(t){return!(t&t-1)}function RCt(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function _S(t,e,n){return t+(e-t)*n}function MCt(t,e,n,r,i){return _S(r,i,(t-e)/(n-e))}function PI(t){return t*Math.PI/180}function Kge(t){return 180*t/Math.PI}function NCt(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function OCt(t){return Math.acos(_u(t,-1,1))}function uze(t){return Math.asin(_u(t,-1,1))}function Ig(t,e,n=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=n}function LCt(t,e,n=1e-6){return!Ig(t,e,n)&&t>e}function DCt(t,e,n=1e-6){return!Ig(t,e,n)&&t<e}function jCt(t,e,n=1e-6){return Ig(t,e,n)||t>e}const cN=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function z9(t){return cN.setFloat64(0,t),cN.getBigInt64(0)}function hze(t){return cN.setBigInt64(0,t),cN.getFloat64(0)}const OM=1000000n,dze=Yge(1);function Yge(t){const e=z9(t=Math.abs(t)),n=hze(e<=OM?OM:e-OM);return Math.abs(t-n)}function $Ct(t,e,n=dze){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;if(n!=null&&Yge(Math.min(Math.abs(t),Math.abs(e)))<n)return Math.abs(t-e)<=n;const r=z9(t),i=z9(e);return r<0!=i<0?!1:!((r<i?i-r:r-i)>OM)}function Xge(t,e,n=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const r=Math.abs(t-e),i=Math.abs(t),s=Math.abs(e);if(t===0||e===0||i<1e-12&&s<1e-12){if(r>.01*n)return!1}else if(r/(i+s)>n)return!1;return!0}function FCt(t){return Zge(Math.max(-$te,Math.min(t,$te)))}function Zge(t){return jte[0]=t,jte[0]}function VCt(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],r=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(Ig(e,1)&&Ig(n,1)&&Ig(r,1))}function zCt(t,e){return(t%e+e)%e}const $te=Zge(34028234663852886e22);function GCt(t,e,n){if(n===void 0||+n==0)return Math[t](e);if(e=+e,n=+n,isNaN(e)||typeof n!="number"||n%1!=0)return NaN;let r=e.toString().split("e");return r=(e=Math[t](+(r[0]+"e"+(r[1]?+r[1]-n:-n)))).toString().split("e"),+(r[0]+"e"+(r[1]?+r[1]+n:n))}function WC(t){return _u(PB(t),0,255)}function HC(t,e){const n=t.toString(16).padStart(2,"0");return e?n.slice(0,1):n}let Jn=class Fc{static blendColors(e,n,r,i=new Fc){return i.r=Math.round(e.r+(n.r-e.r)*r),i.g=Math.round(e.g+(n.g-e.g)*r),i.b=Math.round(e.b+(n.b-e.b)*r),i.a=e.a+(n.a-e.a)*r,i._sanitize()}static fromRgb(e,n){const r=Uge(e);return r?Fc.fromArray(r,n):null}static fromHex(e,n=new Fc){const r=Gge(e);return r?Fc.fromArray(r,n):null}static fromArray(e,n=new Fc){return n._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(n.a)&&(n.a=1),n._sanitize()}static fromString(e,n){const r=Bge(e);return r?Fc.fromArray(r,n):null}static fromJSON(e){return e!=null?new Fc([e[0],e[1],e[2],(e[3]??255)/255]):void 0}static toUnitRGB(e){return e!=null?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e,n){return e==null?null:(n??=[0,0,0,0],n[0]=e.r/255,n[1]=e.g/255,n[2]=e.b/255,n[3]=e.a!=null?e.a:1,n)}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Fc.fromString(e,this):Array.isArray(e)?Fc.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Fc||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(e){const n=e?.capitalize??!1,r=e?.digits??6,i=r===3||r===4,s=r===4||r===8,o=`#${HC(this.r,i)}${HC(this.g,i)}${HC(this.b,i)}${s?HC(Math.round(255*this.a),i):""}`;return n?o.toUpperCase():o}toCss(e=!1){const n=this.r+", "+this.g+", "+this.b;return e?`rgba(${n}, ${this.a})`:`rgb(${n})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=0){const n=WC(this.r),r=WC(this.g),i=WC(this.b);return e===0||this.a!==1?[n,r,i,WC(255*this.a)]:[n,r,i]}clone(){return new Fc(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return e!=null&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=hw(this.r),this.g=hw(this.g),this.b=hw(this.b),this.a=Wge(this.a),this}_set(e,n,r,i){this.r=e,this.g=n,this.b=r,this.a=i}};Jn.prototype.declaredClass="esri.Color";let th=class extends Ot{constructor(e){super(e),this.getCollections=null}initialize(){this.addHandles(P$e(()=>this._refresh(),Kg))}destroy(){this.getCollections=null}_refresh(){const e=this.getCollections?.();if(e==null)return void this.removeAll();let n=0;for(const r of e)r!=null&&(n=this._processCollection(n,r));this.splice(n)}_createNewInstance(e){return new Ot(e)}_processCollection(e,n){if(!n)return e;const r=this.itemFilterFunction??(i=>!!i);for(const i of n)if(i){if(r(i)){const s=this.indexOf(i,e);s>=0?s!==e&&this.reorder(i,e):this.add(i,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(i);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};x([E()],th.prototype,"getCollections",void 0),x([E()],th.prototype,"getChildrenFunction",void 0),x([E()],th.prototype,"itemFilterFunction",void 0),th=x([ue("esri.core.CollectionFlattener")],th);function mn(t,e={}){const n=t instanceof Ys?t:new Ys(t,e),{alwaysWriteDefaults:r,default:i,ignoreUnknown:s=!0,name:o,nonNullable:a,readOnly:l=!1}=e;return E({type:s?n.apiValues:String,json:{type:n.jsonValues,default:i,name:o,read:!l&&{reader:n.read},write:{writer:n.write,alwaysWriteDefaults:r}},nonNullable:a,readOnly:l})}var G9;let LM=G9=class extends qt{constructor(t){super(t),this.type="none"}clone(){return new G9({type:this.type})}};x([mn({none:"none",stayAbove:"stay-above"}),E({json:{write:{isRequired:!0}}})],LM.prototype,"type",void 0),LM=G9=x([ue("esri.ground.NavigationConstraint")],LM);const Jge=Symbol("GroundInstance");function BCt(t){return t!=null&&typeof t=="object"&&Jge in t}function Qge(t){const e=PB(100*(1-t));return Math.max(0,Math.min(e,100))}function e0e(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}var Fte,U9,Fae;let Vc=U9=(Fae=class extends u0(EI){constructor(t){super(t),this[Fte]=!0,this.parent=null,this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Ot;const e=r=>{const{parent:i}=r;i&&i!==this&&"remove"in i&&i.remove?.(r),r.parent=this,r.type!=="elevation"&&r.type!=="base-elevation"&&kt.getLogger(this).error(`Layer '${r.title}, id:${r.id}' of type '${r.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},n=r=>{r.parent=null};this.addHandles([this.layers.on("after-add",r=>e(r.item)),this.layers.on("after-remove",r=>n(r.item))]),this.allLayers=new th({getCollections:()=>[this.layers,this.parent?.basemap?.groundLayers]})}removeChildLayer(t){this.layers.remove(t)}initialize(){this.when().catch(t=>{wa(t)||kt.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}get integratedMeshGround(){const t=this.parent?.basemap?.groundLayers.at(0);return t?.replacesTerrain?t:null}destroy(){const t=this.layers.removeAll();for(const e of t)Di(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}get loaded(){return super.loaded}get layers(){return this._get("layers")}set layers(t){this._set("layers",kd(t,this._get("layers")))}writeLayers(t,e,n,r){const i=[];t&&(r={...r,layerContainerType:"ground"},t.forEach(s=>{if("write"in s){const o={};r6e(s)().write(o,r)&&i.push(o)}else r?.messages&&r.messages.push(new Xe("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=i}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return Wpe(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e?.signal});const{queryAll:n}=await _e(()=>import("./ElevationQuery-BODJyq0-.js"),__vite__mapDeps([43,44]));return mi(e),n(this.layers.filter(Vte).toArray(),t,e)}async createElevationSampler(t,e){await this.load({signal:e?.signal});const{createSampler:n}=await _e(()=>import("./ElevationQuery-BODJyq0-.js"),__vite__mapDeps([43,44]));return mi(e),n(this.layers.filter(Vte).toArray(),t,e)}clone(){const t={opacity:this.opacity,surfaceColor:Ze(this.surfaceColor),navigationConstraint:Ze(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new U9({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}async _loadLayersFromJSON(t,e,n){const r=e?.origin||"web-scene",i=e?.portal||null,s=e?.url||null,{populateOperationalLayers:o}=await _e(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-KVTATrrb.js");return{populateOperationalLayers:l}},__vite__mapDeps([41,38,37,36,39,35,33,42]));mi(n);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:r,url:s,portal:i,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}await Promise.allSettled(a)}},Fte=Jge,Fae);function Vte(t){return t&&"createElevationSampler"in t}x([E()],Vc.prototype,"parent",void 0),x([E()],Vc.prototype,"integratedMeshGround",null),x([E({json:{read:!1,write:{isRequired:!0}}})],Vc.prototype,"layers",null),x([E()],Vc.prototype,"allLayers",void 0),x([er("layers")],Vc.prototype,"writeLayers",null),x([E({readOnly:!0})],Vc.prototype,"resourceInfo",void 0),x([E({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:jr,read:{reader:e0e,source:"transparency"},write:{writer:(t,e)=>{e.transparency=Qge(t)},target:"transparency"}}})],Vc.prototype,"opacity",void 0),x([E({type:Jn,json:{type:[jr],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],Vc.prototype,"surfaceColor",void 0),x([E({type:LM,json:{write:!0}})],Vc.prototype,"navigationConstraint",void 0),Vc=U9=x([ue("esri.Ground")],Vc);const uN=Vc,fze=Symbol("ClonableMixin"),vo=t=>{var i;var e;const n=t;let r=(i=class extends n{constructor(){super(...arguments),this[e]=!0}clone(s){const o=Ug(this);$fe(o,"unable to clone instance of non-accessor class");const a=o.metadata,l=o.store,c={},u=new Map;for(const f in a){const g=a[f],y=l?.originOf(f),_=g.clonable;if(g.readOnly||_===!1||y!==7&&y!==0&&y!==5&&y!==4)continue;const b=this[f];let T=null;if(typeof _=="function")T=_(b,s);else if(_==="reference")T=b;else if(T=Y8(b,s),b!=null&&T==null)continue;y===0?u.set(f,T):c[f]=T}const h=new(Object.getPrototypeOf(this)).constructor(c);if(u.size){const f=Ug(h)?.store;if(f)for(const[g,y]of u)f.set(g,y,0)}return h}},e=fze,i);return r=x([ue("esri.core.Clonable")],r),r},uW=vo(Kt),pze="randomUUID"in crypto;function CI(){if(pze)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=n=>t[n].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}function WCt(){return`{${CI().toUpperCase()}}`}function HCt(){return`{${CI()}}`}function qCt(t){const e=t.toUpperCase();return t.startsWith("{")?e:`{${e}}`}const A_={Base64:0,Hex:1,String:2,Raw:3},dw=8,t0e=(1<<dw)-1;function og(t,e){const n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function mze(t){const e=[];for(let n=0,r=t.length*dw;n<r;n+=dw)e[n>>5]|=(t.charCodeAt(n/dw)&t0e)<<n%32;return e}function gze(t){const e=[];for(let n=0,r=32*t.length;n<r;n+=dw)e.push(String.fromCharCode(t[n>>5]>>>n%32&t0e));return e.join("")}function yze(t){const e="0123456789abcdef",n=[];for(let r=0,i=4*t.length;r<i;r++)n.push(e.charAt(t[r>>2]>>r%4*8+4&15)+e.charAt(t[r>>2]>>r%4*8&15));return n.join("")}function vze(t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[];for(let i=0,s=4*t.length;i<s;i+=3){const o=(t[i>>2]>>i%4*8&255)<<16|(t[i+1>>2]>>(i+1)%4*8&255)<<8|t[i+2>>2]>>(i+2)%4*8&255;for(let a=0;a<4;a++)8*i+6*a>32*t.length?r.push("="):r.push(n.charAt(o>>6*(3-a)&63))}return r.join("")}function _ze(t,e){return t<<e|t>>>32-e}function QO(t,e,n,r,i,s){return og(_ze(og(og(e,t),og(r,s)),i),n)}function Wo(t,e,n,r,i,s,o){return QO(e&n|~e&r,t,e,i,s,o)}function Ho(t,e,n,r,i,s,o){return QO(e&r|n&~r,t,e,i,s,o)}function qo(t,e,n,r,i,s,o){return QO(e^n^r,t,e,i,s,o)}function Ko(t,e,n,r,i,s,o){return QO(n^(e|~r),t,e,i,s,o)}function xze(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let n=1732584193,r=-271733879,i=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const a=n,l=r,c=i,u=s;n=Wo(n,r,i,s,t[o],7,-680876936),s=Wo(s,n,r,i,t[o+1],12,-389564586),i=Wo(i,s,n,r,t[o+2],17,606105819),r=Wo(r,i,s,n,t[o+3],22,-1044525330),n=Wo(n,r,i,s,t[o+4],7,-176418897),s=Wo(s,n,r,i,t[o+5],12,1200080426),i=Wo(i,s,n,r,t[o+6],17,-1473231341),r=Wo(r,i,s,n,t[o+7],22,-45705983),n=Wo(n,r,i,s,t[o+8],7,1770035416),s=Wo(s,n,r,i,t[o+9],12,-1958414417),i=Wo(i,s,n,r,t[o+10],17,-42063),r=Wo(r,i,s,n,t[o+11],22,-1990404162),n=Wo(n,r,i,s,t[o+12],7,1804603682),s=Wo(s,n,r,i,t[o+13],12,-40341101),i=Wo(i,s,n,r,t[o+14],17,-1502002290),r=Wo(r,i,s,n,t[o+15],22,1236535329),n=Ho(n,r,i,s,t[o+1],5,-165796510),s=Ho(s,n,r,i,t[o+6],9,-1069501632),i=Ho(i,s,n,r,t[o+11],14,643717713),r=Ho(r,i,s,n,t[o],20,-373897302),n=Ho(n,r,i,s,t[o+5],5,-701558691),s=Ho(s,n,r,i,t[o+10],9,38016083),i=Ho(i,s,n,r,t[o+15],14,-660478335),r=Ho(r,i,s,n,t[o+4],20,-405537848),n=Ho(n,r,i,s,t[o+9],5,568446438),s=Ho(s,n,r,i,t[o+14],9,-1019803690),i=Ho(i,s,n,r,t[o+3],14,-187363961),r=Ho(r,i,s,n,t[o+8],20,1163531501),n=Ho(n,r,i,s,t[o+13],5,-1444681467),s=Ho(s,n,r,i,t[o+2],9,-51403784),i=Ho(i,s,n,r,t[o+7],14,1735328473),r=Ho(r,i,s,n,t[o+12],20,-1926607734),n=qo(n,r,i,s,t[o+5],4,-378558),s=qo(s,n,r,i,t[o+8],11,-2022574463),i=qo(i,s,n,r,t[o+11],16,1839030562),r=qo(r,i,s,n,t[o+14],23,-35309556),n=qo(n,r,i,s,t[o+1],4,-1530992060),s=qo(s,n,r,i,t[o+4],11,1272893353),i=qo(i,s,n,r,t[o+7],16,-155497632),r=qo(r,i,s,n,t[o+10],23,-1094730640),n=qo(n,r,i,s,t[o+13],4,681279174),s=qo(s,n,r,i,t[o],11,-358537222),i=qo(i,s,n,r,t[o+3],16,-722521979),r=qo(r,i,s,n,t[o+6],23,76029189),n=qo(n,r,i,s,t[o+9],4,-640364487),s=qo(s,n,r,i,t[o+12],11,-421815835),i=qo(i,s,n,r,t[o+15],16,530742520),r=qo(r,i,s,n,t[o+2],23,-995338651),n=Ko(n,r,i,s,t[o],6,-198630844),s=Ko(s,n,r,i,t[o+7],10,1126891415),i=Ko(i,s,n,r,t[o+14],15,-1416354905),r=Ko(r,i,s,n,t[o+5],21,-57434055),n=Ko(n,r,i,s,t[o+12],6,1700485571),s=Ko(s,n,r,i,t[o+3],10,-1894986606),i=Ko(i,s,n,r,t[o+10],15,-1051523),r=Ko(r,i,s,n,t[o+1],21,-2054922799),n=Ko(n,r,i,s,t[o+8],6,1873313359),s=Ko(s,n,r,i,t[o+15],10,-30611744),i=Ko(i,s,n,r,t[o+6],15,-1560198380),r=Ko(r,i,s,n,t[o+13],21,1309151649),n=Ko(n,r,i,s,t[o+4],6,-145523070),s=Ko(s,n,r,i,t[o+11],10,-1120210379),i=Ko(i,s,n,r,t[o+2],15,718787259),r=Ko(r,i,s,n,t[o+9],21,-343485551),n=og(n,a),r=og(r,l),i=og(i,c),s=og(s,u)}return[n,r,i,s]}function wze(t,e=A_.Hex){const n=e||A_.Base64,r=xze(mze(t),t.length*dw);switch(n){case A_.Raw:return r;case A_.Hex:return yze(r);case A_.String:return gze(r);case A_.Base64:return vze(r)}}function bze(t){return t&&"getAtOrigin"in t&&"originOf"in t}function B9(t){return hW[Eze(t)]||Tze}function Eze(t){return t.type==="json"?"application/json":t.type==="blob"?t.blob.type:Sze(t.url)}function Sze(t){const e=Rfe(t);return W9[e]||n0e}const hW={},n0e="text/plain",Tze=hW[n0e],W9={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const t in W9)hW[W9[t]]=t;function kze(t){const e=t?.origins??[void 0];return(n,r)=>{const i=Aze(t,n,r);for(const s of e){const o=RB(n,s,r);for(const a in i)o[a]=i[a]}}}function Aze(t,e,n){if(t?.type==="resource")return Ize(t,e,n);switch(t?.type??"other"){case"other":return{read:!0,write:!0};case"url":{const{read:r,write:i}=hje;return{read:r,write:i}}}}function Ize(t,e,n){const r=xI(e,n);return{type:String,read:(i,s,o)=>{const a=NO(i,s,o);return r.type===String?a:typeof r.type=="function"?new r.type({url:a}):void 0},write:{isRequired:r.json?.write?.isRequired,writer(i,s,o,a){if(!a?.resources)return typeof i=="string"?void(s[o]=w2(i,a)):void(s[o]=i.write({},a));const l=Rze(i),c=w2(l,{...a,verifyItemRelativeUrls:a?.verifyItemRelativeUrls?{writtenUrls:a.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},1),u=r.type!==String&&(!bze(this)||a?.origin&&this.originIdOf(n)>TB(a.origin)),h={object:this,propertyName:n,value:i,targetUrl:c,dest:s,targetPropertyName:o,context:a,params:t};a?.portalItem&&c&&!Tl(c)?u&&t?.contentAddressed?H9(h):u?Pze(h):Cze(h):a?.portalItem&&(c==null||zfe(c)!=null||mI(c)||u)?H9(h):s[o]=c}}}}function H9(t){const{targetUrl:e,params:n,value:r,context:i,dest:s,targetPropertyName:o}=t;if(!i.portalItem)return;const a=Gfe(e),l=i0e(r,e,i);if(n?.contentAddressed&&l.type!=="json")return void i.messages?.push(new Xe("persistable:contentAddressingUnsupported",`Property "${o}" is trying to serializing a resource with content of type ${l.type} with content addressing. Content addressing is only supported for json resources.`,{content:l}));const c=n?.contentAddressed&&l.type==="json"?wze(l.jsonString):a?.filename??CI(),u=pI(n?.prefix??a?.prefix,c),h=`${u}.${B9(l)}`;if(n?.contentAddressed&&i.resources&&l.type==="json"){const y=i.resources.toKeep.find(({resource:_})=>_.path===h)??i.resources.toAdd.find(({resource:_})=>_.path===h);if(y)return void(s[o]=y.resource.itemRelativeUrl)}const f=i.portalItem.resourceFromPath(h);mI(e)&&i.resources&&i.resources.pendingOperations.push($6e(e).then(y=>{f.path=`${u}.${B9({type:"blob",blob:y})}`,s[o]=f.itemRelativeUrl}).catch(()=>{}));const g=n?.compress??!1;i.resources&&r0e({...t,resource:f,content:l,compress:g,updates:i.resources.toAdd}),s[o]=f.itemRelativeUrl}function Pze(t){const{context:e,targetUrl:n,params:r,value:i,dest:s,targetPropertyName:o}=t;if(!e.portalItem)return;const a=e.portalItem.resourceFromPath(n),l=i0e(i,n,e),c=B9(l),u=Rfe(a.path),h=r?.compress??!1;c===u?(e.resources&&r0e({...t,resource:a,content:l,compress:h,updates:e.resources.toUpdate}),s[o]=n):H9(t)}function Cze({context:t,targetUrl:e,dest:n,targetPropertyName:r}){t.portalItem&&t.resources&&(t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(e),compress:!1}),n[r]=e)}function r0e({object:t,propertyName:e,updates:n,resource:r,content:i,compress:s}){const o=a=>{Mze(t,e,a)};n.push({resource:r,content:i,compress:s,finish:o})}function i0e(t,e,n){return typeof t=="string"?{type:"url",url:e}:{type:"json",jsonString:JSON.stringify(t.toJSON(n))}}function Rze(t){return t==null?null:typeof t=="string"?t:t.url}function Mze(t,e,n){typeof t[e]=="string"?t[e]=n.url:t[e].url=n.url}let DM=class extends vo(qt){constructor(e){super(e),this.color=null}};x([E({type:Jn,json:{type:[jr],write:!0}})],DM.prototype,"color",void 0),DM=x([ue("esri.effects.FocusAreaOutline")],DM);const Nze=DM;function YCt(t){const e=[];for(t.reset();t.nextPath();){const n=[];for(;t.nextPoint();)n.push([t.x,t.y]);e.push(n)}return t.reset(),e}function Oze(t){const e=[];for(;t.nextPoint();)e.push([t.x,t.y]);return t.seekPathStart(),e}function XCt(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,n=t.hasM;if(t.type==="point")return n&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:n?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice();if(t.type==="polyline")return t.paths.slice();if(t.type==="multipoint")return t.points.map(r=>[r]);if(t.type==="extent"){const r=t.clone().normalize();if(!r)return null;let i=!1,s=!1;return r.forEach(o=>{o.hasZ&&(i=!0),o.hasM&&(s=!0)}),r.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(s&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a})}return null}function eL(t,e){const n=e[0]-t[0],r=e[1]-t[1];if(t.length>2&&e.length>2){const i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}return Math.sqrt(n*n+r*r)}function s0e(t,e,n){const r=t[0]+n*(e[0]-t[0]),i=t[1]+n*(e[1]-t[1]);return t.length>2&&e.length>2?[r,i,t[2]+n*(e[2]-t[2])]:[r,i]}function Lze(t,e,n,r){return Dze(t,e,n[r],n[r+1])}function Dze(t,e,n,r){const[i,s]=e,[o,a]=n,[l,c]=r,u=l-o,h=c-a,f=u*u+h*h,g=(i-o)*u+(s-a)*h,y=Math.min(1,Math.max(0,g/f));return t[0]=o+u*y,t[1]=a+h*y,t}function ZCt(t,e,n,r,i,s){let o=n,a=r,l=i-o,c=s-a;if(l!==0||c!==0){const u=((t-o)*l+(e-a)*c)/(l*l+c*c);u>1?(o=i,a=s):u>0&&(o+=l*u,a+=c*u)}return l=t-o,c=e-a,l*l+c*c}function o0e(t,e){return s0e(t,e,.5)}function JCt(t){const e=t.length;let n=0;for(let r=0;r<e-1;++r)n+=eL(t[r],t[r+1]);return n}function QCt(t,e){if(e<=0)return t[0];const n=t.length;let r=0;for(let i=0;i<n-1;++i){const s=eL(t[i],t[i+1]);if(e-r<s){const o=(e-r)/s;return s0e(t[i],t[i+1],o)}r+=s}return t[n-1]}function a0e(t,e=0,n=1){let r=0;const i=t.length;let s=t[0];for(let o=1;o<i;o++){const a=t[o];r+=(a[e]-s[e])*(a[n]+s[n]),s=a}if(l0e(t)){const o=t[0];r+=(o[e]-s[e])*(o[n]+s[n])}return r>=0}function l0e(t){const e=t.length;return e>0&&!kO(t[0],t[e-1])}function eRt(t){"rings"in t&&(jze(t),$ze(t))}function jze(t){if("rings"in t)for(const e of t.rings)l0e(e)&&e.push(e[0].slice())}function $ze(t){if(!("rings"in t)||t.rings.length===0||a0e(t.rings[0]))return!1;for(const e of t.rings)e.reverse();return!0}function tRt(t){return t.type!=="polygon"&&t.type!=="polyline"||Fze(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function Fze(t,e){const n=za(e);if(!n)return;const r=n.valid[0],i=n.valid[1],s=i-r;for(const o of t){let a=1/0,l=-1/0;for(const u of o){const h=Vze(u[0],r,i);a=Math.min(a,h),l=Math.max(l,h),u[0]=h}const c=l-a;s-c<c&&o.forEach(u=>{u[0]<0&&(u[0]+=s)})}}function Vze(t,e,n){const r=n-e;return t<e?n-(e-t)%r:t>n?e+(t-e)%r:t}function nRt(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="mesh"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[n,r]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return n.length===r.length&&n.every((i,s)=>i.length===r[s].length)}function rRt(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function zze(t){return Uze(t.rings,t.hasZ??!1)}function Gze(t){const e=zze(t);if(!e)return null;const{hasZ:n,spatialReference:r}=t,[i,s,o]=e;return isNaN(i)||isNaN(s)||n&&isNaN(o)?null:{x:i,y:s,z:n?o:void 0,spatialReference:r}}function Uze(t,e){if(!t?.length)return null;const n=[],r=[],i=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const a=c0e(t[s],e,i);a&&r.push(a)}if(r.sort((s,o)=>{let a=s[2]-o[2];return a===0&&e&&(a=s[4]-o[4]),a}),r.length&&(n[0]=r[0][0],n[1]=r[0][1],e&&(n[2]=r[0][3]),(n[0]<i[0]||n[0]>i[1]||n[1]<i[2]||n[1]>i[3]||e&&(n[2]<i[4]||n[2]>i[5]))&&(n.length=0)),!n.length){const s=t[0]&&t[0].length?Bze(t[0],e):null;if(!s)return null;n[0]=s[0],n[1]=s[1],e&&s.length>2&&(n[2]=s[2])}return n}function c0e(t,e,n){let r=0,i=0,s=0,o=0,a=0;const l=t.length?t[0][0]:0,c=t.length?t[0][1]:0,u=t.length&&e?t[0][2]:0;for(let f=0;f<t.length;f++){const g=t[f],y=t[(f+1)%t.length],[_,b,T]=g,A=_-l,I=b-c,[P,N,L]=y,C=P-l,M=N-c,O=A*M-C*I;if(o+=O,r+=(A+C)*O,i+=(I+M)*O,e&&g.length>2&&y.length>2){const D=T-u,V=L-u,U=A*V-C*D;s+=(D+V)*U,a+=U}_<n[0]&&(n[0]=_),_>n[1]&&(n[1]=_),b<n[2]&&(n[2]=b),b>n[3]&&(n[3]=b),e&&(T<n[4]&&(n[4]=T),T>n[5]&&(n[5]=T))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const h=[r/(6*o)+l,i/(6*o)+c,o];return e&&(n[4]===n[5]||a===0?(h[3]=(n[4]+n[5])/2,h[4]=0):(h[3]=s/(6*a)+u,h[4]=a)),h}function iRt(t,e){let n=0,r=0,i=0;t.nextPoint();const s=t.pathSize?t.x:0,o=t.pathSize?t.y:0;for(let a=0;a<t.pathSize;a++){t.seekInPath(a);const l=[t.x,t.y];t.seekInPath((a+1)%t.pathSize);const c=[t.x,t.y],[u,h]=l,f=u-s,g=h-o,[y,_]=c,b=y-s,T=_-o,A=f*T-b*g;i+=A,n+=(f+b)*A,r+=(g+T)*A,u<e[0]&&(e[0]=u),u>e[1]&&(e[1]=u),h<e[2]&&(e[2]=h),h>e[3]&&(e[3]=h)}return i>0&&(i*=-1),i?(i*=.5,[n/(6*i)+s,r/(6*i)+o,i]):null}function Bze(t,e){const n=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;for(let l=0,c=t.length;l<c-1;l++){const u=t[l],h=t[l+1];if(u&&h){n[0]=u[0],n[1]=u[1],r[0]=h[0],r[1]=h[1],e&&u.length>2&&h.length>2&&(n[2]=u[2],r[2]=h[2]);const f=eL(n,r);if(f){i+=f;const g=o0e(u,h);s+=f*g[0],o+=f*g[1],e&&g.length>2&&(a+=f*g[2])}}}return i>0?e?[s/i,o/i,a/i]:[s/i,o/i]:t.length?t[0]:null}function Wze(t){const{hasZ:e,totalSize:n}=t;if(n===0)return null;const r=[],i=[],s=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(t.reset();t.nextPath();){const o=c0e(Oze(t),t.hasZ,s);o&&i.push(o)}if(i.sort((o,a)=>{let l=o[2]-a[2];return l===0&&e&&(l=o[4]-a[4]),l}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],e&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||e&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){t.reset(),t.nextPath();const o=t.pathSize?Hze(t):null;if(!o)return null;r[0]=o[0],r[1]=o[1],e&&o.length>2&&(r[2]=o[2])}return r}function Hze(t){const{hasZ:e}=t,n=e?[0,0,0]:[0,0],r=e?[0,0,0]:[0,0];let i=0,s=0,o=0,a=0;if(t.nextPoint()){let l=t.x,c=t.y,u=t.z;for(;t.nextPoint();){const h=t.x,f=t.y,g=t.z;n[0]=l,n[1]=c,r[0]=h,r[1]=f,e&&(n[2]=u,r[2]=g);const y=eL(n,r);if(y){i+=y;const _=o0e(n,r);s+=y*_[0],o+=y*_[1],e&&_.length>2&&(a+=y*_[2])}l=h,c=f,u=g}}return i>0?e?[s/i,o/i,a/i]:[s/i,o/i]:t.pathSize?(t.seekPathStart(),t.nextPoint(),[t.x,t.y]):null}const qze=1e-6;function sRt(t){let e=0;for(t.reset();t.nextPath();)e+=t.getCurrentRingArea();if(e<qze){const i=Wze(t);return i?[i[0],i[1]]:null}const n=[0,0];if(t.reset(),!t.nextPath()||!t.nextPoint())return null;const r=[t.x,t.y];for(t.reset();t.nextPath();)Yze(n,r,t);return n[0]*=1/e,n[1]*=1/e,n[0]+=r[0],n[1]+=r[1],n}const Kze=1/3;function Yze(t,e,n){if(!t||!n||n.pathSize<3)return null;n.nextPoint();const r=n.x,i=n.y;n.nextPoint();let s,o=n.x-r,a=n.y-i,l=0,c=0;for(;n.nextPoint();)l=n.x-r,c=n.y-i,s=.5*Kze*(l*a-c*o),t[0]+=s*(o+l),t[1]+=s*(a+c),o=l,a=c;const u=n.getCurrentRingArea(),h=[r,i];return h[0]-=e[0],h[1]-=e[1],h[0]*=u,h[1]*=u,t[0]+=h[0],t[1]+=h[1],t}function bl(t=tGe){return[t[0],t[1],t[2],t[3]]}function u0e(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function Xze(t,e,n,r,i=bl()){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function oRt(t,e=bl()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function Zze(t,e,n=new Vn){return n.xmin=t[0],n.ymin=t[1],n.xmax=t[2],n.ymax=t[3],n.spatialReference=e,n}function nu(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Jze(t,e){e<t[0]&&(t[0]=e),e>t[2]&&(t[2]=e)}function Qze(t,e){e<t[1]&&(t[1]=e),e>t[3]&&(t[3]=e)}function aRt(t,e,n){if(e!=null)if("length"in e)K9(e)?(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.max(t[2],e[0]),n[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":n[0]=Math.min(t[0],e.xmin),n[1]=Math.min(t[1],e.ymin),n[2]=Math.max(t[2],e.xmax),n[3]=Math.max(t[3],e.ymax);break;case"point":n[0]=Math.min(t[0],e.x),n[1]=Math.min(t[1],e.y),n[2]=Math.max(t[2],e.x),n[3]=Math.max(t[3],e.y)}else u0e(n,t)}function lRt(t,e,n=t){const r=e.length;let i=t[0],s=t[1],o=t[2],a=t[3];for(let l=0;l<r;l++){const c=e[l];i=Math.min(i,c[0]),s=Math.min(s,c[1]),o=Math.max(o,c[0]),a=Math.max(a,c[1])}return n[0]=i,n[1]=s,n[2]=o,n[3]=a,n}function cRt(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function dW(t){return t==null||t[0]>=t[2]?0:t[2]-t[0]}function fW(t){return t==null||t[1]>=t[3]?0:t[3]-t[1]}function uRt(t){return dW(t)*fW(t)}function hRt(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function dRt(t){const e=dW(t),n=fW(t);return Math.sqrt(e*e+n*n)}function fRt(t,e){return!!t&&q9(t,e.x,e.y)}function q9(t,e,n){return e>=t[0]&&n>=t[1]&&e<=t[2]&&n<=t[3]}function pRt(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function mRt(t,e,n){return Math.max(e[0],t[0])-n<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])-n<=Math.min(e[3],t[3])}function eGe(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function gRt(t,e,n,r){return r??=t,r[0]=t[0]+e,r[1]=t[1]+n,r[2]=t[2]+e,r[3]=t[3]+n,r}function yRt(t){return t?u0e(t,zte):bl(zte)}function K9(t){return t!=null&&t.length===4}function vRt(t,e){return K9(t)&&K9(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const zte=[1/0,1/0,-1/0,-1/0],tGe=[0,0,0,0];let pW=1e-6;function kl(){return pW}function nGe(t){pW=t}const mW=Math.random,rGe=Math.PI/180,iGe=180/Math.PI;function gW(t){return t*rGe}function sGe(t){return t*iGe}function oGe(t,e){return Math.abs(t-e)<=pW*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:mW,equals:oGe,getEpsilon:kl,setEpsilon:nGe,toDegree:sGe,toRadian:gW},Symbol.toStringTag,{value:"Module"}));function fw(t,e){return t[0]=e[0],t[1]=e[1],t}function lo(t,e,n){return t[0]=e,t[1]=n,t}function h0e(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function Yk(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function d0e(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function f0e(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function aGe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function lGe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function cGe(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function uGe(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function hGe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function RI(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function dGe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function tL(t,e){const n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function Xk(t,e){const n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function hN(t){const e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function p0e(t){const e=t[0],n=t[1];return e*e+n*n}function m0e(t,e){return t[0]=-e[0],t[1]=-e[1],t}function fGe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Y9(t,e){const n=e[0],r=e[1];let i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}function g0e(t,e){return t[0]*e[0]+t[1]*e[1]}function y0e(t,e,n){const r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function pGe(t,e,n,r){const i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function mGe(t,e=1){const n=2*mW()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function gGe(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function cd(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function jM(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function yGe(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function vGe(t,e,n,r){const i=e[0]-n[0],s=e[1]-n[1],o=Math.sin(r),a=Math.cos(r);return t[0]=i*a-s*o+n[0],t[1]=i*o+s*a+n[1],t}function _Ge(t,e){const n=t[0],r=t[1],i=e[0],s=e[1];let o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));let a=i*i+s*s;a>0&&(a=1/Math.sqrt(a));const l=(n*i+r*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function xGe(t){return"vec2("+t[0]+", "+t[1]+")"}function wGe(t,e){return t[0]===e[0]&&t[1]===e[1]}function bGe(t,e){const n=t[0],r=t[1],i=e[0],s=e[1],o=kl();return Math.abs(n-i)<=o*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))}function EGe(t,e,n,r,i){let s=e[0]-n[0],o=e[1]-n[1];const a=(r[0]*s+r[1]*o)*(i-1);return s=r[0]*a,o=r[1]*a,t[0]=e[0]+s,t[1]=e[1]+o,t}const SGe=hN,yW=Yk,TGe=d0e,kGe=f0e,AGe=tL,IGe=Xk,PGe=p0e;Object.freeze(Object.defineProperty({__proto__:null,add:h0e,angle:_Ge,ceil:aGe,copy:fw,cross:y0e,dist:AGe,distance:tL,div:kGe,divide:f0e,dot:g0e,equals:bGe,exactEquals:wGe,floor:lGe,inverse:fGe,len:SGe,length:hN,lerp:pGe,max:uGe,min:cGe,mul:TGe,multiply:d0e,negate:m0e,normalize:Y9,projectAndScale:EGe,random:mGe,rotate:vGe,round:hGe,scale:RI,scaleAndAdd:dGe,set:lo,sqrDist:IGe,sqrLen:PGe,squaredDistance:Xk,squaredLength:p0e,str:xGe,sub:yW,subtract:Yk,transformMat2:gGe,transformMat2d:cd,transformMat3:jM,transformMat4:yGe},Symbol.toStringTag,{value:"Module"}));function Gf(t,e,n,r){return t[0]=e[0]*(1-r)+n[0]*r,t[1]=e[1]*(1-r)+n[1]*r,t}function $a(t,e){return Xk(t,e)}function _Rt(t,e,n){const r=$a(e,n);if(r===0)return $a(e,t);const i=(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0]);return i*i/r}function CGe(t,e,n,r,i){const[s,o]=e,[a,l]=n,[c,u]=r,[h,f]=i,g=(s-a)*(u-f)-(o-l)*(c-h);if(g===0)return null;const y=(s*l-o*a)*(c-h)-(s-a)*(c*f-u*h),_=(s*l-o*a)*(u-f)-(o-l)*(c*f-u*h);return t[0]=y/g,t[1]=_/g,t}const uh=2*Math.PI;function c1(t,e){const n=Math.atan2(t,e);return n<0?n+uh:n}function v0e(t){return Math.abs(t)%uh}function Gte(t){const e=v0e(t);return e<Math.PI?e:uh-e}function nL(t,e){return{min:Math.min(t,e),max:Math.max(t,e)}}function _0e(t,e,n,r){if(Ig(v0e(t-e),0))return n?[t,t]:[t,r?t-uh:t+uh];const[i,s]=r?[t-uh,t]:[t,t+uh];return[t,MI({min:i,max:s},e)]}function MI({min:t,max:e},n){let r;return r=e-n,r>=uh?(r-=r%uh,n+r):(r=n-t,r>=uh?(r-=r%uh,n-r):n)}function RGe(t,e){const n=MI(t,e);return n>t.min&&n<t.max?n:Gte(n-t.min)<Gte(n-t.max)?t.min:t.max}function x0e(t,e,n,r=10){return e.map(i=>{let s=i;for(let o=0;o<r;o++){const[a,l,c,u,h,f]=n(s),g=t[0]-a,y=t[1]-l,_=-c,b=-u;s+=-(2*g*_+2*y*b)/(2*_*_+2*g*-h+2*b*b+2*y*-f||1e-6)}return s})}const MGe=[0,0];function w0e(t){const e=1-t,n=e*e,r=t*t;return[n*e,3*t*n,3*r*e,r*t]}function X9(t,e,n,r,i){const[s,o,a,l]=w0e(i);return[t[0]*s+e[0]*o+n[0]*a+r[0]*l,t[1]*s+e[1]*o+n[1]*a+r[1]*l]}function Ute(t,e,n,r,i){const[s,o,a,l]=w0e(i);return t*s+e*o+n*a+r*l}function xRt(t,e,n){const r=t,[i,s,o]=e.b;return X9(r,s,o,i,n)}function NGe(t,e,n){const r=t,[i,s,o]=e.b,a=Gf([0,0],r,s,n),l=Gf(MGe,s,o,n),c=Gf([0,0],o,i,n),u=Gf([0,0],a,l,n),h=Gf([0,0],l,c,n);return[{b:[Gf([],u,h,n),a,u]},{b:[[...i],h,c]}]}function wRt(t,e,n){const r=t,[i,s,o]=e.b,a=x0e(n,[.1,.5,.9],h=>{const f=1-h,[g,y]=X9(r,s,o,i,h);return[g,y,3*f*f*(s[0]-r[0])+6*f*h*(o[0]-s[0])+3*h*h*(i[0]-o[0]),3*f*f*(s[1]-r[1])+6*f*h*(o[1]-s[1])+3*h*h*(i[1]-o[1]),6*f*(o[0]-2*s[0]+r[0])+6*h*(i[0]-2*o[0]+s[0]),6*f*(o[1]-2*s[1]+r[1])+6*h*(i[1]-2*o[1]+s[1])]}).map(h=>Math.min(1,Math.max(0,h)));a.push(0,1);let l=1/0;const c=a.map(h=>{const f=X9(r,s,o,i,h),[g,y]=f,_=n[0]-g,b=n[1]-y,T=Math.sqrt(_*_+b*b);return l=Math.min(T,l),{t:h,curvePoint:f,distance:T}}),u=[];for(const h of c){const{t:f,distance:g}=h;Xge(g,l)&&!u.some(({t:y})=>Ig(y,f))&&u.push(h)}return u}function OGe(t,e,n){const r=e,[i,s,o]=n.b;if(nu(t,r),nu(t,i),q9(t,s[0],s[1])&&q9(t,o[0],o[1]))return t;for(const a of Bte(r[0],s[0],o[0],i[0]))a>0&&a<1&&Jze(t,Ute(r[0],s[0],o[0],i[0],a));for(const a of Bte(r[1],s[1],o[1],i[1]))a>0&&a<1&&Qze(t,Ute(r[1],s[1],o[1],i[1],a));return t}function Bte(t,e,n,r){const i=3*(3*(e-n)-t+r),s=6*(t-2*e+n),o=3*(e-t);if(i===0)return s!==0?[-o/s]:[];const a=Math.sqrt(s*s-4*i*o);return[(-s+a)/(2*i),(-s-a)/(2*i)]}function bRt(t,e,n){let i=0,s=[e];for(let o=0;o<16;o++){let a=t;const l=[];for(const u of s)l.push(...NGe(a,u,.5)),a=u.b[0];s=l,a=t,i=0;let c=0;for(const u of s){const[h,f,g]=u.b,y=Math.sqrt($a(a,h));i+=(y+(Math.sqrt($a(a,f))+Math.sqrt($a(f,g))+Math.sqrt($a(g,h))))/2,c+=y,a=h}if(i-c<n)return i}return i}function LGe(t,e,n){const[r,i]=t,[s,o]=e,[a,l]=n,[c,u]=[s-r,o-i];let h=c*(a-r)+u*(l-i);h/=c**2+u**2,h=_u(h,0,1);const f=Gf([0,0],t,e,h);return{t:h,curvePoint:f,distance:Math.sqrt($a(f,n))}}let b0e=class{constructor(e,n,r,i,s,o){this.cx=e,this.cy=n,this.radius=r,this.thetaStart=i,this.thetaEnd=s,this.isInvalid=o}get startPoint(){const{cx:e,cy:n,radius:r,thetaStart:i}=this;return[e+r*Math.cos(i),n+r*Math.sin(i)]}get endPoint(){const{cx:e,cy:n,radius:r,thetaEnd:i}=this;return[e+r*Math.cos(i),n+r*Math.sin(i)]}};function dN(t,e){const{cx:n,cy:r,radius:i}=t;return[n+i*Math.cos(e),r+i*Math.sin(e)]}function $M(t,e){if(t.isInvalid)return Gf([0,0],t.startPoint,t.endPoint,e);const{thetaStart:n,thetaEnd:r}=t;return dN(t,n*(1-e)+r*e)}function SRt(t,e){if(t.isInvalid)return LGe(t.startPoint,t.endPoint,e);const{cx:n,cy:r,thetaStart:i,thetaEnd:s}=t,[o,a]=e,l=RGe(nL(i,s),Math.atan2(a-r,o-n)),c=dN(t,l);return{t:(l-i)/(s-i),curvePoint:c,distance:Math.sqrt($a(e,c))}}function Wte(t,e){if(e.isInvalid)return nu(t,e.startPoint),nu(t,e.endPoint),t;const{cx:n,cy:r,radius:i,thetaStart:s,thetaEnd:o}=e;nu(t,dN(e,s)),nu(t,dN(e,o));const a=nL(s,o),l=Math.PI/2;let c=0;for(const u of[[n+i,r],[n,r+i],[n-i,r],[n,r-i]])c=MI(a,c),c>a.min&&c<a.max&&nu(t,u),c+=l;return t}function TRt(t){if(t.isInvalid)return 2*t.radius;const{radius:e,thetaStart:n,thetaEnd:r}=t;return e*Math.abs(r-n)}function DGe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function jGe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function pw(t,e,n,r,i,s,o,a,l,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t}function E0e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function S0e(t,e){if(t===e){const n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function T0e(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,f=-u*s+a*l,g=c*s-o*l;let y=n*h+r*f+i*g;return y?(y=1/y,t[0]=h*y,t[1]=(-u*r+i*c)*y,t[2]=(a*r-i*o)*y,t[3]=f*y,t[4]=(u*n-i*l)*y,t[5]=(-a*n+i*s)*y,t[6]=g*y,t[7]=(-c*n+r*l)*y,t[8]=(o*n-r*s)*y,t):null}function $Ge(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t[0]=o*u-a*c,t[1]=i*c-r*u,t[2]=r*a-i*o,t[3]=a*l-s*u,t[4]=n*u-i*l,t[5]=i*s-n*a,t[6]=s*c-o*l,t[7]=r*l-n*c,t[8]=n*o-r*s,t}function FM(t){const e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*(c*s-o*l)+n*(-c*i+o*a)+r*(l*i-s*a)}function Zk(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=n[0],g=n[1],y=n[2],_=n[3],b=n[4],T=n[5],A=n[6],I=n[7],P=n[8];return t[0]=f*r+g*o+y*c,t[1]=f*i+g*a+y*u,t[2]=f*s+g*l+y*h,t[3]=_*r+b*o+T*c,t[4]=_*i+b*a+T*u,t[5]=_*s+b*l+T*h,t[6]=A*r+I*o+P*c,t[7]=A*i+I*a+P*u,t[8]=A*s+I*l+P*h,t}function Z9(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=n[0],g=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=f*r+g*o+c,t[7]=f*i+g*a+u,t[8]=f*s+g*l+h,t}function k0e(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=Math.sin(n),g=Math.cos(n);return t[0]=g*r+f*o,t[1]=g*i+f*a,t[2]=g*s+f*l,t[3]=g*o-f*r,t[4]=g*a-f*i,t[5]=g*l-f*s,t[6]=c,t[7]=u,t[8]=h,t}function FGe(t,e,n){const r=n[0],i=n[1],s=n[2];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function VGe(t,e,n){const r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t}function zGe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function GGe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function UGe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function BGe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function WGe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,h=r*a,f=i*o,g=i*a,y=i*l,_=s*o,b=s*a,T=s*l;return t[0]=1-h-y,t[3]=u-T,t[6]=f+b,t[1]=u+T,t[4]=1-c-y,t[7]=g-_,t[2]=f-b,t[5]=g+_,t[8]=1-c-h,t}function HGe(t,e){const n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10],h=u*o-a*c,f=-u*s+a*l,g=c*s-o*l,y=n*h+r*f+i*g;if(!y)return null;const _=1/y;return t[0]=h*_,t[1]=(-u*r+i*c)*_,t[2]=(a*r-i*o)*_,t[3]=f*_,t[4]=(u*n-i*l)*_,t[5]=(-a*n+i*s)*_,t[6]=g*_,t[7]=(-c*n+r*l)*_,t[8]=(o*n-r*s)*_,t}function qGe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],y=e[12],_=e[13],b=e[14],T=e[15],A=n*a-r*o,I=n*l-i*o,P=n*c-s*o,N=r*l-i*a,L=r*c-s*a,C=i*c-s*l,M=u*_-h*y,O=u*b-f*y,D=u*T-g*y,V=h*b-f*_,U=h*T-g*_,G=f*T-g*b;let de=A*G-I*U+P*V+N*D-L*O+C*M;return de?(de=1/de,t[0]=(a*G-l*U+c*V)*de,t[1]=(l*D-o*G-c*O)*de,t[2]=(o*U-a*D+c*M)*de,t[3]=(i*U-r*G-s*V)*de,t[4]=(n*G-i*D+s*O)*de,t[5]=(r*D-n*U-s*M)*de,t[6]=(_*C-b*L+T*N)*de,t[7]=(b*P-y*C-T*I)*de,t[8]=(y*L-_*P+T*A)*de,t):null}function KGe(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function YGe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function XGe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function ZGe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function A0e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function JGe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function QGe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function eUe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function tUe(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=e[0],f=e[1],g=e[2],y=e[3],_=e[4],b=e[5],T=e[6],A=e[7],I=e[8],P=kl();return Math.abs(n-h)<=P*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-f)<=P*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-g)<=P*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(s-y)<=P*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(o-_)<=P*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-b)<=P*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(l-T)<=P*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(c-A)<=P*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(u-I)<=P*Math.max(1,Math.abs(u),Math.abs(I))}function nUe(t){const e=kl(),n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8];return Math.abs(1-(n*n+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(i*i+a*a+u*u))<=e}const rUe=Zk,iUe=A0e;Object.freeze(Object.defineProperty({__proto__:null,add:ZGe,adjoint:$Ge,copy:jGe,determinant:FM,equals:tUe,exactEquals:eUe,frob:XGe,fromMat2d:BGe,fromMat4:DGe,fromQuat:WGe,fromRotation:GGe,fromScaling:UGe,fromTranslation:zGe,identity:E0e,invert:T0e,isOrthoNormal:nUe,mul:rUe,multiply:Zk,multiplyScalar:JGe,multiplyScalarAndAdd:QGe,normalFromMat4:qGe,normalFromMat4Legacy:HGe,projection:KGe,rotate:k0e,scale:FGe,scaleByVec2:VGe,set:pw,str:YGe,sub:iUe,subtract:A0e,translate:Z9,transpose:S0e},Symbol.toStringTag,{value:"Module"}));function xv(){return[1,0,0,0,1,0,0,0,1]}function sUe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]}function oUe(t,e,n,r,i,s,o,a,l){return[t,e,n,r,i,s,o,a,l]}const aUe=xv();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:aUe,clone:sUe,create:xv,fromValues:oUe},Symbol.toStringTag,{value:"Module"}));const I_=xv();function lUe(t,e,n){const[r,i]=t,[s,o]=e,[a,l]=n;pw(I_,r,s,a,i,o,l,1,1,1);const c=FM(I_),u=4*c/($a(t,e)+$a(e,n)+$a(n,t));if(!isFinite(u)||Math.abs(u)<1e-8)return null;const h=r**2+i**2,f=s**2+o**2,g=a**2+l**2;pw(I_,h,f,g,i,o,l,1,1,1);const y=FM(I_);return pw(I_,h,f,g,r,s,a,1,1,1),[y/c*.5,FM(I_)/c*-.5]}function I0e(t,e){const[n,r]=e.c,i=lUe(t,r,n),s=i==null,o=i??Gf([],t,n,.5),[a,l]=t,[c,u]=r,[h,f]=n,[g,y]=o,_=a-g,b=l-y,T=Math.sqrt(_*_+b*b),A=c1(l-y,a-g),I=c1(u-y,c-g);let P=c1(f-y,h-g);return(I-A)*(P-I)<0&&(P+=2*Math.sign(A-P)*Math.PI),new b0e(g,y,T,A,P,s)}function kRt(t,e,n){const r=$M(t,n/2),i=$M(t,n),s=$M(t,(n+1)/2);return[{c:[i,r]},{c:[[...e.c[0]],s]}]}function ARt(t,e){const[n]=e.c,{cx:r,cy:i,thetaStart:s,thetaEnd:o,radius:a,isInvalid:l}=I0e(t,e);return{a:[n,[r,i],Math.abs(o-s)<Math.PI?1:0,s>o?1:0,l?s:0,a,l?0:1]}}function IRt(t){return"curveRings"in t&&!!t.curveRings?.length||"curvePaths"in t&&!!t.curvePaths?.length}function PRt(t){return"curveRings"in t?t.curveRings:t.curvePaths}function vW(t){return"b"in t}function _W(t){return"c"in t}function rL(t){return Array.isArray(t)}function CRt(t){return"a"in t}function P0e(t){return"a"in t&&t.a.length===4}function cUe(t){return"a"in t&&t.a.length===7}function Qj(t){return rL(t)?t:vW(t)?t.b[0]:_W(t)?t.c[0]:t.a[0]}function uUe(t){if(vW(t)){const[e,n,r]=t.b;return{b:[[...e],[...n],[...r]]}}if(_W(t)){const[e,n]=t.c;return{c:[[...e],[...n]]}}if(rL(t))return[...t];if(P0e(t)){const[e,n,r,i]=t.a;return{a:[[...e],[...n],r,i]}}if(cUe(t)){const[e,n,r,i,s,o,a]=t.a;return{a:[[...e],[...n],r,i,s,o,a]}}return t}function hUe(t,e){const[n,r,i,s]=e.a,[o,a]=t,[l,c]=n,[u,h]=r,f=o-u,g=a-h,y=Math.sqrt(f*f+g*g),_=l-u,b=c-h,T=Math.sqrt(_*_+b*b),A=y===0||T===0||!Xge(y,T),I=y,[P,N]=_0e(c1(a-h,o-u),Math.atan2(c-h,l-u),i,s);return new b0e(u,h,I,P,N,A)}function RRt(t,e,n){const{cx:r,cy:i,thetaStart:s,thetaEnd:o}=t,[a,l,c,u]=e.a,h=s*(1-n)+o*n;return[{a:[$M(t,n),[r,i],Math.abs(h-s)<Math.PI?1:0,u]},{a:[[...a],[r,i],Math.abs(o-h)<Math.PI?1:0,u]}]}let dUe=class{constructor(e,n,r,i,s,o,a,l,c){this.cx=e,this.cy=n,this.a=r,this.b=i,this.cosR=s,this.sinR=o,this.u1=a,this.u2=l,this.isInvalid=c}};function xW(t,e){const[n,r,i,s,o,a,l]=e.a,[c,u]=t,[h,f]=n,[g,y]=r,_=a*l,b=Math.cos(o),T=Math.sin(o),[A,I]=_0e(c1(1/_*(u-y)*b-1/_*(c-g)*T,1/a*(u-y)*T+1/a*(c-g)*b),Math.atan2(1/_*(f-y)*b-1/_*(h-g)*T,1/a*(f-y)*T+1/a*(h-g)*b),i,s);return new dUe(g,y,a,_,b,T,A,I,a===0||_===0)}function Jk(t,e){const{a:n,b:r,cosR:i,sinR:s,cx:o,cy:a}=t,l=Math.cos(e),c=Math.sin(e);return[n*l*i-r*c*s+o,n*l*s+r*c*i+a]}function ex(t,e){const{u1:n,u2:r}=t;return Jk(t,n*(1-e)+r*e)}function NRt(t,e,n){if(n<0||n>1)return[];if(n===0||n===1)return[uUe(e)];const[r,[i,s],o,a,l,c,u]=e.a,{u1:h,u2:f}=t,g=h*(1-n)+f*n;return[{a:[[...ex(t,n)],[i,s],Math.abs(g-h)<Math.PI?1:0,a,l,c,u]},{a:[[...r],[i,s],Math.abs(f-g)<Math.PI?1:0,a,l,c,u]}]}function ORt(t,e){const{a:n,b:r,cosR:i,sinR:s,u1:o,u2:a}=t,l=Math.PI/6,c=x0e(e,[1*l,2*l,4*l,5*l,7*l,8*l,10*l,11*l],_=>{const b=Math.cos(_),T=Math.sin(_),[A,I]=Jk(t,_);return[A,I,-n*i*T-r*s*b,-n*s*T+r*i*b,-n*i*b+r*s*T,-n*s*b-r*i*T]}),u=nL(o,a),h=new Set(c.map(_=>MI(u,_)).filter(_=>_>u.min&&_<u.max));h.add(o),h.add(a);let f,g,y=1/0;for(const _ of h){const b=Jk(t,_),[T,A]=b,I=e[0]-T,P=e[1]-A,N=I*I+P*P;N<y&&(f=(_-o)/(a-o),g=b,y=N)}return{t:f,curvePoint:g,distance:Math.sqrt(y)}}function fUe(t,e,n){const r=xW(e,n),{a:i,b:s,u1:o,u2:a,cosR:l,sinR:c,isInvalid:u}=r,h=n.a[0];if(nu(t,e),nu(t,h),u)return t;const f=Math.atan2(-s*c,i*l),g=f+Math.PI,y=Math.atan2(s*l,i*c),_=y+Math.PI,b=nL(o,a);for(const T of[f,g,y,_].map(A=>MI(b,A)))T>b.min&&T<b.max&&nu(t,Jk(r,T));return t}function LRt(t,e,n){const[r,i,s,o,a,l,c]=e.a,u=xW(t,e),{u1:h,u2:f,isInvalid:g}=u,y=f-h;if(g)return Math.sqrt($a(t,r));const _=14,b=[0,0];let T=0,A=[ex(u,0),ex(u,.25),ex(u,.5),ex(u,.75),ex(u,1)];for(let I=0;I<_;I++){const P=A.length-1,N=y/(2*P),L=[];for(let M=0;M<P;M++)L.push(A[M]),L.push(Jk(u,h+(2*M+1)*N));L.push(A[A.length-1]),A=L,T=0;let C=0;for(let M=1;M<A.length;M++){const O=A[M-1],D=A[M];if(T+=Math.sqrt($a(O,D)),M>1){const V=A[M-2],U=CGe(b,V,O,i,D);C+=U?Math.sqrt($a(O,U)):Math.abs(D[0]-O[0])+Math.abs(D[1]-O[1])}else C+=T}if(C-T<n)return T}return T}const Hte=xv(),qC=xv(),qte=xv(),vm=xv();function DRt(t,e,n){const[r,i,s,o,a,l,c]=e.a,u=xW(t,e),{cosR:h,sinR:f,a:g,b:y,cx:_,cy:b}=u,T=jM([0,0],r,n),A=jM([0,0],i,n),I=n[0]*n[4]<0?1-o:o;{const P=g*g*f*f+y*y*h*h,N=2*(y*y-g*g)*f*h,L=g*g*h*h+y*y*f*f,C=-2*P*_-N*b,M=-N*_-2*L*b;pw(Hte,P,N/2,C/2,N/2,L,M/2,C/2,M/2,P*_*_+N*_*b+L*b*b-g*g*y*y)}if(T0e(qC,n),qC==null){const P=jM([0,0],t,n);return{a:[T,A,s,o,c1(T[1],T[0]),Math.sqrt($a(T,P))/2,0]}}S0e(qte,qC),Zk(vm,Zk(vm,qte,Hte),qC);{const P=vm[0],N=2*vm[1],L=vm[4],C=2*vm[2],M=2*vm[5],O=N*N-4*P*L,D=2*(P*M*M+L*C*C-N*C*M+O*vm[8]),V=Math.sqrt((P-L)**2+N*N),U=-Math.sqrt(D*(P+L+V))/O,G=-Math.sqrt(D*(P+L-V))/O;return{a:[T,A,s,I,.5*c1(-N,L-P),U,G/U]}}}function pUe(t,e,n){if(rL(n))return nu(t,e),nu(t,n),t;if(vW(n))return OGe(t,e,n);if(_W(n)){const r=I0e(e,n);return Wte(t,r)}if(P0e(n)){const r=hUe(e,n);return Wte(t,r)}return fUe(t,e,n)}function C0e(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function R0e(t){return t.points!==void 0}function M0e(t){return t.x!==void 0&&t.y!==void 0}function N0e(t){return t.paths!==void 0}function O0e(t){return t.rings!==void 0}function L0e(t){function e(n,r){return n==null?r:r==null?n:t(n,r)}return e}const ag=L0e(Math.min),lg=L0e(Math.max);function jRt(t,e){return N0e(e)?P2(t,e.curvePaths??e.paths,!1,!1)??t:O0e(e)?P2(t,e.curveRings??e.rings,!1,!1)??t:R0e(e)?wW(t,e.points,!1,!1,!1,!1):C0e(e)?D0e(t,e):(M0e(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function $Rt(t){let e,n,r,i;for(t.reset(),e=r=1/0,n=i=-1/0;t.nextPath();){const s=mUe(t);e=Math.min(s[0],e),r=Math.min(s[1],r),n=Math.max(s[2],n),i=Math.max(s[3],i)}return bl([e,r,n,i])}function mUe(t){let e,n,r,i;for(e=r=1/0,n=i=-1/0;t.nextPoint();)e=Math.min(t.x,e),r=Math.min(t.y,r),n=Math.max(t.x,n),i=Math.max(t.y,i);return bl([e,r,n,i])}function FRt(t,e){return N0e(e)?P2(t,e.curvePaths??e.paths,!0,!1)??t:O0e(e)?P2(t,e.curveRings??e.rings,!0,!1)??t:R0e(e)?wW(t,e.points,!0,!1,!0,!1):C0e(e)?D0e(t,e,!0,!1,!0,!1):(M0e(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function P2(t,e,n,r){const i=n?3:2;if(!e.length||!e[0].length)return null;let s,o,a,l,[c,u]=Qj(e[0][0]),h=c,f=u;for(let g=0;g<e.length;g++){const y=e[g];for(let _=0;_<y.length;_++){const b=Qj(y[_]),[T,A]=b;if(c=ag(c,T),u=ag(u,A),h=lg(h,T),f=lg(f,A),n&&b.length>2){const L=b[2];s=ag(s,L),o=lg(o,L)}if(r&&b.length>i){const L=b[i];a=ag(s,L),l=lg(o,L)}const I=y[_];if(rL(I)||_<1)continue;const P=Qj(y[_-1]),N=Xze(c,u,h,f);[c,u,h,f]=pUe(N,P,I)}}return n?r?(t[0]=c,t[1]=u,t[2]=s,t[3]=a,t[4]=h,t[5]=f,t[6]=o,t[7]=l,t.length=8,t):(t[0]=c,t[1]=u,t[2]=s,t[3]=h,t[4]=f,t[5]=o,t.length=6,t):r?(t[0]=c,t[1]=u,t[2]=a,t[3]=h,t[4]=f,t[5]=l,t.length=6,t):(t[0]=c,t[1]=u,t[2]=h,t[3]=f,t.length=4,t)}function D0e(t,e,n,r,i,s){const o=e.xmin,a=e.xmax,l=e.ymin,c=e.ymax;let u=e.zmin,h=e.zmax,f=e.mmin,g=e.mmax;return i?(u=u||0,h=h||0,s?(f=f||0,g=g||0,t[0]=o,t[1]=l,t[2]=u,t[3]=f,t[4]=a,t[5]=c,t[6]=h,t[7]=g,t):(t[0]=o,t[1]=l,t[2]=u,t[3]=a,t[4]=c,t[5]=h,t)):s?(f=f||0,g=g||0,t[0]=o,t[1]=l,t[2]=f,t[3]=a,t[4]=c,t[5]=g,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=c,t)}function wW(t,e,n,r,i,s){const o=n?3:2,a=r&&s,l=n&&i;if(!e.length||!e[0].length)return null;let c,u,h,f,[g,y]=e[0],[_,b]=e[0];for(let T=0;T<e.length;T++){const A=e[T],[I,P]=A;if(g=ag(g,I),y=ag(y,P),_=lg(_,I),b=lg(b,P),l&&A.length>2){const N=A[2];c=ag(c,N),u=lg(u,N)}if(a&&A.length>o){const N=A[o];h=ag(c,N),f=lg(u,N)}}return i?(c=c||0,u=u||0,s?(h=h||0,f=f||0,t[0]=g,t[1]=y,t[2]=c,t[3]=h,t[4]=_,t[5]=b,t[6]=u,t[7]=f,t):(t[0]=g,t[1]=y,t[2]=c,t[3]=_,t[4]=b,t[5]=u,t)):s?(h=h||0,f=f||0,t[0]=g,t[1]=y,t[2]=h,t[3]=_,t[4]=b,t[5]=f,t):(t[0]=g,t[1]=y,t[2]=_,t[3]=b,t)}function gUe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function yUe(t){return t.points!==void 0}function vUe(t){return t.x!==void 0&&t.y!==void 0}function _Ue(t){return t.paths!==void 0}function xUe(t){return t.rings!==void 0}const bW=[];function j0e(t,e,n,r){return{xmin:t,ymin:e,xmax:n,ymax:r}}function $0e(t,e,n,r,i,s){return{xmin:t,ymin:e,zmin:n,xmax:r,ymax:i,zmax:s}}function F0e(t,e,n,r,i,s){return{xmin:t,ymin:e,mmin:n,xmax:r,ymax:i,mmax:s}}function V0e(t,e,n,r,i,s,o,a){return{xmin:t,ymin:e,zmin:n,mmin:r,xmax:i,ymax:s,zmax:o,mmax:a}}function EW(t,e=!1,n=!1){return e?n?V0e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):$0e(t[0],t[1],t[2],t[3],t[4],t[5]):n?F0e(t[0],t[1],t[2],t[3],t[4],t[5]):j0e(t[0],t[1],t[2],t[3])}function VRt(t){return t?gUe(t)?t:vUe(t)?wUe(t):xUe(t)?G0e(t):_Ue(t)?U0e(t):yUe(t)?z0e(t):null:null}function z0e(t){const{hasZ:e,hasM:n,points:r}=t,i=wW(bW,r,e??!1,n??!1,e??!1,n??!1);return i?EW(i,e,n):null}function wUe(t){const{x:e,y:n,z:r,m:i}=t,s=i!=null;return r!=null?s?V0e(e,n,r,i,e,n,r,i):$0e(e,n,r,e,n,r):s?F0e(e,n,i,e,n,i):j0e(e,n,e,n)}function G0e(t){const{hasZ:e,hasM:n,rings:r,curveRings:i}=t,s=P2(bW,i??r,e??!1,n??!1);return s?EW(s,e,n):null}function U0e(t){const{hasZ:e,hasM:n,paths:r,curvePaths:i}=t,s=P2(bW,i??r,e??!1,n??!1);return s?EW(s,e,n):null}function C2(t,e,n=!1){let{hasM:r,hasZ:i}=t;Array.isArray(e)?e.length!==4||r||i?e.length===3&&n&&!r?(i=!0,r=!1):e.length===3&&r&&i&&(r=!1,i=!1):(r=!0,i=!0):(i=!i&&e.hasZ&&(!r||e.hasM),r=!r&&e.hasM&&(!i||e.hasZ)),t.hasZ=i,t.hasM=r}var VM;function Kte(t){return!Array.isArray(t[0])}function bUe(t){return typeof t[0]?.[0]=="number"}function EUe(t){if(!t)return;let{rings:e,hasM:n,hasZ:r,spatialReference:i}=t;switch(e??=[],bUe(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,n??=!0;break;case 3:r??=n!==!0,n??=!r;break;default:r??=!1,n??=!1}return i??=Bt.WGS84,{...t,hasM:n,hasZ:r,rings:e,spatialReference:i}}let wi=VM=class extends Gs{static fromExtent(t){const e=t.clone().normalize(),{spatialReference:n}=t;let r=!1,i=!1;for(const o of e)o.hasZ&&(r=!0),o.hasM&&(i=!0);const s={rings:e.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let c=0;c<a.length;c++)a[c].push(l)}if(i&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let c=0;c<a.length;c++)a[c].push(l)}return a}),spatialReference:n};return r&&(s.hasZ=!0),i&&(s.hasM=!0),new VM(s)}constructor(t){super(EUe(t)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){o9(kt.getLogger(this),"centroid",{replacement:"Please use centroidOperator.execute() instead.",version:"4.34",warnOnce:!0});const t=Gze(this);return t?Jt.fromJSON(t):null}writeCurveRings(t,e){e.curveRings=Ze(t)}get extent(){const t=G0e(this),{spatialReference:e}=this;return t?new Vn({...t,spatialReference:e}):null}get isSelfIntersecting(){return o9(kt.getLogger(this),"isSelfIntersecting",{replacement:"Please use simplifyOperator.isSimple() instead.",version:"4.33",warnOnce:!0}),r9e(this.rings)}writeRings(t,e){e.rings=Ze(this.rings)}addRing(t){if(!t)return;const e=this.rings,n=e.length;if(Kte(t)){const r=[];for(let i=0,s=t.length;i<s;i++)r[i]=t[i].toArray();e[n]=r}else e[n]=t.slice();return this.notifyChange("rings"),this}clone(){const t=new VM;return t.spatialReference=this.spatialReference,t.rings=Ze(this.rings),t.curveRings=Ze(this.curveRings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(t==null)return!1;const e=this.spatialReference,n=t.spatialReference;if(e!=null!=(n!=null)||e!=null&&n!=null&&!e.equals(n)||this.rings.length!==t.rings.length)return!1;const r=([i,s,o,a],[l,c,u,h])=>i===l&&s===c&&(o==null&&u==null||o===u)&&(a==null&&h==null||a===h);for(let i=0;i<this.rings.length;i++){const s=this.rings[i],o=t.rings[i];if(!kO(s,o,r))return!1}return!0}contains(t){if(!t)return!1;const e=BO(t,this.spatialReference);return WB(this,e??t)}isClockwise(t){const e=Kte(t)?t.map(n=>this.hasZ?this.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y]):t;return a0e(e)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const n=this.rings[t][e],r=this.hasZ,i=this.hasM;return r&&!i?new Jt(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new Jt(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new Jt(n[0],n[1],n[2],n[3],this.spatialReference):new Jt(n[0],n[1],this.spatialReference)}insertPoint(t,e,n){return this._validateInputs(t,e,!0)?(C2(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[t].splice(e,0,n),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const n=new Jt(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),n}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],n=this.spatialReference,r=e.map(i=>new Jt(i,n));return this.notifyChange("rings"),r}setPoint(t,e,n){return this._validateInputs(t,e)?(C2(this,n),Array.isArray(n)||(n=n.toArray()),this.rings[t][e]=n,this.notifyChange("rings"),this):this}_validateInputs(t,e,n=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const r=this.rings[t];if(n&&(e<0||e>r.length)||!n&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};x([E({readOnly:!0})],wi.prototype,"cache",null),x([E({readOnly:!0})],wi.prototype,"centroid",null),x([E({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],wi.prototype,"curveRings",void 0),x([er("curveRings")],wi.prototype,"writeCurveRings",null),x([E({readOnly:!0})],wi.prototype,"extent",null),x([E({readOnly:!0})],wi.prototype,"isSelfIntersecting",null),x([E({type:[[[Number]]],json:{write:{isRequired:!0}}})],wi.prototype,"rings",void 0),x([er("rings")],wi.prototype,"writeRings",null),wi=VM=x([ue("esri.geometry.Polygon")],wi),wi.prototype.toJSON.isDefaultToJSON=!0;function h0(){return[0,0,0]}function SUe(t){return[t[0],t[1],t[2]]}function bb(t,e,n){return[t,e,n]}function TUe(t,e,n){return[t,e,n]}function kUe(t,e=h0()){const n=Math.min(3,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e}function B0e(){return h0()}function W0e(){return bb(1,1,1)}function H0e(){return bb(1,0,0)}function q0e(){return bb(0,1,0)}function K0e(){return bb(0,0,1)}const AUe=B0e(),IUe=W0e(),PUe=H0e(),CUe=q0e(),RUe=K0e();Object.freeze(Object.defineProperty({__proto__:null,ONES:IUe,UNIT_X:PUe,UNIT_Y:CUe,UNIT_Z:RUe,ZEROS:AUe,clone:SUe,create:h0,freeze:TUe,fromArray:kUe,fromValues:bb,ones:W0e,unitX:H0e,unitY:q0e,unitZ:K0e,zeros:B0e},Symbol.toStringTag,{value:"Module"}));var J9;function MUe(t){if(!t)return;let{points:e,hasM:n,hasZ:r,spatialReference:i}=t;switch(e??=[],e?.at(0)?.length){case 4:r??=!0,n??=!0;break;case 3:r??=n!==!0,n??=!r;break;default:r??=!1,n??=!1}return i??=Bt.WGS84,{...t,hasM:n,hasZ:r,points:e,spatialReference:i}}let Ju=J9=class extends Gs{constructor(t){super(MUe(t)),this.points=[],this.type="multipoint"}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=z0e(this);return t?new Vn({...t,spatialReference:this.spatialReference}):null}writePoints(t,e){e.points=Ze(this.points)}clone(){const{points:t,spatialReference:e,hasM:n,hasZ:r}=this;return new J9({points:Ze(t),spatialReference:e.clone(),hasM:n,hasZ:r})}addPoint(t){return C2(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],n={x:e[0],y:e[1],spatialReference:this.spatialReference};let r=2;return this.hasZ&&(n.z=e[2],r=3),this.hasM&&(n.m=e[r]),new Jt(n)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Jt(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(C2(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};x([E({readOnly:!0})],Ju.prototype,"cache",null),x([E({readOnly:!0})],Ju.prototype,"extent",null),x([E({type:[[Number]],json:{write:{isRequired:!0}}})],Ju.prototype,"points",void 0),x([er("points")],Ju.prototype,"writePoints",null),Ju=J9=x([ue("esri.geometry.Multipoint")],Ju),Ju.prototype.toJSON.isDefaultToJSON=!0;var Q9;function NUe(t){return!Array.isArray(t[0])}function OUe(t){return typeof t[0]?.[0]=="number"}function LUe(t){if(!t)return;let{paths:e,hasM:n,hasZ:r,spatialReference:i}=t;switch(e??=[],OUe(e)&&(e=[e]),e[0]?.[0]?.length){case 4:r??=!0,n??=!0;break;case 3:r??=n!==!0,n??=!r;break;default:r??=!1,n??=!1}return i??=Bt.WGS84,{...t,hasM:n,hasZ:r,paths:e,spatialReference:i}}let Ss=Q9=class extends Gs{constructor(t){super(LUe(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=Ze(t)}get extent(){const t=U0e(this),{spatialReference:e}=this;return t?new Vn({...t,spatialReference:e}):null}writePaths(t,e){e.paths=Ze(this.paths)}addPath(t){if(!t)return;const e=this.paths,n=e.length;if(NUe(t)){const r=[];for(let i=0,s=t.length;i<s;i++)r[i]=t[i].toArray();e[n]=r}else e[n]=t.slice();return this.notifyChange("paths"),this}clone(){const t=new Q9;return t.spatialReference=this.spatialReference,t.paths=Ze(this.paths),t.curvePaths=Ze(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const n=this.paths[t][e],r=this.hasZ,i=this.hasM;return r&&!i?new Jt(n[0],n[1],n[2],void 0,this.spatialReference):i&&!r?new Jt(n[0],n[1],void 0,n[2],this.spatialReference):r&&i?new Jt(n[0],n[1],n[2],n[3],this.spatialReference):new Jt(n[0],n[1],this.spatialReference)}insertPoint(t,e,n){return this._validateInputs(t,e,!0)?(C2(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[t].splice(e,0,n),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],n=this.spatialReference,r=e.map(i=>new Jt(i,n));return this.notifyChange("paths"),r}removePoint(t,e){if(!this._validateInputs(t,e))return null;const n=new Jt(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),n}setPoint(t,e,n){return this._validateInputs(t,e)?(C2(this,n),Array.isArray(n)||(n=n.toArray()),this.paths[t][e]=n,this.notifyChange("paths"),this):this}_validateInputs(t,e,n=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const r=this.paths[t];if(n&&(e<0||e>r.length)||!n&&(e<0||e>=r.length))return!1}return!0}toJSON(t){return this.write({},t)}};x([E({readOnly:!0})],Ss.prototype,"cache",null),x([E({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],Ss.prototype,"curvePaths",void 0),x([er("curvePaths")],Ss.prototype,"writeCurvePaths",null),x([E({readOnly:!0})],Ss.prototype,"extent",null),x([E({type:[[[Number]]],json:{write:{isRequired:!0}}})],Ss.prototype,"paths",void 0),x([er("paths")],Ss.prototype,"writePaths",null),Ss=Q9=x([ue("esri.geometry.Polyline")],Ss),Ss.prototype.toJSON.isDefaultToJSON=!0;var e7;let tx=e7=class extends Kt{constructor(t){super(t),this.isInverse=!1,this.wkt=null,this.wkid=null}getInverse(){return new e7({isInverse:!this.isInverse,wkid:this.wkid,wkt:this.wkt})}};x([E()],tx.prototype,"isInverse",void 0),x([E()],tx.prototype,"wkt",void 0),x([E()],tx.prototype,"wkid",void 0),tx=e7=x([ue("esri.geometry.operators.support.GeographicTransformationStep")],tx);var t7;let wT=t7=class extends Kt{constructor(t){super(t),this.steps=[]}getInverse(){const t=new t7;for(let e=this.steps.length-1;e>=0;e--){const n=this.steps[e];t.steps.push(n.getInverse())}return t}};x([E({type:[tx],nonNullable:!0})],wT.prototype,"steps",void 0),wT=t7=x([ue("esri.geometry.operators.support.GeographicTransformation")],wT);const zRt=Math.PI/180,GRt=/(?:SPHEROID|ELLIPSOID)\[([^\]]+)]/i,_m=is.radius,$u=is.eccentricitySquared,DUe={a1:_m*$u,a2:_m*$u*_m*$u,a3:_m*$u*$u/2,a4:_m*$u*_m*$u*2.5,a5:_m*$u+_m*$u*$u/2,a6:1-$u},URt={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:is.radius,f:is.flattening},4490:{a:6378137,f:1/298.257222101},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:Wg.radius,f:Wg.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Ad.radius,f:Ad.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Ad.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}},jUe={2:{5:di,7:null,9:null,10:di,1:ET,6:null,8:null,0:null,3:mw,11:gw,2:di,4:_w},5:{5:di,7:null,9:null,10:di,1:ET,6:null,8:null,0:null,3:mw,11:gw,2:di,4:_w},7:{5:null,7:di,9:null,10:di,1:null,6:Zte,8:null,0:null,3:null,11:null,2:null,4:null},9:{5:null,7:null,9:di,10:di,1:null,6:null,8:Xte,0:null,3:null,11:null,2:null,4:null},3:{5:bT,7:null,9:null,10:bT,1:FUe,6:null,8:null,0:null,3:di,11:GUe,2:bT,4:VUe},4:{5:xw,7:null,9:null,10:xw,1:ZUe,6:null,8:null,0:null,3:JUe,11:UUe,2:xw,4:di},1:{5:vw,7:null,9:null,10:vw,1:di,6:null,8:null,0:null,3:KUe,11:BUe,2:vw,4:YUe},6:{5:null,7:Qte,9:null,10:Qte,1:null,6:di,8:null,0:null,3:null,11:null,2:null,4:null},8:{5:null,7:null,9:Jte,10:Jte,1:null,6:null,8:di,0:null,3:null,11:null,2:null,4:null},0:{5:null,7:null,9:null,10:null,1:null,6:null,8:null,0:di,3:null,11:null,2:null,4:null},10:{5:di,7:di,9:di,10:di,1:ET,6:Zte,8:Xte,0:null,3:mw,11:gw,2:di,4:_w},11:{5:yw,7:null,9:null,10:yw,1:WUe,6:null,8:null,0:null,3:HUe,11:di,2:yw,4:qUe}};function Y0e(t,e){return $Ue(t,e)?.projector}function $Ue(t,e){if(t==null||e==null)return null;if(pf.source.spatialReference===t&&pf.dest.spatialReference===e)return pf;const n=Yte(t,pf.source),r=Yte(e,pf.dest);return n===0&&r===0?go(t,e)?pf.projector=di:pf.projector=null:pf.projector=jUe[n][r],pf}function Yte(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=Kd(t,1)),nN(t)?e.spatialReferenceId=1:W1(t)?e.spatialReferenceId=2:$d(t)?e.spatialReferenceId=3:c8e(t)?e.spatialReferenceId=11:t.wkt===f8e.wkt?e.spatialReferenceId=4:t.wkid===4490?e.spatialReferenceId=5:t.wkt===GB.wkt?e.spatialReferenceId=6:t.wkt===UB.wkt?e.spatialReferenceId=8:nme(t)?e.spatialReferenceId=7:rme(t)?e.spatialReferenceId=9:e.spatialReferenceId=0):0}function di(t,e,n,r){t!==n&&(n[r++]=t[e++],n[r++]=t[e++],n[r]=t[e])}function bT(t,e,n,r){n[r]=M2*(t[e]/u1),n[r+1]=M2*(X0e-2*Math.atan(Math.exp(-t[e+1]/u1))),n[r+2]=t[e+2]}function FUe(t,e,n,r){const i=t[e]/u1,s=X0e-2*Math.atan(Math.exp(-t[e+1]/u1)),o=u1+t[e+2],a=Math.cos(s)*o;n[r]=Math.cos(i)*a,n[r+1]=Math.sin(i)*a,n[r+2]=Math.sin(s)*o}function VUe(t,e,n,r){bT(t,e,n,r),_w(n,r,n,r)}function zUe(t,e,n,r,i){const s=.4999999*Math.PI,o=_u(R2*t[e+1],-s,s),a=Math.sin(o);n[r++]=R2*t[e]*i.radius,n[r++]=i.halfSemiMajorAxis*Math.log((1+a)/(1-a)),n[r]=t[e+2]}function mw(t,e,n,r){zUe(t,e,n,r,is)}function gw(t,e,n,r){n[r]=t[e]*ene,n[r+1]=t[e+1]*ene,n[r+2]=t[e+2]}function yw(t,e,n,r){n[r]=t[e]*tne,n[r+1]=t[e+1]*tne,n[r+2]=t[e+2]}function GUe(t,e,n,r){bT(t,e,n,r),gw(n,r,n,r)}function UUe(t,e,n,r){xw(t,e,n,r),gw(n,r,n,r)}function BUe(t,e,n,r){vw(t,e,n,r),gw(n,r,n,r)}function WUe(t,e,n,r){yw(t,e,n,r),ET(n,r,n,r)}function HUe(t,e,n,r){yw(t,e,n,r),mw(n,r,n,r)}function qUe(t,e,n,r){yw(t,e,n,r),_w(n,r,n,r)}function SW(t,e,n,r,i){const s=i+t[e+2],o=R2*t[e+1],a=R2*t[e],l=Math.cos(o)*s;n[r]=Math.cos(a)*l,n[r+1]=Math.sin(a)*l,n[r+2]=Math.sin(o)*s}function Xte(t,e,n,r){SW(t,e,n,r,Wg.radius)}function Zte(t,e,n,r){SW(t,e,n,r,Ad.radius)}function ET(t,e,n,r){SW(t,e,n,r,is.radius)}function TW(t,e,n,r,i){const s=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(s*s+o*o+a*a),c=uze(a/(l===0?1:l)),u=Math.atan2(o,s);n[r++]=M2*u,n[r++]=M2*c,n[r]=l-i}function Jte(t,e,n,r){TW(t,e,n,r,Wg.radius)}function Qte(t,e,n,r){TW(t,e,n,r,Ad.radius)}function vw(t,e,n,r){TW(t,e,n,r,is.radius)}function KUe(t,e,n,r){vw(t,e,n,r),mw(n,r,n,r)}function YUe(t,e,n,r){vw(t,e,n,r),_w(n,r,n,r)}function XUe(t,e,n,r,i){const s=R2*t[e],o=R2*t[e+1],a=t[e+2],l=Math.sin(o),c=Math.cos(o),u=i.radius/Math.sqrt(1-i.eccentricitySquared*l*l);n[r++]=(u+a)*c*Math.cos(s),n[r++]=(u+a)*c*Math.sin(s),n[r++]=(u*(1-i.eccentricitySquared)+a)*l}function _w(t,e,n,r){XUe(t,e,n,r,is)}function xw(t,e,n,r){const i=DUe,s=t[e],o=t[e+1],a=t[e+2];let l,c,u,h,f,g,y,_,b,T,A,I,P,N,L,C,M,O,D,V,U;l=Math.abs(a),c=s*s+o*o,u=Math.sqrt(c),h=c+a*a,f=Math.sqrt(h),V=Math.atan2(o,s),g=a*a/h,y=c/h,N=i.a2/f,L=i.a3-i.a4/f,y>.3?(_=l/f*(1+y*(i.a1+N+g*L)/f),D=Math.asin(_),T=_*_,b=Math.sqrt(1-T)):(b=u/f*(1-g*(i.a5-N-y*L)/f),D=Math.acos(b),T=1-b*b,_=Math.sqrt(T)),A=1-is.eccentricitySquared*T,I=is.radius/Math.sqrt(A),P=i.a6*I,N=u-I*b,L=l-P*_,M=b*N+_*L,C=b*L-_*N,O=C/(P/A+M),D+=O,U=M+C*O/2,a<0&&(D=-D),n[r++]=M2*V,n[r++]=M2*D,n[r]=U}function ZUe(t,e,n,r){xw(t,e,n,r),ET(n,r,n,r)}function JUe(t,e,n,r){xw(t,e,n,r),mw(n,r,n,r)}const pf={source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:di},R2=PI(1),M2=Kge(1),X0e=.5*Math.PI,u1=is.radius,ene=u1*Math.PI/180,tne=180/(u1*Math.PI);function NI(t,e,n,r,i,s,o=Math.floor(t.length/3)){const a=Y0e(e,i);if(a==null)return!1;if(a===di){if(t===r&&n===s)return!0;const c=n+3*o;for(let u=n,h=s;u<c;u++,h++)r[h]=t[u];return!0}const l=n+3*o;for(let c=n,u=s;c<l;c+=3,u+=3)a(t,c,r,u);return!0}const BRt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:NI},Symbol.toStringTag,{value:"Module"}));function nne(t,e,n,r,i,s){return KC[0]=t,KC[1]=e,KC[2]=n,NI(KC,r,0,i,s,0)}const KC=h0();function QUe(t,e,n){if(e==null||n==null||n.vcsWkid||go(e,n)||qg(e)||qg(n))return null;const r=$ee(e)/$ee(n);if(r===1)return null;switch(t){case"point":case"esriGeometryPoint":return i=>eBe(i,r);case"polyline":case"esriGeometryPolyline":return i=>nBe(i,r);case"polygon":case"esriGeometryPolygon":return i=>tBe(i,r);case"multipoint":case"esriGeometryMultipoint":return i=>rBe(i,r);case"extent":case"esriGeometryEnvelope":return i=>iBe(i,r);default:return null}}function eBe(t,e){t?.z!=null&&(t.z*=e)}function tBe(t,e){if(t)for(const n of t.rings)for(const r of n)r.length>2&&(r[2]*=e)}function nBe(t,e){if(t)for(const n of t.paths)for(const r of n)r.length>2&&(r[2]*=e)}function rBe(t,e){if(t)for(const n of t.points)n.length>2&&(n[2]*=e)}function iBe(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let ST=null,Qk=null,eA=null,N2=null,n7={};const kW=new bI;function Cp(){return!!(Qk?.isLoaded()&&eA?.isLoaded()&&N2?.isLoaded())}function Z0e(){return!!Cp()||(nn(kW),Yg(),!1)}function J0e(t,e){return!t||!e||Eh(t,e)||Z0e()}function sBe(t,e){return!Eh(t,e)&&!Cp()}async function Yg(t){ST==null&&(ST=Promise.all([_e(()=>import("./projectOperator-CL3w8Jc8.js"),__vite__mapDeps([45,46,47])).then(e=>(Qk=e,Qk.load())),_e(()=>import("./projectOperator-B47amSgJ.js"),__vite__mapDeps([48,46,47])).then(e=>(eA=e,eA.load())),_e(()=>import("./geographicTransformationUtils-BH4rCY7d.js"),[]).then(e=>(N2=e,N2.load()))])),await ST,mi(t),kW.notify()}function wv(t,e,n){return Array.isArray(t)?t.length===0?[]:(z8e(t),r7(t,t[0].spatialReference,e,n)):(k2(t),r7([t],t.spatialReference,e,n)[0])}function r7(t,e,n,r){if(e==null||n==null)return t;if(Eh(e,n,r))return t.map(i=>zM(i,e,n));if(r?.geographicTransformation==null&&nN(e))return t.map(i=>zM(i,e,Bt.WGS84)).map(i=>tA(i,n));if(r?.geographicTransformation==null&&nN(n))return t.map(i=>tA(i,Bt.WGS84)).map(i=>zM(i,Bt.WGS84,n));if(!Cp())throw new eye;if(!r?.geographicTransformation){if(r?.extendedParams)r={...r,geographicTransformation:N2.getTransformation(e,n,r.areaOfInterestExtent)||new wT};else if(!r?.areaOfInterestExtent){const i=oBe(e,n);let s=n7[i];s||(s=N2.getTransformation(e,n)||new wT,n7[i]=s),r={geographicTransformation:s}}}return t[0].spatialReference||(t[0].spatialReference=e),t[0]instanceof Gs?Qk.executeMany(t,n,r):eA.executeMany(t,n,r)}function oBe(t,e){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??""].join()}function aBe(t,e){const n=Q0e([t],e);return n.pending!=null?{pending:n.pending,geometry:null}:n.geometries!=null?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function Q0e(t,e){if(!Cp()){for(const n of t)if(n!=null&&!go(n.spatialReference,e)&&dc(n.spatialReference)&&dc(e)&&!Eh(n.spatialReference,e))return nn(kW),{pending:Yg(),geometries:null}}return{pending:null,geometries:t.map(n=>n==null?null:go(n.spatialReference,e)?n:dc(n.spatialReference)&&dc(e)?tA(n,e):null)}}let eye=class extends Xe{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function lBe(){ST=null,Qk=null,eA=null,N2=null,n7={}}const cBe={get loadPromise(){return ST}};function tA(t,e){try{const n=wv(t,e);if(n==null)return null;"xmin"in t&&"xmin"in n&&(n.zmin=t.zmin,n.zmax=t.zmax);const r=QUe(n.type,t.spatialReference,e);return r?.(n),n}catch(n){if(!(n instanceof eye))throw n;return null}}async function tye(t,e,n){const r=t.spatialReference;return r!=null&&e!=null&&await nye(r,e,null,n),tA(t,e)}function Eh(t,e,n){return!(n?.areaOfInterestExtent||n?.extendedParams||n?.geographicTransformation)&&(!!go(t,e)||dc(t)&&dc(e)&&!!Y0e(t,e))}function uBe(t,e){if(go(t,e))return!0;if(!dc(t)||!dc(e))return!1;const n=W1(t)||$d(t)||Dee(t),r=W1(e)||$d(e)||Dee(e);return n&&r}async function nye(t,e,n,r){if(Cp())return QQ(r);if(Array.isArray(t)){for(const{source:i,dest:s,options:o}of t)if(i&&s&&!Eh(i,s,o))return Yg(r)}else if(t&&e&&!Eh(t,e,n))return Yg(r);return QQ(r)}function zM(t,e,n){return t?"x"in t?rye(t,e,new Jt,n,0):"xmin"in t?lye(t,e,new Vn,n,0):"rings"in t?aye(t,e,new wi,n,0):"paths"in t?sye(t,e,new Ss,n,0):"points"in t?iye(t,e,new Ju,n,0):null:null}function hBe(t,e,n=e.spatialReference,r=0){return n!=null&&t.spatialReference!=null&&rye(t,t.spatialReference,e,n,r)!=null}function rye(t,e,n,r,i){ia[0]=t.x,ia[1]=t.y;const s=t.z;return ia[2]=s!==void 0?s:i,NI(ia,e,0,ia,r,0)?(n.x=ia[0],n.y=ia[1],n.spatialReference=r,s!==void 0||qg(r)?(n.z=ia[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),t.m===void 0?(n.m=void 0,n.hasM=!1):(n.m=t.m,n.hasM=!0),n):null}function dBe(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&iye(t,t.spatialReference,e,n,r)!=null}function iye(t,e,n,r,i){const{points:s,hasZ:o,hasM:a}=t,l=[],c=s.length,u=[];for(const f of s)u.push(f[0],f[1],o?f[2]:i);if(!NI(u,e,0,u,r,0,c))return null;const h=o||qg(r);for(let f=0;f<c;++f){const g=3*f,y=u[g],_=u[g+1];h&&a?l.push([y,_,u[g+2],s[f][3]]):h?l.push([y,_,u[g+2]]):a?l.push([y,_,s[f][2]]):l.push([y,_])}return n.points=l,n.spatialReference=r,n.hasZ=o,n.hasM=a,n}function fBe(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&sye(t,t.spatialReference,e,n,r)!=null}function sye(t,e,n,r,i){const{paths:s,hasZ:o,hasM:a}=t,l=[];if(!cye(s,o??!1,a??!1,e,l,r,i))return null;const c=o||qg(r);return n.paths=l,n.spatialReference=r,n.hasZ=c,n.hasM=a,n}function oye(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&aye(t,t.spatialReference,e,n,r)!=null}function aye(t,e,n,r,i){const{rings:s,hasZ:o,hasM:a}=t,l=[];if(!cye(s,o??!1,a??!1,e,l,r,i))return null;const c=o||qg(r);return n.rings=l,n.spatialReference=r,n.hasZ=c,n.hasM=a,n}function pBe(t,e,n=e.spatialReference,r=0){return t.spatialReference!=null&&n!=null&&lye(t,t.spatialReference,e,n,r)!=null}function lye(t,e,n,r,i){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:c,hasM:u}=t,h=c?t.zmin:i;if(!nne(s,o,h,e,ia,r))return null;const f=c||qg(r);n.xmin=ia[0],n.ymin=ia[1],f&&(n.zmin=ia[2]);const g=c?t.zmax:i;return nne(a,l,g,e,ia,r)?(n.xmax=ia[0],n.ymax=ia[1],f&&(n.zmax=ia[2]),u&&(n.mmin=t.mmin,n.mmax=t.mmax),n.spatialReference=r,n):null}function cye(t,e,n,r,i,s,o=0){const a=new Array;for(const u of t)for(const h of u)a.push(h[0],h[1],e?h[2]:o);if(!NI(a,r,0,a,s,0))return!1;let l=0;i.length=0;const c=e||qg(s);for(const u of t){const h=new Array;for(const f of u)c&&n?h.push([a[l++],a[l++],a[l++],f[3]]):c?h.push([a[l++],a[l++],a[l++]]):n?(h.push([a[l++],a[l++],f[2]]),l++):(h.push([a[l++],a[l++]]),l++);i.push(h)}return!0}const ia=h0(),HRt=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:Eh,initializeProjection:nye,isEqualBaseGCS:uBe,isLoaded:Cp,isLoadedOrLoad:Z0e,isLoadedOrLoadFor:J0e,load:Yg,project:wv,projectExtent:pBe,projectMany:r7,projectMultipoint:dBe,projectOrLoad:aBe,projectOrLoadMany:Q0e,projectPoint:hBe,projectPolygon:oye,projectPolyline:fBe,projectWithZConversion:tye,projectWithoutEngine:zM,requiresLoad:sBe,test:cBe,tryProjectWithZConversion:tA,unload:lBe},Symbol.toStringTag,{value:"Module"}));var GM;let i7=GM=class extends u0(Ot.ofType(wi)){constructor(t){super(t)}clone(){return new GM(this.items.map(t=>t.clone()))}write(t,e){return this.toJSON(e)}toJSON(t){const e=t?.layer?.spatialReference;return e?this.toArray().map(n=>{if(!e.equals(n.spatialReference)){if(!Eh(n.spatialReference,e))return t?.messages?.push(new jd("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:t.layer.spatialReference,context:t})),null;const i=new wi;oye(n,i,e),n=i}const r=n.toJSON(t);return delete r.spatialReference,r}).filter(n=>n!=null):this.toArray().map(n=>n.toJSON(t))}static fromJSON(t,e){const n=new GM;return t.forEach(r=>n.add(wi.fromJSON(r,e))),n}};i7=GM=x([ue("esri.layers.support.PolygonCollection")],i7);const TT=i7;let Sf=class extends u0(uW){constructor(e){super(e),this.id=`focusarea-${CI()}`,this.title=null,this.enabled=!0,this.outline=null,this.geometries=new TT}readGeometries(e,n,r){Array.isArray(e)?this.geometries=TT.fromJSON(e,r):r.origin!=="web-scene"&&r.origin!=="portal-item"||r.hooks?.onAfterLoad?.(()=>this._loadGeometries(db(e,r),r))}async _loadGeometries(e,n){const r=await ns(e,{responseType:"json"});this.geometries=TT.fromJSON(r.data,n)}};x([E({type:String,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}}),E()],Sf.prototype,"id",void 0),x([E({type:String,json:{write:!0}})],Sf.prototype,"title",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],Sf.prototype,"enabled",void 0),x([E({type:Nze,json:{write:!0}})],Sf.prototype,"outline",void 0),x([E({type:TT,nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new TT(t.items.map(e=>e.clone()))}),kze({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],Sf.prototype,"geometries",void 0),x([cr(["web-scene","portal-item","service"],"geometries")],Sf.prototype,"readGeometries",null),Sf=x([ue("esri.effects.FocusArea")],Sf);const mBe=Sf;let xS=class extends u0(uW){constructor(e){super(e),this.areas=new Ot,this.style="bright"}};x([E({type:Ot.ofType(mBe),nonNullable:!0,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}},clonable:t=>new Ot(t.items.map(e=>e.clone()))})],xS.prototype,"areas",void 0),x([E({type:["bright","dark"],nonNullable:!0,json:{write:!0}})],xS.prototype,"style",void 0),xS=x([ue("esri.effects.FocusAreas")],xS);const uye=xS;function gBe(t){return typeof t=="object"&&t!=null&&"loaded"in t&&t.loaded===!0&&"type"in t}function yBe(t){return!(!gBe(t)||!HVe(t)?.operations?.supportsEditing||"editingEnabled"in t&&!KVe(t)||Fge(t))}const vBe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,_Be="screenUtils.toPt: input not recognized!",hye=96;function YRt(t){return t?t/72*hye:0}function Z1(t){return t?72*t/hye:0}function Si(t){if(typeof t=="string"){const e=t.match(vBe);if(e){const n=Number(e[1]),r=e[3]&&e[3].toLowerCase(),i=t.startsWith("-"),s=r==="px"?Z1(n):n;return i?-s:s}return console.warn(_Be),null}return t}function Hs(t=0,e=0){return{x:t,y:e}}function XRt(t){return t?Hs(t.x,t.y):null}function ZRt(t=0,e=0){return[t,e]}function JRt(t=0,e=0,n=0){return[t,e,n]}function QRt(t){return t}function eMt(t){return t}function tMt(t){return t}function nMt(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function dye(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function xBe(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function wBe(t,e,n,r,i,s,o,a,l,c,u,h,f,g,y,_){const b=new Float32Array(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=r,b[4]=i,b[5]=s,b[6]=o,b[7]=a,b[8]=l,b[9]=c,b[10]=u,b[11]=h,b[12]=f,b[13]=g,b[14]=y,b[15]=_,b}const bBe=dye();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:bBe,clone:xBe,create:dye,fromValues:wBe},Symbol.toStringTag,{value:"Module"}));function fye(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function EBe(t,e,n,r,i,s,o,a,l,c,u,h,f,g,y,_,b){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=u,t[10]=h,t[11]=f,t[12]=g,t[13]=y,t[14]=_,t[15]=b,t}function iL(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function SBe(t,e){if(t===e){const n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function TBe(t,e){return pye(t,e)||iL(t),t}function pye(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],y=e[12],_=e[13],b=e[14],T=e[15],A=n*a-r*o,I=n*l-i*o,P=n*c-s*o,N=r*l-i*a,L=r*c-s*a,C=i*c-s*l,M=u*_-h*y,O=u*b-f*y,D=u*T-g*y,V=h*b-f*_,U=h*T-g*_,G=f*T-g*b;let de=A*G-I*U+P*V+N*D-L*O+C*M;return de?(de=1/de,t[0]=(a*G-l*U+c*V)*de,t[1]=(i*U-r*G-s*V)*de,t[2]=(_*C-b*L+T*N)*de,t[3]=(f*L-h*C-g*N)*de,t[4]=(l*D-o*G-c*O)*de,t[5]=(n*G-i*D+s*O)*de,t[6]=(b*P-y*C-T*I)*de,t[7]=(u*C-f*P+g*I)*de,t[8]=(o*U-a*D+c*M)*de,t[9]=(r*D-n*U-s*M)*de,t[10]=(y*L-_*P+T*A)*de,t[11]=(h*P-u*L-g*A)*de,t[12]=(a*O-o*V-l*M)*de,t[13]=(n*V-r*O+i*M)*de,t[14]=(_*I-y*N-b*A)*de,t[15]=(u*N-h*I+f*A)*de,t):null}function kBe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],g=e[11],y=e[12],_=e[13],b=e[14],T=e[15];return t[0]=a*(f*T-g*b)-h*(l*T-c*b)+_*(l*g-c*f),t[1]=-(r*(f*T-g*b)-h*(i*T-s*b)+_*(i*g-s*f)),t[2]=r*(l*T-c*b)-a*(i*T-s*b)+_*(i*c-s*l),t[3]=-(r*(l*g-c*f)-a*(i*g-s*f)+h*(i*c-s*l)),t[4]=-(o*(f*T-g*b)-u*(l*T-c*b)+y*(l*g-c*f)),t[5]=n*(f*T-g*b)-u*(i*T-s*b)+y*(i*g-s*f),t[6]=-(n*(l*T-c*b)-o*(i*T-s*b)+y*(i*c-s*l)),t[7]=n*(l*g-c*f)-o*(i*g-s*f)+u*(i*c-s*l),t[8]=o*(h*T-g*_)-u*(a*T-c*_)+y*(a*g-c*h),t[9]=-(n*(h*T-g*_)-u*(r*T-s*_)+y*(r*g-s*h)),t[10]=n*(a*T-c*_)-o*(r*T-s*_)+y*(r*c-s*a),t[11]=-(n*(a*g-c*h)-o*(r*g-s*h)+u*(r*c-s*a)),t[12]=-(o*(h*b-f*_)-u*(a*b-l*_)+y*(a*f-l*h)),t[13]=n*(h*b-f*_)-u*(r*b-i*_)+y*(r*f-i*h),t[14]=-(n*(a*b-l*_)-o*(r*b-i*_)+y*(r*l-i*a)),t[15]=n*(a*f-l*h)-o*(r*f-i*h)+u*(r*l-i*a),t}function ABe(t){const e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11],g=t[12],y=t[13],_=t[14],b=t[15];return(e*o-n*s)*(h*b-f*_)-(e*a-r*s)*(u*b-f*y)+(e*l-i*s)*(u*_-h*y)+(n*a-r*o)*(c*b-f*g)-(n*l-i*o)*(c*_-h*g)+(r*l-i*a)*(c*y-u*g)}function mye(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],g=e[10],y=e[11],_=e[12],b=e[13],T=e[14],A=e[15];let I=n[0],P=n[1],N=n[2],L=n[3];return t[0]=I*r+P*a+N*h+L*_,t[1]=I*i+P*l+N*f+L*b,t[2]=I*s+P*c+N*g+L*T,t[3]=I*o+P*u+N*y+L*A,I=n[4],P=n[5],N=n[6],L=n[7],t[4]=I*r+P*a+N*h+L*_,t[5]=I*i+P*l+N*f+L*b,t[6]=I*s+P*c+N*g+L*T,t[7]=I*o+P*u+N*y+L*A,I=n[8],P=n[9],N=n[10],L=n[11],t[8]=I*r+P*a+N*h+L*_,t[9]=I*i+P*l+N*f+L*b,t[10]=I*s+P*c+N*g+L*T,t[11]=I*o+P*u+N*y+L*A,I=n[12],P=n[13],N=n[14],L=n[15],t[12]=I*r+P*a+N*h+L*_,t[13]=I*i+P*l+N*f+L*b,t[14]=I*s+P*c+N*g+L*T,t[15]=I*o+P*u+N*y+L*A,t}function IBe(t,e,n){const r=n[0],i=n[1],s=n[2];if(e===t)t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15];else{const o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],h=e[5],f=e[6],g=e[7],y=e[8],_=e[9],b=e[10],T=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=h,t[6]=f,t[7]=g,t[8]=y,t[9]=_,t[10]=b,t[11]=T,t[12]=o*r+u*i+y*s+e[12],t[13]=a*r+h*i+_*s+e[13],t[14]=l*r+f*i+b*s+e[14],t[15]=c*r+g*i+T*s+e[15]}return t}function PBe(t,e,n){const r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function CBe(t,e,n,r){let i=r[0],s=r[1],o=r[2],a=Math.sqrt(i*i+s*s+o*o);if(a<=kl())return void fye(t,e);a=1/a,i*=a,s*=a,o*=a;const l=Math.sin(n),c=Math.cos(n),u=1-c,h=e[0],f=e[1],g=e[2],y=e[3],_=e[4],b=e[5],T=e[6],A=e[7],I=e[8],P=e[9],N=e[10],L=e[11],C=i*i*u+c,M=s*i*u+o*l,O=o*i*u-s*l,D=i*s*u-o*l,V=s*s*u+c,U=o*s*u+i*l,G=i*o*u+s*l,de=s*o*u-i*l,ke=o*o*u+c;t[0]=h*C+_*M+I*O,t[1]=f*C+b*M+P*O,t[2]=g*C+T*M+N*O,t[3]=y*C+A*M+L*O,t[4]=h*D+_*V+I*U,t[5]=f*D+b*V+P*U,t[6]=g*D+T*V+N*U,t[7]=y*D+A*V+L*U,t[8]=h*G+_*de+I*ke,t[9]=f*G+b*de+P*ke,t[10]=g*G+T*de+N*ke,t[11]=y*G+A*de+L*ke,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15])}function RBe(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+u*r,t[6]=a*i+h*r,t[7]=l*i+f*r,t[8]=c*i-s*r,t[9]=u*i-o*r,t[10]=h*i-a*r,t[11]=f*i-l*r,t}function MBe(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-u*r,t[2]=a*i-h*r,t[3]=l*i-f*r,t[8]=s*r+c*i,t[9]=o*r+u*i,t[10]=a*r+h*i,t[11]=l*r+f*i,t}function NBe(t,e,n){const r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+u*r,t[2]=a*i+h*r,t[3]=l*i+f*r,t[4]=c*i-s*r,t[5]=u*i-o*r,t[6]=h*i-a*r,t[7]=f*i-l*r,t}function OBe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function LBe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function DBe(t,e,n){if(e===0)return iL(t);let r=n[0],i=n[1],s=n[2],o=Math.sqrt(r*r+i*i+s*s);if(o<=kl())return null;o=1/o,r*=o,i*=o,s*=o;const a=Math.sin(e),l=Math.cos(e),c=1-l;return t[0]=r*r*c+l,t[1]=i*r*c+s*a,t[2]=s*r*c-i*a,t[3]=0,t[4]=r*i*c-s*a,t[5]=i*i*c+l,t[6]=s*i*c+r*a,t[7]=0,t[8]=r*s*c+i*a,t[9]=i*s*c-r*a,t[10]=s*s*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function jBe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function $Be(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function FBe(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gye(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=r+r,l=i+i,c=s+s,u=r*a,h=r*l,f=r*c,g=i*l,y=i*c,_=s*c,b=o*a,T=o*l,A=o*c;return t[0]=1-(g+_),t[1]=h+A,t[2]=f-T,t[3]=0,t[4]=h-A,t[5]=1-(u+_),t[6]=y+b,t[7]=0,t[8]=f+T,t[9]=y-b,t[10]=1-(u+g),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function VBe(t,e){const n=zBe,r=-e[0],i=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=r*r+i*i+s*s+o*o;return h>0?(n[0]=2*(a*o+u*r+l*s-c*i)/h,n[1]=2*(l*o+u*i+c*r-a*s)/h,n[2]=2*(c*o+u*s+a*i-l*r)/h):(n[0]=2*(a*o+u*r+l*s-c*i),n[1]=2*(l*o+u*i+c*r-a*s),n[2]=2*(c*o+u*s+a*i-l*r)),gye(t,e,n),t}const zBe=h0();function GBe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function UBe(t,e){const n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(l*l+c*c+u*u),t}function BBe(t,e){const n=e[0]+e[5]+e[10];let r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function WBe(t,e,n,r){const i=e[0],s=e[1],o=e[2],a=e[3],l=i+i,c=s+s,u=o+o,h=i*l,f=i*c,g=i*u,y=s*c,_=s*u,b=o*u,T=a*l,A=a*c,I=a*u,P=r[0],N=r[1],L=r[2];return t[0]=(1-(y+b))*P,t[1]=(f+I)*P,t[2]=(g-A)*P,t[3]=0,t[4]=(f-I)*N,t[5]=(1-(h+b))*N,t[6]=(_+T)*N,t[7]=0,t[8]=(g+A)*L,t[9]=(_-T)*L,t[10]=(1-(h+y))*L,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function HBe(t,e,n,r,i){const s=e[0],o=e[1],a=e[2],l=e[3],c=s+s,u=o+o,h=a+a,f=s*c,g=s*u,y=s*h,_=o*u,b=o*h,T=a*h,A=l*c,I=l*u,P=l*h,N=r[0],L=r[1],C=r[2],M=i[0],O=i[1],D=i[2],V=(1-(_+T))*N,U=(g+P)*N,G=(y-I)*N,de=(g-P)*L,ke=(1-(f+T))*L,Ue=(b+A)*L,Ne=(y+I)*C,fe=(b-A)*C,De=(1-(f+_))*C;return t[0]=V,t[1]=U,t[2]=G,t[3]=0,t[4]=de,t[5]=ke,t[6]=Ue,t[7]=0,t[8]=Ne,t[9]=fe,t[10]=De,t[11]=0,t[12]=n[0]+M-(V*M+de*O+Ne*D),t[13]=n[1]+O-(U*M+ke*O+fe*D),t[14]=n[2]+D-(G*M+Ue*O+De*D),t[15]=1,t}function qBe(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,h=r*a,f=i*o,g=i*a,y=i*l,_=s*o,b=s*a,T=s*l;return t[0]=1-h-y,t[1]=u+T,t[2]=f-b,t[3]=0,t[4]=u-T,t[5]=1-c-y,t[6]=g+_,t[7]=0,t[8]=f+b,t[9]=g-_,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function KBe(t,e,n,r,i,s,o){const a=1/(n-e),l=1/(i-r),c=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function YBe(t,e,n,r,i){const s=1/Math.tan(e/2);let o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function XBe(t,e,n,r){const i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(i+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(i-s)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function ZBe(t,e,n,r,i,s,o){const a=1/(e-n),l=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*c,t[15]=1,t}function JBe(t,e,n,r){const i=e[0],s=e[1],o=e[2];let a=i-n[0],l=s-n[1],c=o-n[2];const u=kl();if(Math.abs(a)<u&&Math.abs(l)<u&&Math.abs(c)<u)return void iL(t);let h=1/Math.sqrt(a*a+l*l+c*c);a*=h,l*=h,c*=h;const f=r[0],g=r[1],y=r[2];let _=g*c-y*l,b=y*a-f*c,T=f*l-g*a;h=Math.sqrt(_*_+b*b+T*T),h?(h=1/h,_*=h,b*=h,T*=h):(_=0,b=0,T=0);let A=l*T-c*b,I=c*_-a*T,P=a*b-l*_;h=Math.sqrt(A*A+I*I+P*P),h?(h=1/h,A*=h,I*=h,P*=h):(A=0,I=0,P=0),t[0]=_,t[1]=A,t[2]=a,t[3]=0,t[4]=b,t[5]=I,t[6]=l,t[7]=0,t[8]=T,t[9]=P,t[10]=c,t[11]=0,t[12]=-(_*i+b*s+T*o),t[13]=-(A*i+I*s+P*o),t[14]=-(a*i+l*s+c*o),t[15]=1}function QBe(t,e,n,r){const i=e[0],s=e[1],o=e[2],a=r[0],l=r[1],c=r[2];let u=i-n[0],h=s-n[1],f=o-n[2],g=u*u+h*h+f*f;g>0&&(g=1/Math.sqrt(g),u*=g,h*=g,f*=g);let y=l*f-c*h,_=c*u-a*f,b=a*h-l*u;return g=y*y+_*_+b*b,g>0&&(g=1/Math.sqrt(g),y*=g,_*=g,b*=g),t[0]=y,t[1]=_,t[2]=b,t[3]=0,t[4]=h*b-f*_,t[5]=f*y-u*b,t[6]=u*_-h*y,t[7]=0,t[8]=u,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=s,t[14]=o,t[15]=1,t}function eWe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function tWe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function nWe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function yye(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function rWe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function iWe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function sWe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function oWe(t,e){if(t===e)return!0;const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],f=t[10],g=t[11],y=t[12],_=t[13],b=t[14],T=t[15],A=e[0],I=e[1],P=e[2],N=e[3],L=e[4],C=e[5],M=e[6],O=e[7],D=e[8],V=e[9],U=e[10],G=e[11],de=e[12],ke=e[13],Ue=e[14],Ne=e[15],fe=kl();return Math.abs(n-A)<=fe*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(r-I)<=fe*Math.max(1,Math.abs(r),Math.abs(I))&&Math.abs(i-P)<=fe*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(s-N)<=fe*Math.max(1,Math.abs(s),Math.abs(N))&&Math.abs(o-L)<=fe*Math.max(1,Math.abs(o),Math.abs(L))&&Math.abs(a-C)<=fe*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(l-M)<=fe*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(c-O)<=fe*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(u-D)<=fe*Math.max(1,Math.abs(u),Math.abs(D))&&Math.abs(h-V)<=fe*Math.max(1,Math.abs(h),Math.abs(V))&&Math.abs(f-U)<=fe*Math.max(1,Math.abs(f),Math.abs(U))&&Math.abs(g-G)<=fe*Math.max(1,Math.abs(g),Math.abs(G))&&Math.abs(y-de)<=fe*Math.max(1,Math.abs(y),Math.abs(de))&&Math.abs(_-ke)<=fe*Math.max(1,Math.abs(_),Math.abs(ke))&&Math.abs(b-Ue)<=fe*Math.max(1,Math.abs(b),Math.abs(Ue))&&Math.abs(T-Ne)<=fe*Math.max(1,Math.abs(T),Math.abs(Ne))}function aWe(t){const e=kl(),n=t[0],r=t[1],i=t[2],s=t[4],o=t[5],a=t[6],l=t[8],c=t[9],u=t[10];return Math.abs(1-(n*n+s*s+l*l))<=e&&Math.abs(1-(r*r+o*o+c*c))<=e&&Math.abs(1-(i*i+a*a+u*u))<=e}function lWe(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const cWe=mye,uWe=yye;Object.freeze(Object.defineProperty({__proto__:null,add:nWe,adjoint:kBe,copy:fye,determinant:ABe,equals:oWe,exactEquals:sWe,frob:tWe,fromQuat:qBe,fromQuat2:VBe,fromRotation:DBe,fromRotationTranslation:gye,fromRotationTranslationScale:WBe,fromRotationTranslationScaleOrigin:HBe,fromScaling:LBe,fromTranslation:OBe,fromXRotation:jBe,fromYRotation:$Be,fromZRotation:FBe,frustum:KBe,getRotation:BBe,getScale:UBe,getTranslation:GBe,hasIdentityRotation:lWe,identity:iL,invert:pye,invertOrIdentity:TBe,isOrthoNormal:aWe,lookAt:JBe,mul:cWe,multiply:mye,multiplyScalar:rWe,multiplyScalarAndAdd:iWe,ortho:ZBe,perspective:YBe,perspectiveFromFieldOfView:XBe,rotate:CBe,rotateX:RBe,rotateY:MBe,rotateZ:NBe,scale:PBe,set:EBe,str:eWe,sub:uWe,subtract:yye,targetTo:QBe,translate:IBe,transpose:SBe},Symbol.toStringTag,{value:"Module"}));const e$=()=>kt.getLogger("esri.support.basemapUtils");function hWe(){return{}}function dWe(t){for(const e in t){const n=t[e];n&&!n.destroyed&&n.destroy(),delete t[e]}}function fWe(t,e){let n;if(typeof t=="string"){const r=t in A9,i=!r&&t.includes("/");if(!r&&!i){if(n9())e$().warn(`Unable to find basemap definition for: ${t}. See available styles at https://developers.arcgis.com/rest/basemap-styles/`);else{const s=Object.entries(A9).filter(([o,a])=>a.classic||a.is3d).map(([o])=>`"${o}"`).sort().join(", ");e$().warn(`Unable to find basemap definition for: ${t}. Try one of these: ${s}`)}return null}e&&(n=e[t]),n||(n=r?xT.fromId(t):new xT({style:{id:t}}),e&&(e[t]=n))}else n=qa(xT,t);return n?.destroyed&&(e$().warn("The provided basemap is already destroyed",{basemap:n}),n=null),n}function pWe(t){return new th({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const n=[];return"tables"in e&&n.push(e.tables),"layers"in e&&n.push(e.layers),n},itemFilterFunction:e=>{const n=e.parent;return!!n&&"tables"in n&&n.tables.includes(e)}})}function YC(t){for(const e of t.values())e?.destroy();t.clear()}const rne={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function mWe(t){let e=null;if(typeof t=="string")if(t in rne){const n=rne[t];e=new uN({resourceInfo:{data:{layers:[n]}}})}else kt.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=qa(uN,t);return e}function s7(t,e,n){let r,i;if(t)for(let s=0,o=t.length;s<o;s++){if(r=t.at(s),r?.[e]===n)return r;if(r?.type==="group"&&(i=s7(r.layers,e,n),i))return i}}const gWe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.layers=new Ot;const i=a=>{a.parent&&a.removeFromParent()},s=a=>{a.parent=this,this.layerAdded(a),a.type!=="elevation"&&a.type!=="base-elevation"||kt.getLogger(this).error(`Layer 'title:${a.title}, id:${a.id}' of type '${a.type}' is not supported as an operational layer and will therefore be ignored.`)},o=a=>{a.parent=null,this.layerRemoved(a)};this.addHandles([this.layers.on("before-add",a=>{if(a.item===this)return a.preventDefault(),void kt.getLogger(this).error("#add()","Cannot add layer to itself.");i(a.item)}),this.layers.on("after-add",a=>s(a.item)),this.layers.on("after-remove",a=>o(a.item))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}removeChildLayer(r){this.layers.remove(r),super.removeChildLayer?.(r)}set layers(r){this._set("layers",kd(r,this._get("layers")))}add(r,i){const s=this.layers;if(i=s.getNextIndex(i),r instanceof xi){const o=r;o.parent===this?this.reorder(o,i):s.add(o,i)}else ga(r)?r.then(o=>{this.destroyed||this.add(o,i)}):kt.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const s=this.layers;let o=s.getNextIndex(i);r.slice().forEach(a=>{a.parent!==this?(s.add(a,o),o+=1):this.reorder(a,o)})}findLayerById(r){return s7(this.layers,"id",r)}findLayerByUid(r){return s7(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return x([E()],n.prototype,"layers",null),n=x([ue("esri.support.LayersMixin")],n),n},yWe=new Set(["feature","subtype-group"]);function o7(t,e,n){if(t)for(let r=0,i=t.length;r<i;r++){const s=t.at(r);if(s[e]===n)return s;if(s?.type==="group"){const o=o7(s.tables,e,n);if(o)return o}}}const vWe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.tables=new Ot,this.addHandles([this.tables.on("after-add",i=>{const s=i.item;s.parent&&s.parent!==this&&s.removeFromParent(),s.parent=this,yWe.has(s.type)||kt.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}removeChildLayer(r){this.tables.remove(r),super.removeChildLayer?.(r)}set tables(r){this._set("tables",kd(r,this._get("tables")))}findTableById(r){return o7(this.tables,"id",r)}findTableByUid(r){return o7(this.tables,"uid",r)}};return x([E()],n.prototype,"tables",null),n=x([ue("esri.support.TablesMixin")],n),n};let zc=class extends vWe(gWe(wI)){constructor(e){super(e),this.allLayers=new th({getCollections:()=>[this.basemap?.baseLayers,this.basemap?.groundLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:n=>"layers"in n?n.layers:null}),this.focusAreas=new uye,this.allTables=pWe(this),this.basemap=null,this.editableLayers=new th({getCollections:()=>[this.allLayers],itemFilterFunction:yBe}),this.ground=new uN,this._basemapCache=hWe(),this.addHandles(wc(()=>this.ground,(n,r)=>{r?.parent===this&&(r.parent=null),n.parent=this},{sync:!0}))}destroy(){dWe(this._basemapCache),this._basemapCache=null,this.focusAreas.destroy(),this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=Di(this.basemap),Di(this.ground),this._set("ground",null)}castBasemap(e){return fWe(e,this._basemapCache)}castGround(e){return mWe(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(n=>n.id===e)}findTableById(e){return this.allTables.find(n=>n.id===e)}};x([E({readOnly:!0,dependsOn:[]})],zc.prototype,"allLayers",void 0),x([E({type:uye,nonNullable:!0,json:{write:{overridePolicy:t=>({enabled:t.areas.length>0,ignoreOrigin:!0})}}})],zc.prototype,"focusAreas",void 0),x([E({readOnly:!0})],zc.prototype,"allTables",void 0),x([E({type:xT,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],zc.prototype,"basemap",void 0),x([qs("basemap")],zc.prototype,"castBasemap",null),x([E({readOnly:!0})],zc.prototype,"editableLayers",void 0),x([E({type:uN,nonNullable:!0})],zc.prototype,"ground",void 0),x([qs("ground")],zc.prototype,"castGround",null),x([E()],zc.prototype,"undoRedo",void 0),zc=x([ue("esri.Map")],zc);const vye=zc;let sy=class extends uW{constructor(e){super(e),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(e){return e!=null&&this.row===e.row&&this.rows===e.rows&&this.column===e.column&&this.columns===e.columns}};x([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],sy.prototype,"row",void 0),x([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],sy.prototype,"column",void 0),x([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],sy.prototype,"rows",void 0),x([E({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],sy.prototype,"columns",void 0),sy=x([ue("esri.CameraLayout")],sy);const _ye=sy;let sL=class{constructor(e,n){this.min=e,this.max=n,this.range=n-e}normalize(e,n=0,r=!1){return ine(this.range,this.min,this.max,e,n,r)}clamp(e,n=0){return _u(e-n,this.min,this.max)+n}monotonic(e,n,r){return e<n?n:n+a7(this.range,e-n,r)}minimalMonotonic(e,n,r){return ine(this.range,e,e+this.range,n,r)}center(e,n,r){return n=this.monotonic(e,n,r),this.normalize((e+n)/2,r)}diff(e,n,r){return this.monotonic(e,n,r)-e}shortestSignedDiff(e,n){e=this.normalize(e);const r=(n=this.normalize(n))-e,i=n<e?this.minimalMonotonic(e,n)-e:n-this.minimalMonotonic(n,e);return Math.abs(r)<Math.abs(i)?r:i}contains(e,n,r){return n=this.minimalMonotonic(e,n),(r=this.minimalMonotonic(e,r))>e&&r<n}};function ine(t,e,n,r,i=0,s=!1){return(r-=i)<e?r+=a7(t,e-r):r>n&&(r-=a7(t,r-n)),s&&r===n&&(r=e),r+i}function a7(t,e,n=0){return Math.ceil((e-n)/t)*t+n}const oMt=new sL(0,2*Math.PI),aMt=new sL(-Math.PI,Math.PI),_We=new sL(0,360);let Xh=class extends vo(qt){constructor(...e){super(...e),this.position=new Jt([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new _ye}normalizeCtorArgs(e,n,r,i){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return n!=null&&(s.heading=n),r!=null&&(s.tilt=r),i!=null&&(s.fov=i),s}return e}writePosition(e,n,r,i){const s=e.clone();s.x=oc(e.x||0),s.y=oc(e.y||0),s.z=e.hasZ?oc(e.z||0):e.z,n[r]=s.write({},i)}readPosition(e,n){const r=new Jt;return r.read(e,n),r.x=oc(r.x||0),r.y=oc(r.y||0),r.z=r.hasZ?oc(r.z||0):r.z,r}equals(e){return e!=null&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)&&this.layout.equals(e.layout)}};x([E({type:Jt,json:{write:{isRequired:!0}}})],Xh.prototype,"position",void 0),x([er("position")],Xh.prototype,"writePosition",null),x([cr("position")],Xh.prototype,"readPosition",null),x([E({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),qs(t=>_We.normalize(oc(t)))],Xh.prototype,"heading",void 0),x([E({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),qs(t=>_u(oc(t),-180,180))],Xh.prototype,"tilt",void 0),x([E({type:Number,nonNullable:!0,json:{default:55,write:!0}}),qs(t=>_u(oc(t,55),1,170))],Xh.prototype,"fov",void 0),x([E({type:_ye,nonNullable:!0,json:{read:!1,write:!1}})],Xh.prototype,"layout",void 0),Xh=x([ue("esri.Camera")],Xh);const xWe=Xh;function xye(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function wye(t){return t.points!==void 0}function bye(t){return t.x!==void 0&&t.y!==void 0}function Eye(t){return t.paths!==void 0||t.curvePaths!==void 0}function AW(t){return t.rings!==void 0||t.curveRings!==void 0}function O2(t){return t==null?null:t instanceof Gs?t:bye(t)?Jt.fromJSON(t):Eye(t)?Ss.fromJSON(t):AW(t)?wi.fromJSON(t):wye(t)?Ju.fromJSON(t):xye(t)?Vn.fromJSON(t):null}function IW(t){return t?bye(t)?"esriGeometryPoint":Eye(t)?"esriGeometryPolyline":AW(t)?"esriGeometryPolygon":xye(t)?"esriGeometryEnvelope":wye(t)?"esriGeometryMultipoint":null:null}const wWe={esriGeometryPoint:Jt,esriGeometryPolyline:Ss,esriGeometryPolygon:wi,esriGeometryEnvelope:Vn,esriGeometryMultipoint:Ju,esriGeometryMultiPatch:wi};function bWe(t){return t&&wWe[t]||null}const EWe=Ll()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),cMt=Ll()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),PW={base:Gs,key:"type",typeMap:{extent:Vn,multipoint:Ju,point:Jt,polyline:Ss,polygon:wi}};function uMt(t){return t.type==="point"}function hMt(t){return t.type==="multipoint"}function dMt(t){return t.type==="polygon"}function fMt(t){return t.type==="polyline"}var l7;let km=l7=class extends qt{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new l7({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};x([E({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:t$}}}}})],km.prototype,"rotation",void 0),x([qs("rotation")],km.prototype,"castRotation",null),x([E({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:t$}}}}})],km.prototype,"scale",void 0),x([E({types:PW,json:{read:O2,write:!0,origins:{"web-scene":{read:O2,write:{overridePolicy:t$}}}}})],km.prototype,"targetGeometry",void 0),x([E({type:xWe,json:{write:!0,origins:{"web-scene":{write:{isRequired:!0}}}}})],km.prototype,"camera",void 0),km=l7=x([ue("esri.Viewpoint")],km);const fu=km;function t$(){return{enabled:!this.camera}}let nA=class{constructor(e=n=>n.values().next().value){this._peeker=e,this._observable=new bI,this._items=new Set}get length(){return nn(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let e;for(e of this._items);return e}peek(){if(this.length!==0)return this._peeker(this._items)}push(e){this.contains(e)||(this._items.add(e),this._observable.notify())}contains(e){return nn(this._observable),this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),this._observable.notify(),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),this._observable.notify(),e}remove(e){this.contains(e)&&(this._items.delete(e),this._observable.notify())}filter(e){const n=this.length;return this._items.forEach(r=>{e(r)||this._items.delete(r)}),n!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){nn(this._observable),yield*this._items}};const Sye=new FinalizationRegistry(t=>{t.close()});function SWe(t,e){Sye.register(t,e,e)}function TWe(t){Sye.unregister(t)}function Tye(t,e){return new Proxy({},{get:(n,r,i)=>(...s)=>{let o,a;const l=s[s.length-1];return kWe(l)&&(o=l.signal,a=l.transferList,s.pop()),t.apply(e?`${e}.${r.toString()}`:r.toString(),s,{transferList:a,signal:o})}})}function kWe(t){return typeof t=="object"&&!Array.isArray(t)&&t!=null&&("signal"in t||"transferList"in t||Object.keys(t).length===0)}const AWe={statsWorker:()=>_e(()=>import("./statsWorker-CJq25JtV.js"),__vite__mapDeps([49,50,51,52,53,54,55,56,57])),geometryEngineWorker:()=>_e(()=>import("./geometryEngineWorker-BkMQzpX8.js"),__vite__mapDeps([58,59,60,61])),arcadeGeometryOperatorsWorker:()=>_e(()=>import("./operatorsWorker-CqUBOTzF.js"),[]),CSVSourceWorker:()=>_e(()=>import("./CSVSourceWorker-CEEUPc5x.js"),__vite__mapDeps([62,63,64,26,65,66,67,68,69,70,71,72,73,74,24,25,75,76,77,78,79,51,50,52,53,54,55,56,57,80,81,82,83,84,85,86,87])),EdgeProcessingWorker:()=>_e(()=>import("./EdgeProcessingWorker-CIbvLLff.js"),__vite__mapDeps([88,89,90,91,53,54,92,93,94,95,96,97,98])),ElevationSamplerWorker:()=>_e(()=>import("./ElevationSamplerWorker-ZfnflnM6.js"),__vite__mapDeps([99,69,100,101,102,103,104,105,106,91,53,54,107])),FeatureServiceSnappingSourceWorker:()=>_e(()=>import("./FeatureServiceSnappingSourceWorker-HtqfA8SV.js"),__vite__mapDeps([108,65,66,64,26,67,68,69,70,71,72,73,74,24,25,75,76,77,78,79,51,50,52,53,54,55,56,57,80,81,82,83,30,31,109,110,111,112,113])),GaussianSplatSortWorker:()=>_e(()=>import("./GaussianSplatSortWorker-CkystscD.js"),[]),GeoJSONSourceWorker:()=>_e(()=>import("./GeoJSONSourceWorker-YUP8CO9i.js"),__vite__mapDeps([114,66,64,26,67,65,68,69,70,71,72,73,74,24,25,75,76,77,78,79,51,50,52,53,54,55,56,57,80,81,82,83,115,63,86,87,116])),LercWorker:()=>_e(()=>import("./LercWorker-CvWkLBlN.js"),[]),MemorySourceWorker:()=>_e(()=>import("./MemorySourceWorker-D1g3UiHq.js"),__vite__mapDeps([117,66,64,26,67,118,65,68,69,70,71,72,73,74,24,25,75,76,77,78,79,51,50,52,53,54,55,56,57,80,81,82,83,86,87,116,63])),PBFDecoderWorker:()=>_e(()=>import("./PBFDecoderWorker-D6K_aE-Q.js"),__vite__mapDeps([119,120,26,66,64,67,110,111])),FeaturePipelineWorker:()=>_e(()=>import("./FeaturePipelineWorker-3jQOYgVL.js"),__vite__mapDeps([121,122,123,124,125,93,126,127,76,77,78,83,128,64,26,66,67,129,51,130,131,132,133,71,70,134,135,136,137,138,139,140,141,142,87,143,144,145,146,72,73,74,24,25,75,79,50,52,53,54,55,56,57,80,81,82,147,148,149,150,47,151,152,153,154,155,115,63,86,116,112,110,111,113,156,157])),PointCloudWorker:()=>_e(()=>import("./PointCloudWorker-DqYMzqWg.js"),__vite__mapDeps([158,159,160,53,161,162,163,164,165,166,54,102,103,167,168])),RasterWorker:()=>_e(()=>import("./RasterWorker-DFps2ie3.js"),__vite__mapDeps([169,170,171,61,172,173,53,54,174,175,176,177,178,179])),SceneLayerSnappingSourceWorker:()=>_e(()=>import("./SceneLayerSnappingSourceWorker-DnLQY7M8.js"),__vite__mapDeps([180,181,182,54,168,160,183,184,53,167,91,95,96,97,90,92,93,94,98])),SceneLayerWorker:()=>_e(()=>import("./SceneLayerWorker-C7lUORGX.js"),__vite__mapDeps([185,100,106,186,104])),WFSSourceWorker:()=>_e(()=>import("./WFSSourceWorker-CsNvdVkQ.js"),__vite__mapDeps([187,66,64,26,67,65,68,69,70,71,72,73,74,24,25,75,76,77,78,79,51,50,52,53,54,55,56,57,80,81,82,83,115,63,116,188,189])),WorkerTileHandler:()=>_e(()=>import("./WorkerTileHandler-CRU5Qp7y.js"),__vite__mapDeps([190,140,191,141,192,111,26,144,193,194,94,93,173,53,54,195,139])),Lyr3DWorker:()=>_e(()=>import("./Lyr3DWorker-BBUaqg4d.js"),[]),Feature3DPipelineWorker:()=>_e(()=>import("./Feature3DPipelineWorker-DHtVJvwN.js"),__vite__mapDeps([196,73,66,64,26,67,74,24,25,75,76,77,78,70,71,79,51,50,52,53,54,55,56,57,80,81,82,83,197,198,199,200,177,164,201,31,202,203,142,87,163,135,127,131,132,204,205,122,206,207,105,100,186,104,208,161,209,97,91,210,182,168,160,181,211,212,184,167,166,159,102,103,94,93,90,92,213,214,215,216,217,218,219,220,221,222,69,112,110,111,113,223])),TextureCompressionWorker:()=>_e(()=>import("./TextureCompressionWorker-Ds6z3aYU.js"),[]),FlowWorker:()=>_e(()=>import("./FlowWorker-iRFD_SG_.js"),__vite__mapDeps([224,179])),ParquetSourceWorker:()=>_e(()=>import("./ParquetSourceWorker-CeMszAHR.js"),__vite__mapDeps([225,146,73,66,64,26,67,74,24,25,75,76,77,78,70,71,79,51,50,52,53,54,55,56,57,80,81,82,83,86,87,226,85,149,128,129,148,147])),PanoramicMeshWorker:()=>_e(()=>import("./PanoramicMeshWorker-CAR-vdqm.js"),__vite__mapDeps([227,170]))},kye="worker:port-closed",op={HANDSHAKE:0,OPEN:1,OPENED:2,RESPONSE:3,INVOKE:4,ABORT:5,CLOSE:6,OPEN_PORT:7,ON:8};let IWe=0;function Aye(){return IWe++}function PWe(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function fN(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function Iye(t,e,n,r){if(e.type===op.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==op.INVOKE&&e.type!==op.RESPONSE)return void t.postMessage(e);let i;PWe(n)?(i=sne(n.transferList),e.data=n.result):(i=sne(r),e.data=n),i?t.postMessage(e,i):t.postMessage(e)}function rA(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function sne(t){if(!t?.length)return null;if(ye("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(n=>!CWe(n));return e.length?e:null}function CWe(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"}async function mMt(t){try{return await t}catch(e){const n=e?.name===kye;if(!(wa(e)||n))throw e;return}}const{CLOSE:XC,ABORT:c7,INVOKE:one,RESPONSE:VE,OPEN_PORT:ane,ON:lne}=op,RWe=2;let MWe=class{constructor(e){this._invoke=e,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(e){e.type===c7?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}};var Jc;let L2=(Jc=class{static connect(e,n){const r=new MessageChannel;let i;i=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const s=new Jc(r.port1,{channel:r,client:i,schedule:n});return typeof i=="object"&&"remoteClient"in i&&(i.remoteClient=s),Jc.clients.set(s,i),r.port2}static loadWorker(e){const n=AWe[e];return n?n():Promise.resolve(null)}constructor(e,n,r,i){this._port=e,this._jobQueue=r,this._lowPriorityJobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new MWe(s=>this._onInvokeMessage(s)),this._client=n.client,this._onMessage=this._onMessage.bind(this),this._channel=n.channel,this._schedule=n.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:XC}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,n,r){return this.apply(e,[n],r)}apply(e,n,r){const i=r?.signal,s=r?.transferList;if(!this._port)return Promise.reject(new Xe(kye,`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:n}));const o=Aye();return new Promise((a,l)=>{if(ma(i))return this._processWork(),void l(Cr());const c=vu(i,()=>{const h=this._outJobs.get(o);h&&(this._outJobs.delete(o),this._processWork(),ii(h.abortHandle),this._post({type:c7,jobId:o}),l(Cr()))}),u={resolve:a,reject:l,abortHandle:c,debugInfo:e};this._outJobs.set(o,u),this._post({type:one,jobId:o,methodName:e,abortable:i!=null},n,s)})}createInvokeProxy(e){return Tye(this,e)}on(e,n){const r=new MessageChannel;function i(s){n(s.data)}return this._port.postMessage({type:lne,eventType:e,port:r.port2},[r.port2]),r.port1.addEventListener("message",i),r.port1.start(),Zn(()=>{r.port1.postMessage({type:XC}),r.port1.close(),r.port1.removeEventListener("message",i)})}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:ane,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=RWe)return;const e=this._jobQueue?.pop()??this._lowPriorityJobQueue?.pop();if(!e)return;const{methodName:n,data:r,invokeOptions:i,resolver:s}=e;this.apply(n,r,i).then(o=>s.resolve(o)).catch(o=>s.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{ii(e.abortHandle),e.reject(Cr(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null,this._onMessage=null,this._channel=null,this._jobQueue=void 0,this._invokeQueue=void 0,this._lowPriorityJobQueue=void 0}_onMessage(e){this._schedule!=null?this._schedule(()=>this._processMessage(e,!0)):this._processMessage(e,!1)}_processMessage(e,n){const r=rA(e);if(r)switch(r.type){case VE:this._onResponseMessage(r);break;case one:n?this._onInvokeMessage(r):this._invokeQueue.push(r);break;case c7:this._onAbortMessage(r);break;case XC:this._onCloseMessage();break;case ane:this._onOpenPortMessage(r);break;case lne:this._onOnMessage(r)}}_onAbortMessage(e){const n=this._inJobs,r=e.jobId,i=n.get(r);this._invokeQueue.push(e),i&&(i.controller&&i.controller.abort(),n.delete(r))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Jc.clients.get(this)===e&&e.destroy(),Jc.clients.delete(this),e?.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:n,jobId:r,data:i=[],abortable:s}=e,o=s?new AbortController:null,a=this._inJobs;let l,c=this._client,u=c[n];try{if(!u&&n&&n.includes(".")){const h=n.split(".");for(let f=0;f<h.length-1;f++)c=c[h[f]],u=c[h[f+1]]}if(typeof u!="function")throw new TypeError(`${n} is not a function`);i.push({client:this,signal:o?o.signal:null}),l=u.apply(c,i)}catch(h){return void this._post({type:VE,jobId:r,error:fN(h)})}ga(l)?(a.set(r,{controller:o,promise:l}),l.then(h=>{a.has(r)&&(a.delete(r),this._post({type:VE,jobId:r},h))},h=>{a.has(r)&&(a.delete(r),wa(h)||this._post({type:VE,jobId:r,error:fN(h||{message:`Error encountered at method ${n}`})}))})):this._post({type:VE,jobId:r},l)}_onOpenPortMessage(e){new Jc(e.port,{client:this._client})}_onOnMessage(e){const{port:n}=e,r=this._client.on(e.eventType,s=>{n.postMessage(s)}),i=hb(e.port,"message",s=>{rA(s)?.type===XC&&(i.remove(),r.remove(),n.close())})}_onResponseMessage(e){const{jobId:n,error:r,data:i}=e,s=this._outJobs;if(!s.has(n))return;const o=s.get(n);s.delete(n),this._processWork(),ii(o.abortHandle),r?o.reject(Xe.fromJSON(JSON.parse(r))):o.resolve(i)}_post(e,n,r){return Iye(this._port,e,n,r)}},Jc.kernelInfo={buildDate:Nfe,fullVersion:vB,revision:Ofe},Jc.clients=new Map,Jc),NWe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new nA,this._ongoingLowPriorityJobsQueue=new nA}destroy(){this.close()}get closed(){return!this._clients?.length}open(e,n){return new Promise((r,i)=>{let s=!0;const o=a=>{mi(n.signal),s&&(s=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];ga(l)?this._clientPromises[a]=l.then(c=>(this._clients[a]=new L2(c,n,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),o(r),this._clients[a]),()=>(o(i),null)):(this._clients[a]=new L2(l,n,this._ongoingJobsQueue,this._ongoingLowPriorityJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(r))}})}broadcast(e,n,r){const i=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];i[s]=o.then(a=>a?.invoke(e,n,r))}return i}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.resolver.reject(Cr(`Worker closing, aborting job calling '${e.methodName}'`));for(;e=this._ongoingLowPriorityJobsQueue.pop();)e.resolver.reject(Cr(`Worker closing, aborting job calling '${e.methodName}'`));for(const n of this._clientPromises)n.then(r=>r?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,TWe(this)}invoke(e,n,r){return this.apply(e,[n],r)}apply(e,n,r){const i=xc();(r?.priority==="low"?this._ongoingLowPriorityJobsQueue:this._ongoingJobsQueue).push({methodName:e,data:n,invokeOptions:r,resolver:i});for(let s=0;s<this._clientPromises.length;s++){const o=this._clients[s];o?o.jobAdded():this._clientPromises[s].then(a=>a?.jobAdded())}return i.promise}createInvokeProxy(e){return Tye(this,e)}on(e,n){return Promise.all(this._clientPromises).then(()=>yv(this._clients.map(r=>r.on(e,n))))}openPorts(){return new Promise(e=>{const n=new Array(this._clientPromises.length);let r=n.length;for(let i=0;i<this._clientPromises.length;++i)this._clientPromises[i].then(s=>{s&&(n[i]=s.openPort()),--r===0&&e(n)})})}get test(){}};const OWe={async request(t,e){const n=t.options,r=n.responseType;n.signal=e?.signal,n.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&X8(t.url)?.after?r:"array-buffer";const i=await ns(t.url,n),s={data:i.data,httpStatus:i.httpStatus,ssl:i.ssl};switch(i.requestOptions?.responseType){case"native-request-init":return delete s.data.signal,s;case"blob":s.data=await s.data.arrayBuffer();break;case"json":s.data=new TextEncoder().encode(JSON.stringify(s.data)).buffer;break;case"text":s.data=new TextEncoder().encode(s.data).buffer}return{result:s,transferList:[s.data]}}},cne={};function LWe(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages?.slice()||[],paths:{...cne.paths,...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=cne.baseUrl),e}let DWe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(n=>{this[n]=(...r)=>e[n](...r)})}},UM=class{constructor(){this._dispatcher=new DWe,this._workerPostMessage({type:op.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){W4(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,n,r){this._dispatcher.addEventListener(e,n,r)}removeEventListener(e,n,r){this._dispatcher.removeEventListener(e,n,r)}_workerPostMessage(e){W4(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const n=rA(e);if(n&&n.type===op.OPEN){const{modulePath:r,jobId:i}=n;let s=await L2.loadWorker(r);s||(s=await import(r));const o=L2.connect(s);this._workerPostMessage({type:op.OPENED,jobId:i,data:o})}}};const u7=()=>kt.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:jWe}=op,$We='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}).finally(()=>{t&&t.removeEventListener("abort",s)})}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://esriurl.com/using-local-assets.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||new Promise(e=>{require([o.modulePath],e)})).then(t)}):"System"in self&&"function"==typeof System.import?System.import(workerPath).then(e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath))).then(e=>e||System.import(o.modulePath)).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(e=>e||import(o.modulePath)).then(t)}):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let ZC,JC;const une="Failed to create Worker. Fallback to execute module in main thread";async function FWe(){if(!ye("esri-workers"))return hne(new UM);if(!ZC&&!JC)try{const e=$We.split("{CONFIGURATION}").join(VWe());ZC=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){JC=e||{}}let t;if(ZC)try{t=new Worker(ZC,{name:"esri-worker-"+zWe++})}catch{u7().warn(une,JC),t=new UM}else u7().warn(une,JC),t=new UM;return hne(t)}async function hne(t){return new Promise(e=>{function n(i){const s=rA(i);s&&s.type===jWe&&(t.removeEventListener("message",n),t.removeEventListener("error",r),e(t))}function r(i){i.preventDefault(),t.removeEventListener("message",n),t.removeEventListener("error",r),u7().warn("Failed to create Worker. Fallback to execute module in main thread",i),(t=new UM).addEventListener("message",n),t.addEventListener("error",r)}t.addEventListener("message",n),t.addEventListener("error",r)})}function VWe(){let t;if(nr.default!=null){const i={...nr};delete i.default,t=JSON.parse(JSON.stringify(i))}else t=JSON.parse(JSON.stringify(nr));t.assetsPath=tu(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?tu(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=du(),t.has={"esri-csp-restrictions":ye("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ye("esri-2d-update-debug"),"esri-2d-log-updating":ye("esri-2d-log-updating"),"featurelayer-pbf":ye("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":ye("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":ye("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ye("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ye("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":ye("featurelayer-query-max-depth"),"featurelayer-query-tile-max-features":ye("featurelayer-query-tile-max-features"),"featurelayer-query-tile-concurrency":ye("featurelayer-query-tile-concurrency"),"featurelayer-query-pausing-enabled":ye("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-concurrency":ye("featurelayer-snapshot-concurrency"),"featurelayer-snapshot-enabled":ye("featurelayer-snapshot-enabled"),"parquetlayer-full-query-feature-count":ye("parquetlayer-full-query-feature-count"),"esri-atomics":ye("esri-atomics"),"esri-shared-array-buffer":ye("esri-shared-array-buffer"),"esri-tiles-debug":ye("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ye("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ye("feature-polyline-generalization-factor"),"host-webworker":1},t.workers.loaderUrl&&(t.workers.loaderUrl=tu(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=tu(t.workers.workerPath):t.workers.workerPath=tu(Hi("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=nr.workers.loaderConfig,n=LWe({baseUrl:e?.baseUrl,locale:du(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e?.has},map:{...e?.map},paths:{...e?.paths},packages:e?.packages||[]});return JSON.stringify({esriConfig:t,loaderConfig:n,kernelInfo:{buildDate:Nfe,fullVersion:vB,revision:Ofe}})}let zWe=0;const{ABORT:dne,INVOKE:GWe,OPEN:UWe,OPENED:BWe,RESPONSE:zE}=op;let WWe=class Pye{static async create(e){const n=await FWe();return new Pye(n,e)}constructor(e,n){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=n,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",r=>{r.preventDefault(),kt.getLogger("esri.core.workers.WorkerOwner").error(r)})}terminate(){this.worker.terminate()}async open(e,n={}){const{signal:r}=n,i=Aye();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:_B(r,()=>{this._outJobs.delete(i),this._post({type:dne,jobId:i})})};this._outJobs.set(i,a),this._post({type:UWe,jobId:i,modulePath:e})})}_onMessage(e){const n=rA(e);if(n)switch(n.type){case BWe:this._onOpenedMessage(n);break;case zE:this._onResponseMessage(n);break;case dne:this._onAbortMessage(n);break;case GWe:this._onInvokeMessage(n)}}_onAbortMessage(e){const n=this._inJobs,r=e.jobId,i=n.get(r);i&&(i.controller&&i.controller.abort(),n.delete(r))}_onInvokeMessage(e){const{methodName:n,jobId:r,data:i,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs,l=OWe[n];let c;try{if(typeof l!="function")throw new TypeError(`${n} is not a function`);c=l.call(null,i,{signal:o?o.signal:null})}catch(u){return void this._post({type:zE,jobId:r,error:fN(u)})}ga(c)?(a.set(r,{controller:o,promise:c}),c.then(u=>{a.has(r)&&(a.delete(r),this._post({type:zE,jobId:r},u))},u=>{a.has(r)&&(a.delete(r),u||(u={message:"Error encountered at method"+n}),wa(u)||this._post({type:zE,jobId:r,error:fN(u||{message:`Error encountered at method ${n}`})}))})):this._post({type:zE,jobId:r},c)}_onOpenedMessage(e){const{jobId:n,data:r}=e,i=this._outJobs.get(n);i&&(this._outJobs.delete(n),ii(i.abortHandle),i.resolve(r))}_onResponseMessage(e){const{jobId:n,error:r,data:i}=e,s=this._outJobs.get(n);s&&(this._outJobs.delete(n),ii(s.abortHandle),r?s.reject(Xe.fromJSON(JSON.parse(r))):s.resolve(i))}_post(e,n,r){return Iye(this.worker,e,n,r)}};const fne=ye("host-browser")?Math.min(navigator.hardwareConcurrency-1,ye("workers-pool-size")??8):0;let Wy=ye("esri-mobile")?Math.min(fne,3):fne;Wy||(Wy=ye("safari")&&ye("mac")?7:2);let pne=0;const BM=[];function HWe(){Cye()}async function QC(t,e){const n=new NWe,{registryTarget:r,...i}=e;return await n.open(t,i),r&&SWe(r,n),n}async function xMt(t,e={}){if(typeof t!="string")throw new Xe("workers:undefined-module","modulePath is missing");let n=e.strategy||"distributed";if(ye("host-webworker")&&!ye("esri-workers")&&(n="local"),n==="local"){let r=await L2.loadWorker(t);r||(r=await import(t)),mi(e.signal);const i=e.client||r;return QC([L2.connect(r,e.schedule)],{...e,client:i})}if(await Cye(),mi(e.signal),n==="dedicated"){const r=pne++%Wy;return QC([await BM[r].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const r=Math.min(e.maxNumWorkers,Wy);if(r<Wy){const i=new Array(r);for(let s=0;s<r;++s){const o=pne++%Wy;i[s]=BM[o].open(t,e)}return QC(i,e)}}return QC(BM.map(r=>r.open(t,e)),e)}let eR=null;async function Cye(){if(eR)return eR;new AbortController;const t=[];for(let e=0;e<Wy;e++){const n=WWe.create(e).then(r=>(BM[e]=r,r));t.push(n)}return eR=Promise.all(t),eR}let kT=class extends Ot{constructor(e){super(e),this.addHandles([this.on("before-add",n=>{n.item==null&&n.preventDefault()}),this.on("after-add",n=>this._own(n.item)),this.on("after-remove",n=>this._release(n.item))])}get owner(){return this._get("owner")}set owner(e){this.destroyed||e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Ot.ofType(this.itemType.Type))(e):new Ot(e)}};function h7(t,e){return{type:t,cast:Fpe,set(n){const r=kd(n,this._get(e),t);r&&!r.destroyed&&(r.owner=this),this._set(e,r)}}}x([E()],kT.prototype,"owner",null),kT=x([ue("esri.core.support.OwningCollection")],kT);var d7,Nw;let Co=(Nw=class extends qt{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new d7({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}},d7=Nw,Nw);x([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Co.prototype,"cols",void 0),x([E({type:jr,json:{write:!0}})],Co.prototype,"level",void 0),x([E({type:String,json:{write:!0}})],Co.prototype,"levelValue",void 0),x([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Co.prototype,"origin",void 0),x([E({type:Number,json:{write:!0}})],Co.prototype,"resolution",void 0),x([E({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],Co.prototype,"rows",void 0),x([E({type:Number,json:{write:!0}})],Co.prototype,"scale",void 0),Co=d7=x([ue("esri.layers.support.LOD")],Co);let qWe=class Rye{constructor(e,n,r,i=bl()){this._level=e,this._row=n,this._col=r,this.extent=i}get id(){return this._id??=`${this.level}/${this.row}/${this.col}`,this._id}get level(){return this._level}set level(e){this._level=e,this._id=null}get row(){return this._row}set row(e){this._row=e,this._id=null}get col(){return this._col}set col(e){this._col=e,this._id=null}toJSON(){return{level:this._level,row:this._row,col:this._col,extent:this.extent}}static fromJSON(e){return new Rye(e.level,e.row,e.col,e.extent)}};var nx;const mne=new Ys({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});var Ow;let Sa=(Ow=class extends qt{static create(e={}){const{resolutionFactor:n=1,scales:r,size:i=256,spatialReference:s=Bt.WebMercator,numLODs:o=24}=e;if(!dc(s)){const f=[];if(r)for(let g=0;g<r.length;g++){const y=r[g];f.push(new Co({level:g,scale:y,resolution:y}))}else{let g=5e-4;for(let y=o-1;y>=0;y--)f.unshift(new Co({level:y,scale:g,resolution:g})),g*=2}return new nx({dpi:96,lods:f,origin:new Jt(0,0,s),size:[i,i],spatialReference:s})}const a=za(s),l=e.origin?new Jt({x:e.origin.x,y:e.origin.y,spatialReference:s}):new Jt(a?{x:a.origin[0],y:a.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),c=96,u=1/(Kd(s)*39.37*c),h=[];if(r)for(let f=0;f<r.length;f++){const g=r[f],y=g*u;h.push(new Co({level:f,scale:g,resolution:y}))}else{let f=yb(s)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const g=Math.ceil(o/n);h.push(new Co({level:0,scale:f,resolution:f*u}));for(let y=1;y<g;y++){const _=f/2**n,b=_*u;h.push(new Co({level:y,scale:_,resolution:b})),f=_}}return new nx({dpi:c,lods:h,origin:l,size:[i,i],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:n}=this;if(e&&n){const r=za(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-n.x)<=r.dx}return!1}readOrigin(e,n){return Jt.fromJSON({spatialReference:n.spatialReference,...e})}set lods(e){let n=0,r=0;const i=[],s=this._levelToLOD={};e&&(n=-1/0,r=1/0,e.forEach(o=>{i.push(o.scale),n=o.scale>n?o.scale:n,r=o.scale<r?o.scale:r,s[o.level]=o})),this._set("scales",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,n){return[n.cols,n.rows]}writeSize(e,n){n.cols=e[0],n.rows=e[1]}zoomToScale(e){const n=this.scales;if(e<=0)return n[0];if(e>=n.length-1)return n[n.length-1];const r=Math.floor(e),i=r+1;return n[r]/(n[r]/n[i])**(e-r)}scaleToZoom(e){const n=this.scales,r=n.length-1;let i=0;for(;i<r;i++){const s=n[i],o=n[i+1];if(s<=e)return i;if(o===e)return i+1;if(s>e&&o<e)return i+Math.log(s/e)/Math.log(s/o)}return i}tileAt(e,n,r,i){const s=this.lodAt(e);if(!s)return null;let o,a;if(typeof n=="number")o=n,a=r;else if(go(n.spatialReference,this.spatialReference))o=n.x,a=n.y,i=r;else{const u=BO(n,this.spatialReference);if(u==null)return null;o=u.x,a=u.y,i=r}const l=s.resolution*this.size[0],c=s.resolution*this.size[1];return i??=new qWe(0,0,0),i.level=e,i.row=Math.floor((this.origin.y-a)/c+.001),i.col=Math.floor((o-this.origin.x)/l+.001),this.updateTileInfo(i),i}updateTileInfo(e,n=0){if(!("extent"in e))return!1;let r=this.lodAt(e.level);if(!r&&n===1){const a=this.lods[this.lods.length-1];a.level<e.level&&(r=a)}if(!r)return!1;const i=e.level-r.level,s=r.resolution*this.size[0]/2**i,o=r.resolution*this.size[1]/2**i;return e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*o,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+o,!0}upsampleTile(e){const n=this._upsampleLevels[e.level];return!(!n||n.parentLevel===-1)&&(e.level=n.parentLevel,e.row=Math.floor(e.row/n.factor+.001),e.col=Math.floor(e.col/n.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,n){const r=this.lodAt(n.level);if(r==null)return null;const{resolution:i}=r,s=i*this.size[0],o=i*this.size[1];return e[0]=this.origin.x+n.col*s,e[1]=this.origin.y-(n.row+1)*o,e[2]=e[0]+s,e[3]=e[1]+o,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return nx.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const n=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&n===0)return this;const r=[],i=this.lods.length-n;for(let s=0;s<i;s++){const o=s+n,{scale:a,resolution:l}=o>=0?this.lods[o]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new Co({level:s,scale:a,resolution:l}))}return new nx({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let n=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:n?n.level:-1,factor:n?n.resolution/i.resolution:0},n=i}}},nx=Ow,Ow);x([E({type:Number,json:{write:!0}})],Sa.prototype,"compressionQuality",void 0),x([E({type:Number,json:{write:!0}})],Sa.prototype,"dpi",void 0),x([E({type:String,json:{read:mne.read,write:mne.write,origins:{"web-scene":{read:!1,write:!1}}}})],Sa.prototype,"format",void 0),x([E({readOnly:!0})],Sa.prototype,"isWrappable",null),x([E({type:Jt,json:{write:!0}})],Sa.prototype,"origin",void 0),x([cr("origin")],Sa.prototype,"readOrigin",null),x([E({type:[Co],value:null,json:{write:!0}})],Sa.prototype,"lods",null),x([E({readOnly:!0})],Sa.prototype,"scales",void 0),x([E({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Sa.prototype,"size",void 0),x([cr("size",["rows","cols"])],Sa.prototype,"readSize",null),x([er("size",{cols:{type:jr},rows:{type:jr}})],Sa.prototype,"writeSize",null),x([E({type:Bt,json:{write:!0}})],Sa.prototype,"spatialReference",void 0),Sa=nx=x([ue("esri.layers.support.TileInfo")],Sa);let D2=class extends kT{constructor(e){super(e),this.addHandles(this.on("before-add",n=>{n.item!=null&&n.item.parent===this.owner&&(kt.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),n.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};D2=x([ue("esri.support.AnalysesCollection")],D2);const WM={widthBreakpoint:{getValue(t){const e=t.viewSize[0],n=t.breakpoints,r=this.values;return e<=n.xsmall?r.xsmall:e<=n.small?r.small:e<=n.medium?r.medium:e<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],n=t.breakpoints,r=this.values;return e<=n.xsmall?r.xsmall:e<=n.small?r.small:e<=n.medium?r.medium:e<=n.large?r.large:r.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,n=e[0],r=e[1],i=this.values;return r>=n?i.portrait:i.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},n$={xsmall:544,small:768,medium:992,large:1200};function KWe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function r$(t,e){return e?WM[t].valueToClassName[e].split(" "):[]}const YWe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=n$}initialize(){this.addHandles(fn(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),ya))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!KWe(r)){const i=JSON.stringify(n$,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=n$}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=Na.acquire(),i=Na.acquire();let s,o=!1;for(s in WM){const a=this[s],l=WM[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});a!==l&&(o=!0,this[s]=l,r$(s,a).forEach(c=>i.push(c)),r$(s,l).forEach(c=>r.push(c)))}o&&(this._applyClassNameChanges(r,i),Na.release(r),Na.release(i))}_applyClassNameChanges(r,i){const s=this.container;s&&(i.forEach(o=>s.classList.remove(o)),r.forEach(o=>s.classList.add(o)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in WM)r$(i,this[i]).forEach(s=>r.classList.remove(s))}};return x([E()],n.prototype,"breakpoints",null),x([E()],n.prototype,"orientation",void 0),x([E()],n.prototype,"widthBreakpoint",void 0),x([E()],n.prototype,"heightBreakpoint",void 0),n=x([ue("esri.views.BreakpointsOwner")],n),n};function CW(t){return typeof t=="string"?document.getElementById(t):t??null}function gne(t,e){for(;;){const n=t.firstChild;if(!n)break;e.appendChild(n)}}let h1=class extends Kt{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(e,n,r={}){return this._installWatch(e,n,r,fn)}addWhen(e,n,r={}){return this._installWatch(e,n,r,wc)}addOnCollectionChange(e,n,{initial:r=!1,final:i=!1}={}){const s=++this._handleId;return this.addHandles([X1(e,"after-changes",this._createSyncUpdatingCallback(),Kg),X1(e,"change",n,{onListenerAdd:r?o=>n({added:o.toArray(),removed:[]}):void 0,onListenerRemove:i?o=>n({added:[],removed:o.toArray()}):void 0})],s),Zn(()=>this.removeHandles(s))}addPromise(e){if(e==null)return e;const n=++this._handleId;this.addHandles(Zn(()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this.hasHandles(tR)||this._set("updating",!1))}),n),this._pendingPromises.add(e),this._set("updating",!0);const r=()=>this.removeHandles(n);return e.then(r,r),e}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(e,n,r={},i){const s=++this._handleId;r.sync||this._installSyncUpdatingWatch(e,s);const o=i(e,n,r);return this.addHandles(o,s),Zn(()=>this.removeHandles(s))}_installSyncUpdatingWatch(e,n){const r=this._createSyncUpdatingCallback(),i=fn(e,r,{sync:!0,equals:()=>!1});return this.addHandles(i,n),i}_createSyncUpdatingCallback(){return()=>{this.removeHandles(tR),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(gb(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(tR))}),tR)}}};x([E({readOnly:!0})],h1.prototype,"updating",void 0),h1=x([ue("esri.core.support.UpdatingHandles")],h1);const tR=-42;var pN=function(){return pN=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pN.apply(this,arguments)},f7={exports:{}},zi={},p7={exports:{}},bv={};function Mye(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function XWe(t,e,n){}function ZWe(t,e,n){}var JWe=/javascript\s*\:/img;function QWe(t,e){return JWe.test(e)?"":e}bv.whiteList=Mye();bv.getDefaultWhiteList=Mye;bv.onAttr=XWe;bv.onIgnoreAttr=ZWe;bv.safeAttrValue=QWe;var eHe={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,i;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},GE=eHe;function tHe(t,e){t=GE.trimRight(t),t[t.length-1]!==";"&&(t+=";");var n=t.length,r=!1,i=0,s=0,o="";function a(){if(!r){var u=GE.trim(t.slice(i,s)),h=u.indexOf(":");if(h!==-1){var f=GE.trim(u.slice(0,h)),g=GE.trim(u.slice(h+1));if(f){var y=e(i,o.length,f,g,u);y&&(o+=y+"; ")}}}i=s+1}for(;s<n;s++){var l=t[s];if(l==="/"&&t[s+1]==="*"){var c=t.indexOf("*/",s+2);if(c===-1)break;s=c+1,i=s+1,r=!1}else l==="("?r=!0:l===")"?r=!1:l===";"?r||a():l===`
`&&a()}return GE.trim(o)}var nHe=tHe,nR=bv,rHe=nHe;function yne(t){return t==null}function iHe(t){var e={};for(var n in t)e[n]=t[n];return e}function Nye(t){t=iHe(t||{}),t.whiteList=t.whiteList||nR.whiteList,t.onAttr=t.onAttr||nR.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||nR.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||nR.safeAttrValue,this.options=t}Nye.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,i=n.onAttr,s=n.onIgnoreAttr,o=n.safeAttrValue,a=rHe(t,function(l,c,u,h,f){var g=r[u],y=!1;if(g===!0?y=g:typeof g=="function"?y=g(h):g instanceof RegExp&&(y=g.test(h)),y!==!0&&(y=!1),h=o(u,h),!!h){var _={position:c,sourcePosition:l,source:f,isWhite:y};if(y){var b=i(u,h,_);return yne(b)?u+":"+h:b}else{var b=s(u,h,_);if(!yne(b))return b}}});return a};var sHe=Nye;(function(t,e){var n=bv,r=sHe;function i(o,a){var l=new r(a);return l.process(o)}e=t.exports=i,e.FilterCSS=r;for(var s in n)e[s]=n[s]})(p7,p7.exports);var RW=p7.exports,MW={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,i;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,n=e.exec(t);return n?n.index:-1}},oHe=RW.FilterCSS,aHe=RW.getDefaultWhiteList,mN=MW;function Oye(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Lye=new oHe;function lHe(t,e,n){}function cHe(t,e,n){}function uHe(t,e,n){}function hHe(t,e,n){}function Dye(t){return t.replace(fHe,"&lt;").replace(pHe,"&gt;")}function dHe(t,e,n,r){if(n=Gye(n),e==="href"||e==="src"){if(n=mN.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(e==="background"){if(rR.lastIndex=0,rR.test(n))return""}else if(e==="style"){if(vne.lastIndex=0,vne.test(n)||(_ne.lastIndex=0,_ne.test(n)&&(rR.lastIndex=0,rR.test(n))))return"";r!==!1&&(r=r||Lye,n=r.process(n))}return n=Uye(n),n}var fHe=/</g,pHe=/>/g,mHe=/"/g,gHe=/&quot;/g,yHe=/&#([a-zA-Z0-9]*);?/gim,vHe=/&colon;?/gim,_He=/&newline;?/gim,rR=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,vne=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,_ne=/u\s*r\s*l\s*\(.*/gi;function jye(t){return t.replace(mHe,"&quot;")}function $ye(t){return t.replace(gHe,'"')}function Fye(t){return t.replace(yHe,function(n,r){return r[0]==="x"||r[0]==="X"?String.fromCharCode(parseInt(r.substr(1),16)):String.fromCharCode(parseInt(r,10))})}function Vye(t){return t.replace(vHe,":").replace(_He," ")}function zye(t){for(var e="",n=0,r=t.length;n<r;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return mN.trim(e)}function Gye(t){return t=$ye(t),t=Fye(t),t=Vye(t),t=zye(t),t}function Uye(t){return t=jye(t),t=Dye(t),t}function xHe(){return""}function wHe(t,e){typeof e!="function"&&(e=function(){});var n=!Array.isArray(t);function r(o){return n?!0:mN.indexOf(t,o)!==-1}var i=[],s=!1;return{onIgnoreTag:function(o,a,l){if(r(o))if(l.isClosing){var c="[/removed]",u=l.position+c.length;return i.push([s!==!1?s:l.position,u]),s=!1,c}else return s||(s=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return mN.forEach(i,function(c){a+=o.slice(l,c[0]),l=c[1]}),a+=o.slice(l),a}}}function bHe(t){for(var e="",n=0;n<t.length;){var r=t.indexOf("<!--",n);if(r===-1){e+=t.slice(n);break}e+=t.slice(n,r);var i=t.indexOf("-->",r);if(i===-1)break;n=i+3}return e}function EHe(t){var e=t.split("");return e=e.filter(function(n){var r=n.charCodeAt(0);return r===127?!1:r<=31?r===10||r===13:!0}),e.join("")}zi.whiteList=Oye();zi.getDefaultWhiteList=Oye;zi.onTag=lHe;zi.onIgnoreTag=cHe;zi.onTagAttr=uHe;zi.onIgnoreTagAttr=hHe;zi.safeAttrValue=dHe;zi.escapeHtml=Dye;zi.escapeQuote=jye;zi.unescapeQuote=$ye;zi.escapeHtmlEntities=Fye;zi.escapeDangerHtml5Entities=Vye;zi.clearNonPrintableCharacter=zye;zi.friendlyAttrValue=Gye;zi.escapeAttrValue=Uye;zi.onIgnoreTagStripAll=xHe;zi.StripTagBody=wHe;zi.stripCommentTag=bHe;zi.stripBlankChar=EHe;zi.cssFilter=Lye;zi.getDefaultCSSWhiteList=aHe;var oL={},Gm=MW;function SHe(t){var e=Gm.spaceIndex(t),n;return e===-1?n=t.slice(1,-1):n=t.slice(1,e+1),n=Gm.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function THe(t){return t.slice(0,2)==="</"}function kHe(t,e,n){var r="",i=0,s=!1,o=!1,a=0,l=t.length,c="",u="";e:for(a=0;a<l;a++){var h=t.charAt(a);if(s===!1){if(h==="<"){s=a;continue}}else if(o===!1){if(h==="<"){r+=n(t.slice(i,a)),s=a,i=a;continue}if(h===">"){r+=n(t.slice(i,s)),u=t.slice(s,a+1),c=SHe(u),r+=e(s,r.length,c,u,THe(u)),i=a+1,s=!1;continue}if(h==='"'||h==="'")for(var f=1,g=t.charAt(a-f);g.trim()===""||g==="=";){if(g==="="){o=h;continue e}g=t.charAt(a-++f)}}else if(h===o){o=!1;continue}}return i<t.length&&(r+=n(t.substr(i))),r}var AHe=/[^a-zA-Z0-9\\_:.-]/gim;function IHe(t,e){var n=0,r=0,i=[],s=!1,o=t.length;function a(f,g){if(f=Gm.trim(f),f=f.replace(AHe,"").toLowerCase(),!(f.length<1)){var y=e(f,g||"");y&&i.push(y)}}for(var l=0;l<o;l++){var c=t.charAt(l),u,h;if(s===!1&&c==="="){s=t.slice(n,l),n=l+1,r=t.charAt(n)==='"'||t.charAt(n)==="'"?n:CHe(t,l+1);continue}if(s!==!1&&l===r){if(h=t.indexOf(c,l+1),h===-1)break;u=Gm.trim(t.slice(r+1,h)),a(s,u),s=!1,l=h,n=l+1;continue}if(/\s|\n|\t/.test(c))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(h=PHe(t,l),h===-1){u=Gm.trim(t.slice(n,l)),a(u),s=!1,n=l+1;continue}else{l=h-1;continue}else if(h=RHe(t,l-1),h===-1){u=Gm.trim(t.slice(n,l)),u=xne(u),a(s,u),s=!1,n=l+1;continue}else continue}return n<t.length&&(s===!1?a(t.slice(n)):a(s,xne(Gm.trim(t.slice(n))))),Gm.trim(i.join(" "))}function PHe(t,e){for(;e<t.length;e++){var n=t[e];if(n!==" ")return n==="="?e:-1}}function CHe(t,e){for(;e<t.length;e++){var n=t[e];if(n!==" ")return n==="'"||n==='"'?e:-1}}function RHe(t,e){for(;e>0;e--){var n=t[e];if(n!==" ")return n==="="?e:-1}}function MHe(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function xne(t){return MHe(t)?t.substr(1,t.length-2):t}oL.parseTag=kHe;oL.parseAttr=IHe;var NHe=RW.FilterCSS,Xu=zi,Bye=oL,OHe=Bye.parseTag,LHe=Bye.parseAttr,HM=MW;function iR(t){return t==null}function DHe(t){var e=HM.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=HM.trim(t.slice(e+1,-1));var n=t[t.length-1]==="/";return n&&(t=HM.trim(t.slice(0,-1))),{html:t,closing:n}}function jHe(t){var e={};for(var n in t)e[n]=t[n];return e}function $He(t){var e={};for(var n in t)Array.isArray(t[n])?e[n.toLowerCase()]=t[n].map(function(r){return r.toLowerCase()}):e[n.toLowerCase()]=t[n];return e}function Wye(t){t=jHe(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Xu.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=$He(t.whiteList||t.allowList):t.whiteList=Xu.whiteList,t.onTag=t.onTag||Xu.onTag,t.onTagAttr=t.onTagAttr||Xu.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Xu.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Xu.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Xu.safeAttrValue,t.escapeHtml=t.escapeHtml||Xu.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new NHe(t.css))}Wye.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,n=e.options,r=n.whiteList,i=n.onTag,s=n.onIgnoreTag,o=n.onTagAttr,a=n.onIgnoreTagAttr,l=n.safeAttrValue,c=n.escapeHtml,u=e.cssFilter;n.stripBlankChar&&(t=Xu.stripBlankChar(t)),n.allowCommentTag||(t=Xu.stripCommentTag(t));var h=!1;n.stripIgnoreTagBody&&(h=Xu.StripTagBody(n.stripIgnoreTagBody,s),s=h.onIgnoreTag);var f=OHe(t,function(g,y,_,b,T){var A={sourcePosition:g,position:y,isClosing:T,isWhite:Object.prototype.hasOwnProperty.call(r,_)},I=i(_,b,A);if(!iR(I))return I;if(A.isWhite){if(A.isClosing)return"</"+_+">";var P=DHe(b),N=r[_],L=LHe(P.html,function(C,M){var O=HM.indexOf(N,C)!==-1,D=o(_,C,M,O);return iR(D)?O?(M=l(_,C,M,u),M?C+'="'+M+'"':C):(D=a(_,C,M,O),iR(D)?void 0:D):D});return b="<"+_,L&&(b+=" "+L),P.closing&&(b+=" /"),b+=">",b}else return I=s(_,b,A),iR(I)?c(b):I},c);return h&&(f=h.remove(f)),f};var FHe=Wye;(function(t,e){var n=zi,r=oL,i=FHe;function s(a,l){var c=new i(l);return c.process(a)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=i,(function(){for(var a in n)e[a]=n[a];for(var l in r)e[l]=r[l]})();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(f7,f7.exports);var P_=f7.exports,VHe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Hye=(function(){function t(e,n){var r=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],del:["style"],details:["open","style"],div:["align","aria-hidden","aria-label","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["aria-hidden","aria-label","style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=pN(pN({},P_.getDefaultCSSWhiteList()),{"align-items":!0,"align-self":!0,flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,float:!0,gap:!0,grid:!0,"grid-area":!0,"grid-auto-columns":!0,"grid-auto-flow":!0,"grid-auto-rows":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-start":!0,"grid-template":!0,"grid-template-areas":!0,"grid-template-columns":!0,"grid-template-rows":!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"line-height":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?r.sanitizeUrl(a):P_.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var i;e&&!n?i=e:e&&n?(i=Object.create(this.arcgisFilterOptions),i.css={whiteList:this.arcgisCSSWhiteList},Object.keys(e).forEach(function(s){if(s==="whiteList")i.whiteList=r._extendObjectOfArrays([r.arcgisWhiteList,e.whiteList||{}]);else if(s==="css"){var o=e.css.whiteList;o!=null&&e.css instanceof Object&&Object.keys(o).forEach(function(a){return i.css.whiteList[a]=o[a]})}else i[s]=e[s]})):(i=Object.create(this.arcgisFilterOptions),i.whiteList=this.arcgisWhiteList,i.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=i,this._xssFilter=new P_.FilterXSS(i)}return t.prototype.sanitize=function(e,n){switch(n===void 0&&(n={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,n);default:return n.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,n){var r=(n??{}).isProtocolRequired,i=r===void 0?!0:r,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?P_.escapeAttrValue(e):!s&&!i?P_.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,n,r,i){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,n,r,i):P_.safeAttrValue(e,n,r,i)},t.prototype.validate=function(e,n){n===void 0&&(n={});var r=this.sanitize(e,n);return{isValid:e===r,sanitized:r}},t.prototype.encodeHTML=function(e){var n=this;return String(e).replace(/[&<>"'\/]/g,function(r){return n._entityMap[r]})},t.prototype.encodeAttrValue=function(e){var n=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(r,i){return n.test(r)?r:"&#x".concat(Number(e.charCodeAt(i)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var n={};return e.forEach(function(r){Object.keys(r).forEach(function(i){Array.isArray(r[i])&&Array.isArray(n[i])?n[i]=n[i].concat(r[i]):n[i]=r[i]})}),n},t.prototype._iterateOverObject=function(e,n){var r=this;n===void 0&&(n={});try{var i=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(a,l){var c=r.validate(l,n);return c.isValid?a.concat([l]):(i=!0,a.concat([c.sanitized]))},[]);else if(VHe(e)){var o=Object.keys(e);s=o.reduce(function(a,l){var c=e[l],u=r.validate(c,n);return u.isValid?a[l]=c:(i=!0,a[l]=u.sanitized),a},{})}else return n.allowUndefined&&typeof e>"u"?void 0:null;return i?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t})();const zHe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],GHe=zHe.reduce((t,e)=>(t[e]=[],t),{}),UHe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],qye=new Hye({whiteList:GHe,onTagAttr:(t,e,n)=>{const r=`${e}="${n}"`;if(UHe.includes(e))return r},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0),SMt=new Hye({whiteList:{br:[]},stripIgnoreTag:!0,escapeHtml:t=>t},!1),Kye="http://www.w3.org/",aL=`${Kye}2000/svg`,Yye=`${Kye}1999/xlink`;let wne=[],NW=(t,e)=>{let n={};return Object.keys(t).forEach(r=>{n[r]=t[r]}),e&&Object.keys(e).forEach(r=>{n[r]=e[r]}),n},OW=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),Xye=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},BHe=(t,e,n)=>{if(e.vnodeSelector!==""){for(let r=n;r<t.length;r++)if(OW(t[r],e))return r}return-1},i$=(t,e,n,r)=>{let i=t[e];if(i.vnodeSelector==="")return;let s=i.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(OW(a,i))throw new Error(`${n.vnodeSelector} had a ${i.vnodeSelector} child ${r==="added"?r:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},WHe=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},m7=[],g7=!1,Zye=t=>{(t.children||[]).forEach(Zye),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},bne=()=>{g7=!1,m7.forEach(Zye),m7.length=0},Ene=t=>{m7.push(t),g7||(g7=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(bne,{timeout:16}):setTimeout(bne,16))},Sne=t=>{let e=t.domNode;if(t.properties){let n=t.properties.exitAnimation;if(n)return e.style.pointerEvents="none",void n(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),Ene(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),Ene(t))},HHe=(t,e,n)=>{if(!e)return;let r=n.eventHandlerInterceptor,i=Object.keys(e),s=i.length;for(let o=0;o<s;o++){let a=i[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")v7(t,l,!0);else if(a==="classes"){let c=Object.keys(l),u=c.length;for(let h=0;h<u;h++){let f=c[h];l[f]&&t.classList.add(f)}}else if(a==="styles"){let c=Object.keys(l),u=c.length;for(let h=0;h<u;h++){let f=c[h],g=l[f];g&&(Xye(g),n.styleApplyer(t,f,g))}}else if(a!=="key"&&l!=null){let c=typeof l;c==="function"?(a.lastIndexOf("on",0)===0&&(r&&(l=r(a,l,t,e)),a==="oninput"&&(function(){let u=l;l=function(h){u.apply(this,[h]),h.target["oninput-value"]=h.target.value}})()),t[a]=l):n.namespace===aL?a==="href"?t.setAttributeNS(Yye,a,l):t.setAttribute(a,l):c==="string"&&a!=="value"?a==="innerHTML"?t[a]=qye.sanitize(l):y7(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function y7(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let gN,qHe=(t,e,n)=>{if(e)for(let r of e)AT(r,t,void 0,n)},Jye=(t,e,n)=>{qHe(t,e.children,n),e.text&&(t.textContent=e.text),HHe(t,e.properties,n),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,n,e.vnodeSelector,e.properties,e.children])},AT=(t,e,n,r)=>{let i,s=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")i=t.domNode=a.createTextNode(t.text),n!==void 0?e.insertBefore(i,n):e.appendChild(i);else{for(let l=0;l<=o.length;++l){let c=o.charAt(l);if(l===o.length||c==="."||c==="#"){let u=o.charAt(s-1),h=o.slice(s,l);u==="."?i.classList.add(h):u==="#"?i.id=h:(h==="svg"&&(r=NW(r,{namespace:aL})),r.namespace!==void 0?i=t.domNode=a.createElementNS(r.namespace,h):(i=t.domNode=t.domNode||a.createElement(h),h==="input"&&t.properties&&t.properties.type!==void 0&&i.setAttribute("type",t.properties.type)),n!==void 0?e.insertBefore(i,n):i.parentNode!==e&&e.appendChild(i)),s=l+1}}Jye(i,t,r)}},v7=(t,e,n)=>{e&&e.split(" ").forEach(r=>{r&&t.classList.toggle(r,n)})},KHe=(t,e,n,r)=>{if(!n)return;let i=!1,s=Object.keys(n),o=s.length;for(let a=0;a<o;a++){let l=s[a],c=n[l],u=e[l];if(l==="class")u!==c&&(v7(t,u,!1),v7(t,c,!0));else if(l==="classes"){let h=t.classList,f=Object.keys(c),g=f.length;for(let y=0;y<g;y++){let _=f[y],b=!!c[_];b!==!!u[_]&&(i=!0,b?h.add(_):h.remove(_))}}else if(l==="styles"){let h=Object.keys(c),f=h.length;for(let g=0;g<f;g++){let y=h[g],_=c[y];_!==u[y]&&(i=!0,_?(Xye(_),r.styleApplyer(t,y,_)):r.styleApplyer(t,y,""))}}else if(c||typeof u!="string"||(c=""),l!=="value"||y7(t)){if(c!==u){let h=typeof c;h==="function"&&r.eventHandlerInterceptor||(r.namespace===aL?l==="href"?t.setAttributeNS(Yye,l,c):t.setAttribute(l,c):h==="string"?l==="innerHTML"?t[l]=qye.sanitize(c):l==="role"&&c===""?t.removeAttribute(l):y7(t)&&l in t?t[l]=c:t.setAttribute(l,c):t[l]!==c&&(t[l]=c),i=!0)}}else{let h=t[l];h!==c&&(t["oninput-value"]?h===t["oninput-value"]:c!==u)&&(t[l]=c,t["oninput-value"]=void 0),c!==u&&(i=!0)}}return i},YHe=(t,e,n,r,i)=>{if(n===r)return!1;r=r||wne;let s,o=(n=n||wne).length,a=r.length,l=0,c=0,u=!1;for(;c<a;){let h=l<o?n[l]:void 0,f=r[c];if(h!==void 0&&OW(h,f))u=gN(h,f,i)||u,l++;else{let g=BHe(n,f,l+1);if(g>=0){for(s=l;s<g;s++)Sne(n[s]),i$(n,s,t,"removed");u=gN(n[g],f,i)||u,l=g+1}else AT(f,e,l<o?n[l].domNode:void 0,i),WHe(f),i$(r,c,t,"added")}c++}if(o>l)for(s=l;s<o;s++)Sne(n[s]),i$(n,s,t,"removed");return u};gN=(t,e,n)=>{let r=t.domNode,i=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=r.ownerDocument.createTextNode(e.text);return r.parentNode.replaceChild(o,r),e.domNode=o,i=!0,i}e.domNode=r}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(n=NW(n,{namespace:aL})),t.text!==e.text&&(s=!0,e.text===void 0?r.removeChild(r.firstChild):r.textContent=e.text),e.domNode=r,s=YHe(e,r,t.children,e.children,n)||s,s=KHe(r,t.properties,e.properties,n)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[r,n,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(r,e.properties,t.properties),i};let sR=(t,e)=>({getLastRender:()=>t,update:n=>{if(t.vnodeSelector!==n.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let r=t;t=n,gN(r,n,e)},domNode:t.domNode});const XHe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,n)=>{e.charAt(0)==="-"?t.style.setProperty(e,n):t.style[e]=n}};let wS=t=>NW(XHe,t),cg={append:(t,e,n)=>(n=wS(n),AT(e,t,void 0,n),sR(e,n)),insertBefore:(t,e,n)=>(n=wS(n),AT(e,t.parentNode,t,n),sR(e,n)),merge:(t,e,n)=>(n=wS(n),e.domNode=t,Jye(t,e,n),sR(e,n)),replace:(t,e,n)=>(n=wS(n),AT(e,t.parentNode,t,n),t.parentNode.removeChild(t),sR(e,n))},Qye,ZHe=(t,e)=>{let n=[];for(;t&&t!==e;)n.push(t),t=t.parentNode;return n};Qye=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let JHe=(t,e)=>{let n=t;return e.forEach(r=>{n=n&&n.children?Qye(n.children,i=>i.domNode===r):void 0}),n},QHe=(t,e,n)=>{let r=function(i){n("domEvent",i);let s=e(),o=ZHe(i.currentTarget,s.domNode);o.reverse();let a,l=JHe(s.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${i.type}`].apply(l.properties.bind||this,arguments)),n("domEventProcessed",i),a};return(i,s,o,a)=>r},Tne=t=>{let e,n,r=wS(t),i=r.performanceLogger,s=!0,o=!1,a=[],l=[],c=(h,f,g)=>{let y,_=()=>y;r.eventHandlerInterceptor=QHe(e,_,i),y=h(f,g(),r),a.push(y),l.push(g)},u=()=>{if(n=void 0,s){s=!1,i("renderStart",void 0);for(let h=0;h<a.length;h++){let f=l[h]();i("rendered",void 0),a[h].update(f),i("patched",void 0)}i("renderDone",void 0),s=!0}};return e={renderNow:u,scheduleRender:()=>{n||o||(n=requestAnimationFrame(u))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),o=!0},resume:()=>{o=!1,s=!0,e.scheduleRender()},append:(h,f)=>{c(cg.append,h,f)},insertBefore:(h,f)=>{c(cg.insertBefore,h,f)},merge:(h,f)=>{c(cg.merge,h,f)},replace:(h,f)=>{c(cg.replace,h,f)},detach:h=>{for(let f=0;f<l.length;f++)if(l[f]===h)return l.splice(f,1),a.splice(f,1)[0];throw new Error("renderFunction was not found")}},e},Am=class extends Kt{constructor(){super(...arguments),this.items=new Ot,this._watchUpdatingTracking=new h1,this._callbacks=new Map,this._projector=Tne(),this._hiddenProjector=Tne()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,n=>{for(const r of n.added){const i=()=>r.render();this._callbacks.set(r,i),this._projector.append(this.surface,i)}for(const r of n.removed){const i=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(i.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const n=this._hiddenSurface,r=this._hiddenProjector;let i;const s=()=>(i=e.render(),i);r.append(n,s),r.renderNow();const o={left:0,top:0,right:0,bottom:0};if(i?.domNode){const a=i.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(r.detach(s);n.firstChild;)n.removeChild(n.firstChild);return o}overlaps(e,n){const r=this.computeBoundingRect(e),i=this.computeBoundingRect(n);return Math.max(r.left,i.left)<=Math.min(r.right,i.right)&&Math.max(r.top,i.top)<=Math.min(r.bottom,i.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e,n){const r=!!n?.disableDecorations;if(!this.items.some(s=>s.visible&&!(r&&s.isDecoration)))return;const i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(s=>{r&&s.isDecoration||(i.save(),s.renderCanvas(i),i.restore())}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};x([E({readOnly:!0})],Am.prototype,"surface",void 0),x([E({readOnly:!0})],Am.prototype,"items",void 0),x([E({readOnly:!0})],Am.prototype,"needsRender",null),x([E({readOnly:!0})],Am.prototype,"_watchUpdatingTracking",void 0),x([E({readOnly:!0})],Am.prototype,"updating",null),Am=x([ue("esri.views.overlay.ViewOverlay")],Am);const kne=Am,s$=[0,0];function eqe(t){const e=(t.ownerDocument||window.document).defaultView,n=t.getBoundingClientRect();return s$[0]=n.left+(e?.pageXOffset??0),s$[1]=n.top+(e?.pageYOffset??0),s$}function Ane(t){t&&(t.textContent="",t.parentNode&&t.parentNode.removeChild(t))}function tqe(t){const e=document.createElement("div");return t.appendChild(e),e}const C_=16,UE=750,nqe=512,rqe=2,iqe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this._freqInfo={freq:C_,time:UE},this._overlayRenderTaskHandle=null,this.aria={},this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([fn(()=>this.cursor,i=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",i)}),fn(()=>this.navigating,i=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",i.toString())}),fn(()=>[this.aria,this.surface],()=>this._updateAria(),{initial:!0})])}initialize(){const r=this;this.addHandles([fn(()=>this.ui,(i,s)=>this._handleUIChange(i,s),ya),r.on("focus",()=>this.notifyChange("focused")),r.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),s=CW(r);if(s||typeof r!="string"||kt.getLogger(this).error("#container",`element with id '${r}' not found`),i===s)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Ane(this.root),this._set("root",null)),this.userContent&&(gne(this.userContent,i),Ane(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",gne(s,o),s.appendChild(o),this._set("userContent",o);const a=document.createElement("div");a.className="esri-view-root",s.insertBefore(a,s.firstChild),this._set("root",a);const l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,a.appendChild(l),this._set("surface",l);const c=new kne;a.appendChild(c.surface),this._set("overlay",c),this.addHandles(fn(()=>c.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=S2({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=ii(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}set ui(r){const i=this._get("ui");i!==r&&i?.destroy(),this._set("ui",r)}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(r,i,s){const o=this.position;return r-=o?o[0]:0,i-=o?o[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}containerToPage(r,i,s){const o=this.position;return r+=o?o[0]:0,i+=o?o[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}_updateAria(){const{surface:r,aria:i}=this;r&&(r.ariaLabelledByElements=i?.labelledByElements??null,r.ariaDescribedByElements=i?.describedByElements??null,r.ariaLabel=i?.label??null,r.ariaDescription=i?.description??null)}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(fn(()=>this.root,s=>{r.container=s?tqe(s):null},ya),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=C_,r.time=UE;const i=S2({prepare:a=>{const l=this._measure(),c=this._freqInfo;if(c.time+=a.deltaTime,l&&(c.freq=C_,this._get("resizing")||this._set("resizing",!0)),c.time<c.freq)return;c.time=0;const u=this._position();c.freq=u||l?C_:Math.min(UE,c.freq*rqe),!l&&c.freq>=nqe&&(i.pause(),this._get("resizing")&&this._set("resizing",!1))}}),s=new ResizeObserver(a=>{r.freq=C_,r.time=UE,i.resume()});this.container!=null&&s.observe(this.container);const o=Zn(()=>s.disconnect());this.addHandles([hb(window,"resize",()=>{r.freq=C_,r.time=UE,i.resume()}),o,i],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,s=r?r.clientHeight:0;if(i===0||s===0)return this.suspended||this._set("suspended",!0),!1;const o=this.width,a=this.height;return i===o&&s===a?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:o,oldHeight:a,width:i,height:s}),!0)}_position(){const r=this.container,i=this.position,s=r&&eqe(r);return!!s&&(!i||s[0]!==i[0]||s[1]!==i[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return x([E()],n.prototype,"aria",void 0),x([E()],n.prototype,"container",null),x([E({readOnly:!0})],n.prototype,"focused",null),x([E({readOnly:!0})],n.prototype,"height",void 0),x([E()],n.prototype,"messagesCommon",void 0),x([E({type:kne})],n.prototype,"overlay",void 0),x([E({readOnly:!0})],n.prototype,"position",void 0),x([E({readOnly:!0})],n.prototype,"resizing",void 0),x([E({readOnly:!0})],n.prototype,"root",void 0),x([E({value:null,readOnly:!0})],n.prototype,"size",null),x([E({readOnly:!0})],n.prototype,"surface",void 0),x([E({readOnly:!0})],n.prototype,"suspended",void 0),x([E({nonNullable:!0})],n.prototype,"ui",null),x([E({readOnly:!0})],n.prototype,"userContent",void 0),x([E({readOnly:!0})],n.prototype,"width",void 0),x([E()],n.prototype,"widthBreakpoint",void 0),n=x([ue("esri.views.DOMContainer")],n),n},oR="popup",Ine="manual";function Id(t){return t!=null&&"open"in t&&"declaredClass"in t}function wp(t){return!!t&&t.tagName.toLowerCase()==="arcgis-popup"&&"open"in t}function sqe(t,e,n){const[r,i,s]=e;if(n){const[o,a,l]=n;o&&Id(a)&&(a.view=null,o.remove(a,oR),a!==i&&i&&a.destroy()),o&&l&&wp(l)&&(l.view=null,o.remove(l,oR),l!==s&&s&&l.remove())}r&&Id(i)&&(i.view=t,r.add(i,{key:oR,position:Ine,internal:!0})),r&&s&&wp(s)&&(s.view=t,r.add(s,{key:oR,position:Ine,internal:!0}))}async function oqe(t,e){const{popup:n,popupElement:r}=t;Id(n)?await aR(n,null,e):r&&wp(r)?await aR(null,r,e):e?.defer(async()=>{await t.setupPopup();const{popup:i,popupElement:s}=t;Id(i)&&!t.destroyed&&t.ready&&t.popupEnabled?await aR(i,null,e):s&&wp(s)&&await aR(null,s,e)})}function aqe(t,e){const{popup:n,popupElement:r}=t;if(Id(n))return n.open(e);r&&wp(r)&&r.open(e)}function lqe(t,e){Id(t)&&t.close(),e&&wp(e)&&(e.visible=!1)}async function aR(t,e,n){if(Id(t)){const r=await t.viewModel.handleViewClick(n);return void(r?.promises?.length?t.open(r):t.visible&&t.close())}if(e&&wp(e)){const r=await e.handleViewClick(n);r?.promises?.length?e.open(r):e.visible&&(e.visible=!1)}}const e1e=ye("mac")?"Meta":"Control",cqe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),uqe=t=>cqe.has(t);let hqe=class{constructor(e,n=[]){this.eventType=e,this.keyModifiers=n}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const n=e.modifiers;for(const r of this.keyModifiers)if(!n.has(r))return!1;return!0}},Zs=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const n=this._incoming[e];for(const r of n)this._incomingEventMatches.push(r.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager||(e.setEventCallback(n=>this._handleEvent(n)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,n,r){let i;typeof n=="function"?(r=n,i=[]):i=n||[];const s=typeof e=="string"?new hqe(e,i):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=u=>{const h=this._incoming[u.match.eventType];if(h){const f=h.indexOf(u);h.splice(f,1),o(),this._manager&&this._manager.updateDependencies()}},l=new dqe(s,r,{onPause:a,onRemove:a,onResume:u=>{const h=this._incoming[u.match.eventType];h&&!h.includes(u)&&(h.push(u),o(),this._manager&&this._manager.updateDependencies())}});let c=this._incoming[s.eventType];return c||(c=[],this._incoming[s.eventType]=c),c.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const n=new fqe(e,{onEmit:(r,i,s,o)=>{this._manager?.emit(r.eventType,i,s,o)},onRemove:r=>{delete this._outgoing[r.eventType],this._manager?.updateDependencies()}});return this._outgoing[e]=n,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),n}startCapturingPointer(e){this._manager?.setPointerCapture(e,!0)}stopCapturingPointer(e){this._manager?.setPointerCapture(e,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(e){const n=this._incoming[e.type];if(n){for(const r of n)if(r.match.matches(e)&&(r.callback?.(e),e.shouldStopPropagation()))break}}},dqe=class{constructor(e,n,r){this.match=e,this._callback=n,this._handler=r}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},fqe=class{constructor(e,n){this.eventType=e,this._removed=!1,this._handler=n}emit(e,n,r){this._removed||this._handler.onEmit(this,e,n,r)}remove(){this._removed=!0,this._handler.onRemove(this)}},pqe=class extends Zs{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this._id=null,this.registerIncoming("pointer-move",n=>this._update(n.data))}_update(e){const n=e.native.pointerType==="touch"?"touch":"mouse",{x:r,y:i,native:{pointerId:s}}=e;n===this._value&&this._x===r&&this._y===i&&this._id===s||(this._value=n,this._x=r,this._y=i,this._id=s,this._onChange(s,n,r,i))}},mqe=class{constructor(e,n){this._observable=new bI,this._value=e,this._equalityFunction=n}get value(){return nn(this._observable),this._value}set value(e){this._equalityFunction(e,this._value)||(this._value=e,this._observable.notify())}mutate(e){e(this._value),this._observable.notify()}};function j2(t,e=ffe){return new mqe(t,e)}let gqe=class extends Zs{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=j2(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},yqe=class{constructor(e,n){this._owner=n,this._properties={},this._afterDispatchHandle=null;for(const r in e){const i=e[r],s=new hpe(i,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=O$e(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const n=this._properties[e];for(const r of n.acquired)vee(r)||n.pool.release(r);n.pool.destroy(),n.pool=null,n.acquired=null}this._properties=null,this._owner=null}get(e){const n=this._owner._get(e),r=this._properties[e];let i=r.pool.acquire();for(r.acquired.push(i);i===n;)i=r.pool.acquire(),r.acquired.push(i);return bpe(),i}_release(){for(const e in this._properties){const n=this._properties[e];let r=0;for(const i of n.acquired)vee(i)?n.acquired[r++]=i:n.pool.release(i);n.acquired.length=r}}},vqe=class{constructor(){this.id=0,this.type="mouse",this.location=Hs()}},Bu=class extends Kt{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=e1e,this._propertiesPool=new yqe({latestPointerInfo:()=>new vqe},this),this._latestPointerInfo=void 0,this._paused=!1,this._testTimestamp=void 0}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const n of e)this.uninstallHandlers(n);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get latestPointerInfo(){return this._latestPointerInfo}get updating(){return this.hasPendingInputs||this._paused}installHandlers(e,n,r=ap.INTERNAL){if(this._nameToGroup[e]||n.length===0)return;const i={name:e,handlers:n.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=i;for(let s=i.handlers.length-1;s>=0;s--){const o=i.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,c,u,h)=>{this._emitInputEvent(o.priorityIndex+1,a,l,c,h,u)},setPointerCapture:(a,l)=>{this._setPointerCapture(i,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const n=this._nameToGroup[e];n?(n.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback?.()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):kt.getLogger(this).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}isModifierKeyDown(e){return this._activeKeyModifiers.has(e)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,n=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const i=this._handlers[r];i.priorityIndex=r,this._handlersPriority.push(i)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const i=this._handlersPriority[r];i.priorityIndex=r;let s=i.handler.hasSideEffects;if(!s){for(const o of i.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of i.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)uqe(a)||n.add(a)}i.active=s}this._sourceEvents=e,this._keyModifiers=n,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,n,r,i){const s=this._latestPointerInfo;if(s==null||s.id!==e||s.type!==n||s.location.x!==r||s.location.y!==i){const o=this._propertiesPool.get("latestPointerInfo");o.id=e,o.type=n,o.location.x=r,o.location.y=i,this._latestPointerInfo=o}}_onEventReceived(e,n){if(e==="pointer-capture-lost"){const s=n;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,n);const r=this._testTimestamp??n.native?.timestamp,i=n.native?.cancelable;this._emitInputEventFromSource(e,n,r,i)}_updateKeyModifiers(e,n){if(!n)return;let r=!1;const i=()=>{r||(this._activeKeyModifiers=new Set(this._activeKeyModifiers),r=!0)},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(i(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(i(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=n.key;this._keyModifiers.has(a)&&s(a,e==="key-down")}const o=n.native;s("Alt",!!o?.altKey),s("Control",!!o?.ctrlKey),s("Ctrl",!!o?.ctrlKey),s("Shift",!!o?.shiftKey),s("Meta",!!o?.metaKey),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new pqe((e,n,r,i)=>this._setLatestPointer(e,n,r,i)),this._multiTouchHandler=new gqe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],ap.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,ap.INTERNAL)}_setPointerCapture(e,n,r,i){const s=e.name+"-"+n.priorityIndex,o=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,o),i?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,n,r,i){this._emitInputEvent(0,e,n,r,i)}_emitInputEvent(e,n,r,i,s,o){const a=i??this._currentPropagation?.timestamp??performance.now(),l=s??!1,c={event:new _qe(n,r,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(c):this._doNewPropagation(c)}_doNewPropagation(e){this._currentPropagation={events:new nA,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){this._paused=!1;const e=this._currentPropagation;if(e){for(;e.events.length>0;){const{event:n,priorityIndex:r}=e.events.pop(),i=n.data?.eventId;if(!(i!=null&&this._stoppedPropagationEventIds.has(i)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!n.shouldStopPropagation()&&e.currentHandler.eventCallback?.(n),n.shouldStopPropagation()){i!=null&&this._stoppedPropagationEventIds.add(i);break}if(n.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:n,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const n=new nA;n.push(e);const r=this._currentPropagation;if(r){for(;r.events.length;)n.push(r.events.pop());r.events=n,r.currentHandler=null,this._paused=!0}}_compareHandlerPriority(e,n){if(e.handler.hasSideEffects!==n.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==n.groupPriority)return e.groupPriority>n.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const i of n.handler.incomingEventMatches){if(r.eventType!==i.eventType)continue;const s=r.keyModifiers.filter(o=>i.keyModifiers.includes(o));if(s.length===r.keyModifiers.length!=(s.length===i.keyModifiers.length))return r.keyModifiers.length>i.keyModifiers.length?-1:1}return e.priorityIndex>n.priorityIndex?-1:1}_sortHandlersPriority(e){const n=[];for(const r of e){let i=0;for(;i<n.length&&this._compareHandlerPriority(r,n[i])>=0;)i++;n.splice(i,0,r)}return n}get test(){}};x([E({readOnly:!0})],Bu.prototype,"hasPendingInputs",null),x([E({constructOnly:!0})],Bu.prototype,"eventSource",void 0),x([E({constructOnly:!0})],Bu.prototype,"recognizers",void 0),x([E()],Bu.prototype,"multiTouchActive",null),x([E()],Bu.prototype,"_latestPointerInfo",void 0),x([E()],Bu.prototype,"latestPointerInfo",null),x([E()],Bu.prototype,"_paused",void 0),x([E({readOnly:!0})],Bu.prototype,"updating",null),Bu=x([ue("esri.views.input.InputManager")],Bu);let _qe=class{constructor(e,n,r,i,s){this.type=e,this.data=n,this.timestamp=r,this.modifiers=i,this.cancelable=s,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return!!(1&this._propagationState)}defer(e){this._propagationState|=2;const n=(r,i)=>{this._propagationState&=-3;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),i)throw r;return r};return(typeof e=="function"?e():e).then(r=>n(r,!1),r=>n(r,!0))}shouldPausePropagation(e){return!!(2&this._propagationState)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};const ap={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3},xqe=t=>{const e=t;let n=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([fn(()=>[this.ui,this.popup,this.popupElement],([r,i,s],o)=>{const[a,l,c]=o??[];sqe(this,[r,i,s],[a,l,c])},ra),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&oqe(this,r)},ap.WIDGET)]),aW(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>_e(()=>import("./Popup-rUAANVEg.js").then(r=>r.P),__vite__mapDeps([228,229,18,230,231,232,233,204,200,177,164,201,31,202,203,142,87,205,122,163,206,82,130,234,55,235,236,131,132,24,25,198,199,135,83,78,127,76,77,52,53,54,237,112,110,111,26,64,67,113,238,239,240,241,242,20,29,243,244,245,246,27,247,248,249,250,251,252,154,253,254,255,256,257,28,30,258,259,260,261,262,33,263,264,197,265,266,32,267,268,269,270,271,272,273,274,275,276,42,277,134,278,279,280,281])))}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(Id(this.popup))return this.popup.open(r);if(this.popupElement&&wp(this.popupElement))this.popupElement.open(r).catch(()=>{});else try{if(await this.setupPopup(),!this.popup)return void kt.getLogger(this).error(new Xe("view:null-popup","Popup is null and can't be opened"));aqe(this,r)}catch{}}closePopup(){this._popupSetupTask?.abort(),lqe(this.popup,this.popupElement)}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!Id(this.popup))return this._popupSetupTask=VO(async r=>{if(!this.popupEnabled||!wp(this.popupElement))if(this.dependencies.popup&&typeof this.dependencies.popup=="function")await this.dependencies.popup(),mi(r),customElements.get("arcgis-popup")||kt.getLogger(this).error(new Xe("view:undefined-popup-element","`arcgis-popup` custom element is undefined and can't be opened")),this.popupElement=document.createElement("arcgis-popup");else{const{default:i}=await _e(()=>import("./Popup-rUAANVEg.js").then(o=>o.P),__vite__mapDeps([228,229,18,230,231,232,233,204,200,177,164,201,31,202,203,142,87,205,122,163,206,82,130,234,55,235,236,131,132,24,25,198,199,135,83,78,127,76,77,52,53,54,237,112,110,111,26,64,67,113,238,239,240,241,242,20,29,243,244,245,246,27,247,248,249,250,251,252,154,253,254,255,256,257,28,30,258,259,260,261,262,33,263,264,197,265,266,32,267,268,269,270,271,272,273,274,275,276,42,277,134,278,279,280,281]));if(mi(r),!this.popup||Id(this.popup))return;const s=this.popup;if("open"in s||"close"in s){const{open:o,close:a,...l}=s;this.popup=new i({...l})}else this.popup=new i(s)}}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},s){const o=[],a=[];let l=!1;const c=lje(s,ye("popup-view-fetch-timeout")??bqe),u=g=>{const y=new wqe(g);return a.push(y),o.push(y.promise),y},h=g=>{const y=a.at(-1);return y&&y.layerView===g&&!l?y:u(g)};for(const g of i)"graphic"in g?(h(g.layerView).graphics.push(g.graphic),l=!1):(o.push(g.layerView.fetchPopupFeaturesAtLocation(g.mapPoint,c)),l=!0);a.forEach(g=>g.resolve(c));const f=aje(o).then(g=>g.filter(y=>!!y).flat());return{pendingFeatures:o,allGraphicsPromise:f,location:r}}async _getPopupHits(r,i){const{hits:s,location:o}=await this.popupHitTest(r);mi(i);const a=[];for(const l of s)if("graphic"in l){if(this._isValidPopupGraphic(l.graphic,i)){const c=this._isValidPopupGraphicsLayerView(l.layerView)?l.layerView:void 0;a.push({graphic:l.graphic,layerView:c})}}else this._isValidPopupLocationLayerView(l.layerView)&&a.push({mapPoint:l.mapPoint,layerView:l.layerView});return{hits:a,location:o}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return x([E()],n.prototype,"popup",void 0),x([E()],n.prototype,"popupElement",void 0),x([E()],n.prototype,"popupEnabled",void 0),n=x([ue("esri.views.PopupView")],n),n};let wqe=class{constructor(e){this.layerView=e,this._resolver=xc(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){const{layerView:n,graphics:r,_resolver:i}=this;if(!n)return i.resolve(r),i.promise;let s;return n.fetchPopupFeaturesFromGraphics(r,e).catch(o=>(s=o,null)).then(o=>{o?i.resolve(o):i.reject(s)}),i.promise}};const bqe=5e3;var bS;const yN=Ll()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),t1e=yN.jsonValues.slice();K8(t1e,"orthometric");const IT=Ll()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let ll=bS=class extends qt{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,n){return yN.write(t,e,n)}readHeightModel(t,e,n){return yN.read(t)||(n?.messages&&n.messages.push(Eqe(t,{context:n})),null)}readHeightUnit(t,e,n){return IT.read(t)||(n?.messages&&n.messages.push(Pne(t,{context:n})),null)}readHeightUnitService(t,e,n){return BB(t)||IT.read(t)||(n?.messages&&n.messages.push(Pne(t,{context:n})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new bS({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const n=cme(e);return new bS({heightModel:t.heightModel,heightUnit:n??void 0,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new bS;return e.read(t,{origin:"web-scene"}),e}};function Pne(t,e){return new jd("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function Eqe(t,e){return new jd("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}x([E({type:yN.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:t1e,default:"ellipsoidal",write:{isRequired:!0}}}}})],ll.prototype,"heightModel",void 0),x([er("web-scene","heightModel")],ll.prototype,"writeHeightModel",null),x([cr(["web-scene","service"],"heightModel")],ll.prototype,"readHeightModel",null),x([E({type:IT.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:IT.jsonValues,write:{writer:IT.write,isRequired:!0}}}}})],ll.prototype,"heightUnit",void 0),x([cr("web-scene","heightUnit")],ll.prototype,"readHeightUnit",null),x([cr("service","heightUnit")],ll.prototype,"readHeightUnitService",null),x([E({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],ll.prototype,"vertCRS",void 0),x([cr("service","vertCRS",["vertCRS","ellipsoid","geoid"])],ll.prototype,"readVertCRS",null),ll=bS=x([ue("esri.geometry.HeightModelInfo")],ll);let o$;async function Sqe(){return o$==null&&(o$=_e(()=>import("./WhereClauseCache-Cp_Y2cGq.js"),__vite__mapDeps([74,24,25,75,76,77,78])).then(t=>new t.WhereClauseCache(500,500))),o$}async function Tqe(t,e){const n=await Sqe(),r=n.get(t,e);if(r==null)throw n.getError(t,e);return r}function $Mt(t,e){return t||=null,e||=null,t==="1=1"?e??t:e==="1=1"?t??e:t&&e?`(${t}) AND (${e})`:t??e}function FMt(t,e){return t||=null,e||=null,t==="1=1"||e==="1=1"||t===e?t==="1=1"?t:e:t&&e?`(${t}) OR (${e})`:t??e}function VMt(t,e){return e.length===0?null:`${t} IN (${kqe(e)})`}function kqe(t){return t.map(e=>typeof e=="string"?Aqe(e):e).join(",")}function Aqe(t){return`'${t.replaceAll("'","''")}'`}function zMt(t){return typeof t=="number"}function GMt(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function UMt(t){return typeof t=="boolean"}function OI(t){return typeof t=="string"||t instanceof String}function Iqe(t){return t==null||OI(t)}function BMt(t){return Array.isArray(t)}function WMt(t){return t?.declaredClass==="esri.Graphic"}function HMt(t){return t instanceof Date}const Pqe="HH:mm",Cqe="HH:mm:ss",Rqe="HH:mm:ss.SSS",Mqe=[Rqe,Cqe,Pqe,"TT"],Nqe="yyyy-MM-dd";function Cne(t){if(!t||!OI(t))return null;const e=dn.fromFormat(t,Nqe);return e.isValid?e:null}function Rne(t){return t&&OI(t)?sje(Mqe,e=>{const n=dn.fromFormat(t,e);return n.isValid?n:null})??null:null}function Mne(t){if(!t||!OI(t))return null;const e=dn.fromISO(t);return e.isValid?e:null}const n1e=new Set(["integer","small-integer","long","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"]);function Oqe(t){return t!=null&&n1e.has(t.type)}function r1e(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function i1e(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function s1e(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}const Lqe=new Set(["single","double","esriFieldTypeSingle","esriFieldTypeDouble"]);AB(n1e,Lqe);function qMt(t,e){const n=t?.domain;if(!n||n.type!=="range")return;const r="range"in n?n.range[0]:n.minValue,i="range"in n?n.range[1]:n.maxValue,s=Oqe(t);return r1e(t)||s1e(t)||i1e(t)?{...Dqe(t,i,r),isInteger:s}:{min:r!=null&&typeof r=="number"?r:null,max:i!=null&&typeof i=="number"?i:null,rawMin:r,rawMax:i,isInteger:s}}function Dqe(t,e,n){return r1e(t)?{min:Cne(n)?.toMillis(),max:Cne(e)?.toMillis(),rawMin:n,rawMax:e}:s1e(t)?{min:Rne(n)?.toMillis(),max:Rne(e)?.toMillis(),rawMin:n,rawMax:e}:i1e(t)?{min:Mne(n)?.toMillis(),max:Mne(e)?.toMillis(),rawMin:n,rawMax:e}:{max:null,min:null}}function jqe(t){if(!t)return;const e=t.match($qe);return e?.groups?e.groups.doubleQuoted??e.groups.singleQuoted??e.groups.dotNotation:void 0}const $qe=/^(\$feature\[(?:"(?<doubleQuoted>[^"]+)"|'(?<singleQuoted>[^']+)')\]|\$feature\.(?<dotNotation>[a-z_][a-z0-9_]*))$/i;function KMt(t){return t.match(Fqe)?.[1]?.replaceAll("\\'","'")??null}const Fqe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;let a$;function Vqe(){return a$||(a$=(async()=>{const[t,e,n]=await Promise.all([_e(()=>import("./arcadeUtils-Cc4Fj6o6.js"),__vite__mapDeps([282,283,284,77,285,76,78,286,239,84,287,66,64,26,67,83,288,289,75,134,290,240,241,291])),_e(()=>import("./batchExec-BDKZedoD.js"),__vite__mapDeps([292,146])),_e(()=>import("./aiServices-rPVhFEqd.js").then(r=>r.a),__vite__mapDeps([288,78,285,76,77,286,239,84,289,284]))]);return{arcade:t.arcade,arcadeUtils:t,batchExec:e,aiServices:n,Dictionary:t.Dictionary,Feature:t.arcadeFeature,Voxel:t.Voxel,Pixel:t.Pixel}})()),a$}const zqe=/^([0-9_])/,Gqe=/[^a-z0-9_\u0080-\uffff]+/gi;function YMt(t){return t==null?null:t.trim().replaceAll(Gqe,"_").replace(zqe,"F$1")||null}const Uqe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Bqe=["field","normalizationField"];function XMt(t,e){if(t!=null&&e!=null){for(const n of Array.isArray(t)?t:[t])if(Nne(Uqe,n,e),"visualVariables"in n&&n.visualVariables)for(const r of n.visualVariables)Nne(Bqe,r,e)}}function Nne(t,e,n){if(t)for(const r of t){const i=PO(r,e),s=i&&typeof i!="function"&&n.get(i);s&&lb(r,s.name,e)}}function ZMt(t,e){if(t!=null&&e?.fields?.length)if("startField"in t){const n=e.get(t.startField),r=e.get(t.endField);t.startField=n?.name??null,t.endField=r?.name??null}else{const n=e.get(t.startTimeField),r=e.get(t.endTimeField);t.startTimeField=n?.name??null,t.endTimeField=r?.name??null}}const l$=new Set;function LW(t,e){return t&&e?(l$.clear(),iA(l$,t,e),Array.from(l$).sort()):[]}function iA(t,e,n){if(n)if(e?.fields?.length)if(n.includes("*"))for(const{name:r}of e.fields)t.add(r);else for(const r of n)sA(t,e,r);else{if(n.includes("*"))return t.clear(),void t.add("*");for(const r of n)r!=null&&t.add(r)}}function sA(t,e,n){if(typeof n=="string")if(e){const r=e.get(n);r&&t.add(r.name)}else t.add(n)}function JMt(t,e){return e==null||t==null?[]:e.includes("*")?(t.fields??[]).map(n=>n.name):e}function QMt(t,e,n=1){if(!e||!t)return[];if(e.includes("*"))return["*"];const r=LW(t,e);return r.length/t.fields.length>=n?["*"]:r}async function J1(t,e,n,r){if(!r)return;const i=jqe(r);if(i)sA(t,e,i);else{const{arcadeUtils:s}=await Vqe(),o=s.extractFieldNames(r,n?.partitions??e?.fields?.map(a=>a.name));for(const a of o)sA(t,n?.index??e,a)}}async function DW(t,e,n){if(n&&n!=="1=1"){const r=await Tqe(n,e);if(!r.isStandardized)throw new Xe("fieldUtils:collectFilterFields","Where clause is not standardized",{where:n});iA(t,e,r.fieldNames)}}function e3t({displayField:t,fields:e}){return t||(e?.length?Wqe(e):null)}function Wqe(t){return c$(t,"name-or-title")||c$(t,"unique-identifier")||c$(t,"type-or-category")||Hqe(t)}function Hqe(t){for(const e of t){if(!e?.name)continue;const n=e.name.toLowerCase();if(n.includes("name")||n.includes("title"))return e.name}return null}function c$(t,e){for(const n of t)if(n?.valueType&&n.valueType===e)return n.name;return null}async function t3t(t,e){if(!e)return;const n=e.elevationInfo?.featureExpressionInfo;return n?n.collectRequiredFields(t,e.fieldsIndex):void 0}function qqe(t,e,n){n.onStatisticExpression?J1(t,e,null,n.onStatisticExpression.expression):t.add(n.onStatisticField)}async function n3t(t,e,n){if(!e||!n||!("fields"in n))return;const r=[],i=n.popupTemplate;r.push(o1e(t,e,i)),n.fields&&r.push(...n.fields.map(async s=>qqe(t,e.fieldsIndex,s))),await Promise.all(r)}async function r3t(t,e){const{fieldsIndex:n,trackInfo:r}=e;if(!e||!r||!n)return;const i=[r.latestObservations.renderer?.collectRequiredFields(t,n),r.previousObservations.renderer?.collectRequiredFields(t,n),r.trackLines.renderer?.collectRequiredFields(t,n)];r.popupTemplate&&i.push(o1e(t,e,r.popupTemplate));for(const s of[r.latestObservations.labelingInfo,r.previousObservations.labelingInfo,r.trackLines.labelingInfo])if(s)for(const o of s)i.push(c1e(t,n,o));await Promise.all(i)}async function o1e(t,e,n){const r=[];n?.expressionInfos&&r.push(...n.expressionInfos.map(s=>J1(t,e.fieldsIndex,null,s.expression)));const i=n?.content;if(Array.isArray(i))for(const s of i)s.type==="expression"&&s.expressionInfo&&r.push(J1(t,e.fieldsIndex,null,s.expressionInfo.expression));await Promise.all(r)}async function i3t(t,e,n){e&&(e.timeInfo&&n?.timeExtent&&iA(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&iA(t,e.fieldsIndex,[e.floorInfo.floorField]),n?.where!=null&&await DW(t,e.fieldsIndex,n.where))}async function s3t(t,e,n){e&&n&&await Promise.all(n.map(r=>Kqe(t,e,r)))}async function Kqe(t,e,n){e&&n&&(n.valueExpression?await J1(t,e.fieldsIndex,null,n.valueExpression):n.field&&sA(t,e.fieldsIndex,n.field))}function o3t(t){return t?LW(t.fieldsIndex,a1e(t)):[]}function Yqe(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?LW(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function a3t(t,e,n){if(!e||!n)return;const r=e.fieldsIndex;await Promise.all(n.filters.map(i=>DW(t,r,i.where)))}const Xqe=new Set(["oid","global-id","guid"]),Zqe=new Set(["oid","global-id"]),Jqe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/objectid/i,/^perimeter_/i,/_perimeter$/i,/_i$/i];function Qqe(t){const e=new Set;l1e(t).forEach(r=>e.add(r)),Yqe(t).forEach(r=>e.add(r.toLowerCase()));const n=t&&"infoFor3D"in t?t.infoFor3D:void 0;return n&&(Object.values(n.assetMapFieldRoles).forEach(r=>e.add(r.toLowerCase())),Object.values(n.transformFieldRoles).forEach(r=>e.add(r.toLowerCase()))),Array.from(e)}function a1e(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;if(!e)return[];const{creationDateField:n,creatorField:r,editDateField:i,editorField:s}=e;return[n,r,i,s].filter(Boolean)}function l1e(t){return a1e(t).map(e=>e.toLowerCase())}function l3t(t,e){return t.editable&&!Xqe.has(t.type)&&!l1e(e).includes(t.name?.toLowerCase()??"")}function c3t(t,e){const n=t.name?.toLowerCase()??"";return!(e?.objectIdField!=null&&n===e.objectIdField.toLowerCase()||e?.globalIdField!=null&&n===e.globalIdField.toLowerCase()||Qqe(e).includes(n)||Zqe.has(t.type)||Jqe.some(r=>r.test(n)))}async function u3t(t,e){const{labelingInfo:n,fieldsIndex:r}=e;n?.length&&await Promise.all(n.map(i=>c1e(t,r,i)))}async function c1e(t,e,n){if(!n)return;const r=n.getLabelExpression(),i=n.where;if(r.type==="arcade")await J1(t,e,null,r.expression);else{const s=r.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{sA(t,e,o.slice(1,-1))})}await DW(t,e,i)}function h3t(t){const e=t.defaultValue;return e!==void 0&&h1e(t,e)?e:t.nullable?null:void 0}function d3t(t){const e=typeof t=="string"?{type:t}:t;return cKe(e)?255:e.type==="esriFieldTypeDate"||e.type==="date"?8:void 0}function u1e(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function eKe(t){return t===null||u1e(t)}function tKe(t){return t===null||Number.isInteger(t)}function nKe(){return!0}function h1e(t,e){let n;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":n=t.nullable?tKe:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":n=t.nullable?eKe:u1e;break;case"string":case"esriFieldTypeString":n=t.nullable?Iqe:OI;break;default:n=nKe}return arguments.length===1?n:n(e)}const rKe=["integer","small-integer","big-integer","long"],iKe=["single","double"],sKe=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeLong","esriFieldTypeBigInteger"],oKe=["esriFieldTypeSingle","esriFieldTypeDouble"],d1e=new Set([...rKe,...sKe]),aKe=new Set([...iKe,...oKe]),lKe=AB(d1e,aKe);function f3t(t){return t!=null&&d1e.has(t.type)}function f1e(t){return t!=null&&lKe.has(t.type)}function cKe(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function uKe(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}function hKe(t){return t!=null&&(t.type==="date-only"||t.type==="esriFieldTypeDateOnly")}function dKe(t){return t!=null&&(t.type==="timestamp-offset"||t.type==="esriFieldTypeTimestampOffset")}function fKe(t){return t!=null&&(t.type==="time-only"||t.type==="esriFieldTypeTimeOnly")}function p3t(t){return t!=null&&(t.type==="oid"||t.type==="esriFieldTypeOID")}function m3t(t){return t!=null&&(t.type==="global-id"||t.type==="esriFieldTypeGlobalID")}function g3t(t,e){return pKe(t,e)===null}function y3t(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function pKe(t,e){return t==null||t.nullable&&e===null?null:h1e(t,e)?f1e(t)&&!mKe(t.type,Number(e))?"numeric-range-validation-error::out-of-range":null:"type-validation-error::invalid-type"}function mKe(t,e){const n=typeof t=="string"?p1e(t):t;if(!n)return!1;const r=n.min,i=n.max;return n.isInteger?Number.isInteger(e)&&e>=r&&e<=i:e>=r&&e<=i}function p1e(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return gKe;case"esriFieldTypeInteger":case"esriFieldTypeLong":case"integer":case"long":return yKe;case"esriFieldTypeBigInteger":case"big-integer":return vKe;case"esriFieldTypeSingle":case"single":return _Ke;case"esriFieldTypeDouble":case"double":return xKe}}const gKe={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},yKe={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},vKe={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},lR=(2-2**-23)*2**127,_Ke={min:-lR,max:lR,isInteger:!1,rawMin:-lR,rawMax:lR},xKe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function v3t(t,e,n){switch(t){case"domain-validation-error::invalid-coded-value":return`Value ${n} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"domain-validation-error::value-out-of-range":return`Value ${n} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case"type-validation-error::invalid-type":return`Value ${n} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case"numeric-range-validation-error::out-of-range":{const{min:r,max:i}=p1e(e.type);return`Value ${n} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${r} to ${i}`}}}function _3t(t,e){return!wKe(t,e,null)}function wKe(t,e,n){if(!t?.attributes||!e)return!0;const r=new Set(Object.keys(t.attributes));let i=!1;for(const s of e)if(!r.has(s)&&(i=!0,n==null))break;return i}function x3t(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}function bKe(t){const e=t?.match(/{[^}]+}/g);return e?e.map(n=>n.slice(1,-1).split(":")[0].trim()):[]}let qM=class extends qt{constructor(e){super(e),this.type=null}};x([E({type:["attachments","custom","fields","media","text","expression","relationship","utility-network-associations"],readOnly:!0,json:{read:!1,write:!0}})],qM.prototype,"type",void 0),qM=x([ue("esri.popup.content.Content")],qM);const Rp=qM,cR=new Ys({asc:"ascending",desc:"descending"});let ES=class extends vo(qt){constructor(e){super(e),this.field=null,this.order="ascending"}};x([E({type:String,json:{write:!0}})],ES.prototype,"field",void 0),x([E({type:cR.apiValues,json:{type:cR.jsonValues,read:cR.read,write:cR.write}})],ES.prototype,"order",void 0),ES=x([ue("esri.popup.support.AttachmentsOrderByInfo")],ES);const EKe=ES;let Zh=class extends vo(Rp){constructor(e){super(e),this.attachmentKeywords=null,this.attachmentTypes=null,this.description=null,this.displayType="auto",this.orderByFields=null,this.title=null,this.type="attachments"}};x([E({type:[String],json:{write:!0}})],Zh.prototype,"attachmentKeywords",void 0),x([E({type:[["application","audio","image","model","text","video"]],json:{write:!0}})],Zh.prototype,"attachmentTypes",void 0),x([E({type:String,json:{write:!0}})],Zh.prototype,"description",void 0),x([E({type:["auto","preview","list"],json:{write:!0}})],Zh.prototype,"displayType",void 0),x([E({type:[EKe],json:{write:!0}})],Zh.prototype,"orderByFields",void 0),x([E({type:String,json:{write:!0}})],Zh.prototype,"title",void 0),x([E({type:["attachments"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Zh.prototype,"type",void 0),Zh=x([ue("esri.popup.content.AttachmentsContent")],Zh);const oA=Zh;var _7;let oy=_7=class extends Rp{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new _7({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?Ze(this.outFields):null})}};x([E()],oy.prototype,"creator",void 0),x([E()],oy.prototype,"destroyer",void 0),x([E()],oy.prototype,"outFields",void 0),x([E({type:["custom"],readOnly:!0})],oy.prototype,"type",void 0),oy=_7=x([ue("esri.popup.content.CustomContent")],oy);const SKe=oy;var x7;let rx=x7=class extends qt{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new x7({title:this.title,expression:this.expression})}};x([E({type:String,json:{write:!0}})],rx.prototype,"title",void 0),x([E({type:String,json:{write:!0}})],rx.prototype,"expression",void 0),x([E({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],rx.prototype,"returnType",void 0),rx=x7=x([ue("esri.popup.ElementExpressionInfo")],rx);const TKe=rx;var w7;let SS=w7=class extends Rp{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){return new w7({expressionInfo:this.expressionInfo?.clone()})}};x([E({type:TKe,json:{write:!0}})],SS.prototype,"expressionInfo",void 0),x([E({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],SS.prototype,"type",void 0),SS=w7=x([ue("esri.popup.content.ExpressionContent")],SS);const lL=SS;let KM=class extends vo(qt){constructor(e){super(e),this.type=null}};x([E({type:["date-time","number"],nonNullable:!0,readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],KM.prototype,"type",void 0),KM=x([ue("esri.layers.support.FieldFormat")],KM);const jW=KM,m1e="auto";let Tf=class extends jW{constructor(e){super(e),this.dateStyle=null,this.hour12=m1e,this.month=null,this.timeStyle=null,this.type="date-time",this.year=null}};x([E({type:["full","long","medium","short"],json:{write:!0}})],Tf.prototype,"dateStyle",void 0),x([E({type:["always","auto","never"],nonNullable:!0,json:{default:m1e,write:!0}})],Tf.prototype,"hour12",void 0),x([E({type:["long","short"],json:{write:!0}})],Tf.prototype,"month",void 0),x([E({type:["full","long","medium","short"],json:{write:!0}})],Tf.prototype,"timeStyle",void 0),x([E({type:["date-time"]})],Tf.prototype,"type",void 0),x([E({type:["numeric"],json:{write:!0}})],Tf.prototype,"year",void 0),Tf=x([ue("esri.layers.support.DateTimeFieldFormat")],Tf);const d1=Tf,One={min:0,max:20},g1e=2,y1e=0,v1e="decimal",_1e="auto";let Im=class extends jW{constructor(e){super(e),this.maximumFractionDigits=g1e,this.minimumFractionDigits=y1e,this.style=v1e,this.type="number",this.useGrouping=_1e}};x([E({type:jr,nonNullable:!0,range:One,json:{default:g1e,write:!0}})],Im.prototype,"maximumFractionDigits",void 0),x([E({type:jr,nonNullable:!0,range:One,json:{default:y1e,write:!0}})],Im.prototype,"minimumFractionDigits",void 0),x([E({type:["decimal"],nonNullable:!0,json:{default:v1e,write:!0}})],Im.prototype,"style",void 0),x([E({type:["number"]})],Im.prototype,"type",void 0),x([E({type:["always","auto","never"],nonNullable:!0,json:{default:_1e,write:!0}})],Im.prototype,"useGrouping",void 0),Im=x([ue("esri.layers.support.NumberFieldFormat")],Im);const vN=Im;let ix=class extends vo(qt){constructor(e){super(e),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};x([mn(AVe)],ix.prototype,"dateFormat",void 0),x([E({type:Boolean,json:{write:!0}})],ix.prototype,"digitSeparator",void 0),x([E({type:jr,json:{write:!0}})],ix.prototype,"places",void 0),ix=x([ue("esri.popup.support.FieldInfoFormat")],ix);const Eb=ix,kKe={base:jW,key:"type",errorContext:"field-configuration-field-format",typeMap:{"date-time":d1,number:vN}};function I3t(t,e){const{format:n}=t;return e&&cL(e)?n?x1e(n,e):YM(e,{hour12:"always",useGrouping:"always"}):null}function x1e(t,e){const{dateFormat:n}=t;if(!e)return n?Dne(t):Lne(t);if(!cL(e))return;const r={hour12:"always"};switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return w1e(t);case"single":case"double":return Lne(t);case"date":case"timestamp-offset":return n?Dne(t):YM(e,r);case"date-only":return n?AKe(t):YM(e);case"time-only":return n?IKe(t):YM(e,r)}}function cL(t){return f1e(t)||uKe(t)||hKe(t)||fKe(t)||dKe(t)}function w1e(t){return new vN({useGrouping:t.digitSeparator?"always":"never"})}function Lne(t){const e=w1e(t),{places:n}=t;return e.minimumFractionDigits=n??0,e.maximumFractionDigits=n??2,e}function Dne(t){return new d1({dateStyle:b1e(t),year:k1e(t),month:S1e(t),timeStyle:T1e(t),hour12:E1e(t)})}function AKe(t){return new d1({dateStyle:b1e(t),year:k1e(t),month:S1e(t)})}function IKe(t){return new d1({timeStyle:T1e(t),hour12:E1e(t)})}function b1e(t){const{dateFormat:e}=t;return e?e.startsWith("short-date")?"short":e.startsWith("day-short-month-year")?"medium":e.startsWith("long-month-day-year")?"long":e.startsWith("long-date")?"full":null:null}function E1e(t){return t.dateFormat?.endsWith("-24")?"never":"always"}function S1e(t){switch(t.dateFormat){case"short-month-year":return"short";case"long-month-year":return"long";default:return null}}function T1e(t){const{dateFormat:e}=t;return e?e.includes("short-time")?"short":e.includes("long-time")?"medium":null:null}function k1e(t){switch(t.dateFormat){case"short-month-year":case"long-month-year":case"year":return"numeric";default:return null}}function PKe(t,e){const n=t.type==="number",r=t.type==="date-time";if(!e)return n?jne(t):r?$ne(t):null;if(cL(e))switch(e.type){case"integer":case"small-integer":case"big-integer":case"long":return n?A1e(t):null;case"single":case"double":return n?jne(t):null;case"date":case"timestamp-offset":return r?$ne(t):null;case"date-only":return r?CKe(t):null;case"time-only":return r?RKe(t):null}}function A1e(t){return new Eb({digitSeparator:t.useGrouping!=="never"})}function jne(t){const e=A1e(t);return e.places=t.maximumFractionDigits,e}function $ne(t){let e;const n=I1e(t),r=P1e(t),i=t.hour12==="never"?"24":null,s=t.year==="numeric"?"year":null,o=C1e(t);return n&&r&&i?e=`${n}-${r}-${i}`:n&&r?e=`${n}-${r}`:n?e=n:s&&o?e=`${o}-${s}`:s&&(e=s),e?new Eb({dateFormat:e}):null}function CKe(t){let e;const n=I1e(t),r=t.year==="numeric"?"year":null,i=C1e(t);return n?e=n:r&&i?e=`${i}-${r}`:r&&(e=r),e?new Eb({dateFormat:e}):null}function RKe(t){let e;const n=P1e(t),r=t.hour12==="never"?"24":null;return n&&r?e=`short-date-${n}-${r}`:n&&(e=`short-date-${n}`),e?new Eb({dateFormat:e}):null}function I1e(t){switch(t.dateStyle){case"short":return"short-date";case"medium":return"day-short-month-year";case"long":return"long-month-day-year";case"full":return"long-date";default:return}}function P1e(t){return t.timeStyle&&(t.timeStyle==="short"?"short-time":"long-time")}function C1e(t){switch(t.month){case"short":return"short-month";case"long":return"long-month";default:return}}function YM(t,e){if(!cL(t))return;const n=e?.useGrouping??"auto",r=e?.hour12??"auto";switch(t.type){case"integer":case"small-integer":case"big-integer":case"long":return new vN({minimumFractionDigits:0,maximumFractionDigits:0,useGrouping:n});case"single":case"double":return new vN({minimumFractionDigits:0,maximumFractionDigits:2,useGrouping:n});case"date":case"timestamp-offset":return new d1({dateStyle:"short",timeStyle:"short",hour12:r});case"date-only":return new d1({dateStyle:"short"});case"time-only":return new d1({timeStyle:"short",hour12:r})}}let Kl=class extends vo(qt){constructor(e){super(e),this.fieldName=null,this.isEditable=!0,this.label=null,this.statisticType=null,this.stringFieldOption="text-box",this.tooltip=null,this.visible=!0}set fieldFormat(e){this._set("fieldFormat",e),this._set("format",e?PKe(e):null)}set format(e){this._set("format",e),this._set("fieldFormat",e?x1e(e):null)}readFormat(e,n){if(!n.fieldFormat)return e?Eb.fromJSON(e):null}clone(){const e=super.clone();return e._set("format",this.format?.clone()),e._set("fieldFormat",this.fieldFormat?.clone()),e}};x([E({value:null,clonable:!1,types:kKe,json:{write:{overridePolicy(t,e,n){const{fieldName:r}=this;return{enabled:!!r&&!r.startsWith("expression/")&&!r.startsWith("relationships/")&&!!n?.writeFieldFormat}}}}})],Kl.prototype,"fieldFormat",null),x([E({type:String,json:{write:!0}})],Kl.prototype,"fieldName",void 0),x([E({value:null,clonable:!1,type:Eb,json:{write:!0}})],Kl.prototype,"format",null),x([cr("format")],Kl.prototype,"readFormat",null),x([E({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],Kl.prototype,"isEditable",void 0),x([E({type:String,json:{write:!0}})],Kl.prototype,"label",void 0),x([E({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Kl.prototype,"statisticType",void 0),x([mn(new Ys({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Kl.prototype,"stringFieldOption",void 0),x([E({type:String,json:{write:!0}})],Kl.prototype,"tooltip",void 0),x([E({type:Boolean,json:{write:!0}})],Kl.prototype,"visible",void 0),Kl=x([ue("esri.popup.FieldInfo")],Kl);const R1e=Kl;var b7;let Pm=b7=class extends Rp{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}clone(){return new b7(Ze({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};x([E({type:Object,json:{write:!0}})],Pm.prototype,"attributes",void 0),x([E({type:String,json:{write:!0}})],Pm.prototype,"description",void 0),x([E({type:[R1e],json:{write:!0}})],Pm.prototype,"fieldInfos",void 0),x([E({type:String,json:{write:!0}})],Pm.prototype,"title",void 0),x([E({type:["fields"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Pm.prototype,"type",void 0),Pm=b7=x([ue("esri.popup.content.FieldsContent")],Pm);const aA=Pm;let ay=class extends qt{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};x([E({type:String,json:{write:!0}})],ay.prototype,"altText",void 0),x([E({type:String,json:{write:!0}})],ay.prototype,"caption",void 0),x([E({type:String,json:{write:!0}})],ay.prototype,"title",void 0),x([E({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],ay.prototype,"type",void 0),ay=x([ue("esri.popup.content.mixins.MediaInfo")],ay);const $W=ay;var E7;let ly=E7=class extends Kt{constructor(t){super(t),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new E7({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};x([E()],ly.prototype,"color",void 0),x([E()],ly.prototype,"fieldName",void 0),x([E()],ly.prototype,"tooltip",void 0),x([E()],ly.prototype,"value",void 0),ly=E7=x([ue("esri.popup.content.support.ChartMediaInfoValueSeries")],ly);const MKe=ly;var S7;let Cm=S7=class extends qt{constructor(t){super(t),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new S7({colors:Ze(this.colors),fields:Ze(this.fields),normalizeField:this.normalizeField,series:Ze(this.series),tooltipField:this.tooltipField})}};x([E({type:[Jn],json:{type:[[jr]],write:!0}})],Cm.prototype,"colors",void 0),x([E({type:[String],json:{write:{isRequired:!0}}})],Cm.prototype,"fields",void 0),x([E({type:String,json:{write:!0}})],Cm.prototype,"normalizeField",void 0),x([E({type:[MKe],json:{read:!1}})],Cm.prototype,"series",void 0),x([E({type:String,json:{write:!0}})],Cm.prototype,"tooltipField",void 0),Cm=S7=x([ue("esri.popup.content.support.ChartMediaInfoValue")],Cm);const NKe=Cm;let TS=class extends $W{constructor(e){super(e),this.type=null,this.value=void 0}};x([E({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],TS.prototype,"type",void 0),x([E({type:NKe,json:{write:{isRequired:!0}}})],TS.prototype,"value",void 0),TS=x([ue("esri.popup.content.mixins.ChartMediaInfo")],TS);const uL=TS,hL=Ll()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var T7;let XM=T7=class extends uL{constructor(t){super(t),this.type="bar-chart"}clone(){return new T7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};x([E({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:{writer:hL.write,isRequired:!0}}})],XM.prototype,"type",void 0),XM=T7=x([ue("esri.popup.content.BarChartMediaInfo")],XM);const M1e=XM;var k7;let ZM=k7=class extends uL{constructor(t){super(t),this.type="column-chart"}clone(){return new k7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};x([E({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:{writer:hL.write,isRequired:!0}}})],ZM.prototype,"type",void 0),ZM=k7=x([ue("esri.popup.content.ColumnChartMediaInfo")],ZM);const N1e=ZM;var A7;let kS=A7=class extends qt{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new A7({linkURL:this.linkURL,sourceURL:this.sourceURL})}};x([E({type:String,json:{write:!0}})],kS.prototype,"linkURL",void 0),x([E({type:String,json:{write:{isRequired:!0}}})],kS.prototype,"sourceURL",void 0),kS=A7=x([ue("esri.popup.content.support.ImageMediaInfoValue")],kS);const OKe=kS;var I7;let sx=I7=class extends $W{constructor(t){super(t),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new I7({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};x([E({type:Number,json:{write:!0}})],sx.prototype,"refreshInterval",void 0),x([E({type:["image"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],sx.prototype,"type",void 0),x([E({type:OKe,json:{write:{isRequired:!0}}})],sx.prototype,"value",void 0),sx=I7=x([ue("esri.popup.content.ImageMediaInfo")],sx);const O1e=sx;var P7;let JM=P7=class extends uL{constructor(t){super(t),this.type="line-chart"}clone(){return new P7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};x([E({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:{writer:hL.write,isRequired:!0}}})],JM.prototype,"type",void 0),JM=P7=x([ue("esri.popup.content.LineChartMediaInfo")],JM);const L1e=JM;var C7;let QM=C7=class extends uL{constructor(t){super(t),this.type="pie-chart"}clone(){return new C7({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};x([E({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:{writer:hL.write,isRequired:!0}}})],QM.prototype,"type",void 0),QM=C7=x([ue("esri.popup.content.PieChartMediaInfo")],QM);const D1e=QM,R7={base:$W,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":M1e,"column-chart":N1e,"line-chart":L1e,"pie-chart":D1e,image:O1e}};var M7;let Wu=M7=class extends Rp{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?O1e.fromJSON(e):e.type==="barchart"?M1e.fromJSON(e):e.type==="columnchart"?N1e.fromJSON(e):e.type==="linechart"?L1e.fromJSON(e):e.type==="piechart"?D1e.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(n=>n.toJSON())}clone(){return new M7(Ze({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};x([E()],Wu.prototype,"activeMediaInfoIndex",void 0),x([E({type:Object,json:{write:!0}})],Wu.prototype,"attributes",void 0),x([E({type:String,json:{write:!0}})],Wu.prototype,"description",void 0),x([E({types:[R7]})],Wu.prototype,"mediaInfos",void 0),x([cr("mediaInfos")],Wu.prototype,"readMediaInfos",null),x([er("mediaInfos")],Wu.prototype,"writeMediaInfos",null),x([E({type:String,json:{write:!0}})],Wu.prototype,"title",void 0),x([E({type:["media"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Wu.prototype,"type",void 0),Wu=M7=x([ue("esri.popup.content.MediaContent")],Wu);const lA=Wu;var N7;let AS=N7=class extends qt{constructor(t){super(t),this.field=null,this.order=null}clone(){return new N7({field:this.field,order:this.order})}};x([E({type:String,json:{write:!0}})],AS.prototype,"field",void 0),x([E({type:["asc","desc"],json:{write:!0}})],AS.prototype,"order",void 0),AS=N7=x([ue("esri.popup.support.RelatedRecordsInfoFieldOrder")],AS);const j1e=AS;let Jh=class extends vo(Rp){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};x([E({type:String,json:{write:!0}})],Jh.prototype,"description",void 0),x([E({type:Number,json:{type:jr,write:!0}})],Jh.prototype,"displayCount",void 0),x([E({type:["list"],json:{write:{isRequired:!0}}})],Jh.prototype,"displayType",void 0),x([E({type:[j1e],json:{write:!0}})],Jh.prototype,"orderByFields",void 0),x([E({type:Number,json:{type:jr,write:{isRequired:!0}}})],Jh.prototype,"relationshipId",void 0),x([E({type:String,json:{write:!0}})],Jh.prototype,"title",void 0),x([E({type:["relationship"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],Jh.prototype,"type",void 0),Jh=x([ue("esri.popup.content.RelationshipContent")],Jh);const cA=Jh;var O7;let IS=O7=class extends Rp{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new O7({text:this.text})}};x([E({type:String,json:{write:!0}})],IS.prototype,"text",void 0),x([E({type:["text"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],IS.prototype,"type",void 0),IS=O7=x([ue("esri.popup.content.TextContent")],IS);const uA=IS;let kf=class extends vo(qt){constructor(e){super(e),this.title=null,this.description=null,this.type=null,this.associatedNetworkSourceId=null,this.associatedAssetGroup=null,this.associatedAssetType=null}};x([E({type:String,json:{write:!0}})],kf.prototype,"title",void 0),x([E({type:String,json:{write:!0}})],kf.prototype,"description",void 0),x([E({type:["attachment","connectivity","container","content","structure"],json:{write:!0}})],kf.prototype,"type",void 0),x([E({type:Number,json:{type:jr,write:!0}})],kf.prototype,"associatedNetworkSourceId",void 0),x([E({type:Number,json:{type:jr,write:!0}})],kf.prototype,"associatedAssetGroup",void 0),x([E({type:Number,json:{type:jr,write:!0}})],kf.prototype,"associatedAssetType",void 0),kf=x([ue("esri.popup.support.UtilityNetworkAssociationType")],kf);const LKe=kf;let Rm=class extends vo(Rp){constructor(e){super(e),this.description=null,this.displayCount=null,this.title=null,this.associationTypes=[],this.type="utility-network-associations"}};x([E({type:String,json:{write:!0}})],Rm.prototype,"description",void 0),x([E({type:Number,json:{type:jr,write:!0}})],Rm.prototype,"displayCount",void 0),x([E({type:String,json:{write:!0}})],Rm.prototype,"title",void 0),x([E({type:[LKe],json:{write:!0}})],Rm.prototype,"associationTypes",void 0),x([mn({utilityNetworkAssociations:"utility-network-associations"})],Rm.prototype,"type",void 0),Rm=x([ue("esri.popup.content.UtilityNetworkAssociationsContent")],Rm);const FW=Rm,DKe={base:null,key:"type",typeMap:{attachment:oA,media:lA,text:uA,expression:lL,field:aA,relationship:cA,utilityNetworkAssociations:FW}},jKe={base:null,key:"type",typeMap:{attachment:oA,media:lA,text:uA,expression:lL,field:aA,relationship:cA}};var L7;let cy=L7=class extends qt{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new L7({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};x([E({type:String,json:{write:!0}})],cy.prototype,"name",void 0),x([E({type:String,json:{write:!0}})],cy.prototype,"title",void 0),x([E({type:String,json:{write:!0}})],cy.prototype,"expression",void 0),x([E({type:["string","number"],json:{write:!0}})],cy.prototype,"returnType",void 0),cy=L7=x([ue("esri.popup.ExpressionInfo")],cy);const $Ke=cy;var D7;let PS=D7=class extends qt{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new D7({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};x([E({type:Boolean,json:{write:!0}})],PS.prototype,"returnTopmostRaster",void 0),x([E({type:Boolean,json:{write:!0}})],PS.prototype,"showNoDataRecords",void 0),PS=D7=x([ue("esri.popup.LayerOptions")],PS);const FKe=PS;var j7;let CS=j7=class extends qt{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new j7({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?Ze(this.orderByFields):null})}};x([E({type:Boolean,json:{write:!0}})],CS.prototype,"showRelatedRecords",void 0),x([E({type:[j1e],json:{write:!0}})],CS.prototype,"orderByFields",void 0),CS=j7=x([ue("esri.popup.RelatedRecordsInfo")],CS);const Fne=CS;var $7;let Gc=$7=class extends lW(Kt){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new $7({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};x([E()],Gc.prototype,"active",void 0),x([E()],Gc.prototype,"className",void 0),x([E()],Gc.prototype,"disabled",void 0),x([E()],Gc.prototype,"icon",void 0),x([E()],Gc.prototype,"id",void 0),x([E()],Gc.prototype,"indicator",void 0),x([E()],Gc.prototype,"title",void 0),x([E()],Gc.prototype,"type",void 0),x([E()],Gc.prototype,"visible",void 0),Gc=$7=x([ue("esri.support.actions.ActionBase")],Gc);const VW=Gc;var F7;let e3=F7=class extends VW{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new F7({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};x([E()],e3.prototype,"image",void 0),e3=F7=x([ue("esri.support.actions.ActionButton")],e3);const VKe=e3;var V7;let RS=V7=class extends VW{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new V7({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};x([E()],RS.prototype,"image",void 0),x([E()],RS.prototype,"value",void 0),RS=V7=x([ue("esri.support.actions.ActionToggle")],RS);const zKe=RS,BE="relationships/",Vne="expression/",GKe=Ot.ofType({key:"type",defaultKeyValue:"button",base:VW,typeMap:{button:VKe,toggle:zKe}}),UKe={base:Rp,key:"type",typeMap:{media:lA,custom:SKe,text:uA,attachments:oA,fields:aA,expression:lL,relationship:cA,utilityNetworkAssociations:FW}},$1e=new Set(["attachments","fields","media","text","expression","relationship"]),BKe=new Set([...$1e,"utility-network-associations"]);let _s=class extends vo(qt){constructor(e){super(e),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(n=>Bg(UKe,n)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||ga(e)?e:(kt.getLogger(this).error("content error","unsupported content value",{value:e}),null)}readContent(e,n){const{popupElements:r}=n;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(n.description,n.mediaInfos,r):this._readPopupInfo(n)}writeWebSceneContent(e,n,r,i){this._writePopupTemplateContent(e,n,i)}writeWebMapContent(e,n,r,i){this._writePopupTemplateContent(e,n,i)}writeFieldInfos(e,n,r,i){const{content:s}=this,o=Array.isArray(s)?s:null,{writeFieldFormat:a,...l}=i||{};if(e){const c=o?o.filter(h=>h.type==="fields"):[],u=c.length&&c.every(h=>h.fieldInfos?.length);n.fieldInfos=e.filter(Boolean).map(h=>{const f=h.toJSON(l);return u&&(f.visible=!1),f})}if(o)for(const c of o)c.type==="fields"&&this._writeFieldsContent(c,n,l)}writeLayerOptions(e,n,r,i){n[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(i)}writeTitle(e,n){n.title=e||""}async collectRequiredFields(e,n,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(e,n,r,[...i,...this._getContentExpressionInfos(this.content,i)]),iA(e,n,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e,n){const r=new Set;return await this.collectRequiredFields(r,e,n),[...r].sort()}_writePopupTemplateContent(e,n,r){typeof e!="string"?Array.isArray(e)&&(n.popupElements=e.filter(i=>r?.origin==="web-scene"?$1e.has(i.type):BKe.has(i.type)).map(i=>i?.toJSON(r)),n.popupElements.forEach(i=>{i.type==="attachments"?this._writeAttachmentContent(n):i.type==="media"?this._writeMediaContent(i,n):i.type==="text"?this._writeTextContent(i,n):i.type==="relationship"&&this._writeRelationshipContent(i,n)})):n.description=e}_writeFieldsContent(e,n,r){const i=e.fieldInfos;if(!Array.isArray(i)||!i.length)return;const s=n.fieldInfos;if(Array.isArray(s))for(const o of i){const a=s.find(l=>l.fieldName?.toLowerCase()===o.fieldName?.toLowerCase());a?a.visible=!0:s.push(o.toJSON(r))}else n.fieldInfos=i.map(o=>o.toJSON(r))}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,n){const r=e.orderByFields?.map(s=>this._toFieldOrderJSON(s,e.relationshipId))||[],i=[...n.relatedRecordsInfo?.orderByFields||[],...r];n.relatedRecordsInfo={showRelatedRecords:!0,...i?.length&&{orderByFields:i}}}_writeTextContent(e,n){!n.description&&e.text&&(n.description=e.text)}_writeMediaContent(e,n){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=Ze(e.mediaInfos);Array.isArray(n.mediaInfos)?n.mediaInfos=[...n.mediaInfos,...r]:n.mediaInfos=r}_readPopupInfoElements(e,n,r){const i={description:!1,mediaInfos:!1};return r.map(s=>s.type==="media"?(s.mediaInfos||!n||i.mediaInfos||(s.mediaInfos=n,i.mediaInfos=!0),lA.fromJSON(s)):s.type==="text"?(s.text||!e||i.description||(s.text=e,i.description=!0),uA.fromJSON(s)):s.type==="attachments"?oA.fromJSON(s):s.type==="fields"?aA.fromJSON(s):s.type==="expression"?lL.fromJSON(s):s.type==="relationship"?cA.fromJSON(s):s.type==="utilityNetworkAssociations"?FW.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:n,order:r}=e;if(!n?.startsWith(BE))return null;const i=n.replace(BE,"").split("/");if(i.length!==2)return null;const s=parseInt(i[0],10),o=i[1];return!Number.isNaN(s)&&o?cA.fromJSON({relationshipId:s,orderByFields:[{field:o,order:r}]}):null}_toFieldOrderJSON(e,n){const{order:r,field:i}=e;return{field:`${BE}${n}/${i}`,order:r}}_readPopupInfo({description:e,mediaInfos:n,showAttachments:r,relatedRecordsInfo:i={showRelatedRecords:!1}}){const s=[];e?s.push(new uA({text:e})):s.push(new aA),Array.isArray(n)&&n.length&&s.push(lA.fromJSON({mediaInfos:n})),r&&s.push(oA.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=i;return o&&a?.length&&a.forEach(l=>{const c=this._toRelationshipContent(l);c&&s.push(c)}),s.length?s:e}_getContentElementFields(e){const n=e?.type;if(n==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(n==="custom")return e.outFields||[];if(n==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(n==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((i,s)=>[...i,...this._getMediaInfoFields(s)],[])]}return n==="text"?this._extractFieldNames(e.text):n==="relationship"||n==="utility-network-associations"?[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)]:[]}_getMediaInfoFields(e){const{caption:n,title:r,value:i}=e,s=i||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:c,linkURL:u}=s,h=[...this._extractFieldNames(r),...this._extractFieldNames(n),...this._extractFieldNames(c),...this._extractFieldNames(u),...o??[]];return a&&h.push(a),l&&h.push(l),h}_getContentExpressionInfos(e,n){return Array.isArray(e)?e.reduce((r,i)=>[...r,...i.type==="expression"&&i.expressionInfo?[i.expressionInfo]:[]],n):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((n,r)=>[...n,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,n,r,i){i&&await Promise.all(i.map(s=>J1(e,n,r,s.expression)))}_getFieldInfoFields(e){return e?e.filter(({fieldName:n,visible:r})=>!(r!==void 0&&!r||!n||n.startsWith(BE)||n.startsWith(Vne))).map(n=>n.fieldName):[]}_getActionsFields(e){return e?e.toArray().reduce((n,r)=>[...n,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:n,title:r,type:i}=e,s=i==="button"||i==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(n),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){return bKe(e).filter(n=>!(n.startsWith(BE)||n.startsWith(Vne)))}};x([E({type:GKe})],_s.prototype,"actions",void 0),x([E()],_s.prototype,"content",void 0),x([qs("content")],_s.prototype,"castContent",null),x([cr("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],_s.prototype,"readContent",null),x([er("web-scene","content",{popupElements:{type:Ot.ofType(jKe)},showAttachments:{type:Boolean},mediaInfos:{type:Ot.ofType(R7)},description:{type:String},relatedRecordsInfo:{type:Fne}})],_s.prototype,"writeWebSceneContent",null),x([er("content",{popupElements:{type:Ot.ofType(DKe)},showAttachments:{type:Boolean},mediaInfos:{type:Ot.ofType(R7)},description:{type:String},relatedRecordsInfo:{type:Fne}})],_s.prototype,"writeWebMapContent",null),x([E({type:[$Ke],json:{write:!0}})],_s.prototype,"expressionInfos",void 0),x([E({type:[R1e]})],_s.prototype,"fieldInfos",void 0),x([er("fieldInfos")],_s.prototype,"writeFieldInfos",null),x([E({type:FKe})],_s.prototype,"layerOptions",void 0),x([er("layerOptions")],_s.prototype,"writeLayerOptions",null),x([E({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],_s.prototype,"lastEditInfoEnabled",void 0),x([E()],_s.prototype,"outFields",void 0),x([E()],_s.prototype,"overwriteActions",void 0),x([E()],_s.prototype,"returnGeometry",void 0),x([E({json:{type:String}})],_s.prototype,"title",void 0),x([er("title")],_s.prototype,"writeTitle",null),_s=x([ue("esri.PopupTemplate")],_s);const WKe=_s,F1e=Symbol("idFieldsProviderSymbol");function HKe(t){return!!t&&F1e in t}function zne(t){return HKe(t)?t[F1e]:void 0}const V1e=Symbol("popupProvider");function D3t(t){return typeof t=="object"&&t!==null&&"popupEnabled"in t&&"popupTemplate"in t}function qKe(t){return!!t&&V1e in t}function KKe(t){return qKe(t)?t[V1e]:null}function j3t(t,e){switch(e.type){case"object-id":case"unique-id-simple":return t.attributes[e.fieldName];case"unique-id-composite":{const n=[];for(const r of e.fieldNames)n.push(t.attributes[r]??null);return JSON.stringify(n)}}}function Gne(t,e){if("uniqueIdFields"in e&&e.uniqueIdFields?.length){if(e.uniqueIdFields.length===1)return t.attributes?.[e.uniqueIdFields[0]];const n=e.uniqueIdFields.map(r=>t.attributes?.[r]);return JSON.stringify(n)}return"objectIdField"in e&&e.objectIdField?t.attributes?.[e.objectIdField]:null}const Une=new Ys({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let YKe=0,ds=class extends qt{constructor(e){super(e),this.id="sym"+YKe++,this.type=null,this.color=new Jn([0,0,0,1])}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,n){}hash(){return JSON.stringify(this.toJSON())}clone(){}};x([E({type:Une.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:Une.write,isRequired:!0}}})],ds.prototype,"type",void 0),x([E({type:Jn,json:{write:{allowNull:!0}}})],ds.prototype,"color",void 0),x([cr("color")],ds.prototype,"readColor",null),ds=x([ue("esri.symbols.Symbol")],ds);var z7;let ml=z7=class extends ds{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){Object.assign(e,t)}async collectRequiredFields(t,e){if(this.data?.type==="CIMSymbolReference"){const n=this.data.primitiveOverrides;if(n){const r=n.map(i=>{const s=i.valueExpressionInfo;return s?J1(t,e,null,s.expression):null});await Promise.all(r)}}}clone(){return new z7({data:Ze(this.data)})}hash(){return yfe(JSON.stringify(this.data)).toString()}};x([E({json:{write:!1}})],ml.prototype,"color",void 0),x([E({json:{write:!0}})],ml.prototype,"data",void 0),x([cr("data",["symbol"])],ml.prototype,"readData",null),x([er("data",{})],ml.prototype,"writeData",null),x([mn({CIMSymbolReference:"cim"},{readOnly:!0})],ml.prototype,"type",void 0),ml=z7=x([ue("esri.symbols.CIMSymbol")],ml);let La=class extends qt{constructor(e){super(e),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(e,n,r){e||(n[r]=e)}};x([E({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],La.prototype,"enabled",void 0),x([er("enabled")],La.prototype,"writeEnabled",null),x([E({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0,json:{write:{isRequired:!0}}})],La.prototype,"type",void 0),La=x([ue("esri.symbols.Symbol3DLayer")],La);function XKe(t,e){const n=e.transparency!=null?e0e(e.transparency):1,r=e.color;return r&&Array.isArray(r)?new Jn([r[0]||0,r[1]||0,r[2]||0,n]):null}function ZKe(t,e){e.color=t.toJSON().slice(0,3);const n=Qge(t.a);n!==0&&(e.transparency=n)}function d0(t){return{type:Jn,nonNullable:t?.nonNullable,json:{type:[jr],default:null,read:{source:["color","transparency"],reader:XKe},write:{target:{color:{type:[jr],isRequired:t?.colorRequiredOnWrite},transparency:{type:jr}},writer:ZKe}}}}const Vd={type:Number,cast:Si,json:{write:!0}};function V3t(t){return t==="emissive"?0:1}let uy=class extends qt{constructor(e){super(e),this.color=new Jn([0,0,0,1]),this.extensionLength=0,this.size=Z1(1)}clone(){}cloneProperties(){return{color:Ze(this.color),size:this.size,extensionLength:this.extensionLength}}};x([E({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],uy.prototype,"type",void 0),x([E(d0({colorRequiredOnWrite:!0}))],uy.prototype,"color",void 0),x([E({...Vd,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],uy.prototype,"extensionLength",void 0),x([E(Vd)],uy.prototype,"size",void 0),uy=x([ue("esri.symbols.edges.Edges3D")],uy);const zW=uy;var G7;let t3=G7=class extends zW{constructor(t){super(t),this.type="sketch"}clone(){return new G7(this.cloneProperties())}};x([mn({sketch:"sketch"},{readOnly:!0})],t3.prototype,"type",void 0),t3=G7=x([ue("esri.symbols.edges.SketchEdges3D")],t3);const JKe=t3;var U7;let n3=U7=class extends zW{constructor(t){super(t),this.type="solid"}clone(){return new U7(this.cloneProperties())}};x([mn({solid:"solid"},{readOnly:!0})],n3.prototype,"type",void 0),n3=U7=x([ue("esri.symbols.edges.SolidEdges3D")],n3);const QKe=n3,z1e={types:{key:"type",base:zW,typeMap:{solid:QKe,sketch:JKe}},json:{write:!0}};var B7;let Cx=B7=class extends qt{constructor(){super(...arguments),this.strength=null,this.source="emissive"}clone(){const t={strength:this.strength,source:this.source};return new B7(t)}};x([E({json:{write:!1}})],Cx.prototype,"strength",void 0),x([E({json:{write:!1}})],Cx.prototype,"source",void 0),Cx=B7=x([ue("esri.symbols.support.Symbol3DEmissive")],Cx);var W7;let fc=W7=class extends qt{constructor(t){super(t),this.color=null,this.emissive=new Cx({source:"emissive"})}clone(){const t={color:this.color?.clone()??null,emissive:this.emissive?.clone()??null};return new W7(t)}};x([E(d0())],fc.prototype,"color",void 0),x([E({type:Cx,json:{write:!1}})],fc.prototype,"emissive",void 0),fc=W7=x([ue("esri.symbols.support.Symbol3DMaterial")],fc);var H7,Lw;let Lf=(Lw=class extends La{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new H7({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}},H7=Lw,Lw);x([mn({Extrude:"extrude"},{readOnly:!0})],Lf.prototype,"type",void 0),x([E({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],Lf.prototype,"size",void 0),x([E({type:fc,json:{write:!0}})],Lf.prototype,"material",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Lf.prototype,"castShadows",void 0),x([E(z1e)],Lf.prototype,"edges",void 0),Lf=H7=x([ue("esri.symbols.ExtrudeSymbol3DLayer")],Lf);let PT=class extends qt{constructor(e){super(e)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};x([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],PT.prototype,"type",void 0),PT=x([ue("esri.symbols.patterns.LinePattern3D")],PT);const eYe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var q7;const tYe=Ll()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Hy=q7=class extends PT{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new q7(t)}};x([E({type:["style"],json:{write:{isRequired:!0}}})],Hy.prototype,"type",void 0),x([mn(tYe),E({type:eYe,json:{write:{isRequired:!0}}})],Hy.prototype,"style",void 0),Hy=q7=x([ue("esri.symbols.patterns.LineStylePattern3D")],Hy);let CT=class extends qt{constructor(e){super(e),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};x([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],CT.prototype,"type",void 0),CT=x([ue("esri.symbols.patterns.Pattern3D")],CT);const nYe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var K7;let Rx=K7=class extends CT{constructor(t){super(t),this.type="style",this.style="solid"}clone(){return new K7({style:this.style})}};x([E({type:["style"],json:{write:{isRequired:!0}}})],Rx.prototype,"type",void 0),x([E({type:nYe,json:{read:!0,write:{isRequired:!0}}})],Rx.prototype,"style",void 0),Rx=K7=x([ue("esri.symbols.patterns.StylePattern3D")],Rx);const rYe={types:{key:"type",base:CT,typeMap:{style:Rx}},json:{write:!0}},G1e={types:{key:"type",base:PT,typeMap:{style:Hy}},json:{write:!0}},RT=new Jn("white"),iYe=new Jn([255,255,255,0]);function sYe(t){return t.r===0&&t.g===0&&t.b===0}var Y7;let MT=Y7=class extends fc{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:this.color?.clone()??null,colorMixMode:this.colorMixMode,emissive:this.emissive?.clone()??null};return new Y7(t)}};x([mn({multiply:"multiply",replace:"replace",tint:"tint"})],MT.prototype,"colorMixMode",void 0),MT=Y7=x([ue("esri.symbols.support.Symbol3DFillMaterial")],MT);function GW(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function oYe(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}function aYe(t,e,n,r,i,s,o,a,l,c,u,h,f,g,y,_){return[t,e,n,r,i,s,o,a,l,c,u,h,f,g,y,_]}const lYe=GW();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:lYe,clone:oYe,create:GW,fromValues:aYe},Symbol.toStringTag,{value:"Module"}));function cYe(t){return t<=cfe?new Array(t).fill(0):new Float64Array(t)}function B3t(t){return(h6e(t)?t.byteLength/8:t.length)<=cfe?Array.from(t):new Float64Array(t)}function W3t(t,e,n){return Array.isArray(t)?t.slice(e,e+n):t.subarray(e,e+n)}function H3t(t){return[...t]}function q3t(t){const e=GW();for(let n=0;n<16;++n)e[n]=t[n];return e}function LI(t=fYe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function UW(t,e,n,r,i,s,o=LI()){return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o[4]=i,o[5]=s,o}function K3t(t,e=LI()){return uYe(t,0,t.length/3,e)}function uYe(t,e,n,r=LI()){return U1e(r,X7),hYe(r,t,e,n),r}function Y3t(t,e=cYe(24)){const[n,r,i,s,o,a]=t;return e[0]=n,e[1]=r,e[2]=i,e[3]=n,e[4]=r,e[5]=a,e[6]=n,e[7]=o,e[8]=i,e[9]=n,e[10]=o,e[11]=a,e[12]=s,e[13]=r,e[14]=i,e[15]=s,e[16]=r,e[17]=a,e[18]=s,e[19]=o,e[20]=i,e[21]=s,e[22]=o,e[23]=a,e}function X3t(t,e){const n=isFinite(t[2])||isFinite(t[5]);return new Vn(n?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function Z3t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function J3t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function Q3t(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function hYe(t,e,n=0,r=e.length/3){let i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let u=0;u<r;u++)i=Math.min(i,e[n+3*u]),s=Math.min(s,e[n+3*u+1]),o=Math.min(o,e[n+3*u+2]),a=Math.max(a,e[n+3*u]),l=Math.max(l,e[n+3*u+1]),c=Math.max(c,e[n+3*u+2]);t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function e4t(t,e,n){const r=e.length;let i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];if(n)for(let u=0;u<r;u++){const h=e[u];i=Math.min(i,h[0]),s=Math.min(s,h[1]),o=Math.min(o,h[2]),a=Math.max(a,h[0]),l=Math.max(l,h[1]),c=Math.max(c,h[2])}else for(let u=0;u<r;u++){const h=e[u];i=Math.min(i,h[0]),s=Math.min(s,h[1]),a=Math.max(a,h[0]),l=Math.max(l,h[1])}t[0]=i,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=c}function t4t(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function DI(t){return t[0]>=t[3]?0:t[3]-t[0]}function jI(t){return t[1]>=t[4]?0:t[4]-t[1]}function $I(t){return t[2]>=t[5]?0:t[5]-t[2]}function n4t(t){const e=DI(t),n=$I(t),r=jI(t);return Math.sqrt(e*e+n*n+r*r)}function r4t(t,e=[0,0,0]){return e[0]=t[0]+DI(t)/2,e[1]=t[1]+jI(t)/2,e[2]=t[2]+$I(t)/2,e}function i4t(t,e=[0,0,0]){return e[0]=DI(t),e[1]=jI(t),e[2]=$I(t),e}function s4t(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function dYe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function o4t(t,e){return e==null||dYe(t,e)}function a4t(t,e,n,r,i=t){return i[0]=t[0]+e,i[1]=t[1]+n,i[2]=t[2]+r,i[3]=t[3]+e,i[4]=t[4]+n,i[5]=t[5]+r,i}function l4t(t,e,n=t){const r=t[0]+DI(t)/2,i=t[1]+jI(t)/2,s=t[2]+$I(t)/2;return n[0]=r+(t[0]-r)*e,n[1]=i+(t[1]-i)*e,n[2]=s+(t[2]-s)*e,n[3]=r+(t[3]-r)*e,n[4]=i+(t[4]-i)*e,n[5]=s+(t[5]-s)*e,n}function c4t(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function u4t(t,e,n=t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n!==t&&(n[3]=t[3],n[4]=t[4],n[5]=t[5]),n}function h4t(t,e,n=t){return n[3]=e[0],n[4]=e[1],n[5]=e[2],n!==t&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),t}function U1e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function d4t(t){return t?U1e(t,X7):LI(X7)}function f4t(t,e=bl()){return e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function p4t(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function m4t(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=Number.NEGATIVE_INFINITY,t[3]=r,t[4]=i,t[5]=Number.POSITIVE_INFINITY,t}function Bne(t){return t.length===6}function g4t(t){return DI(t)===0&&jI(t)===0&&$I(t)===0}function y4t(t,e,n){if(t==null||e==null)return t===e;if(!Bne(t)||!Bne(e))return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}const X7=[1/0,1/0,1/0,-1/0,-1/0,-1/0],fYe=[0,0,0,0,0,0];LI();function v4t(t,{isPrimitive:e,width:n,depth:r,height:i}){const s=e?10:1;if(n==null&&i==null&&r==null)return[s*t[0],s*t[1],s*t[2]];const o=bb(n,r,i);let a;for(let l=0;l<3;l++){const c=o[l];if(c!=null){a=c/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const pYe=UW(-.5,-.5,-.5,.5,.5,.5),mYe=UW(-.5,-.5,0,.5,.5,1),gYe=UW(-.5,-.5,0,.5,.5,.5);function _4t(t){switch(t){case"sphere":case"cube":case"diamond":return pYe;case"cylinder":case"cone":case"inverted-cone":return mYe;case"tetrahedron":return gYe;default:return}}const BW=["butt","square","round"],yYe=[...BW,"none"],B1e=["miter","bevel","round"];var Z7;let hy=Z7=class extends qt{constructor(t){super(t),this.color=new Jn([0,0,0,1]),this.size=Z1(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new Z7(t)}};x([E(d0({colorRequiredOnWrite:!0}))],hy.prototype,"color",void 0),x([E({...Vd,json:{write:{isRequired:!0}}})],hy.prototype,"size",void 0),x([E(G1e)],hy.prototype,"pattern",void 0),x([E({type:BW,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],hy.prototype,"patternCap",void 0),hy=Z7=x([ue("esri.symbols.support.Symbol3DOutline")],hy);var r3,Dw;let ec=(Dw=class extends La{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new r3(e)}static fromSimpleFillSymbol(e){const n=e.outline&&e.outline.style&&e.outline.style!=="solid"?new Hy({style:e.outline.style}):null,r={size:e.outline?.width??0,color:(e.outline?.color??RT).clone(),pattern:n};return n&&e.outline?.cap&&(r.patternCap=e.outline.cap),new r3({material:new MT({color:(e.color??iYe).clone()}),pattern:e.style&&e.style!=="solid"?new Rx({style:e.style}):null,outline:r})}},r3=Dw,Dw);x([mn({Fill:"fill"},{readOnly:!0})],ec.prototype,"type",void 0),x([E({type:MT,json:{write:!0}})],ec.prototype,"material",void 0),x([E(rYe)],ec.prototype,"pattern",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ec.prototype,"castShadows",void 0),x([E({type:hy,json:{write:!0}})],ec.prototype,"outline",void 0),x([E(z1e)],ec.prototype,"edges",void 0),ec=r3=x([ue("esri.symbols.FillSymbol3DLayer")],ec);var J7;const vYe=Ll()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let dy=J7=class extends qt{constructor(t){super(t)}readHref(t,e,n){return t?db(t,n):e.dataURI}writeHref(t,e,n,r){t&&(gv(t)?e.dataURI=t:(e.href=w2(t,r),Tl(e.href)&&(e.href=kg(e.href))))}clone(){return new J7({href:this.href,primitive:this.primitive})}equals(t){return t.primitive===this.primitive&&t.href===this.href}};x([E({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],dy.prototype,"href",void 0),x([cr("href")],dy.prototype,"readHref",null),x([er("href",{href:{type:String},dataURI:{type:String}})],dy.prototype,"writeHref",null),x([mn(vYe)],dy.prototype,"primitive",void 0),dy=J7=x([ue("esri.symbols.support.IconSymbol3DLayerResource")],dy);const x4t="circle";let i3=class extends vo(qt){constructor(e){super(e),this.mode="hidden"}equals(e){return this.mode===e.mode}};x([E({type:["adaptive","hidden","visible"],json:{write:{isRequired:!0}}})],i3.prototype,"mode",void 0),i3=x([ue("esri.symbols.support.OccludedVisibility")],i3);const W1e=i3;var Q7;let Mx=Q7=class extends Kt{constructor(t){super(t),this.x=0,this.y=0}clone(){return new Q7({x:this.x,y:this.y})}equals(t){return t.x===this.x&&t.y===this.y}};x([E({type:Number})],Mx.prototype,"x",void 0),x([E({type:Number})],Mx.prototype,"y",void 0),Mx=Q7=x([ue("esri.symbols.support.Symbol3DAnchorPosition2D")],Mx);var eV;let MS=eV=class extends qt{constructor(t){super(t),this.color=new Jn([0,0,0,1]),this.size=Z1(1)}clone(){const t={color:this.color!=null?this.color.clone():null,size:this.size};return new eV(t)}equals(t){return t.size===this.size&&(this.color==null?t.color==null:this.color.equals(t.color))}};x([E(d0({colorRequiredOnWrite:!0}))],MS.prototype,"color",void 0),x([E({...Vd,json:{write:{isRequired:!0}}})],MS.prototype,"size",void 0),MS=eV=x([ue("esri.symbols.support.Symbol3DIconOutline")],MS);var ox,jw;let so=(jw=class extends La{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null,this.angle=0,this.occludedVisibility=null}clone(){return new ox({anchor:this.anchor,anchorPosition:Ze(this.anchorPosition),enabled:this.enabled,material:Ze(this.material),outline:Ze(this.outline),resource:Ze(this.resource),angle:this.angle,size:this.size,occludedVisibility:Ze(this.occludedVisibility)})}static fromSimpleMarkerSymbol(e){const n=e.color||RT,r=Wne(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||RT).clone()}:null;return new ox({size:e.size,angle:e.angle,resource:{primitive:xYe(()=>kt.getLogger(this.prototype),e.style)},material:{color:n},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const n=!e.color||sYe(e.color)?RT:e.color,r=Wne(e);return new ox({size:e.width<=e.height?e.height:e.width,angle:e.angle,resource:{href:e.url},material:{color:n.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new ox({resource:{href:Ife({mediaType:"application/json",data:JSON.stringify(e.data)})}})}},ox=jw,jw);function Wne(t){const e="width"in t?t.width:t.size,n="height"in t?t.height:t.size,r=Hne(t.xoffset),i=Hne(t.yoffset);return(r||i)&&e&&n?{x:-r/e,y:i/n}:null}function Hne(t){return isFinite(t)?t:0}x([E({type:fc,json:{write:!0}})],so.prototype,"material",void 0),x([E({type:dy,json:{write:!0}})],so.prototype,"resource",void 0),x([mn({Icon:"icon"},{readOnly:!0})],so.prototype,"type",void 0),x([E({...Vd,json:{write:{isRequired:!0}}})],so.prototype,"size",void 0),x([mn({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"},{default:"center"})],so.prototype,"anchor",void 0),x([E({type:Mx,json:{type:[Number],read:{reader:t=>new Mx({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],so.prototype,"anchorPosition",void 0),x([E({type:MS,json:{write:!0}})],so.prototype,"outline",void 0),x([E({type:Number,json:{write:!0,default:0}})],so.prototype,"angle",void 0),x([E({type:W1e})],so.prototype,"occludedVisibility",void 0),so=ox=x([ue("esri.symbols.IconSymbol3DLayer")],so);const _Ye={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function xYe(t,e){return _Ye[e]||(t().warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const wYe=["begin","end","begin-end"],H1e=["arrow","circle","square","diamond","cross","x"];let Uf=class extends vo(qt){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return e!=null&&e.placement===this.placement&&e.style===this.style&&(this.color==null&&e.color==null||this.color!=null&&e.color!=null&&this.color.toJSON()===e.color.toJSON())}};x([E({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],Uf.prototype,"type",void 0),x([E({type:wYe,json:{default:"begin-end",write:!0}})],Uf.prototype,"placement",void 0),x([E({type:H1e,json:{default:"arrow",write:!0}})],Uf.prototype,"style",void 0),x([E({type:Jn,json:{type:[jr],default:null,write:!0}})],Uf.prototype,"color",void 0),Uf=x([ue("esri.symbols.LineStyleMarker3D")],Uf);var s3,$w;let hl=($w=class extends La{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=Z1(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new s3(e)}static fromSimpleLineSymbol(e){const n={enabled:!0,size:e.width??Z1(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new Hy({style:e.style}):null,material:new fc({color:(e.color||RT).clone()}),marker:e.marker?new Uf({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new s3(n)}},s3=$w,$w);x([E({type:fc,json:{write:!0}})],hl.prototype,"material",void 0),x([mn({Line:"line"},{readOnly:!0})],hl.prototype,"type",void 0),x([E({type:B1e,json:{write:!0,default:"miter"}})],hl.prototype,"join",void 0),x([E({type:BW,json:{write:!0,default:"butt"}})],hl.prototype,"cap",void 0),x([E({...Vd,json:{write:{isRequired:!0}}})],hl.prototype,"size",void 0),x([E(G1e)],hl.prototype,"pattern",void 0),x([E({types:{key:"type",base:Uf,typeMap:{style:Uf}},json:{write:!0}})],hl.prototype,"marker",void 0),hl=s3=x([ue("esri.symbols.LineSymbol3DLayer")],hl);var tV;const bYe=Ll()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let NS=tV=class extends qt{clone(){return new tV({href:this.href,primitive:this.primitive})}};x([E({type:String,json:{read:NO,write:b2}})],NS.prototype,"href",void 0),x([mn(bYe)],NS.prototype,"primitive",void 0),NS=tV=x([ue("esri.symbols.support.ObjectSymbol3DLayerResource")],NS);const E4t="sphere";var nV;let Cy=nV=class extends Kt{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new nV({x:this.x,y:this.y,z:this.z})}};x([E({type:Number})],Cy.prototype,"x",void 0),x([E({type:Number})],Cy.prototype,"y",void 0),x([E({type:Number})],Cy.prototype,"z",void 0),Cy=nV=x([ue("esri.symbols.support.Symbol3DAnchorPosition3D")],Cy);var rV,Fw;let ro=(Fw=class extends La{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new rV({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}},rV=Fw,Fw);x([E({type:fc,json:{write:!0}})],ro.prototype,"material",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ro.prototype,"castShadows",void 0),x([E({type:NS,json:{write:!0}})],ro.prototype,"resource",void 0),x([mn({Object:"object"},{readOnly:!0})],ro.prototype,"type",void 0),x([E({type:Number,json:{write:!0}})],ro.prototype,"width",void 0),x([E({type:Number,json:{write:!0}})],ro.prototype,"height",void 0),x([E({type:Number,json:{write:!0}})],ro.prototype,"depth",void 0),x([mn({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"},{default:"origin"})],ro.prototype,"anchor",void 0),x([E({type:Cy,json:{type:[Number],read:{reader:t=>new Cy({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],ro.prototype,"anchorPosition",void 0),x([E({type:Number,json:{write:!0}})],ro.prototype,"heading",void 0),x([E({type:Number,json:{write:!0}})],ro.prototype,"tilt",void 0),x([E({type:Number,json:{write:!0}})],ro.prototype,"roll",void 0),x([E({readOnly:!0})],ro.prototype,"isPrimitive",null),ro=rV=x([ue("esri.symbols.ObjectSymbol3DLayer")],ro);var iV,Vw;let ko=(Vw=class extends La{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,n){return e??(n.height==null&&n.size!=null?n.size:void 0)}readHeight(e,n){return e??(n.width==null&&n.size!=null?n.size:void 0)}clone(){return new iV({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}},iV=Vw,Vw);x([E({type:fc,json:{write:!0}})],ko.prototype,"material",void 0),x([E({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],ko.prototype,"castShadows",void 0),x([mn({Path:"path"},{readOnly:!0})],ko.prototype,"type",void 0),x([E({type:["circle","quad"],nonNullable:!0,json:{write:!0,default:"circle"}})],ko.prototype,"profile",void 0),x([E({type:B1e,nonNullable:!0,json:{write:!0,default:"miter"}})],ko.prototype,"join",void 0),x([E({type:yYe,nonNullable:!0,json:{write:!0,default:"butt"}})],ko.prototype,"cap",void 0),x([E({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],ko.prototype,"width",void 0),x([cr("width",["width","size","height"])],ko.prototype,"readWidth",null),x([E({type:Number,json:{write:!0}})],ko.prototype,"height",void 0),x([cr("height",["height","size","width"])],ko.prototype,"readHeight",null),x([E({type:["center","bottom","top"],nonNullable:!0,json:{write:!0,default:"center"}})],ko.prototype,"anchor",void 0),x([E({type:["heading","all"],nonNullable:!0,json:{write:!0,default:"all"}})],ko.prototype,"profileRotation",void 0),ko=iV=x([ue("esri.symbols.PathSymbol3DLayer")],ko);const EYe=["none","underline","line-through"],SYe=["normal","italic","oblique"],TYe=["normal","lighter","bold","bolder"],q1e={type:Number,cast:t=>{const e=oc(t);return e===0?1:_u(e,.1,4)},nonNullable:!0},kYe=["left","right","center"],AYe=["baseline","top","middle","bottom"],K1e={type:kYe,nonNullable:!0},Y1e={type:AYe,nonNullable:!0},S4t=8;var sV;let Kc=sV=class extends qt{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return Si(t)}clone(){return new sV({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};x([E({type:EYe,json:{default:"none",write:!0}})],Kc.prototype,"decoration",void 0),x([E({type:String,json:{write:!0}})],Kc.prototype,"family",void 0),x([E({type:Number,json:{write:{overridePolicy:(t,e,n)=>({enabled:!n||!n.textSymbol3D})}}})],Kc.prototype,"size",void 0),x([qs("size")],Kc.prototype,"castSize",null),x([E({type:SYe,json:{default:"normal",write:!0}})],Kc.prototype,"style",void 0),x([E({type:TYe,json:{default:"normal",write:!0}})],Kc.prototype,"weight",void 0),Kc=sV=x([ue("esri.symbols.Font")],Kc);var oV;let Nx=oV=class extends qt{constructor(){super(...arguments),this.color=new Jn([0,0,0,1]),this.size=0}clone(){const t={color:Ze(this.color),size:this.size};return new oV(t)}};x([E(d0())],Nx.prototype,"color",void 0),x([E(Vd)],Nx.prototype,"size",void 0),Nx=oV=x([ue("esri.symbols.support.Symbol3DHalo")],Nx);let NT=class extends vo(qt){constructor(e){super(e),this.color=null}};x([E(d0())],NT.prototype,"color",void 0),NT=x([ue("esri.symbols.support.Symbol3DTextBackground")],NT);var o3,zw;let bs=(zw=class extends La{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline",this.occludedVisibility=null}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,n,r,i){const s={...i,textSymbol3D:!0};n.font=e.write({},s),delete n.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new o3({enabled:this.enabled,font:Ze(this.font),halo:Ze(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:Ze(this.background),occludedVisibility:Ze(this.occludedVisibility)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new o3({font:e.font!=null?e.font.clone():new Kc,halo:IYe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new fc({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new NT({color:e.backgroundColor.clone()}):null})}},o3=zw,zw);function IYe(t,e){return t&&e!=null&&e>0?new Nx({color:Ze(t),size:e}):null}x([E({type:Kc,json:{write:!0}})],bs.prototype,"font",null),x([er("font")],bs.prototype,"writeFont",null),x([E({type:Nx,json:{write:!0}})],bs.prototype,"halo",void 0),x([E({...K1e,json:{default:"center",write:!0}})],bs.prototype,"horizontalAlignment",void 0),x([E({...q1e,json:{default:1,write:!0}})],bs.prototype,"lineHeight",void 0),x([E({type:fc,json:{write:!0}})],bs.prototype,"material",void 0),x([E({type:NT,json:{write:!0}})],bs.prototype,"background",void 0),x([E(Vd)],bs.prototype,"size",null),x([E({type:String,json:{write:!0}})],bs.prototype,"text",void 0),x([mn({Text:"text"},{readOnly:!0})],bs.prototype,"type",void 0),x([E({...Y1e,json:{default:"baseline",write:!0}})],bs.prototype,"verticalAlignment",void 0),x([E({type:W1e})],bs.prototype,"occludedVisibility",void 0),bs=o3=x([ue("esri.symbols.TextSymbol3DLayer")],bs);var aV,Gw;let Df=(Gw=class extends La{constructor(e){super(e),this.color=lV.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new aV({color:this.color.clone(),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}},aV=Gw,Gw);x([E({type:Jn,nonNullable:!0,json:{type:[jr],write:(t,e,n)=>e[n]=t.toArray(1),default:()=>lV.clone(),defaultEquals:t=>t.toCss(!0)===lV.toCss(!0)}})],Df.prototype,"color",void 0),x([mn({Water:"water"},{readOnly:!0})],Df.prototype,"type",void 0),x([E({type:["small","medium","large"],json:{write:!0,default:"medium"}})],Df.prototype,"waterbodySize",void 0),x([E({type:Number,json:{write:!0,default:null}})],Df.prototype,"waveDirection",void 0),x([E({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],Df.prototype,"waveStrength",void 0),Df=aV=x([ue("esri.symbols.WaterSymbol3DLayer")],Df);const lV=new Jn([0,119,190]);var cV;let Bf=cV=class extends Kt{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new cV({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};x([E({type:String})],Bf.prototype,"name",void 0),x([E({type:String})],Bf.prototype,"styleUrl",void 0),x([E({type:String})],Bf.prototype,"styleName",void 0),x([E({type:st})],Bf.prototype,"portal",void 0),Bf=cV=x([ue("esri.symbols.support.StyleOrigin")],Bf);var uV;let OT=uV=class extends Kt{constructor(){super(...arguments),this.url=""}clone(){return new uV({url:this.url})}};x([E({type:String})],OT.prototype,"url",void 0),OT=uV=x([ue("esri.symbols.support.Thumbnail")],OT);const X1e={icon:so,object:ro,line:hl,path:ko,fill:ec,extrude:Lf,text:bs,water:Df},PYe=Ot.ofType({base:La,key:"type",typeMap:X1e,errorContext:"symbol-layer"});let dl=class extends ds{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const n=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,r=n?.type,i=r||Ot;this._set("symbolLayers",new i)}get color(){return null}set color(e){this.constructed&&kt.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){kd(e,this._get("symbolLayers"))}readStyleOrigin(e,n,r){if(e.styleUrl&&e.name){const i=db(e.styleUrl,r);return new Bf({styleUrl:i,name:e.name})}if(e.styleName&&e.name)return new Bf({portal:r?.portal||st.getDefault(),styleName:e.styleName,name:e.name});r?.messages&&r.messages.push(new jd("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,n,r,i){if(e.styleUrl&&e.name){let s=w2(e.styleUrl,i);Tl(s)&&(s=kg(s)),n.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&i?.portal&&!O6e(e.portal.restUrl,i.portal.restUrl)?i?.messages&&i.messages.push(new jd("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):n.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof La||e&&X1e[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};x([E({json:{read:!1,write:!1}})],dl.prototype,"color",null),x([E({type:PYe,nonNullable:!0,json:{write:!0}}),qs(Fpe)],dl.prototype,"symbolLayers",null),x([E({type:Bf})],dl.prototype,"styleOrigin",void 0),x([cr("styleOrigin")],dl.prototype,"readStyleOrigin",null),x([er("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],dl.prototype,"writeStyleOrigin",null),x([E({type:OT,json:{read:!1}})],dl.prototype,"thumbnail",void 0),x([E({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],dl.prototype,"type",void 0),dl=x([ue("esri.symbols.Symbol3D")],dl);let Ox=class extends qt{constructor(e){super(e),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};x([E({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,isRequired:!0}}})],Ox.prototype,"type",void 0),x([E({readOnly:!0})],Ox.prototype,"visible",void 0),Ox=x([ue("esri.symbols.callouts.Callout3D")],Ox);var hV;let a3=hV=class extends qt{constructor(t){super(t),this.color=new Jn("white")}clone(){return new hV({color:Ze(this.color)})}};x([E(d0({colorRequiredOnWrite:!0}))],a3.prototype,"color",void 0),a3=hV=x([ue("esri.symbols.callouts.LineCallout3DBorder")],a3);const CYe=a3;var dV;let jf=dV=class extends Ox{constructor(t){super(t),this.type="line",this.color=new Jn([0,0,0,1]),this.size=Z1(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new dV({color:Ze(this.color),size:this.size,border:Ze(this.border)})}};x([mn({line:"line"})],jf.prototype,"type",void 0),x([E(d0({colorRequiredOnWrite:!0}))],jf.prototype,"color",void 0),x([E({...Vd,json:{write:{isRequired:!0}}})],jf.prototype,"size",void 0),x([E({type:CYe,json:{write:!0}})],jf.prototype,"border",void 0),x([E({readOnly:!0})],jf.prototype,"visible",null),jf=dV=x([ue("esri.symbols.callouts.LineCallout3D")],jf);function WW(t){if(!t)return!1;const e=t.verticalOffset;return!(!e||e.screenLength<=0||e.maxWorldLength!=null&&e.maxWorldLength<=0)}function Z1e(t){return!t||!t.supportsCallout||!t.supportsCallout()?!1:!!t.callout?.visible&&!!WW(t)}function I4t(t){return t.type==="point-3d"||t.type==="label-3d"}function P4t(t){return t.horizontalAlignment==="center"}const J1e={types:{key:"type",base:Ox,typeMap:{line:jf}},json:{write:!0}};var fV;let Xm=fV=class extends qt{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new fV({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};x([E({...Vd,json:{write:{isRequired:!0}}})],Xm.prototype,"screenLength",void 0),x([E({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Xm.prototype,"minWorldLength",void 0),x([E({type:Number,json:{write:!0}})],Xm.prototype,"maxWorldLength",void 0),Xm=fV=x([ue("esri.symbols.support.Symbol3DVerticalOffset")],Xm);var l3;const Q1e=Ot.ofType({base:null,key:"type",typeMap:{text:bs}});let ad=l3=class extends dl{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Q1e,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Z1e(this)}hasVisibleVerticalOffset(){return WW(this)}clone(){return new l3({styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail),callout:Ze(this.callout),verticalOffset:Ze(this.verticalOffset)})}static fromTextSymbol(t){return new l3({symbolLayers:new Ot([bs.fromTextSymbol(t)])})}};x([E({type:Xm,json:{write:!0}})],ad.prototype,"verticalOffset",void 0),x([E(J1e)],ad.prototype,"callout",void 0),x([E({json:{read:!1,write:!1}})],ad.prototype,"styleOrigin",void 0),x([E({type:Q1e})],ad.prototype,"symbolLayers",void 0),x([mn({LabelSymbol3D:"label-3d"},{readOnly:!0})],ad.prototype,"type",void 0),ad=l3=x([ue("esri.symbols.LabelSymbol3D")],ad);var c3;const eve=Ot.ofType({base:null,key:"type",typeMap:{line:hl,path:ko}}),RYe=Ot.ofType({base:null,key:"type",typeMap:{line:hl,path:ko}});let ug=c3=class extends dl{constructor(t){super(t),this.symbolLayers=new eve,this.type="line-3d"}clone(){return new c3({styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail)})}static fromSimpleLineSymbol(t){return new c3({symbolLayers:new Ot([hl.fromSimpleLineSymbol(t)])})}};x([E({type:eve,json:{type:RYe}})],ug.prototype,"symbolLayers",void 0),x([mn({LineSymbol3D:"line-3d"},{readOnly:!0})],ug.prototype,"type",void 0),ug=c3=x([ue("esri.symbols.LineSymbol3D")],ug);var u3;const tve=Ot.ofType({base:null,key:"type",typeMap:{fill:ec}});let qy=u3=class extends dl{constructor(t){super(t),this.symbolLayers=new tve,this.type="mesh-3d"}clone(){return new u3({styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail)})}static fromSimpleFillSymbol(t){return new u3({symbolLayers:new Ot([ec.fromSimpleFillSymbol(t)])})}};x([E({type:tve})],qy.prototype,"symbolLayers",void 0),x([mn({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],qy.prototype,"type",void 0),qy=u3=x([ue("esri.symbols.MeshSymbol3D")],qy);let OS=class extends ds{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};x([mn({esriSLS:"simple-line"},{readOnly:!0})],OS.prototype,"type",void 0),x([E({type:Number,cast:Si,json:{write:!0}})],OS.prototype,"width",void 0),OS=x([ue("esri.symbols.LineSymbol")],OS);var pV;let Qh=pV=class extends qt{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,n,r){e[n]=r?.origin==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,n,r){r?.origin==="web-map"||(e[n]=t)}clone(){return new pV({color:Ze(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};x([E({type:["begin","end","begin-end"],json:{write:!0}})],Qh.prototype,"placement",void 0),x([mn({"line-marker":"line-marker"},{readOnly:!0}),E({json:{origins:{"web-map":{write:!1}}}})],Qh.prototype,"type",void 0),x([E({type:H1e})],Qh.prototype,"style",void 0),x([er("style")],Qh.prototype,"writeStyle",null),x([E({type:Jn,value:null,json:{write:{allowNull:!0}}})],Qh.prototype,"color",null),x([cr("color")],Qh.prototype,"readColor",null),x([er("color")],Qh.prototype,"writeColor",null),Qh=pV=x([ue("esri.symbols.LineSymbolMarker")],Qh);const MYe=Qh;var mV;const u$=new Ys({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Ca=mV=class extends OS{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,n,r,i,s){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),n!=null&&(o.width=Si(n)),r!=null&&(o.cap=r),i!=null&&(o.join=i),s!=null&&(o.miterLimit=Si(s)),o}clone(){return new mV({color:Ze(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};x([mn({esriSLS:"simple-line"},{readOnly:!0})],Ca.prototype,"type",void 0),x([E({type:u$.apiValues,json:{read:u$.read,write:u$.write}})],Ca.prototype,"style",void 0),x([E({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,n)=>({enabled:t!=="round"&&n?.origin==null})}}})],Ca.prototype,"cap",void 0),x([E({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,n)=>({enabled:t!=="round"&&n?.origin==null})}}})],Ca.prototype,"join",void 0),x([E({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":MYe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ca.prototype,"marker",void 0),x([E({type:Number,json:{read:!1,write:!1}})],Ca.prototype,"miterLimit",void 0),Ca=mV=x([ue("esri.symbols.SimpleLineSymbol")],Ca);let Lx=class extends ds{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};x([E({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ca}},json:{default:null,write:!0}})],Lx.prototype,"outline",void 0),x([E({type:["simple-fill","picture-fill"],readOnly:!0})],Lx.prototype,"type",void 0),Lx=x([ue("esri.symbols.FillSymbol")],Lx);function NYe(t,e,n){return e.imageData?Ife({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):nve(e.url,n)}function nve(t,e){if(!Tl(t)){const n=LYe(e);if(n)return pI(n,"images",t)}return db(t,e)}function OYe(t,e,n,r){if(gv(t)){const i=x2(t);if(!i)return;e.contentType=i.mediaType,e.imageData=i.data,n&&n.imageData===e.imageData&&n.url&&b2(n.url,e,"url",r)}else b2(t,e,"url",r)}const rve={json:{read:{source:["imageData","url"],reader:NYe},write:{writer(t,e,n,r){OYe(t,e,this.source,r)}}}},ive={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,n){const r={};return e.imageData&&(r.imageData=e.imageData),e.contentType&&(r.contentType=e.contentType),e.url&&(r.url=nve(e.url,n)),r}}}};function LYe(t){if(!t)return null;const{origin:e,layer:n}=t;if(e!=="service"&&e!=="portal-item")return null;const r=n?.type;return r==="feature"||r==="stream"?n.parsedUrl?.path:r==="map-image"||r==="tile"?t.url?.path:null}var gV;let ol=gV=class extends Lx{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,n,r){if(t&&typeof t!="string"&&t.imageData==null)return t;const i={};return t&&(i.url=t),e&&(i.outline=e),n!=null&&(i.width=Si(n)),r!=null&&(i.height=Si(r)),i}clone(){const t=new gV({color:Ze(this.color),height:this.height,outline:Ze(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",Ze(this.source)),t}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};x([mn({esriPFS:"picture-fill"},{readOnly:!0})],ol.prototype,"type",void 0),x([E(rve)],ol.prototype,"url",void 0),x([E({type:Number,json:{write:!0}})],ol.prototype,"xscale",void 0),x([E({type:Number,json:{write:!0}})],ol.prototype,"yscale",void 0),x([E({type:Number,cast:Si,json:{write:!0}})],ol.prototype,"width",void 0),x([E({type:Number,cast:Si,json:{write:!0}})],ol.prototype,"height",void 0),x([E({type:Number,cast:Si,json:{write:!0}})],ol.prototype,"xoffset",void 0),x([E({type:Number,cast:Si,json:{write:!0}})],ol.prototype,"yoffset",void 0),x([E(ive)],ol.prototype,"source",void 0),ol=gV=x([ue("esri.symbols.PictureFillSymbol")],ol);let $f=class extends ds{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};x([E({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],$f.prototype,"angle",void 0),x([E({type:["simple-marker","picture-marker"],readOnly:!0})],$f.prototype,"type",void 0),x([E({type:Number,cast:Si,json:{write:!0}})],$f.prototype,"xoffset",void 0),x([E({type:Number,cast:Si,json:{write:!0}})],$f.prototype,"yoffset",void 0),x([E({cast:t=>t==="auto"?t:oc(Si(t)),json:{write:!0}})],$f.prototype,"size",void 0),$f=x([ue("esri.symbols.MarkerSymbol")],$f);var yV;let cl=yV=class extends $f{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,n){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e!=null&&(r.width=Si(e)),n!=null&&(r.height=Si(n)),r}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new yV({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",Ze(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};x([E({json:{write:!1}})],cl.prototype,"color",void 0),x([mn({esriPMS:"picture-marker"},{readOnly:!0})],cl.prototype,"type",void 0),x([E(rve)],cl.prototype,"url",void 0),x([E(ive)],cl.prototype,"source",void 0),x([E({type:Number,cast:Si,json:{write:!0}})],cl.prototype,"height",void 0),x([cr("height",["height","size"])],cl.prototype,"readHeight",null),x([E({type:Number,cast:Si,json:{write:!0}})],cl.prototype,"width",void 0),x([E({json:{write:!1}})],cl.prototype,"size",void 0),cl=yV=x([ue("esri.symbols.PictureMarkerSymbol")],cl);var fy;const sve=Ot.ofType({base:null,key:"type",typeMap:{icon:so,object:ro,text:bs}});let ud=fy=class extends dl{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new sve,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Z1e(this)}hasVisibleVerticalOffset(){return WW(this)}clone(){return new fy({verticalOffset:Ze(this.verticalOffset),callout:Ze(this.callout),styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new fy({symbolLayers:new Ot([so.fromSimpleMarkerSymbol(t)])})}static fromPictureMarkerSymbol(t){return new fy({symbolLayers:new Ot([so.fromPictureMarkerSymbol(t)])})}static fromCIMSymbol(t){if(t.data?.symbol?.type!=="CIMPointSymbol")return null;const n=t.data.symbol;return new fy(n?.callout?{symbolLayers:new Ot([so.fromCIMSymbol(t)]),callout:new jf({size:.5,color:new Jn([0,0,0])}),verticalOffset:new Xm({screenLength:40})}:{symbolLayers:new Ot([so.fromCIMSymbol(t)])})}static fromTextSymbol(t){return new fy({symbolLayers:new Ot([bs.fromTextSymbol(t)])})}};x([E({type:Xm,json:{write:!0}})],ud.prototype,"verticalOffset",void 0),x([E(J1e)],ud.prototype,"callout",void 0),x([E({type:sve,json:{origins:{"web-scene":{write:!0}}}})],ud.prototype,"symbolLayers",void 0),x([mn({PointSymbol3D:"point-3d"},{readOnly:!0})],ud.prototype,"type",void 0),ud=fy=x([ue("esri.symbols.PointSymbol3D")],ud);var LS;const ove=Ot.ofType({base:null,key:"type",typeMap:{extrude:Lf,fill:ec,icon:so,line:hl,object:ro,text:bs,water:Df}});let hg=LS=class extends dl{constructor(t){super(t),this.symbolLayers=new ove,this.type="polygon-3d"}initialize(){const t=e=>{e.type==="line"&&Gg(kt.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),e.type==="text"&&Gg(kt.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const e of this.symbolLayers)t(e);this.addHandles(X1(()=>this.symbolLayers,"after-add",({item:e})=>t(e),Kg))}clone(){return new LS({styleOrigin:Ze(this.styleOrigin),symbolLayers:Ze(this.symbolLayers),thumbnail:Ze(this.thumbnail)})}static fromJSON(t){const e=new LS;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.at(0).type==="fill"&&e.symbolLayers.at(1).type==="line"){const n=e.symbolLayers.at(0),r=e.symbolLayers.at(1);!r.enabled||t.symbolLayers?.[1]&&t.symbolLayers[1].enable===!1||(n.outline={size:r.size,color:r.material!=null?r.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new LS({symbolLayers:new Ot([ec.fromSimpleFillSymbol(t)])})}};x([E({type:ove,json:{write:!0}})],hg.prototype,"symbolLayers",void 0),x([mn({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],hg.prototype,"type",void 0),hg=LS=x([ue("esri.symbols.PolygonSymbol3D")],hg);var vV;const h$=new Ys({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Wf=vV=class extends Lx{constructor(...t){super(...t),this.color=new Jn([0,0,0,.25]),this.outline=new Ca,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,n){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e&&(r.outline=e),n&&(r.color=n),r}clone(){return new vV({color:Ze(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};x([E()],Wf.prototype,"color",void 0),x([E()],Wf.prototype,"outline",void 0),x([mn({esriSFS:"simple-fill"},{readOnly:!0})],Wf.prototype,"type",void 0),x([E({type:h$.apiValues,json:{read:h$.read,write:h$.write}})],Wf.prototype,"style",void 0),Wf=vV=x([ue("esri.symbols.SimpleFillSymbol")],Wf);var _V;const d$=new Ys({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let Jl=_V=class extends $f{constructor(...t){super(...t),this.color=new Jn([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Ca}normalizeCtorArgs(t,e,n,r){if(t&&typeof t!="string")return t;const i={};return t&&(i.style=t),e!=null&&(i.size=Si(e)),n&&(i.outline=n),r&&(i.color=r),i}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new _V({angle:this.angle,color:Ze(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};x([E()],Jl.prototype,"color",void 0),x([er("color")],Jl.prototype,"writeColor",null),x([mn({esriSMS:"simple-marker"},{readOnly:!0})],Jl.prototype,"type",void 0),x([E()],Jl.prototype,"size",void 0),x([E({type:d$.apiValues,json:{read:d$.read,write:d$.write}})],Jl.prototype,"style",void 0),x([E({type:String,json:{write:!0}})],Jl.prototype,"path",null),x([E({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Ca}},json:{default:null,write:!0}})],Jl.prototype,"outline",void 0),Jl=_V=x([ue("esri.symbols.SimpleMarkerSymbol")],Jl);var xV;let Xr=xV=class extends ds{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new Kc,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,n){if(t&&typeof t!="string")return t;const r={};return t&&(r.text=t),e&&(r.font=e),n&&(r.color=n),r}writeLineWidth(t,e,n,r){r&&typeof r!="string"?r.origin:e[n]=t}castLineWidth(t){return Si(t)}writeLineHeight(t,e,n,r){r&&typeof r!="string"?r.origin:e[n]=t}clone(){return new xV({angle:this.angle,backgroundColor:Ze(this.backgroundColor),borderLineColor:Ze(this.borderLineColor),borderLineSize:this.borderLineSize,color:Ze(this.color),font:this.font&&this.font.clone(),haloColor:Ze(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};x([E({type:Jn,json:{write:!0}})],Xr.prototype,"backgroundColor",void 0),x([E({type:Jn,json:{write:!0}})],Xr.prototype,"borderLineColor",void 0),x([E({type:Number,json:{write:!0},cast:Si})],Xr.prototype,"borderLineSize",void 0),x([E({type:Kc,json:{write:!0}})],Xr.prototype,"font",void 0),x([E({...K1e,json:{write:!0}})],Xr.prototype,"horizontalAlignment",void 0),x([E({type:Boolean,json:{write:!0}})],Xr.prototype,"kerning",void 0),x([E({type:Jn,json:{write:!0}})],Xr.prototype,"haloColor",void 0),x([E({type:Number,cast:Si,json:{write:!0}})],Xr.prototype,"haloSize",void 0),x([E({type:Boolean,json:{write:!0}})],Xr.prototype,"rightToLeft",void 0),x([E({type:Boolean,json:{write:!0}})],Xr.prototype,"rotated",void 0),x([E({type:String,json:{write:!0}})],Xr.prototype,"text",void 0),x([mn({esriTS:"text"},{readOnly:!0})],Xr.prototype,"type",void 0),x([E({...Y1e,json:{write:!0}})],Xr.prototype,"verticalAlignment",void 0),x([E({type:Number,cast:Si,json:{write:!0}})],Xr.prototype,"xoffset",void 0),x([E({type:Number,cast:Si,json:{write:!0}})],Xr.prototype,"yoffset",void 0),x([E({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Xr.prototype,"angle",void 0),x([E({type:Number,json:{write:!0}})],Xr.prototype,"width",void 0),x([E({type:Number})],Xr.prototype,"lineWidth",void 0),x([er("lineWidth")],Xr.prototype,"writeLineWidth",null),x([qs("lineWidth")],Xr.prototype,"castLineWidth",null),x([E(q1e)],Xr.prototype,"lineHeight",void 0),x([er("lineHeight")],Xr.prototype,"writeLineHeight",null),Xr=xV=x([ue("esri.symbols.TextSymbol")],Xr);var wV;let ul=wV=class extends ds{constructor(t){super(t),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=this.portal!=null?this.portal:st.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e?.portal,super.read(t,e)}clone(){return new wV({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol(t)}async fetchCIMSymbol(t){Qfe(kt.getLogger(this),"WebStyleSymbol.fetchCIMSymbol is deprecated in favour of WebStyleSymbol.fetchSymbol which now supports both web and cim symbology",{version:"4.33",replacement:"WebStyleSymbol.fetchSymbol",see:"https://arcg.is/0CXPTr#fetchSymbol",warnOnce:!0});const e=await this._fetchSymbol({...t,acceptedFormats:["cim"]});if(e?.type!=="cim")throw new Xe("webstylesymbol:fetchCIMSymbol","Resolved web style symbol is not of type 'cim'");return e}async _fetchSymbol(t){const e=t!=null?t.cache:null,n=e?this._fetchCacheKey:null;if(e!=null){const o=n&&e.get(n);if(o)return o.clone()}const{resolveWebStyleSymbol:r}=await _e(()=>import("./webStyleSymbolUtils-Bmt767L4.js"),__vite__mapDeps([293,294,202,203,142,87,206]));mi(t);const i=r(this,{portal:this.portal},t);i.catch(o=>{kt.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",o)});const s=await i;return e?.set(n,s.clone()),s}};x([E({json:{write:!1}})],ul.prototype,"color",void 0),x([E({type:String,json:{write:!0}})],ul.prototype,"styleName",void 0),x([E({type:st,json:{write:!1}})],ul.prototype,"portal",void 0),x([E({type:String,json:{read:NO,write:b2}})],ul.prototype,"styleUrl",void 0),x([E({type:OT,json:{read:!1}})],ul.prototype,"thumbnail",void 0),x([E({type:String,json:{write:!0}})],ul.prototype,"name",void 0),x([mn({styleSymbolReference:"web-style"},{readOnly:!0})],ul.prototype,"type",void 0),x([E()],ul.prototype,"_fetchCacheKey",null),ul=wV=x([ue("esri.symbols.WebStyleSymbol")],ul);function N4t(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function O4t(t){switch(t?.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const HW={base:ds,key:"type",typeMap:{"simple-fill":Wf,"picture-fill":ol,"picture-marker":cl,"simple-line":Ca,"simple-marker":Jl,text:Xr,"label-3d":ad,"line-3d":ug,"mesh-3d":qy,"point-3d":ud,"polygon-3d":hg,"web-style":ul,cim:ml},errorContext:"symbol"},L4t={base:ds,key:"type",typeMap:{"picture-marker":cl,"simple-marker":Jl,"point-3d":ud,cim:ml},errorContext:"symbol"},D4t={base:ds,key:"type",typeMap:{"simple-line":Ca,"line-3d":ug,cim:ml},errorContext:"symbol"},j4t={base:ds,key:"type",typeMap:{"simple-fill":Wf,"picture-fill":ol,"polygon-3d":hg,cim:ml},errorContext:"symbol"},$4t={base:ds,key:"type",typeMap:{"picture-marker":cl,"simple-marker":Jl,text:Xr,"web-style":ul,cim:ml},errorContext:"symbol"},F4t=NB({types:HW}),V4t={base:ds,key:"type",typeMap:{"simple-fill":Wf,"picture-fill":ol,"picture-marker":cl,"simple-line":Ca,"simple-marker":Jl,text:Xr,"line-3d":ug,"mesh-3d":qy,"point-3d":ud,"polygon-3d":hg,"web-style":ul,cim:ml},errorContext:"symbol"},z4t={base:ds,key:"type",typeMap:{text:Xr,"label-3d":ad},errorContext:"symbol"},G4t={base:ds,key:"type",typeMap:{"line-3d":ug,"mesh-3d":qy,"point-3d":ud,"polygon-3d":hg,"web-style":ul,cim:ml},errorContext:"symbol"},U4t={base:ds,key:"type",typeMap:{"label-3d":ad},errorContext:"symbol"},B4t=Bg(HW);var bV;function DYe(t){if(!t)return null;const e={};for(const n in t){const r=O2(t[n]);r&&(e[n]=r)}return Object.keys(e).length!==0?e:null}function jYe(t){if(t==null)return null;const e={};for(const n in t){const r=t[n];r&&(e[n]=r.toJSON())}return Object.keys(e).length!==0?e:null}var Uw;let Qo=(Uw=class extends vo(qt){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.sourceLayer=null,this._version=0,Object.defineProperty(this,"uid",{value:bM(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&zje(kt.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const n=this._get("aggregateGeometries");JSON.stringify(n)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const n=this._get("attributes");n!==e&&(this._set("attributes",e),this._notifyLayer("attributes",n,e))}set geometry(e){const n=this._get("geometry");n!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",n,e))}set popupTemplate(e){const n=this._get("popupTemplate");n!==e&&(this._set("popupTemplate",e),this._notifyLayer("popupTemplate",n,e))}set symbol(e){const n=this._get("symbol");n!==e&&(this._set("symbol",e),this._notifyLayer("symbol",n,e))}get version(){return this._version}set visible(e){const n=this._get("visible");n!==e&&(this._set("visible",e),this._notifyLayer("visible",n,e))}cloneShallow(){return new bV({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const n=KKe(this.origin);if(n)return n.popupTemplate??(e?n.defaultPopupTemplate:null)??null;const r=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const i of[r,this.sourceLayer,this.layer])if(i&&typeof i=="object"){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&i.defaultPopupTemplate!=null)return i.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,n){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=n,this._notifyLayer("attributes",r,n,e)}else this.attributes={[e]:n}}getObjectId(){const e=zne(this.origin);if(e)return Gne(this,e);const n=this.sourceLayer??this.layer;return n?Gne(this,n):null}getGlobalId(){const e=zne(this.origin);if(e?.globalIdField)return this.getAttribute(e.globalIdField);const n=this.sourceLayer??this.layer;return n&&"globalIdField"in n&&n.globalIdField?this.getAttribute(n.globalIdField):null}toJSON(){return{aggregateGeometries:jYe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:O4(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:n}=this;if(n?.type==="mesh"){const r={origin:n.origin,transform:n.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,n,r,i){if(this._version++,!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:n,newValue:r};e==="origin-transform"&&(s.action=i),e==="attributes"&&(s.attributeName=i),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([wc(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:n})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===n||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=n,this.notifyMeshTransformChanged())}),wc(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,n)=>e===n,sync:!0})])}},bV=Uw,Uw);x([E({value:null,json:{read:DYe}})],Qo.prototype,"aggregateGeometries",null),x([E({value:null})],Qo.prototype,"attributes",null),x([E({value:null,types:PW,json:{read:O2}})],Qo.prototype,"geometry",null),x([E({type:Boolean})],Qo.prototype,"isAggregate",void 0),x([E({clonable:!1})],Qo.prototype,"layer",void 0),x([E({clonable:"reference"})],Qo.prototype,"origin",void 0),x([E({type:WKe,value:null})],Qo.prototype,"popupTemplate",null),x([E({clonable:"reference"})],Qo.prototype,"sourceLayer",void 0),x([E({value:null,types:HW})],Qo.prototype,"symbol",null),x([E({clonable:!1,json:{read:!1,write:!1}})],Qo.prototype,"_version",void 0),x([E({type:Boolean,value:!0})],Qo.prototype,"visible",null),Qo=bV=x([ue("esri.Graphic")],Qo);let LT=class extends kT{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};x([jpe({Type:Qo,ensureType:qa(Qo)})],LT.prototype,"itemType",void 0),LT=x([ue("esri.support.GraphicsCollection")],LT);let Af=class extends Kt{constructor(e){super(e),this.view=null,this.baseLayerViews=new Ot,this.groundLayerViews=new Ot,this.referenceLayerViews=new Ot,this._loadingHandle=fn(()=>this.view?.map?.basemap,n=>{n&&n.load().catch(()=>{})},ya)}destroy(){this._set("view",null),this._loadingHandle=ii(this._loadingHandle),this.baseLayerViews.destroyAll(),this.groundLayerViews.destroyAll(),this.referenceLayerViews.destroyAll()}get suspended(){return this.view?.suspended??!0}get updating(){return this.view?.suspended?!1:!!this.view?.map?.basemap?.loaded&&(this.baseLayerViews.some(n=>n.updating)||this.groundLayerViews.some(n=>n.updating)||this.referenceLayerViews.some(n=>n.updating))}};x([E({constructOnly:!0})],Af.prototype,"view",void 0),x([E({readOnly:!0})],Af.prototype,"baseLayerViews",void 0),x([E({readOnly:!0})],Af.prototype,"groundLayerViews",void 0),x([E({readOnly:!0})],Af.prototype,"referenceLayerViews",void 0),x([E({readOnly:!0})],Af.prototype,"suspended",null),x([E({type:Boolean,readOnly:!0})],Af.prototype,"updating",null),Af=x([ue("esri.views.BasemapView")],Af);const $Ye=Af;let Yl=class extends Kt{constructor(e){super(e),this.factor=1.5,this.offset=Hs(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};x([E({type:Number})],Yl.prototype,"factor",void 0),x([E({nonNullable:!0})],Yl.prototype,"offset",void 0),x([E()],Yl.prototype,"position",void 0),x([E({type:Number,range:{min:0}})],Yl.prototype,"size",void 0),x([E()],Yl.prototype,"maskUrl",void 0),x([E()],Yl.prototype,"maskEnabled",void 0),x([E()],Yl.prototype,"overlayUrl",void 0),x([E()],Yl.prototype,"overlayEnabled",void 0),x([E({readOnly:!0})],Yl.prototype,"version",null),x([E({type:Boolean})],Yl.prototype,"visible",void 0),Yl=x([ue("esri.views.Magnifier")],Yl);const ave=Yl;let ww=class{constructor(e){this._observable=new bI,this._map=new Map(e)}get size(){return nn(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(e){const n=this._map.delete(e);return n&&this._observable.notify(),n}entries(){return nn(this._observable),this._map.entries()}forEach(e,n){nn(this._observable),this._map.forEach((r,i)=>e.call(n,r,i,this),n)}get(e){return nn(this._observable),this._map.get(e)}has(e){return nn(this._observable),this._map.has(e)}keys(){return nn(this._observable),this._map.keys()}set(e,n){return this._map.set(e,n),this._observable.notify(),this}values(){return nn(this._observable),this._map.values()}[Symbol.iterator](){return nn(this._observable),this._map[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};var EV;let DS=EV=class extends qt{constructor(t){super(t),this.name=null,this.code=null}clone(){return new EV({name:this.name,code:this.code})}};x([E({type:String,json:{write:{isRequired:!0}}})],DS.prototype,"name",void 0),x([E({type:[String,Number],json:{write:{isRequired:!0}}})],DS.prototype,"code",void 0),DS=EV=x([ue("esri.layers.support.CodedValue")],DS);const FYe=new Ys({inherited:"inherited",codedValue:"coded-value",range:"range"});let dg=class extends qt{constructor(e){super(e),this.name=null,this.type=null}};x([E({type:String,json:{write:!0}})],dg.prototype,"name",void 0),x([mn(FYe),E({json:{write:{isRequired:!0}}})],dg.prototype,"type",void 0),dg=x([ue("esri.layers.support.Domain")],dg);var SV,Bw;let Dx=(Bw=class extends dg{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let n=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(n=i.name),!!n))}return n}clone(){return new SV({codedValues:Ze(this.codedValues),name:this.name})}},SV=Bw,Bw);x([E({type:[DS],json:{write:{isRequired:!0}}})],Dx.prototype,"codedValues",void 0),x([mn({codedValue:"coded-value"})],Dx.prototype,"type",void 0),Dx=SV=x([ue("esri.layers.support.CodedValueDomain")],Dx);var TV,Ww;let DT=(Ww=class extends dg{constructor(e){super(e),this.type="inherited"}clone(){return new TV}},TV=Ww,Ww);x([mn({inherited:"inherited"})],DT.prototype,"type",void 0),DT=TV=x([ue("esri.layers.support.InheritedDomain")],DT);var kV,Hw;let Ry=(Hw=class extends dg{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new kV({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}},kV=Hw,Hw);x([E({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,n){e[n]=[this.minValue||0,t]},isRequired:!0}}})],Ry.prototype,"maxValue",void 0),x([E({json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range?.[0]},write:{target:"range",writer(t,e,n){e[n]=[t,this.maxValue||0]},isRequired:!0}}})],Ry.prototype,"minValue",void 0),x([mn({range:"range"})],Ry.prototype,"type",void 0),Ry=kV=x([ue("esri.layers.support.RangeDomain")],Ry);const VYe={key:"type",base:dg,typeMap:{range:Ry,"coded-value":Dx,inherited:DT}};function zYe(t){if(!t?.type)return null;switch(t.type){case"range":return Ry.fromJSON(t);case"codedValue":return Dx.fromJSON(t);case"inherited":return DT.fromJSON(t)}return null}const GYe=new Ys({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var AV;const UYe=new Ys({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",currency:"currency",dateAndTime:"date-and-time",description:"description",emailAddress:"email-address",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",phoneNumber:"phone-number",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});var qw;let Yo=(qw=class extends qt{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:n}){let r=null;try{r=n?JSON.parse(n):null}catch{}return r?.value??null}readValueType(e,{description:n}){let r=null;try{r=n?JSON.parse(n):null}catch{}return r?UYe.fromJSON(r.fieldValueType):null}clone(){return new AV({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}},AV=qw,qw);x([E({type:String,json:{write:!0}})],Yo.prototype,"alias",void 0),x([E({type:[String,Number],json:{write:{allowNull:!0}}})],Yo.prototype,"defaultValue",void 0),x([E()],Yo.prototype,"description",void 0),x([cr("description")],Yo.prototype,"readDescription",null),x([E({types:VYe,json:{read:{reader:zYe},write:!0}})],Yo.prototype,"domain",void 0),x([E({type:Boolean,json:{write:!0}})],Yo.prototype,"editable",void 0),x([E({type:jr,json:{write:{overridePolicy:t=>({enabled:Number.isFinite(t)})}}})],Yo.prototype,"length",void 0),x([E({type:String,json:{write:!0}})],Yo.prototype,"name",void 0),x([E({type:Boolean,json:{write:!0}})],Yo.prototype,"nullable",void 0),x([mn(GYe)],Yo.prototype,"type",void 0),x([E()],Yo.prototype,"valueType",void 0),x([cr("valueType",["description"])],Yo.prototype,"readValueType",null),x([E({type:Boolean,json:{read:!1}})],Yo.prototype,"visible",void 0),Yo=AV=x([ue("esri.layers.support.Field")],Yo);var IV;let ax=IV=class extends qt{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new IV({mapLayerId:t,gdbVersion:e})}};x([mn({mapLayer:"map-layer"}),E({json:{write:{isRequired:!0}}})],ax.prototype,"type",void 0),x([E({type:jr,json:{write:{isRequired:!0}}})],ax.prototype,"mapLayerId",void 0),x([E({type:String,json:{write:!0}})],ax.prototype,"gdbVersion",void 0),ax=IV=x([ue("esri.layers.support.source.MapLayerSource")],ax);var PV;let If=PV=class extends qt{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:n,spatialReference:r,geometryType:i}=this,s={workspaceId:t,query:e,oidFields:n,spatialReference:r?.clone()??void 0,geometryType:i};return new PV(s)}};x([mn({queryTable:"query-table"}),E({json:{write:{isRequired:!0}}})],If.prototype,"type",void 0),x([E({type:String,json:{write:!0}})],If.prototype,"workspaceId",void 0),x([E({type:String,json:{write:!0}})],If.prototype,"query",void 0),x([E({type:String,json:{write:!0}})],If.prototype,"oidFields",void 0),x([E({type:Bt,json:{write:!0}})],If.prototype,"spatialReference",void 0),x([mn(EWe)],If.prototype,"geometryType",void 0),If=PV=x([ue("esri.layers.support.source.QueryTableDataSource")],If);var CV;let lx=CV=class extends qt{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new CV({workspaceId:t,dataSourceName:e})}};x([mn({raster:"raster"}),E({json:{write:{isRequired:!0}}})],lx.prototype,"type",void 0),x([E({type:String,json:{write:!0}})],lx.prototype,"dataSourceName",void 0),x([E({type:String,json:{write:!0}})],lx.prototype,"workspaceId",void 0),lx=CV=x([ue("esri.layers.support.source.RasterDataSource")],lx);var RV;let py=RV=class extends qt{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:n}=this;return new RV({workspaceId:t,gdbVersion:e,dataSourceName:n})}};x([mn({table:"table"}),E({json:{write:{isRequired:!0}}})],py.prototype,"type",void 0),x([E({type:String,json:{write:!0}})],py.prototype,"workspaceId",void 0),x([E({type:String,json:{write:!0}})],py.prototype,"gdbVersion",void 0),x([E({type:String,json:{write:!0}})],py.prototype,"dataSourceName",void 0),py=RV=x([ue("esri.layers.support.source.TableDataSource")],py);var MV,NV;const BYe=Ll()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Xl=MV=class extends qt{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,n){return qne()(t,e,n)}castLeftTableSource(t){return Bg(OV(),t)}readRightTableSource(t,e,n){return qne()(t,e,n)}castRightTableSource(t){return Bg(OV(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:n,rightTableSource:r,joinType:i}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:n?.clone()??void 0,rightTableSource:r?.clone()??void 0,joinType:i};return new MV(s)}};x([mn({joinTable:"join-table"}),E({json:{write:{isRequired:!0}}})],Xl.prototype,"type",void 0),x([E({type:String,json:{write:!0}})],Xl.prototype,"leftTableKey",void 0),x([E({type:String,json:{write:!0}})],Xl.prototype,"rightTableKey",void 0),x([E({json:{write:!0}})],Xl.prototype,"leftTableSource",void 0),x([cr("leftTableSource")],Xl.prototype,"readLeftTableSource",null),x([qs("leftTableSource")],Xl.prototype,"castLeftTableSource",null),x([E({json:{write:!0}})],Xl.prototype,"rightTableSource",void 0),x([cr("rightTableSource")],Xl.prototype,"readRightTableSource",null),x([qs("rightTableSource")],Xl.prototype,"castRightTableSource",null),x([mn(BYe)],Xl.prototype,"joinType",void 0),Xl=MV=x([ue("esri.layers.support.source.JoinTableDataSource")],Xl);let f$=null;function qne(){return f$||(f$=NB({types:OV()})),f$}let p$=null;function OV(){return p$||(p$={key:"type",base:null,typeMap:{"data-layer":Ff,"map-layer":ax}}),p$}const WYe={key:"type",base:null,typeMap:{"join-table":Xl,"query-table":If,raster:lx,table:py}};var Kw;let Ff=(Kw=class extends qt{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:n}=this;return new NV({fields:e,dataSource:n})}},NV=Kw,Kw);x([mn({dataLayer:"data-layer"}),E({json:{write:{isRequired:!0}}})],Ff.prototype,"type",void 0),x([E({type:[Yo],json:{write:!0}})],Ff.prototype,"fields",void 0),x([E({types:WYe,json:{write:!0}})],Ff.prototype,"dataSource",void 0),Ff=NV=x([ue("esri.layers.support.source.DataLayerSource")],Ff),Ff.from=qa(Ff);let my=class extends vo(qt){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};x([E({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],my.prototype,"onFields",void 0),x([E({type:String,json:{write:!0}})],my.prototype,"operator",void 0),x([E({type:String,json:{write:!0}})],my.prototype,"searchTerm",void 0),x([E({type:String,json:{write:!0}})],my.prototype,"searchType",void 0),my=x([ue("esri.rest.support.FullTextSearch")],my);const HYe=my;var LV;const Kne=new Ys({upperLeft:"upper-left",lowerLeft:"lower-left"});let Um=LV=class extends qt{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new LV(Ze({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};x([E({type:Vn,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Um.prototype,"extent",void 0),x([E({type:["view","edit"],json:{write:!0}})],Um.prototype,"mode",void 0),x([E({type:String,json:{read:Kne.read,write:Kne.write}})],Um.prototype,"originPosition",void 0),x([E({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Um.prototype,"tolerance",void 0),Um=LV=x([ue("esri.rest.support.QuantizationParameters")],Um);const qYe=t=>{const e=t;let n=class extends e{};return n=x([ue("esri.rest.support.QueryMixin")],n),n},KYe=new Ys({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var DV;const Yne=new Ys({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Hu=DV=class extends qt{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=Ze(t))}clone(){return new DV({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Ze(this.statisticParameters)})}};x([E({type:Number,json:{write:!0}})],Hu.prototype,"maxPointCount",void 0),x([E({type:Number,json:{write:!0}})],Hu.prototype,"maxRecordCount",void 0),x([E({type:Number,json:{write:!0}})],Hu.prototype,"maxVertexCount",void 0),x([E({type:String,json:{write:!0}})],Hu.prototype,"onStatisticField",void 0),x([E({type:String,json:{write:!0}})],Hu.prototype,"outStatisticFieldName",void 0),x([E({type:String,json:{read:{source:"statisticType",reader:Yne.read},write:{target:"statisticType",writer:Yne.write}}})],Hu.prototype,"statisticType",void 0),x([E({type:Object})],Hu.prototype,"statisticParameters",void 0),x([er("statisticParameters")],Hu.prototype,"writeStatisticParameters",null),Hu=DV=x([ue("esri.rest.support.StatisticDefinition")],Hu);var h3;const YYe=new Ys({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});var v1;let tn=(v1=class extends qYe(qt){static from(e){return jO(h3,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.returnTrueCurves=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,n){n.historicMoment=e&&e.getTime()}writeParameterValues(e,n){if(e){const r={};for(const i in e){const s=e[i];Array.isArray(s)?r[i]=s.map(o=>o instanceof Date?o.getTime():o):s instanceof Date?r[i]=s.getTime():r[i]=s}n.parameterValues=r}}writeStart(e,n){n.resultOffset=this.start,n.resultRecordCount=this.num||10,n.where="1=1"}writeWhere(e,n){n.where=e||"1=1"}clone(){return new h3(Ze({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,returnTrueCurves:this.returnTrueCurves,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}},h3=v1,v1.MAX_MAX_RECORD_COUNT_FACTOR=5,v1);x([E({json:{write:!0}})],tn.prototype,"aggregateIds",void 0),x([E({type:Boolean,json:{write:!0}})],tn.prototype,"cacheHint",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],tn.prototype,"compactGeometryEnabled",void 0),x([E({json:{write:!0}})],tn.prototype,"datumTransformation",void 0),x([qs("datumTransformation")],tn.prototype,"castDatumTransformation",null),x([E({type:Boolean,json:{default:!1,write:!0}})],tn.prototype,"defaultSpatialReferenceEnabled",void 0),x([E({type:Number,json:{write:!0}})],tn.prototype,"distance",void 0),x([E({type:Ff,json:{write:!0}})],tn.prototype,"dynamicDataSource",void 0),x([E({type:String,json:{write:!0}})],tn.prototype,"formatOf3DObjects",void 0),x([E({type:[HYe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],tn.prototype,"fullText",void 0),x([E({type:String,json:{write:!0}})],tn.prototype,"gdbVersion",void 0),x([E({types:PW,json:{read:O2,write:!0}})],tn.prototype,"geometry",void 0),x([E({type:Number,json:{write:!0}})],tn.prototype,"geometryPrecision",void 0),x([E({type:[String],json:{write:!0}})],tn.prototype,"groupByFieldsForStatistics",void 0),x([E({type:String,json:{write:!0}})],tn.prototype,"having",void 0),x([E({type:Date})],tn.prototype,"historicMoment",void 0),x([er("historicMoment")],tn.prototype,"writeHistoricMoment",null),x([E({type:Number,json:{write:!0}})],tn.prototype,"maxAllowableOffset",void 0),x([E({type:Number,cast:t=>t<1?1:t>tn.MAX_MAX_RECORD_COUNT_FACTOR?tn.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],tn.prototype,"maxRecordCountFactor",void 0),x([E({type:["xyFootprint"],json:{write:!0}})],tn.prototype,"multipatchOption",void 0),x([E({type:Number,json:{read:{source:"resultRecordCount"}}})],tn.prototype,"num",void 0),x([E({json:{write:!0}})],tn.prototype,"objectIds",void 0),x([E({type:[String],json:{write:!0}})],tn.prototype,"orderByFields",void 0),x([E({type:[String],json:{write:!0}})],tn.prototype,"outFields",void 0),x([E({type:Bt,json:{name:"outSR",write:!0}})],tn.prototype,"outSpatialReference",void 0),x([E({type:[Hu],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],tn.prototype,"outStatistics",void 0),x([E({json:{write:!0}})],tn.prototype,"parameterValues",void 0),x([er("parameterValues")],tn.prototype,"writeParameterValues",null),x([E({type:Jt,json:{write:!0}})],tn.prototype,"pixelSize",void 0),x([E({type:Um,json:{write:!0}})],tn.prototype,"quantizationParameters",void 0),x([E({type:[Object],json:{write:!0}})],tn.prototype,"rangeValues",void 0),x([E({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],tn.prototype,"relationParameter",void 0),x([E({type:String,json:{write:!0}})],tn.prototype,"resultType",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],tn.prototype,"returnCentroid",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],tn.prototype,"returnDistinctValues",void 0),x([E({type:Boolean,json:{default:!0,write:!0}})],tn.prototype,"returnExceededLimitFeatures",void 0),x([E({type:Boolean,json:{write:!0}})],tn.prototype,"returnGeometry",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],tn.prototype,"returnQueryGeometry",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],tn.prototype,"returnM",void 0),x([E({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],tn.prototype,"returnZ",void 0),x([E({type:Boolean,json:{write:!0}})],tn.prototype,"returnTrueCurves",void 0),x([E({type:Bt,json:{write:!0}})],tn.prototype,"sourceSpatialReference",void 0),x([mn(KYe,{ignoreUnknown:!1,name:"spatialRel"})],tn.prototype,"spatialRelationship",void 0),x([E({type:Number,json:{read:{source:"resultOffset"}}})],tn.prototype,"start",void 0),x([er("start"),er("num")],tn.prototype,"writeStart",null),x([E({type:String,json:{write:!0}})],tn.prototype,"sqlFormat",void 0),x([E({type:String,json:{write:!0}})],tn.prototype,"text",void 0),x([E({type:Pa,json:{write:!0}})],tn.prototype,"timeExtent",void 0),x([E({type:Boolean,json:{default:!1,write:!0}})],tn.prototype,"timeReferenceUnknownClient",void 0),x([mn(YYe,{ignoreUnknown:!1}),E({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null}}}}})],tn.prototype,"units",void 0),x([E({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],tn.prototype,"where",void 0),x([er("where")],tn.prototype,"writeWhere",null),tn=h3=x([ue("esri.rest.support.Query")],tn);function xm(t){return!(t==null||typeof t!="object"||!("createQuery"in t)||!t.createQuery)}let Uc=class extends wI{constructor(e){super(e),this._selectionMap=new ww,this._sources=new Ot,this._trashCan=[],this._layerEditHandles=new Ot,this._vizTaskId=0,this.view=null,this.showHighlight=!0,this.highlightName="default"}initialize(){this.addHandles([fn(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),fn(()=>this.view,e=>{e?.when().then(()=>this.syncSources())},ya),X1(()=>this.sources,"change",e=>{const n=this._selectionMap,r=[];for(const i of e.removed){const s=n.get(i);s&&(n.delete(i),s.highlightHandle?.remove(),r.push({layer:i,selection:[],added:[],removed:[...s.selection]}))}this._refreshListeners(),r.length&&this._onSelectionChange(r)},{onListenerAdd:()=>this._refreshListeners()})])}destroy(){this.clear(),this._layerEditHandles.drain(ii)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{const[n,r]=e;return{layer:n,selection:[...r.selection]}})}get count(){let e=0;for(const n of this._selectionMap.values())e+=n.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){kd(e,this._sources)}syncSources(){const e=new Set,n=this.view?.map;if(!n)return;const r=i=>{UVe(i)?(i.layers?.forEach(r),i.tables?.forEach(r)):GVe(i)?(i.sublayers?.forEach(r),i.subtables?.forEach(r)):Nte(i)?i.sublayers?.forEach(r):xm(i)&&e.add(i)};n.allLayers.forEach(r),n.allTables.forEach(r),this.sources=[...e]}async getSelectedFeatures(e,n={},r="layerView"){const{view:i,selections:s}=this;if(!i&&r==="layerView")return kt.getLogger(this).warn("Cannot query layer views without a view."),[];const o=(e?.length?s.filter(a=>e.includes(a.layer)):s).map(async a=>{const{layer:l,selection:c}=a;if(!c.length)return;const u=J_(l)?l.parent:l;if(u!=null){if(i&&r==="layerView"&&!Xne(u)&&Zne(u)){const h=await i.whenLayerView(u).catch(()=>null);if(h)return Jne(h,c,n)}return Jne(u,c,n)}}).filter(_2);return(await Promise.all(o)).filter(_2)}updateSelection(e){const n=new Map;for(const[s,o]of this._selectionMap)n.set(s,[...o.selection]);let r=!1;const i=e.current.concat(e.added);for(const s of i){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(xm(o)||J_(o))&&a!==null){const l=gI(n,o,()=>[]);l.includes(a)||(l.push(a),r=!0)}}for(const s of e.removed){const o=s.sourceLayer,a=s.getObjectId();if(this.sources.includes(o)&&(xm(o)||J_(o))&&a!==null){const l=n.get(o),c=l?.indexOf(a);c!==void 0&&c>=0&&(l?.splice(c,1),r=!0)}}if(r){const{_selectionMap:s,_trashCan:o}=this,a=[];for(const[l,c]of n){const u=s.get(l);u!==void 0&&o.push(u),s.set(l,{selection:c}),a.push({layer:l,selection:c,...GQ(u!==void 0?u.selection:[],c)})}this._onSelectionChange(a)}}setSelection(e,n){this._setSelection(e,n)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,n){const r=this._selectionMap.get(e),i=r!==void 0?[...r.selection]:[];for(const s of n)i.includes(s)||i.push(s);this._setSelection(e,i)}removeFromSelection(e,n){const r=this._selectionMap.get(e);if(!r)return;const i=[];for(const s of r.selection)n.includes(s)||i.push(s);this._setSelection(e,i)}toggleInSelection(e,n){const r=this._selectionMap.get(e);if(!r||r.selection.length===0)return void this._setSelection(e,n);const i=new Set(r.selection),s=new Set(n),o=T$e(i,s);this._setSelection(e,Array.from(o))}clear(){const e=this._selectionMap.values();this._trashCan.push(...e);const n=[];for(const[r,i]of this._selectionMap.entries())n.push({layer:r,added:[],removed:[...i.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(n)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();if(this.view==null)return;const{sources:e,view:n,_selectionMap:r,showHighlight:i}=this,s=this._vizTaskId;for(const o of e){const a=r.get(o),l=J_(o)?o.parent:o;if(l!=null&&Zne(l)){if(Xne(l))continue;n.whenLayerView(l).then(c=>{a?.highlightHandle?.remove(),a!=null&&i&&s===this._vizTaskId&&"highlight"in c&&typeof c.highlight=="function"&&a.selection.length>0&&(a.highlightHandle=c.highlight(a.selection,this.highlightName))}).catch(()=>{a?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(ii);const e=new Set(this.sources.map(n=>J_(n)?n.parent:n));for(const n of e)xm(n)&&"on"in n&&n.on&&this._layerEditHandles.push(n.on("edits",r=>this._onLayerEdit(r,n)))}_onLayerEdit(e,n){if(Nte(n))this._onParentLayerEdit(e,n);else if(e.deletedFeatures.length&&this._selectionMap.has(n)){const r=[];e.deletedFeatures.forEach(({error:i,objectId:s})=>{s!=null&&i==null&&r.push(s)}),this.removeFromSelection(n,r)}}_onParentLayerEdit(e,n){const{deletedFeatures:r,edits:i,updatedFeatures:s}=e;if(i?.updateFeatures?.forEach(o=>{const a=o.getObjectId()??o.attributes[n.objectIdField];if(a==null||s.find(u=>u.objectId===a)?.error)return;const l=n.findSublayerForFeature(o);if(!xm(l))return;const c=n.sublayers.find(u=>!(!xm(u)||!this.getSelection(u)?.includes(a)));xm(c)&&c!==l&&(this.removeFromSelection(c,[a]),this.appendToSelection(l,[a]))}),r.length){const o=[];r.forEach(({error:a,objectId:l})=>{l!=null&&a==null&&o.push(l)}),n.sublayers.forEach(a=>{xm(a)&&this._selectionMap.has(a)&&this.removeFromSelection(a,o)})}}_setSelection(e,n){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);const r=this._selectionMap.get(e);if(r===void 0||!ZYe(r,{selection:n})){r!==void 0&&this._trashCan.push(r),this._selectionMap.set(e,{selection:[...n]});const i={layer:e,selection:[...n],...GQ(r!==void 0?r.selection:[],n)};this._onSelectionChange([i])}}};x([E()],Uc.prototype,"_selectionMap",void 0),x([E()],Uc.prototype,"_sources",void 0),x([E({readOnly:!0,nonNullable:!0})],Uc.prototype,"selections",null),x([E({readOnly:!0,nonNullable:!0})],Uc.prototype,"count",null),x([E()],Uc.prototype,"view",void 0),x([E({readOnly:!0,nonNullable:!0})],Uc.prototype,"hasSelection",null),x([E()],Uc.prototype,"showHighlight",void 0),x([E()],Uc.prototype,"sources",null),x([E()],Uc.prototype,"highlightName",void 0),Uc=x([ue("esri.views.SelectionManager")],Uc);const Xne=t=>J_(t)?t.parent?.isTable===!0:t.isTable,XYe=t=>t.layer!==void 0,Zne=t=>t?.when!==void 0,ZYe=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){const n=[...t.selection],r=[...e.selection];if(n.length!==r.length)return!1;n.sort(),r.sort();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1}return!0},Jne=async(t,e,n={})=>{let r;if(XYe(t)){const i=t;r=i===void 0?null:await i.queryFeatures(new tn({...n,objectIds:e})).then(s=>({data:s,layer:t.layer}))}else{const i=t;r=i===void 0?null:await i.queryFeatures(new tn({...n,objectIds:e})).then(s=>({data:s,layer:i}))}return r},JYe=Uc;let jS=class extends vo(Kt){constructor(e){super(e),this.accentColor=new Jn([255,127,0]),this.textColor=new Jn([255,255,255])}};x([E({type:Jn,nonNullable:!0})],jS.prototype,"accentColor",void 0),x([E({type:Jn,nonNullable:!0})],jS.prototype,"textColor",void 0),jS=x([ue("esri.views.Theme")],jS);const jV=jS,lve=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],cve={};function uve(t){return!!cve[t]}function QYe(t){for(const e of t)if(!uve(e))return!1;return!0}lve.forEach(t=>{cve[t]=!0});let hve=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:n,priority:r},i)=>this.inputManager?.installHandlers(i,[n],r))}disconnect(){this.inputManager&&this._handlers.forEach((e,n)=>this.inputManager?.uninstallHandlers(n)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,n,r,i){const s=Array.isArray(e)?e:e.split(",");if(!QYe(s))return s.some(uve)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(n)?a=n:(o=n,a=[]),typeof r=="function"?o=r:i=r,i=i??ap.DEFAULT;const l=this._createUniqueGroupName(),c=new eXe(this.view,s,a,o);this._handlers.set(l,{handler:c,priority:i});for(const u of s){const h=this._handlerCounts.get(u)||0;this._handlerCounts.set(u,h+1)}return this.inputManager&&this.inputManager.installHandlers(l,[c],i),Zn(()=>this._removeHandler(l,s))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,n){if(this._handlers.has(e)){this._handlers.delete(e);for(const r of n){const i=this._handlerCounts.get(r);i===void 0||(i===1?this._handlerCounts.delete(r):this._handlerCounts.set(r,i-1))}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},eXe=class extends Zs{constructor(e,n,r,i){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of n)switch(s){case"click":this.registerIncoming("click",r,o=>i(rXe(e,o)));break;case"double-click":this.registerIncoming("double-click",r,o=>i(iXe(e,o)));break;case"immediate-click":this.registerIncoming("immediate-click",r,o=>i(sXe(e,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",r,o=>i(oXe(e,o)));break;case"hold":this.registerIncoming("hold",r,o=>i(aXe(e,o)));break;case"drag":this.registerIncoming("drag",r,o=>{const a=this._wrapDrag(o);a&&i(a)});break;case"key-down":this.registerIncoming("key-down",r,o=>i(lXe(o)));break;case"key-up":this.registerIncoming("key-up",r,o=>i(cXe(o)));break;case"pointer-down":this.registerIncoming("pointer-down",r,o=>i(WE(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",r,o=>i(WE(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",r,o=>i(WE(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",r,o=>i(uXe(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",r,o=>i(hXe(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",r,o=>i(WE(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",r,o=>i(WE(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",r,o=>{i(dXe(o))});break;case"focus":this.registerIncoming("focus",r,o=>{i(tXe(o))});break;case"blur":this.registerIncoming("blur",r,o=>{i(nXe(o))})}}_wrapDrag(e){const n=e.data,{x:r,y:i}=n.center,{action:s,pointerType:o,button:a}=n;if(s==="start"&&(this._latestDragStart=n),!this._latestDragStart)return;const l=n.pointer.native,c=n.buttons,{cancelable:u,timestamp:h}=e,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:r,y:i,origin:f,pointerType:o,button:a,buttons:c,radius:n.radius,angle:Kge(n.angle),native:l,timestamp:h,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:g=>e.defer(g),preventDefault:()=>e.preventDefault()}}};function tXe(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function nXe(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),defer:e=>t.defer(e),preventDefault:()=>t.preventDefault()}}function rXe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:u}=e;return{type:"click",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:u,screenPoint:Hs(s,o),mapPoint:FI(t,s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function iXe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:c,timestamp:u}=e;return{type:"double-click",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:u,mapPoint:FI(t,s,o),eventId:l,cancelable:c,stopPropagation:()=>e.stopPropagation(),defer:h=>e.defer(h),preventDefault:()=>e.preventDefault()}}function sXe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:u,timestamp:h}=e;return{type:"immediate-click",pointerId:c,pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:h,mapPoint:FI(t,s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function oXe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a,eventId:l}=e.data,c=a.pointerId,{cancelable:u,timestamp:h}=e;return{type:"immediate-double-click",pointerId:c,pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:h,mapPoint:FI(t,s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),defer:f=>e.defer(f),preventDefault:()=>e.preventDefault()}}function aXe(t,e){const{pointerType:n,button:r,buttons:i,x:s,y:o,native:a}=e.data,{cancelable:l,timestamp:c}=e;return{type:"hold",pointerType:n,button:r,buttons:i,x:s,y:o,native:a,timestamp:c,mapPoint:FI(t,s,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),defer:u=>e.defer(u),preventDefault:()=>e.preventDefault()}}function FI(t,e,n){return t.toMap(Hs(e,n),{exclude:[]})}function lXe(t){const{key:e,repeat:n,native:r}=t.data,{cancelable:i,timestamp:s}=t;return{type:"key-down",key:e,repeat:n,native:r,timestamp:s,cancelable:i,stopPropagation:()=>t.stopPropagation(),defer:o=>t.defer(o),preventDefault:()=>t.preventDefault()}}function cXe(t){const{key:e,native:n}=t.data,{cancelable:r,timestamp:i}=t;return{type:"key-up",key:e,native:n,timestamp:i,cancelable:r,stopPropagation:()=>t.stopPropagation(),defer:s=>t.defer(s),preventDefault:()=>t.preventDefault()}}function WE(t,e){const{x:n,y:r,button:i,buttons:s,native:o,eventId:a}=t.data,l=o.pointerId,c=o.pointerType,{cancelable:u,timestamp:h}=t;return{type:e,x:n,y:r,pointerId:l,pointerType:c,button:i,buttons:s,native:o,timestamp:h,eventId:a,cancelable:u,stopPropagation:()=>t.stopPropagation(),defer:f=>t.defer(f),preventDefault:()=>t.preventDefault()}}function uXe(t){const{x:e,y:n,buttons:r,native:i,eventId:s}=t.data.currentEvent,{button:o}=t.data.startEvent,a=t.data.startEvent.native.pointerId,l=t.data.startEvent.native.pointerType,c=t.data.action,u={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:h,timestamp:f}=t;return{type:"pointer-drag",x:e,y:n,pointerId:a,pointerType:l,button:o,buttons:r,action:c,origin:u,native:i,timestamp:f,eventId:s,cancelable:h,stopPropagation:()=>t.stopPropagation(),defer:g=>t.defer(g),preventDefault:()=>t.preventDefault()}}function hXe(t){const{cancelable:e,data:n,timestamp:r}=t,{x:i,y:s,deltaY:o,native:a}=n;return{type:"mouse-wheel",x:i,y:s,deltaY:o,native:a,timestamp:r,cancelable:e,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}function dXe(t){const{action:e,state:n,device:r}=t.data,{cancelable:i,timestamp:s}=t,{buttons:o,axes:a}=n;return{type:"gamepad",device:r,timestamp:s,action:e,buttons:o,axes:a,cancelable:i,stopPropagation:()=>t.stopPropagation(),defer:l=>t.defer(l),preventDefault:()=>t.preventDefault()}}const fXe="z",pXe="r",dve={cancel:"Escape",complete:"Enter"},tNt={...dve,redo:pXe,undo:fXe,center:"Alt",constraint:"Shift",delete:["Backspace","Delete"],vertexAdd:"f",pan:" "},nNt={toggle:"Control"},rNt={enterInputMode:"Tab",commit:"Enter",discard:"Escape",next:"Tab"},iNt={moveUp:{key:"ArrowUp",modifier:"Shift",repeats:!0},moveDown:{key:"ArrowDown",modifier:"Shift",repeats:!0},moveLeft:{key:"ArrowLeft",modifier:"Shift",repeats:!0},moveRight:{key:"ArrowRight",modifier:"Shift",repeats:!0},scaleUp:{key:"+",modifier:"Shift"},scaleDown:{key:"-",modifier:"Shift"},factorModifier:{key:e1e,continuePropagation:!0},toggleOpacity:"t",preserveAspectRatio:{key:"Shift",continuePropagation:!0},rotateIncrements:{key:"Shift",continuePropagation:!0}};let sNt=class{constructor(){this._bindings=new Map}add(e,n){return this.addToggle(e,r=>{r.type==="key-down"&&n(r)})}addToggle(e,n){const r=mXe.fromDefinition(e,n),i=gI(this._bindings,r.key,()=>[]);return i.push(r),Zn(()=>ife(i,r))}register(e,n=ap.WIDGET){return yv([e.on("key-down",r=>this.dispatch(e.inputManager,r),n),e.on("key-up",r=>this.dispatch(e.inputManager,r),n)])}dispatch(e,n){const r=n.key,i=this._bindings.get(r);if(i)for(const s of i)s.process(e,n)}},mXe=class $V{constructor(e,n,r,i,s){this.key=e,this.modifiers=n,this.repeats=r,this.continuePropagation=i,this.callback=s}process(e,n){if(!(n.key!==this.key||"repeat"in n&&n.repeat&&!this.repeats)){for(const r of this.modifiers)if(!e.isModifierKeyDown(r))return;this.continuePropagation||n.stopPropagation(),this.callback(n)}}static fromDefinition(e,n){if(typeof e=="string")return new $V(e,[],!1,!1,n);const{key:r,modifier:i,repeats:s,continuePropagation:o}=e;return new $V(r,i?Array.isArray(i)?i:[i]:[],!!s,!!o,n)}};function gXe(t){return[t.on("before-add",e=>{const n=e.item;if(n==null||t.includes(n))return kt.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();n.onAdd()}),t.on("after-remove",e=>{const n=e.item;n.active&&(n.view.activeTool=null),n.destroy()})]}function FV(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(0)&&t.getEditableFlag(1)}function yXe(t){return t.type==="key-down"&&t.key===dve.cancel}function ed(t){return Hs(t.x,t.y)}function fve(t,e){const n=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return n?Hs(e.clientX-n.left,e.clientY-n.top):Hs(0,0)}function pve(t,e){return e instanceof Event?fve(t,e):ed(e)}function mve(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let d3=class extends Kt{constructor(){super(...arguments),this._pointerLocations=new Map,this._hoveredManipulators=new ww,this._grabbedManipulators=new ww,this._draggedManipulators=new Map,this._stopDrag=!1,this._externallyDragging=!1,this._revertToNullActiveTool=!1}get cursor(){return this._cursorFromMap(this._grabbedManipulators,"grabbing")??this._cursorFromMap(this._hoveredManipulators,"pointer")}get hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,n){const r=()=>e.stopPropagation();switch(e.type){case"pointer-move":Qne(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0?this._stopDrag=!0:e.action==="start"?this._externallyDragging=!0:e.action==="end"&&(this._externallyDragging=!1),this._stopDrag&&(r(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!ere(e))break;const i=ed(e),s=R_(i,e.pointerType,n.tools);if(s==null)break;const o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,n),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:i,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&n.activeTool==null&&(this._revertToNullActiveTool=!0,n.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:i}),r());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,n);break;case"pointer-drag":{if(!ere(e))break;const i=this._grabbedManipulators.get(e.pointerId),s=i?.manipulator,o=i?.tool;if(s==null||o==null)break;const a=ed(e);a.x=_u(a.x,0,n.view.width),a.y=_u(a.y,0,n.view.height);const l=i.start,c=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,c?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,c&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,n)}r();break}case"immediate-click":{const i=ed(e),s=R_(i,e.pointerType,n.tools);if(!vXe(e)){for(const c of n.tools)if((s==null||s.tool!==c||c.automaticManipulatorSelection)&&c.manipulators){let u=!1;c.manipulators.forEach(({manipulator:h})=>{h.selected&&(h.selected=!1,u=!0)}),u&&c.onManipulatorSelectionChanged&&c.onManipulatorSelectionChanged()}}if(s==null)break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}),m$(o,r);break}case"click":{const i=ed(e),s=R_(i,e.pointerType,n.tools),o=s?.manipulator;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:a}),r();break}case"double-click":{const i=ed(e),s=R_(i,e.pointerType,n.tools),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),m$(o,r);break}case"immediate-double-click":{const i=ed(e),s=R_(i,e.pointerType,n.tools),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:i,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:r}),e.pointerType==="mouse"&&m$(o,r);break}}this._onFocusChange(n.tools)}_releaseManipulatorBeforeDragging(e,n,r){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:n.pointerType,screenPoint:ed(n)}),this._grabbedManipulators.forEach(({manipulator:i},s)=>{i===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(r.setActiveTool)}_handlePointerEnd(e,n){const r=this._grabbedManipulators.get(e.pointerId)?.manipulator;r!=null&&r.grabbing&&(r.grabbing=!1,r.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:ed(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(n.setActiveTool))}_onFocusChange(e){this._updateFocusedManipulatorTools(e)}_updateFocusedManipulatorTools(e){const n=new Set,r=new Set;this._grabbedManipulators.forEach(({tool:i})=>n.add(i)),this._hoveredManipulators.forEach(({tool:i})=>r.add(i));for(const i of e){i.hasGrabbedManipulators=n.has(i),i.hasHoveredManipulators=r.has(i);const s=this._grabbedManipulators.values(),o=Gje(s,({tool:a})=>a===i);i.firstGrabbedManipulator=o!=null?o.manipulator:null}}clearPointers(e,{tools:n,setActiveTool:r},i=!0,s){const o=(a,l)=>a===e&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:c},u)=>{o(a,l)&&(this._grabbedManipulators.delete(u),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:c}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._draggedManipulators.delete(c),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),i&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},c)=>{o(a,l)&&(this._hoveredManipulators.delete(c),l.hovering=!1)}),this._afterManipulatorRelease(r),this._onFocusChange(n)}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((n,r)=>{this._updateHoveredStateForPointerAtScreenPosition(Hs(n.x,n.y),r,n.pointerType,e)})}handleHoverEvent(e,n){const r=e.type;r!=="pointer-up"&&r!=="immediate-click"&&r!=="pointer-move"||!Qne(e.pointerType)||(r!=="pointer-up"&&this._externallyDragging?this._clearHoveredManipulatorStates(e.pointerId):this._updateHoveredStateForPointerAtScreenPosition(ed(e),e.pointerId,e.pointerType,n))}_updateHoveredStateForPointerAtScreenPosition(e,n,r,i){let s=R_(e,r,i);const o=this._hoveredManipulators.get(n)?.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(n,s)):this._hoveredManipulators.delete(n),this._onFocusChange(i))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}_clearHoveredManipulatorStates(e){this._hoveredManipulators.forEach(({manipulator:n},r)=>{e===r&&(this._hoveredManipulators.delete(e),n.hovering=!1)})}_cursorFromMap(e,n){if(!e?.size)return null;for(const{manipulator:r}of e.values())if(r?.interactive){if(r.grabbing&&r.grabCursor)return r.grabCursor;if(r.cursor)return r.cursor}return n}};function R_(t,e,n){for(const r of n){if(r.manipulators==null||!FV(r))continue;const i=r.manipulators.intersect(t,e);if(i!=null)return{tool:r,manipulator:i}}return null}function Qne(t){return t==="mouse"}function ere(t){return t.pointerType!=="mouse"||t.button===0}function vXe(t){return!!t.native.shiftKey}function m$(t,e){t?.consumesClicks&&e()}x([E()],d3.prototype,"cursor",null),d3=x([ue("esri.views.interactive.ToolViewManagerManipulatorState")],d3);const tre="attached",g$="tools",_Xe=1e3;let td=class extends Kt{constructor(e){super(e),this._updatingHandles=new h1,this._clock=ub,this._manipulatorState=new d3,this.tools=new Ot,this._interacting=!1,this._interactingTimeout=_Xe,this._interactingTimeoutHandle=null}initialize(){this.addHandles([this.view.on(lve,e=>{this._handleInputEvent(e)},ap.TOOL),...gXe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy(),this._manipulatorState.destroy()}get _manipulatorStateEventArgs(){return{tools:this.tools,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void kt.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const n=this.activeTool;this._set("activeTool",e),n?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(const r of this.tools){this._updateToolEditableFlag(r);const i=FV(r);this.activeTool!=null&&i||this._manipulatorState.clearPointers(r,this._manipulatorStateEventArgs,!i)}}get cursor(){const e=this._manipulatorState.cursor;if(e!=null)return e;for(const n of this.tools)if(n.visible&&n.cursor!=null)return n.cursor;return null}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=ii(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([fn(()=>{const{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider.on("elevation-change",e=>this._forEachManipulator(n=>n.onElevationChange(e)))],tre):this.addHandles(fn(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(tre),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){for(const n of this.tools)n.manipulators&&n.manipulators.forEach(({manipulator:r})=>e(r,n))}_handleInputEvent(e){let n=!1;const r={...e,stopPropagation:()=>{n=!0,e.stopPropagation()}};if(this.activeTool!=null)this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r);else for(const i of this.tools)!n&&i.visible&&i.handleInputEvent(r);!n&&yXe(e)&&this.activeTool&&(e.stopPropagation(),e.preventDefault(),this.activeTool.cancel(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,this._manipulatorStateEventArgs),n||this.activeTool==null||this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this.tools),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(g$);for(const e of this.tools){if(e instanceof Kt){const n=fn(()=>[e.cursor,e.visible,e.editable],()=>{FV(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs)});this.addHandles(n,g$)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",n=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,n.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)})],g$)}this._manipulatorState.updateHoveredStateFromKnownPointers(this.tools)}_updateToolEditableFlag(e){e.setEditableFlag?.(1,this.activeTool==null||e===this.activeTool)}_removeIncompleteTools(e){this.tools.filter(n=>(e==null||n!==e)&&!n.created&&n.removeIncompleteOnCancel).forEach(n=>{this.tools.remove(n)})}get test(){}};x([E({constructOnly:!0,nonNullable:!0})],td.prototype,"view",void 0),x([E({value:null})],td.prototype,"activeTool",null),x([E({readOnly:!0,type:Ot})],td.prototype,"tools",void 0),x([E()],td.prototype,"cursor",null),x([E({readOnly:!0})],td.prototype,"updating",null),x([E()],td.prototype,"_interacting",void 0),x([E({readOnly:!0})],td.prototype,"interacting",null),td=x([ue("esri.views.ToolViewManager")],td);const xXe=new Jn("cyan"),wXe=1,bXe=.25,EXe=new Jn("black"),SXe=.4,TXe=.2,cNt=.25,gve="default",kXe="temporary",AXe=new Jn("yellow");var VV;let Zl=VV=class extends Kt{constructor(t){super(t),this.name=gve,this.color=xXe.clone(),this.haloColor=null,this.haloOpacity=wXe,this.fillOpacity=bXe,this.shadowColor=EXe.clone(),this.shadowOpacity=SXe,this.shadowDifference=TXe,this.haloWidth=2.1,this.haloBlur=.8/this.haloWidth}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.haloWidth===t.haloWidth&&this.haloBlur===t.haloBlur&&this.shadowColor.equals(t.shadowColor)&&this.shadowOpacity===t.shadowOpacity&&this.shadowDifference===t.shadowDifference}clone(){return new VV({...this,color:this.color.clone(),haloColor:this.haloColor?.clone(),shadowColor:this.shadowColor?.clone()})}assignFrom(t){this.color=t.color.clone(),this.haloColor=t.haloColor?.clone(),this.haloOpacity=t.haloOpacity,this.fillOpacity=t.fillOpacity,this.shadowColor=t.shadowColor.clone(),this.shadowDifference=t.shadowDifference,this.shadowOpacity=t.shadowOpacity,this.haloBlur=t.haloBlur,this.haloWidth=t.haloWidth}};x([E({type:String,constructOnly:!0,nonNullable:!0})],Zl.prototype,"name",void 0),x([E({type:Jn,nonNullable:!0})],Zl.prototype,"color",void 0),x([E({type:Jn})],Zl.prototype,"haloColor",void 0),x([E({nonNullable:!0})],Zl.prototype,"haloOpacity",void 0),x([E({nonNullable:!0})],Zl.prototype,"fillOpacity",void 0),x([E({type:Jn,nonNullable:!0})],Zl.prototype,"shadowColor",void 0),x([E({nonNullable:!0})],Zl.prototype,"shadowOpacity",void 0),x([E({nonNullable:!0})],Zl.prototype,"shadowDifference",void 0),x([E({nonNullable:!0})],Zl.prototype,"haloWidth",void 0),x([E({nonNullable:!0})],Zl.prototype,"haloBlur",void 0),Zl=VV=x([ue("esri.views.support.HighlightOptions")],Zl);const Pg=Zl;function IXe(){return new(Ot.ofType(Pg))([new Pg({name:gve}),new Pg({name:kXe,color:AXe})])}let cx=class extends Kt{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":PXe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return CXe[this.deviceType]}};x([E({nonNullable:!0,readOnly:!0})],cx.prototype,"nativeIndex",void 0),x([E({type:String,readOnly:!0})],cx.prototype,"deviceType",null),x([E({type:Number,readOnly:!0})],cx.prototype,"axisThreshold",null),cx=x([ue("esri.views.input.gamepad.GamepadInputDevice")],cx);const qW=cx,PXe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),CXe={standard:.15,spacemouse:.025,unknown:0};let $S=class extends Kt{constructor(e){super(e),this.devices=new Ot,this.enabledFocusMode="document"}};x([E({type:Ot.ofType(qW),readOnly:!0})],$S.prototype,"devices",void 0),x([E({type:["document","view","none"]})],$S.prototype,"enabledFocusMode",void 0),$S=x([ue("esri.views.input.gamepad.GamepadSettings")],$S);const RXe=$S;let f3=class extends Kt{constructor(){super(...arguments),this.gamepad=new RXe}};x([E({readOnly:!0})],f3.prototype,"gamepad",void 0),f3=x([ue("esri.views.input.Input")],f3);const MXe=f3,y$=()=>E({type:["pan","rotate","zoom","none"],nonNullable:!0});let gy=class extends Kt{constructor(e){super(e),this.dragPrimary="pan",this.dragSecondary="rotate",this.dragTertiary="zoom",this.mouseWheel="zoom"}};x([y$()],gy.prototype,"dragPrimary",void 0),x([y$()],gy.prototype,"dragSecondary",void 0),x([y$()],gy.prototype,"dragTertiary",void 0),x([E({type:["zoom","none"],nonNullable:!0})],gy.prototype,"mouseWheel",void 0),gy=x([ue("esri.views.navigation.NavigationActionMap")],gy);const KW=gy;let Mm=class extends Kt{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};x([E({type:Boolean,nonNullable:!0})],Mm.prototype,"enabled",void 0),x([E({type:qW})],Mm.prototype,"device",void 0),x([E({type:["pan","zoom"],nonNullable:!0})],Mm.prototype,"mode",void 0),x([E({type:["forward-down","forward-up"],nonNullable:!0})],Mm.prototype,"tiltDirection",void 0),x([E({type:Number,nonNullable:!0})],Mm.prototype,"velocityFactor",void 0),Mm=x([ue("esri.views.navigation.gamepad.GamepadSettings")],Mm);const yve=Mm;let Nm=class extends Kt{constructor(e){super(e),this.actionMap=new KW,this.browserTouchPanEnabled=!0,this.gamepad=new yve,this.momentumEnabled=!0}get mouseWheelZoomEnabled(){return this.actionMap.mouseWheel==="zoom"}set mouseWheelZoomEnabled(e){o9(kt.getLogger(this),"mouseWheelZoomEnabled",{replacement:"actionMap.mouseWheel",version:"4.32",warnOnce:!0}),this.actionMap.mouseWheel=e?"zoom":"none"}};x([E({type:KW,nonNullable:!0})],Nm.prototype,"actionMap",void 0),x([E({type:Boolean})],Nm.prototype,"browserTouchPanEnabled",void 0),x([E({type:yve,nonNullable:!0})],Nm.prototype,"gamepad",void 0),x([E({type:Boolean})],Nm.prototype,"momentumEnabled",void 0),x([E({type:Boolean})],Nm.prototype,"mouseWheelZoomEnabled",null),Nm=x([ue("esri.views.navigation.Navigation")],Nm);const dL=Nm;function gNt(t,e,n){const r=vve(t),i=e,s=NXe(r,i,n);if(r){const o=ll.deriveUnitFromSR(r,t.spatialReference).heightUnit;if(!n&&o!==r.heightUnit){const a=new Xe("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new Xe("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r,error:a})}}if(!OXe(t)||s===4)return new Xe("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:r});switch(s){case 1:{const o=r?.heightUnit||"unknown",a=i?.heightUnit||"unknown",l=new Xe("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new Xe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:l})}case 2:{const o=r?.heightModel||"unknown",a=i?.heightModel||"unknown",l=new Xe("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new Xe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:l})}case 3:{const o=r?.vertCRS||"unknown",a=i?.vertCRS||"unknown",l=new Xe("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new Xe("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:r,sceneHeightModelInfo:i,error:l})}}return null}function NXe(t,e,n){if(!nre(t)||!nre(e))return 4;if(t==null||e==null)return 0;if(!n&&t.heightUnit!==e.heightUnit)return 1;if(t.heightModel!==e.heightModel)return 2;switch(t.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return t.vertCRS===e.vertCRS?0:3;default:return 4}}function nre(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function OXe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!wve(t)}function vve(t){if(t.type==="integrated-mesh-3dtiles"||t.type==="gaussian-splat")return null;const e=t.url?vI(t.url):void 0;return!(t.spatialReference?.vcsWkid==null&&e!=null&&e.serverType==="ImageServer")&&_ve(t)&&t.heightModelInfo?t.heightModelInfo:wve(t)?ll.deriveUnitFromSR(DXe,t.spatialReference):null}function _ve(t){return"heightModelInfo"in t}function xve(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function wve(t){return xve(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):bve(t)}function LXe(t){return t.layers!=null||bve(t)||xve(t)||_ve(t)}function bve(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"gaussian-splat":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"parquet":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"viewshed":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const DXe=new ll({heightModel:"gravity-related-height"});let zV,v$=null;async function jXe(t){v$||(v$=_e(()=>import("./geometryServiceUtils-B3-3Tkzk.js"),__vite__mapDeps([295,296])).then(e=>zV=e)),await v$,mi(t)}async function Eve(t,e,n,r){if(!t)return null;const i=t.spatialReference;return Cp()||Eh(i,e)?wv(t,e):zV?zV.projectGeometry(t,e,n,r):(await Promise.race([jXe(r),Yg(r)]),Eve(t,e,n,r))}async function yNt(t,e){try{return t?.spatialReference?await tye(t,e):null}catch{return null}}let Yr=class extends Kt{constructor(e){super(e),this.required={extent:!1,heightModelInfo:!1,tileInfo:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=G1(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const e=this.map?.(),n=[];return this.priorityCollection!=null&&n.push(this.priorityCollection),n.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),n}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let e;if(this._collectLayers(this.mapCollections,r=>{const i=this._getSupportedSpatialReferences(r);if(i.length>0){const s=this._narrowDownSpatialReferenceCandidates(e,i);s!=null&&(e=s)}return e?.length===1})&&e?.length!==1)return{updating:!0};const n=this._pickSpatialReferenceCandidate(e);return{spatialReference:n?.spatialReference??null,viewingMode:n?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};const e=this.map?.(),n=this.spatialReference;if(!n)return{updating:this._spatialReferenceTask.updating};let r;const i=this._collectLayers([{parent:e?.basemap,layers:e?.basemap?.baseLayers},{parent:e?.basemap,layers:e?.basemap?.groundLayers},{layers:e?.layers}],s=>!(!("tileInfo"in s)||!s.tileInfo?.spatialReference.equals(n))&&(r=s,!0),s=>"tileInfo"in s);return r?{tileInfo:r.tileInfo,updating:!1}:{updating:i}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let e={};const n=this._collectLayers(this.mapCollections,r=>{const i=vve(r);return!!i&&(e={heightModelInfo:i,vcsWkid:r.spatialReference?.vcsWkid,latestVcsWkid:r.spatialReference?.latestVcsWkid},!0)},r=>LXe(r));return{...e,updating:n}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=[],n=this._collectLayers(this.mapCollections,r=>{const i="fullExtents"in r&&r.fullExtents||(r.fullExtent!=null?[r.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:i[0],o=i.find(a=>a.spatialReference.equals(this.spatialReference))??s;if(o)return e.push({extent:o,layer:r}),!0;if(this._getSupportedSpatialReferences(r).length>0)for(const a of i)e.push({extent:a,layer:r});return!1});return{candidates:e,updating:n}}get _extentTask(){const{candidates:e,updating:n}=this._extentCandidatesTask;if(n)return{updating:n};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const r=this._pickExtentCandidate(e),i=this.spatialReference;return r.extent.equals(this._projectExtentTask.input)&&i.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=G1(this._projectExtentTask.task)),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:i.clone(),task:VO(async s=>{try{const o=await Eve(r.extent,i,"portalItem"in r.layer?r.layer.portalItem:void 0,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(ma(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,n){if(e==null)return n;const r=new Array;for(const i of e)for(const s of n){if(!i.spatialReference.equals(s.spatialReference))continue;const o=FXe(i.viewingMode,s.viewingMode);if(o!==!1){r.push({spatialReference:i.spatialReference,viewingMode:o});break}}return r.length>0?r:null}_pickSpatialReferenceCandidate(e){const n=this.defaultSpatialReference;return e==null||e.length<1?n?{spatialReference:n,viewingMode:null}:null:(n!=null&&e.length>1&&e.some(({spatialReference:r})=>r.equals(n))&&(e=e.filter(({spatialReference:r})=>r.equals(n))),e.length>1&&e.some(({viewingMode:r})=>r!==2)&&(e=e.filter(({viewingMode:r})=>r!==2)),e[0])}_getSupportedSpatialReferences(e){const n="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(n.length===0)return[];const r=[];for(const i of n){const s=this.getSpatialReferenceSupport(i,e);if(s!=null){const o=s.constraints??[{spatialReference:i,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||r.push({spatialReference:a,viewingMode:l})}}return r}_pickExtentCandidate(e){const n=this.spatialReference;return e.find(({extent:r})=>n.equals(r.spatialReference))||e[0]}_collectLayers(e,n,r=()=>!0){switch(this._loadMaybe(this.map?.())){case"loading":return!0;case"failed":return!1}const i=new $Xe(r,n);for(const s of e)if(this._collectCollection(s,i),i.done||i.preloading===this.sourcePreloadCount)break;return i.updating}_collectCollection(e,n){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return n.updating=!0,void++n.preloading;case"failed":return}for(const r of e.layers)if((r.type!=="graphics"||!r.internal)&&n.layerFilter(r)){switch(this._loadMaybe(r)){case"failed":continue;case"loading":n.updating=!0,++n.preloading;break;case"loaded":if(n.updating||(n.done=n.pushLayer(r)),n.done||n.preloading===this.sourcePreloadCount)break;"layers"in r&&this._collectCollection({layers:r.layers},n)}if(n.done||n.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(n=>{wa(n)}),"loading"):e.loadStatus:"loaded"}};x([E()],Yr.prototype,"required",void 0),x([E({constructOnly:!0})],Yr.prototype,"map",void 0),x([E({constructOnly:!0})],Yr.prototype,"getSpatialReferenceSupport",void 0),x([E()],Yr.prototype,"defaultSpatialReference",void 0),x([E()],Yr.prototype,"userSpatialReference",void 0),x([E()],Yr.prototype,"sourcePreloadCount",void 0),x([E()],Yr.prototype,"priorityCollection",void 0),x([E()],Yr.prototype,"requiresExtentInSpatialReference",void 0),x([E()],Yr.prototype,"suspended",void 0),x([E({readOnly:!0})],Yr.prototype,"ready",null),x([E({readOnly:!0})],Yr.prototype,"heightModelInfoReady",null),x([E({readOnly:!0})],Yr.prototype,"spatialReference",null),x([E({readOnly:!0})],Yr.prototype,"extent",null),x([E({readOnly:!0})],Yr.prototype,"heightModelInfo",null),x([E({readOnly:!0})],Yr.prototype,"vcsWkid",null),x([E({readOnly:!0})],Yr.prototype,"latestVcsWkid",null),x([E({readOnly:!0})],Yr.prototype,"viewingMode",null),x([E({readOnly:!0})],Yr.prototype,"tileInfo",null),x([E({readOnly:!0})],Yr.prototype,"mapCollections",null),x([E({readOnly:!0})],Yr.prototype,"_spatialReferenceTask",null),x([E({readOnly:!0})],Yr.prototype,"_tileInfoTask",null),x([E({readOnly:!0})],Yr.prototype,"_heightModelInfoTask",null),x([E({readOnly:!0})],Yr.prototype,"_extentCandidatesTask",null),x([E()],Yr.prototype,"_extentTask",null),x([E()],Yr.prototype,"_projectExtentTask",void 0),Yr=x([ue("esri.views.support.DefaultsFromMap")],Yr);let $Xe=class{constructor(e,n){this.layerFilter=e,this.pushLayer=n,this.preloading=-1,this.updating=!1,this.done=!1}};function FXe(t,e){return t!=null?e!=null?t===e&&t:t:e}function VXe(t){return"tryRecycleWith"in t}let zXe=class{constructor(e,n,r){this.layer=e,this.view=n,this.layerViewImporter=r,this._controller=new AbortController,this._started=!1,this.done=!1,this._deferred=xc(),this.promise=this._deferred.promise,vu(this._controller.signal,()=>{this._recycleController?.abort();const i=new Xe("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred?.reject(i)})}tryRecycle(e){if(!this.done||!this.layerView||!VXe(this.layerView))return null;this._recycleController?.abort(),this._recycleController=new AbortController;const n=this.layer.type,r=this._recycleController.signal;for(let i=0;i<e.length;i++){const s=e[i];if(s.type!==n)continue;const o=this.layerView.tryRecycleWith(s,{signal:r});if(o){e.splice(i,1),this.layer=s;const a=this.layerView,l=a.view;return this.promise=o.then(()=>(mi(r),s.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),s.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(e){const{layer:n,view:r}=this;n.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:n,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null,this.promise=null,this._deferred=null}async start(){const{view:e}=this;if(this._started||!e.map)return;this._started=!0;const{_controller:{signal:n},layer:r}=this;this._map=e.map;try{let i,s;if(await r.load({signal:n}),r.prefetchResources&&await r.prefetchResources({signal:n}),GXe(r))i=await r.createLayerView(e,{signal:n});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new Xe("layer:view-not-supported","No layerview implementation was found");const l=await this.layerViewImporter.importLayerView(r);mi(n),i="default"in l?new l.default({layer:r,view:e}):new l({layer:r,view:e})}const o=()=>{s=ii(s),i.destroyed||i.destroy(),this.done=!0};s=vu(n,o),mi(n);try{await i.when()}catch(l){throw o(),l}if(!this._map?.allLayers?.includes(r))return o(),void this._deferred?.reject(new Xe("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=i,r.emit("layerview-create",{view:e,layerView:i}),e.emit("layerview-create",{layer:r,layerView:i}),this.done=!0,this._deferred?.resolve(i)}catch(i){r.emit("layerview-create-error",{view:e,error:i}),e.emit("layerview-create-error",{layer:r,error:i}),this.done=!0,this._deferred?.reject(new Xe("layerview:create-error","layerview creation failed",{layer:r,error:i}))}}};function GXe(t){return t.createLayerView!==xi.prototype.createLayerView}function UXe(t){return t!=null&&typeof t=="object"&&"layerViews"in t}let rl=class extends Kt{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new h1,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const n=this.view.map?.allLayers;if(n)for(const r of n)this.layerViewFilter?.(r)!==!1&&this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=xc(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(gb(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const{map:n}=this.view;if(!n)return void this.clear();if(this._map!==n&&(this.clear(),this._map=n),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const r=new Set,i=[],s=this.view.ready,o=u=>{if(u!=null){for(const h of u)if(h){if(this.layerViewFilter?.(h)===!1)continue;r.add(h);const f=this._layerLayerViewInfoMap.get(h);f&&s?f.start():f||this._recyclingInfoMap.has(h)||i.push(h),"layers"in h&&h.layers&&o(h.layers)}}};for(const u of this._rootCollectionNames)o(vd(this,u));const a=new Array,l=u=>{const h=u.tryRecycle(i);h?(this._recyclingInfoMap.set(u.layer,u),this.notifyChange("updating"),h.then(()=>{this._recyclingInfoMap.delete(u.layer),this._layerLayerViewInfoMap.set(u.layer,u),this._reschedule(),this.notifyChange("updating")}).catch(f=>{wa(f)||(this._recyclingInfoMap.delete(u.layer),u.destroy(),this._reschedule(),this.notifyChange("updating"))})):a.push(u)};for(const u of this._layerLayerViewInfoMap.values())r.has(u.layer)||(this._layerLayerViewInfoMap.delete(u.layer),l(u));for(const u of this._recyclingInfoMap.values())r.has(u.layer)||(this._recyclingInfoMap.delete(u.layer),l(u));for(const u of i)this._createLayerView(u);this._refreshCollections(),a.forEach(u=>u.destroy());const c=[n?.ground?.layers,n?.basemap?.baseLayers,n?.basemap?.groundLayers,n?.basemap?.referenceLayers,n?.layers].filter(u=>!!u);r.forEach(u=>"layers"in u&&c.push(u.layers)),this.addHandles(c.map(u=>this._watchUpdatingTracking.addOnCollectionChange(()=>u,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null},this._layersToLayerViews=new Map(e.layerviewMapping)}initialize(){this.addHandles([X1(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),fn(()=>{const e=this.view,n=e?.map;return[n?.basemap,n?.ground,n?.layers,e?.ready]},()=>this._reschedule(),ra)]),this._preloadLayerViewModules(),this._reschedule()}clearHandles(){this._watchUpdatingTracking.removeAll()}destroy(){this.clear(),YC(this._recyclingInfoMap),YC(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Cr()),this._workPromise=null)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||J6e(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(const n of this._layerLayerViewInfoMap.values())n.done||++e;return e}clear(){this.destroyed||(this._clearCollections(),YC(this._layerLayerViewInfoMap),YC(this._recyclingInfoMap))}async whenLayerView(e){await this._reschedule();const n=this._layerLayerViewInfoMap.get(e)?.promise;if(!n){const r=this._recyclingInfoMap.get(e)?.promise;if(!r)throw new Xe("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return r}return n}isCreatingLayerViewsForLayer(e,n){this.commitProperty("updatingRemaining");const r=this._layerLayerViewInfoMap.get(e);if(!r?.done)return!0;const i=r.layerView;return!(!i||!n||i.parent===n)||!!(r.done&&i&&"layers"in e&&e.layers?.length)&&e.layers.some(s=>this.isCreatingLayerViewsForLayer(s,i))}_refreshCollections(){for(const[e,n]of this._layersToLayerViews)this._populateLayerViewsOwners(vd(this,e),vd(this,n),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_clearCollections(){for(const e of this._layersToLayerViews.values())vd(this,e)?.removeAll()}_populateLayerViewsOwners(e,n,r){if(!e||!n)return void n?.removeAll();let i=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!o?.layerView)continue;const{layerView:a}=o;a.layer=s,a.parent=r,n.at(i)!==a&&n.splice(i,0,a),"layers"in s&&UXe(a)&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),++i}i<n.length&&n.splice(i)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const n=new zXe(e,this.view,this.layerViewImporter);n.promise?.then(()=>this._refreshCollections(),r=>{r&&(wa(r)||r.name==="cancelled:layerview-create")||kt.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this.destroyed||this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,n),this.view.ready&&n.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};x([E()],rl.prototype,"_workPromise",void 0),x([E({readOnly:!0})],rl.prototype,"_watchUpdatingTracking",void 0),x([E({readOnly:!0})],rl.prototype,"_layersToLayerViews",void 0),x([E({constructOnly:!0})],rl.prototype,"layerviewMapping",void 0),x([E({readOnly:!0})],rl.prototype,"_rootCollectionNames",null),x([E({constructOnly:!0})],rl.prototype,"layerViewFilter",void 0),x([E()],rl.prototype,"layerViewImporter",void 0),x([E()],rl.prototype,"supportsGround",void 0),x([E({readOnly:!0})],rl.prototype,"updating",null),x([E({readOnly:!0})],rl.prototype,"updatingRemaining",null),x([E({constructOnly:!0})],rl.prototype,"view",void 0),rl=x([ue("esri.views.support.LayerViewManager")],rl);const BXe=rl;let ux=class extends Kt{constructor(e){super(e),this.featureTitleFields=!1,this.utilityNetworkFields=!1,this.globalIdField=!1}};x([E()],ux.prototype,"featureTitleFields",void 0),x([E()],ux.prototype,"utilityNetworkFields",void 0),x([E()],ux.prototype,"globalIdField",void 0),ux=x([ue("esri.views.support.RequiredFieldsOptions")],ux);const WXe=ux;var hx,Og;let Lt=(Og=class extends FO(DB){constructor(e){super(e),this._userSpatialReference=null,this.handles=new pb,this.updatingHandles=new h1,this.allLayerViews=new th({getCollections:()=>this.layerviewCollections,getChildrenFunction:qXe}),this.analyses=new D2,this.basemapView=null,this.dependencies={popup:void 0},this.displayFilterEnabled=!0,this.fatalError=null,this.graphics=new LT,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Ot,this.magnifier=new ave,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this._readyStateWaitingTask=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this._lowPriorityCursorHandles=new Ot,this._highPriorityCursorHandles=new Ot,this.input=new MXe,this.navigation=new dL,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new hve(this),this.persistableViewModels=new Ot,this.requiredFieldsOptions=new WXe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this._userTimeExtent=null,this._lockedTimeExtent=null,this.theme=null,this.handles.add(fn(()=>this.preconditionsReady,n=>{const r=this.ready;if(n?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,this._lockedTimeExtent=this.timeExtent,hx.views.add(this)):(this._lockedSpatialReference=null,hx.views.remove(this)),this.notifyChange("spatialReference"),!n&&r)this.toolViewManager?.detach(),this.analysisViewManager?.detach(),this.layerViewManager?.clear(),this._teardown();else if(n&&!r){try{this._startup()}catch(i){return void queueMicrotask(()=>{this.fatalError=new Xe("view:startup-error","View._startup failed",i)})}this.analysisViewManager?.attach(),this.toolViewManager.attach()}},Kg))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this._validateWithErrorDisplay()]).then(()=>(this._isValid=!0,aW(()=>this.ready)))),this.basemapView=new $Ye({view:this}),this.layerViewManager=new BXe({view:this,layerViewFilter:e=>this.layerViewFilter?.(e)??!0,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},layerviewMapping:this._layerToLayerviewMapping}),this.toolViewManager=new td({view:this}),this.selectionManager=new JYe({view:this}),this.addHandles([wc(()=>this.readyState==="map-content-error"&&!this.spatialReference,()=>{kt.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),fn(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},ra),fn(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Kg),fn(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},ra)])}get _layerToLayerviewMapping(){return hx._layerToLayerview}destroy(){this.destroyed||(hx.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Di(this.graphics),this.analyses=Di(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.analysisViewManager=Di(this.analysisViewManager),this.toolViewManager=Di(this.toolViewManager),this.layerViewManager=Di(this.layerViewManager),this.selectionManager=Di(this.selectionManager),this.basemapView=Di(this.basemapView),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this.handles.destroy(),this.map=Di(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return kt.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get layerviewCollections(){return[this.basemapView?.baseLayerViews,this.basemapView?.groundLayerViews,this.layerViews,this.basemapView?.referenceLayerViews]}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Yr({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,n)=>this.getSpatialReferenceSupport(e,n),...this.defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get highlights(){return this._get("highlights")??IXe()}set highlights(e){this._set("highlights",kd(e,this._get("highlights"),Ot.ofType(Pg)))}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!this.destroying&&!this.destroyed&&!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||v9(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(kt.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),v9(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get readyState(){if(this.destroyed)return this._get("readyState");if(!this.map)return"missing-map";if("container"in this&&!this.container)return"missing-container";if(this.fatalError)return"rendering-error";if((this.defaultsFromMap?.ready??!1)&&!this.spatialReference){const e=!("loaded"in this.map)||this.map.loaded,n=this.map.ground.loaded,r=this.map.basemap?.loaded??!0;return e&&r&&n&&!this.map?.allLayers.length?"empty-map":(this._readyStateWaitingTask||(this._readyStateWaitingTask=VO(i=>Vfe(ye("view-readyState-waiting-delay"),null,i)),this.addHandles(this._readyStateWaitingTask),this.addHandles(this._readyStateWaitingTask,"ready-state-task")),this._readyStateWaitingTask?.finished?"map-content-error":"loading")}return this._readyStateWaitingTask=G1(this._readyStateWaitingTask),this.removeHandles("ready-state-task"),this.ready?"ready":"loading"}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const n=e.clone();return n.vcsWkid=this.defaultsFromMap.vcsWkid,n.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,n}return e}set spatialReference(e){const n=!go(e,this._get("spatialReference"));this._set("_userSpatialReference",e),n&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeExtent(){return this._userTimeExtent??this._lockedTimeExtent??this.getDefaultTimeExtent()??null}set timeExtent(e){this._userTimeExtent=e}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Fd}set timeZone(e){this._userTimeZone=e,SVe(e)||kt.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._highPriorityCursorHandles.at(-1)?.cursor??this._lowPriorityCursorHandles.at(-1)?.cursor??"default"}acquireCursor(e,n="low"){const r=n==="high"?this._highPriorityCursorHandles:this._lowPriorityCursorHandles,i={cursor:e},s=Zn(()=>r.remove(i));return r.add(i),this.addHandles(s),s}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new jV}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}getDefaultTimeExtent(){return null}getSurface(){return null}importLayerView(e){throw new Xe("view:importLayerView-missing","importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,n){return this.isResolved()&&!this.ready&&kt.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,n)}forceReadyCycle(){this.ready&&(wc(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}on(e,n){return super.on(e,n)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}async _validateWithErrorDisplay(){try{await this.validate()}catch(e){const n=document.createElement("div");n.setAttribute("style","display: flex; flex-direction: column; gap: 8px; padding: 20px; height: 100%; justify-content: center; color: black; background: white; font-family: sans-serif;");const r=document.createElement("div");r.innerHTML="Unable to display map. WebGL2 support is required.",r.setAttribute("style","font-size: 24px; font-weight: bold;");const i=document.createElement("div");i.innerHTML="Ensure that your browser and hardware meet the minimum requirements.",i.setAttribute("style","font-size: 18px;");const s=document.createElement("a");s.innerHTML="https://esriurl.com/webgl-faq",s.target="_blank",s.setAttribute("style","font-size: 18px;"),s.href="https://esriurl.com/webgl-faq",n.appendChild(r),n.appendChild(i),n.appendChild(s);const o=this.getSurface();throw o&&o.appendChild(n),e}}},hx=Og,Og._layerToLayerview=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.basemap.groundLayers","view.basemapView.groundLayerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"],["view.map.layers","view.layerViews"]],Og.views=new Ot,Og);x([E()],Lt.prototype,"_userSpatialReference",void 0),x([E()],Lt.prototype,"activeTool",null),x([E({readOnly:!0})],Lt.prototype,"allLayerViews",void 0),x([E({readOnly:!0})],Lt.prototype,"layerviewCollections",null),x([E(h7(D2,"analyses"))],Lt.prototype,"analyses",void 0),x([E()],Lt.prototype,"animation",null),x([E()],Lt.prototype,"basemapView",void 0),x([E()],Lt.prototype,"center",null),x([E()],Lt.prototype,"defaultsFromMapSettings",null),x([E()],Lt.prototype,"defaultsFromMap",null),x([E()],Lt.prototype,"dependencies",void 0),x([E()],Lt.prototype,"displayFilterEnabled",void 0),x([E({type:Vn})],Lt.prototype,"extent",null),x([E()],Lt.prototype,"fatalError",void 0),x([E(h7(LT,"graphics"))],Lt.prototype,"graphics",void 0),x([E({readOnly:!0,type:ll})],Lt.prototype,"heightModelInfo",null),x([E({type:Ot.ofType(Pg)})],Lt.prototype,"highlights",null),x([E({readOnly:!0})],Lt.prototype,"interacting",null),x([E({constructOnly:!0})],Lt.prototype,"layerViewFilter",void 0),x([E({readOnly:!0})],Lt.prototype,"navigating",null),x([E({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],Lt.prototype,"preconditionsReady",null),x([E({readOnly:!0})],Lt.prototype,"typeSpecificPreconditionsReady",void 0),x([E({type:Ot,readOnly:!0})],Lt.prototype,"layerViews",void 0),x([E()],Lt.prototype,"resolution",null),x([E({type:ave})],Lt.prototype,"magnifier",void 0),x([E({value:null,type:vye})],Lt.prototype,"map",null),x([E()],Lt.prototype,"padding",void 0),x([E({readOnly:!0})],Lt.prototype,"ready",void 0),x([E()],Lt.prototype,"_readyStateWaitingTask",void 0),x([E({readOnly:!0})],Lt.prototype,"readyState",null),x([E({type:Bt})],Lt.prototype,"spatialReference",null),x([E()],Lt.prototype,"stationary",null),x([E({type:Pa})],Lt.prototype,"timeExtent",null),x([E({type:String,nonNullable:!0})],Lt.prototype,"timeZone",null),x([E()],Lt.prototype,"tools",null),x([E()],Lt.prototype,"toolViewManager",void 0),x([E({readOnly:!0})],Lt.prototype,"type",void 0),x([E({type:Number})],Lt.prototype,"scale",void 0),x([E({readOnly:!0})],Lt.prototype,"updating",void 0),x([E({readOnly:!0})],Lt.prototype,"initialExtentRequired",void 0),x([E({readOnly:!0})],Lt.prototype,"initialExtent",null),x([E()],Lt.prototype,"cursor",null),x([E({readOnly:!0})],Lt.prototype,"input",void 0),x([E({type:dL,nonNullable:!0})],Lt.prototype,"navigation",void 0),x([E()],Lt.prototype,"layerViewManager",void 0),x([E()],Lt.prototype,"analysisViewManager",void 0),x([E()],Lt.prototype,"selectionManager",void 0),x([E()],Lt.prototype,"width",void 0),x([E()],Lt.prototype,"height",void 0),x([E({readOnly:!0})],Lt.prototype,"resizing",void 0),x([E({value:null,readOnly:!0})],Lt.prototype,"size",null),x([E({readOnly:!0})],Lt.prototype,"suspended",void 0),x([E({readOnly:!0})],Lt.prototype,"viewEvents",void 0),x([E({readOnly:!0})],Lt.prototype,"persistableViewModels",void 0),x([E()],Lt.prototype,"_isValid",void 0),x([E()],Lt.prototype,"_readyCycleForced",void 0),x([E()],Lt.prototype,"_lockedSpatialReference",void 0),x([E()],Lt.prototype,"_userTimeZone",void 0),x([E()],Lt.prototype,"_lockedTimeZone",void 0),x([E()],Lt.prototype,"_userTimeExtent",void 0),x([E()],Lt.prototype,"_lockedTimeExtent",void 0),x([E({type:jV})],Lt.prototype,"theme",void 0),x([E({readOnly:!0,type:jV})],Lt.prototype,"effectiveTheme",null),Lt=hx=x([ue("esri.views.View")],Lt);const _$=globalThis.$arcgis;_$&&!_$.views&&Object.defineProperty(_$,"views",{configurable:!1,enumerable:!0,writable:!1,value:Lt.views});const HXe=Lt;function qXe(t){return t.layerViews}function Vi(){return[0,0]}function KXe(t){return[t[0],t[1]]}function VI(t,e){return[t,e]}function YXe(t,e){return[t,e]}function XXe(t,e=Vi()){const n=Math.min(2,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e}function Sve(){return Vi()}function Tve(){return VI(1,1)}function kve(){return VI(1,0)}function Ave(){return VI(0,1)}const ZXe=Sve(),JXe=Tve(),QXe=kve(),eZe=Ave();Object.freeze(Object.defineProperty({__proto__:null,ONES:JXe,UNIT_X:QXe,UNIT_Y:eZe,ZEROS:ZXe,clone:KXe,create:Vi,freeze:YXe,fromArray:XXe,fromValues:VI,ones:Tve,unitX:kve,unitY:Ave,zeros:Sve},Symbol.toStringTag,{value:"Module"}));function tZe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Ive(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function nZe(t,e,n,r,i,s,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=s,t[5]=o,t}function YW(t,e){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5];let l=n*s-r*i;return l?(l=1/l,t[0]=s*l,t[1]=-r*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*a-s*o)*l,t[5]=(r*o-n*a)*l,t):null}function rZe(t){return t[0]*t[3]-t[1]*t[2]}function Pve(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1],h=n[2],f=n[3],g=n[4],y=n[5];return t[0]=r*c+s*u,t[1]=i*c+o*u,t[2]=r*h+s*f,t[3]=i*h+o*f,t[4]=r*g+s*y+a,t[5]=i*g+o*y+l,t}function zI(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=r*u+s*c,t[1]=i*u+o*c,t[2]=r*-c+s*u,t[3]=i*-c+o*u,t[4]=a,t[5]=l,t}function fL(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=r*c,t[1]=i*c,t[2]=s*u,t[3]=o*u,t[4]=a,t[5]=l,t}function $2(t,e,n){const r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=n[0],u=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=r*c+s*u+a,t[5]=i*c+o*u+l,t}function Cve(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function Rve(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function XW(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function iZe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function sZe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function oZe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function Mve(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function aZe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function lZe(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function cZe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function uZe(t,e){const n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],u=e[2],h=e[3],f=e[4],g=e[5],y=kl();return Math.abs(n-l)<=y*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-c)<=y*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-u)<=y*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-h)<=y*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(o-f)<=y*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-g)<=y*Math.max(1,Math.abs(a),Math.abs(g))}const hZe=Pve,dZe=Mve;Object.freeze(Object.defineProperty({__proto__:null,add:oZe,copy:tZe,determinant:rZe,equals:uZe,exactEquals:cZe,frob:sZe,fromRotation:Cve,fromScaling:Rve,fromTranslation:XW,identity:Ive,invert:YW,mul:hZe,multiply:Pve,multiplyScalar:aZe,multiplyScalarAndAdd:lZe,rotate:zI,scale:fL,set:nZe,str:iZe,sub:dZe,subtract:Mve,translate:$2},Symbol.toStringTag,{value:"Module"}));function Pd(){return[1,0,0,1,0,0]}function fZe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function pZe(t,e,n,r,i,s){return[t,e,n,r,i,s]}const mZe=Pd();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:mZe,clone:fZe,create:Pd,fromValues:pZe},Symbol.toStringTag,{value:"Module"}));const uR={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Ss({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Bt.WebMercator}),minus180Line:new Ss({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Bt.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Ss({paths:[[[180,-180],[180,180]]],spatialReference:Bt.WGS84}),minus180Line:new Ss({paths:[[[-180,-180],[-180,180]]],spatialReference:Bt.WGS84})}};function Ky(t,e){return Math.ceil((t-e)/(2*e))}function Nve(t,e){const n=jT(t);for(const r of n)for(const i of r)i[0]+=e;return t}function jT(t){return AW(t)?t.rings:t.paths}function ENt(t,e){return e?{...e,query:{...t,...e.query}}:{query:t}}function gZe(t){return typeof t=="string"?Ha(t):Ze(t)}function yZe(t,e,n){const r={};for(const i in t){if(i==="declaredClass")continue;const s=t[i];if(s!=null&&typeof s!="function")if(Array.isArray(s))r[i]=s.map(o=>yZe(o));else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(n?.[i]);r[i]=e?o:JSON.stringify(o)}else r[i]=e?s:JSON.stringify(s);else r[i]=s}return r}function vZe(t,e){return t?e&&EB(t)?e:bB(t)??Jr?.findCredential(t)?.token:null}async function SNt(t,e,n){const r=vZe(t,e);return r||(!Jr&&nr.request.useIdentity&&await _e(()=>import("./IdentityManager-mYLCqHfx.js"),__vite__mapDeps([17,18])),(await Jr.getCredential(t,n))?.token)}async function _Ze(t,e,n,r){const i=gZe(t),s=e[0].spatialReference,o={...r,responseType:"json",query:{...i.query,f:"json",sr:tme(s),target:JSON.stringify({geometryType:IW(e[0]),geometries:e}),cutter:JSON.stringify(n)}},a=await ns(i.path+"/cut",o),{cutIndexes:l,geometries:c=[]}=a.data;return{cutIndexes:l,geometries:c.map(u=>{const h=O2(u);return h.spatialReference=s,h})}}function xZe(t){return{geometryType:IW(t[0]),geometries:t.map(e=>e.toJSON())}}function wZe(t,e,n){const r=bWe(e);return t.map(i=>{const s=r.fromJSON(i);return s.spatialReference=n,s})}async function bZe(t,e,n){const r=typeof t=="string"?Ha(t):t,i=e[0].spatialReference,s=IW(e[0]),o={...n,query:{...r.query,f:"json",sr:tme(i),geometries:JSON.stringify(xZe(e))}},{data:a}=await ns(r.path+"/simplify",o);return wZe(a.geometries,s,i)}const Ove=()=>kt.getLogger("esri.geometry.support.normalizeUtils");function EZe(t){return t.type==="polygon"}function SZe(t){return t[0].type==="polygon"}function TZe(t){return t[0].type==="polyline"}function rre(t){const e=[];let n=0,r=0;for(let i=0;i<t.length;i++){const s=t[i];let o=null;for(let a=0;a<s.length;a++)o=s[a],e.push(o),a===0?(n=o[0],r=n):(n=Math.min(n,o[0]),r=Math.max(r,o[0]));o&&e.push([(n+r)/2,0])}return e}function kZe(t,e){if(!(t instanceof Ss||t instanceof wi)){const i="straightLineDensify: the input geometry is neither polyline nor polygon";throw Ove().error(i),new Xe("internal:geometry",i)}const n=jT(t),r=[];for(const i of n){const s=[];r.push(s),s.push([i[0][0],i[0][1]]);for(let o=0;o<i.length-1;o++){const a=i[o][0],l=i[o][1],c=i[o+1][0],u=i[o+1][1],h=Math.sqrt((c-a)*(c-a)+(u-l)*(u-l)),f=(u-l)/h,g=(c-a)/h,y=h/e;if(y>1){for(let A=1;A<=y-1;A++){const I=A*e,P=g*I+a,N=f*I+l;s.push([P,N])}const _=(h+Math.floor(y-1)*e)/2,b=g*_+a,T=f*_+l;s.push([b,T])}s.push([c,u])}}return EZe(t)?new wi({rings:r,spatialReference:t.spatialReference}):new Ss({paths:r,spatialReference:t.spatialReference})}function ire(t,e,n){if(e){const r=kZe(t,1e6);t=pS(r,!0)}return n&&(t=Nve(t,n)),t}function sre(t,e,n){if(Array.isArray(t)){const r=t[0];if(r>e){const i=Ky(r,e);t[0]=r+i*(-2*e)}else if(r<n){const i=Ky(r,n);t[0]=r+i*(-2*n)}}else{const r=t.x;if(r>e){const i=Ky(r,e);t=t.clone().offset(i*(-2*e),0)}else if(r<n){const i=Ky(r,n);t=t.clone().offset(i*(-2*n),0)}}return t}function AZe(t,e){let n=-1;for(let r=0;r<e.cutIndexes.length;r++){const i=e.cutIndexes[r],s=e.geometries[r],o=jT(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(c=>{if(c[0]<180)return!0;{let u=0;for(let f=0;f<l.length;f++){const g=l[f][0];u=g>u?g:u}u=Number(u.toFixed(9));const h=-360*Ky(u,180);for(let f=0;f<l.length;f++){const g=s.getPoint(a,f);s.setPoint(a,f,g.clone().offset(h,0))}return!0}})}if(i===n){if(SZe(t))for(const a of jT(s))t[i]=t[i].addRing(a);else if(TZe(t))for(const a of jT(s))t[i]=t[i].addPath(a)}else n=i,t[i]=s}return t}async function IZe(t,e,n){if(!Array.isArray(t))return IZe([t],e);e&&typeof e!="string"&&Ove().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const r=typeof e=="string"?e:e?.url??nr.geometryServiceUrl;let i,s,o,a,l,c,u,h,f=0;const g=[],y=[];for(const P of t)if(P!=null)if(i||(i=P.spatialReference,s=za(i),o=i.isWebMercator,c=o?102100:4326,a=uR[c].maxX,l=uR[c].minX,u=uR[c].plus180Line,h=uR[c].minus180Line),s)if(P.type==="mesh")y.push(P);else if(P.type==="point")y.push(sre(P.clone(),a,l));else if(P.type==="multipoint"){const N=P.clone();N.points=N.points.map(L=>sre(L,a,l)),y.push(N)}else if(P.type==="extent"){const N=P.clone()._normalize(!1,!1,s);y.push(N.rings?new wi(N):N)}else if(P.extent){const N=P.extent,L=Ky(N.xmin,l)*(2*a);let C=L===0?P.clone():Nve(P.clone(),L);N.offset(L,0);let{xmin:M,xmax:O}=N;M=Number(M.toFixed(9)),O=Number(O.toFixed(9)),N.intersects(u)&&O!==a?(f=O>f?O:f,C=ire(C,o),g.push(C),y.push("cut")):N.intersects(h)&&M!==l?(f=O*(2*a)>f?O*(2*a):f,C=ire(C,o,360),g.push(C),y.push("cut")):y.push(C)}else y.push(P.clone());else y.push(P);else y.push(P);let _=Ky(f,a),b=-90;const T=_,A=new Ss;for(;_>0;){const P=360*_-180;A.addPath([[P,b],[P,-1*b]]),b*=-1,_--}if(g.length>0&&T>0){const P=AZe(g,await _Ze(r,g,A,n)),N=[],L=[];for(let O=0;O<y.length;O++){const D=y[O];if(D!=="cut")L.push(D);else{const V=P.shift(),U=t[O];U!=null&&U.type==="polygon"&&U.rings&&U.rings.length>1&&V.rings.length>=U.rings.length?(N.push(V),L.push("simplify")):L.push(o?l1(V):V)}}if(!N.length)return L;const C=await bZe(r,N,n),M=[];for(let O=0;O<L.length;O++){const D=L[O];D!=="simplify"?M.push(D):M.push(o?l1(C.shift()):C.shift())}return M}const I=[];for(let P=0;P<y.length;P++){const N=y[P];if(N!=="cut")I.push(N);else{const L=g.shift();I.push(o===!0?l1(L):L)}}return I}function PZe(t){if(!t)return null;const e=t.extent;if(!e)return null;const n=t.spatialReference&&za(t.spatialReference);if(!n)return e;const[r,i]=n.valid,s=2*i,{width:o}=e;let a,{xmin:l,xmax:c}=e;if([l,c]=[c,l],t.type==="extent"||o===0||o<=i||o>s||l<r||c>i)return e;switch(t.type){case"polygon":if(!(t.rings.length>1))return e;a=rre(t.rings);break;case"polyline":if(!(t.paths.length>1))return e;a=rre(t.paths);break;case"multipoint":a=t.points}const u=e.clone();for(let h=0;h<a.length;h++){let f=a[h][0];f<0?(f+=i,c=Math.max(f,c)):(f-=i,l=Math.min(f,l))}return u.xmin=l,u.xmax=c,u.width<o?(u.xmin-=i,u.xmax-=i,u):e}function ZW(t,e,n){const r=za(n);if(r==null)return t;const[i,s]=r.valid,o=2*s;let a=0,l=0;e>s?a=Math.ceil(Math.abs(e-s)/o):e<i&&(a=-Math.ceil(Math.abs(e-i)/o)),t>s?l=Math.ceil(Math.abs(t-s)/o):t<i&&(l=-Math.ceil(Math.abs(t-i)/o));let c=t+(a-l)*o;const u=c-e;return u>s?c-=o:u<i&&(c+=o),c}function TNt(t,e){return JW(e)?.normalize(t)??t}function JW(t){const e=za(t);if(e==null)return null;const[n,r]=e.valid;return new sL(n,r)}const kNt=JW(Bt.WGS84);JW(Bt.WebMercator);const Lve=96,Dve=39.37,CZe=180/Math.PI;function jve(t){return t.wkid?t:t.spatialReference||Bt.WGS84}function QW(t,e){return e.type?lo(t,e.x,e.y):fw(t,e)}function $ve(t){return Kd(t)}function pL(t,e,n=0){let r=t.width,i=t.height;if(n!==0){const a=PI(n),l=Math.abs(Math.cos(a)),c=Math.abs(Math.sin(a));r=t.width*l+t.height*c,i=t.width*c+t.height*l}const s=Math.max(1,e[0]),o=Math.max(1,e[1]);return Math.max(r/s,i/o)*$Ze(t.spatialReference)}async function FS(t,e,n,r){let i,s;if(!t||Array.isArray(t)&&!t.length)return null;if(Ot.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const a=t.every(u=>"attributes"in u),l=t.some(u=>!u.geometry);let c=t;if(a&&l&&e&&e.allLayerViews){const u=new Map;for(const y of t){const _=y.layer,b=u.get(_)||[],T=y.attributes[_.objectIdField];T!=null&&b.push(T),u.set(_,b)}const h=[];u.forEach((y,_)=>{const b=e.allLayerViews?.find(T=>T.layer.id===_.id);if(b&&"queryFeatures"in b){const T=_.createQuery();T.objectIds=y,T.returnGeometry=!0,h.push(b.queryFeatures(T))}});const f=await Promise.all(h),g=[];for(const y of f)if(y&&y.features&&y.features.length)for(const _ of y.features)_.geometry!=null&&g.push(_.geometry);c=g}for(const u of c)r=await FS(u,e,n,r);return r}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")i=new Jt(t);else if(t instanceof Gs)i=t;else if("geometry"in t){if(t.geometry)i=t.geometry;else if(t.layer){const a=t.layer,l=e.allLayerViews?.find(c=>c.layer.id===a.id);if(l&&"queryFeatures"in l){const c=a.createQuery();c.objectIds=[t.attributes[a.objectIdField]],c.returnGeometry=!0,i=(await l.queryFeatures(c))?.features?.[0]?.geometry}}}if(i==null)return null;switch(i.type){case"point":s=new Vn({xmin:i.x,ymin:i.y,xmax:i.x,ymax:i.y,spatialReference:i.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":s=PZe(i);break;default:s=i.extent}if(!s)return null;Cp()||Eh(s.spatialReference,n)||await Yg();const o=wv(s,n);if(!o)return null;if(r){const a=o.center,l=a.clone();l.x=ZW(a.x,r.center.x,n),l.x!==a.x&&o.centerAt(l),r=r.union(o)}else r=o;return r}function RZe(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer?.minScale!=null&&t.layer.maxScale!=null){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,n=0;for(const r of t){const i=r.layer;i?.minScale&&i.maxScale&&(e=i.minScale<e?i.minScale:e,n=i.maxScale>n?i.maxScale:n)}return e&&n?{min:e,max:n}:null}}}function ore(t,e){const n=jve(t);return go(n,e)||n.imageCoordinateSystem||e.imageCoordinateSystem?t:wv(t,e)}async function MZe(t,e){if(!t||!e)return new fu({targetGeometry:new Jt,scale:0,rotation:0});let n=e.spatialReference;const{constraints:r,padding:i,viewpoint:s,size:o}=e,a=[i?o[0]-i.left-i.right:o[0],i?o[1]-i.top-i.bottom:o[1]];let l=null;t instanceof fu?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let c=null;l?.targetGeometry?c=l.targetGeometry:t instanceof Vn?c=t:t instanceof Gs?c=await FS(t,e,n):t&&(c=await FS(t.center,e,n)||await FS(t.target,e,n)||await FS(t,e,n)),!c&&s?.targetGeometry?c=s.targetGeometry:!c&&e.extent&&(c=e.extent),n||(n=jve(e.spatialReference||e.extent||c)),Cp()||go(c.spatialReference,n)||Eh(c.spatialReference,n)||await Yg();const u=ore(c,n),h="center"in u?u.center:u;e.pickClosestTarget!==!1&&h.type==="point"&&s.targetGeometry?.type==="point"&&(h.x=ZW(h.x,s.targetGeometry.x,h.spatialReference));let f=0;l?f=l.rotation:t.hasOwnProperty("rotation")?f=t.rotation:s&&(f=s.rotation);let g=0;g=l?.targetGeometry!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in t&&t.scale?t.scale:"zoom"in t&&t.zoom!==-1&&r&&r.effectiveLODs?r.zoomToScale(t.zoom):Array.isArray(c)||c.type==="point"||c.type==="extent"&&c.width===0&&c.height===0?s.scale:pL(ore(c.extent,n),a,f);const y=RZe(t.target??t);y&&(y.min&&y.min<g?g=y.min:y.max&&y.max>g&&(g=y.max));let _=new fu({targetGeometry:h,scale:g,rotation:f});return r&&(_=r.fit(_),r.constrainByGeometry(_),r.rotationEnabled||(_.rotation=s.rotation)),_}function da(t,e){const n=t.targetGeometry,r=e.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function NZe(t,e,n){return n?lo(t,.5*(e[0]-n.right+n.left),.5*(e[1]-n.bottom+n.top)):RI(t,e,.5)}const OZe=(function(){const t=Vi();return function(e,n,r){const i=n.targetGeometry;QW(t,i);const s=.5*Sb(n);return e.xmin=t[0]-s*r[0],e.ymin=t[1]-s*r[1],e.xmax=t[0]+s*r[0],e.ymax=t[1]+s*r[1],e.spatialReference=i.spatialReference,e}})();function LZe(t,e,n,r,i){return GV(t,e,n.center),t.scale=pL(n,r),i?.constraints?.constrain(t),t}function DZe(t,e,n,r){return nH(t,e,n,r),YW(t,t)}const Fve=(function(){const t=Vi();return function(e,n,r){return yW(e,FZe(e,n),NZe(t,n,r))}})(),jZe=(function(){const t=Pd(),e=Vi();return function(n,r,i,s){const o=Sb(r),a=eH(r);return lo(e,o,o),Rve(t,e),zI(t,t,a),$2(t,t,Fve(e,i,s)),$2(t,t,[0,s.top-s.bottom]),lo(n,t[4],t[5])}})();function Sb(t){return t.scale*Vve(t.targetGeometry?.spatialReference)}function Vve(t){return dc(t)?1/($ve(t)*Dve*Lve):1}function eH(t){return gW(t.rotation)||0}function $Ze(t){return dc(t)?$ve(t)*Dve*Lve:1}function FZe(t,e){return RI(t,e,.5)}const tH=(function(){const t=Vi(),e=Vi(),n=Vi();return function(r,i,s,o,a,l){return m0e(t,i),RI(e,s,.5*l),lo(n,1/o*l,-1/o*l),XW(r,e),a&&zI(r,r,a),fL(r,r,n),$2(r,r,t),r}})(),nH=(function(){const t=Vi();return function(e,n,r,i){const s=Sb(n),o=eH(n);return QW(t,n.targetGeometry),tH(e,t,r,s,o,i)}})(),VZe=(function(){const t=Vi();return function(e,n,r,i){const s=Sb(n);return QW(t,n.targetGeometry),tH(e,t,r,s,0,i)}})();function zve(t){const e=za(t);return e?e.valid[1]-e.valid[0]:0}function zZe(t,e){return Math.round(zve(t)/e)}const GZe=(function(){const t=Vi(),e=Vi(),n=[0,0,0];return function(r,i,s){Yk(t,r,i),Y9(t,t),Yk(e,r,s),Y9(e,e),y0e(n,t,e);let o=Math.acos(g0e(t,e)/(hN(t)*hN(e)))*CZe;return n[2]<0&&(o=-o),isNaN(o)&&(o=0),o}})(),UZe=(function(){const t=Vi();return function(e,n,r,i){const s=e.targetGeometry;return da(e,n),jZe(t,n,r,i),s.x+=t[0],s.y+=t[1],e}})(),GV=function(t,e,n){da(t,e);const r=t.targetGeometry;return r.x=n.x,r.y=n.y,r.spatialReference=n.spatialReference,t},BZe=(function(){const t=Vi();return function(e,n,r,i,s){s||(s="center"),yW(t,r,i),RI(t,t,.5);const o=t[0],a=t[1];switch(s){case"center":lo(t,0,0);break;case"left":lo(t,-o,0);break;case"top":lo(t,0,a);break;case"right":lo(t,o,0);break;case"bottom":lo(t,0,-a);break;case"top-left":lo(t,-o,a);break;case"bottom-left":lo(t,-o,-a);break;case"top-right":lo(t,o,a);break;case"bottom-right":lo(t,o,-a)}return mL(e,n,t),e}})();function ANt(t,e,n){return da(t,e),t.rotation+=n,t}function WZe(t,e,n){return da(t,e),t.rotation=n,t}const HZe=(function(){const t=Vi();return function(e,n,r,i,s){return da(e,n),isNaN(r)||r===0||(Uve(t,i,n,s),e.scale=n.scale*r,Bve(t,t,e,s),mL(e,e,lo(t,t[0]-i[0],i[1]-t[1]))),e}})();function are(t,e,n){return da(t,e),t.scale=n,t}const Gve=(function(){const t=Vi();return function(e,n,r,i,s,o){return da(e,n),isNaN(r)||r===0||(Uve(t,s,n,o),e.scale=n.scale*r,e.rotation+=i,Bve(t,t,e,o),mL(e,e,lo(t,t[0]-s[0],s[1]-t[1]))),e}})(),INt=(function(){const t=Vi(),e=Vi();return function(n,r,i,s,o,a,l){return Fve(e,a,l),h0e(t,o,e),s?Gve(n,r,i,s,t,a):HZe(n,r,i,t,a)}})(),Uve=(function(){const t=Pd();return function(e,n,r,i){return cd(e,n,DZe(t,r,i,1))}})(),Bve=(function(){const t=Pd();return function(e,n,r,i){return cd(e,n,nH(t,r,i,1))}})(),mL=(function(){const t=Vi(),e=Pd();return function(n,r,i){da(n,r);const s=Sb(r),o=n.targetGeometry;return Cve(e,eH(r)),fL(e,e,VI(s,s)),cd(t,i,e),o.x+=t[0],o.y+=t[1],n}})();function Wve(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function qZe(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function KZe(t,e,n,r,i,s){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o[4]=i,o[5]=s,o}function Hve(t,e,n,r){const i=e[r],s=e[r+1];t[r]=n[0]*i+n[2]*s+n[4],t[r+1]=n[1]*i+n[3]*s+n[5]}function YZe(t,e,n,r=0,i=0,s=2){const o=i||e.length/s;for(let a=r;a<o;a++)Hve(t,e,n,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:qZe,create:Wve,fromValues:KZe,transform:Hve,transformMany:YZe},Symbol.toStringTag,{value:"Module"}));function p3(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function XZe(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ZZe(t,e,n,r,i,s,o,a,l){const c=new Float32Array(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=s,c[6]=o,c[7]=a,c[8]=l,c}Object.freeze(Object.defineProperty({__proto__:null,clone:XZe,create:p3,fromValues:ZZe},Symbol.toStringTag,{value:"Module"}));function qve(){return new Float32Array(2)}function JZe(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function F2(t,e){const n=new Float32Array(2);return n[0]=t,n[1]=e,n}function Kve(){return qve()}function Yve(){return F2(1,1)}function Xve(){return F2(1,0)}function Zve(){return F2(0,1)}const QZe=Kve(),eJe=Yve(),tJe=Xve(),nJe=Zve();Object.freeze(Object.defineProperty({__proto__:null,ONES:eJe,UNIT_X:tJe,UNIT_Y:nJe,ZEROS:QZe,clone:JZe,create:qve,fromValues:F2,ones:Yve,unitX:Xve,unitY:Zve,zeros:Kve},Symbol.toStringTag,{value:"Module"}));function rJe(t){return t instanceof Float32Array&&t.length>=2}function iJe(t){return Array.isArray(t)&&t.length>=2}function x$(t){return rJe(t)||iJe(t)}var UV;const mf=[0,0];let Pf=UV=class extends qt{constructor(t){super(t),this._viewpoint2D={center:Vi(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Vn,this.id=0,this.inverseTransform=Pd(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Pd(),this.transformNoRotation=Pd(),this.displayMat3=p3(),this.displayViewMat3=p3(),this.viewMat3=p3(),this.viewMat2d=Wve(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,n=t.targetGeometry;e.center[0]=n.x,e.center[1]=n.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=n.spatialReference}this._update()}get visibleArea(){const[t,e]=this.size;return[this.toMap([0,0],0,0),this.toMap([0,0],0,e),this.toMap([0,0],t,e),this.toMap([0,0],t,0)]}copy(t){const e=this.size,n=this.viewpoint;return n&&e?(this.viewpoint=da(n,t.viewpoint),this._set("size",fw(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new UV({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,n){return x$(e)?cd(t,e,this.inverseTransform):(mf[0]=e,mf[1]=n,cd(t,mf,this.inverseTransform))}toScreen(t,e,n){return x$(e)?cd(t,e,this.transform):(mf[0]=e,mf[1]=n,cd(t,mf,this.transform))}toScreenNoRotation(t,e,n){return x$(e)?cd(t,e,this.transformNoRotation):(mf[0]=e,mf[1]=n,cd(t,mf,this.transformNoRotation))}wrapMapCoordinate(t,e){fw(t,e);const[n]=e,[r]=this.center,{extent:i,spatialReference:s}=this;let{xmin:o,xmax:a}=i;if(s.isWrappable){const l=zve(s)/2;o=Math.max(o,r-l),a=Math.min(a,r+l)}return(n<o||n>a)&&(t[0]=ZW(n,r,s)),t}getScreenTransform(t,e){const{center:n}=this._viewpoint2D,r=this._get("pixelRatio")||1,i=this._get("size");return tH(t,n,i,e,0,r),t}_update(){const{center:t,spatialReference:e,scale:n,rotation:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size"),o=new fu({targetGeometry:new Jt(t[0],t[1],e),scale:n,rotation:r});if(this._set("viewpoint",o),!s||!e||!n)return;this.resolution=Sb(o),this.rotation=r,this.scale=n,this.spatialReference=e,fw(this.center,t);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;pw(this.displayMat3,a,0,0,0,l,0,-1,1,1);const c=E0e(this.viewMat3),u=F2(s[0]/2,s[1]/2),h=F2(-s[0]/2,-s[1]/2),f=gW(r);Z9(c,c,u),k0e(c,c,f),Z9(c,c,h),Zk(this.displayViewMat3,this.displayMat3,c);const g=XW(this.viewMat2d,u);return zI(g,g,f),$2(g,g,h),OZe(this.extent,o,s),nH(this.transform,o,s,i),YW(this.inverseTransform,this.transform),VZe(this.transformNoRotation,o,s,i),this.worldScreenWidth=zZe(this.spatialReference,this.resolution),this._set("id",this.id+1),this.notifyChange("visibleArea"),this}};x([E({readOnly:!0})],Pf.prototype,"id",void 0),x([E({value:1,json:{write:!0}})],Pf.prototype,"pixelRatio",null),x([E({json:{write:!0}})],Pf.prototype,"size",null),x([E()],Pf.prototype,"spatialReference",void 0),x([E({type:fu,json:{write:!0}})],Pf.prototype,"viewpoint",null),x([E({readOnly:!0})],Pf.prototype,"visibleArea",null),Pf=UV=x([ue("esri.views.2d.ViewState")],Pf);const lre=Pf;var BV,WV;let Hf=BV=class extends Kt{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new BV({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};x([E()],Hf.prototype,"left",void 0),x([E()],Hf.prototype,"top",void 0),x([E()],Hf.prototype,"right",void 0),x([E()],Hf.prototype,"bottom",void 0),Hf=BV=x([ue("esri.views.2d.PaddedViewState.Padding")],Hf);let dx=WV=class extends lre{constructor(...t){super(...t),this.paddedViewState=new lre,this._updateContent=(()=>{const e=Vi();return()=>{const n=this._get("size"),r=this._get("padding");if(!n||!r)return;const i=this.paddedViewState;lo(e,r.left+r.right,r.top+r.bottom),Yk(e,n,e),fw(i.size,e);const s=i.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(fn(()=>[this.size,this.padding],()=>this._updateContent(),Kg)),this.padding=new Hf,this.size=[0,0]}set padding(t){this._set("padding",t||new Hf)}set viewpoint(t){if(t){this.paddedViewState.viewpoint=t;let e=t;const n=this._get("padding");n&&(e=UZe(t.clone(),t,this._get("size"),n));const{targetGeometry:r,rotation:i,scale:s}=e,{x:o,y:a,spatialReference:l}=r,c=this._viewpoint2D;c.center[0]=o,c.center[1]=a,c.rotation=i,c.scale=s,c.spatialReference=l,this._update()}}clone(){return new WV({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};x([E()],dx.prototype,"paddedViewState",void 0),x([E({type:Hf})],dx.prototype,"padding",null),x([E()],dx.prototype,"viewpoint",null),dx=WV=x([ue("esri.views.2d.PaddedViewState")],dx);const rH=dx;let VS=class extends Kt{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};x([E()],VS.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),x([E()],VS.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),VS=x([ue("esri.views.support.debugFlags")],VS);const sJe=new VS,Jve=Symbol("Yield");let oJe=class{constructor(){this._tasks=new Array,this._numPendingTasks=j2(0),this._readyToRun=j2(!1)}get length(){return this._tasks.length}get updating(){return this._numPendingTasks.value>0}get readyToRun(){return this._readyToRun.value}_updateReadyToRun(){this._readyToRun.value=this._tasks.length>0}destroy(){this.cancelAll()}runTask(e){if(this.length===0)return Jve;for(;!e.done&&this._process(e);)e.madeProgress()}push(e,n,r){return this._addTask((i,s)=>new ure(i,s,e,n,r),Array.prototype.push)}unshift(e,n,r){return this._addTask((i,s)=>new ure(i,s,e,n,r),Array.prototype.unshift)}pushGenerator(e,n,r){return this._addTask((i,s)=>new aJe(i,s,e,n,r),Array.prototype.push)}_process(e){if(this._tasks.length===0)return!1;const n=this._tasks.shift();this._updateReadyToRun();try{if(ma(n.signal))this._cancelTask(n,Cr());else switch(n.type){case 0:this._processSimple(n,e);break;case 1:this._processGenerator(n,e);break;case 2:this._processIterator(n,e);break;default:}}catch(r){n.reject(r)}return!0}cancelAll(){const e=Cr();for(const n of this._tasks)this._cancelTask(n,e);this._tasks.length=0,this._updateReadyToRun()}_cancelTask(e,n){if(e.abortCallback){const r=e.abortCallback(n);e.type===2&&e.iterator.return&&cre(e.iterator.return()),ga(r)?r.then(e.resolve,e.reject):e.resolve(r)}else e.type===2&&e.iterator.throw&&cre(e.iterator.throw(n)),e.reject(n)}_onIteratorResult(e,n){n.done?e.resolve(n.value):(this._tasks.unshift(e),this._updateReadyToRun())}_processSimple(e,n){const r=e.callback(n);ga(r)?r.then(e.resolve,e.reject):e.resolve(r)}_processGenerator(e,n){const r=e.generatorFunction(n),i=new lJe(e.resolve,e.reject,r,e.signal,e.abortCallback);this._processIterator(i,n)}_processIterator(e,n){const r=e.iterator.next(n);ga(r)?r.then(i=>this._onIteratorResult(e,i),e.reject):this._onIteratorResult(e,r)}_addTask(e,n){return new Promise((r,i)=>{const s=e(r,i);n.call(this._tasks,s),++this._numPendingTasks.value,this._updateReadyToRun()}).finally(()=>--this._numPendingTasks.value)}};function cre(t){ga(t)?t.then(w$,w$):w$(t)}function w$(t){wa(t)||t instanceof Error||t instanceof Xe||t!=null&&typeof t=="object"&&"done"in t&&t.done||kt.getLogger("esri.layers.support.PromiseQueue").warn("Generator iterator was aborted, but it is not done.")}let iH=class{constructor(e,n,r=void 0,i=void 0){this.resolve=e,this.reject=n,this.signal=r,this.abortCallback=i}},ure=class extends iH{constructor(e,n,r,i,s){super(e,n,i,s),this.callback=r,this.type=0}},aJe=class extends iH{constructor(e,n,r,i,s){super(e,n,i,s),this.generatorFunction=r,this.type=1}},lJe=class extends iH{constructor(e,n,r,i,s){super(e,n,i,s),this.iterator=r,this.type=2}};function cJe(){return new pJe}const Ln={RESOURCE_CONTROLLER_IMMEDIATE:"immediate",RESOURCE_CONTROLLER:"schedule",SLIDE:"slide",STREAM_DATA_LOADER:"stream loader",ELEVATION_QUERY:"elevation query",TERRAIN_SURFACE:"terrain",SURFACE_GEOMETRY_UPDATES:"surface geometry updates",LOD_RENDERER:"LoD renderer",GRAPHICS_CORE:"Graphics3D",I3S_CONTROLLER:"I3S",POINT_CLOUD_LAYER:"point cloud",FEATURE_TILE_FETCHER:"feature fetcher",STREAM_CONTROLLER:"stream controller",OVERLAY:"overlay",OVERLAY_RENDERER:"overlay renderer",STAGE:"stage",GRAPHICS_DECONFLICTOR:"graphics deconflictor",FILTER_VISIBILITY:"Graphics3D filter visibility",SCALE_VISIBILITY:"Graphics3D scale visibility",FRUSTUM_VISIBILITY:"Graphics3D frustum visibility",POINT_OF_INTEREST_FREQUENT:"POI frequent",POINT_OF_INTEREST_INFREQUENT:"POI infrequent",LABELER:"labeler",FEATURE_QUERY_ENGINE:"feature query",FEATURE_TILE_TREE:"feature tile tree",FEATURE_TILE_TREE_ACTIVE:"fast feature tile tree",ELEVATION_ALIGNMENT:"elevation alignment",ELEVATION_ALIGNMENT_SCENE:"elevation alignment scene",TEXT_TEXTURE_ATLAS:"text texture atlas",TEXTURE_UNLOAD:"texture unload",LINE_OF_SIGHT_TOOL:"line of sight tool",LINE_OF_SIGHT_TOOL_INTERACTIVE:"interactive line of sight tool",ELEVATION_PROFILE:"elevation profile",SNAPPING:"snapping",SHADOW_ACCUMULATOR:"shadow accumulator",CLOUDS_GENERATOR:"clouds generator",FLOW_GENERATOR:"flow generator",MAPVIEW_FETCH_QUEUE:"mapview fetch queue",MAPVIEW_LAYERVIEW_UPDATE:"mapview layerview update",MAPVIEW_VECTOR_TILE_PARSING_QUEUE:"mapview vector tile parsing queue",NONE:0,TEST_PRIO:1},qc=0,hre=new Map([[Ln.RESOURCE_CONTROLLER_IMMEDIATE,qc],[Ln.RESOURCE_CONTROLLER,4],[Ln.SLIDE,qc],[Ln.STREAM_DATA_LOADER,qc],[Ln.ELEVATION_QUERY,qc],[Ln.TERRAIN_SURFACE,1],[Ln.SURFACE_GEOMETRY_UPDATES,1],[Ln.LOD_RENDERER,2],[Ln.GRAPHICS_CORE,2],[Ln.I3S_CONTROLLER,2],[Ln.POINT_CLOUD_LAYER,2],[Ln.FEATURE_TILE_FETCHER,2],[Ln.STREAM_CONTROLLER,2],[Ln.CLOUDS_GENERATOR,2],[Ln.OVERLAY,4],[Ln.OVERLAY_RENDERER,4],[Ln.STAGE,4],[Ln.GRAPHICS_DECONFLICTOR,4],[Ln.FILTER_VISIBILITY,4],[Ln.SCALE_VISIBILITY,4],[Ln.FRUSTUM_VISIBILITY,4],[Ln.POINT_OF_INTEREST_FREQUENT,6],[Ln.POINT_OF_INTEREST_INFREQUENT,30],[Ln.LABELER,8],[Ln.FEATURE_QUERY_ENGINE,8],[Ln.FEATURE_TILE_TREE,16],[Ln.FEATURE_TILE_TREE_ACTIVE,qc],[Ln.ELEVATION_ALIGNMENT,12],[Ln.ELEVATION_ALIGNMENT_SCENE,14],[Ln.TEXT_TEXTURE_ATLAS,12],[Ln.TEXTURE_UNLOAD,12],[Ln.LINE_OF_SIGHT_TOOL,16],[Ln.LINE_OF_SIGHT_TOOL_INTERACTIVE,qc],[Ln.SNAPPING,qc],[Ln.SHADOW_ACCUMULATOR,30],[Ln.FLOW_GENERATOR,12],[Ln.MAPVIEW_FETCH_QUEUE,qc],[Ln.MAPVIEW_LAYERVIEW_UPDATE,2],[Ln.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,qc]]);function dre(t){return hre.has(t)?hre.get(t):typeof t=="number"?t:1}const uJe=6.5,fre=1,hJe=30,dJe=1e3/30,fJe=100,pre=.9;let pJe=class{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=this._tasks.some(e=>e.needsUpdate)}constructor(){this._updating=j2(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new yT("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new Qve,this.state=1,this._tasks=new Array,this._runQueue=new Array,this._load=0,this._forceTask=!1,this._debug=!1,this._debugHandle=fn(()=>sJe.SCHEDULER_LOG_SLOW_TASKS,e=>this._debug=e,ya);for(const e of Object.keys(Ln))this.performanceInfo.tasks.set(Ln[e],new yT(String(Ln[e])))}destroy(){this._tasks.forEach(e=>e.remove()),this._tasks.length=0,this._runQueue.length=0,ii(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(e){this._updatingChanged(),e&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this._runFrame())}))}registerTask(e,n){const r=new mJe(this,e,n);return this._tasks.push(r),this._updatingChanged(),this.performanceInfo.tasks.has(e)||this.performanceInfo.tasks.set(e,new yT(e)),r}get load(){return this._load}frame(e){if(this._startFrameTaskTimes(),this._updateBudget(e)){const n=this._budget.now();return this._runFrame(),this._recordFrameTaskTimes(this._budget.now()-n),!0}return this._recordFrameTaskTimes(0),!1}_updateBudget(e){this._test&&(this._test.usedBudget=0),++this._frameNumber;let n=uJe,r=e.frameDuration,i=fre;switch(this.state){case 2:n=0,r=Math.max(fJe,e.frameDuration),i=hJe;break;case 1:r=Math.max(dJe,e.frameDuration)}return r=r-e.elapsedFrameTime-n,this.state!==2&&r<fre&&!this._forceTask?(this._forceTask=!0,!1):(r=Math.max(r,i),this._budget.reset(r),this._updateLoad(),this._schedule())}_runFrame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(0),this._budget.madeProgress()}removeTask(e){K8(this._tasks,e),K8(this._runQueue,e),this._updatingChanged()}_updateTask(e){this._tasks.forEach(n=>{n.name===e&&n.setPriority(e)})}_getState(e){if(this._runQueue.some(r=>r.name===e))return"s";let n="i";return this._tasks.forEach(r=>{r.name===e&&r.needsUpdate&&(r.schedulePriority<=1?n="r":n!=="r"&&(n="w"))}),n}_getRuntime(e){let n=0;return this._tasks.forEach(r=>{r.name===e&&(n+=r.runtime)}),n}_resetRuntimes(){this._tasks.forEach(e=>e.runtime=0)}_getRunning(){const e=new Map;if(this._tasks.forEach(r=>{r.needsUpdate&&e.set(r.name,(e.get(r.name)||0)+1)}),e.size===0)return null;let n="";return e.forEach((r,i)=>{n+=r>1?` ${r}x ${i}`:` ${i}`}),n}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const e=this._tasks.reduce((n,r)=>r.needsUpdate?++n:n,0);this._load=this._load*pre+e*(1-pre)}_schedule(){for(c6e(this._runQueue,e=>!!e.needsUpdate||(e.schedulePriority=e.basePriority,!1)),this._tasks.forEach(e=>{e.basePriority===qc&&e.needsUpdate&&!this._runQueue.includes(e)&&e.blockFrame!==this._frameNumber&&this._runQueue.unshift(e)});this._runQueue.length===0;){let e=!1,n=0;if(this._tasks.forEach(r=>{r.needsUpdate&&r.schedulePriority!==0&&r.basePriority!==qc&&r.blockFrame!==this._frameNumber&&(e=!0,n=Math.max(n,r.basePriority),r.schedulePriority===1?(r.schedulePriority=0,this._runQueue.push(r)):--r.schedulePriority)}),!e)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){do for(;this._runQueue.length>0;){const e=this._budget.now(),n=this._runQueue.pop();this._budget.resetProgress();try{n.task.runTask(this._budget)===Jve&&(n.blockFrame=this._frameNumber)}catch(i){kt.getLogger("esri.views.support.Scheduler").error(`Exception in task "${n.name}"`,i),n.blockFrame=this._frameNumber}!this._budget.hasProgressed&&n.blockFrame!==this._frameNumber&&n.needsUpdate&&(n.name,n.blockFrame=this._frameNumber),n.schedulePriority=n.basePriority;const r=this._budget.now()-e;if(n.runtime+=r,this._frameTaskTimes.set(n.priority,this._frameTaskTimes.get(n.priority)+r),this._budget.remaining<=0)return void this._updatingChanged()}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const e of Object.keys(Ln))this._frameTaskTimes.set(Ln[e],0)}_recordFrameTaskTimes(e){this._frameTaskTimes.forEach((n,r)=>this.performanceInfo.tasks.get(r).push(n)),this.performanceInfo.total.push(e)}get test(){return this._test}},mJe=class{get task(){return this._task.value}get readyToRun(){return this._queue.readyToRun}get updating(){return this._queue.updating}constructor(e,n,r){this._scheduler=e,this.name=n,this.blockFrame=0,this.runtime=0,this._queue=new oJe,this._handles=new pb,this._basePriority=dre(n),this.schedulePriority=this._basePriority,this._task=j2(r??this._queue),this._handles.add(wc(()=>this.task.readyToRun,i=>e.taskRunningChanged(i)))}remove(){this.processQueue($T),this._scheduler.removeTask(this),this.schedule=b$.schedule,this.reschedule=b$.reschedule,this.scheduleGenerator=b$.scheduleGenerator,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(e){if(this.name===e)return;this.name=e;const n=dre(e);this._basePriority!==qc&&this.schedulePriority===0||(this.schedulePriority=n),this._basePriority=n}get priority(){return this.name}set priority(e){this.setPriority(e)}get needsUpdate(){return this.readyToRun||!this.task.destroyed&&this.task.readyToRun}schedule(e,n,r){return this._queue.push(e,n,r)}reschedule(e,n,r){return this._queue.unshift(e,n,r)}scheduleGenerator(e,n,r){return this._queue.pushGenerator(e,n,r)}processQueue(e){return this._queue.runTask(e)}},Qve=class{constructor(){this._begin=performance?.now()??0,this._budget=0,this._done=!1,this._progressed=!1,this._enabled=!0}run(e){return!this.done&&(e()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get enabled(){return this._enabled}set enabled(e){this._enabled=e}reset(e){this._begin=this.now(),this._budget=e,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}};const $T=new Qve;$T.enabled=!1;let gJe=class{remove(){}processQueue(){}schedule(e,n,r){try{if(ma(n)){const i=Cr();return r?Promise.resolve(r(i)):Promise.reject(i)}return e9(e($T))}catch(i){return Promise.reject(i)}}reschedule(e,n,r){return this.schedule(e,n,r)}async scheduleGenerator(e,n,r){if(ma(n)){const s=Cr();if(r)return r(s);throw s}const i=e($T);for(;;){const s=i.next($T),o=ga(s)?await s:s;if(ma(n)){const a=Cr();if(r){const c=r(a),u=i.return(null);return ga(u)&&await j4(u),c}const l=i.throw(a);throw ga(l)&&await j4(l),a}if(o.done)return o.value}}};const b$=new gJe;let yJe=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this._scheduler=cJe(),this._schedulerHandle=wc(()=>this._scheduler.updating,()=>this.requestFrame()),this.stationary=!0,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation?.target==null||ga(this.view.animation.target)||(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=n=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:r,graphicsView:i,labelManager:s,state:{id:o}}=this.view;r?.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==o&&(s.viewChange(),s.lastUpdateId=o),s.updateRequested&&s.processUpdate(this._updateParameters)),i!=null&&(i.lastUpdateId!==o&&(i.viewChange(),i.lastUpdateId=o),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore?.setViewState(this._updateParameters.state),this.view.animation?this._scheduler.state=0:this.view.interacting?this._scheduler.state=1:this._scheduler.state=2,this._scheduler.frame(n)||this._updateRequested||this._scheduler.state!==2||this._frameTaskHandle?.pause()}}destroy(){this.stop(),this._schedulerHandle.remove(),this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,targetState:new rH,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=fn(()=>e.stationary,n=>{this.stationary=n,this.requestFrame()}),this._frameTaskHandle=S2(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const n=this.view.state,r=e.lastUpdateId;r!=null&&(this.stationary||e.moving)||(e.moving=!0),r!==n.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=n.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}};function vJe(t,e){const{spatialReference:n}=e,r=[e.x,e.y];let i,s,o,a;const l=[0,0],c=_Je(t);for(let f=0;f<c.length;f++){const g=c[f];for(let y=0;y<g.length-1;y++){Lze(l,r,g,y);const _=tL(r,l);(i==null||_<i)&&(i=_,s=[...l],o=f,a=y)}}if(i==null||!s||o==null||a==null)throw new Xe("nearest-coordinate:failed","Failed to find the nearest coordinate");const[u,h]=s;return{coordinate:new Jt({x:u,y:h,spatialReference:n}),distance:i}}function _Je(t){switch(t.type){case"extent":return[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]];case"polygon":return t.rings;case"polyline":return t.paths}}var HV;let My=HV=class extends cW(Kt){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return wv(this.geometry,this.spatialReference)}catch(t){return kt.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;const n=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?SI(this.normalizedGeometry,n):WB(this.normalizedGeometry,n))return t;const{coordinate:r}=vJe(this.normalizedGeometry,n);return r&&(t.targetGeometry=r),t}clone(){return new HV({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};x([E({constructOnly:!0})],My.prototype,"geometry",void 0),x([E({readOnly:!0})],My.prototype,"normalizedGeometry",null),x([E({constructOnly:!0})],My.prototype,"spatialReference",void 0),My=HV=x([ue("esri.views.2d.constraints.GeometryConstraint")],My);var qV;let zS=qV=class extends cW(Kt){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new qV({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};x([E()],zS.prototype,"enabled",void 0),x([E()],zS.prototype,"rotationEnabled",void 0),zS=qV=x([ue("esri.views.2d.constraints.RotationConstraint")],zS);const e_e=zS;var KV;let il=KV=class extends cW(Kt){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:n,maxScale:r,minZoom:i,maxZoom:s}=this,o=-1,a=-1,l=!1,c=!1;if(n!==0&&r!==0&&n<r&&([n,r]=[r,n]),!e?.length)return this._set("effectiveMinScale",n),void this._set("effectiveMaxScale",r);e=e.map(u=>u.clone()),e.sort((u,h)=>h.scale-u.scale),e.forEach((u,h)=>u.level=h);for(const u of e)!l&&n>0&&n>=u.scale&&(o=u.level,l=!0),!c&&r>0&&r>=u.scale&&(a=t?t.level:-1,c=!0),t=u;i===-1&&(i=n===0?0:o),s===-1&&(s=r===0?e.length-1:a),i=Math.max(i,0),i=Math.min(i,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),i>s&&([i,s]=[s,i]),n=e[i].scale,r=e[s].scale,e.splice(0,i),e.splice(s-i+1),e.forEach((u,h)=>{this._lodByScale[u.scale]=u,this._scales[h]=u.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",i),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",n),this._set("effectiveMaxScale",r)}constrain(t,e){if(e&&t.scale===e.scale)return t;const n=this.effectiveMinScale,r=this.effectiveMaxScale,i=t.targetGeometry,s=e&&e.targetGeometry,o=r!==0&&t.scale<r,a=n!==0&&t.scale>n;if(o||a){const l=a?n:r;if(e&&s){const c=(l-e.scale)/(t.scale-e.scale);i.x=s.x+(i.x-s.x)*c,i.y=s.y+(i.y-s.y)*c}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),n=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(n>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const n=Math.floor(t),r=Math.ceil(t);return e[n]+(t-n)*(e[r]-e[n])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let n,r;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let i=0;i<e.length-1;i++){if(n=e[i],r=e[i+1],r===t)return i+this.effectiveMinZoom+1;if(n>t&&r<t)return i+this.effectiveMinZoom+1-(t-r)/(n-r)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const n=Math.round(this.scaleToZoom(t));return this.zoomToScale(n+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const n=Math.round(this.scaleToZoom(t));return this.zoomToScale(n-1)}clone(){return new KV({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,n)=>Math.abs(n-t)<=Math.abs(e-t)?n:e,this._scales[0])),this._lodByScale[t].scale}};x([E({readOnly:!0})],il.prototype,"effectiveLODs",void 0),x([E({readOnly:!0})],il.prototype,"effectiveMinZoom",void 0),x([E({readOnly:!0})],il.prototype,"effectiveMaxZoom",void 0),x([E({readOnly:!0})],il.prototype,"effectiveMinScale",void 0),x([E({readOnly:!0})],il.prototype,"effectiveMaxScale",void 0),x([E()],il.prototype,"lods",void 0),x([E()],il.prototype,"minZoom",void 0),x([E()],il.prototype,"maxZoom",void 0),x([E()],il.prototype,"minScale",void 0),x([E()],il.prototype,"maxScale",void 0),x([E()],il.prototype,"snapToZoom",void 0),il=KV=x([ue("esri.views.2d.constraints.ZoomConstraint")],il);const t_e=il,xJe={base:null,key:"type",typeMap:{extent:Vn,polygon:wi}};let Bi=class extends Kt{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Ot}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new My({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new e_e({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),n=this.lods||this.view?.constraintsInfo.lods,r=this.minZoom,i=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===n&&e.minZoom===r&&e.maxZoom===i&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===a?e:new t_e({lods:n,minZoom:r,maxZoom:i,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(e){const n=this.effectiveMaxScale;return n===0||e>=n}canZoomOutTo(e){const n=this.effectiveMinScale;return n===0||e<=n}constrain(e,n){return this._zoom.constrain(e,n),this._rotation.constrain(e,n),this._geometry.constrain(e,n),this.customConstraints.forEach(r=>r.constrain(e,n)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(n=>n.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};x([E({readOnly:!0})],Bi.prototype,"effectiveLODs",null),x([E({readOnly:!0})],Bi.prototype,"effectiveMinScale",null),x([E({readOnly:!0})],Bi.prototype,"effectiveMaxScale",null),x([E({readOnly:!0})],Bi.prototype,"effectiveMinZoom",null),x([E({readOnly:!0})],Bi.prototype,"effectiveMaxZoom",null),x([E({types:xJe,value:null})],Bi.prototype,"geometry",null),x([E({type:[Co]})],Bi.prototype,"lods",void 0),x([E()],Bi.prototype,"minScale",void 0),x([E()],Bi.prototype,"maxScale",void 0),x([E()],Bi.prototype,"minZoom",void 0),x([E()],Bi.prototype,"maxZoom",void 0),x([E()],Bi.prototype,"rotationEnabled",void 0),x([E()],Bi.prototype,"snapToZoom",void 0),x([E({type:Ot})],Bi.prototype,"customConstraints",void 0),x([E()],Bi.prototype,"view",void 0),x([E({readOnly:!0})],Bi.prototype,"version",null),x([E({type:My,readOnly:!0})],Bi.prototype,"_geometry",null),x([E({type:e_e})],Bi.prototype,"_rotation",null),x([E({readOnly:!0,type:t_e})],Bi.prototype,"_zoom",null),Bi=x([ue("esri.views.2d.MapViewConstraints")],Bi);const mre=Bi;let Xo=class extends Kt{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([fn(()=>this.constraints?.version,n=>{this.constraints&&n&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Kg)])}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:n}=this.state.paddedViewState;return this.state.commitProperty("id"),new Jt({x:e[0],y:e[1],spatialReference:n})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let n;try{n=this._project(e,this.state.spatialReference)}catch(i){return void kt.getLogger(this).error(new Xe("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:i}))}const r=this.viewpoint;GV(r,r,n),this.viewpoint=r}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void kt.getLogger(this).error(new Xe("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let n;try{n=this._project(e,this.state.spatialReference)}catch(i){return void kt.getLogger(this).error(new Xe("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:i}))}const r=this.viewpoint;LZe(r,r,n,this.state.size,{constraints:this.constraints}),this.viewpoint=r}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const n=this.viewpoint;WZe(n,n,e),this.viewpoint=n}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);const r=this._get("extent");return void(r&&(this._set("extent",void 0),this._set("center",r.center)))}const n=this.viewpoint;are(n,n,e),this.viewpoint=n}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let n,r;try{n=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?r=new Xe("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(r=new Xe("mapview:invalid-viewpoint","geometry not defined"))}catch(s){r=new Xe("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(r)return void kt.getLogger(this).error(r);this._scaleBeforeChangingSpatialReference=null;const i=new fu({targetGeometry:new Jt,scale:0,rotation:0});da(i,n),this.constraints?.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this._set("viewpoint",i)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const n=this.constraints?.zoomToScale(e)??0;if(!n)return void this._set("zoom",-1);const r=this.viewpoint;are(r,r,n),this.viewpoint=r,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:n,constraints:r}=this,i=this._get("center"),s=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),c=this._get("zoom"),u=c!=null&&r!=null&&r.zoomToScale(c)||void 0;let h,f,g;const y=l?.rotation,_=l?.targetGeometry;_?.type==="extent"?h=_:_?.type==="point"&&(f=_,g=l?.scale);const b=s??h;return{center:i??f??b?.center,rotation:a??y,scale:(o??u??g??(b&&pL(b,[e[0]-n.left-n.right,e[1]-n.top-n.bottom])))||void 0}}startup(e,n,r,i){const s=e.targetGeometry;try{this._project(e,r)}catch(o){kt.getLogger(this).warn(new jd("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:s.toJSON(),spatialReference:r,error:o})),e.targetGeometry=i||new Jt({x:0,y:0,spatialReference:r})}this.constraints?.fit(e),this._set("state",new rH({padding:this.padding,size:n,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[e,n],spatialReference:r,rotation:i,scale:s}=this.state.paddedViewState,o=new Jt({x:e,y:n,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",i),this._set("scale",s),this._set("state",null)}changeSpatialReference(e){const n=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=n.scale;else{const l=n.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,n.viewpoint=l}const r=n.clone(),[i,s]=n.center;let o=null;try{o=this._project(new Jt({x:i,y:s,spatialReference:n.spatialReference}),e)}catch(l){Hpe()||kt.getLogger(this).warn(new jd("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o?.toJSON(),spatialReference:e,error:l}))}o||(o=new Jt({x:0,y:0,spatialReference:e}));const a=GV(new fu({targetGeometry:new Jt,scale:0,rotation:0}),n.viewpoint,o);r.viewpoint=a;try{const c=[n.size[0]/2,n.size[1]/2],u=[c[0]+20,c[1]],h=n.toMap([0,0],u),{x:f,y:g}=this._project(new Jt({x:h[0],y:h[1],spatialReference:n.spatialReference}),e);h[0]=f,h[1]=g,r.toScreen(h,h);const y=GZe(c,h,u),_=Math.hypot(h[0]-c[0],h[1]-c[1])/20;!Number.isFinite(_)||Math.abs(_)>4?(a.rotation=0,a.targetGeometry=new Jt({x:0,y:0,spatialReference:e})):(a.scale*=_,a.scale>ye("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(y)?y:0)}catch{}this._get("constraints")?.constrain(a,void 0),this._get("state").viewpoint=a}resize(e,n){if(!this.ready)return;const r=this.state;let i=this.state.paddedViewState.viewpoint;const s=this.state.paddedViewState.size.slice();r.size=[e,n],BZe(i,i,s,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints?.constrain(i,void 0)??i,this.state.viewpoint=i}toMap(e){if(!this.ready)return null;const n=[0,0],[r,i]=this.state.toMap(n,[e.x,e.y]),s=this.state.spatialReference;return new Jt({x:r,y:i,spatialReference:s})}toScreen(e,n){if(!this.ready)return null;const r=this._project(e,this.state.spatialReference),i=[r.x,r.y];return n?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(i,i),this.state.toScreen(i,i),Hs(i[0],i[1])}_project(e,n){const r=e?.targetGeometry||e;if(!n)return e;if(!r)return null;if(n.imageCoordinateSystem||r.spatialReference?.imageCoordinateSystem||go(n,r.spatialReference))return e;const i=wv(r,n);if(!i)throw new Xe("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:r,spatialReference:n});return wJe(e)?(e.targetGeometry=i,e):i}};function wJe(t){return t?.declaredClass==="esri.Viewpoint"}x([E({type:Jt})],Xo.prototype,"center",null),x([E()],Xo.prototype,"constraints",void 0),x([E({type:Vn})],Xo.prototype,"extent",null),x([E({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Xo.prototype,"padding",null),x([E()],Xo.prototype,"ready",void 0),x([E()],Xo.prototype,"resizeAlign",void 0),x([E({readOnly:!0})],Xo.prototype,"resolution",null),x([E({type:Number})],Xo.prototype,"rotation",null),x([E({type:Number})],Xo.prototype,"scale",null),x([E({readOnly:!0})],Xo.prototype,"state",void 0),x([E({type:fu})],Xo.prototype,"viewpoint",null),x([E({readOnly:!0})],Xo.prototype,"visibleArea",null),x([E()],Xo.prototype,"zoom",null),Xo=x([ue("esri.views.2d.ViewStateManager")],Xo);const gre=160;let GS=class extends Kt{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=gre&&this.clear()},gre))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};x([E()],GS.prototype,"_timer",void 0),x([E()],GS.prototype,"stationary",null),GS=x([ue("esri.views.2d.support.StationaryManager")],GS);const bJe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.fullOpacity=1,this.stateManager=new Xo({constraints:new mre({view:this})}),this.stationaryManager=new GS,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1},this.frameTask=new yJe(this),this.viewEvents=new hve(this),this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([fn(()=>this.viewpoint,()=>this.stationaryManager.flip(),Kg)])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(r){this.stateManager.extent=r}get state(){return this.stateManager.state}get interacting(){return!1}get stationary(){return!this.animation&&this.stationaryManager.stationary}set animation(r){const i=this._get("animation");if(r===i)return;if(i&&i.stop(),r!==this.animationManager.animation&&this.animationManager.stop(),!r||r.isFulfilled())return void this._set("animation",null);this._set("animation",r);const s=()=>{this.destroyed||r===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame())};r.when(s,s)}get constraints(){return this.stateManager?.constraints}set constraints(r){r.view=this;const i=this.stateManager.constraints;this.stateManager.constraints=r,i?.destroy()}get padding(){return this.stateManager?.padding}set padding(r){this.stateManager&&(this.stateManager.padding=r)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(r){this.stateManager.resizeAlign=r}get rotation(){return this.stateManager.rotation??0}set rotation(r){const{rotationEnabled:i}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=r,this.constraints.rotationEnabled=i}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(r){this.stateManager.viewpoint=r,this.frameTask.requestFrame()}};return x([E({readOnly:!0})],n.prototype,"animationManager",void 0),x([E({readOnly:!0})],n.prototype,"fullOpacity",void 0),x([E()],n.prototype,"stateManager",void 0),x([E()],n.prototype,"constraintsInfo",null),x([E()],n.prototype,"extent",null),x([E({readOnly:!0})],n.prototype,"state",null),x([E({readOnly:!0})],n.prototype,"mapViewNavigation",void 0),x([E()],n.prototype,"renderingOptions",void 0),x([E({readOnly:!0})],n.prototype,"interacting",null),x([E()],n.prototype,"stationary",null),x([E()],n.prototype,"animation",null),x([E({type:mre})],n.prototype,"constraints",null),x([E()],n.prototype,"padding",null),x([E()],n.prototype,"resizeAlign",null),x([E()],n.prototype,"rotation",null),x([E({readOnly:!0})],n.prototype,"viewEvents",void 0),x([E({type:fu})],n.prototype,"viewpoint",null),n=x([ue("esri.views.Viewport2DBaseMixin")],n),n},EJe=()=>nr.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;var Yw;let fx=(Yw=class extends DB{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=xc(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new Xe("view:animation-stopped","ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,n){n||(n=ga(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",n)}},Yw.state={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"},Yw);x([E({readOnly:!0})],fx.prototype,"done",null),x([E({readOnly:!0,type:String})],fx.prototype,"state",void 0),x([E()],fx.prototype,"target",void 0),fx=x([ue("esri.views.ViewAnimation")],fx);const YV=fx;let m3=class extends Kt{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(e,n){if(!e)return void kt.getLogger(this).error("#goTo()","target cannot be null or undefined");const r=new YV;this.view.animation=r,await aW(()=>this.view.ready,n);const i={...n,animate:n?.animate??(!EJe()&&this.view.animationsEnabled),animationMode:n?.animationMode??"auto"},{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:u,allLayerViews:h}=this.view,f=MZe(e,{extent:s,spatialReference:o,size:a,viewpoint:l,constraints:c,padding:u,allLayerViews:h,pickClosestTarget:n?.pickClosestTarget??!0});return r?.update(f),this._gotoTask={},i.animate?this._gotoAnimated(f,i):this._gotoImmediate(f,i)}_gotoImmediate(e,n){const r=this._gotoTask,i=this.view.animation,s=e.then(o=>{if(mi(n),r!==this._gotoTask)throw new Xe("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=i.target=o,i.finish()});return this._cancellableGoTo(r,i,s,n)}_gotoAnimated(e,n){const r=this._gotoTask,i=this.view.animation;if(!i)return Promise.resolve();const s=e.then(o=>{if(mi(n),r!==this._gotoTask)throw new Xe("view:goto-interrupted","Goto was interrupted");return i.update(o),this.view.animationManager.animate(i,this.view.viewpoint,n),i.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,i,s,n)}_cancellableGoTo(e,n,r,i){const s=()=>e===this._gotoTask;return oje(r,i).finally(()=>{s()&&(n.done||n.stop())})}};x([E({constructOnly:!0})],m3.prototype,"view",void 0),m3=x([ue("esri.views.2d.GoToManager")],m3);function n_e(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}function r_e(t,e){return e.some(n=>n_e(t,n))}function yre(t,{dragPrimary:e,dragSecondary:n,dragTertiary:r}){return[{key:"primary",value:e},{key:"secondary",value:n},{key:"tertiary",value:r}].filter(i=>i.value===t).map(i=>i.key)}let vre=class extends Zs{constructor(e,n){super(!0),this._view=e,this.registerIncoming("double-click",n,r=>this._handleDoubleClick(r,n))}_handleDoubleClick(e,n){n_e(e.data,"primary")&&(e.stopPropagation(),n?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},SJe=class extends Zs{constructor(e,n,r){super(!0),this.view=e,this.pointerType=n,this.registerIncoming("double-tap-drag",r,i=>this._handleDoubleTapDrag(i))}_handleDoubleTapDrag(e){const{data:n}=e,{pointerType:r}=n;if(r!==this.pointerType)return;e.stopPropagation();const{action:i,delta:s}=n,{view:o}=this,{mapViewNavigation:a}=o;switch(i){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,c=this._startScale*l,u=c/this._currentScale;a.setViewpointImmediate(u),this._currentScale=c;break}case"end":{const{constraints:l}=o,{effectiveLODs:c,snapToZoom:u}=l;if(!u||!c)return void a.end();const h=l.snapScale(this._currentScale),f=(s.y>0?Math.max(h,l.snapToPreviousScale(this._startScale)):Math.min(h,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(f).then(()=>{a.end()});break}}}},gL=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const n=e.data,r=n.pointers.size;switch(n.action){case"start":this._currentCount=r,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=r,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},TJe=class extends Zs{constructor(e,n,r){super(!0),this.view=e,this.pointerActions=n,this.registerIncoming("drag",r,i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new gL({start:(n,r)=>{this.view.mapViewNavigation.pan.begin(this.view,r.data),r.stopPropagation()},update:(n,r)=>{this.view.mapViewNavigation.pan.update(this.view,r.data),r.stopPropagation()},end:(n,r)=>{this.view.mapViewNavigation.pan.end(this.view,r.data),r.stopPropagation()},condition:(n,r)=>n===1&&r_e(r.data,this.pointerActions)})}_handleDrag(e){const n=this.view.mapViewNavigation;n.pinch.zoomMomentum||n.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},kJe=class extends Zs{constructor(e,n,r){super(!0),this._view=e,this.pointerActions=n;const i=this._view.mapViewNavigation;this._dragEventSeparator=new gL({start:(s,o)=>{i.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{i.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{i.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&r_e(o.data,this.pointerActions)}),this.registerIncoming("drag",r,s=>this._dragEventSeparator.handle(s))}};function i_e(t){const e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function AJe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function IJe(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function PJe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function s_e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function o_e(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function a_e(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function CJe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function RJe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function MJe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function NJe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function OJe(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function LJe(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function DJe(t,e=0,n=1){return t[0]=Math.min(Math.max(t[0],e),n),t[1]=Math.min(Math.max(t[1],e),n),t[2]=Math.min(Math.max(t[2],e),n),t}function jJe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function l_e(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function $Je(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function c_e(t,e){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function u_e(t,e){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function h_e(t){const e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function FJe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function VJe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function XV(t,e){const n=e[0],r=e[1],i=e[2];let s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function d_e(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function zJe(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function GJe(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2],c=i*l-s*a,u=s*o-r*l,h=r*a-i*o,f=Math.sqrt(c*c+u*u+h*h);return t[0]=c/f,t[1]=u/f,t[2]=h/f,t}function UJe(t,e,n,r){const i=e[0],s=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t}function BJe(t,e,n,r,i,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,c=o*(s-1),u=o*(3-2*s);return t[0]=e[0]*a+n[0]*l+r[0]*c+i[0]*u,t[1]=e[1]*a+n[1]*l+r[1]*c+i[1]*u,t[2]=e[2]*a+n[2]*l+r[2]*c+i[2]*u,t}function WJe(t,e,n,r,i,s){const o=1-s,a=o*o,l=s*s,c=a*o,u=3*s*a,h=3*l*o,f=l*s;return t[0]=e[0]*c+n[0]*u+r[0]*h+i[0]*f,t[1]=e[1]*c+n[1]*u+r[1]*h+i[1]*f,t[2]=e[2]*c+n[2]*u+r[2]*h+i[2]*f,t}function HJe(t,e=1){const n=mW,r=2*n()*Math.PI,i=2*n()-1,s=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*s,t[1]=Math.sin(r)*s,t[2]=i*e,t}function qJe(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12],t[1]=n[1]*r+n[5]*i+n[9]*s+n[13],t[2]=n[2]*r+n[6]*i+n[10]*s+n[14],t}function KJe(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function YJe(t,e,n){const r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=i*c-s*l,h=s*a-r*c,f=r*l-i*a,g=i*f-s*h,y=s*u-r*f,_=r*h-i*u,b=2*o;return t[0]=a+u*b+2*g,t[1]=l+h*b+2*y,t[2]=c+f*b+2*_,t}function XJe(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function ZJe(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function JJe(t,e,n,r){const i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function QJe(t,e){XV(_re,t),XV(xre,e);const n=d_e(_re,xre);return n>1?0:n<-1?Math.PI:Math.acos(n)}const _re=h0(),xre=h0();function eQe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function tQe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function nQe(t,e){if(t===e)return!0;const n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=kl();return Math.abs(n-s)<=l*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-o)<=l*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=l*Math.max(1,Math.abs(i),Math.abs(a))}function rQe(t,e,n){const r=n[0]-e[0],i=n[1]-e[1],s=n[2]-e[2];let o=r*r+i*i+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=r*o,t[1]=i*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const iQe=s_e,sQe=o_e,oQe=a_e,aQe=c_e,lQe=u_e,cQe=i_e,uQe=h_e;Object.freeze(Object.defineProperty({__proto__:null,abs:MJe,add:PJe,angle:QJe,bezier:WJe,ceil:CJe,clamp:DJe,copy:AJe,cross:zJe,crossAndNormalize:GJe,direction:rQe,dist:aQe,distance:c_e,div:oQe,divide:a_e,dot:d_e,equals:nQe,exactEquals:tQe,floor:RJe,hermite:BJe,inverse:VJe,len:cQe,length:i_e,lerp:UJe,max:LJe,min:OJe,mul:sQe,multiply:o_e,negate:FJe,normalize:XV,random:HJe,rotateX:XJe,rotateY:ZJe,rotateZ:JJe,round:jJe,scale:l_e,scaleAndAdd:$Je,set:IJe,sign:NJe,sqrDist:lQe,sqrLen:uQe,squaredDistance:u_e,squaredLength:h_e,str:eQe,sub:iQe,subtract:s_e,transformMat3:KJe,transformMat4:qJe,transformQuat:YJe},Symbol.toStringTag,{value:"Module"}));function Fu(t){let e=t*t;return t<0&&(e*=-1),e}function hQe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function dQe(t,e,n){const r=n,i=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(r.translation[0]=Fu(i.axes[0]),r.translation[1]=Fu(i.axes[1]),r.translation[2]=Fu(i.buttons[7])-Fu(i.buttons[6]),r.heading=Fu(i.axes[2]),r.tilt=Fu(i.axes[3])):s.deviceType==="spacemouse"&&(r.translation[0]=1.2*Fu(i.axes[0]),r.translation[1]=1.2*Fu(i.axes[1]),r.translation[2]=2*-Fu(i.axes[2]),r.heading=1.2*Fu(i.axes[5]),r.tilt=1.2*Fu(i.axes[3])),r.tilt*=o,l_e(r.translation,r.translation,a),r}function fQe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let pQe=class extends Zs{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new pb,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",n=>this._handleGamePadEvent(n)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([fn(()=>this._view.navigation.gamepad?.enabled,n=>{n?(this._handle.resume(),this._frameTask||(this._frameTask=S2({update:r=>this._frameUpdate(r.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},ya)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const n=this._view.navigation.gamepad.device;n&&e.data.device!==n||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,hQe(this._transformation)):(this._currentDevice=e.data.device,dQe(e.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(e){const n=this._transformation;if(fQe(n))return void this._frameTask?.pause();const r=this._view.viewpoint.clone(),i=this._view.navigation.gamepad.velocityFactor,s=gQe*i*e;mL(r,r,[n.translation[0]*s,-n.translation[1]*s]);const o=1+n.translation[2]*yQe*e,a=this._view.constraints.rotationEnabled?-n.heading*mQe*e:0,l=this._view.size,c=[l[0]/2,l[1]];Gve(r,r,o,a,c,l);const u=this._view.constraints.constrain(r,this._view.viewpoint);this._view.viewpoint=u}};const mQe=.06,gQe=.7,yQe=6e-4;function f_e(t){const e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),Zn(()=>document.removeEventListener("visibilitychange",e))}let vQe=class extends Zs{constructor(e,n,r){super(!0),this.view=e,this.keys=n,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=i=>{const s=this._keyMap[i.data.key];if(i.modifiers.has("Meta")||i.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;i.stopPropagation(),i.preventDefault();const o=i.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[n.left]:"left",[n.right]:"right",[n.up]:"up",[n.down]:"down"},this.registerIncoming("key-down",r,this._handleKey),this.registerIncoming("key-up",r,this._handleKey),this.registerIncoming("blur",r,this._stopMovement),this._visibilityHandle=f_e(i=>i?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){const n=this._currentDirection!=null;if(e!=null){if(n||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else n&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}},_Qe=class extends Zs{constructor(e,n,r){super(!0),this.view=e,this.keys=n,this._keyToDirection=new Map,this._pressed=!1,this._addKeysMapping(n),this.registerIncoming("key-down",r,i=>this._handleKeyDown(i)),this.registerIncoming("key-up",r,i=>this._handleKeyUp(i)),this.registerIncoming("blur",r,()=>this._handleStop()),this._visibilityHandle=f_e(i=>i?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_addKeysMapping(e){this._addKeyMapping(e.clockwise,"clockwise"),this._addKeyMapping(e.counterClockwise,"counterClockwise"),this._addKeyMapping(e.reset,"reset")}_addKeyMapping(e,n){for(const r of e)this._keyToDirection.set(r,n)}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,n){const r=e.modifiers;if(r.size>0&&!r.has("Shift")||!this.view.constraints.rotationEnabled)return;const i=this._keyToDirection.get(e.data.key);if(this._pressed=i!=null,this._pressed){if(e.preventDefault(),n)switch(this.view.mapViewNavigation.begin(),i){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},xQe=class extends Zs{constructor(e,n,r){super(!0),this.view=e,this.keys=n,this._keysToZoomAction={},this.registerIncoming("key-down",r,i=>this._handleKeyDown(i)),n.zoomIn.forEach(i=>this._keysToZoomAction[i]=0),n.zoomOut.forEach(i=>this._keysToZoomAction[i]=1)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const n=e.modifiers;if(n.size>0&&!n.has("Shift"))return;const{key:r}=e.data;if(!(r in this._keysToZoomAction))return;const i=this._keysToZoomAction[r],{mapViewNavigation:s}=this.view;let o=null;switch(i){case 0:o=s.zoomIn();break;case 1:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),e.stopPropagation()}};const wQe=.6;let bQe=class extends Zs{constructor(e,n){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",n,r=>this._handleMouseWheel(r))}_handleMouseWheel(e){if(this._view.navigation.actionMap.mouseWheel!=="zoom"||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const n=this._view.mapViewNavigation,{x:r,y:i,deltaY:s}=e.data,o=1/wQe**(1/60*s),a=n.zoom(o,[r,i]);this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,n.end()})}},EQe=class extends Zs{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const n=this.view.mapViewNavigation;this._dragEventSeparator=new gL({start:(r,i)=>{n.pinch.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{n.pinch.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{n.pinch.end(this.view),i.stopPropagation()},condition:r=>r>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function wre(t){const e=t.native;return e?{buttons:e.buttons.map(n=>n.pressed?n.value||1:0),axes:e.axes.map(n=>kQe(n,t.axisThreshold))}:{buttons:[],axes:[]}}function SQe(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let n=0;n<t.axes.length;n++)if(t.axes[n]!==e.axes[n])return!1;for(let n=0;n<t.buttons.length;n++)if(t.buttons[n]!==e.buttons[n])return!1;return!0}function TQe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function kQe(t,e){const n=Math.abs(t);return n<e?0:Math.sign(t)*(n-e)/(1-e)}let AQe=class{constructor(e,n){this._element=e,this._input=n,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,wre(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const r="getGamepads"in window.navigator,i=window.isSecureContext;this.supported=r&&i,this.supported&&(bre(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const n=new qW(e);n.deviceType!=="unknown"&&(this._inputDevices[e.index]=n,this._input.gamepad.devices.add(n)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=S2({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),n=this._element.contains(document.activeElement),r=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!n;bre(i=>{const s=this._inputDevices[i.index];if(!s)return;const o=this._latestUpdate[i.index],a=wre(s),l=r||TQe(a);o&&(o.timestamp===i.timestamp||!o.active&&l||SQe(o.state,a))||this._emitGamepadEvent(i,a,!l)})}_emitGamepadEvent(e,n,r){const i=this._latestUpdate[e.index],s=i&&i.active;if(!s&&!r)return;const o=!s&&r?"start":s&&r?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:n,active:r},this._callback&&this._callback({device:this._inputDevices[e.index],state:n,action:o})}};function IQe(t){if(!t||!t.connected)return!1;for(let e=0;e<t.axes.length;e++)if(isNaN(t.axes[e]))return!1;return!0}function bre(t){for(const e of navigator.getGamepads())IQe(e)&&t(e)}const Ere=ye("edge"),PQe=ye("chrome"),CQe=ye("ff"),RQe=ye("safari"),Sre="esri-view-surface",M_={touchNone:`${Sre}--touch-none`,touchPan:`${Sre}--touch-pan`};var _1;let MQe=(_1=class{constructor(e,n){this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new AQe(e,n),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>this._releasePointerCaptureSafe(e)),this._activePointerCaptures.clear(),this._gamepadSource=Di(this._gamepadSource),this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const n in this._active)if(!e||!e.has(n)){const r=this._active[n];this._element.removeEventListener(E$[n],r),delete this._active[n]}e&&e.forEach(n=>{if(!this._active[n]&&E$[n]){const r=(this._eventHandlers[n]||this._handleDefault).bind(this,n);this._element.addEventListener(E$[n],r),this._active[n]=r}}),this._gamepadSource&&(this._gamepadSource.hasEventListeners=e?.has("gamepad")??!1)}setPointerCapture(e,n){n?this._setPointerCaptureSafe(e.pointerId):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?M_.touchNone:M_.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?M_.touchPan:M_.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(M_.touchNone),this._element.classList.remove(M_.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCaptureSafe(e){try{this._element.setPointerCapture(e),this._activePointerCaptures.add(e)}catch{}}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,n){const r=fve(this._element,e);return _1.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),n.x=r.x,n.y=r.y,n}_handleKey(e,n){const{key:r}=n;r&&e==="key-up"&&this._keyDownState.delete(r);const i={native:n,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&e==="key-down"&&this._keyDownState.add(i.key),this._callback(e,i)}_handlePointer(e,n){const r=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,pointerType:n.pointerType,button:n.button,buttons:n.buttons,eventId:this._eventId++});this._callback(e,r)}_handlePointerPreventDefault(e,n){const r=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,pointerType:n.pointerType,button:n.button,buttons:n.buttons,eventId:this._eventId++});n.preventDefault(),this._callback(e,r)}_getDeltaFromTrackpadOrMouseWheel(e){return e.shiftKey&&ye("mac")&&e.deltaY===0?e.deltaX:e.deltaY}_handleMouseWheel(e,n){let r=this._getDeltaFromTrackpadOrMouseWheel(n);switch(n.deltaMode){case 0:Ere&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}Ere?r*=.7:PQe||RQe?r*=.6:CQe&&(r*=1.375);const i=100,s=Math.abs(r);s>i&&(r=r/s*200/(1+Math.exp(-.02*(s-i))));const o=this._updateNormalizedPointerLikeEvent(n,{native:n,x:0,y:0,deltaY:r});this._callback(e,o)}_handlePointerCaptureLost(e,n){this._activePointerCaptures.delete(n.pointerId),this._handleDefault(e,n)}_handleDefault(e,n){const r={native:n};n.preventDefault(),this._callback(e,r)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}},_1.test={disableSubpixelCoordinates:!1},_1);const E$={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let NQe=class extends Zs{constructor(){super(!0),this.registerIncoming("context-menu",e=>e.data.native.preventDefault())}};const p_e=()=>({maximumClickDelay:300}),OQe=(t={})=>({...p_e(),movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,...t}),sH=(t={})=>({...p_e(),maximumDoubleClickDistance:10,maximumDoubleTouchDistance:35,maximumDoubleClickDelay:250,maximumDoubleTouchDelay:350,...t});function _N(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function LQe(t,e){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}function DQe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Hs()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[I,P]=t,[N,L]=[P.x-I.x,P.y-I.y];return e.radius=Math.sqrt(N*N+L*L)/2,e.center.x=(I.x+P.x)/2,e.center.y=(I.y+P.y)/2,e}let n=0,r=0;for(let I=0;I<t.length;I++)n+=t[I].x,r+=t[I].y;n/=t.length,r/=t.length;const i=t.map(I=>I.x-n),s=t.map(I=>I.y-r);let o=0,a=0,l=0,c=0,u=0,h=0,f=0;for(let I=0;I<i.length;I++){const P=i[I],N=s[I],L=P*P,C=N*N;o+=L,a+=C,l+=P*N,c+=L*P,u+=C*N,h+=P*C,f+=N*L}const g=.5*(c+h),y=.5*(u+f),_=o*a-l*l,b=(g*a-y*l)/_,T=(o*y-l*g)/_,A=Hs(b+n,T+r);return{radius:Math.sqrt(b*b+T*T+(o+a)/t.length),center:A}}function f1(t){const{native:e}=t,{pointerId:n,button:r,pointerType:i}=e;return i==="mouse"?`${n}:${r}`:`${i}`}let jQe=class extends Zs{constructor(e={},n=ub){super(!1),this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Hs(0,0),this._pointerState=new Map,this._parameters=sH(e),this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new gL({start:(r,i)=>this._dragStart(r,i),update:(r,i)=>this._dragUpdate(i),end:(r,i)=>this._dragEnd(i)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=ii(e.doubleTapTimeout)})}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleTapTimeout!=null)return!0;return!1}_clearPointerDown(e){const n=this._pointerState.get(e);n&&(n.doubleTapTimeout=ii(n.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_dragStart(e,n){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:r,modifiers:i}=n,{center:s}=r;this._dragStartCenter=s;const o=S$("begin",Hs(0,0),r);this._doubleTapDrag.emit(o,void 0,i),n.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:n,modifiers:r}=e,{center:i}=n,s=S$("update",Hs(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(s,void 0,r),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:n,modifiers:r}=e,{center:i}=n,s=S$("end",Hs(i.x-this._dragStartCenter.x,i.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(s,void 0,r),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:n}=e,r=f1(n),i=this._pointerState.get(r),{pointerType:s}=n.native;if(i){const o=s==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;this._clearPointerDown(r),_N(i.event.data,n)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:n}=e,{pointerType:r}=n.native,i=f1(n),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(i),s);this._pointerState.set(i,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function S$(t,e,n){const{button:r,buttons:i,pointer:s,pointers:o,pointerType:a,timestamp:l}=n;return{action:t,delta:e,button:r,buttons:i,pointer:s,pointers:o,pointerType:a,timestamp:l}}let $Qe=class extends Zs{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,n,r,i){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:n.buttons,timestamp:i,pointers:FQe(this._activePointerMap),pointer:n,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){const n=e.native.pointerId,r=hR(this._activePointerMap).angle,i={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(n,i);const s=g3(i,m_e(this._activePointerMap));i.initialAngle=s,i.lastAngle=s,this._updatePointerAngles(r)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const n=e.native.pointerId,r=this._activePointerMap.get(n);r?r.event=e:this._addPointer(e)}_removePointer(e){const n=hR(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(n)}_updatePointerAngles(e){const n=hR(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=g3(r,n)-e,r.lastAngle=g3(r,n)-e})}_emitEvent(e,n,r){const i=hR(this._activePointerMap);this._drag.emit(this._createPayload(e,n,i,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const n=e.data.native.pointerId,r=e.timestamp;this._activePointerMap.get(n)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(n)):(this._removePointer(n),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const n=e.data,r=n.currentEvent,i=e.timestamp;switch(n.action){case"start":case"update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&this._emitEvent("update",r,i)):(this._addPointer(r),this._emitEvent("added",r,i),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,i))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function m_e(t){const e=[];return t.forEach(n=>{e.push(Hs(n.event.x,n.event.y))}),DQe(e)}function hR(t){const e=m_e(t);let n=0;return t.forEach(r=>{let i=g3(r,e),s=i-r.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;i=r.lastAngle+s,r.lastAngle=i;const o=i-r.initialAngle;n+=o}),n/=t.size||1,{angle:n,radius:e.radius,center:e.center}}function FQe(t){const e=new Map;return t.forEach((n,r)=>e.set(r,n.event)),e}function g3(t,e){const n=t.event,r=n.x-e.center.x,i=n.y-e.center.y;return Math.atan2(i,r)}let VQe=class extends Zs{constructor(e={},n=ub){super(!1),this._clock=n,this._pointerState=new Map,this._parameters=sH(e),this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const n=e.data,r=f1(n);if(!this._pointerState.has(r)){const i={downButton:n.native.button,x:n.x,y:n.y,immediateDoubleClick:null};this._pointerState.set(r,i),this.startCapturingPointer(n.native)}}_handlePointerUp(e){const n=e.data,r=f1(n),i=this._pointerState.get(r);if(i&&i.downButton===n.native.button){const s=i.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),_N(s,e.data)>o?this._startImmediateDoubleClick(e,i):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(n))):_N(i,e.data)>o?this._removeState(n):this._startImmediateDoubleClick(e,i)}}_startImmediateDoubleClick(e,n){const r=e.data.native.pointerType==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay;n.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),r)}}_removeState(e){const n=f1(e);this._pointerState.delete(n),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}},zQe=class extends Zs{constructor(e={},n=ub){super(!1),this._clock=n,this._pointerState=new Map,this._parameters=OQe(e),this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",r=>this._handlePointerLoss(r,"pointer-up")),this.registerIncoming("pointer-capture-lost",r=>this._handlePointerLoss(r,"pointer-capture-lost")),this.registerIncoming("pointer-cancel",r=>this._handlePointerLoss(r,"pointer-cancel")),this._moveHandle=this.registerIncoming("pointer-move",r=>this._handlePointerMove(r)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=ii(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const n=e.data,r=n.native.pointerId;let i=null;this._pointerState.size===0&&(i=this._clock.setTimeout(()=>{const o=this._pointerState.get(r);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._parameters.holdDelay));const s={startEvent:n,previousEvent:n,startTimestamp:e.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:i,modifiers:new Set};this._pointerState.set(r,s),this.startCapturingPointer(n.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_handlePointerMove(e){const n=e.data,r=n.native.pointerId,i=this._pointerState.get(r);i&&(i.isDragging?this._pointerDrag.emit(dR("update",i,n),void 0,i.modifiers):LQe(n,i.startEvent)>this._getDragThreshold(n.native.pointerType)&&this._startDragging(e),i.previousEvent=n)}_getDragThreshold(e){switch(e){case"touch":return this._parameters.movementUntilTouchDrag;case"pen":return this._parameters.movementUntilPenDrag;default:return this._parameters.movementUntilMouseDrag}}_startDragging(e){const n=e.data,r=n.native.pointerId;this._pointerState.forEach(i=>{i.holdTimeout!=null&&(i.holdTimeout.remove(),i.holdTimeout=null),i.isDragging||(i.modifiers=e.modifiers,i.isDragging=!0,r===i.startEvent.native.pointerId?this._pointerDrag.emit(dR("start",i,n)):this._pointerDrag.emit(dR("start",i,i.previousEvent),e.timestamp))})}_handlePointerLoss(e,n){const r=e.data,i=r.native.pointerId,s=this._pointerState.get(i);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(dR("end",s,n==="pointer-up"?r:s.previousEvent),void 0,s.modifiers):n==="pointer-up"&&s.downButton===r.native.button&&e.timestamp-s.startTimestamp<=this._parameters.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(r),this._pointerState.delete(i),this.stopCapturingPointer(r.native),this._pointerState.size===0&&this._moveHandle.pause())}};function dR(t,e,n){return{action:t,startEvent:e.startEvent,previousEvent:e.previousEvent,currentEvent:n}}let GQe=class extends Zs{constructor(e={},n=ub){super(!1),this._clock=n,this._pointerState=new Map,this._parameters=sH(e),this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",r=>this._handleImmediateClick(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=ii(e.doubleClickTimer))}get hasPendingInputs(){for(const e of this._pointerState.values())if(e.doubleClickTimer!=null)return!0;return!1}_clearDoubleClickTimer(e,n){const r=this._pointerState.get(e);r&&(r.doubleClickTimer=ii(r.doubleClickTimer),n&&this._click.emit(r.event.data,void 0,r.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const n=this._pointerState.get(e);n.pointerDownCount===1&&this._click.emit(n.event.data,void 0,n.event.modifiers),n.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_handleImmediateClick(e){const n=e.data,{pointerType:r}=n.native,i=UQe(n);if(!this._pointerState.has(i))return void this._startClick(e);const s=this._pointerState.get(i),{data:o,modifiers:a}=s.event,l=r==="touch"?this._parameters.maximumDoubleTouchDistance:this._parameters.maximumDoubleClickDistance;_N(o,n)>l?(this._clearDoubleClickTimer(i,!0),this._startClick(e)):(this._clearDoubleClickTimer(i,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const n=f1(e.data),r=this._pointerState.get(n);r&&(r.pointerDownCount+=1)}_startClick(e){const{data:n}=e,{native:{pointerType:r}}=n,i=f1(n),s=r==="touch"?this._parameters.maximumDoubleTouchDelay:this._parameters.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(i),s);this._pointerState.set(i,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function UQe(t){const{pointerId:e,pointerType:n,button:r}=t.native;return n==="mouse"?`${e}:${r}`:`${n}`}const fR={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]}},Tre=Symbol("handles");let px=class extends Kt{initialize(){const e=()=>this.view?.ready;this.addHandles([wc(()=>!e(),()=>this._disconnect()),wc(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerInfo(){return this._inputManager?.latestPointerInfo}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this.removeHandles(Tre),this._inputManager=Di(this._inputManager)}_connect(){const e=this.view.surface,n=new MQe(e,this.view.input),r=[new VQe,new zQe,new GQe,new $Qe(this.view.navigation),new jQe],i=new Bu({eventSource:n,recognizers:r}),s=new TJe(this.view,["primary"]),o=new kJe(this.view,["secondary"]);i.installHandlers("prevent-context-menu",[new NQe],ap.INTERNAL),i.installHandlers("navigation",[new EQe(this.view),new pQe(this.view),new bQe(this.view),new vre(this.view),new vre(this.view,[fR.counter]),s,new vQe(this.view,fR.pan),new xQe(this.view,fR.zoom),new _Qe(this.view,fR.rotate),o,new SJe(this.view,"touch")],ap.INTERNAL),this.view.viewEvents.connect(i),this._source=n,this._inputManager=i,this.addHandles([fn(()=>this.view?.navigation?.browserTouchPanEnabled,a=>{this._source&&(this._source.browserTouchPanningEnabled=!a)},ya),fn(()=>{const{actionMap:a}=this.view.navigation;return{panActions:yre("pan",a),rotateActions:yre("rotate",a)}},({panActions:a,rotateActions:l})=>{s.pointerActions=a,o.pointerActions=l},ra)],Tre)}get test(){}};x([E()],px.prototype,"view",void 0),x([E()],px.prototype,"latestPointerInfo",null),x([E()],px.prototype,"multiTouchActive",null),px=x([ue("esri.views.2d.input.MapViewInputManager")],px);const BQe=px,WQe=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.goToManager=new m3({view:this}),this.animationsEnabled=!0,this.inputManager=new BQe({view:this}),this.addHandles([this.on("resize",i=>this.stateManager.resize(i.width,i.height))])}get interacting(){return this.navigating}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}on(r,i,s,o){return this.viewEvents.on(r,i,s,o)||super.on(r,i)}hasEventListener(r){return super.hasEventListener(r)||this.viewEvents.hasHandler(r)}goTo(r,i){return this.goToManager.goTo(r,i)}toMap(r){if(!this.ready)return null;const i=mve(r)?pve(this,r):r;return this.stateManager.toMap(i)}};return x([E()],n.prototype,"goToManager",void 0),x([E({readOnly:!0})],n.prototype,"interacting",null),x([E()],n.prototype,"stationary",null),x([E()],n.prototype,"animationsEnabled",void 0),x([E({readOnly:!0})],n.prototype,"inputManager",void 0),n=x([ue("esri.views.Viewport2DMixin")],n),n};let kre=class{constructor(e){this._view=e,this.viewpoint=new fu({targetGeometry:new Jt,scale:0,rotation:0})}get view(){return this._view}get size(){const[e,n]=this._view.size;return Math.sqrt(e*e+n*n)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return Vve(this.center.spatialReference)}pixelsPerPanAtZoom(e){return 1/(e*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(e){return 1/(e*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(e,n){n.pan=fme(this.center,e.center);let r=Math.abs(e.rotation-this.rotation);r=r>=180?360-r:r,n.rotate=PI(r),n.sourceZoom=this.scale,n.targetZoom=e.scale}interpolate(e,n,r){const{pan:i,rotate:s,zoom:o,zoomOffset:a}=r,{center:l}=this;l.spatialReference=e.center.spatialReference,l.x=_S(e.center.x,n.center.x,i),l.y=_S(e.center.y,n.center.y,i),this.viewpoint.scale=_S(e.scale,n.scale+a,o);let c=e.rotation;const u=n.rotation;Math.abs(u-c)>=180&&(c+=360*(c<u?1:-1)),this.viewpoint.rotation=_S(c,u,s)}copyFrom(e){da(this.viewpoint,e.viewpoint),this._view=e.view}};function HE(t,e,n,r){const i=3*t,s=3*(n-t)-i,o=1-i-s,a=3*e,l=3*(r-e)-a,c=1-a-l;function u(y){return((o*y+s)*y+i)*y}function h(y){return((c*y+l)*y+a)*y}function f(y){return(3*o*y+2*s)*y+i}function g(y,_){let b,T,A,I,P,N;for(A=y,N=0;N<8;N++){if(I=u(A)-y,Math.abs(I)<_)return A;if(P=f(A),Math.abs(P)<1e-6)break;A-=I/P}if(b=0,T=1,A=y,A<b)return b;if(A>T)return T;for(;b<T;){if(I=u(A),Math.abs(I-y)<_)return A;y>I?b=A:T=A,A=.5*(T-b)+b}return A}return function(y,_=1e-6){return h(g(y,_))}}const Yc={};Yc.ease=HE(.25,.1,.25,1),Yc.linear=HE(0,0,1,1),Yc.easeIn=Yc["ease-in"]=HE(.42,0,1,1),Yc.easeOut=Yc["ease-out"]=HE(0,0,.58,1),Yc.easeInOut=Yc["ease-in-out"]=HE(.42,0,.58,1);const HQe=t=>t,hA=t=>t*t,xN=t=>1-hA(1-t),Are=t=>t<.5?hA(2*t)/2:(xN(2*(t-.5))+1)/2,wN=t=>t*t*t,ZV=t=>1-wN(1-t),Ire=t=>t<.5?wN(2*t)/2:(ZV(2*(t-.5))+1)/2,bN=t=>t*t*t*t,JV=t=>1-bN(1-t),Pre=t=>t<.5?bN(2*t)/2:(JV(2*(t-.5))+1)/2,EN=t=>t*t*t*t*t,QV=t=>1-EN(1-t),Cre=t=>t<.5?EN(2*t)/2:(QV(2*(t-.5))+1)/2,SN=t=>1-Math.cos(t*Math.PI/2),ez=t=>1-SN(1-t),Rre=t=>t<.5?SN(2*t)/2:(ez(2*(t-.5))+1)/2,TN=t=>2**(10*(t-1)),kN=t=>1-TN(1-t),Mre=t=>t<.5?TN(2*t)/2:(kN(2*(t-.5))+1)/2,AN=t=>-(Math.sqrt(1-t*t)-1),tz=t=>1-AN(1-t),Nre=t=>t<.5?AN(2*t)/2:(tz(2*(t-.5))+1)/2;function xu(t){const e=2*(t-Math.sqrt((t-1)*t)),n=e/2/t;return r=>r<n?t*r*r:e*r-e+1}function wu(t,e){return(n,r)=>n<e?e*t(n/e,r):1-t((1-n)/(1-e),r)*(1-e)}const Ore=wu(xu(1),1),Lre=wu(xu(1),0),IN=wu(xu(1),.5),Dre=wu(xu(2),1),jre=wu(xu(2),0),$re=wu(xu(2),.5),Fre=wu(xu(3),1),Vre=wu(xu(3),0),zre=wu(xu(3),.5),Gre=wu(xu(4),1),Ure=wu(xu(4),0),Bre=wu(xu(4),.5),Wre={linear:HQe,"in-quad":hA,"out-quad":xN,"in-out-quad":Are,"in-coast-quad":Ore,"out-coast-quad":Lre,"in-out-coast-quad":IN,"in-cubic":wN,"out-cubic":ZV,"in-out-cubic":Ire,"in-coast-cubic":Dre,"out-coast-cubic":jre,"in-out-coast-cubic":$re,"in-quart":bN,"out-quart":JV,"in-out-quart":Pre,"in-coast-quart":Fre,"out-coast-quart":Vre,"in-out-coast-quart":zre,"in-quint":EN,"out-quint":QV,"in-out-quint":Cre,"in-coast-quint":Gre,"out-coast-quint":Ure,"in-out-coast-quint":Bre,"in-sine":SN,"out-sine":ez,"in-out-sine":Rre,"in-expo":TN,"out-expo":kN,"in-out-expo":Mre,"in-circ":AN,"out-circ":tz,"in-out-circ":Nre,"quad-in":hA,"quad-out":xN,"quad-in-out":Are,"quad-in-coast":Ore,"quad-out-coast":Lre,"quad-in-out-coast":IN,"cubic-in":wN,"cubic-out":ZV,"cubic-in-out":Ire,"cubic-in-coast":Dre,"cubic-out-coast":jre,"cubic-in-out-coast":$re,"quart-in":bN,"quart-out":JV,"quart-in-out":Pre,"quart-in-coast":Fre,"quart-out-coast":Vre,"quart-in-out-coast":zre,"quint-in":EN,"quint-out":QV,"quint-in-out":Cre,"quint-in-coast":Gre,"quint-out-coast":Ure,"quint-in-out-coast":Bre,"sine-in":SN,"sine-out":ez,"sine-in-out":Rre,"expo-in":TN,"expo-out":kN,"expo-in-out":Mre,"circ-in":AN,"circ-out":tz,"circ-in-out":Nre,ease:t=>Yc.ease(t),"ease-in":t=>Yc.easeIn(t),"ease-out":t=>Yc.easeOut(t),"ease-in-out":t=>Yc.easeInOut(t)};let qQe=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const PN={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},g_e={maxDuration:4e3};let KQe=class y_e{constructor(e){this._createCamera=e,this.compared=new qQe,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:PN.desiredScreenFlow},this.source=e(),this.target=e()}clone(){const e=new y_e(this._createCamera);return e.copyFrom(this),e}copyFrom(e){this.update(e.source,e.target,e.settings)}update(e,n,r){this.source!==e&&this.source.copyFrom(e),this.target!==n&&this.target.copyFrom(n),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=r.desiredScreenFlow??PN.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(e){const n=this.target.pixelsPerPanAtZoom(e);return this.halfWindowSize/n}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>kl()}get hasFov(){return Math.abs(this.compared.fov)>kl()}get hasRotate(){return this.compared.rotate>kl()}},YQe=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},XQe=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,n)=>e+n.time,0)}interpolateComponentsAt(e,n){e=Math.min(Math.max(e,0),1),e*=this.time;let r=0,i=0;const s=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],c=l.definition;if(e<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:e/l.time,n),s.hasPan&&!isNaN(n.pan)&&isFinite(s.compared.pan)?n.pan=(r+c.compared.pan*n.pan)/s.compared.pan:n.pan=1,s.hasRotate&&!isNaN(n.rotate)&&isFinite(s.compared.rotate)?n.rotate=(i+c.compared.rotate*n.rotate)/s.compared.rotate:n.rotate=1,o&&!isNaN(n.zoom)&&isFinite(c.compared.targetZoom)){const{sourceZoom:u,targetZoom:h}=c.compared,f=n.zoom*(h-u)+u,g=this.segments[0].definition.compared.sourceZoom,y=this.segments[this.segments.length-1].definition.compared.targetZoom,_=Math.abs(h-g)>Math.abs(u-g)?h:u;n.zoomOffset=_-y,n.zoom=(f-g)/(_-g)}else n.zoom=1;return n}e-=l.time,r+=c.compared.pan,i+=c.compared.rotate}}segmentInterpolateComponentsAt(e,n,r){e.interpolateComponentsAt(n,r)}},T$=class{get time(){return this._time}constructor(e){e&&this.update(e)}update(e){e&&(this.definition?this.definition.copyFrom(e):this.definition=e.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const e=this.definition,n=e.compared,r=n.sourceZoom,i=n.targetZoom;this._zoomSign=r>i?1:-1,this._panPixelsAtSource=n.pan*e.source.pixelsPerPanAtZoom(r);const s=(e.source.pixelsPerRotate()+e.target.pixelsPerRotate())/2;this._rotatePixels=n.rotate*s}_updatePixelFlow(){const e=this.definition.compared.sourceZoom,n=this.definition.compared.targetZoom,{hasZoom:r,hasPan:i,hasRotate:s}=this.definition;let o=0,a=0;r&&(i&&(o=(n/e-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(e/n)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(r&&i&&s){const c=o+a+o*a;this._zoomPixelFlow=o*a/c*l,this._panPixelFlow=a/c*l,this._rotatePixelFlow=o/c*l}else if(r&&i){const c=1+o;this._zoomPixelFlow=o/c*l,this._panPixelFlow=1/c*l}else if(r&&s){const c=1+a;this._zoomPixelFlow=a/c*l,this._rotatePixelFlow=1/c*l}else if(i&&s){const c=this._panPixelsAtSource/this._rotatePixels,u=1+c;this._panPixelFlow=c/u*l,this._rotatePixelFlow=1/u*l}else i?this._panPixelFlow=l:r?this._zoomPixelFlow=l:s&&(this._rotatePixelFlow=l);if(this._time=Math.max(this.rotateTime,this.zoomTime,this.panTime),this.fovTime>this._time){const c=this.fovTime/this._time;this._time=this.fovTime,this._zoomPixelFlow/=c,this._panPixelFlow/=c,this._rotatePixelFlow/=c}}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:0}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:0}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/ZQe:0}get panTime(){if(!this.definition.hasPan)return 0;if(this.definition.hasZoom){const e=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,n=e*this._panPixelsAtSource;return Math.log(n*(this._zoomPixelFlow/this._panPixelFlow)+1)/(e*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}_interpolateComponentsZoom(e){if(e===0||e===1)return e;if(this.definition.hasZoom){const n=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom;return(n*(n/r)**-e-n)/(r-n)}return e}_interpolateComponentsFov(e){if(e===0)return this.definition.segmentStart;if(e===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:n,segmentEnd:r}=this.definition;return n+e*(r-n)}return this.definition.segmentStart}_interpolateComponentsPan(e){if(e===0||e===1)return e;if(this.definition.hasPan&&this.definition.hasZoom){const n=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(n*e*this._time)-1))/(n*Math.LN2)}return e}_interpolateComponentsRotate(e){return e}interpolateComponentsAt(e,n){e=Math.min(Math.max(e,0),1),n.zoom=this._interpolateComponentsZoom(e),n.pan=this._interpolateComponentsPan(e),n.rotate=this._interpolateComponentsRotate(e),n.zoomOffset=0,n.fov=this._interpolateComponentsFov(e)}};const ZQe=PI(45);function JQe(t,e,n){const r=e-t.compared.sourceZoom,i=t.halfWindowPanAtZoom(r);return-t.halfWindowSize*(n.ascensionFactor*Math.LN2*t.compared.pan+i)*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2*i)}function QQe(t,e,n){const r=1/e,i=Math.log(t.compared.sourceZoom*r),s=1/t.desiredPixelFlow,o=1/Math.LN2,a=e-t.compared.sourceZoom,l=1/a,c=(n.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(a))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*r*s*o*l*c-t.halfWindowSize*i*s*o*l+t.halfWindowSize*i*s*o*c/(a*a)}function eet(t,e,n){const r=e-t.compared.sourceZoom,i=1/r,s=1/e,o=Math.log(t.compared.sourceZoom*s),a=(n.ascensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(r))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*i*(-2*i*s*a+2*i*o+2*s-2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function tet(t,e){return-t.halfWindowSize*Math.log(t.compared.sourceZoom/e)/(t.desiredPixelFlow*Math.LN2)}function net(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function ret(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function iet(t,e,n){return-t.compared.pan*t.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e))}function set(t,e,n){return t.compared.pan*t.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e))}function oet(t,e,n){return-2*t.compared.pan*t.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(t.desiredPixelFlow*t.halfWindowPanAtZoom(e*e*e))}function aet(t,e,n){return t.halfWindowSize*(-t.halfWindowPanAtZoom(e)-n.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*t.halfWindowPanAtZoom(-e+t.compared.targetZoom))}function cet(t,e,n){const r=Math.log(e/t.compared.targetZoom),i=1/t.desiredPixelFlow,s=1/Math.LN2,o=-e+t.compared.targetZoom,a=1/o,l=(-t.halfWindowPanAtZoom(e)-n.descensionFactor*Math.LN2*t.compared.pan+t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return-t.halfWindowSize*r*i*s*a+t.halfWindowSize*r*i*s*l/(o*o)+t.halfWindowSize*i*s*a*l/e}function uet(t,e,n){const r=e-t.compared.targetZoom,i=1/r,s=1/e,o=Math.log(e/t.compared.targetZoom),a=(t.halfWindowPanAtZoom(e)+n.descensionFactor*Math.LN2*t.compared.pan-t.halfWindowPanAtZoom(t.compared.targetZoom))/t.halfWindowPanAtZoom(1);return t.halfWindowSize*i*(-2*i*s*a-2*i*o+2*s+2*o*a/(r*r)-a/(e*e))/(t.desiredPixelFlow*Math.LN2)}function het(t,e){return t.halfWindowSize*Math.log(e/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2)}function det(t,e){return t.halfWindowSize/(e*t.desiredPixelFlow*Math.LN2)}function fet(t,e){return-t.halfWindowSize/(e*e*t.desiredPixelFlow*Math.LN2)}function pet(t){const e=t.compared.sourceZoom-t.compared.targetZoom;if(e===0)return t.compared.pan*t.halfWindowSize/(t.desiredPixelFlow*t.halfWindowPanAtZoom(t.compared.sourceZoom));const n=Math.LN2*t.compared.pan,r=e,i=t.halfWindowPanAtZoom(r),s=t.halfWindowSize*Math.log(t.compared.sourceZoom/t.compared.targetZoom)/(t.desiredPixelFlow*Math.LN2*i);return t.compared.sourceZoom<=t.compared.targetZoom?s*(n-i):s*(n+i)}function met(t,e){let n=get(t,e);const r={ascensionFactor:e.ascensionFactor!=null?e.ascensionFactor:.5,descensionFactor:e.descensionFactor!=null?e.descensionFactor:.5},i=r.ascensionFactor===0,s=r.descensionFactor===0,o=i?tet:JQe,a=i?net:QQe,l=i?ret:eet,c=s?het:aet,u=s?det:cet,h=s?fet:uet,f=N=>o(t,N,r)+iet(t,N,r)+c(t,N,r),g=N=>a(t,N,r)+set(t,N,r)+u(t,N,r),y=N=>l(t,N,r)+oet(t,N,r)+h(t,N,r);let _=f(n);const b=pet(t);let T;const A=e.maximumIterations||20,I=e.maximumDistance!=null?e.maximumDistance:1/0;for(T=0;T<A;T++){const N=e.desiredSlope??1e-6;let L=g(n);Math.abs(L)>N&&(L+=N);const C=L/y(n);if(isNaN(C)||n>=I&&C<0){if(!isFinite(I))return null;n=I,_=f(n);break}if(n-=C,n<=t.compared.sourceZoom||n<=t.compared.targetZoom)return null;const M=f(n);if(Math.abs(M-_)/_<=.005)break;_=M}return isNaN(_)||_>b*(1-.3)||n<=t.compared.sourceZoom||n<=t.compared.targetZoom?null:n}function get(t,e){const n=Math.max(t.compared.sourceZoom,t.compared.targetZoom),r=t.source.zoomAtPixelsPerPan(t.desiredPixelFlow/t.compared.pan)/2;return r<n?e.maximumDistance!=null?n+(e.maximumDistance-n)/2:1.5*n:e.maximumDistance?Math.min(e.maximumDistance,r):r}let yet=class extends XQe{constructor(e,n){super(),this._preallocSegments=[new T$,new T$,new T$],this._ascensionSegment=null,this._descensionSegment=null,this.update(e,n)}update(e,n){if(!e)return;this.definition?this.definition.copyFrom(e):this.definition=e.clone();const r=n?.apex?met(e,n.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,r?this._updateWithApex(r,n?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(e,n,r){e.interpolateComponentsAt(n,r),e===this._ascensionSegment?r.zoom=xN(r.zoom):e===this._descensionSegment&&(r.zoom=hA(r.zoom))}_updateWithApex(e,n){const[r,i,s]=this._preallocSegments,o=n?.ascensionFactor??.5,a=Math.min(1-o,n?.ascensionFactor!=null&&n.descensionFactor!=null?n.descensionFactor:.5),l=1-o-a;r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.targetZoom=e,r.definition.compared.pan=this.definition.compared.pan*o,r.definition.compared.rotate=this.definition.compared.rotate*o,r.definition.segmentEnd=o,r.update(),this._ascensionSegment=r,this.segments.push(r),l>0&&(i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.copyFrom(this.definition),i.definition.compared.sourceZoom=e,i.definition.compared.targetZoom=e,i.definition.compared.pan=this.definition.compared.pan*l,i.definition.compared.rotate=this.definition.compared.rotate*l,i.definition.segmentStart=r.definition.segmentEnd,i.definition.segmentEnd=r.definition.segmentEnd+l,i.update(),this.segments.push(i)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=e,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=o+l,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){const[e]=this._preallocSegments;e.update(this.definition),this.segments.push(e)}};const vet=new YQe;let _et=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=IN,this.definition=new KQe(e),this.path=new yet}update(e,n,r){this.definition.update(e,n,r),this.path.update(this.definition,r),this._time=this._applyTimeSettings(h$e(isFinite(this.path.time)?this.path.time:0),r),this._easing=r.easing??(this._time>=1e3?IN:kN)}cameraAt(e,n){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);const r=this.path.interpolateComponentsAt(e,vet);n.interpolate(this.definition.source,this.definition.target,r)}_normalizedEasing(e){const n=this._easing(0,this._time),r=this._easing(1,this._time);return(this._easing(e,this._time)-n)/(r-n)}_applyTimeSettings(e,n){const r=n.speedFactor!=null?n.speedFactor:1,i=n.minDuration??PN.minDuration/r,s=n.maxDuration??PN.maxDuration/r;return e=n.duration!=null?n.duration:Math.min(Math.max(e/r,i),s)}};const xet=2e3,wet=64;let bet=class{constructor(e){this._view=e,this._animation=new _et(()=>new kre(this._view)),this._current=new kre(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(e,n,r={}){da(this._current.viewpoint,e),da(this._source.viewpoint,e),da(this._target.viewpoint,n),this._animation.update(this._source,this._target,r)}applyRatio(e,n){this._animation.cameraAt(n,this._current),da(e,this._current.viewpoint)}},mx=class extends Kt{constructor(e){super(e),this._animation=null,this._destinationViewState=new rH,this.updateFunction=null,this.easing=Wre.ease,this.viewpoint=new fu({targetGeometry:new Jt,scale:0,rotation:0}),this._updateTask=S2({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new bet(e.view)}destroy(){this._updateTask=ii(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,n,r){this.stop();const i=this.viewpoint;da(i,n);const s=e.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(n.scale,s.scale)*wet,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:r?.duration,maxDuration:r?.animationMode==="auto"?1/0:r?.maxDuration??g_e.maxDuration,speedFactor:r?.speedFactor,easing:(typeof r?.easing=="string"?Wre[r.easing]:r?.easing)||this.easing}),r?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,Eet(this._transition.animation,r,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));const o=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,n){this.stop(),this.updateFunction=n,this.viewpoint=e;const r=new YV({target:e.clone()}),i=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const n=this.animation;if(n&&n.state!==YV.state.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{const r=performance.now()-this._startTime,i=this._transition.duration,s=i>0?r/i:1,o=s>=1;this._transition.applyRatio(this.viewpoint,s),o&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function Eet(t,e,n,r){if(e?.duration!=null)return!0;const{time:i,isLinear:s}=t,o=e?.speedFactor||1;if(i>(e?.maxDuration??g_e.maxDuration/o))return!1;if(s){const l=Vi(),c=Hs(...r.toScreen(l,...n.center)),u=Hs(...n.toScreen(l,...r.center)),h=u!=null&&u.x>-1*n.size[0]&&u.x<(1.5+.5)*n.size[0]&&u.y>-1*n.size[1]&&u.y<(1.5+.5)*n.size[1],f=c!=null&&c.x>-1*r.size[0]&&c.x<(1.5+.5)*r.size[0]&&c.y>-1*r.size[1]&&c.y<(1.5+.5)*r.size[1];if(i>xet/o&&!h&&!f)return!1}return!0}x([E()],mx.prototype,"easing",void 0),x([E()],mx.prototype,"view",void 0),x([E()],mx.prototype,"viewpoint",void 0),mx=x([ue("esri.views.2d.AnimationManager")],mx);const Tet=mx;function ai(){return Promise.all([_e(()=>import("./webglDeps-CMJrRIrr.js"),__vite__mapDeps([297,222,298,299,300,26,94])),_e(()=>import("./mapViewDeps-CqKx9DjQ.js"),__vite__mapDeps([301,173,53,54,138,139,129,64,26,140,131,132,137,141,125,142,87,302,303,222,298,299,213,126,304,133,300,94,221,93,305,124,161,306,249,192,195,66,67,31,134,146,307,143,144,308,83,78,127,76,77,309,51,297,310,156,311,312,191,313,211,212,314,111,123,128,130,122,71,70,315,145,316,136,45,46,47,317,147,152,120,318,319,320,321,218,252,322,323]))])}const qE=()=>ai().then(()=>_e(()=>import("./TileLayerView2D-CwOX3wbV.js"),__vite__mapDeps([324,137,132,138,139,129,64,26,140,131,141,125,142,87,308,173,53,54,83,78,127,76,77,309,51,306,249,305,124,93,299,300,94,221,222,161,192,195,66,67,310,303,298,213,304,133,156,311,312,191,111,302,126,31,134,146,143,144,211,212,317,123,128,130,122,71,70,147,152,120,325,326,327,321,328,281,329,319,320,330,331,332,252,333,334,335,336,337]))),G0=()=>ai().then(()=>_e(()=>import("./FeatureLayerView2D-C02sRs34.js").then(t=>t.F),__vite__mapDeps([338,302,138,139,129,64,26,140,131,132,137,141,125,142,87,303,222,298,299,213,126,304,133,300,94,221,93,305,124,161,306,249,192,195,66,67,31,134,146,256,233,204,200,177,164,201,202,203,205,122,163,206,82,130,339,238,340,341,71,81,328,281,320,321,156,112,110,111,113,153,154,147,83,78,266,52,53,54,307,342,226,85,149,255,248,333,336,330,331,337]))),Hre={"base-dynamic":()=>ai().then(()=>_e(()=>import("./BaseDynamicLayerView2D-C150qbB8.js"),__vite__mapDeps([343,344,305,124,125,93,299,300,26,94,221,222,161,306,249,192,195,66,64,67,326,303,298,213,327,328,281,345,330,331]))),"base-tile":qE,"bing-maps":qE,catalog:()=>ai().then(()=>_e(()=>import("./CatalogLayerView2D-Cam974_w.js"),__vite__mapDeps([346,328,306,249,281,330]))),"catalog-dynamic-group":()=>ai().then(()=>_e(()=>import("./CatalogDynamicGroupLayerView2D-CbjDtuvi.js"),__vite__mapDeps([347,328,306,249,281,330]))),"catalog-footprint":()=>ai().then(()=>_e(()=>import("./CatalogFootprintLayerView2D-BmfDU9oo.js"),__vite__mapDeps([348,338,302,138,139,129,64,26,140,131,132,137,141,125,142,87,303,222,298,299,213,126,304,133,300,94,221,93,305,124,161,306,249,192,195,66,67,31,134,146,256,233,204,200,177,164,201,202,203,205,122,163,206,82,130,339,238,340,341,71,81,328,281,320,321,156,112,110,111,113,153,154,147,83,78,266,52,53,54,307,342,226,85,149,255,248,333,336,330,331,337]))),csv:G0,"geo-rss":()=>ai().then(()=>_e(()=>import("./GeoRSSLayerView2D-fOXNMN8I.js"),__vite__mapDeps([349,244,204,200,177,164,201,31,202,203,142,87,197,198,199,163,24,25,135,83,78,127,76,77,131,132,52,53,54,205,122,206,238,328,306,249,281,318,319,320,26,126,124,125,93,298,222,321,305,299,300,94,221,161,192,195,66,64,67,302,138,139,129,140,137,141,303,213,304,133,134,146,317,308,173,309,51,123,128,130,71,70,147,152,120,330]))),feature:G0,geojson:G0,parquet:G0,graphics:()=>ai().then(()=>_e(()=>import("./GraphicsLayerView2D-DRPQa1NZ.js"),__vite__mapDeps([350,328,306,249,281,318,319,320,26,126,124,125,93,298,222,321,305,299,300,94,221,161,192,195,66,64,67,302,138,139,129,140,131,132,137,141,142,87,303,213,304,133,31,134,146,317,83,78,308,173,53,54,127,76,77,309,51,123,128,130,122,71,70,147,152,120,330,337]))),group:()=>ai().then(()=>_e(()=>import("./GroupLayerView2D-CmS5ub3W.js"),__vite__mapDeps([351,328,306,249,281,330]))),imagery:()=>ai().then(()=>_e(()=>import("./ImageryLayerView2D-fuCLoPmv.js"),__vite__mapDeps([352,353,300,26,94,221,222,93,179,305,124,125,299,161,306,249,192,195,66,64,67,172,170,328,281,317,83,78,138,139,129,140,131,132,137,141,142,87,308,173,53,54,127,76,77,309,51,123,126,128,130,122,133,71,70,302,303,298,213,304,31,134,146,147,152,120,329,319,320,321,344,326,327,345,176,291,339,336,330,331,337]))),"imagery-tile":()=>ai().then(()=>_e(()=>import("./ImageryTileLayerView2D-nOvggNnT.js"),__vite__mapDeps([354,355,353,300,26,94,221,222,93,179,305,124,125,299,161,306,249,192,195,66,64,67,172,170,328,281,175,356,321,303,298,213,316,304,133,327,357,176,337,291,339,336,330,331]))),kml:()=>ai().then(()=>_e(()=>import("./KMLLayerView2D-BPk4yvW_.js"),__vite__mapDeps([358,359,197,198,199,200,177,164,201,31,202,203,142,87,163,24,25,135,83,78,127,76,77,131,132,52,53,54,204,205,122,206,238,326,306,249,303,222,298,299,213,327,344,305,124,125,93,300,26,94,221,161,192,195,66,64,67,328,281,318,319,320,126,321,302,138,139,129,140,137,141,304,133,134,146,317,308,173,309,51,123,128,130,71,70,147,152,120,330,45,46,47,176,313,297,211,212,311,356]))),"knowledge-graph":()=>ai().then(()=>_e(()=>import("./KnowledgeGraphLayerView2D-d1hqIxlZ.js"),__vite__mapDeps([360,328,306,249,281,330]))),"link-chart":()=>ai().then(()=>_e(()=>import("./KnowledgeGraphLayerView2D-d1hqIxlZ.js"),__vite__mapDeps([360,328,306,249,281,330]))),"knowledge-graph-sublayer":G0,"map-image":()=>ai().then(()=>_e(()=>import("./MapImageLayerView2D-CtxHBfE8.js"),__vite__mapDeps([361,344,305,124,125,93,299,300,26,94,221,222,161,306,249,192,195,66,64,67,326,303,298,213,327,328,281,317,83,78,138,139,129,140,131,132,137,141,142,87,308,173,53,54,127,76,77,309,51,123,126,128,130,122,133,71,70,302,304,31,134,146,147,152,120,329,319,320,321,345,330,362,252,333,335,339,331,332,334,336,337]))),"map-notes":()=>ai().then(()=>_e(()=>import("./MapNotesLayerView2D-0E-eRrG1.js"),__vite__mapDeps([363,328,306,249,281,318,319,320,26,126,124,125,93,298,222,321,305,299,300,94,221,161,192,195,66,64,67,302,138,139,129,140,131,132,137,141,142,87,303,213,304,133,31,134,146,317,83,78,308,173,53,54,127,76,77,309,51,123,128,130,122,71,70,147,152,120,330,337]))),media:()=>ai().then(()=>_e(()=>import("./MediaLayerView2D-Dpb41bE-.js"),__vite__mapDeps([364,365,152,204,200,177,164,201,31,202,203,142,87,137,132,138,139,129,64,26,140,131,141,125,308,173,53,54,83,78,127,76,77,309,51,306,249,305,124,93,299,300,94,221,222,161,192,195,66,67,310,303,298,213,304,133,156,311,312,191,111,302,126,134,146,143,144,211,212,317,123,128,130,122,71,70,147,120,315,145,366,316,328,281,330]))),"ogc-feature":()=>ai().then(()=>_e(()=>import("./OGCFeatureLayerView2D-lj90yhal.js"),__vite__mapDeps([367,338,302,138,139,129,64,26,140,131,132,137,141,125,142,87,303,222,298,299,213,126,304,133,300,94,221,93,305,124,161,306,249,192,195,66,67,31,134,146,256,233,204,200,177,164,201,202,203,205,122,163,206,82,130,339,238,340,341,71,81,328,281,320,321,156,112,110,111,113,153,154,147,83,78,266,52,53,54,307,342,226,85,149,255,248,333,336,330,331,337]))),"open-street-map":qE,"oriented-imagery":G0,route:()=>ai().then(()=>_e(()=>import("./RouteLayerView2D-C-D9UXHh.js"),__vite__mapDeps([368,369,370,328,306,249,281,318,319,320,26,126,124,125,93,298,222,321,305,299,300,94,221,161,192,195,66,64,67,302,138,139,129,140,131,132,137,141,142,87,303,213,304,133,31,134,146,317,83,78,308,173,53,54,127,76,77,309,51,123,128,130,122,71,70,147,152,120,330,337]))),stream:()=>ai().then(()=>_e(()=>import("./StreamLayerView2D-CW8T629j.js"),__vite__mapDeps([371,238,338,302,138,139,129,64,26,140,131,132,137,141,125,142,87,303,222,298,299,213,126,304,133,300,94,221,93,305,124,161,306,249,192,195,66,67,31,134,146,256,233,204,200,177,164,201,202,203,205,122,163,206,82,130,339,340,341,71,81,328,281,320,321,156,112,110,111,113,153,154,147,83,78,266,52,53,54,307,342,226,85,149,255,248,333,336,330,331,337]))),"subtype-group":()=>ai().then(()=>_e(()=>import("./SubtypeGroupLayerView2D-cN_lEmA7.js"),__vite__mapDeps([372,338,302,138,139,129,64,26,140,131,132,137,141,125,142,87,303,222,298,299,213,126,304,133,300,94,221,93,305,124,161,306,249,192,195,66,67,31,134,146,256,233,204,200,177,164,201,202,203,205,122,163,206,82,130,339,238,340,341,71,81,328,281,320,321,156,112,110,111,113,153,154,147,83,78,266,52,53,54,307,342,226,85,149,255,248,333,336,330,331,337]))),tile:qE,"vector-tile":()=>ai().then(()=>_e(()=>import("./VectorTileLayerView2D-fgij2Q5L.js"),__vite__mapDeps([373,122,141,111,26,137,132,24,25,191,312,192,140,222,300,94,221,305,124,125,93,299,161,306,249,195,66,64,67,321,69,244,193,194,173,53,54,328,281,330,331]))),video:()=>ai().then(()=>_e(()=>import("./VideoLayerView2D-EDIkU2hN.js"),__vite__mapDeps([374,375,247,29,248,249,268,30,31,376,236,131,132,235,24,25,366,161,305,124,125,93,299,300,26,94,221,222,306,192,195,66,64,67,302,138,139,129,140,137,141,142,87,303,298,213,126,304,133,134,146,316,377,328,281,318,319,320,321,317,83,78,308,173,53,54,127,76,77,309,51,123,128,130,122,71,70,147,152,120,330]))),wcs:()=>ai().then(()=>_e(()=>import("./ImageryTileLayerView2D-nOvggNnT.js"),__vite__mapDeps([354,355,353,300,26,94,221,222,93,179,305,124,125,299,161,306,249,192,195,66,64,67,172,170,328,281,175,356,321,303,298,213,316,304,133,327,357,176,337,291,339,336,330,331]))),"web-tile":qE,wfs:G0,wms:()=>ai().then(()=>_e(()=>import("./WMSLayerView2D-DoOprLWJ.js"),__vite__mapDeps([378,344,305,124,125,93,299,300,26,94,221,222,161,306,249,192,195,66,64,67,326,303,298,213,327,328,281,345,330,331,379,339]))),wmts:()=>ai().then(()=>_e(()=>import("./WMTSLayerView2D-BKwxQIaa.js"),__vite__mapDeps([380,325,326,306,249,303,222,298,299,213,327,305,124,125,93,300,26,94,221,161,192,195,66,64,67,321,328,281,330,331]))),"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"gaussian-splat":null,"integrated-mesh-3dtiles":null,"integrated-mesh":null,"line-of-sight":null,"point-cloud":null,scene:null,unknown:null,unsupported:null,viewshed:null,voxel:null};function ket(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",n=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new Xe(`${n}:view-not-supported`,`${e} is not supported in 2D`)}const qre={hasLayerViewModule:t=>Hre[t.type]!=null,importLayerView:t=>{const e=Hre[t.type];if(e==null)throw ket(t);return e(t)}};var tc;let Tb=(tc=class{static getId(e,n,r,i){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${n}/${r}/${i}`}constructor(e,n,r,i){this.set(e,n,r,i)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(e){this.set(e)}get hash(){const e=4095&this.row,n=4095&this.col,r=63&this.level;return(3&this.world)<<30|n<<22|e<<8|r}acquire(e,n,r,i){this.set(e,n,r,i)}contains(e){const n=e.level-this.level;return n>=0&&this.row===e.row>>n&&this.col===e.col>>n&&this.world===e.world}containsChild(e){const n=e.level-this.level;return n>0&&this.row===e.row>>n&&this.col===e.col>>n&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new tc(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,n,r,i){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,a,l]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+n,this.col=+r,this.world=+i||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new tc(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(e,n,r){const i=this.clone();return i.col+=e,i.row+=n,r.normalizeKey(i),i}getChildKeys(){const e=this.level+1,n=this.row<<1,r=this.col<<1,i=this.world;return[new tc(e,n,r,i),new tc(e,n,r+1,i),new tc(e,n+1,r,i),new tc(e,n+1,r+1,i)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}},tc.pool=new fb(()=>new tc(""),null,null,25,50),tc);function N_(t,e){return[t,e]}function U0(t,e,n){return t[0]=e,t[1]=n,t}function Aet(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}const Vu=new Tb("0/0/0/0");let Iet=class v_e{static create(e,n,r=null){const i=za(e.spatialReference),s=n.origin||N_(e.origin.x,e.origin.y),o=N_(e.size[0]*n.resolution,e.size[1]*n.resolution),a=N_(-1/0,-1/0),l=N_(1/0,1/0),c=N_(1/0,1/0);r!=null&&(U0(a,Math.max(0,Math.floor((r.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymax)/o[1]))),U0(l,Math.max(0,Math.floor((r.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-r.ymin)/o[1]))),U0(c,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:u,rows:h}=n;let f,g,y,_;return!r&&u&&h&&(U0(a,u[0],h[0]),U0(l,u[1],h[1]),U0(c,u[1]-u[0]+1,h[1]-h[0]+1)),e.isWrappable?(f=N_(Math.ceil(Math.round((i.valid[1]-i.valid[0])/n.resolution)/e.size[0]),c[1]),g=!0,y=i.origin,_=i.valid):(f=c,g=!1),new v_e(n.level,n.resolution,n.scale,s,a,l,c,o,f,g,y,_)}constructor(e,n,r,i,s,o,a,l,c,u,h,f){this.level=e,this.resolution=n,this.scale=r,this.origin=i,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldSize=c,this.wrap=u,this._spatialReferenceOrigin=h,this._spatialReferenceValid=f}normalizeCol(e){if(!this.wrap)return e;const n=this.worldSize[0];return e<0?n-1-Math.abs((e+1)%n):e%n}normalizeKey(e){if(!this.wrap)return;const n=this.worldSize[0],r=e.col;r<0?(e.col=r+n,e.world-=1):r>=n&&(e.col=r-n,e.world+=1)}denormalizeCol(e,n){return this.wrap?this.worldSize[0]*n+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){const n=this.origin[0]+e*this.norm[0],r=this._spatialReferenceOrigin,i=this._spatialReferenceValid;return this.wrap&&r&&i?n===r[0]?i[0]:this.origin[0]===r[0]&&e===this.worldSize[0]?i[1]:n:n}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,n,r=!1){Vu.set(n);const i=r?Vu.col:this.denormalizeCol(Vu.col,Vu.world),s=Vu.row;return Aet(e,this.getXForColumn(i),this.getYForRow(s+1),this.getXForColumn(i+1),this.getYForRow(s)),e}getTileCoords(e,n,r=!1){Vu.set(n);const i=r?Vu.col:this.denormalizeCol(Vu.col,Vu.world);return Array.isArray(e)?U0(e,this.getXForColumn(i),this.getYForRow(Vu.row)):(e.x=this.getXForColumn(i),e.y=this.getYForRow(Vu.row)),e}};var x1;let oH=(x1=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}*keys(){const e=this.lodInfo;for(const{row:n,colFrom:r,colTo:i}of this.spans)for(let s=r;s<=i;s++){const o=e.getWorldForColumn(s);yield new Tb(e.level,n,e.normalizeCol(s),o)}}forEach(e,n){const{spans:r,lodInfo:i}=this,{level:s}=i;if(r.length!==0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++)e.call(n,s,o,i.normalizeCol(c),i.getWorldForColumn(c))}},x1.pool=new fb(()=>new x1),x1),k$=class{constructor(e,n,r){this.row=e,this.colFrom=n,this.colTo=r}};const hi=new Tb("0/0/0/0");let Pet=class __e{static create(e,n){e[1]>n[1]&&([e,n]=[n,e]);const[r,i]=e,[s,o]=n,a=s-r,l=o-i,c=l!==0?a/l:0,u=(Math.ceil(i)-i)*c,h=(Math.floor(i)-i)*c;return new __e(r,Math.floor(i),Math.ceil(o),c,a<0?u:h,a<0?h:u,a<0?s:r,a<0?r:s)}constructor(e,n,r,i,s,o,a,l){this.x=e,this.ymin=n,this.ymax=r,this.invM=i,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Wl=[[0,0],[0,0],[0,0],[0,0]],Cet=1e-6;let Ret=class{constructor(e,n=null,r=e.lods[0].level,i=e.lods[e.lods.length-1].level){this.tileInfo=e,this.fullExtent=n,this.scales=[],this._infoByScale={},this._infoByLevel={};const s=e.lods.filter(a=>a.level>=r&&a.level<=i);this.minScale=s[0].scale,this.maxScale=s[s.length-1].scale;const o=this._lodInfos=s.map(a=>Iet.create(e,a,n));s.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,n,r=!1){hi.set(n);const i=this._infoByLevel[hi.level];return i?i.getTileBounds(e,hi,r):e}getTileCoords(e,n,r=!1){hi.set(n);const i=this._infoByLevel[hi.level];return i?i.getTileCoords(e,hi,r):e}getTileCoverage(e,n=192,r=!0,i="closest"){if(!r&&(e.scale>this.minScale||e.scale<this.maxScale))return null;const s=i==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),o=oH.pool.acquire(s),a=this._wrap;let l,c,u,h=1/0,f=-1/0;const g=o.spans;Wl[0][0]=Wl[0][1]=Wl[1][1]=Wl[3][0]=-n,Wl[1][0]=Wl[2][0]=e.size[0]+n,Wl[2][1]=Wl[3][1]=e.size[1]+n;for(const T of Wl)e.toMap(T,T),T[0]=s.getColumnForX(T[0]),T[1]=s.getRowForY(T[1]);const y=[];let _=3;for(let T=0;T<4;T++){if(Wl[T][1]===Wl[_][1]){_=T;continue}const A=Pet.create(Wl[T],Wl[_]);h=Math.min(A.ymin,h),f=Math.max(A.ymax,f),y[A.ymin]===void 0&&(y[A.ymin]=[]),y[A.ymin].push(A),_=T}if(h==null||f==null||f-h>100)return null;let b=[];for(l=h;l<f;){y[l]!=null&&(b=b.concat(y[l])),c=1/0,u=-1/0;for(let T=b.length-1;T>=0;T--){const A=b[T];c=Math.min(c,A.getLeftCol()),u=Math.max(u,A.getRightCol())}if(c=Math.floor(c),u=Math.floor(u),l>=s.first[1]&&l<=s.last[1])if(a)if(s.size[0]<s.worldSize[0]){const T=Math.floor(u/s.worldSize[0]);for(let A=Math.floor(c/s.worldSize[0]);A<=T;A++)g.push(new k$(l,Math.max(s.getFirstColumnForWorld(A),c),Math.min(s.getLastColumnForWorld(A),u)))}else g.push(new k$(l,c,u));else c>s.last[0]||u<s.first[0]||(c=Math.max(c,s.first[0]),u=Math.min(u,s.last[0]),g.push(new k$(l,c,u)));l+=1;for(let T=b.length-1;T>=0;T--){const A=b[T];A.ymax>=l?A.incrRow():b.splice(T,1)}}return o}getTileParentId(e){hi.set(e);const n=this._infoByLevel[hi.level],r=this._lodInfos.indexOf(n)-1;return r<0?null:(this._getTileIdAtLOD(hi,this._lodInfos[r],hi),hi.id)}getTileResolution(e){const n=this._infoByLevel[typeof e=="object"?e.level:e];return n?n.resolution:-1}getTileScale(e){const n=this._infoByLevel[e.level];return n?n.scale:-1}intersects(e,n){hi.set(n);const r=this._infoByLevel[hi.level],i=e.lodInfo;if(i.resolution>r.resolution){this._getTileIdAtLOD(hi,i,hi);const o=i.denormalizeCol(hi.col,hi.world);for(const a of e.spans)if(a.row===hi.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(i.resolution<r.resolution){const[o,a,l,c]=e.spans.reduce((_,b)=>(_[0]=Math.min(_[0],b.row),_[1]=Math.max(_[1],b.row),_[2]=Math.min(_[2],b.colFrom),_[3]=Math.max(_[3],b.colTo),_),[1/0,-1/0,1/0,-1/0]),u=r.denormalizeCol(hi.col,hi.world),h=i.getColumnForX(r.getXForColumn(u)),f=i.getRowForY(r.getYForRow(hi.row)),g=i.getColumnForX(r.getXForColumn(u+1))-1,y=i.getRowForY(r.getYForRow(hi.row+1))-1;return!(h>c||g<l||f>a||y<o)}const s=i.denormalizeCol(hi.col,hi.world);return e.spans.some(o=>o.row===hi.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(e,n,r){if(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],this._wrap){const i=za(this.tileInfo.spatialReference),s=-r*(i.valid[1]-i.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const n=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>n[0])return this._infoByScale[n[0]];for(let r=1;r<n.length-1;r++)if(e>n[r]+Cet)return this._infoByScale[n[r-1]];return this._infoByScale[n[n.length-1]]}getClosestInfoForScale(e){const n=this.scales;return this._infoByScale[e]||(e=n.reduce((r,i)=>Math.abs(i-e)<Math.abs(r-e)?i:r,n[0])),this._infoByScale[e]}scaleToLevel(e){const n=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let r=n.length-1;r>=0;r--)if(e<n[r])return r===n.length-1?this._infoByScale[n[n.length-1]].level:this._infoByScale[n[r]].level+(n[r]-e)/(n[r]-n[r+1]);return this._infoByScale[n[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}zoomToScale(e){return this.tileInfo.zoomToScale(e)}_getTileIdAtLOD(e,n,r){const i=this._infoByLevel[r.level];return e.set(r),n.resolution<i.resolution?null:(n.resolution===i.resolution||(e.level=n.level,e.col=Math.floor(r.col*i.resolution/n.resolution+.01),e.row=Math.floor(r.row*i.resolution/n.resolution+.01)),e)}},Met=class{constructor(e,n){this.item=e,this.controller=n,this.promise=null}},Net=class{constructor(e){this._schedule=null,this._task=null,this._deferreds=new ww,this._controllers=new ww,this._processingItems=new ww,this._pausedSignal=j2(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new nA(e.peeker),this.process=e.process;const n=e.scheduler;e.priority&&n&&(this._task=n.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule=ii(this._schedule),this._task=ii(this._task)}get updating(){return!!this._task?.updating||this.readyToRun}get length(){return this._processingItems.size+this._queue.length}abort(e){const n=this._controllers.get(e);n&&n.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(n=>e.push(n)),this._controllers.clear(),e.forEach(n=>n.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((n,r)=>e(r))}get(e){const n=this._deferreds.get(e);return n?n.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,n){const r=this.get(e);if(r)return r;const i=new AbortController;let s=null;n&&(s=vu(n,()=>i.abort()));const o=()=>{const u=this._processingItems.get(e);u&&u.controller.abort(),a(),c.reject(Cr())},a=()=>{l.remove(),s?.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},l=_B(i.signal,o),c=xc();return this._deferreds.set(e,c),this._controllers.set(e,i),c.promise.then(a,a),this._queue.push(e),this._scheduleNext(),c.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();return e&&(this._deferreds.get(e)?.reject(Cr()),this._removeItem(e)),e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const n of e)this._queue.push(n.item),n.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get readyToRun(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=gb(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,n){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(n))}_processError(e,n){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(n))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(e==null)return;let n;const r=new AbortController,i=new Met(e,r);this._processingItems.set(e,i);try{n=this.process(e,r.signal)}catch(s){this._processError(i,s)}ga(n)?(i.promise=n,n.then(s=>this._processResult(i,s),s=>this._processError(i,s))):this._processResult(i,n)}get test(){}};const Kre=[0,0];let Cf=class extends Kt{constructor(e){super(e),this._keyToItem=new Map,this._tilesByScale=new Map,this.concurrency=6}initialize(){const{concurrency:e,process:n,scheduler:r,priority:i}=this;this._queue=new Net({concurrency:e,scheduler:r,priority:i,process:(s,o)=>{const a=this._keyToItem.get(s);return n(a,{signal:o})},peeker:s=>this._peek(s)})}destroy(){this.clear(),this._queue=Di(this._queue)}get length(){return this._queue?this._queue.length:0}abort(e){const n=typeof e=="string"?e:e.id;this._queue.abort(n)}clear(){this._queue.clear(),this._keyToItem.clear(),this._tilesByScale.clear()}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}pause(){this._queue.pause()}push(e){const n=e.key.id;if(this._queue.has(n))return this._queue.get(n);const r=this._queue.push(n),i=this.tileInfoView.getTileScale(e.key),s=gI(this._tilesByScale,i,()=>new Set),o=()=>{s.delete(e.key),s.size===0&&this._tilesByScale.delete(i),this._keyToItem.delete(n)};return s.add(e.key),this._keyToItem.set(n,e),r.then(o,o),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(e){if(!this.state)return e.values().next().value;const n=new Set;for(const o of e)n.add(this._keyToItem.get(o).key);const r=this.state.scale;let i,s=Number.POSITIVE_INFINITY;for(const[o,a]of this._tilesByScale)if(ype(a,l=>n.has(l))){const l=Math.abs(o-r);l<s&&(i=a,s=l)}return this._getClosestTileKey(i,e).id}_getClosestTileKey(e,n){const r=this.tileInfoView,i=this.state.center;let s,o=Number.POSITIVE_INFINITY;for(const a of e)if(n.has(a.id)){r.getTileCoords(Kre,a);const l=tL(Kre,i);l<o&&(o=l,s=a)}return s}};x([E({constructOnly:!0})],Cf.prototype,"concurrency",void 0),x([E({constructOnly:!0})],Cf.prototype,"priority",void 0),x([E({constructOnly:!0})],Cf.prototype,"process",void 0),x([E({constructOnly:!0})],Cf.prototype,"scheduler",void 0),x([E()],Cf.prototype,"state",void 0),x([E({constructOnly:!0})],Cf.prototype,"tileInfoView",void 0),Cf=x([ue("esri.views.2d.tiling.TileQueue")],Cf);const E5t=Cf;let Oet=class{constructor(e,n,r){this.maxSize=e,this._tileInfoView=n,this._removedFunc=r,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const n=this._tilePerId.get(e);if(!n)return;const r=n.key.level,i=this._tileKeysPerLevel[r];Yre(this._tilePerId,e);for(let s=0;s<i.length;s++)if(i[s].id===e){i.splice(s,1);break}return n.visible=!0,n}add(e){e.visible=!1;const n=e.key,r=n.id;if(this._tilePerId.has(r))return;this._tilePerId.set(r,e);const i=n.level;this._tileKeysPerLevel[i]||(this._tileKeysPerLevel[i]=[]),this._tileKeysPerLevel[i].push(n)}prune(e,n,r){let i=this._tilePerId.size;if(i<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;i>this.maxSize&&s>=0;)s!==e&&(i=this._pruneAroundCenterTile(i,n,r,s)),s--;i>this.maxSize&&(i=this._pruneAroundCenterTile(i,n,r,e))}_pruneAroundCenterTile(e,n,r,i){const s=this._tileKeysPerLevel[i];if(!s||s.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=r*o[0],c=r*o[1],u=[0,0],h=[0,0];for(s.sort((f,g)=>(u[0]=a.x+l*(f.col+.5),u[1]=a.y-c*(f.row+.5),h[0]=a.x+l*(g.col+.5),h[1]=a.y-c*(g.row+.5),Xk(u,n)-Xk(h,n)));s.length>0;){const f=s.pop();if(this._removeTile(f.id),--e===this.maxSize)break}return e}_removeTile(e){const n=this._tilePerId.get(e);this._removedFunc&&n&&this._removedFunc(n),Yre(this._tilePerId,e)}};function Yre(t,e){t.delete(e)}const B0=new Tb(0,0,0,0),gf=new Map,KE=[],A$=[];let T5t=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,e.resampling!=null&&(this.resampling=e.resampling),e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new Oet(e.cacheSize,this.tileInfoView,n=>{this.releaseTile(n)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:n,tileIndex:r}=this,{scale:i,center:s,resolution:o}=e.state,{minScale:a,maxScale:l}=this.tileInfoView,c=!e.stationary&&i>this._previousScale;if(this._previousScale=i,!n&&(i>a||i<l))return this.tiles.length=0,void this.clear();const u=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.resampling,this.coveragePolicy);if(!u)return this.tiles.length=0,void this.clear();const{spans:h,lodInfo:f}=u,{level:g}=f;this.tiles.length=0,r.forEach(T=>T.visible=!0);let y=0,_=0;if(h.length>0)for(const{row:T,colFrom:A,colTo:I}of h)for(let P=A;P<=I;P++){y++;const N=B0.set(g,T,f.normalizeCol(P),f.getWorldForColumn(P)).id;let L=r.get(N);if(L)L.isReady?(gf.set(N,L),_++):c||this._addParentTile(N,gf);else{if(this._tileCache?.has(N)){if(L=this._tileCache.pop(N),this.tileIndex.set(N,L),L.isReady){gf.set(N,L),_++;continue}}else L=this.acquireTile(B0),this.tileIndex.set(N,L);c||this._addParentTile(N,gf)}}const b=_===y;for(const[T,A]of r){if(gf.has(T))continue;B0.set(T);const I=this.tileInfoView.intersects(u,B0),P=this.cachePolicy==="purge"?B0.level!==g:B0.level>g;!I||!c&&b?!P&&I||KE.push(A):A.isReady?P&&this.cachePolicy==="purge"&&this._hasReadyAncestor(B0,g)?KE.push(A):A$.push(A):P&&KE.push(A)}for(const T of A$)T.isReady&&gf.set(T.key.id,T);for(const T of KE)this._tileCache?this._tileCache.add(T):this.releaseTile(T),r.delete(T.key.id);for(const T of gf.values())this.tiles.push(T);for(const T of r.values())gf.has(T.key.id)||(T.visible=!1);this._tileCache?.prune(g,s,o),oH.pool.release(u),A$.length=0,KE.length=0,gf.clear()}clear(){const{tileIndex:e}=this;for(const n of e.values())this.releaseTile(n);e.clear()}refresh(e){for(const n of this.tileIndex.values())e(n);this._tileCache?.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,n){let r=e,i=null;for(;r=this.tileInfoView.getTileParentId(r),r;)if(this.tileIndex.has(r)){if(i=this.tileIndex.get(r),i?.isReady){n.has(i.key.id)||n.set(i.key.id,i);break}}else if(this._tileCache?.has(r)&&(i=this._tileCache.pop(r),this.tileIndex.set(r,i),i?.isReady)){n.has(i.key.id)||n.set(i.key.id,i);break}}_hasReadyAncestor(e,n){const r=bl();this.tileInfoView.getTileBounds(r,e,!0);for(const i of this.tileIndex.values())if(i.isReady&&i.key.level>=n&&i.key.level<e.level){const s=bl();if(this.tileInfoView.getTileBounds(s,i.key,!0),eGe(s,r))return!0}return!1}};const Let={"area-measurement":null,dimension:null,"direct-line-measurement":null,"elevation-profile":()=>_e(()=>import("./ElevationProfileAnalysisView2D-FINY51q6.js"),__vite__mapDeps([381,173,53,54,229,375,247,29,248,249,268,30,31,382,323,383,384,385,386,387,388,47,389,390,391,392,393,159,160,24,25,394,395,396,44,397,398,186,104,167,168,182,231,102,399,151,195,210,181])),"line-of-sight":null,slice:null,viewshed:null,"volume-measurement":null};function Det(t){const e=Let[t.type];if(!e)throw new Xe("analysis-view-module-import-utils:analysis-not-supported",`Analysis "${t.type}" is not supported`);return e()}let jet=class{constructor(e,n={}){this.events=new wFe,this._hasMajorPerformanceCaveat=!1,this._lastRenderFrameCounter=0,e!=null?(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("style","width: 100%; height:100%; display:block; willChange:transform"),e.contains(this._canvas)||e.appendChild(this._canvas)):n.canvas!=null&&(this._canvas=n.canvas);const r={failIfMajorPerformanceCaveat:!0,alpha:!0,antialias:!1,depth:!0,stencil:!0,powerPreference:"high-performance"};let i=this._canvas.getContext("webgl2",r);i||(i=this._canvas.getContext("webgl2",{...r,failIfMajorPerformanceCaveat:!1}),this._hasMajorPerformanceCaveat=!0),this._gl=i,this._handles=yv([hb(this._canvas,"webglcontextlost",s=>this.events.emit("webgl-context-lost",s))])}destroy(){this._canvas.remove(),this._canvas=null,this._handles.remove(),this._gl=null}get gl(){return this._gl}get canvas(){return this._canvas}render(e,n){if(this._hasMajorPerformanceCaveat||ye("esri-force-performance-mode")){if(++this._lastRenderFrameCounter>=ye("esri-performance-mode-frames-between-render")&&(n(),this._lastRenderViewState=e.state.clone(),this._lastRenderFrameCounter=0),this._lastRenderViewState){const[r,i,s,o,a,l]=this._computeViewTransform(this._lastRenderViewState,e.state);this._canvas.style.transform=`matrix(${r}, ${i}, ${s}, ${o}, ${a}, ${l})`}}else n()}resize(e){const n=this._canvas,r=n.style,{state:{size:i},pixelRatio:s}=e,o=i[0],a=i[1],l=Math.round(o*s),c=Math.round(a*s);n.width===l&&n.height===c||(n.width=l,n.height=c),r.width=o+"px",r.height=a+"px"}_computeViewTransform(e,n){const[r,i]=e.center,[s,o]=n.center,[a,l]=e.toScreen([0,0],s,o),[c,u]=e.toScreen([0,0],r,i),h=c-a,f=u-l,g=e.scale/n.scale,y=n.rotation-e.rotation,_=Pd();return Ive(_),fL(_,_,[g,g]),zI(_,_,PI(y)),$2(_,_,[h,f]),_}};function $et(t,e,n,r,i){x_e(t,e,n||0,r||t.length-1,i||Fet)}function x_e(t,e,n,r,i){for(;r>n;){if(r-n>600){var s=r-n+1,o=e-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);x_e(t,e,Math.max(n,Math.floor(e-o*l/s+c)),Math.min(r,Math.floor(e+(s-o)*l/s+c)),i)}var u=t[e],h=n,f=r;for(YE(t,n,e),i(t[r],u)>0&&YE(t,n,r);h<f;){for(YE(t,h,f),h++,f--;i(t[h],u)<0;)h++;for(;i(t[f],u)>0;)f--}i(t[n],u)===0?YE(t,n,f):YE(t,++f,r),f<=e&&(n=f+1),e<=f&&(r=f-1)}}function YE(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Fet(t,e){return t<e?-1:t>e?1:0}function CN(t,e){if(!(this instanceof CN))return new CN(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function Vet(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function O_(t,e){US(t,0,t.children.length,e,t)}function US(t,e,n,r,i){i||(i=gx(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s,o=e;o<n;o++)s=t.children[o],BS(i,t.leaf?r(s):s);return i}function BS(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function Xre(t,e){return t.minX-e.minX}function Zre(t,e){return t.minY-e.minY}function I$(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function pR(t){return t.maxX-t.minX+(t.maxY-t.minY)}function zet(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function Get(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,s-r)}function P$(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function mR(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function gx(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Jre(t,e,n,r,i){for(var s,o=[e,n];o.length;)(n=o.pop())-(e=o.pop())<=r||(s=e+Math.ceil((n-e)/r/2)*r,$et(t,s,e,n,i),o.push(e,s,s,n))}CN.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!mR(t,e))return n;for(var i,s,o,a,l=[];e;){for(i=0,s=e.children.length;i<s;i++)o=e.children[i],mR(t,a=e.leaf?r(o):o)&&(e.leaf?n.push(o):P$(t,a)?this._all(o,n):l.push(o));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!mR(t,e))return!1;for(var r,i,s,o,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(s=e.children[r],mR(t,o=e.leaf?n(s):s)){if(e.leaf||P$(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t!=null&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=gx([]),this},remove:function(t,e){if(t==null)return this;for(var n,r,i,s,o=this.data,a=this.toBBox(t),l=[],c=[];o||l.length;){if(o||(o=l.pop(),r=l[l.length-1],n=c.pop(),s=!0),o.leaf&&(i=Vet(t,o.children,e))!==-1)return o.children.splice(i,1),l.push(o),this._condense(l),this;s||o.leaf||!P$(o,a)?r?(n++,o=r.children[n],s=!1):o=null:(l.push(o),c.push(n),n=0,r=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:Xre,compareMinY:Zre,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,s=n-e+1,o=this._maxEntries;if(s<=o)return O_(i=gx(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),(i=gx([])).leaf=!1,i.height=r;var a,l,c,u,h=Math.ceil(s/o),f=h*Math.ceil(Math.sqrt(o));for(Jre(t,e,n,f,this.compareMinX),a=e;a<=n;a+=f)for(Jre(t,a,c=Math.min(a+f-1,n),h,this.compareMinY),l=a;l<=c;l+=h)u=Math.min(l+h-1,c),i.children.push(this._build(t,l,u,r-1));return O_(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,s,o,a,l,c,u,h;r.push(e),!e.leaf&&r.length-1!==n;){for(u=h=1/0,i=0,s=e.children.length;i<s;i++)l=I$(o=e.children[i]),(c=zet(t,o)-l)<h?(h=c,u=l<u?l:u,a=o):c===h&&l<u&&(u=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),s=[],o=this._chooseSubtree(i,this.data,e,s);for(o.children.push(t),BS(o,i);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(i,s,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var s=this._chooseSplitIndex(n,i,r),o=gx(n.children.splice(s,n.children.length-s));o.height=n.height,o.leaf=n.leaf,O_(n,this.toBBox),O_(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(n,o)},_splitRoot:function(t,e){this.data=gx([t,e]),this.data.height=t.height+1,this.data.leaf=!1,O_(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,s,o,a,l,c,u;for(l=c=1/0,r=e;r<=n-e;r++)o=Get(i=US(t,0,r,this.toBBox),s=US(t,r,n,this.toBBox)),a=I$(i)+I$(s),o<l?(l=o,u=r,c=a<c?a:c):o===l&&a<c&&(c=a,u=r);return u},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:Xre,i=t.leaf?this.compareMinY:Zre;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,s,o=this.toBBox,a=US(t,0,e,o),l=US(t,n-e,n,o),c=pR(a)+pR(l);for(i=e;i<n-e;i++)s=t.children[i],BS(a,t.leaf?o(s):s),c+=pR(a);for(i=n-e-1;i>=e;i--)s=t.children[i],BS(l,t.leaf?o(s):s),c+=pR(l);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)BS(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)t[n].children.length===0?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():O_(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};function Uet(t,{timeZone:e,timeExtent:n}){return{$view:{scale:t,timeZone:e,timeProperties:{currentStart:n?.start,currentEnd:n?.end}}}}let Qre=class w_e{constructor(e,n){this.key=new Tb(0,0,0,0),this.bounds=bl(),this.objectIds=new Set,this.key.set(n);const r=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=r.resolution,this.level=r.level,this.scale=r.scale,this.minScale=e.zoomToScale(r.level-1),this.maxScale=e.zoomToScale(r.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return Zze(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return Uet(this.scale,e)}createChildTiles(){const e=this.key.getChildKeys(),n=Na.acquire();for(let r=0;r<e.length;r++)n[r]=new w_e(this.tileInfoView,e[r]);return n}getQuantizationParameters(){return Um.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const W0={added:[],removed:[]},C$=new Set,Bet=new Tb(0,0,0,0);function Wet(t,e){const n=za(e);if(!n)return null;const[r,i]=n.valid;return t[2]>i?[bl([t[0],t[1],i,t[3]]),bl([r,t[1],r+t[2]-i,t[3]])]:t[0]<r?[bl([r,t[1],t[2],t[3]]),bl([i-(r-t[0]),t[1],i,t[3]])]:null}let Het=class extends Dpe{constructor(e){super(),this._tiles=new Map,this._index=CN(9,ye("esri-csp-restrictions")?n=>({minX:n.bounds[0],minY:n.bounds[1],maxX:n.bounds[2],maxY:n.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){super.destroy(),this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||dW(e)===0||fW(e)===0)return[];const n=Wet(e,this.tileScheme.spatialReference);return n!=null?[...new Set([...this.boundsIntersections(n[0]),...this.boundsIntersections(n[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const n={added:[],removed:[]};for(const r of e.added)if(!this.has(r)){const i=new Qre(this.tileScheme,r);this._tiles.set(r,i),this._index.insert(i),n.added.push(i)}for(const r of e.removed)if(this.has(r)){const i=this.get(r);this._tiles.delete(r),this._index.remove(i),n.removed.push(i)}this.tiles.length=0,this._tiles.forEach(r=>this.tiles.push(r)),(n.added.length||n.removed.length)&&this.emit("update",n)}setViewState(e){const n=this.tileScheme.getTileCoverage(e,0);if(!n)return;const{spans:r,lodInfo:i}=n,{level:s}=i;if(r.length>0)for(const{row:o,colFrom:a,colTo:l}of r)for(let c=a;c<=l;c++){const u=Bet.set(s,o,i.normalizeCol(c),i.getWorldForColumn(c)).id;if(C$.add(u),!this.has(u)){const h=new Qre(this.tileScheme,u);this._tiles.set(u,h),this._index.insert(h),this.tiles.push(h),W0.added.push(h)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];C$.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),W0.removed.push(a))}(W0.added.length||W0.removed.length)&&this.emit("update",W0),oH.pool.release(n),C$.clear(),W0.added.length=0,W0.removed.length=0}};const P5t=1e-30,eie=512,gR=16777216,C5t=8,R5t=29,M5t=24,N5t=4,O5t=0,L5t=0,D5t=0,j5t=1,$5t=2,F5t=3,V5t=4,z5t=5,G5t=6,U5t=12,B5t=13,W5t=5,qet=6,H5t=5,q5t=6,b_e=6,Ket=1<<b_e,K5t=Ket<<1,Y5t=1.05,X5t=3,Z5t=1,J5t=3,Q5t=3,eOt=5,tOt=6,nOt=1.15,Yet=4,rOt=128,Xet=256,iOt=Xet-2*Yet,sOt=2,oOt=128,aOt=1,lOt=10,cOt=1024,uOt=128,hOt=4,dOt=1,fOt=1<<20,pOt=.75,mOt=10,gOt=.75,yOt=256,vOt=32,_Ot=512,xOt=0,wOt=1,Zet=1,bOt=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],EOt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],XE=256,Jet=()=>kt.getLogger("esri.views.webgl.checkWebGLError");function E_e(t){switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case t.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case t.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case t.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case t.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case t.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const S_e=!!ye("enable-feature:webgl-debug");function T_e(){return S_e}function SOt(){return S_e}function H0(t,e=T_e()){if(e){const n=E_e(t);if(n){const r=new Error().stack;Jet().error(new Xe("webgl-error","WebGL error occurred",{message:n,stack:r}))}}}const TOt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},q0={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,HALF_FLOAT:5131},Ut={RGBA4:32854,R16F:33325,RG16F:33327,RGB32F:34837,RGBA16F:34842,R32F:33326,RG32F:33328,RGBA32F:34836,R11F_G11F_B10F:35898,RGB8:32849,RGBA8:32856,RGB5_A1:32855,R8:33321,RG8:33323,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,RGB16F:34843,RGB9_E5:35901,SRGB8:35905,SRGB8_ALPHA8:35907,RGB565:36194,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2:32857,RGB10_A2UI:36975},Qet=Object.values(Ut),RN={DEPTH24_STENCIL8:35056,DEPTH32F_STENCIL8:36013},FT={DEPTH_COMPONENT16:33189,DEPTH_COMPONENT24:33190,DEPTH_COMPONENT32F:36012},nz={FLOAT:q0.FLOAT,UNSIGNED_BYTE:q0.UNSIGNED_BYTE,UNSIGNED_INT_24_8:34042,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,BYTE:q0.BYTE,UNSIGNED_SHORT:q0.UNSIGNED_SHORT,SHORT:q0.SHORT,UNSIGNED_INT:q0.UNSIGNED_INT,INT:q0.INT,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269},kOt=33984,tie={Texture:0,TileTexture:1,BufferObject:2,VertexArrayObject:3,Shader:4,Program:5,FramebufferObject:6,Renderbuffer:7,TransformFeedback:8,Sync:9,UNCOUNTED:10,LinesOfCode:10,Uniform:11,COUNT:12},AOt=1029,IOt=0,POt=36064,COt=36065,ROt=36066,MOt=36067,NOt=33306,OOt=36096,LOt=36128,Zo={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497};function DOt(t,e,n,r=0){const i=t.gl;t.bindBuffer(n);for(const s of n.layout){const o=e.get(s.name);if(o==null){console.warn(`There is no location for vertex attribute '${s.name}' defined.`);continue}const a=r*s.stride;if(s.count<=4)i.vertexAttribPointer(o,s.count,s.type,s.normalized,s.stride,s.offset+a),i.enableVertexAttribArray(o),s.divisor>0&&i.vertexAttribDivisor(o,s.divisor);else if(s.count===9)for(let l=0;l<3;l++)i.vertexAttribPointer(o+l,3,s.type,s.normalized,s.stride,s.offset+12*l+a),i.enableVertexAttribArray(o+l),s.divisor>0&&i.vertexAttribDivisor(o+l,s.divisor);else if(s.count===16)for(let l=0;l<4;l++)i.vertexAttribPointer(o+l,4,s.type,s.normalized,s.stride,s.offset+16*l+a),i.enableVertexAttribArray(o+l),s.divisor>0&&i.vertexAttribDivisor(o+l,s.divisor);else console.error("Unsupported vertex attribute element count: "+s.count);if(T_e()){const l=E_e(t.gl);l&&console.error(`Unable to bind vertex attribute "${s.name}" with baseInstanceOffset ${a}:`,l,s)}}}function jOt(t){switch(t){case 6406:case 6409:case 6403:case 36244:case 6402:case 34041:return 1;case 6410:case 33319:case 33320:return 2;case 6407:case 36248:return 3;case 6408:case 36249:return 4}return 0}function ett(t){switch(t){case 6406:case 6409:case 6403:case 36244:case Ut.R8:case Ut.R8I:case Ut.R8UI:case Ut.R8_SNORM:case 36168:return 1;case 6410:case 33319:case 33320:case Ut.RGBA4:case Ut.R16F:case Ut.R16I:case Ut.R16UI:case Ut.RG8:case Ut.RG8I:case Ut.RG8UI:case Ut.RG8_SNORM:case Ut.RGB565:case Ut.RGB5_A1:case FT.DEPTH_COMPONENT16:return 2;case 6407:case 36248:case Ut.RGB8:case Ut.RGB8I:case Ut.RGB8UI:case Ut.RGB8_SNORM:case Ut.SRGB8:case FT.DEPTH_COMPONENT24:return 3;case 6408:case 36249:case Ut.RGBA8:case Ut.R32F:case Ut.R11F_G11F_B10F:case Ut.RG16F:case Ut.R32I:case Ut.R32UI:case Ut.RG16I:case Ut.RG16UI:case Ut.RGBA8I:case Ut.RGBA8UI:case Ut.RGBA8_SNORM:case Ut.SRGB8_ALPHA8:case Ut.RGB9_E5:case Ut.RGB10_A2UI:case Ut.RGB10_A2:case FT.DEPTH_COMPONENT32F:case RN.DEPTH24_STENCIL8:return 4;case RN.DEPTH32F_STENCIL8:return 5;case Ut.RGB16F:case Ut.RGB16I:case Ut.RGB16UI:return 6;case Ut.RG32F:case Ut.RG32I:case Ut.RG32UI:case Ut.RGBA16F:case Ut.RGBA16I:case Ut.RGBA16UI:return 8;case Ut.RGB32F:case Ut.RGB32I:case Ut.RGB32UI:return 12;case Ut.RGBA32F:case Ut.RGBA32I:case Ut.RGBA32UI:return 16;case Zo.COMPRESSED_RGB_S3TC_DXT1_EXT:case Zo.COMPRESSED_RGBA_S3TC_DXT1_EXT:return .5;case Zo.COMPRESSED_RGBA_S3TC_DXT3_EXT:case Zo.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case Zo.COMPRESSED_R11_EAC:case Zo.COMPRESSED_SIGNED_R11_EAC:case Zo.COMPRESSED_RGB8_ETC2:case Zo.COMPRESSED_SRGB8_ETC2:case Zo.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case Zo.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return .5;case Zo.COMPRESSED_RG11_EAC:case Zo.COMPRESSED_SIGNED_RG11_EAC:case Zo.COMPRESSED_RGBA8_ETC2_EAC:case Zo.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}let k_e=class{constructor(e=0,n=e){this.width=e,this.height=n,this.type=0,this.target=3553,this.pixelFormat=6408,this.dataType=nz.UNSIGNED_BYTE,this.samplingMode=9729,this.wrapMode=10497,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.compareEnabled=!1,this.linearFilterDepth=!1,this.depth=1,this.isImmutable=!1}};function ttt(t){return t.width<=0||t.height<=0||t.depth<=0?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(t.internalFormat==null?4:ett(t.internalFormat))*(t.target===34067?6:1))}const ZE=()=>kt.getLogger("esri/views/webgl/textureUtils");function JE(t){const{width:e,height:n,depth:r}=t;(e!=null&&e<0||n!=null&&n<0||r!=null&&r<0)&&ZE().error("Negative dimension parameters are not allowed!");const{internalFormat:i}=t;if(i&&(A_e(i)||I_e(i))){const{linearFilterDepth:s,compareEnabled:o,samplingMode:a,hasMipmap:l}=t;l&&ZE().error("Depth textures cannot have mipmaps"),s?a!==9729&&a!==9728&&ZE().error("Depth textures cannot sample mipmaps"):(a!==9728&&ZE().error("Depth textures without filtering must use NEAREST filtering"),o&&ZE().error("Depth textures without filtering cannot use compare function"))}}function ntt(t){return Qet.includes(t)}function A_e(t){return CO(FT,t)}function I_e(t){return CO(RN,t)}function rtt(t){return t!=null&&CO(Zo,t)}function yx(t){return t!=null&&"type"in t&&t.type==="compressed"}function itt(t){return t!=null&&"byteLength"in t}function nie(t){return t!=null&&!yx(t)&&!itt(t)}function L_(t){return t===32879||t===35866}function rie(t,e,n,r=1){let i=Math.max(e,n);return t===32879&&(i=Math.max(i,r)),Math.floor(Math.log2(i))+1}function yR(t){if(t.internalFormat!=null)return t.internalFormat;switch(t.dataType){case nz.FLOAT:switch(t.pixelFormat){case 6408:return Ut.RGBA32F;case 6407:return Ut.RGB32F;default:throw new Xe("texture:unknown-format","Unable to derive format")}case nz.UNSIGNED_BYTE:switch(t.pixelFormat){case 6408:return Ut.RGBA8;case 6407:return Ut.RGB8}}const{pixelFormat:e}=t;return t.internalFormat=e===34041?RN.DEPTH24_STENCIL8:e===6402?FT.DEPTH_COMPONENT24:e,t.internalFormat}function stt(t){let e="width"in t?t.width:t.codedWidth,n="height"in t?t.height:t.codedHeight;return t instanceof HTMLVideoElement&&(e=t.videoWidth,n=t.videoHeight),{width:e,height:n,depth:1}}let ott=class P_e extends k_e{constructor(e,n){switch(super(),this.context=e,Object.assign(this,n),this.internalFormat){case Ut.R16F:case Ut.R32F:case Ut.R8_SNORM:case Ut.R8:this.pixelFormat=6403;break;case Ut.R8I:case Ut.R8UI:case Ut.R16I:case Ut.R16UI:case Ut.R32I:case Ut.R32UI:this.pixelFormat=36244}}static validate(e,n){return new P_e(e,n)}};const att=!!ye("esri-tests-disable-gpu-memory-measurements"),yf=()=>kt.getLogger("esri/views/webgl/Texture");var ws;let ltt=(ws=class{constructor(e,n=null,r=null){if(this.type=1,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._shadowFilterDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,r=n;else{const i=ott.validate(e,n);if(!i)throw new Xe("texture:invalid-descriptor","Texture descriptor invalid");this._descriptor=i}this._descriptor.target===34067?this._setDataCubeMap(r):this.setData(r)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return att?0:ttt(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty||this._shadowFilterDirty}get hasWebGLTextureObject(){return!!this._glName}dispose(){this.abortCompression(),this.hasWebGLTextureObject&&this._descriptor.context?.gl&&(this._descriptor.context.instanceCounter.decrement(tie.Texture,this),this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null,this._descriptor=null)}release(){this.dispose()}[Symbol.dispose](){this.dispose()}resize(e,n){const r=this._descriptor;if(r.width!==e||r.height!==n){if(this._wasImmutablyAllocated)throw new Xe("texture:immutable-resize","Immutable textures can't be resized!");r.width=e,r.height=n,this._descriptor.target===34067?this._setDataCubeMap(null):this.setData(null)}}enableCompression(e){this._descriptor.compress=e}disableCompression(){this._descriptor.compress=void 0}setData(e){this.abortCompression(),!yx(e)&&this._descriptor.internalFormat&&CO(Zo,this._descriptor.internalFormat)&&(this._descriptor.internalFormat=void 0),this._setData(e),!yx(e)&&this._descriptor.compress&&this._compressOnWorker(e)}updateData(e,n,r,i,s,o,a=0){o||yf().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||yf().error("An attempt to update uninitialized texture!");const l=this._descriptor;l.internalFormat=yR(l);const{context:c,pixelFormat:u,dataType:h,target:f,isImmutable:g}=l;if(g&&!this._wasImmutablyAllocated)throw new Xe("texture:uninitialized","Cannot update immutable texture before allocation!");const y=c.bindTexture(this,ws.TEXTURE_UNIT_FOR_UPDATES,!0);(n<0||r<0||n+i>l.width||r+s>l.height)&&yf().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:_}=c;a&&(i&&s||yf().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),_.pixelStorei(_.UNPACK_SKIP_ROWS,a)),nie(o)?_.texSubImage2D(f,e,n,r,i,s,u,h,o):yx(o)?_.compressedTexSubImage2D(f,e,n,r,i,s,l.internalFormat,o.levels[e]):_.texSubImage2D(f,e,n,r,i,s,u,h,o),a&&_.pixelStorei(_.UNPACK_SKIP_ROWS,0),c.bindTexture(y,ws.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,n,r,i,s,o,a,l){l||yf().error("An attempt to use uninitialized data!"),this.hasWebGLTextureObject||yf().error("An attempt to update an uninitialized texture!");const c=this._descriptor;c.internalFormat=yR(c);const{context:u,pixelFormat:h,dataType:f,isImmutable:g,target:y}=c;if(g&&!this._wasImmutablyAllocated)throw new Xe("texture:uninitialized","Cannot update immutable texture before allocation!");L_(y)||yf().warn("Attempting to set 3D texture data on a non-3D texture");const _=u.bindTexture(this,ws.TEXTURE_UNIT_FOR_UPDATES);u.setActiveTexture(ws.TEXTURE_UNIT_FOR_UPDATES),(n<0||r<0||i<0||n+s>c.width||r+o>c.height||i+a>c.depth)&&yf().error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage();const{gl:b}=u;if(yx(l))l=l.levels[e],b.compressedTexSubImage3D(y,e,n,r,i,s,o,a,c.internalFormat,l);else{const T=l;b.texSubImage3D(y,e,n,r,i,s,o,a,h,f,T)}u.bindTexture(_,ws.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(e.width===0||e.height===0)return;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new Xe("texture:immutable-change","Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,JE(e)}e.samplingMode===9729?(this._samplingModeDirty=!0,e.samplingMode=9985):e.samplingMode===9728&&(this._samplingModeDirty=!0,e.samplingMode=9984);const n=this._descriptor.context.bindTexture(this,ws.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(ws.TEXTURE_UNIT_FOR_UPDATES),this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(n,ws.TEXTURE_UNIT_FOR_UPDATES)}clearMipmap(){const e=this._descriptor;if(e.hasMipmap){if(this._wasImmutablyAllocated)throw new Xe("texture:immutable-change","Cannot delete mipmaps to immutable texture after allocation");e.hasMipmap=!1,this._samplingModeDirty=!0,JE(e)}e.samplingMode===9985?(this._samplingModeDirty=!0,e.samplingMode=9729):e.samplingMode===9984&&(this._samplingModeDirty=!0,e.samplingMode=9728)}setSamplingMode(e){e!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=e,this._samplingModeDirty=!0)}setWrapMode(e){e!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=e,JE(this._descriptor),this._wrapModeDirty=!0)}setShadowFiltering(e){e!==this._descriptor.linearFilterDepth&&(this._descriptor.linearFilterDepth=this._descriptor.compareEnabled=e,this.setSamplingMode(e?9729:9728),JE(this._descriptor),this._shadowFilterDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1),this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1),this._shadowFilterDirty&&(this._applyShadowMode(),this._shadowFilterDirty=!1)}abortCompression(){this._compressionAbortController=G1(this._compressionAbortController)}_setData(e,n){const r=this._descriptor,i=r.context?.gl;if(!i)return;H0(i),this.hasWebGLTextureObject||(this._glName=i.createTexture(),r.context.instanceCounter.increment(tie.Texture,this)),JE(r);const s=r.context.bindTexture(this,ws.TEXTURE_UNIT_FOR_UPDATES);r.context.setActiveTexture(ws.TEXTURE_UNIT_FOR_UPDATES),this._configurePixelStorage(),H0(i);const o=n??r.target,a=L_(o);if(nie(e))this._setDataFromTexImageSource(e,o);else{const{width:l,height:c,depth:u}=r;if(l==null||c==null)throw new Xe("texture:missing-size","Width and height must be specified!");if(a&&u==null)throw new Xe("texture:missing-depth","Depth must be specified!");if(r.internalFormat=yR(r),r.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(o,r.internalFormat,r.hasMipmap,l,c,u),yx(e)){if(!rtt(r.internalFormat))throw new Xe("texture:format-mismatch","Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(e,r.internalFormat,o)}else this._texImage(o,0,r.internalFormat,l,c,u,e),H0(i),r.hasMipmap&&this.generateMipmap()}this._applySamplingMode(),this._applyWrapMode(),this._applyAnisotropicFilteringParameters(),this._applyShadowMode(),H0(i),r.context.bindTexture(s,ws.TEXTURE_UNIT_FOR_UPDATES)}_setDataCubeMap(e=null){for(let n=34069;n<=34074;n++)this._setData(e,n)}_configurePixelStorage(){const e=this._descriptor.context.gl,{unpackAlignment:n,flipped:r,preMultiplyAlpha:i}=this._descriptor;e.pixelStorei(e.UNPACK_ALIGNMENT,n),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r?1:0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i?1:0)}_setDataFromTexImageSource(e,n){const{gl:r}=this._descriptor.context,i=this._descriptor;i.internalFormat=yR(i);const s=L_(n),{width:o,height:a,depth:l}=stt(e);i.width&&i.height,i.width||(i.width=o),i.height||(i.height=a),s&&i.depth,s&&(i.depth=l),i.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(n,i.internalFormat,i.hasMipmap,o,a,l),this._texImage(n,0,i.internalFormat,o,a,l,e),H0(r),i.hasMipmap&&(this.generateMipmap(),H0(r))}_setDataFromCompressedSource(e,n,r){const i=this._descriptor,{width:s,height:o,depth:a}=i,l=e.levels,c=rie(r,s,o,a),u=Math.min(c,l.length)-1;this._descriptor.context.gl.texParameteri(i.target,33085,u),this._forEachMipmapLevel((h,f,g,y)=>{const _=l[Math.min(h,l.length-1)];this._compressedTexImage(r,h,n,f,g,y,_)},u)}_texStorage(e,n,r,i,s,o){const{gl:a}=this._descriptor.context;if(!ntt(n)&&!A_e(n)&&!I_e(n))throw new Xe("texture:missing-format","Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const l=r?rie(e,i,s,o):1;if(L_(e)){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");a.texStorage3D(e,l,n,i,s,o)}else a.texStorage2D(e,l,n,i,s);this._wasImmutablyAllocated=!0}_texImage(e,n,r,i,s,o,a){const l=this._descriptor.context.gl,c=L_(e),{isImmutable:u,pixelFormat:h,dataType:f}=this._descriptor;if(u){if(a!=null){const g=a;if(c){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texSubImage3D(e,n,0,0,0,i,s,o,h,f,g)}else l.texSubImage2D(e,n,0,0,i,s,h,f,g)}}else{const g=a;if(c){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.texImage3D(e,n,r,i,s,o,0,h,f,g)}else l.texImage2D(e,n,r,i,s,0,h,f,g)}}_compressedTexImage(e,n,r,i,s,o,a){const l=this._descriptor.context.gl,c=L_(e);if(this._descriptor.isImmutable){if(a!=null)if(c){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,n,0,0,0,i,s,o,r,a)}else l.compressedTexSubImage2D(e,n,0,0,i,s,r,a)}else if(c){if(o==null)throw new Xe("texture:missing-depth","Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,n,r,i,s,o,0,a)}else l.compressedTexImage2D(e,n,r,i,s,0,a)}async _compressOnWorker(e){const{width:n,height:r,context:i,flipped:s,preMultiplyAlpha:o,hasMipmap:a}=this._descriptor,l=this._descriptor.compress?.compressionTracker,c=this._descriptor.compress?.compressionCallback,{compressedTextureETC:u,compressedTextureS3TC:h}=i.capabilities;if(!ws.compressionWorkerHandle?.isCompressible(e,this._descriptor)||!u&&!h)return;this.abortCompression();const f=new AbortController;let g;this._compressionAbortController=f,l?.increment();try{e instanceof Uint8Array?g=e.buffer:(g=await createImageBitmap(e,{imageOrientation:s?"flipY":"none"}),mi(f));const y={data:g,width:n,height:r,needsFlip:e instanceof Uint8Array&&this.descriptor.flipped,components:this._descriptor.pixelFormat===6408?4:3,preMultiplyAlpha:o,hasMipmap:a,hasETC:!!u,hasS3TC:!!h},_=await ws.compressionWorkerHandle.invoke(y,f.signal,"low");if(mi(f),_.compressedTexture&&this.hasWebGLTextureObject){const b=this.usedMemory;this._descriptor.internalFormat=_.internalFormat,this._setData(_.compressedTexture),c?.(b-this.usedMemory)}}catch(y){wa(y)||yf().error("Texture compression failed!")}finally{l?.decrement(),this._compressionAbortController?.signal.aborted&&(this._compressionAbortController=null),g instanceof ImageBitmap&&g.close()}}_forEachMipmapLevel(e,n=1/0){let{width:r,height:i,depth:s,hasMipmap:o,target:a}=this._descriptor;const l=a===32879;if(r==null||i==null||l&&s==null)throw new Xe("texture:missing-size","Missing texture dimensions for mipmap calculation");for(let c=0;e(c,r,i,s),o&&(r!==1||i!==1||l&&s!==1)&&!(c>=n);++c)r=Math.max(1,r>>1),i=Math.max(1,i>>1),l&&(s=Math.max(1,s>>1))}_applySamplingMode(){const e=this._descriptor,n=e.context?.gl;let r=e.samplingMode,i=e.samplingMode;r===9985||r===9987?(r=9729,e.hasMipmap||(i=9729)):r!==9984&&r!==9986||(r=9728,e.hasMipmap||(i=9728)),n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,r),n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,i)}_applyWrapMode(){const e=this._descriptor,n=e.context?.gl;typeof e.wrapMode=="number"?(n.texParameteri(e.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,e.wrapMode)):(n.texParameteri(e.target,n.TEXTURE_WRAP_S,e.wrapMode.s),n.texParameteri(e.target,n.TEXTURE_WRAP_T,e.wrapMode.t))}_applyShadowMode(){const e=this._descriptor,n=e.context?.gl,r=e.compareEnabled?n.COMPARE_REF_TO_TEXTURE:n.NONE;n.texParameteri(e.target,n.TEXTURE_COMPARE_MODE,r),e.compareEnabled&&n.texParameteri(e.target,n.TEXTURE_COMPARE_FUNC,n.GREATER),H0(n)}_applyAnisotropicFilteringParameters(){const e=this._descriptor,n=e.context.capabilities.textureFilterAnisotropic;n&&e.context.gl.texParameterf(e.target,n.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}},ws.TEXTURE_UNIT_FOR_UPDATES=0,ws.compressionWorkerHandle=null,ws);const R$=()=>kt.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function ctt(t,e){e.fillColor[0]=t.color.r/255,e.fillColor[1]=t.color.g/255,e.fillColor[2]=t.color.b/255,e.fillColor[3]=t.color.a,t.haloColor?(e.outlineColor[0]=t.haloColor.r/255,e.outlineColor[1]=t.haloColor.g/255,e.outlineColor[2]=t.haloColor.b/255,e.outlineColor[3]=t.haloColor.a):(e.outlineColor[0]=e.fillColor[0],e.outlineColor[1]=e.fillColor[1],e.outlineColor[2]=e.fillColor[2],e.outlineColor[3]=e.fillColor[3]),e.fillColor[3]*=t.fillOpacity,e.outlineColor[3]*=t.haloOpacity,e.fillColor[0]*=e.fillColor[3],e.fillColor[1]*=e.fillColor[3],e.fillColor[2]*=e.fillColor[3],e.outlineColor[0]*=e.outlineColor[3],e.outlineColor[1]*=e.outlineColor[3],e.outlineColor[2]*=e.outlineColor[3],e.outlineWidth=(1-t.haloBlur)*t.haloWidth,e.outerHaloWidth=t.haloBlur*t.haloWidth/2,e.innerHaloWidth=t.haloBlur*t.haloWidth/2,e.outlinePosition=0}const utt=[0,0,0,0];let C_e=class{constructor(){this.type="single",this._highlightOptions=new Pg,this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0},this._optionsShadeTexKey="",this._texelData=new Uint8Array(4*XE),this._minMaxDistance=[0,0]}setHighlightOptions(e){this._highlightOptions=e}applyHighlightOptions(e,n){this._updateGradientTexture(e),e.bindTexture(this._shadeTex,qet),n.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<b_e)-1,activeGradient:this}]}_updateGradientTexture(e){const n=htt(this._highlightOptions);if(n===this._optionsShadeTexKey)return;this._optionsShadeTexKey=n,ctt(this._highlightOptions,this._convertedHighlightOptions);const r=this._convertedHighlightOptions,i=r.outlinePosition-r.outlineWidth/2-r.outerHaloWidth,s=r.outlinePosition-r.outlineWidth/2,o=r.outlinePosition+r.outlineWidth/2,a=r.outlinePosition+r.outlineWidth/2+r.innerHaloWidth,l=Math.sqrt(Math.PI/2)*Zet,c=Math.abs(i)>l?Math.round(10*(Math.abs(i)-l))/10:0,u=Math.abs(a)>l?Math.round(10*(Math.abs(a)-l))/10:0;let h;c&&!u?R$().error("The outer rim of the highlight is "+c+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!c&&u?R$().error("The inner rim of the highlight is "+u+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):c&&u&&R$().error("The highlight is "+Math.max(c,u)+"px away from the edge of the feature; consider reducing some width values.");const f=[void 0,void 0,void 0,void 0];function g(_,b,T){f[0]=(1-T)*_[0]+T*b[0],f[1]=(1-T)*_[1]+T*b[1],f[2]=(1-T)*_[2]+T*b[2],f[3]=(1-T)*_[3]+T*b[3]}const{_texelData:y}=this;for(let _=0;_<XE;++_)h=i+_/(XE-1)*(a-i),h<i?(f[0]=0,f[1]=0,f[2]=0,f[3]=0):h<s?g(utt,r.outlineColor,(h-i)/(s-i)):h<o?[f[0],f[1],f[2],f[3]]=r.outlineColor:h<a?g(r.outlineColor,r.fillColor,(h-o)/(a-o)):[f[0],f[1],f[2],f[3]]=r.fillColor,y[4*_]=255*f[0],y[4*_+1]=255*f[1],y[4*_+2]=255*f[2],y[4*_+3]=255*f[3];if(this._minMaxDistance[0]=i,this._minMaxDistance[1]=a,!this._shadeTex){const _=new k_e(XE,1);_.wrapMode=33071,this._shadeTex=new ltt(e,_)}this._shadeTex.updateData(0,0,0,XE,1,this._texelData)}};function htt(t){return`${t.color};${t.haloColor};${t.haloOpacity};${t.fillOpacity};${t.haloWidth};${t.haloBlur}`}let dtt=class{constructor(){this.type="multi",this.gradients=[]}setHighlightOptions(e){for(let n=0;n<e.length;n++)this.gradients[n]||(this.gradients[n]=new C_e),this.gradients[n].setHighlightOptions(e[n]);for(let n=e.length+1;n<this.gradients.length;n++)this.gradients[n].destroy();this.gradients.length=e.length}destroy(){for(const e of this.gradients)e.destroy()}getReasonsWithGradients(){let e=1;const n=[];for(let r=0;r<this.gradients.length;r++){const i=this.gradients[r];n.push({activeReasons:e,activeGradient:i}),e<<=1}return n}};const R_e={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{compare:514,mask:255,op:{fail:7680,zFail:7680,zPass:7681}}}},ftt={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},ptt={...R_e,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};function mtt({pixelRatio:t,state:e,displayLevel:n,requiredLevel:r},i){const s=1/2**(n-i.key.level),o=1/2**(r-i.key.level);return{displayMat3:e.displayMat3,displayViewMat3:e.displayViewMat3,displayViewScreenMat3:i.transforms.displayViewScreenMat3,viewMat3:e.viewMat3,tileMat3:i.transforms.tileMat3,displayZoomFactor:s,requiredZoomFactor:o,tileOffset:[i.x,i.y],currentScale:e.scale,currentZoom:n,metersPerSRUnit:Kd(e.spatialReference),rotation:e.rotation,pixelRatio:t}}function M_e(t){return t.passOptions?.type==="highlight"}function N_e(t){return t.passOptions?.type==="hittest"}function gtt(t){if(!N_e(t))return null;const{position:e,distance:n,smallSymbolDistance:r,smallSymbolSizeThreshold:i}=t.passOptions;return{position:e,distance:n,smallSymbolDistance:r,smallSymbolSizeThreshold:i}}function ytt(t){if(!M_e(t))return null;const{activeReasons:e,highlightAll:n}=t.passOptions;return{activeReasons:e,highlightAll:n?1:0}}function zOt(t,e,n){const r={};for(const i in n)typeof n[i]!="function"?r[i]=n[i]:r[i]=n[i](t,e);return r}function GOt(t,e){const{attributeView:n,context:r}=t;return{storage:n.getUniforms(r),view:mtt(t,e),hittestRequest:gtt(t),highlight:ytt(t)}}function UOt(t){return{inside:t.selection===2,outside:t.selection===3}}function vtt(t){return N_e(t)?ftt:M_e(t)&&t.passOptions.stepType==="clear"?ptt:R_e}function BOt(t){const{row:e,col:n}=t.key,r=n*eie,i=e*eie;return{tileOffsetFromLocalOrigin:[r%gR,i%gR],maxIntsToLocalOrigin:[Math.floor(r/gR),Math.floor(i/gR)]}}const _tt=new Ys({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function WOt(t){return _tt.toJSON(t)}function HOt(t){const{bandCount:e,attributeTable:n,colormap:r,pixelType:i}=t.raster.rasterInfo;return e===1&&(n!=null||r!=null||i==="u8"||i==="s8")}function xtt(t,e){return e==null?(t?.destroy(),null):(t?.type==="single"&&Array.isArray(e)&&(t.destroy(),t=null),t?.type!=="multi"||Array.isArray(e)||(t.destroy(),t=null),t||(t=Array.isArray(e)?new dtt:new C_e),Array.isArray(e)?t.type==="multi"&&t.setHighlightOptions(e):t.type==="single"&&t.setHighlightOptions(e),t)}function qOt(t,e,n,r){const{painter:i,highlightGradient:s}=t,{highlight:o}=i.effects;if(!s)return;const a=t.passOptions,l=s.getReasonsWithGradients();for(let c=0;c<l.length;c++){const u={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"burn",highlightAll:e}};if(o.bind(u),n(u),c<l.length-1){let f=0;for(let g=c+1;g<l.length;g++)f|=l[g].activeReasons;n({...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:f,stepType:"clear",highlightAll:e}})}const h={...t,passOptions:{type:"highlight",activeGradient:l[c].activeGradient,activeReasons:l[c].activeReasons,stepType:"draw",highlightAll:e}};i.setPipelineState(vtt(t)),i.updatePipelineState(t.context),o.draw(h),o.unbind()}t.passOptions=a}const vR=t=>parseFloat(t)/100;function wtt(t,e,n){const r=typeof t.left=="string"?vR(t.left)*e:t.left,i=typeof t.right=="string"?vR(t.right)*e:t.right,s=typeof t.top=="string"?vR(t.top)*n:t.top,o=typeof t.bottom=="string"?vR(t.bottom)*n:t.bottom,a=s;return{xmin:r,xmax:Math.max(e-i,r),ymin:a,ymax:Math.max(n-o,s)}}function O_e(t,e,n,r){switch(e.type){case"rect":{const{width:i,height:s}=t,{xmin:o,xmax:a,ymin:l,ymax:c}=wtt(e,i,s),{x:u,y:h}=n;return u>o&&u<a&&h>l&&h<c}case"path":return e.path.length===0||!Array.isArray(e.path[0][0])||HB(e.path,[n.x,n.y]);case"geometry":return e.geometry==null||(e.geometry.type==="polygon"?WB(e.geometry,r):SI(e.geometry,r))}}function btt(t){if(!t.highlights)return null;const e=t.highlights.findIndex(n=>n.name==="default");return e===-1?null:t.highlights.items[e]}function Ett(t,e){if(!t.highlights){if(!e)return;t.highlights=new Ot([new Pg])}const n=t.highlights.findIndex(r=>r.name==="default");e?t.highlights.items[n].assignFrom(e):(t.highlights.removeAt(n),t.highlights.length===0&&(t.highlights=null))}async function Stt(t,e,n){const r=mve(e)?pve(t,e):e;if(!t.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let i=new Set;const s=new Set;let o=!1,a=null,l=null;n?.include?sie(n.include,iie(t,f=>{i.add(f),M$(f,g=>s.add(g))},(f,g)=>{s.add(f),i.add(g)},f=>{a||(a=new Set),a.add(f)},f=>i.add(f),()=>o=!0)):(o=!0,i=new Set(t.allLayerViews),i.forEach(f=>{M$(f,g=>s.add(g))})),n?.exclude&&sie(n.exclude,iie(t,f=>{i.delete(f),M$(f,g=>s.delete(g))},f=>s.delete(f),f=>{l||(l=new Set),l.add(f)}));const c=t.toMap(r),u=t.allLayerViews.filter(f=>!f.suspended&&i.has(f)&&f.clips.every(g=>O_e(t,g,r,c))).reverse();let h=[...o?t.graphicsView.hitTest(c).map(f=>({type:"graphic",graphic:f,layer:null,mapPoint:c})):[],...await Promise.all(u.map(f=>f.hitTest(c,r)).toArray())].filter(_2).flat().filter(_2);return h=h.filter(f=>f.type!=="graphic"||f.layer?.type!=="subtype-group"||s.has(f.graphic.layer)),a&&(h=h.filter(f=>!("graphic"in f)||!f.graphic||a?.has(rz(f.graphic)))),l&&(h=h.filter(f=>!("graphic"in f)||!f.graphic||!l?.has(rz(f.graphic)))),{screenPoint:r,results:h}}function iie(t,e,n,r,i,s){return o=>{if(o instanceof Qo){if(o.layer===t)s?.();else{const a=t.allLayerViews.find(l=>l.layer===o.layer);a&&i?.(a)}r(rz(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=t.allLayerViews.find(l=>l.layer===o.parent);a&&n(o,a)}else{const a=t.allLayerViews.find(l=>l.layer===o);a&&e(a)}}}function sie(t,e){if(t)if(z4(t))for(const n of t)if(z4(n))for(const r of n)e(r);else e(n);else e(t)}function rz(t){const e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function M$(t,e){const n=t.layer;n?.type==="subtype-group"&&n.sublayers.forEach(r=>{e(r)})}let QE=null,MN=!0;function Ttt(t,e,n){if(!t||!e)throw new Error("Cannot construct image data without dimensions");if(MN)try{return new ImageData(t,e)}catch{MN=!1}return L_e(t,e,n)}function KOt(t,e,n,r){if(!e||!n)throw new Error("Cannot construct image data without dimensions");if(MN)try{return new ImageData(t,e,n)}catch{MN=!1}const i=L_e(e,n,r);return i.data.set(t,0),i}function ktt(){return QE||(QE=document.createElement("canvas"),QE.width=1,QE.height=1),QE}function L_e(t,e,n){return n||(n=ktt()),n.getContext("2d").createImageData(t,e)}async function Att(t,e){const n=window.URL.createObjectURL(t);try{const{data:r}=await ns(n,{...e,responseType:"image"});return r}catch(r){throw wa(r)?r:new Xe("invalid-image",`Could not fetch requested image at ${n}`)}finally{window.URL.revokeObjectURL(n)}}async function YOt(t,e){const{arrayBuffer:n,mediaType:r}=await Itt(t,e),i=r==="image/png";if(r==="image/gif"){const{isAnimatedGIF:s,parseGif:o}=await _e(()=>import("./gif-BKWFNKCa.js"),[]);if(s(n))return o(n,e)}if(i){const{isAnimatedPNG:s,parseApng:o}=await _e(()=>import("./apng-0wVih5Jj.js"),__vite__mapDeps([400,61]));if(s(n))return o(n,e)}return Att(new Blob([n],{type:r}),e)}async function Itt(t,e){const n=x2(t);if(n?.isBase64)return{arrayBuffer:bfe(n.data),mediaType:n.mediaType};const r=await ns(t,{responseType:"array-buffer",...e});return{arrayBuffer:r.data,mediaType:r.getHeader?.("Content-Type")??""}}function D_e(t,e,n){const{ctx:r,canvas:i}=$_e(t,n),s=r.getImageData(0,0,t.width,t.height),o=V_e(i,e);return F_e(i),{dataUrl:o,data:s}}function j_e(t,e){const{ctx:n,canvas:r}=$_e(t,e),i=n.getImageData(0,0,t.width,t.height);return F_e(r),i}function $_e(t,e){const n=Ptt();e.premultipliedAlpha&&Ntt(t),n.width=t.width,n.height=t.height;const r=n.getContext("2d",{willReadFrequently:!0});return r.putImageData(t,0,0),e.flipY&&Mtt(r),{ctx:r,canvas:n}}function F_e(t){t.width=0,t.height=0}function Ptt(){return N$==null&&(N$=document.createElement("canvas")),N$}let N$=null;function V_e(t,e){const n=Ott[e.format],r=e.quality/100;return t.toDataURL(n,r)}function z_e(t,e){const n=Rtt(t),r=Dtt[n];return{format:n,quality:_u(e??r,0,100)}}function G_e(t,e){return e/Math.max(t[0],t[1])}function Ctt(t,e,n,r=0,i=0,s=t.width-r,o=t.height-i,a=!1){const{data:l}=t,{width:c,height:u,data:h}=e,f=s/c,g=o/u,y=Math.ceil(f/2),_=Math.ceil(g/2),b=t.width;for(let T=0;T<u;T++)for(let A=0;A<c;A++){const I=4*(A+(a?u-T-1:T)*c);let P=0,N=0,L=0,C=0,M=0,O=0;const D=(T+.5)*g;for(let V=Math.floor(T*g);V<(T+1)*g;V++){const U=Math.abs(D-(V+.5))/_,G=(A+.5)*f,de=U*U;for(let ke=Math.floor(A*f);ke<(A+1)*f;ke++){const Ue=Math.abs(G-(ke+.5))/y,Ne=Math.sqrt(de+Ue*Ue);if(Ne>=1)continue;let fe=2*Ne*Ne*Ne-3*Ne*Ne+1;const De=4*(r+ke+(i+V)*b);O+=fe*l[De+3],N+=fe,!n&&l[De+3]<255&&(fe=fe*l[De+3]/255),L+=fe*l[De],C+=fe*l[De+1],M+=fe*l[De+2],P+=fe}}h[I]=L/P,h[I+1]=C/P,h[I+2]=M/P,h[I+3]=O/N}return e}function Rtt(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return Ltt}}function Mtt(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function Ntt(t){const e=t.data,n=e.length;for(let r=0;r<n;r+=4){const i=e[r+3];if(i!==255&&i>0){const s=255/i;e[r]=e[r]*s,e[r+1]=e[r+1]*s,e[r+2]=e[r+2]*s}}}const Ott={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},oie=98,Ltt="png",Dtt={png:100,jpg:oie,jpeg:oie},XOt=Object.freeze(Object.defineProperty({__proto__:null,createEmptyImageData:Ttt,encode:D_e,encodeData:j_e,getFormatAndQuality:z_e,getMaximumResolutionScale:G_e,resampleHermite:Ctt,toDataUrl:V_e},Symbol.toStringTag,{value:"Module"})),U_e={flipY:!0,premultipliedAlpha:!0};async function jtt(t,e){const n=await B_e(t,e),{format:r,quality:i}=z_e(e?.format,e?.quality);return D_e(n,{format:r,quality:i},U_e)}async function $tt(t,e){const n=await B_e(t,e);return j_e(n,U_e)}function B_e(t,e){const n=ztt(e||{},Vtt(t.stage,t.size),t.size,t.padding),r=Ftt(e,t.allLayerViews);return t.stage.takeScreenshot(n,r,t.backgroundColor,e?.rotation)}function Ftt(t={},e){if(!t.layers)return;const n=[];return t.layers.forEach(r=>{const i=e.find(s=>s.layer.id===r.id);i?.container&&n.push(i.container)}),n}function Vtt(t,e){return Math.min(4,G_e(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function ztt(t,e,n,r){t.ignorePadding&&(r={left:0,right:0,top:0,bottom:0});let i=null;t.width!=null&&t.height!=null?i=[t.width,t.height]:t.width==null&&t.height!=null?i=[t.height,t.height]:t.width!=null&&t.height==null?i=[t.width,t.width]:t.width==null&&t.height==null&&(i=null);const s=n[0]-(r.left+r.right),o=n[1]-(r.top+r.bottom);let a,l,c=t.area||{x:0,y:0,width:s,height:o};if(i){const u=s/o,h=i[0]/i[1];if(h>u){const f=c.width/h;c={x:c.x,y:Math.round(c.y+(c.height-f)/2),width:c.width,height:Math.round(f)}}else{const f=c.height*h;c={x:Math.round(c.x+(c.width-f)/2),y:c.y,width:Math.round(f),height:c.height}}}else i=[c.width,c.height];return i[0]>c.width?(a=Math.min(i[0]/c.width,e),l=i[0]/c.width/a):(a=1,l=i[0]/c.width),{cropArea:{x:Math.round((c.x+r.left)*a),y:Math.round((c.y+r.top)*a),width:Math.round(c.width*a),height:Math.round(c.height*a)},outputScale:l,resolutionScale:a}}const Gtt=t=>t.includes("Brush");let W_e=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),Gtt(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};const aie=Symbol("analyses-owner-handles");let Om=class extends Kt{constructor(e){super(e),this._allAnalysisViews=new Ot,this._creatingViewCount=0,this._attachedToViewResolver=lie(),this._items=new Map,this._moduleMap=new Map,this._scheduledUpdateHandle=null,this._emitOnView=(n,r)=>this.view.emit(n,r)}destroy(){this._disconnectOwners(),this._attachedToViewResolver.reject(Cr("AnalysisViewManager was destroyed")),this._set("view",null)}attach(){this._connectOwners(),this._attachedToViewResolver.resolve()}detach(){this._disconnectOwners(),this._attachedToViewResolver.reject(Cr()),this._attachedToViewResolver=lie()}get updating(){return!this.view.ready||this._creatingViewCount!==0||this._allAnalysisViews.some(e=>e.updating)}get testInfo(){}async whenAnalysisView(e){await this._attachedToViewResolver.promise;const n=this._items.get(e);if(n==null||n.state.list===1)throw new Xe("AnalysisViewManager:no-analysis-view-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return n.createAnalysisViewTask.promise}_connectOwners(){this.addHandles(this._connectAnalysesCollection(this.view.analyses),aie)}_disconnectOwners(){this.removeHandles(aie),this._update(),this._creatingViewCount=0}_connectAnalysesCollection(e){for(const i of e)this._addAnalysis(i);const n=e.on("after-add",i=>this._addAnalysis(i.item)),r=e.on("after-remove",i=>this._removeAnalysis(i.item));return Zn(()=>{n.remove(),r.remove();for(const i of e)this._removeAnalysis(i)})}_addAnalysis(e){const n=this._items.get(e);if(n==null){const r={state:{view:0,list:0},analysis:e,view:null,createAnalysisViewTask:null};this._items.set(e,r),r.createAnalysisViewTask=VO(i=>this._createAnalysisViewPromise(r,i).then(s=>(this._emitOnView("analysis-view-create",{analysis:e,analysisView:s}),s),s=>{throw this._emitOnView("analysis-view-create-error",{analysis:e,error:s}),s}))}else n.state.list=0}_removeAnalysis(e){const n=this._items.get(e);n!=null?(n.state.list=1,this._scheduleUpdate()):kt.getLogger(this).error("Trying to remove analysis which was not added")}_scheduleUpdate(){this._scheduledUpdateHandle==null&&(this._scheduledUpdateHandle=gb(()=>this._update()))}_update(){this._scheduledUpdateHandle=ii(this._scheduledUpdateHandle),this._items.forEach(e=>{if(e.state.list!==1)return;const{analysis:n,view:r}=e;switch(this._items.delete(n),e.state.view){case 0:e.createAnalysisViewTask=G1(e.createAnalysisViewTask);break;case 1:r!=null&&(this._allAnalysisViews.remove(r),e.view=Di(r),e.createAnalysisViewTask=null,this._emitOnView("analysis-view-destroy",{analysis:n,analysisView:r}))}})}async _createAnalysisViewPromise(e,n){const{analysis:r}=e;if(this._creatingViewCount+=1,!this._moduleMap.has(r.type))try{this._moduleMap.set(r.type,await this.importAnalysisViewModule(r))}catch{throw this._creatingViewCount-=1,new Xe("AnalysisViewManager:no-analysis-view-for-analysis",`Analysis of type "${r.type}" is not supported`)}if(ma(n))throw this._creatingViewCount-=1,Cr("AnalysisView creation aborted");const i=new(this._moduleMap.get(r.type)).default({analysis:r,view:this.view});let s=!0;vu(n,()=>{s&&this._destroyAnalysisView(r,i)});try{await i.when()}catch(o){throw s=!1,this._destroyAnalysisView(r,i),o}if(ma(n))throw Cr();return s=!1,e.view=i,e.state.view=1,this._allAnalysisViews.add(i),this._creatingViewCount-=1,i}_destroyAnalysisView(e,n){n.destroyed||(this._creatingViewCount-=1,n.destroy(),this._emitOnView("analysis-view-destroy",{analysis:e,analysisView:n}))}};x([E()],Om.prototype,"updating",null),x([E({constructOnly:!0})],Om.prototype,"importAnalysisViewModule",void 0),x([E({constructOnly:!0})],Om.prototype,"view",void 0),x([E()],Om.prototype,"_allAnalysisViews",void 0),x([E()],Om.prototype,"_creatingViewCount",void 0),Om=x([ue("esri.views.support.AnalysisViewManager")],Om);const Utt=Om;function lie(){const t=xc();return t.promise.catch(()=>{}),t}let Btt=class{constructor(e){this.getUnmaskedRenderer=e}};function Wtt(t){const e=t.getExtension("WEBGL_debug_renderer_info");return e?new Btt(()=>t.getParameter(e.UNMASKED_RENDERER_WEBGL)):null}let cie;function Htt(){return cie??=Ytt(),cie}let qtt=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1,this.unmaskedRenderer="unloaded"}};function Ktt(t){if(typeof WebGL2RenderingContext>"u")return null;const e=document.createElement("canvas");if(!e)return null;let n=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});if(n==null&&(n=e.getContext("webgl2"),n!=null&&(t.majorPerformanceCaveat=!0,t.unmaskedRenderer=Wtt(n)?.getUnmaskedRenderer()??"unknown")),n==null)return n;t.available=!0,t.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),t.supportsVertexShaderSamplers=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);return r&&(t.supportsHighPrecisionFragment=r.precision>0),n}function Ytt(){const t=new qtt,e=Ktt(t);return e==null||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function Xtt(t){const e=Htt();return e.available?t==="3d"&&e.majorPerformanceCaveat?new Xe("webgl:major-performance-caveat-detected",`Your WebGL implementation (${e.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new Xe("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new Xe("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new Xe("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function Ztt(t){return t&&"nodeType"in t}function Jtt(t){return t&&typeof t.render=="function"}const uie={component:"esri-component"};let yy=class extends Kt{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){const n=this._get("node");e!==n&&(e&&e.classList.add(uie.component),n&&n.classList.remove(uie.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||Ztt(e)?(this._set("widget",null),CW(e)):(Jtt(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};x([E()],yy.prototype,"id",null),x([E()],yy.prototype,"node",null),x([qs("node")],yy.prototype,"castNode",null),x([E({readOnly:!0})],yy.prototype,"widget",void 0),yy=x([ue("esri.views.ui.Component")],yy);const y3=yy,Qtt=(t,e)=>{let n=t;for(;n;){if(n===e)return!0;if(!n.parentNode)return!1;n.parentNode instanceof ShadowRoot?n=n.parentNode.host:n=n.parentNode}return!1},nLt=(t,e,n)=>{const r=ent(e).subscribe;return r(i=>{i.some(o=>Qtt(t,o.target))&&n()})},O$={},ent=t=>{const e=t.join(","),n=O$[e];if(n!==void 0)return n;const r=new Set,i=new MutationObserver(o=>r.forEach(a=>a(o)));globalThis.document&&i.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const s={subscribe:o=>(r.add(o),()=>{r.delete(o),r.size===0&&(i.disconnect(),O$[e]=void 0)})};return O$[e]=s,s},H_e=(t,e)=>{let n=t;for(;n;){const r=n.closest?.(e);if(r)return r;const i=n.getRootNode?.();if(i===globalThis.document)return;n=i.host}};function tnt(t){const e=H_e(t,".calcite-mode-dark, .calcite-mode-light, .calcite-mode-auto");return e?.classList.contains("calcite-mode-dark")||e?.classList.contains("calcite-mode-auto")&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}const rLt=(t,e,n)=>H_e(t,`[${e}]`)?.getAttribute(e)??n,nnt="--esri-calcite-mode-name";function rnt(){const t=getComputedStyle(document.body).getPropertyValue(nnt).replaceAll(/\W/g,"").toLowerCase();return t==="dark"||t==="light"?t:void 0}const q_e="calcite-mode-";function K_e(t){return rnt()??tnt(t??document.body)}function iLt(t){return K_e(t)==="dark"}function int(t){return`${q_e}${K_e(t)}`}function snt(t){const e=int(t);ont(t),t.classList.add(e)}function ont(t){Array.from(t.classList).forEach(e=>{e.startsWith(q_e)&&t.classList.remove(e)})}const yL=new Map;function Y_e(){yL.clear()}function ant(t){return yL.get(t)}function lnt(t,e){yL.set(t,e)}function L$(t){yL.delete(t)}function cnt(...t){const e=Na.acquire();for(let r=0;r<t.length;r++){const i=t[r],s=typeof i;if(s==="string")e.push(i);else if(Array.isArray(i))e.push.apply(e,i);else if(s==="object")for(const o in i)i[o]&&e.push(o)}const n=e.join(" ");return Na.release(e),n}(()=>{const t=new Map,e=new ResizeObserver(r=>{Y_e();for(const i of r)t.get(i.target)?.(i)}),n=(r,i,s)=>(t.set(r,i),e.observe(r,s),Zn(()=>{e.unobserve(r),t.delete(r)}));return(r,i,s)=>{let o=null;return yv([fn(()=>typeof r=="function"?r():r,a=>{o?.remove(),a&&(o=n(a,i,s))},ra),Zn(()=>o?.remove())])}})();function unt(t){const e=t?.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function sLt(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function oLt(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function hnt(t){return t==="Enter"||t===" "}async function dnt(t,e){await x$e(yI(e));const n=typeof t=="function"?t():t;n&&("setFocus"in n&&typeof n.setFocus=="function"?await n.setFocus():n instanceof HTMLElement&&n.focus())}const fnt={left:0,top:0,bottom:0,right:0},X_e={bottom:30,top:15,right:15,left:15},vf="esri-ui",tl={ui:vf,corner:`${vf}-corner`,innerContainer:`${vf}-inner-container`,manualContainer:`${vf}-manual-container`,cornerContainer:`${vf}-corner-container`,topLeft:`${vf}-top-left`,topRight:`${vf}-top-right`,bottomLeft:`${vf}-bottom-left`,bottomRight:`${vf}-bottom-right`};function pnt(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function _R(t){return t===0?"0":`${t}px`}function D$(t){const e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function j$(t,{top:e,bottom:n,left:r,right:i}){t.style.top=e,t.style.bottom=n,t.style.left=r,t.style.right=i}let nd=class extends wI{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=du(),this.view=null,this._applyViewPadding=()=>{const n=this.container;n&&j$(n,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const n=this._innerContainer;n&&j$(n,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([fn(()=>[this.view?.padding,this.container],this._applyViewPadding,ya),fn(()=>this.padding,this._applyUIPadding,ya),fn(()=>[this.container,this._locale],([e,n])=>{e&&e.setAttribute("lang",n)},ya),wme(e=>{this._locale=e})])}destroy(){this.removeAllHandles(),this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear(),this.view=null,this._set("view",null)}set container(e){const n=this._get("container");e!==n&&(e&&(e.classList.add(tl.ui),snt(e),this._attachContainers(e)),n&&(n.classList.remove(tl.ui),j$(n,{top:"",bottom:"",left:"",right:""}),n.textContent=""),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const n=this._getViewPadding(),{top:r,bottom:i}=n;return Math.max(e-r-i,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...X_e,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const n=this._getViewPadding(),{left:r,right:i}=n;return Math.max(e-r-i,0)}add(e,n){let r,i,s;if(Array.isArray(e))return void e.forEach(a=>this.add(a,n));const o=D$(e);o&&({index:r,position:n,component:e,key:i}=o),n&&typeof n=="object"&&({index:r,key:i,position:n,internal:s}=n),!e||n&&!this._isValidPosition(n)||this._add(e,n,r??this._getNumComponentsAtPosition(n),i,s)}remove(e,n){if(!e)return;if(Array.isArray(e))return e.map(i=>this.remove(i,n));const r=this._find(e);if(r){const i=this._componentMap.get(r);if(!i||i.key!==n)return;const s=this._components.indexOf(r);return r.node.parentNode?.removeChild(r.node),this._componentMap.delete(r),r.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.forEach(a=>{const l=this._componentMap.get(a);l&&l.position===i.position&&l.index>i.index&&l.index--}),this._components.splice(s,1)[0]}}empty(e,n={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,n);return}const r=this._positionNameToContainerLookup[e??"manual"],i=Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(s=>s==null?!1:!(this._componentMap.get(s)?.internal??!1)||n.removeInternal);for(const s of i)this.remove(s)}move(e,n){if(Array.isArray(e)&&e.forEach(o=>this.move(o,n)),!e)return;let r;const i=D$(e)||D$(n);if(i&&(r=i.index,n=i.position,e=i.component||e),n&&!this._isValidPosition(n))return;const s=this.remove(e);s&&this.add(s,{position:n,index:r})}find(e){if(!e)return null;const n=this._findById(e);return n&&(n.widget||n.node)}getComponents(e,n={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,n)):this._getComponentsAtPosition(e,n):this._components.filter(r=>n.includeInternal||!this._componentMap.get(r)?.internal).map(({widget:r,node:i})=>r??i)}getPosition(e){for(const n in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[n].contains(e))return n;return null}_add(e,n,r,i,s){e instanceof y3||(e=new y3({node:e}));const{widget:o}=e;o!=null&&o instanceof Kt&&o.addHandles(Zn(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey);const a=this._positionNameToContainerLookup[n];this._components.some(l=>{const c=this._componentMap.get(l)?.position,u=c?this._positionNameToContainerLookup[c]:null;return a===u&&this._componentMap.get(l)?.index===r})&&this._components.forEach(l=>{const c=this._componentMap.get(l),u=c?.position,h=u?this._positionNameToContainerLookup[u]:null;c&&h===a&&c.index>=r&&c.index++}),this._place({component:e,position:n,index:r}),this._components.push(e),this._componentMap.set(e,{key:i,position:n,internal:s,index:r})}_find(e){return e?e instanceof y3?this._findByComponent(e):typeof e=="string"?this._findById(e):"domNode"in e?this._findByNode(e.domNode):this._findByNode(e):null}_getViewPadding(){return this.view?.padding??fnt}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(tl.innerContainer,tl.cornerContainer);const n=document.createElement("div");n.classList.add(tl.innerContainer,tl.manualContainer);const r=document.createElement("div");r.classList.add(tl.topLeft,tl.corner),e.appendChild(r);const i=document.createElement("div");i.classList.add(tl.topRight,tl.corner),e.appendChild(i);const s=document.createElement("div");s.classList.add(tl.bottomLeft,tl.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(tl.bottomRight,tl.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=n;const a=unt();this._cornerNameToContainerLookup={"top-left":r,"top-right":i,"bottom-left":s,"bottom-right":o,"top-leading":a?i:r,"top-trailing":a?r:i,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:n,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const n=e.position??"manual",{component:r,index:i}=e,s=this._positionNameToContainerLookup[n],o=i!=null&&i>-1;if(pnt(r.widget)&&r.widget.startup(),!o)return void s.appendChild(r.node);const a=Array.from(s.children);if(a.length!==0){for(const l of a){const c=this._findByNode(l);if(c&&i<(this._componentMap.get(c)?.index??0))return void l.parentNode?.insertBefore(r.node,l)}s.appendChild(r.node)}else s.appendChild(r.node)}_toPixelPosition(e){return{top:_R(e.top),left:_R(e.left),right:_R(e.right),bottom:_R(e.bottom)}}_findByComponent(e){return this._components.find(n=>n===e)??null}_findById(e){return this._components.find(({id:n})=>n===e)??null}_findByNode(e){return e?this._components.find(({node:n})=>n===e):null}_getComponentsAtPosition(e,n){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(i=>this._findByNode(i)).filter(_2).filter(i=>n.includeInternal||!this._componentMap.get(i)?.internal).map(({widget:i,node:s})=>i??s)}_getNumComponentsAtPosition(e){return this._positionNameToContainerLookup[e]?.children.length??0}};x([E()],nd.prototype,"_locale",void 0),x([E()],nd.prototype,"container",null),x([E()],nd.prototype,"height",null),x([E({value:X_e})],nd.prototype,"padding",null),x([qs("padding")],nd.prototype,"castPadding",null),x([E()],nd.prototype,"view",void 0),x([E()],nd.prototype,"width",null),nd=x([ue("esri.views.ui.UI")],nd);const mnt=nd,gnt={handleInterceptedEvent:(t,e,n,r)=>(t.scheduleRender(),e.properties[`on${r.type}`].apply(e.properties.bind||n,[r]))},ynt={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,n)=>{e.startsWith("-")?t.style.setProperty(e,n):t.style[e]=n}},vnt=t=>({...ynt,...t}),_nt=(t,e)=>{const n=[];for(;t&&t!==e;)n.push(t),t=t.parentNode;return n},xnt=(t,e)=>t.find(e),hie=(t,e,n=!1)=>{let r=t;return e.forEach((i,s)=>{const o=r?.children?xnt(r.children,a=>a.domNode===i):void 0;n&&!o&&s!==e.length-1||(r=o)}),r},wnt=t=>{let e;const n={...gnt,...t},r=vnt(n),i=r.performanceLogger;let s,o=!0,a=!1;const l=[],c=[],u=(f,g,y)=>{let _;r.eventHandlerInterceptor=(T,A,I,P)=>function(N){let L;i("domEvent",N);const C=_nt(N.currentTarget,_.domNode),M=C.some(D=>customElements.get(D?.tagName?.toLowerCase()));if(N.eventPhase===Event.CAPTURING_PHASE||!M)C.reverse(),L=hie(_.getLastRender(),C);else{const D=N.composedPath(),V=D.slice(D.indexOf(N.currentTarget),D.indexOf(_.domNode)).reverse();L=hie(_.getLastRender(),V,!0)}let O;return L&&(O=n.handleInterceptedEvent(e,L,this,N)),i("domEventProcessed",N),O},n.postProcessProjectionOptions?.(r);const b=y();_=f(g,b,r),r.eventHandlerInterceptor=void 0,l.push(_),c.push(y),n.afterFirstVNodeRendered&&n.afterFirstVNodeRendered(_,b)};let h=()=>{if(s=void 0,o){o=!1,i("renderStart",void 0);for(let f=0;f<l.length;f++){const g=c[f]();i("rendered",void 0);try{l[f].update(g)}catch(y){console.error(y)}i("patched",void 0)}i("renderDone",void 0),o=!0}};return n.modifyDoRenderImplementation&&(h=n.modifyDoRenderImplementation(h,l,c)),e={renderNow:h,scheduleRender:()=>{s||a||(s=requestAnimationFrame(h))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(f,g)=>{u(cg.append,f,g)},insertBefore:(f,g)=>{u(cg.insertBefore,f,g)},merge:(f,g)=>{u(cg.merge,f,g)},replace:(f,g)=>{u(cg.replace,f,g)},detach:f=>{for(let g=0;g<c.length;g++)if(c[g]===f)return c.splice(g,1),l.splice(g,1)[0];throw new Error("renderFunction was not found")}},e},Mi=(t,e,...n)=>{try{return t?.call(e,...n)}catch(r){console.error(r,t)}},iz=async(t,e,...n)=>{try{return await t?.call(e,...n)}catch(r){console.error(r,t)}},aH=Symbol.for("controller"),bnt=t=>typeof t=="object"&&t!==null&&(aH in t||"hostConnected"in t||"hostDisconnected"in t||"hostUpdate"in t||"hostUpdated"in t),lLt=t=>typeof t?.then=="function";let WS;const HS=t=>{WS!==t&&(WS=t,queueMicrotask(()=>WS===t?WS=void 0:0))},vL=t=>WS;let vy=[];const Ent=t=>{if(t===void 0){vy=[];return}const e=vy.indexOf(t);vy=e===-1?[...vy,t]:vy.slice(0,e+1),queueMicrotask(()=>vy=[])},Snt=()=>vy;let jx;const cLt=t=>{jx!==t&&(jx=t,queueMicrotask(()=>jx===t?jx=void 0:0))},Tnt=()=>{const t=jx;return jx=void 0,t},knt=async(t,e)=>{const n=lH(t);if(n===void 0)return t;if(await n.ready,typeof e=="function"){const r=n.watchExports(i=>e(i,r))}return n.exports},Ant=async t=>{const e=lH(t);return await e.ready,e},lH=t=>{const n=vL().manager.X(t);if(n!==void 0)return n;if(bnt(t))return t;const r=Tnt();if(r!==void 0)return r};let sz=!1;const uLt=t=>{sz=!0;try{return t()}finally{sz=!1}};const v3=globalThis,cH=v3.ShadowRoot&&(v3.ShadyCSS===void 0||v3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,uH=Symbol(),die=new WeakMap;let Z_e=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==uH)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(cH&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=die.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&die.set(n,e))}return e}toString(){return this.cssText}};const Int=t=>new Z_e(typeof t=="string"?t:t+"",void 0,uH),dLt=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,i,s)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new Z_e(n,t,uH)},Pnt=(t,e)=>{if(cH)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),i=v3.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)}},fie=cH?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Int(n)})(t):t;const{is:Cnt,defineProperty:Rnt,getOwnPropertyDescriptor:Mnt,getOwnPropertyNames:Nnt,getOwnPropertySymbols:Ont,getPrototypeOf:Lnt}=Object,_L=globalThis,pie=_L.trustedTypes,Dnt=pie?pie.emptyScript:"",jnt=_L.reactiveElementPolyfillSupport,VT=(t,e)=>t,oz={toAttribute(t,e){switch(e){case Boolean:t=t?Dnt:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},hH=(t,e)=>!Cnt(t,e),mie={attribute:!0,type:String,converter:oz,reflect:!1,useDefault:!1,hasChanged:hH};Symbol.metadata??=Symbol("metadata"),_L.litPropertyMetadata??=new WeakMap;let vx=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=mie){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),i=this.getPropertyDescriptor(e,r,n);i!==void 0&&Rnt(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){const{get:i,set:s}=Mnt(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:i,set(o){const a=i?.call(this);s?.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??mie}static _$Ei(){if(this.hasOwnProperty(VT("elementProperties")))return;const e=Lnt(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(VT("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(VT("properties"))){const n=this.properties,r=[...Nnt(n),...Ont(n)];for(const i of r)this.createProperty(i,n[i])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,i]of n)this.elementProperties.set(r,i)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const i=this._$Eu(n,r);i!==void 0&&this._$Eh.set(i,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(fie(i))}else e!==void 0&&n.push(fie(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Pnt(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){const r=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,r);if(i!==void 0&&r.reflect===!0){const s=(r.converter?.toAttribute!==void 0?r.converter:oz).toAttribute(n,r.type);this._$Em=e,s==null?this.removeAttribute(i):this.setAttribute(i,s),this._$Em=null}}_$AK(e,n){const r=this.constructor,i=r._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const s=r.getPropertyOptions(i),o=typeof s.converter=="function"?{fromAttribute:s.converter}:s.converter?.fromAttribute!==void 0?s.converter:oz;this._$Em=i;const a=o.fromAttribute(n,s.type);this[i]=a??this._$Ej?.get(i)??a,this._$Em=null}}requestUpdate(e,n,r,i=!1,s){if(e!==void 0){const o=this.constructor;if(i===!1&&(s=this[e]),r??=o.getPropertyOptions(e),!((r.hasChanged??hH)(s,n)||r.useDefault&&r.reflect&&s===this._$Ej?.get(e)&&!this.hasAttribute(o._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:i,wrapped:s},o){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,o??n??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),i===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[i,s]of this._$Ep)this[i]=s;this._$Ep=void 0}const r=this.constructor.elementProperties;if(r.size>0)for(const[i,s]of r){const{wrapped:o}=s,a=this[i];o!==!0||this._$AL.has(i)||a===void 0||this.C(i,void 0,s,a)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),this._$EO?.forEach(r=>r.hostUpdate?.()),this.update(n)):this._$EM()}catch(r){throw e=!1,this._$EM(),r}e&&this._$AE(n)}willUpdate(e){}_$AE(e){this._$EO?.forEach(n=>n.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(n=>this._$ET(n,this[n])),this._$EM()}updated(e){}firstUpdated(e){}};vx.elementStyles=[],vx.shadowRootOptions={mode:"open"},vx[VT("elementProperties")]=new Map,vx[VT("finalized")]=new Map,jnt?.({ReactiveElement:vx}),(_L.reactiveElementVersions??=[]).push("2.1.2");const dH=globalThis,gie=t=>t,NN=dH.trustedTypes,yie=NN?NN.createPolicy("lit-html",{createHTML:t=>t}):void 0,J_e="$lit$",Zm=`lit$${Math.random().toFixed(9).slice(2)}$`,Q_e="?"+Zm,$nt=`<${Q_e}>`,Q1=document,dA=()=>Q1.createComment(""),fA=t=>t===null||typeof t!="object"&&typeof t!="function",fH=Array.isArray,Fnt=t=>fH(t)||typeof t?.[Symbol.iterator]=="function",$$=`[ 	
\f\r]`,eS=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,vie=/-->/g,_ie=/>/g,K0=RegExp(`>|${$$}(?:([^\\s"'>=/]+)(${$$}*=${$$}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),xie=/'/g,wie=/"/g,exe=/^(?:script|style|textarea|title)$/i,txe=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),pLt=txe(1),mLt=txe(2),Xg=Symbol.for("lit-noChange"),es=Symbol.for("lit-nothing"),bie=new WeakMap,Yy=Q1.createTreeWalker(Q1,129);function nxe(t,e){if(!fH(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return yie!==void 0?yie.createHTML(e):e}const Vnt=(t,e)=>{const n=t.length-1,r=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=eS;for(let a=0;a<n;a++){const l=t[a];let c,u,h=-1,f=0;for(;f<l.length&&(o.lastIndex=f,u=o.exec(l),u!==null);)f=o.lastIndex,o===eS?u[1]==="!--"?o=vie:u[1]!==void 0?o=_ie:u[2]!==void 0?(exe.test(u[2])&&(i=RegExp("</"+u[2],"g")),o=K0):u[3]!==void 0&&(o=K0):o===K0?u[0]===">"?(o=i??eS,h=-1):u[1]===void 0?h=-2:(h=o.lastIndex-u[2].length,c=u[1],o=u[3]===void 0?K0:u[3]==='"'?wie:xie):o===wie||o===xie?o=K0:o===vie||o===_ie?o=eS:(o=K0,i=void 0);const g=o===K0&&t[a+1].startsWith("/>")?" ":"";s+=o===eS?l+$nt:h>=0?(r.push(c),l.slice(0,h)+J_e+l.slice(h)+Zm+g):l+Zm+(h===-2?a:g)}return[nxe(t,s+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class pA{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let s=0,o=0;const a=e.length-1,l=this.parts,[c,u]=Vnt(e,n);if(this.el=pA.createElement(c,r),Yy.currentNode=this.el.content,n===2||n===3){const h=this.el.content.firstChild;h.replaceWith(...h.childNodes)}for(;(i=Yy.nextNode())!==null&&l.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const h of i.getAttributeNames())if(h.endsWith(J_e)){const f=u[o++],g=i.getAttribute(h).split(Zm),y=/([.?@])?(.*)/.exec(f);l.push({type:1,index:s,name:y[2],strings:g,ctor:y[1]==="."?Gnt:y[1]==="?"?Unt:y[1]==="@"?Bnt:xL}),i.removeAttribute(h)}else h.startsWith(Zm)&&(l.push({type:6,index:s}),i.removeAttribute(h));if(exe.test(i.tagName)){const h=i.textContent.split(Zm),f=h.length-1;if(f>0){i.textContent=NN?NN.emptyScript:"";for(let g=0;g<f;g++)i.append(h[g],dA()),Yy.nextNode(),l.push({type:2,index:++s});i.append(h[f],dA())}}}else if(i.nodeType===8)if(i.data===Q_e)l.push({type:2,index:s});else{let h=-1;for(;(h=i.data.indexOf(Zm,h+1))!==-1;)l.push({type:7,index:s}),h+=Zm.length-1}s++}}static createElement(e,n){const r=Q1.createElement("template");return r.innerHTML=e,r}}function V2(t,e,n=t,r){if(e===Xg)return e;let i=r!==void 0?n._$Co?.[r]:n._$Cl;const s=fA(e)?void 0:e._$litDirective$;return i?.constructor!==s&&(i?._$AO?.(!1),s===void 0?i=void 0:(i=new s(t),i._$AT(t,n,r)),r!==void 0?(n._$Co??=[])[r]=i:n._$Cl=i),i!==void 0&&(e=V2(t,i._$AS(t,e.values),i,r)),e}class znt{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,i=(e?.creationScope??Q1).importNode(n,!0);Yy.currentNode=i;let s=Yy.nextNode(),o=0,a=0,l=r[0];for(;l!==void 0;){if(o===l.index){let c;l.type===2?c=new GI(s,s.nextSibling,this,e):l.type===1?c=new l.ctor(s,l.name,l.strings,this,e):l.type===6&&(c=new Wnt(s,this,e)),this._$AV.push(c),l=r[++a]}o!==l?.index&&(s=Yy.nextNode(),o++)}return Yy.currentNode=Q1,i}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class GI{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,n,r,i){this.type=2,this._$AH=es,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$Cv=i?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=V2(this,e,n),fA(e)?e===es||e==null||e===""?(this._$AH!==es&&this._$AR(),this._$AH=es):e!==this._$AH&&e!==Xg&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Fnt(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==es&&fA(this._$AH)?this._$AA.nextSibling.data=e:this.T(Q1.createTextNode(e)),this._$AH=e}$(e){const{values:n,_$litType$:r}=e,i=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=pA.createElement(nxe(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===i)this._$AH.p(n);else{const s=new znt(i,this),o=s.u(this.options);s.p(n),this.T(o),this._$AH=s}}_$AC(e){let n=bie.get(e.strings);return n===void 0&&bie.set(e.strings,n=new pA(e)),n}k(e){fH(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const s of e)i===n.length?n.push(r=new GI(this.O(dA()),this.O(dA()),this,this.options)):r=n[i],r._$AI(s),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){for(this._$AP?.(!1,!0,n);e!==this._$AB;){const r=gie(e).nextSibling;gie(e).remove(),e=r}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}}class xL{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,i,s){this.type=1,this._$AH=es,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=s,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=es}_$AI(e,n=this,r,i){const s=this.strings;let o=!1;if(s===void 0)e=V2(this,e,n,0),o=!fA(e)||e!==this._$AH&&e!==Xg,o&&(this._$AH=e);else{const a=e;let l,c;for(e=s[0],l=0;l<s.length-1;l++)c=V2(this,a[r+l],n,l),c===Xg&&(c=this._$AH[l]),o||=!fA(c)||c!==this._$AH[l],c===es?e=es:e!==es&&(e+=(c??"")+s[l+1]),this._$AH[l]=c}o&&!i&&this.j(e)}j(e){e===es?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}let Gnt=class extends xL{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===es?void 0:e}};class Unt extends xL{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==es)}}let Bnt=class extends xL{constructor(e,n,r,i,s){super(e,n,r,i,s),this.type=5}_$AI(e,n=this){if((e=V2(this,e,n,0)??es)===Xg)return;const r=this._$AH,i=e===es&&r!==es||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,s=e!==es&&(r===es||i);i&&this.element.removeEventListener(this.name,this,r),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},Wnt=class{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){V2(this,e)}};const Hnt=dH.litHtmlPolyfillSupport;Hnt?.(pA,GI),(dH.litHtmlVersions??=[]).push("3.3.2");const qnt=(t,e,n)=>{const r=n?.renderBefore??e;let i=r._$litPart$;if(i===void 0){const s=n?.renderBefore??null;r._$litPart$=i=new GI(e.insertBefore(dA(),s),s,void 0,n??{})}return i._$AI(t),i};const pH=globalThis;let bw=class extends vx{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=qnt(n,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Xg}};bw._$litElement$=!0,bw.finalized=!0,pH.litElementHydrateSupport?.({LitElement:bw});const Knt=pH.litElementPolyfillSupport;Knt?.({LitElement:bw});(pH.litElementVersions??=[]).push("4.2.2");class mA{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}const Ynt=(t,e)=>{const n=e/Xnt;let r=0;const i=setInterval(()=>{r+=n,r>=e&&(clearInterval(i),t())},n);return i},Xnt=4,Znt=(t,e,n)=>{const r=Object.keys(t),i=r.length;$x===void 0&&queueMicrotask(wL),$x??=new Map;let s=$x.get(t);return s===void 0&&(s={callbacks:[],keyCount:i},$x.set(t,s)),s.keyCount!==i&&(s.callbacks.forEach(o=>o(r)),s.callbacks=[],s.keyCount=i),s.callbacks.push(o=>{const a=c=>Mi(e,null,c),l=o[i];l===void 0?a(void 0):t[l]===n?a(l):a(void 0)}),n};let $x;const wL=()=>{$x?.forEach(({callbacks:t},e)=>{const n=Object.keys(e);t.forEach(r=>r(n))}),$x=void 0},Jnt=(t,e,n)=>{const r=t.manager;return r.V!==es&&r.V!==n&&r.S(void 0,void 0),r.T.length===0&&queueMicrotask(()=>r.S(void 0,void 0)),r.V=n,r.T.push((i,s)=>Mi(e,void 0,n===s?i:void 0)),n},Qnt=(t=[vL(),...Snt()],e,n)=>{const r=Array.isArray(t)?t:[t];let i=r.length+1;const s=o=>{i-=1,o!==void 0&&(i=Math.min(i,0)),i===0&&e(o)};r.forEach(o=>Znt(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!1}),n));for(const o of r)if("manager"in o&&o.manager.component===o){Jnt(o,a=>s(a===void 0?void 0:{key:a,host:o,isReactive:!0}),n);break}return n},ert=(t="",e={},n=vL())=>{const r={emit:i=>{t===""&&wL();const s=new CustomEvent(t,{detail:i,cancelable:!0,bubbles:!0,composed:!0,...e});return n.el.dispatchEvent(s),s}};return t===""&&Qnt(void 0,i=>t=i.key,r),r},xLt=ert.bind(null,"");var rxe;rxe=aH;class trt{constructor(e){this.#n=[],this.#e=[],this.#r=[],this.#l=[],this.#c=[],this.#u=[],this.#h=[],this.#d=[],this.#o=[],this.#a=!1,this.P=new mA,this.connectedCalled=!1,this.loadedCalled=!1,this[rxe]=!0,this.#s=[];const n=this,r=e??vL();n.#t=r,n.ready=n.P.promise,n.#i=Sie(n),n.component=r,n.#t.addController(n),n.#t.manager===void 0||(Ent(n),queueMicrotask(()=>n.catchUpLifecycle()))}#n;#e;#r;#l;#c;#u;#h;#d;#o;#a;#t;catchUpLifecycle(){const{manager:e}=this.#t;e.connectedCalled&&!this.connectedCalled&&this.triggerConnected(),e.#a&&this.triggerLoad().then(()=>e.loadedCalled&&this.triggerLoaded()).catch(console.error)}#i;get exports(){return this.#i}set exports(e){const n=this.#i;n!==e&&(this.#i=e,this.#s.forEach(Mi),this.connectedCalled&&this.O!==!1&&this.#t.requestUpdate(this.O,n)),this.P.resolve(e)}setProvisionalExports(e,n=!0){this.#i=n?Sie(e):e,this.#s.forEach(Mi)}#s;watchExports(e){const n=()=>e(this.#i);return this.#s.push(n),()=>{this.#s.splice(this.#s.indexOf(n),1)}}get use(){return HS(this.#t),knt}get useRef(){return HS(this.#t),Ant}get useRefSync(){return HS(this.#t),lH}controllerRemoved(){this.#t.el.isConnected&&this.triggerDisconnected(),this.triggerDestroy()}onConnected(e){this.#n.push(e)}onDisconnected(e){this.#e.push(e)}onLoad(e){this.#r.push(e)}onLoaded(e){this.#l.push(e)}onUpdate(e){this.#c.push(e)}onUpdated(e){this.#u.push(e)}onDestroy(e){this.#h.push(e)}onLifecycle(e){this.#d.push(e),this.connectedCalled&&this.#t.el.isConnected&&this.#f(e)}triggerConnected(){const e=this;e.hostConnected&&Mi(e.hostConnected,e),e.#n.forEach(Mi),e.triggerLifecycle(),e.connectedCalled=!0}triggerDisconnected(){const e=this;e.hostDisconnected&&Mi(e.hostDisconnected,e),e.#e.forEach(Mi),e.#o.forEach(Mi),e.#o=[]}async triggerLoad(){if(this.#a)return;this.#a=!0;const e=this;e.hostLoad&&await iz(e.hostLoad,e),this.#r.length>0&&await Promise.allSettled(this.#r.map(iz)),this.P.resolve(this.#i)}triggerLoaded(){this.loadedCalled||(this.hostLoaded&&Mi(this.hostLoaded,this),this.#l.forEach(Mi),this.loadedCalled=!0)}triggerUpdate(e){this.hostUpdate&&Mi(this.hostUpdate,this,e),this.#c.forEach(Eie,e)}triggerUpdated(e){this.hostUpdated&&Mi(this.hostUpdated,this,e),this.#u.forEach(Eie,e)}triggerDestroy(){this.hostDestroy&&Mi(this.hostDestroy,this),this.#h.forEach(Mi)}triggerLifecycle(){this.hostLifecycle&&this.#f(()=>this.hostLifecycle()),this.#d.forEach(this.#f,this)}#f(e){HS(this.#t);const n=Mi(e);(Array.isArray(n)?n:[n]).forEach(i=>{typeof i=="function"?this.#o.push(i):typeof i=="object"&&typeof i.remove=="function"&&this.#o.push(i.remove)})}}function Eie(t){Mi(t,void 0,this)}const nrt=trt,Sie=t=>{if(typeof t!="object"&&typeof t!="function"||t===null)return t;const e={get(r,i,s){if(!((i==="exports"||i==="_exports")&&i in r&&r[i]===n)&&(i in r||i in Promise.prototype||typeof i=="symbol"))return typeof r=="function"?r[i]:Reflect.get(r,i,s)}},n=new Proxy(t,e);return n},rrt=t=>t.replace(irt,(e,n)=>`${n===0?"":"-"}${e.toLowerCase()}`),irt=/[A-Z]+(?![a-z])|[A-Z]/gu,srt=1,ort=2,art=4,lrt=8,crt=16,urt=32,hrt=64,ixe=t=>{let e=t;for(;e=e.parentNode??e.host;)if(e?.constructor?.lumina){const n=e;return n.manager?.loadedCalled||(n.J??n._offspring).push(t),(n.I??n._postLoad).promise}return!1},Tie={};function sxe(){}const _3=Object.defineProperty,drt=globalThis.HTMLElement??sxe;var al,qf,Xw,LA,az;const Jq=class Jq extends drt{constructor(){var i;super();Ru(this,LA);Ru(this,al);Ru(this,qf);Ru(this,Xw);Mu(this,qf,{}),Mu(this,Xw,[]),this.I=new mA,this.H=new mA,this.J=[];const n=this,r=n.constructor;n._offspring=n.J,n._postLoad=n.I,r.C?.forEach(s=>{Object.hasOwn(n,s)&&(Nr(n,qf)[s]=n[s],delete n[s])}),r.A?yE(i=n,LA,az).call(i,{a:r.A}):r.B.then(async s=>{var o;await r.K.p,yE(o=n,LA,az).call(o,await(s.default?.then(a=>typeof a=="function"?{a}:a)??s))}).catch(s=>{n.H.reject(s),setTimeout(()=>{throw s})})}static F(){for(const n of this.C??[])_3(this.prototype,n,{configurable:!0,enumerable:!0,get(){return Nr(this,qf)[n]},set(r){Nr(this,qf)[n]=r}});for(const n of this.E??[])_3(this.prototype,n,{async value(...r){return Nr(this,al)||await this.H.promise,await Nr(this,al)[n](...r)},configurable:!0});for(const n of this.D??[])_3(this.prototype,n,{value(...r){return Nr(this,al)[n](...r)},configurable:!0})}get manager(){return Nr(this,al)?.manager}attributeChangedCallback(n,r,i){Nr(this,al)?.attributeChangedCallback(n,r,i),Nr(this,al)||Nr(this,Xw).push(n)}connectedCallback(){Nr(this,al)?Nr(this,al).connectedCallback?.():queueMicrotask(()=>this.G=ixe(this))}disconnectedCallback(){Nr(this,al)?.disconnectedCallback?.()}async componentOnReady(){return await this.H.promise,this}addController(){}requestUpdate(){Nr(this,al)?.requestUpdate()}};al=new WeakMap,qf=new WeakMap,Xw=new WeakMap,LA=new WeakSet,az=function(n){const r=this.constructor,i=r.L,s=Nr(this,qf),o=Object.values(n).find(f=>f.L===i),a=`${i}--lazy`;let l=o;for(;l&&!Object.hasOwn(l,"lumina");)l=Object.getPrototypeOf(l);prt(l),!r.A&&(r.A=o,customElements.define(a,o)),o.N=this;const u=document.createElement(a);o.N=void 0,Mu(this,al,u),Mu(this,qf,u),Nr(this,Xw).forEach(f=>u.attributeChangedCallback(f,null,this.getAttribute(f))),Object.entries(s).forEach(frt,u);const h=this.isConnected;(h||this.G)&&(u.connectedCallback?.(),h||u.disconnectedCallback())},Jq.lumina=!0;let kie=Jq;function frt([t,e]){this[t]=e}const prt=t=>{const e=t.prototype,n=Element.prototype;Object.hasOwn(e,"isConnected")||(e.setAttribute=function(i,s){n.setAttribute.call(this.el,i,s)},e.removeAttribute=function(i){n.removeAttribute.call(this.el,i)},_3(e,"isConnected",{get(){return Reflect.get(n,"isConnected",this.el)}}))};const oxe={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4},axe=t=>(...e)=>({_$litDirective$:t,values:e});let lxe=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,r){this._$Ct=e,this._$AM=n,this._$Ci=r}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}};const mrt=axe(class extends lxe{constructor(t){if(super(t),t.type!==oxe.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter(e=>t[e]).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter(r=>r!=="")));for(const r in e)e[r]&&!this.nt?.has(r)&&this.st.add(r);return this.render(e)}const n=t.element.classList;for(const r of this.st)r in e||(n.remove(r),this.st.delete(r));for(const r in e){const i=!!e[r];i===this.st.has(r)||this.nt?.has(r)||(i?(n.add(r),this.st.add(r)):(n.remove(r),this.st.delete(r)))}return Xg}});const cxe="important",grt=" !"+cxe,yrt=axe(class extends lxe{constructor(t){if(super(t),t.type!==oxe.ATTRIBUTE||t.name!=="style"||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return r==null?e:e+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`},"")}update(t,[e]){const{style:n}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const r of this.ft)e[r]==null&&(this.ft.delete(r),r.includes("-")?n.removeProperty(r):n[r]=null);for(const r in e){const i=e[r];if(i!=null){this.ft.add(r);const s=typeof i=="string"&&i.endsWith(grt);r.includes("-")||s?n.setProperty(r,s?i.slice(0,-11):i,s?cxe:""):n[r]=i}}return Xg}});class vrt extends nrt{constructor(e){super(e),this.destroyed=!1,this.R=!1,this.V=es,this.T=[],this.#r=new WeakMap,this.#e=e,this.exports=void 0,this.hasDestroy=lz in e&&typeof e.destroy=="function",bw.prototype.addController.call(e,{hostConnected:()=>{if(this.destroyed){const n=e.el.localName;throw e.el.remove(),new Error(`The ${n} component has already been destroyed. It cannot be used again. If you meant to disconnect and reconnect a component without automatic destroy, set the ${lz} prop.`)}this.#n!==void 0&&clearTimeout(this.#n),wL();for(const n of e.M)"triggerConnected"in n?n.triggerConnected():Mi(n.hostConnected,n)},hostDisconnected:()=>{for(const n of e.M)"triggerDisconnected"in n?n.triggerDisconnected():Mi(n.hostDisconnected,n);this.hasDestroy&&!this.destroyed&&this.U()},hostUpdate:()=>{for(const n of e.M)"triggerUpdate"in n?n.triggerUpdate(this.Q):Mi(n.hostUpdate,n,this.Q)},hostUpdated:()=>{for(const n of e.M)"triggerUpdated"in n?n.triggerUpdated(this.Q):Mi(n.hostUpdated,n,this.Q);this.Q=void 0}}),queueMicrotask(()=>this.R=!0),HS(e)}#n;#e;async destroy(){if(!this.destroyed){this.#e.el.isConnected&&(this.hasDestroy=!1,this.#e.el.remove()),this.#n=void 0,this.destroyed=!0;for(const e of this.#e.M)"triggerDestroy"in e?e.triggerDestroy():Mi(e.hostDestroy,e);this.#e.M.splice(0)}}U(){if(this.#n!==void 0&&clearTimeout(this.#n),!this.#e.el.isConnected&&!this.#e.autoDestroyDisabled){const e=()=>{this.#e.destroy()};this.#n=Ynt(e,_rt)}}S(e,n){const r=this.T;this.V=es,this.T=[],r.forEach(i=>i(e,n))}#r;W(e,n){(typeof n=="object"&&n!==null||typeof n=="function")&&this.#r.set(n,e)}X(e){if(typeof e=="object"&&e!==null||typeof e=="function")return this.#r.get(e)}}let _rt=1e3;const lz="autoDestroyDisabled";var Qy,DA,jA,e1,ld,Y2,uxe,hxe;const uk=class uk extends bw{constructor(){super();Ru(this,Y2);Ru(this,Qy);Ru(this,DA);Ru(this,jA);Ru(this,e1);Ru(this,ld);this.M=[],this.manager=new vrt(this);const n=this,r=n.constructor,i=r.N,s=r.K.o,o=uk.prototype.shouldUpdate;Mu(n,e1,i?.H??new mA),n.I=i?.I??new mA,n.J=i?.J??[],n._offspring=n.J,n._postLoad=n.I,n.el=i??n,Mu(n,jA,n.enableUpdating),n.enableUpdating=sxe,n.shouldUpdate!==o&&(Mu(n,DA,n.shouldUpdate),n.shouldUpdate=o),s&&(Mu(n,Qy,new Map),r.elementProperties.forEach((a,l)=>Nr(n,Qy).set(l,s())))}static finalizeStyles(n){const r=super.finalizeStyles(n),i=this.shadowRootOptions===Tie;return this.K?.commonStyles===void 0||i?r:[this.K.commonStyles,...r]}static createProperty(n,r){const i=typeof r=="number"?r:Array.isArray(r)?r[0]:0,s=Array.isArray(r)?r[1]:void 0,o=s?.hasChanged??hH,a={attribute:i&srt&&typeof n=="string"?rrt(n):!1,reflect:!!(i&ort),type:i&art?Boolean:i&lrt?Number:void 0,state:!!(i&crt),readOnly:!!(i&urt),noAccessor:!!(i&hrt),c:!1,...s,hasChanged(l,c){const u=o(l,c);return a.c=u,u}};super.createProperty(n,a)}static getPropertyDescriptor(n,r,i){const s=this.K,o=super.getPropertyDescriptor(n,r,i);return i.d=o,{...o,get(){return s.t?.(Nr(this,Qy).get(n)),o.get?.call(this)},set(a){const l=this.manager;if(i.readOnly&&!sz&&(l.R||l.connectedCalled))throw Error(`Cannot assign to read-only property "${n}" of ${this.el.localName}. Trying to assign "${a}"`);o.set.call(this,a??void 0),i.c&&Nr(this,Qy)?.get(n)?.notify(),l.T.length>0&&(wL(),l?.S(n,a))}}}connectedCallback(){if(this.el.hasAttribute("defer-hydration"))return;const n=this.constructor.K.c?.(()=>this.requestUpdate());Mu(this,ld,n);const r=!this.manager.connectedCalled;super.connectedCallback(),r?queueMicrotask(()=>yE(this,Y2,hxe).call(this).catch(i=>{Nr(this,e1).reject(i),setTimeout(()=>{throw i})})):n&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),Nr(this,ld)?.destroy(),Mu(this,ld,void 0)}createRenderRoot(){const n=this.el.shadowRoot,r=this.constructor,i=r.shadowRootOptions,o=n??(i===Tie?this.el:this.el.attachShadow(i));if(this.isConnected){const a=o.getRootNode();a.adoptedStyleSheets=[...a.adoptedStyleSheets,...r.elementStyles.map(l=>"styleSheet"in l?l.styleSheet:l)]}return o}shouldUpdate(n){var r;return this.manager.Q=n,((r=Nr(this,DA))==null?void 0:r.call(this,n))??!0}update(n){Nr(this,ld)?yE(this,Y2,uxe).call(this,n):super.update(n)}listen(n,r,i){const s=r?.bind(this)??r;this.manager.onLifecycle(()=>(this.el.addEventListener(n,s,i),()=>this.el.removeEventListener(n,s,i)))}listenOn(n,r,i,s){const o=i?.bind(this)??i;this.manager.onLifecycle(()=>(n.addEventListener(r,o,s),()=>n.removeEventListener(r,o,s)))}async componentOnReady(){return await Nr(this,e1).promise,this}addController(n){this.M.push(n),!(aH in n)&&this.renderRoot&&this.el.isConnected&&n.hostConnected?.()}removeController(n){this.M.splice(this.M.indexOf(n),1),n.controllerRemoved?.()}};Qy=new WeakMap,DA=new WeakMap,jA=new WeakMap,e1=new WeakMap,ld=new WeakMap,Y2=new WeakSet,uxe=function(n){try{Nr(this,ld).clear(),this.constructor.K.r(Nr(this,ld),()=>lX(uk.prototype,this,"update").call(this,n))}catch(r){throw Nr(this,ld).clear(),r}},hxe=async function(){const n=this.el.G??ixe(this.el);n&&await n;const r=[];for(const s of this.M)"triggerLoad"in s?r.push(s.triggerLoad()):r.push(iz(s.hostLoad,s));await Promise.all(r),await this.load?.(),this.manager.hasDestroy&&this.manager.onUpdate(s=>s.has(lz)&&this.manager.U()),Nr(this,jA).call(this,!0),this.performUpdate(),this.I.resolve(),await Promise.resolve();const i=this.J.filter(s=>!s.manager?.loadedCalled);i.length&&await Promise.allSettled(i.map(async s=>await s.componentOnReady())),this.J.length=0,this.el.setAttribute(this.constructor.K.hydratedAttribute,"");for(const s of this.M)"triggerLoaded"in s?s.triggerLoaded():Mi(s.hostLoaded,s);this.loaded?.(),Nr(this,e1).resolve()},uk.lumina=!0;let Aie=uk;const xrt=t=>{let e;const n=i=>{e=new URL(i,globalThis.location?.href||void 0).href},r={...t,getAssetPath(i){const s=new URL(i,e);return s.origin!==globalThis.location?.origin?s.href:s.pathname},setAssetPath:n,customElement(i,s){s.K=r,s.L=i,customElements.get(i)||customElements.define(i,s)}};return n(t.defaultAssetPath),r},bLt=t=>typeof t=="object"&&t!=null?mrt(t):t,ELt=t=>typeof t=="object"&&t!=null?yrt(t):t,SLt=es;function TLt(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n)}const kLt={toAttribute:t=>t===!0?"":t===!1?null:t},wrt="calcite-mode-auto",brt="calcite-mode-dark",ALt={rtl:"calcite--rtl"},ILt={filter:250,nextTick:0,resize:150,reposition:100},PLt=25;function Iie(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,n=()=>t.contains(brt)||t.contains(wrt)&&e?"dark":"light",r=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),i=o=>{s!==o&&r(o),s=o};let s=n();r(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>i(o.matches?"dark":"light")),new MutationObserver(()=>i(n())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}const zT=globalThis.calciteConfig,CLt=zT?.focusTrapStack||[],RLt=zT?.logLevel||"info",Pie="3.3.3",Ert="2025-10-08",Srt="7391af08e";function Trt(){if(zT&&zT.version)return;console.info(`Using Calcite Components ${Pie} [Date: ${Ert}, Revision: ${Srt}]`);const t=zT||globalThis.calciteConfig||{};Object.defineProperty(t,"version",{value:Pie,writable:!1}),globalThis.calciteConfig=t}document.readyState==="interactive"?Iie():document.addEventListener("DOMContentLoaded",Iie,{once:!0});queueMicrotask(Trt);const krt=xrt({defaultAssetPath:"https://js.arcgis.com/calcite-components/3.3.3/",hydratedAttribute:"calcite-hydrated"}),{customElement:MLt,getAssetPath:NLt,setAssetPath:Art}=krt;let dxe=!1;const Irt=t=>{dxe=!0,Art(t)};let fxe;function Prt(){dxe||Irt(tu(Hi(fxe)))}function mH(t){const e=[];for(const n of Object.keys(t))customElements.get(`calcite-${n}`)||e.push(t[n]?.());return e.length>0?Promise.all(e):null}fxe="components/assets";const pxe=Symbol("widget"),mxe=Symbol("widget-test-data"),Crt=[],Rrt={},ON=new WeakMap;function gxe(t,e){let n=e.children;if(n?.length)for(let i=0;i<n.length;++i)n[i]=gxe(t,n[i]);else n=Crt;const r=e.vnodeSelector;if(LN(r)){const i=e.properties||Rrt,s=i.key||r,o={key:s,afterCreate:Mrt,afterUpdate:Nrt,afterRemoved:yxe,parentWidget:t,widgetConstructor:r,widgetProperties:{...i,key:s,children:n}};return{vnodeSelector:r.vnodeSelector,properties:o,children:void 0,text:void 0,domNode:null}}return e}function Mrt(t,e,n,{parentWidget:r,widgetConstructor:i,widgetProperties:s}){const o=new i(s);o.container=t,ON.set(t,o),o.afterCreate?.(o,t),r.addHandles(Zn(()=>yxe(t))),queueMicrotask(()=>{o[mxe].projector?.renderNow()})}function Nrt(t,e,n,{widgetProperties:r}){const i=ON.get(t);i&&(i.set(r),i.afterUpdate?.(i,t))}function yxe(t){const e=ON.get(t);e&&(e.afterRemoved?.(e,t),e.destroy(),ON.delete(t))}function LN(t){return typeof t=="function"&&t[pxe]}const Cie=new Set;function Ort(t){Cie.add(t),t.finally(()=>Cie.delete(t))}function Lrt(t){return Zn()}var Rie;let Drt=0;function vxe(t,e){const n=Object.prototype.hasOwnProperty;for(const r in e)n.call(e,r)&&n.call(t,r)&&(t[r]!=null&&e[r]!=null&&typeof t[r]=="object"&&typeof e[r]=="object"?vxe(t[r],e[r]):t[r]=e[r]);return t}const jrt=wnt({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,n=/capture$/i;t.eventHandlerInterceptor=(r,i,s,o)=>{const a=e?.(r,i,s,o),l=n.test(r);if(!((r=r.replace(n,"")).toLowerCase()in s)||l){const c=r[2].toLowerCase()+r.slice(3),u=g=>a?.call(s,g);s.addEventListener(c,u,l);const h=()=>s.removeEventListener(c,u,l),f=o.afterRemoved;o.afterRemoved=g=>{f?.(g),h()}}return a}},handleInterceptedEvent(t,e,n,r){const{eventPhase:i,type:s}=r,o=i===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(Y_e(),t.scheduleRender(),l[a].call(l.bind||n,r))}});let F$=!1;var w1;let no=(w1=class extends Upe(wI){constructor(e,n){super(e,n),this._attached=!1,this._projector=jrt,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=cje(async()=>{if(this._messageBundleProps?.length){const l=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:c,propertyName:u})=>{if(this.destroyed)return;let h=await Sme(c);this.destroyed||(this.uiStrings&&Object.keys(this.uiStrings)&&(h=vxe(Ze(h),this.uiStrings)),this[u]=h)}));if(this.destroyed)return;for(const c of l)c.status==="rejected"&&kt.getLogger(this).error("widget-intl:locale-error",this.declaredClass,c.reason)}await this.loadLocale()}),this.addHandles(Lrt()),Prt();const r="esri-widget-uid-"+CI(),i=this.render.bind(this);this._trackingTarget=new DO(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const s=()=>({vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const l=i()??s(),c=l.properties??={};if(c.key??=r,LN(l.vnodeSelector)){if(!this.visible)return s()}else this.visible?c.styles||(c.styles={}):(c.class="",c.styles={display:"none"}),c.styles.display??="";let u=0;return l.children?.forEach(h=>{LN(h.vnodeSelector)||(h.properties??={},h.properties.key??=`${this.id}--${u++}`)}),gxe(this,l)};this.render=()=>{if(F$)return o();let l=ant(this)??null;if(l)return l;this._trackingTarget.clear(),F$=!0;try{l=xp(this._trackingTarget,o)}catch(c){throw kt.getLogger(this).error(c),c}finally{F$=!1}return l&&lnt(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this.destroyed||(this._readyForTrueRender=!0,this._postInitialize())}):(this._resourcesFetch=Promise.resolve().then(()=>{this.destroyed||this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),Ort(this._resourcesFetch)}normalizeCtorArgs(e,n){const r={...e};return n&&(r.container=n),r}postInitialize(){}beforeFirstRender(){const e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(JQ):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(Di(this._trackingTarget),Di(this.viewModel),this._detach(this.container),this._set("container",null),this.render=()=>null,this._projector=null,L$(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return CW(e)}get destroyed(){return super.destroyed}get domNode(){return this.container}set domNode(e){this.container=e}get icon(){return null}set icon(e){this._overrideIfSome("icon",e)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+Drt++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(Rie=pxe,mxe)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(L$(this),this._projector.scheduleRender())}classes(...e){return cnt.apply(this,e)}renderNow(){L$(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(fn(()=>this.viewModel,(n,r)=>{r&&this.removeHandles("delegated-events"),n&&MO(n)&&this.addHandles(this._delegatedEventNames.map(i=>hb(n,i,s=>{this.emit(i,s)})),"delegated-events")},ra)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(JQ),this.scheduleRender()};this.addHandles([wme(e),fn(()=>this.uiStrings,e)]),this.addHandles(wc(()=>this.container,n=>{this.destroyed||this._attach(n)},{initial:!0,once:!0}))}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}},w1[Rie]=!0,w1.vnodeSelector="div",w1);x([E()],no.prototype,"_readyForTrueRender",void 0),x([E({value:null})],no.prototype,"container",null),x([qs("container")],no.prototype,"castContainer",null),x([E()],no.prototype,"icon",null),x([E()],no.prototype,"id",null),x([E()],no.prototype,"label",null),x([E()],no.prototype,"renderable",null),x([E()],no.prototype,"uiStrings",void 0),x([E()],no.prototype,"viewModel",void 0),x([E({value:!0})],no.prototype,"visible",null),x([E()],no.prototype,"key",void 0),x([E()],no.prototype,"children",void 0),x([E()],no.prototype,"afterCreate",void 0),x([E()],no.prototype,"afterUpdate",void 0),x([E()],no.prototype,"afterRemoved",void 0),no=x([ue("esri.widgets.Widget")],no);const bL=no,$rt=new Map;function Frt(t){return $rt.get(t)}function Mie(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function Vrt(t,e){return t.length!==e.length||t.some((n,r)=>n.text!==e[r].text)}function xR(t,e,n){!n||!e||t.find(r=>r.layerView===e&&r.text===n)||t.push({text:n,layerView:e})}function zrt(t){return t.type==="bing-maps"}const qh=[];let _x=class extends Kt{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Ot,this.view=null,this._allLayerViewsChange=e=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const n=this.view?.allLayerViews;n&&(this.addHandles(n.map(r=>fn(()=>[r.suspended,r.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),n.forEach(r=>{r.declaredClass==="esri.views.3d.layers.IntegratedMesh3DTilesLayerView3D"&&this.addHandles(r.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),e?.removed&&e.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.addHandles([X1(()=>this.view?.allLayerViews,"change",e=>this._allLayerViewsChange(e),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),wc(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const t=this.view,e=t?.allLayerViews;qh.length=0;let n=!1,r=null;if(!t||!e)return void this._clear();e.forEach(s=>{if(s.suspended||!s.layer?.attributionVisible)return;const o=s.layer;if(Mie(o,"user"))return void xR(qh,s,o.copyright);if(o.type==="integrated-mesh-3dtiles"&&o.hasGoogleUrl&&(n=!0,r=s),o.hasAttributionData){if(this._fetchedAttributionData.has(s)){const l=this._fetchedAttributionData.get(s);return void(l?xR(qh,s,this._getDynamicAttribution(l,t,o)):Mie(o)&&xR(qh,s,o.copyright))}return void this._fetchAttributionData(s)}const a="portalItem"in o?o.portalItem?.accessInformation:void 0;xR(qh,s,a||o.copyright)});const i=e.find(s=>s.layer?.type==="integrated-mesh-3dtiles");if(this.view&&i){const s=Frt(this.view);if(s){const o=s.getAttributionText();for(let a=o.length-1;a>-1;--a)qh.unshift({text:o[a],layerView:i})}}n&&r&&qh.unshift({text:"Google Maps",layerView:r}),Vrt(this.items,qh)&&(this.items.removeAll(),this.items.addMany(qh)),qh.length=0,this.notifyChange("state")}async _fetchAttributionData(t){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);const e=await Bpe(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){const n=e.ok?this._createContributionIndex(e.value,zrt(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,n)}this._updateAttributionItems()}_createContributionIndex(t,e){const n=t.contributors,r={};if(!n)return r;for(let i=0;i<n.length;i++){const s=n[i],o=s.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,c=a.zoomMin-(e&&a.zoomMin?1:0),u=a.zoomMax-(e&&a.zoomMax?1:0),h=new Vn({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:Bt.WGS84}),f={extent:l1(h),attribution:s.attribution||"",score:a.score!=null?a.score:100,id:i};for(let g=c;g<=u;g++)r[g]??=[],r[g].push(f)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(t,e,n){const{extent:r,scale:i}=e;let s=n.tileInfo?.scaleToZoom(i)??0;if(s=Math.min(t.maxKey??0,Math.round(s)),!r||s==null||s<=-1)return"";const o=t[s],a=BO(r.center.clone().normalize(),Bt.WebMercator),l=new Set;return o?o.filter(c=>{const u=c.id,h=!l.has(u)&&a&&c.extent&&SI(c.extent,a);return h&&l.add(u),h}).sort((c,u)=>u.score-c.score||c.objectId-u.objectId).map(c=>c.attribution).join(", "):""}};x([E({readOnly:!0,type:Ot})],_x.prototype,"items",void 0),x([E({readOnly:!0})],_x.prototype,"state",null),x([E()],_x.prototype,"view",void 0),_x=x([ue("esri.widgets.Attribution.AttributionViewModel")],_x);const _xe=_x,Cd={button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",empty:"esri-widget__content--empty",heading:"esri-widget__heading",interactive:"esri-interactive",panel:"esri-widget--panel",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button"};function Grt(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:Brt(t[e])}}}function Urt(t){const e=t?.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function Brt(t){return function(e,...n){Urt(e)?hnt(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...n)}}function EL(t){return(e,n)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:n})}}var Wrt=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},xxe=function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];Array.isArray(i)?xxe(i,e):i!=null&&i!==!1&&(i.hasOwnProperty("vnodeSelector")||(i=Wrt(i)),e.push(i))}},Hrt=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(n.length===1&&typeof n[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:n[0],domNode:null};var i=[];return xxe(n,i),{vnodeSelector:t,properties:e||void 0,children:i,text:void 0,domNode:null}};function El(t,e,...n){return typeof t!="function"||LN(t)?Hrt(t,e??null,...n):t(e,...n)}function OLt(...t){return t}const D_="esri-attribution",j_={base:D_,poweredBy:`${D_}__powered-by`,sources:`${D_}__sources`,open:`${D_}--open`,sourcesOpen:`${D_}__sources--open`,link:`${D_}__link`};let Ta=class extends bL{constructor(e,n){super(e,n),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._sourcesNode=null,this._overflowRequestAnimationFrame=null,this._resizeObserver=new ResizeObserver(r=>{r.forEach(({target:i})=>{this._scheduleOverflowCheck(i)})}),this._mutationObserver=new MutationObserver(r=>{let i=!1;for(const s of r)if(s.type==="childList"||s.type==="characterData"||s.type==="attributes"){i=!0;break}i&&this._sourcesNode&&this._scheduleOverflowCheck(this._sourcesNode)}),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new _xe}initialize(){this.addHandles(X1(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect(),this._mutationObserver?.disconnect(),this._overflowRequestAnimationFrame!=null&&(cancelAnimationFrame(this._overflowRequestAnimationFrame),this._overflowRequestAnimationFrame=null)}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}_scheduleOverflowCheck(e){this._overflowRequestAnimationFrame==null&&(this._overflowRequestAnimationFrame=requestAnimationFrame(()=>{this._overflowRequestAnimationFrame=null,this._checkSourceTextOverflow(e)}))}get attributionText(){return this.viewModel.items.reduce((e,n)=>(e.includes(n.text)||e.push(n.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[j_.open]:this._isOpen};return El("div",{bind:this,class:this.classes(j_.base,Cd.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return El("div",{class:j_.poweredBy},"Powered by"," ",El("a",{class:j_.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const e=this._isOpen,n=this._isInteractive,r=n?0:void 0,{attributionText:i}=this,s={[j_.sourcesOpen]:e,[Cd.interactive]:n};return El("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(j_.sources,s),innerHTML:i,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._sourcesNode=e,this._resizeObserver.observe(e),this._mutationObserver.observe(e,{subtree:!0,childList:!0,characterData:!0,attributes:!0}),this._scheduleOverflowCheck(e)}_checkSourceTextOverflow(e){let n=!1;const{clientHeight:r,clientWidth:i,scrollWidth:s}=e,o=s>i,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(n=!0),this._isOpen){const l=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,l&&(this._isOpen=!1,n=!0)}n&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};x([E()],Ta.prototype,"_isOpen",void 0),x([E()],Ta.prototype,"_isInteractive",null),x([E()],Ta.prototype,"_attributionTextOverflowed",void 0),x([E()],Ta.prototype,"_prevSourceNodeHeight",void 0),x([E({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ta.prototype,"attributionText",null),x([E()],Ta.prototype,"icon",null),x([E()],Ta.prototype,"itemDelimiter",void 0),x([E()],Ta.prototype,"label",null),x([E(),EL("esri/widgets/Attribution/t9n/Attribution")],Ta.prototype,"messages",void 0),x([E()],Ta.prototype,"view",null),x([E({type:_xe})],Ta.prototype,"viewModel",void 0),x([Grt()],Ta.prototype,"_toggleState",null),Ta=x([ue("esri.widgets.Attribution")],Ta);const qrt=Ta;function Krt(){const t=ye("mapview-essential-goto-duration");return t==null?t:t}function Yrt(t){return t?.spatialReference?.isWebMercator||t?.spatialReference?.isGeographic||!1}function Xrt(t,e,n){return t.goTo(e,n)}const Zrt=t=>{const e=t;let n=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return $fe(i),this.goToOverride?this.goToOverride(i,r):Xrt(i,r.target,r.options)}};return x([E()],n.prototype,"goToOverride",void 0),x([E()],n.prototype,"view",void 0),n=x([ue("esri.widgets.support.GoTo")],n),n};let _y=class extends Zrt(Kt){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(ya)}destroy(){this.view=null}get canShowNorth(){return Yrt(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:Krt()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;const n=-e.heading;this._set("orientation",{x:0,y:0,z:n})}_updateRotationWatcher(e){this.removeAllHandles(),this._watchForView(),e&&this.addHandles(e.type==="2d"?fn(()=>e?.rotation,this._updateForRotation,ya):fn(()=>e?.camera,this._updateForCamera,ya))}_watchForView(e){this.addHandles(fn(()=>this.view,this._updateRotationWatcher,e))}};x([E({readOnly:!0})],_y.prototype,"canShowNorth",null),x([E({readOnly:!0})],_y.prototype,"orientation",void 0),x([E({readOnly:!0})],_y.prototype,"state",null),x([E()],_y.prototype,"view",void 0),_y=x([ue("esri.widgets.Compass.CompassViewModel")],_y);const wxe=_y,Nie="esri-compass",Oie={base:Nie,iconContainer:`${Nie}__icon-container`};let Rf=class extends bL{constructor(e,n){super(e,n),this.messages=null,this.viewModel=new wxe,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=r=>({transform:`rotateZ(${r.z}deg)`})}loadDependencies(){return mH({button:()=>_e(()=>import("./index-gC1ix6X5.js"),__vite__mapDeps([401,402,403,404,405,406,407,408,409,410,411,412,413,414])),icon:()=>_e(()=>import("./index-BNOZJt9U.js").then(e=>e.i),__vite__mapDeps([406,407,408]))})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:n}=this.viewModel,{messages:r}=this;return El("div",{class:this.classes(Oie.base,Cd.widget)},El("calcite-button",{class:Cd.widgetButton,disabled:n==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},El("div",{"aria-hidden":"true",class:Oie.iconContainer,title:r.reset},El("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};x([E()],Rf.prototype,"goToOverride",null),x([E()],Rf.prototype,"icon",null),x([E()],Rf.prototype,"label",null),x([E(),EL("esri/widgets/Compass/t9n/Compass")],Rf.prototype,"messages",void 0),x([E()],Rf.prototype,"view",null),x([E({type:wxe})],Rf.prototype,"viewModel",void 0),Rf=x([ue("esri.widgets.Compass")],Rf);const Jrt=Rf,Lie="esri-navigation-toggle",Die={base:Lie,isLayoutHorizontal:`${Lie}--horizontal`};let xx=class extends Kt{constructor(t){super(t),this._navigationMode="pan",this.view=null,t?.isDefaultViewModel||Vje(kt.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.33"})}normalizeCtorArgs(t={}){const{isDefaultViewModel:e,...n}=t;return n}initialize(){this.addHandles(wc(()=>this.view?.navigation?.actionMap,()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._updateNavigationActionMap()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_updateNavigationActionMap(){const t=this.view?.navigation?.actionMap;if(!t)return;const e=this._navigationMode==="pan";t.dragPrimary=e?"pan":"rotate",t.dragSecondary=e?"rotate":"pan"}};x([E({readOnly:!0})],xx.prototype,"state",null),x([E()],xx.prototype,"_navigationMode",void 0),x([E()],xx.prototype,"view",void 0),xx=x([ue("esri.widgets.NavigationToggle.NavigationToggleViewModel")],xx);const bxe=xx;let Mf=class extends bL{constructor(e,n){super(e,n),this.messages=null,this.viewModel=new bxe({isDefaultViewModel:!0}),this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{const r=this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton;dnt(r),this.toggle()},e?.isDefaultUI||Fje(kt.getLogger(this),"Navigation Toggle","arcgis-navigation-toggle",{version:"4.32"})}normalizeCtorArgs(e={}){const{isDefaultUI:n,...r}=e;return r}loadDependencies(){return mH({button:()=>_e(()=>import("./index-gC1ix6X5.js"),__vite__mapDeps([401,402,403,404,405,406,407,408,409,410,411,412,413,414]))})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.viewModel?.state==="disabled",n=this.viewModel?.navigationMode==="pan",r=this.messages.toggle;return El("div",{class:this.classes(Die.base,Cd.widget,{[Die.isLayoutHorizontal]:this.layout==="horizontal"})},El("calcite-button",{afterCreate:i=>{this._panButton=i},appearance:n?"outline-fill":"solid",class:Cd.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:r,onclick:this._toggle,tabIndex:n?void 0:-1,title:r}),El("calcite-button",{afterCreate:i=>{this._rotateButton=i},appearance:n?"solid":"outline-fill",class:Cd.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:r,onclick:this._toggle,tabIndex:n?-1:void 0,title:r}))}};x([E()],Mf.prototype,"icon",null),x([E()],Mf.prototype,"label",null),x([E({value:"vertical"})],Mf.prototype,"layout",null),x([E(),EL("esri/widgets/NavigationToggle/t9n/NavigationToggle")],Mf.prototype,"messages",void 0),x([E()],Mf.prototype,"view",null),x([E({type:bxe})],Mf.prototype,"viewModel",void 0),Mf=x([ue("esri.widgets.NavigationToggle")],Mf);const Qrt=Mf;let xy=class extends Kt{get canZoomIn(){if(!this.view?.ready)return!1;const n=this.view?.constraints?.effectiveMaxScale;return n===0||this._scale>n}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const r=e.constraints?.effectiveMinScale;return r===0||this._scale<r}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};x([E({readOnly:!0})],xy.prototype,"canZoomIn",null),x([E({readOnly:!0})],xy.prototype,"canZoomOut",null),x([E()],xy.prototype,"view",void 0),x([E()],xy.prototype,"_scale",null),xy=x([ue("esri.widgets.Zoom.ZoomConditions2D")],xy);const eit=xy;let wx=class extends Kt{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};x([E({readOnly:!0})],wx.prototype,"canZoomIn",null),x([E({readOnly:!0})],wx.prototype,"canZoomOut",null),x([E()],wx.prototype,"view",void 0),wx=x([ue("esri.widgets.Zoom.ZoomConditions3D")],wx);const tit=wx;let Lm=class extends Kt{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new eit({view:e}):e.type==="3d"&&(this._zoomConditions=new tit({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&(e.type==="2d"?e.mapViewNavigation.zoomIn():j4(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&e&&(e.type==="2d"?e.mapViewNavigation.zoomOut():j4(e.goTo({zoomFactor:.5})))}};x([E()],Lm.prototype,"_zoomConditions",void 0),x([E()],Lm.prototype,"canZoomIn",null),x([E()],Lm.prototype,"canZoomOut",null),x([E({readOnly:!0})],Lm.prototype,"state",null),x([E()],Lm.prototype,"view",null),Lm=x([ue("esri.widgets.Zoom.ZoomViewModel")],Lm);const Exe=Lm,jie={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let Nf=class extends bL{constructor(e,n){super(e,n),this.messages=null,this.viewModel=new Exe,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return mH({button:()=>_e(()=>import("./index-gC1ix6X5.js"),__vite__mapDeps([401,402,403,404,405,406,407,408,409,410,411,412,413,414]))})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e={[jie.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:n,canZoomOut:r}=this.viewModel,{zoomIn:i,zoomOut:s}=this.messages;return El("div",{class:this.classes(jie.base,Cd.widget,e)},El("calcite-button",{class:Cd.widgetButton,disabled:!n,iconStart:"plus",kind:"neutral",label:i,onclick:this.zoomIn,title:i}),El("calcite-button",{class:Cd.widgetButton,disabled:!r,iconStart:"minus",kind:"neutral",label:s,onclick:this.zoomOut,title:s}))}};x([E()],Nf.prototype,"icon",null),x([E()],Nf.prototype,"label",null),x([E({value:"vertical"})],Nf.prototype,"layout",null),x([E(),EL("esri/widgets/Zoom/t9n/Zoom")],Nf.prototype,"messages",void 0),x([E()],Nf.prototype,"view",null),x([E({type:Exe})],Nf.prototype,"viewModel",void 0),Nf=x([ue("esri.widgets.Zoom")],Nf);const nit=Nf;function rit(t){return t?.view!==void 0}let x3=class extends mnt{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=e=>{this.components.forEach(n=>{const r=this._find(n),i=r?.widget;rit(i)&&(i.view=e)})},this._componentsWatcher=(e,n)=>{this._removeComponents(n),this._addComponents(e),this._adjustPadding(e)}}initialize(){this.addHandles([fn(()=>this.components,this._componentsWatcher,ya),fn(()=>this.view,this._updateViewAwareWidgets,ya)])}_add(t,e,n,r,i){let s=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;s=this._createComponent(t)}super._add(s,e,n,r,i)}_removeComponents(t){t.forEach(e=>{const n=this._find(e);n&&(this.remove(n),n.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:e}=this.padding;this.padding=e}}_addComponents(t){this.constructed&&t.forEach(e=>this.add(this._createComponent(e),this._defaultPositionLookup[e]))}_createComponent(t){const e=this._createWidget(t);return new y3({id:t,node:e})}_createWidget(t){const e=this.view;switch(t){case"attribution":return new qrt({view:e});case"compass":return new Jrt({view:e});case"navigation-toggle":return new Qrt({view:e,isDefaultUI:!0});case"zoom":return new nit({view:e})}}};x([E()],x3.prototype,"components",void 0),x3=x([ue("esri.views.ui.DefaultUI")],x3);const Sxe=x3;let w3=class extends Sxe{constructor(e){super(e),this.components=["attribution","zoom"]}};x([E()],w3.prototype,"components",void 0),w3=x([ue("esri.views.ui.2d.DefaultUI2D")],w3);const Txe=w3;let iit=class{constructor(t={},e={},n=8,r=1/0){this.disabledExtensions=t,this.debugWebGLExtensions=e,this.maxAnisotropy=n,this.maxPreferredTexturePixels=r}},sit=class cz{constructor(e,n,r=""){this.major=e,this.minor=n,this._context=r}lessThan(e,n){return this.major<e||e===this.major&&this.minor<n}greaterEqual(e,n){return!this.lessThan(e,n)}validate(e){if(this.major!==e.major){const n=this._context&&this._context+":",r=this._context&&this._context+" ";throw new Xe(n+"unsupported-version",`Required major ${r}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new cz(this.major,this.minor,this._context)}static parse(e,n=""){const[r,i]=e.split("."),s=/^\s*\d+\s*$/;if(!r?.match||!s.test(r))throw new Xe((n&&n+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!i?.match||!s.test(i))throw new Xe((n&&n+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),a=parseInt(i,10);return new cz(o,a,n)}};class oit extends sit{constructor(e,n){super(e,n,"webmap")}}function V$(t){return t!=null&&typeof t=="object"&&"declaredClass"in t&&t.declaredClass==="esri.WebMap"}new oit(2,35);var uz;let b3=uz=class extends qt{constructor(t){super(t),this.color=new Jn([0,0,0,1])}clone(){return new uz(Ze({color:this.color}))}};x([E({type:Jn,json:{write:!0}})],b3.prototype,"color",void 0),b3=uz=x([ue("esri.webmap.background.ColorBackground")],b3);const ait=b3;let kxe,Axe,Ixe,Pxe,Cxe,Rxe,Mxe;async function lit(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:n,MapViewNavigation:r,MagnifierView2D:i,GridView2D:s,Stage:o}]=await Promise.all([_e(()=>import("./webglDeps-CMJrRIrr.js"),__vite__mapDeps([297,222,298,299,300,26,94])),_e(()=>import("./mapViewDeps-CqKx9DjQ.js"),__vite__mapDeps([301,173,53,54,138,139,129,64,26,140,131,132,137,141,125,142,87,302,303,222,298,299,213,126,304,133,300,94,221,93,305,124,161,306,249,192,195,66,67,31,134,146,307,143,144,308,83,78,127,76,77,309,51,297,310,156,311,312,191,313,211,212,314,111,123,128,130,122,71,70,315,145,316,136,45,46,47,317,147,152,120,318,319,320,321,218,252,322,323]))]);Axe=t,Ixe=e,Pxe=n,Cxe=r,Rxe=i,Mxe=s,kxe=o}var Zw;let Gn=(Zw=class extends WQe(bJe(YWe(xqe(iqe(HXe))))){get timeZone(){return super.timeZone}set timeZone(e){super.timeZone=e}constructor(e){super(e),this._magnifierView=null,this._gridView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new th({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.graphicsView=null,this.labelManager=null,this.navigation=new dL({actionMap:new KW({dragTertiary:"none"})}),this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.analyses=new D2,this.analysisViewManager=new Utt({importAnalysisViewModule:n=>Det(n),view:this}),this.floors=new Ot,this.grid=null,this.map=null,this.timeline=new W_e,this.type="2d",this.view2dType=null,this.ui=new Txe,this.animationsEnabled=!0,this.test={takeScreenshot:async n=>$tt(this._getScreenshotView(n),n)},this.padding={top:0,right:0,bottom:0,left:0},HWe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=Di(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Het(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,n=this.spatialReference;return{lods:e?.spatialReference?.equals(n)?e.lods:null,spatialReference:n}}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:n,center:r,viewpoint:i,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!s&&(n?.effectiveLODs||(o=-1),(!r||e===0&&o===-1)&&(i?.targetGeometry==null||i.targetGeometry.type!=="extent"&&!i.scale))}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const n=e.targetGeometry,r=this.spatialReference;return J0e(n.spatialReference,r)}get background(){return V$(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return super.constraints}set constraints(e){super.constraints=e}get highlightOptions(){return btt(this)}set highlightOptions(e){Ett(this,e)}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return super.resizeAlign}set resizeAlign(e){super.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return super.rotation}set rotation(e){super.rotation=e}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get spatialReference(){return super.spatialReference}set spatialReference(e){super.spatialReference=e}get spatialReferenceLocked(){return this._get("spatialReferenceLocked")}set spatialReferenceLocked(e){this.stage&&kt.getLogger(this).warn("spatialReferenceLocked cannot be changed after the view has become ready"),this._set("spatialReferenceLocked",e)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),n=!this.destroyed&&(!this.analysisViewManager||!this.layerViewManager||!this.labelManager||!this.graphicsView||this.analysisViewManager.updating===!0||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(r=>!r.destroyed&&!("layerViews"in r)&&r.updating===!0)||e);if(ye("esri-2d-log-updating")){const r=this.allLayerViews.reduce((i,s)=>({...i,[`${s.layer.id}(${s.layer.type})`]:!s.destroyed&&!("layerViews"in s)&&s.updating}),{});console.log(`Updating MapView: ${n}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(r)}
-> updatingMagnifier: ${e}
`)}return n}get viewpoint(){return super.viewpoint}set viewpoint(e){super.viewpoint=e}get visibleArea(){const e=this.stateManager.visibleArea;return e&&new wi({rings:[e.map(n=>[n[0],n[1]])],spatialReference:this.spatialReference})}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(e,n){return Stt(this,e,n)}async takeScreenshot(e){return jtt(this._getScreenshotView(e),e)}toScreen(e,n){return this.stateManager.toScreen(e,n)}async whenAnalysisView(e){if(e.parent==null)throw new Xe("view:no-analysisview-for-analysis","The analysis does not exist in view.analyses",{analysis:e});return this.analysisViewManager.whenAnalysisView(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return V$(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return V$(this.map)?this.map.initialViewProperties.timeExtent:null}getSurface(){return this.surface}hasLayerViewModule(e){return qre.hasLayerViewModule(e)}importLayerView(e){return qre.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(kt.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const n=this.toMap(e),r=await this.hitTest(e),i=this.allLayerViews.toArray().filter(c=>c.clips.every(u=>O_e(this,u,e,n))).reverse(),s=new globalThis.Map(i.map(c=>[c.layer.uid,c])),o=[];let a=0,l=0;for(;a<r.results.length||l<i.length;){const c=r.results.at(a);if(c&&c.type!=="graphic"){++a;continue}const u=s.get((c?.layer??c?.graphic.layer)?.uid);if((!c||u)&&l<i.length&&i.at(l)!==u){const h=i.at(l);"fetchPopupFeaturesAtLocation"in h&&o.push({mapPoint:n,layerView:h}),++l}else c&&(o.push({graphic:c.graphic,layerView:u}),++a)}return{hits:o,location:n}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=Xtt(this.type);if(ye("safari")&&ye("safari")<9&&(e=new Xe("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ye("safari")})),e!=null)throw kt.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return lit()}_getDefaultViewpoint(){const{constraints:e,initialExtent:n,map:r,padding:i,size:s}=this;if(!e)return null;const o=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,a=this.stateManager.getUserStartupOptions(this.size),l=o?.viewpoint,c=l?.targetGeometry?.extent??n,u=c?.center,h=l?.rotation??0,f=l?.scale||c&&pL(c,[s[0]-i.left-i.right,s[1]-i.top-i.bottom]),g=a.center??u,y=a.rotation??h,_=a.scale??f;return g&&_?new fu({targetGeometry:g,scale:_,rotation:y}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const n=new jet(this.surface),r=new kxe(this.surface,{canvas:this.renderCanvas,contextOptions:new iit(this.deactivatedWebGLExtensions,this.debugWebGLExtensions),renderingOptions:this.renderingOptions,timeline:this.timeline},n);this.stage=r,this._magnifierView=new Rxe,this._magnifierView.magnifier=this.magnifier,this._gridView=new Mxe;const i=new Pxe({view:this});this._set("labelManager",i);const s=new Tet({view:this});this._set("animationManager",s);const o=new Cxe({view:this,animationManager:s});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),r.on("webgl-error",l=>this.fatalError=l.error),fn(()=>this.stationary,l=>r.stationary=l,ra),fn(()=>this.background,l=>{r.backgroundColor=l?.color,this._magnifierView.backgroundColor=l?.color},ra),fn(()=>this.magnifier,l=>this._magnifierView.magnifier=l,ra),fn(()=>this.grid,l=>this._gridView.grid=l,ra),fn(()=>this.renderingOptions,l=>r.renderingOptions=l,ra),fn(()=>this.highlights.items.map(l=>({name:l.name,options:{fillColor:l.color,haloColor:l.haloColor,fillOpacity:l.fillOpacity,haloOpacity:l.haloOpacity,haloWidth:l.haloWidth,haloBlur:l.haloBlur}})),()=>{r.highlightGradient=xtt(r.highlightGradient,this.highlights.items)},ra),fn(()=>this.state.id,()=>r.state=this.state,ra),fn(()=>this.animationsEnabled,l=>{this.stage.animationsEnabled=l},ra)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(l=>l(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._gridView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._gridView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(n=>{this.stage.addChild(n.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView),this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){const e=new Ret(Sa.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const n=new Axe({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Ixe(e)});this._set("graphicsView",n)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:n,padding:r,size:i,stage:s}=this;return{allLayerViews:n,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:r,size:i,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const n of this.allLayerViews)n.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const n of this.allLayerViews)n.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}},Zw.type="2d",Zw);x([E({constructOnly:!0})],Gn.prototype,"deactivatedWebGLExtensions",void 0),x([E({constructOnly:!0})],Gn.prototype,"debugWebGLExtensions",void 0),x([E({readOnly:!0})],Gn.prototype,"featuresTilingScheme",void 0),x([E({readOnly:!0})],Gn.prototype,"graphicsTileStore",null),x([E()],Gn.prototype,"graphicsView",void 0),x([E()],Gn.prototype,"constraintsInfo",null),x([E()],Gn.prototype,"initialExtentRequired",null),x([E()],Gn.prototype,"labelManager",void 0),x([E({type:dL,nonNullable:!0})],Gn.prototype,"navigation",void 0),x([E({constructOnly:!0})],Gn.prototype,"renderCanvas",void 0),x([E()],Gn.prototype,"renderingOptions",void 0),x([E({constructOnly:!0})],Gn.prototype,"supersampleScreenshotsEnabled",void 0),x([E()],Gn.prototype,"defaultsFromMapSettings",null),x([E({readOnly:!0})],Gn.prototype,"typeSpecificPreconditionsReady",null),x([E(h7(D2,"analyses"))],Gn.prototype,"analyses",void 0),x([E()],Gn.prototype,"analysisViewManager",void 0),x([E({type:ait})],Gn.prototype,"background",null),x([E()],Gn.prototype,"center",null),x([E({type:Ot})],Gn.prototype,"floors",void 0),x([E()],Gn.prototype,"grid",void 0),x([E({type:Pg})],Gn.prototype,"highlightOptions",null),x([E()],Gn.prototype,"map",void 0),x([E()],Gn.prototype,"padding",null),x([E({readOnly:!0})],Gn.prototype,"rendering",null),x([E({readOnly:!0})],Gn.prototype,"resolution",null),x([E()],Gn.prototype,"scale",null),x([E({type:Boolean,value:!1})],Gn.prototype,"spatialReferenceLocked",null),x([E({readOnly:!0})],Gn.prototype,"tileInfo",null),x([E({type:W_e,readOnly:!0})],Gn.prototype,"timeline",void 0),x([E({readOnly:!0})],Gn.prototype,"type",void 0),x([E({readOnly:!0})],Gn.prototype,"updating",null),x([E({readOnly:!0})],Gn.prototype,"view2dType",void 0),x([E({readOnly:!0})],Gn.prototype,"visibleArea",null),x([E()],Gn.prototype,"zoom",null),x([E({readOnly:!0})],Gn.prototype,"navigating",null),x([E(),qs(t=>t instanceof Sxe?t:jO(Txe,t))],Gn.prototype,"ui",void 0),x([E()],Gn.prototype,"animationsEnabled",void 0),Gn=x([ue("esri.views.View2D")],Gn);const cit=Gn;let E3=class extends cit{constructor(t){super(t),this.view2dType="map"}};x([E({readOnly:!0})],E3.prototype,"view2dType",void 0),E3=x([ue("esri.views.MapView")],E3);const uit=E3,$ie=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"];function hit(){const t=Y.useRef(null),e=Y.useRef(null),n=Y.useRef(!1),r=Y.useRef(!1),[i,s]=Y.useState(!1);t6e({target:"map"});const o=li(T=>T.map),a=li(T=>T.setArcGISMap),l=Bs(T=>T.registerLayer),c=Bs(T=>T.setLayerVisibility),u=Cn(T=>T.defaultBackground);Y.useEffect(()=>{if(!o){console.warn(" Map not initialized yet");return}console.log(" Initializing map layers...");const T=new $m({properties:{title:"OpenStreetMap",type:"base"},visible:!1,source:new BCe}),A=new $m({properties:{title:"CartoDB (licht)",type:"base"},visible:!0,source:new Ty({url:"https://{a-d}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO"})}),I=new $m({properties:{title:"Luchtfoto",type:"base"},visible:!1,source:new Ty({url:"https://service.pdok.nl/hwh/luchtfotorgb/wmts/v1_0/Actueel_orthoHR/EPSG:3857/{z}/{x}/{y}.jpeg",attributions:" Kadaster / PDOK Luchtfoto",maxZoom:19})}),P=new $m({properties:{title:"Labels Overlay",type:"overlay"},visible:!1,source:new Ty({url:"https://{a-d}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}.png",attributions:" OpenStreetMap contributors  CARTO",maxZoom:20}),zIndex:100}),N=new $m({properties:{title:"TMK 1850",type:"base"},visible:!1,source:new Ty({url:"https://s.map5.nl/map/gast/tiles/tmk_1850/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})}),L=new $m({properties:{title:"Bonnebladen 1900",type:"base"},visible:!1,source:new Ty({url:"https://s.map5.nl/map/gast/tiles/bonne_1900/EPSG3857/{z}/{x}/{y}.png",attributions:" Kadaster / Map5.nl",crossOrigin:"anonymous",maxZoom:14})});o.addLayer(T),o.addLayer(A),o.addLayer(I),o.addLayer(P),o.addLayer(N),o.addLayer(L),console.log(" Base layers added:",{osm:T.getVisible(),cartodb:A.getVisible(),satellite:I.getVisible()}),l("OpenStreetMap",T),l("CartoDB (licht)",A),l("Luchtfoto",I),l("Labels Overlay",P),l("TMK 1850",N),l("Bonnebladen 1900",L),o.updateSize(),console.log(" Map size:",o.getSize()),console.log(" Map center:",o.getView().getCenter()),console.log(" Map zoom:",o.getView().getZoom()),h()},[o,l]);async function h(){if(!o){console.error(" Cannot load layers: map is null");return}const T=JRe();console.log(` Loading ${T.length} immediate-load layers (WMS/Tile)...`);const A=await Promise.allSettled(T.map(async P=>{try{const N=await P.factory();return N?{name:P.name,layer:N}:null}catch(N){return console.warn(` Failed to create ${P.name}:`,N),null}}));let I=0;A.forEach(P=>{if(P.status==="fulfilled"&&P.value){const{name:N,layer:L}=P.value;o.addLayer(L),l(N,L),I++,console.log(`   ${N}`)}}),console.log(` Immediate layers loaded: ${I}/${T.length}`),console.log(` Total layers on map: ${o.getLayers().getLength()}`),console.log(" Vector layers will load on first toggle (lazy loading enabled)")}Y.useEffect(()=>{if(!o||!e.current||r.current)return;console.log(" Initializing ArcGIS MapView for AHN layers...");const T=o.getView(),A=T.getCenter(),I=T.getZoom()||8,P=A?Fn(A):[5.5,52],N=new vye({}),L=new uit({container:e.current,map:N,center:P,zoom:I,constraints:{rotationEnabled:!1},ui:{components:[]},background:{color:[0,0,0,0]}});return L.when(()=>{console.log(" ArcGIS MapView ready"),console.log(" ArcGIS center:",L.center?.longitude,L.center?.latitude),console.log(" ArcGIS zoom:",L.zoom),a(N,L),s(!0),r.current=!0,T.on("change:center",()=>{const C=T.getCenter();if(C){const M=Fn(C);L.goTo({center:M},{animate:!1})}}),T.on("change:resolution",()=>{const C=T.getZoom();C!==void 0&&L.goTo({zoom:C},{animate:!1})})}).catch(C=>{console.error(" ArcGIS MapView initialization failed:",C),console.error("Error details:",C.message)}),()=>{L&&L.destroy()}},[o,a]),Y.useEffect(()=>{if(!o||n.current)return;const T=setTimeout(()=>{const A=u||"CartoDB (licht)";$ie.forEach(I=>{c(I,!1)}),$ie.includes(A)?c(A,!0):c("CartoDB (licht)",!0),n.current=!0,console.log(` Default background: ${A}`)},100);return()=>clearTimeout(T)},[o,u,c]);const f=Cn(T=>T.gpsAutoStart),g=ks(T=>T.startTracking),y=Y.useRef(!1);Y.useEffect(()=>{if(!(!o||y.current)&&f){const T=setTimeout(()=>{g(),y.current=!0,console.log(" GPS autostart enabled - tracking started")},500);return()=>clearTimeout(T)}},[o,f,g]);const _={width:"100%",height:"100vh"},b={opacity:i?1:0,transition:"opacity 0.3s ease"};return p.jsxs("div",{style:{position:"relative",width:"100%",height:"100vh"},children:[p.jsx("div",{id:"map",ref:t,style:_}),p.jsx("div",{id:"arcgis-map",ref:e,style:b})]})}const gH=Y.createContext({});function yH(t){const e=Y.useRef(null);return e.current===null&&(e.current=t()),e.current}const SL=Y.createContext(null),vH=Y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class dit extends Y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function fit({children:t,isPresent:e}){const n=Y.useId(),r=Y.useRef(null),i=Y.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=Y.useContext(vH);return Y.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),p.jsx(dit,{isPresent:e,childRef:r,sizeRef:i,children:Y.cloneElement(t,{ref:r})})}const pit=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=yH(mit),l=Y.useId(),c=Y.useCallback(h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},[a,r]),u=Y.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:h=>(a.set(h,!1),()=>a.delete(h))}),s?[Math.random(),c]:[n,c]);return Y.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),Y.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=p.jsx(fit,{isPresent:n,children:t})),p.jsx(SL.Provider,{value:u,children:t})};function mit(){return new Map}function Nxe(t=!0){const e=Y.useContext(SL);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=Y.useId();Y.useEffect(()=>{t&&i(s)},[t]);const o=Y.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const wR=t=>t.key||"";function Fie(t){const e=[];return Y.Children.forEach(t,n=>{Y.isValidElement(n)&&e.push(n)}),e}const _H=typeof window<"u",Oxe=_H?Y.useLayoutEffect:Y.useEffect,Wn=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=Nxe(o),c=Y.useMemo(()=>Fie(t),[t]),u=o&&!a?[]:c.map(wR),h=Y.useRef(!0),f=Y.useRef(c),g=yH(()=>new Map),[y,_]=Y.useState(c),[b,T]=Y.useState(c);Oxe(()=>{h.current=!1,f.current=c;for(let P=0;P<b.length;P++){const N=wR(b[P]);u.includes(N)?g.delete(N):g.get(N)!==!0&&g.set(N,!1)}},[b,u.length,u.join("-")]);const A=[];if(c!==y){let P=[...c];for(let N=0;N<b.length;N++){const L=b[N],C=wR(L);u.includes(C)||(P.splice(N,0,L),A.push(L))}s==="wait"&&A.length&&(P=A),T(Fie(P)),_(c);return}const{forceRender:I}=Y.useContext(gH);return p.jsx(p.Fragment,{children:b.map(P=>{const N=wR(P),L=o&&!a?!1:c===b||u.includes(N),C=()=>{if(g.has(N))g.set(N,!0);else return;let M=!0;g.forEach(O=>{O||(M=!1)}),M&&(I?.(),T(f.current),o&&l?.(),r&&r())};return p.jsx(pit,{isPresent:L,initial:!h.current||n?void 0:!1,custom:L?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:L?void 0:C,children:P},N)})})},yc=t=>t;let Lxe=yc;function xH(t){let e;return()=>(e===void 0&&(e=t()),e)}const z2=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},lp=t=>t*1e3,cp=t=>t/1e3,git={useManualTiming:!1};function yit(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,h=!1)=>{const g=h&&r?e:n;return u&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const bR=["read","resolveKeyframes","update","preRender","render","postRender"],vit=40;function Dxe(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=bR.reduce((T,A)=>(T[A]=yit(s),T),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:h,postRender:f}=o,g=()=>{const T=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(T-i.timestamp,vit),1),i.timestamp=T,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),h.process(i),f.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(g))},y=()=>{n=!0,r=!0,i.isProcessing||t(g)};return{schedule:bR.reduce((T,A)=>{const I=o[A];return T[A]=(P,N=!1,L=!1)=>(n||y(),I.schedule(P,N,L)),T},{}),cancel:T=>{for(let A=0;A<bR.length;A++)o[bR[A]].cancel(T)},state:i,steps:o}}const{schedule:gi,cancel:Zg,state:Po,steps:z$}=Dxe(typeof requestAnimationFrame<"u"?requestAnimationFrame:yc,!0),jxe=Y.createContext({strict:!1}),Vie={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},G2={};for(const t in Vie)G2[t]={isEnabled:e=>Vie[t].some(n=>!!e[n])};function _it(t){for(const e in t)G2[e]={...G2[e],...t[e]}}const xit=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function DN(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||xit.has(t)}let $xe=t=>!DN(t);function wit(t){t&&($xe=e=>e.startsWith("on")?!DN(e):t(e))}try{wit(require("@emotion/is-prop-valid").default)}catch{}function bit(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||($xe(i)||n===!0&&DN(i)||!e&&!DN(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Eit(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const TL=Y.createContext({});function gA(t){return typeof t=="string"||Array.isArray(t)}function kL(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const wH=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bH=["initial",...wH];function AL(t){return kL(t.animate)||bH.some(e=>gA(t[e]))}function Fxe(t){return!!(AL(t)||t.variants)}function Sit(t,e){if(AL(t)){const{initial:n,animate:r}=t;return{initial:n===!1||gA(n)?n:void 0,animate:gA(r)?r:void 0}}return t.inherit!==!1?e:{}}function Tit(t){const{initial:e,animate:n}=Sit(t,Y.useContext(TL));return Y.useMemo(()=>({initial:e,animate:n}),[zie(e),zie(n)])}function zie(t){return Array.isArray(t)?t.join(" "):t}const kit=Symbol.for("motionComponentSymbol");function Fx(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Ait(t,e,n){return Y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Fx(n)&&(n.current=r))},[e])}const EH=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Iit="framerAppearId",Vxe="data-"+EH(Iit),{schedule:SH}=Dxe(queueMicrotask,!1),zxe=Y.createContext({});function Pit(t,e,n,r,i){var s,o;const{visualElement:a}=Y.useContext(TL),l=Y.useContext(jxe),c=Y.useContext(SL),u=Y.useContext(vH).reducedMotion,h=Y.useRef(null);r=r||l.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,g=Y.useContext(zxe);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&Cit(h.current,n,i,g);const y=Y.useRef(!1);Y.useInsertionEffect(()=>{f&&y.current&&f.update(n,c)});const _=n[Vxe],b=Y.useRef(!!_&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,_))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,_)));return Oxe(()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),SH.render(f.render),b.current&&f.animationState&&f.animationState.animateChanges())}),Y.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)===null||T===void 0||T.call(window,_)}),b.current=!1))}),f}function Cit(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Gxe(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Fx(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function Gxe(t){if(t)return t.options.allowProjection!==!1?t.projection:Gxe(t.parent)}function Rit({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&_it(t);function a(c,u){let h;const f={...Y.useContext(vH),...c,layoutId:Mit(c)},{isStatic:g}=f,y=Tit(c),_=r(c,g);if(!g&&_H){Nit();const b=Oit(f);h=b.MeasureLayout,y.visualElement=Pit(i,_,f,e,b.ProjectionNode)}return p.jsxs(TL.Provider,{value:y,children:[h&&y.visualElement?p.jsx(h,{visualElement:y.visualElement,...f}):null,n(i,c,Ait(_,y.visualElement,u),_,g,y.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=Y.forwardRef(a);return l[kit]=i,l}function Mit({layoutId:t}){const e=Y.useContext(gH).id;return e&&t!==void 0?e+"-"+t:t}function Nit(t,e){Y.useContext(jxe).strict}function Oit(t){const{drag:e,layout:n}=G2;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Lit=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function TH(t){return typeof t!="string"||t.includes("-")?!1:!!(Lit.indexOf(t)>-1||/[A-Z]/u.test(t))}function Gie(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function kH(t,e,n,r){if(typeof e=="function"){const[i,s]=Gie(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=Gie(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const hz=t=>Array.isArray(t),Dit=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),jit=t=>hz(t)?t[t.length-1]||0:t,fa=t=>!!(t&&t.getVelocity);function S3(t){const e=fa(t)?t.get():t;return Dit(e)?e.toValue():e}function $it({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:Fit(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const Uxe=t=>(e,n)=>{const r=Y.useContext(TL),i=Y.useContext(SL),s=()=>$it(t,e,r,i);return n?s():yH(s)};function Fit(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=S3(s[f]);let{initial:o,animate:a}=t;const l=AL(t),c=Fxe(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!kL(h)){const f=Array.isArray(h)?h:[h];for(let g=0;g<f.length;g++){const y=kH(t,f[g]);if(y){const{transitionEnd:_,transition:b,...T}=y;for(const A in T){let I=T[A];if(Array.isArray(I)){const P=u?I.length-1:0;I=I[P]}I!==null&&(i[A]=I)}for(const A in _)i[A]=_[A]}}}return i}const kb=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ev=new Set(kb),Bxe=t=>e=>typeof e=="string"&&e.startsWith(t),Wxe=Bxe("--"),Vit=Bxe("var(--"),AH=t=>Vit(t)?zit.test(t.split("/*")[0].trim()):!1,zit=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Hxe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,bp=(t,e,n)=>n>e?e:n<t?t:n,Ab={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},yA={...Ab,transform:t=>bp(0,1,t)},ER={...Ab,default:1},UI=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Dm=UI("deg"),Rd=UI("%"),gn=UI("px"),Git=UI("vh"),Uit=UI("vw"),Uie={...Rd,parse:t=>Rd.parse(t)/100,transform:t=>Rd.transform(t*100)},Bit={borderWidth:gn,borderTopWidth:gn,borderRightWidth:gn,borderBottomWidth:gn,borderLeftWidth:gn,borderRadius:gn,radius:gn,borderTopLeftRadius:gn,borderTopRightRadius:gn,borderBottomRightRadius:gn,borderBottomLeftRadius:gn,width:gn,maxWidth:gn,height:gn,maxHeight:gn,top:gn,right:gn,bottom:gn,left:gn,padding:gn,paddingTop:gn,paddingRight:gn,paddingBottom:gn,paddingLeft:gn,margin:gn,marginTop:gn,marginRight:gn,marginBottom:gn,marginLeft:gn,backgroundPositionX:gn,backgroundPositionY:gn},Wit={rotate:Dm,rotateX:Dm,rotateY:Dm,rotateZ:Dm,scale:ER,scaleX:ER,scaleY:ER,scaleZ:ER,skew:Dm,skewX:Dm,skewY:Dm,distance:gn,translateX:gn,translateY:gn,translateZ:gn,x:gn,y:gn,z:gn,perspective:gn,transformPerspective:gn,opacity:yA,originX:Uie,originY:Uie,originZ:gn},Bie={...Ab,transform:Math.round},IH={...Bit,...Wit,zIndex:Bie,size:gn,fillOpacity:yA,strokeOpacity:yA,numOctaves:Bie},Hit={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},qit=kb.length;function Kit(t,e,n){let r="",i=!0;for(let s=0;s<qit;s++){const o=kb[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=Hxe(a,IH[o]);if(!l){i=!1;const u=Hit[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function PH(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Ev.has(l)){o=!0;continue}else if(Wxe(l)){i[l]=c;continue}else{const u=Hxe(c,IH[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=Kit(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const Yit={offset:"stroke-dashoffset",array:"stroke-dasharray"},Xit={offset:"strokeDashoffset",array:"strokeDasharray"};function Zit(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Yit:Xit;t[s.offset]=gn.transform(-r);const o=gn.transform(e),a=gn.transform(n);t[s.array]=`${o} ${a}`}function Wie(t,e,n){return typeof t=="string"?t:gn.transform(e+n*t)}function Jit(t,e,n){const r=Wie(e,t.x,t.width),i=Wie(n,t.y,t.height);return`${r} ${i}`}function CH(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,h){if(PH(t,c,h),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:g,dimensions:y}=t;f.transform&&(y&&(g.transform=f.transform),delete f.transform),y&&(i!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=Jit(y,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&Zit(f,o,a,l,!1)}const RH=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),qxe=()=>({...RH(),attrs:{}}),MH=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Kxe(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const Yxe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Xxe(t,e,n,r){Kxe(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(Yxe.has(i)?i:EH(i),e.attrs[i])}const jN={};function Qit(t){Object.assign(jN,t)}function Zxe(t,{layout:e,layoutId:n}){return Ev.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!jN[t]||t==="opacity")}function NH(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(fa(i[o])||e.style&&fa(e.style[o])||Zxe(o,t)||((r=n?.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function Jxe(t,e,n){const r=NH(t,e,n);for(const i in t)if(fa(t[i])||fa(e[i])){const s=kb.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function est(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Hie=["x","y","width","height","cx","cy","r"],tst={useVisualState:Uxe({scrapeMotionValuesFromProps:Jxe,createRenderState:qxe,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(Ev.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<Hie.length;a++){const l=Hie[a];t[l]!==e[l]&&(o=!0)}o&&gi.read(()=>{est(n,r),gi.render(()=>{CH(r,i,MH(n.tagName),t.transformTemplate),Xxe(n,r)})})}})},nst={useVisualState:Uxe({scrapeMotionValuesFromProps:NH,createRenderState:RH})};function Qxe(t,e,n){for(const r in e)!fa(e[r])&&!Zxe(r,n)&&(t[r]=e[r])}function rst({transformTemplate:t},e){return Y.useMemo(()=>{const n=RH();return PH(n,e,t),Object.assign({},n.vars,n.style)},[e])}function ist(t,e){const n=t.style||{},r={};return Qxe(r,n,t),Object.assign(r,rst(t,e)),r}function sst(t,e){const n={},r=ist(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function ost(t,e,n,r){const i=Y.useMemo(()=>{const s=qxe();return CH(s,e,MH(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};Qxe(s,t.style,t),i.style={...s,...i.style}}return i}function ast(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(TH(n)?ost:sst)(r,s,o,n),c=bit(r,typeof n=="string",t),u=n!==Y.Fragment?{...c,...l,ref:i}:{},{children:h}=r,f=Y.useMemo(()=>fa(h)?h.get():h,[h]);return Y.createElement(n,{...u,children:f})}}function lst(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...TH(r)?tst:nst,preloadedFeatures:t,useRender:ast(i),createVisualElement:e,Component:r};return Rit(o)}}function ewe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function IL(t,e,n){const r=t.getProps();return kH(r,e,n!==void 0?n:r.custom,t)}const cst=xH(()=>window.ScrollTimeline!==void 0);class ust{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(cst()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class hst extends ust{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function OH(t,e){return t?t[e]||t.default||t:void 0}const dz=2e4;function twe(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<dz;)e+=n,r=t.next(e);return e>=dz?1/0:e}function LH(t){return typeof t=="function"}function qie(t,e){t.timeline=e,t.onfinish=null}const DH=t=>Array.isArray(t)&&typeof t[0]=="number",dst={linearEasing:void 0};function fst(t,e){const n=xH(t);return()=>{var r;return(r=dst[e])!==null&&r!==void 0?r:n()}}const $N=fst(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),nwe=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(z2(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function rwe(t){return!!(typeof t=="function"&&$N()||!t||typeof t=="string"&&(t in fz||$N())||DH(t)||Array.isArray(t)&&t.every(rwe))}const qS=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,fz={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qS([0,.65,.55,1]),circOut:qS([.55,0,1,.45]),backIn:qS([.31,.01,.66,-.59]),backOut:qS([.33,1.53,.69,.99])};function iwe(t,e){if(t)return typeof t=="function"&&$N()?nwe(t,e):DH(t)?qS(t):Array.isArray(t)?t.map(n=>iwe(n,e)||fz.easeOut):fz[t]}const Ku={x:!1,y:!1};function swe(){return Ku.x||Ku.y}function pst(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function owe(t,e){const n=pst(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Kie(t){return e=>{e.pointerType==="touch"||swe()||t(e)}}function mst(t,e,n={}){const[r,i,s]=owe(t,n),o=Kie(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=Kie(h=>{c(h),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const awe=(t,e)=>e?t===e?!0:awe(t,e.parentElement):!1,jH=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,gst=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function yst(t){return gst.has(t.tagName)||t.tabIndex!==-1}const KS=new WeakSet;function Yie(t){return e=>{e.key==="Enter"&&t(e)}}function G$(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const vst=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Yie(()=>{if(KS.has(n))return;G$(n,"down");const i=Yie(()=>{G$(n,"up")}),s=()=>G$(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Xie(t){return jH(t)&&!swe()}function _st(t,e,n={}){const[r,i,s]=owe(t,n),o=a=>{const l=a.currentTarget;if(!Xie(a)||KS.has(l))return;KS.add(l);const c=e(a),u=(g,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!Xie(g)||!KS.has(l))&&(KS.delete(l),typeof c=="function"&&c(g,{success:y}))},h=g=>{u(g,n.useGlobalTarget||awe(l,g.target))},f=g=>{u(g,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return r.forEach(a=>{!yst(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>vst(c,i),i)}),s}function xst(t){return t==="x"||t==="y"?Ku[t]?null:(Ku[t]=!0,()=>{Ku[t]=!1}):Ku.x||Ku.y?null:(Ku.x=Ku.y=!0,()=>{Ku.x=Ku.y=!1})}const lwe=new Set(["width","height","top","left","right","bottom",...kb]);let T3;function wst(){T3=void 0}const Md={now:()=>(T3===void 0&&Md.set(Po.isProcessing||git.useManualTiming?Po.timestamp:performance.now()),T3),set:t=>{T3=t,queueMicrotask(wst)}};function $H(t,e){t.indexOf(e)===-1&&t.push(e)}function FH(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class VH{constructor(){this.subscriptions=[]}add(e){return $H(this.subscriptions,e),()=>FH(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function cwe(t,e){return e?t*(1e3/e):0}const Zie=30,bst=t=>!isNaN(parseFloat(t));class Est{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=Md.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Md.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=bst(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new VH);const r=this.events[e].add(n);return e==="change"?()=>{r(),gi.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Md.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Zie)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Zie);return cwe(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function vA(t,e){return new Est(t,e)}function Sst(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,vA(n))}function Tst(t,e){const n=IL(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=jit(s[o]);Sst(t,o,a)}}function kst(t){return!!(fa(t)&&t.add)}function pz(t,e){const n=t.getValue("willChange");if(kst(n))return n.add(e)}function uwe(t){return t.props[Vxe]}const hwe=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Ast=1e-7,Ist=12;function Pst(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=hwe(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>Ast&&++a<Ist);return o}function BI(t,e,n,r){if(t===e&&n===r)return yc;const i=s=>Pst(s,0,1,t,n);return s=>s===0||s===1?s:hwe(i(s),e,r)}const dwe=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,fwe=t=>e=>1-t(1-e),pwe=BI(.33,1.53,.69,.99),zH=fwe(pwe),mwe=dwe(zH),gwe=t=>(t*=2)<1?.5*zH(t):.5*(2-Math.pow(2,-10*(t-1))),GH=t=>1-Math.sin(Math.acos(t)),ywe=fwe(GH),vwe=dwe(GH),_we=t=>/^0[^.\s]+$/u.test(t);function Cst(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||_we(t):!0}const GT=t=>Math.round(t*1e5)/1e5,UH=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Rst(t){return t==null}const Mst=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,BH=(t,e)=>n=>!!(typeof n=="string"&&Mst.test(n)&&n.startsWith(t)||e&&!Rst(n)&&Object.prototype.hasOwnProperty.call(n,e)),xwe=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(UH);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Nst=t=>bp(0,255,t),U$={...Ab,transform:t=>Math.round(Nst(t))},Xy={test:BH("rgb","red"),parse:xwe("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+U$.transform(t)+", "+U$.transform(e)+", "+U$.transform(n)+", "+GT(yA.transform(r))+")"};function Ost(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const mz={test:BH("#"),parse:Ost,transform:Xy.transform},Vx={test:BH("hsl","hue"),parse:xwe("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Rd.transform(GT(e))+", "+Rd.transform(GT(n))+", "+GT(yA.transform(r))+")"},ea={test:t=>Xy.test(t)||mz.test(t)||Vx.test(t),parse:t=>Xy.test(t)?Xy.parse(t):Vx.test(t)?Vx.parse(t):mz.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Xy.transform(t):Vx.transform(t)},Lst=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Dst(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(UH))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Lst))===null||n===void 0?void 0:n.length)||0)>0}const wwe="number",bwe="color",jst="var",$st="var(",Jie="${}",Fst=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function _A(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(Fst,l=>(ea.test(l)?(r.color.push(s),i.push(bwe),n.push(ea.parse(l))):l.startsWith($st)?(r.var.push(s),i.push(jst),n.push(l)):(r.number.push(s),i.push(wwe),n.push(parseFloat(l))),++s,Jie)).split(Jie);return{values:n,split:a,indexes:r,types:i}}function Ewe(t){return _A(t).values}function Swe(t){const{split:e,types:n}=_A(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===wwe?s+=GT(i[o]):a===bwe?s+=ea.transform(i[o]):s+=i[o]}return s}}const Vst=t=>typeof t=="number"?0:t;function zst(t){const e=Ewe(t);return Swe(t)(e.map(Vst))}const Jg={test:Dst,parse:Ewe,createTransformer:Swe,getAnimatableNone:zst},Gst=new Set(["brightness","contrast","saturate","opacity"]);function Ust(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(UH)||[];if(!r)return t;const i=n.replace(r,"");let s=Gst.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const Bst=/\b([a-z-]*)\(.*?\)/gu,gz={...Jg,getAnimatableNone:t=>{const e=t.match(Bst);return e?e.map(Ust).join(" "):t}},Wst={...IH,color:ea,backgroundColor:ea,outlineColor:ea,fill:ea,stroke:ea,borderColor:ea,borderTopColor:ea,borderRightColor:ea,borderBottomColor:ea,borderLeftColor:ea,filter:gz,WebkitFilter:gz},WH=t=>Wst[t];function Twe(t,e){let n=WH(t);return n!==gz&&(n=Jg),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Hst=new Set(["auto","none","0"]);function qst(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!Hst.has(s)&&_A(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=Twe(n,i)}const Qie=t=>t===Ab||t===gn,ese=(t,e)=>parseFloat(t.split(", ")[e]),tse=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return ese(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?ese(s[1],t):0}},Kst=new Set(["x","y","z"]),Yst=kb.filter(t=>!Kst.has(t));function Xst(t){const e=[];return Yst.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const U2={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:tse(4,13),y:tse(5,14)};U2.translateX=U2.x;U2.translateY=U2.y;const p1=new Set;let yz=!1,vz=!1;function kwe(){if(vz){const t=Array.from(p1).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Xst(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}vz=!1,yz=!1,p1.forEach(t=>t.complete()),p1.clear()}function Awe(){p1.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(vz=!0)})}function Zst(){Awe(),kwe()}class HH{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(p1.add(this),yz||(yz=!0,gi.read(Awe),gi.resolveKeyframes(kwe))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),p1.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,p1.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Iwe=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),Jst=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Qst(t){const e=Jst.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function Pwe(t,e,n=1){const[r,i]=Qst(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Iwe(o)?parseFloat(o):o}return AH(i)?Pwe(i,e,n+1):i}const Cwe=t=>e=>e.test(t),eot={test:t=>t==="auto",parse:t=>t},Rwe=[Ab,gn,Rd,Dm,Uit,Git,eot],nse=t=>Rwe.find(Cwe(t));class Mwe extends HH{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),AH(c))){const u=Pwe(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!lwe.has(r)||e.length!==2)return;const[i,s]=e,o=nse(i),a=nse(s);if(o!==a)if(Qie(o)&&Qie(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)Cst(e[i])&&r.push(i);r.length&&qst(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=U2[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=U2[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const rse=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Jg.test(t)||t==="0")&&!t.startsWith("url("));function tot(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function not(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=rse(i,e),a=rse(s,e);return!o||!a?!1:tot(t)||(n==="spring"||LH(n))&&r}const rot=t=>t!==null;function PL(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(rot),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const iot=40;class Nwe{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Md.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>iot?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Zst(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Md.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!not(e,r,i,s))if(o)this.options.duration=0;else{l&&l(PL(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Fi=(t,e,n)=>t+(e-t)*n;function B$(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function sot({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=B$(l,a,t+1/3),s=B$(l,a,t),o=B$(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function FN(t,e){return n=>n>0?e:t}const W$=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},oot=[mz,Xy,Vx],aot=t=>oot.find(e=>e.test(t));function ise(t){const e=aot(t);if(!e)return!1;let n=e.parse(t);return e===Vx&&(n=sot(n)),n}const sse=(t,e)=>{const n=ise(t),r=ise(e);if(!n||!r)return FN(t,e);const i={...n};return s=>(i.red=W$(n.red,r.red,s),i.green=W$(n.green,r.green,s),i.blue=W$(n.blue,r.blue,s),i.alpha=Fi(n.alpha,r.alpha,s),Xy.transform(i))},lot=(t,e)=>n=>e(t(n)),WI=(...t)=>t.reduce(lot),_z=new Set(["none","hidden"]);function cot(t,e){return _z.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function uot(t,e){return n=>Fi(t,e,n)}function qH(t){return typeof t=="number"?uot:typeof t=="string"?AH(t)?FN:ea.test(t)?sse:fot:Array.isArray(t)?Owe:typeof t=="object"?ea.test(t)?sse:hot:FN}function Owe(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>qH(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function hot(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=qH(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function dot(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const fot=(t,e)=>{const n=Jg.createTransformer(e),r=_A(t),i=_A(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?_z.has(t)&&!i.values.length||_z.has(e)&&!r.values.length?cot(t,e):WI(Owe(dot(r,i),i.values),n):FN(t,e)};function Lwe(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Fi(t,e,n):qH(t)(t,e)}const pot=5;function Dwe(t,e,n){const r=Math.max(e-pot,0);return cwe(n-t(r),e-r)}const Xi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},H$=.001;function mot({duration:t=Xi.duration,bounce:e=Xi.bounce,velocity:n=Xi.velocity,mass:r=Xi.mass}){let i,s,o=1-e;o=bp(Xi.minDamping,Xi.maxDamping,o),t=bp(Xi.minDuration,Xi.maxDuration,cp(t)),o<1?(i=c=>{const u=c*o,h=u*t,f=u-n,g=xz(c,o),y=Math.exp(-h);return H$-f/g*y},s=c=>{const h=c*o*t,f=h*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-h),_=xz(Math.pow(c,2),o);return(-i(c)+H$>0?-1:1)*((f-g)*y)/_}):(i=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-H$+u*h},s=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=yot(i,s,a);if(t=lp(t),isNaN(l))return{stiffness:Xi.stiffness,damping:Xi.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const got=12;function yot(t,e,n){let r=n;for(let i=1;i<got;i++)r=r-t(r)/e(r);return r}function xz(t,e){return t*Math.sqrt(1-e*e)}const vot=["duration","bounce"],_ot=["stiffness","damping","mass"];function ose(t,e){return e.some(n=>t[n]!==void 0)}function xot(t){let e={velocity:Xi.velocity,stiffness:Xi.stiffness,damping:Xi.damping,mass:Xi.mass,isResolvedFromDuration:!1,...t};if(!ose(t,_ot)&&ose(t,vot))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*bp(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Xi.mass,stiffness:i,damping:s}}else{const n=mot(t);e={...e,...n,mass:Xi.mass},e.isResolvedFromDuration=!0}return e}function jwe(t=Xi.visualDuration,e=Xi.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:g}=xot({...n,velocity:-cp(n.velocity||0)}),y=f||0,_=c/(2*Math.sqrt(l*u)),b=o-s,T=cp(Math.sqrt(l/u)),A=Math.abs(b)<5;r||(r=A?Xi.restSpeed.granular:Xi.restSpeed.default),i||(i=A?Xi.restDelta.granular:Xi.restDelta.default);let I;if(_<1){const N=xz(T,_);I=L=>{const C=Math.exp(-_*T*L);return o-C*((y+_*T*b)/N*Math.sin(N*L)+b*Math.cos(N*L))}}else if(_===1)I=N=>o-Math.exp(-T*N)*(b+(y+T*b)*N);else{const N=T*Math.sqrt(_*_-1);I=L=>{const C=Math.exp(-_*T*L),M=Math.min(N*L,300);return o-C*((y+_*T*b)*Math.sinh(M)+N*b*Math.cosh(M))/N}}const P={calculatedDuration:g&&h||null,next:N=>{const L=I(N);if(g)a.done=N>=h;else{let C=0;_<1&&(C=N===0?lp(y):Dwe(I,N,L));const M=Math.abs(C)<=r,O=Math.abs(o-L)<=i;a.done=M&&O}return a.value=a.done?o:L,a},toString:()=>{const N=Math.min(twe(P),dz),L=nwe(C=>P.next(N*C).value,N,30);return N+"ms "+L}};return P}function ase({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},g=M=>a!==void 0&&M<a||l!==void 0&&M>l,y=M=>a===void 0?l:l===void 0||Math.abs(a-M)<Math.abs(l-M)?a:l;let _=n*e;const b=h+_,T=o===void 0?b:o(b);T!==b&&(_=T-h);const A=M=>-_*Math.exp(-M/r),I=M=>T+A(M),P=M=>{const O=A(M),D=I(M);f.done=Math.abs(O)<=c,f.value=f.done?T:D};let N,L;const C=M=>{g(f.value)&&(N=M,L=jwe({keyframes:[f.value,y(f.value)],velocity:Dwe(I,M,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return C(0),{calculatedDuration:null,next:M=>{let O=!1;return!L&&N===void 0&&(O=!0,P(M),C(M)),N!==void 0&&M>=N?L.next(M-N):(!O&&P(M),f)}}}const wot=BI(.42,0,1,1),bot=BI(0,0,.58,1),$we=BI(.42,0,.58,1),Eot=t=>Array.isArray(t)&&typeof t[0]!="number",Sot={linear:yc,easeIn:wot,easeInOut:$we,easeOut:bot,circIn:GH,circInOut:vwe,circOut:ywe,backIn:zH,backInOut:mwe,backOut:pwe,anticipate:gwe},lse=t=>{if(DH(t)){Lxe(t.length===4);const[e,n,r,i]=t;return BI(e,n,r,i)}else if(typeof t=="string")return Sot[t];return t};function Tot(t,e,n){const r=[],i=n||Lwe,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||yc:e;a=WI(l,a)}r.push(a)}return r}function kot(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Lxe(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=Tot(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=z2(t[h],t[h+1],u);return a[h](f)};return n?u=>c(bp(t[0],t[s-1],u)):c}function Aot(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=z2(0,e,r);t.push(Fi(n,1,i))}}function Iot(t){const e=[0];return Aot(e,t.length-1),e}function Pot(t,e){return t.map(n=>n*e)}function Cot(t,e){return t.map(()=>e||$we).splice(0,t.length-1)}function VN({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Eot(r)?r.map(lse):lse(r),s={done:!1,value:e[0]},o=Pot(n&&n.length===e.length?n:Iot(e),t),a=kot(o,e,{ease:Array.isArray(i)?i:Cot(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const Rot=t=>{const e=({timestamp:n})=>t(n);return{start:()=>gi.update(e,!0),stop:()=>Zg(e),now:()=>Po.isProcessing?Po.timestamp:Md.now()}},Mot={decay:ase,inertia:ase,tween:VN,keyframes:VN,spring:jwe},Not=t=>t/100;class KH extends Nwe{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=i?.KeyframeResolver||HH,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=LH(n)?n:Mot[n]||VN;let l,c;a!==VN&&typeof e[0]!="number"&&(l=WI(Not,Lwe(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=twe(u));const{calculatedDuration:h}=u,f=h+i,g=f*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:h,resolvedDuration:f,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:M}=this.options;return{done:!0,value:M[M.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:h}=r;if(this.startTime===null)return s.next(0);const{delay:f,repeat:g,repeatType:y,repeatDelay:_,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const T=this.currentTime-f*(this.speed>=0?1:-1),A=this.speed>=0?T<0:T>u;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let I=this.currentTime,P=s;if(g){const M=Math.min(this.currentTime,u)/h;let O=Math.floor(M),D=M%1;!D&&M>=1&&(D=1),D===1&&O--,O=Math.min(O,g+1),O%2&&(y==="reverse"?(D=1-D,_&&(D-=_/h)):y==="mirror"&&(P=o)),I=bp(0,1,D)*h}const N=A?{done:!1,value:l[0]}:P.next(I);a&&(N.value=a(N.value));let{done:L}=N;!A&&c!==null&&(L=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return C&&i!==void 0&&(N.value=PL(l,this.options,i)),b&&b(N.value),C&&this.finish(),N}get duration(){const{resolved:e}=this;return e?cp(e.calculatedDuration):0}get time(){return cp(this.currentTime)}set time(e){e=lp(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=cp(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Rot,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Oot=new Set(["opacity","clipPath","filter","transform"]);function Lot(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=iwe(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Dot=xH(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),zN=10,jot=2e4;function $ot(t){return LH(t.type)||t.type==="spring"||!rwe(t.ease)}function Fot(t,e){const n=new KH({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<jot;)r=n.sample(s),i.push(r.value),s+=zN;return{times:void 0,keyframes:i,duration:s-zN,ease:"linear"}}const Fwe={anticipate:gwe,backInOut:mwe,circInOut:vwe};function Vot(t){return t in Fwe}class cse extends Nwe{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new Mwe(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&$N()&&Vot(s)&&(s=Fwe[s]),$ot(this.options)){const{onComplete:h,onUpdate:f,motionValue:g,element:y,..._}=this.options,b=Fot(e,_);e=b.keyframes,e.length===1&&(e[1]=e[0]),r=b.duration,i=b.times,s=b.ease,o="keyframes"}const u=Lot(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(qie(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:h}=this.options;a.set(PL(e,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return cp(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return cp(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=lp(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return yc;const{animation:r}=n;qie(r,e)}return yc}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:h,element:f,...g}=this.options,y=new KH({...g,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),_=lp(this.time);c.setWithVelocity(y.sample(_-zN).value,y.sample(_).value,zN)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return Dot()&&r&&Oot.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const zot={type:"spring",stiffness:500,damping:25,restSpeed:10},Got=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Uot={type:"keyframes",duration:.8},Bot={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Wot=(t,{keyframes:e})=>e.length>2?Uot:Ev.has(t)?t.startsWith("scale")?Got(e[1]):zot:Bot;function Hot({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const YH=(t,e,n,r={},i,s)=>o=>{const a=OH(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-lp(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};Hot(a)||(u={...u,...Wot(t,u)}),u.duration&&(u.duration=lp(u.duration)),u.repeatDelay&&(u.repeatDelay=lp(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!s&&e.get()!==void 0){const f=PL(u.keyframes,a);if(f!==void 0)return gi.update(()=>{u.onUpdate(f),u.onComplete()}),new hst([])}return!s&&cse.supports(u)?new cse(u):new KH(u)};function qot({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Vwe(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const f=t.getValue(h,(s=t.latestValues[h])!==null&&s!==void 0?s:null),g=l[h];if(g===void 0||u&&qot(u,h))continue;const y={delay:n,...OH(o||{},h)};let _=!1;if(window.MotionHandoffAnimation){const T=uwe(t);if(T){const A=window.MotionHandoffAnimation(T,h,gi);A!==null&&(y.startTime=A,_=!0)}}pz(t,h),f.start(YH(h,f,g,t.shouldReduceMotion&&lwe.has(h)?{type:!1}:y,t,_));const b=f.animation;b&&c.push(b)}return a&&Promise.all(c).then(()=>{gi.update(()=>{a&&Tst(t,a)})}),c}function wz(t,e,n={}){var r;const i=IL(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(Vwe(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=s;return Kot(t,e,u+c,h,f,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function Kot(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(Yot).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(wz(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Yot(t,e){return t.sortNodePosition(e)}function Xot(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>wz(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=wz(t,e,n);else{const i=typeof e=="function"?IL(t,e,n.custom):e;r=Promise.all(Vwe(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const Zot=bH.length;function zwe(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?zwe(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<Zot;n++){const r=bH[n],i=t.props[r];(gA(i)||i===!1)&&(e[r]=i)}return e}const Jot=[...wH].reverse(),Qot=wH.length;function eat(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Xot(t,n,r)))}function tat(t){let e=eat(t),n=use(),r=!0;const i=l=>(c,u)=>{var h;const f=IL(t,u,l==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:g,transitionEnd:y,..._}=f;c={...c,..._,...y}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=zwe(t.parent)||{},h=[],f=new Set;let g={},y=1/0;for(let b=0;b<Qot;b++){const T=Jot[b],A=n[T],I=c[T]!==void 0?c[T]:u[T],P=gA(I),N=T===l?A.isActive:null;N===!1&&(y=b);let L=I===u[T]&&I!==c[T]&&P;if(L&&r&&t.manuallyAnimateOnMount&&(L=!1),A.protectedKeys={...g},!A.isActive&&N===null||!I&&!A.prevProp||kL(I)||typeof I=="boolean")continue;const C=nat(A.prevProp,I);let M=C||T===l&&A.isActive&&!L&&P||b>y&&P,O=!1;const D=Array.isArray(I)?I:[I];let V=D.reduce(i(T),{});N===!1&&(V={});const{prevResolvedValues:U={}}=A,G={...U,...V},de=Ne=>{M=!0,f.has(Ne)&&(O=!0,f.delete(Ne)),A.needsAnimating[Ne]=!0;const fe=t.getValue(Ne);fe&&(fe.liveStyle=!1)};for(const Ne in G){const fe=V[Ne],De=U[Ne];if(g.hasOwnProperty(Ne))continue;let Ce=!1;hz(fe)&&hz(De)?Ce=!ewe(fe,De):Ce=fe!==De,Ce?fe!=null?de(Ne):f.add(Ne):fe!==void 0&&f.has(Ne)?de(Ne):A.protectedKeys[Ne]=!0}A.prevProp=I,A.prevResolvedValues=V,A.isActive&&(g={...g,...V}),r&&t.blockInitialAnimation&&(M=!1),M&&(!(L&&C)||O)&&h.push(...D.map(Ne=>({animation:Ne,options:{type:T}})))}if(f.size){const b={};f.forEach(T=>{const A=t.getBaseTarget(T),I=t.getValue(T);I&&(I.liveStyle=!0),b[T]=A??null}),h.push({animation:b})}let _=!!h.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(h):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(f=>{var g;return(g=f.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=use(),r=!0}}}function nat(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!ewe(e,t):!1}function Y0(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function use(){return{animate:Y0(!0),whileInView:Y0(),whileHover:Y0(),whileTap:Y0(),whileDrag:Y0(),whileFocus:Y0(),exit:Y0()}}class f0{constructor(e){this.isMounted=!1,this.node=e}update(){}}class rat extends f0{constructor(e){super(e),e.animationState||(e.animationState=tat(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();kL(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let iat=0;class sat extends f0{constructor(){super(...arguments),this.id=iat++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const oat={animation:{Feature:rat},exit:{Feature:sat}};function xA(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function HI(t){return{point:{x:t.pageX,y:t.pageY}}}const aat=t=>e=>jH(e)&&t(e,HI(e));function UT(t,e,n,r){return xA(t,e,aat(n),r)}const hse=(t,e)=>Math.abs(t-e);function lat(t,e){const n=hse(t.x,e.x),r=hse(t.y,e.y);return Math.sqrt(n**2+r**2)}class Gwe{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=K$(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=lat(h.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:y}=h,{timestamp:_}=Po;this.history.push({...y,timestamp:_});const{onStart:b,onMove:T}=this.handlers;f||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=q$(f,this.transformPagePoint),gi.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=K$(h.type==="pointercancel"?this.lastMoveEventInfo:q$(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,b),y&&y(h,b)},!jH(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=HI(e),a=q$(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Po;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,K$(a,this.history)),this.removeListeners=WI(UT(this.contextWindow,"pointermove",this.handlePointerMove),UT(this.contextWindow,"pointerup",this.handlePointerUp),UT(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Zg(this.updatePoint)}}function q$(t,e){return e?{point:e(t.point)}:t}function dse(t,e){return{x:t.x-e.x,y:t.y-e.y}}function K$({point:t},e){return{point:t,delta:dse(t,Uwe(e)),offset:dse(t,cat(e)),velocity:uat(e,.1)}}function cat(t){return t[0]}function Uwe(t){return t[t.length-1]}function uat(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Uwe(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>lp(e)));)n--;if(!r)return{x:0,y:0};const s=cp(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const Bwe=1e-4,hat=1-Bwe,dat=1+Bwe,Wwe=.01,fat=0-Wwe,pat=0+Wwe;function bc(t){return t.max-t.min}function mat(t,e,n){return Math.abs(t-e)<=n}function fse(t,e,n,r=.5){t.origin=r,t.originPoint=Fi(e.min,e.max,t.origin),t.scale=bc(n)/bc(e),t.translate=Fi(n.min,n.max,t.origin)-t.originPoint,(t.scale>=hat&&t.scale<=dat||isNaN(t.scale))&&(t.scale=1),(t.translate>=fat&&t.translate<=pat||isNaN(t.translate))&&(t.translate=0)}function BT(t,e,n,r){fse(t.x,e.x,n.x,r?r.originX:void 0),fse(t.y,e.y,n.y,r?r.originY:void 0)}function pse(t,e,n){t.min=n.min+e.min,t.max=t.min+bc(e)}function gat(t,e,n){pse(t.x,e.x,n.x),pse(t.y,e.y,n.y)}function mse(t,e,n){t.min=e.min-n.min,t.max=t.min+bc(e)}function WT(t,e,n){mse(t.x,e.x,n.x),mse(t.y,e.y,n.y)}function yat(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Fi(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Fi(n,t,r.max):Math.min(t,n)),t}function gse(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function vat(t,{top:e,left:n,bottom:r,right:i}){return{x:gse(t.x,n,i),y:gse(t.y,e,r)}}function yse(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function _at(t,e){return{x:yse(t.x,e.x),y:yse(t.y,e.y)}}function xat(t,e){let n=.5;const r=bc(t),i=bc(e);return i>r?n=z2(e.min,e.max-r,t.min):r>i&&(n=z2(t.min,t.max-i,e.min)),bp(0,1,n)}function wat(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const bz=.35;function bat(t=bz){return t===!1?t=0:t===!0&&(t=bz),{x:vse(t,"left","right"),y:vse(t,"top","bottom")}}function vse(t,e,n){return{min:_se(t,e),max:_se(t,n)}}function _se(t,e){return typeof t=="number"?t:t[e]||0}const xse=()=>({translate:0,scale:1,origin:0,originPoint:0}),zx=()=>({x:xse(),y:xse()}),wse=()=>({min:0,max:0}),ls=()=>({x:wse(),y:wse()});function Wc(t){return[t("x"),t("y")]}function Hwe({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Eat({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Sat(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Y$(t){return t===void 0||t===1}function Ez({scale:t,scaleX:e,scaleY:n}){return!Y$(t)||!Y$(e)||!Y$(n)}function wy(t){return Ez(t)||qwe(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function qwe(t){return bse(t.x)||bse(t.y)}function bse(t){return t&&t!=="0%"}function GN(t,e,n){const r=t-n,i=e*r;return n+i}function Ese(t,e,n,r,i){return i!==void 0&&(t=GN(t,i,r)),GN(t,n,r)+e}function Sz(t,e=0,n=1,r,i){t.min=Ese(t.min,e,n,r,i),t.max=Ese(t.max,e,n,r,i)}function Kwe(t,{x:e,y:n}){Sz(t.x,e.translate,e.scale,e.originPoint),Sz(t.y,n.translate,n.scale,n.originPoint)}const Sse=.999999999999,Tse=1.0000000000001;function Tat(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ux(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Kwe(t,o)),r&&wy(s.latestValues)&&Ux(t,s.latestValues))}e.x<Tse&&e.x>Sse&&(e.x=1),e.y<Tse&&e.y>Sse&&(e.y=1)}function Gx(t,e){t.min=t.min+e,t.max=t.max+e}function kse(t,e,n,r,i=.5){const s=Fi(t.min,t.max,i);Sz(t,e,n,s,r)}function Ux(t,e){kse(t.x,e.x,e.scaleX,e.scale,e.originX),kse(t.y,e.y,e.scaleY,e.scale,e.originY)}function Ywe(t,e){return Hwe(Sat(t.getBoundingClientRect(),e))}function kat(t,e,n){const r=Ywe(t,n),{scroll:i}=e;return i&&(Gx(r.x,i.offset.x),Gx(r.y,i.offset.y)),r}const Xwe=({current:t})=>t?t.ownerDocument.defaultView:null,Aat=new WeakMap;class Iat{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ls(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(HI(u).point)},s=(u,h)=>{const{drag:f,dragPropagation:g,onDragStart:y}=this.getProps();if(f&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xst(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Wc(b=>{let T=this.getAxisMotionValue(b).get()||0;if(Rd.test(T)){const{projection:A}=this.visualElement;if(A&&A.layout){const I=A.layout.layoutBox[b];I&&(T=bc(I)*(parseFloat(T)/100))}}this.originPoint[b]=T}),y&&gi.postRender(()=>y(u,h)),pz(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:y,onDrag:_}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:b}=h;if(g&&this.currentDirection===null){this.currentDirection=Pat(b),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),_&&_(u,h)},a=(u,h)=>this.stop(u,h),l=()=>Wc(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Gwe(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Xwe(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&gi.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!SR(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=yat(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Fx(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=vat(i.layoutBox,n):this.constraints=!1,this.elastic=bat(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Wc(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=wat(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Fx(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=kat(r,i.root,this.visualElement.getTransformPagePoint());let o=_at(i.layout.layoutBox,s);if(n){const a=n(Eat(o));this.hasMutatedConstraints=!!a,a&&(o=Hwe(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Wc(u=>{if(!SR(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=i?200:1e6,g=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return pz(this.visualElement,e),r.start(YH(e,r,0,n,this.visualElement,!1))}stopAnimation(){Wc(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Wc(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Wc(n=>{const{drag:r}=this.getProps();if(!SR(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Fi(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Fx(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Wc(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=xat({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Wc(o=>{if(!SR(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Fi(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;Aat.set(this.visualElement,this);const e=this.visualElement.current,n=UT(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Fx(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),gi.read(r);const o=xA(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Wc(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=bz,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function SR(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Pat(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Cat extends f0{constructor(e){super(e),this.removeGroupControls=yc,this.removeListeners=yc,this.controls=new Iat(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yc}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ase=t=>(e,n)=>{t&&gi.postRender(()=>t(e,n))};class Rat extends f0{constructor(){super(...arguments),this.removePointerDownListener=yc}onPointerDown(e){this.session=new Gwe(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Xwe(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Ase(e),onStart:Ase(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&gi.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=UT(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const k3={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ise(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const tS={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(gn.test(t))t=parseFloat(t);else return t;const n=Ise(t,e.target.x),r=Ise(t,e.target.y);return`${n}% ${r}%`}},Mat={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Jg.parse(t);if(i.length>5)return r;const s=Jg.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Fi(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class Nat extends Y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;Qit(Oat),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),k3.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||gi.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),SH.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Zwe(t){const[e,n]=Nxe(),r=Y.useContext(gH);return p.jsx(Nat,{...t,layoutGroup:r,switchLayoutGroup:Y.useContext(zxe),isPresent:e,safeToRemove:n})}const Oat={borderRadius:{...tS,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:tS,borderTopRightRadius:tS,borderBottomLeftRadius:tS,borderBottomRightRadius:tS,boxShadow:Mat};function Lat(t,e,n){const r=fa(t)?t:vA(t);return r.start(YH("",r,e,n)),r.animation}function Dat(t){return t instanceof SVGElement&&t.tagName!=="svg"}const jat=(t,e)=>t.depth-e.depth;class $at{constructor(){this.children=[],this.isDirty=!1}add(e){$H(this.children,e),this.isDirty=!0}remove(e){FH(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(jat),this.isDirty=!1,this.children.forEach(e)}}function Fat(t,e){const n=Md.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Zg(r),t(s-e))};return gi.read(r,!0),()=>Zg(r)}const Jwe=["TopLeft","TopRight","BottomLeft","BottomRight"],Vat=Jwe.length,Pse=t=>typeof t=="string"?parseFloat(t):t,Cse=t=>typeof t=="number"||gn.test(t);function zat(t,e,n,r,i,s){i?(t.opacity=Fi(0,n.opacity!==void 0?n.opacity:1,Gat(r)),t.opacityExit=Fi(e.opacity!==void 0?e.opacity:1,0,Uat(r))):s&&(t.opacity=Fi(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Vat;o++){const a=`border${Jwe[o]}Radius`;let l=Rse(e,a),c=Rse(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Cse(l)===Cse(c)?(t[a]=Math.max(Fi(Pse(l),Pse(c),r),0),(Rd.test(c)||Rd.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Fi(e.rotate||0,n.rotate||0,r))}function Rse(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Gat=Qwe(0,.5,ywe),Uat=Qwe(.5,.95,yc);function Qwe(t,e,n){return r=>r<t?0:r>e?1:n(z2(t,e,r))}function Mse(t,e){t.min=e.min,t.max=e.max}function jc(t,e){Mse(t.x,e.x),Mse(t.y,e.y)}function Nse(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Ose(t,e,n,r,i){return t-=e,t=GN(t,1/n,r),i!==void 0&&(t=GN(t,1/i,r)),t}function Bat(t,e=0,n=1,r=.5,i,s=t,o=t){if(Rd.test(e)&&(e=parseFloat(e),e=Fi(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Fi(s.min,s.max,r);t===s&&(a-=e),t.min=Ose(t.min,e,n,a,i),t.max=Ose(t.max,e,n,a,i)}function Lse(t,e,[n,r,i],s,o){Bat(t,e[n],e[r],e[i],e.scale,s,o)}const Wat=["x","scaleX","originX"],Hat=["y","scaleY","originY"];function Dse(t,e,n,r){Lse(t.x,e,Wat,n?n.x:void 0,r?r.x:void 0),Lse(t.y,e,Hat,n?n.y:void 0,r?r.y:void 0)}function jse(t){return t.translate===0&&t.scale===1}function e2e(t){return jse(t.x)&&jse(t.y)}function $se(t,e){return t.min===e.min&&t.max===e.max}function qat(t,e){return $se(t.x,e.x)&&$se(t.y,e.y)}function Fse(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function t2e(t,e){return Fse(t.x,e.x)&&Fse(t.y,e.y)}function Vse(t){return bc(t.x)/bc(t.y)}function zse(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Kat{constructor(){this.members=[]}add(e){$H(this.members,e),e.scheduleRender()}remove(e){if(FH(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Yat(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:f,skewX:g,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),g&&(r+=`skewX(${g}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const by={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},YS=typeof window<"u"&&window.MotionDebug!==void 0,X$=["","X","Y","Z"],Xat={visibility:"hidden"},Gse=1e3;let Zat=0;function Z$(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function n2e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=uwe(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",gi,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&n2e(r)}function r2e({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e?.()){this.id=Zat++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,YS&&(by.totalNodes=by.resolvedTargetDeltas=by.recalculatedProjection=0),this.nodes.forEach(elt),this.nodes.forEach(slt),this.nodes.forEach(olt),this.nodes.forEach(tlt),YS&&window.MotionDebug.record(by)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new $at)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new VH),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Dat(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Fat(f,250),k3.hasAnimatedSinceResize&&(k3.hasAnimatedSinceResize=!1,this.nodes.forEach(Bse))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||hlt,{onLayoutAnimationStart:b,onLayoutAnimationComplete:T}=u.getProps(),A=!this.targetLayout||!t2e(this.targetLayout,y)||g,I=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||I||f&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,I);const P={...OH(_,"layout"),onPlay:b,onComplete:T};(u.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else f||Bse(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Zg(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(alt),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&n2e(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Use);return}this.isUpdating||this.nodes.forEach(rlt),this.isUpdating=!1,this.nodes.forEach(ilt),this.nodes.forEach(Jat),this.nodes.forEach(Qat),this.clearAllSnapshots();const a=Md.now();Po.delta=bp(0,1e3/60,a-Po.timestamp),Po.timestamp=a,Po.isProcessing=!0,z$.update.process(Po),z$.preRender.process(Po),z$.render.process(Po),Po.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,SH.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nlt),this.sharedNodes.forEach(llt)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ls(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!e2e(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||wy(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),dlt(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return ls();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(flt))){const{scroll:u}=this.root;u&&(Gx(l.x,u.offset.x),Gx(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=ls();if(jc(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&jc(l,o),Gx(l.x,h.offset.x),Gx(l.y,h.offset.y))}return l}applyTransform(o,a=!1){const l=ls();jc(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Ux(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),wy(u.latestValues)&&Ux(l,u.latestValues)}return wy(this.latestValues)&&Ux(l,this.latestValues),l}removeTransform(o){const a=ls();jc(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!wy(c.latestValues))continue;Ez(c.latestValues)&&c.updateSnapshot();const u=ls(),h=c.measurePageBox();jc(u,h),Dse(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return wy(this.latestValues)&&Dse(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Po.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Po.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ls(),this.relativeTargetOrigin=ls(),WT(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),jc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ls(),this.targetWithTransforms=ls()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),gat(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):jc(this.target,this.layout.layoutBox),Kwe(this.target,this.targetDelta)):jc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ls(),this.relativeTargetOrigin=ls(),WT(this.relativeTargetOrigin,this.target,g.target),jc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}YS&&by.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ez(this.parent.latestValues)||qwe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Po.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;jc(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;Tat(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ls());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Nse(this.prevProjectionDelta.x,this.projectionDelta.x),Nse(this.prevProjectionDelta.y,this.projectionDelta.y)),BT(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==g||!zse(this.projectionDelta.x,this.prevProjectionDelta.x)||!zse(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),YS&&by.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=zx(),this.projectionDelta=zx(),this.projectionDeltaWithTransform=zx()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=zx();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=ls(),g=l?l.source:void 0,y=this.layout?this.layout.source:void 0,_=g!==y,b=this.getStack(),T=!b||b.members.length<=1,A=!!(_&&!T&&this.options.crossfade===!0&&!this.path.some(ult));this.animationProgress=0;let I;this.mixTargetDelta=P=>{const N=P/1e3;Wse(h.x,o.x,N),Wse(h.y,o.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(WT(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),clt(this.relativeTarget,this.relativeTargetOrigin,f,N),I&&qat(this.relativeTarget,I)&&(this.isProjectionDirty=!1),I||(I=ls()),jc(I,this.relativeTarget)),_&&(this.animationValues=u,zat(u,c,this.latestValues,N,A,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Zg(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gi.update(()=>{k3.hasAnimatedSinceResize=!0,this.currentAnimation=Lat(0,Gse,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Gse),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&i2e(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ls();const h=bc(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=bc(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}jc(a,l),Ux(a,u),BT(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Kat),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Z$("z",o,c,this.animationValues);for(let u=0;u<X$.length;u++)Z$(`rotate${X$[u]}`,o,c,this.animationValues),Z$(`skew${X$[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Xat;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=S3(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=S3(o?.pointerEvents)||""),this.hasProjected&&!wy(this.latestValues)&&(_.transform=u?u({},""):"none",this.hasProjected=!1),_}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=Yat(this.projectionDeltaWithTransform,this.treeScale,f),u&&(c.transform=u(f,c.transform));const{x:g,y}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const _ in jN){if(f[_]===void 0)continue;const{correct:b,applyTo:T}=jN[_],A=c.transform==="none"?f[_]:b(f[_],h);if(T){const I=T.length;for(let P=0;P<I;P++)c[T[P]]=A}else c[_]=A}return this.options.layoutId&&(c.pointerEvents=h===this?S3(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Use),this.root.sharedNodes.clear()}}}function Jat(t){t.updateLayout()}function Qat(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Wc(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],g=bc(f);f.min=r[h].min,f.max=f.min+g}):i2e(s,n.layoutBox,r)&&Wc(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],g=bc(r[h]);f.max=f.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const a=zx();BT(a,r,n.layoutBox);const l=zx();o?BT(l,t.applyTransform(i,!0),n.measuredBox):BT(l,r,n.layoutBox);const c=!e2e(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:g}=h;if(f&&g){const y=ls();WT(y,n.layoutBox,f.layoutBox);const _=ls();WT(_,r,g.layoutBox),t2e(y,_)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function elt(t){YS&&by.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function tlt(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function nlt(t){t.clearSnapshot()}function Use(t){t.clearMeasurements()}function rlt(t){t.isLayoutDirty=!1}function ilt(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Bse(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function slt(t){t.resolveTargetDelta()}function olt(t){t.calcProjection()}function alt(t){t.resetSkewAndRotation()}function llt(t){t.removeLeadSnapshot()}function Wse(t,e,n){t.translate=Fi(e.translate,0,n),t.scale=Fi(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Hse(t,e,n,r){t.min=Fi(e.min,n.min,r),t.max=Fi(e.max,n.max,r)}function clt(t,e,n,r){Hse(t.x,e.x,n.x,r),Hse(t.y,e.y,n.y,r)}function ult(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const hlt={duration:.45,ease:[.4,0,.1,1]},qse=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Kse=qse("applewebkit/")&&!qse("chrome/")?Math.round:yc;function Yse(t){t.min=Kse(t.min),t.max=Kse(t.max)}function dlt(t){Yse(t.x),Yse(t.y)}function i2e(t,e,n){return t==="position"||t==="preserve-aspect"&&!mat(Vse(e),Vse(n),.2)}function flt(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const plt=r2e({attachResizeListener:(t,e)=>xA(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),J$={current:void 0},s2e=r2e({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!J$.current){const t=new plt({});t.mount(window),t.setOptions({layoutScroll:!0}),J$.current=t}return J$.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),mlt={pan:{Feature:Rat},drag:{Feature:Cat,ProjectionNode:s2e,MeasureLayout:Zwe}};function Xse(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&gi.postRender(()=>s(e,HI(e)))}class glt extends f0{mount(){const{current:e}=this.node;e&&(this.unmount=mst(e,n=>(Xse(this.node,n,"Start"),r=>Xse(this.node,r,"End"))))}unmount(){}}class ylt extends f0{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=WI(xA(this.node.current,"focus",()=>this.onFocus()),xA(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Zse(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&gi.postRender(()=>s(e,HI(e)))}class vlt extends f0{mount(){const{current:e}=this.node;e&&(this.unmount=_st(e,n=>(Zse(this.node,n,"Start"),(r,{success:i})=>Zse(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Tz=new WeakMap,Q$=new WeakMap,_lt=t=>{const e=Tz.get(t.target);e&&e(t)},xlt=t=>{t.forEach(_lt)};function wlt({root:t,...e}){const n=t||document;Q$.has(n)||Q$.set(n,{});const r=Q$.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(xlt,{root:t,...e})),r[i]}function blt(t,e,n){const r=wlt(e);return Tz.set(t,n),r.observe(t),()=>{Tz.delete(t),r.unobserve(t)}}const Elt={some:0,all:1};class Slt extends f0{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Elt[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return blt(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Tlt(e,n))&&this.startObserver()}unmount(){}}function Tlt({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const klt={inView:{Feature:Slt},tap:{Feature:vlt},focus:{Feature:ylt},hover:{Feature:glt}},Alt={layout:{ProjectionNode:s2e,MeasureLayout:Zwe}},kz={current:null},o2e={current:!1};function Ilt(){if(o2e.current=!0,!!_H)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>kz.current=t.matches;t.addListener(e),e()}else kz.current=!1}const Plt=[...Rwe,ea,Jg],Clt=t=>Plt.find(Cwe(t)),Jse=new WeakMap;function Rlt(t,e,n){for(const r in e){const i=e[r],s=n[r];if(fa(i))t.addValue(r,i);else if(fa(s))t.addValue(r,vA(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,vA(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Qse=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Mlt{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=HH,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Md.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,gi.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=AL(n),this.isVariantNode=Fxe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in f){const y=f[g];l[g]!==void 0&&fa(y)&&y.set(l[g],!1)}}mount(e){this.current=e,Jse.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),o2e.current||Ilt(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:kz.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Jse.delete(this.current),this.projection&&this.projection.unmount(),Zg(this.notifyUpdate),Zg(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ev.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&gi.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in G2){const n=G2[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ls()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Qse.length;r++){const i=Qse[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Rlt(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=vA(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Iwe(i)||_we(i))?i=parseFloat(i):!Clt(i)&&Jg.test(n)&&(i=Twe(e,n)),this.setBaseTarget(e,fa(i)?i.get():i)),fa(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=kH(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!fa(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new VH),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class a2e extends Mlt{constructor(){super(...arguments),this.KeyframeResolver=Mwe}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;fa(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Nlt(t){return window.getComputedStyle(t)}class Olt extends a2e{constructor(){super(...arguments),this.type="html",this.renderInstance=Kxe}readValueFromInstance(e,n){if(Ev.has(n)){const r=WH(n);return r&&r.default||0}else{const r=Nlt(e),i=(Wxe(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Ywe(e,n)}build(e,n,r){PH(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return NH(e,n,r)}}class Llt extends a2e{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ls}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ev.has(n)){const r=WH(n);return r&&r.default||0}return n=Yxe.has(n)?n:EH(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Jxe(e,n,r)}build(e,n,r){CH(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){Xxe(e,n,r,i)}mount(e){this.isSVGTag=MH(e.tagName),super.mount(e)}}const Dlt=(t,e)=>TH(t)?new Llt(e):new Olt(e,{allowProjection:t!==Y.Fragment}),jlt=lst({...oat,...klt,...mlt,...Alt},Dlt),gt=Eit(jlt);const $lt=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Flt=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),eoe=t=>{const e=Flt(t);return e.charAt(0).toUpperCase()+e.slice(1)},l2e=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Vlt=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var zlt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Glt=Y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>Y.createElement("svg",{ref:l,...zlt,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:l2e("lucide",i),...!s&&!Vlt(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,u])=>Y.createElement(c,u)),...Array.isArray(s)?s:[s]]));const rt=(t,e)=>{const n=Y.forwardRef(({className:r,...i},s)=>Y.createElement(Glt,{ref:s,iconNode:e,className:l2e(`lucide-${$lt(eoe(t))}`,`lucide-${t}`,r),...i}));return n.displayName=eoe(t),n};const Ult=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],Blt=rt("archive-restore",Ult);const Wlt=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],c2e=rt("archive",Wlt);const Hlt=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],qlt=rt("ban",Hlt);const Klt=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],u2e=rt("book-open",Klt);const Ylt=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],h2e=rt("bug",Ylt);const Xlt=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],XH=rt("calendar",Xlt);const Zlt=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],CL=rt("camera",Zlt);const Jlt=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],d2e=rt("chart-column",Jlt);const Qlt=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ep=rt("check",Qlt);const ect=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ib=rt("chevron-down",ect);const tct=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],f2e=rt("chevron-left",tct);const nct=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_d=rt("chevron-right",nct);const rct=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],RL=rt("chevron-up",rct);const ict=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],p2e=rt("circle-alert",ict);const sct=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],oct=rt("circle-check-big",sct);const act=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],UN=rt("clock",act);const lct=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 17H7",key:"pygtm1"}],["path",{d:"M17 21H9",key:"1u2q02"}]],cct=rt("cloud-fog",lct);const uct=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],hct=rt("cloud-lightning",uct);const dct=[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]],fct=rt("cloud-off",dct);const pct=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],ZH=rt("cloud-rain",pct);const mct=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M8 19h.01",key:"puxtts"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M12 21h.01",key:"h35vbk"}],["path",{d:"M16 15h.01",key:"rnfrdf"}],["path",{d:"M16 19h.01",key:"1vcnzz"}]],gct=rt("cloud-snow",mct);const yct=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],zd=rt("cloud",yct);const vct=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],_ct=rt("code",vct);const xct=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],JH=rt("compass",xct);const wct=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],BN=rt("crosshair",wct);const bct=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],wA=rt("download",bct);const Ect=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],Sct=rt("droplets",Ect);const Tct=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Cg=rt("external-link",Tct);const kct=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],WN=rt("eye-off",kct);const Act=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bA=rt("eye",Act);const Ict=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],toe=rt("file-image",Ict);const Pct=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],QH=rt("file-text",Pct);const Cct=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Rct=rt("flame",Cct);const Mct=[["path",{d:"M12 5a3 3 0 1 1 3 3m-3-3a3 3 0 1 0-3 3m3-3v1M9 8a3 3 0 1 0 3 3M9 8h1m5 0a3 3 0 1 1-3 3m3-3h-1m-2 3v-1",key:"3pnvol"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M12 10v12",key:"6ubwww"}],["path",{d:"M12 22c4.2 0 7-1.667 7-5-4.2 0-7 1.667-7 5Z",key:"9hd38g"}],["path",{d:"M12 22c-4.2 0-7-1.667-7-5 4.2 0 7 1.667 7 5Z",key:"ufn41s"}]],noe=rt("flower-2",Mct);const Nct=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Oct=rt("folder-open",Nct);const Lct=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Dct=rt("folder-plus",Lct);const jct=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],$ct=rt("folder",jct);const Fct=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],eq=rt("funnel",Fct);const Vct=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],zct=rt("gauge",Vct);const Gct=[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]],Uct=rt("gem",Gct);const Bct=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Wct=rt("globe",Bct);const Hct=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],m2e=rt("grid-3x3",Hct);const qct=[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]],g2e=rt("grip-horizontal",qct);const Kct=[["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}],["path",{d:"M21 11.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7.5",key:"1ue2ih"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]],Yct=rt("image-plus",Kct);const Xct=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],tq=rt("info",Xct);const Zct=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],y2e=rt("landmark",Zct);const Jct=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Ga=rt("layers",Jct);const Qct=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],v2e=rt("list",Qct);const eut=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],qI=rt("loader-circle",eut);const tut=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nut=rt("locate-fixed",tut);const rut=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Az=rt("lock",rut);const iut=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],nq=rt("log-out",iut);const sut=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ka=rt("map-pin",sut);const out=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],B2=rt("map",out);const aut=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],HN=rt("menu",aut);const lut=[["path",{d:"M5 12h14",key:"1ays0h"}]],_2e=rt("minus",lut);const cut=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],W2=rt("mountain",cut);const uut=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],hut=rt("mouse-pointer",uut);const dut=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],fut=rt("move",dut);const put=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],nh=rt("navigation",put);const mut=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],x2e=rt("pause",mut);const gut=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],roe=rt("pen-line",gut);const yut=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],vut=rt("pen",yut);const _ut=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Sp=rt("pencil",_ut);const xut=[["path",{d:"M10.83 2.38a2 2 0 0 1 2.34 0l8 5.74a2 2 0 0 1 .73 2.25l-3.04 9.26a2 2 0 0 1-1.9 1.37H7.04a2 2 0 0 1-1.9-1.37L2.1 10.37a2 2 0 0 1 .73-2.25z",key:"2hea0t"}]],wut=rt("pentagon",xut);const but=[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["path",{d:"m9 20 3-6 3 6",key:"se2kox"}],["path",{d:"m6 8 6 2 6-2",key:"4o3us4"}],["path",{d:"M12 10v4",key:"1kjpxc"}]],w2e=rt("person-standing",but);const Eut=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],b2e=rt("play",Eut);const Sut=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ec=rt("plus",Sut);const Tut=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],qN=rt("printer",Tut);const kut=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Aut=rt("refresh-cw",kut);const Iut=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],E2e=rt("rotate-ccw",Iut);const Put=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Cut=rt("rotate-cw",Put);const Rut=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],KN=rt("route",Rut);const Mut=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],up=rt("ruler",Mut);const Nut=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],rq=rt("save",Nut);const Out=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Lut=rt("scale",Out);const Dut=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ev=rt("search",Dut);const jut=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],YN=rt("settings",jut);const $ut=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Fut=rt("settings-2",$ut);const Vut=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],zut=rt("share-2",Vut);const Gut=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Uut=rt("shield",Gut);const But=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],S2e=rt("sliders-horizontal",But);const Wut=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],Hut=rt("sliders-vertical",Wut);const qut=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Kut=rt("smartphone",qut);const Yut=[["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M5 17A12 12 0 0 1 17 5",key:"1okkup"}]],Xut=rt("spline",Yut);const Zut=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Jut=rt("square",Zut);const Qut=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ioe=rt("star",Qut);const eht=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],tht=rt("sun",eht);const nht=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],rht=rt("tag",nht);const iht=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],sht=rt("target",iht);const oht=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],aht=rt("timer",oht);const lht=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Th=rt("trash-2",lht);const cht=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],uht=rt("tree-palm",cht);const hht=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],dht=rt("trending-down",hht);const fht=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],pht=rt("trending-up",fht);const mht=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],iq=rt("type",mht);const ght=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],KI=rt("upload",ght);const yht=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],sq=rt("user",yht);const vht=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],_ht=rt("volume-2",vht);const xht=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],wht=rt("waves",xht);const bht=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Eht=rt("wifi-off",bht);const Sht=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],soe=rt("wind",Sht);const Tht=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kr=rt("x",Tht);const kht=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Aht=rt("zoom-in",kht);function Iht(){const{tracking:t,startTracking:e,stopTracking:n,updatePosition:r,setWatchId:i}=ks(),s=Y.useCallback(a=>{r(a)},[r]),o=Y.useCallback(a=>{console.error("GPS error:",a),alert(`GPS fout: ${a.message}`),n()},[n]);return Y.useEffect(()=>{if(!t)return;if(!navigator.geolocation){alert("Geolocation wordt niet ondersteund door deze browser"),n();return}const a=navigator.geolocation.watchPosition(s,o,{enableHighAccuracy:!0,maximumAge:1e3,timeout:15e3});return i(a),()=>{navigator.geolocation.clearWatch(a)}},[t,s,o,i,n]),{tracking:t,start:e,stop:n,toggle:()=>t?n():e()}}async function Pht(){const t=DeviceOrientationEvent;if(typeof t.requestPermission=="function")try{return await t.requestPermission()==="granted"}catch{return!1}return!0}function Cht(){const{tracking:t,start:e,stop:n}=Iht(),r=ks(a=>a.navigationMode),i=ks(a=>a.setNavigationMode),s=t&&r==="headingUp",o=async()=>{t?r==="free"?i("headingUp"):n():(await Pht(),e(),i("free"))};return p.jsx(gt.button,{className:`
        fixed bottom-2 right-[52px] z-[1000]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${s?"bg-gradient-to-br from-green-400 to-green-600 text-white shadow-lg shadow-green-500/30":t?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,onClick:o,whileHover:{scale:1.05},whileTap:{scale:.95},animate:t?{scale:[1,1.02,1]}:{},transition:t?{scale:{duration:2,repeat:1/0,ease:"easeInOut"}}:{},"aria-label":s?"Rijmodus actief (kaart draait mee)":t?"GPS actief - klik voor rijmodus":"GPS starten",title:s?"Rijmodus actief - klik om GPS te stoppen":t?"GPS actief - klik voor rijmodus":"GPS starten",children:s?p.jsx(nh,{size:22,strokeWidth:2}):p.jsx(nut,{size:22,strokeWidth:2})})}const Rht="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">
    <polygon points="24,6 38,38 24,30 10,38" fill="#4285F4" stroke="white" stroke-width="3" stroke-linejoin="round"/>
  </svg>`),ooe=new vn({image:new ms({radius:7,fill:new Dn({color:"#4285F4"}),stroke:new Pn({color:"white",width:2.5})})});function Mht(){const t=li(y=>y.map),e=ks(y=>y.position),n=ks(y=>y.accuracy),r=ks(y=>y.tracking),i=ks(y=>y.smoothHeading),s=ks(y=>y.navigationMode),o=Cn(y=>y.showAccuracyCircle),a=ks(y=>y.firstFix),l=ks(y=>y.resetFirstFix),c=ks(y=>y.config.centerOnUser),u=Y.useRef(null),h=Y.useRef(null),f=Y.useRef(null),g=Y.useMemo(()=>y=>new vn({image:new qA({src:Rht,scale:.9,rotation:y,rotateWithView:!0,anchor:[.5,.5]})}),[]);return Y.useEffect(()=>{if(!t||!e)return;const y=Ni([e.lng,e.lat]);return u.current=new yr({geometry:new Ti(y)}),u.current.setStyle(r?g(0):ooe),h.current=new yr({geometry:new Ti(y)}),f.current=new Ol({source:new Nl({features:[h.current,u.current]}),zIndex:1e3}),t.addLayer(f.current),()=>{f.current&&t&&t.removeLayer(f.current)}},[t,!!e,g]),Y.useEffect(()=>{if(u.current)if(r){const y=i!==null?i*Math.PI/180:0;u.current.setStyle(g(y))}else u.current.setStyle(ooe)},[r,g,i]),Y.useEffect(()=>{if(!t||!e||!u.current||!h.current)return;const y=Ni([e.lng,e.lat]);if(u.current.getGeometry()?.setCoordinates(y),h.current.getGeometry()?.setCoordinates(y),r&&o&&n){const _=t.getView().getResolution()||1,b=Math.min(n/_,80);h.current.setStyle(new vn({image:new ms({radius:b,fill:new Dn({color:"rgba(66, 133, 244, 0.12)"})})}))}else h.current.setStyle(new vn({}));if(a&&r){t.getView().setCenter(y),t.getView().setZoom(17),l();return}r&&c&&!a&&t.getView().animate({center:y,duration:150})},[t,r,e,n,a,l,c,o]),Y.useEffect(()=>{if(!u.current||!r)return;const y=i!==null?i*Math.PI/180:0;u.current.setStyle(g(y))},[i,g,r]),Y.useEffect(()=>{if(!(!t||!r)&&s==="headingUp"&&i!==null){const y=-(i*Math.PI)/180,_=t.getView(),b=_.getRotation();let T=y-b;for(;T>Math.PI;)T-=2*Math.PI;for(;T<-Math.PI;)T+=2*Math.PI;Math.abs(T)>.01&&_.animate({rotation:b+T,duration:200})}},[t,r,s,i]),Y.useEffect(()=>{if(t&&s==="free"){const y=t.getView(),_=y.getRotation();Math.abs(_)>.01&&y.animate({rotation:0,duration:300})}},[t,s]),null}function Nht(){const t=gr(o=>o.themesPanelOpen),e=gr(o=>o.toggleThemesPanel),n=li(o=>o.map),[r,i]=Y.useState(!1);Y.useEffect(()=>{if(!n)return;const o=n.getView(),a=()=>{const l=o.getRotation();i(Math.abs(l)>.087)};return a(),o.on("change:rotation",a),()=>{o.un("change:rotation",a)}},[n]);const s=r?"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)) + 112px)":"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)) + 52px)";return p.jsx(gt.button,{className:`
        fixed right-2 z-[800]
        w-11 h-11 cursor-pointer border-0 outline-none
        flex items-center justify-center
        rounded-xl backdrop-blur-sm
        transition-all duration-200
        ${t?"bg-gradient-to-br from-blue-400 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-white/80 text-gray-500 hover:bg-white/90 shadow-sm"}
      `,style:{top:s},animate:{top:s},transition:{duration:.2},onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":t?"Kaartlagen sluiten":"Kaartlagen openen",title:"Kaartlagen",children:p.jsx(B2,{size:22,strokeWidth:2})})}function Oht(){return p.jsx(Nht,{})}const TR=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"],Bm=["Mineraal","Fossiel","Erfgoed","Monument","Overig"],Qc="default-vondsten",Iz={id:Qc,name:"Mijn vondsten",color:"#f97316",categories:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"],points:[],visible:!0,archived:!1,createdAt:new Date().toISOString()},Lht=t=>t.some(n=>n.id===Qc)?t:[{...Iz,createdAt:new Date().toISOString()},...t],ps=yo()(Sh((t,e)=>({layers:[{...Iz}],colorIndex:0,addLayer:(n,r=Bm)=>{const i=crypto.randomUUID(),s=TR[e().colorIndex%TR.length];return t(o=>({layers:[...o.layers,{id:i,name:n,color:s,categories:[...r],points:[],visible:!0,archived:!1,createdAt:new Date().toISOString()}],colorIndex:o.colorIndex+1})),i},removeLayer:n=>{t(r=>({layers:r.layers.filter(i=>i.id!==n)}))},updateLayer:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n?{...s,...r}:s)}))},toggleVisibility:n=>{t(r=>({layers:r.layers.map(i=>i.id===n?{...i,visible:!i.visible}:i)}))},toggleArchived:n=>{t(r=>({layers:r.layers.map(i=>i.id===n?{...i,archived:!i.archived,visible:i.archived?i.visible:!1}:i)}))},addPoint:(n,r)=>{const i={...r,status:r.status||"todo",id:crypto.randomUUID(),createdAt:new Date().toISOString()};t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:[...o.points,i]}:o)}))},removePoint:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n?{...s,points:s.points.filter(o=>o.id!==r)}:s)}))},updatePoint:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,...i}:a)}:o)}))},setPointStatus:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,status:i}:a)}:o)}))},addCategory:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n&&!s.categories.includes(r)?{...s,categories:[...s.categories,r]}:s)}))},removeCategory:(n,r)=>{t(i=>({layers:i.layers.map(s=>s.id===n?{...s,categories:s.categories.filter(o=>o!==r)}:s)}))},addPhotoToPoint:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,photos:[...a.photos||[],i]}:a)}:o)}))},removePhotoFromPoint:(n,r,i)=>{t(s=>({layers:s.layers.map(o=>o.id===n?{...o,points:o.points.map(a=>a.id===r?{...a,photos:(a.photos||[]).filter(l=>l.id!==i)}:a)}:o)}))},updatePhotoInPoint:(n,r,i,s)=>{t(o=>({layers:o.layers.map(a=>a.id===n?{...a,points:a.points.map(l=>l.id===r?{...l,photos:(l.photos||[]).map(c=>c.id===i?{...c,...s}:c)}:l)}:a)}))},exportLayerAsGeoJSON:n=>{const r=e().layers.find(l=>l.id===n);if(!r)return;const i={type:"FeatureCollection",properties:{name:r.name,color:r.color,categories:r.categories,createdAt:r.createdAt,exportedAt:new Date().toISOString()},features:r.points.map(l=>({type:"Feature",geometry:{type:"Point",coordinates:l.coordinates},properties:{id:l.id,name:l.name,category:l.category,notes:l.notes,url:l.url,status:l.status,sourceLayer:l.sourceLayer,sourceId:l.sourceId,photos:l.photos,createdAt:l.createdAt}}))},s=new Blob([JSON.stringify(i,null,2)],{type:"application/geo+json"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=`${r.name.replace(/[^a-zA-Z0-9]/g,"-")}-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)},importLayerFromGeoJSON:n=>{try{const r=JSON.parse(n);if(r.type!=="FeatureCollection")return{success:!1,error:"Ongeldig GeoJSON formaat"};const i=r.properties||{},s=i.name||`Gemporteerd ${new Date().toLocaleDateString("nl-NL")}`,o=i.categories||Bm,a=i.color||TR[e().colorIndex%TR.length],l=(r.features||[]).filter(u=>u.geometry?.type==="Point").map(u=>({id:u.properties?.id||crypto.randomUUID(),name:u.properties?.name||"Naamloos",category:u.properties?.category||"Overig",notes:u.properties?.notes||"",url:u.properties?.url,status:u.properties?.status||"todo",sourceLayer:u.properties?.sourceLayer,sourceId:u.properties?.sourceId,photos:u.properties?.photos,coordinates:u.geometry.coordinates,createdAt:u.properties?.createdAt||new Date().toISOString()})),c=crypto.randomUUID();return t(u=>({layers:[...u.layers,{id:c,name:s,color:a,categories:o,points:l,visible:!0,archived:!1,createdAt:new Date().toISOString()}],colorIndex:u.colorIndex+1})),{success:!0,layerId:c}}catch{return{success:!1,error:"Fout bij parsen van GeoJSON"}}},getLayer:n=>e().layers.find(r=>r.id===n),getActiveLayerCount:()=>e().layers.filter(n=>!n.archived).length,getArchivedLayerCount:()=>e().layers.filter(n=>n.archived).length,clearAll:()=>{t(n=>({layers:n.layers.map(r=>r.id===Qc?{...r,points:[]}:r).filter(r=>r.id===Qc),colorIndex:0}))}}),{name:"detectorapp-custom-point-layers",version:3,onRehydrateStorage:()=>t=>{t&&(t.layers.some(n=>n.id===Qc)||(t.layers=[{...Iz,createdAt:new Date().toISOString()},...t.layers]))},migrate:(t,e)=>{const n=t;return e<2?{...n,layers:Lht(n.layers||[])}:e<3?{...n,layers:(n.layers||[]).map(r=>r.id===Qc?{...r,name:"Mijn vondsten"}:r)}:n}}));function Fs({title:t,children:e,defaultExpanded:n=!0,layerNames:r}){const[i,s]=Y.useState(n),o=Bs(b=>b.visible),a=Bs(b=>b.setLayerVisibility),l=sB(b=>b.isLayerUnlocked),c=b=>{const T=$y[b],A=T?.tier??"free",I=T?.regions??["nl"];return l(b,A,I)},u=r?.filter(b=>c(b))||[],h=u.filter(b=>o[b]).length,f=u.length,g=f>0&&h===f,y=h>0&&h<f,_=b=>{if(b.stopPropagation(),!r||u.length===0)return;const T=!g;u.forEach(A=>{a(A,T)})};return p.jsxs("div",{className:"mb-0.5",children:[p.jsxs("div",{className:"flex items-center gap-1 py-1 px-1 hover:bg-blue-50 transition-colors",children:[p.jsxs("button",{onClick:b=>{b.stopPropagation(),s(!i)},className:"flex-1 flex items-center gap-1 bg-transparent border-0 outline-none text-left",style:{fontSize:"inherit"},children:[p.jsx(gt.span,{animate:{rotate:i?90:0},transition:{duration:.15},className:"text-gray-400",children:p.jsx(_d,{size:14})}),i?p.jsx(Oct,{size:16,className:"text-blue-500"}):p.jsx($ct,{size:16,className:"text-blue-500"}),p.jsx("span",{className:"text-gray-700 font-medium",style:{fontSize:"1em"},children:t}),h>0&&p.jsx("span",{className:"ml-1 px-1.5 py-0.5 font-medium bg-blue-100 text-blue-600 rounded-full",style:{fontSize:"0.7em"},children:h})]}),r&&r.length>0&&p.jsx("button",{onClick:_,className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:g?"#3b82f6":y?"#93c5fd":"white",border:g?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:(g||y)&&p.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:p.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),p.jsx(Wn,{initial:!1,children:i&&p.jsx(gt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.15},style:{overflow:"hidden"},className:"ml-5",children:e})})]})}function St({name:t,type:e,hasOverlay:n,displayName:r}){const i=Bs(P=>P.visible[t]),s=Bs(P=>P.visible["Labels Overlay"]),o=Bs(P=>P.loadingState[t]),a=Bs(P=>P.toggleLayer),l=Bs(P=>P.setLayerVisibility),c=sB(P=>P.isLayerUnlocked),u=o==="loading",h=o==="error",f=$y[t],g=f?.tier??"free",y=f?.regions??["nl"],b=!c(t,g,y),T=P=>{P.stopPropagation(),!(u||b)&&(e==="overlay"?a(t):["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"].forEach(L=>{l(L,L===t)}))},A=P=>{P.stopPropagation(),l("Labels Overlay",!s)},I=i??!1;return p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("button",{onClick:T,disabled:u||b,className:`flex-1 flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${b?"opacity-50 cursor-not-allowed bg-gray-50":u?"opacity-70 cursor-wait bg-transparent":I?"bg-blue-50 hover:bg-blue-100":"bg-transparent hover:bg-blue-50"}`,style:{fontSize:"inherit"},title:b?"Premium laag - upgrade om te ontgrendelen":void 0,children:[p.jsxs("span",{className:`flex items-center gap-1 ${h?"text-red-500":b?"text-gray-400":"text-gray-600"}`,children:[r||t,h&&p.jsx(p2e,{size:12,className:"text-red-500"}),b&&p.jsx(Az,{size:12,className:"text-amber-500"})]}),p.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:b?"#e5e7eb":u?"#93c5fd":I?"#3b82f6":"white",border:b?"2px solid #d1d5db":u?"2px solid #93c5fd":I?"2px solid #3b82f6":"2px solid #60a5fa",color:"white"},children:b?p.jsx(Az,{size:10,strokeWidth:3,className:"text-gray-400"}):u?p.jsx(qI,{size:10,strokeWidth:3,className:"animate-spin"}):I?p.jsx(Ep,{size:12,strokeWidth:3}):null})]}),n&&I&&p.jsx("button",{onClick:A,className:`p-1 rounded transition-colors border-0 outline-none ${s?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400 hover:bg-gray-200"}`,title:s?"Labels verbergen":"Labels tonen",children:p.jsx(rht,{size:12})})]})}const Dht=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899","#6b7280"];function T2e({layer:t,compact:e=!1}){const{toggleVisibility:n,removeLayer:r,updateLayer:i,setColor:s}=fI(),[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),[u,h]=Y.useState(t.name),[f,g]=Y.useState(!1),y=Y.useRef(null),_=Y.useRef(null),b=t.features.features.length,T=[...new Set(t.features.features.map(C=>C.geometry?.type).filter(Boolean))];Y.useEffect(()=>{l&&y.current&&(y.current.focus(),y.current.select())},[l]),Y.useEffect(()=>{const C=M=>{_.current&&!_.current.contains(M.target)&&g(!1)};if(f)return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[f]);const A=()=>{o?r(t.id):(a(!0),setTimeout(()=>a(!1),3e3))},I=()=>{const C=u.trim();C&&C!==t.name&&i(t.id,{name:C}),c(!1)},P=()=>{h(t.name),c(!1)},N=C=>{C.key==="Enter"?I():C.key==="Escape"&&P()},L=C=>{s(t.id,C),g(!1)};return e?p.jsxs("div",{className:"flex items-center gap-1 py-0.5 px-1 hover:bg-blue-50 transition-colors rounded",children:[p.jsx("button",{onClick:()=>n(t.id),className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:t.visible?t.color:"white",border:`2px solid ${t.color}`},title:t.visible?"Verbergen":"Tonen",children:t.visible&&p.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:p.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"white",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})}),p.jsx("span",{className:"text-gray-700 truncate flex-1 cursor-pointer",style:{fontSize:"0.9em"},onClick:()=>n(t.id),children:t.name}),p.jsx("span",{className:"text-[10px] text-gray-400 flex-shrink-0",children:b})]}):p.jsxs("div",{className:"flex items-center justify-between py-1.5 group",children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[p.jsxs("div",{className:"relative",ref:_,children:[p.jsx("button",{onClick:()=>g(!f),className:"w-5 h-5 rounded border-2 border-white shadow-sm flex-shrink-0 hover:scale-110 transition-transform",style:{backgroundColor:t.color},title:"Kleur wijzigen"}),f&&p.jsx("div",{className:"absolute top-6 left-0 z-50 bg-white rounded-lg shadow-lg border p-2 grid grid-cols-3 gap-1",children:Dht.map(C=>p.jsx("button",{onClick:()=>L(C),className:`w-6 h-6 rounded border-2 transition-transform hover:scale-110 ${C===t.color?"border-gray-800 scale-110":"border-white"}`,style:{backgroundColor:C},title:C},C))})]}),p.jsx("div",{className:"flex-1 min-w-0",children:l?p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("input",{ref:y,type:"text",value:u,onChange:C=>h(C.target.value),onKeyDown:N,className:"flex-1 text-sm px-1 py-0.5 border rounded min-w-0"}),p.jsx("button",{onClick:I,className:"p-0.5 text-green-600 hover:bg-green-50 rounded",title:"Opslaan",children:p.jsx(Ep,{size:14})}),p.jsx("button",{onClick:P,className:"p-0.5 text-gray-400 hover:bg-gray-100 rounded",title:"Annuleren",children:p.jsx(Kr,{size:14})})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-sm text-gray-700 truncate",children:t.name}),p.jsx("button",{onClick:()=>c(!0),className:"p-0.5 text-gray-400 hover:text-blue-500 opacity-0 group-hover:opacity-100 transition-opacity",title:"Naam wijzigen",children:p.jsx(Sp,{size:12})})]}),p.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-400",children:[p.jsxs("span",{children:[b," ",b===1?"feature":"features"]}),T.length>0&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"mx-0.5",children:""}),p.jsx("span",{children:T.join(", ")})]})]})]})})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:()=>n(t.id),className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:t.visible?t.color:"white",border:`2px solid ${t.visible?t.color:"#9ca3af"}`},title:t.visible?"Verbergen":"Tonen",children:t.visible&&p.jsx("svg",{width:"10",height:"10",viewBox:"0 0 10 10",children:p.jsx("path",{d:"M2 5 L4 7 L8 3",stroke:"white",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})}),p.jsx("button",{onClick:A,className:`p-1 rounded transition-colors border-0 outline-none ${o?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-500 hover:bg-red-50"}`,title:o?"Klik nogmaals om te verwijderen":"Verwijderen",children:p.jsx(Th,{size:14})})]})]})}const HT="commercial",jht={commercial:["Archeologische lagen","Archeologische verwachtingen","Erfgoed & Monumenten","WOII & Militair","Hillshade & LiDAR","Terrein & Bodem","Percelen","Recreatie"],personal:["Steentijd & Prehistorie","Paleokaarten","Archeologische lagen","Archeologische verwachtingen","Erfgoed & Monumenten","WOII & Militair","Hillshade & LiDAR","Terrein & Bodem","Percelen","Provinciale Thema's","Fossielen, Mineralen & Goud","Recreatie"]},$ht={commercial:["Specials (3D)"],personal:["Specials (3D)"]};function Hl(t){return jht[HT].includes(t)}function Fht(t){return $ht[HT].includes(t)}const Vht=[{name:"Rapa Nui - Moai Productie",url:"https://arcg.is/qu59O1",desc:"Paaseiland steengroeve in 3D"},{name:"Digital Giza - Piramides",url:"http://giza.fas.harvard.edu/giza3d/",desc:"Harvard 3D reconstructie"},{name:"Stonehenge 360",url:"https://www.english-heritage.org.uk/visit/places/stonehenge/history-and-stories/stonehenge360/",desc:"English Heritage virtuele tour"},{name:"Pompeii 3D Explorer",url:"https://www.cyark.org/projects/pompeii/3D-Explorer",desc:"CyArk LiDAR scans"},{name:"Virtual Angkor Wat",url:"https://www.virtualangkor.com/",desc:"3D reconstructie 1300 n.Chr."},{name:"Petra Virtuele Tour",url:"https://www.zamaniproject.org/site-jordan-petra.html",desc:"Zamani Project 3D"}],zht=[{name:"CyArk (200+ sites)",url:"https://www.cyark.org/projects/",desc:"Wereldwijd erfgoed archief"},{name:"Google Open Heritage",url:"https://artsandculture.google.com/project/openheritage",desc:"26+ UNESCO sites in 3D"}];function Ght(){const{themesPanelOpen:t,toggleThemesPanel:e,toggleSettingsPanel:n}=gr(),{layers:r,toggleVisibility:i}=ps(),s=fI(y=>y.layers),o=Y.useRef(null),a=Cn(y=>y.layerPanelFontScale),l=Cn(y=>y.setLayerPanelFontScale),c=Cn(y=>y.showFontSliders),u=Cn(y=>y.showCustomPointLayers),h=13*a/100,[f,g]=Y.useState(!1);return Y.useEffect(()=>{if(!t)return;const y=b=>{o.current&&!o.current.contains(b.target)&&e()},_=setTimeout(()=>{document.addEventListener("click",y)},100);return()=>{clearTimeout(_),document.removeEventListener("click",y)}},[t,e]),p.jsx(Wn,{children:t&&p.jsxs(gt.div,{ref:o,className:"fixed top-2.5 right-2 z-[1101] bg-white rounded-lg shadow-lg overflow-hidden w-[300px] max-h-[calc(100vh-200px)] flex flex-col",initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.15},children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-blue-500",style:{fontSize:`${h}px`},children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ga,{size:14,className:"text-white"}),p.jsx("span",{className:"font-medium text-white",children:"Kaartlagen"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[c&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-[10px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:a,onInput:y=>{l(parseInt(y.target.value))},onChange:y=>l(parseInt(y.target.value)),className:"w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${a}%`}),p.jsx("span",{className:"text-xs text-blue-200",children:"T"})]}),p.jsx("button",{onClick:e,className:"p-0.5 rounded border-0 outline-none bg-blue-400/50 hover:bg-blue-400 transition-colors ml-1",children:p.jsx(Kr,{size:16,className:"text-white",strokeWidth:2.5})})]})]}),p.jsxs("div",{className:"p-2 overflow-y-auto flex-1",style:{fontSize:`${h}px`},children:[u&&r.filter(y=>!y.archived).length>0&&p.jsxs("div",{className:"mb-2 pb-1 border-b border-gray-100",children:[p.jsx("div",{className:"flex items-center gap-1 py-0.5 px-1 mb-1",children:p.jsx("span",{className:"text-orange-600 font-medium",style:{fontSize:"0.9em"},children:"Mijn lagen"})}),r.filter(y=>!y.archived).map(y=>p.jsxs("button",{onClick:_=>{_.stopPropagation(),i(y.id)},className:`w-full flex items-center justify-between py-1 pl-3 pr-2 border-0 outline-none transition-colors text-left ${y.visible?"bg-orange-50 hover:bg-orange-100":"bg-transparent hover:bg-orange-50"}`,style:{fontSize:"inherit"},children:[p.jsxs("span",{className:"flex items-center gap-2 text-gray-600",children:[y.name,p.jsxs("span",{className:"text-xs text-gray-400",children:["(",y.points.length,")"]})]}),p.jsx("div",{className:"w-4 h-4 rounded-sm flex items-center justify-center transition-all duration-100 flex-shrink-0",style:{backgroundColor:y.visible?"#f97316":"white",border:y.visible?"2px solid #f97316":"2px solid #fb923c",color:"white"},children:y.visible&&p.jsx(Ep,{size:12,strokeWidth:3})})]},y.id))]}),s.length>0&&p.jsxs("div",{className:"mb-2 pb-1 border-b border-gray-100",children:[p.jsxs("div",{className:"flex items-center gap-1 py-0.5 px-1 mb-1",children:[p.jsx(KI,{size:12,className:"text-cyan-600"}),p.jsx("span",{className:"text-cyan-600 font-medium",style:{fontSize:"0.9em"},children:"Gemporteerde lagen"})]}),s.map(y=>p.jsx(T2e,{layer:y,compact:!0},y.id)),p.jsx("button",{onClick:()=>{e(),n()},className:"w-full text-left py-1 pl-3 text-xs text-cyan-500 hover:text-cyan-700 hover:bg-cyan-50 transition-colors",children:"+ Laag importeren..."})]}),p.jsxs("div",{className:"mb-2",children:[p.jsx("div",{className:"flex items-center gap-1 py-1 px-1 mb-1",children:p.jsx("span",{className:"text-blue-600 font-medium",style:{fontSize:"0.95em"},children:"Basislaag"})}),p.jsxs("div",{className:"space-y-0",children:[p.jsx(St,{name:"CartoDB (licht)",type:"base"}),p.jsx(St,{name:"OpenStreetMap",type:"base"}),p.jsx(St,{name:"Luchtfoto",type:"base",hasOverlay:!0}),p.jsx(St,{name:"TMK 1850",type:"base",hasOverlay:!0}),p.jsx(St,{name:"Bonnebladen 1900",type:"base",hasOverlay:!0})]})]}),p.jsxs("div",{className:"mb-2",children:[p.jsx("div",{className:"flex items-center gap-1 py-1 px-1 mb-1 border-t border-gray-100 pt-2",children:p.jsx("span",{className:"text-blue-600 font-medium",style:{fontSize:"0.95em"},children:"Thema's"})}),Hl("Steentijd & Prehistorie")&&p.jsxs(Fs,{title:"Steentijd & Prehistorie",defaultExpanded:!1,layerNames:["Hunebedden","Grafheuvels","Terpen","FAMKE Steentijd","FAMKE IJzertijd"],children:[p.jsx(St,{name:"Hunebedden",type:"overlay"}),p.jsx(St,{name:"Grafheuvels",type:"overlay"}),p.jsx(St,{name:"Terpen",type:"overlay"}),p.jsx(St,{name:"FAMKE Steentijd",type:"overlay"}),p.jsx(St,{name:"FAMKE IJzertijd",type:"overlay"})]}),Hl("Paleokaarten")&&p.jsxs(Fs,{title:"Paleokaarten",defaultExpanded:!1,layerNames:["Paleokaart 9000 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 500 v.Chr.","Paleokaart 100 n.Chr.","Paleokaart 800 n.Chr."],children:[p.jsx(St,{name:"Paleokaart 9000 v.Chr.",type:"overlay"}),p.jsx(St,{name:"Paleokaart 5500 v.Chr.",type:"overlay"}),p.jsx(St,{name:"Paleokaart 2750 v.Chr.",type:"overlay"}),p.jsx(St,{name:"Paleokaart 1500 v.Chr.",type:"overlay"}),p.jsx(St,{name:"Paleokaart 500 v.Chr.",type:"overlay"}),p.jsx(St,{name:"Paleokaart 100 n.Chr.",type:"overlay"}),p.jsx(St,{name:"Paleokaart 800 n.Chr.",type:"overlay"})]}),Hl("Archeologische lagen")&&p.jsxs(Fs,{title:"Archeologische lagen",defaultExpanded:!1,layerNames:["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Archeo Onderzoeken","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten","Romeinse Forten Lijnen"],children:[p.jsx(St,{name:"AMK Monumenten",type:"overlay"}),p.jsxs(Fs,{title:"Per periode",defaultExpanded:!1,layerNames:["AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"],children:[p.jsx(St,{name:"AMK Romeins",type:"overlay"}),p.jsx(St,{name:"AMK Steentijd",type:"overlay"}),p.jsx(St,{name:"AMK Vroege ME",type:"overlay"}),p.jsx(St,{name:"AMK Late ME",type:"overlay"}),p.jsx(St,{name:"AMK Overig",type:"overlay"})]}),p.jsx(St,{name:"Archeo Onderzoeken",type:"overlay"}),p.jsxs(Fs,{title:"Romeinse tijd",defaultExpanded:!1,layerNames:["Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten","Romeinse Forten Lijnen"],children:[p.jsx(St,{name:"Romeinse wegen (regio)",type:"overlay"}),p.jsx(St,{name:"Romeinse wegen (Wereld)",type:"overlay"}),p.jsxs(Fs,{title:"Romeinse Forten",defaultExpanded:!1,layerNames:["Romeinse Forten","Romeinse Forten Lijnen"],children:[p.jsx(St,{name:"Romeinse Forten",type:"overlay"}),p.jsx(St,{name:"Romeinse Forten Lijnen",type:"overlay"})]})]})]}),Hl("Archeologische verwachtingen")&&p.jsxs(Fs,{title:"Archeologische verwachtingen",defaultExpanded:!1,layerNames:["Kansenkaart","IKAW","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling"],children:[p.jsx(St,{name:"Kansenkaart",type:"overlay"}),p.jsx(St,{name:"IKAW",type:"overlay"}),p.jsx(St,{name:"UIKAV Punten",type:"overlay"}),p.jsx(St,{name:"UIKAV Vlakken",type:"overlay"}),p.jsx(St,{name:"UIKAV Expert",type:"overlay"}),p.jsx(St,{name:"UIKAV Buffer",type:"overlay"}),p.jsx(St,{name:"UIKAV Indeling",type:"overlay"})]}),Hl("Erfgoed & Monumenten")&&p.jsxs(Fs,{title:"Erfgoed & Monumenten",defaultExpanded:!1,layerNames:["Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Kastelen","Runes"],children:[p.jsx(St,{name:"Rijksmonumenten",type:"overlay"}),p.jsx(St,{name:"Werelderfgoed",type:"overlay"}),p.jsx(St,{name:"Religieus Erfgoed",type:"overlay"}),p.jsx(St,{name:"Kastelen",type:"overlay"}),p.jsx(St,{name:"Runes",type:"overlay"})]}),Hl("WOII & Militair")&&p.jsxs(Fs,{title:"WOII & Militair",defaultExpanded:!1,layerNames:["WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Militaire Objecten","Inundatiegebieden"],children:[p.jsx(St,{name:"WWII Bunkers",type:"overlay"}),p.jsx(St,{name:"Slagvelden",type:"overlay"}),p.jsx(St,{name:"Militaire Vliegvelden",type:"overlay"}),p.jsx(St,{name:"Verdedigingslinies",type:"overlay"}),p.jsx(St,{name:"Militaire Objecten",type:"overlay"}),p.jsx(St,{name:"Inundatiegebieden",type:"overlay"})]}),Hl("Hillshade & LiDAR")&&p.jsxs(Fs,{title:"Hillshade & LiDAR",defaultExpanded:!1,layerNames:["AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN4 Hillshade Kleur","AHN 0.5m"],children:[p.jsx(St,{name:"AHN4 Hoogtekaart Kleur",type:"overlay"}),p.jsx(St,{name:"AHN4 Hillshade NL",type:"overlay"}),p.jsx(St,{name:"AHN4 Multi-Hillshade NL",type:"overlay"}),p.jsx(St,{name:"AHN4 Hillshade Kleur",type:"overlay"}),p.jsx(St,{name:"AHN 0.5m",type:"overlay"})]}),Hl("Terrein & Bodem")&&p.jsxs(Fs,{title:"Terrein & Bodem",defaultExpanded:!1,layerNames:["Geomorfologie","Bodemkaart","Essen"],children:[HT==="personal",p.jsx(St,{name:"Geomorfologie",type:"overlay"}),p.jsx(St,{name:"Bodemkaart",type:"overlay"}),p.jsx(St,{name:"Essen",type:"overlay"})]}),Hl("Percelen")&&p.jsxs(Fs,{title:"Percelen",defaultExpanded:!1,layerNames:["Gewaspercelen","Kadastrale Grenzen"],children:[p.jsx(St,{name:"Gewaspercelen",type:"overlay"}),p.jsx(St,{name:"Kadastrale Grenzen",type:"overlay"})]}),Hl("Provinciale Thema's")&&p.jsxs(Fs,{title:"Provinciale Thema's",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],children:[p.jsxs(Fs,{title:"Zuid-Holland",defaultExpanded:!1,layerNames:["Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen"],children:[p.jsx(St,{name:"Scheepswrakken",type:"overlay"}),p.jsx(St,{name:"Woonheuvels ZH",type:"overlay"}),p.jsx(St,{name:"Windmolens",type:"overlay"}),p.jsx(St,{name:"Erfgoedlijnen",type:"overlay"}),p.jsx(St,{name:"Oude Kernen",type:"overlay"})]}),p.jsxs(Fs,{title:"Gelderland",defaultExpanded:!1,layerNames:["Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken"],children:[p.jsx(St,{name:"Relictenkaart Punten",type:"overlay"}),p.jsx(St,{name:"Relictenkaart Lijnen",type:"overlay"}),p.jsx(St,{name:"Relictenkaart Vlakken",type:"overlay"})]}),p.jsx(Fs,{title:"Zeeland",defaultExpanded:!1,layerNames:["Verdronken Dorpen"],children:p.jsx(St,{name:"Verdronken Dorpen",type:"overlay"})})]}),Hl("Fossielen, Mineralen & Goud")&&p.jsxs(Fs,{title:"Fossielen, Mineralen & Goud",defaultExpanded:!1,layerNames:["Fossiel Hotspots","Mineralen Hotspots","Goudrivieren","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk"],children:[p.jsx(St,{name:"Fossiel Hotspots",type:"overlay"}),p.jsx(St,{name:"Mineralen Hotspots",type:"overlay"}),p.jsx(St,{name:"Goudrivieren",type:"overlay"}),p.jsx(St,{name:"Fossielen Nederland",type:"overlay"}),p.jsx(St,{name:"Fossielen Belgi",type:"overlay"}),p.jsx(St,{name:"Fossielen Duitsland",type:"overlay"}),p.jsx(St,{name:"Fossielen Frankrijk",type:"overlay"})]}),Hl("Recreatie")&&HT==="commercial"&&p.jsxs(Fs,{title:"Recreatie",defaultExpanded:!1,layerNames:["Parken","Speeltuinen","Strandjes"],children:[p.jsx(St,{name:"Parken",type:"overlay"}),p.jsx(St,{name:"Speeltuinen",type:"overlay"}),p.jsx(St,{name:"Strandjes",type:"overlay",displayName:"Recreatie (strand)"})]}),Hl("Recreatie")&&HT==="personal"&&p.jsxs(Fs,{title:"Recreatie",defaultExpanded:!1,layerNames:["Ruiterpaden","Laarzenpaden","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels"],children:[p.jsx(St,{name:"Ruiterpaden",type:"overlay"}),p.jsx(St,{name:"Laarzenpaden",type:"overlay"}),p.jsx(St,{name:"Parken",type:"overlay"}),p.jsx(St,{name:"Speeltuinen",type:"overlay"}),p.jsx(St,{name:"Musea",type:"overlay"}),p.jsx(St,{name:"Strandjes",type:"overlay"}),p.jsx(St,{name:"Kringloopwinkels",type:"overlay"})]}),Fht("Specials (3D)")&&p.jsxs("div",{className:"mb-2",children:[p.jsxs("button",{onClick:y=>{y.stopPropagation(),g(!f)},className:"w-full flex items-center gap-1 py-1 px-1 hover:bg-purple-50 rounded transition-colors border-0 outline-none bg-transparent",children:[f?p.jsx(Ib,{size:14,className:"text-purple-500"}):p.jsx(_d,{size:14,className:"text-purple-500"}),p.jsx(Wct,{size:12,className:"text-purple-500"}),p.jsx("span",{className:"text-purple-600 font-medium",style:{fontSize:"0.95em"},children:"Specials (3D)"}),p.jsx(Cg,{size:10,className:"text-purple-400 ml-auto"})]}),f&&p.jsxs("div",{className:"mt-1",onClick:y=>y.stopPropagation(),children:[Vht.map(y=>p.jsxs("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",onClick:_=>_.stopPropagation(),className:"w-full flex items-center justify-between py-1.5 pl-6 pr-2 hover:bg-purple-50 rounded transition-colors text-left",style:{fontSize:"inherit"},children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-gray-700",children:y.name}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:y.desc})]}),p.jsx(Cg,{size:12,className:"text-purple-400 flex-shrink-0 ml-2"})]},y.name)),p.jsx("div",{className:"border-t border-gray-200 my-1.5 mx-2"}),zht.map(y=>p.jsxs("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",onClick:_=>_.stopPropagation(),className:"w-full flex items-center justify-between py-1.5 pl-6 pr-2 hover:bg-purple-50 rounded transition-colors text-left",style:{fontSize:"inherit"},children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-gray-700 font-medium",children:y.name}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:y.desc})]}),p.jsx(Cg,{size:12,className:"text-purple-400 flex-shrink-0 ml-2"})]},y.name))]})]})]})]})]})})}function Uht(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var tv=1,nv=2,Ew=3,Bht=4,Pz=5,aoe=6378137,Wht=6356752314e-3,loe=.0066943799901413165,qT=484813681109536e-20,ot=Math.PI/2,Hht=.16666666666666666,qht=.04722222222222222,Kht=.022156084656084655,bt=1e-10,Ki=.017453292519943295,Sl=57.29577951308232,Or=Math.PI/4,EA=Math.PI*2,hs=3.14159265359,Dl={};Dl.greenwich=0;Dl.lisbon=-9.131906111111;Dl.paris=2.337229166667;Dl.bogota=-74.080916666667;Dl.madrid=-3.687938888889;Dl.rome=12.452333333333;Dl.bern=7.439583333333;Dl.jakarta=106.807719444444;Dl.ferro=-17.666666666667;Dl.brussels=4.367975;Dl.stockholm=18.058277777778;Dl.athens=23.7163375;Dl.oslo=10.722916666667;const Yht={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var coe=/[\s_\-\/\(\)]/g;function Qg(t,e){if(t[e])return t[e];for(var n=Object.keys(t),r=e.toLowerCase().replace(coe,""),i=-1,s,o;++i<n.length;)if(s=n[i],o=s.toLowerCase().replace(coe,""),o===r)return t[s]}function Cz(t){var e={},n=t.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var c=l.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),r,i,s,o={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*Ki},lat_1:function(a){e.lat1=a*Ki},lat_2:function(a){e.lat2=a*Ki},lat_ts:function(a){e.lat_ts=a*Ki},lon_0:function(a){e.long0=a*Ki},lon_1:function(a){e.long1=a*Ki},lon_2:function(a){e.long2=a*Ki},alpha:function(a){e.alpha=parseFloat(a)*Ki},gamma:function(a){e.rectified_grid_angle=parseFloat(a)*Ki},lonc:function(a){e.longc=a*Ki},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r:function(a){e.a=e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var l=Qg(Yht,a);l&&(e.to_meter=l.to_meter)},from_greenwich:function(a){e.from_greenwich=a*Ki},pm:function(a){var l=Qg(Dl,a);e.from_greenwich=(l||parseFloat(a))*Ki},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in n)i=n[r],r in o?(s=o[r],typeof s=="function"?s(i):e[s]=i):e[r]=i;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=t,e}class k2e{static getId(e){const n=e.find(r=>Array.isArray(r)&&r[0]==="ID");return n&&n.length>=3?{authority:n[1],code:parseInt(n[2],10)}:null}static convertUnit(e,n="unit"){if(!e||e.length<3)return{type:n,name:"unknown",conversion_factor:null};const r=e[1],i=parseFloat(e[2])||null,s=e.find(a=>Array.isArray(a)&&a[0]==="ID"),o=s?{authority:s[1],code:parseInt(s[2],10)}:null;return{type:n,name:r,conversion_factor:i,id:o}}static convertAxis(e){const n=e[1]||"Unknown";let r;const i=n.match(/^\((.)\)$/);if(i){const c=i[1].toUpperCase();if(c==="E")r="east";else if(c==="N")r="north";else if(c==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${c}`)}else r=e[2]?e[2].toLowerCase():"unknown";const s=e.find(c=>Array.isArray(c)&&c[0]==="ORDER"),o=s?parseInt(s[1],10):null,a=e.find(c=>Array.isArray(c)&&(c[0]==="LENGTHUNIT"||c[0]==="ANGLEUNIT"||c[0]==="SCALEUNIT")),l=this.convertUnit(a);return{name:n,direction:r,unit:l,order:o}}static extractAxes(e){return e.filter(n=>Array.isArray(n)&&n[0]==="AXIS").map(n=>this.convertAxis(n)).sort((n,r)=>(n.order||0)-(r.order||0))}static convert(e,n={}){switch(e[0]){case"PROJCRS":n.type="ProjectedCRS",n.name=e[1],n.base_crs=e.find(f=>Array.isArray(f)&&f[0]==="BASEGEOGCRS")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="BASEGEOGCRS")):null,n.conversion=e.find(f=>Array.isArray(f)&&f[0]==="CONVERSION")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="CONVERSION")):null;const r=e.find(f=>Array.isArray(f)&&f[0]==="CS");r&&(n.coordinate_system={type:r[1],axis:this.extractAxes(e)});const i=e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT");if(i){const f=this.convertUnit(i);n.coordinate_system.unit=f}n.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":n.type="GeographicCRS",n.name=e[1];const s=e.find(f=>Array.isArray(f)&&(f[0]==="DATUM"||f[0]==="ENSEMBLE"));if(s){const f=this.convert(s);s[0]==="ENSEMBLE"?n.datum_ensemble=f:n.datum=f;const g=e.find(y=>Array.isArray(y)&&y[0]==="PRIMEM");g&&g[1]!=="Greenwich"&&(f.prime_meridian={name:g[1],longitude:parseFloat(g[2])})}n.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},n.id=this.getId(e);break;case"DATUM":n.type="GeodeticReferenceFrame",n.name=e[1],n.ellipsoid=e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":n.type="DatumEnsemble",n.name=e[1],n.members=e.filter(f=>Array.isArray(f)&&f[0]==="MEMBER").map(f=>({type:"DatumEnsembleMember",name:f[1],id:this.getId(f)}));const o=e.find(f=>Array.isArray(f)&&f[0]==="ENSEMBLEACCURACY");o&&(n.accuracy=parseFloat(o[1]));const a=e.find(f=>Array.isArray(f)&&f[0]==="ELLIPSOID");a&&(n.ellipsoid=this.convert(a)),n.id=this.getId(e);break;case"ELLIPSOID":n.type="Ellipsoid",n.name=e[1],n.semi_major_axis=parseFloat(e[2]),n.inverse_flattening=parseFloat(e[3]),e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT")&&this.convert(e.find(f=>Array.isArray(f)&&f[0]==="LENGTHUNIT"),n);break;case"CONVERSION":n.type="Conversion",n.name=e[1],n.method=e.find(f=>Array.isArray(f)&&f[0]==="METHOD")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="METHOD")):null,n.parameters=e.filter(f=>Array.isArray(f)&&f[0]==="PARAMETER").map(f=>this.convert(f));break;case"METHOD":n.type="Method",n.name=e[1],n.id=this.getId(e);break;case"PARAMETER":n.type="Parameter",n.name=e[1],n.value=parseFloat(e[2]),n.unit=this.convertUnit(e.find(f=>Array.isArray(f)&&(f[0]==="LENGTHUNIT"||f[0]==="ANGLEUNIT"||f[0]==="SCALEUNIT"))),n.id=this.getId(e);break;case"BOUNDCRS":n.type="BoundCRS";const l=e.find(f=>Array.isArray(f)&&f[0]==="SOURCECRS");if(l){const f=l.find(g=>Array.isArray(g));n.source_crs=f?this.convert(f):null}const c=e.find(f=>Array.isArray(f)&&f[0]==="TARGETCRS");if(c){const f=c.find(g=>Array.isArray(g));n.target_crs=f?this.convert(f):null}const u=e.find(f=>Array.isArray(f)&&f[0]==="ABRIDGEDTRANSFORMATION");u?n.transformation=this.convert(u):n.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(n.type="Transformation",n.name=e[1],n.method=e.find(f=>Array.isArray(f)&&f[0]==="METHOD")?this.convert(e.find(f=>Array.isArray(f)&&f[0]==="METHOD")):null,n.parameters=e.filter(f=>Array.isArray(f)&&(f[0]==="PARAMETER"||f[0]==="PARAMETERFILE")).map(f=>{if(f[0]==="PARAMETER")return this.convert(f);if(f[0]==="PARAMETERFILE")return{name:f[1],value:f[2],id:{authority:"EPSG",code:8656}}}),n.parameters.length===7){const f=n.parameters[6];f.name==="Scale difference"&&(f.value=Math.round((f.value-1)*1e12)/1e6)}n.id=this.getId(e);break;case"AXIS":n.coordinate_system||(n.coordinate_system={type:"unspecified",axis:[]}),n.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const h=this.convertUnit(e,"LinearUnit");n.coordinate_system&&n.coordinate_system.axis&&n.coordinate_system.axis.forEach(f=>{f.unit||(f.unit=h)}),h.conversion_factor&&h.conversion_factor!==1&&n.semi_major_axis&&(n.semi_major_axis={value:n.semi_major_axis,unit:h});break;default:n.keyword=e[0];break}return n}}class Xht extends k2e{static convert(e,n={}){return super.convert(e,n),n.coordinate_system&&n.coordinate_system.subtype==="Cartesian"&&delete n.coordinate_system,n.usage&&delete n.usage,n}}class Zht extends k2e{static convert(e,n={}){super.convert(e,n);const r=e.find(s=>Array.isArray(s)&&s[0]==="CS");r&&(n.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});const i=e.find(s=>Array.isArray(s)&&s[0]==="USAGE");if(i){const s=i.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),o=i.find(l=>Array.isArray(l)&&l[0]==="AREA"),a=i.find(l=>Array.isArray(l)&&l[0]==="BBOX");n.usage={},s&&(n.usage.scope=s[1]),o&&(n.usage.area=o[1]),a&&(n.usage.bbox=a.slice(1))}return n}}function Jht(t){return t.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(t.find(e=>Array.isArray(e)&&e[0]==="CS")||t[0]==="BOUNDCRS"||t[0]==="PROJCRS"||t[0]==="GEOGCRS","2015")}function Qht(t){return(Jht(t)==="2019"?Zht:Xht).convert(t)}function edt(t){const e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var SA=1,A2e=2,I2e=3,XN=4,P2e=5,oq=-1,tdt=/\s/,ndt=/[A-Za-z]/,rdt=/[A-Za-z84_]/,ML=/[,\]]/,C2e=/[\d\.E\-\+]/;function Mp(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=SA}Mp.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==XN)for(;tdt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case SA:return this.neutral(t);case A2e:return this.keyword(t);case XN:return this.quoted(t);case P2e:return this.afterquote(t);case I2e:return this.number(t);case oq:return}};Mp.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=XN;return}if(ML.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Mp.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=SA;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=SA,this.currentObject=this.stack.pop(),this.currentObject||(this.state=oq);return}};Mp.prototype.number=function(t){if(C2e.test(t)){this.word+=t;return}if(ML.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Mp.prototype.quoted=function(t){if(t==='"'){this.state=P2e;return}this.word+=t};Mp.prototype.keyword=function(t){if(rdt.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=SA;return}if(ML.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Mp.prototype.neutral=function(t){if(ndt.test(t)){this.word=t,this.state=A2e;return}if(t==='"'){this.word="",this.state=XN;return}if(C2e.test(t)){this.word=t,this.state=I2e;return}if(ML.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Mp.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===oq)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function idt(t){var e=new Mp(t);return e.output()}function eF(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce(function(s,o){return Bx(o,s),s},r);e&&(t[e]=i)}function Bx(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},Bx(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var r;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&Bx(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&Bx(t[3],e[n]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],eF(e,n,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],eF(e,n,t),e[n].type=n;return;default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return Bx(t,e[n]);return eF(e,n,t)}}var sdt=.017453292519943295;function Yu(t){return t*sdt}function R2e(t){const e=(t.projName||"").toLowerCase().replace(/_/g," ");!t.long0&&t.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(t.lat0=Yu(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1):!t.lat_ts&&t.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(t.lat_ts=t.lat0,t.lat0=Yu(t.lat0>0?90:-90),delete t.lat1)}function uoe(t){let e={units:null,to_meter:void 0};return typeof t=="string"?(e.units=t.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function hoe(t){return typeof t=="object"?t.value*t.unit.conversion_factor:t}function doe(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=hoe(t.ellipsoid.semi_major_axis),t.ellipsoid.inverse_flattening!==void 0?e.rf=t.ellipsoid.inverse_flattening:t.ellipsoid.semi_major_axis!==void 0&&t.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-hoe(t.ellipsoid.semi_minor_axis))))}function ZN(t,e={}){return!t||typeof t!="object"?t:t.type==="BoundCRS"?(ZN(t.source_crs,e),t.transformation&&(t.transformation.method&&t.transformation.method.name==="NTv2"?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(n=>n.value)),e):(Object.keys(t).forEach(n=>{const r=t[n];if(r!==null)switch(n){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,doe(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,doe(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(i=>{const s=i.direction;if(s==="east")return"e";if(s==="north")return"n";if(s==="west")return"w";if(s==="south")return"s";throw new Error(`Unknown axis direction: ${s}`)}).join("")+"u",r.unit){const{units:i,to_meter:s}=uoe(r.unit);e.units=i,e.to_meter=s}else if(r.axis[0]&&r.axis[0].unit){const{units:i,to_meter:s}=uoe(r.axis[0].unit);e.units=i,e.to_meter=s}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{const s=i.name.toLowerCase().replace(/\s+/g,"_"),o=i.value;i.unit&&i.unit.conversion_factor?e[s]=o*i.unit.conversion_factor:i.unit==="degree"?e[s]=o*Math.PI/180:e[s]=o});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":ZN(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),R2e(e),e)}var odt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function adt(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],e.length===3&&(t[n]=e[2](t[n])))}function M2e(t){for(var e=Object.keys(t),n=0,r=e.length;n<r;++n){var i=e[n];odt.indexOf(i)!==-1&&ldt(t[i]),typeof t[i]=="object"&&M2e(t[i])}}function ldt(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",r=0,i=t.AXIS.length;r<i;++r){var s=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?n+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?n+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?n+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;t.type==="GEOGCS"&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=Yu(t.rectified_grid_angle));function a(u){var h=t.to_meter||1;return u*h}var l=function(u){return adt(t,u)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Yu],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Yu],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",Yu],["lat0","latitude_of_origin",Yu],["lat0","standard_parallel_1",Yu],["lat1","standard_parallel_1",Yu],["lat2","standard_parallel_2",Yu],["azimuth","Azimuth"],["alpha","azimuth",Yu],["srsCode","name"]];c.forEach(l),R2e(t)}function JN(t){if(typeof t=="object")return ZN(t);const e=edt(t);var n=idt(t);if(e==="WKT2"){const s=Qht(n);return ZN(s)}var r=n[0],i={};return Bx(n,i),M2e(i),i[r]}function Io(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?Io[t]=Cz(arguments[1]):Io[t]=JN(arguments[1]):n&&typeof n=="object"&&!("projName"in n)?Io[t]=JN(arguments[1]):(Io[t]=n,n||delete Io[t])}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(r){return Array.isArray(r)?Io.apply(e,r):Io(r)});if(typeof t=="string"){if(t in Io)return Io[t]}else"EPSG"in t?Io["EPSG:"+t.EPSG]=t:"ESRI"in t?Io["ESRI:"+t.ESRI]=t:"IAU2000"in t?Io["IAU2000:"+t.IAU2000]=t:console.log(t);return}}Uht(Io);function cdt(t){return typeof t=="string"}function udt(t){return t in Io}function hdt(t){return t.indexOf("+")!==0&&t.indexOf("[")!==-1||typeof t=="object"&&!("srsCode"in t)}var ddt=["3857","900913","3785","102113"];function fdt(t){var e=Qg(t,"authority");if(e){var n=Qg(e,"epsg");return n&&ddt.indexOf(n)>-1}}function pdt(t){var e=Qg(t,"extension");if(e)return Qg(e,"proj4")}function mdt(t){return t[0]==="+"}function gdt(t){if(cdt(t)){if(udt(t))return Io[t];if(hdt(t)){var e=JN(t);if(fdt(e))return Io["EPSG:3857"];var n=pdt(e);return n?Cz(n):e}if(mdt(t))return Cz(t)}else return"projName"in t?t:JN(t)}function foe(t,e){t=t||{};var n,r;if(!e)return t;for(r in e)n=e[r],n!==void 0&&(t[r]=n);return t}function Gd(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function YI(t){return t<0?-1:1}function Pt(t,e){return e||Math.abs(t)<=hs?t:t-YI(t)*EA}function ph(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(ot-e))/r}function TA(t,e){for(var n=.5*t,r,i,s=ot-2*Math.atan(e),o=0;o<=15;o++)if(r=t*Math.sin(s),i=ot-2*Math.atan(e*Math.pow((1-r)/(1+r),n))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function ydt(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Gd(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function vdt(t){var e=t.x,n=t.y;if(n*Sl>90&&n*Sl<-90&&e*Sl>180&&e*Sl<-180)return null;var r,i;if(Math.abs(Math.abs(n)-ot)<=bt)return null;if(this.sphere)r=this.x0+this.a*this.k0*Pt(e-this.long0,this.over),i=this.y0+this.a*this.k0*Math.log(Math.tan(Or+.5*n));else{var s=Math.sin(n),o=ph(this.e,n,s);r=this.x0+this.a*this.k0*Pt(e-this.long0,this.over),i=this.y0-this.a*this.k0*Math.log(o)}return t.x=r,t.y=i,t}function _dt(t){var e=t.x-this.x0,n=t.y-this.y0,r,i;if(this.sphere)i=ot-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var s=Math.exp(-n/(this.a*this.k0));if(i=TA(this.e,s),i===-9999)return null}return r=Pt(this.long0+e/(this.a*this.k0),this.over),t.x=r,t.y=i,t}var xdt=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const wdt={init:ydt,forward:vdt,inverse:_dt,names:xdt};function bdt(){}function poe(t){return t}var N2e=["longlat","identity"];const Edt={init:bdt,forward:poe,inverse:poe,names:N2e};var Sdt=[wdt,Edt],Ey={},Wx=[];function O2e(t,e){var n=Wx.length;return t.names?(Wx[n]=t,t.names.forEach(function(r){Ey[r.toLowerCase()]=n}),this):(console.log(e),!0)}function L2e(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function Tdt(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Ey[e]<"u"&&Wx[Ey[e]]||(e=L2e(e),e in Ey&&Wx[Ey[e]]))return Wx[Ey[e]]}function kdt(){Sdt.forEach(O2e)}const Adt={start:kdt,add:O2e,get:Tdt};var D2e={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const Idt=D2e.WGS84;function Pdt(t,e,n,r){var i=t*t,s=e*e,o=(i-s)/i,a=0;r?(t*=1-o*(Hht+o*(qht+o*Kht)),i=t*t,o=0):a=Math.sqrt(o);var l=(i-s)/s;return{es:o,e:a,ep2:l}}function Cdt(t,e,n,r,i){if(!t){var s=Qg(D2e,r);s||(s=Idt),t=s.a,e=s.b,n=s.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<bt)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}var A3={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var Rdt in A3){var tF=A3[Rdt];tF.datumName&&(A3[tF.datumName]=tF)}function Mdt(t,e,n,r,i,s,o){var a={};return t===void 0||t==="none"?a.datum_type=Pz:a.datum_type=Bht,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=tv),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=nv,a.datum_params[3]*=qT,a.datum_params[4]*=qT,a.datum_params[5]*=qT,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=Ew,a.grids=o),a.a=n,a.b=r,a.es=i,a.ep2=s,a}var aq={};function Ndt(t,e,n){return e instanceof ArrayBuffer?Odt(t,e,n):{ready:Ldt(t,e)}}function Odt(t,e,n){var r=!0;n!==void 0&&n.includeErrorFields===!1&&(r=!1);var i=new DataView(e),s=$dt(i),o=Fdt(i,s),a=Vdt(i,o,s,r),l={header:o,subgrids:a};return aq[t]=l,l}async function Ldt(t,e){for(var n=[],r=await e.getImageCount(),i=r-1;i>=0;i--){var s=await e.getImage(i),o=await s.readRasters(),a=o,l=[s.getWidth(),s.getHeight()],c=s.getBoundingBox().map(moe),u=[s.fileDirectory.ModelPixelScale[0],s.fileDirectory.ModelPixelScale[1]].map(moe),h=c[0]+(l[0]-1)*u[0],f=c[3]-(l[1]-1)*u[1],g=a[0],y=a[1],_=[];for(let A=l[1]-1;A>=0;A--)for(let I=l[0]-1;I>=0;I--){var b=A*l[0]+I;_.push([-fg(y[b]),fg(g[b])])}n.push({del:u,lim:l,ll:[-h,f],cvs:_})}var T={header:{nSubgrids:r},subgrids:n};return aq[t]=T,T}function Ddt(t){if(t===void 0)return null;var e=t.split(",");return e.map(jdt)}function jdt(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:aq[t]||null,isNull:!1}}function moe(t){return t*Math.PI/180}function fg(t){return t/3600*Math.PI/180}function $dt(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Fdt(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Rz(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function Rz(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function Vdt(t,e,n,r){for(var i=176,s=[],o=0;o<e.nSubgrids;o++){var a=Gdt(t,i,n),l=Udt(t,i,a,n,r),c=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),u=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);s.push({ll:[fg(a.lowerLongitude),fg(a.lowerLatitude)],del:[fg(a.longitudeInterval),fg(a.latitudeInterval)],lim:[c,u],count:a.gridNodeCount,cvs:zdt(l)});var h=16;r===!1&&(h=8),i+=176+a.gridNodeCount*h}return s}function zdt(t){return t.map(function(e){return[fg(e.longitudeShift),fg(e.latitudeShift)]})}function Gdt(t,e,n){return{name:Rz(t,e+8,e+16).trim(),parent:Rz(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function Udt(t,e,n,r,i){var s=e+176,o=16;i===!1&&(o=8);for(var a=[],l=0;l<n.gridNodeCount;l++){var c={latitudeShift:t.getFloat32(s+l*o,r),longitudeShift:t.getFloat32(s+l*o+4,r)};i!==!1&&(c.latitudeAccuracy=t.getFloat32(s+l*o+8,r),c.longitudeAccuracy=t.getFloat32(s+l*o+12,r)),a.push(c)}return a}function pu(t,e){if(!(this instanceof pu))return new pu(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(c){if(c)throw c};var n=gdt(t);if(typeof n!="object"){e("Could not parse to valid json: "+t);return}var r=pu.projections.get(n.projName);if(!r){e("Could not get projection name from: "+t);return}if(n.datumCode&&n.datumCode!=="none"){var i=Qg(A3,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s=Cdt(n.a,n.b,n.rf,n.ellps,n.sphere),o=Pdt(s.a,s.b,s.rf,n.R_A),a=Ddt(n.nadgrids),l=n.datum||Mdt(n.datumCode,n.datum_params,s.a,s.b,o.es,o.ep2,a);foe(this,n),foe(this,r),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}pu.projections=Adt;pu.projections.start();function Bdt(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===tv?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===nv?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function j2e(t,e,n){var r=t.x,i=t.y,s=t.z?t.z:0,o,a,l,c;if(i<-ot&&i>-1.001*ot)i=-ot;else if(i>ot&&i<1.001*ot)i=ot;else{if(i<-ot)return{x:-1/0,y:-1/0,z:t.z};if(i>ot)return{x:1/0,y:1/0,z:t.z}}return r>Math.PI&&(r-=2*Math.PI),a=Math.sin(i),c=Math.cos(i),l=a*a,o=n/Math.sqrt(1-e*l),{x:(o+s)*c*Math.cos(r),y:(o+s)*c*Math.sin(r),z:(o*(1-e)+s)*a}}function $2e(t,e,n,r){var i=1e-12,s=i*i,o=30,a,l,c,u,h,f,g,y,_,b,T,A,I,P=t.x,N=t.y,L=t.z?t.z:0,C,M,O;if(a=Math.sqrt(P*P+N*N),l=Math.sqrt(P*P+N*N+L*L),a/n<i){if(C=0,l/n<i)return M=ot,O=-r,{x:t.x,y:t.y,z:t.z}}else C=Math.atan2(N,P);c=L/l,u=a/l,h=1/Math.sqrt(1-e*(2-e)*u*u),y=u*(1-e)*h,_=c*h,I=0;do I++,g=n/Math.sqrt(1-e*_*_),O=a*y+L*_-g*(1-e*_*_),f=e*g/(g+O),h=1/Math.sqrt(1-f*(2-f)*u*u),b=u*(1-f)*h,T=c*h,A=T*y-b*_,y=b,_=T;while(A*A>s&&I<o);return M=Math.atan(T/Math.abs(b)),{x:C,y:M,z:O}}function Wdt(t,e,n){if(e===tv)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===nv){var r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6];return{x:c*(t.x-l*t.y+a*t.z)+r,y:c*(l*t.x+t.y-o*t.z)+i,z:c*(-a*t.x+o*t.y+t.z)+s}}}function Hdt(t,e,n){if(e===tv)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===nv){var r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],u=(t.x-r)/c,h=(t.y-i)/c,f=(t.z-s)/c;return{x:u+l*h-a*f,y:-l*u+h+o*f,z:a*u-o*h+f}}}function kR(t){return t===tv||t===nv}function qdt(t,e,n){if(Bdt(t,e)||t.datum_type===Pz||e.datum_type===Pz)return n;var r=t.a,i=t.es;if(t.datum_type===Ew){var s=goe(t,!1,n);if(s!==0)return;r=aoe,i=loe}var o=e.a,a=e.b,l=e.es;if(e.datum_type===Ew&&(o=aoe,a=Wht,l=loe),i===l&&r===o&&!kR(t.datum_type)&&!kR(e.datum_type))return n;if(n=j2e(n,i,r),kR(t.datum_type)&&(n=Wdt(n,t.datum_type,t.datum_params)),kR(e.datum_type)&&(n=Hdt(n,e.datum_type,e.datum_params)),n=$2e(n,l,o,a),e.datum_type===Ew){var c=goe(e,!0,n);if(c!==0)return}return n}function goe(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},s=[];e:for(var o=0;o<t.grids.length;o++){var a=t.grids[o];if(s.push(a.name),a.isNull){i=r;break}if(a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,c=0,u=l.length;c<u;c++){var h=l[c],f=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,g=h.ll[0]-f,y=h.ll[1]-f,_=h.ll[0]+(h.lim[0]-1)*h.del[0]+f,b=h.ll[1]+(h.lim[1]-1)*h.del[1]+f;if(!(y>r.y||g>r.x||b<r.y||_<r.x)&&(i=Kdt(r,e,h),!isNaN(i.x)))break e}}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Sl+" "+r.y*Sl+" tried: '"+s+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function Kdt(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=Pt(i.x-Math.PI)+Math.PI;var s=yoe(i,n);if(e){if(isNaN(s.x))return r;s.x=i.x-s.x,s.y=i.y-s.y;var o=9,a=1e-12,l,c;do{if(c=yoe(s,n),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:i.x-(c.x+s.x),y:i.y-(c.y+s.y)},s.x+=l.x,s.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=Pt(s.x+n.ll[0]),r.y=s.y+n.ll[1]}else isNaN(s.x)||(r.x=t.x+s.x,r.y=t.y+s.y);return r}function yoe(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},r={x:Math.floor(n.x),y:Math.floor(n.y)},i={x:n.x-1*r.x,y:n.y-1*r.y},s={x:Number.NaN,y:Number.NaN},o;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return s;o=r.y*e.lim[0]+r.x;var a={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var c={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var u={x:e.cvs[o][0],y:e.cvs[o][1]},h=i.x*i.y,f=i.x*(1-i.y),g=(1-i.x)*(1-i.y),y=(1-i.x)*i.y;return s.x=g*a.x+f*l.x+y*u.x+h*c.x,s.y=g*a.y+f*l.y+y*u.y+h*c.y,s}function voe(t,e,n){var r=n.x,i=n.y,s=n.z||0,o,a,l,c={};for(l=0;l<3;l++)if(!(e&&l===2&&n.z===void 0))switch(l===0?(o=r,"ew".indexOf(t.axis[l])!==-1?a="x":a="y"):l===1?(o=i,"ns".indexOf(t.axis[l])!==-1?a="y":a="x"):(o=s,a="z"),t.axis[l]){case"e":c[a]=o;break;case"w":c[a]=-o;break;case"n":c[a]=o;break;case"s":c[a]=-o;break;case"u":n[a]!==void 0&&(c.z=o);break;case"d":n[a]!==void 0&&(c.z=-o);break;default:return null}return c}function F2e(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Ydt(t){_oe(t.x),_oe(t.y)}function _oe(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Xdt(t,e){return(t.datum.datum_type===tv||t.datum.datum_type===nv||t.datum.datum_type===Ew)&&e.datumCode!=="WGS84"||(e.datum.datum_type===tv||e.datum.datum_type===nv||e.datum.datum_type===Ew)&&t.datumCode!=="WGS84"}function QN(t,e,n,r){var i;Array.isArray(n)?n=F2e(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var s=n.z!==void 0;if(Ydt(n),t.datum&&e.datum&&Xdt(t,e)&&(i=new pu("WGS84"),n=QN(t,i,n,r),t=i),r&&t.axis!=="enu"&&(n=voe(t,!1,n)),t.projName==="longlat")n={x:n.x*Ki,y:n.y*Ki,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=qdt(t.datum,e.datum,n),!!n)return n=n,e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*Sl,y:n.y*Sl,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&e.axis!=="enu"?voe(e,!0,n):(n&&!s&&delete n.z,n)}var xoe=pu("WGS84");function nF(t,e,n,r){var i,s,o;return Array.isArray(n)?(i=QN(t,e,n,r)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(n.slice(3)):[i.x,i.y,n[2]].concat(n.slice(3)):[i.x,i.y].concat(n.slice(2)):[i.x,i.y]):(s=QN(t,e,n,r),o=Object.keys(n),o.length===2||o.forEach(function(a){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;s[a]=n[a]}),s)}function AR(t){return t instanceof pu?t:typeof t=="object"&&"oProj"in t?t.oProj:pu(t)}function Zdt(t,e,n){var r,i,s=!1,o;return typeof e>"u"?(i=AR(t),r=xoe,s=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,i=AR(t),r=xoe,s=!0),r||(r=AR(t)),i||(i=AR(e)),n?nF(r,i,n):(o={forward:function(a,l){return nF(r,i,a,l)},inverse:function(a,l){return nF(i,r,a,l)}},s&&(o.oProj=i),o)}var woe=6,V2e="AJSAJS",z2e="AFAFAF",Hx=65,sl=73,Hc=79,XS=86,ZS=90;const Jdt={forward:G2e,inverse:Qdt,toPoint:U2e};function G2e(t,e){return e=e||5,nft(eft({lat:t[1],lon:t[0]}),e)}function Qdt(t){var e=lq(W2e(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function U2e(t){var e=lq(W2e(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function rF(t){return t*(Math.PI/180)}function boe(t){return 180*(t/Math.PI)}function eft(t){var e=t.lat,n=t.lon,r=6378137,i=.00669438,s=.9996,o,a,l,c,u,h,f,g=rF(e),y=rF(n),_,b;b=Math.floor((n+180)/6)+1,n===180&&(b=60),e>=56&&e<64&&n>=3&&n<12&&(b=32),e>=72&&e<84&&(n>=0&&n<9?b=31:n>=9&&n<21?b=33:n>=21&&n<33?b=35:n>=33&&n<42&&(b=37)),o=(b-1)*6-180+3,_=rF(o),a=i/(1-i),l=r/Math.sqrt(1-i*Math.sin(g)*Math.sin(g)),c=Math.tan(g)*Math.tan(g),u=a*Math.cos(g)*Math.cos(g),h=Math.cos(g)*(y-_),f=r*((1-i/4-3*i*i/64-5*i*i*i/256)*g-(3*i/8+3*i*i/32+45*i*i*i/1024)*Math.sin(2*g)+(15*i*i/256+45*i*i*i/1024)*Math.sin(4*g)-35*i*i*i/3072*Math.sin(6*g));var T=s*l*(h+(1-c+u)*h*h*h/6+(5-18*c+c*c+72*u-58*a)*h*h*h*h*h/120)+5e5,A=s*(f+l*Math.tan(g)*(h*h/2+(5-c+9*u+4*u*u)*h*h*h*h/24+(61-58*c+c*c+600*u-330*a)*h*h*h*h*h*h/720));return e<0&&(A+=1e7),{northing:Math.round(A),easting:Math.round(T),zoneNumber:b,zoneLetter:tft(e)}}function lq(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var s=.9996,o=6378137,a=.00669438,l,c=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),u,h,f,g,y,_,b,T,A,I=n-5e5,P=e;r<"N"&&(P-=1e7),b=(i-1)*6-180+3,l=a/(1-a),_=P/s,T=_/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),A=T+(3*c/2-27*c*c*c/32)*Math.sin(2*T)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*T)+151*c*c*c/96*Math.sin(6*T),u=o/Math.sqrt(1-a*Math.sin(A)*Math.sin(A)),h=Math.tan(A)*Math.tan(A),f=l*Math.cos(A)*Math.cos(A),g=o*(1-a)/Math.pow(1-a*Math.sin(A)*Math.sin(A),1.5),y=I/(u*s);var N=A-u*Math.tan(A)/g*(y*y/2-(5+3*h+10*f-4*f*f-9*l)*y*y*y*y/24+(61+90*h+298*f+45*h*h-252*l-3*f*f)*y*y*y*y*y*y/720);N=boe(N);var L=(y-(1+2*h+f)*y*y*y/6+(5-2*f+28*h-3*f*f+8*l+24*h*h)*y*y*y*y*y/120)/Math.cos(A);L=b+boe(L);var C;if(t.accuracy){var M=lq({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});C={top:M.lat,right:M.lon,bottom:N,left:L}}else C={lat:N,lon:L};return C}function tft(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function nft(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+rft(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}function rft(t,e,n){var r=B2e(n),i=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return ift(i,s,r)}function B2e(t){var e=t%woe;return e===0&&(e=woe),e}function ift(t,e,n){var r=n-1,i=V2e.charCodeAt(r),s=z2e.charCodeAt(r),o=i+t-1,a=s+e,l=!1;o>ZS&&(o=o-ZS+Hx-1,l=!0),(o===sl||i<sl&&o>sl||(o>sl||i<sl)&&l)&&o++,(o===Hc||i<Hc&&o>Hc||(o>Hc||i<Hc)&&l)&&(o++,o===sl&&o++),o>ZS&&(o=o-ZS+Hx-1),a>XS?(a=a-XS+Hx-1,l=!0):l=!1,(a===sl||s<sl&&a>sl||(a>sl||s<sl)&&l)&&a++,(a===Hc||s<Hc&&a>Hc||(a>Hc||s<Hc)&&l)&&(a++,a===sl&&a++),a>XS&&(a=a-XS+Hx-1);var c=String.fromCharCode(o)+String.fromCharCode(a);return c}function W2e(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,r="",i,s=0;!/[A-Z]/.test(i=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=i,s++}var o=parseInt(r,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+t;n=t.substring(s,s+=2);for(var l=B2e(o),c=sft(n.charAt(0),l),u=oft(n.charAt(1),l);u<aft(a);)u+=2e6;var h=e-s;if(h%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var f=h/2,g=0,y=0,_,b,T,A,I;return f>0&&(_=1e5/Math.pow(10,f),b=t.substring(s,s+f),g=parseFloat(b)*_,T=t.substring(s+f),y=parseFloat(T)*_),A=g+c,I=y+u,{easting:A,northing:I,zoneLetter:a,zoneNumber:o,accuracy:_}}function sft(t,e){for(var n=V2e.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(n++,n===sl&&n++,n===Hc&&n++,n>ZS){if(i)throw"Bad character: "+t;n=Hx,i=!0}r+=1e5}return r}function oft(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=z2e.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(n++,n===sl&&n++,n===Hc&&n++,n>XS){if(i)throw"Bad character: "+t;n=Hx,i=!0}r+=1e5}return r}function aft(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function H2(t,e,n){if(!(this instanceof H2))return new H2(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var r=t.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}H2.fromMGRS=function(t){return new H2(U2e(t))};H2.prototype.toMGRS=function(t){return G2e([this.x,this.y],t)};var lft=1,cft=.25,Eoe=.046875,Soe=.01953125,Toe=.01068115234375,uft=.75,hft=.46875,dft=.013020833333333334,fft=.007120768229166667,pft=.3645833333333333,mft=.005696614583333333,gft=.3076171875;function cq(t){var e=[];e[0]=lft-t*(cft+t*(Eoe+t*(Soe+t*Toe))),e[1]=t*(uft-t*(Eoe+t*(Soe+t*Toe)));var n=t*t;return e[2]=n*(hft-t*(dft+t*fft)),n*=t,e[3]=n*(pft-t*mft),e[4]=n*t*gft,e}function Pb(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var yft=20;function uq(t,e,n){for(var r=1/(1-e),i=t,s=yft;s;--s){var o=Math.sin(i),a=1-e*o*o;if(a=(Pb(i,o,Math.cos(i),n)-t)*(a*Math.sqrt(a))*r,i-=a,Math.abs(a)<bt)return i}return i}function vft(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=cq(this.es),this.ml0=Pb(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function _ft(t){var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i,s,o,a=Math.sin(n),l=Math.cos(n);if(this.es){var u=l*r,h=Math.pow(u,2),f=this.ep2*Math.pow(l,2),g=Math.pow(f,2),y=Math.abs(l)>bt?Math.tan(n):0,_=Math.pow(y,2),b=Math.pow(_,2);i=1-this.es*Math.pow(a,2),u=u/Math.sqrt(i);var T=Pb(n,a,l,this.en);s=this.a*(this.k0*u*(1+h/6*(1-_+f+h/20*(5-18*_+b+14*f-58*_*f+h/42*(61+179*b-b*_-479*_)))))+this.x0,o=this.a*(this.k0*(T-this.ml0+a*r*u/2*(1+h/12*(5-_+9*f+4*g+h/30*(61+b-58*_+270*f-330*_*f+h/56*(1385+543*b-b*_-3111*_))))))+this.y0}else{var c=l*Math.sin(r);if(Math.abs(Math.abs(c)-1)<bt)return 93;if(s=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,o=l*Math.cos(r)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(o),c>=1){if(c-1>bt)return 93;o=0}else o=Math.acos(o);n<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=s,t.y=o,t}function xft(t){var e,n,r,i,s=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,n=uq(e,this.es,this.en),Math.abs(n)<ot){var h=Math.sin(n),f=Math.cos(n),g=Math.abs(f)>bt?Math.tan(n):0,y=this.ep2*Math.pow(f,2),_=Math.pow(y,2),b=Math.pow(g,2),T=Math.pow(b,2);e=1-this.es*Math.pow(h,2);var A=s*Math.sqrt(e)/this.k0,I=Math.pow(A,2);e=e*g,r=n-e*I/(1-this.es)*.5*(1-I/12*(5+3*b-9*y*b+y-4*_-I/30*(61+90*b-252*y*b+45*T+46*y-I/56*(1385+3633*b+4095*T+1574*T*b)))),i=Pt(this.long0+A*(1-I/6*(1+2*b+y-I/20*(5+28*b+24*T+8*y*b+6*y-I/42*(61+662*b+1320*T+720*T*b))))/f,this.over)}else r=ot*YI(o),i=0;else{var a=Math.exp(s/this.k0),l=.5*(a-1/a),c=this.lat0+o/this.k0,u=Math.cos(c);e=Math.sqrt((1-Math.pow(u,2))/(1+Math.pow(l,2))),r=Math.asin(e),o<0&&(r=-r),l===0&&u===0?i=0:i=Pt(Math.atan2(l,u)+this.long0,this.over)}return t.x=i,t.y=r,t}var wft=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const I3={init:vft,forward:_ft,inverse:xft,names:wft};function H2e(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function xl(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function bft(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function Eft(t){var e=Math.abs(t);return e=bft(e*(1+e/(xl(1,e)+1))),t<0?-e:e}function hq(t,e){for(var n=2*Math.cos(2*e),r=t.length-1,i=t[r],s=0,o;--r>=0;)o=-s+n*i+t[r],s=i,i=o;return e+o*Math.sin(2*e)}function Sft(t,e){for(var n=2*Math.cos(e),r=t.length-1,i=t[r],s=0,o;--r>=0;)o=-s+n*i+t[r],s=i,i=o;return Math.sin(e)*o}function Tft(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function q2e(t,e,n){for(var r=Math.sin(e),i=Math.cos(e),s=H2e(n),o=Tft(n),a=2*i*o,l=-2*r*s,c=t.length-1,u=t[c],h=0,f=0,g=0,y,_;--c>=0;)y=f,_=h,f=u,h=g,u=-y+a*f-l*h+t[c],g=-_+l*f+a*h;return a=r*o,l=i*s,[a*u-l*g,a*g+l*u]}function kft(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(I3.init.apply(this),this.forward=I3.forward,this.inverse=I3.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var r=hq(this.cbg,this.lat0);this.Zb=-this.Qn*(r+Sft(this.gtu,2*r))}function Aft(t){var e=Pt(t.x-this.long0,this.over),n=t.y;n=hq(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),s=Math.sin(e),o=Math.cos(e);n=Math.atan2(r,o*i),e=Math.atan2(s*i,xl(r,i*o)),e=Eft(Math.tan(e));var a=q2e(this.gtu,2*n,2*e);n=n+a[0],e=e+a[1];var l,c;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*n+this.Zb)+this.y0):(l=1/0,c=1/0),t.x=l,t.y=c,t}function Ift(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var r,i;if(Math.abs(e)<=2.623395162778){var s=q2e(this.utg,2*n,2*e);n=n+s[0],e=e+s[1],e=Math.atan(H2e(e));var o=Math.sin(n),a=Math.cos(n),l=Math.sin(e),c=Math.cos(e);n=Math.atan2(o*c,xl(l,c*a)),e=Math.atan2(l,c*a),r=Pt(e+this.long0,this.over),i=hq(this.cgb,n)}else r=1/0,i=1/0;return t.x=r,t.y=i,t}var Pft=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const P3={init:kft,forward:Aft,inverse:Ift,names:Pft};function Cft(t,e){if(t===void 0){if(t=Math.floor((Pt(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var Rft="etmerc";function Mft(){var t=Cft(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Ki,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,P3.init.apply(this),this.forward=P3.forward,this.inverse=P3.inverse}var Nft=["Universal Transverse Mercator System","utm"];const Oft={init:Mft,names:Nft,dependsOn:Rft};function dq(t,e){return Math.pow((1-t)/(1+t),e)}var Lft=20;function Dft(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Or)/(Math.pow(Math.tan(.5*this.lat0+Or),this.C)*dq(this.e*t,this.ratexp))}function jft(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+Or),this.C)*dq(this.e*Math.sin(n),this.ratexp))-ot,t.x=this.C*e,t}function $ft(t){for(var e=1e-14,n=t.x/this.C,r=t.y,i=Math.pow(Math.tan(.5*r+Or)/this.K,1/this.C),s=Lft;s>0&&(r=2*Math.atan(i*dq(this.e*Math.sin(t.y),-.5*this.e))-ot,!(Math.abs(r-t.y)<e));--s)t.y=r;return s?(t.x=n,t.y=r,t):null}const fq={init:Dft,forward:jft,inverse:$ft};function Fft(){fq.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Vft(t){var e,n,r,i;return t.x=Pt(t.x-this.long0,this.over),fq.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function zft(t){var e,n,r,i,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=xl(t.x,t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),n=Math.cos(o),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),r=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,fq.inverse.apply(this,[t]),t.x=Pt(t.x+this.long0,this.over),t}var Gft=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Uft={init:Fft,forward:Vft,inverse:zft,names:Gft};function pq(t,e,n){return e*=n,Math.tan(.5*(ot+t))*Math.pow((1-e)/(1+e),.5*n)}function Bft(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=bt&&(this.k0=.5*(1+YI(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=bt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=bt&&Math.abs(Math.cos(this.lat_ts))>bt&&(this.k0=.5*this.cons*Gd(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ph(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Gd(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(pq(this.lat0,this.sinlat0,this.e))-ot,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Wft(t){var e=t.x,n=t.y,r=Math.sin(n),i=Math.cos(n),s,o,a,l,c,u,h=Pt(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=bt&&Math.abs(n+this.lat0)<=bt?(t.x=NaN,t.y=NaN,t):this.sphere?(s=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(h)),t.x=this.a*s*i*Math.sin(h)+this.x0,t.y=this.a*s*(this.coslat0*r-this.sinlat0*i*Math.cos(h))+this.y0,t):(o=2*Math.atan(pq(n,r,this.e))-ot,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=bt?(c=ph(this.e,n*this.con,this.con*r),u=2*this.a*this.k0*c/this.cons,t.x=this.x0+u*Math.sin(e-this.long0),t.y=this.y0-this.con*u*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<bt?(s=2*this.a*this.k0/(1+l*Math.cos(h)),t.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(h))),t.y=s*(this.cosX0*a-this.sinX0*l*Math.cos(h))+this.y0),t.x=s*l*Math.sin(h)+this.x0,t))}function Hft(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,n=this.lat0,o<=bt?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<bt?this.lat0>0?e=Pt(this.long0+Math.atan2(t.x,-1*t.y),this.over):e=Pt(this.long0+Math.atan2(t.x,t.y),this.over):e=Pt(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a)),this.over),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=bt){if(o<=bt)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=o*this.cons/(2*this.a*this.k0),n=this.con*TA(this.e,r),e=this.con*Pt(this.con*this.long0+Math.atan2(t.x,-1*t.y),this.over)}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=bt?s=this.X0:(s=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/o),e=Pt(this.long0+Math.atan2(t.x*Math.sin(i),o*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)),this.over)),n=-1*TA(this.e,Math.tan(.5*(ot+s)));return t.x=e,t.y=n,t}var qft=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const Kft={init:Bft,forward:Wft,inverse:Hft,names:qft,ssfn_:pq};function Yft(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=this.rf,i=1/r,s=2*i-Math.pow(i,2),o=this.e=Math.sqrt(s);this.R=this.k0*n*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),c=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*l+this.alpha*o/2*c}function Xft(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t}function Zft(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),a=this.lambda0+o/this.alpha,l=0,c=s,u=-1e3,h=0;Math.abs(c-u)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=c,t}var Jft=["somerc"];const Qft={init:Yft,forward:Xft,inverse:Zft,names:Jft};var bx=1e-7;function ept(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.projName=="object"?Object.keys(t.projName)[0]:t.projName;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1||e.indexOf(L2e(n))!==-1}function tpt(){var t,e,n,r,i,s,o,a,l,c,u=0,h,f=0,g=0,y=0,_=0,b=0,T=0;this.no_off=ept(this),this.no_rot="no_rot"in this;var A=!1;"alpha"in this&&(A=!0);var I=!1;if("rectified_grid_angle"in this&&(I=!0),A&&(T=this.alpha),I&&(u=this.rectified_grid_angle),A||I)f=this.longc;else if(g=this.long1,_=this.lat1,y=this.long2,b=this.lat2,Math.abs(_-b)<=bx||(t=Math.abs(_))<=bx||Math.abs(t-ot)<=bx||Math.abs(Math.abs(this.lat0)-ot)<=bx||Math.abs(Math.abs(b)-ot)<=bx)throw new Error;var P=1-this.es;e=Math.sqrt(P),Math.abs(this.lat0)>bt?(a=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*a*a,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/P),this.A=this.B*this.k0*e/t,r=this.B*e/(n*Math.sqrt(t)),i=r*r-1,i<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(ph(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),A||I?(A?(h=Math.asin(Math.sin(T)/r),I||(u=T)):(h=u,T=Math.asin(r*Math.sin(h))),this.lam0=f-Math.asin(.5*(i-1/i)*Math.tan(h))/this.B):(s=Math.pow(ph(this.e,_,Math.sin(_)),this.B),o=Math.pow(ph(this.e,b,Math.sin(b)),this.B),i=this.E/s,l=(o-s)/(o+s),c=this.E*this.E,c=(c-o*s)/(c+o*s),t=g-y,t<-Math.PI?y-=EA:t>Math.PI&&(y+=EA),this.lam0=Pt(.5*(g+y)-Math.atan(c*Math.tan(.5*this.B*(g-y))/l)/this.B,this.over),h=Math.atan(2*Math.sin(this.B*Pt(g-this.lam0,this.over))/(i-1/i)),u=T=Math.asin(r*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(T))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(Or-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(Or+i))}function npt(t){var e={},n,r,i,s,o,a,l,c;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-ot)>bt){if(o=this.E/Math.pow(ph(this.e,t.y,Math.sin(t.y)),this.B),a=1/o,n=.5*(o-a),r=.5*(o+a),s=Math.sin(this.B*t.x),i=(n*this.singam-s*this.cosgam)/r,Math.abs(Math.abs(i)-1)<bt)throw new Error;c=.5*this.ArB*Math.log((1-i)/(1+i)),a=Math.cos(this.B*t.x),Math.abs(a)<bx?l=this.A*t.x:l=this.ArB*Math.atan2(n*this.cosgam+s*this.singam,a)}else c=t.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*t.y;return this.no_rot?(e.x=l,e.y=c):(l-=this.u_0,e.x=c*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function rpt(t){var e,n,r,i,s,o,a,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*n),i=.5*(r-1/r),s=.5*(r+1/r),o=Math.sin(this.BrA*e),a=(o*this.cosgam+i*this.singam)/s,Math.abs(Math.abs(a)-1)<bt)l.x=0,l.y=a<0?-ot:ot;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=TA(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(i*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var ipt=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const spt={init:tpt,forward:npt,inverse:rpt,names:ipt};function opt(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<bt)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=Gd(this.e,e,n),i=ph(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Gd(this.e,s,o),l=ph(this.e,this.lat2,s),c=Math.abs(Math.abs(this.lat0)-ot)<bt?0:ph(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>bt?this.ns=Math.log(r/a)/Math.log(i/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function apt(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=bt&&(n=YI(n)*(ot-2*bt));var r=Math.abs(Math.abs(n)-ot),i,s;if(r>bt)i=ph(this.e,n,Math.sin(n)),s=this.a*this.f0*Math.pow(i,this.ns);else{if(r=n*this.ns,r<=0)return null;s=0}var o=this.ns*Pt(e-this.long0,this.over);return t.x=this.k0*(s*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,t}function lpt(t){var e,n,r,i,s,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),n=1):(e=-Math.sqrt(o*o+a*a),n=-1);var l=0;if(e!==0&&(l=Math.atan2(n*o,n*a)),e!==0||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),i=TA(this.e,r),i===-9999)return null}else i=-ot;return s=Pt(l/this.ns+this.long0,this.over),t.x=s,t.y=i,t}var cpt=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const upt={init:opt,forward:apt,inverse:lpt,names:cpt};function hpt(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function dpt(t){var e,n,r,i,s,o,a,l=t.x,c=t.y,u=Pt(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),r=-u*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),s=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function fpt(t){var e,n,r,i,s,o,a,l,c=t.x;t.x=t.y,t.y=c,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x),i=s/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,l=0;var u=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(l=1),a=t.y,u+=1;while(l===0&&u<15);return u>=15?null:t}var ppt=["Krovak","krovak"];const mpt={init:hpt,forward:dpt,inverse:fpt,names:ppt};function Fa(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function XI(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function ZI(t){return .375*t*(1+.25*t*(1+.46875*t))}function JI(t){return .05859375*t*t*(1+.75*t)}function QI(t){return t*t*t*(35/3072)}function mq(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function p0(t){return Math.abs(t)<ot?t:t-YI(t)*Math.PI}function e5(t,e,n,r,i){var s,o;s=t/e;for(var a=0;a<15;a++)if(o=(t-(e*s-n*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*r*Math.cos(4*s)-6*i*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function gpt(){this.sphere||(this.e0=XI(this.es),this.e1=ZI(this.es),this.e2=JI(this.es),this.e3=QI(this.es),this.ml0=this.a*Fa(this.e0,this.e1,this.e2,this.e3,this.lat0))}function ypt(t){var e,n,r=t.x,i=t.y;if(r=Pt(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var s=Math.sin(i),o=Math.cos(i),a=mq(this.a,this.e,s),l=Math.tan(i)*Math.tan(i),c=r*Math.cos(i),u=c*c,h=this.es*o*o/(1-this.es),f=this.a*Fa(this.e0,this.e1,this.e2,this.e3,i);e=a*c*(1-u*l*(1/6-(8-l+8*h)*u/120)),n=f-this.ml0+a*s/o*u*(.5+(5-l+6*h)*u/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function vpt(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i;if(this.sphere){var s=n+this.lat0;r=Math.asin(Math.sin(s)*Math.cos(e)),i=Math.atan2(Math.tan(e),Math.cos(s))}else{var o=this.ml0/this.a+n,a=e5(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-ot)<=bt)return t.x=this.long0,t.y=ot,n<0&&(t.y*=-1),t;var l=mq(this.a,this.e,Math.sin(a)),c=l*l*l/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(a),2),h=e*this.a/l,f=h*h;r=a-l*Math.tan(a)/c*h*h*(.5-(1+3*u)*h*h/24),i=h*(1-f*(u/3+(1+3*u)*u*f/15))/Math.cos(a)}return t.x=Pt(i+this.long0,this.over),t.y=p0(r),t}var _pt=["Cassini","Cassini_Soldner","cass"];const xpt={init:gpt,forward:ypt,inverse:vpt,names:_pt};function Rg(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var Mz=1,Nz=2,Oz=3,C3=4;function wpt(){var t=Math.abs(this.lat0);if(Math.abs(t-ot)<bt?this.mode=this.lat0<0?Mz:Nz:Math.abs(t)<bt?this.mode=Oz:this.mode=C3,this.es>0){var e;switch(this.qp=Rg(this.e,1),this.mmf=.5/(1-this.es),this.apa=Cpt(this.es),this.mode){case Nz:this.dd=1;break;case Mz:this.dd=1;break;case Oz:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case C3:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Rg(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===C3&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function bpt(t){var e,n,r,i,s,o,a,l,c,u,h=t.x,f=t.y;if(h=Pt(h-this.long0,this.over),this.sphere){if(s=Math.sin(f),u=Math.cos(f),r=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+u*r:1+this.sinph0*s+this.cosph0*u*r,n<=bt)return null;n=Math.sqrt(2/n),e=n*u*Math.sin(h),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*u*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(f+this.lat0)<bt)return null;n=Or-f*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(h),n*=r}}else{switch(a=0,l=0,c=0,r=Math.cos(h),i=Math.sin(h),s=Math.sin(f),o=Rg(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*l*r;break;case this.EQUIT:c=1+l*r;break;case this.N_POLE:c=ot+f,o=this.qp-o;break;case this.S_POLE:c=f-ot,o=this.qp+o;break}if(Math.abs(c)<bt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?n=this.ymf*c*(this.cosb1*a-this.sinb1*l*r):n=(c=Math.sqrt(2/(1+l*r)))*a*this.ymf,e=this.xmf*c*l*i;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(c=Math.sqrt(o))*i,n=r*(this.mode===this.S_POLE?c:-c)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function Ept(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,i,s,o,a,l,c;if(this.sphere){var u=0,h,f=0;if(h=Math.sqrt(e*e+n*n),i=h*.5,i>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(i),u=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(h)<=bt?0:Math.asin(n*f/h),e*=f,n=u*h;break;case this.OBLIQ:i=Math.abs(h)<=bt?this.lat0:Math.asin(u*this.sinph0+n*f*this.cosph0/h),e*=f*this.cosph0,n=(u-Math.sin(i)*this.sinph0)*h;break;case this.N_POLE:n=-n,i=ot-i;break;case this.S_POLE:i-=ot;break}r=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,l=Math.sqrt(e*e+n*n),l<bt)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*l/this.rq),s=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(c=s*this.sinb1+n*o*this.cosb1/l,a=this.qp*c,n=l*this.cosb1*s-n*this.sinb1*o):(c=n*o/l,a=this.qp*c,n=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),a=e*e+n*n,!a)return t.x=this.long0,t.y=this.lat0,t;c=1-a/this.qp,this.mode===this.S_POLE&&(c=-c)}r=Math.atan2(e,n),i=Rpt(Math.asin(c),this.apa)}return t.x=Pt(this.long0+r,this.over),t.y=i,t}var Spt=.3333333333333333,Tpt=.17222222222222222,kpt=.10257936507936508,Apt=.06388888888888888,Ipt=.0664021164021164,Ppt=.016415012942191543;function Cpt(t){var e,n=[];return n[0]=t*Spt,e=t*t,n[0]+=e*Tpt,n[1]=e*Apt,e*=t,n[0]+=e*kpt,n[1]+=e*Ipt,n[2]=e*Ppt,n}function Rpt(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var Mpt=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Npt={init:wpt,forward:bpt,inverse:Ept,names:Mpt,S_POLE:Mz,N_POLE:Nz,EQUIT:Oz,OBLIQ:C3};function e0(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function Opt(){Math.abs(this.lat1+this.lat2)<bt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Gd(this.e3,this.sin_po,this.cos_po),this.qs1=Rg(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Gd(this.e3,this.sin_po,this.cos_po),this.qs2=Rg(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Rg(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>bt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Lpt(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=Rg(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*Pt(e-this.long0,this.over),o=i*Math.sin(s)+this.x0,a=this.rh-i*Math.cos(s)+this.y0;return t.x=o,t.y=a,t}function Dpt(t){var e,n,r,i,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,e!==0&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,n)),s=Pt(i/this.ns0+this.long0,this.over),t.x=s,t.y=o,t}function jpt(t,e){var n,r,i,s,o,a=e0(.5*e);if(t<bt)return a;for(var l=t*t,c=1;c<=25;c++)if(n=Math.sin(a),r=Math.cos(a),i=t*n,s=1-i*i,o=.5*s*s/r*(e/(1-l)-n/s+.5/t*Math.log((1-i)/(1+i))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var $pt=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const Fpt={init:Opt,forward:Lpt,inverse:Dpt,names:$pt,phi1z:jpt};function Vpt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function zpt(t){var e,n,r,i,s,o,a,l,c=t.x,u=t.y;return r=Pt(c-this.long0,this.over),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),o=this.sin_p14*e+this.cos_p14*n*i,s=1,o>0||Math.abs(o)<=bt?(a=this.x0+this.a*s*n*Math.sin(r)/o,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=l,t}function Gpt(t){var e,n,r,i,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),r=Math.cos(i),o=e0(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),s=Pt(this.long0+s,this.over)):(o=this.phic0,s=0),t.x=s,t.y=o,t}var Upt=["gnom"];const Bpt={init:Vpt,forward:zpt,inverse:Gpt,names:Upt};function Wpt(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*ot:ot;for(var r=Math.asin(.5*e),i,s,o,a,l=0;l<30;l++)if(s=Math.sin(r),o=Math.cos(r),a=t*s,i=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-s/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),r+=i,Math.abs(i)<=1e-10)return r;return NaN}function Hpt(){this.sphere||(this.k0=Gd(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function qpt(t){var e=t.x,n=t.y,r,i,s=Pt(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var o=Rg(this.e,Math.sin(n));r=this.x0+this.a*this.k0*s,i=this.y0+this.a*o*.5/this.k0}return t.x=r,t.y=i,t}function Kpt(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=Pt(this.long0+t.x/this.a/Math.cos(this.lat_ts),this.over),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=Wpt(this.e,2*t.y*this.k0/this.a),e=Pt(this.long0+t.x/(this.a*this.k0),this.over)),t.x=e,t.y=n,t}var Ypt=["cea"];const Xpt={init:Hpt,forward:qpt,inverse:Kpt,names:Ypt};function Zpt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Jpt(t){var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i=p0(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t}function Qpt(t){var e=t.x,n=t.y;return t.x=Pt(this.long0+(e-this.x0)/(this.a*this.rc),this.over),t.y=p0(this.lat0+(n-this.y0)/this.a),t}var emt=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const tmt={init:Zpt,forward:Jpt,inverse:Qpt,names:emt};var koe=20;function nmt(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=XI(this.es),this.e1=ZI(this.es),this.e2=JI(this.es),this.e3=QI(this.es),this.ml0=this.a*Fa(this.e0,this.e1,this.e2,this.e3,this.lat0)}function rmt(t){var e=t.x,n=t.y,r,i,s,o=Pt(e-this.long0,this.over);if(s=o*Math.sin(n),this.sphere)Math.abs(n)<=bt?(r=this.a*o,i=-1*this.a*this.lat0):(r=this.a*Math.sin(s)/Math.tan(n),i=this.a*(p0(n-this.lat0)+(1-Math.cos(s))/Math.tan(n)));else if(Math.abs(n)<=bt)r=this.a*o,i=-1*this.ml0;else{var a=mq(this.a,this.e,Math.sin(n))/Math.tan(n);r=a*Math.sin(s),i=this.a*Fa(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+a*(1-Math.cos(s))}return t.x=r+this.x0,t.y=i+this.y0,t}function imt(t){var e,n,r,i,s,o,a,l,c;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=bt)e=Pt(r/this.a+this.long0,this.over),n=0;else{o=this.lat0+i/this.a,a=r*r/this.a/this.a+o*o,l=o;var u;for(s=koe;s;--s)if(u=Math.tan(l),c=-1*(o*(l*u+1)-l-.5*(l*l+a)*u)/((l-o)/u-1),l+=c,Math.abs(c)<=bt){n=l;break}e=Pt(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n),this.over)}else if(Math.abs(i+this.ml0)<=bt)n=0,e=Pt(this.long0+r/this.a,this.over);else{o=(this.ml0+i)/this.a,a=r*r/this.a/this.a+o*o,l=o;var h,f,g,y,_;for(s=koe;s;--s)if(_=this.e*Math.sin(l),h=Math.sqrt(1-_*_)*Math.tan(l),f=this.a*Fa(this.e0,this.e1,this.e2,this.e3,l),g=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),y=f/this.a,c=(o*(h*y+1)-y-.5*h*(y*y+a))/(this.es*Math.sin(2*l)*(y*y+a-2*o*y)/(4*h)+(o-y)*(h*g-2/Math.sin(2*l))-g),l-=c,Math.abs(c)<=bt){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Pt(this.long0+Math.asin(r*h/this.a)/Math.sin(n),this.over)}return t.x=e,t.y=n,t}var smt=["Polyconic","American_Polyconic","poly"];const omt={init:nmt,forward:rmt,inverse:imt,names:smt};function amt(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function lmt(t){var e,n=t.x,r=t.y,i=r-this.lat0,s=n-this.long0,o=i/qT*1e-5,a=s,l=1,c=0;for(e=1;e<=10;e++)l=l*o,c=c+this.A[e]*l;var u=c,h=a,f=1,g=0,y,_,b=0,T=0;for(e=1;e<=6;e++)y=f*u-g*h,_=g*u+f*h,f=y,g=_,b=b+this.B_re[e]*f-this.B_im[e]*g,T=T+this.B_im[e]*f+this.B_re[e]*g;return t.x=T*this.a+this.x0,t.y=b*this.a+this.y0,t}function cmt(t){var e,n=t.x,r=t.y,i=n-this.x0,s=r-this.y0,o=s/this.a,a=i/this.a,l=1,c=0,u,h,f=0,g=0;for(e=1;e<=6;e++)u=l*o-c*a,h=c*o+l*a,l=u,c=h,f=f+this.C_re[e]*l-this.C_im[e]*c,g=g+this.C_im[e]*l+this.C_re[e]*c;for(var y=0;y<this.iterations;y++){var _=f,b=g,T,A,I=o,P=a;for(e=2;e<=6;e++)T=_*f-b*g,A=b*f+_*g,_=T,b=A,I=I+(e-1)*(this.B_re[e]*_-this.B_im[e]*b),P=P+(e-1)*(this.B_im[e]*_+this.B_re[e]*b);_=1,b=0;var N=this.B_re[1],L=this.B_im[1];for(e=2;e<=6;e++)T=_*f-b*g,A=b*f+_*g,_=T,b=A,N=N+e*(this.B_re[e]*_-this.B_im[e]*b),L=L+e*(this.B_im[e]*_+this.B_re[e]*b);var C=N*N+L*L;f=(I*N+P*L)/C,g=(P*N-I*L)/C}var M=f,O=g,D=1,V=0;for(e=1;e<=9;e++)D=D*M,V=V+this.D[e]*D;var U=this.lat0+V*qT*1e5,G=this.long0+O;return t.x=G,t.y=U,t}var umt=["New_Zealand_Map_Grid","nzmg"];const hmt={init:amt,forward:lmt,inverse:cmt,names:umt};function dmt(){}function fmt(t){var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i=this.x0+this.a*r,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=s,t}function pmt(t){t.x-=this.x0,t.y-=this.y0;var e=Pt(this.long0+t.x/this.a,this.over),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var mmt=["Miller_Cylindrical","mill"];const gmt={init:dmt,forward:fmt,inverse:pmt,names:mmt};var ymt=20;function vmt(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=cq(this.es)}function _mt(t){var e,n,r=t.x,i=t.y;if(r=Pt(r-this.long0,this.over),this.sphere){if(!this.m)i=this.n!==1?Math.asin(this.n*Math.sin(i)):i;else for(var s=this.n*Math.sin(i),o=ymt;o;--o){var a=(this.m*i+Math.sin(i)-s)/(this.m+Math.cos(i));if(i-=a,Math.abs(a)<bt)break}e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),c=Math.cos(i);n=this.a*Pb(i,l,c,this.en),e=this.a*r*c/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t}function xmt(t){var e,n,r,i;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=e0((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=e0(Math.sin(e)/this.n)),r=Pt(r+this.long0,this.over),e=p0(e)):(e=uq(t.y/this.a,this.es,this.en),i=Math.abs(e),i<ot?(i=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)),r=Pt(n,this.over)):i-bt<ot&&(r=this.long0)),t.x=r,t.y=e,t}var wmt=["Sinusoidal","sinu"];const bmt={init:vmt,forward:_mt,inverse:xmt,names:wmt};function Emt(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function Smt(t){for(var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i=n,s=Math.PI*Math.sin(n);;){var o=-(i+Math.sin(i)-s)/(1+Math.cos(i));if(i+=o,Math.abs(o)<bt)break}i/=2,Math.PI/2-Math.abs(n)<bt&&(r=0);var a=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=a,t.y=l,t}function Tmt(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=Pt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t}var kmt=["Mollweide","moll"];const Amt={init:Emt,forward:Smt,inverse:Tmt,names:kmt};function Imt(){Math.abs(this.lat1+this.lat2)<bt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=XI(this.es),this.e1=ZI(this.es),this.e2=JI(this.es),this.e3=QI(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Gd(this.e,this.sin_phi,this.cos_phi),this.ml1=Fa(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<bt?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Gd(this.e,this.sin_phi,this.cos_phi),this.ml2=Fa(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Fa(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Pmt(t){var e=t.x,n=t.y,r;if(this.sphere)r=this.a*(this.g-n);else{var i=Fa(this.e0,this.e1,this.e2,this.e3,n);r=this.a*(this.g-i)}var s=this.ns*Pt(e-this.long0,this.over),o=this.x0+r*Math.sin(s),a=this.y0+this.rh-r*Math.cos(s);return t.x=o,t.y=a,t}function Cmt(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,r,i;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(n!==0&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=Pt(this.long0+s/this.ns,this.over),r=p0(this.g-n/this.a),t.x=i,t.y=r,t;var o=this.g-n/this.a;return r=e5(o,this.e0,this.e1,this.e2,this.e3),i=Pt(this.long0+s/this.ns,this.over),t.x=i,t.y=r,t}var Rmt=["Equidistant_Conic","eqdc"];const Mmt={init:Imt,forward:Pmt,inverse:Cmt,names:Rmt};function Nmt(){this.R=this.a}function Omt(t){var e=t.x,n=t.y,r=Pt(e-this.long0,this.over),i,s;Math.abs(n)<=bt&&(i=this.x0+this.R*r,s=this.y0);var o=e0(2*Math.abs(n/Math.PI));(Math.abs(r)<=bt||Math.abs(Math.abs(n)-ot)<=bt)&&(i=this.x0,n>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,c=Math.sin(o),u=Math.cos(o),h=u/(c+u-1),f=h*h,g=h*(2/c-1),y=g*g,_=Math.PI*this.R*(a*(h-y)+Math.sqrt(l*(h-y)*(h-y)-(y+l)*(f-y)))/(y+l);r<0&&(_=-_),i=this.x0+_;var b=l+h;return _=Math.PI*this.R*(g*b-a*Math.sqrt((y+l)*(l+1)-b*b))/(y+l),n>=0?s=this.y0+_:s=this.y0-_,t.x=i,t.y=s,t}function Lmt(t){var e,n,r,i,s,o,a,l,c,u,h,f,g;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,r=t.x/h,i=t.y/h,s=r*r+i*i,o=-Math.abs(i)*(1+s),a=o-2*i*i+r*r,l=-2*o+1+2*i*i+s*s,g=i*i/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,c=(o-a*a/3/l)/l,u=2*Math.sqrt(-c/3),h=3*g/c/u,Math.abs(h)>1&&(h>=0?h=1:h=-1),f=Math.acos(h)/3,t.y>=0?n=(-u*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI:n=-(-u*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI,Math.abs(r)<bt?e=this.long0:e=Pt(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(r*r-i*i)+s*s))/2/r,this.over),t.x=e,t.y=n,t}var Dmt=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const jmt={init:Nmt,forward:Omt,inverse:Lmt,names:Dmt};function $mt(t,e,n,r,i,s){const o=r-e,a=Math.atan((1-s)*Math.tan(t)),l=Math.atan((1-s)*Math.tan(n)),c=Math.sin(a),u=Math.cos(a),h=Math.sin(l),f=Math.cos(l);let g=o,y,_=100,b,T,A,I,P,N,L,C,M,O,D,V,U,G;do{if(b=Math.sin(g),T=Math.cos(g),A=Math.sqrt(f*b*(f*b)+(u*h-c*f*T)*(u*h-c*f*T)),A===0)return{azi1:0,s12:0};I=c*h+u*f*T,P=Math.atan2(A,I),N=u*f*b/A,L=1-N*N,C=L!==0?I-2*c*h/L:0,M=s/16*L*(4+s*(4-3*L)),y=g,g=o+(1-M)*s*N*(P+M*A*(C+M*I*(-1+2*C*C)))}while(Math.abs(g-y)>1e-12&&--_>0);return _===0?{azi1:NaN,s12:NaN}:(O=L*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),D=1+O/16384*(4096+O*(-768+O*(320-175*O))),V=O/1024*(256+O*(-128+O*(74-47*O))),U=V*A*(C+V/4*(I*(-1+2*C*C)-V/6*C*(-3+4*A*A)*(-3+4*C*C))),G=i*(1-s)*D*(P-U),{azi1:Math.atan2(f*b,u*h-c*f*T),s12:G})}function Fmt(t,e,n,r,i,s){const o=Math.atan((1-s)*Math.tan(t)),a=Math.sin(o),l=Math.cos(o),c=Math.sin(n),u=Math.cos(n),h=Math.atan2(a,l*u),f=l*c,g=1-f*f,y=g*(i*i-i*(1-s)*(i*(1-s)))/(i*(1-s)*(i*(1-s))),_=1+y/16384*(4096+y*(-768+y*(320-175*y))),b=y/1024*(256+y*(-128+y*(74-47*y)));let T=r/(i*(1-s)*_),A,I=100,P,N,L,C;do P=Math.cos(2*h+T),N=Math.sin(T),L=Math.cos(T),C=b*N*(P+b/4*(L*(-1+2*P*P)-b/6*P*(-3+4*N*N)*(-3+4*P*P))),A=T,T=r/(i*(1-s)*_)+C;while(Math.abs(T-A)>1e-12&&--I>0);if(I===0)return{lat2:NaN,lon2:NaN};const M=a*N-l*L*u,O=Math.atan2(a*L+l*N*u,(1-s)*Math.sqrt(f*f+M*M)),D=Math.atan2(N*c,l*L-a*N*u),V=s/16*g*(4+s*(4-3*g)),U=D-(1-V)*s*f*(T+V*N*(P+V*L*(-1+2*P*P))),G=e+U;return{lat2:O,lon2:G}}function Vmt(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function zmt(t){var e=t.x,n=t.y,r=Math.sin(t.y),i=Math.cos(t.y),s=Pt(e-this.long0,this.over),o,a,l,c,u,h,f,g,y,_,b;return this.sphere?Math.abs(this.sin_p12-1)<=bt?(t.x=this.x0+this.a*(ot-n)*Math.sin(s),t.y=this.y0-this.a*(ot-n)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=bt?(t.x=this.x0+this.a*(ot+n)*Math.sin(s),t.y=this.y0+this.a*(ot+n)*Math.cos(s),t):(y=this.sin_p12*r+this.cos_p12*i*Math.cos(s),f=Math.acos(y),g=f?f/Math.sin(f):1,t.x=this.x0+this.a*g*i*Math.sin(s),t.y=this.y0+this.a*g*(this.cos_p12*r-this.sin_p12*i*Math.cos(s)),t):(o=XI(this.es),a=ZI(this.es),l=JI(this.es),c=QI(this.es),Math.abs(this.sin_p12-1)<=bt?(u=this.a*Fa(o,a,l,c,ot),h=this.a*Fa(o,a,l,c,n),t.x=this.x0+(u-h)*Math.sin(s),t.y=this.y0-(u-h)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=bt?(u=this.a*Fa(o,a,l,c,ot),h=this.a*Fa(o,a,l,c,n),t.x=this.x0+(u+h)*Math.sin(s),t.y=this.y0+(u+h)*Math.cos(s),t):Math.abs(e)<bt&&Math.abs(n-this.lat0)<bt?(t.x=t.y=0,t):(_=$mt(this.lat0,this.long0,n,e,this.a,this.f),b=_.azi1,t.x=_.s12*Math.sin(b),t.y=_.s12*Math.cos(b),t))}function Gmt(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,s,o,a,l,c,u,h,f,g,y,_,b;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*ot*this.a?void 0:(n=e/this.a,r=Math.sin(n),i=Math.cos(n),s=this.long0,Math.abs(e)<=bt?o=this.lat0:(o=e0(i*this.sin_p12+t.y*r*this.cos_p12/e),a=Math.abs(this.lat0)-ot,Math.abs(a)<=bt?this.lat0>=0?s=Pt(this.long0+Math.atan2(t.x,-t.y),this.over):s=Pt(this.long0-Math.atan2(-t.x,t.y),this.over):s=Pt(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r),this.over)),t.x=s,t.y=o,t)):(l=XI(this.es),c=ZI(this.es),u=JI(this.es),h=QI(this.es),Math.abs(this.sin_p12-1)<=bt?(f=this.a*Fa(l,c,u,h,ot),e=Math.sqrt(t.x*t.x+t.y*t.y),g=f-e,o=e5(g/this.a,l,c,u,h),s=Pt(this.long0+Math.atan2(t.x,-1*t.y),this.over),t.x=s,t.y=o,t):Math.abs(this.sin_p12+1)<=bt?(f=this.a*Fa(l,c,u,h,ot),e=Math.sqrt(t.x*t.x+t.y*t.y),g=e-f,o=e5(g/this.a,l,c,u,h),s=Pt(this.long0+Math.atan2(t.x,t.y),this.over),t.x=s,t.y=o,t):(y=Math.atan2(t.x,t.y),_=Math.sqrt(t.x*t.x+t.y*t.y),b=Fmt(this.lat0,this.long0,y,_,this.a,this.f),t.x=b.lon2,t.y=b.lat2,t))}var Umt=["Azimuthal_Equidistant","aeqd"];const Bmt={init:Vmt,forward:zmt,inverse:Gmt,names:Umt};function Wmt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Hmt(t){var e,n,r,i,s,o,a,l,c=t.x,u=t.y;return r=Pt(c-this.long0,this.over),e=Math.sin(u),n=Math.cos(u),i=Math.cos(r),o=this.sin_p14*e+this.cos_p14*n*i,s=1,(o>0||Math.abs(o)<=bt)&&(a=this.a*s*n*Math.sin(r),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*i)),t.x=a,t.y=l,t}function qmt(t){var e,n,r,i,s,o,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=e0(e/this.a),r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=bt?(a=this.lat0,t.x=o,t.y=a,t):(a=e0(i*this.sin_p14+t.y*r*this.cos_p14/e),s=Math.abs(this.lat0)-ot,Math.abs(s)<=bt?(this.lat0>=0?o=Pt(this.long0+Math.atan2(t.x,-t.y),this.over):o=Pt(this.long0-Math.atan2(-t.x,t.y),this.over),t.x=o,t.y=a,t):(o=Pt(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r),this.over),t.x=o,t.y=a,t))}var Kmt=["ortho"];const Ymt={init:Wmt,forward:Hmt,inverse:qmt,names:Kmt};var Oi={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Lr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Xmt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=ot-Or/2?this.face=Oi.TOP:this.lat0<=-(ot-Or/2)?this.face=Oi.BOTTOM:Math.abs(this.long0)<=Or?this.face=Oi.FRONT:Math.abs(this.long0)<=ot+Or?this.face=this.long0>0?Oi.RIGHT:Oi.LEFT:this.face=Oi.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Zmt(t){var e={x:0,y:0},n,r,i,s,o,a,l={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,r=t.x,this.face===Oi.TOP)s=ot-n,r>=Or&&r<=ot+Or?(l.value=Lr.AREA_0,i=r-ot):r>ot+Or||r<=-(ot+Or)?(l.value=Lr.AREA_1,i=r>0?r-hs:r+hs):r>-(ot+Or)&&r<=-Or?(l.value=Lr.AREA_2,i=r+ot):(l.value=Lr.AREA_3,i=r);else if(this.face===Oi.BOTTOM)s=ot+n,r>=Or&&r<=ot+Or?(l.value=Lr.AREA_0,i=-r+ot):r<Or&&r>=-Or?(l.value=Lr.AREA_1,i=-r):r<-Or&&r>=-(ot+Or)?(l.value=Lr.AREA_2,i=-r-ot):(l.value=Lr.AREA_3,i=r>0?-r+hs:-r-hs);else{var c,u,h,f,g,y,_;this.face===Oi.RIGHT?r=Sw(r,+ot):this.face===Oi.BACK?r=Sw(r,+hs):this.face===Oi.LEFT&&(r=Sw(r,-ot)),f=Math.sin(n),g=Math.cos(n),y=Math.sin(r),_=Math.cos(r),c=g*_,u=g*y,h=f,this.face===Oi.FRONT?(s=Math.acos(c),i=IR(s,h,u,l)):this.face===Oi.RIGHT?(s=Math.acos(u),i=IR(s,h,-c,l)):this.face===Oi.BACK?(s=Math.acos(-c),i=IR(s,h,-u,l)):this.face===Oi.LEFT?(s=Math.acos(-u),i=IR(s,h,c,l)):(s=i=0,l.value=Lr.AREA_0)}return a=Math.atan(12/hs*(i+Math.acos(Math.sin(i)*Math.cos(Or))-ot)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===Lr.AREA_1?a+=ot:l.value===Lr.AREA_2?a+=hs:l.value===Lr.AREA_3&&(a+=1.5*hs),e.x=o*Math.cos(a),e.y=o*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function Jmt(t){var e={lam:0,phi:0},n,r,i,s,o,a,l,c,u,h={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?h.value=Lr.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(h.value=Lr.AREA_1,n-=ot):t.x<0&&-t.x>=Math.abs(t.y)?(h.value=Lr.AREA_2,n=n<0?n+hs:n-hs):(h.value=Lr.AREA_3,n+=ot),u=hs/12*Math.tan(n),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),i=Math.cos(n),s=Math.tan(r),l=1-i*i*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===Oi.TOP)c=Math.acos(l),e.phi=ot-c,h.value===Lr.AREA_0?e.lam=a+ot:h.value===Lr.AREA_1?e.lam=a<0?a+hs:a-hs:h.value===Lr.AREA_2?e.lam=a-ot:e.lam=a;else if(this.face===Oi.BOTTOM)c=Math.acos(l),e.phi=c-ot,h.value===Lr.AREA_0?e.lam=-a+ot:h.value===Lr.AREA_1?e.lam=-a:h.value===Lr.AREA_2?e.lam=-a-ot:e.lam=a<0?-a-hs:-a+hs;else{var f,g,y;f=l,u=f*f,u>=1?y=0:y=Math.sqrt(1-u)*Math.sin(a),u+=y*y,u>=1?g=0:g=Math.sqrt(1-u),h.value===Lr.AREA_1?(u=g,g=-y,y=u):h.value===Lr.AREA_2?(g=-g,y=-y):h.value===Lr.AREA_3&&(u=g,g=y,y=-u),this.face===Oi.RIGHT?(u=f,f=-g,g=u):this.face===Oi.BACK?(f=-f,g=-g):this.face===Oi.LEFT&&(u=f,f=g,g=-u),e.phi=Math.acos(-y)-ot,e.lam=Math.atan2(g,f),this.face===Oi.RIGHT?e.lam=Sw(e.lam,-ot):this.face===Oi.BACK?e.lam=Sw(e.lam,-hs):this.face===Oi.LEFT&&(e.lam=Sw(e.lam,+ot))}if(this.es!==0){var _,b,T;_=e.phi<0?1:0,b=Math.tan(e.phi),T=this.b/Math.sqrt(b*b+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-T*T)/(this.one_minus_f*T)),_&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function IR(t,e,n,r){var i;return t<bt?(r.value=Lr.AREA_0,i=0):(i=Math.atan2(e,n),Math.abs(i)<=Or?r.value=Lr.AREA_0:i>Or&&i<=ot+Or?(r.value=Lr.AREA_1,i-=ot):i>ot+Or||i<=-(ot+Or)?(r.value=Lr.AREA_2,i=i>=0?i-hs:i+hs):(r.value=Lr.AREA_3,i+=ot)),i}function Sw(t,e){var n=t+e;return n<-hs?n+=EA:n>+hs&&(n-=EA),n}var Qmt=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const egt={init:Xmt,forward:Zmt,inverse:Jmt,names:Qmt};var Lz=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],JS=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],K2e=.8487,Y2e=1.3523,X2e=Sl/5,tgt=1/X2e,qx=18,t5=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},ngt=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function rgt(t,e,n,r){for(var i=e;r;--r){var s=t(i);if(i-=s,Math.abs(s)<n)break}return i}function igt(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function sgt(t){var e=Pt(t.x-this.long0,this.over),n=Math.abs(t.y),r=Math.floor(n*X2e);r<0?r=0:r>=qx&&(r=qx-1),n=Sl*(n-tgt*r);var i={x:t5(Lz[r],n)*e,y:t5(JS[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*K2e+this.x0,i.y=i.y*this.a*Y2e+this.y0,i}function ogt(t){var e={x:(t.x-this.x0)/(this.a*K2e),y:Math.abs(t.y-this.y0)/(this.a*Y2e)};if(e.y>=1)e.x/=Lz[qx][0],e.y=t.y<0?-ot:ot;else{var n=Math.floor(e.y*qx);for(n<0?n=0:n>=qx&&(n=qx-1);;)if(JS[n][0]>e.y)--n;else if(JS[n+1][0]<=e.y)++n;else break;var r=JS[n],i=5*(e.y-r[0])/(JS[n+1][0]-r[0]);i=rgt(function(s){return(t5(r,s)-e.y)/ngt(r,s)},i,bt,100),e.x/=t5(Lz[n],i),e.y=(5*n+i)*Ki,t.y<0&&(e.y=-e.y)}return e.x=Pt(e.x+this.long0,this.over),e}var agt=["Robinson","robin"];const lgt={init:igt,forward:sgt,inverse:ogt,names:agt};function cgt(){this.name="geocent"}function ugt(t){var e=j2e(t,this.es,this.a);return e}function hgt(t){var e=$2e(t,this.es,this.a,this.b);return e}var dgt=["Geocentric","geocentric","geocent","Geocent"];const fgt={init:cgt,forward:ugt,inverse:hgt,names:dgt};var sa={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},nS={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function pgt(){if(Object.keys(nS).forEach((function(n){if(typeof this[n]>"u")this[n]=nS[n].def;else{if(nS[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);nS[n].num&&(this[n]=parseFloat(this[n]))}nS[n].degrees&&(this[n]=this[n]*Ki)}).bind(this)),Math.abs(Math.abs(this.lat0)-ot)<bt?this.mode=this.lat0<0?sa.S_POLE:sa.N_POLE:Math.abs(this.lat0)<bt?this.mode=sa.EQUIT:(this.mode=sa.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function mgt(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i,s;switch(this.mode){case sa.OBLIQ:s=this.sinph0*e+this.cosph0*n*r;break;case sa.EQUIT:s=n*r;break;case sa.S_POLE:s=-e;break;case sa.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),i=s*n*Math.sin(t.x),this.mode){case sa.OBLIQ:s*=this.cosph0*e-this.sinph0*n*r;break;case sa.EQUIT:s*=e;break;case sa.N_POLE:s*=-(n*r);break;case sa.S_POLE:s*=n*r;break}var o,a;return o=s*this.cg+i*this.sg,a=1/(o*this.sw*this.h1+this.cw),i=(i*this.cg-s*this.sg)*this.cw*a,s=o*a,t.x=i*this.a,t.y=s*this.a,t}function ggt(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,r,i;i=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*i,r=this.pn1*t.y*this.cw*i,t.x=n*this.cg+r*this.sg,t.y=r*this.cg-n*this.sg;var s=xl(t.x,t.y);if(Math.abs(s)<bt)e.x=0,e.y=t.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case sa.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*a*this.cosph0/s),t.y=(o-this.sinph0*Math.sin(e.y))*s,t.x*=a*this.cosph0;break;case sa.EQUIT:e.y=Math.asin(t.y*a/s),t.y=o*s,t.x*=a;break;case sa.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case sa.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var ygt=["Tilted_Perspective","tpers"];const vgt={init:pgt,forward:mgt,inverse:ggt,names:ygt};function _gt(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function xgt(t){var e=t.x,n=t.y,r,i,s,o;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var a=this.radius_p/xl(this.radius_p*Math.cos(n),Math.sin(n));if(i=a*Math.cos(e)*Math.cos(n),s=a*Math.sin(e)*Math.cos(n),o=a*Math.sin(n),(this.radius_g-i)*i-s*s-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/xl(o,r)),t.y=this.radius_g_1*Math.atan(o/r)):(t.x=this.radius_g_1*Math.atan(s/r),t.y=this.radius_g_1*Math.atan(o/xl(s,r)))}else this.shape==="sphere"&&(r=Math.cos(n),i=Math.cos(e)*r,s=Math.sin(e)*r,o=Math.sin(n),r=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/xl(o,r)),t.y=this.radius_g_1*Math.atan(o/r)):(t.x=this.radius_g_1*Math.atan(s/r),t.y=this.radius_g_1*Math.atan(o/xl(s,r))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function wgt(t){var e=-1,n=0,r=0,i,s,o,a;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*xl(1,r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*xl(1,n));var l=r/this.radius_p;if(i=n*n+l*l+e*e,s=2*this.radius_g*e,o=s*s-4*i*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-s-Math.sqrt(o))/(2*i),e=this.radius_g+a*e,n*=a,r*=a,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+r*r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),i=n*n+r*r+e*e,s=2*this.radius_g*e,o=s*s-4*i*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-s-Math.sqrt(o))/(2*i),e=this.radius_g+a*e,n*=a,r*=a,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var bgt=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Egt={init:_gt,forward:xgt,inverse:wgt,names:bgt};var KT=1.340264,YT=-.081106,XT=893e-6,ZT=.003796,n5=Math.sqrt(3)/2;function Sgt(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function Tgt(t){var e=Pt(t.x-this.long0,this.over),n=t.y,r=Math.asin(n5*Math.sin(n)),i=r*r,s=i*i*i;return t.x=e*Math.cos(r)/(n5*(KT+3*YT*i+s*(7*XT+9*ZT*i))),t.y=r*(KT+YT*i+s*(XT+ZT*i)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function kgt(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,n=12,r=t.y,i,s,o,a,l,c;for(c=0;c<n&&(i=r*r,s=i*i*i,o=r*(KT+YT*i+s*(XT+ZT*i))-t.y,a=KT+3*YT*i+s*(7*XT+9*ZT*i),r-=l=o/a,!(Math.abs(l)<e));++c);return i=r*r,s=i*i*i,t.x=n5*t.x*(KT+3*YT*i+s*(7*XT+9*ZT*i))/Math.cos(r),t.y=Math.asin(Math.sin(r)/n5),t.x=Pt(t.x+this.long0,this.over),t}var Agt=["eqearth","Equal Earth","Equal_Earth"];const Igt={init:Sgt,forward:Tgt,inverse:kgt,names:Agt};var kA=1e-10;function Pgt(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<kA)throw new Error;this.es?(this.en=cq(this.es),this.m1=Pb(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Rgt,this.forward=Cgt):(Math.abs(this.phi1)+kA>=ot?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Ngt,this.forward=Mgt)}function Cgt(t){var e=Pt(t.x-(this.long0||0),this.over),n=t.y,r,i,s;return r=this.am1+this.m1-Pb(n,i=Math.sin(n),s=Math.cos(n),this.en),i=s*e/(r*Math.sqrt(1-this.es*i*i)),t.x=r*Math.sin(i),t.y=this.am1-r*Math.cos(i),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function Rgt(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r,i;if(n=xl(t.x,t.y=this.am1-t.y),i=uq(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(i))<ot)e=Math.sin(i),r=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(i);else if(Math.abs(e-ot)<=kA)r=0;else throw new Error;return t.x=Pt(r+(this.long0||0),this.over),t.y=p0(i),t}function Mgt(t){var e=Pt(t.x-(this.long0||0),this.over),n=t.y,r,i;return i=this.cphi1+this.phi1-n,Math.abs(i)>kA?(t.x=i*Math.sin(r=e*Math.cos(n)/i),t.y=this.cphi1-i*Math.cos(r)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function Ngt(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r=xl(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-r,Math.abs(n)>ot)throw new Error;return Math.abs(Math.abs(n)-ot)<=kA?e=0:e=r*Math.atan2(t.x,t.y)/Math.cos(n),t.x=Pt(e+(this.long0||0),this.over),t.y=p0(n),t}var Ogt=["bonne","Bonne (Werner lat_1=90)"];const Lgt={init:Pgt,names:Ogt},Aoe={OBLIQUE:{forward:Vgt,inverse:Ggt},TRANSVERSE:{forward:zgt,inverse:Ugt}},r5={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function Dgt(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=N2e.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const t=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=pu(t);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let n;const r=Object.keys(r5),i=a=>{if(typeof this[a]>"u")return;const l=parseFloat(this[a])*Ki;if(isNaN(l))throw new Error("Invalid value for "+a+": "+this[a]);return l};for(let a=0;a<r.length;a++){const l=r[a],c=r5[l],u=Object.entries(c);if(u.some(([f])=>typeof this[f]<"u")){n=c;for(let f=0;f<u.length;f++){const[g,y]=u[f],_=i(g);if(typeof _>"u")throw new Error("Missing parameter: "+g+".");this[y]=_}break}}if(!n)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:s,phip:o}=Fgt(this,n);this.lamp=s,Math.abs(o)>bt?(this.cphip=Math.cos(o),this.sphip=Math.sin(o),this.projectionType=Aoe.OBLIQUE):this.projectionType=Aoe.TRANSVERSE}function jgt(t){return this.projectionType.forward(this,t)}function $gt(t){return this.projectionType.inverse(this,t)}function Fgt(t,e){let n,r;if(e===r5.ROTATE){let i=t.oLongC,s=t.oLatC,o=t.oAlpha;if(Math.abs(Math.abs(s)-ot)<=bt)throw new Error("Invalid value for o_lat_c: "+t.o_lat_c+" should be < 90");r=i+Math.atan2(-1*Math.cos(o),-1*Math.sin(o)*Math.sin(s)),n=Math.asin(Math.cos(s)*Math.sin(o))}else if(e===r5.NEW_POLE)r=t.oLongP,n=t.oLatP;else{let i=t.oLong1,s=t.oLat1,o=t.oLong2,a=t.oLat2,l=Math.abs(s);if(Math.abs(s)>ot-bt)throw new Error("Invalid value for o_lat_1: "+t.o_lat_1+" should be < 90");if(Math.abs(a)>ot-bt)throw new Error("Invalid value for o_lat_2: "+t.o_lat_2+" should be < 90");if(Math.abs(s-a)<bt)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<bt)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(s)*Math.sin(a)*Math.cos(i)-Math.sin(s)*Math.cos(a)*Math.cos(o),Math.sin(s)*Math.cos(a)*Math.sin(o)-Math.cos(s)*Math.sin(a)*Math.sin(i)),n=Math.atan(-1*Math.cos(r-i)/Math.tan(s))}return{lamp:r,phip:n}}function Vgt(t,e){let{x:n,y:r}=e;n+=t.long0;const i=Math.cos(n),s=Math.sin(r),o=Math.cos(r);e.x=Pt(Math.atan2(o*Math.sin(n),t.sphip*o*i+t.cphip*s)+t.lamp),e.y=Math.asin(t.sphip*s-t.cphip*o*i);const a=t.obliqueProjection.forward(e);return t.isIdentity&&(a.x*=Sl,a.y*=Sl),a}function zgt(t,e){let{x:n,y:r}=e;n+=t.long0;const i=Math.cos(r),s=Math.cos(n);e.x=Pt(Math.atan2(i*Math.sin(n),Math.sin(r))+t.lamp),e.y=Math.asin(-1*i*s);const o=t.obliqueProjection.forward(e);return t.isIdentity&&(o.x*=Sl,o.y*=Sl),o}function Ggt(t,e){t.isIdentity&&(e.x*=Ki,e.y*=Ki);const n=t.obliqueProjection.inverse(e);let{x:r,y:i}=n;if(r<Number.MAX_VALUE){r-=t.lamp;const s=Math.cos(r),o=Math.sin(i),a=Math.cos(i);e.x=Math.atan2(a*Math.sin(r),t.sphip*a*s-t.cphip*o),e.y=Math.asin(t.sphip*o+t.cphip*a*s)}return e.x=Pt(e.x+t.long0),e}function Ugt(t,e){t.isIdentity&&(e.x*=Ki,e.y*=Ki);const n=t.obliqueProjection.inverse(e);let{x:r,y:i}=n;if(r<Number.MAX_VALUE){const s=Math.cos(i);r-=t.lamp,e.x=Math.atan2(s*Math.sin(r),-1*Math.sin(i)),e.y=Math.asin(s*Math.cos(r))}return e.x=Pt(e.x+t.long0),e}var Bgt=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const Wgt={init:Dgt,forward:jgt,inverse:$gt,names:Bgt};function Hgt(t){t.Proj.projections.add(I3),t.Proj.projections.add(P3),t.Proj.projections.add(Oft),t.Proj.projections.add(Uft),t.Proj.projections.add(Kft),t.Proj.projections.add(Qft),t.Proj.projections.add(spt),t.Proj.projections.add(upt),t.Proj.projections.add(mpt),t.Proj.projections.add(xpt),t.Proj.projections.add(Npt),t.Proj.projections.add(Fpt),t.Proj.projections.add(Bpt),t.Proj.projections.add(Xpt),t.Proj.projections.add(tmt),t.Proj.projections.add(omt),t.Proj.projections.add(hmt),t.Proj.projections.add(gmt),t.Proj.projections.add(bmt),t.Proj.projections.add(Amt),t.Proj.projections.add(Mmt),t.Proj.projections.add(jmt),t.Proj.projections.add(Bmt),t.Proj.projections.add(Ymt),t.Proj.projections.add(egt),t.Proj.projections.add(lgt),t.Proj.projections.add(fgt),t.Proj.projections.add(vgt),t.Proj.projections.add(Egt),t.Proj.projections.add(Igt),t.Proj.projections.add(Lgt),t.Proj.projections.add(Wgt)}const lr=Object.assign(Zdt,{defaultDatum:"WGS84",Proj:pu,WGS84:new pu("WGS84"),Point:H2,toPoint:F2e,defs:Io,nadgrid:Ndt,transform:QN,mgrs:Jdt,version:"__VERSION__"});Hgt(lr);class Z2e{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=yr,this.supportedMediaTypes=null}getReadOptions(e,n){if(n){let r=n.dataProjection?Qr(n.dataProjection):this.readProjection(e);n.extent&&r&&r.getUnits()==="tile-pixels"&&(r=Qr(r),r.setWorldExtent(n.extent)),n={dataProjection:r,featureProjection:n.featureProjection}}return this.adaptOptions(n)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return bn()}readFeature(e,n){return bn()}readFeatures(e,n){return bn()}readGeometry(e,n){return bn()}readProjection(e){return bn()}writeFeature(e,n){return bn()}writeFeatures(e,n){return bn()}writeGeometry(e,n){return bn()}}function kh(t,e,n){const r=n?Qr(n.featureProjection):null,i=n?Qr(n.dataProjection):null;let s=t;if(r&&i&&!t1(r,i)){e&&(s=t.clone());const o=e?r:i,a=e?i:r;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(fk(o,a))}if(e&&n&&n.decimals!==void 0){const o=Math.pow(10,n.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};s===t&&(s=t.clone()),s.applyTransform(a)}return s}const qgt={Point:Ti,LineString:ts,Polygon:Il,MultiPoint:o0,MultiLineString:vh,MultiPolygon:mp};function Kgt(t,e,n){return Array.isArray(e[0])?(Mle(t,0,e,n)||(t=t.slice(),KF(t,0,e,n)),t):(EG(t,0,e,n)||(t=t.slice(),W3(t,0,e,n)),t)}function J2e(t,e){const n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map(s=>J2e({...t,geometry:s})).flat();const r=n.type==="MultiPolygon"?"Polygon":n.type;if(r==="GeometryCollection"||r==="Circle")throw new Error("Unsupported geometry type: "+r);const i=n.layout.length;return kh(new vl(r,r==="Polygon"?Kgt(n.flatCoordinates,n.ends,i):n.flatCoordinates,n.ends?.flat(),i,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function gq(t,e){if(!t)return null;if(Array.isArray(t)){const r=t.map(i=>gq(i,e));return new uu(r)}const n=qgt[t.type];return kh(new n(t.flatCoordinates,t.layout||"XY",t.ends),!1,e)}class Ygt extends Z2e{constructor(){super()}getType(){return"json"}readFeature(e,n){return this.readFeatureFromObject(PR(e),this.getReadOptions(e,n))}readFeatures(e,n){return this.readFeaturesFromObject(PR(e),this.getReadOptions(e,n))}readFeatureFromObject(e,n){return bn()}readFeaturesFromObject(e,n){return bn()}readGeometry(e,n){return this.readGeometryFromObject(PR(e),this.getReadOptions(e,n))}readGeometryFromObject(e,n){return bn()}readProjection(e){return this.readProjectionFromObject(PR(e))}readProjectionFromObject(e){return bn()}writeFeature(e,n){return JSON.stringify(this.writeFeatureObject(e,n))}writeFeatureObject(e,n){return bn()}writeFeatures(e,n){return JSON.stringify(this.writeFeaturesObject(e,n))}writeFeaturesObject(e,n){return bn()}writeGeometry(e,n){return JSON.stringify(this.writeGeometryObject(e,n))}writeGeometryObject(e,n){return bn()}}function PR(t){if(typeof t=="string"){const e=JSON.parse(t);return e||null}return t!==null?t:null}class NL extends Ygt{constructor(e){e=e||{},super(),this.dataProjection=Qr(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Qr(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,n){let r=null;e.type==="Feature"?r=e:r={type:"Feature",geometry:e,properties:null};const i=yq(r.geometry);if(this.featureClass===vl)return J2e({geometry:i,id:r.id,properties:r.properties},n);const s=new yr;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&r.geometry_name&&s.setGeometryName(r.geometry_name),s.setGeometry(gq(i,n)),"id"in r&&s.setId(r.id),r.properties&&s.setProperties(r.properties,!0),s}readFeaturesFromObject(e,n){const r=e;let i=null;if(r.type==="FeatureCollection"){const s=e;i=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const c=this.readFeatureFromObject(o[a],n);c&&i.push(c)}}else i=[this.readFeatureFromObject(e,n)];return i.flat()}readGeometryFromObject(e,n){return Xgt(e,n)}readProjectionFromObject(e){const n=e.crs;let r;if(n)if(n.type=="name")r=Qr(n.properties.name);else if(n.type==="EPSG")r=Qr("EPSG:"+n.properties.code);else throw new Error("Unknown SRS type");else r=this.dataProjection;return r}writeFeatureObject(e,n){n=this.adaptOptions(n);const r={type:"Feature",geometry:null,properties:null},i=e.getId();if(i!==void 0&&(r.id=i),!e.hasProperties())return r;const s=e.getProperties(),o=e.getGeometry();return o&&(r.geometry=Dz(o,n),delete s[e.getGeometryName()]),b1(s)||(r.properties=s),r}writeFeaturesObject(e,n){n=this.adaptOptions(n);const r=[];for(let i=0,s=e.length;i<s;++i)r.push(this.writeFeatureObject(e[i],n));return{type:"FeatureCollection",features:r}}writeGeometryObject(e,n){return Dz(e,this.adaptOptions(n))}}function yq(t,e){if(!t)return null;let n;switch(t.type){case"Point":{n=Jgt(t);break}case"LineString":{n=Qgt(t);break}case"Polygon":{n=r0t(t);break}case"MultiPoint":{n=t0t(t);break}case"MultiLineString":{n=e0t(t);break}case"MultiPolygon":{n=n0t(t);break}case"GeometryCollection":{n=Zgt(t);break}default:throw new Error("Unsupported GeoJSON type: "+t.type)}return n}function Xgt(t,e){const n=yq(t);return gq(n,e)}function Zgt(t,e){return t.geometries.map(function(r){return yq(r)})}function Jgt(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:cv(e.length)}}function Qgt(t){const e=t.coordinates,n=e.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:cv(e[0]?.length||2)}}function e0t(t){const e=t.coordinates,n=e[0]?.[0]?.length||2,r=[],i=BA(r,0,e,n);return{type:"MultiLineString",flatCoordinates:r,ends:i,layout:cv(n)}}function t0t(t){const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:cv(e[0]?.length||2)}}function n0t(t){const e=t.coordinates,n=[],r=e[0]?.[0]?.[0].length||2,i=lle(n,0,e,r);return{type:"MultiPolygon",flatCoordinates:n,ends:i,layout:cv(r)}}function r0t(t){const e=t.coordinates,n=[],r=e[0]?.[0]?.length,i=BA(n,0,e,r);return{type:"Polygon",flatCoordinates:n,ends:i,layout:cv(r)}}function Dz(t,e){t=kh(t,!0,e);const n=t.getType();let r;switch(n){case"Point":{r=c0t(t);break}case"LineString":{r=s0t(t);break}case"Polygon":{r=u0t(t,e);break}case"MultiPoint":{r=a0t(t);break}case"MultiLineString":{r=o0t(t);break}case"MultiPolygon":{r=l0t(t,e);break}case"GeometryCollection":{r=i0t(t,e);break}case"Circle":{r={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+n)}return r}function i0t(t,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(r){return Dz(r,e)})}}function s0t(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function o0t(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function a0t(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function l0t(t,e){let n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}function c0t(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function u0t(t,e){let n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}const i5="http://www.w3.org/2001/XMLSchema-instance";function Sv(t,e){return Cb().createElementNS(t,e)}function Ah(t,e){return Q2e(t,e,[]).join("")}function Q2e(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)n.push(t.nodeValue);else{let r;for(r=t.firstChild;r;r=r.nextSibling)Q2e(r,e,n)}return n}function Jf(t){return"documentElement"in t}function Qf(t){return new DOMParser().parseFromString(t,"application/xml")}function Ioe(t,e){return(function(n,r){const i=t.call(e??this,n,r);if(i!==void 0){const s=r[r.length-1];xr(s,i)}})}function rh(t,e){return(function(n,r){const i=t.call(e??this,n,r);i!==void 0&&r[r.length-1].push(i)})}function vq(t,e){return(function(n,r){const i=t.call(this,n,r);i!==void 0&&(r[r.length-1]=i)})}function Qe(t,e,n){return(function(r,i){const s=t.call(this,r,i);if(s!==void 0){const o=i[i.length-1],a=e!==void 0?e:r.localName;o[a]=s}})}function pt(t,e){return(function(n,r,i){t.call(this,n,r,i),i[i.length-1].node.appendChild(n)})}function ebe(t,e){let n,r;return function(i,s,o){if(n===void 0){n={};const a={};a[i.localName]=t,n[i.namespaceURI]=a,r=Ih(i.localName)}tbe(n,r,s,o)}}function Ih(t,e){return(function(n,r,i){const o=r[r.length-1].node;let a=t;a===void 0&&(a=i);const l=o.namespaceURI;return Sv(l,a)})}const va=Ih();function Cl(t,e){const n=e.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=t[e[i]];return r}function It(t,e,n){n=n!==void 0?n:{};let r,i;for(r=0,i=t.length;r<i;++r)n[t[r]]=e;return n}function m0(t,e,n,r){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const s=t[i.namespaceURI];if(s!==void 0){const o=s[i.localName];o!==void 0&&o.call(r,i,n)}}}function ir(t,e,n,r,i){return r.push(t),m0(e,n,r,i),r.pop()}function tbe(t,e,n,r,i,s){const o=(i!==void 0?i:n).length;let a,l;for(let c=0;c<o;++c)a=n[c],a!==void 0&&(l=e.call(s,a,r,i!==void 0?i[c]:void 0),l!==void 0&&t[l.namespaceURI][l.localName].call(s,l,a,r))}function si(t,e,n,r,i,s,o){return i.push(t),tbe(e,n,r,i,s,o),i.pop()}let iF;function h0t(){return iF===void 0&&typeof XMLSerializer<"u"&&(iF=new XMLSerializer),iF}let sF;function Cb(){return sF===void 0&&typeof document<"u"&&(sF=document.implementation.createDocument("","",null)),sF}class nbe extends Z2e{constructor(){super(),this.xmlSerializer_=h0t()}getType(){return"xml"}readFeature(e,n){if(!e)return null;if(typeof e=="string"){const r=Qf(e);return this.readFeatureFromDocument(r,n)}return Jf(e)?this.readFeatureFromDocument(e,n):this.readFeatureFromNode(e,n)}readFeatureFromDocument(e,n){const r=this.readFeaturesFromDocument(e,n);return r.length>0?r[0]:null}readFeatureFromNode(e,n){return null}readFeatures(e,n){if(!e)return[];if(typeof e=="string"){const r=Qf(e);return this.readFeaturesFromDocument(r,n)}return Jf(e)?this.readFeaturesFromDocument(e,n):this.readFeaturesFromNode(e,n)}readFeaturesFromDocument(e,n){const r=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&xr(r,this.readFeaturesFromNode(i,n));return r}readFeaturesFromNode(e,n){return bn()}readGeometry(e,n){if(!e)return null;if(typeof e=="string"){const r=Qf(e);return this.readGeometryFromDocument(r,n)}return Jf(e)?this.readGeometryFromDocument(e,n):this.readGeometryFromNode(e,n)}readGeometryFromDocument(e,n){return null}readGeometryFromNode(e,n){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const n=Qf(e);return this.readProjectionFromDocument(n)}return Jf(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,n){const r=this.writeFeatureNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeFeatureNode(e,n){return null}writeFeatures(e,n){const r=this.writeFeaturesNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeFeaturesNode(e,n){return null}writeGeometry(e,n){const r=this.writeGeometryNode(e,n);return this.xmlSerializer_.serializeToString(r)}writeGeometryNode(e,n){return null}}function t0(t){const e=Ah(t,!1);return d0t(e)}function d0t(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e)return e[1]!==void 0||!1}function OL(t){const e=Ah(t,!1),n=Date.parse(e);return isNaN(n)?void 0:n/1e3}function br(t){const e=Ah(t,!1);return f0t(e)}function f0t(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function AA(t){const e=Ah(t,!1);return p0t(e)}function p0t(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function Bn(t){return Ah(t,!1).trim()}function q2(t,e){Ir(t,e?"1":"0")}function m0t(t,e){t.appendChild(Cb().createCDATASection(e))}function g0t(t,e){const n=new Date(e*1e3),r=n.getUTCFullYear()+"-"+_E(n.getUTCMonth()+1,2)+"-"+_E(n.getUTCDate(),2)+"T"+_E(n.getUTCHours(),2)+":"+_E(n.getUTCMinutes(),2)+":"+_E(n.getUTCSeconds(),2)+"Z";t.appendChild(Cb().createTextNode(r))}function gl(t,e){const n=e.toPrecision();t.appendChild(Cb().createTextNode(n))}function s5(t,e){const n=e.toString();t.appendChild(Cb().createTextNode(n))}const y0t=/^\s/,v0t=/\s$/,_0t=/(\n|\t|\r|<|&| {2})/;function Ir(t,e){typeof e=="string"&&(y0t.test(e)||v0t.test(e)||_0t.test(e))?e.split("]]>").forEach((n,r,i)=>{r<i.length-1&&(n+="]]"),r>0&&(n=">"+n),m0t(t,n)}):t.appendChild(Cb().createTextNode(e))}const pi=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],x0t="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",w0t={rte:rbe,trk:ibe,wpt:sbe},b0t=It(pi,{rte:rh(rbe),trk:rh(ibe),wpt:rh(sbe)}),E0t=It(pi,{text:Qe(Bn,"linkText"),type:Qe(Bn,"linkType")}),S0t=It(pi,{name:Qe(Bn),email:Z0t,link:eP}),T0t=It(pi,{name:Qe(Bn),desc:Qe(Bn),author:Qe(K0t),copyright:Qe(Y0t),link:eP,time:Qe(OL),keywords:Qe(Bn),bounds:X0t,extensions:LL}),k0t=It(pi,{year:Qe(AA),license:Qe(Bn)}),A0t=It(pi,{rte:pt(tyt),trk:pt(nyt),wpt:pt(iyt)});class I0t extends nbe{constructor(e){super(),e=e||{},this.dataProjection=Qr("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let n=0,r=e.length;n<r;++n){const i=e[n];if(this.readExtensions_){const s=i.get("extensionsNode_")||null;this.readExtensions_(i,s)}i.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(Qf(e)):Jf(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType===Node.ELEMENT_NODE){const r=this.readMetadataFromNode(n);if(r)return r}return null}readMetadataFromNode(e){if(!pi.includes(e.namespaceURI))return null;for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(pi.includes(n.namespaceURI)&&n.localName==="metadata")return ir({},T0t,n,[]);return null}readFeatureFromNode(e,n){if(!pi.includes(e.namespaceURI))return null;const r=w0t[e.localName];if(!r)return null;const i=r(e,[this.getReadOptions(e,n)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(e,n){if(!pi.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const r=ir([],b0t,e,[this.getReadOptions(e,n)]);return r?(this.handleReadExtensions_(r),r):[]}return[]}writeFeaturesNode(e,n){n=this.adaptOptions(n);const r=Sv("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",i5),r.setAttributeNS(i5,"xsi:schemaLocation",x0t),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),si({node:r},A0t,q0t,e,[n]),r}}const P0t=It(pi,{name:Qe(Bn),cmt:Qe(Bn),desc:Qe(Bn),src:Qe(Bn),link:eP,number:Qe(AA),extensions:LL,type:Qe(Bn),rtept:J0t}),C0t=It(pi,{ele:Qe(br),time:Qe(OL)}),R0t=It(pi,{name:Qe(Bn),cmt:Qe(Bn),desc:Qe(Bn),src:Qe(Bn),link:eP,number:Qe(AA),type:Qe(Bn),extensions:LL,trkseg:eyt}),M0t=It(pi,{trkpt:Q0t}),N0t=It(pi,{ele:Qe(br),time:Qe(OL)}),O0t=It(pi,{ele:Qe(br),time:Qe(OL),magvar:Qe(br),geoidheight:Qe(br),name:Qe(Bn),cmt:Qe(Bn),desc:Qe(Bn),src:Qe(Bn),link:eP,sym:Qe(Bn),type:Qe(Bn),fix:Qe(Bn),sat:Qe(AA),hdop:Qe(br),vdop:Qe(br),pdop:Qe(br),ageofdgpsdata:Qe(br),dgpsid:Qe(AA),extensions:LL}),L0t=["text","type"],D0t=It(pi,{text:pt(Ir),type:pt(Ir)}),j0t=It(pi,["name","cmt","desc","src","link","number","type","rtept"]),$0t=It(pi,{name:pt(Ir),cmt:pt(Ir),desc:pt(Ir),src:pt(Ir),link:pt(wq),number:pt(s5),type:pt(Ir),rtept:ebe(pt(bq))}),F0t=It(pi,["ele","time"]),V0t=It(pi,["name","cmt","desc","src","link","number","type","trkseg"]),z0t=It(pi,{name:pt(Ir),cmt:pt(Ir),desc:pt(Ir),src:pt(Ir),link:pt(wq),number:pt(s5),type:pt(Ir),trkseg:ebe(pt(ryt))}),G0t=Ih("trkpt"),U0t=It(pi,{trkpt:pt(bq)}),B0t=It(pi,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),W0t=It(pi,{ele:pt(gl),time:pt(g0t),magvar:pt(gl),geoidheight:pt(gl),name:pt(Ir),cmt:pt(Ir),desc:pt(Ir),src:pt(Ir),link:pt(wq),sym:pt(Ir),type:pt(Ir),fix:pt(Ir),sat:pt(s5),hdop:pt(gl),vdop:pt(gl),pdop:pt(gl),ageofdgpsdata:pt(gl),dgpsid:pt(s5)}),H0t={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function q0t(t,e,n){const r=t.getGeometry();if(r){const i=H0t[r.getType()];if(i){const s=e[e.length-1].node;return Sv(s.namespaceURI,i)}}}function _q(t,e,n,r){return t.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,e.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,e.hasM=!0):t.push(0),t}function xq(t,e,n){let r="XY",i=2;if(t.hasZ&&t.hasM?(r="XYZM",i=4):t.hasZ?(r="XYZ",i=3):t.hasM&&(r="XYM",i=3),i!==4){for(let s=0,o=e.length/4;s<o;s++)e[s*i]=e[s*4],e[s*i+1]=e[s*4+1],t.hasZ&&(e[s*i+2]=e[s*4+2]),t.hasM&&(e[s*i+2]=e[s*4+3]);if(e.length=e.length/4*i,n)for(let s=0,o=n.length;s<o;s++)n[s]=n[s]/4*i}return r}function K0t(t,e){const n=ir({},S0t,t,e);if(n)return n}function Y0t(t,e){const n=ir({},k0t,t,e);if(n){const r=t.getAttribute("author");return r!==null&&(n.author=r),n}}function X0t(t,e){const n=e[e.length-1],r=t.getAttribute("minlat"),i=t.getAttribute("minlon"),s=t.getAttribute("maxlat"),o=t.getAttribute("maxlon");i!==null&&r!==null&&o!==null&&s!==null&&(n.bounds=[[parseFloat(i),parseFloat(r)],[parseFloat(o),parseFloat(s)]])}function Z0t(t,e){const n=e[e.length-1],r=t.getAttribute("id"),i=t.getAttribute("domain");r!==null&&i!==null&&(n.email=`${r}@${i}`)}function eP(t,e){const n=e[e.length-1],r=t.getAttribute("href");r!==null&&(n.link=r),m0(E0t,t,e)}function LL(t,e){const n=e[e.length-1];n.extensionsNode_=t}function J0t(t,e){const n=ir({},C0t,t,e);if(n){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;_q(i,s,t,n)}}function Q0t(t,e){const n=ir({},N0t,t,e);if(n){const r=e[e.length-1],i=r.flatCoordinates,s=r.layoutOptions;_q(i,s,t,n)}}function eyt(t,e){const n=e[e.length-1];m0(M0t,t,e);const r=n.flatCoordinates;n.ends.push(r.length)}function rbe(t,e){const n=e[0],r=ir({flatCoordinates:[],layoutOptions:{}},P0t,t,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.layoutOptions;delete r.layoutOptions;const o=xq(s,i),a=new ts(i,o);kh(a,!1,n);const l=new yr(a);return l.setProperties(r,!0),l}function ibe(t,e){const n=e[0],r=ir({flatCoordinates:[],ends:[],layoutOptions:{}},R0t,t,e);if(!r)return;const i=r.flatCoordinates;delete r.flatCoordinates;const s=r.ends;delete r.ends;const o=r.layoutOptions;delete r.layoutOptions;const a=xq(o,i,s),l=new vh(i,a,s);kh(l,!1,n);const c=new yr(l);return c.setProperties(r,!0),c}function sbe(t,e){const n=e[0],r=ir({},O0t,t,e);if(!r)return;const i={},s=_q([],i,t,r),o=xq(i,s),a=new Ti(s,o);kh(a,!1,n);const l=new yr(a);return l.setProperties(r,!0),l}function wq(t,e,n){t.setAttribute("href",e);const i=n[n.length-1].properties,s=[i.linkText,i.linkType];si({node:t},D0t,va,s,n,L0t)}function bq(t,e,n){const r=n[n.length-1],s=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":e[3]!==0&&(o.time=e[3]);case"XYZ":e[2]!==0&&(o.ele=e[2]);break;case"XYM":e[2]!==0&&(o.time=e[2]);break}const l=t.nodeName=="rtept"?F0t[s]:B0t[s],c=Cl(o,l);si({node:t,properties:o},W0t,va,c,n,l)}function tyt(t,e,n){const r=n[0],i=e.getProperties(),s={node:t};s.properties=i;const o=e.getGeometry();if(o.getType()=="LineString"){const u=kh(o,!0,r);s.geometryLayout=u.getLayout(),i.rtept=u.getCoordinates()}const a=n[n.length-1].node,l=j0t[a.namespaceURI],c=Cl(i,l);si(s,$0t,va,c,n,l)}function nyt(t,e,n){const r=n[0],i=e.getProperties(),s={node:t};s.properties=i;const o=e.getGeometry();if(o.getType()=="MultiLineString"){const u=kh(o,!0,r);i.trkseg=u.getLineStrings()}const a=n[n.length-1].node,l=V0t[a.namespaceURI],c=Cl(i,l);si(s,z0t,va,c,n,l)}function ryt(t,e,n){const r={node:t};r.geometryLayout=e.getLayout(),r.properties={},si(r,U0t,G0t,e.getCoordinates(),n)}function iyt(t,e,n){const r=n[0],i=n[n.length-1];i.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const o=kh(s,!0,r);i.geometryLayout=o.getLayout(),bq(t,o.getCoordinates(),n)}}const Np=["http://www.google.com/kml/ext/2.2"],Xt=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],syt="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",Poe={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},oyt=It(Xt,{ExtendedData:xbe,Region:wbe,MultiGeometry:Qe(ybe,"geometry"),LineString:Qe(mbe,"geometry"),LinearRing:Qe(gbe,"geometry"),Point:Qe(vbe,"geometry"),Polygon:Qe(_be,"geometry"),Style:Qe(Tq),StyleMap:Uyt,address:Qe(Bn),description:Qe(Bn),name:Qe(Bn),open:Qe(t0),phoneNumber:Qe(Bn),styleUrl:Qe(ube),visibility:Qe(t0)},It(Np,{MultiTrack:Qe(Cyt,"geometry"),Track:Qe(pbe,"geometry")})),ayt=It(Xt,{ExtendedData:xbe,Region:wbe,Link:t1t,address:Qe(Bn),description:Qe(Bn),name:Qe(Bn),open:Qe(t0),phoneNumber:Qe(Bn),visibility:Qe(t0)}),lyt=It(Xt,{href:Qe(cbe)}),cyt=It(Xt,{Altitude:Qe(br),Longitude:Qe(br),Latitude:Qe(br),Tilt:Qe(br),AltitudeMode:Qe(Bn),Heading:Qe(br),Roll:Qe(br)}),obe=It(Xt,{LatLonAltBox:Kyt,Lod:Xyt}),uyt=It(Xt,["Document","Placemark"]),hyt=It(Xt,{Document:pt(c1t),Placemark:pt(Sbe)});let Tw,R3=null,jz,JT,QT,ek,o5,$z=null,Eq,Fz=null,Vz,Zy=null,Coe=null,zz=null;function a5(t){return 32/Math.min(t[0],t[1])}function dyt(){Tw=[255,255,255,1],R3=new Dn({color:Tw}),jz=[20,2],JT="pixels",QT="pixels",ek=[64,64],o5="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",$z=new qA({anchor:jz,anchorOrigin:"bottom-left",anchorXUnits:JT,anchorYUnits:QT,crossOrigin:"anonymous",rotation:0,scale:a5(ek),size:ek,src:o5}),Eq="NO_IMAGE",Fz=new Pn({color:Tw,width:1}),Vz=new Pn({color:[51,51,51,1],width:2}),Zy=new pc({font:"bold 16px Helvetica",fill:R3,stroke:Vz,scale:.8}),Coe=new vn({fill:R3,image:$z,text:Zy,stroke:Fz,zIndex:0}),zz=[Coe]}let CR;function fyt(t){return t}class pyt extends nbe{constructor(e){super(),e=e||{},zz||dyt(),this.dataProjection=Qr("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:zz,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:fyt,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,n){const r=It(Xt,{Document:Ioe(this.readDocumentOrFolder_,this),Folder:Ioe(this.readDocumentOrFolder_,this),Placemark:rh(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=ir([],r,e,n,this);if(i)return i}readPlacemark_(e,n){const r=ir({geometry:null},oyt,e,n,this);if(!r)return;const i=new yr,s=e.getAttribute("id");s!==null&&i.setId(s);const o=n[0],a=r.geometry;if(a&&kh(a,!1,o),i.setGeometry(a),delete r.geometry,this.extractStyles_){const l=r.Style,c=r.styleUrl,u=gyt(l,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(u)}return delete r.Style,i.setProperties(r,!0),i}readSharedStyle_(e,n){const r=e.getAttribute("id");if(r!==null){const i=Tq.call(this,e,n);if(i){let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+r,o).href:s="#"+r,this.sharedStyles_[s]=i}}}readSharedStyleMap_(e,n){const r=e.getAttribute("id");if(r===null)return;const i=dbe.call(this,e,n);if(!i)return;let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+r,o).href:s="#"+r,this.sharedStyles_[s]=i}readFeatureFromNode(e,n){if(!Xt.includes(e.namespaceURI))return null;const r=this.readPlacemark_(e,[this.getReadOptions(e,n)]);return r||null}readFeaturesFromNode(e,n){if(!Xt.includes(e.namespaceURI))return[];let r;const i=e.localName;if(i=="Document"||i=="Folder")return r=this.readDocumentOrFolder_(e,[this.getReadOptions(e,n)]),r||[];if(i=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,n)]);return s?[s]:[]}if(i=="kml"){r=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const o=this.readFeaturesFromNode(s,n);o&&xr(r,o)}return r}return[]}readName(e){if(e){if(typeof e=="string"){const n=Qf(e);return this.readNameFromDocument(n)}return Jf(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let n=e.firstChild;n;n=n.nextSibling)if(n.nodeType==Node.ELEMENT_NODE){const r=this.readNameFromNode(n);if(r)return r}}readNameFromNode(e){for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(Xt.includes(n.namespaceURI)&&n.localName=="name")return Bn(n);for(let n=e.firstElementChild;n;n=n.nextElementSibling){const r=n.localName;if(Xt.includes(n.namespaceURI)&&(r=="Document"||r=="Folder"||r=="Placemark"||r=="kml")){const i=this.readNameFromNode(n);if(i)return i}}}readNetworkLinks(e){const n=[];if(typeof e=="string"){const r=Qf(e);xr(n,this.readNetworkLinksFromDocument(r))}else Jf(e)?xr(n,this.readNetworkLinksFromDocument(e)):xr(n,this.readNetworkLinksFromNode(e));return n}readNetworkLinksFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&xr(n,this.readNetworkLinksFromNode(r));return n}readNetworkLinksFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Xt.includes(r.namespaceURI)&&r.localName=="NetworkLink"){const i=ir({},ayt,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Xt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&xr(n,this.readNetworkLinksFromNode(r))}return n}readRegion(e){const n=[];if(typeof e=="string"){const r=Qf(e);xr(n,this.readRegionFromDocument(r))}else Jf(e)?xr(n,this.readRegionFromDocument(e)):xr(n,this.readRegionFromNode(e));return n}readRegionFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&xr(n,this.readRegionFromNode(r));return n}readRegionFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Xt.includes(r.namespaceURI)&&r.localName=="Region"){const i=ir({},obe,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Xt.includes(r.namespaceURI)&&(i=="Document"||i=="Folder"||i=="kml")&&xr(n,this.readRegionFromNode(r))}return n}readCamera(e){const n=[];if(typeof e=="string"){const r=Qf(e);xr(n,this.readCameraFromDocument(r))}else Jf(e)?xr(n,this.readCameraFromDocument(e)):xr(n,this.readCameraFromNode(e));return n}readCameraFromDocument(e){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType===Node.ELEMENT_NODE&&xr(n,this.readCameraFromNode(r));return n}readCameraFromNode(e){const n=[];for(let r=e.firstElementChild;r;r=r.nextElementSibling)if(Xt.includes(r.namespaceURI)&&r.localName==="Camera"){const i=ir({},cyt,r,[]);n.push(i)}for(let r=e.firstElementChild;r;r=r.nextElementSibling){const i=r.localName;Xt.includes(r.namespaceURI)&&(i==="Document"||i==="Folder"||i==="Placemark"||i==="kml")&&xr(n,this.readCameraFromNode(r))}return n}writeFeaturesNode(e,n){n=this.adaptOptions(n);const r=Sv(Xt[4],"kml"),i="http://www.w3.org/2000/xmlns/";r.setAttributeNS(i,"xmlns:gx",Np[0]),r.setAttributeNS(i,"xmlns:xsi",i5),r.setAttributeNS(i5,"xsi:schemaLocation",syt);const s={node:r},o={};e.length>1?o.Document=e:e.length==1&&(o.Placemark=e[0]);const a=uyt[r.namespaceURI],l=Cl(o,a);return si(s,hyt,va,l,[n],a,this),r}}function myt(t,e){const n=[0,0];let r="start";const i=t.getImage();if(i){const a=i.getSize();if(a&&a.length==2){const l=i.getScaleArray(),c=i.getAnchor();n[0]=l[0]*(a[0]-c[0]),n[1]=l[1]*(a[1]/2-c[1]),r="left"}}let s=t.getText();return s?(s=s.clone(),s.setFont(s.getFont()||Zy.getFont()),s.setScale(s.getScale()||Zy.getScale()),s.setFill(s.getFill()||Zy.getFill()),s.setStroke(s.getStroke()||Vz)):s=Zy.clone(),s.setText(e),s.setOffsetX(n[0]),s.setOffsetY(n[1]),s.setTextAlign(r),new vn({image:i,text:s})}function gyt(t,e,n,r,i){return(function(s,o){let a=i,l="",c=[];if(a){const h=s.getGeometry();if(h)if(h instanceof uu)c=h.getGeometriesArrayRecursive().filter(function(f){const g=f.getType();return g==="Point"||g==="MultiPoint"}),a=c.length>0;else{const f=h.getType();a=f==="Point"||f==="MultiPoint"}}a&&(l=s.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&(CR||(CR=document.createElement("textarea")),CR.innerHTML=l,l=CR.value));let u=n;if(t?u=t:e&&(u=abe(e,n,r)),a){const h=myt(u[0],l);if(c.length>0){h.setGeometry(new uu(c));const f=new vn({geometry:u[0].getGeometry(),image:null,fill:u[0].getFill(),stroke:u[0].getStroke(),text:null});return[h,f].concat(u.slice(1))}return h}return u})}function abe(t,e,n){return Array.isArray(t)?t:typeof t=="string"?abe(n[t],e,n):e}function DL(t){const e=Ah(t,!1),n=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(n){const r=n[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function lbe(t){let e=Ah(t,!1);const n=[];e=e.replace(/\s*,\s*/g,",");const r=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let i;for(;i=r.exec(e);){const s=parseFloat(i[1]),o=parseFloat(i[2]),a=i[3]?parseFloat(i[3]):0;n.push(s,o,a),e=e.substr(i[0].length)}if(e==="")return n}function cbe(t){const e=Ah(t,!1).trim();let n=t.baseURI;return(!n||n=="about:blank")&&(n=window.location.href),n?new URL(e,n).href:e}function ube(t){const e=Ah(t,!1).trim().replace(/^(?!.*#)/,"#");let n=t.baseURI;return(!n||n=="about:blank")&&(n=window.location.href),n?new URL(e,n).href:e}function yyt(t){const e=t.getAttribute("xunits"),n=t.getAttribute("yunits");let r;return e!=="insetPixels"?n!=="insetPixels"?r="bottom-left":r="top-left":n!=="insetPixels"?r="bottom-right":r="top-right",{x:parseFloat(t.getAttribute("x")),xunits:Poe[e],y:parseFloat(t.getAttribute("y")),yunits:Poe[n],origin:r}}function hbe(t){return br(t)}const vyt=It(Xt,{Pair:Gyt});function dbe(t,e){return ir(void 0,vyt,t,e,this)}const _yt=It(Xt,{Icon:Qe(Nyt),color:Qe(DL),heading:Qe(br),hotSpot:Qe(yyt),scale:Qe(hbe)});function xyt(t,e){const n=ir({},_yt,t,e);if(!n)return;const r=e[e.length-1],i="Icon"in n?n.Icon:{},s=!("Icon"in n)||Object.keys(i).length>0;let o;const a=i.href;a?o=a:s&&(o=o5);let l,c,u,h="bottom-left";const f=n.hotSpot;f?(l=[f.x,f.y],c=f.xunits,u=f.yunits,h=f.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(o.includes("pushpin")?(l=jz,c=JT,u=QT):o.includes("arrow-reverse")?(l=[54,42],c=JT,u=QT):o.includes("paddle")&&(l=[32,1],c=JT,u=QT));let g;const y=i.x,_=i.y;y!==void 0&&_!==void 0&&(g=[y,_]);let b;const T=i.w,A=i.h;T!==void 0&&A!==void 0&&(b=[T,A]);let I;const P=n.heading;P!==void 0&&(I=lu(P));const N=n.scale,L=n.color;if(s){o==o5&&(b=ek);const C=new qA({anchor:l,anchorOrigin:h,anchorXUnits:c,anchorYUnits:u,crossOrigin:this.crossOrigin_,offset:g,offsetOrigin:"bottom-left",rotation:I,scale:N,size:b,src:this.iconUrlFunction_(o),color:L}),M=C.getScaleArray()[0],O=C.getSize();if(O===null){const D=C.getImageState();if(D===Vt.IDLE||D===Vt.LOADING){const V=function(){const U=C.getImageState();if(!(U===Vt.IDLE||U===Vt.LOADING)){const G=C.getSize();if(G&&G.length==2){const de=a5(G);C.setScale(M*de)}C.unlistenImageChange(V)}};C.listenImageChange(V),D===Vt.IDLE&&C.load()}}else if(O.length==2){const D=a5(O);C.setScale(M*D)}r.imageStyle=C}else r.imageStyle=Eq}const wyt=It(Xt,{color:Qe(DL),scale:Qe(hbe)});function byt(t,e){const n=ir({},wyt,t,e);if(!n)return;const r=e[e.length-1],i=new pc({fill:new Dn({color:"color"in n?n.color:Tw}),scale:n.scale});r.textStyle=i}const Eyt=It(Xt,{color:Qe(DL),width:Qe(br)});function Syt(t,e){const n=ir({},Eyt,t,e);if(!n)return;const r=e[e.length-1],i=new Pn({color:"color"in n?n.color:Tw,width:"width"in n?n.width:1});r.strokeStyle=i}const Tyt=It(Xt,{color:Qe(DL),fill:Qe(t0),outline:Qe(t0)});function kyt(t,e){const n=ir({},Tyt,t,e);if(!n)return;const r=e[e.length-1],i=new Dn({color:"color"in n?n.color:Tw});r.fillStyle=i;const s=n.fill;s!==void 0&&(r.fill=s);const o=n.outline;o!==void 0&&(r.outline=o)}const Ayt=It(Xt,{coordinates:vq(lbe)});function fbe(t,e){return ir(null,Ayt,t,e)}function Iyt(t,e){const r=e[e.length-1].coordinates,i=Ah(t,!1),o=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(o){const a=parseFloat(o[1]),l=parseFloat(o[2]),c=parseFloat(o[3]);r.push([a,l,c])}else r.push([])}const Pyt=It(Np,{Track:rh(pbe)});function Cyt(t,e){const n=ir([],Pyt,t,e);if(n)return new vh(n)}const Ryt=It(Xt,{when:n1t},It(Np,{coord:Iyt}));function pbe(t,e){const n=ir({coordinates:[],whens:[]},Ryt,t,e);if(!n)return;const r=[],i=n.coordinates,s=n.whens;for(let o=0,a=Math.min(i.length,s.length);o<a;++o)i[o].length==3&&r.push(i[o][0],i[o][1],i[o][2],s[o]);return new ts(r,"XYZM")}const Myt=It(Xt,{href:Qe(cbe)},It(Np,{x:Qe(br),y:Qe(br),w:Qe(br),h:Qe(br)}));function Nyt(t,e){const n=ir({},Myt,t,e);return n||null}const Oyt=It(Xt,{coordinates:vq(lbe)});function Sq(t,e){return ir(null,Oyt,t,e)}const jL=It(Xt,{extrude:Qe(t0),tessellate:Qe(t0),altitudeMode:Qe(Bn)});function mbe(t,e){const n=ir({},jL,t,e),r=Sq(t,e);if(r){const i=new ts(r,"XYZ");return i.setProperties(n,!0),i}}function gbe(t,e){const n=ir({},jL,t,e),r=Sq(t,e);if(r){const i=new Il(r,"XYZ",[r.length]);return i.setProperties(n,!0),i}}const Lyt=It(Xt,{LineString:rh(mbe),LinearRing:rh(gbe),MultiGeometry:rh(ybe),Point:rh(vbe),Polygon:rh(_be)});function ybe(t,e){const n=ir([],Lyt,t,e);if(!n)return null;if(n.length===0)return new uu(n);let r,i=!0;const s=n[0].getType();let o;for(let a=1,l=n.length;a<l;++a)if(o=n[a],o.getType()!=s){i=!1;break}if(i){let a,l;if(s=="Point"){const c=n[0];a=c.getLayout(),l=c.getFlatCoordinates();for(let u=1,h=n.length;u<h;++u)o=n[u],xr(l,o.getFlatCoordinates());r=new o0(l,a),oF(r,n)}else if(s=="LineString")r=new vh(n),oF(r,n);else if(s=="Polygon")r=new mp(n),oF(r,n);else if(s=="GeometryCollection"||s.startsWith("Multi"))r=new uu(n);else throw new Error("Unknown geometry type found")}else r=new uu(n);return r}function vbe(t,e){const n=ir({},jL,t,e),r=Sq(t,e);if(r){const i=new Ti(r,"XYZ");return i.setProperties(n,!0),i}}const Dyt=It(Xt,{innerBoundaryIs:Jyt,outerBoundaryIs:e1t});function _be(t,e){const n=ir({},jL,t,e),r=ir([null],Dyt,t,e);if(r&&r[0]){const i=r[0],s=[i.length];for(let a=1,l=r.length;a<l;++a)xr(i,r[a]),s.push(i.length);const o=new Il(i,"XYZ",s);return o.setProperties(n,!0),o}}const jyt=It(Xt,{IconStyle:xyt,LabelStyle:byt,LineStyle:Syt,PolyStyle:kyt});function Tq(t,e){const n=ir({},jyt,t,e,this);if(!n)return null;let r="fillStyle"in n?n.fillStyle:R3;const i=n.fill;i!==void 0&&!i&&(r=null);let s;"imageStyle"in n?n.imageStyle!=Eq&&(s=n.imageStyle):s=$z;const o="textStyle"in n?n.textStyle:Zy,a="strokeStyle"in n?n.strokeStyle:Fz,l=n.outline;return l!==void 0&&!l?[new vn({geometry:function(c){const u=c.getGeometry(),h=u.getType();if(h==="GeometryCollection"){const f=u;return new uu(f.getGeometriesArrayRecursive().filter(function(g){const y=g.getType();return y!=="Polygon"&&y!=="MultiPolygon"}))}if(h!=="Polygon"&&h!=="MultiPolygon")return u},fill:r,image:s,stroke:a,text:o,zIndex:void 0}),new vn({geometry:function(c){const u=c.getGeometry(),h=u.getType();if(h==="GeometryCollection"){const f=u;return new uu(f.getGeometriesArrayRecursive().filter(function(g){const y=g.getType();return y==="Polygon"||y==="MultiPolygon"}))}if(h==="Polygon"||h==="MultiPolygon")return u},fill:r,stroke:null,zIndex:void 0})]:[new vn({fill:r,image:s,stroke:a,text:o,zIndex:void 0})]}function oF(t,e){const n=e.length,r=new Array(e.length),i=new Array(e.length),s=new Array(e.length);let o,a,l;o=!1,a=!1,l=!1;for(let c=0;c<n;++c){const u=e[c];r[c]=u.get("extrude"),i[c]=u.get("tessellate"),s[c]=u.get("altitudeMode"),o=o||r[c]!==void 0,a=a||i[c]!==void 0,l=l||s[c]}o&&t.set("extrude",r),a&&t.set("tessellate",i),l&&t.set("altitudeMode",s)}const $yt=It(Xt,{displayName:Qe(Bn),value:Qe(Bn)});function Fyt(t,e){const n=t.getAttribute("name");m0($yt,t,e);const r=e[e.length-1];n&&r.displayName?r[n]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:n!==null?r[n]=r.value:r.displayName!==null&&(r[r.displayName]=r.value),delete r.value}const Vyt=It(Xt,{Data:Fyt,SchemaData:Wyt});function xbe(t,e){m0(Vyt,t,e)}function wbe(t,e){m0(obe,t,e)}const zyt=It(Xt,{Style:Qe(Tq),key:Qe(Bn),styleUrl:Qe(ube)});function Gyt(t,e){const n=ir({},zyt,t,e,this);if(!n)return;const r=n.key;if(r&&r=="normal"){const i=n.styleUrl;i&&(e[e.length-1]=i);const s=n.Style;s&&(e[e.length-1]=s)}}function Uyt(t,e){const n=dbe.call(this,t,e);if(!n)return;const r=e[e.length-1];if(Array.isArray(n))r.Style=n;else if(typeof n=="string")r.styleUrl=n;else throw new Error("`styleMapValue` has an unknown type")}const Byt=It(Xt,{SimpleData:Hyt});function Wyt(t,e){m0(Byt,t,e)}function Hyt(t,e){const n=t.getAttribute("name");if(n!==null){const r=Bn(t),i=e[e.length-1];i[n]=r}}const qyt=It(Xt,{altitudeMode:Qe(Bn),minAltitude:Qe(br),maxAltitude:Qe(br),north:Qe(br),south:Qe(br),east:Qe(br),west:Qe(br)});function Kyt(t,e){const n=ir({},qyt,t,e);if(!n)return;const r=e[e.length-1],i=[parseFloat(n.west),parseFloat(n.south),parseFloat(n.east),parseFloat(n.north)];r.extent=i,r.altitudeMode=n.altitudeMode,r.minAltitude=parseFloat(n.minAltitude),r.maxAltitude=parseFloat(n.maxAltitude)}const Yyt=It(Xt,{minLodPixels:Qe(br),maxLodPixels:Qe(br),minFadeExtent:Qe(br),maxFadeExtent:Qe(br)});function Xyt(t,e){const n=ir({},Yyt,t,e);if(!n)return;const r=e[e.length-1];r.minLodPixels=parseFloat(n.minLodPixels),r.maxLodPixels=parseFloat(n.maxLodPixels),r.minFadeExtent=parseFloat(n.minFadeExtent),r.maxFadeExtent=parseFloat(n.maxFadeExtent)}const Zyt=It(Xt,{LinearRing:rh(fbe)});function Jyt(t,e){const n=ir([],Zyt,t,e);n.length>0&&e[e.length-1].push(...n)}const Qyt=It(Xt,{LinearRing:vq(fbe)});function e1t(t,e){const n=ir(void 0,Qyt,t,e);if(n){const r=e[e.length-1];r[0]=n}}function t1t(t,e){m0(lyt,t,e)}function n1t(t,e){const r=e[e.length-1].whens,i=Ah(t,!1),s=Date.parse(i);r.push(isNaN(s)?0:s)}function $L(t,e){const n=gu(e),i=[(n.length==4?n[3]:1)*255,n[2],n[1],n[0]];for(let s=0;s<4;++s){const o=Math.floor(i[s]).toString(16);i[s]=o.length==1?"0"+o:o}Ir(t,i.join(""))}function r1t(t,e,n){const r=n[n.length-1],i=r.layout,s=r.stride;let o;if(i=="XY"||i=="XYM")o=2;else if(i=="XYZ"||i=="XYZM")o=3;else throw new Error("Invalid geometry layout");const a=e.length;let l="";if(a>0){l+=e[0];for(let c=1;c<o;++c)l+=","+e[c];for(let c=s;c<a;c+=s){l+=" "+e[c];for(let u=1;u<o;++u)l+=","+e[c+u]}}Ir(t,l)}const M3=It(Xt,{Data:pt(i1t),value:pt(o1t),displayName:pt(s1t)});function i1t(t,e,n){t.setAttribute("name",e.name);const r={node:t},i=e.value;typeof i=="object"?(i!==null&&i.displayName&&si(r,M3,va,[i.displayName],n,["displayName"]),i!==null&&i.value&&si(r,M3,va,[i.value],n,["value"])):si(r,M3,va,[i],n,["value"])}function s1t(t,e){Ir(t,e)}function o1t(t,e){Ir(t,e)}const a1t=It(Xt,{Placemark:pt(Sbe)}),l1t=function(t,e,n){const r=e[e.length-1].node;return Sv(r.namespaceURI,"Placemark")};function c1t(t,e,n){si({node:t},a1t,l1t,e,n,void 0,this)}const u1t=Ih("Data");function h1t(t,e,n){const r={node:t},i=e.names,s=e.values,o=i.length;for(let a=0;a<o;a++)si(r,M3,u1t,[{name:i[a],value:s[a]}],n)}const Roe=It(Xt,["href"],It(Np,["x","y","w","h"])),Moe=It(Xt,{href:pt(Ir)},It(Np,{x:pt(gl),y:pt(gl),w:pt(gl),h:pt(gl)})),d1t=function(t,e,n){return Sv(Np[0],"gx:"+n)};function f1t(t,e,n){const r={node:t},i=n[n.length-1].node;let s=Roe[i.namespaceURI],o=Cl(e,s);si(r,Moe,va,o,n,s),s=Roe[Np[0]],o=Cl(e,s),si(r,Moe,d1t,o,n,s)}const p1t=It(Xt,["scale","heading","Icon","color","hotSpot"]),m1t=It(Xt,{Icon:pt(f1t),color:pt($L),heading:pt(gl),hotSpot:pt(G1t),scale:pt(kbe)});function g1t(t,e,n){const r={node:t},i={},s=e.getSrc(),o=e.getSize(),a=e.getImageSize(),l={href:s};if(o){l.w=o[0],l.h=o[1];const b=e.getAnchor(),T=e.getOrigin();if(T&&a&&T[0]!==0&&T[1]!==o[1]&&(l.x=T[0],l.y=a[1]-(T[1]+o[1])),b&&(b[0]!==o[0]/2||b[1]!==o[1]/2)){const A={x:b[0],xunits:"pixels",y:o[1]-b[1],yunits:"pixels"};i.hotSpot=A}}i.Icon=l;let c=e.getScaleArray()[0],u=o;if(u===null&&(u=ek),u.length==2){const b=a5(u);c=c/b}c!==1&&(i.scale=c);const h=e.getRotation();h!==0&&(i.heading=h);const f=e.getColor();f&&(i.color=f);const g=n[n.length-1].node,y=p1t[g.namespaceURI],_=Cl(i,y);si(r,m1t,va,_,n,y)}const y1t=It(Xt,["color","scale"]),v1t=It(Xt,{color:pt($L),scale:pt(kbe)});function _1t(t,e,n){const r={node:t},i={},s=e.getFill();s&&(i.color=s.getColor());const o=e.getScale();o&&o!==1&&(i.scale=o);const a=n[n.length-1].node,l=y1t[a.namespaceURI],c=Cl(i,l);si(r,v1t,va,c,n,l)}const x1t=It(Xt,["color","width"]),w1t=It(Xt,{color:pt($L),width:pt(gl)});function b1t(t,e,n){const r={node:t},i={color:e.getColor(),width:Number(e.getWidth())||1},s=n[n.length-1].node,o=x1t[s.namespaceURI],a=Cl(i,o);si(r,w1t,va,a,n,o)}const E1t={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},bbe=function(t,e,n){if(t){const r=e[e.length-1].node;return Sv(r.namespaceURI,E1t[t.getType()])}},S1t=Ih("Point"),T1t=Ih("LineString"),k1t=Ih("LinearRing"),A1t=Ih("Polygon"),I1t=It(Xt,{LineString:pt(kw),Point:pt(kw),Polygon:pt(Tbe),GeometryCollection:pt(Ebe)});function Ebe(t,e,n){const r={node:t},i=e.getType();let s=[],o;if(i==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(a){const l=a.getType();if(l==="MultiPoint")s=s.concat(a.getPoints());else if(l==="MultiLineString")s=s.concat(a.getLineStrings());else if(l==="MultiPolygon")s=s.concat(a.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(a);else throw new Error("Unknown geometry type")}),o=bbe;else if(i==="MultiPoint")s=e.getPoints(),o=S1t;else if(i==="MultiLineString")s=e.getLineStrings(),o=T1t;else if(i==="MultiPolygon")s=e.getPolygons(),o=A1t;else throw new Error("Unknown geometry type");si(r,I1t,o,s,n)}const P1t=It(Xt,{LinearRing:pt(kw)});function Noe(t,e,n){si({node:t},P1t,k1t,[e],n)}const aF=It(Xt,{ExtendedData:pt(h1t),MultiGeometry:pt(Ebe),LineString:pt(kw),LinearRing:pt(kw),Point:pt(kw),Polygon:pt(Tbe),Style:pt(z1t),address:pt(Ir),description:pt(Ir),name:pt(Ir),open:pt(q2),phoneNumber:pt(Ir),styleUrl:pt(Ir),visibility:pt(q2)}),C1t=It(Xt,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),R1t=Ih("ExtendedData");function Sbe(t,e,n){const r={node:t};e.getId()&&t.setAttribute("id",e.getId());const i=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const o=Object.keys(i||{}).sort().filter(function(g){return!s[g]}),a=e.getStyleFunction();if(a){const g=a(e,0);if(g){const y=Array.isArray(g)?g:[g];let _=y;if(e.getGeometry()&&(_=y.filter(function(b){const T=b.getGeometryFunction()(e);if(T){const A=T.getType();return A==="GeometryCollection"?T.getGeometriesArrayRecursive().filter(function(I){const P=I.getType();return P==="Point"||P==="MultiPoint"}).length:A==="Point"||A==="MultiPoint"}})),this.writeStyles_){let b=y,T=y;e.getGeometry()&&(b=y.filter(function(A){const I=A.getGeometryFunction()(e);if(I){const P=I.getType();return P==="GeometryCollection"?I.getGeometriesArrayRecursive().filter(function(N){const L=N.getType();return L==="LineString"||L==="MultiLineString"}).length:P==="LineString"||P==="MultiLineString"}}),T=y.filter(function(A){const I=A.getGeometryFunction()(e);if(I){const P=I.getType();return P==="GeometryCollection"?I.getGeometriesArrayRecursive().filter(function(N){const L=N.getType();return L==="Polygon"||L==="MultiPolygon"}).length:P==="Polygon"||P==="MultiPolygon"}})),i.Style={pointStyles:_,lineStyles:b,polyStyles:T}}if(_.length&&i.name===void 0){const b=_[0].getText();b&&(i.name=b.getText())}}}const l=n[n.length-1].node,c=C1t[l.namespaceURI],u=Cl(i,c);if(si(r,aF,va,u,n,c),o.length>0){const g=Cl(i,o);si(r,aF,R1t,[{names:o,values:g}],n)}const h=n[0];let f=e.getGeometry();f&&(f=kh(f,!0,h)),si(r,aF,bbe,[f],n)}const M1t=It(Xt,["extrude","tessellate","altitudeMode","coordinates"]),N1t=It(Xt,{extrude:pt(q2),tessellate:pt(q2),altitudeMode:pt(Ir),coordinates:pt(r1t)});function kw(t,e,n){const r=e.getFlatCoordinates(),i={node:t};i.layout=e.getLayout(),i.stride=e.getStride();const s=e.getProperties();s.coordinates=r;const o=n[n.length-1].node,a=M1t[o.namespaceURI],l=Cl(s,a);si(i,N1t,va,l,n,a)}const O1t=It(Xt,["color","fill","outline"]),Ooe=It(Xt,{outerBoundaryIs:pt(Noe),innerBoundaryIs:pt(Noe)}),L1t=Ih("innerBoundaryIs"),D1t=Ih("outerBoundaryIs");function Tbe(t,e,n){const r=e.getLinearRings(),i=r.shift(),s={node:t};si(s,Ooe,L1t,r,n),si(s,Ooe,D1t,[i],n)}const j1t=It(Xt,{color:pt($L),fill:pt(q2),outline:pt(q2)});function $1t(t,e,n){const r={node:t},i=e.getFill(),s=e.getStroke(),o={color:i?i.getColor():void 0,fill:i?void 0:!1,outline:s?void 0:!1},a=n[n.length-1].node,l=O1t[a.namespaceURI],c=Cl(o,l);si(r,j1t,va,c,n,l)}function kbe(t,e){gl(t,Math.round(e*1e6)/1e6)}const F1t=It(Xt,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),V1t=It(Xt,{IconStyle:pt(g1t),LabelStyle:pt(_1t),LineStyle:pt(b1t),PolyStyle:pt($1t)});function z1t(t,e,n){const r={node:t},i={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(i.LabelStyle=l);const c=e.pointStyles[0].getImage();c&&typeof c.getSrc=="function"&&(i.IconStyle=c)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(i.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!i.LineStyle&&(i.LineStyle=l),i.PolyStyle=e.polyStyles[0]}const s=n[n.length-1].node,o=F1t[s.namespaceURI],a=Cl(i,o);si(r,V1t,va,a,n,o)}function G1t(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}function Abe(t){const e=Object.keys(t.defs),n=e.length;let r,i;for(r=0;r<n;++r){const s=e[r];if(!QR(s)){const o=t.defs(s);let a=o.units;!a&&o.projName==="longlat"&&(a="degrees"),$3(new P5({code:s,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:a}))}}for(r=0;r<n;++r){const s=e[r],o=QR(s);for(i=0;i<n;++i){const a=e[i],l=QR(a);if(!eM(s,a))if(t.defs[s]===t.defs[a])VF([o,l]);else{const c=t(s,a);Ake(o,l,IX(o,l,c.forward),IX(l,o,c.inverse))}}}}console.log(" parcelHighlight.ts v3.1 loaded - fixed pixelRatio for Android");lr.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");Abe(lr);let Jy=null,tk=null,Ex=null;function Gz(t){Jy&&(t.removeLayer(Jy),Jy=null),tk&&(t.removeLayer(tk),tk=null),Ex=null}async function U1t(t,e){try{const n=Fn(e);console.log(` Click (3857): ${e[0].toFixed(0)}, ${e[1].toFixed(0)}`),console.log(` LonLat (WGS84): ${n[0].toFixed(5)}, ${n[1].toFixed(5)}`);const r=lr("EPSG:4326","EPSG:28992",n);if(console.log(` RD (28992): ${r?r[0].toFixed(0)+", "+r[1].toFixed(0):"FAILED"}`),!r||r[0]<7e3||r[0]>3e5||r[1]<289e3||r[1]>629e3)return console.error(" Coordinate outside Netherlands or transformation failed:",r),!1;Gz(t);const i=1,s=`${r[0]-i},${r[1]-i},${r[0]+i},${r[1]+i}`,o=Date.now(),a=`https://service.pdok.nl/rvo/brpgewaspercelen/wfs/v1_0?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&TYPENAMES=brpgewaspercelen:BrpGewas&OUTPUTFORMAT=json&SRSNAME=EPSG:28992&BBOX=${s},EPSG:28992&_=${o}`;console.log(" WFS URL:",a);const l=new AbortController,c=setTimeout(()=>l.abort(),1e4),u=await fetch(a,{signal:l.signal});if(clearTimeout(c),!u.ok)return console.error("WFS request failed:",u.status),!1;const h=await u.json();if(console.log(" WFS RESPONSE:",JSON.stringify(h).substring(0,500)),!h.features||h.features.length===0)return console.log("No parcel found at location"),!1;const f=h.features[0];console.log(" PARCEL ID:",f.id||f.properties?.id||"geen ID"),console.log(" PARCEL BBOX:",JSON.stringify(f.bbox||"geen bbox"));const y=new NL().readFeature(f,{dataProjection:"EPSG:28992",featureProjection:"EPSG:3857"}),_=y.getGeometry();if(!_)return console.log("No geometry in parcel feature"),!1;const b=f.properties||{};console.log(` Parcel: ${b.category||"unknown"} - ${b.gewasnaam||b.gewas||"geen gewas"}`),console.log(` Geometry type: ${_.getType()}, extent: ${_.getExtent().map(O=>O.toFixed(0)).join(", ")}`);const T=_.getExtent(),A=T[2]-T[0],I=T[3]-T[1],P=Math.max(A,I)*.05,N=[T[0]-P,T[1]-P,T[2]+P,T[3]+P],L=Math.max(A,I)*.3,C=[T[0]-L,T[1]-L,T[2]+L,T[3]+L];Ex=_,Jy=new fCe({source:new VCe({url:"https://ahn.arcgisonline.nl/arcgis/rest/services/Hoogtebestand/AHN4_DTM_50cm/ImageServer",params:{renderingRule:JSON.stringify({rasterFunction:"AHN - Color Ramp D"})},crossOrigin:"anonymous"}),extent:N,zIndex:998}),Jy.on("prerender",O=>{if(!Ex)return;const D=O.context;if(!D)return;const V=O.frameState;if(!V)return;D.save(),D.beginPath(),(Ex.getType()==="Polygon"?Ex.getCoordinates()[0]:Ex.getCoordinates()[0][0]).forEach((G,de)=>{const ke=t.getPixelFromCoordinate(G);if(!ke)return;const Ue=V.pixelRatio,Ne=ke[0]*Ue,fe=ke[1]*Ue;de===0?D.moveTo(Ne,fe):D.lineTo(Ne,fe)}),D.closePath(),D.clip()}),Jy.on("postrender",O=>{const D=O.context;D&&D.restore()}),t.addLayer(Jy);const M=new Nl({features:[y]});return tk=new Ol({source:M,style:new vn({fill:new Dn({color:"rgba(0, 0, 0, 0)"}),stroke:new Pn({color:"#dc2626",width:3})}),zIndex:999}),t.addLayer(tk),console.log(" Parcel height map displayed"),!0}catch(n){return console.error("Failed to show parcel height map:",n),!1}}var l5={};l5.version="0.18.5";var Ibe=1252,B1t=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Pbe=function(t){B1t.indexOf(t)!=-1&&(Ibe=t)};function W1t(){Pbe(1252)}var IA=function(t){Pbe(t)};function H1t(){IA(1200),W1t()}var RR=function(e){return String.fromCharCode(e)},Loe=function(e){return String.fromCharCode(e)},c5,pg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function PA(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0,c=0;c<t.length;)n=t.charCodeAt(c++),s=n>>2,r=t.charCodeAt(c++),o=(n&3)<<4|r>>4,i=t.charCodeAt(c++),a=(r&15)<<2|i>>6,l=i&63,isNaN(r)?a=l=64:isNaN(i)&&(l=64),e+=pg.charAt(s)+pg.charAt(o)+pg.charAt(a)+pg.charAt(l);return e}function Tp(t){var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)s=pg.indexOf(t.charAt(c++)),o=pg.indexOf(t.charAt(c++)),n=s<<2|o>>4,e+=String.fromCharCode(n),a=pg.indexOf(t.charAt(c++)),r=(o&15)<<4|a>>2,a!==64&&(e+=String.fromCharCode(r)),l=pg.indexOf(t.charAt(c++)),i=(a&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var Ar=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Op=(function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function rv(t){return Ar?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function Doe(t){return Ar?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var ih=function(e){return Ar?Op(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function FL(t){if(typeof ArrayBuffer>"u")return ih(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function tP(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function q1t(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var Oo=Ar?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Op(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),i=0;for(e=0,n=0;e<t.length;n+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function K1t(t){for(var e=[],n=0,r=t.length+250,i=rv(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)i[n++]=o;else if(o<2048)i[n++]=192|o>>6&31,i[n++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var a=t.charCodeAt(++s)&1023;i[n++]=240|o>>8&7,i[n++]=128|o>>2&63,i[n++]=128|a>>6&15|(o&3)<<4,i[n++]=128|a&63}else i[n++]=224|o>>12&15,i[n++]=128|o>>6&63,i[n++]=128|o&63;n>r&&(e.push(i.slice(0,n)),n=0,i=rv(65535),r=65530)}return e.push(i.slice(0,n)),Oo(e)}var nk=/\u0000/g,MR=/[\u0001-\u0006]/g;function Aw(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function hh(t,e){var n=""+t;return n.length>=e?n:Ji("0",e-n.length)+n}function kq(t,e){var n=""+t;return n.length>=e?n:Ji(" ",e-n.length)+n}function u5(t,e){var n=""+t;return n.length>=e?n:n+Ji(" ",e-n.length)}function Y1t(t,e){var n=""+Math.round(t);return n.length>=e?n:Ji("0",e-n.length)+n}function X1t(t,e){var n=""+t;return n.length>=e?n:Ji("0",e-n.length)+n}var joe=Math.pow(2,32);function $_(t,e){if(t>joe||t<-joe)return Y1t(t,e);var n=Math.round(t);return X1t(n,e)}function h5(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var $oe=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],lF=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Z1t(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var rs={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Foe={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},J1t={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function d5(t,e,n){for(var r=t<0?-1:1,i=t*r,s=0,o=1,a=0,l=1,c=0,u=0,h=Math.floor(i);c<e&&(h=Math.floor(i),a=h*o+s,u=h*c+l,!(i-h<5e-8));)i=1/(i-h),s=o,o=a,l=c,c=u;if(u>e&&(c>e?(u=l,a=s):(u=c,a=o)),!n)return[0,r*a,u];var f=Math.floor(r*a/u);return[f,r*a-f*u,u]}function NR(t,e,n){if(t>2958465||t<0)return null;var r=t|0,i=Math.floor(86400*(t-r)),s=0,o=[],a={D:r,T:i,u:86400*(t-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),e&&e.date1904&&(r+=1462),a.u>.9999&&(a.u=0,++i==86400&&(a.T=i=0,++r,++a.D)),r===60)o=n?[1317,10,29]:[1900,2,29],s=3;else if(r===0)o=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=svt(l,o))}return a.y=o[0],a.m=o[1],a.d=o[2],a.S=i%60,i=Math.floor(i/60),a.M=i%60,i=Math.floor(i/60),a.H=i,a.q=s,a}var Cbe=new Date(1899,11,31,0,0,0),Q1t=Cbe.getTime(),evt=new Date(1900,2,1,0,0,0);function Rbe(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=evt&&(n+=1440*60*1e3),(n-(Q1t+(t.getTimezoneOffset()-Cbe.getTimezoneOffset())*6e4))/(1440*60*1e3)}function Aq(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function tvt(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function nvt(t){var e=t<0?12:11,n=Aq(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function rvt(t){var e=Aq(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function ivt(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=nvt(t):e===10?n=t.toFixed(10).substr(0,12):n=rvt(t),Aq(tvt(n.toUpperCase()))}function Uz(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):ivt(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return n0(14,Rbe(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function svt(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function ovt(t,e,n,r){var i="",s=0,o=0,a=n.y,l,c=0;switch(t){case 98:a=n.y+543;case 121:switch(e.length){case 1:case 2:l=a%100,c=2;break;default:l=a%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=n.m,c=e.length;break;case 3:return lF[n.m-1][1];case 5:return lF[n.m-1][0];default:return lF[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=n.d,c=e.length;break;case 3:return $oe[n.q][0];default:return $oe[n.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(n.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=n.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=n.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?hh(n.S,e.length):(r>=2?o=r===3?1e3:100:o=r===1?10:1,s=Math.round(o*(n.S+n.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(i=hh(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=a,c=1;break}var u=c>0?hh(l,c):"";return u}function mg(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var Mbe=/%/g;function avt(t,e,n){var r=e.replace(Mbe,""),i=e.length-r.length;return hp(t,r,n*Math.pow(10,2*i))+Ji("%",i)}function lvt(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return hp(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function Nbe(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+Nbe(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),n.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var Obe=/# (\?+)( ?)\/( ?)(\d+)/;function cvt(t,e,n){var r=parseInt(t[4],10),i=Math.round(e*r),s=Math.floor(i/r),o=i-s*r,a=r;return n+(s===0?"":""+s)+" "+(o===0?Ji(" ",t[1].length+1+t[4].length):kq(o,t[1].length)+t[2]+"/"+t[3]+hh(a,t[4].length))}function uvt(t,e,n){return n+(e===0?"":""+e)+Ji(" ",t[1].length+2+t[4].length)}var Lbe=/^#*0*\.([0#]+)/,Dbe=/\).*[0#]/,jbe=/\(###\) ###\\?-####/;function Ra(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function Voe(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function zoe(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function hvt(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function dvt(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Bc(t,e,n){if(t.charCodeAt(0)===40&&!e.match(Dbe)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Bc("n",r,n):"("+Bc("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return lvt(t,e,n);if(e.indexOf("%")!==-1)return avt(t,e,n);if(e.indexOf("E")!==-1)return Nbe(e,n);if(e.charCodeAt(0)===36)return"$"+Bc(t,e.substr(e.charAt(1)==" "?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(e.match(/^00+$/))return c+$_(l,e.length);if(e.match(/^[#?]+$/))return i=$_(n,0),i==="0"&&(i=""),i.length>e.length?i:Ra(e.substr(0,e.length-i.length))+i;if(s=e.match(Obe))return cvt(s,l,c);if(e.match(/^#+0+$/))return c+$_(l,e.length-e.indexOf("0"));if(s=e.match(Lbe))return i=Voe(n,s[1].length).replace(/^([^\.]+)$/,"$1."+Ra(s[1])).replace(/\.$/,"."+Ra(s[1])).replace(/\.(\d*)$/,function(y,_){return"."+_+Ji("0",Ra(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+Voe(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+mg($_(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Bc(t,e,-n):mg(""+(Math.floor(n)+hvt(n,s[1].length)))+"."+hh(zoe(n,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Bc(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Aw(Bc(t,e.replace(/[\\-]/g,""),n)),o=0,Aw(Aw(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<i.length?i.charAt(o++):y==="0"?"0":""}));if(e.match(jbe))return i=Bc(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=d5(l,Math.pow(10,o)-1,!1),i=""+c,u=hp("n",s[1],a[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=u5(a[2],o),u.length<s[4].length&&(u=Ra(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=d5(l,Math.pow(10,o)-1,!0),c+(a[0]||(a[1]?"":"0"))+" "+(a[1]?kq(a[1],o)+s[2]+"/"+s[3]+u5(a[2],o):Ji(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=$_(n,0),e.length<=i.length?i:Ra(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var h=e.indexOf(".")-o,f=e.length-i.length-h;return Ra(e.substr(0,h)+i+e.substr(e.length-f))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=zoe(n,s[1].length),n<0?"-"+Bc(t,e,-n):mg(dvt(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?hh(0,3-y.length):"")+y})+"."+hh(o,s[1].length);switch(e){case"###,##0.00":return Bc(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var g=mg($_(l,0));return g!=="0"?c+g:"";case"###,###.00":return Bc(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Bc(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function fvt(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return hp(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function pvt(t,e,n){var r=e.replace(Mbe,""),i=e.length-r.length;return hp(t,r,n*Math.pow(10,2*i))+Ji("%",i)}function $be(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+$be(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!n.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function rd(t,e,n){if(t.charCodeAt(0)===40&&!e.match(Dbe)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?rd("n",r,n):"("+rd("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return fvt(t,e,n);if(e.indexOf("%")!==-1)return pvt(t,e,n);if(e.indexOf("E")!==-1)return $be(e,n);if(e.charCodeAt(0)===36)return"$"+rd(t,e.substr(e.charAt(1)==" "?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(e.match(/^00+$/))return c+hh(l,e.length);if(e.match(/^[#?]+$/))return i=""+n,n===0&&(i=""),i.length>e.length?i:Ra(e.substr(0,e.length-i.length))+i;if(s=e.match(Obe))return uvt(s,l,c);if(e.match(/^#+0+$/))return c+hh(l,e.length-e.indexOf("0"));if(s=e.match(Lbe))return i=(""+n).replace(/^([^\.]+)$/,"$1."+Ra(s[1])).replace(/\.$/,"."+Ra(s[1])),i=i.replace(/\.(\d*)$/,function(y,_){return"."+_+Ji("0",Ra(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+mg(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+rd(t,e,-n):mg(""+n)+"."+Ji("0",s[1].length);if(s=e.match(/^#,#*,#0/))return rd(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Aw(rd(t,e.replace(/[\\-]/g,""),n)),o=0,Aw(Aw(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<i.length?i.charAt(o++):y==="0"?"0":""}));if(e.match(jbe))return i=rd(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=d5(l,Math.pow(10,o)-1,!1),i=""+c,u=hp("n",s[1],a[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=u5(a[2],o),u.length<s[4].length&&(u=Ra(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=d5(l,Math.pow(10,o)-1,!0),c+(a[0]||(a[1]?"":"0"))+" "+(a[1]?kq(a[1],o)+s[2]+"/"+s[3]+u5(a[2],o):Ji(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+n,e.length<=i.length?i:Ra(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var h=e.indexOf(".")-o,f=e.length-i.length-h;return Ra(e.substr(0,h)+i+e.substr(e.length-f))}if(s=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+rd(t,e,-n):mg(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?hh(0,3-y.length):"")+y})+"."+hh(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=mg(""+l);return g!=="0"?c+g:"";default:if(e.match(/\.[0#?]*$/))return rd(t,e.slice(0,e.lastIndexOf(".")),n)+Ra(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function hp(t,e,n){return(n|0)===n?rd(t,e,n):Bc(t,e,n)}function mvt(t){for(var e=[],n=!1,r=0,i=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(i,r-i),i=r+1}if(e[e.length]=t.substr(i),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var Fbe=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Vbe(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":h5(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(Fbe))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function gvt(t,e,n,r){for(var i=[],s="",o=0,a="",l="t",c,u,h,f="H";o<t.length;)switch(a=t.charAt(o)){case"G":if(!h5(t,o))throw new Error("unrecognized character "+a+" in "+t);i[i.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(h=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(h);i[i.length]={t:"t",v:s},++o;break;case"\\":var g=t.charAt(++o),y=g==="("||g===")"?g:"t";i[i.length]={t:y,v:g},++o;break;case"_":i[i.length]={t:"t",v:" "},o+=2;break;case"@":i[i.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(c==null&&(c=NR(e,n,t.charAt(o+1)==="2"),c==null))return"";i[i.length]={t:"X",v:t.substr(o,2)},l=a,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":a=a.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=NR(e,n),c==null))return"";for(s=a;++o<t.length&&t.charAt(o).toLowerCase()===a;)s+=a;a==="m"&&l.toLowerCase()==="h"&&(a="M"),a==="h"&&(a=f),i[i.length]={t:a,v:s},l=a;break;case"A":case"a":case"":var _={t:a,v:a};if(c==null&&(c=NR(e,n)),t.substr(o,3).toUpperCase()==="A/P"?(c!=null&&(_.v=c.H>=12?"P":"A"),_.t="T",f="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(c!=null&&(_.v=c.H>=12?"PM":"AM"),_.t="T",o+=5,f="h"):t.substr(o,5).toUpperCase()==="/"?(c!=null&&(_.v=c.H>=12?"":""),_.t="T",o+=5,f="h"):(_.t="t",++o),c==null&&_.t==="T")return"";i[i.length]=_,l=a;break;case"[":for(s=a;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(Fbe)){if(c==null&&(c=NR(e,n),c==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Vbe(t)||(i[i.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=a;++o<t.length&&(a=t.charAt(o))==="0";)s+=a;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=a;++o<t.length&&"0#?.,E+-%".indexOf(a=t.charAt(o))>-1;)s+=a;i[i.length]={t:"n",v:s};break;case"?":for(s=a;t.charAt(++o)===a;)s+=a;i[i.length]={t:a,v:s},l=a;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":i[i.length]={t:r===1?"t":a,v:a},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=a;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:a,v:a},++o;break;case"$":i[i.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(a)===-1)throw new Error("unrecognized character "+a+" in "+t);i[i.length]={t:"t",v:a},++o;break}var b=0,T=0,A;for(o=i.length-1,l="t";o>=0;--o)switch(i[o].t){case"h":case"H":i[o].t=f,l="h",b<1&&(b=1);break;case"s":(A=i[o].v.match(/\.0+$/))&&(T=Math.max(T,A[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":l=i[o].t;break;case"m":l==="s"&&(i[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&i[o].v.match(/[Hh]/)&&(b=1),b<2&&i[o].v.match(/[Mm]/)&&(b=2),b<3&&i[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var I="",P;for(o=0;o<i.length;++o)switch(i[o].t){case"t":case"T":case" ":case"D":break;case"X":i[o].v="",i[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[o].v=ovt(i[o].t.charCodeAt(0),i[o].v,c,T),i[o].t="t";break;case"n":case"?":for(P=o+1;i[P]!=null&&((a=i[P].t)==="?"||a==="D"||(a===" "||a==="t")&&i[P+1]!=null&&(i[P+1].t==="?"||i[P+1].t==="t"&&i[P+1].v==="/")||i[o].t==="("&&(a===" "||a==="n"||a===")")||a==="t"&&(i[P].v==="/"||i[P].v===" "&&i[P+1]!=null&&i[P+1].t=="?"));)i[o].v+=i[P].v,i[P]={v:"",t:";"},++P;I+=i[o].v,o=P-1;break;case"G":i[o].t="t",i[o].v=Uz(e,n);break}var N="",L,C;if(I.length>0){I.charCodeAt(0)==40?(L=e<0&&I.charCodeAt(0)===45?-e:e,C=hp("n",I,L)):(L=e<0&&r>1?-e:e,C=hp("n",I,L),L<0&&i[0]&&i[0].t=="t"&&(C=C.substr(1),i[0].v="-"+i[0].v)),P=C.length-1;var M=i.length;for(o=0;o<i.length;++o)if(i[o]!=null&&i[o].t!="t"&&i[o].v.indexOf(".")>-1){M=o;break}var O=i.length;if(M===i.length&&C.indexOf("E")===-1){for(o=i.length-1;o>=0;--o)i[o]==null||"n?".indexOf(i[o].t)===-1||(P>=i[o].v.length-1?(P-=i[o].v.length,i[o].v=C.substr(P+1,i[o].v.length)):P<0?i[o].v="":(i[o].v=C.substr(0,P+1),P=-1),i[o].t="t",O=o);P>=0&&O<i.length&&(i[O].v=C.substr(0,P+1)+i[O].v)}else if(M!==i.length&&C.indexOf("E")===-1){for(P=C.indexOf(".")-1,o=M;o>=0;--o)if(!(i[o]==null||"n?".indexOf(i[o].t)===-1)){for(u=i[o].v.indexOf(".")>-1&&o===M?i[o].v.indexOf(".")-1:i[o].v.length-1,N=i[o].v.substr(u+1);u>=0;--u)P>=0&&(i[o].v.charAt(u)==="0"||i[o].v.charAt(u)==="#")&&(N=C.charAt(P--)+N);i[o].v=N,i[o].t="t",O=o}for(P>=0&&O<i.length&&(i[O].v=C.substr(0,P+1)+i[O].v),P=C.indexOf(".")+1,o=M;o<i.length;++o)if(!(i[o]==null||"n?(".indexOf(i[o].t)===-1&&o!==M)){for(u=i[o].v.indexOf(".")>-1&&o===M?i[o].v.indexOf(".")+1:0,N=i[o].v.substr(0,u);u<i[o].v.length;++u)P<C.length&&(N+=C.charAt(P++));i[o].v=N,i[o].t="t",O=o}}}for(o=0;o<i.length;++o)i[o]!=null&&"n?".indexOf(i[o].t)>-1&&(L=r>1&&e<0&&o>0&&i[o-1].v==="-"?-e:e,i[o].v=hp(i[o].t,i[o].v,L),i[o].t="t");var D="";for(o=0;o!==i.length;++o)i[o]!=null&&(D+=i[o].v);return D}var Goe=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Uoe(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function yvt(t,e){var n=mvt(t),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var s=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,s];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var o=n[0].match(Goe),a=n[1].match(Goe);return Uoe(e,o)?[r,n[0]]:Uoe(e,a)?[r,n[1]]:[r,n[o!=null&&a!=null?2:1]]}return[r,s]}function n0(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:rs)[t],r==null&&(r=n.table&&n.table[Foe[t]]||rs[Foe[t]]),r==null&&(r=J1t[t]||"General");break}if(h5(r,0))return Uz(e,n);e instanceof Date&&(e=Rbe(e,n.date1904));var i=yvt(r,e);if(h5(i[1]))return Uz(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return gvt(i[1],e,n,i[0])}function zbe(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(rs[n]==null){e<0&&(e=n);continue}if(rs[n]==t){e=n;break}}e<0&&(e=391)}return rs[e]=t,e}function VL(t){for(var e=0;e!=392;++e)t[e]!==void 0&&zbe(t[e],e)}function zL(){rs=Z1t()}var Gbe=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function vvt(t){var e=typeof t=="number"?rs[t]:t;return e=e.replace(Gbe,"(\\d+)"),new RegExp("^"+e+"$")}function _vt(t,e,n){var r=-1,i=-1,s=-1,o=-1,a=-1,l=-1;(e.match(Gbe)||[]).forEach(function(h,f){var g=parseInt(n[f+1],10);switch(h.toLowerCase().charAt(0)){case"y":r=g;break;case"d":s=g;break;case"h":o=g;break;case"s":l=g;break;case"m":o>=0?a=g:i=g;break}}),l>=0&&a==-1&&i>=0&&(a=i,i=-1);var c=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return o==-1&&a==-1&&l==-1?c:r==-1&&i==-1&&s==-1?u:c+"T"+u}var xvt=(function(){var t={};t.version="1.2.0";function e(){for(var C=0,M=new Array(256),O=0;O!=256;++O)C=O,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,M[O]=C;return typeof Int32Array<"u"?new Int32Array(M):M}var n=e();function r(C){var M=0,O=0,D=0,V=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)V[D]=C[D];for(D=0;D!=256;++D)for(O=C[D],M=256+D;M<4096;M+=256)O=V[M]=O>>>8^C[O&255];var U=[];for(D=1;D!=16;++D)U[D-1]=typeof Int32Array<"u"?V.subarray(D*256,D*256+256):V.slice(D*256,D*256+256);return U}var i=r(n),s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],h=i[6],f=i[7],g=i[8],y=i[9],_=i[10],b=i[11],T=i[12],A=i[13],I=i[14];function P(C,M){for(var O=M^-1,D=0,V=C.length;D<V;)O=O>>>8^n[(O^C.charCodeAt(D++))&255];return~O}function N(C,M){for(var O=M^-1,D=C.length-15,V=0;V<D;)O=I[C[V++]^O&255]^A[C[V++]^O>>8&255]^T[C[V++]^O>>16&255]^b[C[V++]^O>>>24]^_[C[V++]]^y[C[V++]]^g[C[V++]]^f[C[V++]]^h[C[V++]]^u[C[V++]]^c[C[V++]]^l[C[V++]]^a[C[V++]]^o[C[V++]]^s[C[V++]]^n[C[V++]];for(D+=15;V<D;)O=O>>>8^n[(O^C[V++])&255];return~O}function L(C,M){for(var O=M^-1,D=0,V=C.length,U=0,G=0;D<V;)U=C.charCodeAt(D++),U<128?O=O>>>8^n[(O^U)&255]:U<2048?(O=O>>>8^n[(O^(192|U>>6&31))&255],O=O>>>8^n[(O^(128|U&63))&255]):U>=55296&&U<57344?(U=(U&1023)+64,G=C.charCodeAt(D++)&1023,O=O>>>8^n[(O^(240|U>>8&7))&255],O=O>>>8^n[(O^(128|U>>2&63))&255],O=O>>>8^n[(O^(128|G>>6&15|(U&3)<<4))&255],O=O>>>8^n[(O^(128|G&63))&255]):(O=O>>>8^n[(O^(224|U>>12&15))&255],O=O>>>8^n[(O^(128|U>>6&63))&255],O=O>>>8^n[(O^(128|U&63))&255]);return~O}return t.table=n,t.bstr=P,t.buf=N,t.str=L,t})(),Zr=(function(){var e={};e.version="1.2.1";function n(q,re){for(var J=q.split("/"),te=re.split("/"),se=0,oe=0,Re=Math.min(J.length,te.length);se<Re;++se){if(oe=J[se].length-te[se].length)return oe;if(J[se]!=te[se])return J[se]<te[se]?-1:1}return J.length-te.length}function r(q){if(q.charAt(q.length-1)=="/")return q.slice(0,-1).indexOf("/")===-1?q:r(q.slice(0,-1));var re=q.lastIndexOf("/");return re===-1?q:q.slice(0,re+1)}function i(q){if(q.charAt(q.length-1)=="/")return i(q.slice(0,-1));var re=q.lastIndexOf("/");return re===-1?q:q.slice(re+1)}function s(q,re){typeof re=="string"&&(re=new Date(re));var J=re.getHours();J=J<<6|re.getMinutes(),J=J<<5|re.getSeconds()>>>1,q.write_shift(2,J);var te=re.getFullYear()-1980;te=te<<4|re.getMonth()+1,te=te<<5|re.getDate(),q.write_shift(2,te)}function o(q){var re=q.read_shift(2)&65535,J=q.read_shift(2)&65535,te=new Date,se=J&31;J>>>=5;var oe=J&15;J>>>=4,te.setMilliseconds(0),te.setFullYear(J+1980),te.setMonth(oe-1),te.setDate(se);var Re=re&31;re>>>=5;var Be=re&63;return re>>>=6,te.setHours(re),te.setMinutes(Be),te.setSeconds(Re<<1),te}function a(q){rc(q,0);for(var re={},J=0;q.l<=q.length-4;){var te=q.read_shift(2),se=q.read_shift(2),oe=q.l+se,Re={};switch(te){case 21589:J=q.read_shift(1),J&1&&(Re.mtime=q.read_shift(4)),se>5&&(J&2&&(Re.atime=q.read_shift(4)),J&4&&(Re.ctime=q.read_shift(4))),Re.mtime&&(Re.mt=new Date(Re.mtime*1e3));break}q.l=oe,re[te]=Re}return re}var l;function c(){return l||(l={})}function u(q,re){if(q[0]==80&&q[1]==75)return sn(q,re);if((q[0]|32)==109&&(q[1]|32)==105)return Je(q,re);if(q.length<512)throw new Error("CFB file size "+q.length+" < 512");var J=3,te=512,se=0,oe=0,Re=0,Be=0,Pe=0,Oe=[],Le=q.slice(0,512);rc(Le,0);var lt=h(Le);switch(J=lt[0],J){case 3:te=512;break;case 4:te=4096;break;case 0:if(lt[1]==0)return sn(q,re);default:throw new Error("Major Version: Expected 3 or 4 saw "+J)}te!==512&&(Le=q.slice(0,te),rc(Le,28));var yt=q.slice(0,te);f(Le,J);var Ct=Le.read_shift(4,"i");if(J===3&&Ct!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ct);Le.l+=4,Re=Le.read_shift(4,"i"),Le.l+=4,Le.chk("00100000","Mini Stream Cutoff Size: "),Be=Le.read_shift(4,"i"),se=Le.read_shift(4,"i"),Pe=Le.read_shift(4,"i"),oe=Le.read_shift(4,"i");for(var ct=-1,ut=0;ut<109&&(ct=Le.read_shift(4,"i"),!(ct<0));++ut)Oe[ut]=ct;var En=g(q,te);b(Pe,oe,En,te,Oe);var Mr=A(En,Re,Oe,te);Mr[Re].name="!Directory",se>0&&Be!==G&&(Mr[Be].name="!MiniFAT"),Mr[Oe[0]].name="!FAT",Mr.fat_addrs=Oe,Mr.ssz=te;var $r={},vi=[],Eu=[],kc=[];I(Re,Mr,En,vi,se,$r,Eu,Be),y(Eu,kc,vi),vi.shift();var jl={FileIndex:Eu,FullPaths:kc};return re&&re.raw&&(jl.raw={header:yt,sectors:En}),jl}function h(q){if(q[q.l]==80&&q[q.l+1]==75)return[0,0];q.chk(de,"Header Signature: "),q.l+=16;var re=q.read_shift(2,"u");return[q.read_shift(2,"u"),re]}function f(q,re){var J=9;switch(q.l+=2,J=q.read_shift(2)){case 9:if(re!=3)throw new Error("Sector Shift: Expected 9 saw "+J);break;case 12:if(re!=4)throw new Error("Sector Shift: Expected 12 saw "+J);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+J)}q.chk("0600","Mini Sector Shift: "),q.chk("000000000000","Reserved: ")}function g(q,re){for(var J=Math.ceil(q.length/re)-1,te=[],se=1;se<J;++se)te[se-1]=q.slice(se*re,(se+1)*re);return te[J-1]=q.slice(J*re),te}function y(q,re,J){for(var te=0,se=0,oe=0,Re=0,Be=0,Pe=J.length,Oe=[],Le=[];te<Pe;++te)Oe[te]=Le[te]=te,re[te]=J[te];for(;Be<Le.length;++Be)te=Le[Be],se=q[te].L,oe=q[te].R,Re=q[te].C,Oe[te]===te&&(se!==-1&&Oe[se]!==se&&(Oe[te]=Oe[se]),oe!==-1&&Oe[oe]!==oe&&(Oe[te]=Oe[oe])),Re!==-1&&(Oe[Re]=te),se!==-1&&te!=Oe[te]&&(Oe[se]=Oe[te],Le.lastIndexOf(se)<Be&&Le.push(se)),oe!==-1&&te!=Oe[te]&&(Oe[oe]=Oe[te],Le.lastIndexOf(oe)<Be&&Le.push(oe));for(te=1;te<Pe;++te)Oe[te]===te&&(oe!==-1&&Oe[oe]!==oe?Oe[te]=Oe[oe]:se!==-1&&Oe[se]!==se&&(Oe[te]=Oe[se]));for(te=1;te<Pe;++te)if(q[te].type!==0){if(Be=te,Be!=Oe[Be])do Be=Oe[Be],re[te]=re[Be]+"/"+re[te];while(Be!==0&&Oe[Be]!==-1&&Be!=Oe[Be]);Oe[te]=-1}for(re[0]+="/",te=1;te<Pe;++te)q[te].type!==2&&(re[te]+="/")}function _(q,re,J){for(var te=q.start,se=q.size,oe=[],Re=te;J&&se>0&&Re>=0;)oe.push(re.slice(Re*U,Re*U+U)),se-=U,Re=Ny(J,Re*4);return oe.length===0?Ge(0):Oo(oe).slice(0,q.size)}function b(q,re,J,te,se){var oe=G;if(q===G){if(re!==0)throw new Error("DIFAT chain shorter than expected")}else if(q!==-1){var Re=J[q],Be=(te>>>2)-1;if(!Re)return;for(var Pe=0;Pe<Be&&(oe=Ny(Re,Pe*4))!==G;++Pe)se.push(oe);b(Ny(Re,te-4),re-1,J,te,se)}}function T(q,re,J,te,se){var oe=[],Re=[];se||(se=[]);var Be=te-1,Pe=0,Oe=0;for(Pe=re;Pe>=0;){se[Pe]=!0,oe[oe.length]=Pe,Re.push(q[Pe]);var Le=J[Math.floor(Pe*4/te)];if(Oe=Pe*4&Be,te<4+Oe)throw new Error("FAT boundary crossed: "+Pe+" 4 "+te);if(!q[Le])break;Pe=Ny(q[Le],Oe)}return{nodes:oe,data:Zoe([Re])}}function A(q,re,J,te){var se=q.length,oe=[],Re=[],Be=[],Pe=[],Oe=te-1,Le=0,lt=0,yt=0,Ct=0;for(Le=0;Le<se;++Le)if(Be=[],yt=Le+re,yt>=se&&(yt-=se),!Re[yt]){Pe=[];var ct=[];for(lt=yt;lt>=0;){ct[lt]=!0,Re[lt]=!0,Be[Be.length]=lt,Pe.push(q[lt]);var ut=J[Math.floor(lt*4/te)];if(Ct=lt*4&Oe,te<4+Ct)throw new Error("FAT boundary crossed: "+lt+" 4 "+te);if(!q[ut]||(lt=Ny(q[ut],Ct),ct[lt]))break}oe[yt]={nodes:Be,data:Zoe([Pe])}}return oe}function I(q,re,J,te,se,oe,Re,Be){for(var Pe=0,Oe=te.length?2:0,Le=re[q].data,lt=0,yt=0,Ct;lt<Le.length;lt+=128){var ct=Le.slice(lt,lt+128);rc(ct,64),yt=ct.read_shift(2),Ct=Mq(ct,0,yt-Oe),te.push(Ct);var ut={name:Ct,type:ct.read_shift(1),color:ct.read_shift(1),L:ct.read_shift(4,"i"),R:ct.read_shift(4,"i"),C:ct.read_shift(4,"i"),clsid:ct.read_shift(16),state:ct.read_shift(4,"i"),start:0,size:0},En=ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2);En!==0&&(ut.ct=P(ct,ct.l-8));var Mr=ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2)+ct.read_shift(2);Mr!==0&&(ut.mt=P(ct,ct.l-8)),ut.start=ct.read_shift(4,"i"),ut.size=ct.read_shift(4,"i"),ut.size<0&&ut.start<0&&(ut.size=ut.type=0,ut.start=G,ut.name=""),ut.type===5?(Pe=ut.start,se>0&&Pe!==G&&(re[Pe].name="!StreamData")):ut.size>=4096?(ut.storage="fat",re[ut.start]===void 0&&(re[ut.start]=T(J,ut.start,re.fat_addrs,re.ssz)),re[ut.start].name=ut.name,ut.content=re[ut.start].data.slice(0,ut.size)):(ut.storage="minifat",ut.size<0?ut.size=0:Pe!==G&&ut.start!==G&&re[Pe]&&(ut.content=_(ut,re[Pe].data,(re[Be]||{}).data))),ut.content&&rc(ut.content,0),oe[Ct]=ut,Re.push(ut)}}function P(q,re){return new Date((lc(q,re+4)/1e7*Math.pow(2,32)+lc(q,re)/1e7-11644473600)*1e3)}function N(q,re){return c(),u(l.readFileSync(q),re)}function L(q,re){var J=re&&re.type;switch(J||Ar&&Buffer.isBuffer(q)&&(J="buffer"),J||"base64"){case"file":return N(q,re);case"base64":return u(ih(Tp(q)),re);case"binary":return u(ih(q),re)}return u(q,re)}function C(q,re){var J=re||{},te=J.root||"Root Entry";if(q.FullPaths||(q.FullPaths=[]),q.FileIndex||(q.FileIndex=[]),q.FullPaths.length!==q.FileIndex.length)throw new Error("inconsistent CFB structure");q.FullPaths.length===0&&(q.FullPaths[0]=te+"/",q.FileIndex[0]={name:te,type:5}),J.CLSID&&(q.FileIndex[0].clsid=J.CLSID),M(q)}function M(q){var re="Sh33tJ5";if(!Zr.find(q,"/"+re)){var J=Ge(4);J[0]=55,J[1]=J[3]=50,J[2]=54,q.FileIndex.push({name:re,type:2,content:J,size:4,L:69,R:69,C:69}),q.FullPaths.push(q.FullPaths[0]+re),O(q)}}function O(q,re){C(q);for(var J=!1,te=!1,se=q.FullPaths.length-1;se>=0;--se){var oe=q.FileIndex[se];switch(oe.type){case 0:te?J=!0:(q.FileIndex.pop(),q.FullPaths.pop());break;case 1:case 2:case 5:te=!0,isNaN(oe.R*oe.L*oe.C)&&(J=!0),oe.R>-1&&oe.L>-1&&oe.R==oe.L&&(J=!0);break;default:J=!0;break}}if(!(!J&&!re)){var Re=new Date(1987,1,19),Be=0,Pe=Object.create?Object.create(null):{},Oe=[];for(se=0;se<q.FullPaths.length;++se)Pe[q.FullPaths[se]]=!0,q.FileIndex[se].type!==0&&Oe.push([q.FullPaths[se],q.FileIndex[se]]);for(se=0;se<Oe.length;++se){var Le=r(Oe[se][0]);te=Pe[Le],te||(Oe.push([Le,{name:i(Le).replace("/",""),type:1,clsid:Ue,ct:Re,mt:Re,content:null}]),Pe[Le]=!0)}for(Oe.sort(function(Ct,ct){return n(Ct[0],ct[0])}),q.FullPaths=[],q.FileIndex=[],se=0;se<Oe.length;++se)q.FullPaths[se]=Oe[se][0],q.FileIndex[se]=Oe[se][1];for(se=0;se<Oe.length;++se){var lt=q.FileIndex[se],yt=q.FullPaths[se];if(lt.name=i(yt).replace("/",""),lt.L=lt.R=lt.C=-(lt.color=1),lt.size=lt.content?lt.content.length:0,lt.start=0,lt.clsid=lt.clsid||Ue,se===0)lt.C=Oe.length>1?1:-1,lt.size=0,lt.type=5;else if(yt.slice(-1)=="/"){for(Be=se+1;Be<Oe.length&&r(q.FullPaths[Be])!=yt;++Be);for(lt.C=Be>=Oe.length?-1:Be,Be=se+1;Be<Oe.length&&r(q.FullPaths[Be])!=r(yt);++Be);lt.R=Be>=Oe.length?-1:Be,lt.type=1}else r(q.FullPaths[se+1]||"")==r(yt)&&(lt.R=se+1),lt.type=2}}}function D(q,re){var J=re||{};if(J.fileType=="mad")return ze(q,J);switch(O(q),J.fileType){case"zip":return Et(q,J)}var te=(function(Ct){for(var ct=0,ut=0,En=0;En<Ct.FileIndex.length;++En){var Mr=Ct.FileIndex[En];if(Mr.content){var $r=Mr.content.length;$r>0&&($r<4096?ct+=$r+63>>6:ut+=$r+511>>9)}}for(var vi=Ct.FullPaths.length+3>>2,Eu=ct+7>>3,kc=ct+127>>7,jl=Eu+ut+vi+kc,ss=jl+127>>7,Lp=ss<=109?0:Math.ceil((ss-109)/127);jl+ss+Lp+127>>7>ss;)Lp=++ss<=109?0:Math.ceil((ss-109)/127);var Pi=[1,Lp,ss,kc,vi,ut,ct,0];return Ct.FileIndex[0].size=ct<<6,Pi[7]=(Ct.FileIndex[0].start=Pi[0]+Pi[1]+Pi[2]+Pi[3]+Pi[4]+Pi[5])+(Pi[6]+7>>3),Pi})(q),se=Ge(te[7]<<9),oe=0,Re=0;{for(oe=0;oe<8;++oe)se.write_shift(1,ke[oe]);for(oe=0;oe<8;++oe)se.write_shift(2,0);for(se.write_shift(2,62),se.write_shift(2,3),se.write_shift(2,65534),se.write_shift(2,9),se.write_shift(2,6),oe=0;oe<3;++oe)se.write_shift(2,0);for(se.write_shift(4,0),se.write_shift(4,te[2]),se.write_shift(4,te[0]+te[1]+te[2]+te[3]-1),se.write_shift(4,0),se.write_shift(4,4096),se.write_shift(4,te[3]?te[0]+te[1]+te[2]-1:G),se.write_shift(4,te[3]),se.write_shift(-4,te[1]?te[0]-1:G),se.write_shift(4,te[1]),oe=0;oe<109;++oe)se.write_shift(-4,oe<te[2]?te[1]+oe:-1)}if(te[1])for(Re=0;Re<te[1];++Re){for(;oe<236+Re*127;++oe)se.write_shift(-4,oe<te[2]?te[1]+oe:-1);se.write_shift(-4,Re===te[1]-1?G:Re+1)}var Be=function(Ct){for(Re+=Ct;oe<Re-1;++oe)se.write_shift(-4,oe+1);Ct&&(++oe,se.write_shift(-4,G))};for(Re=oe=0,Re+=te[1];oe<Re;++oe)se.write_shift(-4,Ne.DIFSECT);for(Re+=te[2];oe<Re;++oe)se.write_shift(-4,Ne.FATSECT);Be(te[3]),Be(te[4]);for(var Pe=0,Oe=0,Le=q.FileIndex[0];Pe<q.FileIndex.length;++Pe)Le=q.FileIndex[Pe],Le.content&&(Oe=Le.content.length,!(Oe<4096)&&(Le.start=Re,Be(Oe+511>>9)));for(Be(te[6]+7>>3);se.l&511;)se.write_shift(-4,Ne.ENDOFCHAIN);for(Re=oe=0,Pe=0;Pe<q.FileIndex.length;++Pe)Le=q.FileIndex[Pe],Le.content&&(Oe=Le.content.length,!(!Oe||Oe>=4096)&&(Le.start=Re,Be(Oe+63>>6)));for(;se.l&511;)se.write_shift(-4,Ne.ENDOFCHAIN);for(oe=0;oe<te[4]<<2;++oe){var lt=q.FullPaths[oe];if(!lt||lt.length===0){for(Pe=0;Pe<17;++Pe)se.write_shift(4,0);for(Pe=0;Pe<3;++Pe)se.write_shift(4,-1);for(Pe=0;Pe<12;++Pe)se.write_shift(4,0);continue}Le=q.FileIndex[oe],oe===0&&(Le.start=Le.size?Le.start-1:G);var yt=oe===0&&J.root||Le.name;if(Oe=2*(yt.length+1),se.write_shift(64,yt,"utf16le"),se.write_shift(2,Oe),se.write_shift(1,Le.type),se.write_shift(1,Le.color),se.write_shift(-4,Le.L),se.write_shift(-4,Le.R),se.write_shift(-4,Le.C),Le.clsid)se.write_shift(16,Le.clsid,"hex");else for(Pe=0;Pe<4;++Pe)se.write_shift(4,0);se.write_shift(4,Le.state||0),se.write_shift(4,0),se.write_shift(4,0),se.write_shift(4,0),se.write_shift(4,0),se.write_shift(4,Le.start),se.write_shift(4,Le.size),se.write_shift(4,0)}for(oe=1;oe<q.FileIndex.length;++oe)if(Le=q.FileIndex[oe],Le.size>=4096)if(se.l=Le.start+1<<9,Ar&&Buffer.isBuffer(Le.content))Le.content.copy(se,se.l,0,Le.size),se.l+=Le.size+511&-512;else{for(Pe=0;Pe<Le.size;++Pe)se.write_shift(1,Le.content[Pe]);for(;Pe&511;++Pe)se.write_shift(1,0)}for(oe=1;oe<q.FileIndex.length;++oe)if(Le=q.FileIndex[oe],Le.size>0&&Le.size<4096)if(Ar&&Buffer.isBuffer(Le.content))Le.content.copy(se,se.l,0,Le.size),se.l+=Le.size+63&-64;else{for(Pe=0;Pe<Le.size;++Pe)se.write_shift(1,Le.content[Pe]);for(;Pe&63;++Pe)se.write_shift(1,0)}if(Ar)se.l=se.length;else for(;se.l<se.length;)se.write_shift(1,0);return se}function V(q,re){var J=q.FullPaths.map(function(Pe){return Pe.toUpperCase()}),te=J.map(function(Pe){var Oe=Pe.split("/");return Oe[Oe.length-(Pe.slice(-1)=="/"?2:1)]}),se=!1;re.charCodeAt(0)===47?(se=!0,re=J[0].slice(0,-1)+re):se=re.indexOf("/")!==-1;var oe=re.toUpperCase(),Re=se===!0?J.indexOf(oe):te.indexOf(oe);if(Re!==-1)return q.FileIndex[Re];var Be=!oe.match(MR);for(oe=oe.replace(nk,""),Be&&(oe=oe.replace(MR,"!")),Re=0;Re<J.length;++Re)if((Be?J[Re].replace(MR,"!"):J[Re]).replace(nk,"")==oe||(Be?te[Re].replace(MR,"!"):te[Re]).replace(nk,"")==oe)return q.FileIndex[Re];return null}var U=64,G=-2,de="d0cf11e0a1b11ae1",ke=[208,207,17,224,161,177,26,225],Ue="00000000000000000000000000000000",Ne={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:G,FREESECT:-1,HEADER_SIGNATURE:de,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Ue,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function fe(q,re,J){c();var te=D(q,J);l.writeFileSync(re,te)}function De(q){for(var re=new Array(q.length),J=0;J<q.length;++J)re[J]=String.fromCharCode(q[J]);return re.join("")}function Ce(q,re){var J=D(q,re);switch(re&&re.type||"buffer"){case"file":return c(),l.writeFileSync(re.filename,J),J;case"binary":return typeof J=="string"?J:De(J);case"base64":return PA(typeof J=="string"?J:De(J));case"buffer":if(Ar)return Buffer.isBuffer(J)?J:Op(J);case"array":return typeof J=="string"?ih(J):J}return J}var Q;function W(q){try{var re=q.InflateRaw,J=new re;if(J._processChunk(new Uint8Array([3,0]),J._finishFlushFlag),J.bytesRead)Q=q;else throw new Error("zlib does not expose bytesRead")}catch(te){console.error("cannot use native zlib: "+(te.message||te))}}function ne(q,re){if(!Q)return Ae(q,re);var J=Q.InflateRaw,te=new J,se=te._processChunk(q.slice(q.l),te._finishFlushFlag);return q.l+=te.bytesRead,se}function ie(q){return Q?Q.deflateRawSync(q):jn(q)}var le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ve=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],qe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ke(q){var re=(q<<1|q<<11)&139536|(q<<5|q<<15)&558144;return(re>>16|re>>8|re)&255}for(var Se=typeof Uint8Array<"u",we=Se?new Uint8Array(256):[],Dt=0;Dt<256;++Dt)we[Dt]=Ke(Dt);function Ye(q,re){var J=we[q&255];return re<=8?J>>>8-re:(J=J<<8|we[q>>8&255],re<=16?J>>>16-re:(J=J<<8|we[q>>16&255],J>>>24-re))}function on(q,re){var J=re&7,te=re>>>3;return(q[te]|(J<=6?0:q[te+1]<<8))>>>J&3}function jt(q,re){var J=re&7,te=re>>>3;return(q[te]|(J<=5?0:q[te+1]<<8))>>>J&7}function pn(q,re){var J=re&7,te=re>>>3;return(q[te]|(J<=4?0:q[te+1]<<8))>>>J&15}function _n(q,re){var J=re&7,te=re>>>3;return(q[te]|(J<=3?0:q[te+1]<<8))>>>J&31}function dt(q,re){var J=re&7,te=re>>>3;return(q[te]|(J<=1?0:q[te+1]<<8))>>>J&127}function hr(q,re,J){var te=re&7,se=re>>>3,oe=(1<<J)-1,Re=q[se]>>>te;return J<8-te||(Re|=q[se+1]<<8-te,J<16-te)||(Re|=q[se+2]<<16-te,J<24-te)||(Re|=q[se+3]<<24-te),Re&oe}function zn(q,re,J){var te=re&7,se=re>>>3;return te<=5?q[se]|=(J&7)<<te:(q[se]|=J<<te&255,q[se+1]=(J&7)>>8-te),re+3}function Hn(q,re,J){var te=re&7,se=re>>>3;return J=(J&1)<<te,q[se]|=J,re+1}function ei(q,re,J){var te=re&7,se=re>>>3;return J<<=te,q[se]|=J&255,J>>>=8,q[se+1]=J,re+8}function _o(q,re,J){var te=re&7,se=re>>>3;return J<<=te,q[se]|=J&255,J>>>=8,q[se+1]=J&255,q[se+2]=J>>>8,re+16}function Rr(q,re){var J=q.length,te=2*J>re?2*J:re+5,se=0;if(J>=re)return q;if(Ar){var oe=Doe(te);if(q.copy)q.copy(oe);else for(;se<q.length;++se)oe[se]=q[se];return oe}else if(Se){var Re=new Uint8Array(te);if(Re.set)Re.set(q);else for(;se<J;++se)Re[se]=q[se];return Re}return q.length=te,q}function Ai(q){for(var re=new Array(q),J=0;J<q;++J)re[J]=0;return re}function Ls(q,re,J){var te=1,se=0,oe=0,Re=0,Be=0,Pe=q.length,Oe=Se?new Uint16Array(32):Ai(32);for(oe=0;oe<32;++oe)Oe[oe]=0;for(oe=Pe;oe<J;++oe)q[oe]=0;Pe=q.length;var Le=Se?new Uint16Array(Pe):Ai(Pe);for(oe=0;oe<Pe;++oe)Oe[se=q[oe]]++,te<se&&(te=se),Le[oe]=0;for(Oe[0]=0,oe=1;oe<=te;++oe)Oe[oe+16]=Be=Be+Oe[oe-1]<<1;for(oe=0;oe<Pe;++oe)Be=q[oe],Be!=0&&(Le[oe]=Oe[Be+16]++);var lt=0;for(oe=0;oe<Pe;++oe)if(lt=q[oe],lt!=0)for(Be=Ye(Le[oe],te)>>te-lt,Re=(1<<te+4-lt)-1;Re>=0;--Re)re[Be|Re<<lt]=lt&15|oe<<4;return te}var _t=Se?new Uint16Array(512):Ai(512),Qn=Se?new Uint16Array(32):Ai(32);if(!Se){for(var dr=0;dr<512;++dr)_t[dr]=0;for(dr=0;dr<32;++dr)Qn[dr]=0}(function(){for(var q=[],re=0;re<32;re++)q.push(5);Ls(q,Qn,32);var J=[];for(re=0;re<=143;re++)J.push(8);for(;re<=255;re++)J.push(9);for(;re<=279;re++)J.push(7);for(;re<=287;re++)J.push(8);Ls(J,_t,288)})();var Ft=(function(){for(var re=Se?new Uint8Array(32768):[],J=0,te=0;J<qe.length-1;++J)for(;te<qe[J+1];++te)re[te]=J;for(;te<32768;++te)re[te]=29;var se=Se?new Uint8Array(259):[];for(J=0,te=0;J<ve.length-1;++J)for(;te<ve[J+1];++te)se[te]=J;function oe(Be,Pe){for(var Oe=0;Oe<Be.length;){var Le=Math.min(65535,Be.length-Oe),lt=Oe+Le==Be.length;for(Pe.write_shift(1,+lt),Pe.write_shift(2,Le),Pe.write_shift(2,~Le&65535);Le-- >0;)Pe[Pe.l++]=Be[Oe++]}return Pe.l}function Re(Be,Pe){for(var Oe=0,Le=0,lt=Se?new Uint16Array(32768):[];Le<Be.length;){var yt=Math.min(65535,Be.length-Le);if(yt<10){for(Oe=zn(Pe,Oe,+(Le+yt==Be.length)),Oe&7&&(Oe+=8-(Oe&7)),Pe.l=Oe/8|0,Pe.write_shift(2,yt),Pe.write_shift(2,~yt&65535);yt-- >0;)Pe[Pe.l++]=Be[Le++];Oe=Pe.l*8;continue}Oe=zn(Pe,Oe,+(Le+yt==Be.length)+2);for(var Ct=0;yt-- >0;){var ct=Be[Le];Ct=(Ct<<5^ct)&32767;var ut=-1,En=0;if((ut=lt[Ct])&&(ut|=Le&-32768,ut>Le&&(ut-=32768),ut<Le))for(;Be[ut+En]==Be[Le+En]&&En<250;)++En;if(En>2){ct=se[En],ct<=22?Oe=ei(Pe,Oe,we[ct+1]>>1)-1:(ei(Pe,Oe,3),Oe+=5,ei(Pe,Oe,we[ct-23]>>5),Oe+=3);var Mr=ct<8?0:ct-4>>2;Mr>0&&(_o(Pe,Oe,En-ve[ct]),Oe+=Mr),ct=re[Le-ut],Oe=ei(Pe,Oe,we[ct]>>3),Oe-=3;var $r=ct<4?0:ct-2>>1;$r>0&&(_o(Pe,Oe,Le-ut-qe[ct]),Oe+=$r);for(var vi=0;vi<En;++vi)lt[Ct]=Le&32767,Ct=(Ct<<5^Be[Le])&32767,++Le;yt-=En-1}else ct<=143?ct=ct+48:Oe=Hn(Pe,Oe,1),Oe=ei(Pe,Oe,we[ct]),lt[Ct]=Le&32767,++Le}Oe=ei(Pe,Oe,0)-1}return Pe.l=(Oe+7)/8|0,Pe.l}return function(Pe,Oe){return Pe.length<8?oe(Pe,Oe):Re(Pe,Oe)}})();function jn(q){var re=Ge(50+Math.floor(q.length*1.1)),J=Ft(q,re);return re.slice(0,J)}var en=Se?new Uint16Array(32768):Ai(32768),$o=Se?new Uint16Array(32768):Ai(32768),Gi=Se?new Uint16Array(128):Ai(128),Ds=1,Nn=1;function Ii(q,re){var J=_n(q,re)+257;re+=5;var te=_n(q,re)+1;re+=5;var se=pn(q,re)+4;re+=4;for(var oe=0,Re=Se?new Uint8Array(19):Ai(19),Be=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Pe=1,Oe=Se?new Uint8Array(8):Ai(8),Le=Se?new Uint8Array(8):Ai(8),lt=Re.length,yt=0;yt<se;++yt)Re[le[yt]]=oe=jt(q,re),Pe<oe&&(Pe=oe),Oe[oe]++,re+=3;var Ct=0;for(Oe[0]=0,yt=1;yt<=Pe;++yt)Le[yt]=Ct=Ct+Oe[yt-1]<<1;for(yt=0;yt<lt;++yt)(Ct=Re[yt])!=0&&(Be[yt]=Le[Ct]++);var ct=0;for(yt=0;yt<lt;++yt)if(ct=Re[yt],ct!=0){Ct=we[Be[yt]]>>8-ct;for(var ut=(1<<7-ct)-1;ut>=0;--ut)Gi[Ct|ut<<ct]=ct&7|yt<<3}var En=[];for(Pe=1;En.length<J+te;)switch(Ct=Gi[dt(q,re)],re+=Ct&7,Ct>>>=3){case 16:for(oe=3+on(q,re),re+=2,Ct=En[En.length-1];oe-- >0;)En.push(Ct);break;case 17:for(oe=3+jt(q,re),re+=3;oe-- >0;)En.push(0);break;case 18:for(oe=11+dt(q,re),re+=7;oe-- >0;)En.push(0);break;default:En.push(Ct),Pe<Ct&&(Pe=Ct);break}var Mr=En.slice(0,J),$r=En.slice(J);for(yt=J;yt<286;++yt)Mr[yt]=0;for(yt=te;yt<30;++yt)$r[yt]=0;return Ds=Ls(Mr,en,286),Nn=Ls($r,$o,30),re}function He(q,re){if(q[0]==3&&!(q[1]&3))return[rv(re),2];for(var J=0,te=0,se=Doe(re||1<<18),oe=0,Re=se.length>>>0,Be=0,Pe=0;(te&1)==0;){if(te=jt(q,J),J+=3,te>>>1)te>>1==1?(Be=9,Pe=5):(J=Ii(q,J),Be=Ds,Pe=Nn);else{J&7&&(J+=8-(J&7));var Oe=q[J>>>3]|q[(J>>>3)+1]<<8;if(J+=32,Oe>0)for(!re&&Re<oe+Oe&&(se=Rr(se,oe+Oe),Re=se.length);Oe-- >0;)se[oe++]=q[J>>>3],J+=8;continue}for(;;){!re&&Re<oe+32767&&(se=Rr(se,oe+32767),Re=se.length);var Le=hr(q,J,Be),lt=te>>>1==1?_t[Le]:en[Le];if(J+=lt&15,lt>>>=4,(lt>>>8&255)===0)se[oe++]=lt;else{if(lt==256)break;lt-=257;var yt=lt<8?0:lt-4>>2;yt>5&&(yt=0);var Ct=oe+ve[lt];yt>0&&(Ct+=hr(q,J,yt),J+=yt),Le=hr(q,J,Pe),lt=te>>>1==1?Qn[Le]:$o[Le],J+=lt&15,lt>>>=4;var ct=lt<4?0:lt-2>>1,ut=qe[lt];for(ct>0&&(ut+=hr(q,J,ct),J+=ct),!re&&Re<Ct&&(se=Rr(se,Ct+100),Re=se.length);oe<Ct;)se[oe]=se[oe-ut],++oe}}}return re?[se,J+7>>>3]:[se.slice(0,oe),J+7>>>3]}function Ae(q,re){var J=q.slice(q.l||0),te=He(J,re);return q.l+=te[1],te[0]}function Ie(q,re){if(q)typeof console<"u"&&console.error(re);else throw new Error(re)}function sn(q,re){var J=q;rc(J,0);var te=[],se=[],oe={FileIndex:te,FullPaths:se};C(oe,{root:re.root});for(var Re=J.length-4;(J[Re]!=80||J[Re+1]!=75||J[Re+2]!=5||J[Re+3]!=6)&&Re>=0;)--Re;J.l=Re+4,J.l+=4;var Be=J.read_shift(2);J.l+=6;var Pe=J.read_shift(4);for(J.l=Pe,Re=0;Re<Be;++Re){J.l+=20;var Oe=J.read_shift(4),Le=J.read_shift(4),lt=J.read_shift(2),yt=J.read_shift(2),Ct=J.read_shift(2);J.l+=8;var ct=J.read_shift(4),ut=a(J.slice(J.l+lt,J.l+lt+yt));J.l+=lt+yt+Ct;var En=J.l;J.l=ct+4,z(J,Oe,Le,oe,ut),J.l=En}return oe}function z(q,re,J,te,se){q.l+=2;var oe=q.read_shift(2),Re=q.read_shift(2),Be=o(q);if(oe&8257)throw new Error("Unsupported ZIP encryption");for(var Pe=q.read_shift(4),Oe=q.read_shift(4),Le=q.read_shift(4),lt=q.read_shift(2),yt=q.read_shift(2),Ct="",ct=0;ct<lt;++ct)Ct+=String.fromCharCode(q[q.l++]);if(yt){var ut=a(q.slice(q.l,q.l+yt));(ut[21589]||{}).mt&&(Be=ut[21589].mt),((se||{})[21589]||{}).mt&&(Be=se[21589].mt)}q.l+=yt;var En=q.slice(q.l,q.l+Oe);switch(Re){case 8:En=ne(q,Le);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Re)}var Mr=!1;oe&8&&(Pe=q.read_shift(4),Pe==134695760&&(Pe=q.read_shift(4),Mr=!0),Oe=q.read_shift(4),Le=q.read_shift(4)),Oe!=re&&Ie(Mr,"Bad compressed size: "+re+" != "+Oe),Le!=J&&Ie(Mr,"Bad uncompressed size: "+J+" != "+Le),et(te,Ct,En,{unsafe:!0,mt:Be})}function Et(q,re){var J=re||{},te=[],se=[],oe=Ge(1),Re=J.compression?8:0,Be=0,Pe=0,Oe=0,Le=0,lt=0,yt=q.FullPaths[0],Ct=yt,ct=q.FileIndex[0],ut=[],En=0;for(Pe=1;Pe<q.FullPaths.length;++Pe)if(Ct=q.FullPaths[Pe].slice(yt.length),ct=q.FileIndex[Pe],!(!ct.size||!ct.content||Ct=="Sh33tJ5")){var Mr=Le,$r=Ge(Ct.length);for(Oe=0;Oe<Ct.length;++Oe)$r.write_shift(1,Ct.charCodeAt(Oe)&127);$r=$r.slice(0,$r.l),ut[lt]=xvt.buf(ct.content,0);var vi=ct.content;Re==8&&(vi=ie(vi)),oe=Ge(30),oe.write_shift(4,67324752),oe.write_shift(2,20),oe.write_shift(2,Be),oe.write_shift(2,Re),ct.mt?s(oe,ct.mt):oe.write_shift(4,0),oe.write_shift(-4,ut[lt]),oe.write_shift(4,vi.length),oe.write_shift(4,ct.content.length),oe.write_shift(2,$r.length),oe.write_shift(2,0),Le+=oe.length,te.push(oe),Le+=$r.length,te.push($r),Le+=vi.length,te.push(vi),oe=Ge(46),oe.write_shift(4,33639248),oe.write_shift(2,0),oe.write_shift(2,20),oe.write_shift(2,Be),oe.write_shift(2,Re),oe.write_shift(4,0),oe.write_shift(-4,ut[lt]),oe.write_shift(4,vi.length),oe.write_shift(4,ct.content.length),oe.write_shift(2,$r.length),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(4,0),oe.write_shift(4,Mr),En+=oe.l,se.push(oe),En+=$r.length,se.push($r),++lt}return oe=Ge(22),oe.write_shift(4,101010256),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,lt),oe.write_shift(2,lt),oe.write_shift(4,En),oe.write_shift(4,Le),oe.write_shift(2,0),Oo([Oo(te),Oo(se),oe])}var X={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ae(q,re){if(q.ctype)return q.ctype;var J=q.name||"",te=J.match(/\.([^\.]+)$/);return te&&X[te[1]]||re&&(te=(J=re).match(/[\.\\]([^\.\\])+$/),te&&X[te[1]])?X[te[1]]:"application/octet-stream"}function Ve(q){for(var re=PA(q),J=[],te=0;te<re.length;te+=76)J.push(re.slice(te,te+76));return J.join(`\r
`)+`\r
`}function ee(q){var re=q.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Oe){var Le=Oe.charCodeAt(0).toString(16).toUpperCase();return"="+(Le.length==1?"0"+Le:Le)});re=re.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),re.charAt(0)==`
`&&(re="=0D"+re.slice(1)),re=re.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var J=[],te=re.split(`\r
`),se=0;se<te.length;++se){var oe=te[se];if(oe.length==0){J.push("");continue}for(var Re=0;Re<oe.length;){var Be=76,Pe=oe.slice(Re,Re+Be);Pe.charAt(Be-1)=="="?Be--:Pe.charAt(Be-2)=="="?Be-=2:Pe.charAt(Be-3)=="="&&(Be-=3),Pe=oe.slice(Re,Re+Be),Re+=Be,Re<oe.length&&(Pe+="="),J.push(Pe)}}return J.join(`\r
`)}function ge(q){for(var re=[],J=0;J<q.length;++J){for(var te=q[J];J<=q.length&&te.charAt(te.length-1)=="=";)te=te.slice(0,te.length-1)+q[++J];re.push(te)}for(var se=0;se<re.length;++se)re[se]=re[se].replace(/[=][0-9A-Fa-f]{2}/g,function(oe){return String.fromCharCode(parseInt(oe.slice(1),16))});return ih(re.join(`\r
`))}function je(q,re,J){for(var te="",se="",oe="",Re,Be=0;Be<10;++Be){var Pe=re[Be];if(!Pe||Pe.match(/^\s*$/))break;var Oe=Pe.match(/^(.*?):\s*([^\s].*)$/);if(Oe)switch(Oe[1].toLowerCase()){case"content-location":te=Oe[2].trim();break;case"content-type":oe=Oe[2].trim();break;case"content-transfer-encoding":se=Oe[2].trim();break}}switch(++Be,se.toLowerCase()){case"base64":Re=ih(Tp(re.slice(Be).join("")));break;case"quoted-printable":Re=ge(re.slice(Be));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+se)}var Le=et(q,te.slice(J.length),Re,{unsafe:!0});oe&&(Le.ctype=oe)}function Je(q,re){if(De(q.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var J=re&&re.root||"",te=(Ar&&Buffer.isBuffer(q)?q.toString("binary"):De(q)).split(`\r
`),se=0,oe="";for(se=0;se<te.length;++se)if(oe=te[se],!!/^Content-Location:/i.test(oe)&&(oe=oe.slice(oe.indexOf("file")),J||(J=oe.slice(0,oe.lastIndexOf("/")+1)),oe.slice(0,J.length)!=J))for(;J.length>0&&(J=J.slice(0,J.length-1),J=J.slice(0,J.lastIndexOf("/")+1),oe.slice(0,J.length)!=J););var Re=(te[1]||"").match(/boundary="(.*?)"/);if(!Re)throw new Error("MAD cannot find boundary");var Be="--"+(Re[1]||""),Pe=[],Oe=[],Le={FileIndex:Pe,FullPaths:Oe};C(Le);var lt,yt=0;for(se=0;se<te.length;++se){var Ct=te[se];Ct!==Be&&Ct!==Be+"--"||(yt++&&je(Le,te.slice(lt,se),J),lt=se)}return Le}function ze(q,re){var J=re||{},te=J.boundary||"SheetJS";te="------="+te;for(var se=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+te.slice(2)+'"',"","",""],oe=q.FullPaths[0],Re=oe,Be=q.FileIndex[0],Pe=1;Pe<q.FullPaths.length;++Pe)if(Re=q.FullPaths[Pe].slice(oe.length),Be=q.FileIndex[Pe],!(!Be.size||!Be.content||Re=="Sh33tJ5")){Re=Re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(En){return"_x"+En.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(En){return"_u"+En.charCodeAt(0).toString(16)+"_"});for(var Oe=Be.content,Le=Ar&&Buffer.isBuffer(Oe)?Oe.toString("binary"):De(Oe),lt=0,yt=Math.min(1024,Le.length),Ct=0,ct=0;ct<=yt;++ct)(Ct=Le.charCodeAt(ct))>=32&&Ct<128&&++lt;var ut=lt>=yt*4/5;se.push(te),se.push("Content-Location: "+(J.root||"file:///C:/SheetJS/")+Re),se.push("Content-Transfer-Encoding: "+(ut?"quoted-printable":"base64")),se.push("Content-Type: "+ae(Be,Re)),se.push(""),se.push(ut?ee(Le):Ve(Le))}return se.push(te+`--\r
`),se.join(`\r
`)}function nt(q){var re={};return C(re,q),re}function et(q,re,J,te){var se=te&&te.unsafe;se||C(q);var oe=!se&&Zr.find(q,re);if(!oe){var Re=q.FullPaths[0];re.slice(0,Re.length)==Re?Re=re:(Re.slice(-1)!="/"&&(Re+="/"),Re=(Re+re).replace("//","/")),oe={name:i(re),type:2},q.FileIndex.push(oe),q.FullPaths.push(Re),se||Zr.utils.cfb_gc(q)}return oe.content=J,oe.size=J?J.length:0,te&&(te.CLSID&&(oe.clsid=te.CLSID),te.mt&&(oe.mt=te.mt),te.ct&&(oe.ct=te.ct)),oe}function Mt(q,re){C(q);var J=Zr.find(q,re);if(J){for(var te=0;te<q.FileIndex.length;++te)if(q.FileIndex[te]==J)return q.FileIndex.splice(te,1),q.FullPaths.splice(te,1),!0}return!1}function zt(q,re,J){C(q);var te=Zr.find(q,re);if(te){for(var se=0;se<q.FileIndex.length;++se)if(q.FileIndex[se]==te)return q.FileIndex[se].name=i(J),q.FullPaths[se]=J,!0}return!1}function yn(q){O(q,!0)}return e.find=V,e.read=L,e.parse=u,e.write=Ce,e.writeFile=fe,e.utils={cfb_new:nt,cfb_add:et,cfb_del:Mt,cfb_mov:zt,cfb_gc:yn,ReadShift:ik,CheckField:oEe,prep_blob:rc,bconcat:Oo,use_zlib:W,_deflateRaw:jn,_inflateRaw:Ae,consts:Ne},e})();function wvt(t){return typeof t=="string"?FL(t):Array.isArray(t)?q1t(t):t}function nP(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=FL(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?RA(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var i=new Blob([wvt(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var a=File(t);return a.open("w"),a.encoding="binary",Array.isArray(e)&&(e=tP(e)),a.write(e),a.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function jo(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function Boe(t,e){for(var n=[],r=jo(t),i=0;i!==r.length;++i)n[t[r[i]][e]]==null&&(n[t[r[i]][e]]=r[i]);return n}function Iq(t){for(var e=[],n=jo(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function GL(t){for(var e=[],n=jo(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function bvt(t){for(var e=[],n=jo(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var f5=new Date(1899,11,30,0,0,0);function Rl(t,e){var n=t.getTime(),r=f5.getTime()+(t.getTimezoneOffset()-f5.getTimezoneOffset())*6e4;return(n-r)/(1440*60*1e3)}var Ube=new Date,Evt=f5.getTime()+(Ube.getTimezoneOffset()-f5.getTimezoneOffset())*6e4,Woe=Ube.getTimezoneOffset();function Bbe(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Evt),e.getTimezoneOffset()!==Woe&&e.setTime(e.getTime()+(e.getTimezoneOffset()-Woe)*6e4),e}var Hoe=new Date("2017-02-19T19:06:09.000Z"),Wbe=isNaN(Hoe.getFullYear())?new Date("2/19/17"):Hoe,Svt=Wbe.getFullYear()==2017;function Ua(t,e){var n=new Date(t);if(Svt)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(Wbe.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function UL(t,e){if(Ar&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return n[s]||s})}catch{}for(var r=[],i=0;i!=t.length;++i)r.push(String.fromCharCode(t[i]));return r.join("")}function Ml(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=Ml(t[n]));return e}function Ji(t,e){for(var n="";n.length<e;)n+=t;return n}function dp(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return n=-n,s}),!isNaN(e=Number(r)))?e/n:e}var Tvt=["january","february","march","april","may","june","july","august","september","october","november","december"];function CA(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return n;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&Tvt.indexOf(o)==-1)return n}else if(o.match(/[a-z]/))return n;return r<0||r>8099?n:(i>0||s>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}function Un(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return Ar?r=Op(n):r=K1t(n),Zr.utils.cfb_add(t,e,r)}Zr.utils.cfb_add(t,e,n)}else t.file(e,n)}function Pq(){return Zr.utils.cfb_new()}var Os=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,kvt={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Cq=Iq(kvt),Rq=/[&<>'"]/g,Avt=/[\u0000-\u0008\u000b-\u001f]/g;function Wr(t){var e=t+"";return e.replace(Rq,function(n){return Cq[n]}).replace(Avt,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function qoe(t){return Wr(t).replace(/ /g,"_x0020_")}var Hbe=/[\u0000-\u001f]/g;function Ivt(t){var e=t+"";return e.replace(Rq,function(n){return Cq[n]}).replace(/\n/g,"<br/>").replace(Hbe,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function Pvt(t){var e=t+"";return e.replace(Rq,function(n){return Cq[n]}).replace(Hbe,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}function Cvt(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Rvt(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function cF(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(i=t.charCodeAt(n++),r>191&&r<224){o=(r&31)<<6,o|=i&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}o=t.charCodeAt(n++),a=((r&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(a>>>10&1023)),e+=String.fromCharCode(56320+(a&1023))}return e}function Koe(t){var e=rv(2*t.length),n,r,i=1,s=0,o=0,a;for(r=0;r<t.length;r+=i)i=1,(a=t.charCodeAt(r))<128?n=a:a<224?(n=(a&31)*64+(t.charCodeAt(r+1)&63),i=2):a<240?(n=(a&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),i=3):(i=4,n=(a&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,o=55296+(n>>>10&1023),n=56320+(n&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=n%256,e[s++]=n>>>8;return e.slice(0,s).toString("ucs2")}function Yoe(t){return Op(t,"binary").toString("utf8")}var OR="foo bar baz",rk=Ar&&(Yoe(OR)==cF(OR)&&Yoe||Koe(OR)==cF(OR)&&Koe)||cF,RA=Ar?function(t){return Op(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,i=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},Mvt=(function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)r=r.replace(t[i][0],t[i][1]);return r}})(),qbe=/(^\s|\s$|\n)/;function Lo(t,e){return"<"+t+(e.match(qbe)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function MA(t){return jo(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function vt(t,e,n){return"<"+t+(n!=null?MA(n):"")+(e!=null?(e.match(qbe)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function Bz(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function Nvt(t,e){switch(typeof t){case"string":var n=vt("vt:lpwstr",Wr(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return vt((t|0)==t?"vt:i4":"vt:r8",Wr(String(t)));case"boolean":return vt("vt:bool",t?"true":"false")}if(t instanceof Date)return vt("vt:filetime",Bz(t));throw new Error("Unable to serialize "+t)}var uo={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Rb=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ac={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Ovt(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return r==2047?i==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}function Lvt(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,o=r?-e:e;isFinite(o)?o==0?i=s=0:(i=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var a=0;a<=5;++a,s/=256)t[n+a]=s&255;t[n+6]=(i&15)<<4|s&15,t[n+7]=i>>4|r}var Xoe=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var i=0,s=t[0][r].length;i<s;i+=n)e.push.apply(e,t[0][r].slice(i,i+n));return e},Zoe=Ar?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Op(e)})):Xoe(t)}:Xoe,Joe=function(t,e,n){for(var r=[],i=e;i<n;i+=2)r.push(String.fromCharCode(QS(t,i)));return r.join("").replace(nk,"")},Mq=Ar?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(nk,""):Joe(t,e,n)}:Joe,Qoe=function(t,e,n){for(var r=[],i=e;i<e+n;++i)r.push(("0"+t[i].toString(16)).slice(-2));return r.join("")},Kbe=Ar?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):Qoe(t,e,n)}:Qoe,eae=function(t,e,n){for(var r=[],i=e;i<n;i++)r.push(String.fromCharCode(Sx(t,i)));return r.join("")},rP=Ar?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):eae(e,n,r)}:eae,Ybe=function(t,e){var n=lc(t,e);return n>0?rP(t,e+4,e+4+n-1):""},Xbe=Ybe,Zbe=function(t,e){var n=lc(t,e);return n>0?rP(t,e+4,e+4+n-1):""},Jbe=Zbe,Qbe=function(t,e){var n=2*lc(t,e);return n>0?rP(t,e+4,e+4+n-1):""},eEe=Qbe,tEe=function(e,n){var r=lc(e,n);return r>0?Mq(e,n+4,n+4+r):""},nEe=tEe,rEe=function(t,e){var n=lc(t,e);return n>0?rP(t,e+4,e+4+n):""},iEe=rEe,sEe=function(t,e){return Ovt(t,e)},p5=sEe,Nq=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Ar&&(Xbe=function(e,n){if(!Buffer.isBuffer(e))return Ybe(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},Jbe=function(e,n){if(!Buffer.isBuffer(e))return Zbe(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},eEe=function(e,n){if(!Buffer.isBuffer(e))return Qbe(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},nEe=function(e,n){if(!Buffer.isBuffer(e))return tEe(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},iEe=function(e,n){if(!Buffer.isBuffer(e))return rEe(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},p5=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):sEe(e,n)},Nq=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Sx=function(t,e){return t[e]},QS=function(t,e){return t[e+1]*256+t[e]},Dvt=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},lc=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Ny=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},jvt=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function ik(t,e){var n="",r,i,s=[],o,a,l,c;switch(e){case"dbcs":if(c=this.l,Ar&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)n+=String.fromCharCode(QS(this,c)),c+=2;t*=2;break;case"utf8":n=rP(this,this.l,this.l+t);break;case"utf16le":t*=2,n=Mq(this,this.l,this.l+t);break;case"wstr":return ik.call(this,t,"dbcs");case"lpstr-ansi":n=Xbe(this,this.l),t=4+lc(this,this.l);break;case"lpstr-cp":n=Jbe(this,this.l),t=4+lc(this,this.l);break;case"lpwstr":n=eEe(this,this.l),t=4+2*lc(this,this.l);break;case"lpp4":t=4+lc(this,this.l),n=nEe(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+lc(this,this.l),n=iEe(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(o=Sx(this,this.l+t++))!==0;)s.push(RR(o));n=s.join("");break;case"_wstr":for(t=0,n="";(o=QS(this,this.l+t))!==0;)s.push(RR(o)),t+=2;t+=2,n=s.join("");break;case"dbcs-cont":for(n="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return o=Sx(this,c),this.l=c+1,a=ik.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(RR(QS(this,c))),c+=2}n=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return o=Sx(this,c),this.l=c+1,a=ik.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(RR(Sx(this,c))),c+=1}n=s.join("");break;default:switch(t){case 1:return r=Sx(this,this.l),this.l++,r;case 2:return r=(e==="i"?Dvt:QS)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(t>0?Ny:jvt)(this,this.l),this.l+=4,r):(i=lc(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=p5(this,this.l):i=p5([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:n=Kbe(this,this.l,t);break}}return this.l+=t,n}var $vt=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},Fvt=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},Vvt=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function zvt(t,e,n){var r=0,i=0;if(n==="dbcs"){for(i=0;i!=e.length;++i)Vvt(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(n==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(n==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var o=e.charCodeAt(i);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,$vt(this,e,this.l);break;case 8:if(r=8,n==="f"){Lvt(this,e,this.l);break}case 16:break;case-4:r=4,Fvt(this,e,this.l);break}return this.l+=r,this}function oEe(t,e){var n=Kbe(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function rc(t,e){t.l=e,t.read_shift=ik,t.chk=oEe,t.write_shift=zvt}function Ud(t,e){t.l+=e}function Ge(t){var e=rv(t);return rc(e,0),e}function Al(){var t=[],e=Ar?256:2048,n=function(c){var u=Ge(c);return rc(u,0),u},r=n(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},s=function(c){return r&&c<r.length-r.l?r:(i(),r=n(Math.max(c+1,e)))},o=function(){return i(),Oo(t)},a=function(c){i(),r=c,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:a,end:o,_bufs:t}}function tt(t,e,n,r){var i=+e,s;if(!isNaN(i)){r||(r=OEt[i].p||(n||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var o=t.next(s);i<=127?o.write_shift(1,i):(o.write_shift(1,(i&127)+128),o.write_shift(1,i>>7));for(var a=0;a!=4;++a)if(r>=128)o.write_shift(1,(r&127)+128),r>>=7;else{o.write_shift(1,r);break}r>0&&Nq(n)&&t.push(n)}}function sk(t,e,n){var r=Ml(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function tae(t,e,n){var r=Ml(t);return r.s=sk(r.s,e.s,n),r.e=sk(r.e,e.s,n),r}function ok(t,e){if(t.cRel&&t.c<0)for(t=Ml(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Ml(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=qr(t);return!t.cRel&&t.cRel!=null&&(n=Bvt(n)),!t.rRel&&t.rRel!=null&&(n=Gvt(n)),n}function uF(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+_a(t.s.c)+":"+(t.e.cRel?"":"$")+_a(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Do(t.s.r)+":"+(t.e.rRel?"":"$")+Do(t.e.r):ok(t.s,e.biff)+":"+ok(t.e,e.biff)}function Oq(t){return parseInt(Uvt(t),10)-1}function Do(t){return""+(t+1)}function Gvt(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Uvt(t){return t.replace(/\$(\d+)$/,"$1")}function Lq(t){for(var e=Wvt(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function _a(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Bvt(t){return t.replace(/^([A-Z])/,"$$$1")}function Wvt(t){return t.replace(/^\$([A-Z])/,"$1")}function Hvt(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function fo(t){for(var e=0,n=0,r=0;r<t.length;++r){var i=t.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:e-1}}function qr(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function Sc(t){var e=t.indexOf(":");return e==-1?{s:fo(t),e:fo(t)}:{s:fo(t.slice(0,e)),e:fo(t.slice(e+1))}}function Ms(t,e){return typeof e>"u"||typeof e=="number"?Ms(t.s,t.e):(typeof t!="string"&&(t=qr(t)),typeof e!="string"&&(e=qr(e)),t==e?t:t+":"+e)}function yi(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,s=t.length;for(n=0;r<s&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.s.c=--n,n=0;r<s&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(e.s.r=--n,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=s&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.e.c=--n,n=0;r!=s&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return e.e.r=--n,e}function nae(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=n0(t.z,n?Rl(e):e)}catch{}try{return t.w=n0((t.XF||{}).numFmtId||(n?14:0),n?Rl(e):e)}catch{return""+e}}function kp(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?iP[t.v]||t.v:e==null?nae(t,t.v):nae(t,e))}function Tv(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function aEe(t,e,n){var r=n||{},i=t?Array.isArray(t):r.dense,s=t||(i?[]:{}),o=0,a=0;if(s&&r.origin!=null){if(typeof r.origin=="number")o=r.origin;else{var l=typeof r.origin=="string"?fo(r.origin):r.origin;o=l.r,a=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=yi(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),o==-1&&(c.e.r=o=u.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=e[h].length;++f)if(!(typeof e[h][f]>"u")){var g={v:e[h][f]},y=o+h,_=a+f;if(c.s.r>y&&(c.s.r=y),c.s.c>_&&(c.s.c=_),c.e.r<y&&(c.e.r=y),c.e.c<_&&(c.e.c=_),e[h][f]&&typeof e[h][f]=="object"&&!Array.isArray(e[h][f])&&!(e[h][f]instanceof Date))g=e[h][f];else if(Array.isArray(g.v)&&(g.f=e[h][f][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(r.nullError)g.t="e",g.v=0;else if(r.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=r.dateNF||rs[14],r.cellDates?(g.t="d",g.w=n0(g.z,Rl(g.v))):(g.t="n",g.v=Rl(g.v),g.w=n0(g.z,g.v))):g.t="s";if(i)s[y]||(s[y]=[]),s[y][_]&&s[y][_].z&&(g.z=s[y][_].z),s[y][_]=g;else{var b=qr({c:_,r:y});s[b]&&s[b].z&&(g.z=s[b].z),s[b]=g}}}return c.s.c<1e7&&(s["!ref"]=Ms(c)),s}function Mb(t,e){return aEe(null,t,e)}function qvt(t){return t.read_shift(4,"i")}function mh(t,e){return e||(e=Ge(4)),e.write_shift(4,t),e}function xa(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function po(t,e){var n=!1;return e==null&&(n=!0,e=Ge(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function Kvt(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function Yvt(t,e){return e||(e=Ge(4)),e.write_shift(2,0),e.write_shift(2,0),e}function Dq(t,e){var n=t.l,r=t.read_shift(1),i=xa(t),s=[],o={t:i,h:i};if((r&1)!==0){for(var a=t.read_shift(4),l=0;l!=a;++l)s.push(Kvt(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=n+e,o}function Xvt(t,e){var n=!1;return e==null&&(n=!0,e=Ge(15+4*t.t.length)),e.write_shift(1,0),po(t.t,e),n?e.slice(0,e.l):e}var Zvt=Dq;function Jvt(t,e){var n=!1;return e==null&&(n=!0,e=Ge(23+4*t.t.length)),e.write_shift(1,1),po(t.t,e),e.write_shift(4,1),Yvt({},e),n?e.slice(0,e.l):e}function bu(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function kv(t,e){return e==null&&(e=Ge(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Av(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Iv(t,e){return e==null&&(e=Ge(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var Qvt=xa,lEe=po;function jq(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function m5(t,e){var n=!1;return e==null&&(n=!0,e=Ge(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var e_t=xa,Wz=jq,$q=m5;function cEe(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var i=r===0?p5([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Ny(e,0)>>2;return n?i/100:i}function uEe(t,e){e==null&&(e=Ge(4));var n=0,r=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?i:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function hEe(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function t_t(t,e){return e||(e=Ge(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Pv=hEe,Nb=t_t;function Ob(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function iv(t,e){return(e||Ge(8)).write_shift(8,t,"f")}function n_t(t){var e={},n=t.read_shift(1),r=n>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),a=t.read_shift(1),l=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var c=h_t[i];c&&(e.rgb=fae(c));break;case 2:e.rgb=fae([o,a,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function g5(t,e){if(e||(e=Ge(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function r_t(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function i_t(t,e){e||(e=Ge(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}var dEe=2,Ql=3,LR=11,y5=19,DR=64,s_t=65,o_t=71,a_t=4108,l_t=4126,Ro=80,rae={1:{n:"CodePage",t:dEe},2:{n:"Category",t:Ro},3:{n:"PresentationFormat",t:Ro},4:{n:"ByteCount",t:Ql},5:{n:"LineCount",t:Ql},6:{n:"ParagraphCount",t:Ql},7:{n:"SlideCount",t:Ql},8:{n:"NoteCount",t:Ql},9:{n:"HiddenCount",t:Ql},10:{n:"MultimediaClipCount",t:Ql},11:{n:"ScaleCrop",t:LR},12:{n:"HeadingPairs",t:a_t},13:{n:"TitlesOfParts",t:l_t},14:{n:"Manager",t:Ro},15:{n:"Company",t:Ro},16:{n:"LinksUpToDate",t:LR},17:{n:"CharacterCount",t:Ql},19:{n:"SharedDoc",t:LR},22:{n:"HyperlinksChanged",t:LR},23:{n:"AppVersion",t:Ql,p:"version"},24:{n:"DigSig",t:s_t},26:{n:"ContentType",t:Ro},27:{n:"ContentStatus",t:Ro},28:{n:"Language",t:Ro},29:{n:"Version",t:Ro},255:{},2147483648:{n:"Locale",t:y5},2147483651:{n:"Behavior",t:y5},1919054434:{}},iae={1:{n:"CodePage",t:dEe},2:{n:"Title",t:Ro},3:{n:"Subject",t:Ro},4:{n:"Author",t:Ro},5:{n:"Keywords",t:Ro},6:{n:"Comments",t:Ro},7:{n:"Template",t:Ro},8:{n:"LastAuthor",t:Ro},9:{n:"RevNumber",t:Ro},10:{n:"EditTime",t:DR},11:{n:"LastPrinted",t:DR},12:{n:"CreatedDate",t:DR},13:{n:"ModifiedDate",t:DR},14:{n:"PageCount",t:Ql},15:{n:"WordCount",t:Ql},16:{n:"CharCount",t:Ql},17:{n:"Thumbnail",t:o_t},18:{n:"Application",t:Ro},19:{n:"DocSecurity",t:Ql},255:{},2147483648:{n:"Locale",t:y5},2147483651:{n:"Behavior",t:y5},1919054434:{}};function c_t(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var u_t=c_t([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),h_t=Ml(u_t),iP={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},d_t={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},jR={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function fEe(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function pEe(t,e){var n=bvt(d_t),r=[],i;r[r.length]=Os,r[r.length]=vt("Types",null,{xmlns:uo.CT,"xmlns:xsd":uo.xsd,"xmlns:xsi":uo.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return vt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(i=t[l][0],r[r.length]=vt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:jR[l][e.bookType]||jR[l].xlsx}))},o=function(l){(t[l]||[]).forEach(function(c){r[r.length]=vt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:jR[l][e.bookType]||jR[l].xlsx})})},a=function(l){(t[l]||[]).forEach(function(c){r[r.length]=vt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:n[l][0]})})};return s("workbooks"),o("sheets"),o("charts"),a("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(a),a("vba"),a("comments"),a("threadedcomments"),a("drawings"),o("metadata"),a("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var wr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function mEe(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Iw(t){var e=[Os,vt("Relationships",null,{xmlns:uo.RELS})];return jo(t["!id"]).forEach(function(n){e[e.length]=vt("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Gr(t,e,n,r,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=n,[wr.HLINK,wr.XPATH,wr.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}function f_t(t){var e=[Os];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function sae(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function p_t(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function m_t(t){var e=[Os];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(sae(t[n][0],t[n][1])),e.push(p_t("",t[n][0]));return e.push(sae("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function gEe(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+l5.version+"</meta:generator></office:meta></office:document-meta>"}var m1=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function hF(t,e,n,r,i){i[t]!=null||e==null||e===""||(i[t]=e,e=Wr(e),r[r.length]=n?vt(t,e,n):Lo(t,e))}function yEe(t,e){var n=e||{},r=[Os,vt("cp:coreProperties",null,{"xmlns:cp":uo.CORE_PROPS,"xmlns:dc":uo.dc,"xmlns:dcterms":uo.dcterms,"xmlns:dcmitype":uo.dcmitype,"xmlns:xsi":uo.xsi})],i={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&hF("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:Bz(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),t.ModifiedDate!=null&&hF("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:Bz(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=m1.length;++s){var o=m1[s],a=n.Props&&n.Props[o[1]]!=null?n.Props[o[1]]:t?t[o[1]]:null;a===!0?a="1":a===!1?a="0":typeof a=="number"&&(a=String(a)),a!=null&&hF(o[0],a,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Pw=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],vEe=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function _Ee(t){var e=[],n=vt;return t||(t={}),t.Application="SheetJS",e[e.length]=Os,e[e.length]=vt("Properties",null,{xmlns:uo.EXT_PROPS,"xmlns:vt":uo.vt}),Pw.forEach(function(r){if(t[r[1]]!==void 0){var i;switch(r[2]){case"string":i=Wr(String(t[r[1]]));break;case"bool":i=t[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=n(r[0],i))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+Wr(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function xEe(t){var e=[Os,vt("Properties",null,{xmlns:uo.CUST_PROPS,"xmlns:vt":uo.vt})];if(!t)return e.join("");var n=1;return jo(t).forEach(function(i){++n,e[e.length]=vt("property",Nvt(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:Wr(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var oae={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function g_t(t,e){var n=[];return jo(oae).map(function(r){for(var i=0;i<m1.length;++i)if(m1[i][1]==r)return m1[i];for(i=0;i<Pw.length;++i)if(Pw[i][1]==r)return Pw[i];throw r}).forEach(function(r){if(t[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(Lo(oae[r[1]]||r[1],i))}}),vt("DocumentProperties",n.join(""),{xmlns:ac.o})}function y_t(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return t&&jo(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<m1.length;++o)if(s==m1[o][1])return;for(o=0;o<Pw.length;++o)if(s==Pw[o][1])return;for(o=0;o<n.length;++o)if(s==n[o])return;var a=t[s],l="string";typeof a=="number"?(l="float",a=String(a)):a===!0||a===!1?(l="boolean",a=a?"1":"0"):a=String(a),i.push(vt(qoe(s),a,{"dt:dt":l}))}}),e&&jo(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],a="string";typeof o=="number"?(a="float",o=String(o)):o===!0||o===!1?(a="boolean",o=o?"1":"0"):o instanceof Date?(a="dateTime.tz",o=o.toISOString()):o=String(o),i.push(vt(qoe(s),o,{"dt:dt":a}))}}),"<"+r+' xmlns="'+ac.o+'">'+i.join("")+"</"+r+">"}function v_t(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),i=(n-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var o=Ge(8);return o.write_shift(4,r),o.write_shift(4,i),o}function aae(t,e){var n=Ge(4),r=Ge(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=Ge(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=v_t(e);break;case 31:case 80:for(r=Ge(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Oo([n,r])}var wEe=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function __t(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function lae(t,e,n){var r=Ge(8),i=[],s=[],o=8,a=0,l=Ge(8),c=Ge(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),o+=8+l.length,!e){c=Ge(8),c.write_shift(4,0),i.unshift(c);var u=[Ge(4)];for(u[0].write_shift(4,t.length),a=0;a<t.length;++a){var h=t[a][0];for(l=Ge(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,a+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=Oo(u),s.unshift(l),o+=8+l.length}for(a=0;a<t.length;++a)if(!(e&&!e[t[a][0]])&&!(wEe.indexOf(t[a][0])>-1||vEe.indexOf(t[a][0])>-1)&&t[a][1]!=null){var f=t[a][1],g=0;if(e){g=+e[t[a][0]];var y=n[g];if(y.p=="version"&&typeof f=="string"){var _=f.split(".");f=(+_[0]<<16)+(+_[1]||0)}l=aae(y.t,f)}else{var b=__t(f);b==-1&&(b=31,f=String(f)),l=aae(b,f)}s.push(l),c=Ge(8),c.write_shift(4,e?g:2+a),i.push(c),o+=8+l.length}var T=8*(s.length+1);for(a=0;a<s.length;++a)i[a].write_shift(4,T),T+=s[a].length;return r.write_shift(4,o),r.write_shift(4,s.length),Oo([r].concat(i).concat(s))}function cae(t,e,n,r,i,s){var o=Ge(i?68:48),a=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Zr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,i?68:48);var l=lae(t,n,r);if(a.push(l),i){var c=lae(i,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+l.length),a.push(c)}return Oo(a)}function x_t(t,e){e||(e=Ge(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function w_t(t,e){return t.read_shift(e)===1}function Ma(t,e){return e||(e=Ge(2)),e.write_shift(2,+!!t),e}function bEe(t){return t.read_shift(2,"u")}function Xc(t,e){return e||(e=Ge(2)),e.write_shift(2,t),e}function EEe(t,e,n){return n||(n=Ge(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function SEe(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var s=t.read_shift(1);s&&(i="dbcs-cont")}else n.biff==12&&(i="wstr");n.biff>=2&&n.biff<=5&&(i="cpstr");var o=r?t.read_shift(r,i):"";return o}function b_t(t){var e=t.t||"",n=Ge(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=Ge(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[n,r];return Oo(i)}function E_t(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function S_t(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):E_t(t,r,n)}function T_t(t,e,n){if(n.biff>5)return S_t(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function TEe(t,e,n){return n||(n=Ge(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function uae(t,e){e||(e=Ge(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function k_t(t){var e=Ge(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(n=0;n<o.length;++n)e.write_shift(4,o[n]);if(s==28)r=r.slice(1),uae(r,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));var a=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(a.length+1)),n=0;n<a.length;++n)e.write_shift(2,a.charCodeAt(n));e.write_shift(2,0),s&8&&uae(i>-1?r.slice(i+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)e.write_shift(1,r.charCodeAt(n+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function sv(t,e,n,r){return r||(r=Ge(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function A_t(t,e,n){var r=n.biff>8?4:2,i=t.read_shift(r),s=t.read_shift(r,"i"),o=t.read_shift(r,"i");return[i,s,o]}function I_t(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:n}}}function kEe(t,e){return e||(e=Ge(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function Fq(t,e,n){var r=1536,i=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Ge(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function P_t(t,e){var n=!e||e.biff==8,r=Ge(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function C_t(t,e){var n=!e||e.biff>=8?2:1,r=Ge(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function R_t(t,e){var n=Ge(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],i=0;i<t.length;++i)r[i]=b_t(t[i]);var s=Oo([n].concat(r));return s.parts=[n.length].concat(r.map(function(o){return o.length})),s}function M_t(){var t=Ge(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function N_t(t){var e=Ge(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function O_t(t,e){var n=t.name||"Arial",r=e&&e.biff==5,i=r?15+n.length:16+2*n.length,s=Ge(i);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,n.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),s}function L_t(t,e,n,r){var i=Ge(10);return sv(t,e,r,i),i.write_shift(4,n),i}function D_t(t,e,n,r,i){var s=!i||i.biff==8,o=Ge(8+ +s+(1+s)*n.length);return sv(t,e,r,o),o.write_shift(2,n.length),s&&o.write_shift(1,1),o.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),o}function j_t(t,e,n,r){var i=n&&n.biff==5;r||(r=Ge(i?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function $_t(t,e){var n=e.biff==8||!e.biff?4:2,r=Ge(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function hae(t,e,n,r){var i=n&&n.biff==5;r||(r=Ge(i?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function F_t(t){var e=Ge(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function V_t(t,e,n,r,i,s){var o=Ge(8);return sv(t,e,r,o),EEe(n,s,o),o}function z_t(t,e,n,r){var i=Ge(14);return sv(t,e,r,i),iv(n,i),i}function G_t(t,e,n){if(n.biff<8)return U_t(t,e,n);for(var r=[],i=t.l+e,s=t.read_shift(n.biff>8?4:2);s--!==0;)r.push(A_t(t,n.biff>8?12:6,n));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return r}function U_t(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=SEe(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function B_t(t){var e=Ge(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)kEe(t[n],e);return e}function W_t(t){var e=Ge(24),n=fo(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return Oo([e,k_t(t[1])])}function H_t(t){var e=t[1].Tooltip,n=Ge(10+2*(e.length+1));n.write_shift(2,2048);var r=fo(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<e.length;++i)n.write_shift(2,e.charCodeAt(i));return n.write_shift(2,0),n}function q_t(t){return t||(t=Ge(4)),t.write_shift(2,1),t.write_shift(2,1),t}function K_t(t,e,n){if(!n.cellStyles)return Ud(t,e);var r=n&&n.biff>=12?4:2,i=t.read_shift(r),s=t.read_shift(r),o=t.read_shift(r),a=t.read_shift(r),l=t.read_shift(2);r==2&&(t.l+=2);var c={s:i,e:s,w:o,ixfe:a,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}function Y_t(t,e){var n=Ge(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function X_t(t){for(var e=Ge(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}function Z_t(t,e,n){var r=Ge(15);return oP(r,t,e),r.write_shift(8,n,"f"),r}function J_t(t,e,n){var r=Ge(9);return oP(r,t,e),r.write_shift(2,n),r}var Q_t=(function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Iq({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(a,l){var c=[],u=rv(1);switch(l.type){case"base64":u=ih(Tp(a));break;case"binary":u=ih(a);break;case"buffer":case"array":u=a;break}rc(u,0);var h=u.read_shift(1),f=!!(h&136),g=!1,y=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,f=!0;break;case 49:g=!0,f=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var _=0,b=521;h==2&&(_=u.read_shift(2)),u.l+=3,h!=2&&(_=u.read_shift(4)),_>1048576&&(_=1e6),h!=2&&(b=u.read_shift(2));var T=u.read_shift(2),A=l.codepage||1252;h!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(A=t[u[u.l]]),u.l+=1,u.l+=2),y&&(u.l+=36);for(var I=[],P={},N=Math.min(u.length,h==2?521:b-10-(g?264:0)),L=y?32:11;u.l<N&&u[u.l]!=13;)switch(P={},P.name=c5.utils.decode(A,u.slice(u.l,u.l+L)).replace(/[\u0000\r\n].*$/g,""),u.l+=L,P.type=String.fromCharCode(u.read_shift(1)),h!=2&&!y&&(P.offset=u.read_shift(4)),P.len=u.read_shift(1),h==2&&(P.offset=u.read_shift(2)),P.dec=u.read_shift(1),P.name.length&&I.push(P),h!=2&&(u.l+=y?13:14),P.type){case"B":(!g||P.len!=8)&&l.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+P.type)}if(u[u.l]!==13&&(u.l=b-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=b;var C=0,M=0;for(c[0]=[],M=0;M!=I.length;++M)c[0][M]=I[M].name;for(;_-- >0;){if(u[u.l]===42){u.l+=T;continue}for(++u.l,c[++C]=[],M=0,M=0;M!=I.length;++M){var O=u.slice(u.l,u.l+I[M].len);u.l+=I[M].len,rc(O,0);var D=c5.utils.decode(A,O);switch(I[M].type){case"C":D.trim().length&&(c[C][M]=D.replace(/\s+$/,""));break;case"D":D.length===8?c[C][M]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):c[C][M]=D;break;case"F":c[C][M]=parseFloat(D.trim());break;case"+":case"I":c[C][M]=y?O.read_shift(-4,"i")^2147483648:O.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":c[C][M]=!0;break;case"N":case"F":c[C][M]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));c[C][M]="##MEMO##"+(y?parseInt(D.trim(),10):O.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(c[C][M]=+D||0);break;case"@":c[C][M]=new Date(O.read_shift(-8,"f")-621356832e5);break;case"T":c[C][M]=new Date((O.read_shift(4)-2440588)*864e5+O.read_shift(4));break;case"Y":c[C][M]=O.read_shift(4,"i")/1e4+O.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[C][M]=-O.read_shift(-8,"f");break;case"B":if(g&&I[M].len==8){c[C][M]=O.read_shift(8,"f");break}case"G":case"P":O.l+=I[M].len;break;case"0":if(I[M].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+I[M].type)}}}if(h!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=I,c}function r(a,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=Mb(n(a,c),c);return u["!cols"]=c.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete c.DBF,u}function i(a,l){try{return Tv(r(a,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(a,l){var c=l||{};if(+c.codepage>=0&&IA(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=Al(),h=b5(a,{header:1,raw:!0,cellDates:!0}),f=h[0],g=h.slice(1),y=a["!cols"]||[],_=0,b=0,T=0,A=1;for(_=0;_<f.length;++_){if(((y[_]||{}).DBF||{}).name){f[_]=y[_].DBF.name,++T;continue}if(f[_]!=null){if(++T,typeof f[_]=="number"&&(f[_]=f[_].toString(10)),typeof f[_]!="string")throw new Error("DBF Invalid column name "+f[_]+" |"+typeof f[_]+"|");if(f.indexOf(f[_])!==_){for(b=0;b<1024;++b)if(f.indexOf(f[_]+"_"+b)==-1){f[_]+="_"+b;break}}}}var I=yi(a["!ref"]),P=[],N=[],L=[];for(_=0;_<=I.e.c-I.s.c;++_){var C="",M="",O=0,D=[];for(b=0;b<g.length;++b)g[b][_]!=null&&D.push(g[b][_]);if(D.length==0||f[_]==null){P[_]="?";continue}for(b=0;b<D.length;++b){switch(typeof D[b]){case"number":M="B";break;case"string":M="C";break;case"boolean":M="L";break;case"object":M=D[b]instanceof Date?"D":"C";break;default:M="C"}O=Math.max(O,String(D[b]).length),C=C&&C!=M?"C":M}O>250&&(O=250),M=((y[_]||{}).DBF||{}).type,M=="C"&&y[_].DBF.len>O&&(O=y[_].DBF.len),C=="B"&&M=="N"&&(C="N",L[_]=y[_].DBF.dec,O=y[_].DBF.len),N[_]=C=="C"||M=="N"?O:s[C]||0,A+=N[_],P[_]=C}var V=u.next(32);for(V.write_shift(4,318902576),V.write_shift(4,g.length),V.write_shift(2,296+32*T),V.write_shift(2,A),_=0;_<4;++_)V.write_shift(4,0);for(V.write_shift(4,0|(+e[Ibe]||3)<<8),_=0,b=0;_<f.length;++_)if(f[_]!=null){var U=u.next(32),G=(f[_].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);U.write_shift(1,G,"sbcs"),U.write_shift(1,P[_]=="?"?"C":P[_],"sbcs"),U.write_shift(4,b),U.write_shift(1,N[_]||s[P[_]]||0),U.write_shift(1,L[_]||0),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(1,0),U.write_shift(4,0),U.write_shift(4,0),b+=N[_]||s[P[_]]||0}var de=u.next(264);for(de.write_shift(4,13),_=0;_<65;++_)de.write_shift(4,0);for(_=0;_<g.length;++_){var ke=u.next(A);for(ke.write_shift(1,0),b=0;b<f.length;++b)if(f[b]!=null)switch(P[b]){case"L":ke.write_shift(1,g[_][b]==null?63:g[_][b]?84:70);break;case"B":ke.write_shift(8,g[_][b]||0,"f");break;case"N":var Ue="0";for(typeof g[_][b]=="number"&&(Ue=g[_][b].toFixed(L[b]||0)),T=0;T<N[b]-Ue.length;++T)ke.write_shift(1,32);ke.write_shift(1,Ue,"sbcs");break;case"D":g[_][b]?(ke.write_shift(4,("0000"+g[_][b].getFullYear()).slice(-4),"sbcs"),ke.write_shift(2,("00"+(g[_][b].getMonth()+1)).slice(-2),"sbcs"),ke.write_shift(2,("00"+g[_][b].getDate()).slice(-2),"sbcs")):ke.write_shift(8,"00000000","sbcs");break;case"C":var Ne=String(g[_][b]!=null?g[_][b]:"").slice(0,N[b]);for(ke.write_shift(1,Ne,"sbcs"),T=0;T<N[b]-Ne.length;++T)ke.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:i,to_sheet:r,from_sheet:o}})(),ext=(function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+jo(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(f,g){var y=t[g];return typeof y=="number"?Loe(y):y},r=function(f,g,y){var _=g.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return _==59?f:Loe(_)};t["|"]=254;function i(f,g){switch(g.type){case"base64":return s(Tp(f),g);case"binary":return s(f,g);case"buffer":return s(Ar&&Buffer.isBuffer(f)?f.toString("binary"):tP(f),g);case"array":return s(UL(f),g)}throw new Error("Unrecognized type "+g.type)}function s(f,g){var y=f.split(/[\n\r]+/),_=-1,b=-1,T=0,A=0,I=[],P=[],N=null,L={},C=[],M=[],O=[],D=0,V;for(+g.codepage>=0&&IA(+g.codepage);T!==y.length;++T){D=0;var U=y[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),G=U.replace(/;;/g,"\0").split(";").map(function(le){return le.replace(/\u0000/g,";")}),de=G[0],ke;if(U.length>0)switch(de){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":G[1].charAt(0)=="P"&&P.push(U.slice(3).replace(/;;/g,";"));break;case"C":var Ue=!1,Ne=!1,fe=!1,De=!1,Ce=-1,Q=-1;for(A=1;A<G.length;++A)switch(G[A].charAt(0)){case"A":break;case"X":b=parseInt(G[A].slice(1))-1,Ne=!0;break;case"Y":for(_=parseInt(G[A].slice(1))-1,Ne||(b=0),V=I.length;V<=_;++V)I[V]=[];break;case"K":ke=G[A].slice(1),ke.charAt(0)==='"'?ke=ke.slice(1,ke.length-1):ke==="TRUE"?ke=!0:ke==="FALSE"?ke=!1:isNaN(dp(ke))?isNaN(CA(ke).getDate())||(ke=Ua(ke)):(ke=dp(ke),N!==null&&Vbe(N)&&(ke=Bbe(ke))),Ue=!0;break;case"E":De=!0;var W=Jxt(G[A].slice(1),{r:_,c:b});I[_][b]=[I[_][b],W];break;case"S":fe=!0,I[_][b]=[I[_][b],"S5S"];break;case"G":break;case"R":Ce=parseInt(G[A].slice(1))-1;break;case"C":Q=parseInt(G[A].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+U)}if(Ue&&(I[_][b]&&I[_][b].length==2?I[_][b][0]=ke:I[_][b]=ke,N=null),fe){if(De)throw new Error("SYLK shared formula cannot have own formula");var ne=Ce>-1&&I[Ce][Q];if(!ne||!ne[1])throw new Error("SYLK shared formula cannot find base");I[_][b][1]=Qxt(ne[1],{r:_-Ce,c:b-Q})}break;case"F":var ie=0;for(A=1;A<G.length;++A)switch(G[A].charAt(0)){case"X":b=parseInt(G[A].slice(1))-1,++ie;break;case"Y":for(_=parseInt(G[A].slice(1))-1,V=I.length;V<=_;++V)I[V]=[];break;case"M":D=parseInt(G[A].slice(1))/20;break;case"F":break;case"G":break;case"P":N=P[parseInt(G[A].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(O=G[A].slice(1).split(" "),V=parseInt(O[0],10);V<=parseInt(O[1],10);++V)D=parseInt(O[2],10),M[V-1]=D===0?{hidden:!0}:{wch:D},Vq(M[V-1]);break;case"C":b=parseInt(G[A].slice(1))-1,M[b]||(M[b]={});break;case"R":_=parseInt(G[A].slice(1))-1,C[_]||(C[_]={}),D>0?(C[_].hpt=D,C[_].hpx=REe(D)):D===0&&(C[_].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+U)}ie<1&&(N=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+U)}}return C.length>0&&(L["!rows"]=C),M.length>0&&(L["!cols"]=M),g&&g.sheetRows&&(I=I.slice(0,g.sheetRows)),[I,L]}function o(f,g){var y=i(f,g),_=y[0],b=y[1],T=Mb(_,g);return jo(b).forEach(function(A){T[A]=b[A]}),T}function a(f,g){return Tv(o(f,g),g)}function l(f,g,y,_){var b="C;Y"+(y+1)+";X"+(_+1)+";K";switch(f.t){case"n":b+=f.v||0,f.f&&!f.F&&(b+=";E"+Gq(f.f,{r:y,c:_}));break;case"b":b+=f.v?"TRUE":"FALSE";break;case"e":b+=f.w||f.v;break;case"d":b+='"'+(f.w||f.v)+'"';break;case"s":b+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function c(f,g){g.forEach(function(y,_){var b="F;W"+(_+1)+" "+(_+1)+" ";y.hidden?b+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=v5(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=_5(y.wpx)),typeof y.wch=="number"&&(b+=Math.round(y.wch))),b.charAt(b.length-1)!=" "&&f.push(b)})}function u(f,g){g.forEach(function(y,_){var b="F;";y.hidden?b+="M0;":y.hpt?b+="M"+20*y.hpt+";":y.hpx&&(b+="M"+20*x5(y.hpx)+";"),b.length>2&&f.push(b+"R"+(_+1))})}function h(f,g){var y=["ID;PWXL;N;E"],_=[],b=yi(f["!ref"]),T,A=Array.isArray(f),I=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),f["!cols"]&&c(y,f["!cols"]),f["!rows"]&&u(y,f["!rows"]),y.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var P=b.s.r;P<=b.e.r;++P)for(var N=b.s.c;N<=b.e.c;++N){var L=qr({r:P,c:N});T=A?(f[P]||[])[N]:f[L],!(!T||T.v==null&&(!T.f||T.F))&&_.push(l(T,f,P,N))}return y.join(I)+I+_.join(I)+I+"E"+I}return{to_workbook:a,to_sheet:o,from_sheet:h}})(),txt=(function(){function t(s,o){switch(o.type){case"base64":return e(Tp(s),o);case"binary":return e(s,o);case"buffer":return e(Ar&&Buffer.isBuffer(s)?s.toString("binary"):tP(s),o);case"array":return e(UL(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var a=s.split(`
`),l=-1,c=-1,u=0,h=[];u!==a.length;++u){if(a[u].trim()==="BOT"){h[++l]=[],c=0;continue}if(!(l<0)){var f=a[u].trim().split(","),g=f[0],y=f[1];++u;for(var _=a[u]||"";(_.match(/["]/g)||[]).length&1&&u<a.length-1;)_+=`
`+a[++u];switch(_=_.trim(),+g){case-1:if(_==="BOT"){h[++l]=[],c=0;continue}else if(_!=="EOD")throw new Error("Unrecognized DIF special command "+_);break;case 0:_==="TRUE"?h[l][c]=!0:_==="FALSE"?h[l][c]=!1:isNaN(dp(y))?isNaN(CA(y).getDate())?h[l][c]=y:h[l][c]=Ua(y):h[l][c]=dp(y),++c;break;case 1:_=_.slice(1,_.length-1),_=_.replace(/""/g,'"'),_&&_.match(/^=".*"$/)&&(_=_.slice(2,-1)),h[l][c++]=_!==""?_:null;break}if(_==="EOD")break}}return o&&o.sheetRows&&(h=h.slice(0,o.sheetRows)),h}function n(s,o){return Mb(t(s,o),o)}function r(s,o){return Tv(n(s,o),o)}var i=(function(){var s=function(l,c,u,h,f){l.push(c),l.push(u+","+h),l.push('"'+f.replace(/"/g,'""')+'"')},o=function(l,c,u,h){l.push(c+","+u),l.push(c==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var c=[],u=yi(l["!ref"]),h,f=Array.isArray(l);s(c,"TABLE",0,1,"sheetjs"),s(c,"VECTORS",0,u.e.r-u.s.r+1,""),s(c,"TUPLES",0,u.e.c-u.s.c+1,""),s(c,"DATA",0,0,"");for(var g=u.s.r;g<=u.e.r;++g){o(c,-1,0,"BOT");for(var y=u.s.c;y<=u.e.c;++y){var _=qr({r:g,c:y});if(h=f?(l[g]||[])[y]:l[_],!h){o(c,1,0,"");continue}switch(h.t){case"n":var b=h.w;!b&&h.v!=null&&(b=h.v),b==null?h.f&&!h.F?o(c,1,0,"="+h.f):o(c,1,0,""):o(c,0,b,"V");break;case"b":o(c,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":o(c,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=n0(h.z||rs[14],Rl(Ua(h.v)))),o(c,0,h.w,"V");break;default:o(c,1,0,"")}}}o(c,-1,0,"EOD");var T=`\r
`,A=c.join(T);return A}})();return{to_workbook:r,to_sheet:n,from_sheet:i}})(),AEe=(function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(h,f){for(var g=h.split(`
`),y=-1,_=-1,b=0,T=[];b!==g.length;++b){var A=g[b].trim().split(":");if(A[0]==="cell"){var I=fo(A[1]);if(T.length<=I.r)for(y=T.length;y<=I.r;++y)T[y]||(T[y]=[]);switch(y=I.r,_=I.c,A[2]){case"t":T[y][_]=t(A[3]);break;case"v":T[y][_]=+A[3];break;case"vtf":var P=A[A.length-1];case"vtc":switch(A[3]){case"nl":T[y][_]=!!+A[4];break;default:T[y][_]=+A[4];break}A[2]=="vtf"&&(T[y][_]=[T[y][_],P])}}}return f&&f.sheetRows&&(T=T.slice(0,f.sheetRows)),T}function r(h,f){return Mb(n(h,f),f)}function i(h,f){return Tv(r(h,f),f)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(h){if(!h||!h["!ref"])return"";for(var f=[],g=[],y,_="",b=Sc(h["!ref"]),T=Array.isArray(h),A=b.s.r;A<=b.e.r;++A)for(var I=b.s.c;I<=b.e.c;++I)if(_=qr({r:A,c:I}),y=T?(h[A]||[])[I]:h[_],!(!y||y.v==null||y.t==="z")){switch(g=["cell",_,"t"],y.t){case"s":case"str":g.push(e(y.v));break;case"n":y.f?(g[2]="vtf",g[3]="n",g[4]=y.v,g[5]=e(y.f)):(g[2]="v",g[3]=y.v);break;case"b":g[2]="vt"+(y.f?"f":"c"),g[3]="nl",g[4]=y.v?"1":"0",g[5]=e(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var P=Rl(Ua(y.v));g[2]="vtc",g[3]="nd",g[4]=""+P,g[5]=y.w||n0(y.z||rs[14],P);break;case"e":continue}f.push(g.join(":"))}return f.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function u(h){return[s,o,a,o,c(h),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:u}})(),nxt=(function(){function t(u,h,f,g,y){y.raw?h[f][g]=u:u===""||(u==="TRUE"?h[f][g]=!0:u==="FALSE"?h[f][g]=!1:isNaN(dp(u))?isNaN(CA(u).getDate())?h[f][g]=u:h[f][g]=Ua(u):h[f][g]=dp(u))}function e(u,h){var f=h||{},g=[];if(!u||u.length===0)return g;for(var y=u.split(/[\r\n]/),_=y.length-1;_>=0&&y[_].length===0;)--_;for(var b=10,T=0,A=0;A<=_;++A)T=y[A].indexOf(" "),T==-1?T=y[A].length:T++,b=Math.max(b,T);for(A=0;A<=_;++A){g[A]=[];var I=0;for(t(y[A].slice(0,b).trim(),g,A,I,f),I=1;I<=(y[A].length-b)/10+1;++I)t(y[A].slice(b+(I-1)*10,b+I*10).trim(),g,A,I,f)}return f.sheetRows&&(g=g.slice(0,f.sheetRows)),g}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(u){for(var h={},f=!1,g=0,y=0;g<u.length;++g)(y=u.charCodeAt(g))==34?f=!f:!f&&y in n&&(h[y]=(h[y]||0)+1);y=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&y.push([h[g],g]);if(!y.length){h=r;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&y.push([h[g],g])}return y.sort(function(_,b){return _[0]-b[0]||r[_[1]]-r[b[1]]}),n[y.pop()[1]]||44}function s(u,h){var f=h||{},g="",y=f.dense?[]:{},_={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(g=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(g=u.charAt(4),u=u.slice(6)):g=i(u.slice(0,1024)):f&&f.FS?g=f.FS:g=i(u.slice(0,1024));var b=0,T=0,A=0,I=0,P=0,N=g.charCodeAt(0),L=!1,C=0,M=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var O=f.dateNF!=null?vvt(f.dateNF):null;function D(){var V=u.slice(I,P),U={};if(V.charAt(0)=='"'&&V.charAt(V.length-1)=='"'&&(V=V.slice(1,-1).replace(/""/g,'"')),V.length===0)U.t="z";else if(f.raw)U.t="s",U.v=V;else if(V.trim().length===0)U.t="s",U.v=V;else if(V.charCodeAt(0)==61)V.charCodeAt(1)==34&&V.charCodeAt(V.length-1)==34?(U.t="s",U.v=V.slice(2,-1).replace(/""/g,'"')):ewt(V)?(U.t="n",U.f=V.slice(1)):(U.t="s",U.v=V);else if(V=="TRUE")U.t="b",U.v=!0;else if(V=="FALSE")U.t="b",U.v=!1;else if(!isNaN(A=dp(V)))U.t="n",f.cellText!==!1&&(U.w=V),U.v=A;else if(!isNaN(CA(V).getDate())||O&&V.match(O)){U.z=f.dateNF||rs[14];var G=0;O&&V.match(O)&&(V=_vt(V,f.dateNF,V.match(O)||[]),G=1),f.cellDates?(U.t="d",U.v=Ua(V,G)):(U.t="n",U.v=Rl(Ua(V,G))),f.cellText!==!1&&(U.w=n0(U.z,U.v instanceof Date?Rl(U.v):U.v)),f.cellNF||delete U.z}else U.t="s",U.v=V;if(U.t=="z"||(f.dense?(y[b]||(y[b]=[]),y[b][T]=U):y[qr({c:T,r:b})]=U),I=P+1,M=u.charCodeAt(I),_.e.c<T&&(_.e.c=T),_.e.r<b&&(_.e.r=b),C==N)++T;else if(T=0,++b,f.sheetRows&&f.sheetRows<=b)return!0}e:for(;P<u.length;++P)switch(C=u.charCodeAt(P)){case 34:M===34&&(L=!L);break;case N:case 10:case 13:if(!L&&D())break e;break}return P-I>0&&D(),y["!ref"]=Ms(_),y}function o(u,h){return!(h&&h.PRN)||h.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?s(u,h):Mb(e(u,h),h)}function a(u,h){var f="",g=h.type=="string"?[0,0,0,0]:pSt(u,h);switch(h.type){case"base64":f=Tp(u);break;case"binary":f=u;break;case"buffer":h.codepage==65001?f=u.toString("utf8"):h.codepage&&typeof c5<"u"||(f=Ar&&Buffer.isBuffer(u)?u.toString("binary"):tP(u));break;case"array":f=UL(u);break;case"string":f=u;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?f=rk(f.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?f=rk(f):h.type=="binary"&&typeof c5<"u",f.slice(0,19)=="socialcalc:version:"?AEe.to_sheet(h.type=="string"?f:rk(f),h):o(f,h)}function l(u,h){return Tv(a(u,h),h)}function c(u){for(var h=[],f=yi(u["!ref"]),g,y=Array.isArray(u),_=f.s.r;_<=f.e.r;++_){for(var b=[],T=f.s.c;T<=f.e.c;++T){var A=qr({r:_,c:T});if(g=y?(u[_]||[])[T]:u[A],!g||g.v==null){b.push("          ");continue}for(var I=(g.w||(kp(g),g.w)||"").slice(0,10);I.length<10;)I+=" ";b.push(I+(T===0?" ":""))}h.push(b.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:a,from_sheet:c}})(),dae=(function(){function t(W,ne,ie){if(W){rc(W,W.l||0);for(var le=ie.Enum||Ce;W.l<W.length;){var ve=W.read_shift(2),qe=le[ve]||le[65535],Ke=W.read_shift(2),Se=W.l+Ke,we=qe.f&&qe.f(W,Ke,ie);if(W.l=Se,ne(we,qe,ve))return}}}function e(W,ne){switch(ne.type){case"base64":return n(ih(Tp(W)),ne);case"binary":return n(ih(W),ne);case"buffer":case"array":return n(W,ne)}throw"Unsupported type "+ne.type}function n(W,ne){if(!W)return W;var ie=ne||{},le=ie.dense?[]:{},ve="Sheet1",qe="",Ke=0,Se={},we=[],Dt=[],Ye={s:{r:0,c:0},e:{r:0,c:0}},on=ie.sheetRows||0;if(W[2]==0&&(W[3]==8||W[3]==9)&&W.length>=16&&W[14]==5&&W[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(W[2]==2)ie.Enum=Ce,t(W,function(dt,hr,zn){switch(zn){case 0:ie.vers=dt,dt>=4096&&(ie.qpro=!0);break;case 6:Ye=dt;break;case 204:dt&&(qe=dt);break;case 222:qe=dt;break;case 15:case 51:ie.qpro||(dt[1].v=dt[1].v.slice(1));case 13:case 14:case 16:zn==14&&(dt[2]&112)==112&&(dt[2]&15)>1&&(dt[2]&15)<15&&(dt[1].z=ie.dateNF||rs[14],ie.cellDates&&(dt[1].t="d",dt[1].v=Bbe(dt[1].v))),ie.qpro&&dt[3]>Ke&&(le["!ref"]=Ms(Ye),Se[ve]=le,we.push(ve),le=ie.dense?[]:{},Ye={s:{r:0,c:0},e:{r:0,c:0}},Ke=dt[3],ve=qe||"Sheet"+(Ke+1),qe="");var Hn=ie.dense?(le[dt[0].r]||[])[dt[0].c]:le[qr(dt[0])];if(Hn){Hn.t=dt[1].t,Hn.v=dt[1].v,dt[1].z!=null&&(Hn.z=dt[1].z),dt[1].f!=null&&(Hn.f=dt[1].f);break}ie.dense?(le[dt[0].r]||(le[dt[0].r]=[]),le[dt[0].r][dt[0].c]=dt[1]):le[qr(dt[0])]=dt[1];break}},ie);else if(W[2]==26||W[2]==14)ie.Enum=Q,W[2]==14&&(ie.qpro=!0,W.l=0),t(W,function(dt,hr,zn){switch(zn){case 204:ve=dt;break;case 22:dt[1].v=dt[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(dt[3]>Ke&&(le["!ref"]=Ms(Ye),Se[ve]=le,we.push(ve),le=ie.dense?[]:{},Ye={s:{r:0,c:0},e:{r:0,c:0}},Ke=dt[3],ve="Sheet"+(Ke+1)),on>0&&dt[0].r>=on)break;ie.dense?(le[dt[0].r]||(le[dt[0].r]=[]),le[dt[0].r][dt[0].c]=dt[1]):le[qr(dt[0])]=dt[1],Ye.e.c<dt[0].c&&(Ye.e.c=dt[0].c),Ye.e.r<dt[0].r&&(Ye.e.r=dt[0].r);break;case 27:dt[14e3]&&(Dt[dt[14e3][0]]=dt[14e3][1]);break;case 1537:Dt[dt[0]]=dt[1],dt[0]==Ke&&(ve=dt[1]);break}},ie);else throw new Error("Unrecognized LOTUS BOF "+W[2]);if(le["!ref"]=Ms(Ye),Se[qe||ve]=le,we.push(qe||ve),!Dt.length)return{SheetNames:we,Sheets:Se};for(var jt={},pn=[],_n=0;_n<Dt.length;++_n)Se[we[_n]]?(pn.push(Dt[_n]||we[_n]),jt[Dt[_n]]=Se[Dt[_n]]||Se[we[_n]]):(pn.push(Dt[_n]),jt[Dt[_n]]={"!ref":"A1"});return{SheetNames:pn,Sheets:jt}}function r(W,ne){var ie=ne||{};if(+ie.codepage>=0&&IA(+ie.codepage),ie.type=="string")throw new Error("Cannot write WK1 to JS string");var le=Al(),ve=yi(W["!ref"]),qe=Array.isArray(W),Ke=[];xt(le,0,s(1030)),xt(le,6,l(ve));for(var Se=Math.min(ve.e.r,8191),we=ve.s.r;we<=Se;++we)for(var Dt=Do(we),Ye=ve.s.c;Ye<=ve.e.c;++Ye){we===ve.s.r&&(Ke[Ye]=_a(Ye));var on=Ke[Ye]+Dt,jt=qe?(W[we]||[])[Ye]:W[on];if(!(!jt||jt.t=="z"))if(jt.t=="n")(jt.v|0)==jt.v&&jt.v>=-32768&&jt.v<=32767?xt(le,13,g(we,Ye,jt.v)):xt(le,14,_(we,Ye,jt.v));else{var pn=kp(jt);xt(le,15,h(we,Ye,pn.slice(0,239)))}}return xt(le,1),le.end()}function i(W,ne){var ie=ne||{};if(+ie.codepage>=0&&IA(+ie.codepage),ie.type=="string")throw new Error("Cannot write WK3 to JS string");var le=Al();xt(le,0,o(W));for(var ve=0,qe=0;ve<W.SheetNames.length;++ve)(W.Sheets[W.SheetNames[ve]]||{})["!ref"]&&xt(le,27,De(W.SheetNames[ve],qe++));var Ke=0;for(ve=0;ve<W.SheetNames.length;++ve){var Se=W.Sheets[W.SheetNames[ve]];if(!(!Se||!Se["!ref"])){for(var we=yi(Se["!ref"]),Dt=Array.isArray(Se),Ye=[],on=Math.min(we.e.r,8191),jt=we.s.r;jt<=on;++jt)for(var pn=Do(jt),_n=we.s.c;_n<=we.e.c;++_n){jt===we.s.r&&(Ye[_n]=_a(_n));var dt=Ye[_n]+pn,hr=Dt?(Se[jt]||[])[_n]:Se[dt];if(!(!hr||hr.t=="z"))if(hr.t=="n")xt(le,23,D(jt,_n,Ke,hr.v));else{var zn=kp(hr);xt(le,22,C(jt,_n,Ke,zn.slice(0,239)))}}++Ke}}return xt(le,1),le.end()}function s(W){var ne=Ge(2);return ne.write_shift(2,W),ne}function o(W){var ne=Ge(26);ne.write_shift(2,4096),ne.write_shift(2,4),ne.write_shift(4,0);for(var ie=0,le=0,ve=0,qe=0;qe<W.SheetNames.length;++qe){var Ke=W.SheetNames[qe],Se=W.Sheets[Ke];if(!(!Se||!Se["!ref"])){++ve;var we=Sc(Se["!ref"]);ie<we.e.r&&(ie=we.e.r),le<we.e.c&&(le=we.e.c)}}return ie>8191&&(ie=8191),ne.write_shift(2,ie),ne.write_shift(1,ve),ne.write_shift(1,le),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(1,1),ne.write_shift(1,2),ne.write_shift(4,0),ne.write_shift(4,0),ne}function a(W,ne,ie){var le={s:{c:0,r:0},e:{c:0,r:0}};return ne==8&&ie.qpro?(le.s.c=W.read_shift(1),W.l++,le.s.r=W.read_shift(2),le.e.c=W.read_shift(1),W.l++,le.e.r=W.read_shift(2),le):(le.s.c=W.read_shift(2),le.s.r=W.read_shift(2),ne==12&&ie.qpro&&(W.l+=2),le.e.c=W.read_shift(2),le.e.r=W.read_shift(2),ne==12&&ie.qpro&&(W.l+=2),le.s.c==65535&&(le.s.c=le.e.c=le.s.r=le.e.r=0),le)}function l(W){var ne=Ge(8);return ne.write_shift(2,W.s.c),ne.write_shift(2,W.s.r),ne.write_shift(2,W.e.c),ne.write_shift(2,W.e.r),ne}function c(W,ne,ie){var le=[{c:0,r:0},{t:"n",v:0},0,0];return ie.qpro&&ie.vers!=20768?(le[0].c=W.read_shift(1),le[3]=W.read_shift(1),le[0].r=W.read_shift(2),W.l+=2):(le[2]=W.read_shift(1),le[0].c=W.read_shift(2),le[0].r=W.read_shift(2)),le}function u(W,ne,ie){var le=W.l+ne,ve=c(W,ne,ie);if(ve[1].t="s",ie.vers==20768){W.l++;var qe=W.read_shift(1);return ve[1].v=W.read_shift(qe,"utf8"),ve}return ie.qpro&&W.l++,ve[1].v=W.read_shift(le-W.l,"cstr"),ve}function h(W,ne,ie){var le=Ge(7+ie.length);le.write_shift(1,255),le.write_shift(2,ne),le.write_shift(2,W),le.write_shift(1,39);for(var ve=0;ve<le.length;++ve){var qe=ie.charCodeAt(ve);le.write_shift(1,qe>=128?95:qe)}return le.write_shift(1,0),le}function f(W,ne,ie){var le=c(W,ne,ie);return le[1].v=W.read_shift(2,"i"),le}function g(W,ne,ie){var le=Ge(7);return le.write_shift(1,255),le.write_shift(2,ne),le.write_shift(2,W),le.write_shift(2,ie,"i"),le}function y(W,ne,ie){var le=c(W,ne,ie);return le[1].v=W.read_shift(8,"f"),le}function _(W,ne,ie){var le=Ge(13);return le.write_shift(1,255),le.write_shift(2,ne),le.write_shift(2,W),le.write_shift(8,ie,"f"),le}function b(W,ne,ie){var le=W.l+ne,ve=c(W,ne,ie);if(ve[1].v=W.read_shift(8,"f"),ie.qpro)W.l=le;else{var qe=W.read_shift(2);P(W.slice(W.l,W.l+qe),ve),W.l+=qe}return ve}function T(W,ne,ie){var le=ne&32768;return ne&=-32769,ne=(le?W:0)+(ne>=8192?ne-16384:ne),(le?"":"$")+(ie?_a(ne):Do(ne))}var A={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},I=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function P(W,ne){rc(W,0);for(var ie=[],le=0,ve="",qe="",Ke="",Se="";W.l<W.length;){var we=W[W.l++];switch(we){case 0:ie.push(W.read_shift(8,"f"));break;case 1:qe=T(ne[0].c,W.read_shift(2),!0),ve=T(ne[0].r,W.read_shift(2),!1),ie.push(qe+ve);break;case 2:{var Dt=T(ne[0].c,W.read_shift(2),!0),Ye=T(ne[0].r,W.read_shift(2),!1);qe=T(ne[0].c,W.read_shift(2),!0),ve=T(ne[0].r,W.read_shift(2),!1),ie.push(Dt+Ye+":"+qe+ve)}break;case 3:if(W.l<W.length){console.error("WK1 premature formula end");return}break;case 4:ie.push("("+ie.pop()+")");break;case 5:ie.push(W.read_shift(2));break;case 6:{for(var on="";we=W[W.l++];)on+=String.fromCharCode(we);ie.push('"'+on.replace(/"/g,'""')+'"')}break;case 8:ie.push("-"+ie.pop());break;case 23:ie.push("+"+ie.pop());break;case 22:ie.push("NOT("+ie.pop()+")");break;case 20:case 21:Se=ie.pop(),Ke=ie.pop(),ie.push(["AND","OR"][we-20]+"("+Ke+","+Se+")");break;default:if(we<32&&I[we])Se=ie.pop(),Ke=ie.pop(),ie.push(Ke+I[we]+Se);else if(A[we]){if(le=A[we][1],le==69&&(le=W[W.l++]),le>ie.length){console.error("WK1 bad formula parse 0x"+we.toString(16)+":|"+ie.join("|")+"|");return}var jt=ie.slice(-le);ie.length-=le,ie.push(A[we][0]+"("+jt.join(",")+")")}else return we<=7?console.error("WK1 invalid opcode "+we.toString(16)):we<=24?console.error("WK1 unsupported op "+we.toString(16)):we<=30?console.error("WK1 invalid opcode "+we.toString(16)):we<=115?console.error("WK1 unsupported function opcode "+we.toString(16)):console.error("WK1 unrecognized opcode "+we.toString(16))}}ie.length==1?ne[1].f=""+ie[0]:console.error("WK1 bad formula parse |"+ie.join("|")+"|")}function N(W){var ne=[{c:0,r:0},{t:"n",v:0},0];return ne[0].r=W.read_shift(2),ne[3]=W[W.l++],ne[0].c=W[W.l++],ne}function L(W,ne){var ie=N(W);return ie[1].t="s",ie[1].v=W.read_shift(ne-4,"cstr"),ie}function C(W,ne,ie,le){var ve=Ge(6+le.length);ve.write_shift(2,W),ve.write_shift(1,ie),ve.write_shift(1,ne),ve.write_shift(1,39);for(var qe=0;qe<le.length;++qe){var Ke=le.charCodeAt(qe);ve.write_shift(1,Ke>=128?95:Ke)}return ve.write_shift(1,0),ve}function M(W,ne){var ie=N(W);ie[1].v=W.read_shift(2);var le=ie[1].v>>1;if(ie[1].v&1)switch(le&7){case 0:le=(le>>3)*5e3;break;case 1:le=(le>>3)*500;break;case 2:le=(le>>3)/20;break;case 3:le=(le>>3)/200;break;case 4:le=(le>>3)/2e3;break;case 5:le=(le>>3)/2e4;break;case 6:le=(le>>3)/16;break;case 7:le=(le>>3)/64;break}return ie[1].v=le,ie}function O(W,ne){var ie=N(W),le=W.read_shift(4),ve=W.read_shift(4),qe=W.read_shift(2);if(qe==65535)return le===0&&ve===3221225472?(ie[1].t="e",ie[1].v=15):le===0&&ve===3489660928?(ie[1].t="e",ie[1].v=42):ie[1].v=0,ie;var Ke=qe&32768;return qe=(qe&32767)-16446,ie[1].v=(1-Ke*2)*(ve*Math.pow(2,qe+32)+le*Math.pow(2,qe)),ie}function D(W,ne,ie,le){var ve=Ge(14);if(ve.write_shift(2,W),ve.write_shift(1,ie),ve.write_shift(1,ne),le==0)return ve.write_shift(4,0),ve.write_shift(4,0),ve.write_shift(2,65535),ve;var qe=0,Ke=0,Se=0,we=0;return le<0&&(qe=1,le=-le),Ke=Math.log2(le)|0,le/=Math.pow(2,Ke-31),we=le>>>0,(we&2147483648)==0&&(le/=2,++Ke,we=le>>>0),le-=we,we|=2147483648,we>>>=0,le*=Math.pow(2,32),Se=le>>>0,ve.write_shift(4,Se),ve.write_shift(4,we),Ke+=16383+(qe?32768:0),ve.write_shift(2,Ke),ve}function V(W,ne){var ie=O(W);return W.l+=ne-14,ie}function U(W,ne){var ie=N(W),le=W.read_shift(4);return ie[1].v=le>>6,ie}function G(W,ne){var ie=N(W),le=W.read_shift(8,"f");return ie[1].v=le,ie}function de(W,ne){var ie=G(W);return W.l+=ne-10,ie}function ke(W,ne){return W[W.l+ne-1]==0?W.read_shift(ne,"cstr"):""}function Ue(W,ne){var ie=W[W.l++];ie>ne-1&&(ie=ne-1);for(var le="";le.length<ie;)le+=String.fromCharCode(W[W.l++]);return le}function Ne(W,ne,ie){if(!(!ie.qpro||ne<21)){var le=W.read_shift(1);W.l+=17,W.l+=1,W.l+=2;var ve=W.read_shift(ne-21,"cstr");return[le,ve]}}function fe(W,ne){for(var ie={},le=W.l+ne;W.l<le;){var ve=W.read_shift(2);if(ve==14e3){for(ie[ve]=[0,""],ie[ve][0]=W.read_shift(2);W[W.l];)ie[ve][1]+=String.fromCharCode(W[W.l]),W.l++;W.l++}}return ie}function De(W,ne){var ie=Ge(5+W.length);ie.write_shift(2,14e3),ie.write_shift(2,ne);for(var le=0;le<W.length;++le){var ve=W.charCodeAt(le);ie[ie.l++]=ve>127?95:ve}return ie[ie.l++]=0,ie}var Ce={0:{n:"BOF",f:bEe},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:a},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:y},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ke},222:{n:"SHEETNAMELP",f:Ue},65535:{n:""}},Q={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:L},23:{n:"NUMBER17",f:O},24:{n:"NUMBER18",f:M},25:{n:"FORMULA19",f:V},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:fe},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:U},38:{n:"??"},39:{n:"NUMBER27",f:G},40:{n:"FORMULA28",f:de},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ke},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Ne},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}})(),rxt=/^\s|\s$|[\t\n\r]/;function IEe(t,e){if(!e.bookSST)return"";var n=[Os];n[n.length]=vt("sst",null,{xmlns:Rb[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var i=t[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(rxt)&&(s+=' xml:space="preserve"'),s+=">"+Wr(i.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function ixt(t){return[t.read_shift(4),t.read_shift(4)]}function sxt(t,e){return e||(e=Ge(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var oxt=Xvt;function axt(t){var e=Al();tt(e,159,sxt(t));for(var n=0;n<t.length;++n)tt(e,19,oxt(t[n]));return tt(e,160),e.end()}function lxt(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function PEe(t){var e=0,n,r=lxt(t),i=r.length+1,s,o,a,l,c;for(n=rv(i),n[0]=r.length,s=1;s!=i;++s)n[s]=r[s-1];for(s=i-1;s>=0;--s)o=n[s],a=(e&16384)===0?0:1,l=e<<1&32767,c=a|l,e=c^o;return e^52811}var cxt=(function(){function t(i,s){switch(s.type){case"base64":return e(Tp(i),s);case"binary":return e(i,s);case"buffer":return e(Ar&&Buffer.isBuffer(i)?i.toString("binary"):tP(i),s);case"array":return e(UL(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var o=s||{},a=o.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,h){Array.isArray(a)&&(a[h]=[]);for(var f=/\\\w+\b/g,g=0,y,_=-1;y=f.exec(u);){switch(y[0]){case"\\cell":var b=u.slice(g,f.lastIndex-y[0].length);if(b[0]==" "&&(b=b.slice(1)),++_,b.length){var T={v:b,t:"s"};Array.isArray(a)?a[h][_]=T:a[qr({r:h,c:_})]=T}break}g=f.lastIndex}_>c.e.c&&(c.e.c=_)}),a["!ref"]=Ms(c),a}function n(i,s){return Tv(t(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],o=yi(i["!ref"]),a,l=Array.isArray(i),c=o.s.r;c<=o.e.r;++c){s.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)s.push("\\cellx"+(u+1));for(s.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var h=qr({r:c,c:u});a=l?(i[c]||[])[u]:i[h],!(!a||a.v==null&&(!a.f||a.F))&&(s.push(" "+(a.w||(kp(a),a.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}})();function fae(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}var uxt=6,fp=uxt;function v5(t){return Math.floor((t+Math.round(128/fp)/256)*fp)}function _5(t){return Math.floor((t-5)/fp*100+.5)/100}function Hz(t){return Math.round((t*fp+5)/fp*256)/256}function Vq(t){t.width?(t.wpx=v5(t.width),t.wch=_5(t.wpx),t.MDW=fp):t.wpx?(t.wch=_5(t.wpx),t.width=Hz(t.wch),t.MDW=fp):typeof t.wch=="number"&&(t.width=Hz(t.wch),t.wpx=v5(t.width),t.MDW=fp),t.customWidth&&delete t.customWidth}var hxt=96,CEe=hxt;function x5(t){return t*96/CEe}function REe(t){return t*CEe/96}function dxt(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=vt("numFmt",null,{numFmtId:r,formatCode:Wr(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=vt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function fxt(t){var e=[];return e[e.length]=vt("cellXfs",null),t.forEach(function(n){e[e.length]=vt("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=vt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function MEe(t,e){var n=[Os,vt("styleSheet",null,{xmlns:Rb[0],"xmlns:vt":uo.vt})],r;return t.SSF&&(r=dxt(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=fxt(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function pxt(t,e){var n=t.read_shift(2),r=xa(t);return[n,r]}function mxt(t,e,n){n||(n=Ge(6+4*e.length)),n.write_shift(2,t),po(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function gxt(t,e,n){var r={};r.sz=t.read_shift(2)/20;var i=r_t(t);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=t.read_shift(2);switch(s===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(r.underline=o);var a=t.read_shift(1);a>0&&(r.family=a);var l=t.read_shift(1);switch(l>0&&(r.charset=l),t.l++,r.color=n_t(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=xa(t),r}function yxt(t,e){e||(e=Ge(153)),e.write_shift(2,t.sz*20),i_t(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),g5(t.color,e);var r=0;return r=2,e.write_shift(1,r),po(t.name,e),e.length>e.l?e.slice(0,e.l):e}var vxt=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],dF,_xt=Ud;function pae(t,e){e||(e=Ge(84)),dF||(dF=Iq(vxt));var n=dF[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(g5({auto:1},e),g5({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function xxt(t,e){var n=t.l+e,r=t.read_shift(2),i=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:i}}function NEe(t,e,n){n||(n=Ge(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function rS(t,e){return e||(e=Ge(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var wxt=Ud;function bxt(t,e){return e||(e=Ge(51)),e.write_shift(1,0),rS(null,e),rS(null,e),rS(null,e),rS(null,e),rS(null,e),e.length>e.l?e.slice(0,e.l):e}function Ext(t,e){return e||(e=Ge(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),m5(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function Sxt(t,e,n){var r=Ge(2052);return r.write_shift(4,t),m5(e,r),m5(n,r),r.length>r.l?r.slice(0,r.l):r}function Txt(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++n}),n!=0&&(tt(t,615,mh(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&tt(t,44,mxt(i,e[i]))}),tt(t,616))}}function kxt(t){var e=1;tt(t,611,mh(e)),tt(t,43,yxt({sz:12,color:{theme:1},name:"Calibri",family:2})),tt(t,612)}function Axt(t){var e=2;tt(t,603,mh(e)),tt(t,45,pae({patternType:"none"})),tt(t,45,pae({patternType:"gray125"})),tt(t,604)}function Ixt(t){var e=1;tt(t,613,mh(e)),tt(t,46,bxt()),tt(t,614)}function Pxt(t){var e=1;tt(t,626,mh(e)),tt(t,47,NEe({numFmtId:0},65535)),tt(t,627)}function Cxt(t,e){tt(t,617,mh(e.length)),e.forEach(function(n){tt(t,47,NEe(n,0))}),tt(t,618)}function Rxt(t){var e=1;tt(t,619,mh(e)),tt(t,48,Ext({xfId:0,name:"Normal"})),tt(t,620)}function Mxt(t){var e=0;tt(t,505,mh(e)),tt(t,506)}function Nxt(t){var e=0;tt(t,508,Sxt(e,"TableStyleMedium9","PivotStyleMedium4")),tt(t,509)}function Oxt(t,e){var n=Al();return tt(n,278),Txt(n,t.SSF),kxt(n),Axt(n),Ixt(n),Pxt(n),Cxt(n,e.cellXfs),Rxt(n),Mxt(n),Nxt(n),tt(n,279),n.end()}function OEe(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[Os];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function Lxt(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:xa(t)}}function Dxt(t){var e=Ge(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),po(t.name,e),e.slice(0,e.l)}function jxt(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function $xt(t){var e=Ge(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function Fxt(t,e){var n=Ge(8+2*e.length);return n.write_shift(4,t),po(e,n),n.slice(0,n.l)}function Vxt(t){return t.l+=4,t.read_shift(4)!=0}function zxt(t,e){var n=Ge(8);return n.write_shift(4,t),n.write_shift(4,1),n}function Gxt(){var t=Al();return tt(t,332),tt(t,334,mh(1)),tt(t,335,Dxt({name:"XLDAPR",version:12e4,flags:3496657072})),tt(t,336),tt(t,339,Fxt(1,"XLDAPR")),tt(t,52),tt(t,35,mh(514)),tt(t,4096,mh(0)),tt(t,4097,Xc(1)),tt(t,36),tt(t,53),tt(t,340),tt(t,337,zxt(1)),tt(t,51,$xt([[1,0]])),tt(t,338),tt(t,333),t.end()}function LEe(){var t=[Os];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function Uxt(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=qr(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Kx=1024;function DEe(t,e){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[vt("xml",null,{"xmlns:v":ac.v,"xmlns:o":ac.o,"xmlns:x":ac.x,"xmlns:mv":ac.mv}).replace(/\/>/,">"),vt("o:shapelayout",vt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),vt("v:shapetype",[vt("v:stroke",null,{joinstyle:"miter"}),vt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];Kx<t*1e3;)Kx+=1e3;return e.forEach(function(s){var o=fo(s[0]),a={color2:"#BEFF82",type:"gradient"};a.type=="gradient"&&(a.angle="-180");var l=a.type=="gradient"?vt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=vt("v:fill",l,a),u={on:"t",obscured:"t"};++Kx,i=i.concat(["<v:shape"+MA({id:"_x0000_s"+Kx,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,vt("v:shadow",null,u),vt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Lo("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Lo("x:AutoFill","False"),Lo("x:Row",String(o.r)),Lo("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function jEe(t){var e=[Os,vt("comments",null,{xmlns:Rb[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(i){var s=Wr(i.a);n.indexOf(s)==-1&&(n.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&n.indexOf("tc="+i.ID)==-1&&(n.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=n.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(i=n.indexOf(Wr(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(Lo("t",Wr(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,a=1;a<s.length;++a)o+=`Reply:
    `+s[a]+`
`;e.push(Lo("t",Wr(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function Bxt(t,e,n){var r=[Os,vt("ThreadedComments",null,{xmlns:uo.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(o,a){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};a==0?s=l.id:l.parentId=s,o.ID=l.id,o.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),r.push(vt("threadedComment",Lo("text",o.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function Wxt(t){var e=[Os,vt("personList",null,{xmlns:uo.TCMNT,"xmlns:x":Rb[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(vt("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Hxt(t){var e={};e.iauthor=t.read_shift(4);var n=Pv(t);return e.rfx=n.s,e.ref=qr(n.s),t.l+=16,e}function qxt(t,e){return e==null&&(e=Ge(36)),e.write_shift(4,t[1].iauthor),Nb(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var Kxt=xa;function Yxt(t){return po(t.slice(0,54))}function Xxt(t){var e=Al(),n=[];return tt(e,628),tt(e,630),t.forEach(function(r){r[1].forEach(function(i){n.indexOf(i.a)>-1||(n.push(i.a.slice(0,54)),tt(e,632,Yxt(i.a)))})}),tt(e,631),tt(e,633),t.forEach(function(r){r[1].forEach(function(i){i.iauthor=n.indexOf(i.a);var s={s:fo(r[0]),e:fo(r[0])};tt(e,635,qxt([s,i])),i.t&&i.t.length>0&&tt(e,637,Jvt(i)),tt(e,636),delete i.iauthor})}),tt(e,634),tt(e,629),e.end()}function Zxt(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var i=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Zr.utils.cfb_add(t,i,e.FileIndex[r].content)}})}var $Ee=["xlsb","xlsm","xlam","biff8","xla"],Jxt=(function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,i,s,o){var a=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),o.length==0?a=!0:o.charAt(0)=="["&&(a=!0,o=o.slice(1,-1));var c=s.length>0?parseInt(s,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return a?u+=e.c:--u,l?c+=e.r:--c,i+(a?"":"$")+_a(u)+(l?"":"$")+Do(c)}return function(i,s){return e=s,i.replace(t,n)}})(),zq=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Gq=(function(){return function(e,n){return e.replace(zq,function(r,i,s,o,a,l){var c=Lq(o)-(s?0:n.c),u=Oq(l)-(a?0:n.r),h=u==0?"":a?u+1:"["+u+"]",f=c==0?"":s?c+1:"["+c+"]";return i+"R"+h+"C"+f})}})();function Qxt(t,e){return t.replace(zq,function(n,r,i,s,o,a){return r+(i=="$"?i+s:_a(Lq(s)+e.c))+(o=="$"?o+a:Do(Oq(a)+e.r))})}function ewt(t){return t.length!=1}function vs(t){t.l+=1}function r0(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function FEe(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return VEe(t);n.biff==12&&(r=4)}var i=t.read_shift(r),s=t.read_shift(r),o=r0(t),a=r0(t);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function VEe(t){var e=r0(t),n=r0(t),r=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function twt(t,e,n){if(n.biff<8)return VEe(t);var r=t.read_shift(n.biff==12?4:2),i=t.read_shift(n.biff==12?4:2),s=r0(t),o=r0(t);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function zEe(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return nwt(t);var r=t.read_shift(n&&n.biff==12?4:2),i=r0(t);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function nwt(t){var e=r0(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function rwt(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function iwt(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return swt(t);var i=t.read_shift(r>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,a=(s&32768)>>15;if(s&=16383,a==1)for(;i>524287;)i-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:o,rRel:a}}function swt(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:i,rRel:r}}function owt(t,e,n){var r=(t[t.l++]&96)>>5,i=FEe(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,i]}function awt(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=FEe(t,s,n);return[r,i,o]}function lwt(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function cwt(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[r,i]}function uwt(t,e,n){var r=(t[t.l++]&96)>>5,i=twt(t,e-1,n);return[r,i]}function hwt(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function mae(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function dwt(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(t.read_shift(n&&n.biff==2?1:2));return i}function fwt(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function pwt(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function mwt(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function gwt(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function GEe(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function ywt(t){return t.read_shift(2),GEe(t)}function vwt(t){return t.read_shift(2),GEe(t)}function _wt(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=zEe(t,0,n);return[r,i]}function xwt(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=iwt(t,0,n);return[r,i]}function wwt(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var s=zEe(t,0,n);return[r,i,s]}function bwt(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(n&&n.biff<=3?1:2);return[b2t[i],WEe[i],r]}function Ewt(t,e,n){var r=t[t.l++],i=t.read_shift(1),s=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:Swt(t);return[i,(s[0]===0?WEe:w2t)[s[1]]]}function Swt(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Twt(t,e,n){t.l+=n&&n.biff==2?3:4}function kwt(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function Awt(t){return t.l++,iP[t.read_shift(1)]}function Iwt(t){return t.l++,t.read_shift(2)}function Pwt(t){return t.l++,t.read_shift(1)!==0}function Cwt(t){return t.l++,Ob(t)}function Rwt(t,e,n){return t.l++,SEe(t,e-1,n)}function Mwt(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=w_t(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=iP[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=Ob(t);break;case 2:n[1]=T_t(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function Nwt(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((n.biff==12?Pv:I_t)(t));return i}function Owt(t,e,n){var r=0,i=0;n.biff==12?(r=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--i==0&&(i=256));for(var s=0,o=[];s!=r&&(o[s]=[]);++s)for(var a=0;a!=i;++a)o[s][a]=Mwt(t,n.biff);return o}function Lwt(t,e,n){var r=t.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,s=t.read_shift(i);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,s]}function Dwt(t,e,n){if(n.biff==5)return jwt(t);var r=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[r,i,s]}function jwt(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function $wt(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function Fwt(t,e,n){var r=t.read_shift(1)>>>5&3,i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function Vwt(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function zwt(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[r,i]}var Gwt=Ud,Uwt=Ud,Bwt=Ud;function sP(t,e,n){return t.l+=2,[rwt(t)]}function Uq(t){return t.l+=6,[]}var Wwt=sP,Hwt=Uq,qwt=Uq,Kwt=sP;function UEe(t){return t.l+=2,[bEe(t),t.read_shift(2)&1]}var Ywt=sP,Xwt=UEe,Zwt=Uq,Jwt=sP,Qwt=sP,e2t=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function t2t(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),o=e2t[n>>2&31];return{ixti:e,coltype:n&3,rt:o,idx:r,c:i,C:s}}function n2t(t){return t.l+=2,[t.read_shift(4)]}function r2t(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function i2t(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function s2t(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function o2t(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function a2t(t){return t.l+=4,[0,0]}var gae={1:{n:"PtgExp",f:kwt},2:{n:"PtgTbl",f:Bwt},3:{n:"PtgAdd",f:vs},4:{n:"PtgSub",f:vs},5:{n:"PtgMul",f:vs},6:{n:"PtgDiv",f:vs},7:{n:"PtgPower",f:vs},8:{n:"PtgConcat",f:vs},9:{n:"PtgLt",f:vs},10:{n:"PtgLe",f:vs},11:{n:"PtgEq",f:vs},12:{n:"PtgGe",f:vs},13:{n:"PtgGt",f:vs},14:{n:"PtgNe",f:vs},15:{n:"PtgIsect",f:vs},16:{n:"PtgUnion",f:vs},17:{n:"PtgRange",f:vs},18:{n:"PtgUplus",f:vs},19:{n:"PtgUminus",f:vs},20:{n:"PtgPercent",f:vs},21:{n:"PtgParen",f:vs},22:{n:"PtgMissArg",f:vs},23:{n:"PtgStr",f:Rwt},26:{n:"PtgSheet",f:r2t},27:{n:"PtgEndSheet",f:i2t},28:{n:"PtgErr",f:Awt},29:{n:"PtgBool",f:Pwt},30:{n:"PtgInt",f:Iwt},31:{n:"PtgNum",f:Cwt},32:{n:"PtgArray",f:hwt},33:{n:"PtgFunc",f:bwt},34:{n:"PtgFuncVar",f:Ewt},35:{n:"PtgName",f:Lwt},36:{n:"PtgRef",f:_wt},37:{n:"PtgArea",f:owt},38:{n:"PtgMemArea",f:$wt},39:{n:"PtgMemErr",f:Gwt},40:{n:"PtgMemNoMem",f:Uwt},41:{n:"PtgMemFunc",f:Fwt},42:{n:"PtgRefErr",f:Vwt},43:{n:"PtgAreaErr",f:lwt},44:{n:"PtgRefN",f:xwt},45:{n:"PtgAreaN",f:uwt},46:{n:"PtgMemAreaN",f:s2t},47:{n:"PtgMemNoMemN",f:o2t},57:{n:"PtgNameX",f:Dwt},58:{n:"PtgRef3d",f:wwt},59:{n:"PtgArea3d",f:awt},60:{n:"PtgRefErr3d",f:zwt},61:{n:"PtgAreaErr3d",f:cwt},255:{}},l2t={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},c2t={1:{n:"PtgElfLel",f:UEe},2:{n:"PtgElfRw",f:Jwt},3:{n:"PtgElfCol",f:Wwt},6:{n:"PtgElfRwV",f:Qwt},7:{n:"PtgElfColV",f:Kwt},10:{n:"PtgElfRadical",f:Ywt},11:{n:"PtgElfRadicalS",f:Zwt},13:{n:"PtgElfColS",f:Hwt},15:{n:"PtgElfColSV",f:qwt},16:{n:"PtgElfRadicalLel",f:Xwt},25:{n:"PtgList",f:t2t},29:{n:"PtgSxName",f:n2t},255:{}},u2t={0:{n:"PtgAttrNoop",f:a2t},1:{n:"PtgAttrSemi",f:gwt},2:{n:"PtgAttrIf",f:pwt},4:{n:"PtgAttrChoose",f:dwt},8:{n:"PtgAttrGoto",f:fwt},16:{n:"PtgAttrSum",f:Twt},32:{n:"PtgAttrBaxcel",f:mae},33:{n:"PtgAttrBaxcel",f:mae},64:{n:"PtgAttrSpace",f:ywt},65:{n:"PtgAttrSpaceSemi",f:vwt},128:{n:"PtgAttrIfError",f:mwt},255:{}};function h2t(t,e,n,r){if(r.biff<8)return Ud(t,e);for(var i=t.l+e,s=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=Owt(t,0,r),s.push(n[o][1]);break;case"PtgMemArea":n[o][2]=Nwt(t,n[o][1],r),s.push(n[o][2]);break;case"PtgExp":r&&r.biff==12&&(n[o][1][1]=t.read_shift(4),s.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return e=i-t.l,e!==0&&s.push(Ud(t,e)),s}function d2t(t,e,n){for(var r=t.l+e,i,s,o=[];r!=t.l;)e=r-t.l,s=t[t.l],i=gae[s]||gae[l2t[s]],(s===24||s===25)&&(i=(s===24?c2t:u2t)[t[t.l+1]]),!i||!i.f?Ud(t,e):o.push([i.n,i.f(t,e,n)]);return o}function f2t(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],i=[],s=0;s<r.length;++s){var o=r[s];if(o)switch(o[0]){case 2:i.push('"'+o[1].replace(/"/g,'""')+'"');break;default:i.push(o[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var p2t={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function m2t(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function BEe(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(t[r[0]][0]){case 357:return i=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[r[0]][0][3]?(i=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function yae(t,e,n){var r=BEe(t,e,n);return r=="#REF"?r:m2t(r,n)}function K2(t,e,n,r,i){var s=i&&i.biff||8,o={s:{c:0,r:0}},a=[],l,c,u,h=0,f=0,g,y="";if(!t[0]||!t[0][0])return"";for(var _=-1,b="",T=0,A=t[0].length;T<A;++T){var I=t[0][T];switch(I[0]){case"PtgUminus":a.push("-"+a.pop());break;case"PtgUplus":a.push("+"+a.pop());break;case"PtgPercent":a.push(a.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=a.pop(),c=a.pop(),_>=0){switch(t[0][_][1][0]){case 0:b=Ji(" ",t[0][_][1][1]);break;case 1:b=Ji("\r",t[0][_][1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][_][1][0])}c=c+b,_=-1}a.push(c+p2t[I[0]]+l);break;case"PtgIsect":l=a.pop(),c=a.pop(),a.push(c+" "+l);break;case"PtgUnion":l=a.pop(),c=a.pop(),a.push(c+","+l);break;case"PtgRange":l=a.pop(),c=a.pop(),a.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=sk(I[1][1],o,i),a.push(ok(u,s));break;case"PtgRefN":u=n?sk(I[1][1],n,i):I[1][1],a.push(ok(u,s));break;case"PtgRef3d":h=I[1][1],u=sk(I[1][2],o,i),y=yae(r,h,i),a.push(y+"!"+ok(u,s));break;case"PtgFunc":case"PtgFuncVar":var P=I[1][0],N=I[1][1];P||(P=0),P&=127;var L=P==0?[]:a.slice(-P);a.length-=P,N==="User"&&(N=L.shift()),a.push(N+"("+L.join(",")+")");break;case"PtgBool":a.push(I[1]?"TRUE":"FALSE");break;case"PtgInt":a.push(I[1]);break;case"PtgNum":a.push(String(I[1]));break;case"PtgStr":a.push('"'+I[1].replace(/"/g,'""')+'"');break;case"PtgErr":a.push(I[1]);break;case"PtgAreaN":g=tae(I[1][1],n?{s:n}:o,i),a.push(uF(g,i));break;case"PtgArea":g=tae(I[1][1],o,i),a.push(uF(g,i));break;case"PtgArea3d":h=I[1][1],g=I[1][2],y=yae(r,h,i),a.push(y+"!"+uF(g,i));break;case"PtgAttrSum":a.push("SUM("+a.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=I[1][2];var C=(r.names||[])[f-1]||(r[0]||[])[f],M=C?C.Name:"SH33TJSNAME"+String(f);M&&M.slice(0,6)=="_xlfn."&&!i.xlfn&&(M=M.slice(6)),a.push(M);break;case"PtgNameX":var O=I[1][1];f=I[1][2];var D;if(i.biff<=5)O<0&&(O=-O),r[O]&&(D=r[O][f]);else{var V="";if(((r[O]||[])[0]||[])[0]==14849||(((r[O]||[])[0]||[])[0]==1025?r[O][f]&&r[O][f].itab>0&&(V=r.SheetNames[r[O][f].itab-1]+"!"):V=r.SheetNames[f-1]+"!"),r[O]&&r[O][f])V+=r[O][f].Name;else if(r[0]&&r[0][f])V+=r[0][f].Name;else{var U=(BEe(r,O,i)||"").split(";;");U[f-1]?V=U[f-1]:V+="SH33TJSERRX"}a.push(V);break}D||(D={Name:"SH33TJSERRY"}),a.push(D.Name);break;case"PtgParen":var G="(",de=")";if(_>=0){switch(b="",t[0][_][1][0]){case 2:G=Ji(" ",t[0][_][1][1])+G;break;case 3:G=Ji("\r",t[0][_][1][1])+G;break;case 4:de=Ji(" ",t[0][_][1][1])+de;break;case 5:de=Ji("\r",t[0][_][1][1])+de;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][_][1][0])}_=-1}a.push(G+a.pop()+de);break;case"PtgRefErr":a.push("#REF!");break;case"PtgRefErr3d":a.push("#REF!");break;case"PtgExp":u={c:I[1][1],r:I[1][0]};var ke={c:n.c,r:n.r};if(r.sharedf[qr(u)]){var Ue=r.sharedf[qr(u)];a.push(K2(Ue,o,ke,r,i))}else{var Ne=!1;for(l=0;l!=r.arrayf.length;++l)if(c=r.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){a.push(K2(c[1],o,ke,r,i)),Ne=!0;break}Ne||a.push(I[1])}break;case"PtgArray":a.push("{"+f2t(I[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":a.push("");break;case"PtgAreaErr":a.push("#REF!");break;case"PtgAreaErr3d":a.push("#REF!");break;case"PtgList":a.push("Table"+I[1].idx+"[#"+I[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(I));default:throw new Error("Unrecognized Formula Token: "+String(I))}var fe=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&_>=0&&fe.indexOf(t[0][T][0])==-1){I=t[0][_];var De=!0;switch(I[1][0]){case 4:De=!1;case 0:b=Ji(" ",I[1][1]);break;case 5:De=!1;case 1:b=Ji("\r",I[1][1]);break;default:if(b="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+I[1][0])}a.push((De?b:"")+a.pop()+(De?"":b)),_=-1}}if(a.length>1&&i.WTF)throw new Error("bad formula stack");return a[0]}function g2t(t){if(t==null){var e=Ge(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return iv(t);return iv(0)}function y2t(t,e,n,r,i){var s=sv(e,n,i),o=g2t(t.v),a=Ge(6),l=33;a.write_shift(2,l),a.write_shift(4,0);for(var c=Ge(t.bf.length),u=0;u<t.bf.length;++u)c[u]=t.bf[u];var h=Oo([s,o,a,c]);return h}function BL(t,e,n){var r=t.read_shift(4),i=d2t(t,r,n),s=t.read_shift(4),o=s>0?h2t(t,s,i,n):null;return[i,o]}var v2t=BL,WL=BL,_2t=BL,x2t=BL,w2t={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},WEe={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},b2t={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function E2t(t){var e="of:="+t.replace(zq,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function S2t(t){return t.replace(/\./,"!")}var ak=typeof Map<"u";function Bq(t,e,n){var r=0,i=t.length;if(n){if(ak?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var s=ak?n.get(e):n[e];r<s.length;++r)if(t[s[r]].t===e)return t.Count++,s[r]}}else for(;r<i;++r)if(t[r].t===e)return t.Count++,r;return t[i]={t:e},t.Count++,t.Unique++,n&&(ak?(n.has(e)||n.set(e,[]),n.get(e).push(i)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(i))),i}function HL(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(fp=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=_5(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=Hz(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function HEe(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function g0(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(r==null&&n.ssf){for(;i<392;++i)if(n.ssf[i]==null){zbe(e.z,i),n.ssf[i]=e.z,n.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===r)return i;return t[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function T2t(t,e,n){if(t&&t["!ref"]){var r=yi(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function k2t(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+Ms(t[n])+'"/>';return e+"</mergeCells>"}function A2t(t,e,n,r,i){var s=!1,o={},a=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[n];try{e.Workbook&&(l=e.Workbook.Sheets[n].CodeName||l)}catch{}s=!0,o.codeName=RA(Wr(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),a=(a||"")+vt("outlinePr",null,c)}!s&&!a||(i[i.length]=vt("sheetPr",a,o))}var I2t=["objects","scenarios","selectLockedCells","selectUnlockedCells"],P2t=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function C2t(t){var e={sheet:1};return I2t.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),P2t.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=PEe(t.password).toString(16).toUpperCase()),vt("sheetProtection",null,e)}function R2t(t){return HEe(t),vt("pageMargins",null,t)}function M2t(t,e){for(var n=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(n[n.length]=vt("col",null,HL(i,r)));return n[n.length]="</cols>",n.join("")}function N2t(t,e,n,r){var i=typeof t.ref=="string"?t.ref:Ms(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,o=Sc(i);o.s.r==o.e.r&&(o.e.r=Sc(e["!ref"]).e.r,i=Ms(o));for(var a=0;a<s.length;++a){var l=s[a];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+i;break}}return a==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),vt("autoFilter",null,{ref:i})}function O2t(t,e,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),vt("sheetViews",vt("sheetView",null,i),{})}function L2t(t,e,n,r){if(t.c&&n["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",s=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=iP[t.v];break;case"d":r&&r.cellDates?i=Ua(t.v,-1).toISOString():(t=Ml(t),t.t="n",i=""+(t.v=Rl(Ua(t.v)))),typeof t.z>"u"&&(t.z=rs[14]);break;default:i=t.v;break}var a=Lo("v",Wr(i)),l={r:e},c=g0(r.cellXfs,t,r);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){a=Lo("v",""+Bq(r.Strings,t.v,r.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=o),typeof t.f=="string"&&t.f){var u=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;a=vt("f",Wr(t.f),u)+(t.v!=null?a:"")}return t.l&&n["!links"].push([e,t.l]),t.D&&(l.cm=1),vt("c",a,l)}function D2t(t,e,n,r){var i=[],s=[],o=yi(t["!ref"]),a="",l,c="",u=[],h=0,f=0,g=t["!rows"],y=Array.isArray(t),_={r:c},b,T=-1;for(f=o.s.c;f<=o.e.c;++f)u[f]=_a(f);for(h=o.s.r;h<=o.e.r;++h){for(s=[],c=Do(h),f=o.s.c;f<=o.e.c;++f){l=u[f]+c;var A=y?(t[h]||[])[f]:t[l];A!==void 0&&(a=L2t(A,l,t,e))!=null&&s.push(a)}(s.length>0||g&&g[h])&&(_={r:c},g&&g[h]&&(b=g[h],b.hidden&&(_.hidden=1),T=-1,b.hpx?T=x5(b.hpx):b.hpt&&(T=b.hpt),T>-1&&(_.ht=T,_.customHeight=1),b.level&&(_.outlineLevel=b.level)),i[i.length]=vt("row",s.join(""),_))}if(g)for(;h<g.length;++h)g&&g[h]&&(_={r:h+1},b=g[h],b.hidden&&(_.hidden=1),T=-1,b.hpx?T=x5(b.hpx):b.hpt&&(T=b.hpt),T>-1&&(_.ht=T,_.customHeight=1),b.level&&(_.outlineLevel=b.level),i[i.length]=vt("row","",_));return i.join("")}function qEe(t,e,n,r){var i=[Os,vt("worksheet",null,{xmlns:Rb[0],"xmlns:r":uo.r})],s=n.SheetNames[t],o=0,a="",l=n.Sheets[s];l==null&&(l={});var c=l["!ref"]||"A1",u=yi(c);if(u.e.c>16383||u.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=Ms(u)}r||(r={}),l["!comments"]=[];var h=[];A2t(l,n,t,e,i),i[i.length]=vt("dimension",null,{ref:c}),i[i.length]=O2t(l,e,t,n),e.sheetFormat&&(i[i.length]=vt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=M2t(l,l["!cols"])),i[o=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(a=D2t(l,e),a.length>0&&(i[i.length]=a)),i.length>o+1&&(i[i.length]="</sheetData>",i[o]=i[o].replace("/>",">")),l["!protect"]&&(i[i.length]=C2t(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=N2t(l["!autofilter"],l,n,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=k2t(l["!merges"]));var f=-1,g,y=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(_){_[1].Target&&(g={ref:_[0]},_[1].Target.charAt(0)!="#"&&(y=Gr(r,-1,Wr(_[1].Target).replace(/#.*$/,""),wr.HLINK),g["r:id"]="rId"+y),(f=_[1].Target.indexOf("#"))>-1&&(g.location=Wr(_[1].Target.slice(f+1))),_[1].Tooltip&&(g.tooltip=Wr(_[1].Tooltip)),i[i.length]=vt("hyperlink",null,g))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=R2t(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Lo("ignoredErrors",vt("ignoredError",null,{numberStoredAsText:1,sqref:c}))),h.length>0&&(y=Gr(r,-1,"../drawings/drawing"+(t+1)+".xml",wr.DRAW),i[i.length]=vt("drawing",null,{"r:id":"rId"+y}),l["!drawing"]=h),l["!comments"].length>0&&(y=Gr(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",wr.VML),i[i.length]=vt("legacyDrawing",null,{"r:id":"rId"+y}),l["!legacy"]=y),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function j2t(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=r,s&7&&(n.level=s&7),s&16&&(n.hidden=!0),s&32&&(n.hpt=i/20),n}function $2t(t,e,n){var r=Ge(145),i=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var s=320;i.hpx?s=x5(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),r.write_shift(1,o),r.write_shift(1,0);var a=0,l=r.l;r.l+=4;for(var c={r:t,c:0},u=0;u<16;++u)if(!(e.s.c>u+1<<10||e.e.c<u<<10)){for(var h=-1,f=-1,g=u<<10;g<u+1<<10;++g){c.c=g;var y=Array.isArray(n)?(n[c.r]||[])[c.c]:n[qr(c)];y&&(h<0&&(h=g),f=g)}h<0||(++a,r.write_shift(4,h),r.write_shift(4,f))}var _=r.l;return r.l=l,r.write_shift(4,a),r.l=_,r.length>r.l?r.slice(0,r.l):r}function F2t(t,e,n,r){var i=$2t(r,n,e);(i.length>17||(e["!rows"]||[])[r])&&tt(t,0,i)}var V2t=Pv,z2t=Nb;function G2t(){}function U2t(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=Qvt(t),n}function B2t(t,e,n){n==null&&(n=Ge(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return g5({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),lEe(t,n),n.slice(0,n.l)}function W2t(t){var e=bu(t);return[e]}function H2t(t,e,n){return n==null&&(n=Ge(8)),kv(e,n)}function q2t(t){var e=Av(t);return[e]}function K2t(t,e,n){return n==null&&(n=Ge(4)),Iv(e,n)}function Y2t(t){var e=bu(t),n=t.read_shift(1);return[e,n,"b"]}function X2t(t,e,n){return n==null&&(n=Ge(9)),kv(e,n),n.write_shift(1,t.v?1:0),n}function Z2t(t){var e=Av(t),n=t.read_shift(1);return[e,n,"b"]}function J2t(t,e,n){return n==null&&(n=Ge(5)),Iv(e,n),n.write_shift(1,t.v?1:0),n}function Q2t(t){var e=bu(t),n=t.read_shift(1);return[e,n,"e"]}function ebt(t,e,n){return n==null&&(n=Ge(9)),kv(e,n),n.write_shift(1,t.v),n}function tbt(t){var e=Av(t),n=t.read_shift(1);return[e,n,"e"]}function nbt(t,e,n){return n==null&&(n=Ge(8)),Iv(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function rbt(t){var e=bu(t),n=t.read_shift(4);return[e,n,"s"]}function ibt(t,e,n){return n==null&&(n=Ge(12)),kv(e,n),n.write_shift(4,e.v),n}function sbt(t){var e=Av(t),n=t.read_shift(4);return[e,n,"s"]}function obt(t,e,n){return n==null&&(n=Ge(8)),Iv(e,n),n.write_shift(4,e.v),n}function abt(t){var e=bu(t),n=Ob(t);return[e,n,"n"]}function lbt(t,e,n){return n==null&&(n=Ge(16)),kv(e,n),iv(t.v,n),n}function cbt(t){var e=Av(t),n=Ob(t);return[e,n,"n"]}function ubt(t,e,n){return n==null&&(n=Ge(12)),Iv(e,n),iv(t.v,n),n}function hbt(t){var e=bu(t),n=cEe(t);return[e,n,"n"]}function dbt(t,e,n){return n==null&&(n=Ge(12)),kv(e,n),uEe(t.v,n),n}function fbt(t){var e=Av(t),n=cEe(t);return[e,n,"n"]}function pbt(t,e,n){return n==null&&(n=Ge(8)),Iv(e,n),uEe(t.v,n),n}function mbt(t){var e=bu(t),n=Dq(t);return[e,n,"is"]}function gbt(t){var e=bu(t),n=xa(t);return[e,n,"str"]}function ybt(t,e,n){return n==null&&(n=Ge(12+4*t.v.length)),kv(e,n),po(t.v,n),n.length>n.l?n.slice(0,n.l):n}function vbt(t){var e=Av(t),n=xa(t);return[e,n,"str"]}function _bt(t,e,n){return n==null&&(n=Ge(8+4*t.v.length)),Iv(e,n),po(t.v,n),n.length>n.l?n.slice(0,n.l):n}function xbt(t,e,n){var r=t.l+e,i=bu(t);i.r=n["!row"];var s=t.read_shift(1),o=[i,s,"b"];if(n.cellFormula){t.l+=2;var a=WL(t,r-t.l,n);o[3]=K2(a,null,i,n.supbooks,n)}else t.l=r;return o}function wbt(t,e,n){var r=t.l+e,i=bu(t);i.r=n["!row"];var s=t.read_shift(1),o=[i,s,"e"];if(n.cellFormula){t.l+=2;var a=WL(t,r-t.l,n);o[3]=K2(a,null,i,n.supbooks,n)}else t.l=r;return o}function bbt(t,e,n){var r=t.l+e,i=bu(t);i.r=n["!row"];var s=Ob(t),o=[i,s,"n"];if(n.cellFormula){t.l+=2;var a=WL(t,r-t.l,n);o[3]=K2(a,null,i,n.supbooks,n)}else t.l=r;return o}function Ebt(t,e,n){var r=t.l+e,i=bu(t);i.r=n["!row"];var s=xa(t),o=[i,s,"str"];if(n.cellFormula){t.l+=2;var a=WL(t,r-t.l,n);o[3]=K2(a,null,i,n.supbooks,n)}else t.l=r;return o}var Sbt=Pv,Tbt=Nb;function kbt(t,e){return e==null&&(e=Ge(4)),e.write_shift(4,t),e}function Abt(t,e){var n=t.l+e,r=Pv(t),i=jq(t),s=xa(t),o=xa(t),a=xa(t);t.l=n;var l={rfx:r,relId:i,loc:s,display:a};return o&&(l.Tooltip=o),l}function Ibt(t,e){var n=Ge(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));Nb({s:fo(t[0]),e:fo(t[0])},n),$q("rId"+e,n);var r=t[1].Target.indexOf("#"),i=r==-1?"":t[1].Target.slice(r+1);return po(i||"",n),po(t[1].Tooltip||"",n),po("",n),n.slice(0,n.l)}function Pbt(){}function Cbt(t,e,n){var r=t.l+e,i=hEe(t),s=t.read_shift(1),o=[i];if(o[2]=s,n.cellFormula){var a=v2t(t,r-t.l,n);o[1]=a}else t.l=r;return o}function Rbt(t,e,n){var r=t.l+e,i=Pv(t),s=[i];if(n.cellFormula){var o=x2t(t,r-t.l,n);s[1]=o,t.l=r}else t.l=r;return s}function Mbt(t,e,n){n==null&&(n=Ge(18));var r=HL(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),n.write_shift(2,i),n}var KEe=["left","right","top","bottom","header","footer"];function Nbt(t){var e={};return KEe.forEach(function(n){e[n]=Ob(t)}),e}function Obt(t,e){return e==null&&(e=Ge(48)),HEe(t),KEe.forEach(function(n){iv(t[n],e)}),e}function Lbt(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Dbt(t,e,n){n==null&&(n=Ge(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function jbt(t){var e=Ge(24);return e.write_shift(4,4),e.write_shift(4,1),Nb(t,e),e}function $bt(t,e){return e==null&&(e=Ge(66)),e.write_shift(2,t.password?PEe(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function Fbt(){}function Vbt(){}function zbt(t,e,n,r,i,s,o){if(e.v===void 0)return!1;var a="";switch(e.t){case"b":a=e.v?"1":"0";break;case"d":e=Ml(e),e.z=e.z||rs[14],e.v=Rl(Ua(e.v)),e.t="n";break;case"n":case"e":a=""+e.v;break;default:a=e.v;break}var l={r:n,c:r};switch(l.s=g0(i.cellXfs,e,i),e.l&&s["!links"].push([qr(l),e.l]),e.c&&s["!comments"].push([qr(l),e.c]),e.t){case"s":case"str":return i.bookSST?(a=Bq(i.Strings,e.v,i.revStrings),l.t="s",l.v=a,o?tt(t,18,obt(e,l)):tt(t,7,ibt(e,l))):(l.t="str",o?tt(t,17,_bt(e,l)):tt(t,6,ybt(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?tt(t,13,pbt(e,l)):tt(t,2,dbt(e,l)):o?tt(t,16,ubt(e,l)):tt(t,5,lbt(e,l)),!0;case"b":return l.t="b",o?tt(t,15,J2t(e,l)):tt(t,4,X2t(e,l)),!0;case"e":return l.t="e",o?tt(t,14,nbt(e,l)):tt(t,3,ebt(e,l)),!0}return o?tt(t,12,K2t(e,l)):tt(t,1,H2t(e,l)),!0}function Gbt(t,e,n,r){var i=yi(e["!ref"]||"A1"),s,o="",a=[];tt(t,145);var l=Array.isArray(e),c=i.e.r;e["!rows"]&&(c=Math.max(i.e.r,e["!rows"].length-1));for(var u=i.s.r;u<=c;++u){o=Do(u),F2t(t,e,i,u);var h=!1;if(u<=i.e.r)for(var f=i.s.c;f<=i.e.c;++f){u===i.s.r&&(a[f]=_a(f)),s=a[f]+o;var g=l?(e[u]||[])[f]:e[s];if(!g){h=!1;continue}h=zbt(t,g,u,f,r,e,h)}}tt(t,146)}function Ubt(t,e){!e||!e["!merges"]||(tt(t,177,kbt(e["!merges"].length)),e["!merges"].forEach(function(n){tt(t,176,Tbt(n))}),tt(t,178))}function Bbt(t,e){!e||!e["!cols"]||(tt(t,390),e["!cols"].forEach(function(n,r){n&&tt(t,60,Mbt(r,n))}),tt(t,391))}function Wbt(t,e){!e||!e["!ref"]||(tt(t,648),tt(t,649,jbt(yi(e["!ref"]))),tt(t,650))}function Hbt(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var i=Gr(n,-1,r[1].Target.replace(/#.*$/,""),wr.HLINK);tt(t,494,Ibt(r,i))}}),delete e["!links"]}function qbt(t,e,n,r){if(e["!comments"].length>0){var i=Gr(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",wr.VML);tt(t,551,$q("rId"+i)),e["!legacy"]=i}}function Kbt(t,e,n,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Ms(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var o=n.Workbook.Names,a=Sc(s);a.s.r==a.e.r&&(a.e.r=Sc(e["!ref"]).e.r,s=Ms(a));for(var l=0;l<o.length;++l){var c=o[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+s;break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),tt(t,161,Nb(yi(s))),tt(t,162)}}function Ybt(t,e,n){tt(t,133),tt(t,137,Dbt(e,n)),tt(t,138),tt(t,134)}function Xbt(t,e){e["!protect"]&&tt(t,535,$bt(e["!protect"]))}function Zbt(t,e,n,r){var i=Al(),s=n.SheetNames[t],o=n.Sheets[s]||{},a=s;try{n&&n.Workbook&&(a=n.Workbook.Sheets[t].CodeName||a)}catch{}var l=yi(o["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],tt(i,129),(n.vbaraw||o["!outline"])&&tt(i,147,B2t(a,o["!outline"])),tt(i,148,z2t(l)),Ybt(i,o,n.Workbook),Bbt(i,o),Gbt(i,o,t,e),Xbt(i,o),Kbt(i,o,n,t),Ubt(i,o),Hbt(i,o,r),o["!margins"]&&tt(i,476,Obt(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Wbt(i,o),qbt(i,o,t,r),tt(i,130),i.end()}function Jbt(t,e){t.l+=10;var n=xa(t);return{name:n}}var Qbt=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function eEt(t){return!t.Workbook||!t.Workbook.WBProps?"false":Rvt(t.Workbook.WBProps.date1904)?"true":"false"}var tEt="][*?/\\".split("");function YEe(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return tEt.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function nEt(t,e,n){t.forEach(function(r,i){YEe(r);for(var s=0;s<i;++s)if(r==t[s])throw new Error("Duplicate Sheet Name: "+r);if(n){var o=e&&e[i]&&e[i].CodeName||r;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function rEt(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];nEt(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)T2t(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n)}function XEe(t){var e=[Os];e[e.length]=vt("workbook",null,{xmlns:Rb[0],"xmlns:r":uo.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(Qbt.forEach(function(a){t.Workbook.WBProps[a[0]]!=null&&t.Workbook.WBProps[a[0]]!=a[1]&&(r[a[0]]=t.Workbook.WBProps[a[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=vt("workbookPr",null,r);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:Wr(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=vt("sheet",null,o)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(a){var l={name:a.Name};a.Comment&&(l.comment=a.Comment),a.Sheet!=null&&(l.localSheetId=""+a.Sheet),a.Hidden&&(l.hidden="1"),a.Ref&&(e[e.length]=vt("definedName",Wr(a.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function iEt(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=Wz(t),n.name=xa(t),n}function sEt(t,e){return e||(e=Ge(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),$q(t.strRelID,e),po(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function oEt(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var i=e>8?xa(t):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function aEt(t,e){e||(e=Ge(72));var n=0;return t&&t.filterPrivacy&&(n|=8),e.write_shift(4,n),e.write_shift(4,0),lEe(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function lEt(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),s=e_t(t),o=_2t(t,0,n),a=jq(t);t.l=r;var l={Name:s,Ptg:o};return i<268435455&&(l.Sheet=i),a&&(l.Comment=a),l}function cEt(t,e){tt(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,i={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};tt(t,156,sEt(i))}tt(t,144)}function uEt(t,e){e||(e=Ge(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return po("SheetJS",e),po(l5.version,e),po(l5.version,e),po("7262",e),e.length>e.l?e.slice(0,e.l):e}function hEt(t,e){e||(e=Ge(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function dEt(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,i=-1,s=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&i==-1?i=r:n[r].Hidden==1&&s==-1&&(s=r);s>i||(tt(t,135),tt(t,158,hEt(i)),tt(t,136))}}function fEt(t,e){var n=Al();return tt(n,131),tt(n,128,uEt()),tt(n,153,aEt(t.Workbook&&t.Workbook.WBProps||null)),dEt(n,t),cEt(n,t),tt(n,132),n.end()}function pEt(t,e,n){return(e.slice(-4)===".bin"?fEt:XEe)(t)}function mEt(t,e,n,r,i){return(e.slice(-4)===".bin"?Zbt:qEe)(t,n,r,i)}function gEt(t,e,n){return(e.slice(-4)===".bin"?Oxt:MEe)(t,n)}function yEt(t,e,n){return(e.slice(-4)===".bin"?axt:IEe)(t,n)}function vEt(t,e,n){return(e.slice(-4)===".bin"?Xxt:jEe)(t)}function _Et(t){return(t.slice(-4)===".bin"?Gxt:LEe)()}function xEt(t,e){var n=[];return t.Props&&n.push(g_t(t.Props,e)),t.Custprops&&n.push(y_t(t.Props,t.Custprops)),n.join("")}function wEt(){return""}function bEt(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(vt("NumberFormat",null,{"ss:Format":Wr(rs[r.numFmtId])}));var o={"ss:ID":"s"+(21+i)};n.push(vt("Style",s.join(""),o))}),vt("Styles",n.join(""))}function ZEe(t){return vt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+Gq(t.Ref,{r:0,c:0})})}function EEt(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||n.push(ZEe(i)))}return vt("Names",n.join(""))}function SEt(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],o=0;o<i.length;++o){var a=i[o];a.Sheet==n&&(a.Name.match(/^_xlfn\./)||s.push(ZEe(a)))}return s.join("")}function TEt(t,e,n,r){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(vt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(vt("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(vt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(vt("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(Lo("ProtectContents","True")),t["!protect"].objects&&i.push(Lo("ProtectObjects","True")),t["!protect"].scenarios&&i.push(Lo("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(Lo("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(Lo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&i.push("<"+o[1]+"/>")})),i.length==0?"":vt("WorksheetOptions",i.join(""),{xmlns:ac.x})}function kEt(t){return t.map(function(e){var n=Cvt(e.t||""),r=vt("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return vt("Comment",r,{"ss:Author":e.a})}).join("")}function AEt(t,e,n,r,i,s,o){if(!t||t.v==null&&t.f==null)return"";var a={};if(t.f&&(a["ss:Formula"]="="+Wr(Gq(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var l=fo(t.F.slice(e.length+1));a["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(t.l&&t.l.Target&&(a["ss:HRef"]=Wr(t.l.Target),t.l.Tooltip&&(a["x:HRefScreenTip"]=Wr(t.l.Tooltip))),n["!merges"])for(var c=n["!merges"],u=0;u!=c.length;++u)c[u].s.c!=o.c||c[u].s.r!=o.r||(c[u].e.c>c[u].s.c&&(a["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(a["ss:MergeDown"]=c[u].e.r-c[u].s.r));var h="",f="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":h="Number",f=String(t.v);break;case"b":h="Boolean",f=t.v?"1":"0";break;case"e":h="Error",f=iP[t.v];break;case"d":h="DateTime",f=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||rs[14]);break;case"s":h="String",f=Pvt(t.v||"");break}var g=g0(r.cellXfs,t,r);a["ss:StyleID"]="s"+(21+g),a["ss:Index"]=o.c+1;var y=t.v!=null?f:"",_=t.t=="z"?"":'<Data ss:Type="'+h+'">'+y+"</Data>";return(t.c||[]).length>0&&(_+=kEt(t.c)),vt("Cell",_,a)}function IEt(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=REe(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function PEt(t,e,n,r){if(!t["!ref"])return"";var i=yi(t["!ref"]),s=t["!merges"]||[],o=0,a=[];t["!cols"]&&t["!cols"].forEach(function(b,T){Vq(b);var A=!!b.width,I=HL(T,b),P={"ss:Index":T+1};A&&(P["ss:Width"]=v5(I.width)),b.hidden&&(P["ss:Hidden"]="1"),a.push(vt("Column",null,P))});for(var l=Array.isArray(t),c=i.s.r;c<=i.e.r;++c){for(var u=[IEt(c,(t["!rows"]||[])[c])],h=i.s.c;h<=i.e.c;++h){var f=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>h)&&!(s[o].s.r>c)&&!(s[o].e.c<h)&&!(s[o].e.r<c)){(s[o].s.c!=h||s[o].s.r!=c)&&(f=!0);break}if(!f){var g={r:c,c:h},y=qr(g),_=l?(t[c]||[])[h]:t[y];u.push(AEt(_,y,t,e,n,r,g))}}u.push("</Row>"),u.length>2&&a.push(u.join(""))}return a.join("")}function CEt(t,e,n){var r=[],i=n.SheetNames[t],s=n.Sheets[i],o=s?SEt(s,e,t,n):"";return o.length>0&&r.push("<Names>"+o+"</Names>"),o=s?PEt(s,e,t,n):"",o.length>0&&r.push("<Table>"+o+"</Table>"),r.push(TEt(s,e,t,n)),r.join("")}function REt(t,e){e||(e={}),t.SSF||(t.SSF=Ml(rs)),t.SSF&&(zL(),VL(t.SSF),e.revssf=GL(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],g0(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(xEt(t,e)),n.push(wEt()),n.push(""),n.push("");for(var r=0;r<t.SheetNames.length;++r)n.push(vt("Worksheet",CEt(r,e,t),{"ss:Name":Wr(t.SheetNames[r])}));return n[2]=bEt(t,e),n[3]=EEt(t),Os+vt("Workbook",n.join(""),{xmlns:ac.ss,"xmlns:o":ac.o,"xmlns:x":ac.x,"xmlns:ss":ac.ss,"xmlns:dt":ac.dt,"xmlns:html":ac.html})}var fF={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function MEt(t,e){var n=[],r=[],i=[],s=0,o,a=Boe(rae,"n"),l=Boe(iae,"n");if(t.Props)for(o=jo(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(a,o[s])?n:Object.prototype.hasOwnProperty.call(l,o[s])?r:i).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=jo(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(a,o[s])?n:Object.prototype.hasOwnProperty.call(l,o[s])?r:i).push([o[s],t.Custprops[o[s]]]);var c=[];for(s=0;s<i.length;++s)wEe.indexOf(i[s][0])>-1||vEe.indexOf(i[s][0])>-1||i[s][1]!=null&&c.push(i[s]);r.length&&Zr.utils.cfb_add(e,"/SummaryInformation",cae(r,fF.SI,l,iae)),(n.length||c.length)&&Zr.utils.cfb_add(e,"/DocumentSummaryInformation",cae(n,fF.DSI,a,rae,c.length?c:null,fF.UDI))}function NEt(t,e){var n=e||{},r=Zr.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return Zr.utils.cfb_add(r,i,JEe(t,n)),n.biff==8&&(t.Props||t.Custprops)&&MEt(t,r),n.biff==8&&t.vbaraw&&Zxt(r,Zr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var OEt={0:{f:j2t},1:{f:W2t},2:{f:hbt},3:{f:Q2t},4:{f:Y2t},5:{f:abt},6:{f:gbt},7:{f:rbt},8:{f:Ebt},9:{f:bbt},10:{f:xbt},11:{f:wbt},12:{f:q2t},13:{f:fbt},14:{f:tbt},15:{f:Z2t},16:{f:cbt},17:{f:vbt},18:{f:sbt},19:{f:Dq},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:lEt},40:{},42:{},43:{f:gxt},44:{f:pxt},45:{f:_xt},46:{f:wxt},47:{f:xxt},48:{},49:{f:qvt},50:{},51:{f:jxt},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:K_t},62:{f:mbt},63:{f:Uxt},64:{f:Fbt},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ud,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Lbt},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:U2t},148:{f:V2t,p:16},151:{f:Pbt},152:{},153:{f:oEt},154:{},155:{},156:{f:iEt},157:{},158:{},159:{T:1,f:ixt},160:{T:-1},161:{T:1,f:Pv},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Sbt},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Lxt},336:{T:-1},337:{f:Vxt,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Wz},357:{},358:{},359:{},360:{T:1},361:{},362:{f:G_t},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Cbt},427:{f:Rbt},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Nbt},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:G2t},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Abt},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Wz},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Kxt},633:{T:1},634:{T:-1},635:{T:1,f:Hxt},636:{T:-1},637:{f:Zvt},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Jbt},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Vbt},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function xt(t,e,n,r){var i=e;if(!isNaN(i)){var s=r||(n||[]).length||0,o=t.next(4);o.write_shift(2,i),o.write_shift(2,s),s>0&&Nq(n)&&t.push(n)}}function LEt(t,e,n,r){var i=(n||[]).length||0;if(i<=8224)return xt(t,e,n,i);var s=e;if(!isNaN(s)){for(var o=n.parts||[],a=0,l=0,c=0;c+(o[a]||8224)<=8224;)c+=o[a]||8224,a++;var u=t.next(4);for(u.write_shift(2,s),u.write_shift(2,c),t.push(n.slice(l,l+c)),l+=c;l<i;){for(u=t.next(4),u.write_shift(2,60),c=0;c+(o[a]||8224)<=8224;)c+=o[a]||8224,a++;u.write_shift(2,c),t.push(n.slice(l,l+c)),l+=c}}}function oP(t,e,n){return t||(t=Ge(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function DEt(t,e,n,r){var i=Ge(9);return oP(i,t,e),EEe(n,r||"b",i),i}function jEt(t,e,n){var r=Ge(8+2*n.length);return oP(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function $Et(t,e,n,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Rl(Ua(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?xt(t,2,J_t(n,r,i)):xt(t,3,Z_t(n,r,i));return;case"b":case"e":xt(t,5,DEt(n,r,e.v,e.t));return;case"s":case"str":xt(t,4,jEt(n,r,(e.v||"").slice(0,255)));return}xt(t,1,oP(null,n,r))}function FEt(t,e,n,r){var i=Array.isArray(e),s=yi(e["!ref"]||"A1"),o,a="",l=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=Ms(s)}for(var c=s.s.r;c<=s.e.r;++c){a=Do(c);for(var u=s.s.c;u<=s.e.c;++u){c===s.s.r&&(l[u]=_a(u)),o=l[u]+a;var h=i?(e[c]||[])[u]:e[o];h&&$Et(t,h,c,u)}}}function VEt(t,e){for(var n=e||{},r=Al(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==n.sheet&&(i=s);if(i==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return xt(r,n.biff==4?1033:n.biff==3?521:9,Fq(t,16,n)),FEt(r,t.Sheets[t.SheetNames[i]],i,n),xt(r,10),r.end()}function zEt(t,e,n){xt(t,49,O_t({sz:12,name:"Arial"},n))}function GEt(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&xt(t,1054,j_t(i,e[i],n))})}function UEt(t,e){var n=Ge(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),xt(t,2151,n),n=Ge(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),kEe(yi(e["!ref"]||"A1"),n),n.write_shift(4,4),xt(t,2152,n)}function BEt(t,e){for(var n=0;n<16;++n)xt(t,224,hae({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){xt(t,224,hae(r,0,e))})}function WEt(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];xt(t,440,W_t(r)),r[1].Tooltip&&xt(t,2048,H_t(r))}delete e["!links"]}function HEt(t,e){if(e){var n=0;e.forEach(function(r,i){++n<=256&&r&&xt(t,125,Y_t(HL(i,r),i))})}}function qEt(t,e,n,r,i){var s=16+g0(i.cellXfs,e,i);if(e.v==null&&!e.bf){xt(t,513,sv(n,r,s));return}if(e.bf)xt(t,6,y2t(e,n,r,i,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?Rl(Ua(e.v)):e.v;xt(t,515,z_t(n,r,o,s));break;case"b":case"e":xt(t,517,V_t(n,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var a=Bq(i.Strings,e.v,i.revStrings);xt(t,253,L_t(n,r,a,s))}else xt(t,516,D_t(n,r,(e.v||"").slice(0,255),s,i));break;default:xt(t,513,sv(n,r,s))}}function KEt(t,e,n){var r=Al(),i=n.SheetNames[t],s=n.Sheets[i]||{},o=(n||{}).Workbook||{},a=(o.Sheets||[])[t]||{},l=Array.isArray(s),c=e.biff==8,u,h="",f=[],g=yi(s["!ref"]||"A1"),y=c?65536:16384;if(g.e.c>255||g.e.r>=y){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,y-1)}xt(r,2057,Fq(n,16,e)),xt(r,13,Xc(1)),xt(r,12,Xc(100)),xt(r,15,Ma(!0)),xt(r,17,Ma(!1)),xt(r,16,iv(.001)),xt(r,95,Ma(!0)),xt(r,42,Ma(!1)),xt(r,43,Ma(!1)),xt(r,130,Xc(1)),xt(r,128,F_t()),xt(r,131,Ma(!1)),xt(r,132,Ma(!1)),c&&HEt(r,s["!cols"]),xt(r,512,$_t(g,e)),c&&(s["!links"]=[]);for(var _=g.s.r;_<=g.e.r;++_){h=Do(_);for(var b=g.s.c;b<=g.e.c;++b){_===g.s.r&&(f[b]=_a(b)),u=f[b]+h;var T=l?(s[_]||[])[b]:s[u];T&&(qEt(r,T,_,b,e),c&&T.l&&s["!links"].push([u,T.l]))}}var A=a.CodeName||a.name||i;return c&&xt(r,574,N_t((o.Views||[])[0])),c&&(s["!merges"]||[]).length&&xt(r,229,B_t(s["!merges"])),c&&WEt(r,s),xt(r,442,TEe(A)),c&&UEt(r,s),xt(r,10),r.end()}function YEt(t,e,n){var r=Al(),i=(t||{}).Workbook||{},s=i.Sheets||[],o=i.WBProps||{},a=n.biff==8,l=n.biff==5;if(xt(r,2057,Fq(t,5,n)),n.bookType=="xla"&&xt(r,135),xt(r,225,a?Xc(1200):null),xt(r,193,x_t(2)),l&&xt(r,191),l&&xt(r,192),xt(r,226),xt(r,92,P_t("SheetJS",n)),xt(r,66,Xc(a?1200:1252)),a&&xt(r,353,Xc(0)),a&&xt(r,448),xt(r,317,X_t(t.SheetNames.length)),a&&t.vbaraw&&xt(r,211),a&&t.vbaraw){var c=o.CodeName||"ThisWorkbook";xt(r,442,TEe(c))}xt(r,156,Xc(17)),xt(r,25,Ma(!1)),xt(r,18,Ma(!1)),xt(r,19,Xc(0)),a&&xt(r,431,Ma(!1)),a&&xt(r,444,Xc(0)),xt(r,61,M_t()),xt(r,64,Ma(!1)),xt(r,141,Xc(0)),xt(r,34,Ma(eEt(t)=="true")),xt(r,14,Ma(!0)),a&&xt(r,439,Ma(!1)),xt(r,218,Xc(0)),zEt(r,t,n),GEt(r,t.SSF,n),BEt(r,n),a&&xt(r,352,Ma(!1));var u=r.end(),h=Al();a&&xt(h,140,q_t()),a&&n.Strings&&LEt(h,252,R_t(n.Strings)),xt(h,10);var f=h.end(),g=Al(),y=0,_=0;for(_=0;_<t.SheetNames.length;++_)y+=(a?12:11)+(a?2:1)*t.SheetNames[_].length;var b=u.length+y+f.length;for(_=0;_<t.SheetNames.length;++_){var T=s[_]||{};xt(g,133,C_t({pos:b,hs:T.Hidden||0,dt:0,name:t.SheetNames[_]},n)),b+=e[_].length}var A=g.end();if(y!=A.length)throw new Error("BS8 "+y+" != "+A.length);var I=[];return u.length&&I.push(u),A.length&&I.push(A),f.length&&I.push(f),Oo(I)}function XEt(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=Ml(rs)),t&&t.SSF&&(zL(),VL(t.SSF),n.revssf=GL(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,Wq(n),n.cellXfs=[],g0(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)r[r.length]=KEt(i,n,t);return r.unshift(YEt(t,r,n)),Oo(r)}function JEe(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var i=Sc(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return XEt(t,e);case 4:case 3:case 2:return VEt(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function ZEt(t,e,n,r){for(var i=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var a=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>n||i[c].s.c>o)&&!(i[c].e.r<n||i[c].e.c<o)){if(i[c].s.r<n||i[c].s.c<o){a=-1;break}a=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(a<0)){var u=qr({r:n,c:o}),h=r.dense?(t[n]||[])[o]:t[u],f=h&&h.v!=null&&(h.h||Ivt(h.w||(kp(h),h.w)||""))||"",g={};a>1&&(g.rowspan=a),l>1&&(g.colspan=l),r.editable?f='<span contenteditable="true">'+f+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+h.l.Target+'">'+f+"</a>")),g.id=(r.id||"sjs")+"-"+u,s.push(vt("td",f,g))}}var y="<tr>";return y+s.join("")+"</tr>"}var JEt='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',QEt="</body></html>";function eSt(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function QEe(t,e){var n=e||{},r=n.header!=null?n.header:JEt,i=n.footer!=null?n.footer:QEt,s=[r],o=Sc(t["!ref"]);n.dense=Array.isArray(t),s.push(eSt(t,o,n));for(var a=o.s.r;a<=o.e.r;++a)s.push(ZEt(t,o,a,n));return s.push("</table>"+i),s.join("")}function eSe(t,e,n){var r=n||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var o=typeof r.origin=="string"?fo(r.origin):r.origin;i=o.r,s=o.c}var a=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,a.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(t["!ref"]){var u=Sc(t["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),i==-1&&(c.e.r=i=u.e.r+1)}var h=[],f=0,g=t["!rows"]||(t["!rows"]=[]),y=0,_=0,b=0,T=0,A=0,I=0;for(t["!cols"]||(t["!cols"]=[]);y<a.length&&_<l;++y){var P=a[y];if(vae(P)){if(r.display)continue;g[_]={hidden:!0}}var N=P.children;for(b=T=0;b<N.length;++b){var L=N[b];if(!(r.display&&vae(L))){var C=L.hasAttribute("data-v")?L.getAttribute("data-v"):L.hasAttribute("v")?L.getAttribute("v"):Mvt(L.innerHTML),M=L.getAttribute("data-z")||L.getAttribute("z");for(f=0;f<h.length;++f){var O=h[f];O.s.c==T+s&&O.s.r<_+i&&_+i<=O.e.r&&(T=O.e.c+1-s,f=-1)}I=+L.getAttribute("colspan")||1,((A=+L.getAttribute("rowspan")||1)>1||I>1)&&h.push({s:{r:_+i,c:T+s},e:{r:_+i+(A||1)-1,c:T+s+(I||1)-1}});var D={t:"s",v:C},V=L.getAttribute("data-t")||L.getAttribute("t")||"";C!=null&&(C.length==0?D.t=V||"z":r.raw||C.trim().length==0||V=="s"||(C==="TRUE"?D={t:"b",v:!0}:C==="FALSE"?D={t:"b",v:!1}:isNaN(dp(C))?isNaN(CA(C).getDate())||(D={t:"d",v:Ua(C)},r.cellDates||(D={t:"n",v:Rl(D.v)}),D.z=r.dateNF||rs[14]):D={t:"n",v:dp(C)})),D.z===void 0&&M!=null&&(D.z=M);var U="",G=L.getElementsByTagName("A");if(G&&G.length)for(var de=0;de<G.length&&!(G[de].hasAttribute("href")&&(U=G[de].getAttribute("href"),U.charAt(0)!="#"));++de);U&&U.charAt(0)!="#"&&(D.l={Target:U}),r.dense?(t[_+i]||(t[_+i]=[]),t[_+i][T+s]=D):t[qr({c:T+s,r:_+i})]=D,c.e.c<T+s&&(c.e.c=T+s),T+=I}}++_}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),c.e.r=Math.max(c.e.r,_-1+i),t["!ref"]=Ms(c),_>=l&&(t["!fullref"]=Ms((c.e.r=a.length-y+_-1+i,c))),t}function tSe(t,e){var n=e||{},r=n.dense?[]:{};return eSe(r,t,e)}function tSt(t,e){return Tv(tSe(t,e),e)}function vae(t){var e="",n=nSt(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function nSt(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var rSt=(function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+MA({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Os+e}})(),_ae=(function(){var t=function(s){return Wr(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,r=function(s,o,a){var l=[];l.push('      <table:table table:name="'+Wr(o.SheetNames[a])+`" table:style-name="ta1">
`);var c=0,u=0,h=Sc(s["!ref"]||"A1"),f=s["!merges"]||[],g=0,y=Array.isArray(s);if(s["!cols"])for(u=0;u<=h.e.c;++u)l.push("        <table:table-column"+(s["!cols"][u]?' table:style-name="co'+s["!cols"][u].ods+'"':"")+`></table:table-column>
`);var _="",b=s["!rows"]||[];for(c=0;c<h.s.r;++c)_=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+_+`></table:table-row>
`);for(;c<=h.e.r;++c){for(_=b[c]?' table:style-name="ro'+b[c].ods+'"':"",l.push("        <table:table-row"+_+`>
`),u=0;u<h.s.c;++u)l.push(e);for(;u<=h.e.c;++u){var T=!1,A={},I="";for(g=0;g!=f.length;++g)if(!(f[g].s.c>u)&&!(f[g].s.r>c)&&!(f[g].e.c<u)&&!(f[g].e.r<c)){(f[g].s.c!=u||f[g].s.r!=c)&&(T=!0),A["table:number-columns-spanned"]=f[g].e.c-f[g].s.c+1,A["table:number-rows-spanned"]=f[g].e.r-f[g].s.r+1;break}if(T){l.push(n);continue}var P=qr({r:c,c:u}),N=y?(s[c]||[])[u]:s[P];if(N&&N.f&&(A["table:formula"]=Wr(E2t(N.f)),N.F&&N.F.slice(0,P.length)==P)){var L=Sc(N.F);A["table:number-matrix-columns-spanned"]=L.e.c-L.s.c+1,A["table:number-matrix-rows-spanned"]=L.e.r-L.s.r+1}if(!N){l.push(e);continue}switch(N.t){case"b":I=N.v?"TRUE":"FALSE",A["office:value-type"]="boolean",A["office:boolean-value"]=N.v?"true":"false";break;case"n":I=N.w||String(N.v||0),A["office:value-type"]="float",A["office:value"]=N.v||0;break;case"s":case"str":I=N.v==null?"":N.v,A["office:value-type"]="string";break;case"d":I=N.w||Ua(N.v).toISOString(),A["office:value-type"]="date",A["office:date-value"]=Ua(N.v).toISOString(),A["table:style-name"]="ce1";break;default:l.push(e);continue}var C=t(I);if(N.l&&N.l.Target){var M=N.l.Target;M=M.charAt(0)=="#"?"#"+S2t(M.slice(1)):M,M.charAt(0)!="#"&&!M.match(/^\w+:/)&&(M="../"+M),C=vt("text:a",C,{"xlink:href":M.replace(/&/g,"&amp;")})}l.push("          "+vt("table:table-cell",vt("text:p",C,{}),A)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var a=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var u=0;u<c["!cols"].length;++u)if(c["!cols"][u]){var h=c["!cols"][u];if(h.width==null&&h.wpx==null&&h.wch==null)continue;Vq(h),h.ods=a;var f=c["!cols"][u].wpx+"px";s.push('  <style:style style:name="co'+a+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+f+`"/>
`),s.push(`  </style:style>
`),++a}}});var l=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var u=0;u<c["!rows"].length;++u)if(c["!rows"][u]){c["!rows"][u].ods=l;var h=c["!rows"][u].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,a){var l=[Os],c=MA({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=MA({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});a.bookType=="fods"?(l.push("<office:document"+c+u+`>
`),l.push(gEe().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),i(l,o),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=o.SheetNames.length;++h)l.push(r(o.Sheets[o.SheetNames[h]],o,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),a.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function nSe(t,e){if(e.bookType=="fods")return _ae(t,e);var n=Pq(),r="",i=[],s=[];return r="mimetype",Un(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",Un(n,r,_ae(t,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",Un(n,r,rSt(t,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",Un(n,r,Os+gEe()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",Un(n,r,m_t(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",Un(n,r,f_t(i)),n}function w5(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function iSt(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):ih(RA(t))}function sSt(t,e){e:for(var n=0;n<=t.length-e.length;++n){for(var r=0;r<e.length;++r)if(t[n+r]!=e[r])continue e;return!0}return!1}function i0(t){var e=t.reduce(function(i,s){return i+s.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(i){n.set(i,r),r+=i.length}),n}function oSt(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,i=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=n>=0?0:128}function NA(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function zr(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e.slice(0,n)}function Cw(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function Vs(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],i=NA(t,n),s=i&7;i=Math.floor(i/8);var o=0,a;if(i==0)break;switch(s){case 0:{for(var l=n[0];t[n[0]++]>=128;);a=t.slice(l,n[0])}break;case 5:o=4,a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=NA(t,n),a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var c={data:a,type:s};e[i]==null?e[i]=[c]:e[i].push(c)}return e}function To(t){var e=[];return t.forEach(function(n,r){n.forEach(function(i){i.data&&(e.push(zr(r*8+i.type)),i.type==2&&e.push(zr(i.data.length)),e.push(i.data))})}),i0(e)}function zu(t){for(var e,n=[],r=[0];r[0]<t.length;){var i=NA(t,r),s=Vs(t.slice(r[0],r[0]+i));r[0]+=i;var o={id:Cw(s[1][0].data),messages:[]};s[2].forEach(function(a){var l=Vs(a.data),c=Cw(l[3][0].data);o.messages.push({meta:l,data:t.slice(r[0],r[0]+c)}),r[0]+=c}),(e=s[3])!=null&&e[0]&&(o.merge=Cw(s[3][0].data)>>>0>0),n.push(o)}return n}function F_(t){var e=[];return t.forEach(function(n){var r=[];r[1]=[{data:zr(n.id),type:0}],r[2]=[],n.merge!=null&&(r[3]=[{data:zr(+!!n.merge),type:0}]);var i=[];n.messages.forEach(function(o){i.push(o.data),o.meta[3]=[{type:0,data:zr(o.data.length)}],r[2].push({data:To(o.meta),type:2})});var s=To(r);e.push(zr(s.length)),e.push(s),i.forEach(function(o){return e.push(o)})}),i0(e)}function aSt(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=NA(e,n),i=[];n[0]<e.length;){var s=e[n[0]]&3;if(s==0){var o=e[n[0]++]>>2;if(o<60)++o;else{var a=o-59;o=e[n[0]],a>1&&(o|=e[n[0]+1]<<8),a>2&&(o|=e[n[0]+2]<<16),a>3&&(o|=e[n[0]+3]<<24),o>>>=0,o++,n[0]+=a}i.push(e.slice(n[0],n[0]+o)),n[0]+=o;continue}else{var l=0,c=0;if(s==1?(c=(e[n[0]]>>2&7)+4,l=(e[n[0]++]&224)<<3,l|=e[n[0]++]):(c=(e[n[0]++]>>2)+1,s==2?(l=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(l=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),i=[i0(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var u=i0(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function Gu(t){for(var e=[],n=0;n<t.length;){var r=t[n++],i=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(aSt(r,t.slice(n,n+i))),n+=i}if(n!==t.length)throw new Error("data is not a valid framed stream!");return i0(e)}function V_(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),i=new Uint8Array(4);e.push(i);var s=zr(r),o=s.length;e.push(s),r<=60?(o++,e.push(new Uint8Array([r-1<<2]))):r<=256?(o+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(o+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(o+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(o+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t.slice(n,n+r)),o+=r,i[0]=0,i[1]=o&255,i[2]=o>>8&255,i[3]=o>>16&255,n+=r}return i0(e)}function pF(t,e){var n=new Uint8Array(32),r=w5(n),i=12,s=0;switch(n[0]=5,t.t){case"n":n[1]=2,oSt(n,i,t.v),s|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[1]=3,r.setUint32(i,e.indexOf(t.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,s,!0),n.slice(0,i)}function mF(t,e){var n=new Uint8Array(32),r=w5(n),i=12,s=0;switch(n[0]=3,t.t){case"n":n[2]=2,r.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":n[2]=6,r.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[2]=3,r.setUint32(i,e.indexOf(t.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,s,!0),n.slice(0,i)}function wm(t){var e=Vs(t);return NA(e[1][0].data)}function lSt(t,e,n){var r,i,s,o;if(!((r=t[6])!=null&&r[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var a=((o=(s=t[8])==null?void 0:s[0])==null?void 0:o.data)&&Cw(t[8][0].data)>0||!1;if(a)throw"Math only works with normal offsets";for(var l=0,c=w5(t[7][0].data),u=0,h=[],f=w5(t[4][0].data),g=0,y=[],_=0;_<e.length;++_){if(e[_]==null){c.setUint16(_*2,65535,!0),f.setUint16(_*2,65535);continue}c.setUint16(_*2,u,!0),f.setUint16(_*2,g,!0);var b,T;switch(typeof e[_]){case"string":b=pF({t:"s",v:e[_]},n),T=mF({t:"s",v:e[_]},n);break;case"number":b=pF({t:"n",v:e[_]},n),T=mF({t:"n",v:e[_]},n);break;case"boolean":b=pF({t:"b",v:e[_]},n),T=mF({t:"b",v:e[_]},n);break;default:throw new Error("Unsupported value "+e[_])}h.push(b),u+=b.length,y.push(T),g+=T.length,++l}for(t[2][0].data=zr(l);_<t[7][0].data.length/2;++_)c.setUint16(_*2,65535,!0),f.setUint16(_*2,65535,!0);return t[6][0].data=i0(h),t[3][0].data=i0(y),l}function cSt(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Sc(n["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Ms(r)));var s=b5(n,{range:r,header:1}),o=["~Sh33tJ5~"];s.forEach(function(ne){return ne.forEach(function(ie){typeof ie=="string"&&o.push(ie)})});var a={},l=[],c=Zr.read(e.numbers,{type:"base64"});c.FileIndex.map(function(ne,ie){return[ne,c.FullPaths[ie]]}).forEach(function(ne){var ie=ne[0],le=ne[1];if(ie.type==2&&ie.name.match(/\.iwa/)){var ve=ie.content,qe=Gu(ve),Ke=zu(qe);Ke.forEach(function(Se){l.push(Se.id),a[Se.id]={deps:[],location:le,type:Cw(Se.messages[0].meta[1][0].data)}})}}),l.sort(function(ne,ie){return ne-ie});var u=l.filter(function(ne){return ne>1}).map(function(ne){return[ne,zr(ne)]});c.FileIndex.map(function(ne,ie){return[ne,c.FullPaths[ie]]}).forEach(function(ne){var ie=ne[0];if(ne[1],!!ie.name.match(/\.iwa/)){var le=zu(Gu(ie.content));le.forEach(function(ve){ve.messages.forEach(function(qe){u.forEach(function(Ke){ve.messages.some(function(Se){return Cw(Se.meta[1][0].data)!=11006&&sSt(Se.data,Ke[1])})&&a[Ke[0]].deps.push(ve.id)})})})}});for(var h=Zr.find(c,a[1].location),f=zu(Gu(h.content)),g,y=0;y<f.length;++y){var _=f[y];_.id==1&&(g=_)}var b=wm(Vs(g.messages[0].data)[1][0].data);for(h=Zr.find(c,a[b].location),f=zu(Gu(h.content)),y=0;y<f.length;++y)_=f[y],_.id==b&&(g=_);for(b=wm(Vs(g.messages[0].data)[2][0].data),h=Zr.find(c,a[b].location),f=zu(Gu(h.content)),y=0;y<f.length;++y)_=f[y],_.id==b&&(g=_);for(b=wm(Vs(g.messages[0].data)[2][0].data),h=Zr.find(c,a[b].location),f=zu(Gu(h.content)),y=0;y<f.length;++y)_=f[y],_.id==b&&(g=_);var T=Vs(g.messages[0].data);{T[6][0].data=zr(r.e.r+1),T[7][0].data=zr(r.e.c+1);var A=wm(T[46][0].data),I=Zr.find(c,a[A].location),P=zu(Gu(I.content));{for(var N=0;N<P.length&&P[N].id!=A;++N);if(P[N].id!=A)throw"Bad ColumnRowUIDMapArchive";var L=Vs(P[N].messages[0].data);L[1]=[],L[2]=[],L[3]=[];for(var C=0;C<=r.e.c;++C){var M=[];M[1]=M[2]=[{type:0,data:zr(C+420690)}],L[1].push({type:2,data:To(M)}),L[2].push({type:0,data:zr(C)}),L[3].push({type:0,data:zr(C)})}L[4]=[],L[5]=[],L[6]=[];for(var O=0;O<=r.e.r;++O)M=[],M[1]=M[2]=[{type:0,data:zr(O+726270)}],L[4].push({type:2,data:To(M)}),L[5].push({type:0,data:zr(O)}),L[6].push({type:0,data:zr(O)});P[N].messages[0].data=To(L)}I.content=V_(F_(P)),I.size=I.content.length,delete T[46];var D=Vs(T[4][0].data);{D[7][0].data=zr(r.e.r+1);var V=Vs(D[1][0].data),U=wm(V[2][0].data);I=Zr.find(c,a[U].location),P=zu(Gu(I.content));{if(P[0].id!=U)throw"Bad HeaderStorageBucket";var G=Vs(P[0].messages[0].data);for(O=0;O<s.length;++O){var de=Vs(G[2][0].data);de[1][0].data=zr(O),de[4][0].data=zr(s[O].length),G[2][O]={type:G[2][0].type,data:To(de)}}P[0].messages[0].data=To(G)}I.content=V_(F_(P)),I.size=I.content.length;var ke=wm(D[2][0].data);I=Zr.find(c,a[ke].location),P=zu(Gu(I.content));{if(P[0].id!=ke)throw"Bad HeaderStorageBucket";for(G=Vs(P[0].messages[0].data),C=0;C<=r.e.c;++C)de=Vs(G[2][0].data),de[1][0].data=zr(C),de[4][0].data=zr(r.e.r+1),G[2][C]={type:G[2][0].type,data:To(de)};P[0].messages[0].data=To(G)}I.content=V_(F_(P)),I.size=I.content.length;var Ue=wm(D[4][0].data);(function(){for(var ne=Zr.find(c,a[Ue].location),ie=zu(Gu(ne.content)),le,ve=0;ve<ie.length;++ve){var qe=ie[ve];qe.id==Ue&&(le=qe)}var Ke=Vs(le.messages[0].data);{Ke[3]=[];var Se=[];o.forEach(function(Ye,on){Se[1]=[{type:0,data:zr(on)}],Se[2]=[{type:0,data:zr(1)}],Se[3]=[{type:2,data:iSt(Ye)}],Ke[3].push({type:2,data:To(Se)})})}le.messages[0].data=To(Ke);var we=F_(ie),Dt=V_(we);ne.content=Dt,ne.size=ne.content.length})();var Ne=Vs(D[3][0].data);{var fe=Ne[1][0];delete Ne[2];var De=Vs(fe.data);{var Ce=wm(De[2][0].data);(function(){for(var ne=Zr.find(c,a[Ce].location),ie=zu(Gu(ne.content)),le,ve=0;ve<ie.length;++ve){var qe=ie[ve];qe.id==Ce&&(le=qe)}var Ke=Vs(le.messages[0].data);{delete Ke[6],delete Ne[7];var Se=new Uint8Array(Ke[5][0].data);Ke[5]=[];for(var we=0,Dt=0;Dt<=r.e.r;++Dt){var Ye=Vs(Se);we+=lSt(Ye,s[Dt],o),Ye[1][0].data=zr(Dt),Ke[5].push({data:To(Ye),type:2})}Ke[1]=[{type:0,data:zr(r.e.c+1)}],Ke[2]=[{type:0,data:zr(r.e.r+1)}],Ke[3]=[{type:0,data:zr(we)}],Ke[4]=[{type:0,data:zr(r.e.r+1)}]}le.messages[0].data=To(Ke);var on=F_(ie),jt=V_(on);ne.content=jt,ne.size=ne.content.length})()}fe.data=To(De)}D[3][0].data=To(Ne)}T[4][0].data=To(D)}g.messages[0].data=To(T);var Q=F_(f),W=V_(Q);return h.content=W,h.size=h.content.length,c}function uSt(t){return function(n){for(var r=0;r!=t.length;++r){var i=t[r];n[i[0]]===void 0&&(n[i[0]]=i[1]),i[2]==="n"&&(n[i[0]]=Number(n[i[0]]))}}}function Wq(t){uSt([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function hSt(t,e){return e.bookType=="ods"?nSe(t,e):e.bookType=="numbers"?cSt(t,e):e.bookType=="xlsb"?dSt(t,e):fSt(t,e)}function dSt(t,e){Kx=1024,t&&!t.SSF&&(t.SSF=Ml(rs)),t&&t.SSF&&(zL(),VL(t.SSF),e.revssf=GL(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,ak?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n=e.bookType=="xlsb"?"bin":"xml",r=$Ee.indexOf(e.bookType)>-1,i=fEe();Wq(e=e||{});var s=Pq(),o="",a=0;if(e.cellXfs=[],g0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Un(s,o,yEe(t.Props,e)),i.coreprops.push(o),Gr(e.rels,2,o,wr.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,Un(s,o,_Ee(t.Props)),i.extprops.push(o),Gr(e.rels,3,o,wr.EXT_PROPS),t.Custprops!==t.Props&&jo(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Un(s,o,xEe(t.Custprops)),i.custprops.push(o),Gr(e.rels,4,o,wr.CUST_PROPS)),a=1;a<=t.SheetNames.length;++a){var u={"!id":{}},h=t.Sheets[t.SheetNames[a-1]],f=(h||{})["!type"]||"sheet";switch(f){case"chart":default:o="xl/worksheets/sheet"+a+"."+n,Un(s,o,mEt(a-1,o,e,t,u)),i.sheets.push(o),Gr(e.wbrels,-1,"worksheets/sheet"+a+"."+n,wr.WS[0])}if(h){var g=h["!comments"],y=!1,_="";g&&g.length>0&&(_="xl/comments"+a+"."+n,Un(s,_,vEt(g,_)),i.comments.push(_),Gr(u,-1,"../comments"+a+"."+n,wr.CMNT),y=!0),h["!legacy"]&&y&&Un(s,"xl/drawings/vmlDrawing"+a+".vml",DEe(a,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&Un(s,mEe(o),Iw(u))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,Un(s,o,yEt(e.Strings,o,e)),i.strs.push(o),Gr(e.wbrels,-1,"sharedStrings."+n,wr.SST)),o="xl/workbook."+n,Un(s,o,pEt(t,o)),i.workbooks.push(o),Gr(e.rels,1,o,wr.WB),o="xl/theme/theme1.xml",Un(s,o,OEe(t.Themes,e)),i.themes.push(o),Gr(e.wbrels,-1,"theme/theme1.xml",wr.THEME),o="xl/styles."+n,Un(s,o,gEt(t,o,e)),i.styles.push(o),Gr(e.wbrels,-1,"styles."+n,wr.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",Un(s,o,t.vbaraw),i.vba.push(o),Gr(e.wbrels,-1,"vbaProject.bin",wr.VBA)),o="xl/metadata."+n,Un(s,o,_Et(o)),i.metadata.push(o),Gr(e.wbrels,-1,"metadata."+n,wr.XLMETA),Un(s,"[Content_Types].xml",pEe(i,e)),Un(s,"_rels/.rels",Iw(e.rels)),Un(s,"xl/_rels/workbook."+n+".rels",Iw(e.wbrels)),delete e.revssf,delete e.ssf,s}function fSt(t,e){Kx=1024,t&&!t.SSF&&(t.SSF=Ml(rs)),t&&t.SSF&&(zL(),VL(t.SSF),e.revssf=GL(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,ak?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=$Ee.indexOf(e.bookType)>-1,i=fEe();Wq(e=e||{});var s=Pq(),o="",a=0;if(e.cellXfs=[],g0(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",Un(s,o,yEe(t.Props,e)),i.coreprops.push(o),Gr(e.rels,2,o,wr.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,Un(s,o,_Ee(t.Props)),i.extprops.push(o),Gr(e.rels,3,o,wr.EXT_PROPS),t.Custprops!==t.Props&&jo(t.Custprops||{}).length>0&&(o="docProps/custom.xml",Un(s,o,xEe(t.Custprops)),i.custprops.push(o),Gr(e.rels,4,o,wr.CUST_PROPS));var u=["SheetJ5"];for(e.tcid=0,a=1;a<=t.SheetNames.length;++a){var h={"!id":{}},f=t.Sheets[t.SheetNames[a-1]],g=(f||{})["!type"]||"sheet";switch(g){case"chart":default:o="xl/worksheets/sheet"+a+"."+n,Un(s,o,qEe(a-1,e,t,h)),i.sheets.push(o),Gr(e.wbrels,-1,"worksheets/sheet"+a+"."+n,wr.WS[0])}if(f){var y=f["!comments"],_=!1,b="";if(y&&y.length>0){var T=!1;y.forEach(function(A){A[1].forEach(function(I){I.T==!0&&(T=!0)})}),T&&(b="xl/threadedComments/threadedComment"+a+"."+n,Un(s,b,Bxt(y,u,e)),i.threadedcomments.push(b),Gr(h,-1,"../threadedComments/threadedComment"+a+"."+n,wr.TCMNT)),b="xl/comments"+a+"."+n,Un(s,b,jEe(y)),i.comments.push(b),Gr(h,-1,"../comments"+a+"."+n,wr.CMNT),_=!0}f["!legacy"]&&_&&Un(s,"xl/drawings/vmlDrawing"+a+".vml",DEe(a,f["!comments"])),delete f["!comments"],delete f["!legacy"]}h["!id"].rId1&&Un(s,mEe(o),Iw(h))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,Un(s,o,IEe(e.Strings,e)),i.strs.push(o),Gr(e.wbrels,-1,"sharedStrings."+n,wr.SST)),o="xl/workbook."+n,Un(s,o,XEe(t)),i.workbooks.push(o),Gr(e.rels,1,o,wr.WB),o="xl/theme/theme1.xml",Un(s,o,OEe(t.Themes,e)),i.themes.push(o),Gr(e.wbrels,-1,"theme/theme1.xml",wr.THEME),o="xl/styles."+n,Un(s,o,MEe(t,e)),i.styles.push(o),Gr(e.wbrels,-1,"styles."+n,wr.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",Un(s,o,t.vbaraw),i.vba.push(o),Gr(e.wbrels,-1,"vbaProject.bin",wr.VBA)),o="xl/metadata."+n,Un(s,o,LEe()),i.metadata.push(o),Gr(e.wbrels,-1,"metadata."+n,wr.XLMETA),u.length>1&&(o="xl/persons/person.xml",Un(s,o,Wxt(u)),i.people.push(o),Gr(e.wbrels,-1,"persons/person.xml",wr.PEOPLE)),Un(s,"[Content_Types].xml",pEe(i,e)),Un(s,"_rels/.rels",Iw(e.rels)),Un(s,"xl/_rels/workbook."+n+".rels",Iw(e.wbrels)),delete e.revssf,delete e.ssf,s}function pSt(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=Tp(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function rSe(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return nP(e.file,Zr.write(t,{type:Ar?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Zr.write(t,e)}function mSt(t,e){var n=Ml(e||{}),r=hSt(t,n);return gSt(r,n)}function gSt(t,e){var n={},r=Ar?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?Zr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(FL(i))}return e.password&&typeof encrypt_agile<"u"?rSe(encrypt_agile(i,e.password),e):e.type==="file"?nP(e.file,i):e.type=="string"?rk(i):i}function ySt(t,e){var n=e||{},r=NEt(t,n);return rSe(r,n)}function id(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return PA(RA(r));case"binary":return RA(r);case"string":return t;case"file":return nP(e.file,r,"utf8");case"buffer":return Ar?Op(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):id(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function vSt(t,e){switch(e.type){case"base64":return PA(t);case"binary":return t;case"string":return t;case"file":return nP(e.file,t,"binary");case"buffer":return Ar?Op(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function $R(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?PA(n):e.type=="string"?rk(n):n;case"file":return nP(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function iSe(t,e){H1t(),rEt(t);var n=Ml(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=iSe(t,n);return n.type="array",FL(r)}var i=0;if(n.sheet&&(typeof n.sheet=="number"?i=n.sheet:i=t.SheetNames.indexOf(n.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return id(REt(t,n),n);case"slk":case"sylk":return id(ext.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"htm":case"html":return id(QEe(t.Sheets[t.SheetNames[i]],n),n);case"txt":return vSt(sSe(t.Sheets[t.SheetNames[i]],n),n);case"csv":return id(Hq(t.Sheets[t.SheetNames[i]],n),n,"\uFEFF");case"dif":return id(txt.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"dbf":return $R(Q_t.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"prn":return id(nxt.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"rtf":return id(cxt.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"eth":return id(AEe.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"fods":return id(nSe(t,n),n);case"wk1":return $R(dae.sheet_to_wk1(t.Sheets[t.SheetNames[i]],n),n);case"wk3":return $R(dae.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),$R(JEe(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),ySt(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return mSt(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function _St(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function xSt(t,e,n){var r={};return r.type="file",r.file=e,_St(r),iSe(t,r)}function wSt(t,e,n,r,i,s,o,a){var l=Do(n),c=a.defval,u=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),h=!0,f=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:n,enumerable:!1})}catch{f.__rowNum__=n}else f.__rowNum__=n;if(!o||t[n])for(var g=e.s.c;g<=e.e.c;++g){var y=o?t[n][g]:t[r[g]+l];if(y===void 0||y.t===void 0){if(c===void 0)continue;s[g]!=null&&(f[s[g]]=c);continue}var _=y.v;switch(y.t){case"z":if(_==null)break;continue;case"e":_=_==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(s[g]!=null){if(_==null)if(y.t=="e"&&_===null)f[s[g]]=null;else if(c!==void 0)f[s[g]]=c;else if(u&&_===null)f[s[g]]=null;else continue;else f[s[g]]=u&&(y.t!=="n"||y.t==="n"&&a.rawNumbers!==!1)?_:kp(y,_,a);_!=null&&(h=!1)}}return{row:f,isempty:h}}function b5(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,i=1,s=[],o=0,a="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:t["!ref"];switch(c.header===1?r=1:c.header==="A"?r=2:Array.isArray(c.header)?r=3:c.header==null&&(r=0),typeof u){case"string":l=yi(u);break;case"number":l=yi(t["!ref"]),l.s.r=u;break;default:l=u}r>0&&(i=0);var h=Do(l.s.r),f=[],g=[],y=0,_=0,b=Array.isArray(t),T=l.s.r,A=0,I={};b&&!t[T]&&(t[T]=[]);var P=c.skipHidden&&t["!cols"]||[],N=c.skipHidden&&t["!rows"]||[];for(A=l.s.c;A<=l.e.c;++A)if(!(P[A]||{}).hidden)switch(f[A]=_a(A),n=b?t[T][A]:t[f[A]+h],r){case 1:s[A]=A-l.s.c;break;case 2:s[A]=f[A];break;case 3:s[A]=c.header[A-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),a=o=kp(n,null,c),_=I[o]||0,!_)I[o]=1;else{do a=o+"_"+_++;while(I[a]);I[o]=_,I[a]=1}s[A]=a}for(T=l.s.r+i;T<=l.e.r;++T)if(!(N[T]||{}).hidden){var L=wSt(t,l,T,f,r,s,b,c);(L.isempty===!1||(r===1?c.blankrows!==!1:c.blankrows))&&(g[y++]=L.row)}return g.length=y,g}var xae=/"/g;function bSt(t,e,n,r,i,s,o,a){for(var l=!0,c=[],u="",h=Do(n),f=e.s.c;f<=e.e.c;++f)if(r[f]){var g=a.dense?(t[n]||[])[f]:t[r[f]+h];if(g==null)u="";else if(g.v!=null){l=!1,u=""+(a.rawNumbers&&g.t=="n"?g.v:kp(g,null,a));for(var y=0,_=0;y!==u.length;++y)if((_=u.charCodeAt(y))===i||_===s||_===34||a.forceQuotes){u='"'+u.replace(xae,'""')+'"';break}u=="ID"&&(u='"ID"')}else g.f!=null&&!g.F?(l=!1,u="="+g.f,u.indexOf(",")>=0&&(u='"'+u.replace(xae,'""')+'"')):u="";c.push(u)}return a.blankrows===!1&&l?null:c.join(o)}function Hq(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var i=yi(t["!ref"]),s=r.FS!==void 0?r.FS:",",o=s.charCodeAt(0),a=r.RS!==void 0?r.RS:`
`,l=a.charCodeAt(0),c=new RegExp((s=="|"?"\\|":s)+"+$"),u="",h=[];r.dense=Array.isArray(t);for(var f=r.skipHidden&&t["!cols"]||[],g=r.skipHidden&&t["!rows"]||[],y=i.s.c;y<=i.e.c;++y)(f[y]||{}).hidden||(h[y]=_a(y));for(var _=0,b=i.s.r;b<=i.e.r;++b)(g[b]||{}).hidden||(u=bSt(t,i,b,h,o,l,s,r),u!=null&&(r.strip&&(u=u.replace(c,"")),(u||r.blankrows!==!1)&&n.push((_++?a:"")+u)));return delete r.dense,n.join("")}function sSe(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=Hq(t,e);return n}function ESt(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var i=yi(t["!ref"]),s="",o=[],a,l=[],c=Array.isArray(t);for(a=i.s.c;a<=i.e.c;++a)o[a]=_a(a);for(var u=i.s.r;u<=i.e.r;++u)for(s=Do(u),a=i.s.c;a<=i.e.c;++a)if(e=o[a]+s,n=c?(t[u]||[])[a]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}l[l.length]=e+"="+r}return l}function oSe(t,e,n){var r=n||{},i=+!r.skipHeader,s=t||{},o=0,a=0;if(s&&r.origin!=null)if(typeof r.origin=="number")o=r.origin;else{var l=typeof r.origin=="string"?fo(r.origin):r.origin;o=l.r,a=l.c}var c,u={s:{c:0,r:0},e:{c:a,r:o+e.length-1+i}};if(s["!ref"]){var h=yi(s["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),o==-1&&(o=h.e.r+1,u.e.r=o+e.length-1+i)}else o==-1&&(o=0,u.e.r=e.length-1+i);var f=r.header||[],g=0;e.forEach(function(_,b){jo(_).forEach(function(T){(g=f.indexOf(T))==-1&&(f[g=f.length]=T);var A=_[T],I="z",P="",N=qr({c:a+g,r:o+b+i});c=OA(s,N),A&&typeof A=="object"&&!(A instanceof Date)?s[N]=A:(typeof A=="number"?I="n":typeof A=="boolean"?I="b":typeof A=="string"?I="s":A instanceof Date?(I="d",r.cellDates||(I="n",A=Rl(A)),P=r.dateNF||rs[14]):A===null&&r.nullError&&(I="e",A=0),c?(c.t=I,c.v=A,delete c.w,delete c.R,P&&(c.z=P)):s[N]=c={t:I,v:A},P&&(c.z=P))})}),u.e.c=Math.max(u.e.c,a+f.length-1);var y=Do(o);if(i)for(g=0;g<f.length;++g)s[_a(g+a)+y]={t:"s",v:f[g]};return s["!ref"]=Ms(u),s}function SSt(t,e){return oSe(null,t,e)}function OA(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=fo(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?OA(t,qr(e)):OA(t,qr({r:e,c:n||0}))}function TSt(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function kSt(){return{SheetNames:[],Sheets:{}}}function ASt(t,e,n,r){var i=1;if(!n)for(;i<=65535&&t.SheetNames.indexOf(n="Sheet"+i)!=-1;++i,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var o=s&&s[1]||n;for(++i;i<=65535&&t.SheetNames.indexOf(n=o+i)!=-1;++i);}if(YEe(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function ISt(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=TSt(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function PSt(t,e){return t.z=e,t}function aSe(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function CSt(t,e,n){return aSe(t,"#"+e,n)}function RSt(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function MSt(t,e,n,r){for(var i=typeof e!="string"?e:yi(e),s=typeof e=="string"?e:Ms(e),o=i.s.r;o<=i.e.r;++o)for(var a=i.s.c;a<=i.e.c;++a){var l=OA(t,o,a);l.t="n",l.F=s,delete l.v,o==i.s.r&&a==i.s.c&&(l.f=n,r&&(l.D=!0))}return t}var gF={encode_col:_a,encode_row:Do,encode_cell:qr,encode_range:Ms,decode_col:Lq,decode_row:Oq,split_cell:Hvt,decode_cell:fo,decode_range:Sc,format_cell:kp,sheet_add_aoa:aEe,sheet_add_json:oSe,sheet_add_dom:eSe,aoa_to_sheet:Mb,json_to_sheet:SSt,table_to_sheet:tSe,table_to_book:tSt,sheet_to_csv:Hq,sheet_to_txt:sSe,sheet_to_json:b5,sheet_to_html:QEe,sheet_to_formulae:ESt,sheet_to_row_object_array:b5,sheet_get_cell:OA,book_new:kSt,book_append_sheet:ASt,book_set_sheet_visibility:ISt,cell_set_number_format:PSt,cell_set_hyperlink:aSe,cell_set_internal_link:CSt,cell_add_comment:RSt,sheet_set_array_formula:MSt,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const gh=yo()(Sh((t,e)=>({vondsten:[],addVondst:n=>t(r=>({vondsten:[...r.vondsten,{...n,id:crypto.randomUUID(),timestamp:new Date().toISOString()}]})),removeVondst:n=>t(r=>({vondsten:r.vondsten.filter(i=>i.id!==n)})),updateVondst:(n,r)=>t(i=>({vondsten:i.vondsten.map(s=>s.id===n?{...s,...r}:s)})),clearAll:()=>t({vondsten:[]}),exportAsGeoJSON:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r={type:"FeatureCollection",features:n.map(a=>({type:"Feature",geometry:{type:"Point",coordinates:[a.location.lng,a.location.lat]},properties:{id:a.id,objectType:a.objectType,material:a.material,period:a.period,depth:a.depth,notes:a.notes,timestamp:a.timestamp,photoUrl:a.photoUrl,condition:a.condition,weight:a.weight,length:a.length}}))},i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(i),o=document.createElement("a");o.href=s,o.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.geojson`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)},exportAsCSV:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r=`ID,Latitude,Longitude,Datum,Type,Materiaal,Periode,Diepte (cm),Conditie,Gewicht (g),Lengte (mm),Notities,Foto URL
`,i=n.map(c=>{const u=new Date(c.timestamp).toLocaleDateString("nl-NL"),h=c.notes?`"${c.notes.replace(/"/g,'""')}"`:"";return`${c.id},${c.location.lat},${c.location.lng},${u},${c.objectType},${c.material},${c.period},${c.depth||""},${c.condition||""},${c.weight||""},${c.length||""},${h},${c.photoUrl||""}`}).join(`
`),s=r+i,o=new Blob([s],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(o),l=document.createElement("a");l.href=a,l.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)},exportAsExcel:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r=n.map(a=>({ID:a.id,Latitude:a.location.lat,Longitude:a.location.lng,Datum:new Date(a.timestamp).toLocaleDateString("nl-NL"),Type:a.objectType,Materiaal:a.material,Periode:a.period,"Diepte (cm)":a.depth||"",Conditie:a.condition||"","Gewicht (g)":a.weight||"","Lengte (mm)":a.length||"",Notities:a.notes||"","Foto URL":a.photoUrl||""})),i=gF.json_to_sheet(r),s=gF.book_new();gF.book_append_sheet(s,i,"Vondsten");const o=[{wch:36},{wch:12},{wch:12},{wch:12},{wch:15},{wch:12},{wch:25},{wch:12},{wch:12},{wch:12},{wch:12},{wch:40},{wch:50}];i["!cols"]=o,xSt(s,`mijn-vondsten-${new Date().toISOString().split("T")[0]}.xlsx`)},exportAsGPX:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const r=n.map(l=>{const c=new Date(l.timestamp).toISOString();return`  <wpt lat="${l.location.lat}" lon="${l.location.lng}">
    <name>${l.objectType} - ${l.material}</name>
    <desc>${l.period}${l.depth?`, ${l.depth}cm diep`:""}${l.condition&&l.condition!=="Onbekend"?`, ${l.condition}`:""}${l.weight?`, ${l.weight}g`:""}${l.length?`, ${l.length}mm`:""}${l.notes?`. ${l.notes}`:""}</desc>
    <time>${c}</time>
    <sym>Pin</sym>
  </wpt>`}).join(`
`),i=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL" xmlns="http://www.topografix.com/GPX/1/1">
  <metadata>
    <name>Mijn Vondsten</name>
    <desc>Geexporteerd uit DetectorApp NL</desc>
    <time>${new Date().toISOString()}</time>
  </metadata>
${r}
</gpx>`,s=new Blob([i],{type:"application/gpx+xml"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.gpx`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)},exportAsKML:()=>{const n=e().vondsten;if(n.length===0){alert("Geen vondsten om te exporteren");return}const i=`<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    <name>Mijn Vondsten</name>
    <description>Geexporteerd uit DetectorApp NL</description>
${n.map(l=>{const c=new Date(l.timestamp).toLocaleDateString("nl-NL"),u=`<![CDATA[
            <b>Type:</b> ${l.objectType}<br/>
            <b>Materiaal:</b> ${l.material}<br/>
            <b>Periode:</b> ${l.period}<br/>
            ${l.depth?`<b>Diepte:</b> ${l.depth} cm<br/>`:""}
            ${l.condition&&l.condition!=="Onbekend"?`<b>Conditie:</b> ${l.condition}<br/>`:""}
            ${l.weight?`<b>Gewicht:</b> ${l.weight} gram<br/>`:""}
            ${l.length?`<b>Lengte:</b> ${l.length} mm<br/>`:""}
            <b>Datum:</b> ${c}<br/>
            ${l.notes?`<b>Notities:</b> ${l.notes}<br/>`:""}
            ${l.photoUrl?`<a href="${l.photoUrl}">Bekijk foto</a>`:""}
          ]]>`;return`    <Placemark>
      <name>${l.objectType} - ${l.material}</name>
      <description>${u}</description>
      <Point>
        <coordinates>${l.location.lng},${l.location.lat},0</coordinates>
      </Point>
    </Placemark>`}).join(`
`)}
  </Document>
</kml>`,s=new Blob([i],{type:"application/vnd.google-earth.kml+xml"}),o=URL.createObjectURL(s),a=document.createElement("a");a.href=o,a.download=`mijn-vondsten-${new Date().toISOString().split("T")[0]}.kml`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}}),{name:"detectorapp-local-vondsten"})),NSt={Fectio:{naam:"Fectio",latinNaam:"Fectio",type:"castellum",periode:"ca. 4 - 270 n.Chr.",beschrijving:"Groot Romeins castellum bij Bunnik/Vechten, aan de splitsing van Rijn en Vecht. Een van de belangrijkste legerbases in Nederland met ruimte voor 500 soldaten. Het fort had barakken, badhuis, hospitaal en pakhuizen. Buiten de muren woonden handelaren en soldatenfamilies in een vicus. Hier is een compleet Romeins schip gevonden (De Meern 1). Strategisch gelegen voor transport over de rivieren. Veel vondsten door natte bodem: leer, hout, textiel naast munten en militaria. Te bezoeken: Archeologisch Park Castellum Hoge Woerd met reconstructie en museum.",watWasHier:"Groot castellum met ruimte voor 500 soldaten, barakken, badhuis, hospitaal en pakhuizen. Buiten het fort een burgerdorp.",watTeZien:"Archeologisch Park Castellum Hoge Woerd toont de contouren. Museum met veel vondsten waaronder een Romeins schip.",verwachteVondsten:"Munten, fibulae, aardewerk, wapens, paardentuig, militaire uitrusting. Door natte bodem ook leer, hout en textiel.",betekenis:"Een van de belangrijkste forten aan de Limes. Knooppunt voor troepen- en goederentransport.",bronnen:["https://www.hogewoerd.nl","https://www.livius.org/articles/place/fectio-vechten/"]},Traiectum:{naam:"Traiectum",latinNaam:"Traiectum",type:"castellum",periode:"ca. 42 - 275 n.Chr.",beschrijving:'Romeins castellum onder het huidige Domplein in Utrecht. De naam betekent "doorwaadbare plaats" - hier splitsten Rijn en Vecht. Het fort (124x152m in laatste fase) bood plaats aan ca. 500 soldaten. Vijf bouwfases: eerst hout, na 200 n.Chr. steen met tufsteen uit de Eifel. Cohors II Hispanorum peditata (Spaanse infanterie) was hier uniek gelegerd 88-275 n.Chr. - hun dakpanstempels zijn nergens anders aan de Limes gevonden! Het fort werd verwoest tijdens de Bataafse Opstand (69 n.Chr.). DOMunder onder het Domplein toont de opgegraven resten. UNESCO Werelderfgoed sinds 2021.',watWasHier:"Castellum (500 soldaten) bij riviersplitsing. Cohors II Hispanorum gelegerd.",watTeZien:"DOMunder onder het Domplein: opgravingen te bezoeken. Principia en poorten blootgelegd.",verwachteVondsten:"Dakpannen met stempels, munten, aardewerk, tufsteen bouwmateriaal, militaria.",betekenis:"UNESCO Werelderfgoed. Oorsprong van de stad Utrecht.",bronnen:["https://www.livius.org/articles/place/traiectum-utrecht/","https://www.utrechtaltijd.nl/verhalen/castellum-traiectum-een-romeinse-legerbasis-in-het-hart-van-de-domstad/","https://www.romeinen.nl/locatie-overzicht/3447271878/domunder-castellum-traiectum"]},Laurum:{naam:"Laurum",latinNaam:"Laurum",type:"castellum",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum in het huidige Woerden aan de Oude Rijn. Garnizoen van ca. 500 soldaten in houten barakken. Bijzonder vanwege de natte veenbodem: organisch materiaal bleef bewaard zoals houten schrijfplankjes met Latijnse teksten, leren schoenen en een Romeinse boot. Het fort werd meerdere keren herbouwd na overstromingen. De contouren zijn in het stratenpatroon herkenbaar. Buiten de muren lag een vicus (burgerdorp). Vondsten in Stadsmuseum Woerden, waaronder unieke houten voorwerpen die elders zijn vergaan.",watWasHier:"Castellum voor 500 soldaten met houten barakken, badhuis en pakhuizen. Vicus buiten de muren.",watTeZien:"Stadsmuseum Woerden met bijzondere vondsten. Fort-contouren in stratenpatroon herkenbaar.",verwachteVondsten:"Militaria, aardewerk, munten, schrijfplankjes. Door natte veengrond ook hout, leer en schoenen.",betekenis:"Toont Romeins bouwen in moeilijk veengebied. Unieke organische vondsten.",bronnen:["https://www.castellumwoerden.nl"]},"Castellum Praetorium Agrippinae":{naam:"Praetorium Agrippinae",latinNaam:"Praetorium Agrippinae",type:"castellum",periode:"ca. 40 - 275 n.Chr.",beschrijving:"Een van de best opgegraven Romeinse locaties van Nederland. Het castellum werd gesticht in de winter van 39/40 n.Chr. door keizer Caligula, vernoemd naar zijn moeder Vipsania Agrippina. Een opgegraven wijnvat bevatte wijn van de persoonlijke wijngaarden van de keizer! Er zijn 7 bouwfasen gevonden, 6 van hout en de laatste van steen - uniek compleet inzicht in Romeinse bouwtechnieken. Cohors III Gallorum equitata was hier gelegerd. Bij opgravingen (1941-1953) zijn door het grondwater veel organische vondsten bewaard: voedselresten, leer, touw. De vicus buiten het fort strekte zich 1 km uit met 700+ graven. Op het Castellumplein zijn de contouren in brons gemarkeerd.",watWasHier:"Castellum met 7 bouwfasen. Vicus (1 km) met 700+ graven. Detachement Cohors III Gallorum.",watTeZien:"Castellumplein met bronzen markeringen. Torenmuseum Valkenburg. Gereconstrueerde poort.",verwachteVondsten:"Militaria, organisch materiaal (voedsel, leer, touw), aardewerk, munten, inscripties.",betekenis:"Best gedocumenteerde Romeinse fort van Nederland. UNESCO Werelderfgoed.",bronnen:["https://www.livius.org/articles/place/praetorium-agrippinae-valkenburg-zh/","https://www.geschiedenisvanzuidholland.nl/zien-en-doen/locaties/praetorium-agrippinae-in-valkenburg/","https://oudvalkenburgzh.nl/torenmuseum-5/"]},"Castra Hunnerberg":{naam:"Castra Hunnerberg",latinNaam:"Castra",type:"legerkamp",periode:"ca. 16 v.Chr. - 104 n.Chr.",beschrijving:'Enorm Romeins legerkamp op de Hunnerberg bij Nijmegen - 42 hectare (80 voetbalvelden), ruimte voor 12.000 man. De enige plek in Nederland waar echte legioenen (geen hulptroepen) verbleven! Na de Bataafse Opstand (69 n.Chr.) vestigde Legio X Gemina Pia Fidelis zich hier - opgericht door Julius Caesar en het bekendste legioen van Nederland. De afkorting LXG is talloze keren gevonden op dakpannen en tegels. Bij opgravingen zijn ruim 1000 fragmenten militaire uitrusting en paardentuig gevonden. In 104 n.Chr. vertrok het legioen naar de Balkan - een ramp voor de economie. UNESCO Werelderfgoed sinds 2021, omschreven als "bakermat van de Nederduitse Limes".',watWasHier:"Legerkamp voor 12.000 man. Legio X Gemina (71-104 n.Chr.), opgericht door Julius Caesar.",watTeZien:"Museum Het Valkhof. Museum Kam in de Hunnerberg. Grafvelden in Nijmegen-Oost.",verwachteVondsten:"Legioenstempels LXG, militaria, paardentuig, dakpannen, munten, grafstenen.",betekenis:"UNESCO Werelderfgoed. Bakermat van de Limes. Enige legioenskamp in Nederland.",bronnen:["https://www.livius.org/articles/place/noviomagus-nijmegen-hunnerberg/","https://www.welkominnijmegen.nl/pages/geschiedenis/de-romeinen-in-nijmegen/de-legerkampen.php","https://mijngelderland.nl/inhoud/specials/archeokroniek/romeinse-militaire-uitrusting-en-paardentuig-van-de-hunerberg-te-nijmegen"]},"Castellum Kops Plateau":{naam:"Kops Plateau",latinNaam:"Oppidum Batavorum",type:"castellum",periode:"ca. 10 v.Chr. - 70 n.Chr.",beschrijving:"Vroege Romeinse basis op het Kops Plateau in Nijmegen, later de civiele hoofdstad van de Bataven: Oppidum Batavorum. Hier woonden Romeinen en Bataven samen - het eerste contactpunt tussen beide culturen. Verwoest tijdens de Bataafse Opstand van 69-70 n.Chr. onder leiding van Julius Civilis. Gemengde vondsten: Romeinse militaria n Keltisch-Bataafse voorwerpen. Vroege importaardewerk en munten van Augustus. Nu natuurgebied. Museum Het Valkhof toont de unieke vondsten van deze ontmoeting van culturen.",watWasHier:"Eerst Romeins kamp, later Bataafse hoofdstad. Romeinen en Bataven woonden samen.",watTeZien:"Kops Plateau is natuurgebied. Museum Het Valkhof toont de vondsten.",verwachteVondsten:"Vroege militaria, Keltisch-Bataafse voorwerpen, importaardewerk, munten van Augustus.",betekenis:"Eerste contactpunt Romeinen-Bataven. Begin van romanisering Nederland.",bronnen:["https://www.livius.org/articles/place/noviomagus-nijmegen-kops-plateau/"]},"Nijmegen, Valkhof":{naam:"Valkhof Nijmegen",latinNaam:"Valkhof",type:"versterking",periode:"ca. 270 - 400 n.Chr.",beschrijving:"Laat-Romeinse versterking op het Valkhof in Nijmegen, aan de Waaloever. Gebouwd toen het Rijk onder druk stond van Germaanse invallen. Strategische positie boven de rivier. Continuteit: Karel de Grote bouwde hier later zijn palts (koninklijke residentie). De Sint-Nicolaaskapel bevat mogelijk Karolingische elementen op Romeinse fundamenten. Typische laat-Romeinse vondsten: gordels met riemtongen, militaire gespen, munten van 3e-4e eeuwse keizers. Museum Het Valkhof toont de overgang van Romeinse tijd naar vroege middeleeuwen.",watWasHier:"Laat-Romeinse versterking boven de Waal. Later Karolingische palts.",watTeZien:"Valkhofpark met Sint-Nicolaaskapel. Museum Het Valkhof.",verwachteVondsten:"Laat-Romeinse munten, gordels, riemtongen, militaire gespen, 3e-4e eeuws aardewerk.",betekenis:"Toont overgang Romeinse tijd naar middeleeuwen. Nijmegen bleef machtscentrum.",bronnen:["https://www.museumhetvalkhof.nl"]},"Castellum Op de Hoge Woerd":{naam:"Hoge Woerd",latinNaam:"Castellum",type:"castellum",periode:"ca. 50 - 270 n.Chr.",beschrijving:"Romeins castellum in Leidsche Rijn (Utrecht), nu een voorbeeldig archeologisch park. Middelgroot fort met houten gebouwen en een burgerdorp (vicus) buiten de muren. Hier is een compleet Romeins schip gevonden: De Meern 1, een 25 meter lange vrachtboot. Door de natte kleigrond bleef veel organisch materiaal bewaard. Het park toont de reconstructie van het fort - je kunt over de originele fundamenten lopen. Modern museum met interactieve presentatie. Ideale plek om te zien hoe een Romeins fort eruitzag.",watWasHier:"Middelgroot castellum met houten gebouwen. Vicus buiten de muren. Compleet schip gevonden.",watTeZien:"Archeologisch Park Hoge Woerd: reconstructie fort, museum, originele fundamenten.",verwachteVondsten:"Militaria, scheepsonderdelen, aardewerk, munten. Door natte grond ook organisch materiaal.",betekenis:"Best gepresenteerde Romeinse fort in Nederland. Ideaal om fort-layout te begrijpen.",bronnen:["https://www.hogewoerd.nl"]},Lugdunum:{naam:"Lugdunum",latinNaam:"Lugdunum",type:"vlootbasis",periode:"ca. 40 - 270 n.Chr.",beschrijving:`Romeinse vlootbasis en versterkte graanopslagplaats bij de monding van de Rijn, het westelijkste punt van de gehele Limes. Hier stond mogelijk een enorme vuurtoren (ca. 60m hoog) naar model van de Pharos van Ostia - vissers noemden deze "Kalla's toren" (Caligula). Door de vele dakpannen van de Romeinse vloot wordt aangenomen dat dit een vlootbasis was. Het fort is door kustafslag in zee verdwenen. Bij stormen in 1520, 1552 en 1562 waren de runes van de "Brittenburg" zichtbaar op het strand; de laatst gedateerde vondst was 270 n.Chr. Het Rijksmuseum van Oudheden in Leiden toont vondsten. De beroemde kaart van Ortelius toont hoe het eruit zag.`,watWasHier:"Vlootbasis met vuurtoren bij Rijnmonding. Graanopslag voor Britannia.",watTeZien:"Fort verdwenen in zee. RMO Leiden toont vondsten en kaart van Ortelius.",verwachteVondsten:"Na stormen: munten, aardewerk, militaria. Fort zelf onbereikbaar in Noordzee.",betekenis:"Westelijk eindpunt van de Limes. Verbinding met Britannia.",bronnen:["https://www.livius.org/articles/place/lugdunum-katwijk/","https://nl.wikipedia.org/wiki/Lugdunum_(Katwijk)"]},"Vlootbasis Naaldwijk":{naam:"Vlootbasis Naaldwijk",type:"vlootbasis",periode:"1e - 2e eeuw n.Chr.",beschrijving:"Vermoedelijke basis van de Classis Germanica (Germaanse vloot) bij Naaldwijk in het Westland. De Romeinse vloot patrouilleerde langs de Noordzeekust en vervoerde troepen en goederen naar Britannia. Haven met dokken voor oorlogsschepen en transportboten. Mariniers (classiarii) waren hier gestationeerd. Het gebied is nu landbouwgrond, maar bij opgravingen zijn haven-structuren en scheepsgerelateerde vondsten gedaan. Ankers, scheepsonderdelen en specifieke mariniers-uitrusting. Toont het belang van zeemacht voor de Romeinse grensverdediging.",watWasHier:"Haven voor oorlogsschepen. Mariniers gestationeerd. Patrouilles langs Noordzeekust.",watTeZien:"Gebied is landbouwgrond. Vondsten in lokale musea.",verwachteVondsten:"Scheepsonderdelen, ankers, mariniers-uitrusting, importaardewerk.",betekenis:"Toont belang Romeinse vloot voor kustverdediging.",bronnen:[]},"Minifort Ockenburg":{naam:"Minifort Ockenburg",type:"minifort",periode:"ca. 150 - 180 n.Chr.",beschrijving:"Klein Romeins kustfort bij Ockenburg in Den Haag, op een oude strandwal. Bewaakte de kust tegen piraten en Germaanse invallen over zee. Ruimte voor slechts 20-30 soldaten - een wachtpost eerder dan een echt fort. Korte gebruiksperiode van ca. 30 jaar. Toont dat de Romeinen niet alleen de rivieren maar ook de Noordzeekust verdedigden. Het terrein is beschermd rijksmonument maar niet publiek toegankelijk. Vondsten in het Haags Historisch Museum: militaria, aardewerk en munten uit de 2e eeuw.",watWasHier:"Kleine kustwachtpost voor 20-30 soldaten op strandwal.",watTeZien:"Terrein beschermd maar niet toegankelijk. Haags Historisch Museum.",verwachteVondsten:"Kleine hoeveelheden militaria, aardewerk, munten 2e eeuw.",betekenis:"Toont Romeinse kustverdediging naast rivierforten.",bronnen:[]},"Castellum Ceuclum":{naam:"Ceuclum",latinNaam:"Ceuclum",type:"castellum",periode:"ca. 70 - 270 n.Chr.",beschrijving:"Romeins castellum bij Cuijk aan de Maas, waar de belangrijke weg naar het noorden de rivier kruiste. Het fort bewaakte een brug of veerpont. Garnizoen van hulptroepen. De naam Cuijk is afgeleid van Ceuclum. Bij de brug werden ritueel munten geofferd. Het fort lag op een strategisch punt waar de Maasroute de landweg kruiste. Vondsten wijzen op handel en militaire activiteit. Het Maasmuseum in Cuijk toont lokale Romeinse vondsten. Onder het centrum zijn bij bouwwerkzaamheden regelmatig resten gevonden.",watWasHier:"Castellum bij Maasbrug. Belangrijke rivierovergang en kruispunt.",watTeZien:"Maasmuseum Cuijk. Resten gevonden onder centrum.",verwachteVondsten:"Munten (geofferd bij brug), fibulae, aardewerk, bruggerelateerde vondsten.",betekenis:"Belangrijke schakel in wegennet langs de Maas.",bronnen:["https://www.livius.org/articles/place/ceuclum-cuijk/"]},"Castellum Meinerswijk":{naam:"Meinerswijk",type:"castellum",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum in de uiterwaarden bij Arnhem-Meinerswijk aan de Rijn. Het fort bewaakt een strategisch punt waar de rivier goed te overzien was. Meerdere bouwfasen door overstromingen. In de uiterwaarden zijn bij erosie en opgravingen vondsten gedaan: militaria, aardewerk, munten en scheepsresten. Het gebied is nu natuurgebied Meinerswijk met wisselende waterstanden. Na hoog water kunnen vondsten aan de oppervlakte komen. Museum Arnhem toont Romeinse vondsten uit de regio.",watWasHier:"Castellum in uiterwaarden. Meerdere bouwfasen door overstromingen.",watTeZien:"Natuurgebied Meinerswijk. Museum Arnhem.",verwachteVondsten:"Militaria, aardewerk, munten, scheepsresten. Na hoog water aan oppervlakte.",betekenis:"Onderdeel fortenketen langs de Rijn.",bronnen:[]},Levefanum:{naam:"Levefanum",latinNaam:"Levefanum",type:"versterking",periode:"ca. 50 - 270 n.Chr.",beschrijving:"Romeinse versterking bij Wijk bij Duurstede, waar de Rijn splitste in de Lek en Kromme Rijn. Strategisch cruciaal punt voor controle over het scheepvaartverkeer. Waarschijnlijk ook een haven voor overslag van goederen. Op dezelfde plek ontstond later de Karolingische handelsstad Dorestad, een van de belangrijkste havens van vroegmiddeleeuws Europa. De continuteit toont het blijvende belang van deze locatie. Dorestad Museum vertelt het verhaal van Romeinse tijd tot Vikingaanvallen. Vondsten: munten, handelsaardewerk, militaria.",watWasHier:"Versterking bij riviersplitsing. Haven en overslagpunt. Later Dorestad.",watTeZien:"Dorestad Museum. Terrein bebouwd.",verwachteVondsten:"Munten, handelsaardewerk, militaria, scheepsgerelateerde vondsten.",betekenis:"Strategisch controlepunt waterwegen. Later belangrijke handelsstad Dorestad.",bronnen:[]},"Nigrum Pullum":{naam:"Nigrum Pullum",latinNaam:"Nigrum Pullum (Zwarte Poel)",type:"minifort",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum bij Zwammerdam aan de Oude Rijn. Garnizoen van 100-150 soldaten met pakhuizen en haven voor riviertransport. Wereldberoemd door de vondst van 6 Romeinse schepen (1971-1974) in perfecte staat - bewaard door de natte veengrond. De Zwammerdamschepen zijn de best bewaarde Romeinse rivierschepen ter wereld en tonen uniek inzicht in Romeins transport en scheepsbouw. Vondsten: schepen, leren schoeisel, houten voorwerpen, aardewerk, munten, militaria. Te zien in Rijksmuseum van Oudheden, Leiden.",watWasHier:"Klein fort met pakhuizen en haven. Bij opgravingen werden 6 Romeinse schepen gevonden.",watTeZien:"De schepen zijn in het Rijksmuseum van Oudheden in Leiden. Het terrein zelf is niet te bezoeken.",verwachteVondsten:"Scheepsonderdelen, leren schoeisel, houten voorwerpen, aardewerk, munten, en door de natte veengrond organisch materiaal.",betekenis:"Wereldberoemd om de goed bewaarde Romeinse schepen. Toont transport over de Rijn.",bronnen:["https://www.rmo.nl/collectie/themas/zwammerdam"]},"Stenen wachttoren Vleuterweide":{naam:"Wachttoren Vleuterweide",type:"wachttoren",periode:"ca. 150 - 250 n.Chr.",beschrijving:"Bijzondere stenen wachttoren in Vleuterweide bij Utrecht - de meeste Romeinse wachttorens waren van hout. De stenen constructie wijst op permanentie en belang. Onderdeel van het signaleringssysteem langs de Limes: bij gevaar werden vuren aangestoken om forten te waarschuwen. De toren bood uitzicht over de omgeving en de rivier. Mogelijk woonden hier ook families van de soldaten. De fundamenten zijn gemarkeerd in de moderne woonwijk. Vondsten: bouwmateriaal (dakpannen, stenen), aardewerk, persoonlijke bezittingen. Centraal Museum Utrecht.",watWasHier:"Stenen wachttoren (ongebruikelijk). Signaalpost voor waarschuwingssysteem.",watTeZien:"Fundamenten gemarkeerd in wijk. Centraal Museum Utrecht.",verwachteVondsten:"Dakpannen met legioenstempels, aardewerk, persoonlijke bezittingen.",betekenis:"Een van weinige bekende stenen wachttorens. Toont variatie in bouwwijzen.",bronnen:[]},"Wachttoren Bunnik":{naam:"Wachttoren Bunnik",type:"wachttoren",periode:"ca. 50 - 270 n.Chr.",beschrijving:"Houten wachttoren bij Bunnik aan de Rijn, onderdeel van het signaleringssysteem langs de Limes. Elke paar kilometer stond een toren met uitzicht over de rivier. Bij nadering van vijanden werden vuren of rooksignalen gegeven, zodat binnen minuten alle forten gewaarschuwd waren. De torens waren meestal van hout op een aarden verhoging. Kleine bezetting van 4-8 soldaten. De exacte locatie is niet precies bekend doordat het gebied nu bebouwd is. Vondsten zijn schaars: wat aardewerk en militaria.",watWasHier:"Houten uitkijktoren voor signalering. Kleine bezetting van 4-8 soldaten.",watTeZien:"Exacte locatie onbekend. Gebied bebouwd.",verwachteVondsten:"Kleine hoeveelheden militaria en aardewerk.",betekenis:"Onderdeel signaleringssysteem langs Limes.",bronnen:[]},"Castellum Maastricht":{naam:"Castellum Maastricht",latinNaam:"Mosae Trajectum",type:"versterking",periode:"ca. 270 - 400 n.Chr.",beschrijving:'Laat-Romeinse versterking in het centrum van Maastricht bij de brug over de Maas. Mosae Trajectum betekent "Maasoversteek". Gebouwd in een periode dat het Rijk onder druk stond van Germaanse invallen. Het fort bewaakte de strategische rivierovergang. Continuteit van bewoning: Maastricht bleef bewoond tot op heden. Onder het Vrijthof en omgeving zijn Romeinse resten gevonden. Typische laat-Romeinse vondsten: gordels, riembeslag, munten 3e-4e eeuw, zwaar versterkte muren. Centre Ceramique vertelt de geschiedenis.',watWasHier:"Laat-Romeinse versterking bij Maasbrug. Verdediging tegen Germaanse invallen.",watTeZien:"Onder Vrijthof zijn resten. Centre Ceramique.",verwachteVondsten:"Laat-Romeinse munten, militaire gordelbeslag, riemtongen, 3e-4e eeuws aardewerk.",betekenis:"Toont continuteit - Maastricht ononderbroken bewoond sinds Romeinse tijd.",bronnen:["https://www.centreceramique.nl"]},Roompot:{naam:"Roompot Fort",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins kustfort bij de Roompot in Zeeland dat de toegang tot de Oosterschelde bewaakte. Het fort beschermde schepen tegen piraterij en controleerde de vaarroute. Door zeespiegelstijging en kustafslag is het fort in de golven verdwenen. De exacte locatie ligt nu onder water. Soms spoelen na stormen vondsten aan op de stranden van Noord-Beveland en Walcheren: munten, aardewerk, metalen voorwerpen. Toont dat de Romeinen de gehele Zeeuwse delta controleerden, niet alleen de grote rivieren.",watWasHier:"Kustfort dat zeeroute bewaakte. Bescherming tegen piraterij.",watTeZien:"Fort verdwenen in zee. Soms vondsten op strand na stormen.",verwachteVondsten:"Na stormen: munten, aardewerk, metalen voorwerpen op Zeeuwse stranden.",betekenis:"Toont Romeinse controle over Zeeuwse wateren.",bronnen:[]},"Castellum Carvium":{naam:"Carvium",latinNaam:"Carvium",type:"castellum",periode:"ca. 40 - 270 n.Chr.",beschrijving:"Romeins castellum bij Herwen-Aerdt (bij Lobith) waar Rijn en Waal samenkwamen - een strategisch knooppunt van eerste orde. Het fort controleerde het rivierverkeer op beide grote stromen. Garnizoen van hulptroepen. In de uiterwaarden zijn bij erosie en opgravingen vondsten gedaan. Het gebied is nu natuurgebied de Gelderse Poort met dynamische rivierlandschap. Na hoog water kunnen vondsten aan oppervlakte komen. Museum Het Valkhof in Nijmegen toont vondsten uit de regio. Scheepsresten gevonden.",watWasHier:"Fort bij samenvloeiing Rijn en Waal. Controleerde twee grote rivieren.",watTeZien:"Natuurgebied Gelderse Poort. Museum Het Valkhof Nijmegen.",verwachteVondsten:"Militaria, aardewerk, munten, scheepsresten. Na hoog water aan oppervlakte.",betekenis:"Controleerde strategisch knooppunt waterwegen.",bronnen:[]},Matilo:{naam:"Matilo",latinNaam:"Matilo",type:"castellum",periode:"ca. 70 - 260 n.Chr.",beschrijving:'Romeins castellum bij Leiden-Roomburg, gebouwd na de Bataafse Opstand (69-70 n.Chr.) op een strategische plek aan de monding van het Kanaal van Corbulo. Het gigantische fort (80x120m) bood plaats aan ca. 500 soldaten en is een van de best bewaarde castella in Nederland. De archeologische resten liggen grotendeels intact onder Archeologisch Park Matilo. In het park staan 6 replica-wachttorens en een aarden wal die de omtrek van het fort visualiseert. Het fort werd tussen 240-260 n.Chr. opgeheven. De locatie Roomburg ("Romeinse burcht") verwijst naar de oorsprong. UNESCO Werelderfgoed sinds 2021.',watWasHier:"Groot castellum (500 soldaten) bij monding Kanaal van Corbulo. Vicus buiten de muren.",watTeZien:"Archeologisch Park Matilo met 6 wachttoren-replica's en aarden wal. Rijksmuseum van Oudheden.",verwachteVondsten:"Militaria, grafgiften, crematie-urnen, aardewerk, munten, fibulae.",betekenis:"UNESCO Werelderfgoed. Een van de best bewaarde castella van Nederland.",bronnen:["https://parkmatilo.nl/het-verhaal-van-matilo/","https://www.limeswerelderfgoed.nl/locaties/2016475046/archeologisch-park-matilo","https://www.romeinen.nl/locatie-overzicht/2016475046/archeologisch-park-matilo"]},Corbulo:{naam:"Forum Hadriani",latinNaam:"Forum Hadriani (Municipium Aelium Cananefatium)",type:"versterking",periode:"ca. 70 - 270 n.Chr.",beschrijving:"Forum Hadriani bij Voorburg was de noordelijkste Romeinse stad van het Europese continent en de enige stad met stadsrechten in Nederland. Gesticht rond 70 n.Chr. aan het Kanaal van Corbulo (34 km, verbinding Rijn-Maas). Keizer Hadrianus verleende in 121 n.Chr. marktrechten en gaf de stad zijn naam. Rond 150 n.Chr. kreeg het stadsrechten (Municipium). De stad had ca. 1000 inwoners, een stadsmuur met dubbele gracht, stenen gebouwen en tempels. Park Arentsburgh markeert de locatie. UNESCO Werelderfgoed sinds 2021. De eerste wetenschappelijke opgravingen (1827-1833) waren door Caspar Reuvens, de eerste hoogleraar archeologie ter wereld.",watWasHier:"Enige Romeinse stad met stadsrechten in Nederland. Ca. 1000 inwoners.",watTeZien:"Park Arentsburgh in Voorburg. Kanaal traceerbaar als de Vliet.",verwachteVondsten:"Stedelijke vondsten: bouwmateriaal, aardewerk, munten, inscripties, religieuze voorwerpen.",betekenis:"UNESCO Werelderfgoed. Noordelijkste Romeinse stad van Europa.",bronnen:["https://www.awlv.nl/forum-hadriani/de-stad-forum-hadriani/","https://www.romeinen.nl/weten/nederland-in-de-romeinse-tijd/zuid-holland/regio-voorburg","https://kennis.cultureelerfgoed.nl/index.php/Monumenten/508083"]},"Berg - Tomveld":{naam:"Berg-Tomveld",type:"villa",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse villa bij Berg in Zuid-Limburg, mogelijk tijdelijk militair gebruikt. Dit type gebouwen diende als landbouwbedrijf met luxe woondeel voor de eigenaar. De regio Zuid-Limburg was dicht bebouwd met villa's die graan en vee leverden aan het Romeinse leger. Vondsten wijzen op welvaart: mozaekvloeren, beschilderd pleisterwerk, hypocaustum (vloerverwarming). De locatie Tomveld verwijst mogelijk naar Romeinse grafheuvels (tumuli) in de buurt. Thermenmuseum Heerlen toont de villa-cultuur.",watWasHier:"Villa rustica met mogelijk militair gebruik. Landbouw voor legervoorraden.",watTeZien:"Locatie in agrarisch gebied. Thermenmuseum Heerlen.",verwachteVondsten:"Bouwmateriaal, dakpannen, aardewerk, munten, sieraden.",betekenis:"Toont Romeinse landbouweconomie in Zuid-Limburg.",bronnen:[]},"Berg - Trappenberg":{naam:"Berg-Trappenberg",type:"legerkamp",periode:"1e eeuw v.Chr. - 1e eeuw n.Chr.",beschrijving:"Vroeg-Romeins legerkamp bij Berg in Zuid-Limburg dat later werd omgebouwd tot villa of boerderij. Toont de transitie van militaire bezetting naar civiele bewoning. Het kamp dateert uit de veroveringsperiode toen Rome dit gebied inlijfde. Na pacificatie was een fort niet meer nodig en werd het terrein civiel benut. Vondsten: vroege Romeinse militaria naast later agrarisch materiaal. Zuid-Limburg was een grenszone voordat de Limes naar de Rijn verplaatste.",watWasHier:"Eerst legerkamp, later villa/boerderij. Overgang militair naar civiel.",watTeZien:"Locatie in landbouwgebied.",verwachteVondsten:"Vroege militaria, later agrarisch aardewerk, bouwmateriaal.",betekenis:"Toont Romeinse verovering en pacificatie van Zuid-Limburg.",bronnen:[]},"Castellum Blariacum":{naam:"Blariacum",latinNaam:"Blariacum",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke locatie van het Romeinse castellum Blariacum bij Blerick (nu deel van Venlo). De naam leeft voort in de plaatsnaam. Het fort zou de Maasovergang hebben bewaakt op de route tussen Xanten en Maastricht. De exacte locatie is nooit definitief vastgesteld ondanks vele opgravingspogingen. Vondsten in de omgeving wijzen wel op Romeinse militaire aanwezigheid: militaria, munten, aardewerk. Het Limburgs Museum in Venlo toont de Romeinse geschiedenis van de regio.",watWasHier:"Vermoedelijk castellum bij Maasovergang. Exacte locatie onzeker.",watTeZien:"Locatie niet vastgesteld. Limburgs Museum Venlo.",verwachteVondsten:"Militaria, munten, aardewerk als aanwijzingen voor fortlocatie.",betekenis:"Plaatsnaam Blerick afgeleid van Blariacum. Schakel in Maasroute.",bronnen:[]},"Fortificatie Bodegraven":{naam:"Wachtpost Bodegraven",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Waarschijnlijke Romeinse wachtpost bij Bodegraven aan de Oude Rijn. Onderdeel van het signaleringssysteem tussen de grotere forten zoals Nigrum Pullum en Laurum. De wachttorens stonden om de paar kilometer en konden met vuur- of rooksignalen waarschuwingen doorgeven. Kleine bezetting van 4-8 soldaten. De exacte locatie is niet precies bekend. Bij graafwerkzaamheden in Bodegraven zijn wel Romeinse scherven gevonden die op aanwezigheid wijzen.",watWasHier:"Kleine wachtpost voor signalering. 4-8 soldaten.",watTeZien:"Exacte locatie onbekend.",verwachteVondsten:"Aardewerk, kleine hoeveelheden militaria.",betekenis:"Onderdeel communicatiesysteem langs de Limes.",bronnen:[]},Caestert:{naam:"Caestert",type:"versterking",periode:"1e eeuw v.Chr.",beschrijving:"Mogelijk de locatie waar de Eburonen onder leiding van Ambiorix in 54 v.Chr. een Romeins legioen vernietigden - de zwaarste Romeinse nederlaag in de Lage Landen. Het plateau van Caestert bij Kanne (Belgisch Limburg) had een oppidum (versterkte nederzetting). Julius Caesar beschrijft de slag in zijn Gallische Oorlogen. De locatie is omstreden, maar Caestert is een sterke kandidaat. Symbolisch belangrijke plek voor de Belgische geschiedenis. De site is nu natuurgebied met grotten.",watWasHier:"Mogelijk slagveld Ambiorix-opstand 54 v.Chr. Oppidum (versterking).",watTeZien:"Plateau Caestert, natuurgebied met grotten.",verwachteVondsten:"Keltische en vroeg-Romeinse voorwerpen, mogelijk slagveldvondsten.",betekenis:"Mogelijke locatie grootste Romeinse nederlaag in de regio.",bronnen:[]},"Castellum Driel?":{naam:"Castellum Driel",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:'Mogelijke locatie van een Romeins castellum bij Driel in de Betuwe. Het bestaan en de exacte locatie zijn onzeker, vandaar het vraagteken. De Betuwe (Insula Batavorum - "Eiland der Bataven") was kerngebied van de Bataven, bondgenoten van Rome. Zij leverden beroemde hulptroepen aan het Romeinse leger. Een fort hier zou logisch zijn om het gebied te controleren. Vondsten in de omgeving wijzen op Romeinse aanwezigheid. Museum Het Valkhof Nijmegen toont de Bataafse cultuur.',watWasHier:"Mogelijk castellum in Bataafs kerngebied. Bestaan onzeker.",watTeZien:"Geen zichtbare resten. Museum Het Valkhof.",verwachteVondsten:"Romeinse en Bataafse voorwerpen indien locatie juist.",betekenis:"Zou Romeinse controle over Bataafs gebied tonen.",bronnen:[]},"Castellum Duiven - Loowaard":{naam:"Duiven-Loowaard",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins castellum bij Duiven/Loowaard aan de Rijn, in de uiterwaarden tussen Arnhem en Zevenaar. Het fort bewaakte de rivierroute en de overgang naar het Bataafse gebied. De dynamische rivier heeft veel resten weggespoeld of diep begraven. Bij lage waterstanden en na erosie komen soms vondsten aan oppervlakte: munten, militaria, aardewerk. Het gebied is nu natuurgebied met grazende grote grazers. Museum Arnhem en Het Valkhof Nijmegen tonen vondsten uit de regio.",watWasHier:"Castellum aan de Rijn in uiterwaarden. Bewaakte rivierovergang.",watTeZien:"Natuurgebied. Na erosie mogelijk vondsten aan oppervlakte.",verwachteVondsten:"Militaria, munten, aardewerk na erosie of bij laag water.",betekenis:"Onderdeel fortenketen langs de Rijn.",bronnen:[]},"Castellum Grinnes":{naam:"Grinnes",latinNaam:"Grinnes",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins castellum bij Rossum in de gemeente Maasdriel - waarschijnlijk het antieke Grinnes vermeld op de Peutingerkaart. Het fort lag aan de Waal en controleerde de rivierroute. Bij opgravingen zijn resten van het fort gevonden. De omgeving is rijk aan Romeinse vondsten: militaria, munten, aardewerk, bouwmateriaal. Het Museum voor de Bommelerwaard in Ammerzoden toont lokale vondsten. De naam Grinnes leeft niet voort in moderne plaatsnamen.",watWasHier:"Castellum aan de Waal. Vermeld op Peutingerkaart.",watTeZien:"Locatie opgegraven. Museum Bommelerwaard.",verwachteVondsten:"Militaria, munten, aardewerk, bouwmateriaal.",betekenis:"Verbinding antieke bronnen met archeologische locatie.",bronnen:[]},"Wachttoren Heumen":{naam:"Wachttoren Heumen",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse wachttoren bij Heumen ten zuiden van Nijmegen. Onderdeel van het signaleringssysteem langs de Maas en verbindingswegen. De torens stonden op strategische punten met goed uitzicht. Bij nadering van vijanden werden signalen gegeven naar de grotere forten. Kleine bezetting van 4-8 soldaten die in de toren woonden. De exacte locatie is archeologisch vastgesteld. Vondsten: militaria, aardewerk, persoonlijke bezittingen.",watWasHier:"Signaleertoren met klein garnizoen. Uitzichtpunt.",watTeZien:"Locatie bekend maar geen zichtbare resten.",verwachteVondsten:"Militaria, aardewerk, kleine persoonlijke voorwerpen.",betekenis:"Onderdeel communicatienetwerk Romeins leger.",bronnen:[]},"Castellum Huissen?":{naam:"Castellum Huissen",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke locatie van een Romeins castellum bij Huissen aan de Rijn. Het bestaan is niet zeker vastgesteld, vandaar het vraagteken. Huissen ligt op een logische plek tussen de bekende forten bij Arnhem en Zevenaar. Vondsten in de omgeving wijzen op Romeinse activiteit. De moderne bebouwing maakt onderzoek lastig. Als er een fort was, bewaakte het de rivierroute en mogelijk een oversteekplaats.",watWasHier:"Mogelijk castellum aan de Rijn. Bestaan onzeker.",watTeZien:"Geen resten zichtbaar. Gebied bebouwd.",verwachteVondsten:"Romeinse vondsten die fortaanwezigheid zouden bevestigen.",betekenis:"Zou gat in fortenketen opvullen indien bevestigd.",bronnen:[]},"Castellum Kessel-Lith":{naam:"Kessel-Lith",type:"castellum",periode:"3e - 4e eeuw n.Chr.",beschrijving:"Laat-Romeins castellum uit de 3e-4e eeuw bij Kessel-Lith aan de Maas. Gebouwd in een periode van Germaanse invallen toen de oude Limes niet meer te handhaven was. Dit type forten was compacter en zwaarder versterkt dan de vroege castella. De locatie bij een rivierovergang bleef strategisch. Typische laat-Romeinse vondsten: gordels met riemtongen, militaire gespen, munten van 3e-4e eeuwse keizers. Het fort toont de veranderde militaire strategie van het late Romeinse Rijk.",watWasHier:"Laat-Romeins fort, compacter en zwaarder versterkt.",watTeZien:"Locatie bekend, weinig zichtbaar.",verwachteVondsten:"Laat-Romeinse munten, gordelbeslag, riemtongen, 3e-4e eeuws aardewerk.",betekenis:"Toont Romeinse aanpassing aan nieuwe dreigingen.",bronnen:[]},Carvo:{naam:"Carvo",latinNaam:"Carvo",type:"versterking",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke Romeinse versterking nabij Kesteren in de Betuwe. De naam komt voor op de Peutingerkaart. Kesteren lag in het hart van het Bataafse stamgebied. De Bataven waren belangrijke bondgenoten van Rome en leverden beroemde cavalerie-eenheden. Een versterking hier zou zowel bescherming als controle bieden. De exacte locatie is niet vastgesteld. Vondsten in de regio tonen intensief Romeins-Bataafs contact: import-aardewerk, wapens, paardentuig.",watWasHier:"Vermoedelijke versterking in Bataafs kerngebied.",watTeZien:"Locatie onbekend.",verwachteVondsten:"Gemengd Romeins-Bataafse voorwerpen, paardentuig.",betekenis:"Zou Romeinse aanwezigheid in Bataafs gebied tonen.",bronnen:[]},Mannaricium:{naam:"Mannaricium",latinNaam:"Mannaricium",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Vermoedelijke locatie van het Romeinse castellum Mannaricium bij Maurik aan de Rijn. De naam komt voor op de Peutingerkaart. Het fort zou de rivierroute hebben bewaakt tussen Levefanum (Wijk bij Duurstede) en forten stroomopwaarts. De moderne plaats Maurik zou afgeleid kunnen zijn van Mannaricium. Bij bouwwerkzaamheden zijn Romeinse vondsten gedaan die op een fort wijzen. De exacte contouren zijn niet bekend.",watWasHier:"Vermoedelijk castellum aan de Rijn. Vermeld op Peutingerkaart.",watTeZien:"Geen zichtbare resten. Gebied bebouwd.",verwachteVondsten:"Militaria, aardewerk, munten bij bouwwerkzaamheden.",betekenis:"Mogelijke herkomst plaatsnaam Maurik.",bronnen:[]},Oostvoorne:{naam:"Castellum Oostvoorne",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeins kustfort bij de monding van de Waal en Maas, nu verdwenen in zee door kustafslag. Het fort bewaakte de zeeroute en beschermde tegen piraterij. De kust lag in de Romeinse tijd kilometers verder westwaarts. Door zeespiegelstijging en erosie is het fort in de golven verdwenen. Na stormen spoelen soms vondsten aan op de stranden van Voorne-Putten: munten, aardewerk, metalen voorwerpen. De Brittenburg bij Katwijk was een soortgelijk lot beschoren.",watWasHier:"Kustfort bij riviermonding. Bewaking zeeroute.",watTeZien:"Fort verdwenen in zee. Soms strandvondsten na stormen.",verwachteVondsten:"Na stormen: munten, aardewerk, metalen op strand.",betekenis:"Toont voormalige kustlijn en Romeinse kustverdediging.",bronnen:[]},"Castellum Randwijk":{naam:"Castellum Randwijk",type:"castellum",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke locatie van een Romeins castellum bij Randwijk aan de Rijn in de Betuwe. Het bestaan en de exacte locatie zijn onzeker. De rivier heeft veel oude resten weggespoeld. Randwijk ligt tussen bekende fortlocaties wat een fort hier logisch zou maken. In de uiterwaarden zijn bij erosie Romeinse vondsten gedaan. Het dynamische rivierlandschap maakt onderzoek lastig maar kan ook vondsten blootleggen na hoog water.",watWasHier:"Mogelijk castellum. Bestaan en locatie onzeker.",watTeZien:"Geen zichtbare resten. Uiterwaarden.",verwachteVondsten:"Mogelijk vondsten na erosie of hoog water.",betekenis:"Zou gat in fortenketen opvullen indien bevestigd.",bronnen:[]},"Versterking Scheveningseweg":{naam:"Minifort Scheveningseweg",type:"minifort",periode:"2e eeuw n.Chr.",beschrijving:"Vermoede locatie van een klein Romeins kustfort bij de Scheveningseweg in Den Haag, vergelijkbaar met het nabije Minifort Ockenburg. Dit type miniforten bewaakte de kust tegen piraten en Germaanse raids over zee. Ruimte voor 20-30 soldaten. De exacte locatie is niet vastgesteld maar vondsten in de omgeving suggereren Romeinse militaire aanwezigheid. Het zou aantonen dat de gehele Noordzeekust werd bewaakt, niet alleen de riviermonding.",watWasHier:"Vermoedelijk klein kustfort zoals Ockenburg. 20-30 soldaten.",watTeZien:"Locatie niet vastgesteld.",verwachteVondsten:"Militaria, aardewerk 2e eeuw indien locatie gevonden.",betekenis:"Zou Romeinse kustverdediging Den Haag bevestigen.",bronnen:[]},"Tongeren - Sacramentstraat":{naam:"Atuatuca Tungrorum",latinNaam:"Atuatuca Tungrorum / Municipium Tungrorum",type:"legerkamp",periode:"ca. 10 v.Chr. - 400 n.Chr.",beschrijving:"Oudste stad van Belgi, gesticht ca. 10 v.Chr. Hoofdstad van de Civitas Tungrorum - met 150 hectare de grootste civitas van Noordwest-Europa! Strategisch gelegen op de weg Boulogne-Bavay-Keulen. Onder keizer Trajanus (2e eeuw) ommuurd met meer dan 4,5 km muren en tot 3 grachten - waarvan nog 1,5 km staat! Een 1e-eeuwse buste van Julius Caesar is een topstuk. Het Gallo-Romeins Museum (Europees Museum van het Jaar 2011) toont een schat aan vondsten: beelden, steles, sieraden, architectuurelementen. Ook de Romeinse muren, het tempelcomplex, het aquaduct van Beukenberg en tumuli zijn te bezoeken.",watWasHier:"Civitas-hoofdstad Tungri (150 ha). 4,5 km stadsmuur. Politiek en religieus centrum.",watTeZien:"Gallo-Romeins Museum. Romeinse muren (1,5 km). Tempelcomplex. Aquaduct Beukenberg. Tumuli.",verwachteVondsten:"Stadsaardewerk, bouwmateriaal, munten, inscripties, religieuze objecten.",betekenis:"Oudste stad van Belgi. Grootste civitas van Noordwest-Europa.",bronnen:["https://www.galloromeinsmuseum.be","https://www.canonvanvlaanderen.be/en/events/tongeren-a-roman-town/"]},"Valkenburg-Marktveld, mini-castellum":{naam:"Marktveld Valkenburg",type:"minifort",periode:"1e - 2e eeuw n.Chr.",beschrijving:"Klein Romeins castellum met wachttoren bij het Marktveld in Valkenburg (Zuid-Holland), nabij het grotere Praetorium Agrippinae. Dit type miniforten vulde de ruimtes tussen de grote castella op. Wachttoren voor signalering en kleine bezetting voor patrouilles. De combinatie van toren en klein fort was effectief voor grensbewaking. Bij opgravingen zijn de contouren vastgesteld. Vondsten in Archeologisch Steunpunt Valkenburg.",watWasHier:"Klein fort met wachttoren. Aanvulling op Praetorium Agrippinae.",watTeZien:"Archeologisch Steunpunt Valkenburg.",verwachteVondsten:"Militaria, aardewerk, kleine persoonlijke voorwerpen.",betekenis:"Toont gelaagdheid Romeinse grensverdediging.",bronnen:[]},"Wachttoren a":{naam:"Wachttoren Utrecht-West",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Een van meerdere Romeinse wachttorens in de omgeving van Utrecht, onderdeel van het signaleringssysteem langs de Limes. De torens stonden om de 1-2 kilometer met zicht op elkaar. Bij nadering van vijanden werden vuur- of rooksignalen gegeven. Binnen minuten kon de hele grens gewaarschuwd zijn. Kleine houten constructie op aarden verhoging met bezetting van 4-8 soldaten. Vondsten zijn schaars door de kleine schaal.",watWasHier:"Houten signaleertoren. 4-8 soldaten.",watTeZien:"Geen zichtbare resten.",verwachteVondsten:"Kleine hoeveelheden aardewerk en militaria.",betekenis:"Onderdeel vroegwaarschuwingssysteem.",bronnen:[]},"Wachttoren b":{naam:"Wachttoren Utrecht-Oost",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse wachttoren ten oosten van Utrecht, onderdeel van de keten signaleertorens langs de Rijn. Elke toren had zichtlijn naar de volgende. Dit systeem maakte snelle communicatie mogelijk in een tijd zonder telegraaf of telefoon. De soldaten woonden in of bij de toren en hielden permanent wacht. Bij gevaar werden brandende fakkels of rookpotten gebruikt. De locatie is archeologisch vastgesteld maar niet zichtbaar.",watWasHier:"Signaleertoren in torenketen. Permanente wacht.",watTeZien:"Geen zichtbare resten.",verwachteVondsten:"Aardewerk, militaria, persoonlijke bezittingen.",betekenis:"Onderdeel communicatienetwerk Limes.",bronnen:[]},"Wachttoren c":{naam:"Wachttoren Hoge Woerd",type:"wachttoren",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse wachttoren nabij Castellum Op de Hoge Woerd, onderdeel van het signaleringssysteem. Torens bij forten dienden als vooruitgeschoven posten en waarschuwingsplaatsen. De combinatie van fort met omringende torens was de standaard Romeinse grensverdediging. Het Archeologisch Park Hoge Woerd geeft een goed beeld van hoe dit systeem functioneerde. De toren zelf is niet gereconstrueerd maar de context is te begrijpen.",watWasHier:"Signaleertoren bij castellum. Vooruitgeschoven post.",watTeZien:"Archeologisch Park Hoge Woerd toont context.",verwachteVondsten:"Aardewerk, militaria.",betekenis:"Toont samenhang fort en torens.",bronnen:[]},"Zwammerdam-Rijksstraatweg":{naam:"Zwammerdam-Rijksstraatweg",type:"versterking",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Mogelijke militaire nederzetting aan de Rijksstraatweg in Zwammerdam, naast het bekende Nigrum Pullum fort. Mogelijk een vicus (burgerdorp) of aparte militaire faciliteit. Bij Zwammerdam werden de beroemde Romeinse schepen gevonden. De hele zone langs de Oude Rijn was dicht bezet met militaire en civiele structuren. Vondsten wijzen op intensieve Romeinse activiteit: aardewerk, munten, militaria en door de natte veenbodem ook organisch materiaal.",watWasHier:"Mogelijk vicus of militaire faciliteit nabij Nigrum Pullum.",watTeZien:"Geen zichtbare resten.",verwachteVondsten:"Aardewerk, munten, militaria, organisch materiaal.",betekenis:"Toont dichtheid Romeinse bewoning langs Oude Rijn.",bronnen:[]},"Kastell Aachen":{naam:"Aquae Granni",latinNaam:"Aquae Granni",type:"versterking",periode:"1e - 4e eeuw n.Chr.",beschrijving:'Romeinse kuuroord bij de hete bronnen (tot 75C!) gewijd aan Apollo en de Keltische geneesheer Grannos - "aan de wateren van Grannos". In de 1e eeuw uitgebouwd tot kurort voor de legioenen van Neder-Germani. Onder keizer Trajanus bouwden legioenen uit Xanten een aquaduct en thermen onder de huidige Dom. De Mnsterthermen hadden de indeling van een valetudinarium (Romeins hospitaal). Karel de Grote bouwde hier zijn Pfalz (793-813) en maakte Aken tot keizerlijke residentie - bewust als "vernieuwer van het Romeinse Rijk". De Dom (UNESCO 1978, eerste in Duitsland!) staat op Romeinse fundamenten. Karel stierf hier in 814.',watWasHier:"Kurort voor legioenen. Thermen. Later keizerlijke Pfalz van Karel de Grote.",watTeZien:"Dom (UNESCO). Centre Charlemagne. Thermen onder de stad.",verwachteVondsten:"Badhuisresten, inscripties, munten, Romeins en Karolingisch bouwmateriaal.",betekenis:"Ononderbroken bewoning van Romeinse tijd tot Karel de Grote. Eerste UNESCO-site Duitsland.",bronnen:["https://centre-charlemagne.eu/zeitreise/?lang=en","http://www.aquaegranni.de/","https://de.wikipedia.org/wiki/Aquae_Granni"]},Hazerswoude:{naam:"Hazerswoude-Rijndijk",type:"wachttoren",periode:"2e - 3e eeuw n.Chr.",beschrijving:"Bevestigde Romeinse wachtpost langs de Limesweg bij Hazerswoude-Rijndijk. Bij opgravingen in 2021-2023 door Vestigia BV en het Rijksmuseum van Oudheden zijn spectaculaire vondsten gedaan: resten van de houten Limesweg (eiken palen uit 124-125 n.Chr.), een Romeinse dam, en aanwijzingen voor een kleine wachtpost. Bijzondere vondsten: de eerste Romeinse mijlpaal in Nederland (2023), een muntschat met 22 zilveren munten (na 166 n.Chr.), aardewerk, mantelspelden, leren schoenzolen en ca. 40.000-50.000 objecten. De locatie ligt precies tussen Albaniana (Alphen) en Matilo (Leiden).",watWasHier:"Wachtpost langs de Limesweg. Houten wegdek uit 124-125 n.Chr.",watTeZien:"Opgravingen afgerond. Vondsten naar Rijksmuseum van Oudheden.",verwachteVondsten:"Militaria, munten, aardewerk. Gebied grotendeels onderzocht.",betekenis:"Eerste Romeinse mijlpaal in Nederland. Bevestigt trac Limesweg.",bronnen:["https://www.rmo.nl/onderzoek/opgravingsprojecten/hazerswoude/","https://www.vestigia.nl/opgraving-hazerswoude-in-samenwerking-met-het-rijksmuseum-van-oudheden-en-de-gemeente-alphen-aan-den-rijn/","https://romeinsalphen.nl/themas/romeinse-weg-hazerswoude-rijndijk"]},Albaniana:{naam:"Albaniana",latinNaam:"Albaniana",type:"castellum",periode:"41 - 275 n.Chr.",beschrijving:"Groot Romeins castellum bij Alphen aan den Rijn, een van de belangrijkste forten aan de Nederlandse Limes. Het fort werd gesticht in 41-42 n.Chr., kort na de dood van keizer Caligula. De locatie is nauwkeurig bekend: bij het Rijnplein en Theater Castellum aan de Castellumstraat. Het fort (80x120m) was beschermd door een omgrachte aarden wal. Bij opgravingen tussen 1950 en 2002 zijn uitgebreide resten gevonden. Door de natte bodem zijn veel houten structuren bewaard gebleven. Een bronzen maquette van het castellum staat op het Rijnplein.",watWasHier:"Castellum met vicus. Locatie bekend: Rijnplein/Castellumstraat.",watTeZien:"Bronzen maquette Rijnplein. Theater Castellum op fortlocatie. Archeon.",verwachteVondsten:"Munten, militaria, aardewerk, dakpannen, fibulae. Veel bij bouwwerkzaamheden.",betekenis:"Een van de hoofdforten aan de Limes. UNESCO Werelderfgoed.",bronnen:["https://www.hierisalphen.nl/home/ontdekken/romeinse-limes","https://www.romeinen.nl/weten/nederland-in-de-romeinse-tijd/zuid-holland/alphen-aan-den-rijn","https://archeologiehuiszuidholland.nl/zien-en-doen/het-archeologiehuis/fort-aan-de-rijn"]}},OSt={naam:"Romeins fort",type:"versterking",periode:"1e - 3e eeuw n.Chr.",beschrijving:"Romeinse militaire versterking langs de Limes, de noordgrens van het Romeinse Rijk. Forten lagen om de 10-15 km langs de Rijn. Garnizoen van hulptroepen (auxilia) die de grens bewaakten tegen Germaanse invallen. Standaard rechthoekige plattegrond met houten of stenen muur, gracht, poorten en binnengebouwen (barakken, commandopost, graanopslagplaats, werkplaatsen). Buiten de muren vaak een vicus (burgerdorp) met handelaren en soldatenfamilies. Vondsten: munten, fibulae (mantelspelden), aardewerk, wapens, gereedschap. Onderdeel van UNESCO Werelderfgoed sinds 2021."},LSt={castellum:"Castellum (legerplaats)",wachttoren:"Wachttoren (signaalpost)",vlootbasis:"Vlootbasis (haven)",legerkamp:"Legerkamp (castra)",minifort:"Minifort (wachtpost)",versterking:"Versterking",villa:"Villa (militair gebruikt)"};lr.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");function wae(t){if(!t)return t;const e={Mo:"ma",Tu:"di",We:"wo",Th:"do",Fr:"vr",Sa:"za",Su:"zo",Mon:"ma",Tue:"di",Wed:"wo",Thu:"do",Fri:"vr",Sat:"za",Sun:"zo",PH:"feestdagen",SH:"schoolvakantie"};let n=t;return Object.entries(e).forEach(([r,i])=>{n=n.replace(new RegExp(`\\b${r}\\b`,"gi"),i)}),n=n.replace(/\boff\b/gi,"gesloten").replace(/\bclosed\b/gi,"gesloten").replace(/\bopen\b/gi,"open"),n}async function DSt(t){try{const e=Fn(t),n=lr("EPSG:4326","EPSG:28992",e);if(n[0]<7e3||n[0]>3e5||n[1]<289e3||n[1]>629e3)return null;const r=1,s=`https://service.pdok.nl/rws/ahn/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=dtm_05m&QUERY_LAYERS=dtm_05m&INFO_FORMAT=application/json&CRS=EPSG:28992&BBOX=${`${n[0]-r},${n[1]-r},${n[0]+r},${n[1]+r}`}&WIDTH=1&HEIGHT=1&I=0&J=0`,a=await(await fetch(s)).json();if(a.features&&a.features.length>0){const l=a.features[0].properties,c=l?.value_list??l?.GRAY_INDEX??l?.value??l?.gray_index;if(c!=null){const u=typeof c=="number"?c:parseFloat(c);if(!isNaN(u))return u}}}catch(e){console.warn("AHN height query failed:",e)}return null}const jSt={ABG:"Alphen-Chaam",ACM:"Alkmaar",ALF:"Alfen",ALK:"Alkemade",AML:"Ameland",AMR:"Amerongen",AMS:"Amsterdam",ANL:"Anloo",APD:"Apeldoorn",ARN:"Arnhem",ASN:"Assen",AVW:"Avenhorn",BDA:"Breda",BLK:"Blokker",BRN:"Barneveld",DEL:"Delft",DHG:"Den Haag",DRD:"Dordrecht",EHV:"Eindhoven",EMN:"Emmen",EPE:"Epe",GNP:"Gennep",GRN:"Groningen",GRV:"Grave",GTB:"Giethoorn",HDK:"Harderwijk",HLM:"Haarlem",HLN:"Heiloo",HRL:"Harlingen",HTN:"Houten",LDN:"Leiden",LWR:"Leeuwarden",MST:"Maastricht",NKK:"Nijkerk",NMG:"Nijmegen",OTM:"Ootmarsum",RTD:"Rotterdam",SND:"Sneek",TBG:"Tilburg",UTR:"Utrecht",VLO:"Venlo",WGN:"Wageningen",ZWL:"Zwolle",ZTP:"Zutphen",444:"Houten",811:"Gouda",310:"Utrecht",344:"Amsterdam",363:"Rotterdam",518:"Den Haag",758:"Eindhoven",772:"Tilburg",855:"Breda",85:"Arnhem",268:"Nijmegen",14:"Groningen",80:"Leeuwarden",995:"Maastricht",106:"Enschede",153:"Zwolle",34:"Almere"},$St={1:"Zeer lage trefkans op archeologische resten",2:"Lage trefkans op archeologische resten",3:"Middelhoge trefkans op archeologische resten",4:"Hoge trefkans op archeologische resten",5:"Lage trefkans (water)",6:"Middelhoge trefkans (water)",7:"Hoge trefkans (water)",8:"Water",9:"Niet gekarteerd"};function bae(t,e){const n=[],r=t.toLowerCase(),i=(e||"").toLowerCase();return r.includes("kalkhoudend")||i.endsWith("a")?n.push("Kalkhoudend = goede metaalconservering"):(r.includes("kalkarm")||r.includes("kalkloos"))&&n.push("Kalkarm = meer corrosie op metalen"),r.includes("poldervaag")?n.push("Poldervaaggrond = jonge rivierklei, ingepolderd gebied"):r.includes("enkeerdgrond")||r.includes("enk")?n.push("Enkeerdgrond = oude akkers met plaggenbemesting - archeologisch interessant!"):r.includes("podzol")?n.push("Podzolgrond = uitgeloogde zandgrond, vaak zuur"):(r.includes("veengrond")||r.includes("veen"))&&n.push("Veengrond = zuur, slechte metaalconservering (tenzij waterverzadigd)"),r.includes("zware klei")?n.push("Zware klei = moeilijk graven, goede conservering"):r.includes("lichte klei")||r.includes("zavel")?n.push("Zavel/lichte klei = redelijk te graven"):r.includes("zand")&&!r.includes("zavel")&&n.push("Zandgrond = makkelijk graven"),r.includes("rivierklei")||i.startsWith("r")?n.push("Rivierafzetting"):(r.includes("zeeklei")||i.startsWith("m"))&&n.push("Zeekleiafzetting"),n}function FSt(){const t=li(_t=>_t.map);gr(_t=>_t.isDrawingMode);const e=gh(_t=>_t.removeVondst),n=gh(_t=>_t.updateVondst),r=gh(_t=>_t.vondsten),{layers:i,addPoint:s,addLayer:o}=ps(),[a,l]=Y.useState([]),[c,u]=Y.useState(0),[h,f]=Y.useState(!1),[g,y]=Y.useState(null),[_,b]=Y.useState(!1),[T,A]=Y.useState(!1),[I,P]=Y.useState(null),[N,L]=Y.useState(null),[C,M]=Y.useState(null),[O,D]=Y.useState(null),[V,U]=Y.useState(!1),[G,de]=Y.useState(null),[ke,Ue]=Y.useState(null),[Ne,fe]=Y.useState(null),[De,Ce]=Y.useState(!1),[Q,W]=Y.useState(""),[ne,ie]=Y.useState([]),le=ne[c]||null,[ve,qe]=Y.useState(()=>{const _t=localStorage.getItem("popupTextScale");return _t?parseInt(_t):100}),[Ke,Se]=Y.useState("half"),we=_t=>{qe(_t),localStorage.setItem("popupTextScale",_t.toString())},Dt=a[c]||"",Ye=a.length>1,on=_t=>{const Qn=_t.match(/<strong[^>]*>(.*?)<\/strong>/);if(Qn){const dr=Qn[1].replace(/<[^>]+>/g,""),Ft=_t.replace(Qn[0],"").replace(/^(<br\s*\/?>)+/,"");return{title:dr,contentWithoutTitle:Ft}}return{title:"",contentWithoutTitle:_t}},jt=_t=>_t.replace(/class="([^"]*)"/g,(dr,Ft)=>{if(Ft.includes("text-xs")){const jn=Ft.replace(/\btext-xs\b/g,"").trim();return jn?`style="font-size:0.857em" class="${jn}"`:'style="font-size:0.857em"'}if(Ft.includes("text-sm")){const jn=Ft.replace(/\btext-sm\b/g,"").trim();return jn?`class="${jn}"`:""}return dr}).replace(/class=""/g,""),{title:pn,contentWithoutTitle:_n}=on(Dt),dt=jt(_n),hr=Dt.includes("Landbouwperceel"),zn=Dt.includes("data-vondst-id="),Hn=()=>{u(_t=>(_t-1+a.length)%a.length)},ei=()=>{u(_t=>(_t+1)%a.length)},_o=async()=>{if(console.log(" HOOGTEKAART KNOP GEKLIKT"),console.log(" parcelCoordinate uit state:",g),!t||!g||T){console.log(" STOP - map:",!!t,"coord:",g,"loading:",T);return}console.log(` DOORGEVEN AAN showParcelHeightMap: [${g[0]}, ${g[1]}]`),A(!0);try{await U1t(t,g)&&b(!0)}catch(_t){console.error("Failed to load height map:",_t)}finally{A(!1)}},Rr=()=>{t&&(Gz(t),b(!1))};Y.useEffect(()=>{if(!t)return;const _t=Ft=>{let jn='<strong class="text-purple-800">AMK Monument</strong>';if(Ft.toponiem&&(jn+=`<br/><span class="text-sm font-semibold">${Ft.toponiem}</span>`),Ft.kwaliteitswaarde&&(jn+=`<br/><span class="text-sm text-purple-700">${Ft.kwaliteitswaarde}</span>`),Ft.omschrijving&&(jn+=`<br/><span class="text-xs text-gray-600 mt-1 block">${Ft.omschrijving}</span>`),Ft.txt_label){const en=Ft.txt_label.split(", ").slice(0,3).join(", ");jn+=`<br/><span class="text-xs text-gray-500 italic">${en}${Ft.txt_label.split(", ").length>3?"...":""}</span>`}return jn},Qn=async(Ft,jn)=>{const en=[],$o=t.getLayers().getArray().filter(Gi=>Gi instanceof $m&&Gi.getVisible()?Gi.getSource()instanceof KCe:!1);for(const Gi of $o){const Ds=Gi.getSource();if(!Ds)continue;const Nn=Gi.get("title")||"";if(Nn.startsWith("Paleokaart"))continue;if(Nn==="Archeo Landschappen"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=100,z=`https://services.rce.geovoorziening.nl/landschappenkaart/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=landschappenkaart_nl&QUERY_LAYERS=landschappenkaart_nl&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,Ve=ae.landschapsnaam||ae.naam||"Archeologisch Landschap",ee=ae.omschrijving||"";let ge=`<strong class="text-green-800">${Ve}</strong>`;ee&&(ge+=`<br/><span class="text-sm text-gray-600">${ee}</span>`),ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',ge+='<div class="text-sm text-gray-700 mt-1">Een archeologisch landschap is een gebied waar het landschap nog sporen draagt van menselijke activiteit uit het verleden. Denk aan oude akkers, nederzettingen of verdedigingswerken.</div>',ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ge+='<div class="text-sm text-gray-700 mt-1">Aardewerk, munten, gereedschap en andere voorwerpen van vroegere bewoners. De kans op vondsten hangt af van het type landschap.</div>',ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',ge+='<div class="text-sm text-gray-700 mt-1"><a href="https://www.cultureelerfgoed.nl/onderwerpen/bronnen-en-kaarten/overzicht/landschappenkaart" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">RCE Landschappenkaart</a></div>',ge+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Landschapstypen_van_Nederland" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Landschapstypen</a></div>',en.push(ge)}}catch(He){console.warn("Archeo Landschappen WMS query failed:",He)}continue}if(Nn==="Essen"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=100,z=`https://services.rce.geovoorziening.nl/landschapsatlas/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=essen&QUERY_LAYERS=essen&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let Ve='<strong class="text-amber-800">Es (historisch akkercomplex)</strong>';(ae.naam||ae.Naam||ae.NAME)&&(Ve+=`<br/><span class="text-sm font-semibold text-amber-700">${ae.naam||ae.Naam||ae.NAME}</span>`),(ae.type||ae.Type||ae.TYPE)&&(Ve+=`<br/><span class="text-xs text-gray-600">${ae.type||ae.Type||ae.TYPE}</span>`),(ae.omschrijving||ae.Omschrijving)&&(Ve+=`<br/><span class="text-xs text-gray-500">${ae.omschrijving||ae.Omschrijving}</span>`),Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is een es?</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1">Een es is een oud akkercomplex op hogere zandgronden. Eeuwenlang werden hier gewassen verbouwd. De bodem werd bemest met plaggen en mest, waardoor de grond donker en vruchtbaar werd.</div>',Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1">Munten, gespen, knopen, aardewerk en soms bijzondere voorwerpen die door bemesting op het land terechtkwamen. Essen behoren tot de beste vindplaatsen voor metaaldetectie.</div>',Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Conservering</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1 italic">De zure zandgrond tast metaal aan. IJzer en koper zijn vaak slecht bewaard. Zilver en brons houden zich beter.</div>',Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',Ve+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Es_(geografie)" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Es (geografie)</a></div>',en.push(Ve)}}catch(He){console.warn("Essen WMS query failed:",He)}continue}if(Nn==="FAMKE Steentijd"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=`https://geoportaal.fryslan.nl/arcgis/rest/services/Themas/cultuurhistorie/MapServer/2/query?geometry=${Ae[0]},${Ae[1]}&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=BESCHR,BESCHRTOELICHTING,BESCHRLINK&returnGeometry=false&f=json`,z=await(await fetch(Ie)).json();if(z.features&&z.features.length>0){const Et=z.features[0].attributes;let X='<strong class="text-amber-800">FAMKE Steentijd-Bronstijd</strong>';X+='<br/><span class="text-sm text-gray-500">Friese verwachtingskaart</span>';const ae=Et.BESCHR||"";ae&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Advies</span></div>',X+=`<div class="text-sm text-amber-700 mt-1 font-medium">${ae}</div>`);const Ve=Et.BESCHRTOELICHTING||"";Ve&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Toelichting</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${Ve}</div>`);const ee=Et.BESCHRLINK||"";ee&&(X+=`<div class="mt-3"><a href="${ee}" target="_blank" rel="noopener noreferrer" class="text-sm text-blue-600 hover:underline">Meer informatie</a></div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is FAMKE?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">FAMKE is de Friese Archeologische Monumentenkaart Extra. Deze kaart toont waar in Friesland vondsten uit de steentijd en bronstijd te verwachten zijn.</div>',en.push(X)}}catch(He){console.warn("FAMKE Steentijd query failed:",He)}continue}if(Nn==="FAMKE IJzertijd"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=`https://geoportaal.fryslan.nl/arcgis/rest/services/Themas/cultuurhistorie/MapServer/1/query?geometry=${Ae[0]},${Ae[1]}&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=BESCHR,BESCHRTOELICHTING,BESCHRLINK&returnGeometry=false&f=json`,z=await(await fetch(Ie)).json();if(z.features&&z.features.length>0){const Et=z.features[0].attributes;let X='<strong class="text-orange-800">FAMKE IJzertijd-Middeleeuwen</strong>';X+='<br/><span class="text-sm text-gray-500">Friese verwachtingskaart</span>';const ae=Et.BESCHR||"";ae&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Advies</span></div>',X+=`<div class="text-sm text-orange-700 mt-1 font-medium">${ae}</div>`);const Ve=Et.BESCHRTOELICHTING||"";Ve&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Toelichting</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${Ve}</div>`);const ee=Et.BESCHRLINK||"";ee&&(X+=`<div class="mt-3"><a href="${ee}" target="_blank" rel="noopener noreferrer" class="text-sm text-blue-600 hover:underline">Meer informatie</a></div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is FAMKE?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">FAMKE is de Friese Archeologische Monumentenkaart Extra. Deze kaart toont waar in Friesland vondsten uit de ijzertijd tot en met de middeleeuwen te verwachten zijn.</div>',en.push(X)}}catch(He){console.warn("FAMKE IJzertijd query failed:",He)}continue}if(Nn==="Archeo Onderzoeken"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=100,z=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&QUERY_LAYERS=archeologische_onderzoeksmeldingen_openbaar_rd&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}&FEATURE_COUNT=20`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0)for(const ae of X.features){const Ve=ae.properties,ee=Ve.type_onderzoek||"",ge=Ve.projectnaam||Ve.project_naam||Ve.naam||"",je=ge&&ge!=="-"&&ge.trim()!==""&&!/^\d+$/.test(ge.trim())?ge:"",Je=Ve.gemeente||"",ze=Ve.uitvoerder||"",nt=Ve.onderzoeksmeldingnummer||"",et=Ve.adres||Ve.straat||"";let Mt="Archeologisch Onderzoek";je?Mt=je:Je&&et?Mt=`${Je} - ${et}`:Je&&(Mt=`Onderzoek ${Je}`);let zt=`<strong class="text-blue-800">${Mt}</strong>`;if(ee&&(zt+=`<br/><span class="text-sm font-semibold text-blue-700">${ee}</span>`),Je&&!Mt.includes(Je)&&(zt+=`<br/><span class="text-sm text-gray-700">${Je}</span>`),et&&!Mt.includes(et)&&(zt+=`<br/><span class="text-sm text-gray-600">${et}</span>`),nt&&(zt+=`<br/><span class="text-xs text-gray-500 font-mono">OM: ${nt}</span>`),ze&&(zt+=`<br/><span class="text-sm text-gray-700">Uitvoerder: ${ze}</span>`),Ve.startdatum||Ve.einddatum){const re=[Ve.startdatum,Ve.einddatum].filter(Boolean).join(" - ");zt+=`<br/><span class="text-xs text-gray-600">Periode: ${re}</span>`}const yn=[];Ve.periode_paleolithicum&&yn.push("Paleolithicum"),Ve.periode_mesolithicum&&yn.push("Mesolithicum"),Ve.periode_neolithicum&&yn.push("Neolithicum"),Ve.periode_bronstijd&&yn.push("Bronstijd"),Ve.periode_ijzertijd&&yn.push("IJzertijd"),Ve.periode_romeins&&yn.push("Romeins"),Ve.periode_middeleeuwen&&yn.push("Middeleeuwen"),Ve.periode_nieuwe_tijd&&yn.push("Nieuwe tijd"),yn.length>0&&(zt+=`<br/><span class="text-sm text-purple-700">Datering: ${yn.join(", ")}</span>`),zt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',ee.toLowerCase().includes("opgraving")?zt+='<div class="text-sm text-gray-700 mt-1">Hier is een archeologische opgraving gedaan. Professionele archeologen hebben vondsten en sporen gedocumenteerd en geborgen.</div>':ee.toLowerCase().includes("bureauonderzoek")?zt+='<div class="text-sm text-gray-700 mt-1">Een bureauonderzoek naar de archeologische verwachting op basis van historische bronnen en kaarten.</div>':ee.toLowerCase().includes("booronderzoek")?zt+='<div class="text-sm text-gray-700 mt-1">Met boringen is onderzocht wat er in de grond zit. Vaak de eerste stap om te bepalen of er verder onderzoek nodig is.</div>':ee.toLowerCase().includes("proefsleuven")?zt+='<div class="text-sm text-gray-700 mt-1">Proefsleuven zijn gegraven om te kijken of er archeologische sporen in de grond zitten.</div>':ee.toLowerCase().includes("begeleiding")?zt+='<div class="text-sm text-gray-700 mt-1">Archeologische begeleiding bij graafwerk. Een archeoloog was aanwezig om te controleren of er vondsten naar boven kwamen.</div>':ee.toLowerCase().includes("inventariserend")||ee.toLowerCase().includes("karterend")?zt+='<div class="text-sm text-gray-700 mt-1">Verkennend onderzoek om te bepalen of er archeologische resten in de grond kunnen zitten.</div>':zt+='<div class="text-sm text-gray-700 mt-1">Op deze locatie is archeologisch onderzoek uitgevoerd. De resultaten zijn opgeslagen in het landelijke archief.</div>',zt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Interessant voor detectie?</span></div>',zt+='<div class="text-sm text-gray-700 mt-1 italic">Onderzoekslocaties kunnen interessant zijn: archeologen vinden vaak niet alles. Maar check altijd eerst of je daar mag zoeken.</div>',zt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Rapport opzoeken</span></div>';let q="";if(je?q=je:ze&&Je?q=`${ze} ${Je}`:Je&&(q=Je),q){const re=q.length>35?q.substring(0,35)+"...":q;zt+=`<div class="text-sm text-gray-700 mt-1"><a href="https://archaeology.datastations.nl/dataverse/root?q=${encodeURIComponent(q)}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Zoek "${re}" in DANS</a></div>`,zt+=`<div class="text-sm text-gray-700 mt-1"><a href="https://scholar.google.nl/scholar?q=${encodeURIComponent(q+" archeologisch rapport")}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Zoek in Google Scholar</a></div>`}nt&&(zt+=`<div class="text-sm text-gray-700 mt-1"><a href="https://archis.cultureelerfgoed.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Zoek OM ${nt} in ARCHIS</a> <span class="text-xs text-gray-400">(account nodig)</span></div>`),en.push(zt)}}catch(He){console.warn("Archeo Onderzoeken WMS query failed:",He)}continue}if(Nn==="IKAW"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=500,z=`https://services.rce.geovoorziening.nl/ikaw/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&QUERY_LAYERS=IKAW3Indicatievekaartarcheologischewaarden2008&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,Ve=Math.round(ae.PALETTE_INDEX||ae.palette_index||0),ee=$St[Ve]||`Trefkans onbekend (${Ve})`;let ge='<strong class="text-orange-800">IKAW Verwachtingskaart</strong>';ge+='<br/><span class="text-sm text-gray-500">Kaart met kansen op archeologische vondsten</span>',ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat betekent dit?</span></div>',ge+=`<div class="text-sm text-orange-700 mt-1">${ee}</div>`;const Je={1:{tekst:"De kans op archeologische vondsten is hier zeer klein. De grond is waarschijnlijk verstoord of te jong.",vondsten:"Niet veel te verwachten, maar verrassingen zijn altijd mogelijk.",kleur:"text-gray-600"},2:{tekst:"De kans op vondsten is laag, maar niet uitgesloten. Soms worden hier toch interessante objecten gevonden.",vondsten:"Af en toe losse vondsten uit verschillende periodes.",kleur:"text-yellow-600"},3:{tekst:"Dit is een interessant gebied met een redelijke kans op vondsten. Hier woonden of werkten mensen in het verleden.",vondsten:"Aardewerk, munten, metalen voorwerpen uit verschillende tijdperken.",kleur:"text-amber-600"},4:{tekst:"Dit is een zeer kansrijk gebied! Hier zijn waarschijnlijk resten van oude bewoning of activiteit. Let op: bij graafwerk kan een vergunning nodig zijn.",vondsten:"Grote kans op interessante vondsten: aardewerk, munten, sieraden, gereedschap.",kleur:"text-orange-600"},5:{tekst:"Dit is een waterbodem. Vondsten zijn hier moeilijker te bereiken maar kunnen goed bewaard zijn gebleven.",vondsten:"Scheepswrakken, verloren lading, gedumpte voorwerpen.",kleur:"text-blue-600"},6:{tekst:"Waterbodem met archeologische potentie. Hier kunnen interessante vondsten liggen die door het water goed bewaard zijn.",vondsten:"Scheepsresten, ankers, aardewerk, metalen voorwerpen.",kleur:"text-blue-600"},7:{tekst:"Waterbodem met hoge archeologische waarde. Hier zijn bekende vindplaatsen of scheepswrakken.",vondsten:"Belangrijke maritieme vondsten, beschermd gebied.",kleur:"text-blue-700"}}[Ve];Je&&(ge+=`<div class="text-sm ${Je.kleur} mt-1">${Je.tekst}</div>`,ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ge+=`<div class="text-sm text-gray-700 mt-1">${Je.vondsten}</div>`),ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de IKAW?</span></div>',ge+='<div class="text-sm text-gray-700 mt-1">De IKAW (Indicatieve Kaart Archeologische Waarden) toont de kans op archeologische vondsten in heel Nederland. De kaart is gemaakt door de Rijksdienst voor het Cultureel Erfgoed.</div>',en.push(ge)}}catch(He){console.warn("IKAW WMS query failed:",He)}continue}if(Nn==="Inundatiegebieden"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=100,z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=inundaties&QUERY_LAYERS=inundaties&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let Ve='<strong class="text-blue-800">Inundatiegebied</strong>';(ae["linie-naam"]||ae.linie_naam)&&(Ve+=`<br/><span class="text-sm font-semibold text-blue-700">${ae["linie-naam"]||ae.linie_naam}</span>`),ae.naam&&(Ve+=`<br/><span class="text-sm text-gray-700">${ae.naam}</span>`),ae.periode&&(Ve+=`<br/><span class="text-xs text-gray-500">${ae.periode}</span>`),ae.lin_period&&(Ve+=`<br/><span class="text-xs text-gray-400">${ae.lin_period}</span>`),en.push(Ve)}}catch(He){console.warn("Inundatiegebieden WMS query failed:",He)}continue}if(Nn==="Militaire Objecten"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=50,z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=objecten&QUERY_LAYERS=objecten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,Ve=ae.obj_soort||"",ee=ae.obj_naam||"",ge=ae.lin_period||"",je=ae["linie-naam"]||ae.linie_naam||"";let Je=Ve||"Militair Object",ze="Dit is een historisch militair object uit de Nederlandse verdedigingsgeschiedenis.",nt="";const et=Ve.toLowerCase();et.includes("fort")?(ze="Een fort is een versterkte verdedigingspost, vaak met dikke muren en geschutsopstellingen. Forten maakten deel uit van grotere verdedigingslinies.",nt="Rond forten worden soms kogels, knopen van uniformen, muntjes of andere militaire voorwerpen gevonden."):et.includes("schans")?(ze="Een schans is een kleinere versterking, vaak gemaakt van aarde en palissaden. Schansen werden gebruikt om strategische punten te verdedigen.",nt="Bij schansen kun je musketkogels, knopen en soms munten uit de 17e-18e eeuw tegenkomen."):et.includes("batterij")||et.includes("battery")?(ze="Een batterij is een geschutsopstelling, vaak op een strategische plek om vijanden onder vuur te nemen.",nt="Bij batterijen worden soms kanonkogels of onderdelen van geschut gevonden."):et.includes("bunker")||et.includes("kazemat")?(ze="Een bunker of kazemat is een versterkte betonnen schuilplaats. Veel werden gebouwd rond 1940 als onderdeel van verdedigingslinies.",nt="Bij bunkers worden soms militaire voorwerpen uit WOII gevonden, zoals knopen, gespen of munitieresten."):et.includes("sluis")||et.includes("inlaatwerk")?(ze="Militaire sluizen en inlaatwerken werden gebruikt om land onder water te zetten (inunderen). Dit was een belangrijke verdedigingstactiek.",nt="Bij historische sluizen worden soms voorwerpen gevonden van soldaten die deze bewaakten."):et.includes("toren")||et.includes("wachttoren")?(ze="Wachttorens werden gebruikt om de omgeving in de gaten te houden en vijandelijke bewegingen te signaleren.",nt="Bij torens worden soms persoonlijke voorwerpen van soldaten gevonden."):et.includes("kazerne")&&(ze="Een kazerne is een gebouw waar soldaten gelegerd waren. Hier woonden, aten en oefenden de troepen.",nt="Rond kazernes worden regelmatig knopen, gespen en andere persoonlijke voorwerpen gevonden.");let Mt=`<strong class="text-stone-800">${Je}</strong>`;ee&&(Mt+=`<br/><span class="text-sm font-semibold text-stone-700">${ee}</span>`),je&&(Mt+=`<br/><span class="text-sm text-blue-600">${je}</span>`),ge&&(Mt+=`<br/><span class="text-xs text-gray-500">${ge}</span>`),Mt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',Mt+=`<div class="text-sm text-gray-700 mt-1">${ze}</div>`,nt&&(Mt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',Mt+=`<div class="text-sm text-gray-700 mt-1">${nt}</div>`),Mt+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',Mt+='<div class="text-sm text-gray-700 mt-1">',Mt+='<a href="https://erfgoedenlocatie.nl/linies-en-stellingen" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">RCE Linies en Stellingen</a>',Mt+="</div>",en.push(Mt)}}catch(He){console.warn("Militaire Objecten WMS query failed:",He)}continue}if(Nn==="Verdedigingslinies"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=100,z=`https://services.rce.geovoorziening.nl/liniesenstellingen/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=linies&QUERY_LAYERS=linies&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let Ve='<strong class="text-amber-800">Verdedigingslinie</strong>';const ee={"Hollandse Waterlinie":"Verdedigingsstelsel (1815-1940) dat gebruik maakte van inundaties om Holland te beschermen. UNESCO Werelderfgoed.","Nieuwe Hollandse Waterlinie":"Uitgebreide versie (1815-1940) met forten en inundatiegebieden van Muiden tot Gorinchem.","Stelling van Amsterdam":"Ringverdediging rond Amsterdam (1880-1920) met 42 forten. UNESCO Werelderfgoed.",Grebbelinie:"Verdedigingslinie langs de Grebbe (17e-20e eeuw). Zware gevechten in mei 1940.",IJssellinie:"Koude Oorlog verdediging (1950-1968) langs de IJssel tegen Sovjet-invasie.",Atlantikwall:"Duitse kustverdediging WOII (1942-1945) van Noorwegen tot Spanje.","Peel-Raamstelling":"Verdedigingslinie in Brabant/Limburg. Gevechten mei 1940.","Maas-Waalstelling":"Linie tussen Maas en Waal, onderdeel landsverdediging.",Zuiderwaterlinie:"Waterlinie in West-Brabant en Zeeland (17e-19e eeuw).","Staats-Spaanse Linies":"Vestingwerken uit de 80-jarige oorlog (1568-1648)."},ge=ae.naam||ae.lin_naam||"";if(ge){Ve+=`<br/><span class="text-sm font-semibold text-amber-700">${ge}</span>`;const je=Object.entries(ee).find(([Je])=>ge.toLowerCase().includes(Je.toLowerCase())||Je.toLowerCase().includes(ge.toLowerCase()));je&&(Ve+=`<br/><span class="text-sm text-gray-700">${je[1]}</span>`)}ae.lin_period&&(Ve+=`<br/><span class="text-xs text-purple-600">${ae.lin_period}</span>`),ae.status&&(Ve+=`<br/><span class="text-xs text-gray-400">${ae.status}</span>`),en.push(Ve)}}catch(He){console.warn("Verdedigingslinies WMS query failed:",He)}continue}if(Nn==="Rijksmonumenten"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=50,z=`https://data.geo.cultureelerfgoed.nl/openbaar/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=rijksmonumentpunten&QUERY_LAYERS=rijksmonumentpunten&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let Ve='<strong class="text-red-800">Rijksmonument</strong>';(ae.cbsNaam||ae.cbs_naam)&&(Ve+=`<br/><span class="text-sm font-semibold">${ae.cbsNaam||ae.cbs_naam}</span>`),ae.hoofdcategorie&&(Ve+=`<br/><span class="text-sm text-red-700">${ae.hoofdcategorie}</span>`),ae.subcategorie&&(Ve+=`<br/><span class="text-xs text-gray-600">${ae.subcategorie}</span>`),ae.rijksmonumentnummer&&(Ve+=`<br/><span class="text-xs text-gray-500">Nr: ${ae.rijksmonumentnummer}</span>`),(ae.bouwjaar||ae.oorspronkelijkebouwjaar)&&(Ve+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${ae.bouwjaar||ae.oorspronkelijkebouwjaar}</span>`),Ve+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',ae.rijksmonumentnummer&&(Ve+=`<div class="text-sm text-gray-700 mt-1"><a href="https://monumentenregister.cultureelerfgoed.nl/monumenten/${ae.rijksmonumentnummer}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Bekijk in Monumentenregister</a></div>`),Ve+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Rijksmonument" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia: Rijksmonument</a></div>',en.push(Ve)}}catch(He){console.warn("Rijksmonumenten WMS query failed:",He)}continue}if(Nn==="Werelderfgoed"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=500,z=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let Ve='<strong class="text-cyan-800">UNESCO Werelderfgoed</strong>';(ae.siteName||ae.naam)&&(Ve+=`<br/><span class="text-sm font-semibold text-cyan-700">${ae.siteName||ae.naam}</span>`),ae.siteDesignation&&(Ve+=`<br/><span class="text-xs text-gray-600">${ae.siteDesignation}</span>`),en.push(Ve)}}catch(He){console.warn("Werelderfgoed WMS query failed:",He)}continue}if(Nn==="Terpen"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=`https://geoportaal.fryslan.nl/arcgis/rest/services/ProvinciaalGeoRegister/PGR2/MapServer/66/query?geometry=${Ae[0]},${Ae[1]}&geometryType=esriGeometryPoint&spatialRel=esriSpatialRelIntersects&outFields=SOORT,SHAPE_Area&returnGeometry=false&f=json`,z=await(await fetch(Ie)).json();if(z.features&&z.features.length>0){const Et=z.features[0].attributes,X=Et.SOORT||"Terp",ae=Et.SHAPE_Area?Math.round(Et.SHAPE_Area):null;let Ve="",ee="",ge=!1;try{const Mt=`https://service.pdok.nl/rce/ps-ch/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=PS.ProtectedSite&QUERY_LAYERS=PS.ProtectedSite&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-100},${Ae[1]-100},${Ae[0]+100},${Ae[1]+100}`}`,yn=await(await fetch(Mt)).json();if(yn.features&&yn.features.length>0){const q=yn.features[0].properties;Ve=q.siteName||q.naam||"",ee=q.inspireId||q.monumentnummer||"",ge=!0}}catch{}let je="";Ve?(je=`<strong class="text-orange-800">${Ve}</strong>`,je+=`<br/><span class="text-sm text-orange-600 font-medium">${X}</span>`):je=`<strong class="text-orange-800">${X}</strong>`,je+='<br/><span class="text-sm text-gray-600">Friese terp (woonheuvel)</span>';const ze={terp:{uitleg:"Een kunstmatige woonheuvel waar mensen woonden om droge voeten te houden.",periode:"IJzertijd tot Middeleeuwen"},"afgegraven terp":{uitleg:"Deze terp is deels of geheel afgegraven voor de vruchtbare grond (terpaarde).",periode:"Oorspronkelijk IJzertijd-Middeleeuwen"},terprestant:{uitleg:"Hier lag ooit een terp, waarvan nu alleen nog resten over zijn.",periode:"IJzertijd tot Middeleeuwen"},"deels afgegraven terp":{uitleg:"Een deel van deze terp is afgegraven, een deel is nog intact.",periode:"IJzertijd tot Middeleeuwen"},"verhoogd kerkhof":{uitleg:"Een verhoogd kerkhof, vaak op een oude terplocatie gebouwd.",periode:"Middeleeuwen"},kerkterp:{uitleg:"Een terp met daarop een kerk, vaak het centrum van een terpdorp.",periode:"IJzertijd tot heden"}}[X.toLowerCase()]||{uitleg:"Een kunstmatige woonheuvel uit de tijd dat dit gebied vaak overstroomde.",periode:"IJzertijd tot Middeleeuwen"};if(je+=`<div class="mt-2 text-sm text-gray-700">${ze.uitleg}</div>`,je+=`<br/><span class="text-sm text-gray-600">Periode: ${ze.periode}</span>`,ae&&ae>100){const nt=(ae/1e4).toFixed(1);je+=`<br/><span class="text-sm text-gray-500">Oppervlak: ${nt} hectare</span>`}if(ge&&(je+='<div class="mt-2 p-2 bg-orange-100 rounded text-xs text-orange-800">',je+="<strong> Rijksmonument</strong> - Deze terp is wettelijk beschermd. Detecteren is niet toegestaan zonder vergunning.",ee&&(je+=`<br/>Monumentnummer: ${ee}`),je+="</div>"),je+='<div class="mt-2 p-2 bg-amber-50 rounded text-xs text-amber-800">',je+="<strong>Detectietip:</strong> ",X.toLowerCase().includes("afgegraven")?je+="Afgegraven terpen zijn interessant! Bij het afgraven kwam materiaal aan de oppervlakte. Zoek op akkers rond de oude terplocatie.":je+="Terpen zijn rijk aan vondsten: aardewerk, munten, fibulae, botten, gereedschap. De grond is vaak donker en vruchtbaar door eeuwenlange bewoning.",je+="</div>",je+='<div class="mt-3 space-y-1">',je+='<a href="https://www.terpenonderzoek.nl/" target="_blank" class="block text-blue-600 hover:underline text-sm">Terpenonderzoek.nl - Wetenschappelijk onderzoek</a>',je+='<a href="https://www.friesmuseum.nl/collectie/archeologie/" target="_blank" class="block text-blue-600 hover:underline text-sm">Fries Museum - Terpvondsten</a>',je+='<a href="https://nl.wikipedia.org/wiki/Terp" target="_blank" class="block text-blue-600 hover:underline text-sm">Wikipedia - Terpen</a>',Ve){const nt=encodeURIComponent(Ve+" terp friesland");je+=`<a href="https://www.google.com/search?q=${nt}" target="_blank" class="block text-blue-600 hover:underline text-sm">Zoek meer over ${Ve}</a>`}je+="</div>",en.push(je)}}catch(He){console.warn("Terpen query failed:",He)}continue}if(Nn==="Religieus Erfgoed"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=50,z=`https://services.rce.geovoorziening.nl/landschapsatlas_view/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=religieuserfgoed&QUERY_LAYERS=religieuserfgoed&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,Ve=ae.naam||ae.NAAM||ae.name||ae.NAME||"Onbekend",ee=ae.denominatie||ae.DENOMINATIE||ae.religie||"",ge=ae.type||ae.TYPE||ae.functie||"",je=ae.bouwjaar||ae.BOUWJAAR||ae.jaar||"",Je=ae.gemeente||ae.GEMEENTE||ae.plaats||"";let ze=`<strong class="text-purple-800">${Ve}</strong>`;const nt=ge.toLowerCase();let et="Een religieus gebouw of heilige plek.",Mt="Munten van kerkgangers, knopen, gespen, religieuze voorwerpen";nt.includes("kerk")||nt.includes("church")?(et="Een kerk was het hart van de gemeenschap. Hier kwamen mensen samen voor diensten, maar ook voor belangrijke gebeurtenissen.",Mt="Munten uit de collecte, knopen, gespen, pelgrimsinsignes, loden zegels"):nt.includes("kapel")||nt.includes("chapel")?(et="Een kapel is een klein gebedshuis, vaak bij een landgoed, langs een weg, of op een bijzondere plek.",Mt="Devotionalia, munten, kruisjes, rozenkransen"):nt.includes("synagoge")?(et="Een synagoge is een Joods gebedshuis. Veel synagogen in Nederland zijn verwoest of herbestemd na de Tweede Wereldoorlog.",Mt="Munten, knopen, kleine religieuze voorwerpen"):nt.includes("klooster")||nt.includes("monastery")?(et="Een klooster was een woon- en werkplek voor monniken of nonnen. Veel kloosters hadden eigen werkplaatsen en landerijen.",Mt="Religieuze voorwerpen, zegels, gereedschap, aardewerk, middeleeuwse munten"):nt.includes("toren")||nt.includes("tower")?(et="Een kerktoren of klokkentoren. Soms is alleen de toren nog over van een verdwenen kerk.",Mt="Munten, knopen, bouwmateriaal"):(nt.includes("begraafplaats")||nt.includes("cemetery"))&&(et="Een historische begraafplaats. Detecteren op begraafplaatsen is niet toegestaan zonder toestemming.",Mt="Detecteren hier niet toegestaan"),ee&&(ze+=`<br/><span class="text-sm text-purple-600">${ee}</span>`),ge&&(ze+=`<br/><span class="text-sm text-gray-600">${ge}</span>`),je&&(ze+=`<br/><span class="text-sm text-gray-500">Bouwjaar: ${je}</span>`),Je&&(ze+=`<br/><span class="text-xs text-gray-400">${Je}</span>`),ze+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',ze+=`<div class="text-sm text-gray-700 mt-1">${et}</div>`,ze+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ze+=`<div class="text-sm text-gray-700 mt-1">${Mt}</div>`,ze+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',nt.includes("begraafplaats")?ze+='<div class="text-sm text-red-600 mt-1">Detecteren op begraafplaatsen is niet toegestaan. Respecteer de rust van de overledenen.</div>':ze+='<div class="text-sm text-gray-700 mt-1">Veel kerken en religieuze gebouwen zijn beschermd monument. Vraag altijd toestemming voordat je gaat detecteren op het terrein.</div>',en.push(ze)}}catch(He){console.warn("Religieus Erfgoed WMS query failed:",He)}continue}if(Nn==="Gewaspercelen"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=50,sn=`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`,z=`https://service.pdok.nl/rvo/brpgewaspercelen/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=BrpGewas&QUERY_LAYERS=BrpGewas&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${sn}`,Et=`https://service.pdok.nl/bzk/bro-bodemkaart/wms/v1_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=soilarea&QUERY_LAYERS=soilarea&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${sn}`,[X,ae]=await Promise.all([fetch(z),fetch(Et).catch(()=>null)]),Ve=await X.json();if(Ve.features&&Ve.features.length>0){const ee=Ve.features[0].properties;let ge='<strong class="text-green-800">Landbouwperceel</strong>';if((ee.gewas||ee.gewasnaam)&&(ge+=`<br/><span class="text-sm font-semibold text-green-700">${ee.gewas||ee.gewasnaam}</span>`),(ee.categorie||ee.category)&&(ge+=`<br/><span class="text-xs text-gray-600">${ee.categorie||ee.category}</span>`),ee.oppervlakte&&(ge+=`<br/><span class="text-xs text-gray-500">${ee.oppervlakte} ha</span>`),ae)try{const je=await ae.json();if(je.features&&je.features.length>0){const Je=je.features[0].properties,ze=Je.first_soilname||Je.soilname||Je.bodemtype,nt=Je.first_soilcode||Je.soilcode||Je.maparea_soilcode;if(ze){ge+=`<br/><span class="text-xs text-amber-700 font-medium">Grondsoort: ${ze}</span>`;const et=bae(ze,nt);et.length>0&&(ge+=`<br/><span class="text-xs text-gray-500 italic">${et.join("  ")}</span>`)}}}catch{}en.push(ge)}}catch(He){console.warn("BRP Gewaspercelen WMS query failed:",He)}continue}if(Nn==="Kadastrale Grenzen"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=20,z=`https://service.pdok.nl/kadaster/kadastralekaart/wms/v5_0?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=Perceel&QUERY_LAYERS=Perceel&STYLES=&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,Ve=ae.kadastraleGemeenteWaarde||ae.kadastrale_gemeente_waarde||ae.kadastraleGemeente||jSt[String(ae.kadastraleGemeenteCode)]||ae.kadastraleGemeenteCode,ee=ae.sectie||ae.Sectie||"",ge=ae.perceelnummer||ae.perceelNummer||ae.Perceelnummer||"",je=ae.kadastraleGrootteWaarde||ae.kadastrale_grootte_waarde||ae.kadastraleGrootte||ae.oppervlakte,Je=ae.AKRKadastraleGemeenteCodeWaarde||ae.akrKadastraleGemeenteCodeWaarde||"",ze=[Ve,ee,ge].filter(Boolean).join(" "),nt=Je&&ee&&ge?`${Je}-${ee}-${ge}`:"";let et='<strong class="text-indigo-800">Kadastraal Perceel</strong>';if(ze&&(et+=`<br/><span class="text-sm text-indigo-700">${ze}</span>`),nt&&(et+=`<br/><span class="text-sm font-bold text-gray-800 font-mono">${nt}</span>`),je){const Mt=typeof je=="number"?je:parseFloat(je);isNaN(Mt)||(et+=`<br/><span class="text-xs text-gray-600">${Mt.toLocaleString("nl-NL")} m</span>`)}et+='<br/><br/><span class="text-xs text-gray-600">Eigenaar opzoeken? Kopieer bovenstaande code, ga naar </span><a href="https://www.kadaster.nl/winkel" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">kadaster.nl/winkel</a><span class="text-xs text-gray-600"> en klik "Zoek op aanduiding"</span><span class="text-xs text-gray-400"> (betaalde dienst)</span>',en.push(et)}}catch(He){console.warn("Kadastrale Grenzen WMS query failed:",He)}continue}if(Nn==="Scheepswrakken"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=100,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_SCHEEPSRESTANTEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let ee=`<strong class="text-cyan-800">${ae.naam||ae.NAAM||"Scheepswrak"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Historisch scheepswrak in Zuid-Holland</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Op deze plek ligt een oud scheepswrak. Dit is een schip dat lang geleden is gezonken. ",ee+="In de bodem kunnen nog resten van het schip en de lading liggen.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-cyan-700">Type: ${ae.type||ae.TYPE}</span>`),(ae.datering||ae.DATERING)&&(ee+=`<br/><span class="text-sm text-gray-600">Periode: ${ae.datering||ae.DATERING}</span>`),(ae.bron||ae.BRON)&&(ee+=`<br/><span class="text-xs text-gray-500">Bron: ${ae.bron||ae.BRON}</span>`),ee+='<div class="mt-2 p-2 bg-cyan-50 rounded text-xs text-cyan-800">',ee+="<strong>Detectietip:</strong> Bij scheepswrakken kun je bijzondere vondsten doen zoals scheepsonderdelen, munten, gereedschap en lading. Let op: vaak is een vergunning nodig.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.zuid-holland.nl/onderwerpen/cultuur-erfgoed/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over erfgoed Zuid-Holland</a></div>',en.push(ee)}}catch(He){console.warn("Scheepswrakken WMS query failed:",He)}continue}if(Nn==="Woonheuvels ZH"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=100,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_WOONHEUVEL&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let ee=`<strong class="text-orange-800">${ae.naam||ae.NAAM||"Woonheuvel"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Historische woonheuvel (terp)</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Een woonheuvel is een door mensen opgeworpen heuvel. Mensen woonden hierop om droge voeten te houden bij hoog water. ",ee+="Deze heuvels werden steeds hoger gemaakt. Je vindt ze vooral in laaggelegen gebieden.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-orange-700">Type: ${ae.type||ae.TYPE}</span>`),ee+='<div class="mt-2 p-2 bg-orange-50 rounded text-xs text-orange-800">',ee+="<strong>Detectietip:</strong> Woonheuvels zijn rijk aan vondsten! Denk aan aardewerk, munten, sieraden en huisraad uit de middeleeuwen. De grond bevat vaak veel materiaal.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.zuid-holland.nl/onderwerpen/cultuur-erfgoed/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over erfgoed Zuid-Holland</a></div>',en.push(ee)}}catch(He){console.warn("Woonheuvels WMS query failed:",He)}continue}if(Nn==="Romeinse Forten"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=200,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_ROMEINSFORT&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let ee=`<strong class="text-red-800">${ae.naam||ae.NAAM||"Romeins Fort"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Romeins militair fort (castellum)</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Dit was een Romeins legerfort. De Romeinen bouwden deze forten langs de Rijn, de grens van hun rijk. ",ee+="Soldaten woonden hier en bewaakten de grens. Deze forten zijn ongeveer 2000 jaar oud.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-red-700">Type: ${ae.type||ae.TYPE}</span>`),(ae.periode||ae.PERIODE)&&(ee+=`<br/><span class="text-sm text-gray-600">Periode: ${ae.periode||ae.PERIODE}</span>`),ee+='<div class="mt-2 p-2 bg-red-50 rounded text-xs text-red-800">',ee+="<strong>Detectietip:</strong> Romeinse forten zijn toplocaties! Je kunt hier Romeinse munten, fibulae (mantelspelden), militaire uitrusting en aardewerk vinden. Vaak beschermd, check de regels!",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.limesworld.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over de Romeinse Limes</a></div>',en.push(ee)}}catch(He){console.warn("Romeinse Forten WMS query failed:",He)}continue}if(Nn==="Windmolens"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=50,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&QUERY_LAYERS=CHS_2015_NEDERZETTING_WINDMOLENS&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let ee=`<strong class="text-amber-800">${ae.naam||ae.NAAM||"Windmolen"}</strong>`;if(ee+='<br/><span class="text-sm text-gray-800">Historische windmolen</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Windmolens gebruikten de kracht van de wind. Ze maalden graan tot meel of pompten water weg uit polders. ",ee+="Nederland heeft veel molens omdat we laaggelegen land droog moesten houden.",ee+="</div>",ae.type||ae.TYPE||ae.functie||ae.FUNCTIE){const ge=ae.functie||ae.FUNCTIE||ae.type||ae.TYPE;ee+=`<br/><span class="text-sm text-amber-700">Functie: ${ge}</span>`}(ae.bouwjaar||ae.BOUWJAAR)&&(ee+=`<br/><span class="text-sm text-gray-600">Bouwjaar: ${ae.bouwjaar||ae.BOUWJAAR}</span>`),ee+='<div class="mt-2 p-2 bg-amber-50 rounded text-xs text-amber-800">',ee+="<strong>Detectietip:</strong> Bij molens vind je vaak voorwerpen van de molenaar en bezoekers: munten, knopen, gereedschap. Ook de grond rond verdwenen molens kan interessant zijn.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.molendatabase.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over Nederlandse molens</a></div>',en.push(ee)}}catch(He){console.warn("Windmolens WMS query failed:",He)}continue}if(Nn==="Erfgoedlijnen"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=200,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&QUERY_LAYERS=CHS_ERFGOEDLIJN_HOOFDSTRUCTUUR&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let ee=`<strong class="text-purple-800">${ae.naam||ae.NAAM||ae.erfgoedlijn||"Erfgoedlijn"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Historische lijn in het landschap</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Een erfgoedlijn is een route of lijn met veel geschiedenis. Dit kunnen oude dijken, wegen, kanalen of verdedigingslinies zijn. ",ee+="Langs deze lijnen vind je vaak bijzondere plekken.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-purple-700">Type: ${ae.type||ae.TYPE}</span>`),(ae.omschrijving||ae.OMSCHRIJVING)&&(ee+=`<br/><span class="text-sm text-gray-600">${ae.omschrijving||ae.OMSCHRIJVING}</span>`),ee+='<div class="mt-2 p-2 bg-purple-50 rounded text-xs text-purple-800">',ee+="<strong>Detectietip:</strong> Erfgoedlijnen volgen oude routes waar mensen langskwamen. Denk aan munten, knopen, gespen en andere verloren voorwerpen. Dijken en wegen zijn vaak interessant.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.erfgoedlijnen.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over Erfgoedlijnen</a></div>',en.push(ee)}}catch(He){console.warn("Erfgoedlijnen WMS query failed:",He)}continue}if(Nn==="Oude Kernen"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=200,z=`https://geodata.zuid-holland.nl/geoserver/cultuur/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&QUERY_LAYERS=CHS_2015_ARCHEOLOGIE_KERNEN&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let ee=`<strong class="text-stone-800">${ae.naam||ae.NAAM||"Historische Kern"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Oude dorps- of stadskern</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Dit is het oude centrum van een dorp of stad. Hier woonden en werkten mensen al honderden jaren geleden. ",ee+="De grond bevat vaak veel sporen van het verleden.",ee+="</div>",(ae.type||ae.TYPE)&&(ee+=`<br/><span class="text-sm text-stone-700">Type: ${ae.type||ae.TYPE}</span>`),(ae.periode||ae.PERIODE)&&(ee+=`<br/><span class="text-sm text-gray-600">Periode: ${ae.periode||ae.PERIODE}</span>`),ee+='<div class="mt-2 p-2 bg-stone-100 rounded text-xs text-stone-800">',ee+="<strong>Detectietip:</strong> Oude kernen zijn rijk aan vondsten! Munten, knopen, sieraden, gereedschap en huisraad. Let op: detecteren is vaak niet toegestaan in beschermde kernen.",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.zuid-holland.nl/onderwerpen/cultuur-erfgoed/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over erfgoed Zuid-Holland</a></div>',en.push(ee)}}catch(He){console.warn("Oude Kernen WMS query failed:",He)}continue}if(Nn==="Relictenkaart Punten"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=50,z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_p&QUERY_LAYERS=ChAr_Relictenkaart_p&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,Ve={KV:{naam:"Kasteel of Vesting",uitleg:"Een versterkt gebouw uit de middeleeuwen. Vaak zijn er nog resten in de grond."},K:{naam:"Kapel",uitleg:"Een klein kerkgebouw. Rond kapellen worden vaak religieuze voorwerpen gevonden."},KE:{naam:"Kerkhof",uitleg:"Historische begraafplaats. Respecteer deze plek en vraag altijd toestemming."},B:{naam:"Buitenhuis",uitleg:"Een landhuis van welgestelde families. Vaak met tuinen en bijgebouwen."},OB:{naam:"Oud Bebouwingsrelict",uitleg:"Resten van oude bebouwing. Hier stonden ooit huizen of boerderijen."},OV:{naam:"Oude Verkaveling",uitleg:"Historisch patroon van akkers en weilanden uit vroeger tijden."},NR:{naam:"Nijverheidsrelict",uitleg:"Plek waar vroeger ambacht of industrie was, zoals smederijen of molens."},GH:{naam:"Grafheuvel",uitleg:"Prehistorische begraafplaats. Beschermd monument - niet detecteren!"},BP:{naam:"Begraafplaats",uitleg:"Historische begraafplaats. Respecteer deze plek."},HH:{naam:"Havezate",uitleg:"Adellijk huis met landerijen. Interessant voor middeleeuwse vondsten."},RM:{naam:"Rosmolen",uitleg:"Molen aangedreven door paarden. Zeldzaam cultuurhistorisch object."},WM:{naam:"Windmolen",uitleg:"Historische windmolen. Vaak zijn funderingen nog zichtbaar."},PM:{naam:"Poldermolen",uitleg:"Molen voor waterbeheer. Belangrijk voor de waterhuishouding."},EK:{naam:"Eendenkooi",uitleg:"Plek om wilde eenden te vangen. Bijzonder cultuurlandschap."},SH:{naam:"Scholtenhoeve",uitleg:"Boerderij van een welgestelde boer. Vaak eeuwenoud."},SL:{naam:"Slot",uitleg:"Versterkt kasteel of adellijke woning."},MO:{naam:"Motte",uitleg:"Vroegmiddeleeuwse kasteelberg. Zeer interessant voor detectie."},BR:{naam:"Borg",uitleg:"Versterkte adellijke woning, typisch voor het noorden."}},ee=ae.type?.replace(/[0-9]/g,"")||"",ge=Ve[ee]||{naam:ae.type||"Cultuurhistorisch object",uitleg:"Een historisch relict in het Gelderse landschap."};let je=`<strong class="text-emerald-800">${ge.naam}</strong>`;je+='<br/><span class="text-sm text-gray-800">Gelders cultuurhistorisch relict</span>',ae.streek&&(je+=`<br/><span class="text-sm text-gray-600">Streek: ${ae.streek}</span>`),je+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is dit?</span></div>',je+=`<div class="text-sm text-gray-700 mt-1">${ge.uitleg}</div>`,je+='<div class="mt-3"><a href="https://www.gelderland.nl/erfgoed" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-sm">Meer over Gelders erfgoed</a></div>',en.push(je)}}catch(He){console.warn("Relictenkaart Punten WMS query failed:",He)}continue}if(Nn==="Relictenkaart Lijnen"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=50,z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_l&QUERY_LAYERS=ChAr_Relictenkaart_l&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,ee={1:{naam:"Sprengenbeek",uitleg:"Kunstmatig aangelegde beek voor waterkracht. Vaak bij papiermolens."},2:{naam:"Oude waterloop",uitleg:"Historische beek of rivier. Langs waterlopen vind je vaak oude bewoningssporen."},3:{naam:"Doorgaande weg",uitleg:"Eeuwenoude handelsroute. Langs deze wegen gingen reizigers en handelaren."},4:{naam:"Hessenweg",uitleg:"Historische handelsweg naar Duitsland. Gebruikt door marskramers en kooplieden."},5:{naam:"Oude weg",uitleg:"Historische route door het landschap. Vaak al eeuwen in gebruik."},6:{naam:"Historische grens",uitleg:"Oude eigendoms- of gebiedsgrens. Soms gemarkeerd met grenspalen."},7:{naam:"Trekpad",uitleg:"Pad langs een kanaal waar paarden schepen trokken."},8:{naam:"Jaagpad",uitleg:"Pad langs water voor scheepvaart met paardentractie."}}[ae.klasse]||{naam:"Historisch lijnrelict",uitleg:"Een lijnvormig historisch element in het landschap."};let ge=`<strong class="text-teal-800">${ee.naam}</strong>`;ge+='<br/><span class="text-sm text-gray-800">Gelders lijnrelict</span>',ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is dit?</span></div>',ge+=`<div class="text-sm text-gray-700 mt-1">${ee.uitleg}</div>`,ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Tip</span></div>',ge+='<div class="text-sm text-gray-700 mt-1">Langs oude wegen en waterlopen worden vaak vondsten gedaan. Mensen verloren er munten en voorwerpen.</div>',en.push(ge)}}catch(He){console.warn("Relictenkaart Lijnen WMS query failed:",He)}continue}if(Nn==="Relictenkaart Vlakken"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=100,z=`https://geoserver.gelderland.nl/geoserver/ngr_a/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=ChAr_Relictenkaart_v&QUERY_LAYERS=ChAr_Relictenkaart_v&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties,ee={1:{naam:"Oud agrarisch land",uitleg:"Gebied dat al voor 1850 als landbouwgrond werd gebruikt. Rijk aan geschiedenis."},2:{naam:"Jonge heideontginning",uitleg:"Heide die tussen 1850 en 1950 is ontgonnen voor landbouw."},3:{naam:"Open essencomplex",uitleg:"Historische akkers op hoge grond. Vaak eeuwenoud en rijk aan vondsten."},4:{naam:"Kampenlandschap",uitleg:"Landschap met kleine akkers omringd door houtwallen. Typisch voor Oost-Nederland."},5:{naam:"Heiderelict",uitleg:"Restant van het vroegere uitgestrekte heidelandschap. Vaak prehistorische vondsten."},6:{naam:"Oud bosrelict",uitleg:"Bos dat al in 1850 bestond. Oude bossen bevatten vaak cultuurhistorische resten."},7:{naam:"Stuifzandrelict",uitleg:"Overblijfsel van actief stuifzand. Vaak bij grafheuvels en prehistorische sites."},8:{naam:"Oud bouwland",uitleg:"Historische akkergrond. Boeren hebben hier eeuwenlang gewerkt."},9:{naam:"Historisch grasland",uitleg:"Oud weiland of hooiland. Vaak bij boerderijen en dorpen."},10:{naam:"Beekdal",uitleg:"Laagte langs een beek. Mensen woonden graag bij water."}}[ae.klasse]||{naam:"Historisch landschap",uitleg:"Een waardevol cultuurlandschap in Gelderland."};let ge=`<strong class="text-lime-800">${ee.naam}</strong>`;if(ge+='<br/><span class="text-sm text-gray-800">Gelders landschapsrelict</span>',ae.st_area_shape_){const je=(ae.st_area_shape_/1e4).toFixed(1);ge+=`<br/><span class="text-sm text-gray-600">${je} hectare</span>`}ge+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is dit?</span></div>',ge+=`<div class="text-sm text-gray-700 mt-1">${ee.uitleg}</div>`,en.push(ge)}}catch(He){console.warn("Relictenkaart Vlakken WMS query failed:",He)}continue}if(Nn==="Verdronken Dorpen"){try{const He=Fn(Ft),Ae=lr("EPSG:4326","EPSG:28992",He),Ie=200,z=`https://opengeodata.zeeland.nl/geoserver/chs/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetFeatureInfo&LAYERS=geocmd_vrddrppnt&QUERY_LAYERS=geocmd_vrddrppnt&INFO_FORMAT=application/json&I=50&J=50&WIDTH=100&HEIGHT=100&CRS=EPSG:28992&BBOX=${`${Ae[0]-Ie},${Ae[1]-Ie},${Ae[0]+Ie},${Ae[1]+Ie}`}`,X=await(await fetch(z)).json();if(X.features&&X.features.length>0){const ae=X.features[0].properties;let ee=`<strong class="text-blue-800">${ae.naam||ae.NAAM||"Verdronken dorp"}</strong>`;ee+='<br/><span class="text-sm text-gray-800">Verdronken dorp in Zeeland</span>',ee+='<div class="mt-2 text-sm text-gray-700">',ee+="Dit dorp is lang geleden door de zee verzwolgen. Bij stormvloeden brak de zeedijk door en liep het land onder water. ",ee+="De mensen vluchtten, maar hun huizen en bezittingen bleven achter. In de bodem liggen nog resten van dit dorp.",ee+="</div>",(ae.verdronken||ae.VERDRONKEN||ae.jaar||ae.JAAR)&&(ee+=`<br/><span class="text-sm text-blue-700">Verdronken in: ${ae.verdronken||ae.VERDRONKEN||ae.jaar||ae.JAAR}</span>`),(ae.gemeente||ae.GEMEENTE)&&(ee+=`<br/><span class="text-sm text-gray-600">Gemeente: ${ae.gemeente||ae.GEMEENTE}</span>`),(ae.bron||ae.BRON)&&(ee+=`<br/><span class="text-xs text-gray-500">Bron: ${ae.bron||ae.BRON}</span>`),ee+='<div class="mt-2 p-2 bg-blue-50 rounded text-xs text-blue-800">',ee+="<strong>Detectietip:</strong> Verdronken dorpen bevatten veel vondsten! Aardewerk, munten, sieraden, gereedschap en huisraad. Bij laag water komen soms stukken vrij. Let op getijden en veiligheid!",ee+="</div>",ee+='<div class="mt-2"><a href="https://www.verdronkengeschiedenis.nl/" target="_blank" class="text-blue-600 hover:underline text-sm">Meer over verdronken dorpen</a></div>',en.push(ee)}}catch(He){console.warn("Verdronken Dorpen WMS query failed:",He)}continue}const Ii=Ds.getFeatureInfoUrl(Ft,jn,"EPSG:3857",{INFO_FORMAT:"application/json"});if(Ii)try{const Ae=await(await fetch(Ii)).json();if(Ae.features&&Ae.features.length>0){const Ie=Ae.features[0].properties;if(Nn==="AHN 0.5m"){let X='<strong class="text-blue-800">AHN Hoogtekaart</strong>';const ae=Ie.value_list??Ie.GRAY_INDEX??Ie.value??Ie.gray_index??Ie.dtm_05m??Ie.DTM_05M??Ie.hoogte??Ie.HOOGTE??Ie.elevation??Ie.ELEVATION;if(ae!=null&&!isNaN(Number(ae))){const Ve=typeof ae=="number"?ae.toFixed(2):Number(ae).toFixed(2);X+=`<br/><span class="text-sm text-blue-700">Hoogte: ${Ve} m NAP</span>`,en.push(X)}else{let Ve=!1;const ee=["geometry","id","fid","gml_id","bbox"];for(const[ge,je]of Object.entries(Ie))!ee.includes(ge.toLowerCase())&&je!==null&&je!==""&&(X+=`<br/><span class="text-xs text-gray-600">${ge}: ${je}</span>`,Ve=!0);Ve&&en.push(X)}continue}if(Nn==="Geomorfologie"){let X='<strong class="text-green-800">Geomorfologie</strong>',ae=!1;const Ve=Ie.landform_subgroup_description,ee=Ie.relief_klasse,ge=Ie.relief_subklasse,je=Ie.genese_description,Je=Ie.active_process;if(Ve&&(X+=`<br/><span class="text-sm text-green-700">${Ve}</span>`,ae=!0),ee){const ze=ge&&ge!==ee?`${ee} (${ge})`:ee;X+=`<br/><span class="text-xs text-gray-600">Relief: ${ze}</span>`,ae=!0}if(je&&(X+=`<br/><span class="text-xs text-gray-500">Ontstaan: ${je}</span>`,ae=!0),Je&&Je!=="onbekend"&&(X+=`<br/><span class="text-xs text-gray-500">Actief proces: ${Je}</span>`,ae=!0),!ae){const ze=["geometry","id","fid","gml_id","bbox","fuuid","geom","collection_id"];for(const[nt,et]of Object.entries(Ie))!ze.includes(nt.toLowerCase())&&et!==null&&et!==""&&!nt.includes("validfrom")&&!nt.includes("validto")&&(X+=`<br/><span class="text-xs text-gray-600">${nt}: ${et}</span>`)}X+='<br/><a href="https://legendageomorfologie.wur.nl/" target="_blank" rel="noopener" class="text-xs text-blue-600 hover:underline">Meer over geomorfologie</a>',en.push(X);continue}let sn=`<strong>${Nn}</strong>`;const z=Ie.first_soilname||Ie.soilname,Et=Ie.soilcode||Ie.first_soilcode;if(z&&(sn+=`<br/><span class="text-sm text-amber-700">${z}</span>`,Nn==="Bodemkaart")){const X=bae(z,Et);X.length>0&&(sn+=`<br/><span class="text-xs text-gray-500 italic">${X.join("  ")}</span>`)}if(Ie.soilslope&&Ie.soilslope!=="Niet opgenomen"&&(sn+=`<br/><span class="text-xs text-gray-500">Helling: ${Ie.soilslope}</span>`),!z){const X=["geometry","id","fid","gml_id","GRAY_INDEX","gray_index","value"];for(const[ae,Ve]of Object.entries(Ie))!X.includes(ae)&&Ve&&Ve!=="Niet opgenomen"&&(sn+=`<br/><span class="text-xs text-gray-600">${ae}: ${Ve}</span>`)}en.push(sn)}}catch(He){console.warn("WMS GetFeatureInfo failed:",He)}}return en},dr=async Ft=>{if(gr.getState().isDrawingMode)return;const jn=[],en=[],$o=Ae=>{if(!Ae)return;const Ie=Ae.getType(),z=Ae.clone().transform("EPSG:3857","EPSG:4326").getCoordinates();return{type:Ie,coordinates:z}},Gi=DSt(Ft.coordinate),Ds=[];t.forEachFeatureAtPixel(Ft.pixel,Ae=>{Ds.push(Ae)});for(const Ae of Ds){const Ie=Ae.getProperties(),{geometry:sn,...z}=Ie;if(z.vondst){const ee=z.vondst,ge=`<strong>${ee.objectType}</strong>
            <div data-vondst-id="${ee.id}"></div>
            <br/><span class="text-sm text-gray-600"><strong>Materiaal:</strong> ${ee.material}</span>
            <br/><span class="text-sm text-gray-600"><strong>Periode:</strong> ${ee.period}</span>
            ${ee.depth?`<br/><span class="text-sm text-gray-600"><strong>Diepte:</strong> ${ee.depth} cm</span>`:""}
            ${ee.condition&&ee.condition!=="Onbekend"?`<br/><span class="text-sm text-gray-600"><strong>Conditie:</strong> ${ee.condition}</span>`:""}
            ${ee.weight?`<br/><span class="text-sm text-gray-600"><strong>Gewicht:</strong> ${ee.weight} gram</span>`:""}
            ${ee.notes?`<br/><span class="text-sm text-gray-600"><strong>Notities:</strong> ${ee.notes}</span>`:""}
            ${ee.photoUrl?`<br/><a href="${ee.photoUrl}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm"> Bekijk foto</a>`:""}
            <br/><span class="text-xs text-gray-400">${new Date(ee.timestamp).toLocaleDateString("nl-NL")}</span>`;jn.push(ge),en.push(null),P(ee.id);continue}if(z.layerType==="customPoint"&&z.customPoint){const ee=z.customPoint,ge=z.customLayerName||"Mijn Laag",je=z.customLayerColor||"#f97316";let Je="";if(ee.popupContent?(Je=`<div class="flex items-center gap-2 mb-2 pb-2 border-b border-gray-100">
              <span class="w-3 h-3 rounded-full flex-shrink-0" style="background-color: ${je}"></span>
              <span class="text-xs font-medium" style="color: ${je}">${ge}</span>
            </div>`,Je+=ee.popupContent):(Je=`<strong>${ee.name}</strong>`,Je+=`<br/><span class="text-xs text-gray-500">${ge}</span>`,ee.category&&ee.category!=="Overig"&&(Je+=`<br/><span class="text-sm text-gray-600"><strong>Categorie:</strong> ${ee.category}</span>`)),ee.photos&&ee.photos.length>0){Je+='<div class="flex flex-wrap gap-1 my-2">';for(const ze of ee.photos.slice(0,3)){const nt=ze.thumbnailUrl||ze.thumbnailBase64;nt&&(Je+=`<img src="${nt}" alt="Foto" class="w-16 h-16 object-cover rounded border border-gray-200" />`)}ee.photos.length>3&&(Je+=`<span class="text-xs text-gray-400 self-end">+${ee.photos.length-3} meer</span>`),Je+="</div>"}ee.notes&&!ee.popupContent&&(Je+=`<br/><span class="text-sm text-gray-600 mt-1">${ee.notes}</span>`),ee.url&&(Je+=`<br/><a href="${ee.url}" target="_blank" rel="noopener" class="text-blue-600 hover:underline text-sm">Meer info</a>`),Je+=`<br/><span class="text-xs text-gray-400">${new Date(ee.createdAt).toLocaleDateString("nl-NL")}</span>`,jn.push(Je),en.push(null);continue}if(z.layerType==="importedLayer"){const ee=z.layerName||"Gemporteerde laag",ge=z.layerColor||"#8b5cf6",je=["layerType","layerId","layerName","layerColor","featureIndex","geometry"],Je=z.name||z.Name||z.naam||z.title||z.NAAM||z.NAME||z.label||z.description||"Feature";let ze=`<strong style="color: ${ge}">${Je}</strong>`;ze+=`<br/><span class="text-xs text-gray-500">${ee}</span>`;const nt=Object.entries(z).filter(([et])=>!je.includes(et)&&et!=="name"&&et!=="Name");if(nt.length>0){ze+='<div class="mt-2 space-y-1">';for(const[et,Mt]of nt)if(Mt!=null&&Mt!==""){const zt=et.replace(/_/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/^./,q=>q.toUpperCase());let yn=String(Mt);yn.length>200&&(yn=yn.substring(0,200)+"..."),yn.startsWith("http://")||yn.startsWith("https://")?ze+=`<div class="text-sm"><span class="text-gray-500">${zt}:</span> <a href="${yn}" target="_blank" rel="noopener" class="text-blue-600 hover:underline">Link</a></div>`:ze+=`<div class="text-sm"><span class="text-gray-500">${zt}:</span> <span class="text-gray-700">${yn}</span></div>`}ze+="</div>"}jn.push(ze),en.push({geometry:$o(sn),properties:z,popupHtml:ze});continue}if(z.kwaliteitswaarde&&z.kwaliteitswaarde.includes("archeologische waarde")){const ee=_t(z);jn.push(ee),en.push({geometry:$o(sn),properties:z,popupHtml:ee});continue}if(z.layerType==="romeinsFort"||z.layerType==="romeinsFortLijn"){const ee=z.Name||z.name||"";z.description;const ge=NSt[ee]||null,je=ge||OSt;let Je=`<strong class="text-red-800">${ge?je.naam:ee||"Romeins Fort"}</strong>`;if(Je+=`<br/><span class="text-sm text-red-700">${LSt[je.type]||je.type}</span>`,Je+=`<br/><span class="text-sm text-gray-500">${je.periode}</span>`,z.layerType==="romeinsFortLijn"&&(Je+='<br/><span class="text-sm text-red-600"> Gereconstrueerde fortomtrek</span>'),Je+=`<br/><span class="text-xs text-gray-600 mt-1 block">${je.beschrijving}</span>`,ge?.bronnen&&ge.bronnen.length>0){const ze=ge.bronnen[0].replace(/^https?:\/\//,"").split("/")[0];Je+=`<br/><a href="${ge.bronnen[0]}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-xs">${ze}</a>`}jn.push(Je),en.push({geometry:$o(sn),properties:z,popupHtml:Je});continue}let Et=z.name||z.Name||z.naam||z.title||z.NAAM||z.NAME||z.label||z.route_name||z.road_name;Et||(z.leisure==="playground"?Et="Speeltuin":z.leisure==="park"?Et="Park":z.leisure==="swimming_area"||z.sport==="swimming"?Et="Zwemplek":z.tourism==="museum"?Et="Museum":z.amenity==="cafe"||z.amenity==="restaurant"?Et=z.amenity==="cafe"?"Caf":"Restaurant":z.historic==="castle"?Et="Kasteel":Et="Info"),(z.bunker_type||z.name&&(z.name.toLowerCase().includes("bunker")||z.name.toLowerCase().includes("kazemat")||z.name.toLowerCase().includes("schuilplaats")))&&(Et="Bunker"),z.historic==="battlefield"&&(Et="Historisch slagveld");let X=`<strong>${Et}</strong>`,ae=!1;if(z.category&&(X+=`<br/><span class="text-sm text-gray-600">Categorie: ${z.category}</span>`),z.from_to&&z.from_to!==Et&&(X+=`<br/><span class="text-sm text-gray-600">${z.from_to}</span>`),z.route&&z.route!==Et&&(X+=`<br/><span class="text-sm text-gray-600">${z.route}</span>`),z.TOPONIEM&&(X+=`<br/><span class="text-sm font-semibold text-gray-800">${z.TOPONIEM}</span>`,z.PLAATS&&(X+=`<br/><span class="text-xs text-gray-500">${z.PLAATS}</span>`)),(z.AARD_VINDP||z.Aard_vindp)&&(X+=`<br/><span class="text-sm text-gray-700">Aard: ${z.AARD_VINDP||z.Aard_vindp}</span>`),z.BEGIN_PER&&z.EIND_PER&&(X+=`<br/><span class="text-sm text-purple-700">Periode: ${z.BEGIN_PER} - ${z.EIND_PER}</span>`),(z.AARD_OPM||z.Aard_opmer)&&(X+=`<br/><span class="text-xs text-gray-600 italic">${z.AARD_OPM||z.Aard_opmer}</span>`),z.Gemeente&&(X+=`<br/><span class="text-sm text-gray-600">Gemeente: ${z.Gemeente}</span>`),z.Bron&&(X+=`<br/><span class="text-xs text-gray-500">Bron: ${z.Bron}</span>`),z.Bron_besch&&(X+=`<br/><span class="text-xs text-gray-500">${z.Bron_besch}</span>`),z.Dat_st_z&&z.Dat_ei_z&&(X+=`<br/><span class="text-sm text-purple-700">Datering: ${z.Dat_st_z} - ${z.Dat_ei_z}</span>`),z.Begin&&z.Einde&&(X+=`<br/><span class="text-sm text-purple-700">Periode: ${z.Begin} - ${z.Einde}</span>`),z.Uiterwaard&&(X+=`<br/><span class="text-sm font-semibold">${z.Uiterwaard}</span>`),z.rivier&&(X+=`<br/><span class="text-sm text-blue-600">Rivier: ${z.rivier}</span>`),z.Beschrijvi&&(X+=`<br/><span class="text-sm text-gray-700">${z.Beschrijvi}</span>`),z.leisure==="park"){ae=!0,X=`<strong class="text-green-800">${z.name||"Park"}</strong>`,X+='<br/><span class="text-sm text-gray-800">Park</span>',z.description&&(X+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`),z.area&&(X+=`<br/><span class="text-sm text-gray-600">Oppervlakte: ${z.area}</span>`);const ge=[];if(z.dog==="yes"&&ge.push("Honden toegestaan"),z.lit==="yes"&&ge.push("Verlicht"),z.bench==="yes"&&ge.push("Bankjes"),ge.length>0&&(X+=`<br/><span class="text-sm text-gray-600">${ge.join("  ")}</span>`),z.operator&&(X+=`<br/><span class="text-xs text-gray-500">Beheer: ${z.operator}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Tip voor detectie</span></div>',X+='<div class="text-sm text-gray-700">Parken zijn populair bij detectoristen. Mensen verliezen hier munten en sieraden. Vraag eerst toestemming aan de gemeente of beheerder.</div>',z.website){const je=z.website.replace(/^https?:\/\//,"").split("/")[0];X+=`<div class="mt-2"><a href="${z.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-sm">${je}</a></div>`}}else z.leisure==="playground"&&(ae=!0,X=`<strong class="text-orange-800">${z.name||"Speeltuin"}</strong>`,X+='<br/><span class="text-sm text-gray-800">Speeltuin</span>',z.description&&(X+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`));if(z.tourism==="museum"||z.museum){ae=!0;const ee=z.name||"Museum",ge=z.museum||z["museum:type"]||"",Je=ge&&ge!=="yes"?{art:"Kunstmuseum",history:"Geschiedenismuseum",archaeology:"Archeologisch museum",science:"Wetenschapsmuseum",technology:"Techniekmuseum",nature:"Natuurmuseum",open_air:"Openluchtmuseum",local:"Streekmuseum",military:"Militair museum",railway:"Spoorwegmuseum",maritime:"Maritiem museum",children:"Kindermuseum"}[ge.toLowerCase()]||ge:"Museum";if(X=`<strong class="text-purple-800">${ee}</strong>`,X+=`<br/><span class="text-sm text-purple-600">${Je}</span>`,z.description&&(X+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`),z.fee){const ze=z.fee==="yes"?"Toegangsprijs":z.fee==="no"?"Gratis toegang":z.fee;X+=`<div class="mt-2"><span class="text-sm text-gray-600">${ze}</span></div>`}if(z.opening_hours){const ze=wae(String(z.opening_hours));X+=`<div class="mt-2"><span class="text-xs text-green-600">Open: ${ze}</span></div>`}if(z.website||z.url){const ze=z.website||z.url;X+=`<div class="mt-1"><a href="${ze}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline text-sm">Bezoek ${ee}</a></div>`}if(z.wikipedia){const ze=z.wikipedia.split(":")[0]||"nl",nt=z.wikipedia.split(":")[1]||z.wikipedia;X+=`<div class="text-sm"><a href="https://${ze}.wikipedia.org/wiki/${encodeURIComponent(nt)}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Meer info op Wikipedia</a></div>`}if(z["addr:street"]||z["addr:housenumber"]||z["addr:city"]){if(X+='<div class="mt-2 text-xs text-gray-400">',z["addr:street"]||z["addr:housenumber"]){const ze=[z["addr:street"],z["addr:housenumber"]].filter(Boolean).join(" ");ze&&(X+=`${ze}<br/>`)}z["addr:city"]&&(X+=`${z["addr:postcode"]||""} ${z["addr:city"]}`),X+="</div>"}}if(z.leisure==="swimming_area"||z.sport==="swimming"||z.natural==="beach"){ae=!0,X=`<strong class="text-cyan-800">${z.name||"Zwemplek"}</strong>`;const ge=z.natural==="beach"?"Strand":z.leisure==="swimming_area"?"Zwemplek":"Zwemwater";X+=`<br/><span class="text-sm text-gray-800">${ge}</span>`,z.water&&(X+=`<br/><span class="text-sm text-gray-700">${{lake:"Meer",river:"Rivier",pond:"Vijver",reservoir:"Reservoir",canal:"Kanaal"}[z.water]||z.water}</span>`),z.supervised==="yes"&&(X+='<br/><span class="text-sm text-green-700">Met toezicht</span>'),z.changing_rooms==="yes"&&(X+='<br/><span class="text-sm text-gray-600">Kleedruimte aanwezig</span>'),z.description&&(X+=`<div class="mt-2 text-sm text-gray-700">${z.description}</div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Tip voor detectie</span></div>',X+='<div class="text-sm text-gray-700">Zwemplekken kunnen interessant zijn voor detectie. Mensen verliezen hier sieraden en munten. Let op: niet overal is detecteren toegestaan.</div>'}if(z.osm_id&&z.address!==void 0&&(X+='<br/><span class="text-sm text-lime-700">Kringloopwinkel</span>',z.address&&(X+=`<br/><span class="text-xs text-gray-500">${z.address}</span>`),z.phone&&(X+=`<br/><span class="text-xs text-gray-600">${z.phone}</span>`)),z.site_type==="tumulus"){ae=!0;const ee=Ae.getGeometry()?.getCoordinates();let ge="",je="";if(ee){const Je=Fn(ee),ze=Je[0],nt=Je[1];ze>5.5&&ze<6.3&&nt>52&&nt<52.5?(ge="Veluwe",je="De Veluwe heeft de grootste concentratie grafheuvels van Nederland. Veel heuvels liggen in grafvelden met tientallen heuvels bij elkaar."):ze>6.2&&ze<7.1&&nt>52.6&&nt<53.3?(ge="Drenthe",je="Drenthe is beroemd om zijn prehistorische monumenten. Naast hunebedden liggen hier honderden grafheuvels uit de Bronstijd."):ze>4.5&&ze<6&&nt>51.3&&nt<51.9?(ge="Noord-Brabant",je="Op de Brabantse zandgronden liggen veel grafheuvels, vaak in kleine groepjes op hogere gronden."):ze>5.5&&ze<6.3&&nt>50.7&&nt<51.6?(ge="Limburg",je="De Limburgse heuvels en plateaus herbergen grafheuvels uit verschillende periodes, van Bronstijd tot Romeinse tijd."):ze>5&&ze<5.6&&nt>52&&nt<52.4&&(ge="Utrechtse Heuvelrug",je="De stuwwallen van de Utrechtse Heuvelrug en het Gooi waren al in de prehistorie bewoond. Grafheuvels markeren de laatste rustplaats van de vroege bewoners.")}X+='<br/><span class="text-sm text-amber-700">Grafheuvel uit de Bronstijd of IJzertijd</span>',ge&&(X+=`<br/><span class="text-sm text-gray-500">${ge}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Een grafheuvel is een kunstmatige heuvel over een of meerdere graven. De meeste Nederlandse grafheuvels zijn 3000 tot 4000 jaar oud, uit de Bronstijd (2000-800 v.Chr.) of vroege IJzertijd.</div>',je&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Over deze regio</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${je}</div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe herken je een grafheuvel?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Grafheuvels zijn vaak ronde, lage heuvels van 10-30 meter doorsnee en 1-3 meter hoog. Ze liggen meestal op zandgronden, vaak in groepjes (grafvelden). Let op de kenmerkende ronde vorm in het landschap.</div>',z.wikidata?(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',X+=`<div class="text-sm text-gray-700 mt-1"><a href="https://www.wikidata.org/wiki/${z.wikidata}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Bekijk op Wikidata</a></div>`):(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer informatie</span></div>',X+='<div class="text-sm text-gray-700 mt-1"><a href="https://nl.wikipedia.org/wiki/Grafheuvel" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Lees meer over grafheuvels op Wikipedia</a></div>')}if(z.historic==="castle"||z.castle_type){ae=!0;const ee={manor:{label:"Landhuis",uitleg:"Een landhuis of havezate was het woonhuis van een adellijke familie. Vaak met een landgoed eromheen.",vondsten:"Sieraden, gespen, munten, aardewerk van rijke bewoners"},stately:{label:"Statig huis",uitleg:"Een groot en deftig woonhuis, vaak van welgestelde families. Soms met kasteelachtige kenmerken.",vondsten:"Huishoudelijke voorwerpen, munten, knopen, aardewerk"},fortress:{label:"Fort/Vesting",uitleg:"Een versterkte militaire bouwwerk, gebouwd om een gebied te verdedigen.",vondsten:"Militaire voorwerpen, kogels, gespen, uniformonderdelen"},defensive:{label:"Verdedigingskasteel",uitleg:"Een kasteel gebouwd voor verdediging, met dikke muren, een gracht en torens.",vondsten:"Wapens, harnasonderdelen, pijlpunten, middeleeuwse munten"},palace:{label:"Paleis",uitleg:"Een groot en luxueus gebouw voor koningen, prinsen of zeer rijke families.",vondsten:"Luxe voorwerpen, sieraden, zegels, zeldzame munten"},castrum:{label:"Romeins fort",uitleg:"Een Romeins legerkamp of fort. Deze zijn bijna 2000 jaar oud!",vondsten:"Romeinse munten, fibulae, militaria, aardewerk"},citadel:{label:"Citadel",uitleg:"Een sterk versterkte kern binnen een stad, als laatste verdedigingslinie.",vondsten:"Militaire voorwerpen uit verschillende periodes"}},ge=z.castle_type?ee[z.castle_type]:null,je=ge?.label||"Kasteel";if(X+=`<br/><span class="text-sm text-purple-700">${je}</span>`,z.start_date&&(X+=`<br/><span class="text-xs text-gray-500">Bouwjaar: ${z.start_date}</span>`),z.heritage&&(X+='<br/><span class="text-sm text-amber-700">Rijksmonument</span>'),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',ge?X+=`<div class="text-sm text-gray-700 mt-1">${ge.uitleg}</div>`:X+='<div class="text-sm text-gray-700 mt-1">Een historisch kasteel of adellijk huis. Kastelen waren vaak het middelpunt van macht en rijkdom in een gebied.</div>',X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',ge?X+=`<div class="text-sm text-gray-700 mt-1">${ge.vondsten}</div>`:X+='<div class="text-sm text-gray-700 mt-1">Munten, sieraden, gespen, aardewerk en andere voorwerpen van de vroegere bewoners.</div>',z.wikipedia||z.website){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',z.wikipedia){const Je=z.wikipedia.startsWith("http")?z.wikipedia:`https://nl.wikipedia.org/wiki/${z.wikipedia.replace(/^nl:/,"")}`;X+=`<div class="text-sm text-gray-700 mt-1"><a href="${Je}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}z.website&&(X+=`<div class="text-sm text-gray-700 mt-1"><a href="${z.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Website bezoeken</a></div>`)}}if(z.historic==="ruins"){const ee=z.ruins_type||"";let ge="Rune",je="Een rune is wat overblijft van een oud gebouw. Het kan een kerk, kasteel, molen of ander bouwwerk zijn geweest.",Je="Baksteenfragmenten, aardewerk, metalen voorwerpen van vroegere bewoners of gebruikers";if(ee.toLowerCase().includes("church")||ee.toLowerCase().includes("kerk")?(ge="Kerkrune",je="De overblijfselen van een oude kerk. Vaak nog te herkennen aan de fundering of een paar muren.",Je="Religieuze voorwerpen, munten van kerkgangers, knopen, gespen"):ee.toLowerCase().includes("castle")||ee.toLowerCase().includes("kasteel")?(ge="Kasteelrune",je="De resten van een middeleeuws kasteel. Soms is alleen de gracht of fundering nog zichtbaar.",Je="Middeleeuwse munten, sieraden, harnasonderdelen, pijlpunten"):ee.toLowerCase().includes("mill")||ee.toLowerCase().includes("molen")?(ge="Molenrune",je="Wat rest van een oude molen. Vaak nog te zien aan de stenen fundering of de molenberg.",Je="Gereedschap, munten, huishoudelijke voorwerpen"):ee.toLowerCase().includes("fort")&&(ge="Fortrune",je="De overblijfselen van een militair fort of verdedigingswerk.",Je="Militaire voorwerpen, kogels, gespen, uniformonderdelen"),X+=`<br/><span class="text-sm text-amber-700">${ge}</span>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${je}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je hier vinden?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${Je}</div>`,z.description&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Beschrijving</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`),z.wikipedia){const ze=z.wikipedia.startsWith("http")?z.wikipedia:`https://${z.wikipedia.split(":")[0]||"nl"}.wikipedia.org/wiki/${z.wikipedia.replace(/^[a-z]{2}:/,"")}`;X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${ze}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(z.bunker_type||z.name&&(z.name.toLowerCase().includes("bunker")||z.name.toLowerCase().includes("kazemat")||z.name.toLowerCase().includes("schuilplaats"))){ae=!0;const ee={munitions:"Munitiebunker",personnel_shelter:"Personeelsschuilplaats",personell_shelter:"Personeelsschuilplaats",command:"Commandobunker",gun_emplacement:"Geschutsbunker",mg_nest:"Mitrailleursnest",technical:"Technische bunker",storage:"Opslagbunker",tobruk:"Tobruk",kazemat:"Kazemat",Flak:"Luchtafweerstelling",hardened_aircraft_shelter:"Vliegtuigshelter",shelter:"Schuilkelder",observation:"Observatiebunker",anti_aircraft:"Luchtafweerstelling"},ge=z.name||"",je=z.bunker_type?ee[z.bunker_type]||z.bunker_type:"";ge&&ge!=="Bunker"&&(X+=`<br/><span class="text-sm font-semibold text-gray-700">${ge}</span>`),je&&je!==ge&&(X+=`<br/><span class="text-xs text-gray-500">${je}</span>`);const Je=Ae.getGeometry()?.getCoordinates();let ze="",nt="",et="";if(Je){const Mt=Fn(Je),zt=Mt[0],yn=Mt[1],q=zt<4.8||zt<5.2&&yn>51.8&&yn<53.5,re=zt>4.2&&zt<4.4&&yn>52&&yn<52.15,J=zt>4.5&&zt<4.7&&yn>52.4&&yn<52.5,te=zt>4&&zt<4.2&&yn>51.95&&yn<52.05,se=zt<4.2&&yn<51.6,oe=zt>5.2&&zt<5.8&&yn>51.9&&yn<52.3;re?(ze="Deze bunker maakt deel uit van de Atlantikwall bij Scheveningen. De Duitsers bouwden hier tijdens WOII zo'n 80 bunkers in de duinen. De muren zijn soms 3 meter dik beton. Voor deze bunkers moesten 138.000 mensen uit Den Haag en Scheveningen hun huis verlaten.",nt="https://nl.wikipedia.org/wiki/Atlantikwall_Museum_Scheveningen",et="Atlantikwall Museum Scheveningen"):J?(ze="Deze bunker hoort bij Festung IJmuiden, een van de zwaarst verdedigde punten van de Atlantikwall. De Duitsers bouwden hier bunkers om de haventoegang te beschermen. Er zijn nu rondleidingen door het Bunkermuseum.",nt="https://www.bunkermuseum.nl/",et="Bunkermuseum IJmuiden"):te?(ze="Deze bunker maakt deel uit van de Atlantikwall bij Hoek van Holland. Dit was een strategisch punt voor de Duitsers vanwege de Nieuwe Waterweg. Veel bunkers zijn nog te bezoeken.",nt="https://www.atlantikwallhoekvanholland.nl/",et="Atlantikwall Hoek van Holland"):se?(ze="Deze bunker hoort bij de Atlantikwall in Zeeland. De Duitsers verdedigden hier de Westerschelde en de kust. Bij Zoutelande en Westkapelle zijn veel bunkers bewaard gebleven.",nt="https://www.bunkermuseumzoutelande.nl/",et="Bunkermuseum Zoutelande"):q?(ze="Deze bunker maakt deel uit van de Atlantikwall: de Duitse verdedigingslinie langs de hele kust van Europa. In Nederland bouwden de Duitsers duizenden bunkers tussen 1942 en 1944.",nt="https://nl.wikipedia.org/wiki/Atlantikwall",et="Atlantikwall (Wikipedia)"):oe?(ze="Deze bunker hoort mogelijk bij de Grebbelinie of de Nieuwe Hollandse Waterlinie. Dit waren Nederlandse verdedigingslinies die de Duitsers na 1940 versterkten met bunkers.",nt="https://nl.wikipedia.org/wiki/Grebbelinie",et="Grebbelinie (Wikipedia)"):(ze="Een bunker uit de Tweede Wereldoorlog. De meeste bunkers in Nederland zijn gebouwd tussen 1940 en 1944, als onderdeel van de Duitse verdediging of langs bestaande Nederlandse linies.",nt="https://nl.wikipedia.org/wiki/Atlantikwall",et="WOII bunkers (Wikipedia)")}else ze="Een bunker uit de Tweede Wereldoorlog.",nt="https://nl.wikipedia.org/wiki/Atlantikwall",et="WOII bunkers (Wikipedia)";X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${ze}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je vinden?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Bij bunkers worden soms voorwerpen gevonden zoals patronen, uniformknopen, gespen en persoonlijke spullen van soldaten.</div>',X+='<div class="mt-2 text-xs text-gray-500 italic">Let op: betreed nooit een bunker zonder toestemming. Raak munitieresten niet aan.</div>',X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',X+='<div class="text-sm text-gray-700 mt-1">',X+=`<a href="${nt}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">${et}</a>`,z.website?X+=`<br/><a href="${z.website}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>`:X+='<br/><a href="https://www.tracesofwar.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">TracesOfWar</a>',X+="</div>"}if(z.historic==="battlefield"){ae=!0;const ee=z.name||"Onbekend slagveld",je={"Slag om Arnhem":{periode:"September 1944",samenvatting:"De Slag om Arnhem was onderdeel van Operatie Market Garden. Geallieerde parachutisten probeerden de brug over de Rijn te veroveren. Na negen dagen hevige gevechten moesten ze zich terugtrekken. Van de 10.000 Britse soldaten werden er 1.500 gedood en 6.500 krijgsgevangen gemaakt.",watZieJe:"Er zijn veel monumenten en infoborden. Het Airborne Museum in Oosterbeek vertelt het hele verhaal. Elk jaar in september is er een herdenking.",uitkomst:"De geallieerden verloren de slag. Nederland bleef nog tot mei 1945 bezet.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Arnhem"},"Slag om de Sloedam":{periode:"1-2 november 1944",samenvatting:"Canadese soldaten vielen de Sloedam aan om Walcheren te bevrijden. De dam was smal en de Duitsers verdedigden fel. Veel soldaten sneuvelden bij deze bloedige aanval.",watZieJe:"Bij de dam staat een monument voor de gevallen Canadezen. Er zijn infoborden die de slag uitleggen.",uitkomst:"De Canadezen wonnen na zware verliezen. Dit opende de weg naar de bevrijding van Walcheren.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_de_Sloedam"},"Slag bij Heiligerlee (1568)":{periode:"23 mei 1568",samenvatting:"De eerste veldslag van de Tachtigjarige Oorlog. Lodewijk van Nassau versloeg het Spaanse leger. Zijn broer Adolf sneuvelde tijdens de strijd.",watZieJe:"In Heiligerlee staat het Slag bij Heiligerlee monument. Het klooster waar Adolf van Nassau begraven ligt is nog te bezoeken.",uitkomst:"De opstandelingen wonnen, maar dit was pas het begin van 80 jaar oorlog.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_bij_Heiligerlee_(1568)"},Overloon:{periode:"Oktober 1944",samenvatting:"Bij Overloon vochten Britten en Amerikanen tegen de Duitsers. Het was een van de zwaarste tankgevechten op Nederlandse bodem. Het dorp werd volledig verwoest.",watZieJe:"Het Oorlogsmuseum Overloon staat op het voormalige slagveld. Je kunt tanks, vliegtuigen en andere voertuigen zien.",uitkomst:"De geallieerden wonnen na wekenlange gevechten.",wikiUrl:"https://nl.wikipedia.org/wiki/Slag_om_Overloon"},"Slagveld Lanakerveld":{periode:"1568",samenvatting:"Onderdeel van de Nederlandse opstand tegen Spanje. Hier vonden gevechten plaats tijdens de beginjaren van de Tachtigjarige Oorlog.",watZieJe:"Het gebied is nu grotendeels landbouwgrond. Lokaal zijn er soms infoborden.",uitkomst:"Onderdeel van de lange strijd tegen de Spaanse overheersing.",wikiUrl:"https://nl.wikipedia.org/wiki/Tachtigjarige_Oorlog"},Blessebrugschans:{periode:"Diverse periodes",samenvatting:"Een historische schans die meerdere keren werd gebruikt in militaire conflicten.",watZieJe:"De resten van de schans zijn nog zichtbaar in het landschap.",uitkomst:"De schans speelde een rol in verschillende conflicten.",wikiUrl:"https://nl.wikipedia.org/wiki/Schans_(vestingwerk)"}}[ee];if(ee!=="Onbekend slagveld"&&ee!=="Historisch slagveld"&&(X+=`<br/><span class="text-sm font-semibold text-red-700">${ee}</span>`),je)X+=`<br/><span class="text-xs text-gray-500">${je.periode}</span>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${je.samenvatting}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe liep het af?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${je.uitkomst}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kun je zien?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${je.watZieJe}</div>`,X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',X+='<div class="text-sm text-gray-700 mt-1">',X+=`<a href="${je.wikiUrl}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a>`,ee.includes("Arnhem")&&(X+='<br/><a href="https://www.airbornemuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Airborne Museum Oosterbeek</a>'),ee.includes("Overloon")&&(X+='<br/><a href="https://www.oorlogsmuseum.nl/" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Oorlogsmuseum Overloon</a>'),X+="</div>";else if(z.date&&(X+=`<br/><span class="text-xs text-gray-500">${z.date}</span>`),z.description?(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`):(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat gebeurde hier?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">Op deze plek vonden historische gevechten plaats. Zoek lokaal naar infoborden of monumenten.</div>'),z.wikipedia){const Je=z.wikipedia.startsWith("http")?z.wikipedia:`https://nl.wikipedia.org/wiki/${z.wikipedia.replace("nl:","")}`;X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bronnen</span></div>',X+=`<div class="text-sm text-gray-700 mt-1"><a href="${Je}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`}}if(z.bron==="Paleobiology Database"){const ee=ze=>{const nt={Mollusca:"weekdieren zoals schelpen en slakken",Brachiopoda:"armpotigen, schelp-achtige dieren",Echinodermata:"stekelhuidigen zoals zee-egels en zeesterren",Chordata:"gewervelde dieren",Arthropoda:"geleedpotigen zoals kreeften en trilobieten",Cnidaria:"neteldieren zoals koralen en kwallen",Bryozoa:"mosdiertjes",Foraminifera:"eencellige schelpdieren",Plantae:"planten",Crinoidea:"zeelelies",Gastropoda:"slakken",Bivalvia:"tweekleppigen zoals mossels en oesters",Cephalopoda:"koppotigen zoals inktvissen en ammonieten",Trilobita:"trilobieten, uitgestorven kreeftachtigen",Mammalia:"zoogdieren",Reptilia:"reptielen",Pisces:"vissen",Amphibia:"amfibien"};for(const[et,Mt]of Object.entries(nt))if(ze.toLowerCase().includes(et.toLowerCase()))return Mt;return""},ge=ze=>{const nt={Cambrium:"541-485 miljoen jaar geleden",Ordovicium:"485-444 miljoen jaar geleden",Siluur:"444-419 miljoen jaar geleden",Devoon:"419-359 miljoen jaar geleden",Carboon:"359-299 miljoen jaar geleden",Perm:"299-252 miljoen jaar geleden",Trias:"252-201 miljoen jaar geleden",Jura:"201-145 miljoen jaar geleden",Krijt:"145-66 miljoen jaar geleden",Paleogeen:"66-23 miljoen jaar geleden",Neogeen:"23-2,6 miljoen jaar geleden",Kwartair:"2,6 miljoen jaar - nu",Pleistoceen:"2,6 miljoen - 11.700 jaar geleden",Holoceen:"11.700 jaar geleden - nu"};for(const[et,Mt]of Object.entries(nt))if(ze.toLowerCase().includes(et.toLowerCase()))return Mt;return""},je=ze=>{const nt={limestone:"kalksteen",sandstone:"zandsteen",shale:"schalie",clay:"klei",sand:"zand",gravel:"grind",marl:"mergel",chalk:"krijt",mudstone:"moddersteen",siltstone:"siltsteen"};let et=ze;for(const[Mt,zt]of Object.entries(nt))et=et.replace(new RegExp(Mt,"gi"),zt);return et},Je=ze=>{const nt={marine:"zee",coastal:"kust",terrestrial:"land",fluvial:"rivier",lacustrine:"meer",reef:"rif",deltaic:"delta",shallow:"ondiep water",deep:"diep water"};let et=ze;for(const[Mt,zt]of Object.entries(nt))et=et.replace(new RegExp(Mt,"gi"),zt);return et};if(z.vindplaats&&(X+=`<br/><span class="text-xs text-gray-600">${z.vindplaats}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',z.taxonomie&&z.taxonomie!=="Onbekend"){const ze=ee(z.taxonomie);ze?(X+=`<div class="text-sm text-gray-700 mt-1">${ze}</div>`,X+=`<div class="text-xs text-gray-500 italic">(${z.taxonomie})</div>`):X+=`<div class="text-sm text-gray-700 mt-1">${z.taxonomie}</div>`}if(z.aantal_fossielen){const ze=parseInt(z.aantal_fossielen),nt=ze>100?"Veel fossielen gevonden op deze locatie.":ze>10?"Meerdere fossielen gevonden op deze locatie.":`${z.aantal_fossielen} fossiel${ze>1?"en":""} gevonden op deze locatie.`;X+=`<div class="text-sm text-gray-600 mt-1">${nt}</div>`}if(z.periode&&z.periode!=="Onbekend"){X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wanneer leefden deze dieren?</span></div>';const ze=ge(z.periode);X+=`<div class="text-sm text-gray-700 mt-1">${z.periode}</div>`,ze&&(X+=`<div class="text-sm text-gray-600">${ze}</div>`),z.ouderdom&&z.ouderdom!=="Onbekend"&&(X+=`<div class="text-sm text-gray-600">Ouderdom: ${z.ouderdom}</div>`)}(z.gesteente||z.formatie||z.milieu)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">In wat voor gesteente?</span></div>',z.gesteente&&(X+=`<div class="text-sm text-gray-700 mt-1">${je(z.gesteente)}</div>`),z.formatie&&(X+=`<div class="text-sm text-gray-600">Formatie: ${z.formatie}</div>`,z.lid&&(X+=`<div class="text-sm text-gray-600 ml-3">Lid: ${z.lid}</div>`)),z.milieu&&(X+=`<div class="text-sm text-gray-600">Leefomgeving: ${Je(z.milieu)}</div>`))}if(z.layerType==="fossielHotspot"){const ee=[];if(z.type&&ee.push(z.type),z.region&&ee.push(z.region),z.country){const ge={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};ee.push(ge[z.country]||z.country)}if(ee.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${ee.join("  ")}</span>`),(z.finds||z.period)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',z.finds&&(X+=`<div class="text-sm text-gray-700 mt-1">${z.finds}</div>`),z.period&&(X+=`<div class="text-sm text-gray-600 mt-1">Periode: ${z.period}</div>`),z.geology&&(X+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${z.geology}</div>`)),z.access||z.tips){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',z.access){const je=z.access.toLowerCase().includes("verboden")||z.access.toLowerCase().includes("niet toegankelijk")?"text-red-600":"text-gray-700";X+=`<div class="text-sm ${je} mt-1">${z.access}</div>`}z.tips&&(X+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${z.tips}</div>`)}}if(z.layerType==="mineralenHotspot"){const ee=[];if(z.region&&ee.push(z.region),z.country){const ge={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};ee.push(ge[z.country]||z.country)}if(ee.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${ee.join("  ")}</span>`),z.minerals&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.minerals}</div>`,z.geology&&(X+=`<div class="text-sm text-gray-600 mt-1">Geologie: ${z.geology}</div>`)),z.access||z.tips){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Hoe kom ik er?</span></div>',z.access){const je=z.access.toLowerCase().includes("verboden")||z.access.toLowerCase().includes("niet toegankelijk")||z.access.toLowerCase().includes("gesloten")?"text-red-600":"text-gray-700";X+=`<div class="text-sm ${je} mt-1">${z.access}</div>`}z.tips&&(X+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${z.tips}</div>`)}}if(z.layerType==="goudrivier"){const ee=[];if(z.river&&ee.push(z.river),z.region&&ee.push(z.region),z.country){const ge={NL:"Nederland",BE:"Belgi",DE:"Duitsland",FR:"Frankrijk"};ee.push(ge[z.country]||z.country)}if(ee.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${ee.join("  ")}</span>`),(z.goldType||z.origin)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat kan ik er vinden?</span></div>',z.goldType&&(X+=`<div class="text-sm text-gray-700 mt-1">${z.goldType}</div>`),z.origin&&(X+=`<div class="text-sm text-gray-600 mt-1">Herkomst: ${z.origin}</div>`)),z.legal||z.tips){if(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Mag ik hier zoeken?</span></div>',z.legal){const je=z.legal.includes("VERBODEN")?"text-red-600 font-semibold":"text-gray-700";X+=`<div class="text-sm ${je} mt-1">${z.legal}</div>`}z.tips&&(X+=`<div class="text-sm text-gray-600 mt-1 italic">Tip: ${z.tips}</div>`)}}if(z.layerType==="wandelroute"){const ee=[];if(z.region&&ee.push(z.region),z.country){const ge={NL:"Nederland",BE:"Belgi"};ee.push(ge[z.country]||z.country)}if(ee.length>0&&(X+=`<br/><span class="text-xs text-gray-600">${ee.join("  ")}</span>`),z.distance||z.duration){const ge=z.distance?`${z.distance} km`:"",je=z.duration?`${z.duration}`:"",Je=[ge,je].filter(Boolean).join("  ");Je&&(X+=`<br/><span class="text-sm text-green-700 font-medium">${Je}</span>`)}(z.description||z.highlights)&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat ga je zien?</span></div>',z.description&&(X+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`),z.highlights&&(X+=`<div class="text-sm text-gray-600 mt-1">Hoogtepunten: ${z.highlights}</div>`)),z.startAddress&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Waar begin ik?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.startAddress}</div>`),z.url&&(X+=`<div class="mt-3"><a href="${z.url}" target="_blank" class="text-sm text-blue-600 hover:underline">Bekijk route en download GPX</a></div>`)}if(z.layerType==="hunebed"){z.period&&(X+=`<br/><span class="text-sm text-purple-700">Periode: ${z.period}</span>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat zie je hier?</span></div>',z.description&&(X+=`<div class="text-sm text-gray-700 mt-1">${z.description}</div>`);const ee=[];if(z.stones){const ge=z.stones.toLowerCase(),je=ge.match(/(\d+)\s*dekst[^\s,]*/i),Je=ge.match(/(\d+)\s*draagst[^\s,]*/i),ze=ge.match(/(\d+)\s*sluitst[^\s,]*/i),nt=ge.match(/(\d+)\s*poortst[^\s,]*/i),et=ge.match(/(\d+)\s*gangdekst[^\s,]*/i),Mt=ge.match(/(\d+)\s*gangzijst[^\s,]*/i);je&&ee.push(`${je[1]} deksteen${parseInt(je[1])>1?"en":""} (de grote steen${parseInt(je[1])>1?"en":""} bovenop)`),Je&&ee.push(`${Je[1]} draagstenen (de stenen die de dekstenen dragen)`),ze&&ee.push(`${ze[1]} sluitsteen${parseInt(ze[1])>1?"en":""} (afsluiting aan de korte zijden)`),nt&&ee.push(`${nt[1]} poortsteen${parseInt(nt[1])>1?"en":""} (bij de ingang)`),et&&ee.push(`${et[1]} gangdeksteen${parseInt(et[1])>1?"en":""} (boven de toegangsgang)`),Mt&&ee.push(`${Mt[1]} gangzijstenen (langs de toegangsgang)`)}if(z.length&&ee.push(`Een grafkamer van ${z.length} lang`),z.width&&ee.push(`${z.width}`),ee.length>0&&(X+='<div class="text-sm text-gray-700 mt-1">Het hunebed heeft:</div>',X+='<ul class="list-disc list-inside text-sm text-gray-700 mt-1 space-y-0.5">',ee.forEach(ge=>{X+=`<li>${ge}</li>`}),X+="</ul>"),z.notable){const ge=z.notable.toLowerCase();let je="Wat is hier bijzonder?";ge.includes("grootste")?je="Waarom is dit het grootste hunebed?":ge.includes("klein")||ge.includes("kindhunebed")?je="Waarom is dit hunebed zo klein?":ge.includes("cluster")||ge.includes("naast elkaar")?je="Waarom liggen hier meerdere hunebedden?":(ge.includes("enige")||ge.includes("westelijk")||ge.includes("noordelijk"))&&(je="Wat maakt deze locatie bijzonder?"),X+=`<div class="mt-3"><span class="text-sm font-semibold text-gray-800">${je}</span></div>`,X+=`<div class="text-sm text-gray-700 mt-1">${z.notable}</div>`}X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is de Trechterbeker cultuur?</span></div>',X+='<div class="text-sm text-gray-700 mt-1">De Trechterbeker cultuur is de naam voor de mensen die 5.000 jaar geleden in Nederland woonden. Ze maakten potten met een trechter-vorm. Daarom heten ze zo. Deze mensen bouwden de hunebedden als graven voor hun doden.</div>',z.finds&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Wat is hier gevonden?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.finds}</div>`),z.museum&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Museum in de buurt</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">${z.museum}</div>`),X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Bezoeken</span></div>',z.access?X+=`<div class="text-sm text-gray-700 mt-1">${z.access}</div>`:X+='<div class="text-sm text-gray-700 mt-1">Je kunt dit hunebed gratis bezoeken.</div>',z.wikipedia&&(X+='<div class="mt-3"><span class="text-sm font-semibold text-gray-800">Meer weten?</span></div>',X+=`<div class="text-sm text-gray-700 mt-1">Lees meer op <a href="${z.wikipedia}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">Wikipedia</a></div>`)}if((z.inventarisnummer||z.locatie_naam)&&(z.locatie_naam&&(X+=`<br/><span class="text-sm font-semibold">${z.locatie_naam}</span>`),z.inventarisnummer&&(X+=`<br/><span class="text-xs text-gray-500">CAI: ${z.inventarisnummer}</span>`),z.datering_tekst&&(X+=`<br/><span class="text-sm text-purple-700">${z.datering_tekst}</span>`)),(z.veensoort||z.dikte)&&(z.veensoort&&(X+=`<br/><span class="text-sm text-amber-700">${z.veensoort}</span>`),z.dikte&&(X+=`<br/><span class="text-xs text-gray-600">Dikte: ${z.dikte}</span>`)),z.nature&&z.debut){X+=`<br/><span class="text-sm text-purple-700">${z.nature}</span>`;const ee=z.debut===z.fin?z.debut:`${z.debut} - ${z.fin}`;ee&&(X+=`<br/><span class="text-sm text-gray-700">Periode: ${ee}</span>`),z.structure&&(X+=`<br/><span class="text-xs text-gray-600">${z.structure}</span>`),z.commune&&(X+=`<br/><span class="text-xs text-gray-500">${z.commune}</span>`),z.decouvert&&(X+=`<br/><span class="text-xs text-gray-400">Ontdekt: ${z.decouvert}</span>`),z.numero&&(X+=`<br/><span class="text-xs text-gray-400">${z.numero}</span>`)}if((z.NATURE_OPE||z.CODE_OPERA)&&(z.TITRE&&(X+=`<br/><span class="text-sm font-semibold">${z.TITRE}</span>`),z.NATURE_OPE&&(X+=`<br/><span class="text-sm text-amber-700">${z.NATURE_OPE}</span>`),z.AUTEUR&&(X+=`<br/><span class="text-xs text-gray-600">Auteur: ${z.AUTEUR}</span>`),z.DATE&&(X+=`<br/><span class="text-xs text-gray-500">Datum: ${z.DATE}</span>`),z.COMMUNE&&(X+=`<br/><span class="text-xs text-gray-500">${z.COMMUNE}</span>`)),z.type_protection&&(z.n_site||z.t_site)){const ee=z.type_protection==="Classe"?"text-red-700":"text-amber-700";X+=`<br/><span class="text-sm ${ee}">${z.type_protection}</span>`,z.n_site&&(X+=`<br/><span class="text-sm font-semibold">${z.n_site}</span>`),z.t_site&&(X+=`<br/><span class="text-xs text-gray-600">${z.t_site}</span>`),z.c_site&&(X+=`<br/><span class="text-xs text-gray-500">Code: ${z.c_site}</span>`),z.d_creation&&(X+=`<br/><span class="text-xs text-gray-400">Beschermd sinds: ${z.d_creation}</span>`)}if(z.type_protection&&z.cod_diren){const ee=z.type_protection==="Classe"?"text-red-700":"text-amber-700";if(X+=`<br/><span class="text-sm ${ee}">${z.type_protection}</span>`,z.proced&&(X+=`<br/><span class="text-xs text-gray-600">${z.proced}</span>`),z.d_proced&&(X+=`<br/><span class="text-xs text-gray-500">Date: ${z.d_proced}</span>`),z.comment){const ge=String(z.comment).slice(0,150);X+=`<br/><span class="text-xs text-gray-600 italic">${ge}${String(z.comment).length>150?"...":""}</span>`}}if(z.type_protection&&z.nomsite){const ee=z.type_protection==="Classe"?"text-red-700":"text-amber-700";if(X+=`<br/><span class="text-sm ${ee}">${z.type_protection}</span>`,z.caractere&&(X+=`<br/><span class="text-xs text-gray-600">${z.caractere}</span>`),z.datedecis&&(X+=`<br/><span class="text-xs text-gray-500">Date: ${z.datedecis}</span>`),z.descriptio){const ge=String(z.descriptio).slice(0,150);X+=`<br/><span class="text-xs text-gray-600 italic">${ge}${String(z.descriptio).length>150?"...":""}</span>`}}if(z.secteur&&z.style){if(X+=`<br/><span class="text-sm text-gray-700">${z.secteur}</span>`,z["sous-secteur"]&&(X+=`<br/><span class="text-xs text-gray-600">${z["sous-secteur"]}</span>`),z.description){const ee=String(z.description).slice(0,150);X+=`<br/><span class="text-xs text-gray-600 italic">${ee}${String(z.description).length>150?"...":""}</span>`}z.url&&(X+=`<br/><a href="${z.url}" target="_blank" class="text-xs text-blue-600 hover:underline">Meer info</a>`)}if(z.nature_operation||z.synthese){z.nature_operation&&(X+=`<br/><span class="text-sm text-red-700">${z.nature_operation}</span>`),z.responsable_operation&&(X+=`<br/><span class="text-xs text-gray-600">Responsable: ${z.responsable_operation}</span>`),z.date_operation&&(X+=`<br/><span class="text-xs text-gray-500">Datum: ${z.date_operation}</span>`);const ee=[];if(z.prehistoire==="Oui"&&ee.push("Prehistorie"),z.protohistoire==="Oui"&&ee.push("Protohistorie"),z.antiquite==="Oui"&&ee.push("Romeins"),z.moyen_age==="Oui"&&ee.push("Middeleeuwen"),z.temps_modernes==="Oui"&&ee.push("Moderne tijd"),ee.length>0&&(X+=`<br/><span class="text-sm text-purple-700">${ee.join(", ")}</span>`),z.adresse&&(X+=`<br/><span class="text-xs text-gray-500">${z.adresse}</span>`),z.synthese){const ge=String(z.synthese).slice(0,200);X+=`<br/><span class="text-xs text-gray-600 italic">${ge}${String(z.synthese).length>200?"...":""}</span>`}}if(z.operator&&(X+=`<br/><span class="text-sm text-gray-600">${z.operator}</span>`),!ae){if(z.opening_hours){const ee=wae(String(z.opening_hours));X+=`<br/><span class="text-xs text-green-600">Open: ${ee}</span>`}z.website&&(X+=`<br/><a href="${z.website}" target="_blank" class="text-xs text-blue-600 underline">Website</a>`)}if(z.addr_street){const ee=[z.addr_street,z.addr_housenumber,z.addr_postcode].filter(Boolean).join(" ");X+=`<br/><span class="text-xs text-gray-500">${ee}</span>`}const Ve=z.description||z.omschrijving||z.descr||z.info;Ve&&Ve!==Et&&(X+=`<br/><span class="text-sm text-gray-600">${Ve}</span>`),jn.push(X),en.push({geometry:$o(sn),properties:z,popupHtml:X})}const Nn=t.getView().getResolution()||1,Ii=await Qn(Ft.coordinate,Nn);jn.push(...Ii);for(const Ae of Ii)en.push(null);const He=await Gi;if(jn.length===0&&He!==null){const Ae=`<strong class="text-blue-800">Terrein</strong>
          <br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
            <span class="text-xs text-gray-400">Hoogte:</span>
            <span class="text-sm font-medium text-blue-600">${He.toFixed(2)} m NAP</span>
          </div>`;jn.push(Ae),en.push(null)}if(jn.length>0&&He!==null&&(jn[0]+=`<br/><div class="mt-2 pt-2 border-t border-gray-100 flex items-center gap-1">
          <span class="text-xs text-gray-400">Hoogte:</span>
          <span class="text-sm font-medium text-blue-600">${He.toFixed(2)} m NAP</span>
        </div>`),jn.length>0){l(jn),ie(en),u(0),console.log(` KLIK OPGESLAGEN: [${Ft.coordinate[0].toFixed(0)}, ${Ft.coordinate[1].toFixed(0)}]`),y(Ft.coordinate),b(!1),U(!1),Ce(!1),W(""),de(null);const Ae=Fn(Ft.coordinate);Ue(Ae),M(`https://www.google.com/maps/dir/?api=1&destination=${Ae[1]},${Ae[0]}`),D(`https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=${Ae[1]},${Ae[0]}`),f(!0)}};return t.on("click",dr),()=>{t.un("click",dr)}},[t]);const Ai=()=>{f(!1),Se("half"),t&&_&&(Gz(t),b(!1))},Ls=(_t,Qn)=>{const dr=Qn.velocity.y,Ft=Qn.offset.y;Ke==="half"?Ft<-50||dr<-500?Se("full"):(Ft>100||dr>500)&&Ai():(Ft>50||dr>300)&&Se("half")};return p.jsx(Wn,{children:h&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[1500]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:Ai}),p.jsxs(gt.div,{className:"fixed bottom-0 left-0 right-0 z-[1501] bg-white rounded-t-2xl shadow-2xl overflow-hidden flex flex-col",style:{fontSize:`${14*ve/100}px`,height:Ke==="full"?"90vh":"auto",maxHeight:Ke==="full"?"90vh":"35vh"},initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.3,onDragEnd:Ls,children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white cursor-grab active:cursor-grabbing rounded-t-xl select-none",onClick:()=>Se(Ke==="half"?"full":"half"),children:[p.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[Ye&&p.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[p.jsx("button",{onClick:_t=>{_t.stopPropagation(),Hn()},className:"p-1 text-white/80 hover:text-white transition-colors border-0 outline-none bg-transparent","aria-label":"Vorige laag",children:p.jsx(f2e,{size:18})}),p.jsxs("span",{className:"text-white/80 font-medium min-w-[32px] text-center",style:{fontSize:"0.75em"},children:[c+1,"/",a.length]}),p.jsx("button",{onClick:_t=>{_t.stopPropagation(),ei()},className:"p-1 text-white/80 hover:text-white transition-colors border-0 outline-none bg-transparent","aria-label":"Volgende laag",children:p.jsx(_d,{size:18})})]}),p.jsx("span",{className:"font-medium text-white truncate",style:{fontSize:"0.9em"},children:pn||"Info"})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[ke&&p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:_t=>{_t.stopPropagation(),U(!V)},className:`p-1 transition-colors flex-shrink-0 border-0 outline-none bg-transparent rounded hover:bg-white/20 ${G?"text-green-300":"text-white/80 hover:text-white"}`,title:"Toevoegen aan mijn laag","aria-label":"Toevoegen aan mijn laag",children:G?p.jsx(Ep,{size:16}):p.jsx(Ec,{size:16})}),V&&p.jsxs("div",{className:"absolute right-0 top-full mt-1 z-50 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[180px] max-w-[220px]",children:[p.jsx("div",{className:"px-3 py-1 text-xs text-gray-400 font-medium",children:"Toevoegen aan:"}),p.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:i.filter(_t=>!_t.archived).map(_t=>p.jsxs("button",{onClick:()=>{const Qn=le;s(_t.id,{name:pn||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[ke[0],ke[1]],sourceLayer:pn,geometry:Qn?.geometry,sourceProperties:Qn?.properties,popupContent:Qn?.popupHtml}),U(!1),de(_t.name),setTimeout(()=>de(null),2e3)},className:"w-full px-3 py-1.5 text-left text-sm text-gray-700 hover:bg-blue-50 border-0 outline-none bg-transparent flex items-center gap-2",children:[p.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:_t.color}}),p.jsx("span",{className:"truncate",children:_t.name})]},_t.id))}),p.jsx("div",{className:"border-t border-gray-100 mt-1 pt-1",children:De?p.jsxs("div",{className:"px-2 py-1",children:[p.jsx("input",{type:"text",value:Q,onChange:_t=>W(_t.target.value),placeholder:"Naam nieuwe laag...",className:"w-full px-2 py-1 text-sm border border-gray-200 rounded focus:outline-none focus:border-orange-400",autoFocus:!0,onKeyDown:_t=>{if(_t.key==="Enter"&&Q.trim()){const Qn=o(Q.trim()),dr=le;s(Qn,{name:pn||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[ke[0],ke[1]],sourceLayer:pn,geometry:dr?.geometry,sourceProperties:dr?.properties,popupContent:dr?.popupHtml}),U(!1),Ce(!1),W(""),de(Q.trim()),setTimeout(()=>de(null),2e3)}else _t.key==="Escape"&&(Ce(!1),W(""))}}),p.jsxs("div",{className:"flex gap-1 mt-1",children:[p.jsx("button",{onClick:()=>{if(Q.trim()){const _t=o(Q.trim()),Qn=le;s(_t,{name:pn||"Punt",category:"Overig",notes:"",url:void 0,coordinates:[ke[0],ke[1]],sourceLayer:pn,geometry:Qn?.geometry,sourceProperties:Qn?.properties,popupContent:Qn?.popupHtml}),U(!1),Ce(!1),W(""),de(Q.trim()),setTimeout(()=>de(null),2e3)}},disabled:!Q.trim(),className:"flex-1 px-2 py-1 text-xs bg-orange-500 text-white rounded disabled:opacity-50",children:"Toevoegen"}),p.jsx("button",{onClick:()=>{Ce(!1),W("")},className:"px-2 py-1 text-xs text-gray-500 hover:text-gray-700",children:"Annuleer"})]})]}):p.jsxs("button",{onClick:()=>Ce(!0),className:"w-full px-3 py-1.5 text-left text-sm text-orange-600 hover:bg-orange-50 border-0 outline-none bg-transparent flex items-center gap-2",children:[p.jsx(Ec,{size:14}),p.jsx("span",{children:"Nieuwe laag maken..."})]})})]})]}),O&&p.jsx("a",{href:O,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 text-amber-500 hover:text-amber-600 transition-colors flex-shrink-0",title:"Open Street View","aria-label":"Open Street View",children:p.jsx(w2e,{size:18})}),C&&p.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",onClick:_t=>_t.stopPropagation(),className:"p-1 text-white/80 hover:text-white transition-colors flex-shrink-0 rounded hover:bg-white/20",title:"Navigeer naar locatie","aria-label":"Open in Google Maps",children:p.jsx(Cg,{size:16})}),p.jsx(g2e,{size:18,className:"text-white/60 mx-1"}),p.jsx("button",{onClick:_t=>{_t.stopPropagation(),Ai()},className:"p-1 text-white/80 hover:text-white transition-colors flex-shrink-0 border-0 outline-none bg-transparent rounded hover:bg-white/20","aria-label":"Sluiten",children:p.jsx(Kr,{size:16})})]})]}),p.jsx("div",{className:`px-4 py-3 overflow-y-auto select-text min-h-0 ${Ke==="full"?"flex-1":""}`,style:{userSelect:"text",WebkitUserSelect:"text"},dangerouslySetInnerHTML:{__html:dt}}),p.jsxs("div",{className:"px-4 py-2 border-t border-gray-100 flex items-center gap-2 flex-shrink-0",children:[p.jsx(iq,{size:14,className:"text-gray-400 flex-shrink-0"}),p.jsx("input",{type:"range",min:"80",max:"150",value:ve,onChange:_t=>we(parseInt(_t.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),p.jsxs("span",{className:"text-gray-400 w-8 text-right",style:{fontSize:"0.857em"},children:[ve,"%"]})]}),zn&&I&&!N&&p.jsxs("div",{className:"px-4 pb-4 flex gap-2 flex-shrink-0",children:[p.jsxs("button",{onClick:()=>{const _t=r.find(Qn=>Qn.id===I);_t&&L(_t)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(Sp,{size:16}),p.jsx("span",{children:"Bewerken"})]}),p.jsxs("button",{onClick:()=>{e(I),f(!1),P(null)},className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(Th,{size:16}),p.jsx("span",{children:"Verwijderen"})]})]}),N&&p.jsxs("div",{className:"px-4 pb-4 space-y-3 border-t border-gray-100 pt-3 flex-shrink-0 overflow-y-auto max-h-[40vh]",children:[p.jsx("div",{className:"text-sm font-medium text-blue-600",children:"Vondst bewerken"}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Objecttype"}),p.jsx("input",{type:"text",value:N.objectType,onChange:_t=>L({...N,objectType:_t.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Materiaal"}),p.jsx("input",{type:"text",value:N.material,onChange:_t=>L({...N,material:_t.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Periode"}),p.jsx("input",{type:"text",value:N.period,onChange:_t=>L({...N,period:_t.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-xs text-gray-500",children:"Notities"}),p.jsx("textarea",{value:N.notes,onChange:_t=>L({...N,notes:_t.target.value}),className:"w-full px-2 py-1 text-sm bg-gray-50 rounded border-0 outline-none focus:bg-blue-50 resize-none h-16"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>L(null),className:"flex-1 px-3 py-2 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none text-sm",children:"Annuleren"}),p.jsx("button",{onClick:()=>{n(N.id,{objectType:N.objectType,material:N.material,period:N.period,notes:N.notes}),L(null),f(!1)},className:"flex-1 px-3 py-2 text-white bg-blue-500 hover:bg-blue-600 rounded-lg transition-colors border-0 outline-none text-sm",children:"Opslaan"})]})]}),hr&&g&&p.jsx("div",{className:"px-4 pb-4 border-t border-gray-100",children:_?p.jsxs("button",{onClick:Rr,className:"w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-gray-600 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(W2,{size:16}),p.jsx("span",{children:"Hoogtekaart verbergen"})]}):p.jsx("button",{onClick:_o,disabled:T,className:`w-full flex items-center justify-center gap-2 px-3 py-2 mt-3 text-white rounded-lg transition-colors border-0 outline-none ${T?"bg-blue-400 cursor-wait":"bg-blue-500 hover:bg-blue-600"}`,children:T?p.jsxs(p.Fragment,{children:[p.jsx(qI,{size:16,className:"animate-spin"}),p.jsx("span",{children:"Laden..."})]}):p.jsxs(p.Fragment,{children:[p.jsx(W2,{size:16}),p.jsx("span",{children:"Hoogtekaart tonen"})]})})})]})]})})}const Eae=1e-4;function VSt(t,e){return t.points.some(n=>{const r=Math.abs(n.coordinates[0]-e[0]),i=Math.abs(n.coordinates[1]-e[1]);return r<Eae&&i<Eae})}function zSt(){const t=li(D=>D.map),e=gr(D=>D.openVondstForm),{openAddPointModal:n,openCreateLayerModal:r,openLayerManagerModal:i}=gr(),s=ps(D=>D.layers),[o,a]=Y.useState(null),[l,c]=Y.useState(!1),[u,h]=Y.useState(!1),[f,g]=Y.useState(!1),y=Y.useRef(null),_=Y.useRef(null);Y.useEffect(()=>{if(!t){console.log(" LongPressMenu: map not ready");return}const D=t.getViewport();if(!D){console.log(" LongPressMenu: viewport not ready");return}console.log(" LongPressMenu: attached to viewport",D);const V=600,U=15,G=Ce=>{if(console.log(" Touch start, touches:",Ce.touches.length),Ce.touches.length!==1)return;const Q=Ce.touches[0];_.current={x:Q.clientX,y:Q.clientY},console.log(" Starting long press timer at:",_.current),y.current&&clearTimeout(y.current),y.current=window.setTimeout(()=>{if(console.log(" Timer fired! startPos:",_.current),!_.current)return;const W=window.__olMap;if(!W){console.log(" Map not available (global)");return}const ne=D.getBoundingClientRect(),ie=[_.current.x-ne.left,_.current.y-ne.top],le=W.getCoordinateFromPixel(ie);if(le){const ve=Fn(le);Ce.preventDefault(),a({pixel:[_.current.x,_.current.y],coordinate:ve}),c(!0),h(!1),setTimeout(()=>h(!0),300),"vibrate"in navigator&&navigator.vibrate(50),console.log(" Long press detected at:",ve)}},V)},de=Ce=>{if(!y.current||!_.current)return;const Q=Ce.touches[0],W=Q.clientX-_.current.x,ne=Q.clientY-_.current.y,ie=Math.sqrt(W*W+ne*ne);ie>U&&(console.log(" Touch moved too much, cancelling. Distance:",ie),clearTimeout(y.current),y.current=null)},ke=()=>{console.log(" Touch end, timer active:",!!y.current),y.current&&(console.log(" Cancelling timer on touch end"),clearTimeout(y.current),y.current=null),_.current=null},Ue=Ce=>{l&&Ce.preventDefault()},Ne=Ce=>{Ce.button===0&&(console.log(" Mouse down"),_.current={x:Ce.clientX,y:Ce.clientY},y.current&&clearTimeout(y.current),y.current=window.setTimeout(()=>{if(console.log(" Mouse timer fired!"),!_.current)return;const Q=window.__olMap;if(console.log(" __olMap:",Q),console.log(" __olMap constructor:",Q?.constructor?.name),console.log(" has getCoordinateAtPixel:",typeof Q?.getCoordinateAtPixel),!Q){console.log(" Map not available (global)");return}const W=D.getBoundingClientRect(),ne=[_.current.x-W.left,_.current.y-W.top];console.log(" Pixel:",ne);const ie=Q.getCoordinateFromPixel(ne);if(console.log(" Coordinate:",ie),ie){const le=Fn(ie);a({pixel:[_.current.x,_.current.y],coordinate:le}),c(!0),h(!1),setTimeout(()=>h(!0),300),console.log(" Long press (mouse) detected at:",le)}},V))},fe=Ce=>{if(!y.current||!_.current)return;const Q=Ce.clientX-_.current.x,W=Ce.clientY-_.current.y;Math.sqrt(Q*Q+W*W)>U&&(console.log(" Mouse moved, cancelling"),clearTimeout(y.current),y.current=null)},De=()=>{console.log(" Mouse up"),y.current&&(clearTimeout(y.current),y.current=null),_.current=null};return D.addEventListener("touchstart",G,{passive:!1}),D.addEventListener("touchmove",de,{passive:!0}),D.addEventListener("touchend",ke),D.addEventListener("touchcancel",ke),D.addEventListener("contextmenu",Ue),D.addEventListener("mousedown",Ne),D.addEventListener("mousemove",fe),D.addEventListener("mouseup",De),D.addEventListener("mouseleave",De),()=>{D.removeEventListener("touchstart",G),D.removeEventListener("touchmove",de),D.removeEventListener("touchend",ke),D.removeEventListener("touchcancel",ke),D.removeEventListener("contextmenu",Ue),D.removeEventListener("mousedown",Ne),D.removeEventListener("mousemove",fe),D.removeEventListener("mouseup",De),D.removeEventListener("mouseleave",De),y.current&&clearTimeout(y.current)}},[t,l]);const b=()=>{u&&(c(!1),a(null),h(!1),g(!1))},T=()=>{c(!1),a(null),h(!1),g(!1)},A=D=>{if(!o)return;const[V,U]=o.coordinate;n(D,{lat:U,lng:V}),T()},I=()=>{r(),T()},P=()=>{if(!o)return;const[D,V]=o.coordinate;e({lat:V,lng:D}),c(!1),a(null),h(!1)},N=()=>{if(!o)return;const[D,V]=o.coordinate,U=`https://www.google.com/maps?q=${V},${D}`;window.open(U,"_blank"),c(!1),a(null),h(!1)},L=()=>{if(!o)return;const[D,V]=o.coordinate,U=`https://www.google.com/maps?layer=c&cbll=${V},${D}`;window.open(U,"_blank"),T()},C=()=>{if(!o)return;const D=document.createElement("input");D.type="file",D.accept="image/*",D.capture="environment",D.onchange=async V=>{const U=V.target.files?.[0];if(!U)return;const[G,de]=o.coordinate;e({lat:de,lng:G},U)},D.click(),T()},M=()=>{i(),T()},O=D=>{const[V,U]=D;return`${U.toFixed(5)}N, ${V.toFixed(5)}E`};return p.jsx(Wn,{children:l&&o&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[1600]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:b}),p.jsxs(gt.div,{className:"fixed z-[1601] bg-white rounded-xl shadow-md overflow-hidden min-w-[200px] border-0 outline-none",style:{left:Math.min(o.pixel[0],window.innerWidth-220),top:(()=>{const D=f?480:380;return window.innerHeight-o.pixel[1]<D&&o.pixel[1]>D?o.pixel[1]-D+40:Math.min(o.pixel[1],window.innerHeight-D)})()},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[p.jsx("div",{className:"px-4 py-3 bg-white border-b border-gray-100",children:p.jsxs("div",{className:"flex items-center gap-2 text-blue-600",children:[p.jsx(Ka,{size:16}),p.jsx("span",{className:"text-xs font-mono",children:O(o.coordinate)})]})}),p.jsxs("div",{className:"bg-white",children:[p.jsxs("button",{onClick:P,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-orange-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(BN,{size:20,className:"text-orange-500"}),p.jsx("span",{className:"font-medium",children:"Vondst toevoegen"})]}),p.jsxs("button",{onClick:C,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-green-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(CL,{size:20,className:"text-green-500"}),p.jsx("span",{className:"font-medium",children:"Foto maken"})]}),p.jsxs("div",{className:"relative",children:[p.jsxs("button",{onClick:()=>g(!f),className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(Ga,{size:20,className:"text-purple-500"}),p.jsx("span",{className:"font-medium flex-1 text-left",children:"Voeg toe aan laag..."}),p.jsx(_d,{size:16,className:`text-gray-400 transition-transform ${f?"rotate-90":""}`})]}),p.jsx(Wn,{children:f&&p.jsx(gt.div,{className:"bg-gray-50 border-t border-gray-100",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:s.length===0?p.jsxs("button",{onClick:I,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none",children:[p.jsx(Ec,{size:14}),p.jsx("span",{children:"Maak eerst een laag aan"})]}):p.jsxs(p.Fragment,{children:[s.map(D=>{const V=o?VSt(D,o.coordinate):!1;return p.jsxs("button",{onClick:()=>!V&&A(D.id),className:`w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm bg-transparent border-0 outline-none ${V?"text-gray-400 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,title:V?"Al toegevoegd aan deze laag":void 0,disabled:V,children:[V&&p.jsx(Ep,{size:14,className:"text-green-500 flex-shrink-0"}),p.jsx("span",{className:"truncate",children:D.name}),p.jsx("span",{className:"text-xs text-gray-400 ml-auto",children:V?"al toegevoegd":`(${D.points.length})`})]},D.id)}),p.jsxs("button",{onClick:I,className:"w-full px-4 py-2 pl-11 flex items-center gap-2 text-sm text-purple-600 hover:bg-purple-50 bg-transparent border-0 outline-none border-t border-gray-200",children:[p.jsx(Ec,{size:14}),p.jsx("span",{children:"Nieuwe laag..."})]})]})})})]}),p.jsxs("button",{onClick:M,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-purple-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(Fut,{size:20,className:"text-purple-500"}),p.jsx("span",{className:"font-medium",children:"Lagen beheren"})]}),p.jsxs("button",{onClick:N,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-blue-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(Cg,{size:20,className:"text-blue-600"}),p.jsx("span",{className:"font-medium",children:"Open in Google Maps"})]}),p.jsxs("button",{onClick:L,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors hover:bg-yellow-50 text-gray-700 bg-white border-0 outline-none",children:[p.jsx(w2e,{size:20,className:"text-yellow-600"}),p.jsx("span",{className:"font-medium",children:"Street View"})]})]}),p.jsx("div",{className:"bg-white",children:p.jsxs("button",{onClick:T,className:"w-full px-4 py-3 flex items-center justify-center gap-2 text-gray-500 hover:bg-blue-50 transition-colors bg-white border-0 outline-none",children:[p.jsx(Kr,{size:18}),p.jsx("span",{children:"Annuleren"})]})})]})]})})}function GSt(t){return t}function USt(t){if(t==null)return GSt;var e,n,r=t.scale[0],i=t.scale[1],s=t.translate[0],o=t.translate[1];return function(a,l){l||(e=n=0);var c=2,u=a.length,h=new Array(u);for(h[0]=(e+=a[0])*r+s,h[1]=(n+=a[1])*i+o;c<u;)h[c]=a[c],++c;return h}}function BSt(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}function WSt(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(n){return Sae(t,n)})}:Sae(t,e)}function Sae(t,e){var n=e.id,r=e.bbox,i=e.properties==null?{}:e.properties,s=HSt(t,e);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function HSt(t,e){var n=USt(t.transform),r=t.arcs;function i(u,h){h.length&&h.pop();for(var f=r[u<0?~u:u],g=0,y=f.length;g<y;++g)h.push(n(f[g],g));u<0&&BSt(h,y)}function s(u){return n(u)}function o(u){for(var h=[],f=0,g=u.length;f<g;++f)i(u[f],h);return h.length<2&&h.push(h[0]),h}function a(u){for(var h=o(u);h.length<4;)h.push(h[0]);return h}function l(u){return u.map(a)}function c(u){var h=u.type,f;switch(h){case"GeometryCollection":return{type:h,geometries:u.geometries.map(c)};case"Point":f=s(u.coordinates);break;case"MultiPoint":f=u.coordinates.map(s);break;case"LineString":f=o(u.arcs);break;case"MultiLineString":f=u.arcs.map(o);break;case"Polygon":f=l(u.arcs);break;case"MultiPolygon":f=u.arcs.map(l);break;default:return null}return{type:h,coordinates:f}}return c(e)}async function WLt(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`Failed to load ${t}: ${e.statusText}`);const n=await e.json();return console.log(` Loaded GeoJSON from ${t}`),n}catch(e){throw console.error(`Error loading GeoJSON from ${t}:`,e),e}}async function qSt(t){try{const e=await fetch(t);if(!e.ok)throw new Error(`Failed to load ${t}: ${e.statusText}`);const n=await e.json(),r=Object.keys(n.objects)[0],i=WSt(n,n.objects[r]);return console.log(` Loaded and converted TopoJSON from ${t}`),i}catch(e){throw console.error(`Error loading TopoJSON from ${t}:`,e),e}}function KSt(t){return new NL({featureProjection:"EPSG:3857"}).readFeatures(t)}const qq={all:{name:"Alle provincies",bounds:[3.37,50.75,7.21,53.47]},groningen:{name:"Groningen",bounds:[6.2,53.1,7.21,53.47]},friesland:{name:"Friesland",bounds:[5.05,52.85,6.25,53.45]},drenthe:{name:"Drenthe",bounds:[6.1,52.65,7.1,53.15]},overijssel:{name:"Overijssel",bounds:[5.85,52.15,6.9,52.7]},flevoland:{name:"Flevoland",bounds:[5.15,52.25,6,52.65]},gelderland:{name:"Gelderland",bounds:[5,51.75,6.4,52.45]},utrecht:{name:"Utrecht",bounds:[4.85,51.9,5.65,52.25]},"noord-holland":{name:"Noord-Holland",bounds:[4.5,52.2,5.25,52.95]},"zuid-holland":{name:"Zuid-Holland",bounds:[3.85,51.8,4.9,52.35]},zeeland:{name:"Zeeland",bounds:[3.37,51.2,4.3,51.75]},"noord-brabant":{name:"Noord-Brabant",bounds:[4.35,51.25,6,51.85]},limburg:{name:"Limburg",bounds:[5.55,50.75,6.25,51.8]}};function YSt(t,e,n){if(n==="all")return!0;const r=qq[n];if(!r)return!0;const[i,s,o,a]=r.bounds;return t>=i&&t<=o&&e>=s&&e<=a}let FR=null;async function Kq(){if(FR)return FR;const t=await qSt("/detectorapp-nl/data/amk_monumenten_full.topojson");return FR=KSt(t),FR}function XSt(t,e,n=50){const r=t.toLowerCase(),i=e.toLowerCase(),s=r.indexOf(i);if(s===-1)return t.substring(0,100)+"...";const o=Math.max(0,s-n),a=Math.min(t.length,s+e.length+n);let l="";return o>0&&(l+="..."),l+=t.substring(o,a),a<t.length&&(l+="..."),l}async function ZSt(t,e=50,n="all"){if(!t||t.length<2)return[];const r=await Kq(),i=[],o=t.toLowerCase().split(/\s+/).filter(a=>a.length>=2);for(const a of r){const l=(a.get("omschrijving")||"").toLowerCase(),c=(a.get("toponiem")||"").toLowerCase(),u=(a.get("txt_label")||"").toLowerCase();if(o.every(f=>l.includes(f)||c.includes(f)||u.includes(f))){const f=a.getGeometry();if(!f)continue;const g=f.getExtent(),y=yh(g),[_,b]=Q2(y,"EPSG:3857","EPSG:4326");if(!YSt(_,b,n))continue;const T=a.get("omschrijving")||"";if(i.push({id:a.get("ID")||a.get("monumentnummer"),monumentnummer:a.get("monumentnummer"),toponiem:a.get("toponiem")||"Onbekend",kwaliteitswaarde:a.get("kwaliteitswaarde")||"",periode:a.get("txt_label")||"",omschrijving:T,matchedText:XSt(T,o[0]),coordinates:[_,b],extent:g}),i.length>=e)break}}return i.sort((a,l)=>{const c={"zeer hoge archeologische waarde":3,"hoge archeologische waarde":2,"archeologische waarde":1};return(c[l.kwaliteitswaarde]||0)-(c[a.kwaliteitswaarde]||0)}),i}async function JSt(t){return(await Kq()).find(n=>n.get("monumentnummer")===t)||null}async function QSt(t){const e=await Kq(),n=new Set(t);return e.filter(r=>n.has(r.get("monumentnummer")))}const lSe=yo((t,e)=>({keyword:"",province:"all",isActive:!1,totalCount:0,filteredCount:0,setKeyword:n=>t({keyword:n}),setProvince:n=>t({province:n}),setActive:n=>t({isActive:n}),toggleActive:()=>t(n=>({isActive:!n.isActive})),clearFilter:()=>t({keyword:"",province:"all",isActive:!1}),updateCounts:(n,r)=>t({totalCount:n,filteredCount:r})}));function HLt(t,e,n,r,i,s,o){if(s.length>=2){const l=s.toLowerCase().split(/\s+/).filter(g=>g.length>=2),c=t.toLowerCase(),u=e.toLowerCase(),h=n.toLowerCase();if(!l.every(g=>c.includes(g)||u.includes(g)||h.includes(g)))return!1}if(o!=="all"){const a=qq[o]?.bounds;if(a){const[l,c,u,h]=a;if(r<l||r>u||i<c||i>h)return!1}}return!0}const eTt={Compass:JH,TreePalm:uht,Mountain:W2,Waves:wht,Search:ev,Target:sht,Layers:Ga,Grid:m2e},tTt={Compass:"text-purple-600",Waves:"text-cyan-600",TreePalm:"text-green-600",Mountain:"text-stone-600",Search:"text-amber-600",Target:"text-red-600",Layers:"text-blue-600",Grid:"text-lime-600"},nTt={Compass:"hover:bg-purple-50",Waves:"hover:bg-cyan-50",TreePalm:"hover:bg-green-50",Mountain:"hover:bg-stone-50",Search:"hover:bg-amber-50",Target:"hover:bg-red-50",Layers:"hover:bg-blue-50",Grid:"hover:bg-lime-50"},Tae=["Mijn Vondsten","Labels Overlay","TMK 1850","Bonnebladen 1900","Hunebedden","FAMKE Steentijd","FAMKE IJzertijd","Grafheuvels","Terpen","AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig","Romeinse wegen (regio)","Romeinse wegen (Wereld)","Romeinse Forten","Kastelen","IKAW","Archeo Onderzoeken","Rijksmonumenten","Werelderfgoed","Religieus Erfgoed","Essen","Runes","WWII Bunkers","Slagvelden","Militaire Vliegvelden","Verdedigingslinies","Inundatiegebieden","Militaire Objecten","Paleokaart 800 n.Chr.","Paleokaart 100 n.Chr.","Paleokaart 500 v.Chr.","Paleokaart 1500 v.Chr.","Paleokaart 2750 v.Chr.","Paleokaart 5500 v.Chr.","Paleokaart 9000 v.Chr.","UIKAV Punten","UIKAV Vlakken","UIKAV Expert","UIKAV Buffer","UIKAV Indeling","Hoogtekaart (WebGL)","AHN4 Hoogtekaart Kleur","AHN4 Hillshade NL","AHN4 Multi-Hillshade NL","AHN 0.5m","Veengebieden","Geomorfologie","Bodemkaart","Fossiel Hotspots","Mineralen Hotspots","Goudrivieren","Fossielen Nederland","Fossielen Belgi","Fossielen Duitsland","Fossielen Frankrijk","Parken","Speeltuinen","Musea","Strandjes","Kringloopwinkels","Ruiterpaden","Laarzenpaden","Gewaspercelen","Kadastrale Grenzen","Scheepswrakken","Woonheuvels ZH","Windmolens","Erfgoedlijnen","Oude Kernen","Relictenkaart Punten","Relictenkaart Lijnen","Relictenkaart Vlakken","Verdronken Dorpen"],rTt=["CartoDB (licht)","OpenStreetMap","Luchtfoto","TMK 1850","Bonnebladen 1900"],iTt=[5.2913,52.1326],sTt=8;function oTt(){const t=Bs(U=>U.setLayerVisibility),e=ks(U=>U.stopTracking),n=lSe(U=>U.clearFilter),r=li(U=>U.map),{presetsPanelOpen:i,togglePresetsPanel:s,closeAllPanels:o}=gr(),{presets:a,applyPreset:l,updatePreset:c,createPreset:u,resetToDefaults:h}=Qde(),f=Bs(U=>U.visible),g=Cn(U=>U.presetPanelFontScale),y=Cn(U=>U.setPresetPanelFontScale),_=Cn(U=>U.showFontSliders),b=12*g/100,[T,A]=Y.useState(null),[I,P]=Y.useState(!1),[N,L]=Y.useState(""),C=()=>{o(),Tae.forEach(U=>t(U,!1)),rTt.forEach(U=>{t(U,U==="CartoDB (licht)")}),e(),n(),r&&r.getView().animate({center:Ni(iTt),zoom:sTt,duration:500}),console.log(" Reset: CartoDB, alle lagen uit, GPS uit, zoom naar Nederland")},M=U=>{l(U),o()},O=(U,G,de)=>{if(U.stopPropagation(),!confirm(`Preset "${de}" overschrijven met huidige lagen?`))return;const ke=Object.entries(f).filter(([Ue,Ne])=>Ne&&Tae.includes(Ue)).map(([Ue])=>Ue);c(G,{layers:ke}),A(G),setTimeout(()=>A(null),2e3),console.log(" Lagen opgeslagen naar preset")},D=()=>{N.trim()&&(u(N.trim(),"Layers"),L(""),P(!1))},V=()=>{confirm("Presets terugzetten naar standaard?")&&h()};return p.jsxs(p.Fragment,{children:[p.jsx(gt.button,{onClick:C,className:"fixed bottom-2 left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Reset - CartoDB, alle lagen uit, GPS uit",children:p.jsx(E2e,{size:20,className:"text-gray-600"})}),p.jsx(gt.button,{onClick:s,className:"fixed bottom-[60px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Presets",children:i?p.jsx(RL,{size:20,className:"text-blue-600"}):p.jsx(Ga,{size:20,className:"text-blue-600"})}),p.jsx(Wn,{children:i&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[800]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s}),p.jsxs(gt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed bottom-[60px] left-[56px] bg-white/95 rounded-xl shadow-lg overflow-hidden w-[240px] backdrop-blur-sm z-[801]",children:[p.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-blue-500",style:{fontSize:`${b}px`},children:[p.jsx("span",{className:"font-medium text-white",children:"Presets"}),_&&p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-[9px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:g,onInput:U=>{y(parseInt(U.target.value))},onChange:U=>y(parseInt(U.target.value)),className:"w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${g}%`}),p.jsx("span",{className:"text-[11px] text-blue-200",children:"T"})]})]}),p.jsx("div",{className:"p-2 max-h-[300px] overflow-y-auto",children:a.map(U=>{const G=eTt[U.icon]||Ga,de=tTt[U.icon]||"text-blue-600",ke=nTt[U.icon]||"hover:bg-blue-50",Ue=T===U.id;return p.jsxs("button",{onClick:()=>M(U.id),className:`w-full h-8 flex items-center gap-1.5 px-2 ${ke} rounded text-left transition-colors border-0 outline-none bg-transparent overflow-hidden ${Ue?"bg-green-50":""}`,style:{fontSize:`${b}px`},children:[p.jsx(G,{size:14,className:`${de} flex-shrink-0`}),p.jsx("span",{className:"text-gray-700 truncate flex-1",children:U.name}),Ue?p.jsx("span",{className:"p-1 flex-shrink-0",children:p.jsx(Ep,{size:14,className:"text-green-500"})}):p.jsx("span",{onClick:Ne=>O(Ne,U.id,U.name),className:"p-1 hover:bg-gray-200 rounded transition-colors flex-shrink-0",title:"Huidige lagen opslaan naar deze preset",children:p.jsx(rq,{size:12,className:"text-gray-400 hover:text-blue-500"})})]},U.id)})}),p.jsx("div",{className:"border-t border-gray-200 px-2 py-1.5",children:I?p.jsxs("div",{className:"flex gap-1",children:[p.jsx("input",{type:"text",value:N,onChange:U=>L(U.target.value),onKeyDown:U=>{U.key==="Enter"&&D(),U.key==="Escape"&&P(!1)},placeholder:"Naam preset...",autoFocus:!0,className:"flex-1 px-2 py-1 text-sm rounded bg-gray-50 border-0 outline-none focus:ring-1 focus:ring-blue-400",style:{fontSize:`${b}px`}}),p.jsx("button",{onClick:D,disabled:!N.trim(),className:"px-2 py-1 bg-blue-500 text-white rounded text-sm disabled:opacity-50 border-0 outline-none",children:p.jsx(Ep,{size:14})})]}):p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("button",{onClick:()=>P(!0),className:"h-8 flex items-center gap-1.5 px-2 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",style:{fontSize:`${b}px`},children:[p.jsx(Ec,{size:14}),p.jsx("span",{className:"text-gray-600",children:"Voeg preset toe"})]}),p.jsx("button",{onClick:V,className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors border-0 outline-none",title:"Herstel standaard",children:p.jsx(Cut,{size:14})})]})})]})]})})]})}function aTt(){const t=li(o=>o.map),[e,n]=Y.useState(0),[r,i]=Y.useState(!1);Y.useEffect(()=>{if(!t)return;const o=t.getView(),a=()=>{const l=o.getRotation(),c=l*180/Math.PI;n(c),i(Math.abs(l)>.087)};return a(),o.on("change:rotation",a),()=>{o.un("change:rotation",a)}},[t]);const s=()=>{t&&t.getView().animate({rotation:0,duration:300})};return p.jsx(Wn,{children:r&&p.jsx(gt.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},onClick:s,className:"fixed top-[60px] right-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",title:"Klik om noorden te herstellen",children:p.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",style:{transform:`rotate(${-e}deg)`},children:[p.jsx("path",{d:"M12 2 L14.5 12 L12 10 L9.5 12 Z",fill:"#EA4335"}),p.jsx("path",{d:"M12 22 L9.5 12 L12 14 L14.5 12 Z",fill:"white",stroke:"#9CA3AF",strokeWidth:"0.5"}),p.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"#374151"})]})})})}const lTt=[{name:"AHN4 Hoogtekaart Kleur",color:"blue",default:.85},{name:"AHN4 Hillshade NL",color:"blue",default:.7},{name:"AHN4 Multi-Hillshade NL",color:"blue",default:.7},{name:"AHN 0.5m",color:"blue",default:.7},{name:"TMK 1850",color:"amber",default:.8},{name:"Bonnebladen 1900",color:"amber",default:.8},{name:"Geomorfologie",color:"green",default:.5},{name:"Bodemkaart",color:"amber",default:.6},{name:"Veengebieden",color:"amber",default:.6},{name:"IKAW",color:"orange",default:.5},{name:"Archeo Landschappen",color:"green",default:.5},{name:"Terpen",color:"orange",default:.7},{name:"Essen",color:"amber",default:.6},{name:"AMK Monumenten",color:"purple",default:.45},{name:"AMK Romeins",color:"red",default:.6},{name:"AMK Steentijd",color:"amber",default:.6},{name:"AMK Vroege ME",color:"green",default:.6},{name:"AMK Late ME",color:"blue",default:.6},{name:"AMK Overig",color:"purple",default:.6},{name:"Paleokaart 9000 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 5500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 2750 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 1500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 500 v.Chr.",color:"indigo",default:.7},{name:"Paleokaart 100 n.Chr.",color:"indigo",default:.7},{name:"Paleokaart 800 n.Chr.",color:"indigo",default:.7},{name:"Verdedigingslinies",color:"red",default:.7},{name:"Inundatiegebieden",color:"red",default:.5},{name:"Gewaspercelen",color:"green",default:.6},{name:"Erfgoedlijnen",color:"purple",default:.7},{name:"Oude Kernen",color:"orange",default:.6},{name:"Relictenkaart Vlakken",color:"green",default:.5}],cTt={blue:"accent-blue-500",amber:"accent-amber-500",red:"accent-red-500",indigo:"accent-indigo-500",green:"accent-green-500",orange:"accent-orange-500",purple:"accent-purple-500"};function uTt(){const[t,e]=Y.useState(!1),[n,r]=Y.useState(!1),i=Bs(u=>u.visible),s=Bs(u=>u.opacity),o=Bs(u=>u.setLayerOpacity),a=lTt.filter(u=>i[u.name]);if(a.length===0)return null;const l=n?a:a.slice(0,3),c=a.length>3;return p.jsxs("div",{className:"fixed bottom-[108px] right-2 z-[900]",children:[p.jsxs(gt.button,{onClick:()=>e(!t),className:"w-11 h-11 bg-white/80 rounded-xl backdrop-blur-sm shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none hover:bg-white/90 transition-colors",whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Opacity sliders",title:t?"Sluit opacity sliders":"Open opacity sliders",children:[p.jsx(S2e,{size:22,strokeWidth:2,className:"text-gray-500"}),a.length>0&&p.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white text-[10px] rounded-full flex items-center justify-center",children:a.length})]}),p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[-1]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(!1)}),p.jsxs(gt.div,{initial:{opacity:0,x:20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.9},transition:{duration:.2},className:"absolute bottom-0 right-14 bg-white/95 rounded-xl shadow-lg overflow-hidden min-w-[220px] max-h-[60vh] flex flex-col",children:[p.jsx("div",{className:"px-3 py-1.5 bg-blue-500",children:p.jsx("span",{className:"font-medium text-white text-xs",children:"Transparantie"})}),p.jsxs("div",{className:"p-3 overflow-y-auto flex-1",children:[p.jsx("div",{className:"space-y-3",children:l.map(u=>{const h=s[u.name]??u.default;return p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block truncate",title:u.name,children:u.name}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{type:"range",min:"0",max:"100",value:h*100,onChange:f=>o(u.name,parseInt(f.target.value)/100),className:`flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer ${cTt[u.color]}`}),p.jsxs("span",{className:"text-xs text-gray-500 w-8 text-right select-none pointer-events-none",children:[Math.round(h*100),"%"]})]})]},u.name)})}),c&&p.jsx("button",{onClick:()=>r(!n),className:"w-full mt-3 pt-2 border-t border-gray-200 flex items-center justify-center gap-1 text-xs text-gray-500 hover:text-gray-700",children:n?p.jsxs(p.Fragment,{children:[p.jsx(RL,{size:14}),"Minder tonen"]}):p.jsxs(p.Fragment,{children:[p.jsx(Ib,{size:14}),a.length-3," meer..."]})})]})]})]})})]})}function hTt(){const t=li(N=>N.map),e=Cn(N=>N.showWeatherButton),[n,r]=Y.useState(!1),[i,s]=Y.useState(""),[o,a]=Y.useState([]),[l,c]=Y.useState(!1),[u,h]=Y.useState(!1),f=Y.useRef(null),g=Y.useRef(null),y=Y.useRef();Y.useEffect(()=>{n&&f.current&&f.current.focus()},[n]),Y.useEffect(()=>{if(!n)return;const N=L=>{g.current&&!g.current.contains(L.target)&&_()};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[n]),Y.useEffect(()=>{if(!n)return;const N=L=>{L.key==="Escape"&&_()};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[n]),Y.useEffect(()=>{if(y.current&&clearTimeout(y.current),i.length<2){a([]);return}return y.current=window.setTimeout(async()=>{h(!0);try{const L=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/suggest?q=${encodeURIComponent(i)}&rows=7`)).json();L.response?.docs&&a(L.response.docs)}catch(N){console.error("Search error:",N),a([])}finally{h(!1)}},300),()=>{y.current&&clearTimeout(y.current)}},[i]);const _=()=>{r(!1),s(""),a([]),c(!1)},b=async N=>{try{const C=await(await fetch(`https://api.pdok.nl/bzk/locatieserver/search/v3_1/lookup?id=${encodeURIComponent(N)}`)).json();if(C.response?.docs?.[0]?.centroide_ll){const O=C.response.docs[0].centroide_ll.match(/POINT\(([^ ]+) ([^)]+)\)/);if(O)return{lng:parseFloat(O[1]),lat:parseFloat(O[2])}}}catch(L){console.error("Lookup error:",L)}return null},T=async N=>{if(!t)return;const L=await b(N.id);L&&t.getView().animate({center:Ni([L.lng,L.lat]),zoom:16,duration:1e3}),_()},A=async(N,L)=>{L.stopPropagation();const C=await b(N.id);if(C){const M=`https://www.google.com/maps?q=${C.lat},${C.lng}`;window.open(M,"_blank")}_()},I={top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))"};if(!n)return p.jsx(gt.button,{className:"fixed right-14 z-[800] w-11 h-11 flex items-center justify-center bg-white/90 hover:bg-white rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",style:I,onClick:()=>r(!0),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Zoeken",children:p.jsx(ev,{size:22,className:"text-gray-600"})});const P=e?"220px":"52px";return p.jsxs("div",{ref:g,className:"fixed right-14 z-[850]",style:{...I,left:P},children:[p.jsxs(gt.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"search-input-wrapper",children:[p.jsx(ev,{size:18,className:"search-icon"}),p.jsx("input",{ref:f,type:"text",value:i,onChange:N=>{s(N.target.value),c(!0)},onFocus:()=>c(!0),placeholder:"Zoek adres of plaats...",className:"search-input"}),p.jsx("button",{onClick:_,className:"search-clear",title:"Sluiten",children:p.jsx(Kr,{size:18})})]}),p.jsx(Wn,{children:l&&o.length>0&&p.jsx(gt.ul,{className:"search-results",initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},children:o.map(N=>p.jsxs("li",{className:"search-result-item",children:[p.jsx("div",{className:"search-result-content",onClick:()=>T(N),children:p.jsx("span",{className:"search-result-text",children:N.weergavenaam})}),p.jsx("button",{className:"search-navigate-btn",onClick:L=>A(N,L),title:"Open in Google Maps",children:p.jsx(Cg,{size:20})})]},N.id))})}),l&&u&&p.jsx("div",{className:"search-loading",children:"Zoeken..."})]})}function dTt(){const t=li(r=>r.map),e=()=>{if(!t)return;const r=t.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i+1,duration:200})},n=()=>{if(!t)return;const r=t.getView(),i=r.getZoom();i!==void 0&&r.animate({zoom:i-1,duration:200})};return p.jsxs(gt.div,{className:"fixed bottom-2 right-2 z-[800] flex flex-col gap-1",children:[p.jsx(gt.button,{className:"w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Inzoomen",children:p.jsx(Ec,{size:22,className:"text-gray-600"})}),p.jsx(gt.button,{className:"w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm",onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Uitzoomen",children:p.jsx(_2e,{size:22,className:"text-gray-600"})})]})}const fTt="detector2024",qz="detectorapp-auth";function pTt({children:t}){const[e,n]=Y.useState(!1),[r,i]=Y.useState(""),[s,o]=Y.useState(!1),[a,l]=Y.useState(""),[c,u]=Y.useState(!0);Y.useEffect(()=>{localStorage.getItem(qz)==="authenticated"&&n(!0),u(!1)},[]);const h=f=>{f.preventDefault(),l(""),r===fTt?(localStorage.setItem(qz,"authenticated"),n(!0)):(l("Onjuist wachtwoord"),i(""))};return c?p.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center",children:p.jsx("div",{className:"text-white text-lg",children:"Laden..."})}):e?p.jsx(p.Fragment,{children:t}):p.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center p-4",children:p.jsxs(gt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-sm",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx(Az,{size:32,className:"text-blue-600"})}),p.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"DetectorApp"}),p.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Test versie - Toegang beveiligd"})]}),p.jsxs("form",{onSubmit:h,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wachtwoord"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:s?"text":"password",value:r,onChange:f=>i(f.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none pr-12",placeholder:"Voer wachtwoord in",autoFocus:!0}),p.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?p.jsx(WN,{size:20}):p.jsx(bA,{size:20})})]})]}),a&&p.jsx(gt.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-red-500 text-sm text-center",children:a}),p.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:"Inloggen"})]}),p.jsx("p",{className:"text-center text-xs text-gray-400 mt-6",children:"Alleen voor testers"})]})})}function mTt(){localStorage.removeItem(qz),window.location.reload()}function gTt({isOpen:t,onClose:e}){const n=gh(l=>l.vondsten),r={total:n.length,byType:{},byMaterial:{},byPeriod:{},byCondition:{},avgDepth:0,totalWeight:0,recent:n.slice(-5).reverse()};let i=0,s=0;n.forEach(l=>{r.byType[l.objectType]=(r.byType[l.objectType]||0)+1,r.byMaterial[l.material]=(r.byMaterial[l.material]||0)+1,r.byPeriod[l.period]=(r.byPeriod[l.period]||0)+1,l.condition&&(r.byCondition[l.condition]=(r.byCondition[l.condition]||0)+1),l.depth&&(i+=l.depth,s++),l.weight&&(r.totalWeight+=l.weight)}),r.avgDepth=s>0?Math.round(i/s):0;const o=l=>Object.entries(l).sort((c,u)=>u[1]-c[1]),a=l=>Math.max(...Object.values(l),1);return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(gt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(d2e,{size:18}),p.jsx("span",{className:"font-medium",children:"Mijn Vondsten Dashboard"})]}),p.jsx("button",{onClick:e,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Kr,{size:18})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",children:n.length===0?p.jsxs("div",{className:"text-center py-8 text-gray-500",children:[p.jsx(Ka,{size:48,className:"mx-auto mb-3 opacity-30"}),p.jsx("p",{className:"font-medium",children:"Nog geen vondsten"}),p.jsx("p",{className:"text-sm mt-1",children:"Voeg je eerste vondst toe via de oranje knop of long-press op de kaart"})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[p.jsx(yF,{icon:p.jsx(Ka,{size:20}),value:r.total,label:"Totaal",color:"bg-orange-100 text-orange-700"}),p.jsx(yF,{icon:p.jsx(up,{size:20}),value:r.avgDepth>0?`${r.avgDepth}cm`:"-",label:"Gem. diepte",color:"bg-blue-100 text-blue-700"}),p.jsx(yF,{icon:p.jsx(Lut,{size:20}),value:r.totalWeight>0?`${r.totalWeight.toFixed(1)}g`:"-",label:"Tot. gewicht",color:"bg-green-100 text-green-700"})]}),p.jsx(VR,{title:"Per Type",data:o(r.byType),max:a(r.byType),color:"bg-orange-500"}),p.jsx(VR,{title:"Per Periode",data:o(r.byPeriod),max:a(r.byPeriod),color:"bg-amber-500"}),p.jsx(VR,{title:"Per Materiaal",data:o(r.byMaterial),max:a(r.byMaterial),color:"bg-blue-500"}),Object.keys(r.byCondition).length>0&&p.jsx(VR,{title:"Per Conditie",data:o(r.byCondition),max:a(r.byCondition),color:"bg-green-500"}),p.jsxs("div",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[p.jsx(XH,{size:14}),"Recente Vondsten"]}),p.jsx("div",{className:"space-y-2",children:r.recent.map(l=>p.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-medium text-sm text-gray-800",children:l.objectType}),p.jsx("span",{className:"text-gray-400 mx-1",children:"-"}),p.jsx("span",{className:"text-sm text-gray-600",children:l.material})]}),p.jsx("span",{className:"text-xs text-gray-400",children:new Date(l.timestamp).toLocaleDateString("nl-NL")})]},l.id))})]})]})})]})]})})}function yF({icon:t,value:e,label:n,color:r}){return p.jsxs("div",{className:`rounded-lg p-3 ${r}`,children:[p.jsx("div",{className:"flex items-center gap-2 mb-1 opacity-70",children:t}),p.jsx("div",{className:"text-xl font-bold",children:e}),p.jsx("div",{className:"text-xs opacity-70",children:n})]})}function VR({title:t,data:e,max:n,color:r}){return e.length===0?null:p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:t}),p.jsx("div",{className:"space-y-1.5",children:e.slice(0,6).map(([i,s])=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-24 text-xs text-gray-600 truncate",title:i,children:i}),p.jsx("div",{className:"flex-1 h-4 bg-gray-100 rounded-full overflow-hidden",children:p.jsx(gt.div,{className:`h-full ${r} rounded-full`,initial:{width:0},animate:{width:`${s/n*100}%`},transition:{duration:.5,ease:"easeOut"}})}),p.jsx("div",{className:"w-6 text-xs text-gray-600 text-right font-medium",children:s})]},i))})]})}function yTt(t){const{type:e,coordinates:n}=t,r=a=>Ni(a),i=a=>a.map(r),s=a=>a.map(i),o=a=>a.map(s);switch(e){case"Point":return new Ti(r(n));case"LineString":return new ts(i(n));case"Polygon":return new Il(s(n));case"MultiPoint":return new o0(i(n));case"MultiLineString":return new vh(s(n));case"MultiPolygon":return new mp(o(n));default:return console.warn(`Unsupported geometry type: ${e}`),null}}function vTt(t,e,n){const r=t.color,i=10,s=5,o=14;let a=i;if(n>50?a=s:n>10?a=Math.max(s,i-(n-10)/10):n<2&&(a=o),e==="Point"||e==="MultiPoint")return new vn({image:new ms({radius:a,fill:new Dn({color:r}),stroke:new Pn({color:"#ffffff",width:2})})});if(e==="LineString"||e==="MultiLineString")return new vn({stroke:new Pn({color:r,width:3})});if(e==="Polygon"||e==="MultiPolygon"){const l=_Tt(r,.3);return new vn({fill:new Dn({color:l}),stroke:new Pn({color:r,width:2})})}return new vn({image:new ms({radius:a,fill:new Dn({color:r}),stroke:new Pn({color:"#ffffff",width:2})})})}function _Tt(t,e){const n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(n){const r=parseInt(n[1],16),i=parseInt(n[2],16),s=parseInt(n[3],16);return`rgba(${r}, ${i}, ${s}, ${e})`}return t}function xTt(){const t=li(r=>r.map),e=fI(r=>r.layers),n=Y.useRef(new Map);return Y.useEffect(()=>{if(!t)return;const r=new Set;e.forEach(i=>{r.add(i.id);const s=new Nl;i.features.features.forEach((a,l)=>{if(!a.geometry)return;const c=yTt(a.geometry);if(!c)return;const u=new yr({geometry:c,...a.properties,layerType:"importedLayer",layerId:i.id,layerName:i.name,layerColor:i.color,featureIndex:l});u.setStyle((h,f)=>vTt(i,a.geometry.type,f)),s.addFeature(u)});const o=n.current.get(i.id);if(o)o.setSource(s),o.setVisible(i.visible),o.setOpacity(i.opacity);else{const a=new Ol({source:s,zIndex:900,visible:i.visible,opacity:i.opacity,properties:{title:i.name,customLayerId:i.id}});t.addLayer(a),n.current.set(i.id,a)}}),n.current.forEach((i,s)=>{r.has(s)||(t.removeLayer(i),n.current.delete(s))})},[t,e]),Y.useEffect(()=>()=>{t&&(n.current.forEach(r=>{t.removeLayer(r)}),n.current.clear())},[t]),null}lr.defs("EPSG:28992","+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 +units=m +no_defs");Abe(lr);function wTt(t){if(!t||t.length<2)return"unknown";const[e,n]=t;return e>=7e3&&e<=3e5&&n>=289e3&&n<=629e3?"RD":Math.abs(e)<=180&&Math.abs(n)<=90?"WGS84":"unknown"}function bTt(t){const[e,n]=t;return lr("EPSG:28992","EPSG:4326",[e,n])}function cSe(t,e){return typeof t[0]=="number"?e(t):t.map(n=>cSe(n,e))}function ETt(t){const e=t.coordinates;return!e||Array.isArray(e)&&e.length===0?null:t.type==="Point"?e:t.type==="LineString"||t.type==="MultiPoint"?e[0]:t.type==="Polygon"||t.type==="MultiLineString"?e[0]?.[0]:t.type==="MultiPolygon"?e[0]?.[0]?.[0]:null}async function STt(t){const e=[],n=[];try{const r=await t.text(),i=JSON.parse(r);if(!i.type)return e.push('Ongeldig GeoJSON: geen "type" veld gevonden'),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}};let s=[];i.type==="FeatureCollection"?s=i.features||[]:i.type==="Feature"?s=[i]:i.type==="GeometryCollection"?s=(i.geometries||[]).map((c,u)=>({type:"Feature",geometry:c,properties:{id:u}})):s=[{type:"Feature",geometry:i,properties:{}}],s.length===0&&n.push("Geen features gevonden in bestand");let o="unknown",a=!1;if(s.length>0&&s[0].geometry){const c=ETt(s[0].geometry);c&&(o=wTt(c))}o==="RD"&&(n.push("Rijksdriehoek coordinaten gedetecteerd, worden omgezet naar WGS84"),a=!0,s=s.map(c=>{if(!c.geometry)return c;const u=cSe(c.geometry.coordinates,bTt);return{...c,geometry:{...c.geometry,coordinates:u}}}),o="WGS84");const l=[...new Set(s.filter(c=>c.geometry).map(c=>c.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:s},errors:e,warnings:n,metadata:{featureCount:s.length,geometryTypes:l,coordinateSystem:o,transformed:a}}}catch(r){return e.push(`Fout bij parsen: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function TTt(t){const e=[],n=[];try{const r=await t.text(),s=new pyt({extractStyles:!1}).readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&n.push("Geen features gevonden in KML bestand");const l=new NL().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((u,h)=>{const f={...u.properties},g=f.name||f.Name||`Feature ${h+1}`,y=f.description||f.Description||"";return{type:"Feature",geometry:u.geometry,properties:{...f,name:g,description:y}}}),c=[...new Set(l.filter(u=>u.geometry).map(u=>u.geometry.type))];return{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:n,metadata:{featureCount:l.length,geometryTypes:c,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen KML: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}async function kTt(t){const e=[],n=[];try{const r=await t.text(),s=new I0t().readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"});s.length===0&&n.push("Geen features gevonden in GPX bestand");const l=new NL().writeFeaturesObject(s,{dataProjection:"EPSG:4326",featureProjection:"EPSG:4326"}).features.map((u,h)=>{const f={...u.properties},g=f.name||f.Name||`Waypoint ${h+1}`,y=f.desc||f.description||"",_=f.time||null,b=f.ele||null;return{type:"Feature",geometry:u.geometry,properties:{...f,name:g,description:y,time:_,elevation:b}}}),c=[...new Set(l.filter(u=>u.geometry).map(u=>u.geometry.type))];return c.includes("LineString")&&n.push("GPX track routes worden als lijnen weergegeven"),{success:!0,features:{type:"FeatureCollection",features:l},errors:e,warnings:n,metadata:{featureCount:l.length,geometryTypes:c,coordinateSystem:"WGS84",transformed:!1}}}catch(r){return e.push(`Fout bij parsen GPX: ${r instanceof Error?r.message:"Onbekende fout"}`),{success:!1,features:{type:"FeatureCollection",features:[]},errors:e,warnings:n,metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function Yq(t){switch(t.split(".").pop()?.toLowerCase()){case"geojson":case"json":return"geojson";case"kml":case"kmz":return"kml";case"gpx":return"gpx";default:return"unsupported"}}function ATt(){return".geojson,.json,.kml,.gpx"}function Xq(){return"GeoJSON, KML (Google My Maps), GPX"}async function ITt(t){switch(Yq(t.name)){case"geojson":return STt(t);case"kml":return TTt(t);case"gpx":return kTt(t);case"unsupported":default:return{success:!1,features:{type:"FeatureCollection",features:[]},errors:[`Niet-ondersteund bestandsformaat: ${t.name}. Ondersteunde formaten: ${Xq()}`],warnings:[],metadata:{featureCount:0,geometryTypes:[],coordinateSystem:"unknown",transformed:!1}}}}function PTt(t){return t.size>10485760?{valid:!1,error:`Bestand te groot (${(t.size/1024/1024).toFixed(1)} MB). Maximum is 10 MB.`}:Yq(t.name)==="unsupported"?{valid:!1,error:`Niet-ondersteund bestandsformaat. Ondersteunde formaten: ${Xq()}`}:t.name.toLowerCase().endsWith(".kmz")?{valid:!1,error:"KMZ bestanden worden nog niet ondersteund. Pak het bestand uit en importeer het .kml bestand."}:{valid:!0}}function CTt({isOpen:t,onClose:e}){const n=fI(M=>M.addLayer),r=Y.useRef(null),[i,s]=Y.useState("idle"),[o,a]=Y.useState(null),[l,c]=Y.useState(null),[u,h]=Y.useState(""),[f,g]=Y.useState(null),[y,_]=Y.useState(!1),b=Y.useCallback(()=>{s("idle"),a(null),c(null),h(""),g(null),r.current&&(r.current.value="")},[]),T=Y.useCallback(()=>{b(),e()},[b,e]),A=Y.useCallback(async M=>{const O=PTt(M);if(!O.valid){g(O.error||"Ongeldig bestand"),s("error");return}a(M),s("parsing"),g(null);const D=M.name.replace(/\.[^/.]+$/,"");h(D);try{const V=await ITt(M);if(!V.success){g(V.errors.join(`
`)),s("error");return}if(V.features.features.length===0){g("Geen features gevonden in het bestand"),s("error");return}c(V),s("preview")}catch(V){g(V instanceof Error?V.message:"Onbekende fout bij parsen"),s("error")}},[]),I=Y.useCallback(M=>{const O=M.target.files?.[0];O&&A(O)},[A]),P=Y.useCallback(M=>{M.preventDefault(),_(!0)},[]),N=Y.useCallback(M=>{M.preventDefault(),_(!1)},[]),L=Y.useCallback(M=>{M.preventDefault(),_(!1);const O=M.dataTransfer.files?.[0];O&&A(O)},[A]),C=Y.useCallback(()=>{if(!l||!u.trim())return;const M=o?Yq(o.name):"geojson";n({name:u.trim(),type:M==="unsupported"?"geojson":M,features:l.features,visible:!0,opacity:1,color:"",sourceFileName:o?.name||"unknown"}),T()},[l,u,o,n,T]);return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:T}),p.jsxs(gt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[80vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(KI,{size:18}),p.jsx("span",{className:"font-medium",children:"Laag Importeren"})]}),p.jsx("button",{onClick:T,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Kr,{size:18})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i==="idle"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${y?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-gray-400"}`,onDragOver:P,onDragLeave:N,onDrop:L,children:[p.jsx(QH,{size:40,className:"mx-auto text-gray-400 mb-3"}),p.jsx("p",{className:"text-gray-600 mb-2",children:"Sleep een bestand hierheen"}),p.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"of"}),p.jsx("button",{onClick:()=>r.current?.click(),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none",children:"Bestand kiezen"}),p.jsx("input",{ref:r,type:"file",accept:ATt(),onChange:I,className:"hidden"})]}),p.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[p.jsx("p",{className:"font-medium",children:"Ondersteunde formaten:"}),p.jsx("p",{children:Xq()})]})]}),i==="parsing"&&p.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[p.jsx(qI,{size:40,className:"text-purple-500 animate-spin mb-4"}),p.jsx("p",{className:"text-gray-600",children:"Bestand verwerken..."}),p.jsx("p",{className:"text-gray-400 text-sm",children:o?.name})]}),i==="error"&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 rounded-lg",children:[p.jsx(p2e,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-red-700",children:"Import mislukt"}),p.jsx("p",{className:"text-sm text-red-600 mt-1 whitespace-pre-wrap",children:f})]})]}),p.jsx("button",{onClick:b,className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Opnieuw proberen"})]}),i==="preview"&&l&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg",children:[p.jsx(oct,{size:20,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-green-700",children:"Bestand geladen"}),p.jsx("p",{className:"text-sm text-green-600",children:o?.name})]})]}),l.warnings.length>0&&p.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg",children:[p.jsx("p",{className:"font-medium text-amber-700 text-sm",children:"Let op:"}),p.jsx("ul",{className:"text-sm text-amber-600 mt-1 list-disc list-inside",children:l.warnings.map((M,O)=>p.jsx("li",{children:M},O))})]}),p.jsx("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-500",children:"Features:"}),p.jsx("span",{className:"ml-2 font-medium",children:l.metadata.featureCount})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-gray-500",children:"Types:"}),p.jsx("span",{className:"ml-2 font-medium",children:l.metadata.geometryTypes.join(", ")||"-"})]})]})}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam van de laag"}),p.jsx("input",{type:"text",value:u,onChange:M=>h(M.target.value),placeholder:"Bijv. Mijn locaties",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),i==="preview"&&p.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 flex gap-2",children:[p.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors border-0 outline-none",children:"Annuleren"}),p.jsx("button",{onClick:C,disabled:!u.trim(),className:"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors border-0 outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:"Importeren"})]})]})]})})}function RTt(){const{user:t,loading:e,error:n,signInWithGoogle:r,logout:i,initAuth:s}=TO();return Y.useEffect(()=>{s()},[s]),e?p.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white rounded-lg text-gray-500",children:[p.jsx(zd,{size:16,className:"animate-pulse"}),p.jsx("span",{className:"text-sm",children:"Laden..."})]}):t?p.jsxs("div",{className:"flex items-center gap-3 px-3 py-2.5 bg-green-50 rounded-lg",children:[t.photoURL?p.jsx("img",{src:t.photoURL,alt:t.displayName||"User",className:"w-8 h-8 rounded-full border-2 border-green-200",referrerPolicy:"no-referrer"}):p.jsx("div",{className:"w-8 h-8 rounded-full bg-green-200 flex items-center justify-center",children:p.jsx(sq,{size:16,className:"text-green-600"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"text-sm font-medium text-green-800 truncate",children:t.displayName||t.email}),p.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1",children:[p.jsx(zd,{size:12}),"Cloud sync actief"]})]}),p.jsx("button",{onClick:i,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none bg-transparent",title:"Uitloggen",children:p.jsx(nq,{size:16})})]}):p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg text-gray-500",children:[p.jsx(fct,{size:16}),p.jsx("span",{className:"text-sm",children:"Alleen lokale opslag"})]}),p.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 px-3 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none",children:[p.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",children:[p.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),p.jsx("span",{className:"text-sm text-gray-700",children:"Inloggen met Google"})]}),n&&p.jsx("div",{className:"px-3 py-2 bg-red-50 text-red-700 text-xs rounded-lg",children:n})]})}const MTt="https://forms.gle/R5LCk11Bzu5XrkBj8";function NTt(){const{settingsPanelOpen:t,toggleSettingsPanel:e,vondstDashboardOpen:n,toggleVondstDashboard:r,openLayerManagerModal:i}=gr(),s=Cn(),{presets:o,createPreset:a,deletePreset:l,updatePreset:c}=Qde(),u=gh(ne=>ne.vondsten),h=fI(ne=>ne.layers),{layers:f,updateLayer:g}=ps(),{devMode:y,setDevMode:_,tier:b}=sB(),[T,A]=Y.useState(""),[I,P]=Y.useState(!1),[N,L]=Y.useState(!1),[C,M]=Y.useState(null),[O,D]=Y.useState(""),[V,U]=Y.useState(null),[G,de]=Y.useState(""),[ke,Ue]=Y.useState("algemeen"),Ne=14*s.fontScale/100,fe=()=>{T.trim()&&(a(T.trim(),"Layers"),A(""),P(!1))},De=(ne,ie)=>{M(ne),D(ie)},Ce=ne=>{O.trim()&&(c(ne,{name:O.trim()}),console.log(` Preset hernoemd naar "${O.trim()}"`)),M(null),D("")},Q=()=>{M(null),D("")},W=[{id:"algemeen",label:"Algemeen",icon:p.jsx(Hut,{size:14})},{id:"lagen",label:"Lagen",icon:p.jsx(Ga,{size:14})},{id:"vondsten",label:"Vondsten",icon:p.jsx(Ka,{size:14})}];return p.jsxs(p.Fragment,{children:[p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(gt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-500",style:{fontSize:`${Ne}px`},children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(YN,{size:18,className:"text-white"}),p.jsx("span",{className:"font-medium text-white",children:"Instellingen"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[s.showFontSliders&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-[10px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:s.fontScale,onInput:ne=>{s.setFontScale(parseInt(ne.target.value))},onChange:ne=>s.setFontScale(parseInt(ne.target.value)),className:"w-20 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${s.fontScale}%`}),p.jsx("span",{className:"text-xs text-blue-200",children:"T"})]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-blue-400/50 hover:bg-blue-400 transition-colors border-0 outline-none ml-1",children:p.jsx(Kr,{size:18,className:"text-white",strokeWidth:2.5})})]})]}),p.jsx("div",{className:"flex border-b border-gray-200",children:W.map(ne=>p.jsxs("button",{onClick:()=>Ue(ne.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${ke===ne.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[ne.icon,ne.label]},ne.id))}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-5",style:{fontSize:`${Ne}px`},children:[ke==="algemeen"&&p.jsxs(p.Fragment,{children:[p.jsx(Kh,{title:"Account",icon:p.jsx(sq,{size:16}),children:p.jsx(RTt,{})}),p.jsxs(Kh,{title:"Kaart",icon:p.jsx(B2,{size:16}),children:[p.jsx(OTt,{label:"Standaard achtergrond",children:p.jsxs("select",{value:s.defaultBackground,onChange:ne=>s.setDefaultBackground(ne.target.value),className:"px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},children:[p.jsx("option",{value:"CartoDB (licht)",children:"Licht"}),p.jsx("option",{value:"OpenStreetMap",children:"OSM"}),p.jsx("option",{value:"Luchtfoto",children:"Luchtfoto"})]})}),p.jsx(X0,{label:"Schaalbalk tonen",checked:s.showScaleBar,onChange:s.setShowScaleBar})]}),p.jsxs(Kh,{title:"GPS",icon:p.jsx(nh,{size:16}),children:[p.jsx(X0,{label:"GPS aan bij start",checked:s.gpsAutoStart,onChange:s.setGpsAutoStart}),p.jsx(X0,{label:"Nauwkeurigheidscirkel",checked:s.showAccuracyCircle,onChange:s.setShowAccuracyCircle})]}),p.jsxs(Kh,{title:"Feedback",icon:p.jsx(Kut,{size:16}),children:[p.jsx(X0,{label:"Trillen bij acties",checked:s.hapticFeedback,onChange:s.setHapticFeedback}),p.jsx(X0,{label:"Spraakfeedback vondsten",checked:s.voiceFeedbackEnabled,onChange:s.setVoiceFeedbackEnabled}),s.voiceFeedbackEnabled&&p.jsxs("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:[p.jsx(_ht,{size:12,className:"inline mr-1"}),"Spreekt vondst info uit bij toevoegen"]})]}),p.jsxs(Kh,{title:"Weer",icon:p.jsx(zd,{size:16}),children:[p.jsx(X0,{label:"Weerwidget tonen",checked:s.showWeatherButton,onChange:s.setShowWeatherButton}),p.jsx("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:"Actueel weer, voorspelling en buienradar"})]}),p.jsxs(Kh,{title:"Development",icon:p.jsx(_ct,{size:16}),children:[p.jsx(X0,{label:"Dev Mode (alles ontgrendeld)",checked:y,onChange:_}),p.jsxs("p",{className:"text-gray-500 mt-1",style:{fontSize:"0.75em"},children:["Huidige tier: ",p.jsx("span",{className:"font-medium text-blue-600",children:b}),y&&p.jsx("span",{className:"text-green-600",children:" (alle lagen ontgrendeld)"})]})]})]}),ke==="lagen"&&p.jsxs(p.Fragment,{children:[p.jsx(Kh,{title:"Mijn lagen",icon:p.jsx(Ga,{size:16}),isOwn:!0,children:p.jsxs("div",{className:"space-y-1",children:[f.filter(ne=>!ne.archived).length===0?p.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Nog geen eigen lagen aangemaakt."}):f.filter(ne=>!ne.archived).map(ne=>p.jsx("div",{className:"flex items-center gap-2 py-1.5 px-2 hover:bg-gray-50 rounded",children:V===ne.id?p.jsx("input",{type:"text",value:G,onChange:ie=>de(ie.target.value),onKeyDown:ie=>{ie.key==="Enter"?(G.trim()&&g(ne.id,{name:G.trim()}),U(null)):ie.key==="Escape"&&U(null)},onBlur:()=>{G.trim()&&g(ne.id,{name:G.trim()}),U(null)},autoFocus:!0,className:"flex-1 px-1.5 py-0.5 text-sm bg-orange-50 rounded outline-none focus:ring-1 focus:ring-orange-400"}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"flex-1 text-sm text-gray-700 truncate",children:ne.name}),p.jsxs("span",{className:"text-xs text-gray-400",children:[ne.points.length," punten"]}),p.jsx("button",{onClick:()=>{U(ne.id),de(ne.name)},className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none bg-transparent",title:"Naam bewerken",children:p.jsx(Sp,{size:12})})]})},ne.id)),p.jsxs("button",{onClick:()=>{i(),e()},className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(YN,{size:14}),p.jsx("span",{children:"Lagen beheren"})]})]})}),p.jsx(Kh,{title:"Lagen importeren",icon:p.jsx(KI,{size:16}),children:p.jsxs("div",{className:"space-y-1",children:[h.length>0&&p.jsxs(p.Fragment,{children:[h.map(ne=>p.jsx(T2e,{layer:ne},ne.id)),p.jsx("div",{className:"border-t border-gray-100 my-2"})]}),p.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-2 px-2 py-1.5 text-cyan-600 hover:bg-cyan-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(Ec,{size:14}),p.jsx("span",{children:"Nieuwe laag importeren"})]}),p.jsx("p",{className:"text-gray-400 mt-1",style:{fontSize:"0.7em"},children:"GeoJSON, KML (Google My Maps), GPX"})]})}),p.jsx(Kh,{title:"Presets",icon:p.jsx(Ga,{size:16}),children:p.jsxs("div",{className:"space-y-2",children:[o.map(ne=>p.jsx("div",{className:"flex items-center justify-between py-1",children:C===ne.id?p.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[p.jsx("input",{type:"text",value:O,onChange:ie=>D(ie.target.value),onKeyDown:ie=>{ie.key==="Enter"&&Ce(ne.id),ie.key==="Escape"&&Q()},className:"flex-1 px-2 py-0.5 bg-blue-50 rounded border border-blue-300 outline-none",style:{fontSize:"0.9em"},autoFocus:!0}),p.jsx("button",{onClick:()=>Ce(ne.id),className:"px-2 py-0.5 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:"OK"}),p.jsx("button",{onClick:Q,className:"px-2 py-0.5 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.7em"},children:""})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:[ne.name,ne.isBuiltIn&&p.jsx("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:"(standaard)"})]}),p.jsxs("span",{className:"ml-1 text-gray-400",style:{fontSize:"0.7em"},children:["(",ne.layers.length," lagen)"]})]}),!ne.isBuiltIn&&p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:()=>De(ne.id,ne.name),className:"p-1 text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam wijzigen",children:p.jsx(Sp,{size:14})}),p.jsx("button",{onClick:()=>l(ne.id),className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:p.jsx(Th,{size:14})})]})]})},ne.id)),I?p.jsxs("div",{className:"flex gap-2 mt-2",children:[p.jsx("input",{type:"text",value:T,onChange:ne=>A(ne.target.value),placeholder:"Naam nieuwe preset",className:"flex-1 px-2 py-1 bg-gray-100 rounded border-0 outline-none",style:{fontSize:"0.9em"},onKeyDown:ne=>ne.key==="Enter"&&fe(),autoFocus:!0}),p.jsx("button",{onClick:fe,className:"px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Opslaan"}),p.jsx("button",{onClick:()=>P(!1),className:"px-2 py-1 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition-colors border-0 outline-none",style:{fontSize:"0.75em"},children:"Annuleren"})]}):p.jsxs("button",{onClick:()=>P(!0),className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(Ec,{size:14}),p.jsx("span",{children:"Huidige lagen als preset opslaan"})]})]})})]}),ke==="vondsten"&&p.jsx(p.Fragment,{children:p.jsxs(Kh,{title:"Vondsten",icon:p.jsx(Ka,{size:16}),isOwn:!0,children:[p.jsx("p",{className:"text-gray-500 py-1",style:{fontSize:"0.75em"},children:"Vondsten worden altijd lokaal op dit apparaat opgeslagen."}),p.jsxs("button",{onClick:r,className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsx(d2e,{size:14}),p.jsxs("span",{children:["Dashboard (",u.length," vondsten)"]})]}),p.jsx(LTt,{})]})})]}),p.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",style:{fontSize:`${Ne}px`},children:[p.jsxs("a",{href:MTt,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[p.jsx(h2e,{size:16}),p.jsx("span",{children:"Meld een bug"})]}),p.jsxs("button",{onClick:mTt,className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:[p.jsx(nq,{size:16}),p.jsx("span",{children:"Uitloggen"})]}),p.jsx("p",{className:"text-gray-400 text-center",style:{fontSize:"0.75em"},children:"Instellingen worden lokaal opgeslagen"})]})]})]})}),p.jsx(gTt,{isOpen:n,onClose:r}),p.jsx(CTt,{isOpen:N,onClose:()=>L(!1)})]})}function Kh({title:t,icon:e,children:n,isOwn:r}){return p.jsxs("section",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-1 border-b border-gray-100",children:[p.jsx("span",{className:r?"text-orange-600":"text-blue-600",children:e}),p.jsx("span",{className:`font-medium ${r?"text-orange-600":"text-gray-800"}`,style:{fontSize:"1em"},children:t})]}),p.jsx("div",{className:"space-y-2",children:n})]})}function OTt({label:t,children:e}){return p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:t}),e]})}function X0({label:t,checked:e,onChange:n}){return p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-gray-600",style:{fontSize:"0.9em"},children:t}),p.jsx("button",{onClick:()=>n(!e),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${e?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${e?"left-[22px]":"left-0.5"}`})})]})}function LTt(){const[t,e]=Y.useState(!1),{vondsten:n,exportAsGeoJSON:r,exportAsCSV:i,exportAsExcel:s,exportAsGPX:o,exportAsKML:a}=gh(),l=[{label:"Excel (.xlsx)",action:s,desc:"Spreadsheet"},{label:"CSV",action:i,desc:"Comma-separated"},{label:"GeoJSON",action:r,desc:"GIS software"},{label:"GPX",action:o,desc:"GPS apparaten"},{label:"KML",action:a,desc:"Google Earth"}],c=u=>{u(),e(!1)};return n.length===0?p.jsxs("div",{className:"flex items-center gap-2 mt-2 px-2 py-1.5 text-gray-400 bg-gray-100 rounded w-full cursor-not-allowed",style:{fontSize:"0.9em"},children:[p.jsx(wA,{size:14}),p.jsx("span",{children:"Geen vondsten om te exporteren"})]}):p.jsxs("div",{className:"relative mt-2",children:[p.jsxs("button",{onClick:()=>e(!t),className:"flex items-center justify-between gap-2 px-2 py-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none w-full",style:{fontSize:"0.9em"},children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(wA,{size:14}),p.jsxs("span",{children:["Exporteer vondsten (",n.length,")"]})]}),p.jsx("span",{style:{fontSize:"0.8em"},children:""})]}),t&&p.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 overflow-hidden",children:l.map((u,h)=>p.jsxs("button",{onClick:()=>c(u.action),className:"w-full px-3 py-2 text-left hover:bg-blue-50 transition-colors border-0 outline-none flex justify-between items-center",style:{fontSize:"0.9em"},children:[p.jsx("span",{className:"text-gray-700",children:u.label}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.8em"},children:u.desc})]},h))})]})}const E5="2.32.39";function DTt({size:t=18}){return p.jsxs("svg",{viewBox:"0 0 24 24",width:t,height:t,children:[p.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),p.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),p.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),p.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}function jTt(){const[t,e]=Y.useState(!1),{user:n,loading:r,signInWithGoogle:i,logout:s}=TO(),{toggleInfoPanel:o,toggleSettingsPanel:a,toggleMonumentSearch:l}=gr(),c=Cn(G=>G.menuFontScale),u=Cn(G=>G.setMenuFontScale),h=Cn(G=>G.showFontSliders),f=Cn(G=>G.setShowFontSliders),g=Cn(G=>G.showVondstButton),y=Cn(G=>G.setShowVondstButton),_=Cn(G=>G.showRouteRecordButton),b=Cn(G=>G.setShowRouteRecordButton),T=Cn(G=>G.showCustomPointLayers),A=Cn(G=>G.setShowCustomPointLayers),I=Cn(G=>G.showWeatherButton),P=Cn(G=>G.setShowWeatherButton),N={top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))"},L=()=>e(!1),C=()=>{L(),o()},M=()=>{L(),a()},O=()=>{L(),l()},D=()=>{L(),i()},V=()=>{L(),s()},U=13*c/100;return p.jsxs(p.Fragment,{children:[p.jsx(gt.button,{className:`fixed right-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${t?"bg-blue-500 hover:bg-blue-600":"bg-white/90 hover:bg-white"}`,style:N,onClick:()=>e(!t),whileHover:{scale:1.05},whileTap:{scale:.95},title:"Menu",children:t?p.jsx(Kr,{size:22,className:"text-white"}):p.jsx(HN,{size:22,className:"text-gray-600"})}),p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[799]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:L}),p.jsxs(gt.div,{initial:{opacity:0,y:-8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-8,scale:.95},transition:{duration:.15},className:"fixed right-2 z-[801] w-64 bg-white rounded-xl shadow-lg overflow-hidden flex flex-col",style:{top:"calc(max(0.5rem, env(safe-area-inset-top, 0.5rem)) + 52px)",fontSize:`${U}px`},children:[p.jsxs("div",{className:"flex items-center justify-between gap-2 px-3 py-1.5 bg-blue-500",children:[p.jsx("span",{className:"font-medium text-white",style:{fontSize:`${U}px`},children:"Menu"}),h&&p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"text-[9px] text-blue-200",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"130",step:"10",value:c,onInput:G=>u(parseInt(G.target.value)),onChange:G=>u(parseInt(G.target.value)),className:"w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${c}%`}),p.jsx("span",{className:"text-[11px] text-blue-200",children:"T"})]})]}),r?p.jsx("div",{className:"px-3 py-4 flex items-center justify-center",children:p.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"})}):n?p.jsx("div",{className:"px-3 py-3 border-b border-gray-100",children:p.jsxs("div",{className:"flex items-center gap-3",children:[n.photoURL?p.jsx("img",{src:n.photoURL,alt:n.displayName||"User",className:"w-8 h-8 rounded-full",referrerPolicy:"no-referrer"}):p.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center",children:p.jsx(sq,{size:16,className:"text-white"})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"font-medium text-gray-800 truncate",style:{fontSize:"0.85em"},children:n.displayName||"Gebruiker"}),p.jsx("div",{className:"text-green-600",style:{fontSize:"0.7em"},children:"Cloud sync actief"})]}),p.jsx("button",{onClick:V,className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none bg-transparent",title:"Uitloggen",children:p.jsx(nq,{size:16})})]})}):p.jsxs("button",{onClick:D,className:"w-full px-3 py-3 flex items-center gap-3 hover:bg-blue-50 transition-colors border-0 outline-none bg-transparent",children:[p.jsx(DTt,{size:18}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Inloggen met Google"})]}),p.jsxs("div",{className:"py-1",children:[p.jsxs("button",{onClick:C,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-blue-50",style:{fontSize:"0.95em"},children:[p.jsx(tq,{size:18,className:"text-blue-500"}),p.jsx("span",{children:"Info & handleiding"})]}),p.jsxs("button",{onClick:O,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-purple-50",style:{fontSize:"0.95em"},children:[p.jsx(y2e,{size:18,className:"text-purple-500"}),p.jsx("span",{children:"Zoek in monumenten"})]})]}),p.jsxs("div",{className:"py-1 border-t border-gray-100",children:[p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Ka,{size:18,className:"text-orange-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Vondst knop"})]}),p.jsx("button",{onClick:()=>y(!g),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${g?"bg-gradient-to-r from-orange-500 to-orange-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${g?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(KN,{size:18,className:"text-green-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Route knop"})]}),p.jsx("button",{onClick:()=>b(!_),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${_?"bg-gradient-to-r from-green-500 to-green-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${_?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(zd,{size:18,className:"text-cyan-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Weerwidget"})]}),p.jsx("button",{onClick:()=>P(!I),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${I?"bg-gradient-to-r from-cyan-500 to-cyan-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${I?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Ga,{size:18,className:"text-amber-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Mijn lagen"})]}),p.jsx("button",{onClick:()=>A(!T),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${T?"bg-gradient-to-r from-amber-500 to-amber-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${T?"left-[22px]":"left-0.5"}`})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(iq,{size:18,className:"text-purple-500"}),p.jsx("span",{className:"text-gray-700",style:{fontSize:"0.9em"},children:"Tekstgrootte"})]}),p.jsx("button",{onClick:()=>f(!h),className:`w-10 h-5 rounded-full transition-all border-0 outline-none relative ${h?"bg-gradient-to-r from-purple-500 to-purple-600":"bg-gray-300"}`,children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 rounded-full bg-white shadow-sm transition-all ${h?"left-[22px]":"left-0.5"}`})})]})]}),p.jsx("div",{className:"mt-auto border-t border-gray-100",children:p.jsxs("button",{onClick:M,className:"w-full px-3 py-2.5 text-left flex items-center gap-3 border-0 outline-none bg-transparent transition-colors text-gray-700 hover:bg-gray-50",style:{fontSize:"0.95em"},children:[p.jsx(YN,{size:18,className:"text-gray-500"}),p.jsx("span",{children:"Instellingen"})]})}),p.jsxs("div",{className:"px-3 py-1.5 bg-gray-50 text-center text-gray-400",style:{fontSize:"0.65em"},children:["DetectorApp NL v",E5]})]})]})})]})}const $Tt="https://forms.gle/R5LCk11Bzu5XrkBj8";function FTt(){const{infoPanelOpen:t,toggleInfoPanel:e}=gr(),[n,r]=Y.useState("info"),i=[{id:"info",label:"Info",icon:p.jsx(tq,{size:14})},{id:"functies",label:"Functies",icon:p.jsx(QH,{size:14})},{id:"handleiding",label:"Handleiding",icon:p.jsx(u2e,{size:14})}];return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(gt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-blue-500",children:[p.jsxs("span",{className:"font-medium text-white",children:["DetectorApp NL v",E5]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-blue-400/50 hover:bg-blue-400 transition-colors border-0 outline-none",children:p.jsx(Kr,{size:18,className:"text-white",strokeWidth:2.5})})]}),p.jsx("div",{className:"flex border-b border-gray-200",children:i.map(s=>p.jsxs("button",{onClick:()=>r(s.id),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2.5 text-sm font-medium transition-colors border-0 outline-none ${n===s.id?"text-blue-600 border-b-2 border-blue-600 bg-blue-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[s.icon,s.label]},s.id))}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 text-sm",children:[n==="info"&&p.jsx(VTt,{}),n==="functies"&&p.jsx(zTt,{}),n==="handleiding"&&p.jsx(GTt,{}),p.jsxs("section",{className:"pt-2 border-t border-gray-200 space-y-2",children:[p.jsxs("a",{href:$Tt,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-3 py-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",children:[p.jsx(h2e,{size:14}),p.jsx("span",{className:"text-sm",children:"Meld een bug of geef feedback"})]}),p.jsxs("p",{className:"text-xs text-gray-400 text-center",children:["DetectorApp NL v",E5," - Gratis en zonder tracking"]})]})]})]})]})})}function VTt(){return p.jsxs(p.Fragment,{children:[p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Over deze app"}),p.jsx("p",{className:"text-gray-600",children:"DetectorApp NL is d gratis kaartapplicatie voor metaaldetectie, fossielen zoeken en archeologische verkenning in Nederland. Met 70+ kaartlagen, GPS tracking met richtingspijl, eigen lagen, cloud sync en uitgebreid vondstenbeheer."})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Databronnen & Licenties"}),p.jsxs("ul",{className:"space-y-2 text-gray-600",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"RCE / Cultureelerfgoed.nl"})," (CC0/CC-BY)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"AMK Monumenten, Rijksmonumenten, Werelderfgoed, Paleokaarten, Religieus Erfgoed, Essen, Archeo Onderzoeken"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"PDOK / Kadaster"})," (CC0/CC-BY)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Luchtfoto, AHN Hoogtekaarten, IKAW, Bodemkaart, Geomorfologie, Kadastrale Grenzen, Gewaspercelen"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"OpenStreetMap"})," (ODbL)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Hunebedden, Grafheuvels, Bunkers, Kastelen, Terpen, Parken, Kringloopwinkels, Musea, Speeltuinen, Strandjes"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Itiner-E / Wetenschappelijk"})," (CC BY 4.0)",p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Romeinse wegen - Brughmans, Paout, de Soto & Bjerregaard Vahlstrup"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Mindat.org"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Mineralen hotspots en vindplaatsen"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Paleontica / Fossielen data"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Fossiel hotspots en vindplaatsen"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Map5.nl / Kadaster"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Historische kaarten (TMK 1850, Bonnebladen 1900)"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Provinciale data"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Relictenkaart (Gelderland), Scheepswrakken (Zuid-Holland), Verdronken Dorpen (Zeeland)"})]}),p.jsxs("li",{children:[p.jsx("strong",{children:"UIKAV / Rijkswaterstaat"}),p.jsx("br",{}),p.jsx("span",{className:"text-xs",children:"Uiterwaarden archeologische data, Expert advies, Bufferlagen"})]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Privacy & Opslag"}),p.jsxs("div",{className:"text-gray-600 space-y-2",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Volledig anoniem mogelijk:"})," Je kunt deze app gebruiken zonder enige registratie of login. Al je data blijft dan 100% op je eigen apparaat."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Geen tracking:"})," Deze app verzamelt geen analytics, cookies, gebruiksstatistieken of persoonlijke gegevens. Er is geen server die je gedrag registreert."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Locatiegegevens:"})," Je GPS-positie wordt alleen gebruikt om je locatie op de kaart te tonen. Deze wordt niet opgeslagen of gedeeld met derden."]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Google Login - Wat betekent het?"}),p.jsxs("div",{className:"text-gray-600 space-y-2",children:[p.jsx("p",{className:"font-medium text-green-700",children:" Google login is volledig optioneel"}),p.jsx("p",{children:p.jsx("strong",{children:"Wat wordt gesynchroniseerd:"})}),p.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[p.jsx("li",{children:"Je eigen aangemaakte lagen (Mijn Lagen)"}),p.jsx("li",{children:"Je vondsten registraties"}),p.jsx("li",{children:"Je preset-instellingen"})]}),p.jsx("p",{children:p.jsx("strong",{children:"Wat NIET wordt gedeeld:"})}),p.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[p.jsx("li",{children:"Je GPS-locatie wordt niet opgeslagen in de cloud"}),p.jsx("li",{children:"Je zoekgeschiedenis wordt niet bewaard"}),p.jsx("li",{children:"Welke kaartlagen je bekijkt wordt niet geregistreerd"}),p.jsx("li",{children:"Niemand anders kan je data zien - alleen jij"})]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Waarom inloggen?"})," Alleen voor synchronisatie tussen apparaten (telefoon/tablet/PC) en als backup voor je vondsten."]}),p.jsx("p",{className:"text-xs text-gray-500 italic",children:"Tip: Gebruik de app gerust zonder login als je privacy belangrijker vindt dan synchronisatie. Alle functies werken ook offline."})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Zonder login (anoniem)"}),p.jsxs("div",{className:"text-gray-600 space-y-2",children:[p.jsx("p",{className:"font-medium text-blue-700",children:" 95% van de functies werkt zonder login"}),p.jsx("p",{children:p.jsx("strong",{children:"Beschikbaar zonder login:"})}),p.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[p.jsx("li",{children:"Alle 70+ kaartlagen bekijken"}),p.jsx("li",{children:"GPS tracking en navigatie"}),p.jsx("li",{children:"Vondsten registreren (lokaal opgeslagen)"}),p.jsx("li",{children:"Eigen lagen aanmaken (lokaal opgeslagen)"}),p.jsx("li",{children:"Export naar Excel/CSV/GeoJSON/GPX/KML"}),p.jsx("li",{children:"Lagen importeren"}),p.jsx("li",{children:"Alle presets en instellingen"})]}),p.jsx("p",{children:p.jsx("strong",{children:"Alleen met login:"})}),p.jsxs("ul",{className:"list-disc list-inside ml-2 text-xs space-y-1",children:[p.jsx("li",{children:"Synchronisatie tussen apparaten"}),p.jsx("li",{children:"Cloud backup van je vondsten"})]})]})]})]})}function zTt(){return p.jsxs(p.Fragment,{children:[p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(B2,{size:16,className:"text-blue-600"}),"Kaartlagen (70+)"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Basis:"})," CartoDB, OpenStreetMap, PDOK Luchtfoto"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Historisch:"})," TMK 1850, Bonnebladen 1900"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Hoogtekaarten:"})," AHN4 Hillshade, Multi-Hillshade, Hoogtekaart Kleur, AHN 0.5m"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Archeologie:"})," AMK Monumenten (per periode), Archeo Onderzoeken, IKAW, Essen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Romeins:"})," Romeinse wegen, Romeinse Forten met historische info, Limesweg"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Prehistorie:"})," Hunebedden, Grafheuvels, Terpen, Paleokaarten (7 periodes)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Militair:"})," WWII Bunkers, Slagvelden, Vliegvelden, Verdedigingslinies"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Erfgoed:"})," Rijksmonumenten, Kastelen, Runes, Religieus Erfgoed"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Terrein:"})," Veengebieden, Geomorfologie, Bodemkaart"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Percelen:"})," Gewaspercelen (met bouwplantoelichting), Kadastrale Grenzen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Recreatie:"})," Parken, Musea, Kringloopwinkels, Strandjes, Wandelroutes"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Provinciaal:"})," Relictenkaart, Scheepswrakken, Verdronken Dorpen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"UIKAV:"})," Uiterwaard data, Expert advies, Vlakken, Punten, Bufferlagen"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Uct,{size:16,className:"text-purple-600"}),"Mineralen & Fossielen"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Mineralen hotspots:"})," Vindplaatsen uit Mindat.org met mineralenlijst"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Goudrivieren:"})," Bekende locaties voor goud zoeken"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Fossiel hotspots:"})," Vindplaatsen met fossieltypen en periodes"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Premium lagen:"})," Gedetailleerde data (beschikbaar met account)"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Dct,{size:16,className:"text-orange-600"}),"Mijn Lagen"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Eigen lagen:"})," Maak lagen voor vakantie, projecten, etc."]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Toevoegen:"})," Tik op + in popup om monument/locatie aan laag toe te voegen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Polygonen:"})," Hele monumentgebieden worden opgeslagen, niet alleen een punt"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Originele info:"})," Popup content blijft behouden"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Kleuren:"})," Elke laag krijgt eigen kleur (aanpasbaar)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Import:"})," Laad GeoJSON, KML of GPX bestanden"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Export:"})," Exporteer lagen als GeoJSON"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(zd,{size:16,className:"text-green-600"}),"Google Cloud Sync"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Inloggen:"})," Via hamburger menu rechtsboven"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Synchronisatie:"})," Lagen en vondsten automatisch naar cloud"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Meerdere apparaten:"})," Altijd toegang tot je data"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Veilig:"})," Alleen jij hebt toegang tot je gegevens"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(nh,{size:16,className:"text-green-600"}),"GPS & Navigatie"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsx("li",{children:"Live GPS tracking met nauwkeurigheidscirkel"}),p.jsx("li",{children:"Richtingspijl draait mee met je telefoon"}),p.jsx("li",{children:"Kaart handmatig draaien + kompasknop naar noorden"}),p.jsx("li",{children:"Schaalbalk onderaan (aan/uit in Instellingen)"}),p.jsx("li",{children:"Open locatie in Google Maps vanuit popup"}),p.jsx("li",{children:"Zoekbalk voor adressen en plaatsen"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Ka,{size:16,className:"text-orange-600"}),"Vondsten"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsx("li",{children:"Toevoegen via GPS locatie, long-press of handmatig"}),p.jsx("li",{children:"Velden: type, materiaal, periode, diepte, conditie, gewicht"}),p.jsx("li",{children:"Foto's toevoegen (link of upload)"}),p.jsx("li",{children:"Export: Excel, CSV, GeoJSON, GPX, KML"}),p.jsx("li",{children:"Dashboard met statistieken"}),p.jsx("li",{children:"Cloud sync met Google account"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Ga,{size:16,className:"text-purple-600"}),"Presets"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Standaard:"})," Detectie, Steentijd, Romeins, Middeleeuwen, WOII, Analyse, Fossielen, Mineralen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Aanpasbaar:"})," Overschrijf preset met huidige lagen (diskette-icoon)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Eigen presets:"})," Maak nieuwe via Instellingen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Tekstgrootte:"})," Aanpasbaar per panel via slider"]})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(hut,{size:16,className:"text-cyan-600"}),"Perceelinformatie"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsx("li",{children:"Kadastrale aanduiding (gemeente, sectie, nummer)"}),p.jsx("li",{children:"Oppervlakte in m en hectare"}),p.jsx("li",{children:"Gewas en bouwplan met uitleg"}),p.jsx("li",{children:"Bodemtype met beschrijving"}),p.jsx("li",{children:"AHN hoogte in meters NAP"}),p.jsx("li",{children:"Hoogtekaart per perceel (bergje-icoon)"}),p.jsx("li",{children:"Link naar eigenaar opzoeken (Kadaster)"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Uut,{size:16,className:"text-red-600"}),"Monumenten & Erfgoed"]}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"AMK:"})," Archeologische Monumenten per periode"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Romeinse Forten:"})," Uitgebreide historische info per fort"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Rijksmonumenten:"})," Met bescherming en historie"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Verdedigingswerken:"})," Linies, forten, schansen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Popup info:"})," Directe uitleg over archeologische waarde"]})]})]})]})}function GTt(){return p.jsxs(p.Fragment,{children:[p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Eerste stappen"}),p.jsxs("ol",{className:"text-gray-600 space-y-2 text-xs list-decimal list-inside",children:[p.jsxs("li",{children:["Tik op de ",p.jsx("strong",{children:"GPS knop"})," (rechtsonder, oranje) om je locatie te zien"]}),p.jsxs("li",{children:["Kies een ",p.jsx("strong",{children:"preset"})," (linksonder, laagjes-icoon) voor een snelle start"]}),p.jsxs("li",{children:["Of open ",p.jsx("strong",{children:"Kaartlagen"})," om individuele lagen aan te zetten"]}),p.jsx("li",{children:"Tik op objecten op de kaart voor gedetailleerde informatie"})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Hamburger Menu"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsx("p",{children:"Rechtsboven vind je het menu met:"}),p.jsxs("ul",{className:"list-disc list-inside ml-2 space-y-1",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Google Login:"})," Synchroniseer je data naar de cloud"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Vondst toevoegen:"})," Registreer een nieuwe vondst"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Info & Handleiding:"})," Dit scherm"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Instellingen:"})," Presets, export, weergave"]})]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"GPS & Navigatie"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"GPS knop (oranje):"})," Aan/uit toggle voor locatie tracking."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Richtingspijl:"})," Blauwe pijl toont de richting van je telefoon."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Kaart draaien:"})," Met twee vingers of via kompas."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Kompasknop:"})," Verschijnt rechtsboven als kaart gedraaid is. Tik om naar noorden te draaien."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Google Maps:"})," Vanuit elke popup kun je direct navigeren."]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Locaties opslaan in Mijn Lagen"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 1:"})," Tik op een object op de kaart (monument, bunker, etc.)"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 2:"})," Tik op de ",p.jsx("strong",{children:"oranje +"})," knop in de popup header"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 3:"})," Kies een bestaande laag of maak een nieuwe aan"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Resultaat:"})," De locatie inclusief vorm (polygoon) en info wordt opgeslagen!"]}),p.jsx("p",{className:"text-gray-500 italic",children:"Tip: Maak lagen voor vakantiebestemmingen, projecten of interessante locaties."})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Vondst registreren"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Via GPS:"})," Open menu  Vondst toevoegen. Je locatie wordt automatisch ingevuld."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Via long-press:"}),' Houd je vinger op de kaart  kies "Vondst toevoegen".']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Handmatig:"}),' In het formulier  "Kies op kaart" voor exacte locatie.']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Foto's:"})," Voeg foto-links toe of upload direct."]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Presets gebruiken"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Toepassen:"})," Linksonder  preset kiezen."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Aanpassen:"})," Zet gewenste lagen aan  tik diskette-icoon naast preset."]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Nieuw maken:"}),' Instellingen  Presets  "Huidige lagen opslaan".']})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Cloud Sync instellen"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 1:"})," Open hamburger menu rechtsboven"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 2:"}),' Tik op "Inloggen met Google"']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 3:"})," Kies je Google account"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Klaar!"})," Je lagen en vondsten worden automatisch gesynchroniseerd."]}),p.jsx("p",{className:"text-gray-500 italic",children:"Je data is veilig en alleen voor jou toegankelijk."})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Lagen importeren"}),p.jsxs("div",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 1:"})," Ga naar Instellingen (hamburger menu)"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 2:"}),' Scroll naar "Lagen importeren"']}),p.jsxs("p",{children:[p.jsx("strong",{children:"Stap 3:"})," Kies een GeoJSON, KML of GPX bestand"]}),p.jsxs("p",{children:[p.jsx("strong",{children:"Resultaat:"})," Nieuwe laag met je geimporteerde data!"]}),p.jsx("p",{className:"text-gray-500 italic",children:"Handig voor routes, waypoints of eigen datasets."})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor detectie"}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[p.jsxs("li",{children:["Gebruik ",p.jsx("strong",{children:"AHN Hillshade"})," om relif te zien (grafheuvels, wallen)"]}),p.jsxs("li",{children:["Combineer ",p.jsx("strong",{children:"AMK"})," met ",p.jsx("strong",{children:"Gewaspercelen"})," voor slimme zoeklocaties"]}),p.jsxs("li",{children:["Check ",p.jsx("strong",{children:"IKAW"})," voor archeologische verwachting"]}),p.jsxs("li",{children:["Gebruik ",p.jsx("strong",{children:"historische kaarten"})," (TMK 1850) om oude structuren te vinden"]}),p.jsxs("li",{children:["Bekijk ",p.jsx("strong",{children:"Archeo Onderzoeken"})," voor eerdere vondsten in het gebied"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Bodemkaart"})," toont of grond geschikt is (popup legt uit)"]})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor fossielen"}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[p.jsxs("li",{children:["Zet ",p.jsx("strong",{children:"Fossiel hotspots"})," aan voor bekende vindplaatsen"]}),p.jsxs("li",{children:["Bekijk ",p.jsx("strong",{children:"Paleokaarten"})," voor historische kustlijnen"]}),p.jsxs("li",{children:["Check ",p.jsx("strong",{children:"Geomorfologie"})," voor oude zeebodems en rivieren"]}),p.jsx("li",{children:"Popup toont welke fossielen op elke locatie gevonden zijn"})]})]}),p.jsxs("section",{children:[p.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Tips voor mineralen"}),p.jsxs("ul",{className:"text-gray-600 space-y-1 text-xs list-disc list-inside",children:[p.jsxs("li",{children:["Zet ",p.jsx("strong",{children:"Mineralen hotspots"})," aan voor vindplaatsen"]}),p.jsxs("li",{children:["Bekijk ",p.jsx("strong",{children:"Goudrivieren"})," voor goudzoekmogelijkheden"]}),p.jsx("li",{children:"Popup toont welke mineralen op elke locatie voorkomen"}),p.jsx("li",{children:"Links naar Mindat.org voor gedetailleerde info"})]})]}),p.jsxs("section",{children:[p.jsxs("h3",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx(Cg,{size:16,className:"text-blue-600"}),"Handige links"]}),p.jsxs("ul",{className:"text-gray-600 space-y-2 text-xs",children:[p.jsxs("li",{children:[p.jsx("a",{href:"https://legendageomorfologie.wur.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Geomorfologie legenda (WUR)"}),p.jsx("br",{}),p.jsx("span",{className:"text-gray-500",children:"Uitgebreide uitleg over landvormen"})]}),p.jsxs("li",{children:[p.jsx("a",{href:"https://legenda-bodemkaart.bodemdata.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Bodemkaart legenda (BRO)"}),p.jsx("br",{}),p.jsx("span",{className:"text-gray-500",children:"Volledige bodemclassificatie"})]}),p.jsxs("li",{children:[p.jsx("a",{href:"https://www.mindat.org/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Mindat.org - Mineralen database"}),p.jsx("br",{}),p.jsx("span",{className:"text-gray-500",children:"Wereldwijde mineralen informatie"})]}),p.jsxs("li",{children:[p.jsx("a",{href:"https://www.cultureelerfgoed.nl/",target:"_blank",rel:"noopener",className:"text-blue-600 hover:underline font-medium",children:"Rijksdienst voor Cultureel Erfgoed"}),p.jsx("br",{}),p.jsx("span",{className:"text-gray-500",children:"Officile monumenten informatie"})]})]})]})]})}function uSe(t,e,n,r){const s=(r-e)*Math.PI/180,o=(n-t)*Math.PI/180,a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 6371e3*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function vF(t){let e=0;for(let n=1;n<t.length;n++)e+=uSe(t[n-1].coordinates[0],t[n-1].coordinates[1],t[n].coordinates[0],t[n].coordinates[1]);return e}const Ba=yo()(Sh((t,e)=>({state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0,savedRoutes:[],visibleRouteIds:new Set,heatmapEnabled:!1,gridEnabled:!1,gridCenter:null,gridSize:20,gridCount:10,gridColor:"rgba(139, 92, 246, 0.6)",autoPauseEnabled:!1,autoPauseSeconds:120,startRecording:()=>{t({state:"recording",currentPoints:[],startTime:Date.now(),pauseStartTime:null,totalPausedTime:0})},pauseRecording:()=>{const{state:n}=e();n==="recording"&&t({state:"paused",pauseStartTime:Date.now()})},resumeRecording:()=>{const{state:n,pauseStartTime:r,totalPausedTime:i}=e();if(n!=="paused"||!r)return;const s=Date.now()-r;t({state:"recording",pauseStartTime:null,totalPausedTime:i+s})},stopRecording:n=>{const{state:r,currentPoints:i,startTime:s,totalPausedTime:o,pauseStartTime:a}=e();if(r==="idle"||!s||i.length<2)return t({state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0}),null;const l=Date.now();let c=o;a&&(c+=l-a);const u=l-s-c,h=vF(i),f={id:crypto.randomUUID(),name:n||`Route ${new Date().toLocaleDateString("nl-NL")} ${new Date().toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})}`,points:i,startTime:s,endTime:l,totalDistance:h,totalDuration:u,pausedDuration:c,createdAt:new Date().toISOString()};return t(g=>{const y=new Set(g.visibleRouteIds);return y.add(f.id),{state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0,savedRoutes:[f,...g.savedRoutes],visibleRouteIds:y}}),f},cancelRecording:()=>{t({state:"idle",currentPoints:[],startTime:null,pauseStartTime:null,totalPausedTime:0})},addPoint:(n,r,i)=>{const{state:s,currentPoints:o}=e();if(s!=="recording")return;if(o.length>0){const l=o[o.length-1];if(uSe(l.coordinates[0],l.coordinates[1],n,r)<2)return}const a={coordinates:[n,r],timestamp:Date.now(),accuracy:i};t({currentPoints:[...o,a]})},deleteRoute:n=>{t(r=>({savedRoutes:r.savedRoutes.filter(i=>i.id!==n)}))},renameRoute:(n,r)=>{t(i=>({savedRoutes:i.savedRoutes.map(s=>s.id===n?{...s,name:r}:s)}))},clearAllRoutes:()=>{t({savedRoutes:[],visibleRouteIds:new Set})},toggleRouteVisibility:n=>{t(r=>{const i=new Set(r.visibleRouteIds);return i.has(n)?i.delete(n):i.add(n),{visibleRouteIds:i}})},showRoute:n=>{t(r=>{const i=new Set(r.visibleRouteIds);return i.add(n),{visibleRouteIds:i}})},hideRoute:n=>{t(r=>{const i=new Set(r.visibleRouteIds);return i.delete(n),{visibleRouteIds:i}})},showAllRoutes:()=>{t(n=>({visibleRouteIds:new Set(n.savedRoutes.map(r=>r.id))}))},hideAllRoutes:()=>{t({visibleRouteIds:new Set})},toggleHeatmap:()=>{t(n=>({heatmapEnabled:!n.heatmapEnabled}))},setHeatmapEnabled:n=>{t({heatmapEnabled:n})},toggleGrid:()=>{t(n=>({gridEnabled:!n.gridEnabled}))},setGridEnabled:n=>{t({gridEnabled:n})},setGridCenter:n=>{t({gridCenter:n})},setGridSize:n=>{t({gridSize:n})},setGridCount:n=>{t({gridCount:n})},setGridColor:n=>{t({gridColor:n})},centerGridOnCurrentLocation:()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(n=>{t({gridCenter:[n.coords.longitude,n.coords.latitude],gridEnabled:!0})},n=>{console.error("Could not get location:",n)})},setAutoPauseEnabled:n=>{t({autoPauseEnabled:n})},setAutoPauseSeconds:n=>{t({autoPauseSeconds:n})},importRouteFromGPX:(n,r)=>{try{const s=new DOMParser().parseFromString(n,"application/xml");if(s.querySelector("parsererror"))return{success:!1,error:"Ongeldig XML formaat"};const a=s.querySelectorAll("trkpt");if(a.length<2&&s.querySelectorAll("wpt").length<2)return{success:!1,error:"Geen route punten gevonden in GPX bestand"};const l=[];if((a.length>0?a:s.querySelectorAll("wpt")).forEach(b=>{const T=parseFloat(b.getAttribute("lat")||"0"),A=parseFloat(b.getAttribute("lon")||"0"),I=b.querySelector("time"),P=I?new Date(I.textContent||"").getTime():Date.now();!isNaN(T)&&!isNaN(A)&&l.push({coordinates:[A,T],timestamp:isNaN(P)?Date.now():P})}),l.length<2)return{success:!1,error:"Niet genoeg geldige punten in GPX bestand"};const u=s.querySelector("trk > name")?.textContent||s.querySelector("metadata > name")?.textContent||r||`Import ${new Date().toLocaleDateString("nl-NL")}`,h=vF(l),f=l[0].timestamp,g=l[l.length-1].timestamp,y=g-f,_={id:crypto.randomUUID(),name:u,points:l,startTime:f,endTime:g,totalDistance:h,totalDuration:y>0?y:0,pausedDuration:0,createdAt:new Date().toISOString()};return t(b=>{const T=new Set(b.visibleRouteIds);return T.add(_.id),{savedRoutes:[_,...b.savedRoutes],visibleRouteIds:T}}),{success:!0,routeId:_.id}}catch(i){return console.error("GPX import error:",i),{success:!1,error:"Fout bij importeren van GPX bestand"}}},updateRouteNotes:(n,r)=>{t(i=>({savedRoutes:i.savedRoutes.map(s=>s.id===n?{...s,notes:r}:s)}))},addPhotoToRoute:(n,r)=>{const i={...r,id:crypto.randomUUID(),timestamp:new Date().toISOString()};t(s=>({savedRoutes:s.savedRoutes.map(o=>o.id===n?{...o,photos:[...o.photos||[],i]}:o)}))},removePhotoFromRoute:(n,r)=>{t(i=>({savedRoutes:i.savedRoutes.map(s=>s.id===n?{...s,photos:(s.photos||[]).filter(o=>o.id!==r)}:s)}))},getCurrentDistance:()=>{const{currentPoints:n}=e();return vF(n)},getCurrentDuration:()=>{const{state:n,startTime:r,totalPausedTime:i,pauseStartTime:s}=e();if(!r)return 0;const o=Date.now();let a=i;return n==="paused"&&s&&(a+=o-s),o-r-a},getAverageSpeed:()=>{const n=e().getCurrentDistance(),r=e().getCurrentDuration();return r===0?0:n/1e3/(r/36e5)}}),{name:"detectorapp-route-recording",version:2,partialize:t=>({savedRoutes:t.savedRoutes,visibleRouteIds:Array.from(t.visibleRouteIds),heatmapEnabled:t.heatmapEnabled,gridEnabled:t.gridEnabled,gridCenter:t.gridCenter,gridSize:t.gridSize,gridCount:t.gridCount,gridColor:t.gridColor,autoPauseEnabled:t.autoPauseEnabled,autoPauseSeconds:t.autoPauseSeconds}),merge:(t,e)=>({...e,...t,visibleRouteIds:new Set(t?.visibleRouteIds||[])})}));function hSe(t){const e=`<?xml version="1.0" encoding="UTF-8"?>
<gpx version="1.1" creator="DetectorApp NL"
  xmlns="http://www.topografix.com/GPX/1/1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd">
  <metadata>
    <name>${t.name}</name>
    <time>${new Date(t.startTime).toISOString()}</time>
  </metadata>
  <trk>
    <name>${t.name}</name>
    <trkseg>
${t.points.map(s=>`      <trkpt lat="${s.coordinates[1]}" lon="${s.coordinates[0]}">
        <time>${new Date(s.timestamp).toISOString()}</time>
      </trkpt>`).join(`
`)}
    </trkseg>
  </trk>
</gpx>`,n=new Blob([e],{type:"application/gpx+xml"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=`${t.name.replace(/[^a-zA-Z0-9]/g,"-")}.gpx`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}let gg=null,lk=null;function dSe(){if(typeof window>"u"||!("speechSynthesis"in window))return!1;gg=window.speechSynthesis;const t=()=>{const e=gg?.getVoices()||[];lk=e.find(n=>n.lang.startsWith("nl")||n.name.toLowerCase().includes("dutch")||n.name.toLowerCase().includes("nederland"))||null,!lk&&e.length>0&&(lk=e[0])};return t(),gg&&(gg.onvoiceschanged=t),!0}function UTt(t,e){if(!gg&&!dSe()||!gg)return;gg.cancel();const n=new SpeechSynthesisUtterance(t);lk&&(n.voice=lk),n.lang="nl-NL",n.rate=e?.rate,n.pitch=e?.pitch??1,n.volume=e?.volume??1,gg.speak(n)}function BTt(t){const e=[];e.push(`${t.type} toegevoegd`),t.material&&t.material!=="Onbekend"&&e.push(`Materiaal: ${t.material}`),t.period&&t.period!=="Onbekend"&&e.push(`Periode: ${t.period}`),t.layerName&&t.layerName!=="Vondsten"&&e.push(`Opgeslagen in ${t.layerName}`);const n=e.join(". ");UTt(n,{rate:1.1})}dSe();const WTt="detectorapp-photos",HTt=1,S5="photos",qTt=1024,KTt=200,YTt=.8,XTt=.7;function ZTt(){return new Promise((t,e)=>{const n=indexedDB.open(WTt,HTt);n.onerror=()=>e(n.error),n.onsuccess=()=>t(n.result),n.onupgradeneeded=r=>{const i=r.target.result;i.objectStoreNames.contains(S5)||i.createObjectStore(S5,{keyPath:"id"}).createIndex("createdAt","createdAt",{unique:!1})}})}async function kae(t,e,n){return new Promise((r,i)=>{const s=new Image,o=URL.createObjectURL(t);s.onload=()=>{URL.revokeObjectURL(o);let{width:a,height:l}=s;(a>e||l>e)&&(a>l?(l=Math.round(l*e/a),a=e):(a=Math.round(a*e/l),l=e));const c=document.createElement("canvas");c.width=a,c.height=l;const u=c.getContext("2d");if(!u){i(new Error("Could not get canvas context"));return}u.imageSmoothingEnabled=!0,u.imageSmoothingQuality="high",u.drawImage(s,0,0,a,l),c.toBlob(h=>{h?r({blob:h,width:a,height:l}):i(new Error("Could not create blob"))},"image/jpeg",n)},s.onerror=()=>{URL.revokeObjectURL(o),i(new Error("Could not load image"))},s.src=o})}async function JTt(t,e){const{blob:n,width:r,height:i}=await kae(e,qTt,YTt),{blob:s}=await kae(e,KTt,XTt),o={id:t,fullImage:n,thumbnail:s,originalName:e.name,mimeType:"image/jpeg",width:r,height:i,size:n.size,createdAt:new Date().toISOString()},a=await ZTt();return new Promise((l,c)=>{const u=a.transaction(S5,"readwrite"),f=u.objectStore(S5).put(o);f.onsuccess=()=>l(o),f.onerror=()=>c(f.error),u.oncomplete=()=>a.close()})}function _F({label:t,value:e,onChange:n,options:r,required:i=!1,placeholder:s="Typ hier..."}){const[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),[u,h]=Y.useState(""),f=e&&!r.includes(e),g=()=>{c(!0),h(f?e:""),a(!1)},y=()=>{u.trim()&&n(u.trim()),c(!1)};return l?p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[t,i&&p.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),p.jsx("input",{type:"text",value:u,onChange:_=>h(_.target.value),onKeyDown:_=>{_.key==="Enter"&&(_.preventDefault(),y()),_.key==="Escape"&&c(!1)},onBlur:y,placeholder:s,autoFocus:!0,className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"}})]}):p.jsxs("div",{className:"relative",children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[t,i&&p.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),p.jsxs("button",{type:"button",onClick:()=>a(!o),className:"w-full flex items-center justify-between px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors text-left",style:{border:"none",outline:"none"},children:[p.jsxs("span",{className:e?"":"text-gray-400",children:[e||"Selecteer...",f&&p.jsx(roe,{size:12,className:"inline ml-1 text-orange-500"})]}),p.jsx(Ib,{size:16,className:`text-gray-400 transition-transform ${o?"rotate-180":""}`})]}),o&&p.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white rounded-lg shadow-lg max-h-48 overflow-y-auto",children:[p.jsxs("button",{type:"button",onClick:g,className:"w-full px-3 py-2 text-left text-sm text-orange-600 hover:bg-orange-50 transition-colors flex items-center gap-2",style:{border:"none",outline:"none"},children:[p.jsx(roe,{size:12}),"Eigen invoer..."]}),p.jsx("div",{className:"border-t border-gray-100"}),r.map(_=>p.jsx("button",{type:"button",onClick:()=>{n(_),a(!1)},className:`w-full px-3 py-2 text-left text-sm transition-colors ${_===e?"bg-orange-50 text-orange-600":"text-gray-600 hover:bg-gray-50"}`,style:{border:"none",outline:"none"},children:_},_))]})]})}function fSe({onClose:t,initialLocation:e}){const n=ks(Ye=>Ye.position),r=li(Ye=>Ye.map),i=gr(Ye=>Ye.vondstFormPhoto),s=ps(Ye=>Ye.layers),o=ps(Ye=>Ye.addPoint);ps(Ye=>Ye.addPhotoToPoint);const a=Cn(Ye=>Ye.voiceFeedbackEnabled),l=Ba(Ye=>Ye.state),c=Ba(Ye=>Ye.startTime);Ba(Ye=>Ye.savedRoutes);const u=()=>l==="idle"||!c?null:`Route ${new Date(c).toLocaleDateString("nl-NL")} ${new Date(c).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})}`,h=l==="recording"||l==="paused",f=u(),[g,y]=Y.useState(""),[_,b]=Y.useState(""),[T,A]=Y.useState(""),[I,P]=Y.useState(""),[N,L]=Y.useState(!1),[C,M]=Y.useState(void 0),[O,D]=Y.useState(void 0),[V,U]=Y.useState(Qc),[G,de]=Y.useState(i),[ke,Ue]=Y.useState(null);Y.useEffect(()=>{if(G){const Ye=URL.createObjectURL(G);return Ue(Ye),()=>URL.revokeObjectURL(Ye)}else Ue(null)},[G]);const[Ne,fe]=Y.useState(e?"map-pick":n?"gps":"map-center"),[De,Ce]=Y.useState(e||null),[Q,W]=Y.useState(!1),ne=()=>{if(Ne==="gps"&&n)return{lat:n.lat,lng:n.lng};if(Ne==="map-pick"&&De)return De;if(r){const Ye=r.getView().getCenter();if(Ye){const[on,jt]=Fn(Ye);return{lat:jt,lng:on}}}return null},ie=ne();Y.useEffect(()=>{if(!Q||!r)return;const Ye=on=>{const[jt,pn]=Fn(on.coordinate);Ce({lat:pn,lng:jt}),fe("map-pick"),W(!1)};return r.on("click",Ye),()=>r.un("click",Ye)},[Q,r]);const le=()=>W(!0),ve=()=>{n&&(fe("gps"),Ce(null))},qe=()=>{const Ye=document.createElement("input");Ye.type="file",Ye.accept="image/*",Ye.capture="environment",Ye.onchange=on=>{const jt=on.target.files?.[0];jt&&de(jt)},Ye.click()},Ke=()=>de(null),Se=async Ye=>{Ye.preventDefault();const on=ne();if(!on){alert("Geen locatie beschikbaar");return}if(!_){alert("Vul een naam/type in");return}L(!0);try{let jt=g||"";if(V===Qc){const dt=[];T&&dt.push(`Materiaal: ${T}`),I&&dt.push(`Periode: ${I}`),C&&dt.push(`Gewicht: ${C}g`),O&&dt.push(`Lengte: ${O}mm`),dt.length>0&&(jt=dt.join(" | ")+(g?` | ${g}`:""))}let pn;if(G){const dt=crypto.randomUUID();try{const hr=await JTt(dt,G),zn=await we(hr.thumbnail);pn={id:dt,thumbnailBase64:zn,createdAt:hr.createdAt}}catch(hr){console.error("Failed to save photo:",hr)}}o(V,{coordinates:[on.lng,on.lat],name:_,category:V===Qc?_:"Overig",notes:jt||"",...pn?{photos:[pn]}:{},...h&&c?{routeId:`recording-${c}`,routeName:f||void 0}:{}});const _n=s.find(dt=>dt.id===V)?.name||"Vondsten";a&&BTt({type:_,material:T||void 0,period:I||void 0,layerName:_n}),alert(`Toegevoegd aan ${_n}! ${pn?" (met foto)":""}`),t()}catch(jt){alert("Fout bij opslaan: "+jt.message)}finally{L(!1)}},we=Ye=>new Promise((on,jt)=>{const pn=new FileReader;pn.onloadend=()=>on(pn.result),pn.onerror=jt,pn.readAsDataURL(Ye)}),Dt=Y.useMemo(()=>s.map(Ye=>({id:Ye.id,name:Ye.name,color:Ye.color})),[s]);return Q?p.jsx(gt.div,{className:"fixed bottom-0 left-0 right-0 z-[2000] p-4",initial:{y:100},animate:{y:0},exit:{y:100},children:p.jsxs("div",{className:"bg-orange-500 text-white rounded-xl shadow-xl p-4 flex items-center justify-between max-w-md mx-auto",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(BN,{size:24,className:"animate-pulse"}),p.jsxs("div",{children:[p.jsx("div",{className:"font-medium",children:"Tik op de kaart"}),p.jsx("div",{className:"text-sm opacity-90",children:"om locatie te kiezen"})]})]}),p.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors border-0 outline-none",children:"Annuleren"})]})}):p.jsx(gt.div,{className:"fixed inset-0 z-[2000] flex items-center justify-center bg-black/50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:p.jsxs(gt.div,{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-hidden flex flex-col",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},children:[p.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-5 py-4 flex justify-between items-center flex-shrink-0",children:[p.jsx("h2",{className:"text-lg font-semibold",children:"Nieuwe Vondst"}),p.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Kr,{size:20})})]}),p.jsxs("form",{onSubmit:Se,className:"flex-1 overflow-y-auto",children:[p.jsxs("div",{className:"p-5 space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Foto"}),ke?p.jsxs("div",{className:"relative",children:[p.jsx("img",{src:ke,alt:"Vondst",className:"w-full h-40 object-cover rounded-xl"}),p.jsx("button",{type:"button",onClick:Ke,className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors border-0 outline-none shadow-lg",children:p.jsx(Th,{size:16})})]}):p.jsxs("button",{type:"button",onClick:qe,className:"w-full h-32 bg-gray-50 rounded-xl flex flex-col items-center justify-center gap-2 hover:bg-gray-100 transition-colors text-gray-500 border-2 border-dashed border-gray-200",style:{outline:"none"},children:[p.jsx(CL,{size:32}),p.jsx("span",{className:"text-sm",children:"Maak een foto"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Locatie"}),ie&&p.jsxs("div",{className:"bg-orange-50 rounded-xl px-4 py-3 mb-2",children:[p.jsxs("div",{className:"text-sm text-orange-800 font-mono",children:[ie.lat.toFixed(6),"N, ",ie.lng.toFixed(6),"E"]}),p.jsx("div",{className:"text-xs text-orange-600 mt-1",children:Ne==="gps"?" GPS locatie":Ne==="map-pick"?" Gekozen op kaart":" Kaart midden"})]}),!ie&&p.jsx("div",{className:"bg-red-50 rounded-xl px-4 py-3 mb-2",children:p.jsx("div",{className:"text-sm text-red-600",children:"Geen locatie beschikbaar"})}),p.jsxs("div",{className:"flex gap-2",children:[n&&Ne!=="gps"&&p.jsxs("button",{type:"button",onClick:ve,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors border-0 outline-none",children:[p.jsx(nh,{size:16}),"GPS"]}),p.jsxs("button",{type:"button",onClick:le,className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 text-sm bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors border-0 outline-none",children:[p.jsx(BN,{size:16}),"Kies op kaart"]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opslaan naar"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Dt.map(Ye=>p.jsx("button",{type:"button",onClick:()=>U(Ye.id),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all border-0 outline-none ${V===Ye.id?"bg-gray-800 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Ye.name},Ye.id))})]}),V===Qc&&p.jsx(_F,{label:"Type vondst",value:_,onChange:b,options:["Munt","Aardewerk","Gesp","Fibula","Ring","Speld","Sieraad","Gereedschap","Wapen","Anders"],required:!0,placeholder:"Typ type vondst..."}),V!==Qc&&p.jsxs("div",{children:[p.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Naam",p.jsx("span",{className:"text-orange-500 ml-0.5",children:"*"})]}),p.jsx("input",{type:"text",value:_,onChange:Ye=>b(Ye.target.value),placeholder:"Naam van het punt...",className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"}})]}),V===Qc&&p.jsxs(p.Fragment,{children:[p.jsx(_F,{label:"Materiaal",value:T,onChange:A,options:["Brons","IJzer","Zilver","Goud","Koper","Lood","Tin","Keramiek","Steen","Glas","Bot","Hout","Leer","Onbekend"],placeholder:"Typ materiaal..."}),p.jsx(_F,{label:"Periode",value:I,onChange:P,options:["Steentijd","Bronstijd","IJzertijd","Romeins","Middeleeuws","Nieuwetijd","Modern","Onbekend"],placeholder:"Typ periode..."}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Gewicht (g)"}),p.jsx("input",{type:"number",value:C??"",onChange:Ye=>M(Ye.target.value?parseFloat(Ye.target.value):void 0),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"},min:"0",step:"0.1"})]}),p.jsxs("div",{className:"flex-1",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Lengte (mm)"}),p.jsx("input",{type:"number",value:O??"",onChange:Ye=>D(Ye.target.value?parseFloat(Ye.target.value):void 0),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all",style:{border:"none",outline:"none"},min:"0",step:"0.1"})]})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Notities"}),p.jsx("textarea",{value:g,onChange:Ye=>y(Ye.target.value),className:"w-full px-3 py-2.5 bg-gray-50 rounded-lg text-gray-700 focus:bg-white focus:ring-2 focus:ring-orange-500 transition-all resize-none h-20",style:{border:"none",outline:"none"},placeholder:"Beschrijving, context, vindplaats details..."})]}),p.jsx("div",{className:"rounded-xl px-4 py-3 bg-orange-50",children:p.jsx("p",{className:"text-sm text-orange-700",children:' Opgeslagen in "Mijn Lagen" op dit apparaat'})})]}),p.jsxs("div",{className:"p-5 pt-0 flex gap-3",children:[p.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors font-medium border-0 outline-none",children:"Annuleren"}),p.jsx("button",{type:"submit",disabled:N||!ie||Q||!_,className:"flex-1 px-4 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium border-0 outline-none",children:N?"Opslaan...":"Opslaan"})]})]})]})})}function QTt(){const{user:t,setUser:e,setLoading:n}=TO();return Y.useEffect(()=>{const s=_ue(Gy,o=>{e(o),n(!1)});return()=>s()},[e,n]),{user:t,loginAnonymous:async()=>{try{await d4e(Gy)}catch(s){console.error("Login failed:",s)}},logout:async()=>{try{await xue(Gy)}catch(s){console.error("Logout failed:",s)}},isAuthenticated:!!t}}function ekt(){const{isAuthenticated:t,loginAnonymous:e}=QTt(),n=Cn(c=>c.vondstenLocalOnly),r=Cn(c=>c.showVondstButton),i=gr(c=>c.vondstFormOpen),s=gr(c=>c.vondstFormLocation),o=gr(c=>c.openVondstForm),a=gr(c=>c.closeVondstForm);if(!r)return null;const l=()=>{if(n){o();return}if(!t){confirm("Je moet ingelogd zijn om vondsten in de cloud op te slaan. Anoniem inloggen?")&&e();return}o()};return p.jsxs(p.Fragment,{children:[p.jsx(gt.button,{className:"fixed bottom-2 right-[60px] z-[1000] w-11 h-11 bg-orange-500 hover:bg-orange-600 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none backdrop-blur-sm",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,title:"Vondst toevoegen",children:p.jsx(Ka,{size:22,strokeWidth:2})}),p.jsx(Wn,{children:i&&p.jsx(fSe,{onClose:a,initialLocation:s||void 0})})]})}function tkt(){const t=Cn(we=>we.showRouteRecordButton),e=Cn(we=>we.showVondstButton),n=gr(we=>we.toggleRouteDashboard),{state:r,startRecording:i,pauseRecording:s,resumeRecording:o,stopRecording:a,cancelRecording:l,addPoint:c,getCurrentDistance:u,getCurrentDuration:h,getAverageSpeed:f,currentPoints:g,savedRoutes:y,autoPauseEnabled:_,autoPauseSeconds:b}=Ba(),[T,A]=Y.useState(!1),[I,P]=Y.useState(""),[N,L]=Y.useState(!1),[C,M]=Y.useState(!1),O=Y.useRef(null),D=Y.useRef(null),V=Y.useRef(null),U=we=>{const Dt=Math.floor(we/1e3),Ye=Math.floor(Dt/3600),on=Math.floor(Dt%3600/60),jt=Dt%60;return Ye>0?`${Ye}:${on.toString().padStart(2,"0")}:${jt.toString().padStart(2,"0")}`:`${on}:${jt.toString().padStart(2,"0")}`},G=we=>we<1e3?`${Math.round(we)} m`:`${(we/1e3).toFixed(2)} km`,de=we=>`${we.toFixed(1)} km/h`,ke=(we,Dt,Ye,on)=>{const pn=(on-Dt)*Math.PI/180,_n=(Ye-we)*Math.PI/180,dt=Math.sin(pn/2)*Math.sin(pn/2)+Math.cos(Dt*Math.PI/180)*Math.cos(on*Math.PI/180)*Math.sin(_n/2)*Math.sin(_n/2);return 6371e3*(2*Math.atan2(Math.sqrt(dt),Math.sqrt(1-dt)))};if(Y.useEffect(()=>(r==="recording"?(M(!1),"geolocation"in navigator&&O.current===null&&(O.current=navigator.geolocation.watchPosition(we=>{const Dt=we.coords.longitude,Ye=we.coords.latitude,on=Date.now();c(Dt,Ye,we.coords.accuracy),_&&D.current?ke(D.current.lon,D.current.lat,Dt,Ye)>3?(D.current={lon:Dt,lat:Ye,time:on},V.current&&(clearTimeout(V.current),V.current=null)):on-D.current.time>=b*1e3&&(s(),M(!0),D.current=null):D.current={lon:Dt,lat:Ye,time:on}},we=>{console.error("GPS error:",we)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:1e3}))):(O.current!==null&&(navigator.geolocation.clearWatch(O.current),O.current=null),V.current&&(clearTimeout(V.current),V.current=null)),()=>{O.current!==null&&(navigator.geolocation.clearWatch(O.current),O.current=null),V.current&&(clearTimeout(V.current),V.current=null)}),[r,c,_,b,s]),!t)return null;const Ue=e?"right-[114px]":"right-[60px]",Ne=e?"right-[168px]":"right-[114px]",fe=()=>{i(),L(!0)},De=()=>{s()},Ce=()=>{o()},Q=()=>{P(`Route ${new Date().toLocaleDateString("nl-NL")}`),A(!0)},W=()=>{const we=a(I);A(!1),L(!1),P(""),we&&confirm(`Route "${we.name}" opgeslagen! (${G(we.totalDistance)})

Direct exporteren als GPX?`)&&hSe(we)},ne=()=>{g.length>2&&!confirm("Weet je zeker dat je de opname wilt annuleren? De route wordt niet opgeslagen.")||(l(),A(!1),L(!1))},ie=u(),le=h(),ve=f(),qe=we=>{switch(we){case"recording":return"bg-red-500 hover:bg-red-600";case"paused":return"bg-yellow-500 hover:bg-yellow-600";default:return"bg-green-500 hover:bg-green-600"}},Ke=we=>{switch(we){case"recording":return p.jsx(x2e,{size:22,strokeWidth:2});case"paused":return p.jsx(b2e,{size:22,strokeWidth:2});default:return p.jsx(KN,{size:22,strokeWidth:2})}},Se=()=>{switch(r){case"idle":fe();break;case"recording":De();break;case"paused":Ce();break}};return p.jsxs(p.Fragment,{children:[p.jsxs(gt.button,{className:`fixed bottom-2 ${Ue} z-[1000] w-11 h-11 ${qe(r)} text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none backdrop-blur-sm`,whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Se,title:r==="idle"?"Route opnemen":r==="recording"?"Pauzeren":"Hervatten",children:[Ke(r),r==="recording"&&p.jsx(gt.div,{className:"absolute inset-0 rounded-xl bg-red-400",animate:{opacity:[.5,0,.5]},transition:{duration:1.5,repeat:1/0}})]}),p.jsx(Wn,{children:r==="idle"&&y.length>0&&p.jsxs(gt.button,{className:`fixed bottom-2 ${Ne} z-[1000] w-11 h-11 bg-green-400 hover:bg-green-500 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none`,initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,title:`Mijn routes (${y.length})`,children:[p.jsx(v2e,{size:18,strokeWidth:2}),p.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-white text-green-600 text-xs font-bold rounded-full flex items-center justify-center shadow-sm",children:y.length})]})}),p.jsx(Wn,{children:(r==="recording"||r==="paused")&&p.jsx(gt.button,{className:`fixed bottom-2 ${Ne} z-[1000] w-11 h-11 bg-gray-700 hover:bg-gray-800 text-white rounded-xl shadow-sm flex items-center justify-center cursor-pointer border-0 outline-none`,initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Q,title:"Stoppen en opslaan",children:p.jsx(Jut,{size:18,strokeWidth:2,fill:"currentColor"})})}),p.jsx(Wn,{children:N&&r!=="idle"&&p.jsxs(gt.div,{className:"fixed bottom-16 right-2 z-[999] bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-3 min-w-[180px]",initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:r==="recording"?" Opname":C?" Auto-pauze":" Gepauzeerd"}),p.jsx("button",{onClick:()=>L(!1),className:"p-0.5 text-gray-400 hover:text-gray-600 border-0 outline-none bg-transparent",children:p.jsx(Kr,{size:14})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(up,{size:16,className:"text-green-500"}),p.jsx("span",{className:"text-lg font-semibold text-gray-800",children:G(ie)})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(UN,{size:16,className:"text-blue-500"}),p.jsx(nkt,{duration:le,recordingState:r,formatTime:U})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(zct,{size:16,className:"text-green-500"}),p.jsx("span",{className:"text-sm text-gray-600",children:de(ve)})]}),p.jsxs("div",{className:"text-xs text-gray-400 pt-1 border-t border-gray-100",children:[g.length," punten opgenomen"]})]})]})}),p.jsx(Wn,{children:T&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[1500] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>A(!1)}),p.jsxs(gt.div,{className:"fixed left-4 right-4 top-1/2 z-[1501] bg-white rounded-xl shadow-2xl p-4 max-w-sm mx-auto",initial:{opacity:0,scale:.9,y:"-40%"},animate:{opacity:1,scale:1,y:"-50%"},exit:{opacity:0,scale:.9,y:"-40%"},children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Route opslaan"}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4 space-y-1",children:[p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500",children:"Afstand:"}),p.jsx("span",{className:"font-medium",children:G(ie)})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500",children:"Duur:"}),p.jsx("span",{className:"font-medium",children:U(le)})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500",children:"Gem. snelheid:"}),p.jsx("span",{className:"font-medium",children:de(ve)})]}),p.jsxs("div",{className:"flex justify-between text-sm",children:[p.jsx("span",{className:"text-gray-500",children:"Punten:"}),p.jsx("span",{className:"font-medium",children:g.length})]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Naam van de route"}),p.jsx("input",{type:"text",value:I,onChange:we=>P(we.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Route naam...",autoFocus:!0})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:ne,className:"flex-1 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",children:"Annuleren"}),p.jsxs("button",{onClick:W,disabled:g.length<2,className:"flex-1 px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-300 text-white rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",children:[p.jsx(rq,{size:16}),"Opslaan"]})]}),g.length<2&&p.jsx("p",{className:"text-xs text-red-500 text-center mt-2",children:"Minimaal 2 punten nodig om op te slaan"})]})]})})]})}function nkt({duration:t,recordingState:e,formatTime:n}){const[r,i]=Y.useState(t);return Y.useEffect(()=>{if(e!=="recording"){i(t);return}const s=setInterval(()=>{i(o=>o+1e3)},1e3);return()=>clearInterval(s)},[e,t]),Y.useEffect(()=>{i(t)},[t]),p.jsx("span",{className:"text-lg font-semibold text-gray-800",children:n(r)})}function rkt(){const t=li(s=>s.map),{currentPoints:e,state:n}=Ba(),r=Y.useRef(null),i=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const s=new Nl;i.current=s;const o=new Ol({source:s,zIndex:999,properties:{name:"route-recording-layer"}});return r.current=o,t.addLayer(o),()=>{r.current&&t&&t.removeLayer(r.current)}},[t]),Y.useEffect(()=>{if(!i.current||(i.current.clear(),n==="idle"||e.length===0))return;const s=e.map(o=>Ni(o.coordinates));if(s.length>=2){const o=new yr({geometry:new ts(s)});o.setStyle(new vn({stroke:new Pn({color:n==="paused"?"rgba(234, 179, 8, 0.8)":"rgba(168, 85, 247, 0.8)",width:4,lineCap:"round",lineJoin:"round"})})),i.current.addFeature(o)}if(s.length>=1){const o=new yr({geometry:new Ti(s[0])});o.setStyle(new vn({image:new ms({radius:8,fill:new Dn({color:"rgba(34, 197, 94, 1)"}),stroke:new Pn({color:"white",width:2})})})),i.current.addFeature(o)}if(s.length>=1){const o=new yr({geometry:new Ti(s[s.length-1])});o.setStyle(new vn({image:new ms({radius:6,fill:new Dn({color:n==="paused"?"rgba(234, 179, 8, 1)":"rgba(168, 85, 247, 1)"}),stroke:new Pn({color:"white",width:2})})})),i.current.addFeature(o)}},[e,n]),null}const Aae=["#a855f7","#3b82f6","#22c55e","#f97316","#ec4899","#14b8a6","#eab308","#8b5cf6"];function ikt(){const t=li(s=>s.map),{savedRoutes:e,visibleRouteIds:n}=Ba(),r=Y.useRef(null),i=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const s=new Nl;i.current=s;const o=new Ol({source:s,zIndex:998,properties:{name:"saved-routes-layer"}});return r.current=o,t.addLayer(o),()=>{r.current&&t&&t.removeLayer(r.current)}},[t]),Y.useEffect(()=>{if(!i.current)return;i.current.clear(),e.filter(o=>n.has(o.id)).forEach((o,a)=>{const l=Aae[a%Aae.length],c=o.points.map(_=>Ni(_.coordinates));if(c.length<2)return;const u=new yr({geometry:new ts(c),routeId:o.id,routeName:o.name});u.setStyle(new vn({stroke:new Pn({color:l,width:4,lineCap:"round",lineJoin:"round"})})),i.current.addFeature(u);const h=new yr({geometry:new Ti(c[0]),routeId:o.id,type:"start"});h.setStyle(new vn({image:new ms({radius:8,fill:new Dn({color:"#22c55e"}),stroke:new Pn({color:"white",width:2})}),text:new pc({text:"S",font:"bold 10px sans-serif",fill:new Dn({color:"white"}),offsetY:1})})),i.current.addFeature(h);const f=new yr({geometry:new Ti(c[c.length-1]),routeId:o.id,type:"end"});f.setStyle(new vn({image:new ms({radius:8,fill:new Dn({color:"#ef4444"}),stroke:new Pn({color:"white",width:2})}),text:new pc({text:"E",font:"bold 10px sans-serif",fill:new Dn({color:"white"}),offsetY:1})})),i.current.addFeature(f);const g=Math.floor(c.length/2),y=new yr({geometry:new Ti(c[g]),routeId:o.id,type:"label"});y.setStyle(new vn({text:new pc({text:o.name,font:"12px sans-serif",fill:new Dn({color:"#1f2937"}),stroke:new Pn({color:"white",width:3}),offsetY:-15})})),i.current.addFeature(y)})},[e,n]),null}function skt(){const t=li(o=>o.map),{savedRoutes:e,visibleRouteIds:n,heatmapEnabled:r}=Ba(),i=Y.useRef(null),s=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const o=new Nl;s.current=o;const a=new cCe({source:o,blur:15,radius:10,weight:()=>1,gradient:["#00f","#0ff","#0f0","#ff0","#f00"],opacity:.6,zIndex:90});return i.current=a,t.addLayer(a),()=>{t&&i.current&&t.removeLayer(i.current)}},[t]),Y.useEffect(()=>{if(!s.current||!i.current)return;if(s.current.clear(),!r){i.current.setVisible(!1);return}const o=e.filter(l=>n.has(l.id)),a=[];for(const l of o)for(const c of l.points){const u=new yr({geometry:new Ti(Ni(c.coordinates))});a.push(u)}s.current.addFeatures(a),i.current.setVisible(a.length>0)},[e,n,r]),null}function okt(t,e,n,r){const i=[],s=e/111e3,o=e/(111e3*Math.cos(t[1]*Math.PI/180)),a=Math.floor(n/2),l=t[0]-a*o,c=t[0]+a*o,u=t[1]-a*s,h=t[1]+a*s;for(let _=-a;_<=a;_++){const b=t[0]+_*o,T=[Ni([b,u]),Ni([b,h])],A=new yr({geometry:new ts(T),type:"grid-line"});A.setStyle(new vn({stroke:new Pn({color:r,width:_===0?2:1,lineDash:_===0?void 0:[5,5]})})),i.push(A)}for(let _=-a;_<=a;_++){const b=t[1]+_*s,T=[Ni([l,b]),Ni([c,b])],A=new yr({geometry:new ts(T),type:"grid-line"});A.setStyle(new vn({stroke:new Pn({color:r,width:_===0?2:1,lineDash:_===0?void 0:[5,5]})})),i.push(A)}const f="ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=-a;_<a;_++)for(let b=-a;b<a;b++){const T=t[0]+(b+.5)*o,A=t[1]+(_+.5)*s,I=_+a,P=b+a;if(I>=0&&I<f.length){const N=`${f[I]}${P+1}`,L=new yr({geometry:new ts([Ni([T,A]),Ni([T,A])]),type:"grid-label"});L.setStyle(new vn({text:new pc({text:N,font:"12px sans-serif",fill:new Dn({color:r}),stroke:new Pn({color:"rgba(255,255,255,0.8)",width:3})})})),i.push(L)}}const g=new yr({geometry:new ts([Ni([t[0]-o*.2,t[1]]),Ni([t[0]+o*.2,t[1]])]),type:"grid-center"});g.setStyle(new vn({stroke:new Pn({color:"#ef4444",width:3})})),i.push(g);const y=new yr({geometry:new ts([Ni([t[0],t[1]-s*.2]),Ni([t[0],t[1]+s*.2])]),type:"grid-center"});return y.setStyle(new vn({stroke:new Pn({color:"#ef4444",width:3})})),i.push(y),i}function akt(){const t=li(l=>l.map),{gridEnabled:e,gridCenter:n,gridSize:r,gridCount:i,gridColor:s}=Ba(),o=Y.useRef(null),a=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const l=new Nl;a.current=l;const c=new Ol({source:l,zIndex:85,properties:{name:"grid-overlay-layer"}});return o.current=c,t.addLayer(c),()=>{o.current&&t&&t.removeLayer(o.current)}},[t]),Y.useEffect(()=>{if(!a.current||!o.current)return;if(a.current.clear(),!e||!n){o.current.setVisible(!1);return}const l=okt(n,r,i,s);a.current.addFeatures(l),o.current.setVisible(!0)},[e,n,r,i,s]),null}function lkt(t){const e=[];let n=0;return t.points.forEach((r,i)=>{if(i>0){const a=t.points[i-1],l=6371e3,c=(r.coordinates[1]-a.coordinates[1])*Math.PI/180,u=(r.coordinates[0]-a.coordinates[0])*Math.PI/180,h=Math.sin(c/2)*Math.sin(c/2)+Math.cos(a.coordinates[1]*Math.PI/180)*Math.cos(r.coordinates[1]*Math.PI/180)*Math.sin(u/2)*Math.sin(u/2),f=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));n+=l*f}const s=5,o=Math.sin(n/50)*2+Math.sin(n/120)*1.5+Math.sin(n/30+r.coordinates[0]*1e3)*.5;e.push({distance:n,elevation:Math.max(0,s+o)})}),e}function ckt({route:t,onClose:e}){const n=Y.useRef(null),[r,i]=Y.useState([]),[s,o]=Y.useState({min:0,max:0,gain:0,loss:0});Y.useEffect(()=>{const l=lkt(t);if(i(l),l.length>0){const c=l.map(y=>y.elevation),u=Math.min(...c),h=Math.max(...c);let f=0,g=0;for(let y=1;y<l.length;y++){const _=l[y].elevation-l[y-1].elevation;_>0?f+=_:g+=Math.abs(_)}o({min:u,max:h,gain:f,loss:g})}},[t]),Y.useEffect(()=>{const l=n.current;if(!l||r.length<2)return;const c=l.getContext("2d");if(!c)return;const u=l.width,h=l.height,f={top:20,right:20,bottom:30,left:40};c.fillStyle="#f9fafb",c.fillRect(0,0,u,h);const g=Math.max(...r.map(N=>N.distance)),y=Math.min(...r.map(N=>N.elevation))-1,_=Math.max(...r.map(N=>N.elevation))+1,b=N=>f.left+N/g*(u-f.left-f.right),T=N=>h-f.bottom-(N-y)/(_-y)*(h-f.top-f.bottom);c.strokeStyle="#e5e7eb",c.lineWidth=1;const A=5;for(let N=0;N<=A;N++){const L=y+(_-y)*(N/A),C=T(L);c.beginPath(),c.moveTo(f.left,C),c.lineTo(u-f.right,C),c.stroke(),c.fillStyle="#9ca3af",c.font="10px sans-serif",c.textAlign="right",c.fillText(`${L.toFixed(1)}m`,f.left-5,C+3)}const I=5;for(let N=0;N<=I;N++){const L=g/I*N,C=b(L);c.fillStyle="#9ca3af",c.font="10px sans-serif",c.textAlign="center",c.fillText(L<1e3?`${Math.round(L)}m`:`${(L/1e3).toFixed(1)}km`,C,h-10)}c.beginPath(),c.moveTo(b(r[0].distance),h-f.bottom),r.forEach(N=>{c.lineTo(b(N.distance),T(N.elevation))}),c.lineTo(b(r[r.length-1].distance),h-f.bottom),c.closePath();const P=c.createLinearGradient(0,f.top,0,h-f.bottom);P.addColorStop(0,"rgba(139, 92, 246, 0.3)"),P.addColorStop(1,"rgba(139, 92, 246, 0.05)"),c.fillStyle=P,c.fill(),c.strokeStyle="#8b5cf6",c.lineWidth=2,c.lineJoin="round",c.lineCap="round",c.beginPath(),r.forEach((N,L)=>{const C=b(N.distance),M=T(N.elevation);L===0?c.moveTo(C,M):c.lineTo(C,M)}),c.stroke()},[r]);const a=l=>l<1e3?`${Math.round(l)} m`:`${(l/1e3).toFixed(2)} km`;return p.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed inset-4 z-[1700] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[70vh]",children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-purple-500 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(W2,{size:20}),p.jsx("span",{className:"font-medium",children:"Hoogteprofiel"})]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-purple-400/50 hover:bg-purple-400 transition-colors border-0 outline-none",children:p.jsx(Kr,{size:18})})]}),p.jsxs("div",{className:"px-4 py-2 bg-purple-50 border-b border-purple-100",children:[p.jsx("h3",{className:"font-medium text-gray-800 truncate",children:t.name}),p.jsx("p",{className:"text-xs text-gray-500",children:a(t.totalDistance)})]}),p.jsxs("div",{className:"grid grid-cols-4 gap-2 p-3 border-b border-gray-100",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"flex items-center justify-center text-blue-500 mb-1",children:p.jsx(_2e,{size:14})}),p.jsx("div",{className:"text-xs text-gray-500",children:"Min"}),p.jsxs("div",{className:"text-sm font-medium",children:[s.min.toFixed(1),"m"]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"flex items-center justify-center text-purple-500 mb-1",children:p.jsx(W2,{size:14})}),p.jsx("div",{className:"text-xs text-gray-500",children:"Max"}),p.jsxs("div",{className:"text-sm font-medium",children:[s.max.toFixed(1),"m"]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"flex items-center justify-center text-green-500 mb-1",children:p.jsx(pht,{size:14})}),p.jsx("div",{className:"text-xs text-gray-500",children:"Stijging"}),p.jsxs("div",{className:"text-sm font-medium",children:[s.gain.toFixed(1),"m"]})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"flex items-center justify-center text-red-500 mb-1",children:p.jsx(dht,{size:14})}),p.jsx("div",{className:"text-xs text-gray-500",children:"Daling"}),p.jsxs("div",{className:"text-sm font-medium",children:[s.loss.toFixed(1),"m"]})]})]}),p.jsx("div",{className:"flex-1 p-3",children:p.jsx("canvas",{ref:n,width:350,height:200,className:"w-full h-full"})}),p.jsx("div",{className:"px-4 py-2 bg-yellow-50 border-t border-yellow-100",children:p.jsxs("p",{className:"text-xs text-yellow-700",children:[p.jsx("strong",{children:"Let op:"})," Dit zijn gesimuleerde hoogtewaarden. Koppeling met AHN-data komt binnenkort."]})})]})}const ukt=t=>t<1e3?`${Math.round(t)} m`:`${(t/1e3).toFixed(2)} km`,hkt=t=>{const e=Math.floor(t/1e3),n=Math.floor(e/3600),r=Math.floor(e%3600/60);return n>0?`${n}u ${r}m`:`${r} min`},Iae=t=>new Date(t).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});function dkt({route:t,onClose:e}){const{updateRouteNotes:n,addPhotoToRoute:r,removePhotoFromRoute:i}=Ba(),[s,o]=Y.useState(t.notes||""),[a,l]=Y.useState("info"),c=Y.useRef(null),u=()=>{n(t.id,s)},h=async y=>{const _=y.target.files?.[0];if(!_)return;const b=URL.createObjectURL(_);r(t.id,{url:b,caption:_.name}),c.current&&(c.current.value="")},f=y=>{confirm("Foto verwijderen?")&&i(t.id,y)},g=Ba(y=>y.savedRoutes.find(_=>_.id===t.id))||t;return p.jsxs(gt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[1700] flex items-center justify-center p-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:e}),p.jsxs(gt.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},className:"relative bg-white rounded-xl shadow-2xl overflow-hidden w-full max-w-md max-h-[85vh] flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-purple-500 text-white",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:"font-medium truncate",children:g.name}),p.jsx("p",{className:"text-xs text-purple-200",children:Iae(g.createdAt)})]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-purple-400/50 hover:bg-purple-400 transition-colors border-0 outline-none ml-2",children:p.jsx(Kr,{size:18})})]}),p.jsxs("div",{className:"flex border-b border-gray-200",children:[p.jsxs("button",{onClick:()=>l("info"),className:`flex-1 py-2 text-sm font-medium border-0 outline-none transition-colors ${a==="info"?"text-purple-600 border-b-2 border-purple-500":"text-gray-500 hover:text-gray-700"}`,children:[p.jsx(Ka,{size:16,className:"inline mr-1"}),"Info"]}),p.jsxs("button",{onClick:()=>l("photos"),className:`flex-1 py-2 text-sm font-medium border-0 outline-none transition-colors ${a==="photos"?"text-purple-600 border-b-2 border-purple-500":"text-gray-500 hover:text-gray-700"}`,children:[p.jsx(CL,{size:16,className:"inline mr-1"}),"Foto's (",g.photos?.length||0,")"]}),p.jsxs("button",{onClick:()=>l("notes"),className:`flex-1 py-2 text-sm font-medium border-0 outline-none transition-colors ${a==="notes"?"text-purple-600 border-b-2 border-purple-500":"text-gray-500 hover:text-gray-700"}`,children:[p.jsx(QH,{size:16,className:"inline mr-1"}),"Notities"]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a==="info"&&p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-purple-600 mb-1",children:[p.jsx(up,{size:16}),p.jsx("span",{className:"text-xs text-gray-500",children:"Afstand"})]}),p.jsx("p",{className:"text-lg font-semibold",children:ukt(g.totalDistance)})]}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[p.jsx(UN,{size:16}),p.jsx("span",{className:"text-xs text-gray-500",children:"Duur"})]}),p.jsx("p",{className:"text-lg font-semibold",children:hkt(g.totalDuration)})]})]}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[p.jsx(Ka,{size:16}),p.jsx("span",{className:"text-xs text-gray-500",children:"Punten"})]}),p.jsxs("p",{className:"text-lg font-semibold",children:[g.points.length," GPS punten"]})]}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[p.jsxs("div",{className:"flex items-center gap-2 text-orange-600 mb-1",children:[p.jsx(XH,{size:16}),p.jsx("span",{className:"text-xs text-gray-500",children:"Aangemaakt"})]}),p.jsx("p",{className:"text-sm",children:Iae(g.createdAt)})]})]}),a==="photos"&&p.jsxs("div",{className:"space-y-4",children:[p.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:h,className:"hidden"}),p.jsxs("button",{onClick:()=>c.current?.click(),className:"w-full py-8 border-2 border-dashed border-purple-300 rounded-lg text-purple-500 hover:bg-purple-50 transition-colors flex flex-col items-center gap-2",children:[p.jsx(Ec,{size:24}),p.jsx("span",{className:"text-sm",children:"Foto toevoegen"})]}),g.photos&&g.photos.length>0?p.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.photos.map(y=>p.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden bg-gray-100",children:[p.jsx("img",{src:y.url,alt:y.caption||"Route foto",className:"w-full h-full object-cover"}),p.jsx("button",{onClick:()=>f(y.id),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors border-0 outline-none",children:p.jsx(Th,{size:12})}),y.caption&&p.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-2 py-1 bg-black/50 text-white text-xs truncate",children:y.caption})]},y.id))}):p.jsx("p",{className:"text-center text-gray-400 text-sm py-4",children:"Nog geen foto's toegevoegd"})]}),a==="notes"&&p.jsxs("div",{className:"space-y-4",children:[p.jsx("textarea",{value:s,onChange:y=>o(y.target.value),placeholder:"Voeg notities toe over deze route...",className:"w-full h-48 p-3 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"}),p.jsx("button",{onClick:u,className:"w-full px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg transition-colors border-0 outline-none",children:"Notities opslaan"})]})]})]})]})}function fkt({route:t,size:e=80}){const n=Y.useRef(null);return Y.useEffect(()=>{const r=n.current;if(!r||t.points.length<2)return;const i=r.getContext("2d");if(!i)return;i.fillStyle="#f3f4f6",i.fillRect(0,0,e,e);const s=t.points.map(P=>P.coordinates[0]),o=t.points.map(P=>P.coordinates[1]),a=Math.min(...s),l=Math.max(...s),c=Math.min(...o),u=Math.max(...o),h=8,f=e-h*2,g=e-h*2,y=P=>l===a?e/2:h+(P-a)/(l-a)*f,_=P=>u===c?e/2:h+g-(P-c)/(u-c)*g;i.strokeStyle="#a855f7",i.lineWidth=2,i.lineCap="round",i.lineJoin="round",i.beginPath(),t.points.forEach((P,N)=>{const L=y(P.coordinates[0]),C=_(P.coordinates[1]);N===0?i.moveTo(L,C):i.lineTo(L,C)}),i.stroke();const b=y(t.points[0].coordinates[0]),T=_(t.points[0].coordinates[1]);i.fillStyle="#22c55e",i.beginPath(),i.arc(b,T,4,0,Math.PI*2),i.fill();const A=y(t.points[t.points.length-1].coordinates[0]),I=_(t.points[t.points.length-1].coordinates[1]);i.fillStyle="#ef4444",i.beginPath(),i.arc(A,I,4,0,Math.PI*2),i.fill()},[t,e]),t.points.length<2?p.jsx("div",{className:"bg-gray-100 rounded flex items-center justify-center text-gray-400",style:{width:e,height:e},children:p.jsx(Ka,{size:20})}):p.jsx("canvas",{ref:n,width:e,height:e,className:"rounded"})}const xF=t=>t<1e3?`${Math.round(t)} m`:`${(t/1e3).toFixed(2)} km`,wF=t=>{const e=Math.floor(t/1e3),n=Math.floor(e/3600),r=Math.floor(e%3600/60);return n>0?`${n}u ${r}m`:`${r} min`},Pae=t=>new Date(t).toLocaleDateString("nl-NL",{day:"numeric",month:"short",year:"numeric"});function pkt({isOpen:t,onClose:e,onViewRoute:n}){const{savedRoutes:r,deleteRoute:i,renameRoute:s,clearAllRoutes:o,visibleRouteIds:a,toggleRouteVisibility:l,showAllRoutes:c,hideAllRoutes:u,heatmapEnabled:h,toggleHeatmap:f,gridEnabled:g,toggleGrid:y,centerGridOnCurrentLocation:_,gridSize:b,setGridSize:T,autoPauseEnabled:A,setAutoPauseEnabled:I,autoPauseSeconds:P,setAutoPauseSeconds:N,importRouteFromGPX:L}=Ba(),[C,M]=Y.useState(null),[O,D]=Y.useState(""),[V,U]=Y.useState(!1),[G,de]=Y.useState(!1),[ke,Ue]=Y.useState(null),[Ne,fe]=Y.useState(null),De=Y.useRef(null),Ce=async Se=>{const we=` ${Se.name}

 Afstand: ${xF(Se.totalDistance)}
 Duur: ${wF(Se.totalDuration)}
 ${Se.points.length} GPS punten
 ${Pae(Se.createdAt)}

Opgenomen met DetectorApp NL`;if(navigator.share)try{await navigator.share({title:Se.name,text:we});return}catch(Dt){Dt.name!=="AbortError"&&console.error("Share failed:",Dt)}try{await navigator.clipboard.writeText(we),alert("Route info gekopieerd naar klembord!")}catch{prompt("Kopieer de route info:",we)}},Q=async Se=>{const we=Se.target.files?.[0];if(we){try{const Dt=await we.text(),Ye=L(Dt,we.name.replace(".gpx",""));Ye.success?alert(`Route gemporteerd: ${we.name}`):alert(`Import mislukt: ${Ye.error}`)}catch{alert("Fout bij lezen van bestand")}De.current&&(De.current.value="")}},W=Se=>{M(Se.id),D(Se.name)},ne=Se=>{O.trim()&&s(Se,O.trim()),M(null),D("")},ie=Se=>{confirm(`Weet je zeker dat je "${Se.name}" wilt verwijderen?`)&&i(Se.id)},le=()=>{r.length!==0&&confirm(`Weet je zeker dat je alle ${r.length} routes wilt verwijderen? Dit kan niet ongedaan worden gemaakt.`)&&o()},ve=Se=>{l(Se);const we=r.find(Dt=>Dt.id===Se);we&&n&&n(we)},qe=r.reduce((Se,we)=>Se+we.totalDistance,0),Ke=r.reduce((Se,we)=>Se+we.totalDuration,0);return p.jsxs(p.Fragment,{children:[p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[1600] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsxs(gt.div,{className:"fixed inset-4 z-[1601] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-md mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-purple-500 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(KN,{size:20}),p.jsx("span",{className:"font-medium",children:"Mijn Routes"}),p.jsxs("span",{className:"text-purple-200 text-sm",children:["(",r.length,")"]})]}),p.jsx("button",{onClick:e,className:"p-1 rounded bg-purple-400/50 hover:bg-purple-400 transition-colors border-0 outline-none",children:p.jsx(Kr,{size:18})})]}),r.length>0&&p.jsxs("div",{className:"px-4 py-2 bg-purple-50 border-b border-purple-100 flex items-center justify-between text-sm",children:[p.jsxs("div",{className:"flex gap-4",children:[p.jsxs("div",{className:"flex items-center gap-1.5 text-purple-700",children:[p.jsx(up,{size:14}),p.jsxs("span",{children:["Totaal: ",xF(qe)]})]}),p.jsxs("div",{className:"flex items-center gap-1.5 text-purple-700",children:[p.jsx(UN,{size:14}),p.jsx("span",{children:wF(Ke)})]})]}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx("button",{onClick:()=>de(!G),className:`px-2 py-1 text-xs rounded transition-colors border-0 outline-none ${A?"bg-green-100 text-green-600":"text-purple-600 hover:bg-purple-100"}`,title:A?"Auto-pauze uit":"Auto-pauze aan",children:p.jsx(aht,{size:14})}),p.jsx("button",{onClick:()=>U(!V),className:`px-2 py-1 text-xs rounded transition-colors border-0 outline-none ${g?"bg-blue-100 text-blue-600":"text-purple-600 hover:bg-purple-100"}`,title:g?"Grid verbergen":"Grid tonen",children:p.jsx(m2e,{size:14})}),p.jsx("button",{onClick:f,className:`px-2 py-1 text-xs rounded transition-colors border-0 outline-none ${h?"bg-orange-100 text-orange-600":"text-purple-600 hover:bg-purple-100"}`,title:h?"Heatmap verbergen":"Heatmap tonen",children:p.jsx(Rct,{size:14})}),p.jsx("button",{onClick:c,className:"px-2 py-1 text-xs text-purple-600 hover:bg-purple-100 rounded transition-colors border-0 outline-none",title:"Alle tonen",children:p.jsx(bA,{size:14})}),p.jsx("button",{onClick:u,className:"px-2 py-1 text-xs text-purple-600 hover:bg-purple-100 rounded transition-colors border-0 outline-none",title:"Alle verbergen",children:p.jsx(WN,{size:14})})]})]}),p.jsx(Wn,{children:V&&p.jsx(gt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden border-b border-purple-100",children:p.jsxs("div",{className:"px-4 py-3 bg-blue-50 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Grid Assistent"}),p.jsx("button",{onClick:y,className:`px-3 py-1 text-xs rounded-full transition-colors border-0 outline-none ${g?"bg-blue-500 text-white":"bg-blue-200 text-blue-700"}`,children:g?"Aan":"Uit"})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsxs("button",{onClick:_,className:"flex-1 px-3 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",children:[p.jsx(BN,{size:14}),"Centreer op mijn locatie"]})}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("label",{className:"text-xs text-blue-700",children:["Celgrootte: ",b,"m"]}),p.jsx("input",{type:"range",min:"5",max:"50",step:"5",value:b,onChange:Se=>T(Number(Se.target.value)),className:"w-full h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer"}),p.jsxs("div",{className:"flex justify-between text-xs text-blue-600",children:[p.jsx("span",{children:"5m"}),p.jsx("span",{children:"50m"})]})]}),p.jsx("p",{className:"text-xs text-blue-600",children:"Gebruik het grid om systematisch een veld af te zoeken. Elk vak heeft een label (A1, B2, etc.) voor referentie."})]})})}),p.jsx(Wn,{children:G&&p.jsx(gt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden border-b border-purple-100",children:p.jsxs("div",{className:"px-4 py-3 bg-green-50 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{className:"text-sm font-medium text-green-800",children:"Auto-pauze"}),p.jsx("button",{onClick:()=>I(!A),className:`px-3 py-1 text-xs rounded-full transition-colors border-0 outline-none ${A?"bg-green-500 text-white":"bg-green-200 text-green-700"}`,children:A?"Aan":"Uit"})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("label",{className:"text-xs text-green-700",children:["Pauze na: ",P<60?`${P}s`:`${Math.floor(P/60)}m ${P%60}s`]}),p.jsx("input",{type:"range",min:"30",max:"300",step:"30",value:P,onChange:Se=>N(Number(Se.target.value)),className:"w-full h-2 bg-green-200 rounded-lg appearance-none cursor-pointer"}),p.jsxs("div",{className:"flex justify-between text-xs text-green-600",children:[p.jsx("span",{children:"30s"}),p.jsx("span",{children:"5min"})]})]}),p.jsxs("p",{className:"text-xs text-green-600",children:["De opname pauzeert automatisch als je langer dan ",P<60?`${P} seconden`:`${Math.floor(P/60)} minuten`," stilstaat. Ideaal voor pauzes tijdens het detecteren."]})]})})}),p.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:r.length===0?p.jsxs("div",{className:"text-center py-12 text-gray-500",children:[p.jsx(KN,{size:48,className:"mx-auto mb-3 text-gray-300"}),p.jsx("p",{className:"font-medium",children:"Nog geen routes"}),p.jsx("p",{className:"text-sm mt-1",children:"Start een opname om je eerste route vast te leggen"})]}):r.map(Se=>p.jsxs(gt.div,{layout:!0,className:"bg-gray-50 rounded-lg p-3 flex gap-3",children:[p.jsx(fkt,{route:Se,size:70}),p.jsxs("div",{className:"flex-1 min-w-0",children:[C===Se.id?p.jsx("input",{type:"text",value:O,onChange:we=>D(we.target.value),onKeyDown:we=>{we.key==="Enter"&&ne(Se.id),we.key==="Escape"&&M(null)},onBlur:()=>ne(Se.id),className:"w-full px-2 py-1 text-sm bg-white border border-purple-300 rounded outline-none focus:ring-2 focus:ring-purple-400",autoFocus:!0}):p.jsx("h3",{className:"font-medium text-gray-800 truncate",children:Se.name}),p.jsx("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-500",children:p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(XH,{size:12}),Pae(Se.createdAt)]})}),p.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-gray-600",children:[p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(up,{size:12}),xF(Se.totalDistance)]}),p.jsxs("span",{className:"flex items-center gap-1",children:[p.jsx(UN,{size:12}),wF(Se.totalDuration)]}),p.jsxs("span",{children:[Se.points.length," punten"]})]})]}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("button",{onClick:()=>ve(Se.id),className:`p-1.5 rounded transition-colors border-0 outline-none ${a.has(Se.id)?"bg-purple-100 text-purple-600":"text-gray-400 hover:text-purple-600 hover:bg-purple-50"}`,title:a.has(Se.id)?"Verbergen op kaart":"Tonen op kaart",children:a.has(Se.id)?p.jsx(bA,{size:16}):p.jsx(WN,{size:16})}),p.jsx("button",{onClick:()=>W(Se),className:"p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam wijzigen",children:p.jsx(Sp,{size:16})}),p.jsx("button",{onClick:()=>fe(Se),className:"p-1.5 text-gray-400 hover:text-cyan-600 hover:bg-cyan-50 rounded transition-colors border-0 outline-none",title:"Details & foto's",children:p.jsx(tq,{size:16})}),p.jsx("button",{onClick:()=>Ue(Se),className:"p-1.5 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none",title:"Hoogteprofiel",children:p.jsx(W2,{size:16})}),p.jsx("button",{onClick:()=>Ce(Se),className:"p-1.5 text-gray-400 hover:text-pink-600 hover:bg-pink-50 rounded transition-colors border-0 outline-none",title:"Delen",children:p.jsx(zut,{size:16})}),p.jsx("button",{onClick:()=>hSe(Se),className:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Exporteer als GPX",children:p.jsx(wA,{size:16})}),p.jsx("button",{onClick:()=>ie(Se),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors border-0 outline-none",title:"Verwijderen",children:p.jsx(Th,{size:16})})]})]},Se.id))}),p.jsxs("div",{className:"px-4 py-3 border-t border-gray-100 space-y-2",children:[p.jsx("input",{ref:De,type:"file",accept:".gpx",onChange:Q,className:"hidden"}),p.jsxs("button",{onClick:()=>De.current?.click(),className:"w-full px-3 py-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors border-0 outline-none text-sm flex items-center justify-center gap-2",children:[p.jsx(KI,{size:16}),"GPX bestand importeren"]}),r.length>0&&p.jsx("button",{onClick:le,className:"w-full px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none text-sm",children:"Alle routes verwijderen"})]})]})]})}),p.jsx(Wn,{children:ke&&p.jsx(ckt,{route:ke,onClose:()=>Ue(null)})}),p.jsx(Wn,{children:Ne&&p.jsx(dkt,{route:Ne,onClose:()=>fe(null)})})]})}const bF={lat:52.1326,lon:5.2913};function pSe({code:t,size:e=18}){return t===0?p.jsx(tht,{size:e,className:"text-yellow-500"}):t>=1&&t<=3?p.jsx(zd,{size:e,className:"text-gray-400"}):t===45||t===48?p.jsx(cct,{size:e,className:"text-gray-400"}):t>=51&&t<=67||t>=80&&t<=82?p.jsx(ZH,{size:e,className:"text-blue-500"}):t>=71&&t<=77||t>=85&&t<=86?p.jsx(gct,{size:e,className:"text-cyan-500"}):t>=95?p.jsx(hct,{size:e,className:"text-purple-500"}):p.jsx(zd,{size:e,className:"text-gray-400"})}function mkt({degrees:t,size:e=14}){return p.jsx("div",{style:{transform:`rotate(${t+180}deg)`},className:"inline-flex",children:p.jsx(nh,{size:e,className:"text-blue-500"})})}function gkt({data:t}){if(!t||t.length===0)return null;const e=Math.max(...t.map(r=>r.precipitation),.5),n=t.some(r=>r.precipitation>0);return p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("span",{style:{fontSize:"0.83em"},className:"text-gray-500",children:"Neerslag 2 uur"}),!n&&p.jsx("span",{style:{fontSize:"0.83em"},className:"text-green-600 font-medium",children:"Droog"})]}),p.jsxs("div",{className:"relative h-8 bg-gray-100 rounded-lg overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 flex items-end px-0.5",children:t.map((r,i)=>{const s=r.precipitation/e*100,o=r.precipitation>2?"bg-blue-600":r.precipitation>.5?"bg-blue-500":r.precipitation>0?"bg-blue-400":"bg-transparent";return p.jsx("div",{className:"flex-1 mx-px",children:p.jsx("div",{className:`w-full rounded-t transition-all ${o}`,style:{height:`${Math.max(s,r.precipitation>0?8:0)}%`}})},i)})}),p.jsxs("div",{className:"absolute bottom-0 left-0 right-0 flex justify-between px-1 text-gray-400",style:{fontSize:"0.67em"},children:[p.jsx("span",{children:"Nu"}),p.jsx("span",{children:"+1u"}),p.jsx("span",{children:"+2u"})]})]})]})}function ykt({pollen:t}){const e=[{name:"Gras",value:t.grass},{name:"Berk",value:t.birch},{name:"Els",value:t.alder},{name:"Bijvoet",value:t.mugwort}].filter(i=>i.value>0).sort((i,s)=>s.value-i.value);if(e.length===0)return p.jsxs("div",{className:"flex items-center gap-1.5 text-green-600",style:{fontSize:"0.83em"},children:[p.jsx(noe,{size:12}),p.jsx("span",{children:"Lage pollenconcentratie"})]});const n=e[0],r=n.value>=4?"text-red-500":n.value>=3?"text-orange-500":n.value>=2?"text-amber-500":"text-green-600";return p.jsxs("div",{className:`flex items-center gap-1.5 ${r}`,style:{fontSize:"0.83em"},children:[p.jsx(noe,{size:12}),p.jsxs("span",{children:[n.name,": ",n.value>=4?"Zeer hoog":n.value>=3?"Hoog":n.value>=2?"Matig":"Laag"]})]})}function vkt({hourly:t}){const e=t.slice(0,6);return e.length===0?null:p.jsxs("div",{className:"space-y-1",children:[p.jsx("div",{className:"text-gray-500",style:{fontSize:"0.83em"},children:"Komende uren"}),p.jsx("div",{className:"flex gap-1",children:e.map((n,r)=>{const i=new Date(n.time),s=r===0;return p.jsxs("div",{className:`flex flex-col items-center p-1.5 rounded-lg flex-1 ${s?"bg-blue-100":"bg-gray-50"}`,children:[p.jsx("span",{className:"text-gray-500",style:{fontSize:"0.75em"},children:s?"Nu":`${i.getHours()}u`}),p.jsx(pSe,{code:n.weatherCode,size:14}),p.jsxs("span",{className:"font-medium",style:{fontSize:"0.83em"},children:[Math.round(n.temperature),""]})]},n.time)})})]})}function _kt(){const t=Cn(_=>_.showWeatherButton),e=Cn(_=>_.showFontSliders),n=Cn(_=>_.weatherFontScale),r=Cn(_=>_.setWeatherFontScale),i=ks(),s=pT(),[o,a]=Y.useState(!1),l=12*n/100,c=pT(_=>_.showBuienradar),u=pT(_=>_.setShowBuienradar);if(Y.useEffect(()=>{c&&a(!1)},[c]),Y.useEffect(()=>{if(!t)return;const _=i.position||bF;(!s.weatherData||Date.now()-s.weatherData.lastUpdated>600*1e3)&&s.fetchWeather(_.lat,_.lon)},[t,i.position?.lat]),Y.useEffect(()=>{if(!t)return;const _=setInterval(()=>{const b=i.position||bF;s.fetchWeather(b.lat,b.lon)},600*1e3);return()=>clearInterval(_)},[t,i.position?.lat]),!t)return null;const h=s.weatherData?.current,f=s.weatherData?.hourly||[],g=s.weatherData?.precipitation15min||[],y=s.weatherData?.pollen;return p.jsxs(p.Fragment,{children:[o&&p.jsx("div",{className:"fixed inset-0 z-[1099]",onClick:()=>a(!1)}),p.jsx(gt.div,{className:"fixed left-2 z-[1100] bg-white shadow-lg border border-gray-200 select-none rounded-xl",style:{top:"max(0.5rem, env(safe-area-inset-top, 0.5rem))",width:o?"200px":"auto",maxWidth:"200px"},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},layout:!0,children:s.isLoading&&!h?p.jsxs("div",{className:"p-3 flex items-center gap-2",style:{fontSize:`${l}px`},children:[p.jsx(Aut,{size:16,className:"animate-spin text-blue-500"}),p.jsx("span",{className:"text-gray-500",style:{fontSize:"1.17em"},children:"Laden..."})]}):h?p.jsxs("div",{className:"p-2.5",style:{fontSize:`${l}px`},children:[p.jsxs("button",{onClick:()=>a(!o),className:"w-full border-0 outline-none bg-transparent p-0",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(pSe,{code:h.weatherCode,size:24}),p.jsx("div",{className:"flex flex-col leading-tight",children:p.jsxs("span",{className:"font-bold text-gray-800",style:{fontSize:"1.5em"},children:[Math.round(h.temperature),""]})})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(soe,{size:14,className:"text-gray-400"}),p.jsx("span",{className:"text-gray-600",style:{fontSize:"1.17em"},children:Math.round(h.windSpeed)}),p.jsx(mkt,{degrees:h.windDirection,size:12})]}),p.jsx("div",{className:"ml-auto",children:o?p.jsx(RL,{size:16,className:"text-gray-400"}):p.jsx(Ib,{size:16,className:"text-gray-400"})})]}),p.jsxs("div",{className:"text-gray-500 text-left mt-1",style:{fontSize:"0.92em"},children:[QDe[h.weatherCode]||"Onbekend",p.jsxs("span",{className:"text-gray-400 ml-1",children:[" ",Math.round(h.apparentTemperature),""]})]})]}),p.jsx(Wn,{children:o&&p.jsx(gt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:p.jsxs("div",{className:"pt-2 mt-2 border-t border-gray-200/50 space-y-3",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[p.jsx(Sct,{size:12,className:"text-blue-500"}),p.jsx("span",{children:"Vocht"})]}),p.jsxs("div",{className:"font-bold text-blue-600",style:{fontSize:"1.17em"},children:[h.humidity,"%"]})]}),p.jsxs("div",{className:"bg-gray-50 rounded-lg p-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[p.jsx(soe,{size:12,className:"text-gray-500"}),p.jsx("span",{children:"Windstoten"})]}),p.jsxs("div",{className:"font-bold text-gray-600",style:{fontSize:"1.17em"},children:[Math.round(h.windGusts)," km/u"]})]}),p.jsxs("div",{className:"bg-cyan-50 rounded-lg p-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[p.jsx(nh,{size:12,className:"text-cyan-500"}),p.jsx("span",{children:"Wind"})]}),p.jsx("div",{className:"font-bold text-cyan-600",style:{fontSize:"1.17em"},children:e6e(h.windDirection)})]}),p.jsxs("div",{className:"bg-purple-50 rounded-lg p-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-gray-500",style:{fontSize:"0.83em"},children:[p.jsx(zd,{size:12,className:"text-purple-500"}),p.jsx("span",{children:"Bewolking"})]}),p.jsxs("div",{className:"font-bold text-purple-600",style:{fontSize:"1.17em"},children:[h.cloudCover,"%"]})]})]}),p.jsxs("button",{onClick:()=>u(!c),className:`w-full flex items-center gap-2 p-2 rounded-lg transition-colors border-0 cursor-pointer ${c?"bg-blue-500 hover:bg-blue-600":"bg-blue-50 hover:bg-blue-100"}`,children:[p.jsx(ZH,{size:16,className:c?"text-white":"text-blue-500"}),p.jsx("span",{className:`font-medium ${c?"text-white":"text-blue-700"}`,style:{fontSize:"1.17em"},children:"Buienradar"}),p.jsx("span",{className:`ml-auto ${c?"text-blue-100":"text-blue-500"}`,style:{fontSize:"1em"},children:c?"Aan":"Uit"})]}),g.length>0&&p.jsx(gkt,{data:g}),f.length>0&&p.jsx(vkt,{hourly:f}),y&&p.jsx(ykt,{pollen:y}),p.jsxs("div",{className:"text-gray-400 text-center pt-1",style:{fontSize:"0.75em"},children:["Bijgewerkt: ",new Date(s.weatherData.lastUpdated).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"})]}),e&&p.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-gray-200/50",children:[p.jsx(iq,{size:12,className:"text-gray-400"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:n,onChange:_=>r(parseInt(_.target.value)),className:"flex-1 h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),p.jsxs("span",{className:"text-gray-400 w-8",style:{fontSize:"0.83em"},children:[n,"%"]})]})]})})})]}):p.jsxs("button",{onClick:()=>{const _=i.position||bF;s.fetchWeather(_.lat,_.lon)},className:"p-3 flex items-center gap-2 border-0 outline-none bg-transparent",style:{fontSize:`${l}px`},children:[p.jsx(zd,{size:18,className:"text-gray-400"}),p.jsx("span",{className:"text-gray-500",style:{fontSize:"1.17em"},children:"Weer laden"})]})})]})}function xkt({isVisible:t,onClose:e}){const n=li(N=>N.map),r=Y.useRef(null),i=Y.useRef(null),[s,o]=Y.useState([]),[a,l]=Y.useState(0),[c,u]=Y.useState(!0),[h,f]=Y.useState(!0),[g,y]=Y.useState("normal"),[_,b]=Y.useState(70),T=g==="slow"?800:g==="normal"?500:250,A=Y.useCallback(async()=>{f(!0);try{const L=await(await fetch("https://api.rainviewer.com/public/weather-maps.json")).json(),C=[];L.radar?.past&&L.radar.past.forEach(O=>{C.push({path:O.path,time:O.time*1e3})}),L.radar?.nowcast&&L.radar.nowcast.forEach(O=>{C.push({path:O.path,time:O.time*1e3})}),o(C);const M=L.radar?.past?.length?L.radar.past.length-1:0;l(M)}catch(N){console.error("Failed to fetch radar data:",N)}finally{f(!1)}},[]);Y.useEffect(()=>{if(t){A();const N=setInterval(A,300*1e3);return()=>clearInterval(N)}},[t,A]),Y.useEffect(()=>{if(!n||!t||s.length===0)return;const N=s[a];if(!N)return;const L=`https://tilecache.rainviewer.com${N.path}/256/{z}/{x}/{y}/2/1_1.png`;if(r.current){const C=r.current.getSource();C&&(C.setUrl(L),C.refresh())}else{const C=new Ty({url:L,crossOrigin:"anonymous"}),M=new $m({source:C,opacity:_/100,zIndex:1500,properties:{name:"rain-radar-layer",title:"Buienradar"}});r.current=M,n.addLayer(M)}return()=>{}},[n,t,s,a]),Y.useEffect(()=>{r.current&&r.current.setOpacity(_/100)},[_]),Y.useEffect(()=>{!t&&r.current&&n&&(n.removeLayer(r.current),r.current=null)},[t,n]),Y.useEffect(()=>()=>{r.current&&n&&(n.removeLayer(r.current),r.current=null),i.current&&clearInterval(i.current)},[n]),Y.useEffect(()=>{if(!c||s.length===0||!t){i.current&&(clearInterval(i.current),i.current=null);return}return i.current=setInterval(()=>{l(N=>(N+1)%s.length)},T),()=>{i.current&&(clearInterval(i.current),i.current=null)}},[c,s.length,T,t]);const I=Y.useCallback(()=>{if(s.length===0||!s[a])return"--:--";const N=s[a].time,L=Date.now(),C=Math.round((N-L)/6e4),O=new Date(N).toLocaleTimeString("nl-NL",{hour:"2-digit",minute:"2-digit"});return Math.abs(C)<3?`${O} (nu)`:C<0?`${O} (${C}m)`:`${O} (+${C}m)`},[s,a]),P=N=>{u(!1),l(L=>N==="prev"?L>0?L-1:s.length-1:(L+1)%s.length)};return t?p.jsx(Wn,{children:p.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"fixed bottom-4 left-2 right-2 z-[1600] bg-white/95 backdrop-blur-sm rounded-xl shadow-xl border border-gray-200",style:{maxWidth:"400px",margin:"0 auto"},children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 border-b border-gray-100",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(ZH,{size:14,className:"text-blue-500"}),p.jsx("span",{className:"text-xs font-medium text-gray-700",children:h?"Laden...":I()})]}),p.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded transition-colors border-0 outline-none bg-transparent",children:p.jsx(Kr,{size:14,className:"text-gray-500"})})]}),p.jsxs("div",{className:"px-3 py-2 flex items-center gap-2",children:[p.jsxs("div",{className:"flex items-center gap-0.5",children:[p.jsx("button",{onClick:()=>P("prev"),className:"p-1.5 hover:bg-gray-100 rounded transition-colors border-0 outline-none bg-transparent",children:p.jsx(f2e,{size:14,className:"text-gray-600"})}),p.jsx("button",{onClick:()=>u(!c),className:`p-1.5 rounded transition-colors border-0 outline-none ${c?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:c?p.jsx(x2e,{size:14}):p.jsx(b2e,{size:14})}),p.jsx("button",{onClick:()=>P("next"),className:"p-1.5 hover:bg-gray-100 rounded transition-colors border-0 outline-none bg-transparent",children:p.jsx(_d,{size:14,className:"text-gray-600"})})]}),p.jsxs("div",{className:"flex-1 flex items-center gap-1",children:[p.jsx("span",{className:"text-[9px] text-gray-400 w-6",children:"-2u"}),p.jsx("input",{type:"range",min:"0",max:Math.max(0,s.length-1),value:a,onChange:N=>{u(!1),l(parseInt(N.target.value))},className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),p.jsx("span",{className:"text-[9px] text-gray-400 w-8 text-right",children:"+30m"})]}),p.jsx("div",{className:"flex items-center gap-0.5 bg-gray-100 rounded p-0.5",children:["slow","normal","fast"].map(N=>p.jsxs("button",{onClick:()=>y(N),className:`px-1.5 py-0.5 text-[9px] rounded transition-colors border-0 outline-none ${g===N?"bg-white text-blue-600 shadow-sm":"text-gray-500 bg-transparent"}`,children:[N==="slow"?"":N==="normal"?"1":"2",""]},N))})]}),p.jsxs("div",{className:"px-3 py-1.5 flex items-center gap-2 border-t border-gray-100",children:[p.jsx("span",{className:"text-[10px] text-gray-500 w-14",children:"Dekking"}),p.jsx("input",{type:"range",min:"10",max:"100",value:_,onChange:N=>b(parseInt(N.target.value)),className:"flex-1 h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-500"}),p.jsxs("span",{className:"text-[10px] text-gray-500 w-8 text-right",children:[_,"%"]})]}),p.jsxs("div",{className:"px-3 pb-1.5 flex items-center justify-center gap-1.5",children:[p.jsx("span",{className:"text-[8px] text-gray-400",children:"Licht"}),p.jsxs("div",{className:"flex h-1.5 rounded overflow-hidden",children:[p.jsx("div",{className:"w-3",style:{backgroundColor:"#88D0F3"}}),p.jsx("div",{className:"w-3",style:{backgroundColor:"#32B8A4"}}),p.jsx("div",{className:"w-3",style:{backgroundColor:"#F4E61F"}}),p.jsx("div",{className:"w-3",style:{backgroundColor:"#F09D1C"}}),p.jsx("div",{className:"w-3",style:{backgroundColor:"#E12E18"}})]}),p.jsx("span",{className:"text-[8px] text-gray-400",children:"Zwaar"})]})]})}):null}const Cae={Munt:"#f59e0b",Aardewerk:"#a16207",Gesp:"#6b7280",Fibula:"#8b5cf6",Ring:"#ec4899",Speld:"#6366f1",Sieraad:"#f43f5e",Gereedschap:"#64748b",Wapen:"#ef4444",Anders:"#3b82f6"},wkt={Munt:"M",Aardewerk:"A",Gesp:"G",Fibula:"F",Ring:"R",Speld:"S",Sieraad:"Si",Gereedschap:"Gr",Wapen:"W",Anders:"?"};function bkt(){const t=li(i=>i.map),e=gh(i=>i.vondsten),n=Cn(i=>i.showLocalVondsten),r=Y.useRef(null);return Y.useEffect(()=>{if(!t)return;const i=new Nl;return e.forEach(s=>{const o=new yr({geometry:new Ti(Ni([s.location.lng,s.location.lat])),vondst:s}),a=Cae[s.objectType]||Cae.Anders,l=wkt[s.objectType]||"?";o.setStyle((c,u)=>{let y=12;u>50?y=6:u>10?y=Math.max(6,12-(u-10)/10):u<2&&(y=14);const _=Math.max(8,Math.min(12,y-2));return new vn({image:new ms({radius:y,fill:new Dn({color:a}),stroke:new Pn({color:"#ffffff",width:y>8?2:1})}),text:y>=8?new pc({text:l,font:`bold ${_}px sans-serif`,fill:new Dn({color:"#ffffff"}),offsetY:1}):void 0})}),i.addFeature(o)}),r.current?r.current.setSource(i):(r.current=new Ol({source:i,zIndex:1e3,properties:{title:"Mijn Vondsten"}}),r.current.setVisible(n),t.addLayer(r.current)),()=>{r.current&&t&&(t.removeLayer(r.current),r.current=null)}},[t,e]),Y.useEffect(()=>{r.current&&r.current.setVisible(n)},[n]),null}const Ekt={Mineraal:"M",Fossiel:"F",Erfgoed:"E",Monument:"Mo",Overig:""};function Skt(t){const{type:e,coordinates:n}=t,r=s=>typeof s[0]=="number"?Ni(s):s.map(r),i=r(n);switch(e){case"Point":return new Ti(i);case"LineString":return new ts(i);case"Polygon":return new Il(i);case"MultiPoint":return new o0(i);case"MultiLineString":return new vh(i);case"MultiPolygon":return new mp(i);default:return new Ti(Ni(n))}}function Tkt(){const t=li(i=>i.map),e=ps(i=>i.layers),n=Cn(i=>i.showCustomPointLayers),r=Y.useRef(new Map);return Y.useEffect(()=>{if(!t)return;const i=new Set(e.map(s=>s.id));return r.current.forEach((s,o)=>{i.has(o)||(t.removeLayer(s),r.current.delete(o))}),e.forEach(s=>{const o=new Nl;s.points.forEach(l=>{let c;const u=l.geometry&&l.geometry.type!=="Point";l.geometry?c=Skt(l.geometry):c=new Ti(Ni(l.coordinates));const h=new yr({geometry:c,layerType:"customPoint",customPoint:l,customLayerId:s.id,customLayerName:s.name,customLayerColor:s.color}),f=Ekt[l.category]||l.category.charAt(0).toUpperCase();if(u){const g=l.geometry.type;h.setStyle(()=>g==="Polygon"||g==="MultiPolygon"?new vn({fill:new Dn({color:s.color+"40"}),stroke:new Pn({color:s.color,width:2})}):g==="LineString"||g==="MultiLineString"?new vn({stroke:new Pn({color:s.color,width:3})}):new vn({image:new ms({radius:8,fill:new Dn({color:s.color}),stroke:new Pn({color:"#ffffff",width:2})})}))}else h.setStyle((g,y)=>{let A=12;y>50?A=6:y>10?A=Math.max(6,12-(y-10)/10):y<2&&(A=14);const I=Math.max(8,Math.min(12,A-2));return new vn({image:new ms({radius:A,fill:new Dn({color:s.color}),stroke:new Pn({color:"#ffffff",width:A>8?2:1})}),text:A>=8?new pc({text:f,font:`bold ${I}px sans-serif`,fill:new Dn({color:"#ffffff"}),offsetY:1}):void 0})});o.addFeature(h)});const a=r.current.get(s.id);if(a)a.setSource(o),a.setVisible(n&&s.visible);else{const l=new Ol({source:o,zIndex:950,properties:{title:s.name,customPointLayerId:s.id},visible:n&&s.visible});t.addLayer(l),r.current.set(s.id,l)}}),()=>{r.current.forEach(s=>{t&&t.removeLayer(s)}),r.current.clear()}},[t,e,n]),null}function kkt(){const{createLayerModalOpen:t,closeCreateLayerModal:e}=gr(),{addLayer:n}=ps(),r=Cn(),[i,s]=Y.useState(""),[o,a]=Y.useState([...Bm]),[l,c]=Y.useState(""),u=14*r.fontScale/100,h=()=>{const b=l.trim();b&&!o.includes(b)&&(a([...o,b]),c(""))},f=b=>{a(o.filter(T=>T!==b))},g=b=>{o.includes(b)?a(o.filter(T=>T!==b)):a([...o,b])},y=()=>{i.trim()&&(n(i.trim(),o),s(""),a([...Bm]),c(""),e())},_=()=>{s(""),a([...Bm]),c(""),e()};return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:_}),p.jsxs(gt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ga,{size:18}),p.jsx("span",{className:"font-medium",children:"Nieuwe laag"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:r.fontScale,onChange:b=>r.setFontScale(parseInt(b.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${r.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:_,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(Kr,{size:18})})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",style:{fontSize:`${u}px`},children:[p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam van de laag"}),p.jsx("input",{type:"text",value:i,onChange:b=>s(b.target.value),placeholder:"bijv. Vakantie Frankrijk 2026",className:"w-full px-3 py-2 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},autoFocus:!0})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Categorien"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Bm.map(b=>p.jsx("button",{onClick:()=>g(b),className:`px-3 py-1 rounded-full transition-colors border-0 outline-none ${o.includes(b)?"bg-orange-500 text-white":"bg-white text-gray-600 hover:bg-blue-50"}`,style:{fontSize:"0.9em"},children:b},b))})]}),o.filter(b=>!Bm.includes(b)).length>0&&p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-2",style:{fontSize:"0.9em"},children:"Eigen categorien"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:o.filter(b=>!Bm.includes(b)).map(b=>p.jsxs("div",{className:"flex items-center",children:[p.jsx("button",{onClick:()=>g(b),className:"px-3 py-1 rounded-l-full bg-orange-500 text-white hover:bg-orange-600 transition-colors border-0 outline-none",style:{fontSize:"0.9em"},children:b}),p.jsx("button",{onClick:()=>f(b),className:"px-2 py-1 rounded-r-full bg-orange-600 text-white hover:bg-orange-700 transition-colors border-0 outline-none",title:"Verwijder categorie",children:p.jsx(Th,{size:12})})]},b))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Eigen categorie toevoegen"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"text",value:l,onChange:b=>c(b.target.value),placeholder:"bijv. Grot, Bron, ...",className:"flex-1 px-3 py-2 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},onKeyDown:b=>b.key==="Enter"&&h()}),p.jsx("button",{onClick:h,disabled:!l.trim(),className:"px-3 py-2 bg-white hover:bg-blue-50 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg transition-colors border-0 outline-none text-gray-600",children:p.jsx(Ec,{size:20})})]})]})]}),p.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${u}px`},children:[p.jsx("button",{onClick:_,className:"flex-1 px-4 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none text-gray-600",style:{fontSize:"1em"},children:"Annuleren"}),p.jsx("button",{onClick:y,disabled:!i.trim(),className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Aanmaken"})]})]})]})})}const mSe=200,Akt=.7;async function Ikt(t,e=mSe){return new Promise((n,r)=>{const i=new Image,s=document.createElement("canvas"),o=s.getContext("2d");i.onload=()=>{let a=i.width,l=i.height;a>l?a>e&&(l=Math.round(l*e/a),a=e):l>e&&(a=Math.round(a*e/l),l=e),s.width=a,s.height=l,o?.drawImage(i,0,0,a,l),s.toBlob(c=>{c?n(c):r(new Error("Failed to create blob from canvas"))},"image/jpeg",Akt)},i.onerror=()=>r(new Error("Failed to load image")),i.src=URL.createObjectURL(t)})}function Pkt(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{typeof r.result=="string"?e(r.result):n(new Error("Failed to convert blob to base64"))},r.onerror=()=>n(new Error("Failed to read blob")),r.readAsDataURL(t)})}async function Ckt(t){const e=await Ikt(t,mSe),n=await Pkt(e);return{thumbnailBlob:e,thumbnailBase64:n}}function Rkt(){return`photo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}const EF=5;function Mkt({photos:t,onAddPhoto:e,onRemovePhoto:n,disabled:r}){const i=Y.useRef(null),s=Y.useRef(null),o=async l=>{const c=l.target.files;if(!c||c.length===0)return;const u=EF-t.length,h=Array.from(c).slice(0,u);for(const f of h)try{const{thumbnailBase64:g}=await Ckt(f),y={id:Rkt(),thumbnailBase64:g,createdAt:new Date().toISOString(),pendingUpload:!0};e(y)}catch(g){console.error("Failed to process image:",g)}l.target.value=""},a=t.length<EF;return p.jsxs("div",{className:"space-y-2",children:[p.jsxs("label",{className:"block font-medium text-gray-700",style:{fontSize:"0.9em"},children:["Foto's (",t.length,"/",EF,")"]}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.map(l=>p.jsxs("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden bg-gray-100 border border-gray-200",children:[p.jsx("img",{src:l.thumbnailUrl||l.thumbnailBase64,alt:"Foto",className:"w-full h-full object-cover"}),!r&&p.jsx("button",{type:"button",onClick:()=>n(l.id),className:"absolute top-0.5 right-0.5 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center border-0 outline-none",children:p.jsx(Kr,{size:12,className:"text-white"})}),l.pendingUpload&&p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-orange-500/80 text-white text-center py-0.5",style:{fontSize:"0.6em"},children:"Wacht..."})]},l.id)),a&&!r&&p.jsxs(p.Fragment,{children:[p.jsxs("button",{type:"button",onClick:()=>s.current?.click(),className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 hover:border-orange-400 hover:bg-orange-50 flex flex-col items-center justify-center gap-1 transition-colors bg-transparent outline-none",title:"Maak foto",children:[p.jsx(CL,{size:20,className:"text-gray-400"}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.6em"},children:"Camera"})]}),p.jsxs("button",{type:"button",onClick:()=>i.current?.click(),className:"w-16 h-16 rounded-lg border-2 border-dashed border-gray-300 hover:border-orange-400 hover:bg-orange-50 flex flex-col items-center justify-center gap-1 transition-colors bg-transparent outline-none",title:"Kies foto",children:[p.jsx(Yct,{size:20,className:"text-gray-400"}),p.jsx("span",{className:"text-gray-400",style:{fontSize:"0.6em"},children:"Gallerij"})]})]})]}),p.jsx("input",{ref:s,type:"file",accept:"image/*",capture:"environment",onChange:o,className:"hidden"}),p.jsx("input",{ref:i,type:"file",accept:"image/*",multiple:!0,onChange:o,className:"hidden"})]})}function Nkt(){const{addPointModalOpen:t,addPointModalLayerId:e,addPointModalLocation:n,closeAddPointModal:r}=gr(),{addPoint:i,getLayer:s}=ps(),o=Cn(),[a,l]=Y.useState(""),[c,u]=Y.useState(""),[h,f]=Y.useState(""),[g,y]=Y.useState([]),_=e?s(e):null,b=14*o.fontScale/100,T=()=>{!a.trim()||!e||!n||(i(e,{name:a.trim(),category:"Overig",notes:c.trim(),url:h.trim()||void 0,coordinates:[n.lng,n.lat],photos:g.length>0?g:void 0}),l(""),u(""),f(""),y([]),r())},A=()=>{l(""),u(""),f(""),y([]),r()};return _?p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:A}),p.jsxs(gt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-sm mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ka,{size:18}),p.jsx("span",{className:"font-medium",children:"Punt toevoegen"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:o.fontScale,onChange:I=>o.setFontScale(parseInt(I.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${o.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:A,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(Kr,{size:18})})]})]}),p.jsx("div",{className:"px-4 py-1.5",children:p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:_.color}}),p.jsx("span",{className:"text-sm text-gray-600",children:_.name})]})}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",style:{fontSize:`${b}px`},children:[p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Naam *"}),p.jsx("input",{type:"text",value:a,onChange:I=>l(I.target.value),className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"},autoFocus:!0})]}),p.jsx(Mkt,{photos:g,onAddPhoto:I=>y([...g,I]),onRemovePhoto:I=>y(g.filter(P=>P.id!==I))}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Notities"}),p.jsx("textarea",{value:c,onChange:I=>u(I.target.value),placeholder:"Beschrijving, tips, opmerkingen...",rows:2,className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors resize-none",style:{fontSize:"1em"}})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block font-medium text-gray-700 mb-1",style:{fontSize:"0.9em"},children:"Link"}),p.jsx("input",{type:"url",value:h,onChange:I=>f(I.target.value),placeholder:"https://...",className:"w-full px-3 py-1.5 bg-white rounded-lg border-0 outline-none hover:bg-blue-50 transition-colors",style:{fontSize:"1em"}})]})]}),p.jsxs("div",{className:"p-3 flex gap-3",style:{fontSize:`${b}px`},children:[p.jsx("button",{onClick:A,className:"flex-1 px-4 py-1.5 bg-white hover:bg-blue-50 rounded-lg transition-colors border-0 outline-none text-gray-600",style:{fontSize:"1em"},children:"Annuleren"}),p.jsx("button",{onClick:T,disabled:!a.trim(),className:"flex-1 px-4 py-1.5 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:"Toevoegen"})]})]})]})}):null}function Okt(){const{layerManagerModalOpen:t,closeLayerManagerModal:e,openCreateLayerModal:n,openLayerDashboard:r}=gr(),{layers:i,removeLayer:s,toggleVisibility:o,toggleArchived:a,exportLayerAsGeoJSON:l,importLayerFromGeoJSON:c}=ps(),u=Cn(),h=14*u.fontScale/100,[f,g]=Y.useState(null),[y,_]=Y.useState(null),[b,T]=Y.useState(null),[A,I]=Y.useState(!1),P=i.filter(G=>!G.archived),N=i.filter(G=>G.archived),L=A?N:P,C=G=>{y===G?(s(G),_(null)):(_(G),setTimeout(()=>_(null),3e3))},M=G=>{l(G)},O=async G=>{const de=G.target.files?.[0];if(de){try{const ke=await de.text(),Ue=c(ke);Ue.success||(T(Ue.error||"Import mislukt"),setTimeout(()=>T(null),3e3))}catch{T("Kon bestand niet lezen"),setTimeout(()=>T(null),3e3)}G.target.value=""}},D=()=>{g(null),_(null),T(null),I(!1),e()},V=G=>{r(G)},U=()=>{D(),n()};return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:D}),p.jsxs(gt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[85vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ga,{size:18}),p.jsx("span",{className:"font-medium",children:"Mijn Lagen beheren"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:u.fontScale,onChange:G=>u.setFontScale(parseInt(G.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${u.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:D,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(Kr,{size:18})})]})]}),p.jsxs("div",{className:"flex border-b border-gray-100",children:[p.jsxs("button",{onClick:()=>I(!1),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none ${A?"text-gray-500 hover:text-gray-700 hover:bg-gray-50":"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50"}`,children:["Actief (",P.length,")"]}),p.jsxs("button",{onClick:()=>I(!0),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none flex items-center justify-center gap-1 ${A?"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[p.jsx(c2e,{size:14}),"Archief (",N.length,")"]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${h}px`},children:[L.length===0?p.jsx("div",{className:"p-8 text-center text-gray-500",children:A?p.jsx("p",{style:{fontSize:"1em"},children:"Geen gearchiveerde lagen."}):p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"mb-4",style:{fontSize:"1em"},children:"Je hebt nog geen eigen lagen."}),p.jsxs("button",{onClick:U,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors border-0 outline-none",style:{fontSize:"1em"},children:[p.jsx(Ec,{size:16,className:"inline mr-2"}),"Nieuwe laag aanmaken"]})]})}):p.jsx("div",{className:"divide-y divide-gray-100",children:L.map(G=>p.jsx(Dkt,{layer:G,isExpanded:f===G.id,onToggleExpand:()=>g(f===G.id?null:G.id),onToggleVisibility:()=>o(G.id),onToggleArchived:()=>a(G.id),onOpenDashboard:()=>V(G.id),onExport:()=>M(G.id),onDelete:()=>C(G.id),confirmDelete:y===G.id,onRename:de=>ps.getState().updateLayer(G.id,{name:de}),onChangeColor:de=>ps.getState().updateLayer(G.id,{color:de})},G.id))}),b&&p.jsx("div",{className:"mx-4 my-2 p-3 bg-red-50 text-red-700 text-sm rounded-lg",children:b})]}),p.jsxs("div",{className:"p-4 flex gap-3",style:{fontSize:`${h}px`},children:[p.jsxs("label",{className:"flex-1 px-4 py-2 bg-white hover:bg-blue-50 rounded-lg transition-colors cursor-pointer flex items-center justify-center gap-2 border-0 outline-none text-gray-600",children:[p.jsx(KI,{size:16}),p.jsx("span",{style:{fontSize:"1em"},children:"Importeren"}),p.jsx("input",{type:"file",accept:".geojson,.json",onChange:O,className:"hidden"})]}),p.jsxs("button",{onClick:U,className:"flex-1 px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors border-0 outline-none flex items-center justify-center gap-2",style:{fontSize:"1em"},children:[p.jsx(Ec,{size:16}),p.jsx("span",{children:"Nieuwe laag"})]})]})]})]})})}const Lkt=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899"];function Dkt({layer:t,isExpanded:e,onToggleExpand:n,onToggleVisibility:r,onToggleArchived:i,onOpenDashboard:s,onExport:o,onDelete:a,confirmDelete:l,onRename:c,onChangeColor:u}){const[h,f]=Y.useState(!1),[g,y]=Y.useState(t.name),[_,b]=Y.useState(!1),T=Y.useRef(null);Y.useEffect(()=>{h&&T.current&&(T.current.focus(),T.current.select())},[h]);const A=()=>{y(t.name),f(!0)},I=()=>{const M=g.trim();M&&M!==t.name&&c(M),f(!1)},P=()=>{y(t.name),f(!1)},N=M=>{M.key==="Enter"?I():M.key==="Escape"&&P()},L=t.points.filter(M=>M.status==="completed").length,C=t.points.length;return p.jsxs("div",{className:"bg-white",children:[p.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[p.jsx("button",{onClick:n,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors border-0 outline-none bg-transparent",children:e?p.jsx(Ib,{size:16}):p.jsx(_d,{size:16})}),p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:()=>b(!_),className:"w-5 h-5 rounded-full flex-shrink-0 border-2 border-white shadow-sm hover:scale-110 transition-transform cursor-pointer",style:{backgroundColor:t.color},title:"Kleur wijzigen"}),_&&p.jsx("div",{className:"absolute top-7 left-0 z-50 bg-white rounded-lg shadow-lg p-2 flex flex-wrap gap-1 w-24",children:Lkt.map(M=>p.jsx("button",{onClick:()=>{u(M),b(!1)},className:`w-5 h-5 rounded-full border-2 hover:scale-110 transition-transform ${M===t.color?"border-gray-800":"border-white"}`,style:{backgroundColor:M}},M))})]}),h?p.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:[p.jsx("input",{ref:T,type:"text",value:g,onChange:M=>y(M.target.value),onKeyDown:N,onBlur:I,className:"flex-1 px-2 py-1 text-gray-800 font-medium bg-orange-50 rounded outline-none focus:ring-2 focus:ring-orange-400"}),p.jsx("button",{onClick:I,className:"p-1 text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Opslaan",children:p.jsx(Ep,{size:16})})]}):p.jsxs("button",{onClick:s,className:"flex-1 min-w-0 text-left border-0 outline-none bg-transparent hover:bg-orange-50 rounded px-2 py-1 -ml-2 transition-colors",title:"Bekijk dashboard",children:[p.jsx("div",{className:"font-medium text-gray-800 truncate hover:text-orange-600",children:t.name}),p.jsx("div",{className:"text-xs text-gray-500",children:C>0?p.jsxs("span",{className:L===C?"text-green-600":"",children:[L,"/",C," voltooid"]}):"Geen punten"})]}),!h&&p.jsx("button",{onClick:A,className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors border-0 outline-none",title:"Naam bewerken",children:p.jsx(Sp,{size:16})}),p.jsx("button",{onClick:s,className:"p-2 text-orange-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-colors border-0 outline-none",title:"Open dashboard",children:p.jsx(v2e,{size:18})}),!t.archived&&p.jsx("button",{onClick:r,className:`p-2 rounded transition-colors border-0 outline-none ${t.visible?"text-blue-500 hover:bg-blue-50":"text-gray-400 hover:bg-gray-100"}`,title:t.visible?"Verbergen":"Tonen",children:t.visible?p.jsx(bA,{size:18}):p.jsx(WN,{size:18})}),p.jsx("button",{onClick:i,className:`p-2 rounded transition-colors border-0 outline-none ${t.archived?"text-green-500 hover:text-green-600 hover:bg-green-50":"text-gray-400 hover:text-amber-600 hover:bg-amber-50"}`,title:t.archived?"Herstellen":"Archiveren",children:t.archived?p.jsx(Blt,{size:18}):p.jsx(c2e,{size:18})}),p.jsx("button",{onClick:o,className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors border-0 outline-none",title:"Exporteren als GeoJSON",children:p.jsx(wA,{size:18})}),p.jsx("button",{onClick:a,className:`p-2 rounded transition-colors border-0 outline-none ${l?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:l?"Klik nogmaals om te verwijderen":"Verwijderen",children:p.jsx(Th,{size:18})})]}),p.jsx(Wn,{children:e&&p.jsx(gt.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:p.jsxs("div",{className:"px-4 pb-3 pl-12 space-y-2",children:[t.categories.length>0&&p.jsx("div",{className:"flex flex-wrap gap-1",children:t.categories.map(M=>p.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:M},M))}),t.points.length>0&&p.jsxs("div",{className:"text-xs text-gray-500 space-y-1 max-h-32 overflow-y-auto",children:[t.points.slice(0,5).map(M=>p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("span",{className:`font-medium ${M.status==="completed"?"text-green-600 line-through":M.status==="skipped"?"text-gray-400 line-through":"text-gray-700"}`,children:M.name})},M.id)),t.points.length>5&&p.jsxs("div",{className:"text-gray-400",children:["...en ",t.points.length-5," meer"]})]}),p.jsxs("div",{className:"text-xs text-gray-400",children:["Aangemaakt: ",new Date(t.createdAt).toLocaleDateString("nl-NL")]})]})})})]})}function jkt(){const{layerDashboardOpen:t,layerDashboardLayerId:e,closeLayerDashboard:n}=gr(),{getLayer:r,setPointStatus:i,updatePoint:s,removePoint:o}=ps(),a=Cn(),[l,c]=Y.useState("all"),[u,h]=Y.useState(null),[f,g]=Y.useState(""),[y,_]=Y.useState(null),b=e?r(e):null,T=14*a.fontScale/100;if(!b)return null;const A=b.points.filter(V=>l==="all"?!0:V.status===l),I=b.points.length,P=b.points.filter(V=>V.status==="completed").length,N=b.points.filter(V=>V.status==="todo").length,L=b.points.filter(V=>V.status==="skipped").length,C=(V,U)=>{i(b.id,V,U)},M=V=>{s(b.id,V,{notes:f}),h(null),g("")},O=V=>{y===V?(o(b.id,V),_(null)):(_(V),setTimeout(()=>_(null),3e3))},D=()=>{h(null),_(null),n()};return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[1700] bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:D}),p.jsxs(gt.div,{className:"fixed inset-4 z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden flex flex-col max-w-lg mx-auto my-auto max-h-[90vh]",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-white/50",style:{backgroundColor:b.color}}),p.jsx("span",{className:"font-medium truncate",children:b.name})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-[10px] opacity-70",children:"T"}),p.jsx("input",{type:"range",min:"80",max:"150",step:"10",value:a.fontScale,onChange:V=>a.setFontScale(parseInt(V.target.value)),className:"header-slider w-16 opacity-70 hover:opacity-100 transition-opacity",title:`Tekstgrootte: ${a.fontScale}%`}),p.jsx("span",{className:"text-xs opacity-70",children:"T"}),p.jsx("button",{onClick:D,className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-1",children:p.jsx(Kr,{size:18})})]})]}),p.jsxs("div",{className:"px-4 py-2 bg-orange-50 flex items-center justify-between text-sm",children:[p.jsxs("span",{className:"text-orange-800 font-medium",children:[P,"/",I," voltooid"]}),p.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[p.jsxs("span",{className:"text-orange-600",children:[N," te doen"]}),L>0&&p.jsxs("span",{className:"text-gray-500",children:[L," overgeslagen"]})]})]}),p.jsx("div",{className:"flex border-b border-gray-100",children:["all","todo","completed","skipped"].map(V=>p.jsxs("button",{onClick:()=>c(V),className:`flex-1 px-3 py-2 text-sm transition-colors border-0 outline-none ${l===V?"text-orange-600 border-b-2 border-orange-500 bg-orange-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[V==="all"&&"Alles",V==="todo"&&"Te doen",V==="completed"&&"Voltooid",V==="skipped"&&"Overgeslagen"]},V))}),p.jsx("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${T}px`},children:A.length===0?p.jsx("div",{className:"p-8 text-center text-gray-500",children:p.jsx("p",{children:"Geen punten gevonden"})}):p.jsx("div",{className:"divide-y divide-gray-100",children:A.map(V=>p.jsx("div",{className:"p-3",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsxs("div",{className:"flex flex-col gap-1 pt-0.5",children:[p.jsx("button",{onClick:()=>C(V.id,V.status==="completed"?"todo":"completed"),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none transition-colors ${V.status==="completed"?"bg-green-100 hover:bg-green-200":"bg-gray-100 hover:bg-green-100"}`,title:V.status==="completed"?"Markeer als te doen":"Markeer als voltooid",children:p.jsx(Ep,{size:14,className:V.status==="completed"?"text-green-600":"text-gray-400"})}),p.jsx("button",{onClick:()=>C(V.id,V.status==="skipped"?"todo":"skipped"),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none transition-colors ${V.status==="skipped"?"bg-gray-200 hover:bg-gray-300":"bg-gray-100 hover:bg-gray-200"}`,title:V.status==="skipped"?"Markeer als te doen":"Overslaan",children:p.jsx(qlt,{size:14,className:V.status==="skipped"?"text-gray-600":"text-gray-400"})})]}),V.photos&&V.photos.length>0&&p.jsxs("div",{className:"relative flex-shrink-0",children:[p.jsx("img",{src:V.photos[0].thumbnailUrl||V.photos[0].thumbnailBase64,alt:"Foto",className:"w-12 h-12 object-cover rounded border border-gray-200"}),V.photos.length>1&&p.jsxs("span",{className:"absolute -bottom-1 -right-1 bg-orange-500 text-white text-[9px] px-1 rounded-full",children:["+",V.photos.length-1]})]}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:`font-medium truncate ${V.status==="completed"?"text-green-700 line-through":V.status==="skipped"?"text-gray-400 line-through":"text-gray-800"}`,children:V.name}),V.sourceLayer&&p.jsxs("span",{className:"text-xs text-gray-400 truncate",children:["via ",V.sourceLayer]})]}),u===V.id?p.jsxs("div",{className:"mt-2",children:[p.jsx("textarea",{value:f,onChange:U=>g(U.target.value),placeholder:"Notities...",rows:2,className:"w-full px-2 py-1 bg-white rounded border-0 outline-none hover:bg-blue-50 transition-colors resize-none text-sm",autoFocus:!0}),p.jsxs("div",{className:"flex gap-2 mt-1",children:[p.jsx("button",{onClick:()=>M(V.id),className:"px-2 py-1 text-xs bg-orange-500 text-white rounded hover:bg-orange-600 border-0 outline-none",children:"Opslaan"}),p.jsx("button",{onClick:()=>{h(null),g("")},className:"px-2 py-1 text-xs bg-white text-gray-600 rounded hover:bg-blue-50 border-0 outline-none",children:"Annuleren"})]})]}):V.notes?p.jsx("p",{className:"text-sm text-gray-600 mt-1",children:V.notes}):null,V.url&&p.jsxs("a",{href:V.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-blue-500 hover:text-blue-700 mt-1",children:[p.jsx(Cg,{size:12}),"Link"]})]}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("button",{onClick:()=>{h(V.id),g(V.notes)},className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded border-0 outline-none",title:"Notities bewerken",children:p.jsx(vut,{size:14})}),p.jsx("button",{onClick:()=>{window.open(`https://www.google.com/maps/dir/?api=1&destination=${V.coordinates[1]},${V.coordinates[0]}`,"_blank")},className:"w-6 h-6 flex items-center justify-center text-blue-400 hover:text-blue-600 hover:bg-blue-50 rounded border-0 outline-none",title:"Navigeer naar",children:p.jsx(Ka,{size:14})}),p.jsx("button",{onClick:()=>O(V.id),className:`w-6 h-6 flex items-center justify-center rounded border-0 outline-none ${y===V.id?"text-white bg-red-500 hover:bg-red-600":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:y===V.id?"Klik nogmaals":"Verwijderen",children:p.jsx(Th,{size:14})})]})]})},V.id))})})]})]})})}function $kt(){const[t,e]=Y.useState(navigator.onLine),[n,r]=Y.useState(!1);return Y.useEffect(()=>{const i=()=>{e(!0),r(!1)},s=()=>{e(!1),r(!1)};return window.addEventListener("online",i),window.addEventListener("offline",s),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",s)}},[]),t||n?null:p.jsx(Wn,{children:p.jsx(gt.div,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},className:"fixed top-0 left-0 right-0 z-[2000] bg-amber-500 text-white px-4 py-2 shadow-lg",children:p.jsxs("div",{className:"flex items-center justify-between max-w-lg mx-auto",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Eht,{size:18}),p.jsx("span",{className:"text-sm font-medium",children:"Offline modus - Kaart werkt met gecachede data"})]}),p.jsx("button",{onClick:()=>r(!0),className:"p-1 hover:bg-white/20 rounded transition-colors border-0 outline-none bg-transparent",children:p.jsx(Kr,{size:16})})]})})})}const Fkt={"zeer hoge archeologische waarde":"bg-purple-600","hoge archeologische waarde":"bg-purple-500","archeologische waarde":"bg-purple-400"},Vkt={"zeer hoge archeologische waarde":"Zeer hoog","hoge archeologische waarde":"Hoog","archeologische waarde":"Waarde"};let Yx=null;function gSe(t){return Yx||(Yx=new Ol({source:new Nl,style:new vn({fill:new Dn({color:"rgba(147, 51, 234, 0.5)"}),stroke:new Pn({color:"#9333ea",width:3})}),zIndex:9999}),t.addLayer(Yx)),Yx}function zkt(){Yx&&Yx.getSource()?.clear()}async function Gkt(t,e){const n=await JSt(e);if(!n)return;const i=gSe(t).getSource();i?.clear();const s=n.clone();i?.addFeature(s)}function Ukt({isOpen:t,onClose:e}){const n=li(Q=>Q.map),r=Cn(),[i,s]=Y.useState(""),[o,a]=Y.useState("all"),[l,c]=Y.useState([]),[u,h]=Y.useState(!1),[f,g]=Y.useState(!1),[y,_]=Y.useState(null),[b,T]=Y.useState(null),[A,I]=Y.useState(50),[P,N]=Y.useState(!1),[L,C]=Y.useState(!1),[M,O]=Y.useState(!1),D=Y.useRef(null),V=Y.useRef(),U=Y.useRef(null),G=13*r.fontScale/100;Y.useEffect(()=>{t&&D.current&&setTimeout(()=>D.current?.focus(),100)},[t]),Y.useEffect(()=>{if(!t)return;const Q=ne=>{U.current&&!U.current.contains(ne.target)&&e()},W=setTimeout(()=>{document.addEventListener("mousedown",Q)},100);return()=>{clearTimeout(W),document.removeEventListener("mousedown",Q)}},[t,e]),Y.useEffect(()=>{t||N(!1)},[t]),Y.useEffect(()=>{if(V.current&&clearTimeout(V.current),i.length<2){c([]),g(!1);return}return V.current=window.setTimeout(async()=>{h(!0),g(!0);try{const Q=await ZSt(i,A,o);c(Q)}catch(Q){console.error("Monument search error:",Q),c([])}finally{h(!1)}},400),()=>{V.current&&clearTimeout(V.current)}},[i,o,A]);const de=async Q=>{if(!n)return;const W=n.getView();if(y===Q.id){const ne=sh(Q.extent,50);W.fit(ne,{duration:500,maxZoom:18})}else{const ne=sh(Q.extent,200);W.fit(ne,{duration:500,maxZoom:16}),await Gkt(n,Q.monumentnummer),_(Q.id),T(Q.id)}},ke=(Q,W)=>{if(W.stopPropagation(),!n)return;const ne=n.getView(),ie=sh(Q.extent,20);ne.fit(ie,{duration:500,maxZoom:18})},Ue=(Q,W)=>{W.stopPropagation(),T(b===Q?null:Q)},Ne=async()=>{if(!(!n||l.length===0)){O(!0);try{const Q=l.map(Ke=>Ke.monumentnummer),W=await QSt(Q);if(W.length===0)return;const ie=gSe(n).getSource();ie?.clear();let le=Wa();W.forEach(Ke=>{const Se=Ke.clone();ie?.addFeature(Se);const we=Se.getGeometry();we&&(le=Zz(le,we.getExtent()))});const ve=n.getView(),qe=sh(le,500);ve.fit(qe,{duration:500,maxZoom:14}),C(!0),_(null),console.log(` ${W.length} monumenten getoond op kaart`)}catch(Q){console.error("Error showing all monuments:",Q)}finally{O(!1)}}},fe=()=>{e()},De=()=>{zkt(),s(""),a("all"),c([]),g(!1),_(null),T(null),I(50),C(!1),e()},Ce=Q=>{if(!i||i.length<2)return Q;const W=i.toLowerCase().split(/\s+/).filter(ie=>ie.length>=2);let ne=Q;return W.forEach(ie=>{const le=ie.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ve=new RegExp(`(${le})`,"gi");ne=ne.replace(ve,'<mark class="bg-yellow-200 px-0.5">$1</mark>')}),ne};return t?p.jsx(Wn,{children:p.jsxs(gt.div,{ref:U,initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-[1701] bg-white rounded-t-2xl shadow-2xl overflow-hidden flex flex-col",style:{height:P?"85vh":"38vh"},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white cursor-pointer select-none",onClick:()=>N(!P),children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(y2e,{size:16}),p.jsx("span",{className:"font-medium text-sm",children:"Zoek monumenten"})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(g2e,{size:20,className:"opacity-70"}),p.jsx("button",{onClick:Q=>{Q.stopPropagation(),fe()},className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none ml-2",children:p.jsx(Kr,{size:16})})]})]}),p.jsx("div",{className:"p-2 border-b border-gray-100 space-y-2",children:p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx(ev,{size:16,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),p.jsx("input",{ref:D,type:"text",value:i,onChange:Q=>{s(Q.target.value),_(null),T(null),C(!1)},placeholder:"bouwvoor, scherven...",className:"w-full pl-8 pr-8 py-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-purple-500 text-sm"}),i&&p.jsx("button",{onClick:()=>{s(""),_(null),T(null),C(!1)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 border-0 outline-none bg-transparent",children:p.jsx(Kr,{size:14})})]}),p.jsx("select",{value:o,onChange:Q=>{a(Q.target.value),_(null),T(null),C(!1)},className:"py-1.5 px-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-purple-500 text-sm text-gray-700 w-28",children:Object.entries(qq).map(([Q,{name:W}])=>p.jsx("option",{value:Q,children:W},Q))})]})}),p.jsxs("div",{className:"flex-1 overflow-y-auto",style:{fontSize:`${G}px`},children:[u&&p.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Zoeken..."}),!u&&f&&l.length===0&&p.jsx("div",{className:"p-3 text-center text-gray-500 text-sm",children:"Geen resultaten"}),!u&&l.length>0&&p.jsxs("div",{className:"divide-y divide-gray-100",children:[p.jsxs("div",{className:"px-3 py-1.5 bg-gray-50 text-xs text-gray-500 flex justify-between items-center gap-2",children:[p.jsxs("span",{children:[l.length,l.length>=A?"+":""," gevonden"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[l.length>=A&&p.jsx("button",{onClick:()=>I(A+50),className:"text-purple-600 hover:text-purple-700 border-0 outline-none bg-transparent",children:"Meer laden"}),p.jsxs("button",{onClick:Ne,disabled:M,className:`flex items-center gap-1 px-2 py-1 rounded text-white border-0 outline-none transition-colors ${L?"bg-green-500 hover:bg-green-600":"bg-purple-500 hover:bg-purple-600"} ${M?"opacity-50 cursor-wait":""}`,children:[M?p.jsx(qI,{size:12,className:"animate-spin"}):p.jsx(B2,{size:12}),p.jsx("span",{children:L?"Getoond":"Toon alle"})]})]})]}),l.map(Q=>p.jsxs("div",{className:`transition-colors ${y===Q.id?"bg-purple-50":"bg-transparent"}`,children:[p.jsx("button",{onClick:()=>de(Q),className:"w-full text-left px-3 py-2 hover:bg-purple-50 transition-colors border-0 outline-none bg-transparent",children:p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"font-medium text-gray-800 text-sm",children:Q.toponiem}),p.jsx("p",{className:"text-xs text-purple-600 mt-0.5",children:Q.periode})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx("span",{className:`px-1.5 py-0.5 rounded text-white text-[9px] ${Fkt[Q.kwaliteitswaarde]||"bg-gray-500"}`,children:Vkt[Q.kwaliteitswaarde]||"AMK"}),y===Q.id&&p.jsx("button",{onClick:W=>ke(Q,W),className:"p-1 bg-purple-500 hover:bg-purple-600 text-white rounded transition-colors border-0 outline-none",title:"Zoom in",children:p.jsx(Aht,{size:12})})]})]})}),y===Q.id&&p.jsxs("div",{className:"px-3 pb-2",children:[p.jsxs("button",{onClick:W=>Ue(Q.id,W),className:"flex items-center gap-1 text-xs text-purple-600 hover:text-purple-700 border-0 outline-none bg-transparent mb-1",children:[b===Q.id?p.jsx(RL,{size:14}):p.jsx(Ib,{size:14}),b===Q.id?"Minder":"Omschrijving"]}),b===Q.id&&p.jsx("div",{className:"text-xs text-gray-700 bg-gray-50 rounded p-2 max-h-32 overflow-y-auto whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:Ce(Q.omschrijving)}})]})]},Q.id))]}),!u&&!f&&p.jsx("div",{className:"p-3 text-xs text-gray-500",children:"Zoek op trefwoorden in 13.000+ AMK monumenten"})]}),(y||i)&&p.jsx("div",{className:"p-2 border-t border-gray-100",children:p.jsx("button",{onClick:De,className:"w-full py-2 text-sm text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:"Wis zoekopdracht en highlight"})})]})}):null}const Bkt=["AMK Monumenten","AMK Romeins","AMK Steentijd","AMK Vroege ME","AMK Late ME","AMK Overig"];function Wkt(){const t=Y.useRef(null),{keyword:e,isActive:n,totalCount:r,filteredCount:i,setKeyword:s,setActive:o,clearFilter:a}=lSe(),l=gr(_=>_.monumentFilterOpen),c=gr(_=>_.toggleMonumentFilter),u=gr(_=>_.closeMonumentFilter),h=Bs(_=>_.visible),f=Bkt.some(_=>h[_]);Y.useEffect(()=>{l&&t.current&&setTimeout(()=>t.current?.focus(),100)},[l]);const g=()=>{e.length>=2&&o(!n)},y=e.length>=2;return f?p.jsxs("div",{children:[p.jsx(gt.button,{onClick:c,className:`fixed bottom-[116px] left-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${n?"bg-purple-500 text-white":"bg-white/80 hover:bg-white/90 text-purple-600"}`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Monument filter",children:p.jsx(eq,{size:20})}),p.jsx(Wn,{children:l&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 z-[800]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:u}),p.jsxs(gt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed bottom-[116px] left-[56px] z-[801] bg-white/95 rounded-xl shadow-lg backdrop-blur-sm overflow-hidden",children:[p.jsx("div",{className:"px-3 py-1.5 bg-purple-500",children:p.jsx("span",{className:"font-medium text-white text-xs",children:"Monument Filter"})}),p.jsxs("div",{className:"p-2 space-y-1.5",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("input",{ref:t,type:"text",value:e,onChange:_=>s(_.target.value),placeholder:"Filter...",className:"w-24 px-2 py-1.5 text-sm bg-gray-100 rounded border-0 outline-none focus:ring-2 focus:ring-purple-400"}),p.jsx("button",{onClick:g,disabled:!y,className:`relative w-10 h-5 rounded-full transition-colors border-0 outline-none ${n?"bg-purple-500":y?"bg-gray-300":"bg-gray-200 cursor-not-allowed"}`,title:n?"Filter uit":"Filter aan",children:p.jsx("span",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform ${n?"translate-x-5":"translate-x-0.5"}`})})]}),r>0&&p.jsx("div",{className:"text-xs text-gray-500 text-center",children:n?p.jsxs("span",{className:"text-purple-600 font-medium",children:[i," van ",r]}):p.jsxs("span",{children:[r," monumenten"]})})]})]})]})})]}):null}function Hkt({isOpen:t,onClose:e}){return p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 bg-black/40 z-[2002]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),p.jsx(gt.div,{className:"fixed inset-x-4 top-4 bottom-4 z-[2003] flex items-center justify-center pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:p.jsxs(gt.div,{className:"bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col w-full max-w-lg max-h-full pointer-events-auto",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.2},onClick:n=>n.stopPropagation(),children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 flex-shrink-0",children:[p.jsx("h2",{className:"text-lg font-semibold text-white",children:"Handleiding"}),p.jsx("button",{onClick:e,className:"p-1.5 rounded-lg hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Kr,{size:20,className:"text-white"})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[p.jsx("section",{children:p.jsx("p",{className:"text-sm text-gray-600",children:"DetectorApp.nl is een kaartapplicatie voor metaaldetectoristen en amateur-archeologen. Ontdek archeologische data, monumenten en interessante locaties in Nederland."})}),p.jsxs(bm,{title:"Schermindeling",icon:p.jsx(B2,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"De knoppen zijn verdeeld over het scherm voor optimaal gebruik:"}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(zR,{title:"Linksboven",items:[{icon:p.jsx(zd,{size:14}),name:"Weerwidget",desc:"Actueel weer en buienradar"},{icon:p.jsx(up,{size:14}),name:"Meten",desc:"Afstanden meten op de kaart"},{icon:p.jsx(Sp,{size:14}),name:"Tekenen",desc:"Punten, lijnen en vlakken tekenen"},{icon:p.jsx(qN,{size:14}),name:"Exporteren",desc:"Kaart opslaan als afbeelding"}]}),p.jsx(zR,{title:"Rechtsboven",items:[{icon:p.jsx(HN,{size:14}),name:"Menu",desc:"Instellingen en opties"},{icon:p.jsx(JH,{size:14}),name:"Kompas",desc:"Verschijnt bij gedraaide kaart"},{icon:p.jsx(B2,{size:14}),name:"Kaartlagen",desc:"Lagen aan/uit zetten"}]}),p.jsx(zR,{title:"Rechtsonder",items:[{icon:p.jsx(nh,{size:14}),name:"GPS",desc:"Je locatie volgen"},{icon:p.jsx(Ec,{size:14}),name:"Zoom",desc:"In- en uitzoomen"}]}),p.jsx(zR,{title:"Onderkant",items:[{icon:p.jsx(ev,{size:14}),name:"Zoekbalk",desc:"Zoek locaties en adressen"},{icon:p.jsx(Ga,{size:14}),name:"Legenda",desc:"Actieve lagen bekijken"}]})]})]}),p.jsxs(bm,{title:"Menu opties",icon:p.jsx(HN,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Het hamburger menu (rechtsboven) bevat belangrijke functies:"}),p.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 space-y-2",children:[p.jsx(SF,{icon:p.jsx(YN,{size:14}),name:"Instellingen",desc:"App configuratie aanpassen"}),p.jsx(SF,{icon:p.jsx(ev,{size:14}),name:"Monument zoeken",desc:"Zoek specifieke monumenten"}),p.jsx(SF,{icon:p.jsx(ioe,{size:14}),name:"Info",desc:"Over de app"})]}),p.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-xl",children:[p.jsxs("h4",{className:"text-xs font-semibold text-blue-800 mb-2 flex items-center gap-1",children:[p.jsx(bA,{size:12}),"Knoppen aan/uit zetten"]}),p.jsx("p",{className:"text-xs text-blue-700 mb-2",children:"In het menu kun je knoppen tonen of verbergen om je scherm overzichtelijk te houden:"}),p.jsxs("ul",{className:"text-xs text-blue-700 space-y-1 ml-4 list-disc",children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Vondst registreren"})," - Knop voor vondsten vastleggen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Route opnemen"})," - Knop voor routes vastleggen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Eigen lagen"})," - Knop voor aangepaste puntenlagen"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Weer"})," - Weerwidget linksboven"]})]})]})]}),p.jsxs(bm,{title:"GPS Locatie",icon:p.jsx(nh,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"De GPS-knop heeft drie standen (Google Maps stijl):"}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg",children:[p.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-white rounded-lg shadow-sm",children:p.jsx(nh,{size:16,className:"text-gray-400"})}),p.jsxs("div",{children:[p.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Uit"}),p.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"- GPS niet actief"})]})]}),p.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded-lg",children:[p.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-blue-500 rounded-lg shadow-sm",children:p.jsx(nh,{size:16,className:"text-white"})}),p.jsxs("div",{children:[p.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Volgen"}),p.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"- Kaart gecentreerd op je locatie"})]})]}),p.jsxs("div",{className:"flex items-center gap-2 p-2 bg-green-50 rounded-lg",children:[p.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-green-500 rounded-lg shadow-sm",children:p.jsx(nh,{size:16,className:"text-white"})}),p.jsxs("div",{children:[p.jsx("span",{className:"text-xs font-medium text-green-700",children:"Rijmodus"}),p.jsx("span",{className:"text-xs text-green-600 ml-1",children:"- Kaart draait met je mee"})]})]})]})]}),p.jsxs(bm,{title:"Kaartlagen",icon:p.jsx(Ga,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"De app bevat vele informatieve lagen:"}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(GR,{name:"Archeologie",items:["AMK Monumenten","IKAW gebieden","Kastelen","Romeinse wegen"]}),p.jsx(GR,{name:"Landschap",items:["AHN Hoogtekaart","Bodemkaart","Geomorfologie"]}),p.jsx(GR,{name:"Historisch",items:["Oude kaarten","Luchtfoto's","Kadaster"]}),p.jsx(GR,{name:"Natuur",items:["Veengebieden","Grafheuvels","Hunebedden"]})]}),p.jsx("p",{className:"text-xs text-gray-500 mt-2 italic",children:"Tip: Klik op de kaart om popup-informatie te zien over lagen op die locatie."})]}),p.jsx(bm,{title:"Meten en Tekenen",icon:p.jsx(up,{size:16}),children:p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"p-3 bg-blue-50 rounded-xl",children:[p.jsxs("h4",{className:"text-xs font-semibold text-blue-800 mb-1 flex items-center gap-1",children:[p.jsx(up,{size:12}),"Meetgereedschap"]}),p.jsx("p",{className:"text-xs text-blue-700",children:"Klik om te meten, dubbelklik om te stoppen. De afstand wordt automatisch berekend in meters of kilometers."})]}),p.jsxs("div",{className:"p-3 bg-orange-50 rounded-xl",children:[p.jsxs("h4",{className:"text-xs font-semibold text-orange-800 mb-1 flex items-center gap-1",children:[p.jsx(Sp,{size:12}),"Tekengereedschap"]}),p.jsx("p",{className:"text-xs text-orange-700 mb-2",children:"Teken punten, lijnen en vlakken op de kaart. Kies uit:"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("span",{className:"text-xs bg-orange-100 px-2 py-1 rounded",children:"Punt"}),p.jsx("span",{className:"text-xs bg-orange-100 px-2 py-1 rounded",children:"Lijn"}),p.jsx("span",{className:"text-xs bg-orange-100 px-2 py-1 rounded",children:"Vlak"})]}),p.jsx("p",{className:"text-xs text-orange-600 mt-2",children:"Tekeningen kunnen opgeslagen worden naar je eigen lagen."})]})]})}),p.jsxs(bm,{title:"Presets",icon:p.jsx(ioe,{size:16}),children:[p.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Presets zijn vooraf ingestelde combinaties van kaartlagen. Ideaal om snel te wisselen tussen:"}),p.jsxs("ul",{className:"text-xs text-gray-600 space-y-1 ml-4 list-disc",children:[p.jsx("li",{children:"Archeologisch onderzoek (AMK, IKAW, Archeo Onderzoeken)"}),p.jsx("li",{children:"Terreinverkenning (AHN, Bodem, Geomorfologie)"}),p.jsx("li",{children:"Historische context (Oude kaarten, Luchtfoto's)"})]})]}),p.jsx(bm,{title:"Monument Filter",icon:p.jsx(eq,{size:16}),children:p.jsx("p",{className:"text-xs text-gray-600",children:"Filter AMK monumenten op tijdsperiode. Handig om specifieke periodes te onderzoeken zoals de Romeinse tijd, Middeleeuwen of Bronstijd."})}),p.jsx(bm,{title:"Kaart Exporteren",icon:p.jsx(qN,{size:16}),children:p.jsx("p",{className:"text-xs text-gray-600",children:"Exporteer je huidige kaartweergave als afbeelding (PNG/JPEG) of print direct via PDF. Je kunt een titel toevoegen en de datum wordt automatisch toegevoegd."})}),p.jsxs("section",{className:"p-4 bg-gradient-to-br from-green-50 to-blue-50 rounded-xl",children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Tips"}),p.jsxs("ul",{className:"text-xs text-gray-700 space-y-2",children:[p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx(_d,{size:12,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsx("span",{children:"Gebruik de transparantie-slider om lagen over elkaar heen te vergelijken"})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx(_d,{size:12,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsx("span",{children:"Schakel knoppen uit in het menu voor een schoner scherm"})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx(_d,{size:12,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsx("span",{children:"Combineer AHN hoogtekaart met Geomorfologie voor terreinanalyse"})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx(_d,{size:12,className:"text-green-500 flex-shrink-0 mt-0.5"}),p.jsx("span",{children:"Sla vondsten op met locatie en foto voor je eigen administratie"})]})]})]})]}),p.jsx("div",{className:"flex items-center justify-center px-4 py-3 border-t border-gray-100 bg-gray-50 flex-shrink-0",children:p.jsx("button",{onClick:e,className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors border-0 outline-none",children:"Sluiten"})})]})})]})})}function bm({title:t,icon:e,children:n}){return p.jsxs("section",{children:[p.jsxs("h3",{className:"text-sm font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[p.jsx("span",{className:"text-blue-500",children:e}),t]}),n]})}function zR({title:t,items:e}){return p.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg",children:[p.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-1.5",children:t}),p.jsx("div",{className:"space-y-1",children:e.map((n,r)=>p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-blue-500",children:n.icon}),p.jsx("span",{className:"text-xs text-gray-700 font-medium",children:n.name}),p.jsxs("span",{className:"text-xs text-gray-400",children:["- ",n.desc]})]},r))})]})}function SF({icon:t,name:e,desc:n}){return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-gray-500",children:t}),p.jsx("span",{className:"text-xs text-gray-700 font-medium",children:e}),p.jsxs("span",{className:"text-xs text-gray-400",children:["- ",n]})]})}function GR({name:t,items:e}){return p.jsxs("div",{className:"p-2 bg-gray-50 rounded-lg",children:[p.jsx("h4",{className:"text-xs font-semibold text-gray-600 mb-1",children:t}),p.jsx("ul",{className:"text-xs text-gray-500 space-y-0.5",children:e.map((n,r)=>p.jsxs("li",{children:[" ",n]},r))})]})}function qkt({isOpen:t,onClose:e}){const n=Cn(l=>l.setHideWelcomeModal),[r,i]=Y.useState(!1),s=()=>{e()},o=()=>{n(!0),e()},a=()=>{e(),i(!0)};return p.jsxs(p.Fragment,{children:[p.jsx(Wn,{children:t&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 bg-black/40 z-[2000]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s}),p.jsx(gt.div,{className:"fixed inset-x-4 top-4 bottom-4 z-[2001] flex items-center justify-center pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:p.jsxs(gt.div,{className:"bg-white rounded-2xl shadow-2xl overflow-hidden flex flex-col w-full max-w-md max-h-full pointer-events-auto",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{duration:.2},onClick:l=>l.stopPropagation(),children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100 flex-shrink-0",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Hoe werkt de app?"}),p.jsx("button",{onClick:s,className:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors border-0 outline-none",children:p.jsx(Kr,{size:20,className:"text-gray-500"})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[p.jsxs("section",{children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Knoppen op de kaart"}),p.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Aan de linker- en rechterkant vind je tools:"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Em,{icon:p.jsx(Ga,{size:16}),title:"Kaartlagen",description:"Selecteer welke lagen je wilt zien"}),p.jsx(Em,{icon:p.jsx(ev,{size:16}),title:"Zoeken",description:"Zoek naar een adres of plaatsnaam"}),p.jsx(Em,{icon:p.jsx(Ka,{size:16}),title:"GPS Locatie",description:"Volg je positie op de kaart"}),p.jsx(Em,{icon:p.jsx(JH,{size:16}),title:"Presets",description:"Snel wisselen tussen kaartlagen"}),p.jsx(Em,{icon:p.jsx(eq,{size:16}),title:"Monument Filter",description:"Filter monumenten op periode"}),p.jsx(Em,{icon:p.jsx(S2e,{size:16}),title:"Transparantie",description:"Pas doorzichtigheid aan"}),p.jsx(Em,{icon:p.jsx(HN,{size:16}),title:"Menu",description:"Instellingen en meer"}),p.jsx(Em,{icon:p.jsx(E2e,{size:16}),title:"Reset",description:"Kaart naar beginstand"})]})]}),p.jsxs("section",{className:"bg-blue-50 rounded-xl p-3",children:[p.jsx("h3",{className:"text-sm font-semibold text-blue-800 mb-1",children:"Kaartlagen gebruiken"}),p.jsx("p",{className:"text-xs text-blue-700",children:"Klik op een locatie om informatie te zien over monumenten en archeologische gegevens."})]}),p.jsxs("button",{onClick:a,className:"w-full flex items-start gap-2 p-3 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors border-0 outline-none text-left",children:[p.jsx(u2e,{size:18,className:"text-blue-600 flex-shrink-0 mt-0.5"}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-0.5",children:"Handleiding"}),p.jsx("span",{className:"text-xs text-blue-600",children:"Bekijk volledige handleiding "})]})]})]}),p.jsxs("div",{className:"flex items-center justify-end gap-2 px-4 py-3 border-t border-gray-100 bg-gray-50 flex-shrink-0",children:[p.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:bg-gray-200 rounded-lg transition-colors border-0 outline-none",children:"Toon niet meer"}),p.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors border-0 outline-none",children:"Begrepen"})]})]})})]})}),p.jsx(Hkt,{isOpen:r,onClose:()=>i(!1)})]})}function Em({icon:t,title:e,description:n}){return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"w-7 h-7 flex items-center justify-center bg-blue-100 text-blue-600 rounded-lg flex-shrink-0",children:t}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("span",{className:"text-xs font-medium text-gray-700",children:e}),p.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["- ",n]})]})]})}function yg(t,e){const n=t.length;return e<0?t[e+n]:e>=n?t[e-n]:t[e]}function Xx(t,e){const n=t.length;let r=Math.floor(e);const i=e-r;r>=n?r-=n:r<0&&(r+=n);let s=r+1;s>=n&&(s-=n);const o=t[r],a=o[0],l=o[1],c=t[s],u=c[0]-a,h=c[1]-l;return[a+u*i,l+h*i]}const UR={index:-1,endIndex:NaN,closestTargetDistance:1/0};function ySe(t,e,n,r){const i=t[0],s=t[1];let o=1/0,a=-1,l=NaN;for(let h=0;h<e.targets.length;++h){const f=e.targets[h],g=f.coordinates;let y=1/0,_;for(let b=0;b<g.length-1;++b){const T=g[b],A=g[b+1],I=xSe(i,s,T,A);I.squaredDistance<y&&(y=I.squaredDistance,_=b+I.along)}y<o&&(o=y,f.ring&&e.targetIndex===h&&(f.endIndex>f.startIndex?_<f.startIndex&&(_+=g.length):f.endIndex<f.startIndex&&_>f.startIndex&&(_-=g.length)),l=_,a=h)}const c=e.targets[a];let u=c.ring;if(e.targetIndex===a&&u){const h=Xx(c.coordinates,l),f=n.getPixelFromCoordinate(h),g=n.getPixelFromCoordinate(e.startCoord);Tx(f,g)>r&&(u=!1)}if(u){const h=c.coordinates,f=h.length,g=c.startIndex,y=l;if(g<y){const _=HR(h,g,y);HR(h,g,y-f)<_&&(l-=f)}else{const _=HR(h,g,y);HR(h,g,y+f)<_&&(l+=f)}}return UR.index=a,UR.endIndex=l,UR.closestTargetDistance=o,UR}function vSe(t,e){const n=[];for(let r=0;r<e.length;++r){const s=e[r].getGeometry();_Se(t,s,n)}return n}function _Se(t,e,n){if(e instanceof ts){BR(t,e.getCoordinates(),!1,n);return}if(e instanceof vh){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i)BR(t,r[i],!1,n);return}if(e instanceof Il){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i)BR(t,r[i],!0,n);return}if(e instanceof mp){const r=e.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i];for(let a=0,l=o.length;a<l;++a)BR(t,o[a],!0,n)}return}if(e instanceof uu){const r=e.getGeometries();for(let i=0;i<r.length;++i)_Se(t,r[i],n);return}}function BR(t,e,n,r){const i=t[0],s=t[1];for(let o=0,a=e.length-1;o<a;++o){const l=e[o],c=e[o+1],u=xSe(i,s,l,c);if(u.squaredDistance===0){const h=o+u.along;r.push({coordinates:e,ring:n,startIndex:h,endIndex:h});return}}}function WR(t,e){return np(t[0],t[1],e[0],e[1])}function HR(t,e,n){let r,i;e<n?(r=e,i=n):(r=n,i=e);const s=Math.ceil(r),o=Math.floor(i);if(s>o){const l=Xx(t,r),c=Xx(t,i);return WR(l,c)}let a=0;if(r<s){const l=Xx(t,r),c=yg(t,s);a+=WR(l,c)}if(o<i){const l=yg(t,o),c=Xx(t,i);a+=WR(l,c)}for(let l=s;l<o-1;++l){const c=yg(t,l),u=yg(t,l+1);a+=WR(c,u)}return a}const TF={along:0,squaredDistance:0};function xSe(t,e,n,r){const i=n[0],s=n[1],o=r[0],a=r[1],l=o-i,c=a-s;let u=0,h=i,f=s;return(l!==0||c!==0)&&(u=ri(((t-i)*l+(e-s)*c)/(l*l+c*c),0,1),h+=l*u,f+=c*u),TF.along=u,TF.squaredDistance=J2(np(t,e,h,f),10),TF}const qR={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class KR extends Tc{constructor(e,n){super(e),this.feature=n}}class wSe extends hv{constructor(e){const n=e;n.stopDown||(n.stopDown=X2),super(n),this.on,this.once,this.un,this.options_=e,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=Ykt(this.type_),this.stopClick_=!!e.stopClick,this.ignoreNextUpEvent_=!1,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Lg,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let r=e.geometryFunction;if(!r){const i=this.mode_;if(i==="Circle")r=(s,o,a)=>{const l=o||new D5([NaN,NaN]),c=Li(s[0]),u=Qw(c,Li(s[s.length-1]));return l.setCenterAndRadius(c,Math.sqrt(u),this.geometryLayout_),l};else{let s;i==="Point"?s=Ti:i==="LineString"?s=ts:i==="Polygon"&&(s=Il),r=(o,a,l)=>(a?i==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a)}}this.geometryFunction_=r,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Ol({source:new Nl({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:Kkt(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:JG,this.freehandCondition_,e.freehand?this.freehandCondition_=ew:this.freehandCondition_=e.freehandCondition?e.freehandCondition:r4,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(s8.ACTIVE,this.updateState_)}setTrace(e){let n;e?e===!0?n=ew:n=e:n=n4,this.traceCondition_=n}setMap(e){super.setMap(e),this.updateState_()}setFreehand(e){this.freehand_=e,this.freehand_?this.freehandCondition_=ew:this.freehandCondition_=this.options_&&this.options_.freehandCondition?this.options_.freehandCondition:r4}getOverlay(){return this.overlay_}getFreehand(){return this.freehand_}handleEvent(e){e.originalEvent.type===wn.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let n=e.type===or.POINTERMOVE,r=!0;return!this.freehand_&&this.lastDragTime_&&e.type===or.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===or.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),r=!1):this.freehand_&&e.type===or.POINTERDOWN?r=!1:n&&this.getPointerCount()<2?(r=e.type===or.POINTERMOVE,r&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===or.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===or.DBLCLICK&&(r=!1),super.handleEvent(e)&&r}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Of(or.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const n=this.getMap(),r=n.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),i=n.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=ka([r,i]),o=this.traceSource_.getFeaturesInExtent(s);if(o.length===0)return;const a=vSe(e.coordinate,o);a.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,n){const r=e.startIndex<=e.endIndex,i=e.startIndex<=n;r===i?r&&n>e.endIndex||!r&&n<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,n):(r&&n<e.endIndex||!r&&n>e.endIndex)&&this.removeTracedCoordinates_(n,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,n))}removeTracedCoordinates_(e,n){if(e===n)return;let r=0;if(e<n){const i=Math.ceil(e);let s=Math.floor(n);s===n&&(s-=1),r=s-i+1}else{const i=Math.floor(e);let s=Math.ceil(n);s===n&&(s+=1),r=i-s+1}r>0&&this.removeLastPoints_(r)}addTracedCoordinates_(e,n,r){if(n===r)return;const i=[];if(n<r){const s=Math.ceil(n);let o=Math.floor(r);o===r&&(o-=1);for(let a=s;a<=o;++a)i.push(yg(e.coordinates,a))}else{const s=Math.floor(n);let o=Math.ceil(r);o===r&&(o+=1);for(let a=s;a>=o;--a)i.push(yg(e.coordinates,a))}i.length&&this.appendCoordinates(i)}updateTrace_(e){const n=this.traceState_;if(!n.active)return;if(n.targetIndex===-1){const a=e.map.getPixelFromCoordinate(n.startCoord);if(Tx(a,e.pixel)<this.snapTolerance_)return}const r=ySe(e.coordinate,n,this.getMap(),this.snapTolerance_);if(n.targetIndex!==r.index){if(n.targetIndex!==-1){const l=n.targets[n.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=n.targets[r.index];this.addTracedCoordinates_(a,a.startIndex,r.endIndex)}else{const a=n.targets[n.targetIndex];this.addOrRemoveTracedCoordinates_(a,r.endIndex)}n.targetIndex=r.index;const i=n.targets[n.targetIndex];i.endIndex=r.endIndex;const s=Xx(i.coordinates,i.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleDragEvent(e){this.ignoreNextUpEvent_=!0,super.handleDragEvent(e)}handleUpEvent(e){let n=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const r=this.traceState_.active;if(this.ignoreNextUpEvent_||this.toggleTraceState_(e),this.shouldHandle_){const i=!this.finishCoordinate_;i&&this.startDrawing_(e.coordinate),!i&&this.freehand_?this.finishDrawing():!this.freehand_&&(!i||this.mode_==="Point")&&(this.atFinish_(e.pixel,r)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),n=!1}else this.freehand_&&this.abortDrawing()}return this.ignoreNextUpEvent_=!1,!n&&this.stopClick_&&e.preventDefault(),n}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const n=this.downPx_,r=e.pixel,i=n[0]-r[0],s=n[1]-r[1],o=i*i+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,n){let r=!1;if(this.sketchFeature_){let i=!1,s=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")r=!0;else if(o==="Circle")r=this.sketchCoords_.length===2;else if(o==="LineString")i=!n&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;i=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],n?s=[a[0][0]]:s=[a[0][0],a[0][a[0].length-2]]}if(i){const a=this.getMap();for(let l=0,c=s.length;l<c;l++){const u=s[l],h=a.getPixelFromCoordinate(u),f=e[0]-h[0],g=e[1]-h[1],y=this.freehand_?1:this.snapTolerance_;if(r=Math.sqrt(f*f+g*g)<=y,r){this.finishCoordinate_=u;break}}}}return r}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new yr(new Ti(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new yr);const n=e.getLinearRing(0);let r=this.sketchLine_.getGeometry();r?(r.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),r.changed()):(r=new ts(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(r))}startDrawing_(e){const n=this.getMap().getView().getProjection(),r=V3(this.geometryLayout_);for(;e.length<r;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new yr(new ts(this.sketchLineCoords_)));const i=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new yr,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new KR(qR.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const n=this.getMap(),r=this.sketchFeature_.getGeometry(),i=n.getView().getProjection(),s=V3(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(n.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,r,i),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),r.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(r):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();let i,s;const o=this.mode_;return o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():i=!0),s.push(e.slice()),this.geometryFunction_(s,n,r)):o==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():i=!0),s.push(e.slice()),i&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),i=this.mode_;for(let s=0;s<e;++s){let o;if(i==="LineString"||i==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,n,r),n.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(n)}else if(i==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,n,r)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let n=this.sketchCoords_;const r=e.getGeometry(),i=this.getMap().getView().getProjection();return this.mode_==="LineString"?(n.pop(),this.geometryFunction_(n,r,i)):this.mode_==="Polygon"&&(n[0].pop(),this.geometryFunction_(n,r,i),n=r.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new o0([n])):this.type_==="MultiLineString"?e.setGeometry(new vh([n])):this.type_==="MultiPolygon"&&e.setGeometry(new mp([n])),this.dispatchEvent(new KR(qR.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new KR(qR.DRAWABORT,e))}appendCoordinates(e){const n=this.mode_,r=!this.sketchFeature_;r&&this.startDrawing_(e[0]);let i;if(n==="LineString"||n==="Circle")i=this.sketchCoords_;else if(n==="Polygon")i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;r&&i.shift(),i.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const r=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=r.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new yr(new Ti(i)),this.updateSketchFeatures_(),this.dispatchEvent(new KR(qR.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const n=this.overlay_.getSource();n.clear(!0),n.addFeatures(e)}updateState_(){const e=this.getMap(),n=this.getActive();(!e||!n)&&this.abortDrawing(),this.overlay_.setMap(n?e:null)}}function Kkt(){const t=TG();return function(e,n){return t[e.getGeometry().getType()]}}function Ykt(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}const Rae=0,ck=1,Mae=[0,0,0,0],Rw=[],kF={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};function AF(t,e,n){let r;switch(e){case"LineString":r=t;break;case"MultiLineString":case"Polygon":r=t[n[0]];break;case"MultiPolygon":r=t[n[1]][n[0]];break}return r}class IF extends Tc{constructor(e,n,r){super(e),this.features=n,this.mapBrowserEvent=r}}class Xkt extends hv{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:Tce,this.defaultDeleteCondition_=function(r){return rRe(r)&&Ece(r)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:ew,this.vertexFeature_=null,this.vertexSegments_=null,this.lastCoordinate_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new YF,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Ol({source:new Nl({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:Jkt(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.traceSource_=e.traceSource||e.source||null,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSegments_=null,this.hitDetection_=null;let n;if(e.features?n=e.features:e.source&&(this.source_=e.source,n=new Da(this.source_.getFeatures()),this.source_.addEventListener(io.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(io.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!n)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=n,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(As.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(As.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}setTrace(e){let n;e?e===!0?n=ew:n=e:n=n4,this.traceCondition_=n}addFeature_(e){const n=e.getGeometry();if(n){const i=this.SEGMENT_WRITERS_[n.getType()];i&&i(e,n)}const r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastCoordinate_),e.addEventListener(wn.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,n){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Da;const r=this.featuresBeingModified_.getArray();for(let i=0,s=n.length;i<s;++i){const o=n[i].feature;o&&!r.includes(o)&&this.featuresBeingModified_.push(o)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new IF(kF.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(wn.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const n=this.rBush_,r=[];n.forEach(function(i){e===i.feature&&r.push(i)});for(let i=r.length-1;i>=0;--i){const s=r[i];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===s&&this.dragSegments_.splice(o,1);n.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const n=e.target;this.removeFeature_(n),this.addFeature_(n)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,n){const r=n.getCoordinates(),i={feature:e,geometry:n,segment:[r,r]};this.rBush_.insert(n.getExtent(),i)}writeMultiPointGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i],a={feature:e,geometry:n,depth:[i],index:i,segment:[o,o]};this.rBush_.insert(n.getExtent(),a)}}writeLineStringGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length-1;i<s;++i){const o=r.slice(i,i+2),a={feature:e,geometry:n,index:i,segment:o};this.rBush_.insert(ka(o),a)}}writeMultiLineStringGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),u={feature:e,geometry:n,depth:[i],index:a,segment:c};this.rBush_.insert(ka(c),u)}}}writePolygonGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),u={feature:e,geometry:n,depth:[i],index:a,segment:c};this.rBush_.insert(ka(c),u)}}}writeMultiPolygonGeometry_(e,n){const r=n.getCoordinates();for(let i=0,s=r.length;i<s;++i){const o=r[i];for(let a=0,l=o.length;a<l;++a){const c=o[a];for(let u=0,h=c.length-1;u<h;++u){const f=c.slice(u,u+2),g={feature:e,geometry:n,depth:[a,i],index:u,segment:f};this.rBush_.insert(ka(f),g)}}}}writeCircleGeometry_(e,n){const r=n.getCenter(),i={feature:e,geometry:n,index:Rae,segment:[r,r]},s={feature:e,geometry:n,index:ck,segment:[r,r]},o=[i,s];i.featureSegments=o,s.featureSegments=o,this.rBush_.insert(eT(r),i);let a=n;this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(e,n){const r=n.getGeometriesArray();for(let i=0;i<r.length;++i){const s=r[i],o=this.SEGMENT_WRITERS_[s.getType()];o(e,s)}}createOrUpdateVertexFeature_(e,n,r,i){let s=this.vertexFeature_;return s?s.getGeometry().setCoordinates(e):(s=new yr(new Ti(e)),this.vertexFeature_=s,this.overlay_.getSource().addFeature(s)),s.set("features",n),s.set("geometries",r),s.set("existing",i),s}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let n;return!e.map.getView().getInteracting()&&e.type==or.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=or.SINGLECLICK||!this.ignoreNextSingleClick_?n=this.removePoint():n=!0),e.type==or.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!n}findInsertVerticesAndUpdateDragSegments_(e){if(this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null,!this.vertexFeature_)return;this.getMap().getView().getProjection();const r=[],i=this.vertexFeature_.getGeometry().getCoordinates(),s=ka([i]),o=this.rBush_.getInExtent(s),a={};o.sort(Zkt);for(let l=0,c=o.length;l<c;++l){const u=o[l],h=u.segment;let f=Qt(u.geometry);const g=u.depth;if(g&&(f+="-"+g.join("-")),a[f]||(a[f]=new Array(2)),u.geometry.getType()==="Circle"&&u.index===ck){const y=Oae(e,u);Ia(y,i)&&!a[f][0]&&(this.dragSegments_.push([u,0]),a[f][0]=u);continue}if(Ia(h[0],i)&&!a[f][0]){this.dragSegments_.push([u,0]),a[f][0]=u;continue}if(Ia(h[1],i)&&!a[f][1]){if(a[f][0]&&a[f][0].index===0){let y=u.geometry.getCoordinates();switch(u.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":y=y[g[1]];case"Polygon":if(u.index!==y[g[0]].length-2)continue;break}}this.dragSegments_.push([u,1]),a[f][1]=u;continue}Qt(h)in this.vertexSegments_&&!a[f][0]&&!a[f][1]&&r.push(u)}return r}deactivateTrace_(){this.traceState_={active:!1}}updateTrace_(e){const n=this.traceState_;if(!n.active)return;if(n.targetIndex===-1){const s=e.map.getPixelFromCoordinate(n.startCoord);if(Tx(s,e.pixel)<this.pixelTolerance_)return}const r=ySe(e.coordinate,n,e.map,this.pixelTolerance_);if(n.targetIndex===-1&&Math.sqrt(r.closestTargetDistance)/e.map.getView().getResolution()>this.pixelTolerance_)return;if(n.targetIndex!==r.index){if(n.targetIndex!==-1){const o=n.targets[n.targetIndex];this.removeTracedCoordinates_(o.startIndex,o.endIndex)}else for(const o of this.traceSegments_){const a=o[0],l=a.geometry,c=o[1],u=l.getCoordinates();AF(u,l.getType(),a.depth).splice(a.index+c,1),l.setCoordinates(u),c===0&&(a.index-=1)}const s=n.targets[r.index];this.addTracedCoordinates_(s,s.startIndex,r.endIndex)}else{const s=n.targets[n.targetIndex];this.addOrRemoveTracedCoordinates_(s,r.endIndex)}n.targetIndex=r.index;const i=n.targets[n.targetIndex];i.endIndex=r.endIndex}getTraceCandidates_(e){const n=this.getMap(),r=this.pixelTolerance_,i=n.getCoordinateFromPixel([e.pixel[0]-r,e.pixel[1]+r]),s=n.getCoordinateFromPixel([e.pixel[0]+r,e.pixel[1]-r]),o=ka([i,s]);return this.traceSource_.getFeaturesInExtent(o)}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_(),this.traceSegments_=null;return}const n=this.getTraceCandidates_(e);if(n.length===0)return;const r=vSe(e.coordinate,n);r.length&&(this.traceState_={active:!0,startCoord:e.coordinate.slice(),targets:r,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,n){const r=e.startIndex<=e.endIndex,i=e.startIndex<=n;r===i?r&&n>e.endIndex||!r&&n<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,n):(r&&n<e.endIndex||!r&&n>e.endIndex)&&this.removeTracedCoordinates_(n,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,n))}removeTracedCoordinates_(e,n){if(e===n)return;let r=0;if(e<n){const i=Math.ceil(e);let s=Math.floor(n);s===n&&(s-=1),r=s-i+1}else{const i=Math.floor(e);let s=Math.ceil(n);s===n&&(s+=1),r=i-s+1}if(r>0)for(const i of this.traceSegments_){const s=i[0],o=s.geometry,a=i[1];let l=i[0].index+1;a===1&&(l-=r);const c=o.getCoordinates();AF(c,o.getType(),s.depth).splice(l,r),o.setCoordinates(c),a===1&&(s.index-=r)}}addTracedCoordinates_(e,n,r){if(n===r)return;const i=[];if(n<r){const s=Math.ceil(n);let o=Math.floor(r);o===r&&(o-=1);for(let a=s;a<=o;++a)i.push(yg(e.coordinates,a))}else{const s=Math.floor(n);let o=Math.ceil(r);o===r&&(o+=1);for(let a=s;a>=o;--a)i.push(yg(e.coordinates,a))}if(i.length)for(const s of this.traceSegments_){const o=s[0],a=o.geometry,l=s[1],c=o.index+1;l===0&&i.reverse();const u=a.getCoordinates();AF(u,a.getType(),o.depth).splice(c,0,...i),a.setCoordinates(u),l===1&&(o.index+=i.length)}}updateGeometry_(e,n){const r=n[0],i=r.depth;let s;const o=r.segment,a=r.geometry,l=n[1];for(;e.length<a.getStride();)e.push(o[l][e.length]);switch(a.getType()){case"Point":s=e,o[0]=e,o[1]=e;break;case"MultiPoint":s=a.getCoordinates(),s[r.index]=e,o[0]=e,o[1]=e;break;case"LineString":s=a.getCoordinates(),s[r.index+l]=e,o[l]=e;break;case"MultiLineString":s=a.getCoordinates(),s[i[0]][r.index+l]=e,o[l]=e;break;case"Polygon":s=a.getCoordinates(),s[i[0]][r.index+l]=e,o[l]=e;break;case"MultiPolygon":s=a.getCoordinates(),s[i[1]][i[0]][r.index+l]=e,o[l]=e;break;case"Circle":const c=a;if(o[0]=e,o[1]=e,r.index===Rae)this.changingFeature_=!0,c.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0,this.getMap().getView().getProjection();let u=Tx(Li(c.getCenter()),Li(e));c.setRadius(u),this.changingFeature_=!1}break}s&&this.setGeometryCoordinates_(a,s)}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([o])=>o));const n=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],r=[],i=[],s=this.traceState_.active&&!this.traceSegments_?this.traceState_.startCoord:null;if(s){this.traceSegments_=[];for(const o of this.dragSegments_){const a=o[0];Tx(Qz(s,a.segment),s)/e.map.getView().getResolution()<1&&this.traceSegments_.push(o)}}for(let o=0,a=this.dragSegments_.length;o<a;++o){const l=this.dragSegments_[o],c=l[0],u=c.feature;r.includes(u)||r.push(u);const h=c.geometry;i.includes(h)||i.push(h),this.updateGeometry_(n,l)}this.updateTrace_(e),this.createOrUpdateVertexFeature_(n,r,i,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const n=e.coordinate,r=this.findInsertVerticesAndUpdateDragSegments_(n);if(r?.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,r),this.vertexFeature_)){const i=this.vertexFeature_.getGeometry().getCoordinates();for(let s=r.length-1;s>=0;--s)this.insertVertex_(r[s],i);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let n=this.dragSegments_.length-1;n>=0;--n){const r=this.dragSegments_[n][0],i=r.geometry;if(i.getType()==="Circle"){const s=i,o=s.getCenter(),a=r.featureSegments[0],l=r.featureSegments[1];a.segment[0]=o,a.segment[1]=o,l.segment[0]=o,l.segment[1]=o,this.rBush_.update(eT(o),a);let c=s;this.rBush_.update(c.getExtent(),l)}else this.rBush_.update(ka(r.segment),r)}return this.featuresBeingModified_&&(this.toggleTraceState_(e),this.dispatchEvent(new IF(kF.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastCoordinate_=e.coordinate,this.handlePointerAtPixel_(this.lastCoordinate_)}handlePointerAtPixel_(e){const n=this.getMap(),r=n.getPixelFromCoordinate(e);n.getView().getProjection();const i=function(a,l){return Nae(e,a)-Nae(e,l)};let s,o;if(this.hitDetection_){const a=typeof this.hitDetection_=="object"?l=>l===this.hitDetection_:void 0;n.forEachFeatureAtPixel(r,(l,c,u)=>{u&&u.getType()==="Point"&&(u=new Ti(k1(u.getCoordinates())));const h=u||l.getGeometry();if(h&&h.getType()==="Point"&&l instanceof yr&&this.features_.getArray().includes(l)){o=h;const f=l.getGeometry().getFlatCoordinates().slice(0,2);s=[{feature:l,geometry:o,segment:[f,f]}]}return!0},{layerFilter:a})}if(!s){const a=oh(eT(e,Mae)),l=n.getView().getResolution()*this.pixelTolerance_,c=aG(sh(a,l,Mae));s=this.rBush_.getInExtent(c)}if(s&&s.length>0){const a=s.sort(i)[0],l=a.segment;let c=Oae(e,a);const u=n.getPixelFromCoordinate(c);let h=Tx(r,u);if(o||h<=this.pixelTolerance_){const f={};if(f[Qt(l)]=!0,this.snapToPointer_||(this.delta_[0]=c[0]-e[0],this.delta_[1]=c[1]-e[1]),a.geometry.getType()==="Circle"&&a.index===ck)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(c,[a.feature],[a.geometry],this.snappedToVertex_);else{const g=n.getPixelFromCoordinate(l[0]),y=n.getPixelFromCoordinate(l[1]),_=Qw(u,g),b=Qw(u,y);if(h=Math.sqrt(Math.min(_,b)),this.snappedToVertex_=h<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(c=_>b?l[1]:l[0]),this.createOrUpdateVertexFeature_(c,[a.feature],[a.geometry],this.snappedToVertex_);const T={};T[Qt(a.geometry)]=!0;for(let A=1,I=s.length;A<I;++A){const P=s[A].segment;if(Ia(l[0],P[0])&&Ia(l[1],P[1])||Ia(l[0],P[1])&&Ia(l[1],P[0])){const N=Qt(s[A].geometry);N in T||(T[N]=!0,f[Qt(P)]=!0)}else break}}this.vertexSegments_=f;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,n){const r=e.segment,i=e.feature,s=e.geometry,o=e.depth,a=e.index;let l;for(;n.length<s.getStride();)n.push(0);switch(s.getType()){case"MultiLineString":l=s.getCoordinates(),l[o[0]].splice(a+1,0,n);break;case"Polygon":l=s.getCoordinates(),l[o[0]].splice(a+1,0,n);break;case"MultiPolygon":l=s.getCoordinates(),l[o[1]][o[0]].splice(a+1,0,n);break;case"LineString":l=s.getCoordinates(),l.splice(a+1,0,n);break;default:return!1}this.setGeometryCoordinates_(s,l);const c=this.rBush_;c.remove(e),this.updateSegmentIndices_(s,a,o,1);const u={segment:[r[0],n],feature:i,geometry:s,depth:o,index:a};c.insert(ka(u.segment),u),this.dragSegments_.push([u,1]);const h={segment:[n,r[1]],feature:i,geometry:s,depth:o,index:a+1};return c.insert(ka(h.segment),h),this.dragSegments_.push([h,0]),!0}updatePointer_(e){return e&&this.findInsertVerticesAndUpdateDragSegments_(e),this.vertexFeature_?.getGeometry().getCoordinates()}getPoint(){const e=this.vertexFeature_?.getGeometry().getCoordinates();return e?k1(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(r=>r.getType()==="Circle"||r.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(ka([e])).some(({segment:r})=>Ia(r[0],e)||Ia(r[1],e))}removePoint(e){if(e&&(e=Li(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=or.POINTERDRAG){const n=this.lastPointerEvent_;this.willModifyFeatures_(n,this.dragSegments_.map(([i])=>i));const r=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new IF(kF.MODIFYEND,this.featuresBeingModified_,n)),this.featuresBeingModified_=null,r}return!1}removeVertex_(){const e=this.dragSegments_,n={};let r=!1,i,s,o,a,l,c,u,h,f,g,y;for(l=e.length-1;l>=0;--l)o=e[l],g=o[0],y=Qt(g.feature),g.depth&&(y+="-"+g.depth.join("-")),y in n||(n[y]={}),o[1]===0?(n[y].right=g,n[y].index=g.index):o[1]==1&&(n[y].left=g,n[y].index=g.index+1);for(y in n){switch(f=n[y].right,u=n[y].left,c=n[y].index,h=c-1,u!==void 0?g=u:g=f,h<0&&(h=0),a=g.geometry,s=a.getCoordinates(),i=s,r=!1,a.getType()){case"MultiLineString":s[g.depth[0]].length>2&&(s[g.depth[0]].splice(c,1),r=!0);break;case"LineString":s.length>2&&(s.splice(c,1),r=!0);break;case"MultiPolygon":i=i[g.depth[1]];case"Polygon":i=i[g.depth[0]],i.length>4&&(c==i.length-1&&(c=0),i.splice(c,1),r=!0,c===0&&(i.pop(),i.push(i[0]),h=i.length-1));break}if(r){this.setGeometryCoordinates_(a,s);const _=[];if(u!==void 0&&(this.rBush_.remove(u),_.push(u.segment[0])),f!==void 0&&(this.rBush_.remove(f),_.push(f.segment[1])),u!==void 0&&f!==void 0){const b={depth:g.depth,feature:g.feature,geometry:g.geometry,index:h,segment:_};this.rBush_.insert(ka(b.segment),b)}this.updateSegmentIndices_(a,c,g.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return r}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(r=>r.getType()==="Circle"||r.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(ka([e])).some(({segment:r})=>!(Ia(r[0],e)||Ia(r[1],e)))}insertPoint(e){const n=e?Li(e,this.getMap().getView().getProjection()):this.vertexFeature_?.getGeometry().getCoordinates();return n?this.findInsertVerticesAndUpdateDragSegments_(n).reduce((i,s)=>i||this.insertVertex_(s,n),!1):!1}setGeometryCoordinates_(e,n){this.changingFeature_=!0,e.setCoordinates(n),this.changingFeature_=!1}updateSegmentIndices_(e,n,r,i){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(r===void 0||s.depth===void 0||Bd(s.depth,r))&&s.index>n&&(s.index+=i)})}}function Zkt(t,e){return t.index-e.index}function Nae(t,e,n){const r=e.geometry;if(r.getType()==="Circle"){let s=r;if(e.index===ck){const o=Qw(s.getCenter(),Li(t)),a=Math.sqrt(o)-s.getRadius();return a*a}}const i=Li(t);return Rw[0]=Li(e.segment[0]),Rw[1]=Li(e.segment[1]),tke(i,Rw)}function Oae(t,e,n){const r=e.geometry;if(r.getType()==="Circle"&&e.index===ck)return k1(r.getClosestPoint(Li(t)));const i=Li(t);return Rw[0]=Li(e.segment[0]),Rw[1]=Li(e.segment[1]),k1(Qz(i,Rw))}function Jkt(){const t=TG();return function(e,n){return t.Point}}const YR={SELECT:"select"};class XR extends Tc{constructor(e,n,r,i){super(e),this.selected=n,this.deselected=r,this.mapBrowserEvent=i}}const ZR={};class Zq extends tb{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:Ece,this.addCondition_=e.addCondition?e.addCondition:n4,this.removeCondition_=e.removeCondition?e.removeCondition:n4,this.toggleCondition_=e.toggleCondition?e.toggleCondition:r4,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Lg,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:Qkt(),this.features_=e.features||new Da;let n;if(e.layers)if(typeof e.layers=="function")n=e.layers;else{const r=e.layers;n=function(i){return r.includes(i)}}else n=Lg;this.layerFilter_=n,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,n){this.featureLayerAssociation_[Qt(e)]=n}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[Qt(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(As.ADD,this.boundAddFeature_),this.features_.addEventListener(As.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(As.ADD,this.boundAddFeature_),this.features_.removeEventListener(As.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const n=e.element;if(this.style_&&this.applySelectedStyle_(n),!this.getLayer(n)){const r=this.findLayerOfFeature_(n);r&&this.addFeatureLayerAssociation_(n,r)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}findLayerOfFeature_(e){return this.getMap().getAllLayers().find(function(r){if(r instanceof Ol&&r.getSource()&&r.getSource().hasFeature(e))return r})}getStyle(){return this.style_}applySelectedStyle_(e){const n=Qt(e);n in ZR||(ZR[n]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const n=this.getMap().getInteractions().getArray();for(let i=n.length-1;i>=0;--i){const s=n[i];if(s!==this&&s instanceof Zq&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(s.getStyle());return}}const r=Qt(e);e.setStyle(ZR[r]),delete ZR[r]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[Qt(e)]}selectFeatureInternal_(e,n,r){if(!(e instanceof yr)||!this.filter_(e,n))return;const i=this.getFeatures();return i.getArray().includes(e)||(this.addFeatureLayerAssociation_(e,n),i.push(e),r?.push(e)),e}selectFeature(e){const n=this.findLayerOfFeature_(e);if(!this.layerFilter_(n))return!1;const r=this.selectFeatureInternal_(e,n);return r&&this.dispatchEvent(new XR(YR.SELECT,[r],[],void 0)),!!r}removeFeatureInternal_(e,n){const r=this.getFeatures();if(!(!(e instanceof yr)||!r.getArray().includes(e)))return r.remove(e),this.removeFeatureLayerAssociation_(e),n?.push(e),e}deselectFeature(e){const n=this.removeFeatureInternal_(e);return n&&this.dispatchEvent(new XR(YR.SELECT,[],[n],void 0)),!!n}toggleFeature(e){this.deselectFeature(e)||this.selectFeature(e)}clearSelection(){ov(this.featureLayerAssociation_);const e=this.getFeatures(),n=e.getArray().slice();e.clear(),n.length!==0&&this.dispatchEvent(new XR(YR.SELECT,[],n,void 0))}handleEvent(e){if(!this.condition_(e))return!0;const n=this.addCondition_(e),r=this.removeCondition_(e),i=this.toggleCondition_(e),s=!n&&!r&&!i,o=e.map,a=this.getFeatures(),l=[],c=[];if(s){let u=!1;o.forEachFeatureAtPixel(e.pixel,(h,f)=>{if(u=!0,!!this.selectFeatureInternal_(h,f,c))return!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let h=a.getLength()-1;h>=0;--h){const f=a.item(h);(c.length>0&&!c.includes(f)||!u)&&this.removeFeatureInternal_(f,l)}}else o.forEachFeatureAtPixel(e.pixel,(u,h)=>{let f;if((r||i)&&(f=this.removeFeatureInternal_(u,l)),(n||i)&&!f&&(f=this.selectFeatureInternal_(u,h,c)),!!f)return!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});return(c.length>0||l.length>0)&&this.dispatchEvent(new XR(YR.SELECT,c,l,e)),!0}}function Qkt(){const t=TG();return xr(t.Polygon,t.LineString),xr(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}function eAt(){const t=li(y=>y.map),e=gr(y=>y.setDrawingMode),[n,r]=Y.useState(!1),[i,s]=Y.useState(null),[o,a]=Y.useState(0),l=Y.useRef(null),c=Y.useRef(null),u=Y.useRef(null),h=Y.useRef(null);Y.useEffect(()=>{if(!t)return;const y=new Nl;c.current=y;const _=new Ol({source:y,style:tAt,zIndex:1e3,properties:{name:"measure-layer"}});return l.current=_,t.addLayer(_),()=>{l.current&&t.removeLayer(l.current)}},[t]),Y.useEffect(()=>(e(n),()=>{n&&e(!1)}),[n,e]),Y.useEffect(()=>{if(!(!t||!c.current)&&n){const y=new wSe({source:c.current,type:"LineString",style:nAt});u.current=y;let _=null;return y.on("drawstart",b=>{_=b.feature,s(null);const T=_.getGeometry();T&&(h.current=T.on("change",()=>{const I=dk(T,{projection:"EPSG:3857"});s(Lae(I))}))}),y.on("drawend",b=>{h.current&&(MF(h.current),h.current=null);const T=b.feature.getGeometry(),A=dk(T,{projection:"EPSG:3857"}),I=Lae(A);b.feature.set("distance",I),s(I),a(P=>P+1),_=null}),t.addInteraction(y),()=>{u.current&&(t.removeInteraction(u.current),u.current=null),h.current&&(MF(h.current),h.current=null)}}},[t,n]);const f=()=>{r(!n),n&&s(null)},g=()=>{c.current&&(c.current.clear(),a(0),s(null))};return p.jsxs(p.Fragment,{children:[p.jsx(gt.button,{onClick:f,className:`fixed top-[90px] left-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${n?"bg-blue-500 text-white":"bg-white/80 hover:bg-white/90 text-gray-600"}`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Afstanden meten",children:p.jsx(up,{size:20})}),p.jsx(Wn,{children:n&&p.jsxs(gt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed top-[90px] left-[56px] z-[801] bg-white/95 rounded-xl shadow-lg backdrop-blur-sm overflow-hidden min-w-[180px]",children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-blue-500",children:[p.jsx("span",{className:"font-medium text-white text-xs",children:"Meten"}),p.jsx("button",{onClick:f,className:"p-0.5 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Kr,{size:14,className:"text-white"})})]}),p.jsxs("div",{className:"p-3 space-y-2",children:[p.jsx("p",{className:"text-xs text-gray-500",children:"Klik om te meten. Dubbelklik om te stoppen."}),i&&p.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[p.jsx("div",{className:"text-xs text-blue-600 font-medium",children:"Afstand"}),p.jsx("div",{className:"text-lg font-bold text-blue-700",children:i})]}),o>0&&p.jsxs("button",{onClick:g,className:"w-full flex items-center justify-center gap-1.5 px-3 py-1.5 text-xs text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(Th,{size:12}),"Wis metingen (",o,")"]})]})]})})]})}function Lae(t){return t>=1e3?`${(t/1e3).toFixed(2)} km`:`${Math.round(t)} m`}function tAt(t){const e=t.get("distance");return new vn({stroke:new Pn({color:"#3b82f6",width:3,lineDash:[10,10]}),image:new ms({radius:5,fill:new Dn({color:"#3b82f6"}),stroke:new Pn({color:"#ffffff",width:2})}),text:e?new pc({text:e,font:"bold 12px sans-serif",fill:new Dn({color:"#1e40af"}),stroke:new Pn({color:"#ffffff",width:3}),offsetY:-15,placement:"line",overflow:!0}):void 0})}function nAt(){return new vn({stroke:new Pn({color:"#ef4444",width:3,lineDash:[10,10]}),image:new ms({radius:5,fill:new Dn({color:"#ef4444"}),stroke:new Pn({color:"#ffffff",width:2})})})}const PF="Mijn Tekeningen";function rAt(){const t=li(L=>L.map),e=gr(L=>L.setDrawingMode),[n,r]=Y.useState(!1),[i,s]=Y.useState("select"),[o,a]=Y.useState(0),[l,c]=Y.useState(null),{layers:u,addLayer:h,addPoint:f,getLayer:g}=ps(),y=Y.useRef(null),_=Y.useRef(null),b=Y.useRef(null),T=Y.useRef(null),A=Y.useRef(null);Y.useEffect(()=>{if(!t)return;const L=new Nl;_.current=L;const C=new Ol({source:L,style:iAt,zIndex:999,properties:{name:"draw-preview-layer"}});return y.current=C,t.addLayer(C),()=>{y.current&&t.removeLayer(y.current)}},[t]),Y.useEffect(()=>(e(n),()=>{n&&e(!1)}),[n,e]),Y.useEffect(()=>{if(!(!t||!_.current)&&(b.current&&(t.removeInteraction(b.current),b.current=null),T.current&&(t.removeInteraction(T.current),T.current=null),A.current&&(t.removeInteraction(A.current),A.current=null),!!n))if(i==="select"){const L=new Zq({layers:[y.current],style:oAt});T.current=L;const C=new Xkt({features:L.getFeatures()});A.current=C,t.addInteraction(L),t.addInteraction(C);const M=O=>{if(O.key==="Delete"||O.key==="Backspace"){const D=L.getFeatures();D.forEach(V=>{_.current?.removeFeature(V)}),D.clear(),a(_.current?.getFeatures().length||0)}};return document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M),T.current&&t.removeInteraction(T.current),A.current&&t.removeInteraction(A.current)}}else{const L=i==="point"?"Point":i==="line"?"LineString":"Polygon",C=new wSe({source:_.current,type:L,style:sAt});return b.current=C,C.on("drawstart",M=>{c(null);const O=M.feature.getGeometry();O&&O.on("change",()=>{if(i==="line"){const D=dk(O,{projection:"EPSG:3857"});c(Dae(D))}else if(i==="polygon"){const D=$F(O,{projection:"EPSG:3857"});c(jae(D))}})}),C.on("drawend",M=>{const O=M.feature.getGeometry();if(i==="line"&&O){const D=dk(O,{projection:"EPSG:3857"});M.feature.set("measurement",Dae(D))}else if(i==="polygon"&&O){const D=$F(O,{projection:"EPSG:3857"});M.feature.set("measurement",jae(D))}M.feature.set("drawType",i),a(D=>D+1),c(null)}),t.addInteraction(C),()=>{b.current&&t.removeInteraction(b.current)}}},[t,n,i]);const I=()=>{if(n){if(o>0&&!confirm("Tekeningen verwijderen? Klik eerst op Opslaan om te bewaren."))return;P()}r(!n),s("select"),c(null)},P=()=>{_.current&&(_.current.clear(),a(0),c(null))},N=()=>{if(!_.current||o===0)return;let L=u.find(O=>O.name===PF);if(!L){const O=ps.getState().addLayer(PF,["Punt","Lijn","Vlak"]);L=ps.getState().getLayer(O)}if(!L){alert("Kon tekeningen laag niet aanmaken");return}const C=_.current.getFeatures();let M=0;C.forEach((O,D)=>{const V=O.getGeometry();if(!V)return;const U=O.get("drawType")||"point",G=O.get("measurement");let de,ke;if(V.getType()==="Point"){const Ne=V.getCoordinates();de=Fn(Ne)}else if(V.getType()==="LineString"){const Ne=V.getCoordinates(),fe=Math.floor(Ne.length/2);de=Fn(Ne[fe]),ke={type:"LineString",coordinates:Ne.map(De=>Fn(De))}}else if(V.getType()==="Polygon"){const Ne=V.getCoordinates(),fe=V.getExtent(),De=[(fe[0]+fe[2])/2,(fe[1]+fe[3])/2];de=Fn(De),ke={type:"Polygon",coordinates:Ne.map(Ce=>Ce.map(Q=>Fn(Q)))}}else return;const Ue={point:"Punt",line:"Lijn",polygon:"Vlak",select:"Punt"};f(L.id,{name:`Tekening ${new Date().toLocaleDateString("nl-NL")} #${D+1}`,category:Ue[U],notes:G?`Afmeting: ${G}`:"",coordinates:de,geometry:ke}),M++}),alert(`${M} tekening(en) opgeslagen naar "${PF}"`),P(),r(!1)};return p.jsxs(p.Fragment,{children:[p.jsx(gt.button,{onClick:I,className:`fixed top-[146px] left-2 z-[800] w-11 h-11 flex items-center justify-center rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm ${n?"bg-orange-500 text-white":"bg-white/80 hover:bg-white/90 text-gray-600"}`,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Tekenen op de kaart",children:p.jsx(Sp,{size:20})}),p.jsx(Wn,{children:n&&p.jsxs(gt.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},transition:{duration:.15},className:"fixed top-[146px] left-[56px] z-[801] bg-white/95 rounded-xl shadow-lg backdrop-blur-sm overflow-hidden min-w-[200px]",children:[p.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-orange-500",children:[p.jsx("span",{className:"font-medium text-white text-xs",children:"Tekenen"}),p.jsx("button",{onClick:I,className:"p-0.5 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Kr,{size:14,className:"text-white"})})]}),p.jsxs("div",{className:"p-3 space-y-3",children:[p.jsxs("div",{className:"flex gap-1",children:[p.jsx(JR,{icon:p.jsx(fut,{size:16}),active:i==="select",onClick:()=>s("select"),title:"Selecteren"}),p.jsx(JR,{icon:p.jsx(Ka,{size:16}),active:i==="point",onClick:()=>s("point"),title:"Punt"}),p.jsx(JR,{icon:p.jsx(Xut,{size:16}),active:i==="line",onClick:()=>s("line"),title:"Lijn"}),p.jsx(JR,{icon:p.jsx(wut,{size:16}),active:i==="polygon",onClick:()=>s("polygon"),title:"Vlak"})]}),p.jsx("p",{className:"text-xs text-gray-500",children:i==="select"?"Klik om te selecteren, Delete om te verwijderen":i==="point"?"Klik om een punt te plaatsen":"Klik om te tekenen, dubbelklik om te voltooien"}),l&&p.jsxs("div",{className:"bg-orange-50 rounded-lg p-2",children:[p.jsx("div",{className:"text-xs text-orange-600 font-medium",children:i==="polygon"?"Oppervlakte":"Afstand"}),p.jsx("div",{className:"text-lg font-bold text-orange-700",children:l})]}),o>0&&p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:N,className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-1.5 text-xs text-white bg-orange-500 hover:bg-orange-600 rounded-lg transition-colors border-0 outline-none",children:[p.jsx(rq,{size:12}),"Opslaan (",o,")"]}),p.jsx("button",{onClick:()=>{confirm("Alle tekeningen verwijderen?")&&P()},className:"flex items-center justify-center gap-1.5 px-3 py-1.5 text-xs text-red-600 hover:bg-red-50 rounded-lg transition-colors border-0 outline-none",children:p.jsx(Th,{size:12})})]})]})]})})]})}function JR({icon:t,active:e,onClick:n,title:r}){return p.jsx("button",{onClick:n,className:`w-9 h-9 flex items-center justify-center rounded-lg transition-colors border-0 outline-none ${e?"bg-orange-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,title:r,children:t})}function Dae(t){return t>=1e3?`${(t/1e3).toFixed(2)} km`:`${Math.round(t)} m`}function jae(t){return t>=1e4?`${(t/1e4).toFixed(2)} ha`:`${Math.round(t)} m`}function iAt(t){const e=t.get("measurement"),n=t.get("drawType"),r={stroke:new Pn({color:"#f97316",width:3}),fill:new Dn({color:"rgba(249, 115, 22, 0.2)"}),image:new ms({radius:6,fill:new Dn({color:"#f97316"}),stroke:new Pn({color:"#ffffff",width:2})})};return new vn({...r,text:e?new pc({text:e,font:"bold 11px sans-serif",fill:new Dn({color:"#c2410c"}),stroke:new Pn({color:"#ffffff",width:3}),offsetY:n==="polygon"?0:-15,placement:n==="line"?"line":"point",overflow:!0}):void 0})}function sAt(){return new vn({stroke:new Pn({color:"#ea580c",width:3,lineDash:[10,10]}),fill:new Dn({color:"rgba(234, 88, 12, 0.1)"}),image:new ms({radius:5,fill:new Dn({color:"#ea580c"}),stroke:new Pn({color:"#ffffff",width:2})})})}function oAt(){return new vn({stroke:new Pn({color:"#2563eb",width:4}),fill:new Dn({color:"rgba(37, 99, 235, 0.2)"}),image:new ms({radius:8,fill:new Dn({color:"#2563eb"}),stroke:new Pn({color:"#ffffff",width:2})})})}function aAt(){const t=li(f=>f.map),[e,n]=Y.useState(!1),[r,i]=Y.useState(!1),[s,o]=Y.useState("png"),[a,l]=Y.useState(!0),[c,u]=Y.useState("Kaart Export"),h=async()=>{if(t){i(!0);try{const f=t.getTargetElement();if(!f)throw new Error("Map target not found");const g=f.querySelector("canvas");if(!g)throw new Error("Canvas not found");const y=document.createElement("canvas"),_=y.getContext("2d");if(!_)throw new Error("Could not get canvas context");const b=a?50:0;y.width=g.width,y.height=g.height+b,_.fillStyle="#ffffff",_.fillRect(0,0,y.width,y.height),a&&(_.fillStyle="#1f2937",_.font="bold 24px system-ui, -apple-system, sans-serif",_.textAlign="center",_.fillText(c,y.width/2,35)),_.drawImage(g,0,b),_.fillStyle="#6b7280",_.font="12px system-ui, -apple-system, sans-serif",_.textAlign="right";const T=new Date().toLocaleDateString("nl-NL",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});_.fillText(T,y.width-10,y.height-10),_.textAlign="left",_.fillText("DetectorApp.nl",10,y.height-10);const A=`kaart-${new Date().toISOString().split("T")[0]}`;if(s==="pdf"){const I=window.open("","_blank");if(I){const P=y.toDataURL("image/png");I.document.write(`
            <!DOCTYPE html>
            <html>
              <head>
                <title>${c}</title>
                <style>
                  @media print {
                    body { margin: 0; padding: 0; }
                    img { max-width: 100%; height: auto; }
                  }
                  body {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    min-height: 100vh;
                    margin: 0;
                    background: white;
                  }
                  img { max-width: 100%; max-height: 100vh; }
                </style>
              </head>
              <body>
                <img src="${P}" />
                <script>
                  setTimeout(() => {
                    window.print();
                  }, 500);
                <\/script>
              </body>
            </html>
          `),I.document.close()}}else{const I=s==="jpeg"?"image/jpeg":"image/png",P=s==="jpeg"?.92:void 0;y.toBlob(N=>{if(N){const L=URL.createObjectURL(N),C=document.createElement("a");C.href=L,C.download=`${A}.${s}`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(L)}},I,P)}n(!1)}catch(f){console.error("Export failed:",f),alert("Kon de kaart niet exporteren. Probeer het opnieuw.")}finally{i(!1)}}};return p.jsxs(p.Fragment,{children:[p.jsx(gt.button,{onClick:()=>n(!0),className:"fixed top-[202px] left-2 z-[800] w-11 h-11 flex items-center justify-center bg-white/80 hover:bg-white/90 rounded-xl shadow-sm border-0 outline-none transition-colors backdrop-blur-sm text-gray-600",whileHover:{scale:1.05},whileTap:{scale:.95},title:"Kaart printen/exporteren",children:p.jsx(qN,{size:20})}),p.jsx(Wn,{children:e&&p.jsxs(p.Fragment,{children:[p.jsx(gt.div,{className:"fixed inset-0 bg-black/40 z-[1700]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1)}),p.jsxs(gt.div,{className:"fixed z-[1701] bg-white rounded-xl shadow-2xl overflow-hidden",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"min(90vw, 320px)"},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.15},children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gradient-to-r from-green-500 to-green-600",children:[p.jsx("span",{className:"font-medium text-white",children:"Kaart Exporteren"}),p.jsx("button",{onClick:()=>n(!1),className:"p-1 rounded hover:bg-white/20 transition-colors border-0 outline-none",children:p.jsx(Kr,{size:18,className:"text-white"})})]}),p.jsxs("div",{className:"p-4 space-y-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 mb-2",children:[p.jsx("input",{type:"checkbox",checked:a,onChange:f=>l(f.target.checked),className:"rounded border-gray-300"}),"Titel toevoegen"]}),a&&p.jsx("input",{type:"text",value:c,onChange:f=>u(f.target.value),className:"w-full px-3 py-2 bg-gray-100 rounded-lg border-0 outline-none focus:ring-2 focus:ring-green-500 text-sm",placeholder:"Titel..."})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Formaat"}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsx(CF,{format:"png",selected:s==="png",onClick:()=>o("png"),icon:p.jsx(toe,{size:16}),label:"PNG"}),p.jsx(CF,{format:"jpeg",selected:s==="jpeg",onClick:()=>o("jpeg"),icon:p.jsx(toe,{size:16}),label:"JPEG"}),p.jsx(CF,{format:"pdf",selected:s==="pdf",onClick:()=>o("pdf"),icon:p.jsx(qN,{size:16}),label:"Print"})]})]}),p.jsx("button",{onClick:h,disabled:r,className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors border-0 outline-none disabled:opacity-50",children:r?p.jsxs(p.Fragment,{children:[p.jsx(qI,{size:18,className:"animate-spin"}),p.jsx("span",{children:"Exporteren..."})]}):p.jsxs(p.Fragment,{children:[p.jsx(wA,{size:18}),p.jsx("span",{children:s==="pdf"?"Printen":"Downloaden"})]})})]})]})]})})]})}function CF({format:t,selected:e,onClick:n,icon:r,label:i}){return p.jsxs("button",{onClick:n,className:`flex flex-col items-center justify-center gap-1 p-3 rounded-lg transition-colors border-0 outline-none ${e?"bg-green-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[r,p.jsx("span",{className:"text-xs font-medium",children:i})]})}class $ae{buffer=[];size;weights;constructor(e=8){this.size=e,this.weights=Array.from({length:e},(r,i)=>Math.pow(2,i));const n=this.weights.reduce((r,i)=>r+i,0);this.weights=this.weights.map(r=>r/n)}add(e){if(this.buffer.length>0){const n=this.buffer[this.buffer.length-1];let r=e-n;r>180&&(e-=360),r<-180&&(e+=360)}this.buffer.push(e),this.buffer.length>this.size&&this.buffer.shift()}getSmoothed(){if(this.buffer.length===0)return null;if(this.buffer.length===1)return this.normalize(this.buffer[0]);let e=0,n=0;const r=this.size-this.buffer.length;for(let i=0;i<this.buffer.length;i++){const s=this.weights[r+i];e+=this.buffer[i]*s,n+=s}return this.normalize(e/n)}normalize(e){return(e%360+360)%360}clear(){this.buffer=[]}}function lAt(){const t=ks(c=>c.tracking),e=ks(c=>c.headingSource),n=ks(c=>c.rawGPSHeading),r=ks(c=>c.setSmoothedHeading),i=Y.useRef(new $ae(6)),s=Y.useRef(new $ae(10)),o=Y.useRef(0),a=Y.useRef(null),l=33;Y.useEffect(()=>{if(!t||e!=="gps"||n===null||n===a.current)return;a.current=n;const c=performance.now();if(c-o.current<l)return;i.current.add(n);const u=i.current.getSmoothed();u!==null&&(o.current=c,r(u))},[t,e,n,r]),Y.useEffect(()=>{if(!t||e!=="compass")return;let c=0;const u=80,h=f=>{const g=performance.now();if(g-c<u||g-o.current<l)return;c=g;let y=null;if(f.webkitCompassHeading!==void 0?y=f.webkitCompassHeading:f.alpha!==null&&(y=(360-f.alpha)%360),y!==null){s.current.add(y);const _=s.current.getSmoothed();_!==null&&(o.current=g,r(_))}};return window.addEventListener("deviceorientationabsolute",h),window.addEventListener("deviceorientation",h),()=>{window.removeEventListener("deviceorientationabsolute",h),window.removeEventListener("deviceorientation",h)}},[t,e,r]),Y.useEffect(()=>{t||(i.current.clear(),s.current.clear(),a.current=null)},[t])}function cAt(){const t=li(i=>i.map),e=Bs(i=>i.setLayerOpacity),n=Bs(i=>i.visible),r=Y.useRef(null);Y.useEffect(()=>{if(!t)return;const i=()=>{const s=t.getView().getZoom();if(!s||r.current!==null&&Math.abs(s-r.current)<.5)return;r.current=s;const o=n["AHN 0.5m"],a=n["AHN4 Multi-Hillshade NL"];!o&&!a||(o&&(s>=18?e("AHN 0.5m",.85):s>=16?e("AHN 0.5m",.75):s>=14?e("AHN 0.5m",.65):e("AHN 0.5m",.55)),a&&(s>=18?e("AHN4 Multi-Hillshade NL",.8):s>=16?e("AHN4 Multi-Hillshade NL",.7):s>=14?e("AHN4 Multi-Hillshade NL",.6):e("AHN4 Multi-Hillshade NL",.5)))};return t.on("moveend",i),i(),()=>{t.un("moveend",i)}},[t,n,e])}const RF=2e3;async function uAt(){const t=[ps,gh,Ba];await Promise.all(t.map(e=>e.persist.hasHydrated()?Promise.resolve():new Promise(n=>{const r=e.persist.onFinishHydration(()=>{r(),n()})})))}function hAt(){const t=TO(T=>T.user),{layers:e,clearAll:n}=ps(),{vondsten:r,clearAll:i}=gh(),{savedRoutes:s}=Ba(),o=Y.useRef(null),a=Y.useRef(!0),l=Y.useRef(""),c=Y.useRef(""),u=Y.useRef(""),[h,f]=Y.useState(!1);Y.useEffect(()=>{uAt().then(()=>{f(!0),console.log(" Stores gehydrateerd uit localStorage")})},[]);const g=Y.useCallback(async T=>{if(t)try{const A=zy(Zf,"users",t.uid);await wj(A,{layers:T,layersUpdatedAt:bj()},{merge:!0}),console.log(" Lagen gesynchroniseerd naar cloud")}catch(A){console.error(" Fout bij synchroniseren lagen:",A)}},[t]),y=Y.useCallback(async T=>{if(t)try{const A=zy(Zf,"users",t.uid);await wj(A,{vondsten:T,vondstenUpdatedAt:bj()},{merge:!0}),console.log(" Vondsten gesynchroniseerd naar cloud")}catch(A){console.error(" Fout bij synchroniseren vondsten:",A)}},[t]),_=Y.useCallback(async T=>{if(t)try{const A=zy(Zf,"users",t.uid);await wj(A,{routes:T,routesUpdatedAt:bj()},{merge:!0}),console.log(" Routes gesynchroniseerd naar cloud")}catch(A){console.error(" Fout bij synchroniseren routes:",A)}},[t]),b=Y.useCallback(async()=>{if(t)try{const T=zy(Zf,"users",t.uid),A=await uDe(T);if(A.exists()){const I=A.data();if(I.layers&&Array.isArray(I.layers)){const P=I.layers,N=ps.getState().layers,L=[...P],C=new Set(P.map(M=>M.id));N.forEach(M=>{C.has(M.id)||L.push(M)}),ps.setState({layers:L}),l.current=JSON.stringify(L),console.log(` ${P.length} lagen geladen uit cloud`)}if(I.vondsten&&Array.isArray(I.vondsten)){const P=I.vondsten,N=gh.getState().vondsten,L=[...P],C=new Set(P.map(M=>M.id));N.forEach(M=>{C.has(M.id)||L.push(M)}),gh.setState({vondsten:L}),c.current=JSON.stringify(L),console.log(` ${P.length} vondsten geladen uit cloud`)}if(I.routes&&Array.isArray(I.routes)){const P=I.routes,N=Ba.getState().savedRoutes,L=[...P],C=new Set(P.map(O=>O.id));N.forEach(O=>{C.has(O.id)||L.push(O)});const M=new Set(L.map(O=>O.id));Ba.setState({savedRoutes:L,visibleRouteIds:M}),u.current=JSON.stringify(L),console.log(` ${P.length} routes geladen uit cloud`)}}else console.log(" Geen cloud data gevonden, lokale data wordt gesynchroniseerd..."),await g(e),await y(r),await _(s);a.current=!1}catch(T){console.error(" Fout bij laden uit cloud:",T),a.current=!1}},[t,e,r,s,g,y,_]);return Y.useEffect(()=>{h&&(t?(a.current=!0,b()):(a.current=!0,l.current="",c.current="",u.current=""))},[t?.uid,h]),Y.useEffect(()=>{if(!t||!h||a.current)return;const T=JSON.stringify(e);if(T!==l.current)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{l.current=T,g(e)},RF),()=>{o.current&&clearTimeout(o.current)}},[t,e,g]),Y.useEffect(()=>{if(!t||!h||a.current)return;const T=JSON.stringify(r);if(T!==c.current)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{c.current=T,y(r)},RF),()=>{o.current&&clearTimeout(o.current)}},[t,r,y]),Y.useEffect(()=>{if(!t||!h||a.current)return;const T=JSON.stringify(s);if(T!==u.current)return o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{u.current=T,_(s)},RF),()=>{o.current&&clearTimeout(o.current)}},[t,s,_]),{isLoggedIn:!!t,syncLayersToCloud:g,syncVondstenToCloud:y,syncRoutesToCloud:_}}function dAt(){lAt(),cAt(),hAt();const t=ks(_=>_.fetchPassivePosition);Y.useEffect(()=>{t()},[t]);const n=14*Cn(_=>_.fontScale)/100,r=gr(_=>_.vondstFormOpen),i=gr(_=>_.vondstFormLocation),s=gr(_=>_.closeVondstForm),o=gr(_=>_.routeDashboardOpen),a=gr(_=>_.toggleRouteDashboard),l=gr(_=>_.monumentSearchOpen),c=gr(_=>_.closeMonumentSearch),u=pT(_=>_.showBuienradar),h=pT(_=>_.setShowBuienradar),f=Cn(_=>_.hideWelcomeModal),[g,y]=Y.useState(!f);return p.jsx(pTt,{children:p.jsxs("div",{style:{fontSize:`${n}px`},children:[p.jsx($kt,{}),p.jsx(hit,{}),p.jsx(Mht,{}),p.jsx(bkt,{}),p.jsx(xTt,{}),p.jsx(Tkt,{}),p.jsx(rkt,{}),p.jsx(ikt,{}),p.jsx(skt,{}),p.jsx(akt,{}),p.jsx(FSt,{}),p.jsx(zSt,{}),p.jsx(hTt,{}),p.jsx(Cht,{}),p.jsx(ekt,{}),p.jsx(tkt,{}),p.jsx(dTt,{}),p.jsx(Oht,{}),p.jsx(Ght,{}),p.jsx(uTt,{}),p.jsx(jTt,{}),p.jsx(oTt,{}),p.jsx(eAt,{}),p.jsx(rAt,{}),p.jsx(aAt,{}),p.jsx(FTt,{}),p.jsx(aTt,{}),p.jsx(_kt,{}),p.jsx(xkt,{isVisible:u,onClose:()=>h(!1)}),p.jsx(NTt,{}),p.jsx(kkt,{}),p.jsx(Nkt,{}),p.jsx(Okt,{}),p.jsx(jkt,{}),p.jsx(pkt,{isOpen:o,onClose:a}),p.jsx(Wn,{children:r&&p.jsx(fSe,{onClose:s,initialLocation:i||void 0})}),p.jsx(Ukt,{isOpen:l,onClose:c}),p.jsx(Wkt,{}),p.jsx(qkt,{isOpen:g,onClose:()=>y(!1)})]})})}const fAt="fef02a7628814a519d5f0eeb2d82656e";function pAt(){nr.apiKey=fAt}pAt();console.log(`%c DetectorApp v${E5}`,"background: #4CAF50; color: white; padding: 4px 8px; border-radius: 4px; font-weight: bold;");FTe.createRoot(document.getElementById("root")).render(p.jsx(dAt,{}));export{sfe as $,ns as A,Jr as B,ms as C,pS as D,Bt as E,yr as F,NL as G,cCe as H,fCe as I,wv as J,Ju as K,G5 as L,st as M,nye as N,Ss as O,Ti as P,bCt as Q,Jt as R,vn as S,$m as T,tie as U,Nl as V,ECt as W,H0 as X,q0 as Y,kt as Z,_e as _,KCe as a,yb as a$,afe as a0,lfe as a1,ye as a2,OAt as a3,IAt as a4,xIt as a5,DOt as a6,h6e as a7,qOt as a8,uKe as a9,Yet as aA,TI as aB,Vqe as aC,O2 as aD,Fd as aE,Ug as aF,Ot as aG,Kt as aH,bye as aI,AW as aJ,Eye as aK,wye as aL,Bne as aM,m4t as aN,Xze as aO,j3t as aP,$fe as aQ,ww as aR,j2 as aS,nA as aT,ii as aU,vu as aV,_B as aW,xc as aX,Cr as aY,gb as aZ,ga as a_,f1e as aa,p3t as ab,m3t as ac,h3t as ad,qk as ae,YB as af,ha as ag,gI as ah,bh as ai,fKe as aj,O4 as ak,xVe as al,YMt as am,Ze as an,Jn as ao,Jl as ap,Ca as aq,Wf as ar,Xr as as,Kd as at,EPt as au,Ig as av,$At as aw,rfe as ax,xye as ay,rOt as az,VCe as b,ud as b$,xh as b0,URt as b1,zRt as b2,GRt as b3,$d as b4,jO as b5,wi as b6,kl as b7,mW as b8,YOt as b9,ue as bA,IIt as bB,er as bC,Di as bD,wa as bE,nr as bF,wCt as bG,nIt as bH,O6e as bI,kg as bJ,Vr as bK,QQ as bL,xMt as bM,Zn as bN,ife as bO,pI as bP,Rfe as bQ,YVe as bR,pje as bS,Ha as bT,oIt as bU,wT as bV,tx as bW,bI as bX,nn as bY,hg as bZ,ug as b_,F2 as ba,qve as bb,yfe as bc,ZFe as bd,xPt as be,Hpe as bf,MPt as bg,is as bh,gfe as bi,za as bj,uR as bk,jRt as bl,Nve as bm,bl as bn,Ky as bo,jze as bp,fb as bq,qIt as br,b_e as bs,PO as bt,sCt as bu,iW as bv,x as bw,E as bx,cr as by,Sa as bz,Ol as c,mn as c$,qy as c0,ec as c1,Z1 as c2,hl as c3,QKe as c4,ZPt as c5,JPt as c6,xCt as c7,x3t as c8,iCt as c9,jr as cA,lb as cB,Pa as cC,ZMt as cD,vo as cE,zYe as cF,LW as cG,VO as cH,SMt as cI,_2 as cJ,bKe as cK,eee as cL,NB as cM,WKe as cN,R1e as cO,c3t as cP,l3t as cQ,e3t as cR,aA as cS,oA as cT,Eb as cU,x9 as cV,$ee as cW,go as cX,QUe as cY,CIt as cZ,PIt as c_,rCt as ca,I3t as cb,HVe as cc,_3t as cd,Yo as ce,dn as cf,QPt as cg,nCt as ch,tCt as ci,eCt as cj,hKe as ck,dKe as cl,gZe as cm,tn as cn,qt as co,Qo as cp,Ys as cq,PW as cr,_We as cs,A8e as ct,P8e as cu,I8e as cv,C8e as cw,CPt as cx,RPt as cy,_u as cz,Pn as d,j4 as d$,Ll as d0,LCt as d1,DCt as d2,FMt as d3,jCt as d4,YRt as d5,sit as d6,LT as d7,Ret as d8,E5t as d9,QFe as dA,Ut as dB,k_e as dC,nz as dD,ltt as dE,Sj as dF,LI as dG,X7 as dH,FRt as dI,Z3t as dJ,y4t as dK,kd as dL,Fpe as dM,$Mt as dN,fn as dO,ya as dP,th as dQ,ra as dR,fpe as dS,q8 as dT,$et as dU,tfe as dV,xi as dW,h7 as dX,uW as dY,vIt as dZ,ma as d_,Ln as da,T5t as db,Tb as dc,lW as dd,Upe as de,wI as df,h1 as dg,X1 as dh,gve as di,o3t as dj,qYe as dk,SVe as dl,Hu as dm,KYe as dn,qa as dp,wc as dq,i6e as dr,zCt as ds,Vn as dt,PI as du,X_ as dv,$i as dw,Zpe as dx,zM as dy,SM as dz,lr as e,LIt as e$,yIt as e0,jPt as e1,s_e as e2,h0 as e3,i_e as e4,zJe as e5,SUe as e6,TAt as e7,kAt as e8,d_e as e9,u8e as eA,Cte as eB,wFe as eC,p4t as eD,yRt as eE,du as eF,KAt as eG,PCt as eH,cfe as eI,tQe as eJ,qge as eK,ime as eL,GYe as eM,d3t as eN,IW as eO,W1 as eP,pKe as eQ,v3t as eR,dc as eS,y3t as eT,cKe as eU,FCt as eV,tu as eW,BO as eX,UJe as eY,zMt as eZ,Gje as e_,bb as ea,cQe as eb,XV as ec,xv as ed,Eh as ee,NI as ef,tA as eg,AJe as eh,h_e as ei,PJe as ej,l_e as ek,u_e as el,f8e as em,GB as en,UB as eo,d8e as ep,GO as eq,UO as er,Aie as es,kLt as et,bLt as eu,pLt as ev,es as ew,dLt as ex,MLt as ey,NLt as ez,qA as f,xLt as f$,F6e as f0,z1 as f1,yB as f2,kIt as f3,EWe as f4,pye as f5,GW as f6,SBe as f7,qJe as f8,DBe as f9,QJe as fA,OJe as fB,LJe as fC,iQe as fD,ll as fE,ds as fF,cl as fG,db as fH,cCt as fI,Kg as fJ,kze as fK,a9 as fL,TB as fM,w2 as fN,Tl as fO,cje as fP,tme as fQ,Wpe as fR,XPt as fS,Co as fT,Gk as fU,qs as fV,TPt as fW,SPt as fX,axe as fY,lxe as fZ,mLt as f_,IJe as fa,c_e as fb,rQe as fc,OCt as fd,AO as fe,IO as ff,jfe as fg,TIt as fh,bze as fi,CI as fj,EIt as fk,xB as fl,kO as fm,kUe as fn,WBe as fo,sWe as fp,IZe as fq,KVe as fr,WCt as fs,x2 as ft,g3t as fu,Kge as fv,BBe as fw,PUe as fx,CUe as fy,RUe as fz,yh as g,lRt as g$,XVe as g0,i4t as g1,_4t as g2,Gg as g3,GQ as g4,_Ct as g5,ENt as g6,yZe as g7,ap as g8,eje as g9,Yg as gA,HMt as gB,l1 as gC,tIt as gD,hIt as gE,TLt as gF,oje as gG,aje as gH,K8 as gI,kZe as gJ,ZCt as gK,YCt as gL,$Rt as gM,mUe as gN,iRt as gO,Dze as gP,b9 as gQ,Hi as gR,Y5t as gS,kM as gT,r7 as gU,Ix as gV,WO as gW,VRt as gX,vv as gY,d4t as gZ,e4t as g_,Yk as ga,Vi as gb,y0e as gc,ml as gd,XCt as ge,P2 as gf,hRt as gg,Qj as gh,IRt as gi,rL as gj,vW as gk,_W as gl,ARt as gm,DRt as gn,sL as go,_Ge as gp,eZe as gq,J0e as gr,ZW as gs,JJe as gt,WMt as gu,UMt as gv,OI as gw,Gs as gx,BMt as gy,Cp as gz,HLt as h,AIt as h$,O4t as h0,N4t as h1,fc as h2,mPt as h3,IUe as h4,HCt as h5,P$e as h6,ad as h7,ul as h8,F4t as h9,nme as hA,rme as hB,$Ct as hC,PBe as hD,fye as hE,lYe as hF,FJe as hG,mye as hH,NPt as hI,l8e as hJ,$Ue as hK,OBe as hL,jUe as hM,iL as hN,bM as hO,VAt as hP,YJe as hQ,$Je as hR,U1e as hS,J3t as hT,DW as hU,wZe as hV,OT as hW,Bf as hX,oc as hY,qWe as hZ,OIt as h_,yCt as ha,U$e as hb,B4t as hc,J1 as hd,sA as he,AAt as hf,sIt as hg,us as hh,Xj as hi,Zze as hj,yv as hk,$te as hl,pb as hm,hb as hn,Hs as ho,HW as hp,LPt as hq,R8e as hr,v8e as hs,dme as ht,KJe as hu,GPt as hv,qGe as hw,VCt as hx,DGe as hy,Dee as hz,Dn as i,lo as i$,Kfe as i0,uBe as i1,cIt as i2,EI as i3,Vfe as i4,u0 as i5,vWe as i6,gWe as i7,pWe as i8,Zj as i9,TOt as iA,TNt as iB,E0e as iC,Zk as iD,Z9 as iE,FGe as iF,k0e as iG,RCt as iH,aOt as iI,wIt as iJ,zIt as iK,PFe as iL,OFe as iM,jFe as iN,vd as iO,v$e as iP,bIt as iQ,Tne as iR,$Ve as iS,mI as iT,oPt as iU,iit as iV,G1 as iW,dB as iX,Z6e as iY,oRt as iZ,aBe as i_,oye as ia,Gze as ib,ow as ic,B6e as id,Dd as ie,ILt as ig,W3t as ih,B3t as ii,cYe as ij,a0e as ik,vGe as il,Nte as im,zVe as io,Xk as ip,k2 as iq,ett as ir,POt as is,T_e as it,LOt as iu,RN as iv,NOt as iw,FT as ix,OOt as iy,p3 as iz,WLt as j,V5t as j$,S0e as j0,$Ge as j1,pw as j2,EAt as j3,zve as j4,gW as j5,H as j6,g8e as j7,Pd as j8,fZe as j9,q3t as jA,H3t as jB,Zo as jC,fW as jD,q9 as jE,dW as jF,aRt as jG,vRt as jH,zte as jI,Q0e as jJ,RIt as jK,qye as jL,fPt as jM,PLt as jN,Um as jO,rUe as jP,nMt as jQ,ZRt as jR,ed as jS,GAt as jT,UAt as jU,zAt as jV,D6e as jW,gv as jX,Dpe as jY,G5t as jZ,z5t as j_,YW as ja,Fze as jb,tRt as jc,W4 as jd,oxe as je,Ent as jf,Snt as jg,cLt as jh,Qnt as ji,uLt as jj,rLt as jk,nLt as jl,trt as jm,HS as jn,lLt as jo,oUe as jp,AUe as jq,TUe as jr,MJe as js,lQe as jt,uQe as ju,WGe as jv,Y0e as jw,c8e as jx,NJe as jy,o_e as jz,pc as k,E$e as k$,F5t as k0,B5t as k1,U5t as k2,$5t as k3,j5t as k4,EBe as k5,zge as k6,dye as k7,TCt as k8,aze as k9,UW as kA,Q3t as kB,X3t as kC,cMt as kD,h$e as kE,KIt as kF,QZe as kG,eJe as kH,a_e as kI,ICt as kJ,JXe as kK,SOt as kL,Z8e as kM,i9e as kN,SI as kO,UPt as kP,$Pt as kQ,FPt as kR,aIt as kS,K6e as kT,g6e as kU,gPt as kV,AB as kW,tPt as kX,ePt as kY,qCt as kZ,S$e as k_,SCt as ka,lze as kb,V1e as kc,VGe as kd,JQ as ke,D5t as kf,HB as kg,e9e as kh,uze as ki,aB as kj,BAt as kk,lB as kl,WAt as km,VI as kn,fw as ko,ZXe as kp,yje as kq,jOt as kr,F1e as ks,b2 as kt,NO as ku,Ff as kv,XMt as kw,FO as kx,aW as ky,YAt as kz,qSt as l,o9 as l$,pRt as l0,uRt as l1,J6e as l2,wfe as l3,Si as l4,bPt as l5,bL as l6,mH as l7,El as l8,EL as l9,c1 as lA,KOt as lB,MAt as lC,eGe as lD,eie as lE,Uze as lF,zze as lG,CN as lH,u0e as lI,J5t as lJ,X5t as lK,Z5t as lL,Ket as lM,int as lN,dnt as lO,d6e as lP,rIt as lQ,xfe as lR,RO as lS,uIt as lT,iA as lU,xXe as lV,G0e as lW,rRt as lX,b$ as lY,yI as lZ,MIt as l_,OLt as la,Cd as lb,QIt as lc,J_ as ld,mCt as le,P0e as lf,I0e as lg,hUe as lh,$M as li,o0e as lj,xRt as lk,xW as ll,ex as lm,hMt as ln,dMt as lo,fMt as lp,NRt as lq,RRt as lr,kRt as ls,NGe as lt,CRt as lu,cUe as lv,uCt as lw,eRt as lx,uMt as ly,tNt as lz,Ni as m,iIt as m$,tL as m0,aMt as m1,oMt as m2,g0e as m3,p0e as m4,dGe as m5,pGe as m6,DS as m7,Dx as m8,Tqe as m9,jf as mA,Xm as mB,bs as mC,CYe as mD,sJe as mE,qAt as mF,jBe as mG,oYe as mH,IBe as mI,CBe as mJ,N5t as mK,TT as mL,JMt as mM,tye as mN,e0e as mO,ofe as mP,eIt as mQ,Pfe as mR,sme as mS,YQ as mT,Ufe as mU,Htt as mV,GCt as mW,T0e as mX,MCt as mY,cW as mZ,zfe as m_,f3t as ma,V4t as mb,WVe as mc,U4t as md,z4t as me,Pg as mf,xtt as mg,btt as mh,Ett as mi,Qfe as mj,GMt as mk,PB as ml,ax as mm,XZe as mn,K5t as mo,UFe as mp,jpe as mq,kKe as mr,cL as ms,YM as mt,PKe as mu,Qge as mv,$4t as mw,wze as mx,CLt as my,_S as mz,ts as n,nNt as n$,B9 as n0,$Ke as n1,SAt as n2,e1e as n3,Y9 as n4,sNt as n5,iNt as n6,QXe as n7,Y3t as n8,K3t as n9,lOt as nA,KMt as nB,G4t as nC,qFe as nD,z1e as nE,L2 as nF,L4t as nG,D4t as nH,j4t as nI,sW as nJ,SIt as nK,jAt as nL,Vve as nM,_Ot as nN,vOt as nO,R5t as nP,M5t as nQ,pIt as nR,Cve as nS,Wve as nT,$2 as nU,cd as nV,yW as nW,h0e as nX,RI as nY,Ive as nZ,zI as n_,mB as na,HBe as nb,UBe as nc,VJe as nd,GBe as ne,fYe as nf,CB as ng,dPt as nh,qB as ni,wPt as nj,A_ as nk,a6e as nl,v9 as nm,AOt as nn,Wtt as no,IOt as np,kOt as nq,E_e as nr,oH as ns,Na as nt,zGe as nu,HE as nv,kCt as nw,Uet as nx,qMt as ny,yOt as nz,xn as o,VYe as o$,V$ as o0,dCt as o1,hN as o2,nQe as o3,wGe as o4,nN as o5,OPt as o6,sGe as o7,hCt as o8,so as o9,pCt as oA,DPt as oB,vCt as oC,mIt as oD,Net as oE,Vze as oF,LAt as oG,RAt as oH,ffe as oI,PPt as oJ,IPt as oK,BCt as oL,Lfe as oM,yXe as oN,nZe as oO,Pve as oP,N_e as oQ,HAt as oR,fOt as oS,pOt as oT,mOt as oU,gOt as oV,eOt as oW,nOt as oX,tOt as oY,wtt as oZ,Bg as o_,ro as oa,x4t as ob,E4t as oc,v4t as od,_$e as oe,_It as of,pme as og,XXe as oh,bGe as oi,EGe as oj,jM as ok,nRt as ol,cGe as om,uGe as on,Krt as oo,fu as op,mL as oq,EJe as or,YIt as os,Fve as ot,Gve as ou,NZe as ov,ANt as ow,GZe as ox,INt as oy,yBe as oz,KSt as p,gRt as p$,j1e as p0,LKe as p1,gee as p2,n8e as p3,oCt as p4,rNt as p5,APt as p6,kPt as p7,k8e as p8,cnt as p9,Kc as pA,cOt as pB,VPt as pC,W$e as pD,oOt as pE,sOt as pF,ott as pG,iOt as pH,O5t as pI,L5t as pJ,uOt as pK,hOt as pL,xOt as pM,wOt as pN,W5t as pO,bOt as pP,EOt as pQ,qet as pR,Zet as pS,W_e as pT,S2 as pU,dOt as pV,jet as pW,lIt as pX,GGe as pY,zUe as pZ,AGe as p_,x$e as pa,unt as pb,snt as pc,XRt as pd,C5t as pe,VMt as pf,KKe as pg,u3t as ph,t3t as pi,i3t as pj,n3t as pk,s3t as pl,r3t as pm,a3t as pn,WOt as po,WQ as pp,QMt as pq,Oze as pr,JCt as ps,Wze as pt,sRt as pu,S4t as pv,YZe as pw,nu as px,dRt as py,Q5t as pz,Bpe as q,oWe as q$,cNt as q0,JBe as q1,m0e as q2,W0e as q3,ype as q4,$T as q5,dIt as q6,ZBe as q7,mMt as q8,mRt as q9,GOt as qA,zOt as qB,vtt as qC,M_e as qD,q5t as qE,H5t as qF,mtt as qG,P5t as qH,PRt as qI,Gf as qJ,X9 as qK,_Rt as qL,$a as qM,u6e as qN,aQe as qO,NAt as qP,u4t as qQ,h4t as qR,HGe as qS,lWe as qT,aWe as qU,B0e as qV,Iqe as qW,NBe as qX,RBe as qY,MBe as qZ,KBe as q_,NWe as qa,Qre as qb,s6e as qc,CAt as qd,PAt as qe,aUe as qf,EKe as qg,sLt as qh,oLt as qi,MKe as qj,iLt as qk,lA as ql,uA as qm,TKe as qn,XAt as qo,VKe as qp,zKe as qq,VW as qr,Zrt as qs,ROt as qt,MOt as qu,CCt as qv,COt as qw,HOt as qx,UOt as qy,BOt as qz,Abe as r,LBe as r$,JRt as r0,KXe as r1,FBe as r2,kNt as r3,RLt as r4,SNt as r5,Xg as r6,ELt as r7,ALt as r8,SLt as r9,yqe as rA,oJe as rB,Jve as rC,fIt as rD,nne as rE,D3t as rF,yNt as rG,o4t as rH,TBe as rI,Mx as rJ,hYe as rK,ACt as rL,V3t as rM,n4t as rN,NCt as rO,gGe as rP,uYe as rQ,wme as rR,Sme as rS,tMt as rT,l4t as rU,eMt as rV,QRt as rW,fRt as rX,TW as rY,gIt as rZ,c4t as r_,LGe as ra,wRt as rb,SRt as rc,ORt as rd,bRt as re,TRt as rf,LRt as rg,uUe as rh,hBe as ri,QCt as rj,DI as rk,jI as rl,$I as rm,LXe as rn,gNt as ro,g4t as rp,r4t as rq,a4t as rr,s4t as rs,ZAt as rt,P4t as ru,I4t as rv,FAt as rw,t4t as rx,cRt as ry,f4t as rz,Xe as s,aYe as s0,qBe as s1,BRt as s2,HRt as s3,XOt as s4,Q2 as t,lSe as u,mi as v,gCt as w,jd as x,vI as y,Ffe as z};
//# sourceMappingURL=index-Caamb0TH.js.map
