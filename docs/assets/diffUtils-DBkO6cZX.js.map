{"version":3,"file":"diffUtils-DBkO6cZX.js","sources":["../../node_modules/@arcgis/core/core/accessorSupport/diffUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport t from\"../Accessor.js\";import e from\"../Collection.js\";import{getProperties as n}from\"./utils.js\";const o=new Set([\"esri.Color\",\"esri.portal.Portal\",\"esri.symbols.support.Symbol3DAnchorPosition2D\",\"esri.symbols.support.Symbol3DAnchorPosition3D\"]);function r(e){return e instanceof t}function f(t){return t instanceof e?Object.keys(t.items):r(t)?n(t).keys():t?Object.keys(t):[]}function i(t,n){return t instanceof e?t.items[n]:t[n]}function l(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function u(t){return t?t.declaredClass:null}function c(t,e){const n=t.diff;if(n&&\"function\"==typeof n)return n(t,e);const s=f(t),p=f(e);if(0===s.length&&0===p.length)return;if(!s.length||!p.length||l(t,e))return{type:\"complete\",oldValue:t,newValue:e};const a=p.filter(t=>!s.includes(t)),y=s.filter(t=>!p.includes(t)),d=s.filter(n=>p.includes(n)&&i(t,n)!==i(e,n)).concat(a,y).sort(),m=u(t);if(m&&o.has(m)&&d.length)return{type:\"complete\",oldValue:t,newValue:e};let h;const b=r(t)&&r(e);for(const o of d){const r=i(t,o),f=i(e,o);let l;if((b||\"function\"!=typeof r&&\"function\"!=typeof f)&&(r!==f&&(null!=r||null!=f))){if(n&&n[o]&&\"function\"==typeof n[o])l=n[o]?.(r,f);else if(r instanceof Date&&f instanceof Date){if(r.getTime()===f.getTime())continue;l={type:\"complete\",oldValue:r,newValue:f}}else l=\"object\"==typeof r&&\"object\"==typeof f&&u(r)===u(f)?c(r,f):{type:\"complete\",oldValue:r,newValue:f};null!=l&&(null!=h?h.diff[o]=l:h={type:\"partial\",diff:{[o]:l}})}}return h}function s(t,e){return p(t,e)}function p(t,e){if(null==t)return!1;const n=e.split(\".\");let o=t;for(const r of n){if(\"complete\"===o.type)return!0;if(\"partial\"!==o.type)return!1;{const t=o.diff[r];if(!t)return!1;o=t}}return!0}function a(t,e){if(!t)return!1;if(\"partial\"===t.type){const n=Object.keys(t.diff);return 1===n.length&&n[0]===e}return!1}function y(t,e){if(\"function\"!=typeof t&&\"function\"!=typeof e&&(null!=t||null!=e))return null==t||null==e||\"object\"==typeof t&&\"object\"==typeof e&&u(t)!==u(e)?{type:\"complete\",oldValue:t,newValue:e}:c(t,e)}function d(t){if(null==t)return!0;switch(t.type){case\"complete\":return!1;case\"collection\":{const e=t;for(const t of e.added)if(!d(t))return!1;for(const t of e.removed)if(!d(t))return!1;for(const t of e.changed)if(!d(t))return!1;return!0}case\"partial\":for(const e in t.diff){if(!d(t.diff[e]))return!1}return!0}}export{y as diff,p as hasDiff,s as hasRootDiff,a as hasRootDiffOnly,d as isEmpty};\n"],"names":["o","r","t","f","e","n","i","l","u","c","s","p","a","y","d","m","h","b"],"mappings":"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","x_google_ignoreList":[0]}