{"version":3,"file":"popupUtils-CihFMasb.js","sources":["../../node_modules/@arcgis/core/support/popupUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../PopupTemplate.js\";import{isFieldVisibleByDefault as t,isFieldEditable as i,getDisplayFieldName as n,isRasterPixelValueField as o}from\"../layers/support/fieldUtils.js\";import r from\"../popup/FieldInfo.js\";import s from\"../popup/content/AttachmentsContent.js\";import l from\"../popup/content/FieldsContent.js\";import a from\"../popup/support/FieldInfoFormat.js\";function d({displayField:t,editFieldsInfo:i,fields:n,objectIdField:o,title:r},s){if(!n)return null;const l=b({editFieldsInfo:i,fields:n,objectIdField:o},s);if(!l.length)return null;const a=I({titleBase:r,fields:n,displayField:t}),d=y();return new e({title:a,content:d,fieldInfos:l})}function u(t){const{fields:i,featureReduction:n,title:o}=t,r=n.fields;if(!r)return null;const s=w(r,i??[]);if(!s.length)return null;const l=v();return new e({title:o,content:l,fieldInfos:s})}const c=(e,i)=>i.visibleFieldNames?i.visibleFieldNames.has(e.name):t(e,i);function f({fields:e,ignoreFieldTypes:t,sortDisabled:i}){const n=e;return t&&(e=e.filter(e=>!t.includes(e.type))),e===n&&(e=e.slice()),!0!==i&&e.sort(p),e}function p(e,t){return\"oid\"===e.type?-1:\"oid\"===t.type?1:j(e)?-1:j(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function m(e,t){return new l({fieldInfos:b(e,t).filter(e=>e.visible)})}function b(e,t){const n=t?.visibleFieldNames;return f({fields:e.fields??[],ignoreFieldTypes:t?.ignoreFieldTypes||C,sortDisabled:t?.sortDisabled}).map(t=>new r({fieldName:t.name,isEditable:i(t,e),label:t.alias,format:g(t),visible:c(t,{...e,visibleFieldNames:n})}))}function w(e,t){return e.map(e=>new r({fieldName:e.name,isEditable:!1,label:e.alias,format:F(e,t),visible:!0}))}function F(e,t){const{onStatisticField:i,onStatisticExpression:n,statisticType:o}=e;if(i){const e=t.find(e=>i===e.name);if(e)return g(e)}return\"number\"===n?.returnType?new a({digitSeparator:!0,places:2}):\"count\"===o?new a({digitSeparator:!0,places:0}):void 0}function g(e){switch(e.type){case\"small-integer\":case\"integer\":return new a({digitSeparator:!0,places:0});case\"single\":case\"double\":return new a({digitSeparator:!0,places:2});case\"string\":return o(e.name)?new a({digitSeparator:!0,places:0}):void 0;default:return}}function y(){return[new l,new s]}function v(){return[new l]}function I(e){const t=n(e),{titleBase:i}=e;return t?`${i}: {${t.trim()}}`:i??\"\"}function j(e){if(\"name\"===(e.name&&e.name.toLowerCase()))return!0;const t=e.alias?.toLowerCase();return\"name\"===t}const C=[\"geometry\",\"blob\",\"raster\",\"guid\",\"xml\"];export{b as createFieldInfos,m as createFieldsContent,d as createPopupTemplate,u as createPopupTemplateForFeatureReduction};\n"],"names":["d","t","n","o","r","s","b","a","I","y","e","c","f","i","p","j","C","g","l"],"mappings":"wGAIuX,SAASA,EAAE,CAAC,aAAaC,EAAE,eAAe,EAAE,OAAOC,EAAE,cAAcC,EAAE,MAAMC,CAAC,EAAEC,EAAE,CAAC,GAAG,CAACH,EAAE,OAAO,KAAK,MAAM,EAAEI,EAAE,CAAC,eAAe,EAAE,OAAOJ,EAAE,cAAcC,CAAC,EAAEE,CAAC,EAAE,GAAG,CAAC,EAAE,OAAO,OAAO,KAAK,MAAME,EAAEC,EAAE,CAAC,UAAUJ,EAAE,OAAOF,EAAE,aAAaD,CAAC,CAAC,EAAED,EAAES,EAAC,EAAG,OAAO,IAAIC,EAAE,CAAC,MAAMH,EAAE,QAAQP,EAAE,WAAW,CAAC,CAAC,CAAC,CAAgM,MAAMW,EAAE,CAAC,EAAE,IAAI,EAAE,kBAAkB,EAAE,kBAAkB,IAAI,EAAE,IAAI,EAAEV,EAAE,EAAE,CAAC,EAAE,SAASW,EAAE,CAAC,OAAO,EAAE,iBAAiBX,EAAE,aAAaY,CAAC,EAAE,CAAC,MAAMX,EAAE,EAAE,OAAOD,IAAI,EAAE,EAAE,OAAOS,GAAG,CAACT,EAAE,SAASS,EAAE,IAAI,CAAC,GAAG,IAAIR,IAAI,EAAE,EAAE,MAAK,GAASW,IAAL,IAAQ,EAAE,KAAKC,CAAC,EAAE,CAAC,CAAC,SAASA,EAAE,EAAEb,EAAE,CAAC,OAAc,EAAE,OAAV,MAAe,GAAWA,EAAE,OAAV,MAAe,EAAEc,EAAE,CAAC,EAAE,GAAGA,EAAEd,CAAC,EAAE,GAAG,EAAE,OAAO,EAAE,MAAM,kBAAiB,EAAG,eAAeA,EAAE,OAAOA,EAAE,MAAM,kBAAiB,CAAE,CAAC,CAAwE,SAASK,EAAE,EAAEL,EAAE,CAAC,MAAMC,EAAED,GAAG,kBAAkB,OAAOW,EAAE,CAAC,OAAO,EAAE,QAAQ,CAAA,EAAG,iBAAiBX,GAAG,kBAAkBe,EAAE,aAAaf,GAAG,YAAY,CAAC,EAAE,IAAIA,GAAG,IAAIG,EAAE,CAAC,UAAUH,EAAE,KAAK,WAAWY,EAAEZ,EAAE,CAAC,EAAE,MAAMA,EAAE,MAAM,OAAOgB,EAAEhB,CAAC,EAAE,QAAQU,EAAEV,EAAE,CAAC,GAAG,EAAE,kBAAkBC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAoX,SAASe,EAAE,EAAE,CAAC,OAAO,EAAE,KAAI,CAAE,IAAI,gBAAgB,IAAI,UAAU,OAAO,IAAIV,EAAE,CAAC,eAAe,GAAG,OAAO,CAAC,CAAC,EAAE,IAAI,SAAS,IAAI,SAAS,OAAO,IAAIA,EAAE,CAAC,eAAe,GAAG,OAAO,CAAC,CAAC,EAAE,IAAI,SAAS,OAAOJ,EAAE,EAAE,IAAI,EAAE,IAAII,EAAE,CAAC,eAAe,GAAG,OAAO,CAAC,CAAC,EAAE,OAAO,QAAQ,MAAM,CAAC,CAAC,SAASE,GAAG,CAAC,MAAM,CAAC,IAAIS,EAAE,IAAIb,CAAC,CAAC,CAA4B,SAASG,EAAE,EAAE,CAAC,MAAMP,EAAEC,EAAE,CAAC,EAAE,CAAC,UAAUW,CAAC,EAAE,EAAE,OAAOZ,EAAE,GAAGY,CAAC,MAAMZ,EAAE,KAAI,CAAE,IAAIY,GAAG,EAAE,CAAC,SAASE,EAAE,EAAE,CAAC,OAAa,EAAE,MAAM,EAAE,KAAK,YAAW,KAApC,OAA8C,GAAW,EAAE,OAAO,YAAW,IAAS,MAAU,CAAC,MAAMC,EAAE,CAAC,WAAW,OAAO,SAAS,OAAO,KAAK","x_google_ignoreList":[0]}