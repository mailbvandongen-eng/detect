{"version":3,"file":"tiles3DUtils-Da2HMM1H.js","sources":["../../node_modules/@arcgis/core/layers/support/tiles3DUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{rad2deg as e}from\"../../core/mathUtils.js\";import{e as t,g as r,t as n,d as o,A as i,z as s,a as m}from\"../../chunks/vec32.js\";import{fromValues as a,create as h}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{WGS84ECEFSpatialReferenceLike as l}from\"../../geometry/ellipsoidUtils.js\";import c from\"../../geometry/Extent.js\";import f from\"../../geometry/HeightModelInfo.js\";import x from\"../../geometry/SpatialReference.js\";import{projectBuffer as g}from\"../../geometry/projection/projectBuffer.js\";function u(e,t){if(!Array.isArray(e)||e.length<t)return!1;for(const r of e)if(\"number\"!=typeof r)return!1;return!0}const d=7645211,p={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850},S=new Map([[5773,new f({heightModel:\"gravity-related-height\",heightUnit:\"meters\",vertCRS:\"EGM96_Geoid\"})],[3855,new f({heightModel:\"gravity-related-height\",heightUnit:\"meters\",vertCRS:\"EGM2008_Geoid\"})],[115700,new f({heightModel:\"ellipsoidal\",heightUnit:\"meters\",vertCRS:\"WGS_1984\"})],[115701,new f({heightModel:\"ellipsoidal\",heightUnit:\"meters\",vertCRS:\"ETRS_1989\"})],[6360,new f({heightModel:\"gravity-related-height\",heightUnit:\"us-feet\",vertCRS:\"NAVD88_height_(ftUS)\"})],[7837,new f({heightModel:\"gravity-related-height\",heightUnit:\"meters\",vertCRS:\"DHHN2016_(height) \"})]]);function _(e){if(!e)return null;const t=e.vcsWkid||e.latestVcsWkid;return t?S.get(t):null}function R(e){return!(!(e.extensions?.ESRI_crs?.wkid||e.extensions?.ESRI_crs?.latestWkid||e.extensions?.ESRI_crs?.wkt)||!e.root?.extensions?.ESRI_crs?.boundingVolume?.box&&!e.root?.extensions?.ESRI_crs?.boundingVolume?.sphere)}function E(f,S=!1){let _=new x({wkid:4326,vcsWkid:115700}),R=f.root?.boundingVolume,E=!1,b=f?.root?.transform;if(S&&(f.extensions?.ESRI_crs?.wkid||f.extensions?.ESRI_crs?.latestWkid||f.extensions?.ESRI_crs?.wkt)&&(f.root?.extensions?.ESRI_crs?.boundingVolume?.box||f.root?.extensions?.ESRI_crs?.boundingVolume?.sphere))_=new x(f.extensions?.ESRI_crs),R=f.root?.extensions?.ESRI_crs?.boundingVolume,b=f.root?.transform,E=!0;else if(!R)return new c(-180,-90,180,90,_);if(R.box){const e=R?.box;if(e[3]>d&&e[7]>d&&e[11]>d)return new c({...p,spatialReference:_})}const w=h();if(!E&&R.region&&u(R.region,6)){const t=R.region,r=e(t[0]),n=e(t[1]),o=t[4],i=e(t[2]),s=e(t[3]),m=t[5];return new c({xmin:r,ymin:n,zmin:o,xmax:i,ymax:s,zmax:m,spatialReference:_})}if(R.sphere&&u(R.sphere,4)){const e=R.sphere,m=a(e[0],e[1],e[2]),f=e[3]/Math.sqrt(3),d=h();t(d,m,a(f,f,f));const p=h();if(r(p,m,a(f,f,f)),b&&u(b,16)){const e=b;n(w,d,e),o(d,w),n(w,p,e),o(p,w)}E||(g(d,l,0,d,x.WGS84,0),g(p,l,0,p,x.WGS84,0));const S=h(),y=h();return i(S,d,p),s(y,d,p),new c({xmin:S[0],ymin:S[1],zmin:S[2],xmax:y[0],ymax:y[1],zmax:y[2],spatialReference:_})}if(R.box&&u(R.box,12)){const e=R.box,t=a(e[0],e[1],e[2]),o=a(e[3],e[4],e[5]),f=a(e[6],e[7],e[8]),d=a(e[9],e[10],e[11]),p=[];for(let r=0;r<8;++r)p.push(h());if(r(p[0],t,o),r(p[0],p[0],f),r(p[0],p[0],d),m(p[1],t,o),r(p[1],p[1],f),r(p[1],p[1],d),r(p[2],t,o),m(p[2],p[2],f),r(p[2],p[2],d),m(p[3],t,o),m(p[3],p[3],f),r(p[3],p[3],d),r(p[4],t,o),r(p[4],p[4],f),m(p[4],p[4],d),m(p[5],t,o),r(p[5],p[5],f),m(p[5],p[5],d),r(p[6],t,o),m(p[6],p[6],f),m(p[6],p[6],d),m(p[7],t,o),m(p[7],p[7],f),m(p[7],p[7],d),b&&u(b,16)){const e=b;for(let t=0;t<8;++t)n(p[t],p[t],e)}const S=a(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),w=a(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let r=0;r<8;++r)E||g(p[r],l,0,p[r],x.WGS84,0),i(w,w,p[r]),s(S,S,p[r]);return new c({xmin:w[0],ymin:w[1],zmin:w[2],xmax:S[0],ymax:S[1],zmax:S[2],spatialReference:_})}return new c(-180,-90,180,90,_)}export{_ as getHeightModelInfoFromVCS,R as hasEsriCrs,E as initFullExtent,u as verifyArray};\n"],"names":["u","e","t","r","d","p","f","R","E","S","_","x","b","c","w","h","n","o","i","s","m","a","g","l","y"],"mappings":"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","x_google_ignoreList":[0]}