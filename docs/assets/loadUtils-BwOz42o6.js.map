{"version":3,"file":"loadUtils-BwOz42o6.js","sources":["../../node_modules/@arcgis/core/layers/support/LayerLoadContext.js","../../node_modules/@arcgis/core/portal/support/loadUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{fetchArcGISServiceJSON as t}from\"../../support/requestPresets.js\";class e{constructor(){this._serviceMetadatas=new Map,this._itemDatas=new Map}async fetchServiceMetadata(e,a){const s=this._serviceMetadatas.get(e);if(s)return s;const r=await t(e,a);return this._serviceMetadatas.set(e,r),r}async fetchItemData(t){const{id:e}=t;if(!e)return null;const{_itemDatas:a}=this;if(a.has(e))return a.get(e);const s=await t.fetchData();return a.set(e,s),s}async fetchCustomParameters(t,e){const a=await this.fetchItemData(t);return a&&\"object\"==typeof a&&(e?e(a):a.customParameters)||null}}export{e as LayerLoadContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{findAssociatedFeatureService as e}from\"../../layers/support/associatedFeatureServiceUtils.js\";import{getLayerModuleType as r}from\"../../layers/support/fetchService.js\";import{getPreferredHost as t}from\"../../layers/support/layerUtils.js\";function a(e){const t={id:e.id,name:e.name},a=r(e.type);return\"FeatureLayer\"!==a&&(t.layerType=a),t}async function l(e,r,l){let n;if(null==e?.layers||null==e?.tables){const u=await l.fetchServiceMetadata(r,{customParameters:s(e)?.customParameters});n=t(),(e=e||{}).layers=e.layers||u?.layers?.map(a),e.tables=e.tables||u?.tables?.map(a)}return{data:e,preferredHost:n}}function s(e){if(!e)return null;const{layers:r,tables:t}=e;return r?.length?r[0]:t?.length?t[0]:null}function n(e,r){if(null==r)return null;return[...e.layers||[],...e.tables||[]].find(e=>e.id===r)}function u(e,r){return[...e.layers||[],...e.tables||[]].filter(({layerType:e})=>e?r.includes(e):r.includes(\"ArcGISFeatureLayer\"))}function c(e){return(e?.layers?.length??0)+(e?.tables?.length??0)}function o(e){switch(e){case\"catalog\":return[\"CatalogLayer\"];case\"feature\":return[\"ArcGISFeatureLayer\"];case\"oriented-imagery\":return[\"OrientedImageryLayer\"];case\"subtype-group\":return[\"SubtypeGroupLayer\",\"SubtypeGroupTable\"]}return null}function i(e){switch(e){case\"CatalogLayer\":return\"CatalogLayer\";case\"OrientedImageryLayer\":return\"OrientedImageryLayer\";case\"SubtypeGroupLayer\":case\"SubtypeGroupTable\":return\"SubtypeGroupLayer\"}return\"FeatureLayer\"}async function y(r,t,l){if(!r?.url)return t??{};if(t??={},!t.layers){const e=await l.fetchServiceMetadata(r.url);t.layers=e.layers?.map(a)}const{serverUrl:n,portalItem:u}=await e(r.url,{sceneLayerItem:r,customParameters:s(t)?.customParameters}).catch(()=>({serverUrl:null,portalItem:null}));if(null==n)return t.tables=[],t;if(!t.tables&&u){const e=await u.fetchData().catch(()=>null);if(e?.tables)t.tables=e.tables.map(a);else{const r=await l.fetchServiceMetadata(n,{customParameters:s(e)?.customParameters}).catch(()=>null);t.tables=r?.tables?.map(a)}}if(t.tables)for(const e of t.tables)e.url=`${n}/${e.id}`;return t}export{a as createSublayerData,s as getFirstLayerOrTable,n as getLayerOrTable,c as getNumLayersAndTables,u as getSublayersByLayerType,o as instanceTypeToLayerTypes,i as layerTypeToLayerModuleType,y as populateSceneServiceItemData,l as preprocessFSItemData};\n"],"names":["e","s","r","t","a","l","n","u","c","o","i","y"],"mappings":"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","x_google_ignoreList":[0,1]}