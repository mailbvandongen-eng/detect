{"version":3,"file":"index-BGCA9qFp.js","sources":["../../node_modules/@esri/calcite-components/dist/components/calcite-flow/customElement.js"],"sourcesContent":["/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.\nv3.3.3 */\nimport { c as customElement } from \"../../chunks/runtime.js\";\nimport { css, html } from \"lit\";\nimport { LitElement, safeClassMap } from \"@arcgis/lumina\";\nimport { createRef, ref } from \"lit-html/directives/ref.js\";\nimport { c as createObserver } from \"../../chunks/observers.js\";\nimport { y as whenAnimationDone } from \"../../chunks/dom.js\";\nimport { u as useSetFocus } from \"../../chunks/useSetFocus.js\";\nconst CSS = {\n  frame: \"frame\",\n  frameAdvancing: \"frame--advancing\",\n  frameRetreating: \"frame--retreating\"\n};\nconst styles = css`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host{position:relative;display:flex;inline-size:100%;flex:1 1 auto;align-items:stretch;overflow:hidden;background-color:transparent}:host .frame{position:relative;margin:0;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;padding:0;animation-name:none;animation-duration:var(--calcite-animation-timing);background-color:var(--calcite-flow-background-color)}:host ::slotted(*){display:none;block-size:100%}:host ::slotted(*[selected]){display:flex}:host ::slotted(.calcite-match-height:last-child){display:flex;flex:1 1 auto;overflow:hidden}:host .frame--advancing{animation-name:calcite-frame-advance}:host .frame--retreating{animation-name:calcite-frame-retreat}@keyframes calcite-frame-advance{0%{--tw-bg-opacity: .5;transform:translate3d(50px,0,0)}to{--tw-bg-opacity: 1;transform:translateZ(0)}}@keyframes calcite-frame-retreat{0%{--tw-bg-opacity: .5;transform:translate3d(-50px,0,0)}to{--tw-bg-opacity: 1;transform:translateZ(0)}}:host([hidden]){display:none}[hidden]{display:none}`;\nclass Flow extends LitElement {\n  constructor() {\n    super();\n    this.frameRef = createRef();\n    this.itemMutationObserver = createObserver(\"mutation\", () => this.updateItemsAndProps());\n    this.items = [];\n    this.selectedIndex = -1;\n    this.focusSetter = useSetFocus()(this);\n    this.flowDirection = \"standby\";\n    this.listen(\"calciteInternalFlowItemChange\", this.handleCalciteInternalFlowItemChange);\n    this.listen(\"calciteFlowItemBack\", this.handleItemBackClick);\n  }\n  static {\n    this.properties = { flowDirection: [16, {}, { state: true }], customItemSelectors: 1 };\n  }\n  static {\n    this.styles = styles;\n  }\n  async back() {\n    const { items, selectedIndex } = this;\n    const selectedItem = items[selectedIndex];\n    const nextSelectedItem = items[selectedIndex - 1];\n    if (!selectedItem || !nextSelectedItem) {\n      return;\n    }\n    const beforeBack = selectedItem.beforeBack ? selectedItem.beforeBack : () => Promise.resolve();\n    try {\n      await beforeBack.call(selectedItem);\n    } catch {\n      return;\n    }\n    selectedItem.selected = false;\n    nextSelectedItem.selected = true;\n    return nextSelectedItem;\n  }\n  async setFocus(options) {\n    return this.focusSetter(() => this.items[this.selectedIndex], options);\n  }\n  connectedCallback() {\n    super.connectedCallback();\n    this.itemMutationObserver?.observe(this.el, { childList: true, subtree: true });\n  }\n  willUpdate(changes) {\n    if (changes.has(\"flowDirection\") && (this.hasUpdated || this.flowDirection !== \"standby\")) {\n      this.handleFlowDirectionChange(this.flowDirection);\n    }\n  }\n  loaded() {\n    this.updateItemsAndProps();\n  }\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    this.itemMutationObserver?.disconnect();\n  }\n  async handleFlowDirectionChange(flowDirection) {\n    if (flowDirection === \"standby\" || !this.frameRef.value) {\n      return;\n    }\n    await whenAnimationDone(this.frameRef.value, flowDirection === \"retreating\" ? \"calcite-frame-retreat\" : \"calcite-frame-advance\");\n    this.resetFlowDirection();\n  }\n  handleCalciteInternalFlowItemChange(event) {\n    event.stopPropagation();\n    this.updateFlowProps();\n  }\n  async handleItemBackClick(event) {\n    if (event.defaultPrevented) {\n      return;\n    }\n    await this.back();\n    return this.setFocus();\n  }\n  resetFlowDirection() {\n    this.flowDirection = \"standby\";\n  }\n  getFlowDirection(oldSelectedIndex, newSelectedIndex) {\n    const allowRetreatingDirection = oldSelectedIndex > 0;\n    const allowAdvancingDirection = oldSelectedIndex > -1 && newSelectedIndex > 0;\n    if (!allowAdvancingDirection && !allowRetreatingDirection) {\n      return \"standby\";\n    }\n    return newSelectedIndex < oldSelectedIndex ? \"retreating\" : \"advancing\";\n  }\n  updateItemsAndProps() {\n    const { customItemSelectors, el } = this;\n    const newItems = Array.from(el.querySelectorAll(`calcite-flow-item${customItemSelectors ? `,${customItemSelectors}` : \"\"}`)).filter((flowItem) => flowItem.closest(\"calcite-flow\") === el);\n    this.items = newItems;\n    this.ensureSelectedFlowItemExists();\n    this.updateFlowProps();\n  }\n  updateFlowProps() {\n    const { selectedIndex, items } = this;\n    const foundSelectedIndex = this.findSelectedFlowItemIndex(items);\n    items.forEach((flowItem, index) => {\n      const currentlySelected = index === foundSelectedIndex;\n      if (!currentlySelected) {\n        flowItem.menuOpen = false;\n      }\n      flowItem.showBackButton = currentlySelected && foundSelectedIndex > 0;\n    });\n    if (foundSelectedIndex === -1) {\n      return;\n    }\n    if (selectedIndex !== foundSelectedIndex) {\n      this.flowDirection = this.getFlowDirection(selectedIndex, foundSelectedIndex);\n    }\n    this.selectedIndex = foundSelectedIndex;\n  }\n  findSelectedFlowItemIndex(items) {\n    const selectedItem = items.slice(0).reverse().find((item) => !!item.selected);\n    return items.indexOf(selectedItem);\n  }\n  ensureSelectedFlowItemExists() {\n    const { items } = this;\n    const foundSelectedIndex = this.findSelectedFlowItemIndex(items);\n    if (foundSelectedIndex !== -1) {\n      return;\n    }\n    const lastItem = items[items.length - 1];\n    if (lastItem) {\n      lastItem.selected = true;\n    }\n  }\n  render() {\n    const { flowDirection } = this;\n    const frameDirectionClasses = {\n      [CSS.frame]: true,\n      [CSS.frameAdvancing]: flowDirection === \"advancing\",\n      [CSS.frameRetreating]: flowDirection === \"retreating\"\n    };\n    return html`<div class=${safeClassMap(frameDirectionClasses)} ${ref(this.frameRef)}><slot></slot></div>`;\n  }\n}\ncustomElement(\"calcite-flow\", Flow);\nexport {\n  Flow\n};\n"],"names":["CSS","styles","css","_Flow","LitElement","createRef","createObserver","useSetFocus","items","selectedIndex","selectedItem","nextSelectedItem","beforeBack","options","changes","flowDirection","whenAnimationDone","event","oldSelectedIndex","newSelectedIndex","allowRetreatingDirection","customItemSelectors","el","newItems","flowItem","foundSelectedIndex","index","currentlySelected","item","lastItem","frameDirectionClasses","html","safeClassMap","ref","Flow","customElement"],"mappings":"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","x_google_ignoreList":[0]}