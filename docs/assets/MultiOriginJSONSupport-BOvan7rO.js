import{ii as p,ap as S,_ as O,k as f,aO as g,ij as M,ik as m,fH as u,fG as w,aQ as d,il as k,im as J}from"./index-DbkovvcO.js";class _{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(p),this._values=new Map,this.multipleOriginsSupported=!0}clone(i){const e=new _,t=this._originStores[0];t&&t.forEach((s,r)=>{e.set(r,S(s),0)});for(let s=2;s<p;s++){const r=this._originStores[s];r&&r.forEach((o,n)=>{i&&i.has(n)||e.set(n,S(o),s)})}return e}get(i,e){const t=e===void 0?this._values:this._originStores[e];return t?t.get(i):void 0}keys(i){const e=i==null?this._values:this._originStores[i];return e?[...e.keys()]:[]}set(i,e,t=7){let s=this._originStores[t];if(s||(s=new Map,this._originStores[t]=s),s.set(i,e),!this._values.has(i)||this._propertyOriginMap.get(i)<=t){const r=this._values.get(i);return this._values.set(i,e),this._propertyOriginMap.set(i,t),r!==e}return!1}delete(i,e=7){const t=this._originStores[e];if(!t)return;const s=t.get(i);if(t.delete(i),this._values.has(i)&&this._propertyOriginMap.get(i)===e){this._values.delete(i);for(let r=e-1;r>=0;r--){const o=this._originStores[r];if(o&&o.has(i)){this._values.set(i,o.get(i)),this._propertyOriginMap.set(i,r);break}}}return s}has(i,e){const t=e===void 0?this._values:this._originStores[e];return!!t&&t.has(i)}revert(i,e){for(;e>0&&!this.has(i,e);)--e;const t=this._originStores[e],s=t?.get(i),r=this._values.get(i);return this._values.set(i,s),this._propertyOriginMap.set(i,e),r!==s}originOf(i){return this._propertyOriginMap.get(i)||0}isAtOrigin(i,e){return this.has(i,e)&&this.originOf(i)===e}isBelowOrigin(i,e){return!this.has(i)||this.originOf(i)<e}forEach(i){this._values.forEach(i)}}const y=a=>{const i=a;let e=class extends i{constructor(...t){super(...t);const s=g(this),r=s.store,o=new _;s.store=o,M(s,r,o)}read(t,s){m(this,t,s)}getAtOrigin(t,s){const r=l(this),o=u(s);if(typeof t=="string")return r.get(t,o);const n={};return t.forEach(h=>{n[h]=r.get(h,o)}),n}originOf(t){return w(this.originIdOf(t))}originIdOf(t){return l(this).originOf(t)}revert(t,s){const r=l(this),o=u(s),n=g(this);let h;h=typeof t=="string"?t==="*"?r.keys(o):[t]:t,h.forEach(c=>{n.invalidate(c),r.revert(c,o),n.commit(c)})}};return e=O([f("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function l(a){return g(a).store}y(d);const N=a=>{const i=a;let e=class extends i{constructor(...t){super(...t)}clear(t,s="user"){g(this).clearOrigin(t,u(s))}write(t,s){return k(this,t=t||{},s),t}setAtOrigin(t,s,r){g(this).setAtOrigin(t,s,u(r))}removeOrigin(t){const s=v(this),r=u(t),o=s.keys(r);for(const n of o)s.originOf(n)===r&&s.set(n,s.get(n,r),7)}updateOrigin(t,s){const r=v(this),o=u(s),n=J(this,t);for(let h=o+1;h<p;++h)r.delete(t,h);r.set(t,n,o)}toJSON(t){return this.write({},t)}};return e=O([f("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function v(a){return g(a).store}const E=a=>{const i=N(y(a));let e=class extends i{};return e=O([f("esri.core.MultiOriginJSONSupport")],e),e},$=E(d);export{E as l,$ as m};
//# sourceMappingURL=MultiOriginJSONSupport-BOvan7rO.js.map
