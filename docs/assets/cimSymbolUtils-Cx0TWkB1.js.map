{"version":3,"file":"cimSymbolUtils-Cx0TWkB1.js","sources":["../../node_modules/@arcgis/core/symbols/support/cimSymbolUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import{toCIMSymbolJSON as t,isCIMStroke as o,isCIMMarker as r,isCIMMarkerStrokePlacement as a,normalizeAlpha as n,isCIMFill as s}from\"../cim/utils.js\";function i(e){const a=t(e);if(\"CIMTextSymbol\"===a?.type)return a.height??0;let n=0;if(a?.symbolLayers)for(const t of a.symbolLayers)r(t)&&null!=t.size&&t.size>n?n=t.size:o(t)&&null!=t.width&&t.width>n?n=t.width:s(t);return n}function c(e,o,r){if(!e)return;const a=t(e),n=i(e);if(0===n)return void l(a,o);f(a,o/n,!1,r)}function l(e,t){if(e)if(\"CIMTextSymbol\"!==e.type){if(e.symbolLayers)for(const o of e.symbolLayers)switch(o.type){case\"CIMPictureMarker\":case\"CIMVectorMarker\":o.size=t;break;case\"CIMPictureStroke\":case\"CIMSolidStroke\":case\"CIMGradientStroke\":o.width=t}}else e.height=t}function f(e,t,o,r){if(e)if(\"CIMTextSymbol\"!==e.type){if(o&&e.effects)for(const o of e.effects)M(o,t);if(e.symbolLayers)for(const o of e.symbolLayers){switch(o.type){case\"CIMPictureMarker\":case\"CIMVectorMarker\":m(o,t,r);break;case\"CIMPictureStroke\":case\"CIMSolidStroke\":case\"CIMGradientStroke\":!r?.preserveOutlineWidth&&o.width&&(o.width*=t);break;case\"CIMPictureFill\":o.height&&(o.height*=t),o.offsetX&&(o.offsetX*=t),o.offsetY&&(o.offsetY*=t);break;case\"CIMHatchFill\":f(o.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),o.offsetX&&(o.offsetX*=t),o.offsetY&&(o.offsetY*=t),o.separation&&(o.separation*=t)}if(o.effects)for(const e of o.effects)M(e,t)}}else null!=e.height&&(e.height*=t)}function m(e,t,o){if(e&&(e.markerPlacement&&C(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&\"Absolute\"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,\"CIMVectorMarker\"===e.type&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||f(r.symbol,t,!0,o)}function C(e,t){switch(a(e)&&e.offset&&(e.offset*=t),e.type){case\"CIMMarkerPlacementAlongLineRandomSize\":case\"CIMMarkerPlacementAlongLineSameSize\":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map(e=>e*t);e.placementTemplate=o}break;case\"CIMMarkerPlacementAlongLineVariableSize\":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map(e=>e*t);e.placementTemplate=o}break;case\"CIMMarkerPlacementOnLine\":e.startPointOffset&&(e.startPointOffset*=t);break;case\"CIMMarkerPlacementAtExtremities\":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case\"CIMMarkerPlacementAtMeasuredUnits\":case\"CIMMarkerPlacementOnVertices\":break;case\"CIMMarkerPlacementAtRatioPositions\":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case\"CIMMarkerPlacementPolygonCenter\":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case\"CIMMarkerPlacementInsidePolygon\":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function M(e,t){switch(e.type){case\"CIMGeometricEffectArrow\":case\"CIMGeometricEffectDonut\":e.width&&(e.width*=t);break;case\"CIMGeometricEffectBuffer\":e.size&&(e.size*=t);break;case\"CIMGeometricEffectCut\":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case\"CIMGeometricEffectDashes\":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const o=e.dashTemplate.map(e=>e*t);e.dashTemplate=o}break;case\"CIMGeometricEffectExtension\":case\"CIMGeometricEffectJog\":case\"CIMGeometricEffectRadial\":e.length&&(e.length*=t);break;case\"CIMGeometricEffectMove\":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case\"CIMGeometricEffectOffset\":case\"CIMGeometricEffectOffsetTangent\":e.offset&&(e.offset*=t);break;case\"CIMGeometricEffectRegularPolygon\":e.radius&&(e.radius*=t);break;case\"CIMGeometricEffectTaperedPolygon\":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case\"CIMGeometricEffectWave\":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function u(o){const r=[];return y(t(o),r),r.length?new e(n(r[0])):null}function y(e,t){if(!e)return;let n;n=\"CIMTextSymbol\"===e.type?e.symbol:e;const s=\"CIMPolygonSymbol\"===e.type;if(n?.symbolLayers)for(const i of n.symbolLayers)if(!(i.colorLocked||s&&(o(i)||r(i)&&i.markerPlacement&&a(i.markerPlacement))))switch(i.type){case\"CIMPictureMarker\":case\"CIMPictureStroke\":case\"CIMPictureFill\":i.tintColor&&p(t,i.tintColor);break;case\"CIMVectorMarker\":i.markerGraphics?.forEach(e=>{y(e.symbol,t)});break;case\"CIMSolidStroke\":case\"CIMSolidFill\":p(t,i.color);break;case\"CIMGradientFill\":I(t,i);break;case\"CIMHatchFill\":y(i.lineSymbol,t)}}function p(e,t){for(const o of e)if(o.join(\".\")===t.join(\".\"))return;e.push(t)}function I(e,t){const o=t.colorRamp?.type;switch(o){case\"CIMMultipartColorRamp\":t.colorRamp.colorRamps?.forEach(t=>{\"CIMLinearContinuousColorRamp\"===t.type&&b(e,t)});break;case\"CIMLinearContinuousColorRamp\":case\"CIMPolarContinuousColorRamp\":b(e,t.colorRamp)}}function b(e,t){t&&(t.fromColor&&p(e,t.fromColor),t.toColor&&p(e,t.toColor))}function k(o,r,a){r instanceof e||(r=new e(r));const n=t(o);n&&h(n,r,a)}function h(e,t,n){if(!e)return;let i;i=\"CIMTextSymbol\"===e.type?e.symbol:e;const c=\"CIMPolygonSymbol\"===i?.type;if(i?.symbolLayers)for(const l of i.symbolLayers){if(l.colorLocked)continue;if(c)if(n){const{layersToColor:e}=n;if((o(l)||r(l)&&l.markerPlacement&&a(l.markerPlacement))&&\"fill\"===e||s(l)&&\"outline\"===e)continue}else if(o(l)||r(l)&&l.markerPlacement&&a(l.markerPlacement))continue;const e=t.toArray();switch(l.type){case\"CIMPictureMarker\":case\"CIMPictureStroke\":case\"CIMPictureFill\":l.tintColor=e;break;case\"CIMVectorMarker\":l.markerGraphics?.forEach(e=>{h(e.symbol,t,n)});break;case\"CIMSolidStroke\":case\"CIMSolidFill\":l.color=e;break;case\"CIMGradientFill\":d(l,t);break;case\"CIMHatchFill\":h(l.lineSymbol,t,n)}}}function d(e,t){const o=e.colorRamp?.type;switch(o){case\"CIMMultipartColorRamp\":e.colorRamp.colorRamps?.forEach(e=>{\"CIMLinearContinuousColorRamp\"===e.type&&P(e,t)});break;case\"CIMLinearContinuousColorRamp\":case\"CIMPolarContinuousColorRamp\":P(e.colorRamp,t)}}function P(e,t){if(e&&(e.fromColor&&(e.fromColor=t.toArray()),e.toColor)){const o=t.clone();o.a=0,e.toColor=o.toArray()}}function g(e,o=!1){const r=t(e);if(\"CIMTextSymbol\"===r?.type||\"CIMPointSymbol\"===r?.type){const e=r.angle;return null!=e&&o?360-e:e??0}return 0}function S(e,o,a=!1){const n=t(e);if(a&&(o=360-o),\"CIMTextSymbol\"!==n?.type){if(\"CIMPointSymbol\"===n?.type&&n.symbolLayers){const e=o-(n.angle||0);for(const t of n.symbolLayers)if(r(t)){let o=t.rotation||0;t.rotateClockwise?o-=e:o+=e,t.rotation=o}n.angle=o}}else n.angle=o}function L(e){const o=t(e);if(!o)return null;switch(o.type){case\"CIMPointSymbol\":return\"CIMPointSymbol\";case\"CIMLineSymbol\":return\"CIMLineSymbol\";case\"CIMPolygonSymbol\":return\"CIMPolygonSymbol\";case\"CIMTextSymbol\":return\"CIMTextSymbol\";case\"CIMMeshSymbol\":return\"CIMMeshSymbol\";default:return null}}export{k as applyCIMSymbolColor,S as applyCIMSymbolRotation,u as getCIMSymbolColor,g as getCIMSymbolRotation,i as getCIMSymbolSize,L as getCIMSymbolType,m as scaleCIMMarker,f as scaleCIMSymbol,c as scaleCIMSymbolTo};\n"],"names":["f","t","o","r","M","m","e","C","a","u","y","n","s","i","p","I","b","k","h","c","l","d","P","S"],"mappings":"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","x_google_ignoreList":[0]}