{"version":3,"file":"drawUtils-CRptRhS6.js","sources":["../../node_modules/@arcgis/core/views/draw/support/drawUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{equals as t}from\"../../../core/arrayUtils.js\";import{rad2deg as n}from\"../../../core/mathUtils.js\";import{create as r,center as o}from\"../../../geometry/support/aaBoundingRect.js\";import{getRingsOrPathsBounds as e}from\"../../../geometry/support/boundsUtils.js\";import{geometryToCoordinates as i}from\"../../../geometry/support/coordsUtils.js\";import{toEllipticArc7 as s}from\"../../../geometry/support/curves/circularArcUtils.js\";import{isCurvedGeometry as c,getEndpoint as u,isCoordinate as a,isBezierCurve as m,isCircularArc as l}from\"../../../geometry/support/curves/curveUtils.js\";import{transformEllipticArc as p}from\"../../../geometry/support/curves/ellipticArc7Utils.js\";import{getScaleTransform as f}from\"../../interactive/editGeometry/operations/curveOperationUtils.js\";function y(t,n,r,o){if(null==o||t.hasZ||(o=void 0),\"point\"===t.type)return t.x+=n,t.y+=r,t.hasZ&&null!=o&&(t.z+=o),t;if(\"multipoint\"===t.type){const e=t.points;for(let t=0;t<e.length;t++)e[t]=g(e[t],n,r,o);return t}if(\"extent\"===t.type)return t.xmin+=n,t.xmax+=n,t.ymin+=r,t.ymax+=r,null!=o&&(t.zmin??=0,t.zmin+=o,t.zmax??=0,t.zmax+=o),t;const e=\"polyline\"===t.type?t.curvePaths??t.paths:t.curveRings??t.rings,i=c(t);for(let s=0;s<e.length;s++){const t=e[s];for(let e=0;e<t.length;e++)t[e]=v(t[e],n,r,o)}return\"paths\"in t?i?t.curvePaths=e:t.paths=e:i?t.curveRings=e:t.rings=e,t}function x(t,n,r,o,e){const i=t.clone();if(e){const{resolution:t}=o;y(i,n*t,-r*t)}else{const{dxMap:t,dyMap:e}=h(n,r,o);y(i,t,e)}return i}function h(t,n,r){const o=r.state.inverseTransform;return{dxMap:o[0]*t+o[2]*n,dyMap:o[1]*t+o[3]*n}}function g(t,n,r,o){return z(t,t[0]+n,t[1]+r,null!=t[2]&&null!=o?t[2]+o:void 0)}function v(t,n,r,o){const e=g(u(t),n,r,o);if(a(t))return e;if(m(t)){const[,o,i]=t.b;return{b:[e,[o[0]+n,o[1]+r],[i[0]+n,i[1]+r]]}}if(l(t)){const[,o]=t.c;return{c:[e,[o[0]+n,o[1]+r]]}}const[,i,...s]=t.a;return{a:[e,[i[0]+n,i[1]+r],...s]}}function M(n,s,c,a){if(\"point\"===n.type){const{x:t,y:r}=n,o=a?a[0]:t,e=a?a[1]:r,i=n.clone(),u=(t-o)*s+o,m=(r-e)*c+e;return i.x=u,i.y=m,i}if(\"extent\"===n.type){const{xmin:t,xmax:r,ymin:o,ymax:e}=n,i=a?a[0]:(t+r)/2,u=a?a[1]:(e+o)/2,m=n.clone();if(m.xmin=(t-i)*s+i,m.ymax=(e-u)*c+u,m.xmax=(r-i)*s+i,m.ymin=(o-u)*c+u,m.xmin>m.xmax){const t=m.xmin,n=m.xmax;m.xmin=n,m.xmax=t}if(m.ymin>m.ymax){const t=m.ymin,n=m.ymax;m.ymin=n,m.ymax=t}return m}let m=null;if(!a){m=i(n);const t=r(),o=e(t,m);if(!o)return n.clone();const[s,c,u,l]=o;a=[(s+u)/2,(c+l)/2]}const[l,p]=a;if(\"multipoint\"===n.type){const t=n.clone(),r=t.points;for(let n=0;n<r.length;n++){const t=r[n],[o,e]=t,i=(o-l)*s+l,u=(e-p)*c+p;r[n]=z(t,i,u,void 0)}return t.points=r,t}const f=n.clone();m??=i(n);const y=\"polygon\"===f.type,x=y?f.curveRings??f.rings:f.curvePaths??f.paths;if(!a){const t=r(),n=e(t,x,!1,!1);if(!n)return f;a=o(n)}for(const r of x){let n=null;const o=y&&r.length>0&&t(u(r[0]),u(r.at(-1)));for(let t=0;t<r.length;t++){const o=r[t];r[t]=j(o,s,c,l,p,n),n=o}o&&(r[0]=[...u(r.at(-1))])}return f}function d(t,n,r,o,e){const[i,s,...c]=t;return[(i-o)*n+o,(s-e)*r+e,...c]}function j(t,n,r,o,e,i){if(a(t))return d(t,n,r,o,e);if(m(t)){const[i,s,c]=t.b.map(t=>d(t,n,r,o,e));return{b:[i,s,c]}}if(!i)return t;const c=u(i),y=l(t)?s(c,t):t,[x,h,g,v,M,j,U]=y.a,b=M??0,z=j??Math.hypot(x[0]-h[0],x[1]-h[1]),R=U??1,P=f(o,e,1,0,0,1,n,r);return p(c,{a:[[...x],[...h],g,v,b,z,R]},P)}function U(t,n,r,o,e,i){const s=Math.sqrt((r-t)*(r-t)+(o-n)*(o-n));return Math.sqrt((e-t)*(e-t)+(i-n)*(i-n))/s}function b(t,r,o,e=!1){const i=Math.atan2(r.y-o.y,r.x-o.x)-Math.atan2(t.y-o.y,t.x-o.x),s=Math.atan2(Math.sin(i),Math.cos(i));return e?s:n(s)}function z(t,n,r,o){const e=[n,r];return t.length>2&&e.push(null!=o?o:t[2]),t.length>3&&e.push(t[3]),e}export{x as cloneMove,b as getRotationAngle,U as getScaleRatio,y as move,M as scale,h as screenDeltaToMapDelta};\n"],"names":["y","t","n","r","o","e","g","i","c","s","v","x","h","z","u","a","m","l","M","p","f","j","d","U","b","R","P"],"mappings":"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","x_google_ignoreList":[0]}