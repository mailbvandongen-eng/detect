{"version":3,"file":"jsonUtils-C33Aunze.js","sources":["../../node_modules/@arcgis/core/symbols/support/symbolConversion.js","../../node_modules/@arcgis/core/symbols/support/jsonUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport o from\"../../core/Error.js\";import e from\"../LabelSymbol3D.js\";import r from\"../LineSymbol3D.js\";import l from\"../MeshSymbol3D.js\";import m from\"../PictureMarkerSymbol.js\";import i from\"../PointSymbol3D.js\";import n from\"../PolygonSymbol3D.js\";import s from\"../SimpleFillSymbol.js\";import t from\"../SimpleLineSymbol.js\";import y from\"../SimpleMarkerSymbol.js\";import b from\"../TextSymbol.js\";import a from\"../WebStyleSymbol.js\";import{defaultRendererPolygonSymbol3D as p,defaultRendererPolylineSymbol3D as f}from\"./defaults3D.js\";import{isSymbol3D as c}from\"./typeUtils.js\";const S=\"#useCIMFallbackSymbology()\",g={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function u(u,d=g){if(!u)return{symbol:null};const{retainId:D=g.retainId,ignoreDrivers:M=g.ignoreDrivers,hasLabelingContext:j=g.hasLabelingContext,retainCIM:C=g.retainCIM,cimFallbackEnabled:I=g.cimFallbackEnabled}=d;let k=null;if(c(u))k=u.clone();else if(\"web-style\"===u.type)k=u.clone();else if(\"cim\"===u.type){const e=u.data?.symbol?.type;switch(e){case\"CIMPointSymbol\":k=C?u.clone():i.fromCIMSymbol(u);break;case\"CIMLineSymbol\":I&&(k=f.clone(),d?.logWarning?.(S,\"Unsupported CIM line symbology converted to fallback 3D line symbology\"));break;case\"CIMPolygonSymbol\":I&&(k=p.clone(),d?.logWarning?.(S,\"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology\"))}if(!k)return{error:new o(\"symbol-conversion:unsupported-cim-symbol\",`CIM symbol of type '${e||\"unknown\"}' is unsupported in 3D`,{symbol:u})}}else if(u instanceof t)k=r.fromSimpleLineSymbol(u);else if(u instanceof y)k=i.fromSimpleMarkerSymbol(u);else if(u instanceof m)k=i.fromPictureMarkerSymbol(u);else if(u instanceof s)k=d.geometryType&&\"mesh\"===d.geometryType?l.fromSimpleFillSymbol(u):n.fromSimpleFillSymbol(u);else{if(!(u instanceof b))return{error:new o(\"symbol-conversion:unsupported-2d-symbol\",`2D symbol of type '${u.type||u.declaredClass}' is unsupported in 3D`,{symbol:u})};k=j?e.fromTextSymbol(u):i.fromTextSymbol(u)}return D&&k&&\"cim\"!==k.type&&(k.id=u.id),!M||\"cim\"===k.type||k instanceof a||k.symbolLayers.forEach(o=>o.ignoreDrivers=!0),{symbol:k}}export{g as defaultTo3DOptions,u as to3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{setDeepValue as o}from\"../../core/object.js\";import{isSceneServiceLayer as n}from\"../../layers/support/layerUtils.js\";import t from\"../WebStyleSymbol.js\";import{to3D as r}from\"./symbolConversion.js\";import{readSymbol as s,isSymbol3D as l}from\"./typeUtils.js\";function i(e,n,t,r){const s=a(e,{},{context:r,isLabelSymbol:!1});null!=s&&o(t,s,n)}function p(e,o,n,t){const r=a(e,{},{context:t,isLabelSymbol:!0});null!=r&&(o[n]=r)}function m(e){return l(e)||e instanceof t}function y(e){return\"polygon-3d\"===e?.type||\"line-3d\"===e?.type}function a(o,t,s){if(null==o)return null;const{context:l,isLabelSymbol:i}=s,p=l?.origin,a=l?.messages;if(\"web-scene\"===p&&!m(o)){const n=r(o,{retainCIM:!0,hasLabelingContext:i});return null!=n.symbol?n.symbol.write(t,l):(a?.push(new e(\"symbol:unsupported\",`Symbols of type '${o.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:o,context:l,error:n.error})),null)}return n(l?.layer)&&y(o)?(a?.push(new e(\"symbol:unsupported\",`Symbols of type '${o.declaredClass}' are not supported on layers of type '${l?.layer?.declaredClass}'.`,{symbol:o,context:l})),null):(\"web-map\"===p||\"portal-item\"===p&&!n(l?.layer))&&m(o)?(a?.push(new e(\"symbol:unsupported\",`Symbols of type '${o.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:o,context:l})),null):o.write(t,l)}function u(e,o){return s(e,null,o)}export{u as fromJSON,i as write,p as writeLabelSymbol};\n"],"names":["S","g","u","d","D","M","j","C","I","k","c","e","i","f","p","o","t","r","y","m","s","l","n","b","a"],"mappings":"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","x_google_ignoreList":[0,1]}