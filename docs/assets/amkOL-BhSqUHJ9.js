import{u,b as L,g as S,t as v,f as A,S as E,c as K,e as O,V as j,l as _,p as R}from"./index-B5eMh3ws.js";const V={"archeologische waarde":"#c4b5fd","hoge archeologische waarde":"#8b5cf6","zeer hoge archeologische waarde":"#6d28d9"},g={romeins:"#ef4444",steentijd:"#f59e0b",vroegeME:"#22c55e",lateME:"#3b82f6",overig:"#8b5cf6"};function k(e){return/romeinse tijd/i.test(e)}function b(e){return/paleolithicum|mesolithicum|neolithicum/i.test(e)}function F(e){return/middeleeuwen vroeg/i.test(e)}function x(e){return/middeleeuwen laat/i.test(e)&&!/middeleeuwen vroeg/i.test(e)}let w=null;async function C(){if(w)return w;const e=await _("/detectorapp-nl/data/amk_monumenten_full.topojson");return w=R(e),w}async function z(){try{const e=await C();u.getState().updateCounts(e.length,e.length);const h=new L({title:"AMK Monumenten",source:new j({features:e}),style:t=>{const o=u.getState();if(o.isActive&&(o.keyword.length>=2||o.province!=="all")){const i=t.get("omschrijving")||"",f=t.get("toponiem")||"",m=t.get("txt_label")||"",s=t.getGeometry();let l=5.5,y=52;if(s){const G=S(s.getExtent()),p=v(G,"EPSG:3857","EPSG:4326");l=p[0],y=p[1]}if(!A(i,f,m,l,y,o.keyword,o.province))return null}const n=(t.get("kwaliteitswaarde")||"").trim(),r=V[n]||"#ddd";return new E({fill:new O({color:r}),stroke:new K({color:r,width:1.1})})},opacity:.45,zIndex:10});let a="",c=!1;return u.subscribe(t=>{if(!(t.keyword===a&&t.isActive===c))if(a=t.keyword,c=t.isActive,h.changed(),t.isActive&&t.keyword.length>=2){let o=0;e.forEach(n=>{const r=n.get("omschrijving")||"",i=n.get("toponiem")||"",f=n.get("txt_label")||"",m=n.getGeometry();let s=5.5,l=52;if(m){const y=S(m.getExtent()),M=v(y,"EPSG:3857","EPSG:4326");s=M[0],l=M[1]}A(r,i,f,s,l,t.keyword,t.province)&&o++}),u.getState().updateCounts(e.length,o)}else u.getState().updateCounts(e.length,e.length)}),console.log(`✓ AMK Monumenten loaded (${e.length} features)`),h}catch(e){return console.error("Failed to load AMK layer:",e),null}}async function d(e,h,a){try{const t=(await C()).filter(n=>{const r=n.get("txt_label")||"";return h(r)}).map(n=>n.clone()),o=new L({title:e,source:new j({features:t}),style:n=>{const r=(n.get("kwaliteitswaarde")||"").trim(),i=r==="zeer hoge archeologische waarde"?.9:r==="hoge archeologische waarde"?.7:.5;return new E({fill:new O({color:a+Math.round(i*255).toString(16).padStart(2,"0")}),stroke:new K({color:a,width:1.5})})},opacity:.6,zIndex:11});return console.log(`✓ ${e} loaded (${t.length} features)`),o}catch(c){return console.error(`Failed to load ${e}:`,c),null}}async function I(){return d("AMK Romeins",k,g.romeins)}async function $(){return d("AMK Steentijd",b,g.steentijd)}async function D(){return d("AMK Vroege ME",F,g.vroegeME)}async function J(){return d("AMK Late ME",x,g.lateME)}async function N(){return d("AMK Overig",e=>!k(e)&&!b(e)&&!F(e)&&!x(e),g.overig)}export{J as createAMKLateMELayerOL,z as createAMKLayerOL,N as createAMKOverigLayerOL,I as createAMKRomeinsLayerOL,$ as createAMKSteentijdLayerOL,D as createAMKVroegeMELayerOL};
//# sourceMappingURL=amkOL-BhSqUHJ9.js.map
