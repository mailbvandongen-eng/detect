{"version":3,"file":"triangulationUtils-BaJBMAzG.js","sources":["../../node_modules/@arcgis/core/geometry/support/polygonUtils.js","../../node_modules/@arcgis/core/geometry/support/triangulationUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{deg2rad as t}from\"../../core/mathUtils.js\";import{getMetersPerUnitForSR as r,getMetersPerVerticalUnitForSR as o}from\"../../core/unitUtils.js\";import{j as s}from\"../../chunks/vec32.js\";import{getNormal as a,create as n,fromManyPoints as c}from\"./plane.js\";function i(r,o,s){const n=m(e,r,o,s)?a(e):[0,0,1];return Math.abs(n[2])>Math.cos(t(80))?2:Math.abs(n[1])>Math.abs(n[0])?1:0}function m(t,a,n,i){const m=(t=>!Array.isArray(t[0]))(a)?(t,r)=>a[3*t+r]:(t,r)=>a[t][r],e=i?r(i)/o(i):1;return c(t,(t,r)=>s(t,m(r,0)*e,m(r,1)*e,m(r,2)),n)}const e=n();export{m as fitPlane,i as leastSignificantAxis};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{e as n}from\"../../chunks/earcut.js\";import{isClockwise as t}from\"./coordsUtils.js\";import{doubleSubArray as e,doubleArrayFrom as o,newDoubleArray as r}from\"./DoubleArray.js\";import{compactMeshIndices as s}from\"./Indices.js\";import{leastSignificantAxis as i}from\"./polygonUtils.js\";import{deduplicate as l}from\"./meshUtils/deduplicate.js\";function c(t){const r=h(t.rings,t.hasZ,1,t.spatialReference),i=new Array;let c=0,a=0;for(const o of r.polygons){const t=o.count,l=o.index,f=e(r.position,3*l,3*t),h=o.holeIndices.map(n=>n-l),g=s(n(f,h,3));i.push({position:f,faces:g}),c+=f.length,a+=g.length}const g=f(i,c,a),u=Array.isArray(g.position)?l(g.position,3,{originalIndices:g.faces}):l(g.position.buffer,6,{originalIndices:g.faces});return g.position=o(new Float64Array(u.buffer)),g.faces=u.indices,g}function f(n,t,e){if(1===n.length)return n[0];const o=r(t),i=new Array(e);let l=0,c=0,f=0;for(const r of n){for(let n=0;n<r.position.length;n++)o[l++]=r.position[n];for(const n of r.faces)i[c++]=n+f;f=l/3}return{position:o,faces:s(i)}}function h(n,t,e,o){const s=n.length,i=new Array(s),l=new Array(s),c=new Array(s);let f=0;for(let r=0;r<s;++r)f+=n[r].length;let h=0,u=0,p=0;const d=r(3*f);let m=0;for(let r=s-1;r>=0;r--){const f=n[r],y=1===e&&g(f,t,o);if(y&&1!==s)i[h++]=f;else{let n=f.length;for(let t=0;t<h;++t)n+=i[t].length;const e={index:m,pathLengths:new Array(h+1),count:n,holeIndices:new Array(h)};e.pathLengths[0]=f.length,f.length>0&&(c[p++]={index:m,count:f.length}),m=y?a(f,f.length-1,-1,d,m,f.length,t):a(f,0,1,d,m,f.length,t);for(let o=0;o<h;++o){const n=i[o];e.holeIndices[o]=m,e.pathLengths[o+1]=n.length,n.length>0&&(c[p++]={index:m,count:n.length}),m=a(n,0,1,d,m,n.length,t)}h=0,e.count>0&&(l[u++]=e)}}for(let r=0;r<h;++r){const n=i[r];n.length>0&&(c[p++]={index:m,count:n.length}),m=a(n,0,1,d,m,n.length,t)}return l.length=u,c.length=p,{position:d,polygons:l,outlines:c}}function a(n,t,e,o,r,s,i){r*=3;for(let l=0;l<s;++l){const s=n[t];o[r++]=s[0],o[r++]=s[1],o[r++]=i&&s[2]?s[2]:0,t+=e}return r/3}function g(n,e,o){if(!e)return!t(n);const r=n.length-1;switch(i(n,r,o)){case 0:return!t(n,1,2);case 1:return!t(n,0,2);case 2:return!t(n,0,1)}}export{g as isCounterClockwise,h as ringsToTriangulationInfo,c as triangulate};\n"],"names":["i","r","s","n","m","e","a","t","o","c","h","l","f","g","u","p","d","y"],"mappings":"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","x_google_ignoreList":[0,1]}