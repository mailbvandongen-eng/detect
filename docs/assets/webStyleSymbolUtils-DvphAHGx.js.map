{"version":3,"file":"webStyleSymbolUtils-DvphAHGx.js","sources":["../../node_modules/@arcgis/core/symbols/support/webStyleAcceptedFormats.js","../../node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nconst e=[\"web-gltf\",\"web\",\"cim\"];export{e as defaultAcceptedFormats};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{isDevEnvironment as t,adjustStaticAGOUrl as e}from\"../../core/devEnvironmentUtils.js\";import r from\"../../core/Error.js\";import{urlToObject as o,removeFile as l}from\"../../core/urlUtils.js\";import n from\"../../portal/Portal.js\";import{f as s}from\"../../chunks/persistableUrlUtils.js\";import{fromJSON as m}from\"./jsonUtils.js\";import a from\"./StyleOrigin.js\";import{fetchStyle as i,Style2DUrlTemplate as u,requestJSON as c,makeCIMSymbolRef as p,symbolUrlFromStyleItem as f}from\"./styleUtils.js\";import{Thumbnail as y}from\"./Thumbnail.js\";import{isSymbol3D as b}from\"./typeUtils.js\";import{defaultAcceptedFormats as d}from\"./webStyleAcceptedFormats.js\";function h(t,e,o){const l=t.name;return null==l?Promise.reject(new r(\"symbolstyleutils:style-symbol-reference-name-missing\",\"Missing name in style symbol reference\")):\"Esri2DPointSymbolsStyle\"===t.styleName?U(l,e,o):i(t,e,o).then(t=>j(t,l,e,f,o))}function g(t,e){return e.items.find(e=>e.name===t)}async function j(i,u,f,h,j){const U=null!=f?.portal?f.portal:n.getDefault(),w={portal:U,url:o(i.baseUrl)},N=g(u,i.data);if(!N)throw new r(\"symbolstyleutils:symbol-name-not-found\",`The symbol name '${u}' could not be found`,{symbolName:u});const S=j?.acceptedFormats??d,D=h(N,S);if(!D)throw new r(\"symbolstyleutils:symbol-reference-no-accepted-format\",`The symbol name '${u}' does not have an accepted format (one of ${S})`,{symbolName:u});const{url:$,format:v}=D;let E=s($,w),O=N.thumbnail?.href??null;const P=N.thumbnail?.imageData;t()&&(E=e(E)??\"\",O=e(O));const T={portal:U,url:o(l(E)),origin:\"portal-item\"};return c(E,j).then(t=>{const e=\"cim\"===v?p(t.data):t.data,r=m(e,T);if(r&&b(r)){if(O){const t=s(O,w);r.thumbnail=new y({url:t})}else P&&(r.thumbnail=new y({url:`data:image/png;base64,${P}`}));i.styleUrl?r.styleOrigin=new a({portal:f.portal,styleUrl:i.styleUrl,name:u}):i.styleName&&(r.styleOrigin=new a({portal:f.portal,styleName:i.styleName,name:u}))}return r})}function U(t,e,r){const s=u.replaceAll(/\\{SymbolName\\}/gi,t),a=null!=e.portal?e.portal:n.getDefault();return c(s,r).then(t=>{const e=p(t.data);return m(e,{portal:a,url:o(l(s)),origin:\"portal-item\"})})}export{j as fetchSymbolFromStyle,g as getStyleItemFromStyle,h as resolveWebStyleSymbol};\n"],"names":["e","h","o","l","r","U","i","t","j","f","g","u","n","w","N","S","d","D","E","s","O","P","T","c","p","m","b","y","a"],"mappings":"oXAIA,MAAMA,EAAE,CAAC,WAAW,MAAM,KAAK,ECAmnB,SAASC,EAAE,EAAE,EAAEC,EAAE,CAAC,MAAMC,EAAE,EAAE,KAAK,OAAaA,GAAN,KAAQ,QAAQ,OAAO,IAAIC,EAAE,uDAAuD,wCAAwC,CAAC,EAA8B,EAAE,YAA9B,0BAAwCC,EAAEF,EAAE,EAAED,CAAC,EAAEI,EAAE,EAAE,EAAEJ,CAAC,EAAE,KAAKK,GAAGC,EAAED,EAAEJ,EAAE,EAAEM,EAAEP,CAAC,CAAC,CAAC,CAAC,SAASQ,EAAE,EAAE,EAAE,CAAC,OAAO,EAAE,MAAM,KAAKV,GAAGA,EAAE,OAAO,CAAC,CAAC,CAAC,eAAeQ,EAAEF,EAAEK,EAAEF,EAAER,EAAEO,EAAE,CAAC,MAAMH,EAAQI,GAAG,QAAT,KAAgBA,EAAE,OAAOG,EAAE,WAAU,EAAGC,EAAE,CAAC,OAAOR,EAAE,IAAIH,EAAEI,EAAE,OAAO,CAAC,EAAEQ,EAAEJ,EAAEC,EAAEL,EAAE,IAAI,EAAE,GAAG,CAACQ,EAAE,MAAM,IAAIV,EAAE,yCAAyC,oBAAoBO,CAAC,uBAAuB,CAAC,WAAWA,CAAC,CAAC,EAAE,MAAMI,EAAEP,GAAG,iBAAiBQ,EAAEC,EAAEhB,EAAEa,EAAEC,CAAC,EAAE,GAAG,CAACE,EAAE,MAAM,IAAIb,EAAE,uDAAuD,oBAAoBO,CAAC,8CAA8CI,CAAC,IAAI,CAAC,WAAWJ,CAAC,CAAC,EAAE,KAAK,CAAC,IAAI,EAAE,OAAO,CAAC,EAAEM,EAAE,IAAIC,EAAEC,EAAE,EAAEN,CAAC,EAAEO,EAAEN,EAAE,WAAW,MAAM,KAAK,MAAMO,EAAEP,EAAE,WAAW,UAAUP,EAAC,IAAKW,EAAElB,EAAEkB,CAAC,GAAG,GAAGE,EAAEpB,EAAEoB,CAAC,GAAG,MAAME,EAAE,CAAC,OAAOjB,EAAE,IAAIH,EAAEC,EAAEe,CAAC,CAAC,EAAE,OAAO,aAAa,EAAE,OAAOK,EAAEL,EAAEV,CAAC,EAAE,KAAKD,GAAG,CAAC,MAAMP,EAAU,IAAR,MAAUwB,EAAEjB,EAAE,IAAI,EAAEA,EAAE,KAAKH,EAAEqB,EAAEzB,EAAEsB,CAAC,EAAE,GAAGlB,GAAGsB,EAAEtB,CAAC,EAAE,CAAC,GAAGgB,EAAE,CAAC,MAAMb,EAAEY,EAAEC,EAAEP,CAAC,EAAET,EAAE,UAAU,IAAIuB,EAAE,CAAC,IAAIpB,CAAC,CAAC,CAAC,MAAMc,IAAIjB,EAAE,UAAU,IAAIuB,EAAE,CAAC,IAAI,yBAAyBN,CAAC,EAAE,CAAC,GAAGf,EAAE,SAASF,EAAE,YAAY,IAAIwB,EAAE,CAAC,OAAOnB,EAAE,OAAO,SAASH,EAAE,SAAS,KAAKK,CAAC,CAAC,EAAEL,EAAE,YAAYF,EAAE,YAAY,IAAIwB,EAAE,CAAC,OAAOnB,EAAE,OAAO,UAAUH,EAAE,UAAU,KAAKK,CAAC,CAAC,EAAE,CAAC,OAAOP,CAAC,CAAC,CAAC,CAAC,SAASC,EAAE,EAAE,EAAED,EAAE,CAAC,MAAMe,EAAER,EAAE,WAAW,mBAAmB,CAAC,EAAEiB,EAAQ,EAAE,QAAR,KAAe,EAAE,OAAOhB,EAAE,WAAU,EAAG,OAAOW,EAAEJ,EAAEf,CAAC,EAAE,KAAKG,GAAG,CAAC,MAAMP,EAAEwB,EAAEjB,EAAE,IAAI,EAAE,OAAOkB,EAAEzB,EAAE,CAAC,OAAO4B,EAAE,IAAI1B,EAAEC,EAAEgB,CAAC,CAAC,EAAE,OAAO,aAAa,CAAC,CAAC,CAAC,CAAC","x_google_ignoreList":[0,1]}