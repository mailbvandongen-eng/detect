{"version":3,"mappings":"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","names":["i","t","__vitePreload","s","r","a","e","l","n","u","o","g","c","m","h","T","d","M","j","p","_","w","v","D","f","E","F","U","x","y","A"],"ignoreList":[0,1,2,3],"sources":["../../node_modules/@arcgis/core/libs/basisu/BasisUTranscoder.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BasisUtil.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/textureUtils.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as s}from\"../../assets.js\";function i(){return t??=(async()=>{const i=await import(\"../../chunks/basis_transcoder.js\"),t=await i.default({locateFile:i=>s(`esri/libs/basisu/${i}`)});return t.initializeBasis(),t})(),t}let t;export{i as getBasisTranscoder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{getBasisTranscoder as e}from\"../../../../libs/basisu/BasisUTranscoder.js\";import{CompressedTextureFormat as t}from\"../../../webgl/enums.js\";import{Texture as n}from\"../../../webgl/Texture.js\";import{getFormatBytesPerElement as s}from\"../../../webgl/Util.js\";let r=null,i=null;async function a(){return null==i&&(i=e(),r=await i),i}function l(e,t){if(null==r)return e.byteLength;const n=new r.BasisFile(new Uint8Array(e)),s=u(n)?o(n.getNumLevels(0),n.getHasAlpha(),n.getImageWidth(0,0),n.getImageHeight(0,0),t):0;return n.close(),n.delete(),s}function g(e,t){if(null==r)return e.byteLength;const n=new r.KTX2File(new Uint8Array(e)),s=c(n)?o(n.getLevels(),n.getHasAlpha(),n.getWidth(),n.getHeight(),t):0;return n.close(),n.delete(),s}function o(e,n,r,i,a){const l=s(n?t.COMPRESSED_RGBA8_ETC2_EAC:t.COMPRESSED_RGB8_ETC2),g=a&&e>1?(4**e-1)/(3*4**(e-1)):1;return Math.ceil(r*i*l*g)}function u(e){return e.getNumImages()>=1&&!e.isUASTC()}function c(e){return e.getFaces()>=1&&e.isETC1S()}async function m(e,t,n){null==r&&(r=await a());const s=new r.BasisFile(new Uint8Array(n));if(!u(s))return null;s.startTranscoding();const i=h(e,t,s.getNumLevels(0),s.getHasAlpha(),s.getImageWidth(0,0),s.getImageHeight(0,0),(e,t)=>s.getImageTranscodedSizeInBytes(0,e,t),(e,t,n)=>s.transcodeImage(n,0,e,t,0,0));return s.close(),s.delete(),i}async function T(e,t,n){null==r&&(r=await a());const s=new r.KTX2File(new Uint8Array(n));if(!c(s))return null;s.startTranscoding();const i=h(e,t,s.getLevels(),s.getHasAlpha(),s.getWidth(),s.getHeight(),(e,t)=>s.getImageTranscodedSizeInBytes(e,0,0,t),(e,t,n)=>s.transcodeImage(n,e,0,0,t,0,-1,-1));return s.close(),s.delete(),i}function h(e,s,r,i,a,l,g,o){const{compressedTextureETC:u,compressedTextureS3TC:c}=e.capabilities,[m,T]=u?i?[1,t.COMPRESSED_RGBA8_ETC2_EAC]:[0,t.COMPRESSED_RGB8_ETC2]:c?i?[3,t.COMPRESSED_RGBA_S3TC_DXT5_EXT]:[2,t.COMPRESSED_RGB_S3TC_DXT1_EXT]:[13,6408],h=s.hasMipmap?r:Math.min(1,r),d=[];for(let t=0;t<h;t++)d.push(new Uint8Array(g(t,m))),o(t,m,d[t]);return s.internalFormat=T,s.hasMipmap=d.length>1,s.samplingMode=s.hasMipmap?9987:9729,s.width=a,s.height=l,new n(e,s,{type:\"compressed\",levels:d})}export{c as checkKTX2,m as createTextureBasis,T as createTextureKTX2,l as estimateMemoryBasis,g as estimateMemoryKTX2,a as loadBasisTranscoder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport t from\"../../../../core/Error.js\";const e=16;function n(t,n){return n=Math.floor(n/e)*e,Math.min(Math.round(t/e)*e,n)}function r(t,n){return n=Math.floor(n/e)*e,Math.min(Math.ceil(t/e)*e,n)}function o(t,e){const[n,r]=a(t,e);return t.width===n&&t.height===r?t:i(t,n,r)}function a({width:t,height:e},{maxPreferredTexturePixels:r,maxTextureSize:o}){const a=Math.max(t,e),i=t*e;if(a<=o&&i<=r)return[t,e];const h=Math.min(Math.sqrt(r/i),o/a);return[n(Math.round(t*h),o),n(Math.round(e*h),o)]}function i(t,e,n){if(t instanceof ImageData)return i(h(t),e,n);const r=document.createElement(\"canvas\");r.width=e,r.height=n;return r.getContext(\"2d\").drawImage(t,0,0,r.width,r.height),r}function h(e){const n=document.createElement(\"canvas\");n.width=e.width,n.height=e.height;const r=n.getContext(\"2d\");if(null==r)throw new t(\"texture:context-failed\",\"Failed to create 2d context from HTMLCanvasElement\");return r.putImageData(e,0,0),n}export{n as applyTextureResizeModulo,r as applyTextureResizeModuloCeil,o as ensureImageMaxSize,a as ensureTextureSize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import e from\"../../../../core/Error.js\";import{EventEmitter as t}from\"../../../../core/Evented.js\";import{disposeMaybe as r,removeMaybe as i}from\"../../../../core/maybe.js\";import{throwIfAborted as a,onAbort as s,createAbortError as o}from\"../../../../core/promiseUtils.js\";import{isUint8Array as n,isArrayBuffer as l,isTypedArray as m}from\"../../../../core/typedArrayUtil.js\";import{generateUID as h}from\"../../../../core/uid.js\";import{isBlobProtocol as p,isDataProtocol as d}from\"../../../../core/urlUtils.js\";import{whenVideoPlayable as _}from\"../../../../layers/support/videoUtils.js\";import{requestImage as u}from\"../../../../support/requestImageUtils.js\";import{loadImageAsync as c}from\"../../../../support/requestUtils.js\";import{createTextureKTX2 as g,createTextureBasis as T,estimateMemoryKTX2 as x,estimateMemoryBasis as y}from\"./BasisUtil.js\";import{createDDSTexture as f}from\"./DDSUtil.js\";import{ensureImageMaxSize as F}from\"./textureUtils.js\";import{assert as E}from\"./Util.js\";import{Texture as D}from\"../../../webgl/Texture.js\";import{TextureDescriptor as w}from\"../../../webgl/TextureDescriptor.js\";import{getFormatComponents as A}from\"../../../webgl/Util.js\";class M{constructor(e,r){this._data=e,this.id=h(),this.events=new t,this._parameters={...j,...r},this._startPreload(e)}dispose(){this.unload(),this._data=this.update=void 0}_startPreload(e){e instanceof HTMLVideoElement?(this.update=t=>this._update(e,t),this._startPreloadVideoElement(e)):e instanceof HTMLImageElement&&this._startPreloadImageElement(e)}_startPreloadVideoElement(e){if(!(p(e.src)||\"auto\"===e.preload&&e.crossOrigin)&&(e.preload=\"auto\",e.crossOrigin=\"anonymous\",e.src=e.src,e.paused&&e.autoplay)){const t=[];_(e,e=>t.push(e)).then(()=>{e.play()}).finally(()=>t.forEach(e=>e.remove()))}}_startPreloadImageElement(e){d(e.src)||p(e.src)||e.crossOrigin||(e.crossOrigin=\"anonymous\",e.src=e.src)}_createDescriptor(e){const t=new w;return t.wrapMode=this._parameters.wrap??10497,t.flipped=!this._parameters.noUnpackFlip,t.samplingMode=this._parameters.mipmap?9987:9729,t.hasMipmap=!!this._parameters.mipmap,t.preMultiplyAlpha=!!this._parameters.preMultiplyAlpha,t.maxAnisotropy=this._parameters.maxAnisotropy??(this._parameters.mipmap?e.parameters.maxMaxAnisotropy:1),t.dataType=this._parameters.dataType??t.dataType,t.pixelFormat=this._parameters.pixelFormat??t.pixelFormat,t.internalFormat=this._parameters.internalFormat??t.internalFormat,t}get glTexture(){return this._glTexture??this._emptyTexture}get loaded(){return null!=this._glTexture}get usedMemory(){return this._glTexture?.usedMemory||v(this._data,this._parameters)}load(e){if(this._loadingPromise)return this._loadingPromise;if(this._glTexture)return this._glTexture;const t=this._data;return null==t?(this._glTexture=new D(e,this._createDescriptor(e),null),this._glTexture):(this._emptyTexture=e.emptyTexture,this._parameters.reloadable||(this._data=void 0),\"string\"==typeof t?this._loadFromURL(e,t):t instanceof Image?this._loadFromImageElement(e,t):t instanceof HTMLVideoElement?this._loadFromVideoElement(e,t):t instanceof ImageData||t instanceof HTMLCanvasElement?this._loadFromImage(e,t):n(t)&&\"image/vnd-ms.dds\"===this._parameters.encoding?this._loadFromDDSData(e,t):l(t)&&\"image/vnd-ms.dds\"===this._parameters.encoding?this._loadFromDDSData(e,new Uint8Array(t)):(l(t)||n(t))&&\"image/ktx2\"===this._parameters.encoding?this._loadFromKTX2(e,t):(l(t)||n(t))&&\"image/x.basis\"===this._parameters.encoding?this._loadFromBasis(e,t):l(t)?this._loadFromPixelData(e,new Uint8Array(t)):m(t)?this._loadFromPixelData(e,t):null)}_update(e,t){return null==this._glTexture||e.readyState<HTMLMediaElement.HAVE_CURRENT_DATA||t===e.currentTime?t:(this._glTexture.setData(e),this._glTexture.descriptor.hasMipmap&&this._glTexture.generateMipmap(),this._parameters.updateCallback&&this._parameters.updateCallback(),e.currentTime)}_loadFromDDSData(e,t){return this._glTexture=f(e,this._createDescriptor(e),t),this._emptyTexture=null,this._glTexture}_loadFromKTX2(e,t){return this._loadAsync(()=>g(e,this._createDescriptor(e),t).then(e=>(this._glTexture=e,e)))}_loadFromBasis(e,t){return this._loadAsync(()=>T(e,this._createDescriptor(e),t).then(e=>(this._glTexture=e,e)))}_loadFromPixelData(e,t){E(this._parameters.width>0&&this._parameters.height>0);const r=this._createDescriptor(e);return 6407!==r.pixelFormat&&6408!==r.pixelFormat||(r.compress=this._parameters.compressionOptions),r.width=this._parameters.width??0,r.height=this._parameters.height??0,this._glTexture=new D(e,r,t),this._glTexture}_loadFromURL(e,t){return this._loadAsync(async r=>{const i=await u(t,{signal:r});return a(r),this._loadFromImage(e,i)})}_loadFromImageElement(e,t){return t.complete?this._loadFromImage(e,t):this._loadAsync(async r=>{const i=await c(t,t.src,!1,r);return a(r),this._loadFromImage(e,i)})}_loadFromVideoElement(e,t){return t.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA?this._loadFromImage(e,t):this._loadFromVideoElementAsync(e,t)}_loadFromVideoElementAsync(t,r){return this._loadAsync(a=>new Promise((n,l)=>{const m=()=>{r.removeEventListener(\"loadeddata\",h),r.removeEventListener(\"error\",p),i(d)},h=()=>{r.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&(m(),n(this._loadFromImage(t,r)))},p=t=>{m(),l(t||new e(\"texture:load-error\",\"Failed to load video\"))};r.addEventListener(\"loadeddata\",h),r.addEventListener(\"error\",p);const d=s(a,()=>p(o()))}))}_loadFromImage(e,t){let r=t;r instanceof HTMLVideoElement||(r=F(r,e.parameters));const i=U(r);this._parameters.width=i.width,this._parameters.height=i.height;const a=this._createDescriptor(e);return a.width=i.width,a.height=i.height,a.compress=this._parameters.compressionOptions,this._glTexture=new D(e,a,r),this._emptyTexture=null,this.events.emit(\"loaded\"),this._glTexture}_loadAsync(e){const t=new AbortController;this._loadingController=t;const r=e(t.signal);this._loadingPromise=r;const i=()=>{this._loadingController===t&&(this._loadingController=null),this._loadingPromise===r&&(this._loadingPromise=null),this._emptyTexture=null};return r.then(i,i),r}unload(){if(this._glTexture=r(this._glTexture),this._emptyTexture=null,null!=this._loadingController){const e=this._loadingController;this._loadingController=null,this._loadingPromise=null,e.abort()}this.events.emit(\"unloaded\")}get parameters(){return this._parameters}}function v(e,t){if(null==e)return 0;if(l(e)||n(e))return\"image/ktx2\"===t.encoding?x(e,!!t.mipmap):\"image/x.basis\"===t.encoding?y(e,!!t.mipmap):e.byteLength;const{width:r,height:i}=e instanceof Image||e instanceof ImageData||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement?U(e):t,a=t.pixelFormat??6408,s=A(a);return(t.mipmap?4/3:1)*r*i*s||0}function U(e){return e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e}const j={wrap:{s:10497,t:10497},mipmap:!0,noUnpackFlip:!1,preMultiplyAlpha:!1};export{M as Texture};\n"],"file":"Texture-CQUwKAKS.js"}