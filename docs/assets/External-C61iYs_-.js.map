{"version":3,"file":"External-C61iYs_-.js","sources":["../../node_modules/@arcgis/core/geometry/support/meshUtils/External.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport s from\"../../../request.js\";import{equals as t}from\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import{throwIfAborted as e}from\"../../../core/promiseUtils.js\";import{getFileFormatId as r,getMimeTypeOrFilenameFormatId as a}from\"../../../layers/support/infoFor3D.js\";class i{constructor(s,t,e){this.assetName=s,this.assetMimeType=t,this.parts=e}equals(s){return this===s||this.assetName===s.assetName&&this.assetMimeType===s.assetMimeType&&t(this.parts,s.parts,(s,t)=>s.equals(t))}isOnService(s){return this.parts.every(t=>t.isOnService(s))}makeHash(){let s=\"\";for(const t of this.parts)s+=t.partHash;return s}async toBlob(s){const{parts:t}=this;if(1===t.length)return t[0].toBlob(s);const r=await Promise.all(t.map(t=>t.toBlob(s)));return e(s),new Blob(r)}}class n{constructor(s,t){this.partUrl=s,this.partHash=t}equals(s){return this===s||this.partUrl===s.partUrl&&this.partHash===s.partHash}isOnService(s){return this.partUrl.startsWith(`${s.path}/assets/`)}async toBlob(t){const{data:r}=await s(this.partUrl,{responseType:\"blob\"});return e(t),r}}function o(s){return l(s?.source)}const c=/^(model\\/gltf\\+json)|(model\\/gltf-binary)$/,u=/\\.(gltf|glb)/i;function l(s){switch(s?.type){case\"client\":return Array.isArray(s.files)?s.files.some(p):p(s.files);case\"service\":return s.assets.some(p);case\"loadable\":return!0;default:return!1}}function p(s){if(s instanceof File){const{type:t,name:e}=s;return c.test(t)||u.test(e)}return c.test(s.assetMimeType)||u.test(s.assetName)}function f(s,t){if(!s)return!1;const{source:e}=s;return h(e,t)}function m(s,t){if(s===t)return!0;const{source:e}=s,{source:r}=t;if(e===r)return!0;if(\"service\"===e.type&&\"service\"===r.type){if(e.assets.length!==r.assets.length)return!1;const s=(s,t)=>s.assetName<t.assetName?-1:s.assetName>t.assetName?1:0,t=[...e.assets].sort(s),a=[...r.assets].sort(s);for(let e=0;e<t.length;++e)if(!t[e].equals(a[e]))return!1;return!0}return!1}function h(s,t){return\"service\"===s.type&&s.assets.every(s=>s.isOnService(t))}function y(s,t){return s instanceof File?r(s,t):a(s.assetMimeType,s.assetName,t)}function b(s){switch(s.type){case\"client\":return Array.isArray(s.files)?s.files:[s.files];case\"service\":return s.assets;case\"loadable\":return}}function v(s){return!!s.original}export{i as ServiceAsset,n as ServiceAssetPart,y as assetFormatId,f as externalIsOnService,b as externalSourceToMultiPart,m as externalSourcesAreEqual,p as isDisplayAsset,o as isDisplayExternal,l as isDisplaySource,v as isOriginalExternal};\n"],"names":["i","s","t","e","n","r","o","l","c","u","p","f","h","m","a","y","b","v"],"mappings":"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","x_google_ignoreList":[0]}